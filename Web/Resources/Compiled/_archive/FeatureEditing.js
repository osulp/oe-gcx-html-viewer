require({cache:{"Mapping/modules/FeatureEditing/FeatureEditingModule":function(){define(["require","exports","geocortex/framework/application/ModuleBase"],function(e,t,i){"use strict";var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.getEditingGeometryStatusMessage=function(e,t,i,a){var r=Modernizr&&!!Modernizr.touch;switch(i){case esri.toolbars.Draw.POINT:return e.getResource(t,"language-feature-editing-geometry-point");case esri.toolbars.Draw.MULTI_POINT:return a?e.getResource(t,"language-feature-editing-geometry-multi-point"):e.getResource(t,"language-feature-editing-geometry-point");case esri.toolbars.Draw.POLYLINE:case esri.toolbars.Draw.FREEHAND_POLYLINE:var n=r?e.getResource(t,"language-feature-editing-geometry-polyline-touch"):e.getResource(t,"language-feature-editing-geometry-polyline");return n;case esri.toolbars.Draw.POLYGON:case esri.toolbars.Draw.FREEHAND_POLYGON:var n=r?e.getResource(t,"language-feature-editing-geometry-polygon-touch"):e.getResource(t,"language-feature-editing-geometry-polygon");return n;case esri.toolbars.Draw.EXTENT:return e.getResource(t,"language-feature-editing-geometry-rectangle")}return e.getResource(t,"language-feature-editing-geometry-default")},t}(i.ModuleBase);t.FeatureEditingModule=a})},"Mapping/modules/FeatureEditing/TemplatePickerView":function(){define(["require","exports","geocortex/framework/ui/ViewBase","geocortex/essentials/Layer"],function(e,t,i,a){"use strict";var r=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.app.commandRegistry.command("ShowFeatureTemplatePicker").register(r,function(e){if(this.app.commandRegistry.command("ActivateView").execute(this.id),this.viewModel)if(this.app.isOffline.get()===!0){var t=this;this.app.store.get("__featureLayerModuleIndex",function(i){if(i){var a=JSON.parse(i);if(a){t.viewModel.filteredLayers=[];for(var r in a.featureLayers){if(!a.featureLayers.hasOwnProperty(r))break;t.viewModel.filteredLayers.push(a.featureLayers[r].serviceId)}}}t._loadTemplate(e)})}else this.viewModel.filteredLayers&&(this.viewModel.filteredLayers.length=0,this.viewModel.filteredLayers=null),this._loadTemplate(e)},function(e){return void 0===e||!!("object"==typeof e&&e instanceof a.Layer&&e.mapService&&e.mapService.serviceLayer&&e.mapService.serviceLayer.isEditable)&&e.mapService.serviceLayer.isEditable()}),r}return __extends(t,e),t.prototype._loadTemplate=function(e){e?this.viewModel.loadTemplatesForCurrentLayer(e):this.viewModel.loadLayerTemplates()},t.prototype.handleFeatureTemplateClick=function(e,t,i){var a=null;i.proto&&i.proto.toJson?a=new esri.Graphic(i.proto.toJson()):(a=new esri.Graphic(null),i.proto&&i.proto.attributes&&(a.attributes=i.proto.attributes));var r=null;if(i.drawingTool&&i.drawingTool.value)switch(i.drawingTool.value){case"esriFeatureEditToolPoint":r="MapPoint";break;case"esriFeatureEditToolLine":r="Polyline";break;case"esriFeatureEditToolFreehand":"esriGeometryPolyline"===i.layer.geometryType?r="FreehandPolyline":"esriGeometryPolygon"===i.layer.geometryType&&(r="FreehandPolygon");break;case"esriFeatureEditToolAutoCompletePolygon":case"esriFeatureEditToolPolygon":r="Polygon";break;case"esriFeatureEditToolRectangle":"esriGeometryPolygon"===i.layer.geometryType&&dojo.mixin(a,{needsConversion:!0}),r="Rectangle";break;default:r="Polygon"}if(!r)switch(i.layer.geometryType){case"esriGeometryPoint":r="MapPoint";break;default:r=i.layer.geometryType.replace("esriGeometry","")}i.layer.add(a),i.layer.show&&i.layer.show(),dojo.mixin(a,{drawType:r}),this.app.commandRegistry.command("StartAddingFeatureGeometry").execute(a),this.app.commandRegistry.command("ActivateView").execute("MapView")},t}(i.ViewBase);t.TemplatePickerView=r})},"Mapping/modules/FeatureEditing/TemplatePickerViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","./Templates/FeatureTemplateViewModel"],function(e,t,i,a,r){"use strict";var n=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.layerTemplates=null,r.filteredLayers=null,r.layerTemplates=new a.ObservableCollection,r}return __extends(t,e),t.prototype.initialize=function(e){this.app.eventRegistry.event("SiteServiceLayersLoadedEvent").subscribe(this,this.loadLayerTemplates)},t.prototype._layerIsValidForEditing=function(e){if(!e)return!1;var t=!0;if(this.filteredLayers){t=!1;for(var i=0;i<this.filteredLayers.length;i++){var a=this.filteredLayers[i];if(a===e){t=!0;break}}}return t},t.prototype.loadTemplatesForCurrentLayer=function(e){if(e&&e.mapService){this.layerTemplates.clear();var t=this._getFeatureLayerModel(e.mapService);t&&this.layerTemplates.addItem(t)}},t.prototype.loadLayerTemplates=function(){if(this.app.site&&this.app.site.essentialsMap&&this.app.site.isInitialized){var e=this.app.site.getFeatureServices();this.layerTemplates.clear();for(var t=[],i=0;i<e.length;i++){var a=e[i],r=this._getFeatureLayerModel(a);r&&t.push(r)}this.layerTemplates.addItems(t)}},t.prototype._getFeatureLayerModel=function(e){if(e){if(!this._layerIsValidForEditing(e.id))return null;if(e.serviceLayer.isEditable&&e.serviceLayer.isEditable()){var t=e.displayName;e&&e.layers&&e.layers.length>0&&(t=e.layers[0].displayName);var i=new a.ObservableCollection,r=!0,n=this._loadFeatureTemplates(e.serviceLayer);n&&n.length>0&&(i.addItems(n),r=!1);var s={displayName:new a.Observable(t),mapServiceId:new a.Observable(e.id),layer:e.serviceLayer,templates:i};if(r){s.proto={attributes:[]};for(var o=0;o<e.serviceLayer.fields.length;o++)s.attributes.push(e.serviceLayer.fields[o])}return s}}},t.prototype.createTemplate=function(e,t){var i=new r.FeatureTemplateViewModel(this.app,this.libraryId);if(t){var a=t.name;if(i.name.set(a),i.description.set(t.description),i.drawingTool.set(t.drawingTool),i.proto=t.prototype,e.renderer){var n=this._getTemplateSymbol(a,e.renderer);if(n)switch(n.type){case"picturemarkersymbol":i.symbolUri.set(n.url);break;default:i.setTemplateShapeStyle("background-color:"+n.color.toCss()+";height:24px;width:24px");var s=this._getSVGShapeType(n.type);i.createSVGElement(s.shapeType,s.points)}}}return i.layer=e,i},t.prototype._consumeTemplate=function(e,t){return this.createTemplate(e,t)},t.prototype._getSVGShapeType=function(e){var t={shapeType:null,points:null};switch(e){case"simplelinesymbol":t.shapeType="polyline",t.points="20,1 25,9 16,21 8,2";break;case"simplemarkersymbol":case"simplefillsymbol":t.shapeType="polygon",t.points="30,1 35,9 20,21 8,2"}return t},t.prototype._getTemplateSymbol=function(e,t){if(e&&t){if(!t.infos)return t.symbol;for(var i=0;i<t.infos.length;i++){var a=t.infos[i];if(a.label===e||a.value===e)return a.symbol}}},t.prototype._loadFeatureTemplates=function(e){if(e&&e.templates){var t=[];if(e.templates.length>0)for(var i=0;i<e.templates.length;++i)t.push(this._consumeTemplate(e,e.templates[i]));else if(e.types&&e.types.length>0)for(var i=0;i<e.types.length;++i){var a=e.types[i];if(a.templates)for(var r=0;r<a.templates.length;++r)t.push(this._consumeTemplate(e,a.templates[r]))}return t}},t}(i.ViewModelBase);t.TemplatePickerViewModel=n})},"Mapping/modules/FeatureEditing/Editor/AttributeEditorView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,i){"use strict";var a=function(e){function t(t,i){var a=e.call(this,t,i)||this;return a.inactive=null,a.app.commandRegistry.command("ShowFeatureAttributeEditor").register(a,function(){this.app.commandRegistry.command("ActivateView").execute(this.id)}),a.app.commandRegistry.command("HideFeatureAttributeEditor").register(a,function(){return this.isActive&&this.app.viewManager.deactivateView(this),!1}),a}return __extends(t,e),t.prototype.deactivated=function(){this.inactive||(this.inactive=!0,e.prototype.deactivated.call(this),this.viewModel&&this.viewModel._cancelEditing())},t.prototype.attach=function(t){e.prototype.attach.call(this,t),t&&this.title.sync(t.headerText)},t.prototype.handleButtonClick=function(e,t,i){return this.viewModel.applyButtonClick(i),!1},t.prototype.handleTypeFieldChange=function(e,t,i){return this.viewModel.typeFieldSelected(i),!1},t}(i.ViewBase);t.AttributeEditorView=a})},"Mapping/modules/FeatureEditing/Editor/AttributeEditorViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","geocortex/forms/FormButton","geocortex/infrastructure/Feature","geocortex/essentials/GeometryUtilities","geocortex/geocortex","geocortex/infrastructure/GeometryUtils","./../FeatureEditingModule","geocortex/forms/items/DatePickerFormItem","geocortex/forms/items/TimePickerFormItem"],function(e,t,i,a,r,n,s,o,l,d,u,c){"use strict";var p=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.isApplyingEdits=null,r.feature=null,r.featureClone=null,r.fields=null,r.currentMapService=null,r.currentToolName=null,r.editingActive=null,r.editingNewFeature=null,r.hasRelatedLayers=null,r.validationMessages=null,r.isEditingRelatedFeatureNotInSite=null,r.isEditingGeometry=null,r.featureTypeHasGeometry=null,r.editGeometryButton=null,r.hasGeometry=null,r.geometry=null,r.attributes=null,r.templates=null,r.defaultButton=null,r.buttons=null,r.validateGeometry=null,r.headerText=null,r.originalSymbol=null,r._editingRelationshipOrigin=null,r._editingRelationshipDestination=null,r._editingGeometryMapClickHandle=null,r._relatedFeature=null,r._editObject=null,r._layerClickEvents=null,r._lastLayer=null,r._newObjectId=0,r._editLogEntry=null,r._editorDeactivatedHandle=null,r._isEditingGeometry=!1,r.isApplyingEdits=new a.Observable((!1)),r.feature=new a.Observable(null),r.gcxFeature=new a.Observable(null),r.fields=new a.ObservableCollection([]),r.editingActive=new a.Observable((!1)),r.editingNewFeature=new a.Observable(null),r.validationMessages=new a.ObservableCollection([]),r.hasRelatedLayers=new a.Observable((!1)),r.isEditingRelatedFeatureNotInSite=new a.Observable((!1)),r.isEditingGeometry=new a.Observable((!1)),r.featureTypeHasGeometry=new a.Observable((!1)),r.hasGeometry=new a.Observable((!1)),r.geometry=new a.Observable(null),r.currentMapService=new a.Observable(null),r.headerText=new a.Observable(""),r._layerClickEvents=[],r.buttons=new a.ObservableCollection,r._registerCommands(),r._listenToMapEvents(),r}return __extends(t,e),t.prototype.initialize=function(e){e&&e.tools&&this.app&&this.app.toolRegistry&&this.app.toolRegistry.createTools(e.tools,!0),e&&e.validateGeometry?this.validateGeometry=e.validateGeometry:this.validateGeometry=!0},t.prototype._getToolNameByDrawType=function(e){return e||(e="Polygon"),"Editing"+e+"Tool"},t.prototype._registerCommands=function(){this.app.commandRegistry.command("StartAddingFeatureGeometry").register(this,function(e){e&&(this.headerText.set(this.app.getResource(this.libraryId,"language-common-feature-editing")),this.currentToolName=this._getToolNameByDrawType(e.drawType),this.editingNewFeature.set(!0),this.setFeature(e),this.app.commandRegistry.command("ShowMap").execute(),this._editGeometry())}),this.app.commandRegistry.command("StartEditingFeature").register(this,this._executeStartEditingFeature,function(e){if(e&&e.layer){var t=e.layer;if(t.mapService&&t.mapService.serviceLayer&&t.mapService.serviceLayer.isEditable)return t.mapService.serviceLayer.isEditable()}return!1}),this.app.commandRegistry.command("StartEditingNewFeature").register(this,this._executeStartEditingNewFeature),this.app.commandRegistry.command("SetEditorFeatureGeometry").register(this,this._executeSetEditorGeometry),this.app.commandRegistry.command("StartEditingEditLogEntry").register(this,function(e){this.headerText.set(e.getDescription(this.app,this.libraryId)),this.editingNewFeature.set(!1);var t=new esri.Graphic(e.feature.toJson?e.feature.toJson():e.feature);this.setFeature(t,e.mapServiceUrl),this._editLogEntry=e,this._setupButtons(),this.app.commandRegistry.command("ShowFeatureAttributeEditor").execute()}),this.app.event("FeatureDataSyncStartedEvent").register(this,this._cancelEditing)},t.prototype._listenToMapEvents=function(){this.app.eventRegistry.event("MapExtentChangedEvent").subscribe(this,function(e){var t=this;if(t.isEditingGeometry.get()&&!t.editingNewFeature.get()){var i=t.featureClone;if(i){var a=function(e){var a=t._findFeatureInLayer(i,e);a&&(a.setGeometry(i.geometry),a.hide())};if(t._lastLayer.updating)var r=dojo.connect(t._lastLayer,"onUpdateEnd",function(){if(t._lastLayer.loaded)a(this);else var e=dojo.connect(t._lastLayer,"onLoad",function(){a(this),dojo.disconnect(e)});dojo.disconnect(r)});else a(t._lastLayer)}}}),this.app.eventRegistry.event("OfflineMapActivatedEvent").subscribe(this,this._resetGeometryEditingTool)},t.prototype._resetGeometryEditingTool=function(){this.editingNewFeature.get()&&(this.cancel(),this.app.commandRegistry.command("ShowFeatureTemplatePicker").execute())},t.prototype._setupButtons=function(){var e=[];this.buttons.clear();var t=new a.Observable((!0)),i=null,n=null;if(null==this._editLogEntry){i=this.app.getResource(this.libraryId,"language-common-delete");var s=dojo.mixin(new r.FormButton(i,"Delete",(!1),(!1)),{visibility:new a.Observable,callback:this._confirmDelete});s.visibility.syncTransform(this.editingNewFeature,function(e){return!e}),e.push(s)}if(this.featureTypeHasGeometry.get()){this.hasGeometry.get()?(i=this.app.getResource(this.libraryId,"language-feature-editing-edit-geometry-caption"),n="EditGeometry"):(i=this.app.getResource(this.libraryId,"language-feature-editing-add-geometry-caption"),n="AddGeometry"),this.editGeometryButton=dojo.mixin(new r.FormButton(i,n,(!0),(!1)),{visibility:t,callback:this._editGeometry}),this.editGeometryButton.visibility.syncTransform(this.isEditingGeometry,function(e){return!e}),e.push(this.editGeometryButton),i=this.app.getResource(this.libraryId,"language-feature-editing-stop-editing-geometry-caption");var o=dojo.mixin(new r.FormButton(i,"StopEditingGeometry",(!1),(!1)),{visibility:new a.Observable,callback:this.stopEditingGeometry});o.visibility.syncTransform(this.isEditingGeometry,function(e){return e}),e.push(o)}i=this.app.getResource(this.libraryId,"language-common-save");var l=this.defaultButton=dojo.mixin(new r.FormButton(i,"Save",(!0),(!0)),{visibility:new a.Observable((!0)),callback:this.save});e.push(l),i=this.app.getResource(this.libraryId,"language-common-cancel"),e.push(dojo.mixin(new r.FormButton(i,"Cancel",(!1),(!1)),{visibility:new a.Observable((!0)),callback:this._cancelEditing})),this.buttons.addItems(e)},t.prototype.applyButtonClick=function(e){e&&e.callback&&e.callback.apply(this)},t.prototype._removeFeatureClickEvents=function(){for(var e=0;e<this._layerClickEvents.length;++e)dojo.disconnect(this._layerClickEvents[e]);this._layerClickEvents=[]},t.prototype._executeStartEditingFeature=function(e,t){var i=this;this.app.commandRegistry.command("ClearDefaultHighlights").execute(),t||(t=!1);try{this.app.map&&this.app.site&&this.app.site.isInitialized?this._executeStartEditingFeatureImpl(e,t):this.app.eventRegistry.event("SiteInitializedEvent").subscribe(this,function(){i._executeStartEditingFeatureImpl(e,t)})}catch(a){this.app.trace.error("Could not start editing: {0}".format(a)),this.cancel()}},t.prototype._executeStartEditingNewFeature=function(e){this._executeStartEditingFeature(e,!0)},t.prototype._executeStartEditingFeatureImpl=function(e,t){this.cancel();try{var i=e;if(e&&e instanceof n.Feature&&(e.layer&&e.layer.mapService&&this.currentMapService.set(e.layer.mapService),this.headerText.set(e.label.get()),i=e.esriFeature.get()),i){if("function"!=typeof i.getLayer)return void this.app.trace.warning("Could not edit feature - No associated graphic layer was found.");this.editingNewFeature.set(t),this.setFeature(i)}this._setupButtons(),this.app.commandRegistry.command("ShowFeatureAttributeEditor").execute()}catch(a){return this.app.trace.error("Could not start editing: {0}".format(a)),void this.cancel()}},t.prototype._findFeatureInLayer=function(e,t){if(!e||!t)return null;var i=null,a=t.objectIdField;e.attributes[a]&&(i=e.attributes[a]);var r=t.graphics;if(r.length<1)return null;var n=["timestamp"];if(t.editFieldsInfo)for(var s in t.editFieldsInfo)t.editFieldsInfo.hasOwnProperty(s)&&n.push(t.editFieldsInfo[s]);var o=function(e){return Array.contains(n,e)},l=function(e){var t=0;for(var i in e)!o(i)&&e.hasOwnProperty(i)&&++t;return t},d=r[0].attributes;if(l(d)!==l(e.attributes))return null;var u=0,c=[],p=[];for(var g in d){var m=o(g);if(!(m||d.hasOwnProperty(g)&&e.attributes.hasOwnProperty(g)))return null;m||(c.push(g),p.push(g),++u)}for(var y=0;y<u;++y)if(c[y]!==p[y])return null;for(var h=0;h<r.length;h++){var v=r[h];if(!v.gcxIsClone&&v.attributes[a]===e.attributes[a])return v._graphicsLayer=t,v}return null},t.prototype._findFeatureInLayers=function(e){var t=null;if(this._lastLayer&&(t=this._findFeatureInLayer(e,this._lastLayer)))return this._lastLayer=t._graphicsLayer=n,t;for(var i=this.app.site.getFeatureServices(),a=0;a<i.length;a++){var r=i[a],n=r.serviceLayer;if(n!==this._lastLayer&&(t=this._findFeatureInLayer(e,n)))return this._lastLayer=t._graphicsLayer=n,t}return t},t.prototype._findGeocortexLayerForUrl=function(e){if(this.app&&this.app.site&&this.app.site.essentialsMap&&this.app.site.essentialsMap.mapServices)for(var t=0;t<this.app.site.essentialsMap.mapServices.length;t++){var i=this.app.site.essentialsMap.mapServices[t];if(i.serviceUrl===e&&i.layers.length>0)return i.layers[0]}return null},t.prototype._findServiceLayerForUrl=function(e){if(this.app&&this.app.site&&this.app.site.essentialsMap&&this.app.site.essentialsMap.mapServices)for(var t=0;t<this.app.site.essentialsMap.mapServices.length;t++){var i=this.app.site.essentialsMap.mapServices[t];if(i.url===e)return i.serviceLayer}return null},t.prototype._reAttachLayerToFeature=function(e,t){if(e.getLayer())this._lastLayer=e.getLayer();else if(t)this._lastLayer=this._findServiceLayerForUrl(t);else{var i=this._findFeatureInLayers(e);i&&(e=i)}return this._lastLayer&&this.featureTypeHasGeometry.set(!!this._lastLayer.geometryType),e},t.prototype.setFeature=function(e,t,i){return i||this.cancel(),e?(e=this._reAttachLayerToFeature(e,t),this.feature.set(e),this.geometry.set(e.geometry),this.hasGeometry.set(!!e.geometry),i||(this._buildFeatureAttributes(),this._buildFeatureRelationships()),void this.editingActive.set(!0)):(this.editingNewFeature.set(!0),this.feature.set(null),this._lastLayer=null,this.geometry.set(null),void this.hasGeometry.set(!1))},t.prototype.cloneFeature=function(e){var t=new esri.Graphic(e.toJson());return t},t.prototype._executeSetEditorGeometry=function(e){this.stopEditingGeometry();var t=this.feature.get();t&&(t.needsConversion&&"extent"===e.type&&"esriGeometryPolygon"===this._lastLayer.geometryType&&(e=s.envelopeToPolygon(e)),this.geometry.set(e),this.hasGeometry.set(!!e),t.setGeometry(e),this.app.eventRegistry.event("FeatureGeometryEditedEvent").publish(t)),this._setupButtons(),this.app.commandRegistry.command("ShowFeatureAttributeEditor").execute()},t.prototype._createNewFeature=function(e,t,i,a){var r=new esri.Graphic;return r.attributes=t||{},r.geometry=e||new esri.geometry.Point(NaN,NaN),r.symbol=i||null,r.infoTemplate=a,r},t.prototype._getMapServiceByLayer=function(e){var t=e.url||e._essentialsMetadata.serviceUrl;if(!t)return null;var i=t.indexOf("?token=");i!=-1&&(t=t.substring(0,i));for(var a=0;a<this.app.site.essentialsMap.mapServices.length;++a){var r=this.app.site.essentialsMap.mapServices[a];if(r.serviceUrl===t)return r}return null},t.prototype._getRelatedFeatureLayer=function(e,t,i,a){var r=new dojo.Deferred,n=function(e){o.deferredResolve(r,e),"function"==typeof i&&i(e)},s=function(e){o.deferredReject(r,e),"function"==typeof a&&a(e)},l=t.substring(0,t.lastIndexOf("/")+1)+e,d=new esri.layers.FeatureLayer(l,{mode:esri.layers.FeatureLayer.MODE_SELECTION,outFields:["*"]});return dojo.connect(d,"onLoad",dojo.hitch(this,n)),dojo.connect(d,"onError",dojo.hitch(this,s)),r},t.prototype._preventDeleteForRelOrigin=function(e,t,i){var a=this,r=this.feature.get(),n=this._lastLayer,s=null,o=!1;if(r&&n&&e&&e.length()>0&&(s=e.length(),n))for(var l=0;l<e.length();l++){var d=function(){s--,s<=0&&i&&i()},u=function(e){var i=parseInt(e.id.get()),s=e.relatedTableId?e.relatedTableId.get():e.relationship.relatedTableId,l=n.url||n._essentialsMetadata.serviceUrl,u=new esri.tasks.RelationshipQuery;u.objectIds=[r.attributes[n.objectIdField]],u.outFields=["*"],u.relationshipId=i;var c=new esri.tasks.QueryTask(l),p=p=c.executeRelationshipQuery(u);p.then(function(e){var i=!1;for(var r in e)if(e.hasOwnProperty(r)){i=!0;break}if(!i)return void d();var n=a._getRelatedFeatureLayer(s,l);n.then(function(i){if(!o){var a=[];for(var r in e)if(e.hasOwnProperty(r)){var n=e[r].features||e[r];if(n)if(n.length)for(var s=0;s<n.length;s++){var l=n[s];a.push(l)}else a.push(n)}a.length>0&&t&&(t(a),o=!0),d()}},function(e){d()})},function(e){d()})},c=e.getAt(l);c.relationship&&"esriRelRoleOrigin"===c.relationship.role&&u(c)}(!s||s<=0)&&i&&i()},t.prototype._confirmDelete=function(){this.app.commandRegistry.command("Confirm").execute(this.app.getResource(this.libraryId,"language-feature-editing-delete-confirmation"),this.app.getResource(this.libraryId,"language-feature-editing-module-title"),function(e){if(e);})},t.prototype.deleteCurrentFeature=function(e,t){var i=this,a=this.feature.get(),r=a.getLayer()||this._lastLayer,n=null;n=this._getMapServiceByLayer(r);var s=function(){r&&r.remove(a),i.app.commandRegistry.command("HideFeatureAttributeEditor").execute(),i.app.commandRegistry.command("ShowMap").execute(),i.app.eventRegistry.event("FeatureDeletedEvent").publish(a),e&&e(),i.isApplyingEdits.set(!1)};t||(t=function(e){i.isApplyingEdits.set(!1);var t=i.app.getResource(i.libraryId,"language-feature-layer-error-feature-edits").format(e),a=i.app.getResource(i.libraryId,"language-feature-layer-error-title");i.app.trace.error(t),i.app.commandRegistry.command("Alert").execute(t,a)});var o={mapService:n,layer:r,feature:a,successCallback:s,errorCallback:t};this.isApplyingEdits.set(!0),this.app.commandRegistry.command("DeleteFeature").execute(o)},t.prototype._editGeometry=function(){this.startEditingGeometry()},t.prototype.stopEditingGeometry=function(e){this.app.commandRegistry.command("ClearActiveTool").execute();var t=this.feature.get();if(t&&(this.featureClone&&!e&&t.setGeometry(this.featureClone.geometry),t.show()),this._lastLayer)for(var i=this._lastLayer.graphics,a=0;a<i.length;++a){var r=i[a];r.gcxIsClone&&this._lastLayer.remove(r)}this.featureClone=null,this._editObject&&(this._editObject.deactivate(),this._editObject=null),null!=this._editingGeometryMapClickHandle&&(dojo.disconnect(this._editingGeometryMapClickHandle),this._editingGeometryMapClickHandle=null),this._indicateGeometryEditing(!1)},t.prototype.startEditingGeometry=function(){var e=this;if(this._editObject&&this._editObject.deactivate(),this._lastLayer&&this.app.map.reorderLayer(this._lastLayer,this.app.map._layers.length-1),this.hasGeometry.get()){var t=null,i=this.feature.get();if(null==i)throw new Error("Can't edit geometry of null feature");if(i.geometry!=this.geometry.get()&&(i.geometry=this.geometry.get()),this.featureClone&&this._lastLayer.remove(this.featureClone),this.featureClone=new esri.Graphic(i.toJson()),this.featureClone=dojo.mixin(this.featureClone,{gcxIsClone:!0}),this._lastLayer.add(this.featureClone),i.hide(),this.originalSymbol=i.symbol,!esri.toolbars.Edit){var a=this.app.getResource(this.libraryId,"language-feature-editing-package-required"),r=this.app.getResource(this.libraryId,"language-feature-layer-error-title");return void this.app.commandRegistry.command("Alert").execute(a,r)}t=esri.toolbars.Edit.MOVE|esri.toolbars.Edit.EDIT_VERTICES|esri.toolbars.Edit.SCALE|esri.toolbars.Edit.ROTATE;var n={allowAddVertices:!0,allowDeleteVertices:!0};this._editObject=new esri.toolbars.Edit(this.app.map,n);var s=this._editObject.on("graphic-first-move",function(t){e.app.map.disableMapNavigation()}),o=this._editObject.on("graphic-move-stop",function(t){e.app.map.enableMapNavigation()}),l=function(t,i,a){s.remove(),o.remove(),e._indicateGeometryEditing(!1),i.setSymbol(e.originalSymbol),a.isModified&&e.app.commandRegistry.command("SetEditorFeatureGeometry").execute(i.geometry)};dojo.connect(this._editObject,"onDeactivate",l),null!=this._editingGeometryMapClickHandle&&(dojo.disconnect(this._editingGeometryMapClickHandle),this._editingGeometryMapClickHandle=null),this._editingGeometryMapClickHandle=dojo.connect(this.app.map,"onClick",function(){l(e._editObject,e.featureClone,{isModified:!0}),dojo.disconnect(e._editingGeometryMapClickHandle),e._editingGeometryMapClickHandle=null}),this._indicateGeometryEditing(!0),this._editObject.activate(t,this.featureClone,n)}else this.app.commandRegistry.command("SetActiveTool").execute(this.currentToolName),this._indicateGeometryEditing(!0)},t.prototype._indicateGeometryEditing=function(e){var t=this;this.isEditingGeometry.set(e);var i="geometryEditingStatus";if(e){var a=null,r=this.feature.get(),n=this.geometry.get();if(r&&(a=r.drawType||null,a||n&&(a=n.type)),n){var s=l.getEsriGeometryType(a,esri.toolbars.Draw.POINT),o=null;o=d.FeatureEditingModule.getEditingGeometryStatusMessage(this.app,this.libraryId,s,!0);var u={id:i,text:o,closeButton:{callback:function(){t._executeStopEditingGeometry(!0)}}};this.app.commandRegistry.command("DisplayNotification").execute(u)}this.app.commandRegistry.command("ShowMap").execute()}else this.app.commandRegistry.command("RemoveNotification").execute(i)},t.prototype._executeStopEditingGeometry=function(e){this._isEditingGeometry&&(this.app.command("ClearActiveTool").execute(),this._editObject&&(this._editObject.deactivate(),this._editObject=null),null!=this._editingGeometryMapClickHandle&&(dojo.disconnect(this._editingGeometryMapClickHandle),this._editingGeometryMapClickHandle=null),this._layerUpdateEndToken&&(dojo.disconnect(this._layerUpdateEndToken),this._layerUpdateEndToken=null),this._editorDeactivatedHandle&&(this._editorDeactivatedHandle.remove(),this._editorDeactivatedHandle=null),this._indicateGeometryEditing(!1))},t.prototype.save=function(e,t){var i,a=this,r=this.feature.get();if(this.isEditingGeometry.get()&&r.setSymbol(this.originalSymbol),r){i=this.cloneFeature(r);for(var o in i.attributes)i.attributes.hasOwnProperty(o)&&(o||delete i.attributes[o])}var l=r&&r.getLayer()||this._lastLayer;this.stopEditingGeometry(),i||(i=this._createNewFeature(),l.renderer&&(i.symbol=l.renderer.getSymbol(i))),l.geometryType&&this.hasGeometry.get()?i.geometry=this.geometry.get():i.geometry=null,this.validationMessages.clear();for(var d=0;d<this.fields.getLength();++d){var u=this.fields.getAt(d),c=u.value.get();"esriFieldTypeDate"===u.type.get()&&(c=u.value.get(),c&&(c=c.getTime())),""===c&&"esriFieldTypeString"!==u.type.get()&&(c=null);var p=u.validationFunc(c);p?(u.cssClass.set("invalid"),this.validationMessages.addItem(p)):(u.cssClass.set(""),i.attributes[u.name.get()]=c)}if(this.validateGeometry&&i.geometry&&"polygon"===i.geometry.type&&s.isSelfIntersectingPolygon(i.geometry)){var g=this.app.getResource(this.libraryId,"language-feature-editing-self-intersecting-polygon-need-fixing");this.validationMessages.addItem(g)}if(this.validationMessages.getLength()>0)return t&&t(),!1;var m=new esri.Graphic(i.toJson()),y=null,h=l.url||l._essentialsMetadata.serviceUrl;this.isEditingRelatedFeatureNotInSite.get()||(y=this._getMapServiceByLayer(l));var v=function(){i=m,a.app.eventRegistry.event("FeatureEditedEvent").publish(m),a.editingNewFeature.set(!1),a.isApplyingEdits.set(!1);var t=null;if(a._editLogEntry)t=a._editLogEntry,t.setFeature(i);else{var s=l.remove(r);s||(r=a._findFeatureInLayer(r,l),r&&l.remove(r)),null==i.getLayer()&&(l.add(i),l.refresh())}if(a.feature.set(i),a._buildFeatureAttributes(),a._buildFeatureRelationships(),t&&(a._editLogEntry=t),!t&&!a.isEditingRelatedFeatureNotInSite.get()){var o=a._findGeocortexLayerForUrl(l.url),d=new n.Feature({graphic:i,layer:o});a.headerText.set(d.label.get())}a.app.commandRegistry.command("DeactivateView").execute("AttributeEditorView"),e&&e()},f=function(e){a.isApplyingEdits.set(!1),t&&t(),a._cancelEditing();var i="";e.message&&(i+=e.message,e.details&&(i+=" (Details: {0})".format(e.details[0])));var r=a.app.getResource(a.libraryId,"language-feature-layer-error-feature-edits").format(i?i:e),n=a.app.getResource(a.libraryId,"language-feature-layer-error-title");a.app.trace.error(r),a.app.commandRegistry.command("Alert").execute(r,n)};l.url=h;var b={mapService:y,layer:l,feature:m,successCallback:v,errorCallback:f};null!=this._editLogEntry?(b.successCallback=function(){a.app.commandRegistry.command("RefreshOfflineLayers").execute(),v()},this.app.commandRegistry.command("ChangeEditLogEntry").execute(b)):this.isEditingRelatedFeatureNotInSite.get()?this.editingNewFeature.get()?(b.relatedFeature=this._relatedFeature,b.relationshipOrigin=this._editingRelationshipOrigin,b.relationshipDestination=this._editingRelationshipDestination,this.app.commandRegistry.command("CreateRelatedRecord").execute(b)):this.app.commandRegistry.command("UpdateRelatedRecord").execute(b):this.editingNewFeature.get()?(this.app.eventRegistry.event("EditorPreCreateFeatureEvent").publish(m),this.app.commandRegistry.command("CreateFeature").execute(b),this.app.isOffline.get()===!1&&this._lastLayer.remove(this.feature.get())):(this.app.eventRegistry.event("EditorPreUpdateFeatureEvent").publish(m),this.app.commandRegistry.command("UpdateFeature").execute(b)),this.isApplyingEdits.set(!0)},t.prototype._cancelEditing=function(){this._lastLayer&&(this.editingNewFeature.get()&&this._lastLayer.remove(this.feature.get()),this._lastLayer.refresh()),this.cancel(),this.app.commandRegistry.command("HideFeatureAttributeEditor").execute()},t.prototype.cancel=function(){this.feature.get();this.validationMessages.clear(),this.stopEditingGeometry(!0),this._lastLayer=null,this._editLogEntry=null,this.feature.set(null),this.editingActive.set(!1),this.isEditingRelatedFeatureNotInSite.set(!1),this.fields.clear(),this.geometry.set(null),this.hasGeometry.set(!1),this._editingRelationshipOrigin=null,this._editingRelationshipDestination=null,this._relatedFeature=null},t.prototype.startAddingNewRelatedRecord=function(e){var t=this,i=e.relationship,a=(i.relatedTableId,this._lastLayer),r=(a.url,this._getMapServiceByLayer(a));return this.setFeature(null),r?void this.app.featureLayerModule._getRelatedFeatureLayer(r,i.id,function(a){var r=t._getMapServiceByLayer(a);r?(t.isEditingRelatedFeatureNotInSite.set(!1),t.currentMapService.set(r)):t.isEditingRelatedFeatureNotInSite.set(!0),a&&t.featureTypeHasGeometry.set(!!a.geometryType);var n=e.feature.get();if(t._lastLayer=a,t._editingRelationshipOrigin=i,t._relatedFeature=n,t.editingNewFeature.set(!0),t.feature.set(null),t.geometry.set(null),t.hasGeometry.set(!1),t._buildFeatureAttributes(),!i.keyField)return void t.app.trace.error(t.app.getResource(t.libraryId,"language-feature-editing-relationships-require-arcgis-version"));for(var s=null,o=0;o<a.relationships.length;++o){var l=a.relationships[o];if(l.id===i.id){t._editingRelationshipDestination=l,s=l.keyField;break}}if(!s)return void t.app.trace.error(t.app.getResource(t.libraryId,"language-feature-editing-relationships-key-field-missing"));for(o=0;o<t.fields.getLength();++o){var d=t.fields.getAt(o);if(d.name.get()===s){if("objectid"!==s.toLowerCase()&&"globalid"!==s.toLowerCase()){d.value.set(n.attributes[i.keyField]);break}d.value.set("[Automatic]"),d.editable.set(!1),d.cantEdit.set(!0)}}t._setupButtons()},function(e){this.app.trace.error(this.app.getResource(this.libraryId,"language-feature-editing-related-feature-failed").format(i.id))}):void this.app.trace.warning("Could not edit feature. No map service for layer '{0}' was found.".format(a.url))},t.prototype._buildFeatureRelationships=function(){},t.prototype.typeFieldSelected=function(e){if(e)for(var t=0;t<e.subTypes.getLength();t++){var i=e.subTypes.getAt(t);if(null!==i.id&&i.id.toString()===e.value.get()){
this._loadRelatedCodedDomains(i.domains);break}}},t.prototype._loadRelatedCodedDomains=function(e){if(e)for(var t in e)if(e.hasOwnProperty(t)&&"codedValue"===e[t].type)for(var i=0;i<this.fields.getLength();i++){var a=this.fields.getAt(i);if(a.name.get()===t){var r={viewModel:a,typeName:"codedDomainValue",collectionName:"codedDomainValues",valueCollection:e[t].codedValues,nullable:a.nullable.get(),nullOption:{name:"",code:null}};this._addValueCollection(r)}}},t.prototype._addValueCollection=function(e){e&&(e.viewModel.renderType=new a.Observable(e.typeName),e.viewModel[e.collectionName]=new a.ObservableCollection([]),e.viewModel[e.collectionName].addItems(e.valueCollection),e.nullable&&e.viewModel[e.collectionName].insertItem(0,e.nullOption))},t.prototype._buildFeatureAttributes=function(){var e=null,t=this.feature.get();if(!this._lastLayer){var i=this._findFeatureInLayers(t);i&&(this._lastLayer=i.getLayer())}var r=this._lastLayer;if(r){this.fields.clear(),null===t&&(t=new esri.Graphic);var n=[],s=[];if(r._outFields&&r._outFields.length>0)for(var o=0;o<r._outFields.length;++o){var l=r._outFields[o];if(0===o&&"*"===l){s=r.fields;break}for(var d=0;d<r.fields.length;++d){var p=r.fields[d];if(p.name===l){s.push(p);break}}}else s=r.fields;for(var o=0;o<s.length;++o){var g=s[o];if(g.editable){var m=g.editable===!1,y=g.nullable===!1&&!m,h=null;this.editingNewFeature.get()&&g.name!==r.typeIdField||t.attributes&&(h=t.attributes[g.name]);var v=this._buildValidationFunc(g),f={name:new a.Observable(g.name),alias:new a.Observable(g.alias),length:new a.Observable(g.length),editable:new a.Observable((!m)),cantEdit:new a.Observable(m),nullable:new a.Observable((!y)),type:new a.Observable(g.type),renderType:new a.Observable(g.type),value:new a.Observable(h),cssClass:new a.Observable(""),attached_showIndicator:new a.Observable(y),attached_indicatorClass:new a.Observable(""),validationFunc:v||function(){return!0}};if("esriFieldTypeDate"===g.type){var b=new u.DatePickerFormItem((void 0));b.timePickerItem=new c.TimePickerFormItem((void 0));var _=this.feature.get()?new Date(this.feature.get().attributes[g.name]):new Date;b.includeTimePicker.set(!0),b.initialDate.set(_),b.date.set(_),f.value.sync(b.date),dojo.safeMixin(b,f),f=b}if(g.name===r.typeIdField){var w={viewModel:f,typeName:"subType",collectionName:"subTypes",valueCollection:r.types,nullable:!y,nullOption:{name:"",id:null}};this._addValueCollection(w),e=h}if(g.hasOwnProperty("domain")){var F=g.domain;if(F&&"codedValue"===F.type){var E={viewModel:f,typeName:"codedDomainValue",collectionName:"codedDomainValues",valueCollection:F.codedValues,nullable:!y,nullOption:{name:"",code:null}};this._addValueCollection(E)}}n.push(f)}}if(this.fields.addItems(n),null===e)for(o=0;o<r.types.length;o++){var T=r.types[o];T.id===e&&this._loadRelatedCodedDomains(T.domains)}}},t.prototype._isValidEsriDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},t.prototype._buildValidationFunc=function(e){if(this.app.urlParameters.hasOwnProperty("noval"))return function(){};var t=this,i=function(e){if(e.editable!==!1&&e.nullable===!1){var i=t.app.getResource(t.libraryId,"language-feature-editing-requires-value");return i.format(e.alias)}return null},a=function(e,t){var i=null;if(!e)return!1;switch(e.type){case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=/^[+-]?\d+.?\d*$/;break;case"esriFieldTypeSmallInteger":case"esriFieldTypeInteger":i=/^\s*(\+|-)?\d+\s*$/}return i.test(String(t.toString()))};if(e.domain){var r=function(r,n,s,o){var l=t.app.getResource(t.libraryId,"language-feature-editing-invalid-number").format(n,s,o);return r?a(e,r)?r<s||r>o?l:null:l:i(e)};if("codedValue"===e.domain.type)return function(e){return null};if("range"===e.domain.type){if(e.domain.hasOwnProperty("range")){var n=e.domain.range;return n.replace&&(n=n.replace("[","").replace("]","").split(",")),function(t){return r(t,e.alias,n[0],n[1])}}return function(t){return r(t,e.alias,e.domain.minValue,e.domain.maxValue)}}return function(e){return null}}switch(e.type){case"esriFieldTypeDate":return function(a){return a?t._isValidEsriDate(new Date(a))?null:t.app.getResource(t.libraryId,"language-feature-editing-invalid-date").format(e.alias):i(e)};case"esriFieldTypeString":case"esriFieldTypeGUID":return function(a){return a?e.length&&a.toString().length>e.length?t.app.getResource(t.libraryId,"language-feature-editing-value-too-long").format(e.alias,e.length):null:i(e)};case"esriFieldTypeSingle":case"esriFieldTypeDouble":return function(r){if(!r&&0!==r)return i(e);var n=a(e,r);return n?null:t.app.getResource(t.libraryId,"language-feature-editing-invalid-decimal").format(e.name)};case"esriFieldTypeSmallInteger":case"esriFieldTypeInteger":return function(r){if(!r&&0!==r)return i(e);var n=a(e,r);return n?null:t.app.getResource(t.libraryId,"language-feature-editing-invalid-integer").format(e.name)};default:return function(e){return null}}},t}(i.ViewModelBase);t.AttributeEditorViewModel=p})},"Mapping/modules/FeatureEditing/Templates/FeatureTemplateViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables"],function(e,t,i,a){"use strict";var r=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.name=null,r.description=null,r.proto=null,r.layer=null,r.drawingTool=null,r.symbolUri=null,r.symbolStyle=null,r.name=new a.Observable,r.description=new a.Observable,r.drawingTool=new a.Observable,r.symbolUri=new a.Observable,r.symbolStyle=new a.Observable(""),r.proto={},r}return __extends(t,e),t.prototype.setTemplateShapeStyle=function(e){e&&this.symbolStyle.set(e)},t.prototype.createSVGElement=function(e,t){},t}(i.ViewModelBase);t.FeatureTemplateViewModel=r})},"url:/Mapping/modules/FeatureEditing/TemplatePickerView.html":'\r\n<div class="feature-template-picker">             \r\n        \r\n    <!-- TEMPLATES -->\r\n    <div class="panel-group no-item" data-binding="{@hidden: layerTemplates}{@text: @language-feature-editing-no-templates}"></div>\r\n        \r\n    <div class="panel-group" data-binding="{@source: layerTemplates}">\r\n        <div data-binding="{@template-for: layerTemplates}">\r\n            <h3 data-binding="{@text: displayName}"></h3>\r\n            <div class="no-results" data-binding="{@hidden: templates}">\r\n                <span data-binding="{@text: @language-feature-editing-no-templates}"></span>\r\n                <div class="form-button-container">\r\n                    <div class="form-button-align">\r\n                        <div class="form-item form-btns">\r\n                            <button class="button" data-binding="{@text: @language-feature-editing-add-feature-button}{@event-onclick: handleFeatureTemplateClick}"></button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <ul class="list-menu" data-binding="{@visible: templates}{@source: templates}{@template-selector: foo}">\r\n                <li class="list-menu-item" data-binding="{@template-select: @null}{@template: Mapping/modules/FeatureEditing/Templates/FeatureTemplate.html}"></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n',"url:/Mapping/modules/FeatureEditing/Editor/AttributeEditorView.html":'\r\n<div class="editor">\r\n\r\n    <!-- APPLY EDITS -->\r\n    <div class="loading-container" data-binding="{@visible: isApplyingEdits}">\r\n        <div class="loading-img"></div>\r\n        <div class="loading-msg" data-binding="{@text: @language-feature-editing-applying}"></div>\r\n    </div>\r\n\r\n    <!-- ADD/EDIT FORM -->\r\n    <div class="add-or-edit-feature" data-binding="{@hidden: isApplyingEdits}"> \r\n        <div class="panel-content">\r\n            <div class="panel-notification" data-binding="{@visible: hasGeometry}">\r\n                <span data-binding="{@text: @language-feature-editing-has-geometry}"></span>\r\n            </div>\r\n            <div class="panel-notification" data-binding="{@hidden: fields}">\r\n                <span data-binding="{@text: @language-feature-editing-invalid-layer}"></span>\r\n            </div>\r\n\r\n            <div class="panel-group" data-binding="{@visible: fields}">\r\n                <h3 data-binding="{@text: @language-feature-editing-feature-attributes}"></h3>\r\n\r\n                <div class="panel-group-contents">\r\n                    <div class="form label-left">\r\n                        \r\n                        <div class="form-container" data-binding="{@source: fields}{@template-selector: renderType}">\r\n                            \r\n                            <!-- DATE PICKER -->\r\n                            <div class="form-item" data-binding="{@template-select: esriFieldTypeDate}">\r\n                                <label class="form-label">\r\n                                    <span data-binding="{@text: alias}"></span>\r\n                                        <span class="indicator" data-binding="{@visible: attached_showIndicator}">*</span>\r\n                                </label>\r\n                                <div class="form-control-date-picker" data-binding="{@widget: DatePickerFormItem}{@widget-context: @context}">\r\n\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- CODED DOMAIN VALUE TEMPLATE -->\r\n                            <div class="form-item" data-binding="{@template-select: codedDomainValue}">\r\n                                <div class="combobox" >\r\n                                    <label class="form-label">\r\n                                        <span data-binding="{@text: alias}"></span>\r\n                                        <span class="indicator" data-binding="{@visible: attached_showIndicator}">*</span>\r\n                                    </label>\r\n                                    <div class="form-control">\r\n                                        <select data-binding="{@source: codedDomainValues}{@value: value}{disabled: cantEdit}">\r\n                                            <option data-binding="{@template-for: codedDomainValues}{@text: name}{value: code}"></option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- SUBCLASS TEMPLATE -->\r\n                            <div class="form-item" data-binding="{@template-select: subType}">\r\n                                <div class="combobox">\r\n                                    <label class="form-label">\r\n                                        <span data-binding="{@text: alias}"></span>\r\n                                        <span class="indicator" data-binding="{@visible: attached_showIndicator}">*</span>\r\n                                    </label>\r\n                                    <div class="form-control">\r\n                                        <select data-binding="{@source: subTypes}{@value: value}{disabled: cantEdit}{@event-onchange: handleTypeFieldChange}">\r\n                                            <option data-binding="{@template-for: subTypes}{@text: name}{value: id}"></option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- FIELDS --> \r\n                            <div class="form-item" data-binding="{@template-for: fields}">\r\n                                <div class="textbox">\r\n                                    <label class="form-label">\r\n                                        <span data-binding="{@text: alias}"></span>\r\n                                        <span class="indicator" data-binding="{@visible: attached_showIndicator}">*</span>\r\n                                    </label>\r\n                                    <div class="form-control">\r\n                                        <input type="text" data-binding="{@value: value}{disabled: cantEdit}" />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <!-- VALIDATION -->\r\n                        <ul class="form-validation" data-binding="{@source: validationMessages}{@visible: validationMessages}">\r\n                            <li data-binding="{@template-for: validationMessages}">\r\n                                <span data-binding="{@text: @context}"></span>\r\n                            </li>  \r\n                        </ul>\r\n\r\n                        <!-- BUTTONS -->\r\n                        <div class="form-item form-btns" data-binding="{@source: buttons}">\r\n                            <button class="button" data-binding="{@template-for: buttons}{@visible: visibility}{@text: label}{@event-onclick: handleButtonClick}"></button>\r\n                        </div>\r\n\r\n                    </div> \r\n                    \r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',"url:/Mapping/modules/FeatureEditing/Templates/FeatureTemplate.html":'<div class="feature-template has-icon" data-binding="{@event-onclick: handleFeatureTemplateClick}">\r\n    <img class="list-menu-icon" data-binding="{@visible: symbolUri}{src: symbolUri}" alt=" " />\r\n    <div class="list-menu-icon" data-binding="{@hidden: symbolUri}{style: symbolStyle}"></div>\r\n    <div class="list-menu-details">\r\n        <strong class="list-menu-name" data-binding="{@text: name}"></strong>\r\n        <span class="list-menu-desc" data-binding="{@text: description}{@visible: description}"></span>\r\n    </div>\r\n</div>'}});