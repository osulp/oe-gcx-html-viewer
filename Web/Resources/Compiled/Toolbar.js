function shim(e,t,i){if("string"==typeof e&&(i=t,t=e),"undefined"==typeof i)return void console.warn("Undefined shim for: "+t);for(var o=t.split("."),a=null,n=window,l=0,r=o.length;l<r;l++)a=o[l],l==r-1?n[a]=i:n[a]||(n[a]={}),n=n[a]}require({cache:{"Mapping/modules/Toolbar/CompactToolbarModule":function(){define(["require","exports","./ToolbarModuleBase"],function(e,t,i){"use strict";var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.ToolbarModuleBase);t.CompactToolbarModule=o})},"Mapping/modules/Toolbar/TabbedToolbarModule":function(){define(["require","exports","./ToolbarModuleBase"],function(e,t,i){"use strict";var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getStateFilter=function(){return{isOpen:!0,currentTab:!0}},t.prototype.exportState=function(){var e=this,t={isOpen:!1,currentTab:null};return Promise["try"](function(){return e.app.command("_ExportTabbedToolbarState").execute(t),t})},t.prototype.applyState=function(e){var t=this,i={state:e,completePromise:null};return this.app.waitUntilAllLibrariesLoaded().then(function(){return t.app.command("_ApplyTabbedToolbarState").execute(i),i.completePromise})},t}(i.ToolbarModuleBase);t.TabbedToolbarModule=o})},"Mapping/modules/Toolbar/TabbedToolbarState":function(){define(["require","exports"],function(e,t){"use strict"})},"Mapping/modules/Toolbar/TabbedToolbarView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,i){"use strict";var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._longPressTimer=null,t._pressLengthMs=2e3,t._firstEvent=null,t.previousActiveToolElement=null,t.flyoutRegion=null,t}return __extends(t,e),t.prototype.manageToolVisuals=function(e,t){if(t&&e)for(var i=0;i<e.length;i++){var o=e[i];o&&("tool"!==o.type||o.disabled.get()?"toolbarGroup"!==o.type&&"flyout"!==o.type||!o.items.getLength()||this.manageToolVisuals(o.items.get(),t):o.tool.drawMode===t.drawMode&&o.tool.command===t.command&&(t.isActive?o.activate():o.deactivate()))}},t.prototype.attach=function(t){var i=this;t.toolbarGroups&&(e.prototype.attach.call(this,t),t.registerTabbedToolbarViewId(this.id),t&&t.toolbarGroups&&!t.toolbarGroups.isEmpty()&&this.app.event("ActiveToolChangedEvent").subscribe(this,function(e){e.tool&&i.manageToolVisuals(i.viewModel.toolbarGroups.get(),e.tool),e.previousTool&&i.manageToolVisuals(i.viewModel.toolbarGroups.get(),e.previousTool)}),this.app.event("ActiveToolChangedEvent").subscribe(this,function(e){i.isActive&&null!==e.tool&&i.app.configuration.mobileMode&&i.app.command("DataFrameLower").execute(i.id)}))},t.prototype.added=function(){this.viewModel.toolbarOpenByDefault?this.viewModel.executeToggleToolbar():this.app.event("ApplicationResizedEvent").publish()},t.prototype.handleClickToggleToolbar=function(e,t,i){this.viewModel.toolbarGroups&&this.viewModel.toolbarGroups.getLength()>0&&(this.app.command("ActivateView").execute(this.id),this.app.event("ApplicationResizedEvent").publish())},t.prototype.handleToolbarItemClick=function(e,t,i){i.execute()},t.prototype.handleTabClick=function(e,t,i){this.viewModel.setCurrentTab(i)},t.prototype.closeToolbar=function(e,t,i){this.app.viewManager.deactivateView(this),this.app.command("RecenterMapOnNextMapResize").execute(),this.app.event("ApplicationResizedEvent").publish()},t.prototype.toggleToolbar=function(e,t,i){return this.app.configuration.mobileMode?this.app.command("ActivateView").execute(this.id):this.app.command("ToggleToolbar").execute(),!1},t.prototype.resolveWidget=function(t,i){if(e.prototype.resolveWidget.call(this,t,i),"RegionWidget"===t&&i.regionName){var o=(i.regionName,this.app.viewManager.createView({markupResource:"Mapping/modules/Toolbar/Templates/ToolbarRegionTemplate.html"}));return o.app=this.app,o.libraryId=this.libraryId,o.attach(i),o}return null},t.prototype.toggleVisibleGroup=function(e,t,i){i.isActive.set(!i.isActive.get())},t.prototype.handleOpenToolFlyout=function(e,t,i){if(i.toggleFlyout(),this.viewModel.activeFlyout.get()===i)return void this.viewModel.activeFlyout.set(null);this.viewModel.activeFlyout.get()&&this.viewModel.activeFlyout.get().toggleFlyout();var o=$(t).offset(),a=$(t).outerHeight();$(this.flyoutRegion).css({left:o.left,top:o.top-$(t).parent().outerHeight()+a}),this.viewModel.activeFlyout.set(i)},t.prototype.handleTouchStart=function(e){return this._firstEvent||(this._firstEvent="touch start",this._beginLongPress()),!0},t.prototype.handleMouseDown=function(e){return this._firstEvent||(this._firstEvent="mouse down",this._beginLongPress()),!0},t.prototype.handleTouchEnd=function(e){return"touch start"===this._firstEvent&&(this._firstEvent=null,this._cancelLongPress()),!0},t.prototype.handleMouseUp=function(e){return"mouse down"===this._firstEvent&&(this._firstEvent=null,this._cancelLongPress()),!0},t.prototype.handleMouseOut=function(e){return"mouse down"===this._firstEvent&&(this._firstEvent=null,this._cancelLongPress()),!0},t.prototype.handleTouchCancel=function(e){return"touch start"===this._firstEvent&&(this._firstEvent=null,this._cancelLongPress()),!0},t.prototype.handleTouchMove=function(e){return"touch start"===this._firstEvent&&(this._firstEvent=null,this._cancelLongPress()),!0},t.prototype._beginLongPress=function(){var e=this;this._longPressTimer&&clearTimeout(this._longPressTimer),this._longPressTimer=setTimeout(function(){e.app.command("ActivateView").execute("LogView")},this._pressLengthMs)},t.prototype._cancelLongPress=function(){this._longPressTimer&&(clearTimeout(this._longPressTimer),this._longPressTimer=null)},t}(i.ViewBase);t.TabbedToolbarView=o})},"Mapping/modules/Toolbar/TabbedToolbarViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","./ToolbarTabViewModel","geocortex/framework/utils/ArrayUtils"],function(e,t,i,o,a,n){"use strict";var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toolbarGroups=new o.ObservableCollection,t.toolbarTabs=new o.ObservableCollection,t.currToolbarGrp=new o.Observable(null),t.activeFlyout=new o.Observable(null),t.toolbarOpenByDefault=null,t._tabbedToolbarViewId=null,t}return __extends(t,e),t.prototype.initialize=function(t){if(e.prototype.initialize.call(this,t),t){var i=!1,n=t.toolbarGroupRefs;if(n){for(var l=0;l<n.length;l++){var r=this.app.toolbarGroupRegistry.getToolbarGroupById(n[l]);if(r){this.toolbarGroups.addItem(r),r.selected=new o.Observable((!1));var s=!!r.isDefault,d=new a.ToolbarTabViewModel(this.app,this.libraryId);d.group.set(r),d.title.sync(r.name),d.tooltip.sync(r.tooltip),r.isActive.sync(d.isActive),d.isActive.set(s),s&&(i=!0),this.toolbarTabs.addItem(d)}}this.toolbarTabs.getLength()>0&&(i||(d=this.toolbarTabs.getAt(0),d.isActive.set(!0)),this.currToolbarGrp.set(d.group.get())),t.registerToggleCommand!==!1&&0!==this.toolbarGroups.getLength()&&(this.app.commandRegistry.command("ToggleToolbar").register(this,this.executeToggleToolbar,this._isPresent),this.app.commandRegistry.command("OpenToolbar").register(this,this._executeOpenToolbar,this._isClosed),this.app.commandRegistry.command("CloseToolbar").register(this,this._executeCloseToolbar,this._isOpen),this.app.commandRegistry.command("SetCurrentTab").register(this,this._executeSetCurrentTab,this._isPresent)),this.handleDisabledItems(this.toolbarGroups.get())}this.toolbarOpenByDefault=void 0!=t.toolbarOpenByDefault&&t.toolbarOpenByDefault,this.app.command("_ExportTabbedToolbarState").register(this,this._exportState),this.app.command("_ApplyTabbedToolbarState").register(this,this._applyState)}},t.prototype.registerTabbedToolbarViewId=function(e){e&&!this._tabbedToolbarViewId&&(this._tabbedToolbarViewId=e)},t.prototype.handleDisabledItems=function(e,t){var i;try{for(var o=0;o<e.length;o++)i=e[o],"toolbarGroup"===i.type&&(i.areAllHidden&&i.disabled.set(i.areAllHidden(i.items)),this.handleDisabledItems(i.items.get(),i)),i.disabled.bind(i,function(e){t&&t.areAllHidden&&t.disabled.set(t.areAllHidden(t.items))})}catch(a){this.app.trace.error("Error occurred while setting CSS class for toolbar items: "+a)}},t.prototype.setCurrentTab=function(e){for(var t=0;t<this.toolbarTabs.getLength();t++){var i=this.toolbarTabs.getAt(t);i!==e&&i.isActive.get()&&i.isActive.set(!1)}e.isActive.set(!0);var o=e.group.get();this.currToolbarGrp.set(o),this.app.command("RecenterMapOnNextMapResize").execute(),this.app.event("ApplicationResizedEvent").publish(),this.app.event("ToolbarTabChangedEvent").publish({group:o})},t.prototype.executeToggleToolbar=function(){var e=this.app.viewManager.getViewById(this._tabbedToolbarViewId);this.app.configuration.mobileMode?this.app.command("ActivateView").execute(e.id):this.app.command("ToggleView").execute(e.id),this.app.command("RecenterMapOnNextMapResize").execute(),this.app.event("ApplicationResizedEvent").publish(),this.app.event("ToolbarStateChangedEvent").publish(e.isActive)},t.prototype._executeOpenToolbar=function(){var e=this.app.viewManager.getViewById(this._tabbedToolbarViewId);e.isActive||this.app.command("ActivateView").execute(e.id)},t.prototype._executeCloseToolbar=function(){var e=this.app.viewManager.getViewById(this._tabbedToolbarViewId);e.isActive&&this.app.command("DeactivateView").execute(e.id)},t.prototype._isPresent=function(){return this.toolbarGroups&&this.toolbarGroups.getLength()>0},t.prototype._isOpen=function(){var e=this.app.viewManager.getViewById(this._tabbedToolbarViewId);return e?e.isActive:null},t.prototype._isClosed=function(){var e=this.app.viewManager.getViewById(this._tabbedToolbarViewId);return e?!e.isActive:null},t.prototype._exportState=function(e){e.isOpen=this._isOpen();var t=n.firstOrDefault(this.toolbarTabs.get(),function(e){return e.isActive.get()});e.currentTab=t?t.group.get().id:null},t.prototype._applyState=function(e){e.state.isOpen?this.app.command("OpenToolbar").execute():this.app.command("CloseToolbar").execute();var t=n.firstOrDefault(this.toolbarTabs.get(),function(t){return t.group.get().id===e.state.currentTab});t&&this.setCurrentTab(t)},t.prototype._executeSetCurrentTab=function(e){for(var t=0;t<this.toolbarTabs.getLength();t++){var i=this.toolbarTabs.getAt(t),o=i.group.get();if(o&&o.id==e&&!i.isActive.get()){this.setCurrentTab(i);var a=!0}}if(!a)for(var t=0;t<this.toolbarTabs.getLength();t++){var i=this.toolbarTabs.getAt(t),n=i.title.get();n!=e||i.isActive.get()||this.setCurrentTab(i)}},t}(i.ViewModelBase);t.TabbedToolbarViewModel=l})},"Mapping/modules/Toolbar/ToolbarButtonView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,i){"use strict";var o=function(e){function t(t,i){var o=e.call(this,t,i)||this;return o.app.event("ViewActivatedEvent").subscribe(o,o.handleViewActivatedOrDeactivated),o.app.event("ViewDeactivatedEvent").subscribe(o,o.handleViewActivatedOrDeactivated),o}return __extends(t,e),t.prototype.handleClickToggleToolbar=function(e,t,i){return this.app.command("ToggleToolbar").execute(),!1},t.prototype.handleViewActivatedOrDeactivated=function(e){"TabbedToolbarView"===e.id&&(e.isActive?this.app.viewManager.deactivateView(this):this.app.viewManager.activateView(this))},t}(i.ViewBase);t.ToolbarButtonView=o})},"Mapping/modules/Toolbar/ToolbarFlyoutView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,i){"use strict";var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.attach=function(t){var i=this;e.prototype.attach.call(this,t),this.viewModel.activeFlyout.bind(this,function(e){var t=$(i.root).is(":visible");if(e)if(t){if(t){i.app.command("FocusOnFirstInputInView").execute(i);var o={view:i,onOtherInteracted:function(e){return i._onOtherInteracted(e)}};i.app.command("TapToDismiss").execute(o),i.app.event("FlyoutActivated").publish(i)}}else i.app.command("ActivateView").execute(i.id),i.fallbackFlyout=e;else e||null==i.fallbackFlyout||(t?(i.app.event("ToolbarFlyoutDeactivatedEvent").publish(i.id),i.fallbackFlyout=e):t||i.viewModel.activeFlyout.set(i.fallbackFlyout))})},t.prototype._onOtherInteracted=function(e){$(e.target||e.srcElement).hasClass("multi-tool-button")===!1&&(this.fallbackFlyout=null,this.viewModel.activeFlyout.set(null),this.app.event("FlyoutDeactivated").publish(this))},t.prototype.changeToolFlyout=function(e,t,i){var o=this.viewModel.activeFlyout.get();this.viewModel.activeFlyout.set(null),setTimeout(function(){o.switchActiveFlyoutTool(i)},0),this.viewModel.transientActive&&!this.viewModel.transientActive.get()&&this.app.command("ToggleToolbar").execute()},t}(i.ViewBase);t.ToolbarFlyoutView=o})},"Mapping/modules/Toolbar/ToolbarManagedViewsView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,i){"use strict";var o=function(e){function t(t,i){var o=e.call(this,t,i)||this;return o.tileElements=[],o.app.event("ViewActivatedEvent").subscribe(o,o._onViewActivatedEvent),o.app.event("ViewDeactivatedEvent").subscribe(o,o._onViewDeactivatedEvent),o}return __extends(t,e),t.prototype._onViewActivatedEvent=function(e){if(this.root&&e.id){if(this.viewModel&&this.viewModel.hostedViews&&!this.viewModel.hostedViews.contains(e))return!1;this.handleViewActivated(e)}},t.prototype._onViewDeactivatedEvent=function(e){if(this.root&&e.id){if(this.viewModel&&this.viewModel.hostedViews&&!this.viewModel.hostedViews.contains(e))return!1;this.handleViewDeactivated(e)}},t.prototype.handleViewActivated=function(e){for(var t=0;t<this.tileElements.length;++t)dojo.removeClass(this.tileElements[t],"tb-view-active");var i=".{0}".format(e.id),o=dojo.query(i,this.root)[0];o&&dojo.addClass(o,"tb-view-active")},t.prototype.handleViewDeactivated=function(e){var t=".{0}".format(e.id),i=dojo.query(t,this.root)[0];i&&dojo.removeClass(i,"tb-view-active")},t.prototype.handleViewTileClick=function(e,t,i){return this.app.command("ActivateView").execute(i.id),this.app.event("ToolbarViewTilePressedEvent").publish(i.id),!1},t}(i.ViewBase);t.ToolbarManagedViewsView=o})},"Mapping/modules/Toolbar/ToolbarManagedViewsViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","./ToolbarManagedViewsView"],function(e,t,i,o,a){"use strict";var n=function(e){function t(t,i){var n=e.call(this,t,i)||this;n.hostedViews=new o.ObservableCollection,n.ordering={},n.managedRegionName="BottomPanelViewContainerRegion",n.app.event("ViewHostedEvent").subscribe(n,function(e){var t=e.view,i=e.region;t&&t.isManaged&&i.name===n.managedRegionName&&n._addOrderedView(t)}),n.app.event("ViewUnhostedEvent").subscribe(n,function(e){var t=e.view,i=e.region;t&&t.isManaged&&i.name===this.managedRegionName&&this.hostedViews.removeItem(t)});var l=n.app.event("ViewActivatedEvent").subscribe(n,function(e){if(e&&e instanceof a.ToolbarManagedViewsView){if(n.app.event("ViewActivatedEvent").unsubscribe(l),n.lastActivatedManagedView)var t=dojo.connect(e,"attach",function(){dojo.disconnect(t),e.handleViewActivated(n.lastActivatedManagedView)})}else e&&e.isManaged&&(n.lastActivatedManagedView=e)});return n}return __extends(t,e),t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),t.hasOwnProperty("ordering")&&(this.ordering=t.ordering)},t.prototype._addOrderedView=function(e){var t=this;if(!this.ordering)return void this.hostedViews.addItem(e);var i=e.id;if(!i)return void this.hostedViews.addItem(e);var o=function(e){return t.ordering.hasOwnProperty(e)?+t.ordering[e]:null},a=o(i);if(null===a||void 0===a)return void this.hostedViews.addItem(e);for(var n=!1,l=0;l<this.hostedViews.getLength();++l){var r=this.hostedViews.getAt(l),s=o(r.id);if(null===s||a<=s){n=!0,this.hostedViews.insertItem(l,e);break}}n||this.hostedViews.addItem(e)},t}(i.ViewModelBase);t.ToolbarManagedViewsViewModel=n})},"Mapping/modules/Toolbar/ToolbarModuleBase":function(){define(["require","exports","geocortex/framework/application/ModuleBase","./Transients/TransientElement","geocortex/framework/ui/ViewBase","geocortex/framework-ui/animation/AnimationSequence","geocortex/infrastructure/toolbarGroup/types/ToolbarGroup","geocortex/framework/utils/ArrayUtils"],function(e,t,i,o,a,n,l,r){"use strict";var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._transientElementEntries=[],t._transientElements=[],t._peekTimerHandle=null,t._previousToolId=null,t._previousFriendToolId=null,t._previousStateName=null,t._toolChangePeekPeriod=100,t}return __extends(t,e),t.prototype.initialize=function(t){var i=this;if(t&&t.isEnabled){if(e.prototype.initialize.call(this,t),this.app.event("ActiveToolChangedEvent").subscribe(this,this._handleActiveToolChangedEvent),this.app.command("ActivateTransientElements").register(this,this._activateTransientElementsFor),this.app.command("DeactivateTransientElements").register(this,this._deactivateTransientElementsFor),t.transientElements){for(var o=0;o<t.transientElements.length;++o){var a=t.transientElements[o],n={stateName:a.stateName,viewId:a.viewId,widgetId:a.widgetId,region:a.region,items:a.items};this._transientElementEntries.push(n)}this.app.event("StateEnteredEvent").subscribe(this,function(e){for(var t=0;t<i._transientElementEntries.length;t++){var o=i._transientElementEntries[t];if(e.stateDefinition.name===o.stateName){i._activateTransientElementsFor(o.stateName);break}}}),this.app.event("StateExitedEvent").subscribe(this,function(e){for(var t=0;t<i._transientElementEntries.length;t++){var o=i._transientElementEntries[t];e.stateDefinition.name===o.stateName&&(i._previousStateName=e.stateDefinition.name,i._deactivateTransientElementsFor(o.stateName))}})}t.toolbarGroups&&this.app.toolbarGroupRegistry.registerToolbarGroups(t.toolbarGroups,this.libraryId)}},t.prototype._findTransientElementsFor=function(e){for(var t=[],i=0;i<this._transientElements.length;++i){var o=this._transientElements[i];o&&o.originatorId===e&&t.push(o)}return t},t.prototype._findTransientElementEntriesFor=function(e){for(var t=[],i=0;i<this._transientElementEntries.length;++i){var o=this._transientElementEntries[i];o.stateName===e&&t.push(o)}return t},t.prototype._activateTransientElementsFor=function(e){for(var t=this._findTransientElementEntriesFor(e),i=0;i<t.length;++i){var o=this._activateTransientElement(t[i],e);o&&(this._transientElements.push(o),this.app.event("TransientActivatedEvent").publish({stateName:t[i].stateName,widgetId:t[i].widgetId,viewId:t[i].viewId}))}this._setNeighbourTransientClass()},t.prototype._setNeighbourTransientClass=function(){var e=this;if(this._transientElements.length>1)for(var t=0;t<this._transientElements.length;t++){for(var i=this._transientElements.filter(function(i){return i.element.regionName===e._transientElements[t].element.regionName}),o=!1,a=0;a<i.length;a++)i[a].element.viewModel.hasOwnProperty("items")||(o=!0);if(o)for(var n=0;n<i.length;n++)i[t]&&i[t].element.viewModel.hasNeighbour&&i[t].element.viewModel.hasNeighbour.set(!0)}else for(var t=0;t<this._transientElements.length;t++)this._transientElements[t].element.viewModel.hasNeighbour&&this._transientElements[t].element.viewModel.hasNeighbour.set(!1)},t.prototype._activateTransientElement=function(e,t){var i=this;if(e.viewId)return this.app.commandRegistry.command("ActivateView").execute(e.viewId),{source:o.TransientElementSource.View,originatorId:t,element:e.viewId};if(e.widgetId){for(var l=null,r=0;r<this.app.configModel.widgetConfigs.length;++r)if(this.app.configModel.widgetConfigs[r].id===e.widgetId){l=this.app.configModel.widgetConfigs[r];break}if(!l)return this.app.trace.warning("Could not activate transient toolbar widget '{0}'".format(e.widgetId)),null;var s=this.app.viewManager.getViewById("TabbedToolbarView")||new a.ViewBase(this.app,this.libraryId),d=s._createWidgetViewFromConfig(l,this);return d.regionName=e.region,n.runWhenIdle(function(){return i._activateView(d,e)}),{source:o.TransientElementSource.Widget,originatorId:t,element:d}}},t.prototype._activateView=function(e,t){if(this.app.viewManager.getViewById(e.id)){var i=!1,o=this.app.viewManager.getExistingRegionByName(t.region);if(o&&o.views&&o.views.filter(function(e){return e.isActive}).length>0&&(i=!0),t.items){var a=new l.ToolbarGroup(this.app,this.libraryId,t);i?e.viewModel.items.addItems(a.items.get()):e.viewModel.items.set(a.items.get()),this.app.command("ResizeShell").execute()}i&&t.items||this.app.commandRegistry.command("ActivateView").execute(e.id)}},t.prototype._deactivateTransientElementsFor=function(e){for(var t=this._findTransientElementsFor(e),i=0;i<t.length;++i){var o=t[i];r.removeItem(this._transientElements,o),this._deactivateTransientElement(o)}0===this._transientElements.length&&this.app.event("TransientsDeactivatedEvent").publish(),this._setNeighbourTransientClass()},t.prototype._deactivateTransientElement=function(e){switch(e.source){case o.TransientElementSource.Widget:this.app.viewManager.destroyView(e.element)}},t.prototype._handleActiveToolChangedEvent=function(e){var t=this,i=e.tool?e.tool.id||e.tool.name:null,o=e.previousTool?e.previousTool.id||e.previousTool.name:null;if(i||this._peekTimerHandle)if(clearTimeout(this._peekTimerHandle),this._peekTimerHandle=null,i&&this._previousToolId){var a=this._findTransientElementEntriesFor(this._previousStateName),n=[];if(a)for(var l=0;l<a.length;++l){a[l]}if(n.indexOf(i)>-1)return this._previousFriendToolId=i,void(0===this._transientElements.length&&this._activateTransientElementsFor(this._previousStateName));this._handleToolChangeTransients.apply(this,[this._previousToolId,i])}else this._handleToolChangeTransients.apply(this,[this._previousToolId,i]);else this._peekTimerHandle=setTimeout(function(){t._handleToolChangeTransients.apply(t,[t._previousToolId,i])},this._toolChangePeekPeriod);o&&o!==this._previousFriendToolId?this._previousToolId=o:this._previousFriendToolId=o},t.prototype._handleToolChangeTransients=function(e,t){e&&(this._previousToolId=null),this._previousFriendToolId&&e&&(this._deactivateTransientElementsFor(this._previousStateName),this._previousFriendToolId=null,this.app.command("SetActiveTool").execute(e))},t}(i.ModuleBase);t.ToolbarModuleBase=s})},"Mapping/modules/Toolbar/ToolbarTabViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables"],function(e,t,i,o){"use strict";var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=new o.Observable(""),t.tooltip=new o.Observable(""),t.group=new o.Observable(null),t.isVisible=new o.Observable((!1)),t.isActive=new o.Observable((!1)),t}return __extends(t,e),t}(i.ViewModelBase);t.ToolbarTabViewModel=a})},"Mapping/modules/Toolbar/CompactToolbar/CompactToolbarView":function(){define(["require","exports","geocortex/framework/ui/ViewBase","geocortex/framework-ui/animation/AnimationSequence"],function(e,t,i,o){"use strict";var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._collapsibleAreaWidth=null,t._transientRegionId="CompactToolbarTransientRegion",t._toolChangePeekPeriod=110,t}return __extends(t,e),t.prototype.attach=function(t){var i=this;e.prototype.attach.call(this,t),this.viewModel.isEnabled.get()!==!1&&(this.viewModel.activeTool.bind(this,function(e){return i._resizeView()}),this.viewModel.backArrowVisible.bind(this,function(e){return i._resizeView()}),this.viewModel.forwardArrowVisible.bind(this,function(e){return i._resizeView()}),this.viewModel.registerCompactToolbarViewId(this.id),this.app.site&&this.app.site.isInitialized?(this.viewModel.isExpanded.get()&&this._assignFloatingAreaWidth(),this._resizeView(),this.toggleScrollArrows()):this.app.event("SiteInitializedEvent").once(this,function(){i.viewModel.isExpanded.get()&&i._assignFloatingAreaWidth(),i._resizeView(),i.toggleScrollArrows()}),this.app.event("RegionActivatedEvent").subscribe(this,this._handleTransientActivated),this.app.event("RegionDeactivatedEvent").subscribe(this,this._handleTransientDeactivated),this.app.event("ToggleButtonStateChangedEvent").subscribe(this,function(e){return i._resizeView()}),this.app.command("ToggleToolbar").register(this,function(){return i._handleToolbarToggleStateChange()}),this.app.command("OpenToolbar").register(this,function(){return i._handleToolbarToggleStateChange()}),this.app.command("CloseToolbar").register(this,function(){return i._handleToolbarToggleStateChange()}),this.viewModel.isExpanded.bind(this,this.handleIsExpandedChange))},t.prototype.handleToolbarButtonClicked=function(){var e=this;this.viewModel.activeTool.get()?(this.viewModel.activeTool.set(null),this.app.command("ClearActiveTool").execute(),this.app.command("CloseToolbar").execute(),setTimeout(function(){e.app.command("ClearActiveTool").execute()},this._toolChangePeekPeriod)):this.viewModel.isExpanded.get()?this.app.command("CloseToolbar").execute():this.app.command("OpenToolbar").execute(),this.viewModel.activeFlyout.set(null)},t.prototype.handleToolbarItemClick=function(e,t,i){i.execute(),this.viewModel.transientActive.get()===!1&&this.app.command("CloseToolbar").execute()},t.prototype.handleOpenToolFlyout=function(e,t,i){if(i.toggleFlyout(),this.viewModel.activeFlyout.get()===i)return void this.viewModel.activeFlyout.set(null);this.viewModel.activeFlyout.get()&&this.viewModel.activeFlyout.get().toggleFlyout();var o=$(this.collapsibleAreaElement).width(),a=$(t).position().left;a>o/2?(this.viewModel.multitoolFloatRight.set(!0),this.viewModel.multitoolFloatLeft.set(!1)):(this.viewModel.multitoolFloatRight.set(!1),this.viewModel.multitoolFloatLeft.set(!0)),this.viewModel.activeFlyout.set(i)},t.prototype.handleScrollBack=function(e,t,i){var o=$(this.floatingAreaElement);o.scrollLeft(o.scrollLeft()-$(this.expandedElement).width()-$(this.backArrowElement).width()),this.toggleScrollArrows(),this.viewModel.backArrowVisible.get()&&o.scrollLeft(o.scrollLeft()+$(this.forwardArrowElement).width())},t.prototype.handleScrollForward=function(e,t,i){var o=$(this.floatingAreaElement);o.scrollLeft(o.scrollLeft()+$(this.expandedElement).width()-$(this.forwardArrowElement).width()),this.toggleScrollArrows(),this.viewModel.forwardArrowVisible.get()&&o.scrollLeft(o.scrollLeft()-$(this.backArrowElement).width())},t.prototype.handleIsExpandedChange=function(e){var t=this;if(e){this.app.event("FlyoutActivated").publish(this);var i={view:this,onOtherInteracted:function(e){return t._onOtherInteracted(e)}};this.app.command("TapToDismiss").execute(i)}else this.app.event("FlyoutDeactivated").publish(this)},t.prototype._onOtherInteracted=function(e){this.viewModel.transientActive.get()===!1&&this.viewModel.isExpanded.get()===!0&&this.app.command("CloseToolbar").execute()},t.prototype._resizeView=function(){this.viewModel.transientActive.get()===!1?($(this.expandedElement).width(this._collapsibleAreaWidth),$(this.collapsibleAreaElement).width(this._collapsibleAreaWidth),this._resizeEntireToolArea()):(this._resizeTransientToolArea(),$(this.expandedElement).width($(this.transientElement).width()))},t.prototype._handleTransientActivated=function(e){if(e.name===this._transientRegionId){this.viewModel.transientActive.set(!0);var t=this.app.toolRegistry.getActiveTool();t&&(this.viewModel.activeTool.set(t),this.app.command("OpenToolbar").execute())}},t.prototype._handleTransientDeactivated=function(e){var t=this;e.name===this._transientRegionId&&setTimeout(function(){t.app.toolRegistry.getActiveTool()?t._resizeView():(t.viewModel.activeTool.set(null),t.viewModel.transientActive.set(!1),t.app.command("CloseToolbar").execute())},this._toolChangePeekPeriod)},t.prototype._resizeEntireToolArea=function(){var e=$(this.toolbarParentElement).children(),t=$(this.floatingAreaElement).find("div.toolbar-group"),i=0;$(e).each(function(e,t){i+=Math.ceil($(t).outerWidth(!0))}),i+=this._getPaddingAndBorder(t),$(t).css("width",i)},t.prototype._getPaddingAndBorder=function(e){var t=0;return isNaN(parseFloat($(e).css("padding")))?(isNaN(parseFloat($(e).css("padding-left")))||(t+=parseFloat($(e).css("padding-left"))),isNaN(parseFloat($(e).css("padding-right")))||(t+=parseFloat($(e).css("padding-right")))):t+=2*parseFloat($(e).css("padding")),isNaN(parseFloat($(e).css("border")))?(isNaN(parseFloat($(e).css("border-left-width")))||(t+=parseFloat($(e).css("border-left-width"))),isNaN(parseFloat($(e).css("border-right-width")))||(t+=parseFloat($(e).css("border-right-width")))):t+=2*parseFloat($(e).css("border")),t},t.prototype._resizeTransientToolArea=function(){var e=this;setTimeout(function(){var t=$(e.transientElement).find("li"),i=$(e.collapsibleAreaElement);0===t.length&&(e.viewModel.transientActive.set(!1),e.app.command("CloseToolbar").execute());var o=0;$(t).each(function(e,t){o+=Math.ceil($(t).outerWidth(!0))}),o+=e._getPaddingAndBorder(i),$(i).css("width",o)},0)},t.prototype._assignFloatingAreaWidth=function(){if(null===this._collapsibleAreaWidth&&this.viewModel.isExpanded.get()){var e=$(this.toolbarParentElement).children(),t=Math.ceil($(e).outerWidth(!0)),i=$(this.forwardArrowElement).outerWidth(!0),o=t*this.viewModel.toolbarVisibleTools.get()+i,a=t*e.length;a<=o?this._collapsibleAreaWidth=a:this._collapsibleAreaWidth=o}},t.prototype._handleToolbarToggleStateChange=function(){var e=this;this.app.configuration.mobileMode?o.runWhenIdle(function(){e._assignFloatingAreaWidth(),e._resizeView(),e.toggleScrollArrows()}):(this._assignFloatingAreaWidth(),this._resizeView(),this.toggleScrollArrows())},t.prototype.toggleScrollArrows=function(){if(this.floatingAreaElement){for(var e=$(this.floatingAreaElement).scrollLeft(),t=this.floatingAreaElement,i=0,o=0;o<t.childNodes.length;o++)i+=this._getPaddingAndBorder($(t.childNodes.item(o)));i=Math.ceil(i);var a=t.scrollWidth-t.clientWidth-i;0===e?this.viewModel.backArrowVisible.set(!1):this.viewModel.backArrowVisible.set(!0),e>=a?this.viewModel.forwardArrowVisible.set(!1):this.viewModel.forwardArrowVisible.set(!0)}},t}(i.ViewBase);t.CompactToolbarView=a})},"Mapping/modules/Toolbar/CompactToolbar/CompactToolbarViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables"],function(e,t,i,o){"use strict";var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isEnabled=new o.Observable((!0)),t.toggleCommandDisablesView=new o.Observable((!1)),t.isExpanded=new o.Observable((!1)),t.activeTool=new o.Observable(null),t.activeToolName=new o.Observable(null),t.activeToolIcon=new o.Observable(null),t.activeFlyout=new o.Observable(null),t.transientActive=new o.Observable((!1)),t.toolbarGroup=new o.Observable(null),t.backArrowVisible=new o.Observable((!1)),t.forwardArrowVisible=new o.Observable((!0)),t.toolbarVisibleTools=new o.Observable(4),t.toolbarOpenByDefault=new o.Observable((!1)),t.multitoolFloatLeft=new o.Observable((!0)),t.multitoolFloatRight=new o.Observable((!1)),t._toolbarGroupId="compactToolbar",t._compactToolbarViewId=null,t}return __extends(t,e),t.prototype.initialize=function(e){var t=this;return this.toolbarGroup.set(this.app.toolbarGroupRegistry.getToolbarGroupById(this._toolbarGroupId)),null===this.toolbarGroup.get()?void this.isEnabled.set(!1):(e.registerToggleCommand!==!1&&this.isEnabled.get()&&(this.app.command("ToggleToolbar").register(this,this._executeToggleToolbar,this._isPresent),this.app.command("OpenToolbar").register(this,this._executeOpenToolbar,this._isClosed),this.app.command("CloseToolbar").register(this,this._executeCloseToolbar,this._isOpen)),this.app.event("ActiveToolChangedEvent").subscribe(this,function(e){e.tool&&t._handleUpdateActiveTool(t.toolbarGroup.get().items.get(),e.tool,!0),e.previousTool&&t._handleUpdateActiveTool(t.toolbarGroup.get().items.get(),e.previousTool,!1)}),e.toolbarVisibleTools?this.toolbarVisibleTools.set(e.toolbarVisibleTools):this.toolbarVisibleTools.set(this.toolbarGroup.get().items.length()),e.toggleCommandDisablesView&&(this.toggleCommandDisablesView.set(!0),this.isExpanded.set(!0)),
e.toolbarOpenByDefault&&setTimeout(function(){t.app.command("ToggleToolbar").execute()},0),void this.activeTool.bind(this,function(e){return e?t._assignProperNameToTool(e):t._clearToolInfo()}))},t.prototype.registerCompactToolbarViewId=function(e){e&&!this._compactToolbarViewId&&(this._compactToolbarViewId=e)},t.prototype._executeToggleToolbar=function(){if(this.toggleCommandDisablesView.get()){var e=this.app.viewManager.getViewById(this._compactToolbarViewId);this.app.command("ToggleView").execute(e.id)}else this.isExpanded.set(!this.isExpanded.get())},t.prototype._executeOpenToolbar=function(){if(this.toggleCommandDisablesView.get()){var e=this.app.viewManager.getViewById(this._compactToolbarViewId);this.app.command("ActivateView").execute(e.id)}else this.isExpanded.set(!0)},t.prototype._executeCloseToolbar=function(){if(this.toggleCommandDisablesView.get()){var e=this.app.viewManager.getViewById(this._compactToolbarViewId);e.isActive&&this.app.command("DeactivateView").execute(e.id)}else this.isExpanded.set(!1)},t.prototype._isPresent=function(){return this.isEnabled.get()},t.prototype._isOpen=function(){if(this.toggleCommandDisablesView.get()){var e=this.app.viewManager.getViewById(this._compactToolbarViewId);return e?e.isActive:null}return this.isExpanded.get()},t.prototype._isClosed=function(){if(this.toggleCommandDisablesView.get()){var e=this.app.viewManager.getViewById(this._compactToolbarViewId);return e?!e.isActive:null}return!this.isExpanded.get()},t.prototype._handleUpdateActiveTool=function(e,t,i){var o=this;if(this.activeFlyout.set(null),t&&e){var a=!1;e.forEach(function(e){"tool"===e.type?e.tool?t&&e.tool.command&&t.command&&e.tool.command===t.command&&e.tool.drawMode===t.drawMode&&(a=!0,i?(e.activate(),o.activeTool.set(e.tool)):(e.deactivate(),o.activeTool.set(null))):o.transientActive.get()===!1&&o.activeTool.set(null):"toolbarGroup"!==e.type&&"flyout"!==e.type||!e.items.getLength()||o._handleUpdateActiveTool(e.items.get(),t,i)}),a||this.activeTool.set(i?t:null)}},t.prototype._assignProperNameToTool=function(e){if(!this.activeToolName.get()){for(var t=0;t<this.toolbarGroup.get().items.length();t++){var i=this.toolbarGroup.get().items.getAt(t);if("flyout"===i.type||"group"===i.type)for(var o=0;o<i.items.length();o++){var a=i.items.getAt(o);a.id===e.name&&(this.activeToolName.set(a.name.get()),this.activeToolIcon.set(a.iconUri.get()))}i.id===e.name&&(this.activeToolName.set(i.name.get()),this.activeToolIcon.set(i.iconUri.get()))}this.activeToolIcon.get()||this.activeToolIcon.set(this.app.toolRegistry.tools[e.name]?this.app.toolRegistry.tools[e.name].iconUri:null),this.activeToolName.get()||this.activeToolName.set(e.name)}},t.prototype._clearToolInfo=function(){this.activeToolName.set(null),this.activeToolIcon.set(null)},t}(i.ViewModelBase);t.CompactToolbarViewModel=a})},"Mapping/modules/Toolbar/Transients/TransientElement":function(){define(["require","exports"],function(e,t){"use strict";var i;!function(e){e[e.View=0]="View",e[e.Widget=1]="Widget",e[e.ToolbarGroup=2]="ToolbarGroup"}(i=t.TransientElementSource||(t.TransientElementSource={}))})},"Mapping/modules/Toolbar/Transients/TransientElementEntry":function(){define(["require","exports"],function(e,t){"use strict"})},"Mapping/modules/Toolbar/Transients/TransientView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,i){"use strict";var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.handleToolbarItemClick=function(e,t,i){i.execute()},t.prototype.resolveWidget=function(t,i){if(e.prototype.resolveWidget.call(this,t,i),"RegionWidget"===t&&i.regionName){var o=(i.regionName,this.app.viewManager.createView({markupResource:"Mapping/modules/Toolbar/Templates/ToolbarRegionTemplate.html"}));return o.app=this.app,o.libraryId=this.libraryId,o.attach(i),o}return null},t.prototype.handleClickClose=function(e,t,i){this.app.command("ClearActiveTool").execute()},t}(i.ViewBase);t.TransientView=o})},"Mapping/modules/Toolbar/Transients/TransientViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables"],function(e,t,i,o){"use strict";var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.items=new o.ObservableCollection([]),t.name=new o.Observable(null),t.hasNeighbour=new o.Observable((!1)),t}return __extends(t,e),t.prototype.initialize=function(t){e.prototype.initialize.call(this,t)},t}(i.ViewModelBase);t.TransientViewModel=a})},"url:/Mapping/modules/Toolbar/LargeToolbarView.html":'<div class="toolbar-container unselectable has-action-1">\r\n    <div class="toolbar-tab-container" data-binding="{@visible: toolbarTabs}">\r\n        <ul class="toolbar-tab-control" data-binding="{@source: toolbarTabs}">\r\n            <li class="toolbar-tab" data-binding="{@template-for: toolbarTabs}{@class-tb-tab-active: isActive}{@hidden: disabled}">\r\n                <button data-binding="{@text: title}{title: tooltip}{@event-onclick: handleTabClick}"></button>\r\n            </li>\r\n        </ul>\r\n        <ul class="toolbar-actions">\r\n            <li>\r\n                <button class="toolbar-action-button" data-binding="{@event-click: closeToolbar}">\r\n                    <img src="Resources/Images/Icons/panel-close.png" data-binding="{title: @language-toolbar-close-toolbar}{alt: @language-toolbar-close-toolbar}" />\r\n                </button>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="toolbar-body large" data-binding="{@source: toolbarGroups}{@template: Mapping/modules/Toolbar/Templates/TabbedToolbarGroupTemplate.html}"></div>\r\n    <div class="multi-tool-dropdown" data-region-name="ToolbarFlyoutDropdown" data-binding="{@visible: activeFlyout}{@var: flyoutRegion}"></div>\r\n</div>',"url:/Mapping/modules/Toolbar/LargeTransientToolbarView.html":'<div class="large-transient-toolbar" data-binding="{@visible: toolbarGroups}{@source: toolbarGroups}{@template: Mapping/modules/Toolbar/Templates/ToolbarGroupTemplate.html}">\r\n    <a class="toolbar-close-button" href="javascript:void(0)" data-binding="{@event-onclick: closeToolbar}"></a> \r\n</div>\r\n\r\n<div  class="large-transient-toolbar" data-binding="{@hidden: toolbarGroups}{@text: @language-toolbar-not-available}">\r\n    <img class="toolbar-close-button" src="Resources/Images/Icons/panel-close.png" data-binding="{alt: @language-common-close}{@event-onclick: closeToolbar}" />\r\n</div>',"url:/Mapping/modules/Toolbar/SmallToolbarView.html":'<div class="toolbar-body small unselectable" data-binding="{@visible: toolbarGroups}{@source: toolbarGroups}{@template: Mapping/modules/Toolbar/Templates/ToolbarGroupTemplate.html}"></div>',"url:/Mapping/modules/Toolbar/SmallTransientToolbarView.html":'<div data-binding="{@visible: toolbarGroups}{@source: toolbarGroups}{@template: Mapping/modules/Toolbar/Templates/ToolbarGroupTemplate.html}"></div>\r\n<div data-binding="{@hidden: toolbarGroups}{@text: @language-toolbar-not-available}"></div>',"url:/Mapping/modules/Toolbar/ToolbarButtonView.html":'<button class="toolbar-toggle-button" data-binding="{@visible: toolbarGroups}{@event-onclick: handleClickToggleToolbar}{title: @language-toolbar-open-toolbar}" tabindex="0">\r\n    <span class="tool-label" data-binding="{@text: @language-compact-toolbar-button-description}"></span>\r\n</button>',"url:/Mapping/modules/Toolbar/ToolbarManagedViewsView.html":'<table class="tab-container">\r\n    <tr class="tab-container" data-binding="{@source: hostedViews}">\r\n        <td data-binding="{@template-for: hostedViews}{@event-onclick: handleViewTileClick}{className: id}{@var: tileElements}">\r\n            <img data-binding="{@visible: iconUri}{src: iconUri}{alt: description}"/>\r\n            <span data-binding="{@hidden: iconUri}{@text: title}"></span>\r\n        </td>\r\n    </tr>\r\n</table>',"url:/Mapping/modules/Toolbar/ToolbarView.html":'\r\n<div class="region toolbar-tab-content-region" data-region-name="ToolbarTabContentRegion" data-binding="{@event-mousedown: handleMouseDown} {@event-mouseup: handleMouseUp} {@event-touchstart: handleTouchStart} {@event-touchend: handleTouchEnd} {@event-mouseout: handleMouseOut} {@event-touchcancel: handleTouchCancel} {@event-touchmove: handleTouchMove}" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>',"url:/Mapping/modules/Toolbar/CompactToolbar/CompactToolbarView.html":'<!-- TODO: Remove the isEnabled and allow config\'s \'visible\' to control this.\r\n           Needs to wait until toolbar is divided into separate views - otherwise problems occur between shells.\r\n           Once the toolbar is in seperate views then we can also get rid of the root element. -->\r\n<div class="flyout-menu" data-binding="{@visible: isEnabled}">\r\n    <!-- Button for opening the menu and disabling the active tool. -->\r\n    <button class="flyout-menu-active-tool" data-binding="{@event-onclick: handleToolbarButtonClicked}">\r\n        <span data-binding="{@visible: activeTool}">\r\n            <img data-binding="{@visible: activeToolIcon}{src: activeToolIcon}" src="Resources/Images/Icons/Toolbar/icon-blank-24.png" alt=""/>\r\n            <span class="tool-label" data-binding="{@text: activeToolName}"></span>\r\n        </span>\r\n        <span data-binding="{@hidden: activeTool}">\r\n            <img src="Resources/Images/Icons/Toolbar/tools-24.png" alt="" />\r\n            <span class="tool-label" data-binding="{@text: @language-compact-toolbar-button-description}"></span>\r\n        </span>\r\n    </button>\r\n\r\n    <div class="flyout-menu-collapsible-area flyout-menu-tools" data-binding="{@visible: isExpanded}{@var: collapsibleAreaElement}">\r\n        <!-- Tool display area -->\r\n        <div data-binding="{@hidden: transientActive}">\r\n            <button class="flyout-menu-scroll scroll-back" data-binding="{@event-onclick: handleScrollBack}{@visible: backArrowVisible}{@var: backArrowElement}">\r\n                <img src="Resources/Images/Icons/chevron-left-16.png" data-binding="{alt: @language-compact-toolbar-more-tools}">\r\n            </button>\r\n            <div class="flyout-menu-expanded" data-binding="{@var: expandedElement}">\r\n                <div class="flyout-menu-floating-area" data-binding="{@source: toolbarGroup}{@event-onscroll: toggleScrollArrows}{@var: floatingAreaElement}{@template: Mapping/modules/Toolbar/Templates/ToolbarGroupTemplate.html}"></div>\r\n            </div>\r\n            <button class="flyout-menu-scroll scroll-forward" data-binding="{@event-onclick: handleScrollForward}{@visible: forwardArrowVisible}{@var: forwardArrowElement}">\r\n                <img src="Resources/Images/Icons/chevron-right-16.png" data-binding="{alt: @language-compact-toolbar-more-tools}">\r\n            </button>\r\n        </div>\r\n\r\n        <!-- Active when a tool has a transient -->\r\n        <div class="flyout-menu-transient" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter" data-region-name="CompactToolbarTransientRegion" data-binding="{@visible: transientActive}{@var: transientElement}"></div>\r\n\r\n        <!-- Region for multi-tool flyout -->\r\n        <div class="multi-tool-dropdown" data-region-name="CompactToolbarFlyoutDropdown" data-binding="{@visible: activeFlyout}{@class-multi-tool-dropdown-left: multitoolFloatLeft}{@class-multi-tool-dropdown-right: multitoolFloatRight}"></div>\r\n    </div>\r\n\r\n</div>',"url:/Mapping/modules/Toolbar/Templates/TabbedToolbarGroupTemplate.html":'<div class="toolbar-group" data-binding="{@class-hidden: disabled}{@visible: isActive}">\r\n    <ul data-binding="{@source: items}{@template-selector: type}{@class-toolbar-small-layout: hasSmallLayout}">\r\n\r\n        <li data-binding="{@template-select: tool}">\r\n            <button class="toolbar-item tool" data-binding="{@disabled: disabled}{@class-hidden: hidden}{@class-highlight: isActive}{@class-transient-active: activeTransient}{title: tooltip}{@event-onclick: handleToolbarItemClick}">\r\n                <img data-binding="{@visible: iconUri}{src: iconUri}" src="Resources/Images/Icons/Toolbar/icon-blank-24.png" alt="" />\r\n                <p data-binding="{@text: name}"></p>\r\n            </button>\r\n        </li>\r\n\r\n        <li data-binding="{@template-select: button}">\r\n            <button class="toolbar-item tool" data-binding="{@disabled: disabled}{@class-hidden: hidden}{title: tooltip}{@event-onclick: handleToolbarItemClick}">\r\n                <img data-binding="{@visible: iconUri}{src: iconUri}" src="Resources/Images/Icons/Toolbar/icon-blank-24.png" alt="" />\r\n                <p data-binding="{@text: name}"></p>\r\n            </button>\r\n        </li>\r\n\r\n        <li data-binding="{@template-select: toggleButton}">\r\n            <button class="toolbar-item toggle-button" data-binding="{@disabled: disabled}{@class-hidden: hidden}{@class-toggled-on: isToggledOn}{@noclass-toggled-off: isToggledOn}{@class-transient-active: activeTransient}{title: tooltip}{@event-onclick: handleToolbarItemClick}{aria-label: name}">\r\n                <img data-binding="{@visible: iconUri}{src: iconUri}" src="Resources/Images/Icons/Toolbar/icon-blank-24.png" alt="" />\r\n                <p data-binding="{@text: name}"></p>\r\n            </button>\r\n        </li>\r\n\r\n        <li class="toolbar-region" data-binding="{@template-select: region}">\r\n            <div data-binding="{@template-select: region}{@widget: RegionWidget}{@widget-context: @context}"></div>\r\n        </li>\r\n\r\n        <li class="nested-group" data-binding="{@template-select: toolbarGroup}{@template: Mapping/modules/Toolbar/Templates/TabbedToolbarGroupTemplate.html}"></li>\r\n\r\n        <li data-binding="{@template-select: flyout}{@class-hidden: disabled}{@template: Mapping/modules/Toolbar/Templates/ToolbarFlyoutButtonTemplate.html}"></li>\r\n\r\n    </ul>\r\n    <h4 data-binding="{@text: name}{@visible: name}"></h4>\r\n</div>',"url:/Mapping/modules/Toolbar/Templates/ToolbarFlyoutButtonTemplate.html":'<div class="multi-tool-item-container">\r\n    <div class="multi-tool-item" data-binding="{@source: selectedTool}{@template-selector: type}{@template-for: selectedTool}">\r\n        <button class="toolbar-item" data-binding="{@template-select: button}{@event-onclick: handleToolbarItemClick}{title: tooltip}{aria-label: name}">\r\n            <img data-binding="{@visible: iconUri}{src: iconUri}" src="Resources/Images/Icons/Toolbar/icon-blank-24.png" alt="" />\r\n            <p data-binding="{@text: name}"></p>\r\n        </button>\r\n        <button class="toolbar-item" data-binding="{@template-select: toggleButton}{@disabled: disabled}{@class-hidden: hidden}{@class-toggled-on: isToggledOn}{@noclass-toggled-off: isToggledOn}{@class-transient-active: activeTransient}{@event-onclick: handleToolbarItemClick}{title: tooltip}{aria-label: name}">\r\n            <img data-binding="{@visible: iconUri}{src: iconUri}" src="Resources/Images/Icons/Toolbar/icon-blank-24.png" alt="" />\r\n            <p data-binding="{@text: name}"></p>\r\n        </button>\r\n        <button class="toolbar-item" data-binding="{@template-select: tool}{@disabled: disabled}{@class-highlight: isActive}{@class-transient-active: activeTransient}{@event-onclick: handleToolbarItemClick}{title: tooltip}{aria-label: name}">\r\n            <img data-binding="{@visible: iconUri}{src: iconUri}" src="Resources/Images/Icons/Toolbar/icon-blank-24.png" alt="" />\r\n            <p data-binding="{@text: name}"></p>\r\n        </button>\r\n    </div>\r\n    <div class="multi-tool-item multi-tool-chooser">\r\n        <button class="toolbar-item" data-binding="{@event-onclick: handleOpenToolFlyout}{@attach: selectedTool}{title: flyoutButtonDescription}{aria-label: flyoutButtonDescription}"><img src="Resources/Images/Icons/arrow-down-small-24.png" alt="" /></button>\r\n    </div>\r\n</div>',"url:/Mapping/modules/Toolbar/Templates/ToolbarFlyoutDropdownTemplate.html":'<div class="multi-tool-container" data-binding="{@source: activeFlyout}">\r\n    <ul class="multi-tool-list" data-binding="{@template-for: activeFlyout}{@source: items}{@template-selector: type}">\r\n        <li data-binding="{@template-select: button}">\r\n            <button class="toolbar-item tool" data-binding="{@disabled: disabled}{@class-hidden: hidden}{@event-onclick: changeToolFlyout}{title: tooltip}">\r\n                <img data-binding="{@visible: iconUri}{src: iconUri}" src="Resources/Images/Icons/Toolbar/icon-blank-24.png" alt="" />\r\n                <p data-binding="{@text: name}"></p>\r\n            </button>\r\n        </li>\r\n        <li data-binding="{@template-select: toggleButton}">\r\n            <button class="toolbar-item tool" data-binding="{@disabled: disabled}{@class-hidden: hidden}{@class-toggled-on: isToggledOn}{@noclass-toggled-off: isToggledOn}{@event-onclick: changeToolFlyout}{title: tooltip}{aria-label: name}">\r\n                <img data-binding="{@visible: iconUri}{src: iconUri}" src="Resources/Images/Icons/Toolbar/icon-blank-24.png" alt="" />\r\n                <p data-binding="{@text: name}"></p>\r\n            </button>\r\n        </li>\r\n        <li data-binding="{@template-select: tool}">\r\n            <button class="toolbar-item tool" data-binding="{@disabled: disabled}{@class-hidden: hidden}{@class-highlight: isActive}{@event-onclick: changeToolFlyout}{title: tooltip}">\r\n                <img data-binding="{@visible: iconUri}{src: iconUri}" src="Resources/Images/Icons/Toolbar/icon-blank-24.png" alt="" />\r\n                <p data-binding="{@text: name}"></p>\r\n            </button>\r\n        </li>\r\n    </ul>\r\n</div>\r\n',"url:/Mapping/modules/Toolbar/Templates/ToolbarGroupTemplate.html":'<div class="toolbar-item toolbar-group">\r\n    <h2 data-binding="{@text: name}"></h2>\r\n    <ul class="toolbar-parent" data-binding="{@source: items}{@template-selector: type}{@class-toolbar-small-layout: hasSmallLayout}{@var: toolbarParentElement}">\r\n\r\n        <li data-binding="{@template-select: tool}">\r\n            <button class="toolbar-item tool" data-binding="{@disabled: disabled}{@class-highlight: isActive}{@class-transient-active: activeTransient}{@class-hidden: hidden}{title: tooltip}{@event-onclick: handleToolbarItemClick}">\r\n                <img data-binding="{@visible: iconUri}{src: iconUri}" src="Resources/Images/Icons/Toolbar/icon-blank-24.png" alt="" />\r\n                <p data-binding="{@text: name}"></p>\r\n            </button>\r\n        </li>\r\n\r\n        <li data-binding="{@template-select: button}">\r\n            <button class="toolbar-item" data-binding="{@disabled: disabled}{@class-hidden: hidden}{title: tooltip}{@event-onclick: handleToolbarItemClick}">\r\n                <img data-binding="{@visible: iconUri}{src: iconUri}" src="Resources/Images/Icons/Toolbar/icon-blank-24.png" alt="" />\r\n                <p data-binding="{@text: name}"></p>\r\n            </button>\r\n        </li>\r\n\r\n        <li data-binding="{@template-select: toggleButton}">\r\n            <button class="toolbar-item toggle-button" data-binding="{@disabled: disabled}{@class-hidden: hidden}{@class-toggled-on: isToggledOn}{@class-transient-active: activeTransient}{title: tooltip}{@noclass-toggled-off: isToggledOn}{@event-onclick: handleToolbarItemClick}{aria-label: name}">\r\n                <img data-binding="{@visible: iconUri}{src: iconUri}" src="Resources/Images/Icons/Toolbar/icon-blank-24.png" alt="" />\r\n                <p data-binding="{@text: name}"></p>\r\n            </button>\r\n        </li>\r\n\r\n        <li class="toolbar-region" data-binding="{@template-select: region}{title: tooltip}">\r\n            <button data-binding="{@widget: RegionWidget}{@widget-context: @context}"></button>\r\n        </li>\r\n\r\n        <li class="toolbar-item toolbar-group" data-binding="{@template-select: toolbarGroup}{@class-hidden: disabled}{@template: Mapping/modules/Toolbar/Templates/ToolbarItemsTemplate.html}"></li>\r\n\r\n        <li data-binding="{@template-select: flyout}{@class-hidden: disabled}{@template: Mapping/modules/Toolbar/Templates/ToolbarFlyoutButtonTemplate.html}"></li>\r\n\r\n    </ul>\r\n</div>\r\n',"url:/Mapping/modules/Toolbar/Templates/ToolbarItemsTemplate.html":'<h3 data-binding="{@text: name}"></h3>\r\n<!--   <img class="show-button" src="Resources/Images/Icons/add-24.png" data-binding="{@hidden: isActive}{@event-onclick: toggleVisibleGroup}" />\r\n<img class="hide-button" src="Resources/Images/Icons/minus-24.png" data-binding="{@visible: isActive}{@event-onclick: toggleVisibleGroup}" />-->\r\n\r\n<ul class="toolbar-nested" data-binding="{@source: items}{@template-selector: type}">\r\n    <li data-binding="{@template-select: tool}">\r\n        <button class="toolbar-item tool" data-binding="{@disabled: disabled}{@class-hidden: hidden}{@class-highlight: isActive}{@class-transient-active: activeTransient}{@event-onclick: handleToolbarItemClick}{title: tooltip}">\r\n            <img data-binding="{@visible: iconUri}{src: iconUri}" src="Resources/Images/Icons/Toolbar/icon-blank-24.png" alt="" />\r\n            <p data-binding="{@text: name}"></p>\r\n        </button>\r\n    </li>\r\n\r\n    <li data-binding="{@template-select: button}">\r\n        <button class="toolbar-item tool" data-binding="{@disabled: disabled}{@class-hidden: hidden}{@event-onclick: handleToolbarItemClick}{title: tooltip}">\r\n            <img data-binding="{@visible: iconUri}{src: iconUri}" src="Resources/Images/Icons/Toolbar/icon-blank-24.png" alt="" />\r\n            <p data-binding="{@text: name}"></p>\r\n        </button>\r\n    </li>\r\n\r\n    <li data-binding="{@template-select: toggleButton}">\r\n        <button class="toolbar-item toggle-button" data-binding="{@disabled: disabled}{@class-hidden: hidden}{@class-toggled-on: isToggledOn}{@class-transient-active: activeTransient}{@noclass-toggled-off: isToggledOn}{@event-onclick: handleToolbarItemClick}{title: tooltip}{aria-label: name}">\r\n            <img data-binding="{@visible: iconUri}{src: iconUri}" src="Resources/Images/Icons/Toolbar/icon-blank-24.png" alt="" />\r\n            <p data-binding="{@text: name}"></p>\r\n        </button>\r\n    </li>\r\n\r\n    <li class="toolbar-region" data-binding="{@template-select: region}{title: tooltip}">\r\n        <div data-binding="{@template-select: region}{@widget: RegionWidget}{@widget-context: @context}"></div>\r\n    </li>\r\n\r\n    <li class="nested-group" data-binding="{@template-select: toolbarGroup}{@template: Mapping/modules/Toolbar/Templates/TabbedToolbarGroupTemplate.html}"></li>\r\n\r\n    <li data-binding="{@template-select: flyout}{@class-hidden: disabled}{@template: Mapping/modules/Toolbar/Templates/ToolbarFlyoutButtonTemplate.html}"></li>\r\n\r\n</ul>\r\n\r\n',"url:/Mapping/modules/Toolbar/Templates/ToolbarRegionTemplate.html":'<div data-binding="{data-region-name: regionName}" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>',"url:/Mapping/modules/Toolbar/Templates/TransientItems.html":'<ul class="transient-toolbar" data-binding="{@source: items}{@template-selector: type}{@class-has-neighbour-transient: hasNeighbour}">\r\n    <li data-binding="{@template-select: tool}">\r\n        <button class="toolbar-item tool" data-binding="{@disabled: disabled}{@class-hidden: hidden}{@class-highlight: isActive}{@event-onclick: handleToolbarItemClick}{title: tooltip}">\r\n            <img data-binding="{@visible: iconUri}{src: iconUri}" src="Resources/Images/Icons/Toolbar/icon-blank-24.png" alt="" />\r\n            <p data-binding="{@text: name}"></p>\r\n        </button>\r\n    </li>\r\n\r\n    <li data-binding="{@template-select: button}">\r\n        <button class="toolbar-item tool" data-binding="{@disabled: disabled}{@class-hidden: hidden}{@event-onclick: handleToolbarItemClick}{title: tooltip}">\r\n            <img data-binding="{@visible: iconUri}{src: iconUri}" src="Resources/Images/Icons/Toolbar/icon-blank-24.png" alt="" />\r\n            <p data-binding="{@text: name}"></p>\r\n        </button>\r\n    </li>\r\n\r\n    <li data-binding="{@template-select: toggleButton}">\r\n        <button class="toolbar-item toggle-button" data-binding="{@disabled: disabled}{@class-hidden: hidden}{@class-toggled-on: isToggledOn}{@noclass-toggled-off: isToggledOn}{@event-onclick: handleToolbarItemClick}{title: tooltip}{aria-label: name}">\r\n            <img data-binding="{@visible: iconUri}{src: iconUri}" src="Resources/Images/Icons/Toolbar/icon-blank-24.png" alt="" />\r\n            <p data-binding="{@text: name}"></p>\r\n        </button>\r\n    </li>\r\n</ul>\r\n\r\n'}}),define(["Mapping/modules/Toolbar/CompactToolbarModule","Mapping/modules/Toolbar/TabbedToolbarModule","Mapping/modules/Toolbar/TabbedToolbarView","Mapping/modules/Toolbar/TabbedToolbarViewModel","Mapping/modules/Toolbar/ToolbarButtonView","Mapping/modules/Toolbar/ToolbarFlyoutView","Mapping/modules/Toolbar/ToolbarManagedViewsView","Mapping/modules/Toolbar/ToolbarManagedViewsViewModel","Mapping/modules/Toolbar/ToolbarModuleBase","Mapping/modules/Toolbar/ToolbarTabViewModel","Mapping/modules/Toolbar/CompactToolbar/CompactToolbarView","Mapping/modules/Toolbar/CompactToolbar/CompactToolbarViewModel","Mapping/modules/Toolbar/Transients/TransientElement","Mapping/modules/Toolbar/Transients/TransientView","Mapping/modules/Toolbar/Transients/TransientViewModel"],function(e,t,i,o,a,n,l,r,s,d,c,p,b,u,g){shim(e,"geocortex.essentialsHtmlViewer.mapping.modules.toolbar.CompactToolbarModule",e.CompactToolbarModule),shim(t,"geocortex.essentialsHtmlViewer.mapping.modules.toolbar.TabbedToolbarModule",t.TabbedToolbarModule),shim(i,"geocortex.essentialsHtmlViewer.mapping.modules.toolbar.TabbedToolbarView",i.TabbedToolbarView),shim(o,"geocortex.essentialsHtmlViewer.mapping.modules.toolbar.TabbedToolbarViewModel",o.TabbedToolbarViewModel),shim(a,"geocortex.essentialsHtmlViewer.mapping.modules.toolbar.ToolbarButtonView",a.ToolbarButtonView),shim(n,"geocortex.essentialsHtmlViewer.mapping.modules.toolbar.ToolbarFlyoutView",n.ToolbarFlyoutView),shim(l,"geocortex.essentialsHtmlViewer.mapping.modules.toolbar.ToolbarManagedViewsView",l.ToolbarManagedViewsView),shim(r,"geocortex.essentialsHtmlViewer.mapping.modules.toolbar.ToolbarManagedViewsViewModel",r.ToolbarManagedViewsViewModel),shim(s,"geocortex.essentialsHtmlViewer.mapping.modules.toolbar.ToolbarModuleBase",s.ToolbarModuleBase),shim(d,"geocortex.essentialsHtmlViewer.mapping.modules.toolbar.ToolbarTabViewModel",d.ToolbarTabViewModel),shim(c,"geocortex.essentialsHtmlViewer.mapping.modules.toolbar.CompactToolbarView",c.CompactToolbarView),shim(p,"geocortex.essentialsHtmlViewer.mapping.modules.toolbar.CompactToolbarViewModel",p.CompactToolbarViewModel),shim(b,"geocortex.essentialsHtmlViewer.mapping.modules.toolbar.transients.TransientElementSource",b.TransientElementSource),shim(u,"geocortex.essentialsHtmlViewer.mapping.modules.toolbar.transients.TransientView",u.TransientView),shim(g,"geocortex.essentialsHtmlViewer.mapping.modules.toolbar.transients.TransientViewModel",g.TransientViewModel)});