!function(){function e(e,i,t){if("string"==typeof e&&(t=i,i=e),void 0!==t)for(var o=i.split("."),a=null,r=window,s=0,n=o.length;s<n;s++)a=o[s],s==n-1?r[a]=t:r[a]||(r[a]={}),r=r[a];else console.warn("Undefined shim for: "+i)}var i="<div class='overview-map-container' data-binding='{@visible: isEnabled}                                                 {@class-overview-map-container-top-position: isTop}                                                 {@class-overview-map-container-bottom-position: isBottom}                                                 {@class-overview-map-container-left-position: isLeft}                                                 {@class-overview-map-container-right-position: isRight}'>    <button class='overview-map-toggle' tabindex='0'  data-binding='{@event-onclick: toggleMap}                                                                   {@class-overview-map-toggle-off: isActive}                                                                   {@class-overview-map-toggle-rightPosition: isRight}                                                                   {@class-overview-map-toggle-bottomPosition: isBottom}                                                                   {@class-overview-map-toggle-bottomActive: bottomAndActive}                                                                   {title: @language-feature-overview-map-toggle}'></button>    <div class='overview-map' data-binding='{@visible: isActive}                                           {@class-overview-map-bottom-position: isBottom}                                           {@class-overview-map-top-position: isTop}                                           {@class-overview-map-right-position: isRight}                                           {@class-overview-map-left-position: isLeft}'>        <div data-binding='{id: overviewMapId}'></div>    </div></div>";require({cache:{"Mapping/modules/OverviewMap/OverviewMapModule":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])};return function(i,t){function o(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();define(["require","exports","geocortex/framework/application/ModuleBase"],function(i,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return e(t,i),t}(o.ModuleBase);t.OverviewMapModule=a})},"Mapping/modules/OverviewMap/OverviewMapView":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])};return function(i,t){function o(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();define(["require","exports","geocortex/framework/ui/ViewBase"],function(i,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return e(t,i),t.prototype.activated=function(){var e=this;$(this.root).parent("[class*='bottom']").length&&this.viewModel.isBottom.set(!0),$(this.root).parent("[class*='right']").length&&this.viewModel.isRight.set(!0),$(this.root).parent("[class*='bottom']").length&&$(this.root).parent("[class*='right']").length&&$(".esriControlsBR").addClass("overview-map-attribution-override"),$(this.root).parent("[class*='left']").length&&this.viewModel.isLeft.set(!0),$(this.root).parent("[class*='top']").length&&this.viewModel.isTop.set(!0),this.app.command("OpenOverviewMap").register(this,this._loadOverviewMap),this.app.command("CloseOverviewMap").register(this,function(){return e.viewModel.isActive.set(!1)})},t.prototype._loadOverviewMap=function(e){var i=this;void 0===e&&(e=!0);this.viewModel.isActive.set(!0),null==this.viewModel.overviewMapDijit?setTimeout(function(){i.loadOverviewMapDijit(),e&&i.app.command("FocusOnFirstInputInView").execute(i)},250):e&&this.app.command("FocusOnFirstInputInView").execute(this)},t.prototype.toggleMap=function(e,i,t){!1===this.viewModel.isActive.get()?this.app.command("OpenOverviewMap").execute():this.app.command("CloseOverviewMap").execute()},t.prototype.loadOverviewMapDijit=function(){if(0!=this.viewModel.isEnabled.get()&&(null==this.viewModel.overviewMapDijit||!this.viewModel.isEnabled.get())){var e=this.app.site.overviewMap,i="#00FFFF";this.viewModel.visibleExtentColour.get()&&(i=this.viewModel.visibleExtentColour.get());this.viewModel.overviewMapDijit=new esri.dijit.OverviewMap({map:this.app.map,baseLayer:null,visible:!0,width:205,height:180,color:i,expandFactor:this.viewModel.extentScaleFactor.get(),maximizeButton:!1},this.viewModel.overviewMapId.get());try{this.viewModel.overviewMapDijit.startup()}catch(e){return this.app.trace.alert("Error encountered loading overview map: "+e),this.viewModel.overviewMapDijit.hide(),void this.viewModel.overviewMapDijit.destroy()}var t=this.viewModel.overviewMapDijit,o=t.map;(o=t.overviewMap).removeAllLayers();for(var a=e.mapServices.length-1;a>=0;a--){var r=e.mapServices[a];if(r){r.serviceLayer.spatialReference;o.addLayer(r.serviceLayer)}}0===o.layerIds.length&&(this.app.trace.info("No supported layers available for overview map. Disabling overview map."),this.viewModel.isEnabled.set(!1));var s=$(this.root).find(".ovwHighlight")[0];s?s.setAttribute("tabindex","0"):this.app.trace.warning("Unable for find overview map highlight area!")}},t}(o.ViewBase);t.OverviewMapView=a})},"Mapping/modules/OverviewMap/OverviewMapViewModel":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])};return function(i,t){function o(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","geocortex/framework/utils/utils","geocortex/infrastructure/GeometryUtils"],function(i,t,o,a,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(i){function t(){var e=null!==i&&i.apply(this,arguments)||this;return e.isEnabled=new a.Observable(!1),e.isActive=new a.Observable(!1),e.altText=new a.Observable(null),e.extentScaleFactor=new a.Observable(null),e.visibleExtentColour=new a.Observable(null),e.overviewMapDijit=null,e.overviewMapId=new a.Observable(null),e.isLeft=new a.Observable(!1),e.isRight=new a.Observable(!1),e.isTop=new a.Observable(!1),e.isBottom=new a.Observable(!1),e.bottomAndActive=new a.Observable(!1),e}return e(t,i),t.prototype.initialize=function(e){var i=this;this.app.map&&this.app.map.loaded?this._loadConfig(e):this.app.event("MapLoadedEvent").once(this,function(){return i._loadConfig(e)}),this.overviewMapId.set(r.alphaNumericToken())},t.prototype._loadConfig=function(e){var i=this;{if(this.app.site.hasOverviewMap){e&&(e.isEnabled&&this.isEnabled.set(!0),!0===e.openByDefault&&(this.isActive.set(!0),this.app.command("OpenOverviewMap").execute(!1)),e.extentScaleFactor&&this.extentScaleFactor.set(e.extentScaleFactor),e.visibleExtentColour&&this.visibleExtentColour.set(e.visibleExtentColour)),this.altText.set(this.getResource("language-feature-overview-map-toggle")),this.isActive.bind(this,function(e){1==e&&1==i.isBottom.get()?i.bottomAndActive.set(!0):i.bottomAndActive.set(!1)});for(var t=this.app.site.overviewMap,o=[],a=t.mapServices.length-1;a>=0;a--){var r=t.mapServices[a];if(r){var n=r.serviceLayer.spatialReference;s.needsProjection(new esri.geometry.Point(1,1,n),this.app)&&this.app.trace.warning("Overview Map Layer WKID/WKT differs from basemap. There may be rendering errors in the overview map. Layer: "+r.serviceUrl),o.push(r)}}return 0==o.length?(this.app.trace.info(this.app.getResource(this.libraryId,"language-feature-overview-map-error-no-base-layer")),$(".esriControlsBR").removeClass("attributionOverride"),void this.isEnabled.set(!1)):void 0}$(".esriControlsBR").removeClass("attributionOverride")}},t}(o.ViewModelBase);t.OverviewMapViewModel=n})},"url:/Mapping/modules/OverviewMap/OverviewMapView.html":i}}),require(["geocortex/framework/resourceManager"],function(e){e.resourceManager.register("Mapping","inv","Mapping/modules/OverviewMap/CSS/common.css","css","LyogU1RBUlQ6IE92ZXJ2aWV3TWFwIC0tLS0tLS0tLS0tLS0tLSAqLw0KLm92ZXJ2aWV3LW1hcC1jb250YWluZXIgew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICBtYXgtd2lkdGg6IDIxMHB4Ow0KICAgIHotaW5kZXg6IDEwMTsNCn0NCg0KLm92ZXJ2aWV3LW1hcC1jb250YWluZXItdG9wLXBvc2l0aW9uIHsNCiAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCn0NCg0KLm92ZXJ2aWV3LW1hcC1jb250YWluZXItYm90dG9tLXBvc2l0aW9uIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQoNCi5vdmVydmlldy1tYXAtY29udGFpbmVyLXJpZ2h0LXBvc2l0aW9uICB7DQogICAgZmxvYXQ6IHJpZ2h0Ow0KfQ0KLm92ZXJ2aWV3LW1hcC1jb250YWluZXItdG9wLXBvc2l0aW9uLm92ZXJ2aWV3LW1hcC1jb250YWluZXItcmlnaHQtcG9zaXRpb24gew0KICAgIG1hcmdpbjogMC40ZW07DQp9DQoub3ZlcnZpZXctbWFwLWNvbnRhaW5lci1sZWZ0LXBvc2l0aW9uIHsNCiAgICBtYXJnaW46IDAgMC4xZW07DQp9DQoNCi5vdmVydmlldy1tYXAgew0KICAgIGhlaWdodDogMTgwcHg7DQogICAgd2lkdGg6IDIwNXB4Ow0KICAgIGJvcmRlcjogMXB4IHNvbGlkICNEOUQ5RDk7DQogICAgYm9yZGVyLXJhZGl1czogMC4yNXJlbTsNCn0NCg0KLm92ZXJ2aWV3LW1hcC1ib3R0b20tcG9zaXRpb24gew0KICAgIGJvdHRvbTogMTg2cHg7DQp9DQoNCi5vdmVydmlldy1tYXAtcmlnaHQtcG9zaXRpb24gew0KICAgIHJpZ2h0OiAyMTBweDsNCn0NCiAgICANCi5vdmVydmlldy1tYXAtdG9nZ2xlIHsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgd2lkdGg6IDMuNWVtOw0KICAgIGhlaWdodDogMy41ZW07DQogICAgYmFja2dyb3VuZDogI0ZGRkZGRiB1cmwoIlJlc291cmNlcy9JbWFnZXMvSWNvbnMvYXJyb3ctdG9wLWxlZnQtMTYucG5nIikgY2VudGVyIGNlbnRlciBuby1yZXBlYXQ7DQogICAgYm9yZGVyOiAxcHggc29saWQgI0Q5RDlEOTsNCiAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtOw0KICAgIHpvb206IDE7DQogICAgZGlzcGxheTogYmxvY2s7DQp9DQoubm8tdG91Y2ggLm92ZXJ2aWV3LW1hcC10b2dnbGUgew0KICAgIHdpZHRoOiAyLjc1ZW07DQogICAgaGVpZ2h0OiAyLjc1ZW07DQp9DQoub3ZlcnZpZXctbWFwLXRvZ2dsZS1vZmYgew0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB6LWluZGV4OiAxMDE7DQogICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL2Fycm93LWJvdHRvbS1yaWdodC0xNi5wbmciKTsNCn0NCg0KLm92ZXJ2aWV3LW1hcC10b2dnbGUtcmlnaHRQb3NpdGlvbiB7DQogICAgcmlnaHQ6IDBweDsNCn0NCg0KLm92ZXJ2aWV3LW1hcC10b2dnbGUtYm90dG9tUG9zaXRpb24gew0KICAgIGJvdHRvbTogMHB4Ow0KfQ0KDQoub3ZlcnZpZXctbWFwLXRvZ2dsZS1ib3R0b21BY3RpdmUgew0KfQ0KDQoub3ZlcnZpZXctbWFwLWF0dHJpYnV0aW9uLW92ZXJyaWRlIHsNCiAgICByaWdodDogMy45ZW07DQp9DQoubm8tdG91Y2ggLm92ZXJ2aWV3LW1hcC1hdHRyaWJ1dGlvbi1vdmVycmlkZSB7DQogICAgcmlnaHQ6IDMuMTVlbTsNCn0NCi8qIEVORDogT3ZlcnZpZXdNYXAgLS0tLS0tLS0tLS0tLS0tICovDQo="),e.resourceManager.register("Mapping","inv","Mapping/modules/OverviewMap/OverviewMapView.html","html",i)}),require({cache:{}}),define(["Mapping/modules/OverviewMap/OverviewMapModule","Mapping/modules/OverviewMap/OverviewMapView","Mapping/modules/OverviewMap/OverviewMapViewModel"],function(i,t,o){e(i,"geocortex.essentialsHtmlViewer.mapping.modules.overviewMap.OverviewMapModule",i.OverviewMapModule),e(t,"geocortex.essentialsHtmlViewer.mapping.modules.overviewMap.OverviewMapView",t.OverviewMapView),e(o,"geocortex.essentialsHtmlViewer.mapping.modules.overviewMap.OverviewMapViewModel",o.OverviewMapViewModel)})}();