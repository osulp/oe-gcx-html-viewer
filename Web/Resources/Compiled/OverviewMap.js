function shim(e,i,t){if("string"==typeof e&&(t=i,i=e),"undefined"==typeof t)return void console.warn("Undefined shim for: "+i);for(var o=i.split("."),r=null,a=window,s=0,n=o.length;s<n;s++)r=o[s],s==n-1?a[r]=t:a[r]||(a[r]={}),a=a[r]}require({cache:{"Mapping/modules/OverviewMap/OverviewMapModule":function(){define(["require","exports","geocortex/framework/application/ModuleBase"],function(e,i,t){"use strict";var o=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i}(t.ModuleBase);i.OverviewMapModule=o})},"Mapping/modules/OverviewMap/OverviewMapView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,i,t){"use strict";var o=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.activated=function(){var e=this;$(this.root).parent("[class*='bottom']").length&&this.viewModel.isBottom.set(!0),$(this.root).parent("[class*='right']").length&&this.viewModel.isRight.set(!0),$(this.root).parent("[class*='bottom']").length&&$(this.root).parent("[class*='right']").length&&$(".esriControlsBR").addClass("overview-map-attribution-override"),$(this.root).parent("[class*='left']").length&&this.viewModel.isLeft.set(!0),$(this.root).parent("[class*='top']").length&&this.viewModel.isTop.set(!0),this.app.command("OpenOverviewMap").register(this,this._loadOverviewMap),this.app.command("CloseOverviewMap").register(this,function(){return e.viewModel.isActive.set(!1)})},i.prototype._loadOverviewMap=function(){var e=this,i=250;this.viewModel.isActive.set(!0),null==this.viewModel.overviewMapDijit?setTimeout(function(){e.loadOverviewMapDijit(),e.app.command("FocusOnFirstInputInView").execute(e)},i):this.app.command("FocusOnFirstInputInView").execute(this)},i.prototype.toggleMap=function(e,i,t){this.viewModel.isActive.get()===!1?this.app.command("OpenOverviewMap").execute():this.app.command("CloseOverviewMap").execute()},i.prototype.loadOverviewMapDijit=function(){if(0!=this.viewModel.isEnabled.get()&&(null==this.viewModel.overviewMapDijit||!this.viewModel.isEnabled.get())){var e=this.app.site.overviewMap,i="#00FFFF";this.viewModel.visibleExtentColour.get()&&(i=this.viewModel.visibleExtentColour.get());var t=null;this.viewModel.overviewMapDijit=new esri.dijit.OverviewMap({map:this.app.map,baseLayer:t,visible:!0,width:205,height:180,color:i,expandFactor:this.viewModel.extentScaleFactor.get(),maximizeButton:!1},this.viewModel.overviewMapId.get());try{this.viewModel.overviewMapDijit.startup()}catch(o){return this.app.trace.alert("Error encountered loading overview map: "+o),this.viewModel.overviewMapDijit.hide(),void this.viewModel.overviewMapDijit.destroy()}var r=this.viewModel.overviewMapDijit,a=r.map;a=r.overviewMap,a.removeAllLayers();for(var s=e.mapServices.length-1;s>=0;s--){var n=e.mapServices[s];if(n){n.serviceLayer.spatialReference;a.addLayer(n.serviceLayer)}}0===a.layerIds.length&&(this.app.trace.info("No supported layers available for overview map. Disabling overview map."),this.viewModel.isEnabled.set(!1));var v=$(this.root).find(".ovwHighlight")[0];v?v.setAttribute("tabindex","0"):this.app.trace.warning("Unable for find overview map highlight area!")}},i}(t.ViewBase);i.OverviewMapView=o})},"Mapping/modules/OverviewMap/OverviewMapViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","geocortex/framework/utils/utils","geocortex/infrastructure/GeometryUtils"],function(e,i,t,o,r,a){"use strict";var s=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.isEnabled=new o.Observable((!1)),i.isActive=new o.Observable((!1)),i.altText=new o.Observable(null),i.extentScaleFactor=new o.Observable(null),i.visibleExtentColour=new o.Observable(null),i.overviewMapDijit=null,i.overviewMapId=new o.Observable(null),i.isLeft=new o.Observable((!1)),i.isRight=new o.Observable((!1)),i.isTop=new o.Observable((!1)),i.isBottom=new o.Observable((!1)),i.bottomAndActive=new o.Observable((!1)),i}return __extends(i,e),i.prototype.initialize=function(e){var i=this;this.app.map&&this.app.map.loaded?this._loadConfig(e):this.app.event("MapLoadedEvent").once(this,function(){return i._loadConfig(e)}),this.overviewMapId.set(r.alphaNumericToken())},i.prototype._loadConfig=function(e){var i=this;if(!this.app.site.hasOverviewMap)return void $(".esriControlsBR").removeClass("attributionOverride");e&&(e.isEnabled&&this.isEnabled.set(!0),e.openByDefault===!0&&(this.isActive.set(!0),this.app.command("OpenOverviewMap").execute()),e.extentScaleFactor&&this.extentScaleFactor.set(e.extentScaleFactor),e.visibleExtentColour&&this.visibleExtentColour.set(e.visibleExtentColour)),this.altText.set(this.getResource("language-feature-overview-map-toggle")),this.isActive.bind(this,function(e){1==e&&1==i.isBottom.get()?i.bottomAndActive.set(!0):i.bottomAndActive.set(!1)});for(var t=this.app.site.overviewMap,o=[],r=t.mapServices.length-1;r>=0;r--){var s=t.mapServices[r];if(s){var n=s.serviceLayer.spatialReference;a.needsProjection(new esri.geometry.Point(1,1,n),this.app)&&this.app.trace.warning("Overview Map Layer WKID/WKT differs from basemap. There may be rendering errors in the overview map. Layer: "+s.serviceUrl),o.push(s)}}return 0==o.length?(this.app.trace.info(this.app.getResource(this.libraryId,"language-feature-overview-map-error-no-base-layer")),$(".esriControlsBR").removeClass("attributionOverride"),void this.isEnabled.set(!1)):void 0},i}(t.ViewModelBase);i.OverviewMapViewModel=s})},"url:/Mapping/modules/OverviewMap/OverviewMapView.html":'<div class="overview-map-container" data-binding="{@visible: isEnabled}\r\n                                                 {@class-overview-map-container-top-position: isTop}\r\n                                                 {@class-overview-map-container-bottom-position: isBottom}\r\n                                                 {@class-overview-map-container-left-position: isLeft}\r\n                                                 {@class-overview-map-container-right-position: isRight}">\r\n    <button class="overview-map-toggle" tabindex="0"  data-binding="{@event-onclick: toggleMap}\r\n                                                                   {@class-overview-map-toggle-off: isActive}\r\n                                                                   {@class-overview-map-toggle-rightPosition: isRight}\r\n                                                                   {@class-overview-map-toggle-bottomPosition: isBottom}\r\n                                                                   {@class-overview-map-toggle-bottomActive: bottomAndActive}\r\n                                                                   {title: @language-feature-overview-map-toggle}"></button>\r\n    <div class="overview-map" data-binding="{@visible: isActive}\r\n                                           {@class-overview-map-bottom-position: isBottom}\r\n                                           {@class-overview-map-top-position: isTop}\r\n                                           {@class-overview-map-right-position: isRight}\r\n                                           {@class-overview-map-left-position: isLeft}">\r\n        <div data-binding="{id: overviewMapId}"></div>\r\n    </div>\r\n</div>\r\n\r\n'}}),define(["Mapping/modules/OverviewMap/OverviewMapModule","Mapping/modules/OverviewMap/OverviewMapView","Mapping/modules/OverviewMap/OverviewMapViewModel"],function(e,i,t){shim(e,"geocortex.essentialsHtmlViewer.mapping.modules.overviewMap.OverviewMapModule",e.OverviewMapModule),shim(i,"geocortex.essentialsHtmlViewer.mapping.modules.overviewMap.OverviewMapView",i.OverviewMapView),shim(t,"geocortex.essentialsHtmlViewer.mapping.modules.overviewMap.OverviewMapViewModel",t.OverviewMapViewModel)});