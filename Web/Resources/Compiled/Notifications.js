!function(){var t="<div class='gcx-notify' data-binding='{@visible: isTopNotification}'>    <div class='gcx-notify-container'>        <div class='gcx-icon notify-item' data-binding='{@visible: iconUri}'>            <img data-binding='{src: iconUri}{alt: iconAltText}' aria-hidden='true' />        </div>        <div class='gcx-notify-content notify-item'>            <span class='notify-text' data-binding='{@text: truncatedNotificationText}{title: notificationText}'></span>        </div>        <ul class='gcx-buttons-list notify-item' data-binding='{@source: notificationButtons}{@visible: notificationButtons}'>            <li class='gcx-button-item' data-binding='{@template-for: notificationButtons}'>                <button class='button' data-binding='{@text: text}{@event-onclick: handleClickNotificationButton}'></button>            </li>        </ul>        <div class='gcx-panel-close notify-item' data-binding='{@source: closeButton}'>            <button class='icon-button close-16' data-binding='{@template-for: closeButton}{title: @language-common-close}{@event-onclick: handleClose}'></button>        </div>    </div></div>";require({cache:{"Mapping/modules/Notifications/NotificationsModule":function(){var t=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])};return function(i,o){function e(){this.constructor=i}t(i,o),i.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}();define(["require","exports","geocortex/framework/application/ModuleBase","./NotificationViewModel"],function(i,o,e,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=function(i){function o(t,o){var e=i.call(this,t,o)||this;return e.viewInstanceCounter=0,e.totalViewInstancesAdded=0,e._defaultNotificationViewId="NotificationView",e._notificationViewIds=[],e.app.command("DisplayNotification").register(e,e.displayNotification),e.app.command("RemoveNotification").register(e,e.removeNotification),e}return t(o,i),o.prototype.displayNotification=function(t){"string"==typeof t&&(t={id:String.format("{0}{1}",this._defaultNotificationViewId,this.totalViewInstancesAdded),closeButton:{},text:t}),t.id||(t.id=String.format("{0}{1}",this._defaultNotificationViewId,this.totalViewInstancesAdded));var i=t.id,o=this.app.viewManager.getViewById(i),e=o?o.viewModel:null,a=void 0===o;if(a){if(this._notificationViewIds.length>0){this._getTopNotificationView().viewModel.isTopNotification.set(!1)}var s=t.regionName||this.configuration.region||"TopMapRegion";o=this.createView("NotificationView",i,s),this._storeNotificationView(i)}e||(e=new n.NotificationViewModel(this.app,this.libraryId),o.attach(e)),e.notificationId=i;var c=a||this._isTopNotificationView(i);e.isTopNotification.set(c),e.setNotificationText(t.text),t.iconProperties&&(e.iconUri.set(t.iconProperties.uri),e.iconAltText.set(t.iconProperties.altText)),t.buttons&&(e.notificationButtons.clear(),e.notificationButtons.addItems(t.buttons)),t.closeButton&&(t.closeButton.text||(t.closeButton.text=this.getResource("language-common-close")),e.closeButton.set(t.closeButton))},o.prototype.removeNotification=function(t){var i,o=null;if(t&&(i=this._isTopNotificationView(t),o=this._removeNotificationView(t)),o&&(this.app.viewManager.destroyView(o),i&&this._notificationViewIds.length>0)){this._getTopNotificationView().viewModel.isTopNotification.set(!0)}},o.prototype.createView=function(t,i,o){return this.app.viewManager.createView({viewId:i,typeName:"geocortex.essentialsHtmlViewer.mapping.modules.notifications."+t,markupResource:this.libraryId+"/modules/Notifications/"+t+".html",isVisible:!0,libraryId:this.libraryId,regionName:o})},o.prototype._storeNotificationView=function(t){this._notificationViewIds.push(t),this.viewInstanceCounter++,this.totalViewInstancesAdded++},o.prototype._removeNotificationView=function(t){for(var i=0;i<this._notificationViewIds.length;i++){if(this._notificationViewIds[i]===t)return this._notificationViewIds.splice(i,1),this.viewInstanceCounter--,this.app.viewManager.getViewById(t)}},o.prototype._isTopNotificationView=function(t){return this._notificationViewIds[this.viewInstanceCounter-1]===t},o.prototype._getTopNotificationView=function(){var t=this._notificationViewIds[this.viewInstanceCounter-1];return this.app.viewManager.getViewById(t)},o.prototype.initialize=function(t){i.prototype.initialize.call(this,t)},o}(e.ModuleBase);o.NotificationsModule=a})},"Mapping/modules/Notifications/NotificationView":function(){var t=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])};return function(i,o){function e(){this.constructor=i}t(i,o),i.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}();define(["require","exports","geocortex/framework/ui/ViewBase"],function(i,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(i){function o(t,o){return i.call(this,t,o)||this}return t(o,i),o.prototype.handleClickNotificationButton=function(t,i,o){o.callback()},o.prototype.handleClose=function(t,i,o){this.app.command("RemoveNotification").execute(this.viewModel.notificationId),o.callback&&o.callback()},o}(e.ViewBase);o.NotificationView=n})},"Mapping/modules/Notifications/NotificationViewModel":function(){var t=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])};return function(i,o){function e(){this.constructor=i}t(i,o),i.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}();define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables"],function(i,o,e,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=function(i){function o(){var t=null!==i&&i.apply(this,arguments)||this;return t.isTopNotification=new n.Observable,t.iconUri=new n.Observable,t.iconAltText=new n.Observable,t.notificationText=new n.Observable,t.truncatedNotificationText=new n.Observable,t.notificationButtons=new n.ObservableCollection,t.closeButton=new n.Observable,t.MAX_CHARS_NO_BUTTON=160,t.MAX_CHARS_BUTTON=125,t}return t(o,i),o.prototype.setNotificationText=function(t){this.notificationText.set(t);var i=this._getTruncatedNotificationText(t,this.notificationButtons.length()>0);this.truncatedNotificationText.set(i)},o.prototype._getTruncatedNotificationText=function(t,i){var o=i?this.MAX_CHARS_BUTTON-3:this.MAX_CHARS_NO_BUTTON-3;return t.length>o?String.format("{0}...",t.substr(0,o)):t},o}(e.ViewModelBase);o.NotificationViewModel=a})},"url:/Mapping/modules/Notifications/NotificationView.html":t}}),require(["geocortex/framework/resourceManager"],function(i){i.resourceManager.register("Mapping","inv","Mapping/modules/Notifications/CSS/common.css","css","LmdjeC1ub3RpZnkgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkY2QzA7DQogICAgcGFkZGluZzogMC41ZW0gMCAwIDAuNzVlbTsNCiAgICBtaW4taGVpZ2h0OiAzLjI1ZW07DQogICAgbWF4LWhlaWdodDogNmVtOw0KICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgd2lkdGg6IDEwMCU7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KLnNoZWxsLWxhcmdlIC5nY3gtbm90aWZ5IHsNCiAgICBwYWRkaW5nLWxlZnQ6IDMuNWVtOw0KfQ0KLnRvdWNoIC5zaGVsbC1sYXJnZSAuZ2N4LW5vdGlmeSB7DQogICAgcGFkZGluZy1sZWZ0OiA0LjVlbTsNCn0NCi5zaGVsbC1zbWFsbCAuZ2N4LW5vdGlmeS1jb250ZW50IHsNCiAgICBmb250LXNpemU6IDAuOWVtOw0KICAgIGxpbmUtaGVpZ2h0OiAxLjM3NWVtOw0KfQ0KLm5vdGlmeS1pdGVtIHsNCiAgICBkaXNwbGF5OiB0YWJsZS1jZWxsOw0KICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7DQogICAgcGFkZGluZzogMCAwLjc1ZW0gMC41ZW0gMDsNCn0NCi5nY3gtbm90aWZ5LWNvbnRlbnQubm90aWZ5LWl0ZW0gew0KICAgIHRleHQtYWxpZ246IGxlZnQ7DQp9DQouZ2N4LWljb24uZmxleC1pdGVtLA0KLmdjeC1wYW5lbC1jbG9zZS5mbGV4LWl0ZW0gIHsNCiAgICBmbGV4LWdyb3c6IDA7DQogICAgZmxleC1zaHJpbms6IDA7DQogICAgZmxleC1iYXNpczogMS44NzVlbTsNCn0NCi5pY29uLWJ1dHRvbiB7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgd2lkdGg6IDEwMCU7DQogICAgaGVpZ2h0OiAxMDAlOw0KICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7DQogICAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyIGNlbnRlcjsNCn0NCi5nY3gtcGFuZWwtY2xvc2Ugew0KICAgIHdpZHRoOiAzZW07DQogICAgaGVpZ2h0OiAzZW07DQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCglwYWRkaW5nLXJpZ2h0OiAwDQp9DQoudG91Y2ggLmdjeC1wYW5lbC1jbG9zZSB7DQoJd2lkdGg6IDMuNWVtOw0KCWhlaWdodDogMy41ZW07DQp9DQouZ2N4LWJ1dHRvbnMtbGlzdCwNCi5nY3gtYnV0dG9uLWl0ZW0gew0KICAgIG1hcmdpbjogMDsNCiAgICBwYWRkaW5nOiAwOw0KICAgIGxpc3Qtc3R5bGU6IG5vbmU7DQp9DQouZ2N4LWJ1dHRvbnMtbGlzdCB7DQogICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQouZ2N4LWJ1dHRvbi1pdGVtIHsNCiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgcGFkZGluZzogMCAwLjVlbSAwLjVlbSAwOw0KICAgIG1hcmdpbi1ib3R0b206IC00cHg7IC8qIE9mZnNldHRpbmcgaW5saW5lIGVsZW1lbnQgaW5oZXJpdCBzcGFjaW5nICovDQp9DQouZ2N4LW5vdGlmeS1jb250YWluZXIgew0KICAgIGRpc3BsYXk6IHRhYmxlOw0KICAgIG1heC13aWR0aDogNTBlbTsNCgltYXJnaW46IDAgYXV0bzsNCn0="),i.resourceManager.register("Mapping","inv","Mapping/modules/Notifications/NotificationView.html","html",t)}),require({cache:{}}),define(["Mapping/modules/Notifications/NotificationView"],function(t){!function(t,i,o){if("string"==typeof t&&(o=i,i=t),void 0!==o)for(var e=i.split("."),n=null,a=window,s=0,c=e.length;s<c;s++)n=e[s],s==c-1?a[n]=o:a[n]||(a[n]={}),a=a[n];else console.warn("Undefined shim for: "+i)}(t,"geocortex.essentialsHtmlViewer.mapping.modules.notifications.NotificationView",t.NotificationView)})}();