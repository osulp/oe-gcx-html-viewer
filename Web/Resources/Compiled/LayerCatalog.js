!function(){function e(e,t,a){if("string"==typeof e&&(a=t,t=e),void 0!==a)for(var i=t.split("."),r=null,s=window,o=0,n=i.length;o<n;o++)r=i[o],o==n-1?s[r]=a:s[r]||(s[r]={}),s=s[r];else console.warn("Undefined shim for: "+t)}var t="<div class='layer-catalog'>    <div class='lc-filter'>        <div class='lc-search' data-binding='{@noclass-lcSearchDisable: showingAll}'>            <input class='search-field' type='text' id='lc-filter-input' data-binding='{@value: filterText}{@event-keydown: handleKeyDown}{placeholder: @language-layer-catalog-search-placeholder}{@enabled: showingAll}{aria-label: @language-layer-catalog-view-label}' />            <button class='clear-button' data-binding='{@event-onclick: handleClear}{title: @language-layer-catalog-clear-filter}'></button>            <button class='search-button' data-binding='{@event-onclick: handleSearch}{@enabled: showingAll}{title: @language-layer-catalog-search-button}'></button>        </div>        <button class='lc-show-selected button-text-link' data-binding='{@event-onclick: handleShowSelectedClick}{@text: showSelectedButtonText}'></button>    </div>    <div class='lc-content'>        <div class='lc-status lc-loader' data-binding='{@visible: isBusy}'>            <img src='Resources/Images/loader-small.gif' alt='Loading' width='24' height='24' />        </div>        <div class='lc-entries' data-binding='{@hidden: isBusy}'>            <div class='lc-layers-text' data-binding='{@visible: showLayerMessageText}'>                <span data-binding='{@text: @language-layer-catalog-not-finished}{@visible: showNotFinishedText}'></span>                <span data-binding='{@text: @language-layer-catalog-more-layers}{@visible: showMoreLayersText}'></span>                <a href='' data-binding='{@text: @language-layer-catalog-refresh}{@visible: showMoreLayersText}{@event-onclick: handleRefreshClick}'></a>            </div>            <span data-binding='{@text: @language-layer-catalog-no-layers-selected}{@visible: showNoLayersSelectedText}'></span>            <ul class='layer-catalog-items' role='tree' data-binding='{@source: filteredCatalog}{@template-selector: type}'>                <li class='lc-tree' role='treeitem' data-binding='{@template-select: folder}{@template: Mapping/modules/LayerCatalog/Templates/FolderItemTemplate.html}'></li>                <li class='lc-tree' role='treeitem' data-binding='{@template-select: layer}{@template: Mapping/modules/LayerCatalog/Templates/LayerItemTemplate.html}'></li>            </ul>        </div>        <div class='lc-actions'>            <button class='button' data-binding='{@event-onclick: handleClickOk}{@text: @language-layer-catalog-ok-button}'></button>            <button class='button' data-binding='{@event-onclick: handleClickCancel}{@text: @language-layer-catalog-cancel-button}'></button>        </div>    </div></div>",a="<div class='layer-catalog'>    \x3c!-- Header --\x3e    <div class='lc-header'>        <div class='middle panel-header'>            <button class='lc-left button-text-link' data-binding='{@event-onclick: handleBackClick}{@class-disabled: backDisabled}'>                \x3c!-- for screen readers --\x3e                <span data-binding='{aria-label: backString}{@hidden: backDisabled}'></span>                <span data-binding='{@text: backText}'></span>            </button>            <button class='lc-right button-text-link' data-binding='{@event-onclick: handleClickOk}{@text: @language-layer-catalog-done-button}'></button>            <h2 class='panel-title' data-binding='{@text: breadcrumb}'></h2>        </div>        <div class='lc-filter'>            <div class='lc-search' data-binding='{@noclass-lcSearchDisable: showingAll}'>                <input class='search-field' type='text' id='lc-filter-input' data-binding='{@value: filterText}{@event-keydown: handleKeyDown}{placeholder: @language-layer-catalog-search-placeholder}{@enabled: showingAll}' />                <button class='clear-button' data-binding='{@event-onclick: handleClear}{title: @language-layer-catalog-clear-filter}'></button>                <button class='search-button' data-binding='{@event-onclick: handleSearch}{@enabled: showingAll}{title: @language-layer-catalog-search-button}'></button>            </div>            <button class='lc-show-selected button-text-link' data-binding='{@event-onclick: handleShowSelectedClick}{@text: showSelectedButtonText}'></button>        </div>    </div>    <div class='lc-status lc-loader' data-binding='{@visible: isBusy}'>        <img src='Resources/Images/loader-small.gif' alt='Loading' border='0' width='24' height='24' />    </div>    <div class='lc-status no-selection-message' data-binding='{@text: @language-layer-catalog-no-layers-selected}{@noclass-showNone: showNoLayersSelectedText}'></div>    \x3c!-- Content Body --\x3e    <div class='lc-layers-text' data-binding='{@visible: showLayerMessageText}'>        <span data-binding='{@text: @language-layer-catalog-not-finished}{@visible: showNotFinishedText}'></span>        <span data-binding='{@text: @language-layer-catalog-more-layers}{@visible: showMoreLayersText}'></span>        <a href='' data-binding='{@text: @language-layer-catalog-refresh}{@visible: showMoreLayersText}{@event-onclick: handleRefreshClick}'></a>    </div>    <div class='lc-entries'>        <div class='lc-items layer-item catalog-folder-select' data-binding='{@visible: showGroupCheckbox}{checked: allChecked}'>            <label class='layer-item-label'>                <input class='selected-state' type='checkbox' data-binding='{@event-onclick: handleSelectAllChecked}{checked: allChecked}' />                <span class='lc-item-label' data-binding='{@text: @language-layer-catalog-select-all}'></span>            </label>        </div>        <ul class='lc-items' data-binding='{@source: resultPage}{@template-for: resultPage}{@template-selector: type}'>            <li class='layer-item' data-binding='{@class-layerSelected: isChecked}{@template-select: layer}{@visible: visible}'>                <label class='layer-item-label'>                    <input type='checkbox' class='selected-state selected-state-layer' data-binding='{@class-layerCheckedImage: isChecked}{@value: isChecked}'>                    <span class='lc-item-label' data-binding='{@text: displayName}'></span>                </label>                <button class='lc-details' data-binding='{@event-onclick: handleShowDetails}{@visible: infoLinkVisible}'><img data-binding='{alt: infoLinkText}{src: infoLinkIconUri}{title: infoLinkTooltip}' border='0' /></button>            </li>            <li class='folder-item chevron-right-24' data-binding='{@template-select: folder}{@event-onclick: handleFolderClick}{@visible: visible}'>                <button class='catalog-item-button' data-binding='{title: @language-layer-catalog-folder-drill-down}'>                    <span class='selected-state selected-state-folder' data-binding='{@class-folderSomeSelectedImage: someChecked}{@class-folderAllSelectedImage: allChecked}'></span>                    <span class='lc-item-label' data-binding='{@text: displayName}{@event-onclick: handleFolderClick}'></span>                    \x3c!-- Chrome Vox: Announces when folder is opened --\x3e                    <span data-binding='{@visible: expanded}{aria-label: @language-layer-catalog-folder-opened}'></span>                    <span data-binding='{@visible: someChecked}{@text: @language-layer-catalog-selected-some}' class='selected-indicator'></span>                    <span data-binding='{@visible: allChecked}{@text: @language-layer-catalog-selected-all}' class='selected-indicator'></span>                </button>            </li>        </ul>        <div class='bottom'>            <button class='cancel-button button' data-binding='{@event-onclick: handleClickCancel}{@text: @language-layer-catalog-cancel-button}'></button>        </div>    </div></div>",i="\x3c!-- Recursive template for folder items. Used in the desktop view --\x3e<div class='folder-item' data-binding='{@visible: visible}{id: folderId}'>    <div class='folder-item-name' data-binding='{@event-onclick: handleExpand}'>        <button class='catalog-item-button' data-binding='{@event-onclick: handleExpand}'>            <span class='catalog-item-control'>                \x3c!-- Chrome Vox: Announces when folder is open or closed --\x3e                <span class='expander-button' data-binding='{@class-folder-open: expanded}{aria-label: @language-layer-catalog-folder-toggle-open}{@visible: expanded}'></span>                <span class='expander-button' data-binding='{@class-folder-open: expanded}{aria-label: @language-layer-catalog-folder-toggle-closed}{@hidden: expanded}'></span>            </span>            <span data-binding='{@text: displayName}'></span>            <span data-binding='{@visible: someChecked}{@text: @language-layer-catalog-selected-some}' class='selected-indicator'></span>            <span data-binding='{@visible: allChecked}{@text: @language-layer-catalog-selected-all}' class='selected-indicator'></span>        </button>        <div class='catalog-folder-select' data-binding='{@visible: expanded}'>            <label class='catalog-item-label' data-binding='{@event-onclick: handleSelectAllChecked}{checked: allChecked}{@visible: showGroupCheckbox}'>                <span class='catalog-item-control'>                    <input type='checkbox' data-binding='{@event-onclick: handleSelectAllChecked}{checked: allChecked}' />                </span>                <span class='layer-item'>                    <span class='layer-item-name' data-binding='{@text: @language-layer-catalog-select-all}'></span>                </span>            </label>        </div>    </div>    <ul class='layer-catalog-items' data-binding='{@source: bindingEntries}{@template-selector: type}{@visible: expanded}{aria-labelledby: folderId}'>        <li class='lc-tree' data-binding='{@template-select: layer}{@template: Mapping/modules/LayerCatalog/Templates/LayerItemTemplate.html}'></li>        <li class='lc-tree' data-binding='{@template-select: folder}{@template: Mapping/modules/LayerCatalog/Templates/FolderItemTemplate.html}'></li>    </ul></div>",r="\x3c!-- Template for layer items. Used in Desktop view --\x3e<div class='catalog-layer-item' data-binding='{@visible: visible}'>    <label class='catalog-item-label'>        <span class='catalog-item-control'>            <input type='checkbox' data-binding='{checked: isChecked}{@event-onchange: handleLayerChecked}' />        </span>        <span class='layer-item' data-binding='{@event-onclick: handleLayerChecked}'>            <span class='layer-item-name' data-binding='{@text: displayName}'></span>        </span>    </label>    <button class='lc-details' data-binding='{@event-onclick: handleShowDetails}{@visible: infoLinkVisible}'><img data-binding='{alt: infoLinkText}{src: infoLinkIconUri}{title: infoLinkTooltip}' /></button></div>";require({cache:{"Mapping/modules/LayerCatalog/AssemblyProvider":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","./BaseProvider","geocortex/essentials/catalog/LayerCatalogParams","geocortex/essentials/catalog/LayerCatalogDetail","geocortex/essentials/MapService","geocortex/essentials/Layer","geocortex/essentials/MapServiceConstants","./WmsPropertyNames"],function(t,a,i,r,s,o,n,l,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var d=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.smartOrderUserAddedLayers=!0,e.flattenedList=[],e}return e(a,t),a.prototype.initialize=function(e){var a=this;t.prototype.initialize.call(this,e),this._registerCommands(),this.app.event("SiteInitializedEvent").subscribe(this,function(e){a.app.command("ShowLayerCatalog").raiseCanExecuteChanged()})},a.prototype._registerCommands=function(){this.app.command("RestoreDynamicLayer").register(this,this.restoreDynamicLayers),this.app.event("ProjectLoadingEvent").subscribe(this,this.executeClearLayerCatalogLayers)},a.prototype.smartOrderUserAddedLayersWhileLoadingProject=function(e,t){var a=e,i=new Array;i.push(t);var r=a.layers,s=this._getOrderedLayerIdArray(r,i);a.add(t),this._setDynamicLayerInfosWithSmartOrderedLayers(a,s)},a.prototype.restoreDynamicLayers=function(e){var t=e.gcxLayerDefinition,a=e.mapService,i=new n.Layer(t.url);i.createFromDefinition(t),i.isUserCreated=!0,i.catalogId=i.id,this.smartOrderUserAddedLayers?this.smartOrderUserAddedLayersWhileLoadingProject(a,i):a.add(i),this.app.event("MapServiceLayersChangedWithResultEvent").publish({mapService:a,newItems:[].concat([i]),oldItems:[].concat([])}),this.app.event("MapServiceLayersChangedEvent").publish(a),e.callback(i)},a.prototype.executeGetLayerCatalog=function(e){this.app.site.getLayerCatalog(new r.LayerCatalogParams,function(){},function(t){e.resolve(t)},function(t){e.reject(t)})},a.prototype.canExecuteGetLayerCatalog=function(){return this.canShowLayerCatalog()},a.prototype.executeGetLayerCatalogDetails=function(e,t){this.app.site.getLayerCatalogDetails(t,function(){},function(t){e.resolve(t)},function(t){e.reject(t)})},a.prototype.canExecuteGetLayerCatalogDetails=function(){return this.canExecuteGetLayerCatalog()},a.prototype.getFlatListAfterFiringGetLayerCatalog=function(e){var t=this;if(this.flattenedList&&this.flattenedList.length>0)e.resolve(this.flattenedList);else{var a=$.Deferred();this.executeGetLayerCatalog(a),a.done(function(a){t.flattenedList=t.getFlatEntries(a.catalogs[0].entries),e.resolve(t.flattenedList)})}},a.prototype.restoreMapService=function(e){var t=this,a=e.serviceLayer;if("WMS"==a.layerType){var i=new Array,r=a.layers;if(r.length>0)for(var s=0;s<r.length;s++)i.push(r[s].gcxLayerDefinition.catalogId);var o=$.Deferred(),n=$.Deferred(),l=new Array;this.getFlatListAfterFiringGetLayerCatalog(o),o.done(function(a){for(var r=a,s=0;s<i.length;s++){var o=t.getIdForWMSFromDisplayName(r,i[s]);l.push(o)}var c={ids:l};t.app.commandRegistry.command("GetLayerCatalogDetails").execute(n,c),n.done(function(a){t._createNewWmsServices(a.catalogs[0].entries,e.callback)})})}else e.callback(null)},a.prototype.getIdForWMSFromDisplayName=function(e,t){for(var a=0;a<e.length;a++)if(e[a].displayName===t)return e[a].id},a.prototype.getFlatEntries=function(e){var t=new Array;if(e.length>0)for(var a=0;a<e.length;a++)if("folder"===e[a].type){var i=this.getFlatEntries(e[a].entries);if(i.length>0)for(var r=0;r<i.length;r++)t.push(i[r])}else t.push(e[a]);return t},a.prototype.executeApplyLayerCatalogDetails=function(e){if(e&&e.catalogs)for(var t=0;t<e.catalogs.length;t++)if(e.catalogs[t]){var a=e.catalogs[t];this._removeExistingCataLogWmsServices(),this._createNewWmsServices(a.entries),a&&this._createNewDynamicLayers(a)}},a.prototype._createNewDynamicLayers=function(e){var t=e.mapServiceId,a=[],i=new s.LayerCatalogDetail;i.mapServiceId=t;for(var r=0;r<e.entries.length;r++)e.entries[r].isDynamic&&a.push(e.entries[r]);i.entries=a;var o=this.app.site.essentialsMap.findMapServiceById(t);o&&this._addCatalogLayerToMapService(i,o)},a.prototype._addCatalogLayerToMapService=function(e,t){var a=!1,i=[];if(t.id==e.mapServiceId){for(var r=0;r<e.entries.length;r++){var s=e.entries[r],o=t.findLayerById(s.id);o||(o=new n.Layer(t.url+"/layers/"+e.entries[r].id),e.entries[r].visible=!0,o.createFromDefinition(e.entries[r]),o.isUserCreated=!0,o.userLayerType=l.UserLayerType.LAYER_CATALOG,o.includeInLayerList=!0,o.setInActiveTheme(!0),o.catalogId=o.id),i.push(o)}var c=t.layers.filter(function(e){return e.isUserCreated&&i.indexOf(e)<0}),d=i.filter(function(e){return t.layers.indexOf(e)<0});c.forEach(function(e){t.remove(e),a=!0});var g=this._getOrderedLayerIdArray(t.layers,d);return d.forEach(function(e){t.add(e),a=!0}),this.smartOrderUserAddedLayers&&this._setDynamicLayerInfosWithSmartOrderedLayers(t,g),a?(this.app.event("MapServiceLayersChangedWithResultEvent").publish({mapService:t,newItems:[].concat(d),oldItems:[].concat(c)}),this.app.event("MapServiceLayersChangedEvent").publish(t),d):[]}},a.prototype._getOrderedLayerIdArray=function(e,t){var a=this._getLayerIDArrayByGeoTypems(e,["point","multipoint"]),i=this._getLayerIDArrayByGeoTypems(e,["line"]),r=this._getLayerIDArrayByGeoTypems(e,["polygon"]),s=this._getLayerIDArrayByGeoTypems(t,["point","multipoint"]),o=this._getLayerIDArrayByGeoTypems(t,["line"]),n=this._getLayerIDArrayByGeoTypems(t,["polygon"]);return s.concat(a).concat(o).concat(i).concat(n).concat(r)},a.prototype._getLayerIDArrayByGeoTypems=function(e,t){var a=[];return e.forEach(function(e){t.indexOf(e.featureType.toLowerCase())>=0&&a.push(e.id)}),a},a.prototype._setDynamicLayerInfosWithSmartOrderedLayers=function(e,t){var a=e.serviceLayer,i=[],r=[];if(a.dynamicLayerInfos){i=a.dynamicLayerInfos;r=[];t.forEach(function(e){for(var t=null,a=0;a<i.length;a++)if(i[a].id.toString()===e){t=i[a];break}t&&r.push(t)});var s=a.visibleLayers;a.setDynamicLayerInfos(r,!0),s.length>0?a.setVisibleLayers(s,!0):a.setVisibleLayers(["-1"],!0),a.refresh()}},a.prototype.canExecuteApplyLayerCatalogDetails=function(){return this.canExecuteGetLayerCatalog()},a.prototype.canShowLayerCatalog=function(){return!!(this.app.site&&this.app.site.essentialsMap&&this.app.site.essentialsMap.mapServices&&dojo.some(this.app.site.essentialsMap.mapServices,function(e){return e.hasLayerCatalog}))},a.prototype.executeClearLayerCatalogLayers=function(){this._removeExistingCataLogWmsServices(),this._removeAllCatalogLayersFromMap()},a.prototype.executeGetLayerCatalogMapServiceIds=function(e){for(var t=new Array,a=this.app.site.essentialsMap.mapServices,i=0;i<a.length;i++){var r=a[i];r.hasLayerCatalog&&t.push(r.id)}e.resolve(t)},a.prototype._removeExistingCataLogWmsServices=function(){if(this.app&&this.app.site&&this.app.site.essentialsMap&&this.app.site.essentialsMap.mapServices)for(var e=this.app.site.essentialsMap.mapServices,t=0;t<e.length;t++)if(e[t].isUserCreated&&e[t].hasLayerCatalog&&e[t].mapServiceType===l.MapServiceType.WMS){var a=e[t];this.app.site.essentialsMap.getMap().removeLayer(a.serviceLayer),e.splice(t,1),t--,this.app.eventRegistry.event("MapServiceRemovedEvent").publish(a)}},a.prototype._removeAllCatalogLayersFromMap=function(){if(this.app&&this.app.site&&this.app.site.essentialsMap&&this.app.site.essentialsMap.mapServices)for(var e=this.app.site.essentialsMap.mapServices,t=0;t<e.length;t++){var a=e[t];if(a.hasLayerCatalog){var i=new s.LayerCatalogDetail;i.mapServiceId=a.id,this.app.site.essentialsMap.applyCatalogLayersChange(i)}}},a.prototype._createNewWmsServices=function(e,t){for(var a=new Object,i=0;i<e.length;i++)if(!e[i].isDynamic)for(var r=0;r<e[i].properties.length;r++)if(e[i].properties[r].name===c.WMS_SERVICE_URL){var s=e[i].properties[r].value;a[s]||(a[s]=[]),a[s].push(e[i])}for(var o in a)a.hasOwnProperty(o)&&this._createWmsClosure(o,a,t)},a.prototype._createWmsClosure=function(e,t,a){var i=this,r=new esri.layers.WMSLayer(e),s=dojo.connect(r,"onLoad",function(s){var c=new o.MapService(s.url);c.mapServiceType=l.MapServiceType.WMS,c.serviceLayer=s,c.id=i._getUniqueMapServiceId(),c.catalogId=c.id,c.isUserCreated=!0,c.userLayerType=l.UserLayerType.LAYER_CATALOG,c.hasLayerCatalog=!0,c.drawingBehavior="MapService",c.displayName=s.title,c.configuredVisible=!0,c.serverVersion=s.version,c.includeInLayerList=!0,c.mapServiceFunction=l.MapServiceFunction.OPERATIONAL,c.essentialsMap=i.app.site.essentialsMap,c.serviceUrl=s.url,c._extendWms(),c._handleServiceLayerLoaded(c.serviceLayer),r.visible=!0,r.setImageFormat("image/png"),r.setOpacity(s.opacity);for(var g=[],p=0;p<t[e].length;p++){var y=new n.Layer(e);if(y.mapService=c,y.createFromDefinition(t[e][p]),y.name=i._getWmsLayerName(t[e][p]),y.wmsLayerName=y.name,i._fillEssLayerFromWmsLayerInfo(y,s.layerInfos),y.id=p.toString(),y.includeInLegend=!1,y.isUserCreated=!0,y.userLayerType=l.UserLayerType.LAYER_CATALOG,y.includeInLayerList=!0,y.configuredVisible=!0,y._visible=!0,y.catalogId=y.displayName,t[e][p]&&t[e][p].properties){var u=t[e][p].properties.filter(function(e){return"catalogDisplayName"==e.name})[0];u&&(y.catalogId=u.value)}g.push(y.wmsLayerName),c.layers.push(y)}r.setVisibleLayers(g),c.essentialsMap.getMap().addLayer(r),i.app.site.essentialsMap.mapServices.push(c),r.show(),i.app.eventRegistry.event("MapServiceAddedEvent").publish(c),a&&a(c),d()}),c=dojo.connect(r,"onError",function(e){throw a&&a(null),d(),new Error("Failed to get capabilities for WMS Service.")}),d=function(){dojo.disconnect(s),dojo.disconnect(c)}},a.prototype._fillEssLayerFromWmsLayerInfo=function(e,t){for(var a=this._flattenWmsLayerInfos(t),i=null,r=0;r<a.length;r++)if(a[r].name.toLowerCase()===e.wmsLayerName.toLowerCase()){i=a[r];break}i&&i.hasOwnProperty("extent")&&(e.fullExtent=i.extent)},a.prototype._flattenWmsLayerInfos=function(e){for(var t=[],a=0;a<e.length;a++){t.push(e[a]);var i=this._flattenWmsLayerInfos(e[a].subLayers);if(i.length>0)for(var r=0;r<i.length;r++)t.push(i[r])}return t},a.prototype._getUniqueMapServiceId=function(){var e=this.app.site.essentialsMap.mapServices;if(e){var t=[];if(dojo.forEach(e,function(e){t.push(e.id)}),t.length>0){var a=Math.max.apply(null,t);return(++a).toString()}}return"0"},a.prototype._getWmsLayerName=function(e){if(e)for(var t=0;t<e.properties.length;t++)if(e.properties[t].name===c.WMS_LAYER_NAME)return e.properties[t].value;return null},a.prototype.executeRemoveLayerCatalogItem=function(e){var t=new Array,a=e.mapService;if(a.serviceLayer instanceof esri.layers.ArcGISDynamicMapServiceLayer)a.remove(e),this._hackRefreshModules(a.serviceLayer.id);else if(a.serviceLayer instanceof esri.layers.WMSLayer){if(e.setVisibility(!1),a.layers.splice(a.layers.indexOf(e),1),0==a.layers.length){this.app.site.essentialsMap.mapServices.indexOf(a);return this.app.site.essentialsMap.removeMapService(a),void this.app.event("MapServiceRemoved").publish(a)}this._hackRefreshModules(a.serviceLayer.id)}t.push(e),this.app.event("MapServiceLayersChangedWithResultEvent").publish({mapService:a,newItems:[].concat([]),oldItems:[].concat(t)}),this.app.event("MapServiceLayersChangedEvent").publish(a)},a}(i.BaseProvider);a.AssemblyProvider=d})},"Mapping/modules/LayerCatalog/BaseLayerCatalogView":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","geocortex/framework/ui/ViewBase","geocortex/essentials/catalog/CatalogEntry"],function(t,a,i,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.minFilterLength=3,e.autocompleteEnabled=!1,e}return e(a,t),a.prototype.attach=function(e){if(t.prototype.attach.call(this,e),this.configuration){if(this.configuration.hasOwnProperty("minFilterLength")){var a=parseInt(this.configuration.minFilterLength);a&&(this.minFilterLength=a)}this.configuration.hasOwnProperty("autocompleteEnabled")&&this.configuration.autocompleteEnabled&&(this.autocompleteEnabled=!0)}this.enableAutoComplete(this.autocompleteEnabled)},a.prototype.activated=function(){this.viewModel.ready()},a.prototype.enableAutoComplete=function(e){if(e){var t=this;$("#lc-filter-input").autocomplete({source:this.viewModel.autocompleteValues,minLength:this.minFilterLength,select:function(e,a){a&&a.item&&a.item.value&&(t.viewModel.filterText.set(a.item.value),t.handleSearch(null,null,null))}})}},a.prototype.handleSearch=function(e,t,a){},a.prototype.handleClickOk=function(e,t,a){this.viewModel.applyChanges(),this.app.commandRegistry.command("DeactivateView").execute("LayerCatalogView"),this.app.commandRegistry.command("ShowMap").execute()},a.prototype.handleClickCancel=function(e,t,a){this.app.commandRegistry.command("DeactivateView").execute("LayerCatalogView")},a.prototype._isSpecialChar=function(e){switch(e){case 16:case 17:case 18:case 19:case 20:case 27:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 144:case 145:return!0}return!1},a.prototype.handleShowDetails=function(e,t,a){var i=this.viewModel.infoLinkCommandName,s=new r.CatalogEntry;s.id=a.id,s.displayName=a.displayName,s.type=a.type,this.app.commandRegistry.command(i).execute(s)},a}(i.ViewBase);a.BaseLayerCatalogView=s})},"Mapping/modules/LayerCatalog/BaseLayerCatalogViewModel":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","./CatalogEntryViewModel","geocortex/framework-ui/LazyObservable","geocortex/essentials/Layer","geocortex/essentials/catalog/LayerCatalogDetailsParams","geocortex/essentials/LayerHyperlink","./LayerCatalogModule","./WmsPropertyNames","./CatalogEntryType","geocortex/essentials/MapServiceConstants"],function(t,a,i,r,s,o,n,l,c,d,g,p,y){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var u=function(t){function a(e,a){var i=t.call(this,e,a)||this;return i.autocompleteValues=[],i.catalogCached=!1,i.clearButtonVisible=null,i.filteredCatalog=null,i.filterText=null,i.isBusy=null,i.showSelectedButtonText=null,i.showingAll=null,i.showInfoLink=!1,i.showNoLayersSelectedText=null,i.showMoreLayersText=null,i.showNotFinishedText=null,i.layerCatalogProviderFinished=!0,i.showLayerMessageText=null,i.filteredCatalog=new r.ObservableCollection,i.isBusy=new r.Observable(!1),i.filterText=new r.Observable(""),i.showSelectedButtonText=new r.Observable(e.getResource(a,"language-layer-catalog-show-selected-button")),i.autocompleteValues=[],i.showNoLayersSelectedText=new r.Observable(!1),i.showMoreLayersText=new r.Observable(!1),i.showNotFinishedText=new r.Observable(!1),i.showingAll=new r.Observable(!0),i.clearButtonVisible=new r.Observable(!1),i.showLayerMessageText=new r.Observable(!1),i}return e(a,t),a.prototype.initialize=function(e){var a=this;t.prototype.initialize.call(this,e),dojo.subscribe("CatalogLayersChangedEvent",this,function(e){e&&a.app.event("MapServiceLayersChangedEvent").publish(e)}),this.app.event("OnAddCatalogLayersCommandEvent").subscribe(this,this._handleOnAddCatalogLayersCommandFired),this.app.event("OnAppendCatalogLayersCommandEvent").subscribe(this,this._handleOnAppendCatalogLayersCommandFired),this.app.event("LayerCatalogProviderUpdatedEvent").subscribe(this,this._handleLayerCatalogProviderUpdated),this.app.event("LayerCatalogProviderStartedEvent").subscribe(this,this._handleLayerCatalogProviderStarted),this.app.event("LayerCatalogProviderFinishedEvent").subscribe(this,this._handleLayerCatalogProviderFinished),this.loadConfiguration(e)},a.prototype.ready=function(){this.showMoreLayersText.set(!1),this._updatedLayerCatalogResults=null,this._loadCatalogIfNeeded(),this._calcShowText()},a.prototype._handleLayerCatalogProviderUpdated=function(e){this.showNotFinishedText.set(!1),this.showMoreLayersText.set(!0),this._updatedLayerCatalogResults=e,this.catalogCached=!1},a.prototype.refreshLayerCatalog=function(){this._updatedLayerCatalogResults&&(this._onLoadBegin(),this._onLoadCompleted(this._updatedLayerCatalogResults),this.ready())},a.prototype._calcShowText=function(){this.layerCatalogProviderFinished?(this.showNotFinishedText.set(!1),this.showLayerMessageText.set(!1)):(this.showNotFinishedText.set(!0),this.showLayerMessageText.set(!0))},a.prototype._handleLayerCatalogProviderStarted=function(){this.layerCatalogProviderFinished=!1},a.prototype._handleLayerCatalogProviderFinished=function(){this.layerCatalogProviderFinished=!0},a.prototype.loadConfiguration=function(e){var t=this;if(e){if(e.hasOwnProperty("infoLink")){var a=e.infoLink;a&&(this.showInfoLink=!!a.enabled,a.hasOwnProperty("command")&&(this.infoLinkCommandName=a.command),a.hasOwnProperty("tooltip")&&(this.infoLinkTooltip=a.tooltip),a.hasOwnProperty("text")&&(this.infoLinkText=a.text),a.hasOwnProperty("iconUri")&&(this.infoLinkIconUri=a.iconUri))}if(e.hasOwnProperty("filterProvider")){var i=e.filterProvider;i&&(this._lazyFilterProvider=new o.LazyObservable(null,function(){var e=dojo.getObject(i.type);{if(e){var a=new e(t.app,i.libraryId||t.libraryId);return a.initialize(i.configuration||{}),a}t.app.trace.error(t.id+" can't find layer catalog filter provider typed "+i.type)}},!0))}}},a.prototype.getFilterProvider=function(){return this._lazyFilterProvider?this._lazyFilterProvider.get():null},a.prototype.catalogLayersInLayerList=function(){var e=this,t=$.Deferred(),a=[],i=$.Deferred();this.app.commandRegistry.command("GetLayerCatalogMapServiceIds").execute(i);return i.done(function(i){var r=new Array,s={};e.app.site.essentialsMap.mapServices.forEach(function(e){s[e.id]=e}),i.forEach(function(e){var t=s[e];null!=t&&r.push(t)});for(var o=0;o<r.length;o++)for(var n=r[o],l=0;l<n.layers.length;l++)n.layers[l].isUserCreated&&a.push(n.layers[l]);t.resolve(a)}).fail(function(){t.reject()}),t.promise()},a.prototype.syncAddedLayers=function(){var e=this;this._resetCatalogVisibility(),this.catalogLayersInLayerList().done(function(t){for(var a=[],i=e._getFlattenedEntries(),r=0;r<t.length;r++){var s=e._findEntry(t[r],i);s&&(a.push(s),s.isChecked.set(!0))}for(r=0;r<a.length;r++)for(var o=0;o<i.length&&a[r]!==i[o];o++);})},a.prototype.uncheckAllEntries=function(){this._resetCatalogVisibility()},a.prototype.applyChanges=function(){var e=this.getCheckedEntries(),t=e.length;if(e&&t>0){for(var a=new l.LayerCatalogDetailsParams,i=0;i<t;i++)a.ids.push(e[i].id);this._getLayerCatalogDetails(a)}else this.app.commandRegistry.command("ClearLayerCatalogLayers").execute()},a.prototype.loadLayerDetails=function(e,t,a){var i=new l.LayerCatalogDetailsParams;i.ids.push(e),this.app.site.getLayerCatalogDetails(i,function(){},function(e){if(e&&e.catalogs){var a=e.catalogs[0];if(a.entries){var i=a.entries[0];if(i){var r=new n.Layer("detailsLayer");if(r.createFromDefinition(i),i.hasOwnProperty("layerHyperlinks"))for(var s=0;s<i.layerHyperlinks.length;s++)r.layerHyperlinks[s]=new c.LayerHyperlink(i.layerHyperlinks[s],r);return void t(r)}}}t(null)},function(e){a(e)})},a.prototype._onLoadCompleted=function(e){if(this.filteredCatalog.clear(),e&&e.catalogs)for(var t=0;t<e.catalogs.length;t++)if(e.catalogs[t]){var a=e.catalogs[t];if(a.entries)for(var i=0;i<a.entries.length;i++){var r=s.CatalogEntryViewModel.fromJson(a.entries[i],this.app,this.libraryId);r&&(r.calculateShowGroupCheckbox(d.LayerCatalogModule.instance.checkboxVisibility,d.LayerCatalogModule.instance.checkboxSuffix),this.filteredCatalog.addItem(r))}}if(this._populateAutocompleteValues(),this.syncAddedLayers(),this.showInfoLink){var o=this._getFlattenedEntries(!0);for(t=0;t<o.length;t++)o[t].infoLinkVisible.set(!0),o[t].infoLinkTooltip.set(this.infoLinkTooltip),o[t].infoLinkText.set(this.infoLinkText),o[t].infoLinkIconUri.set(this.infoLinkIconUri)}this.isBusy.set(!1),this.catalogCached=!0},a.prototype._populateAutocompleteValues=function(){for(var e=this._getFlattenedEntries(!0),t=0;t<e.length;t++)this.autocompleteValues.push(e[t].displayName);this.autocompleteValues.sort()},a.prototype._getLayerCatalog=function(){var e=this;this._onLoadBegin();var t=$.Deferred();this.app.commandRegistry.command("GetLayerCatalog").execute(t),t.done(function(t){e._onLoadCompleted(t)}).fail(function(){e._onLoadError(null)})},a.prototype._getLayerCatalogDetails=function(e){var t=this,a=$.Deferred();this.app.commandRegistry.command("GetLayerCatalogDetails").execute(a,e),a.done(function(e){t.app.commandRegistry.command("ApplyLayerCatalogDetails").execute(e)})},a.prototype._onLoadBegin=function(){this.isBusy.set(!0)},a.prototype._loadCatalogIfNeeded=function(){this.catalogCached||this._getLayerCatalog()},a.prototype._handleOnAddCatalogLayersCommandFired=function(e){if(e){this._loadCatalogIfNeeded();var t=[];t=e.split(",");for(var a=new l.LayerCatalogDetailsParams,i=0;i<t.length;i++)a.ids.push(t[i]);this._getLayerCatalogDetails(a)}},a.prototype._handleOnAppendCatalogLayersCommandFired=function(e){var t=this;if(e){this._loadCatalogIfNeeded();var a=[];a=e.split(",");for(var i=new l.LayerCatalogDetailsParams,r=0;r<a.length;r++)i.ids.push(a[r]);this.catalogLayersInLayerList().done(function(e){for(var a=t._getFlattenedEntries(!0),r=0;r<e.length;r++){var s=t._findEntry(e[r],a);if(s){var o=s.id;i.ids.indexOf(o)<0&&i.ids.push(o)}}}),this._getLayerCatalogDetails(i)}},a.prototype._getUniqueMapServiceId=function(){var e=this.app.site.essentialsMap.mapServices;if(e){var t=[];if(dojo.forEach(e,function(e){t.push(e.id)}),t.length>0){var a=Math.max.apply(null,t);return(++a).toString()}}return"0"},a.prototype._getWmsLayerName=function(e){if(e)for(var t=0;t<e.properties.length;t++)if(e.properties[t].name===g.WMS_LAYER_NAME)return e.properties[t].value;return null},a.prototype._resetCatalogVisibility=function(){for(var e=this._getFlattenedEntries(),t=0;t<e.length;t++)e[t].isChecked.set(!1)},a.prototype._onLoadError=function(e){throw this.isBusy.set(!1),new Error(e.message)},a.prototype.getCheckedEntries=function(){for(var e=[],t=this._getFlattenedEntries(!0),a=0;a<t.length;a++)t[a].isChecked.get()&&e.push(t[a]);return e},a.prototype._getFlattenedEntries=function(e){return e?this._flattenCollection(this.filteredCatalog,!0):this._flattenCollection(this.filteredCatalog,!1)},a.prototype._flattenCollection=function(e,t){for(var a=[],i=0;i<e.get().length;i++)if(e.getAt(i).type===p.FOLDER){t||a.push(e.getAt(i));var r=this._flattenCollection(e.getAt(i).entries,t);if(r.length>0)for(var s=0;s<r.length;s++)a.push(r[s])}else a.push(e.getAt(i));return a},a.prototype._findEntry=function(e,t){var a=null,i=e.id,r=e.catalogId;null!=r&&(i=r);for(var s=0;s<t.length;s++)if(null!=e.wmsLayerName&&e.mapService.mapServiceType==y.MapServiceType.WMS){var o=e.properties.catalogDisplayName?e.properties.catalogDisplayName:e.displayName;if(t[s].displayName===o){a=t[s];break}}else if(t[s].id===i){a=t[s];break}return a},a}(i.ViewModelBase);a.LayerCatalogViewModelBase=u;!function(e){e[e.all=0]="all",e[e.configuredOnly=1]="configuredOnly",e[e.none=2]="none"}(a.CheckboxVisibility||(a.CheckboxVisibility={}))})},"Mapping/modules/LayerCatalog/BaseProvider":function(){define(["require","exports","geocortex/geocortex"],function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this.layerListResolved=$.Deferred(),this.app=e,this.libraryId=t}return e.prototype.initialize=function(e){var t=this;this.app.event("LayerListInitializedEvent").once(this,function(e){t.layerList=e,t.layerListResolved.resolve()})},e.geocortexRequest=function(e){var t=$.Deferred();return a.request({url:e,content:{f:"json"},load:t.resolve,error:t.reject,callbackParamName:"Callback"}),t.promise()},e.prototype._geocortexRequest=function(t){return e.geocortexRequest(t)},e.prototype.executeGetLayerCatalog=function(e){e.reject()},e.prototype.canExecuteGetLayerCatalog=function(e){return!1},e.prototype.restoreMapService=function(e){},e.prototype.executeGetLayerCatalogDetails=function(e,t){e.reject()},e.prototype.canExecuteGetLayerCatalogDetails=function(e,t){return!1},e.prototype.executeApplyLayerCatalogDetails=function(e){},e.prototype.canExecuteApplyLayerCatalogDetails=function(e){return!1},e.prototype.executeClearLayerCatalogLayers=function(){},e.prototype.executeGetLayerCatalogMapServiceIds=function(e){e.reject()},e.prototype.canShowLayerCatalog=function(){return!1},e.prototype.getState=function(){return null},e.prototype.reset=function(e){},e.prototype.executeRemoveLayerCatalogItem=function(e){},e.prototype._hackRefreshModules=function(e){var t=this.app.site.getMap(),a=t.getLayer(e);a&&t.removeLayer(a),a._img=null,t.addLayer(a)},e}();t.BaseProvider=i})},"Mapping/modules/LayerCatalog/CatalogEntryType":function(){define(["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FOLDER="folder",t.LAYER="layer"})},"Mapping/modules/LayerCatalog/CatalogEntryViewModel":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","./CatalogEntryType","geocortex/framework/utils/utils","./BaseLayerCatalogViewModel"],function(t,a,i,r,s,o,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=function(t){function a(e,a){var i=t.call(this,e,a)||this;return i.libraryId=null,i.id=null,i.expanded=null,i.isChecked=null,i.displayName=null,i.type=null,i.parent=null,i.visible=null,i.entries=null,i.bindingEntries=null,i.allChecked=null,i.someChecked=null,i.infoLinkVisible=null,i.infoLinkTooltip=null,i.infoLinkText=null,i.infoLinkIconUri=null,i.showGroupCheckbox=null,i.folderId=null,i.app=e,i.libraryId=a,i.entries=new r.ObservableCollection,i.isChecked=new r.Observable(!1),i.allChecked=new r.Observable(!1),i.someChecked=new r.Observable(!1),i.expanded=new r.Observable(!1),i.visible=new r.Observable(!0),i.isChecked.bind(i,i._handleIsCheckedChanged),i.infoLinkVisible=new r.Observable(!1),i.infoLinkTooltip=new r.Observable(""),i.infoLinkText=new r.Observable(""),i.infoLinkIconUri=new r.Observable(""),i.folderId=new r.Observable(""),i.showGroupCheckbox=new r.Observable(!1),i.bindingEntries=new r.ObservableCollection,i.expanded.bind(i,function(e){e?i.bindingEntries.set(i.entries.get()):i.bindingEntries.clear()}),i}return e(a,t),a.fromJson=function(e,t,i){if(e.hasOwnProperty("id")&&e.hasOwnProperty("type")&&e.hasOwnProperty("displayName")){var r=new a(t,i);if(r.displayName=e.displayName,r.type=e.type,r.id=e.id,r.type==s.FOLDER&&r.folderId.set("folderItem-{0}".format(o.alphaNumericToken())),e.hasOwnProperty("entries"))for(var n=0;n<e.entries.length;n++){var l=a.fromJson(e.entries[n],t,i);l&&(r.entries.addItem(l),l.parent=r)}return r}return null},a.prototype.calculateShowGroupCheckbox=function(e,t){var a=!1;if(t&&""!=t&&this.displayName.endsWith(t)&&(this.displayName=this.displayName.slice(0,this.displayName.length-t.length),a=!0),this.type==s.FOLDER){var i=e==n.CheckboxVisibility.all||e==n.CheckboxVisibility.configuredOnly&&a;this.showGroupCheckbox.set(i)}this.entries&&this.entries.getItems().forEach(function(a){a.calculateShowGroupCheckbox(e,t)})},a.prototype.toggleAllChildren=function(e){this.entries.getItems().forEach(function(t){t.isChecked.set(e),t.toggleAllChildren(e)})},a.prototype.areAllChildrenChecked=function(){return!(this.entries&&this.entries.length()>0)||this.entries.getItems().every(function(e){return!e.visible.get()||e.isChecked.get()&&e.areAllChildrenChecked()})},a.prototype._handleIsCheckedChanged=function(e){if(this.type===s.FOLDER){var t=dojo.some(this.entries.get(),function(e){return e.isChecked.get()&&e.visible.get()}),a=!1;t&&(a=this.areAllChildrenChecked()),a?(this.allChecked.set(!0),this.someChecked.set(!1)):t?(this.allChecked.set(!1),this.someChecked.set(!0)):(this.allChecked.set(!1),this.someChecked.set(!1)),this.isChecked.get()!=t&&this.isChecked.set(t)}this.parent&&(this.parent.isChecked.set(this.isChecked.get()),this.app.configuration.mobileMode&&this.app.command("ReevaluateAllChecked").execute(this.parent.areAllChildrenChecked()))},a.prototype.filter=function(e){e?this.displayName.toLowerCase().indexOf(e.toLowerCase())>-1&&this.type===s.LAYER?(this.visible.set(!0),this.expandUpTree()):this.visible.set(!1):(this.visible.set(!0),this.expanded.set(!1));for(var t=0;t<this.entries.get().length;t++)this.entries.getAt(t).filter(e);this._setFolderVisibilityBasedOnChildren()},a.prototype.expandUpTree=function(){this.parent&&(this.parent.expanded.get()||this.parent.expanded.set(!0),this.parent.expandUpTree())},a.prototype.expandAll=function(e){this.expanded.set(e);for(var t=0;t<this.entries.get().length;t++)this.entries.getAt(t).expandAll(e)},a.prototype._setFolderVisibilityBasedOnChildren=function(){var e=!1;if(this.type===s.FOLDER){for(var t=0;t<this.entries.get().length;t++)if(this.entries.getAt(t)._setFolderVisibilityBasedOnChildren()){e=!0;break}this.visible.set(e)}else this.visible.get()&&(e=!0);return e},a}(i.ViewModelBase);a.CatalogEntryViewModel=l})},"Mapping/modules/LayerCatalog/DeferredUtils":function(){define(["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){}return e.createDeferredList=function(e){var t=$.Deferred(),a=[];return $.when.apply($,e).then(function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var r=0;r<e.length;r++)a.push(e[r]);t.resolve(a)}).fail(function(e){t.reject(e)}),t.promise()},e}();t.Deferred=a})},"Mapping/modules/LayerCatalog/Dictionary":function(){define(["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){this._backingStore={}}return e.prototype.containsKey=function(e){return this._backingStore.hasOwnProperty(e)},e.prototype.get=function(e){return this._backingStore[e]},e.prototype.set=function(e,t){this._backingStore[e]=t},e.prototype.deleteEntry=function(e){delete this._backingStore[e]},e.prototype.values=function(){var e=new Array;for(var t in this._backingStore)e.push(this._backingStore[t]);return e},e.prototype.clear=function(){for(var e in this._backingStore)delete this._backingStore[e]},e.prototype.keys=function(){var e=new Array;for(var t in this._backingStore)e.push(t);return e},e.fromArray=function(t,a){for(var i=new e,r=0;r<t.length;r++){var s=t[r],o=a(s);i.set(o,s)}return i},e}();t.Dictionary=a})},"Mapping/modules/LayerCatalog/EssentialsSiteProvider":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","./BaseProvider","./Dictionary","geocortex/infrastructure/layerList/LayerListItem","geocortex/infrastructure/layerList/LayerListFolderItem","./LayerCatalogConstructor","./DeferredUtils","./MapUtilities","geocortex/essentials/MapServiceConstants","geocortex/infrastructure/commandArgs/AddStatusArgs","geocortex/infrastructure/layerList/LayerListLayerItem","geocortex/infrastructure/gis/ServiceLayerInfo","geocortex/infrastructure/layerList/LayerListMapServiceItem","./LayerCatalogModule","geocortex/infrastructure/GraphicsLayerUtils","geocortex/essentials/MapServiceConstants","geocortex/essentials/LayerThemeSetting"],function(t,a,i,r,s,o,n,l,c,d,g,p,y,u,h,C,v,L){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var m=function(a){function i(){var e=null!==a&&a.apply(this,arguments)||this;return e._siteUrls=new Array,e._restoredMapServicesPromises=new Array,e._mapServiceCreatedPromises=new Array,e._failedMapServices=new Array,e._failedLayerNames=new Array,e}return e(i,a),i.prototype.initialize=function(e){var t=this;a.prototype.initialize.call(this,e),this._layerCatalogFolderInLayerList=!1,this._addedMapServices=new r.Dictionary,this._addedLayerListItems=new r.Dictionary,this._layerListLookup=new r.Dictionary,this._fetchedMapServiceJsons=new r.Dictionary,this._atLeastOneLayerListDeferred=$.Deferred(),this._allLayerListsFinished=$.Deferred(),this._restoredMapServices=new Array;var i,s=new Array;this._resetInProgress=!1,this.app.event("SiteInitializedEvent").subscribe(this,function(e){if(e.layerCatalogs.length>0){for(var a=0;a<e.layerCatalogs.length;a++)t._siteUrls[a]=e.url.replace(e.id,e.layerCatalogs[a].siteId.toString());i=t._siteUrls.map(function(e){return{siteUrl:e,rootFolder:null}})}if(i){t.layerListResolved.done(function(){t._layerListRoot||(t._layerListRoot=new o.LayerListFolderItem("LayerCatalogRoot",t.app.getResource(t.libraryId,"language-layer-catalog-home-text"),t.layerList),t._layerListRoot.isUserCreated=!0,t._layerListRoot.configuredVisible=!0)});var r=0;i.forEach(function(e,a){var i=t._geocortexRequest(e.siteUrl+"/map/layerlist?verbose=true");i.done(function(i){var r=e.rootFolder?[{type:"folder",name:e.rootFolder,items:i.items}]:i.items;t._processLayerListLookup(r,null,a),t._atLeastOneLayerListDeferred.resolve(),t.app.event("LayerCatalogProviderUpdatedEvent").publish(new n.LayerCatalogConstructor(t._layerListLookup))}),i.always(function(){1==(r+=1)&&t.app.event("LayerCatalogProviderStartedEvent").publish(),r==t._siteUrls.length&&t.app.event("LayerCatalogProviderFinishedEvent").publish()}),s.push(i)}),l.Deferred.createDeferredList(s).done(function(){t._allLayerListsFinished.resolve()}).fail(function(){t._allLayerListsFinished.reject()})}t.app.command("ShowLayerCatalog").raiseCanExecuteChanged()})},i.prototype.restoreMapService=function(e){var a=this,i=$.Deferred();this._restoredMapServicesPromises.push(i),this._getMapServiceJson(e.lookupId).done(function(i){if(i){i.properties.push({name:"layerCatalogLookupId",value:e.lookupId});var r=e.lookupId.split(".")[0],s=a._getSeedSiteUrlFromSiteId(r),o=$.Deferred();a._mapServiceCreatedPromises.push(o);var n=null,l=[];e.layerLookupIds.forEach(function(t){var r=t.indexOf(".",t.indexOf(".")+1);if(-1!=r)var s=t.substring(r+1);if(s){if(!(n=i.layers.filter(function(e){return e.name==s})[0]))return void a._failedMapServices.push(e.lookupId);n.properties.push({name:"layerCatalogLookupId",value:t})}else n=i;n&&l.push(n)}),c.MapUtilities.createMapServiceFromJson(i,s).done(function(i){l.forEach(function(e){var r=i.serviceLayer;if(t(["esri/layers/VectorTileLayer"],function(t){r instanceof t&&c.MapUtilities.addLayerToVectorTiledService(e,i)}),r instanceof esri.layers.WebTiledLayer)c.MapUtilities.addLayerToWebTiledService(e,i);else if(r instanceof esri.layers.ArcGISDynamicMapServiceLayer)i.mapServiceType===d.MapServiceType.TILED&&c.MapUtilities.addLayerToTiledService(e,i),r.supportsDynamicLayers&&(i.supportsDynamicLayers=!0),c.MapUtilities.addLayersWithDynamicDefinitions([e],i),c.MapUtilities.addLayersToDynamicMapService([e],i);else if(r instanceof esri.layers.FeatureLayer&&!(r instanceof esri.layers.StreamLayer))c.MapUtilities.addLayerToFeatureService(e,i);else if(r instanceof esri.layers.WFSLayer);else if(r instanceof esri.layers.WMTSLayer);else if(r instanceof esri.layers.StreamLayer);else if(r instanceof esri.layers.ArcGISImageServiceLayer)c.MapUtilities.addLayerToImageService(e,i);else if(r instanceof esri.layers.ArcGISTiledMapServiceLayer)c.MapUtilities.addLayerToTiledService(e,i);else if(r instanceof esri.virtualearth.VETiledLayer)c.MapUtilities.addLayerToBingService(e,i);else if(r instanceof esri.layers.WMSLayer){var s=i.catalogId.split(".")[0],o=a._getSeedSiteUrlFromSiteId(s);c.MapUtilities.addLayersToWMSService([e],i,o)}}),i.id=e.mapServiceId,i.serviceLayer.id=i.id,a._addedMapServices.get(i.catalogId)?(a.app.site.getMap().removeLayer(i.serviceLayer),a.app.site.essentialsMap.removeMapService(a._addedMapServices.get(i.catalogId)),a.app.site.essentialsMap.mapServices.push(i),a._addedMapServices.set(i.catalogId,i)):(a.app.site.essentialsMap.mapServices.push(i),a._mapServiceEvent(i,"MapServiceAddedEvent")),a._restoredMapServices.push(i),e.callback(i)}).fail(function(){a._failedMapServices.push(e.lookupId),e.callback(null)}).always(function(){o.resolve()})}}).fail(function(){a._failedMapServices.push(e.lookupId),e.callback(null)}).always(function(){i.resolve()})},i.prototype.reset=function(e){var t=this;this._resetInProgress=!0,this._allLayerListsFinished.always(function(){t.addStatus(t.app.getResource(t.libraryId,"language-layer-catalog-restoration-status"),"LayerCatalogRestoration"),l.Deferred.createDeferredList(t._restoredMapServicesPromises).always(function(){l.Deferred.createDeferredList(t._mapServiceCreatedPromises).always(function(){var e=t._addedMapServices.keys();t.executeClearLayerCatalogLayers();var a=t.app.site.getMap();t._restoredMapServices.forEach(function(i){e.indexOf(i.catalogId)>-1&&(t.app.site.essentialsMap.mapServices.push(i),t._mapServiceEvent(i,"MapServiceAddedEvent")),i.serviceLayer instanceof esri.layers.WMSLayer&&i.serviceLayer.setVisibleLayers(i.layers.map(function(e){return e.wmsLayerName})),i.serviceLayer instanceof esri.layers.ArcGISDynamicMapServiceLayer&&i.serviceLayer.setVisibleLayers(i.layers.map(function(e){return e.id})),a.addLayer(i.serviceLayer),t._addedMapServices.set(i.catalogId,i),t._createLayerListItems(i)});var i="The following map services fully or partially were unable to be restored: "+t._failedMapServices.join(", ");t._failedMapServices.length>0&&t.app.trace.warning(i),t._restoredMapServices.length=0,t.layerList._processEligibleSingleMapServiceFolders(),t._layerListRoot.refreshOnDemandItemCollection(),t._restoredMapServicesPromises.length=0,t._mapServiceCreatedPromises.length=0,t._failedLayerNames.length=0,t._failedMapServices.length=0,t._layerListRoot.setItemVisibility(!1),setTimeout(function(){t._layerListRoot.setItemVisibility(!0)},100),t.removeStatus("LayerCatalogRestoration"),t._resetInProgress=!1})})})},i.prototype._treeItemCmp=function(e,t){var a=this._layerListLookup.get(e),i=this._layerListLookup.get(t),r=a.siteIndex,s=i.siteIndex;if(r==s){return a.order-i.order}return r-s},i.prototype._processLayerListLookup=function(e,t,a){var i=this;e.forEach(function(e,r){var s,o,n=new Array,l=i._getSeedSiteIdFromUrl(i._siteUrls[a]);if("folder"==e.type){var c=i._generateFolderId(e,t);e.items&&(n=i._generateItemsChildrenIds(e,c,l),i._processLayerListLookup(e.items,c,a));var d=i._layerListLookup.get(c);if(null!=d)return void i._editExistingLookupItem(d,a,r,n);s=c,o=!0}else s=null!=e.layerID?"{0}.{1}.{2}".format(l,e.mapServiceID,e.layerName):"{0}.{1}".format(l,e.mapServiceID),o=!1;if(s){var g={childrenLookupIds:n,siteIndex:a,order:r,parentLookupId:t,displayName:e.name,addedChildrenLookupIds:new Array,isFolder:o};i._layerListLookup.set(s,g)}})},i.prototype._generateItemsChildrenIds=function(e,t,a){return e.items.map(function(e){return"folder"==e.type?"{0}.{1}".format(t,e.name):null!=e.layerID?"{0}.{1}.{2}".format(a,e.mapServiceID,e.layerName):"{0}.{1}".format(a,e.mapServiceID)})},i.prototype._generateFolderId=function(e,t){var a=e.name;return t&&""!=t&&(a="{0}.{1}".format(t,a)),a},i.prototype._editExistingLookupItem=function(e,t,a,i){t<e.siteIndex&&(e.siteIndex=t,e.order=a),i.forEach(function(t){e.childrenLookupIds.indexOf(t)>=0||e.childrenLookupIds.push(t)}),e.childrenLookupIds.sort(dojo.hitch(this,this._treeItemCmp))},i.prototype.executeGetLayerCatalog=function(e){var t=this;this.layerListResolved.done(function(){t._atLeastOneLayerListDeferred.done(function(){var a=new n.LayerCatalogConstructor(t._layerListLookup);e.resolve(a)})})},i.prototype.canExecuteGetLayerCatalog=function(){return this.canShowLayerCatalog()},i.prototype.executeGetLayerCatalogDetails=function(e,t){var a=this;this.addStatus(this.app.getResource(this.libraryId,"language-layer-catalog-get-layer-details-status"),"GetLayerDetails");var i=new Array,r=t.ids.filter(function(e){return a._isLookupIdForAMapService(e)}),s=t.ids.filter(function(e){return!a._isLookupIdForAMapService(e)}),o=s.map(function(e){return a._getMapServiceKeyFromLayerLookupId(e)});this._getAndSetMapServiceJsons(o).always(function(){var t=new Array;s.forEach(function(e){var r=e.indexOf(".",e.indexOf(".")+1);if(-1!=r)var s=e.substring(r+1);var o=a._getMapServiceKeyFromLayerLookupId(e),n=a._fetchedMapServiceJsons.get(o);if(n){n.properties.push({name:"layerCatalogLookupId",value:o});var l=n.layers.filter(function(e){return e.name==s})[0];if(l){l.properties.push({name:"layerCatalogLookupId",value:e});var c=$.Deferred();c.resolve(l),i.push(c)}else t.push(e)}else t.push(e)}),r.forEach(function(e){var r=$.Deferred();i.push(r.promise()),a._getMapServiceJson(e).done(function(t){t.properties.push({name:"layerCatalogLookupId",value:e}),r.resolve(t)}).fail(function(){t.push(e),r.resolve(null)})}),l.Deferred.createDeferredList(i).done(function(i){a.removeStatus("GetLayerDetails"),t.length>0&&a.app.command("Alert").execute(a.app.getResource(a.libraryId,"language-layer-catalog-failed-items-error").format(t.join(", "))),e.resolve({catalogs:[{entries:i,mapServiceId:"N/A"}]})})})},i.prototype._getAndSetMapServiceJsons=function(e){var t=this,a=new Array;return e.forEach(function(e){var i=$.Deferred();t._fetchedMapServiceJsons.containsKey(e)||(a.push(i),t._getMapServiceJson(e).done(function(a){t._fetchedMapServiceJsons.set(e,a),i.resolve()}).fail(function(){i.reject()}))}),l.Deferred.createDeferredList(a)},i.prototype._getMapServiceKeyFromLayerLookupId=function(e){if(this._isLookupIdForAMapService(e))return e;var t=e.split(".");return t[0]+"."+t[1]},i.prototype._isLookupIdForAMapService=function(e){return 2==e.split(".").length},i.prototype._getMapServiceJson=function(e){var t=$.Deferred(),a=this._getMapServiceRestUrl(e);return this._geocortexRequest(a).done(function(e){t.resolve(e)}).fail(function(){t.reject()}),t.promise()},i.prototype._getMapServiceRestUrl=function(e){var t=e.split("."),a=t[0],i=this._getSeedSiteUrlFromSiteId(a),r=t[1];return"{0}/map/mapservices/{1}?deep=true".format(i,r)},i.prototype.canExecuteGetLayerCatalogDetails=function(){return this.canExecuteGetLayerCatalog()},i.prototype.addStatus=function(e,t){console.log("Adding status:"+t);var a=new g.AddStatusArgs(e,null,null,t,3e4,!0);this.app.command("AddStatus").execute(a)},i.prototype.removeStatus=function(e){this.app.command("RemoveStatus").execute(e)},i.prototype.executeApplyLayerCatalogDetails=function(e){if(this.addStatus(this.app.getResource(this.libraryId,"language-layer-catalog-updating-layer-list-status"),"UpdatingLayerList"),e&&e.catalogs)for(var t=0;t<e.catalogs.length;t++)if(e.catalogs[t]){var a=e.catalogs[t],i=[],r=this._addedLayerListItems.keys();for(t=0;t<r.length;t++){var s=this._addedLayerListItems.get(r[t]);s instanceof o.LayerListFolderItem&&i.push(s)}this.layerList._addedFolderReferences.forEach(function(e){i.some(function(t){return t===e})&&e.canAdjustOpacity.set(!1)}),this._removeEntriesIfNecessary(a.entries),this._addEntriesToMap(a.entries)}},i.prototype.executeRemoveLayerCatalogItem=function(e){var t=e.catalogId,a=this.getState().layers.filter(function(e){return t.indexOf(e.layerId)<0}).map(function(e){return{properties:[{name:"layerCatalogLookupId",value:e.layerId}]}});this._removeEntriesIfNecessary(a)},i.prototype._removeEntriesIfNecessary=function(e){var t=this,a=new r.Dictionary;if(e.forEach(function(e){if(e){var t=e.properties.filter(function(e){return"layerCatalogLookupId"==e.name})[0];null!=t&&a.set(t.value,t.value)}}),0!=e.length){this._addedMapServices.keys().forEach(function(e){var i=t._addedMapServices.get(e),r=t._findLayersToBeRemoved(i,a),s=r.map(function(e){return i.layers[e].catalogId});r.forEach(function(e){i.supportsLayerVisibility()&&i.layers[e].setVisibility(!1),t.app.command("RemoveClusterLayer").execute({gcxLayer:i.layers[e]}),t.app.event("UserAddedLayerOrMapServiceRemovedEvent").publish(i.layers.splice(e,1)[0]),t._mapServiceEvent(i,"MapServiceRemovedEvent"),t._mapServiceEvent(i,"MapServiceAddedEvent")}),s.forEach(function(e){t._removeItemFromLayerList(e)}),0==i.layers.length?t._removeMapService(e):(i.serviceLayer instanceof esri.layers.ArcGISDynamicMapServiceLayer||i.serviceLayer instanceof esri.layers.WMSLayer)&&t._hackRefreshModules(i.serviceLayer.id),t._resetMapServiceReferences(i)}),this._layerListRoot.refreshOnDemandItemCollection();var i=this.layerList._addedFolderReferences.filter(function(e){return 0==e.children.length()}).map(function(e){return t.layerList._addedFolderReferences.indexOf(e)});i.reverse(),i.forEach(function(e){t.layerList._addedFolderReferences.splice(e,1)})}else this.executeClearLayerCatalogLayers()},i.prototype._removeMapService=function(e){var t=this._addedMapServices.get(e);(a=this.app.site.essentialsMap.mapServices.indexOf(t))>-1&&this.app.site.essentialsMap.mapServices.splice(a,1),this.app.site.getMap().removeLayer(t.serviceLayer),this._addedMapServices.deleteEntry(e),this.layerList.removeServiceLayer(t.serviceLayer);var a,i=this.layerList._allMapServiceReferences.filter(function(e){return e.id==t.id})[0];(a=this.layerList._allMapServiceReferences.indexOf(i))>-1&&this.layerList._allMapServiceReferences.splice(a,1),this._mapServiceEvent(t,"MapServiceRemovedEvent"),this._resetInProgress||this.app.event("UserAddedLayerOrMapServiceRemovedEvent").publish(t)},i.prototype._findLayersToBeRemoved=function(e,t){for(var a=new Array,i=e.layers,r=i.length-1;r>=0;r--){var s=i[r].catalogId;null!=s&&(t.containsKey(s)||a.push(r))}return a},i.prototype._removeItemFromLayerList=function(e){var t=this._layerListLookup.get(e),a=this._addedLayerListItems.get(e),i=this._addedLayerListItems.get(t.parentLookupId),r=this._layerListLookup.get(t.parentLookupId);if(r&&r.addedChildrenLookupIds.splice(r.addedChildrenLookupIds.indexOf(e),1),a&&(a&&a.isVisible&&a.isVisible.bindingEvent&&a.isVisible.bindingEvent.clear(),i?i.children.removeItem(a):this._layerListRoot.children.indexOf(a)>=0&&this._layerListRoot.children.removeItem(a),a.type==s.LayerListItemType.LAYER)){var o=a;o.layer&&o.layer.serviceLayerInfo&&(o.layer.serviceLayerInfo.id=null)}this._addedLayerListItems.deleteEntry(e),r&&(0==r.addedChildrenLookupIds.length?this._removeItemFromLayerList(t.parentLookupId):i&&i.refreshOnDemandItemCollection())},i.prototype.executeGetLayerCatalogMapServiceIds=function(e){var t=this,a=this._addedMapServices.keys(),i=new Array;a.forEach(function(e){var a=t._addedMapServices.get(e).id;i.push(a)}),e.resolve(i)},i.prototype.canExecuteApplyLayerCatalogDetails=function(){return this.canExecuteGetLayerCatalog()},i.prototype.canShowLayerCatalog=function(){return this._siteUrls.length>0},i.prototype.executeClearLayerCatalogLayers=function(){var e=this;this._addedMapServices.keys().forEach(function(t){e.app.event("MapServiceRemovedEvent").publish(e._addedMapServices.get(t)),e._removeMapService(t)});var t=this.layerList._userAddedLayersFolder;if(t){var a=t.children.getItems().filter(function(e){return"LayerCatalogRoot"==e.id.get()})[0],i=t.children.indexOf(a);a&&(t.children.getAt(i).children.clear(),t.children.removeAt(i),t.refreshOnDemandItemCollection())}this._layerListLookup.keys().forEach(function(t){e._layerListLookup.get(t).addedChildrenLookupIds.length=0}),this._addedLayerListItems.keys().forEach(function(t){var a=e._addedLayerListItems.get(t);if(a.type==s.LayerListItemType.FOLDER){var i=e.layerList._addedFolderReferences.map(function(e){return e.id.get()}).indexOf(a.id.get());e.layerList._addedFolderReferences.splice(i,1)}e._removeItemFromLayerList(t)});var r=this.layerList._addedFolderReferences.map(function(e){return e.id.get()}).indexOf("LayerCatalogRoot");this.layerList._addedFolderReferences.splice(r,1),this._addedLayerListItems.clear();var o=this.layerList.children.indexOf(this._layerListRoot);o>=0&&!this._layerListRoot.children.getLength()&&(this.layerList.children.getAt(o).cleanUp(),this.layerList.children.removeAt(o)),this._layerCatalogFolderInLayerList=!1},i.prototype._addEntriesToMap=function(e){var t=this,a=new Array;e.forEach(function(e){if(e){var i=e.properties.filter(function(e){return"layerCatalogLookupId"==e.name})[0].value.split("."),r=i[0],s=t._siteUrls.indexOf(t._getSeedSiteUrlFromSiteId(r)),o=i[1],n=!1;if(2==i.length)n=!0;else{var l=a.filter(function(e){return e.mapServiceId==o&&e.siteIndex==s})[0];null==l?n=!0:l.layerJsons.push(e)}if(n){var c={siteIndex:s,siteId:r,mapServiceId:o,layerJsons:[e]};a.push(c)}}});var i=new Array;a.forEach(function(e,a){var r=$.Deferred();i[a]=r.promise(),t._applyLayerCatalogDetailsToMapService(e).always(function(){r.resolve()})}),l.Deferred.createDeferredList(i).always(function(){t.layerList._processEligibleSingleMapServiceFolders(),t._layerListRoot.refreshOnDemandItemCollection(),t.removeStatus("UpdatingLayerList")})},i.prototype._applyLayerCatalogDetailsToMapService=function(e){var a=this,i=$.Deferred(),r=this.app.site.getMap(),s=$.Deferred(),o="{0}.{1}".format(e.siteId,e.mapServiceId),n=this._addedMapServices.get(o);return null!=n?s.resolve(n):this._getNewMapService(o).done(function(e){a._isLayerInLayerList(e.serviceLayer)?(a.app.trace.error("We can't add the same service layer twice to the layer list"),s.reject()):(a.app.site.essentialsMap.mapServices.push(e),a._addedMapServices.set(o,e),s.resolve(e))}).fail(function(){s.reject()}),s.done(function(s){var o=s.serviceLayer,n=e.layerJsons;if(t(["esri/layers/VectorTileLayer"],function(e){o instanceof e&&c.MapUtilities.addLayerToVectorTiledService(n[0],s)}),o instanceof esri.layers.WebTiledLayer)c.MapUtilities.addLayerToWebTiledService(n[0],s);else if(o instanceof esri.layers.ArcGISDynamicMapServiceLayer)s.mapServiceType===d.MapServiceType.TILED&&c.MapUtilities.addLayerToTiledService(n[0],s),o.supportsDynamicLayers&&(s.supportsDynamicLayers=!0),c.MapUtilities.addLayersWithDynamicDefinitions(n,s),c.MapUtilities.addLayersToDynamicMapService(n,s);else if(o instanceof esri.layers.FeatureLayer&&!(o instanceof esri.layers.StreamLayer))c.MapUtilities.addLayerToFeatureService(n[0],s);else if(o instanceof esri.layers.WFSLayer);else if(o instanceof esri.layers.WMTSLayer);else if(o instanceof esri.layers.StreamLayer);else if(o instanceof esri.layers.ArcGISImageServiceLayer)c.MapUtilities.addLayerToImageService(n[0],s);else if(o instanceof esri.layers.ArcGISTiledMapServiceLayer)c.MapUtilities.addLayerToTiledService(n[0],s);else if(o instanceof esri.virtualearth.VETiledLayer)c.MapUtilities.addLayerToBingService(n[0],s);else if(o instanceof esri.layers.WMSLayer){var l=s.catalogId.split(".")[0],g=a._getSeedSiteUrlFromSiteId(l);c.MapUtilities.addLayersToWMSService(n,s,g)}a._mapServiceEvent(s,"MapServiceRemovedEvent"),a._mapServiceEvent(s,"MapServiceAddedEvent"),a._createLayerListItems(s),r.getLayer(s.serviceLayer.id)&&"Dynamic"==s.mapServiceType?a._hackRefreshModules(s.serviceLayer.id):r.addLayer(o),i.resolve()}).fail(function(){i.reject()}),i.promise()},i.prototype._getNewMapService=function(e){var t=this,a=$.Deferred();if(this._fetchedMapServiceJsons.containsKey(e)){var i=this._fetchedMapServiceJsons.get(e),r=e.split(".")[0],s=this._getSeedSiteUrlFromSiteId(r);c.MapUtilities.createMapServiceFromJson(i,s).done(function(e){a.resolve(e)})}else this._getMapServiceJson(e).done(function(i){i.properties.push({name:"layerCatalogLookupId",value:e}),t._fetchedMapServiceJsons.set(e,i);var r=e.split(".")[0],s=t._getSeedSiteUrlFromSiteId(r);c.MapUtilities.createMapServiceFromJson(i,s).done(function(e){a.resolve(e)})});return a.promise()},i.prototype._resetMapServiceReferences=function(e,t){t=t||y.ServiceLayerInfo.fromGcxMapService(e);for(var a=this.layerList._allMapServiceReferences,i=0;i<a.length;i++)t.id==a[i].id&&(a[i]=t);var r=d.MapServiceType;if([r.TILED,r.WEBTILED,r.IMAGE,r.BING,r.VECTORTILE].indexOf(t.serviceType)>-1){var s=this.layerList._handledMapServiceReferences;for(i=0;i<s.length;i++)t.id==s[i].id&&(s[i]=t)}var o=this.layerList._addedFolderReferences;for(i=0;i<o.length;i++)for(var n=o[i].containedMapServices,l=0;l<n.length;l++)if(t.id==n[l].id){n[l]=t;break}},i.prototype._isLayerInLayerList=function(e){for(var t=this.layerList.getDescendants(),a=0;a<t.length;a++){var i=t[a];if(i.mapService&&i.mapService.serviceLayer.url===e.url&&!i.mapService.isUserCreated)return!0}return!1},i.prototype._createLayerListItems=function(e){var t=this,a=y.ServiceLayerInfo.fromGcxMapService(e);this._resetMapServiceReferences(null,a);var i=function(e,a){e._applyDeferredInitialVisibility(),e.unbindFromActiveTheme(),e.inActiveTheme.set(!0),t._addToLayerList(e,a)};switch(e.mapServiceType){case d.MapServiceType.TILED:case d.MapServiceType.WEBTILED:case d.MapServiceType.IMAGE:case d.MapServiceType.BING:case d.MapServiceType.VECTORTILE:case d.MapServiceType.WMTS:for(var r=0;r<e.layers.length;r++)e.layers[r].catalogId||(e.layers[r].catalogId=e.catalogId);var s=e.layers[0].catalogId;if(null!=s&&!this._addedLayerListItems.containsKey(s)){var o=new u.LayerListMapServiceItem(e.layers[0].id,a,this.layerList);o.setItemVisibility(!0),i(o,s),o.populateMapServicesInParentFolders()}break;case d.MapServiceType.DYNAMIC:case d.MapServiceType.FEATURE:case d.MapServiceType.WMS:case d.MapServiceType.WFS:case d.MapServiceType.STREAM:if(e.layers[0].catalogId||(e.layers[0].catalogId=e.catalogId),e.drawingBehavior===v.DrawingBehavior.STREAM_LAYER){var n=e.layers[0];(n&&n.identifiable||n.showMapTips)&&C.registerStreamLayerAsClickable(e.serviceLayer,this.app,n.displayName)}a.layers.forEach(function(e){var a=e.gcxLayer.catalogId;if(null!=a&&!t._addedLayerListItems.containsKey(a)){var r=new p.LayerListLayerItem(e.id,e,t.layerList);r.canNotAssignVisibility.set(!1),i(r,a),t._resetAddedFolderReferences(),r.populateMapServicesInParentFolders()}})}},i.prototype._resetAddedFolderReferences=function(){var e=this,t=new r.Dictionary,a=new r.Dictionary,i=0,o=new Array,n=function(e){o.length=0,e.forEach(function(e){a.set(e,i++);var r=t.get(e);r&&r.children&&r.children.getItems().forEach(function(e){e.type==s.LayerListItemType.FOLDER&&o.push(e.id.get())})}),o.length>0&&n(o.slice())};this.layerList._addedFolderReferences.forEach(function(a){t.set(a.id.get(),a),a.parent&&a.parent!=e.layerList._userAddedLayersFolder||o.push(a.id.get())}),n(o.slice()),this.layerList._addedFolderReferences.sort(function(e,t){return a.get(e.id.get())-a.get(t.id.get())})},i.prototype._mapServiceEvent=function(e,t){var a,i,r,s=this.app.event(t),o=Object.keys(s.subscriptions);for(a=0;a<o.length;a++){var n=s.subscriptions[o[a]];if(n.scope&&n.scope.id&&"module-Mapping-LayerList"===n.scope.id){i=o[a],r=n;break}}i&&s.unsubscribe(i),this.app.event(t).publish(e),s.subscriptions[i]=r},i.prototype._addToLayerList=function(e,t){var a=this._layerListLookup.get(t);a||new Error("Layer list tree structure unable to be built for the following item: "+t),null!=a.parentLookupId?this._addChildToLayerList(e,t):this._addOrphanToLayerList(e,t)},i.prototype._addChildToLayerList=function(e,t){var a=this._layerListLookup.get(t),i=this._addedLayerListItems.get(a.parentLookupId),r=this._layerListLookup.get(a.parentLookupId);if(null==i){var s=h.LayerCatalogModule.instance.checkboxSuffix;s&&""!=s&&r.displayName.endsWith(s)&&(r.displayName=r.displayName.slice(0,r.displayName.length-s.length));var n=new o.LayerListFolderItem(a.parentLookupId,r.displayName,this.layerList);n.isUserCreated=!0,n.children.addItem(e),r.addedChildrenLookupIds.push(t),n.isExpanded.set(!0),n.configuredVisible=!0,n.isVisible.set(!0),this._addToLayerList(n,a.parentLookupId),this._addedLayerListItems.set(a.parentLookupId,n)}else{var l=this._findIndexToInsertChildLayerListItem(r.addedChildrenLookupIds,a);i.children.insertItem(l,e),r.addedChildrenLookupIds.splice(l,0,t),i.refreshOnDemandItemCollection()}this._addedLayerListItems.set(t,e)},i.prototype._addOrphanToLayerList=function(e,t){var a=this,i=this._layerListLookup.get(t);if(0==this._layerListRoot.children.getLength()){var r;if(this.layerList._userAddedLayersFolder){if(!(r=this.layerList._userAddedLayersFolder).children.contains(this._layerListRoot)){if(this._layerListRoot.layerList&&this._layerListRoot.layerList.mapInfo&&this._layerListRoot.layerList.mapInfo.gcxMap&&this._layerListRoot.layerList.mapInfo.gcxMap.layerThemesInfo&&this._layerListRoot.layerList.mapInfo.gcxMap.layerThemesInfo&&this._layerListRoot.layerList.mapInfo.gcxMap.layerThemesInfo.themes&&this._layerListRoot.layerList.mapInfo.gcxMap.layerThemesInfo.themes.length>0)for(var s=this._layerListRoot.layerList.mapInfo.gcxMap.layerThemesInfo.themes,n=function(e){0==l._layerListRoot.layerThemeSettings.filter(function(t){t.theme.id,s[e].id}).length&&l._layerListRoot.layerThemeSettings.push(new L.LayerThemeSetting(s[e],!0))},l=this,c=0;c<s.length;c++)n(c);this._layerListRoot.canDisplayItem.set(!0),this._layerListRoot.inActiveTheme.set(!0),this._layerListRoot.displayItem.set(!0),this._layerListRoot.isExpanded.set(!0),this._layerListRoot.isVisible.set(!0),r.children.insertItem(0,this._layerListRoot)}}else r=this._layerListRoot,this._layerCatalogFolderInLayerList||(this.layerList.children.insertItem(0,r),this._layerCatalogFolderInLayerList=!0);this._layerListRoot.configuredVisible=!0,this.layerList._addedFolderReferences.map(function(e){return e.id.get()}).indexOf(this._layerListRoot.id.get())>-1||this.layerList._addedFolderReferences.push(this._layerListRoot),this._layerListRoot.isVisible.set(!0),this.layerList._userAddedFolderInitialized=!0}var d=this._layerListLookup.keys().filter(function(e){return null==a._layerListLookup.get(e).parentLookupId&&a._addedLayerListItems.containsKey(e)}),g=this._findIndexToInsertChildLayerListItem(d,i);this._layerListRoot.children.insertItem(g,e),this._addedLayerListItems.set(t,e),this._layerListRoot.isExpanded.set(!0),this.layerList._userAddedLayersFolder&&this.layerList._userAddedLayersFolder.isExpanded.set(!0),r&&(r.canDisplayItem.set(!0),r.inActiveTheme.set(!0),r.displayItem.set(!0),r.isExpanded.set(!0),r.isVisible.set(!0),r.parent&&r.parent instanceof o.LayerListFolderItem&&r.parent.refreshOnDemandItemCollection())},i.prototype._findIndexToInsertChildLayerListItem=function(e,t){var a;for(a=0;a<e.length;a++){var i=e[a],r=this._layerListLookup.get(i);if(r.siteIndex>t.siteIndex)break;if(r.siteIndex==t.siteIndex&&r.order>t.order)break}return a},i.prototype.getState=function(){var e=this,t=new Array;return this._addedLayerListItems.keys().forEach(function(a){var i,r,o=e._addedLayerListItems.get(a);o.type==s.LayerListItemType.LAYER&&(i=o.layer.displayName,r=o.layer.gcxLayer.mapService.id),o.type==s.LayerListItemType.MAPSERVICE&&(i=o.mapService.displayName,r=o.mapService.id),i&&r&&t.push({layerId:a,layerDisplayName:i,mapServiceObjectId:r})}),{layers:t}},i.prototype._getSeedSiteIdFromUrl=function(e){return e.substring(e.lastIndexOf("/")+1)},i.prototype._getSeedSiteUrlFromSiteId=function(e){var t=this;return this._siteUrls.filter(function(a){return t._getSeedSiteIdFromUrl(a)==e})[0]},i}(i.BaseProvider);a.EssentialsSiteProvider=m})},"Mapping/modules/LayerCatalog/IProvider":function(){define(["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})},"Mapping/modules/LayerCatalog/LayerCatalogConstructor":function(){define(["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){return function(e){this.catalogs=new Array,this.catalogs.push(new i(e))}}();t.LayerCatalogConstructor=a;var i=function(){return function(e){var t=this;this.mapServiceId="N/A";var a=e.keys();if(a.length>0){this.entries=new Array;var i=a.filter(function(t){return null==e.get(t).parentLookupId});i.sort(function(t,a){var i=e.get(t),r=e.get(a),s=i.siteIndex,o=r.siteIndex;return s==o?i.order-r.order:s-o}),i.forEach(function(a){t.entries.push(new r(a,e))})}}}();t.LayerCatalogRoot=i;var r=function(){function e(t,a){var i=this;this.id=t;var r=a.get(t);this.displayName=r.displayName,this.type=r.isFolder?"folder":"layer",r.isFolder&&(this.entries=new Array),r.childrenLookupIds.length>0&&r.childrenLookupIds.forEach(function(t){i.entries.push(new e(t,a))})}return e}();t.LayerCatalogEntry=r})},"Mapping/modules/LayerCatalog/LayerCatalogModule":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","geocortex/framework/application/ModuleBase","./BaseLayerCatalogViewModel","./MapUtilities","geocortex/infrastructure/commands.meta"],function(t,a,i,r,s,o){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(t){function a(e,i){var o=t.call(this,e,i)||this;return o._providers=new Array,o.app.site&&o.app.site.isInitialized?o._siteInitialized():o.app.eventRegistry.event("SiteInitializedEvent").subscribe(o,o._siteInitialized),s.MapUtilities.app=o.app,o.checkboxVisibility=r.CheckboxVisibility.none,o.checkboxSuffix=null,a.instance=o,o}return e(a,t),a.prototype.initialize=function(e){if(e.hasOwnProperty("layerCatalogProviders")&&dojo.isArray(e.layerCatalogProviders)&&this._loadProviders(e.layerCatalogProviders),e.hasOwnProperty("checkboxes")){var t=e.checkboxes;t.hasOwnProperty("visibility")&&(this.checkboxVisibility=r.CheckboxVisibility[t.visibility]),t.hasOwnProperty("suffix")&&(this.checkboxSuffix=t.suffix)}},a.prototype.getStateFilter=function(){return{layers:{item:this.app.project.filter.object}}},a.prototype.applyState=function(e){var t=this;return this.app.event("ProjectLoadedEvent").once(this,function(){var a=t._providers.filter(function(e){return e.isEnabled&&e.canExecuteApplyLayerCatalogDetails(null)})[0];null!=a&&a.reset(e)}),Promise.resolve()},a.prototype.exportState=function(){var e,t=this._providers.filter(function(e){return e.isEnabled&&e.canExecuteApplyLayerCatalogDetails(null)})[0];return null!=t&&(e=t.getState()),Promise.resolve(e)},a.prototype._loadProviders=function(e){var t=this;e.forEach(function(e){e.libraryId&&!t.app.allLibrariesLoaded?t._loadProviderWhenLibrariesDownloaded(e):t._loadProvider(e)})},a.prototype._loadProviderWhenLibrariesDownloaded=function(e){var t=this,a=this.app.event("ViewerLibrariesDownloadedEvent").subscribe(this,function(){t.app.event("ViewerLibrariesDownloadedEvent").unsubscribe(a),t._loadProvider(e)})},a.prototype._loadProvider=function(e){var t=dojo.getObject(e.type);if(t){var a=new t(this.app,e.libraryId||this.libraryId);a.isEnabled=!(!1===e.enabled),a.isEnabled&&a.initialize(e.configuration||{}),this._providers.push(a)}else this.app.trace.error(this.id+" can't find layer catalog provider typed "+e.type)},a.prototype._siteInitialized=function(){var e=this;this.app.commandRegistry.command("GetLayerCatalog").register(this,this._executeGetLayerCatalog,this._canExecuteGetLayerCatalog),this.app.commandRegistry.command("GetLayerCatalogDetails").register(this,this._executeGetLayerCatalogDetails,this._canExecuteGetLayerCatalogDetails),this.app.commandRegistry.command("ApplyLayerCatalogDetails").register(this,this._executeApplyLayerCatalogDetails,this._canExecuteApplyLayerCatalogDetails),this.app.commandRegistry.command("ClearLayerCatalogLayers").register(this,this._executeClearLayerCatalogLayers),this.app.commandRegistry.command("ShowLayerCatalog").register(this,this._executeShowLayerCatalog,this._canExecuteShowLayerCatalog),this.app.commandRegistry.command("GetLayerCatalogMapServiceIds").register(this,this._executeGetLayerCatalogMapServiceIds),this.app.commandRegistry.command("RemoveLayerCatalogItem").register(this,this._executeRemoveLayerCatalogItem),this.app.command("LayerCatalogRestoreMapService").register(this,this.restoreMapService),o.Commands.commandsMetadata.push({name:"ShowLayerCatalog",metadata:{arguments:"none",description:"Shows the layer catalog view.",isHyperlinkable:!0,visibility:"public"}}),this.app.commandRegistry.command("AddCatalogLayers").register(this,this._executeAddCatalogLayers,this._canExecuteAddCatalogLayers),o.Commands.commandsMetadata.push({name:"AddCatalogLayers",metadata:{arguments:"Comma seperated string of layer ids.",description:"Adds catalog layers.",isHyperlinkable:!1,visibility:"public"}}),this.app&&this.app.urlParameters&&this.app.urlParameters.catalogLayers&&setTimeout(function(){e.app.commandRegistry.command("AddCatalogLayers").execute(e.app.urlParameters.catalogLayers)},0),this.app.commandRegistry.command("AppendCatalogLayers").register(this,this._executeAppendCatalogLayers,this._canExecuteAppendCatalogLayers),o.Commands.commandsMetadata.push({name:"AppendCatalogLayers",metadata:{arguments:"Comma seperated string of layer ids.",description:"Appends catalog layers.",isHyperlinkable:!1,visibility:"public"}})},a.prototype.restoreMapService=function(e){var t=this._providers.filter(function(e){return e.isEnabled&&e.canExecuteApplyLayerCatalogDetails(null)})[0];null!=t&&t.restoreMapService(e)},a.prototype._executeGetLayerCatalog=function(e){var t=this._providers.filter(function(e){return e.isEnabled&&e.canExecuteGetLayerCatalog(null)})[0];null!=t&&t.executeGetLayerCatalog(e)},a.prototype._canExecuteGetLayerCatalog=function(){return this._providers.some(function(e){return e.isEnabled&&e.canExecuteGetLayerCatalog(null)})},a.prototype._executeGetLayerCatalogDetails=function(e,t){var a=this._providers.filter(function(e){return e.isEnabled&&e.canExecuteGetLayerCatalog(null)})[0];null!=a&&a.executeGetLayerCatalogDetails(e,t)},a.prototype._canExecuteGetLayerCatalogDetails=function(){return this._providers.some(function(e){return e.isEnabled&&e.canExecuteGetLayerCatalogDetails(null,null)})},a.prototype._executeApplyLayerCatalogDetails=function(e){var t=this._providers.filter(function(e){return e.isEnabled&&e.canExecuteApplyLayerCatalogDetails(null)})[0];null!=t&&t.executeApplyLayerCatalogDetails(e)},a.prototype._canExecuteApplyLayerCatalogDetails=function(){return this._providers.some(function(e){return e.isEnabled&&e.canExecuteApplyLayerCatalogDetails(null)})},a.prototype._executeClearLayerCatalogLayers=function(){var e=this._providers.filter(function(e){return e.isEnabled&&e.canShowLayerCatalog()})[0];null!=e&&e.executeClearLayerCatalogLayers()},a.prototype._executeShowLayerCatalog=function(){this.app.commandRegistry.command("ActivateView").execute("LayerCatalogView")},a.prototype._canExecuteShowLayerCatalog=function(){return this._providers.some(function(e){return e.isEnabled&&e.canShowLayerCatalog()})},a.prototype._executeAddCatalogLayers=function(e){e&&this.app.eventRegistry.event("OnAddCatalogLayersCommandEvent").publish(e)},a.prototype._executeAppendCatalogLayers=function(e){e&&this.app.eventRegistry.event("OnAppendCatalogLayersCommandEvent").publish(e)},a.prototype._canExecuteAddCatalogLayers=function(){return this._canExecuteShowLayerCatalog()},a.prototype._canExecuteAppendCatalogLayers=function(){return this._canExecuteShowLayerCatalog()},a.prototype._executeGetLayerCatalogMapServiceIds=function(e){var t=this._providers.filter(function(e){return e.isEnabled&&e.canShowLayerCatalog()})[0];null!=t&&t.executeGetLayerCatalogMapServiceIds(e)},a.prototype._executeRemoveLayerCatalogItem=function(e){var t=this._providers.filter(function(e){return e.isEnabled&&e.canShowLayerCatalog()})[0];null!=t&&t.executeRemoveLayerCatalogItem(e)},a}(i.ModuleBase);a.LayerCatalogModule=n})},"Mapping/modules/LayerCatalog/LayerCatalogState":function(){define(["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})},"Mapping/modules/LayerCatalog/LayerCatalogView":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","./BaseLayerCatalogView"],function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return e(a,t),a.prototype.handleKeyDown=function(e,t,a){var i=e.which?e.which:e.keyCode;return!!this._isSpecialChar(i)||(13===i&&(this.viewModel.filterCatalog(),t.blur()),!0)},a.prototype.handleExpand=function(e,t,a){if(this._ignoreHandleExpand)return this._ignoreHandleExpand=!1,!0;a&&a.expanded.set(!a.expanded.get())},a.prototype.handleSelectAllChecked=function(e,t,a){return a.toggleAllChildren(t.checked),this._ignoreHandleExpand=!0,!0},a.prototype.handleLayerChecked=function(e,t,a){a&&a.isChecked.set(!a.isChecked.get())},a.prototype.handleClear=function(e,t,a){this.viewModel.showingAll.get()&&this.viewModel.reset()},a.prototype.handleSearch=function(e,t,a){this.viewModel.filterCatalog()},a.prototype.handleShowSelectedClick=function(){this.viewModel.toggleSelected()},a.prototype.handleRefreshClick=function(){this.viewModel.refreshLayerCatalog()},a}(i.BaseLayerCatalogView);a.LayerCatalogView=r})},"Mapping/modules/LayerCatalog/LayerCatalogViewModel":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","./BaseLayerCatalogViewModel","./CatalogEntryType"],function(t,a,i,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=function(t){function a(e,a){return t.call(this,e,a)||this}return e(a,t),a.prototype.ready=function(){t.prototype.ready.call(this),this.catalogCached&&(this.reset(),this.syncAddedLayers())},a.prototype.reset=function(){this._clearFilter(),this.showingAll.get()||this.toggleSelected()},a.prototype.filterCatalog=function(){var e=this.filterText.get(),t=this.getFilterProvider();if(t)t.filter(e,this.filteredCatalog);else for(var a=0;a<this.filteredCatalog.get().length;a++)this.filteredCatalog.getAt(a).filter(e)},a.prototype._clearFilter=function(){this.filterText.set(""),this.filterCatalog()},a.prototype.toggleSelected=function(){this.filterText.set(""),this.showingAll.set(!this.showingAll.get());var e="",t=!1;if(this.showingAll.get())this.showNoLayersSelectedText.set(!1),this._clearFilter(),e="language-layer-catalog-show-selected-button";else{this.filterText.set("");for(var a=this._getFlattenedEntries(),i=0;i<a.length;i++){var s=!1;a[i].type===r.LAYER?a[i].isChecked.get()&&(t=!0,s=!0):(a[i].someChecked.get()||a[i].allChecked.get())&&(s=!0),a[i].visible.set(s)}for(i=0;i<this.filteredCatalog.get().length;i++)(this.filteredCatalog.getAt(i).someChecked.get()||this.filteredCatalog.getAt(i).allChecked.get())&&this.filteredCatalog.getAt(i).expandAll(!0);e="language-layer-catalog-show-all-button",t?this.showNoLayersSelectedText.set(!1):this.showNoLayersSelectedText.set(!0)}t&&!this.showingAll.get()?this.clearButtonVisible.set(!0):this.clearButtonVisible.set(!1),this.showSelectedButtonText.set(this.app.getResource(this.libraryId,e))},a}(i.LayerCatalogViewModelBase);a.LayerCatalogViewModel=s})},"Mapping/modules/LayerCatalog/MapUtilities":function(){define(["require","exports","geocortex/essentials/MapService","geocortex/essentials/Layer","geocortex/geocortex","geocortex/essentials/ServiceHelper","geocortex/essentials/MapServiceConstants","geocortex/essentials/LayerVisibilityEventManager","geocortex/essentials/FeatureLayerService","geocortex/essentials/WFSLayerService","geocortex/essentials/StreamLayerService","geocortex/essentials/utilities/UrlUtilities","geocortex/essentials/RestHelperHTTPService","geocortex/framework/SimplePromise"],function(e,t,a,i,r,s,o,n,l,c,d,g,p,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function t(){}return t.addLayerToWebTiledService=function(e,t){this._addLayerToService(e,t)},t.addLayerToVectorTiledService=function(e,t){this._addLayerToService(e,t)},t.addLayerToTiledService=function(e,t){this._addLayerToService(e,t)},t.addLayerToImageService=function(e,t){this._addLayerToService(e,t)},t.addLayerToBingService=function(e,t){this._addLayerToService(e,t)},t.addLayersToWMSService=function(e,t,a){var i=this;e.forEach(function(e){if(!t.layers.some(function(t){return t.id==e.id})){e.parentLayerId=null;var a=t.url+"/layers/"+e.id,r=i._createGcxLayer(a,e,t,e.name,e.id);r.wmsLayerName=e.nativeID,t.layers.push(r);var s=new esri.layers.WMSLayerInfo({name:r.wmsLayerName,title:r.name});s.styleName=r.styleName,t.serviceLayer.layerInfos.push(s)}});var r=t.layers;if(r&&r.length>0){var s=r.filter(function(e){return 1==e.isVisible()});if(s&&s.length>0){var o=s.map(function(e){return e.wmsLayerName});o&&o.length>0&&t.serviceLayer.setVisibleLayers(o)}}},t.addLayersToWMTSService=function(e,t,a){var i=this;e.forEach(function(e){if(!t.layers.some(function(t){return t.id==e.id})){var a=t.url+"/layers/"+e.id,r=i._createGcxLayer(a,e,t,e.name,e.id);t.layers.push(r)}})},t._addLayerToService=function(e,t){var a=this;if("MapService"===e.drawingBehavior&&e.layers&&e.layers.length>0)e.layers.forEach(function(e){if(!t.layers.some(function(t){return t.id==e.id})){var i=t.url+"/layers/"+e.id,r=a._createGcxLayer(i,e,t,e.name,e.id);t.layers.push(r)}});else{e.properties.filter(function(e){return"layerCatalogLookupId"==e.name})[0].value;var s=new i.Layer(t.originalUrl);s.id="0",s.isUserCreated=!0,s.userLayerType=o.UserLayerType.LAYER_CATALOG,s.mapService=t,s.catalogId=r._getProperties(e.properties).layerCatalogLookupId,t.layers.push(s)}},t.addLayersWithDynamicDefinitions=function(e,t){var a=this;e.forEach(function(e){if(e.dynamicDefinition&&""!=e.dynamicDefinition&&!t.layers.some(function(t){return t.id==e.id})){var i=t.url+"/layers/"+e.id,r=a._createGcxLayer(i,e,t,e.displayName,e.id);t.add(r)}})},t.addLayersToDynamicMapService=function(e,t){var a=this,i=e.map(function(e){return e.id}),r=i.slice(),s=t.serviceLayer;s.layerInfos.forEach(function(s,o){if(i.indexOf(s.id.toString())>=0){var n=t.layers.filter(function(e){return e.id==s.id.toString()})[0];if(null==n){var l=e.filter(function(e){return e.id==s.id})[0],c=t.url+"/layers/"+l.id,d=a._createGcxLayer(c,l,t,s.name,s.id.toString());d.parentLayerId=null,t.layers.push(d)}else n.isVisible()||r.splice(r.indexOf(s.id.toString()),1)}}),r&&r.length>0?s.setVisibleLayers(r):s.setVisibleLayers(["-1"])},t.addLayerToFeatureService=function(e,t){var a=t.serviceLayer;if(!t.layers.some(function(e){return e.id==a.layerId.toString()})){var i=t.url+"/layers/"+e.id,r=this._createGcxLayer(i,e,t,e.displayName,a.layerId.toString());t.layers.push(r)}},t.addLayerToWFSOrStreamService=function(e,t){var a=this;e.forEach(function(e){if(!t.layers.some(function(t){return t.id==e.id})){var i=t.url+"/layers/"+e.id,r=a._createGcxLayer(i,e,t,e.name,e.id);t.layers.push(r)}})},t._createGcxLayer=function(e,t,a,s,n){this.app.site.getMap();var l=new i.Layer(e);t.visible=!0,l.mapService=a,l._configureObject(t),l.catalogId=r._getProperties(t.properties).layerCatalogLookupId,l.includeInLayerList=!0,l.site=this.app.site,l.name=s,l.id=n,l.isInitialized=!0,l.configuredVisible=!0,l.isUserCreated=!0,l.userLayerType=o.UserLayerType.LAYER_CATALOG;for(var c,d=e.split("/"),g=0;g<d.length;g++)if("sites"==d[g]){c=d[g+1];break}return l.iconUri&&(l.iconUri=l.iconUri.replace(this.app.site.id,c)),l},t.getUrlForCreatingServiceLayer=function(e){var t=e.serviceUrl;return e.serviceToken&&(t=p.RestHelperHTTPService.appendTokenToUrl(t,e.serviceToken)),t},t.createMapServiceFromJson=function(t,i){var r,g,y=this,u=$.Deferred(),h=s.ServiceHelper.extractConnectionStringValue,C=h(t.connectionString,"styleUrl"),v=i+"/map/mapservices/"+t.id,L=t.drawingBehavior;t.serviceType;if(L===o.DrawingBehavior.MAP_SERVICE){(g=new a.MapService(v)).essentialsMap=this.app.site.essentialsMap,g.createFromDefinition(t);switch(t.serviceType){case o.MapServiceType.WEBTILED:var m=h(t.connectionString,"subDomains"),f=[];m&&(f=m.split(","));var I={copyright:t.copyright,id:t.id,subDomains:f};g.subDomains=f,g._processConnectionString(t.connectionString,t),r=new esri.layers.WebTiledLayer(this.getUrlForCreatingServiceLayer(g),I),g.url=v;break;case o.MapServiceType.TILED:g._processConnectionString(t.connectionString,t),r=new esri.layers.ArcGISTiledMapServiceLayer(this.getUrlForCreatingServiceLayer(g)),this._applyAttributionUrl(t,r);break;case o.MapServiceType.DYNAMIC:g._processConnectionString(t.connectionString,t),r=new esri.layers.ArcGISDynamicMapServiceLayer(this.getUrlForCreatingServiceLayer(g)),this._applyAttributionUrl(t,r),g.layerVisibilityEventManager=new n.LayerVisibilityEventManager(g,r),null!=t.format&&r.setImageFormat(t.format.toLowerCase());break;case o.MapServiceType.IMAGE:g._processConnectionString(t.connectionString,t),r=new esri.layers.ArcGISImageServiceLayer(this.getUrlForCreatingServiceLayer(g)),this._applyAttributionUrl(t,r),r.setImageFormat(this._getAgsImageServiceImageFormat(t.imageFormat));break;case o.MapServiceType.VECTORTILE:e(["esri/layers/VectorTileLayer"],function(e){g._processConnectionString(t.connectionString,t);var a=y.getUrlForCreatingServiceLayer(g);if(C&&(a=C,y.app&&y.app.site)){var i=y.app.site.getTokenFromPrincipal(C,o.MapServiceType.VECTORTILE);i&&(a=p.RestHelperHTTPService.appendTokenToUrl(a,i))}g._layerSecurityProxy&&g._addCredentialForLayer(),r=new e(a)}),this._applyAttributionUrl(t,r);break;case o.MapServiceType.BING:var b,A={};(b=h(t.connectionString,"mapStyle"))&&b.length>0&&(A.mapStyle=b),(b=h(t.connectionString,"culture"))&&b.length>0&&(A.culture=b),(b=h(t.connectionString,"key"))&&b.length>0&&(A.bingMapsKey=b),r=new esri.virtualearth.VETiledLayer(A),g.bingProperties=A,g._processConnectionString(t.connectionString,t);break;case o.MapServiceType.WMS:this._extendWms();g._processConnectionString(t.connectionString,t),r=new esri.layers.WMSLayer(this.getUrlForCreatingServiceLayer(g),{resourceInfo:{extent:this.app.site.essentialsMap.initialExtent,layerInfos:[],version:t.serverVersion},visibleLayers:[]});var w=this.app.site.essentialsMap.spatialReference.wkid;102100==w&&(w=3857),r.spatialReferences.push(w),r.preferredSpatialReference=w,this._applyAttributionUrl(t,r),g.layerVisibilityEventManager=new n.LayerVisibilityEventManager(g,r);var S=null;null!=t.imageFormat&&(S="jpeg"==(S=t.imageFormat.replace(/^image\//,""))?"jpg":S),r.setImageFormat(S),r.show(),this._corsRequest(this.getUrlForCreatingServiceLayer(g)).then(function(){r.refresh()},function(e){r.refresh()});break;case o.MapServiceType.WMTS:g._processConnectionString(t.connectionString,t),this.addLayersToWMTSService(t.layers,g,i),g._createServiceLayer(),r=g.serviceLayer;break;default:u.reject()}}else L===o.DrawingBehavior.FEATURE_LAYER?((g=new l.FeatureLayerService(v)).createFromDefinition(t),g._configurePropertiesAndrenderer(t),g.essentialsMap=this.app.site.essentialsMap,g._processConnectionString(t.connectionString,t),r=new esri.layers.FeatureLayer(this.getUrlForCreatingServiceLayer(g)),this._applyAttributionUrl(t,r)):L===o.DrawingBehavior.WFS_LAYER?((g=new c.WFSLayerService(v)).createFromDefinition(t),g.essentialsMap=this.app.site.essentialsMap,g._processConnectionString(t.connectionString,t),this.addLayerToWFSOrStreamService(t.layers,g),g._restWFSConfigObject=t,g._createServiceLayer(),r=g.serviceLayer):L===o.DrawingBehavior.STREAM_LAYER&&((g=new d.StreamLayerService(v)).createFromDefinition(t),g.essentialsMap=this.app.site.essentialsMap,g._processConnectionString(t.connectionString,t),g._configureStreamSettings(t.streamSettings),g._createServiceLayer(),this.addLayerToWFSOrStreamService(t.layers,g),r=g.serviceLayer);this.app.site.getMap();var G=function(){g.serviceLayer=r,g.minScale&&g.serviceLayer.setMinScale(g.minScale),g.minScale&&g.serviceLayer.setMaxScale(g.maxScale),g.disableClientCaching&&g.serviceLayer&&g.serviceLayer.setDisableClientCaching&&g.serviceLayer.setDisableClientCaching(!0),g.isUserCreated=!0,g.userLayerType=o.UserLayerType.LAYER_CATALOG,g.includeInLayerList=!0,r.setOpacity(g.opacity);var e=t.properties.filter(function(e){return"layerCatalogLookupId"==e.name})[0].value.split(".")[0];g.id="{0}-{1}".format(e,t.id),g.serviceLayer.id=g.id};return r.loaded?(G(),u.resolve(g)):(r.on("load",function(e){G(),u.resolve(g)}),r.on("error",function(e){console.log("Error in initializing layer: {0}".format(e.error)),u.reject()})),u.promise()},t._corsRequest=function(t,a,i){var r=this;return new y.SimplePromise(function(s,o){try{e(["dojo/request"],function(e){i=!!i;return e(t,{headers:{"X-Requested-With":null},withCredentials:a=!!a}).response.then(function(e){return s()},function(e){return i?o(e):s(r._corsRequest(t,!a,!0))})})}catch(e){return console.log("Error in initializing WMS layer: "+e),o(e)}})},t._getAgsImageServiceImageFormat=function(e){if(void 0===e||null===e||e.length<1)return null;var t=e.toLowerCase();switch(t){case"jpgpng":case"png":case"png8":case"png24":case"png32":case"jpeg":case"jpg":case"gif":case"bmp":case"tiff":return t;default:return null}},t._extendWms=function(){if(!a.MapService._wmsExtended){var e=esri.layers.WMSLayer._meta.hidden.getImageUrl,t=/.*images\/pixel.png$/;esri.layers.WMSLayer.extend({getImageUrl:function(a,i,r,s){var o=this;e.apply(this,[a,i,r,function(e){if(t.test(e))s(e);else{for(var a={},i=0;i<o.layerInfos.length;i++)a[o.layerInfos[i].name]=o.layerInfos[i].styleName;var r=[];for(i=0;i<o.visibleLayers.length;i++)r.push(a[o.visibleLayers[i]]);var n=r.join(","),l=e.substring(e.lastIndexOf("?")+1,e.length),c=dojo.queryToObject(l);c.STYLES=n,o.preferredSpatialReference&&(c[c.CRS?"CRS":"SRS"]="EPSG:"+o.preferredSpatialReference),o.__gcxWmsImageFormat&&(c.FORMAT=o.__gcxWmsImageFormat);var d=e.substring(0,e.lastIndexOf("?")+1)+dojo.objectToQuery(c);s(d)}}])}}),a.MapService._wmsExtended=!0}},t._applyAttributionUrl=function(e,t){var a=e.attributionDataUrl,i=e.hasAttributionData;if(a&&""!==a)t.attributionDataUrl=a,t.hasAttributionData=!0;else if(i){t.attributionDataUrl=g.UrlUtilities.simplify(e.url)+"/attribution",t.hasAttributionData=!0;var r=p.RestHelperHTTPService.getTokenForScope(t.attributionDataUrl);r&&(t.attributionDataUrl=p.RestHelperHTTPService.appendTokenToUrl(t.attributionDataUrl,r))}},t}();t.MapUtilities=u})},"Mapping/modules/LayerCatalog/PagedLayerCatalogView":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","./BaseLayerCatalogView"],function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return e(a,t),a.prototype.handleKeyDown=function(e,t,a){var i=e.which?e.which:e.keyCode;if(this._isSpecialChar(i))return!0;if(13===i&&t.value){var r=this.viewModel.filterText.get();this.viewModel.filterCatalog(r),t.blur()}return!0},a.prototype.handleSearch=function(e,t,a){this.viewModel.filterCatalog(this.viewModel.filterText.get())},a.prototype.handleLayerClick=function(e,t,a){a&&a.isChecked.set(!a.isChecked.get())},a.prototype.handleFolderClick=function(e,t,a){if(this._ignoreHandleFolderClick)return this._ignoreHandleFolderClick=!1,!0;this.viewModel.presentableCatalog.attachToCollection(a.entries),this.viewModel.setBackText(this.viewModel.breadcrumb.get()),this.viewModel.setBreadcrumbText(a.displayName),this.viewModel.currentFolderName.set(a.displayName),this.viewModel.backDisabled.set(!1),this.app.command("FocusOnFirstInputInView").execute(this)},a.prototype.handleSelectAllChecked=function(e,t){if(this.viewModel.resultPage&&this.viewModel.resultPage.getLength()){return this.viewModel.resultPage.getAt(0).parent.toggleAllChildren(t.checked),!0}return!1},a.prototype.handleBackClick=function(e,t,a){if(this.viewModel.showingAll.get()){var i=this.viewModel.presentableCatalog.items.getAt(0).parent;if(i&&i.parent&&i.parent.entries){var r=i.parent;this.viewModel.presentableCatalog.attachToCollection(r.entries),this.viewModel.setBreadcrumbText(r.displayName),this.viewModel.currentFolderName.set(r.displayName),this.viewModel.backDisabled.set(!1),r.parent?this.viewModel.setBackText(r.parent.displayName):this.viewModel.setBackText(this.viewModel.homeText)}else this.viewModel.presentableCatalog.attachToCollection(this.viewModel.filteredCatalog),this.viewModel.setBreadcrumbText(null),this.viewModel.currentFolderName.set(this.viewModel.homeText),this.viewModel.backDisabled.set(!0),this.viewModel.setBackText(this.viewModel.homeText)}else this.viewModel.reset()},a.prototype.handleShowSelectedClick=function(e,t,a){this.viewModel.toggleShowSelection()},a.prototype.handleClear=function(e,t,a){this.viewModel.showingAll.get()&&this.viewModel.reset()},a.prototype.handleRefreshClick=function(){this.viewModel.refreshLayerCatalog()},a}(i.BaseLayerCatalogView);a.PagedLayerCatalogView=r})},"Mapping/modules/LayerCatalog/PagedLayerCatalogViewModel":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","./BaseLayerCatalogViewModel","geocortex/framework-ui/PresentableCollection","geocortex/framework/observables"],function(t,a,i,r,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=function(t){function a(e,a){var i=t.call(this,e,a)||this;return i.presentableCatalog=null,i.resultPage=null,i.breadcrumb=null,i.backText=null,i.backDisabled=null,i.homeText=null,i.currentFolderName=null,i.backString=null,i.allChecked=null,i.showGroupCheckbox=null,i.presentableCatalog=new r.PresentableCollection,i.presentableCatalog.attachToCollection(i.filteredCatalog),i.resultPage=i.presentableCatalog.items,i.presentableCatalog.isPaginated.set(!1),i.homeText=e.getResource(a,"language-layer-catalog-home-text"),i.presentableCatalog.pageSize.set(10),i.currentFolderName=new s.Observable(i.homeText),i.backString=new s.Observable(e.getResource(a,"language-layer-catalog-folder-up").format(i.currentFolderName.get())),i.breadcrumb=new s.Observable(i.homeText),i.backDisabled=new s.Observable(!0),i.backText=new s.Observable(i.homeText),i.allChecked=new s.Observable(!1),i.showGroupCheckbox=new s.Observable(!1),i.currentFolderName.bind(i,function(){i.backString.set(e.getResource(a,"language-layer-catalog-folder-up").format(i.currentFolderName.get()))}),i.backDisabled.bind(i,function(){i.resultPage&&i.resultPage.getLength()&&i.resultPage.getAt(0).parent?(i.allChecked.set(i.resultPage.getAt(0).parent.allChecked.get()),i.showGroupCheckbox.set(i.resultPage.getAt(0).parent.showGroupCheckbox.get()&&!i.backDisabled.get())):(i.allChecked.set(!1),i.showGroupCheckbox.set(!1))}),i.app.command("ReevaluateAllChecked").register(i,function(e){i.allChecked.set(e)}),i}return e(a,t),a.prototype.ready=function(){t.prototype.ready.call(this),this.catalogCached&&(this.reset(),this.syncAddedLayers())},a.prototype._clearFilter=function(){this.filterText.set("");for(var e=0;e<this.filteredCatalog.get().length;e++)this.filteredCatalog.getAt(e).filter(this.filterText.get())},a.prototype.filterCatalog=function(e){var t=this;if(e){var a=this.getFilterProvider();(a?a.filter(e,this.filteredCatalog):new Promise(function(a,i){for(var r=0;r<t.filteredCatalog.get().length;r++)t.filteredCatalog.getAt(r).filter(e);a()})).then(function(){for(var e=new Array,a=t._getFlattenedEntries(!0),i=0;i<a.length;i++)a[i].visible.get()&&e.push(a[i]);t.presentableCatalog.attachToCollection(new s.ObservableCollection(e))})}},a.prototype.reset=function(){this.backDisabled.set(!0),this.filterText.set(""),this._clearFilter(),this.presentableCatalog.attachToCollection(this.filteredCatalog),this.setBreadcrumbText(null),this.setBackText(this.homeText),this.showingAll.set(!0),this.showNoLayersSelectedText.set(!1),this.showSelectedButtonText.set(this.app.getResource(this.libraryId,"language-layer-catalog-show-selected-button")),this.allChecked.set(!1),this.showGroupCheckbox.set(!1),this.currentFolderName.set(this.homeText)},a.prototype.setBreadcrumbText=function(e){e?this.breadcrumb.set(e):this.breadcrumb.set(this.homeText)},a.prototype.setBackText=function(e){e&&(e.length>20&&(e="< "+(e=e.substring(0,20))+"..."),this.backText.set(e))},a.prototype.toggleShowSelection=function(){var e=this.getCheckedEntries();if(this.showingAll.get()){for(var t=0;t<e.length;t++)e[t].visible.set(!0);this.showSelectedButtonText.set(this.app.getResource(this.libraryId,"language-layer-catalog-show-all-button")),this.breadcrumb.set(this.app.getResource(this.libraryId,"language-layer-catalog-showing-selected-text")),this.backDisabled.set(!0),this.presentableCatalog.attachToCollection(new s.ObservableCollection(e)),0===e.length&&this.showNoLayersSelectedText.set(!0)}else this.showNoLayersSelectedText.set(!0),this.showSelectedButtonText.set(this.app.getResource(this.libraryId,"language-layer-catalog-show-selected-button")),this.breadcrumb.set(this.homeText),this.backDisabled.set(!0),this.presentableCatalog.attachToCollection(this.filteredCatalog),this.showNoLayersSelectedText.set(!1);this.setBackText(this.homeText),this.showingAll.set(!this.showingAll.get()),this.presentableCatalog.sortCollection()},a}(i.LayerCatalogViewModelBase);a.PagedLayerCatalogViewModel=o})},"Mapping/modules/LayerCatalog/WmsPropertyNames":function(){define(["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WMS_LAYER_NAME="wmsLayerName",t.WMS_SERVICE_URL="wmsServiceUrl",t.WMS_INSERT_POSITION="defaultInsertPosition"})},"url:/Mapping/modules/LayerCatalog/LayerCatalogView.html":t,"url:/Mapping/modules/LayerCatalog/PagedLayerCatalogView.html":a,"url:/Mapping/modules/LayerCatalog/Templates/FolderItemTemplate.html":i,"url:/Mapping/modules/LayerCatalog/Templates/LayerItemTemplate.html":r}}),require(["geocortex/framework/resourceManager"],function(e){e.resourceManager.register("Mapping","inv","Mapping/modules/LayerCatalog/CSS/large.css","css","LmxjLWZpbHRlciwNCi5sYy1zZWFyY2gsDQoubGMtc2hvdy1zZWxlY3RlZCwNCi5sYy1lbnRyaWVzIHVsIGxpLA0KLmNhbmNlbC1idXR0b24sDQouYm90dG9tLA0KLmxjLWFjdGlvbnMsDQoubGMtZmlsdGVyLA0KLmxheWVyLWNhdGFsb2ctaXRlbXMsDQoubGF5ZXItY2F0YWxvZy1pdGVtcyAqIHsNCiAgICAtd2Via2l0LWJveC1zaXppbmc6IGJvcmRlci1ib3g7DQoJLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KCWJveC1zaXppbmc6IGJvcmRlci1ib3g7DQp9DQoubGF5ZXItY2F0YWxvZyBhIHsNCiAgICBjb2xvcjogIzFCN0RCRjsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQoubGF5ZXItY2F0YWxvZyBhOmFjdGl2ZSB7DQogICAgY29sb3I6ICM5OTk5OTk7DQp9DQoubGF5ZXItY2F0YWxvZyBhOmZvY3VzIHsNCiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsNCn0NCi5sYXllci1jYXRhbG9nIGEuZGlzYWJsZWQ6Zm9jdXMgew0KICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsNCn0NCi5sYy1zdGF0dXMgew0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBoZWlnaHQ6IDI0cHg7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIGxlZnQ6IDA7DQp9DQoNCi8qIC0tLS0tLSBTVEFSVDogTGF5ZXIgQ2F0YWxvZyBTZWFyY2ggRmlsdGVyIC0tLS0tLSAqLw0KLmxjLWZpbHRlciB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIGNsZWFyOiBib3RoOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIHBhZGRpbmc6IDAuNzVlbSA5ZW0gMC43NWVtIDAuNzVlbTsNCiAgICBiYWNrZ3JvdW5kOiAjRjhGOEY4Ow0KICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjRDlEOUQ5Ow0KfQ0KLmxjLXNlYXJjaCB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIHBhZGRpbmctcmlnaHQ6IDQuNWVtOw0KICAgIGJhY2tncm91bmQ6ICNGRkZGRkY7DQogICAgYm9yZGVyOiAxcHggc29saWQgI0NDQ0NDQzsNCiAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDZweDsNCiAgICAtbW96LWJvcmRlci1yYWRpdXM6IDZweDsNCiAgICBib3JkZXItcmFkaXVzOiA2cHg7DQp9DQoubGNTZWFyY2hEaXNhYmxlIHsNCiAgICBvcGFjaXR5OiAwLjU7DQp9DQoubGMtc2VhcmNoIGlucHV0LnNlYXJjaC1maWVsZCwNCi5sYy1zZWFyY2ggLnNlYXJjaC1idXR0b24gew0KICAgIGJvcmRlcjogbm9uZTsNCiAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsNCiAgICBoZWlnaHQ6IDIuNWVtOw0KfQ0KLmxjLXNlYXJjaCAuc2VhcmNoLWJ1dHRvbiwgDQoubGMtc2hvdy1zZWxlY3RlZCB7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogMDsNCiAgICByaWdodDogMDsNCn0NCi5sYy1zZWFyY2ggLnNlYXJjaC1idXR0b24gew0KICAgIGJhY2tncm91bmQ6ICNFRUVFRUUgdXJsKCJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL3NlYXJjaC0xNi5wbmciKSBjZW50ZXIgY2VudGVyIG5vLXJlcGVhdDsNCiAgICB3aWR0aDogMi41ZW07DQogICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjQ0NDQ0NDOw0KICAgIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNnB4Ow0KICAgIC13ZWJraXQtYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMHB4Ow0KICAgIC13ZWJraXQtYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMHB4Ow0KICAgIC1tb3otYm9yZGVyLXJhZGl1czogNnB4Ow0KICAgIC1tb3otYm9yZGVyLXJhZGl1cy10b3BsZWZ0OiAwcHg7DQogICAgLW1vei1ib3JkZXItcmFkaXVzLWJvdHRvbWxlZnQ6IDBweDsNCiAgICBib3JkZXItcmFkaXVzOiA2cHg7DQogICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMHB4Ow0KICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDBweDsNCn0NCi5sYy1zaG93LXNlbGVjdGVkIHsNCiAgICB3aWR0aDogOWVtOw0KICAgIGxpbmUtaGVpZ2h0OiAyLjVlbTsNCiAgICBwYWRkaW5nOiAwLjc1ZW07DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KLmxjLXNlYXJjaCAuY2xlYXItYnV0dG9uIHsNCiAgICBiYWNrZ3JvdW5kOiB1cmwoIlJlc291cmNlcy9JbWFnZXMvSWNvbnMvZGVsZXRlLTE2LnBuZyIpIGNlbnRlciBjZW50ZXIgbm8tcmVwZWF0Ow0KICAgIHdpZHRoOiAyZW07DQogICAgaGVpZ2h0IDoyLjVlbTsNCiAgICBkaXNwbGF5OiBibG9jazsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgdG9wOiAwOw0KICAgIHJpZ2h0OiAyLjVlbTsNCn0NCi5zZWxlY3RlZC1pbmRpY2F0b3Igew0KICAgIGZvbnQtc2l6ZTowLjhlbTsNCiAgICBjb2xvcjogIzk5OTk5OTsNCiAgICBtYXJnaW4tbGVmdDogMC41ZW07DQp9DQovKiAtLS0tLS0gRU5EOiBMYXllciBDYXRhbG9nIFNlYXJjaCBGaWx0ZXIgLS0tLS0tICovDQoNCi8qIC0tLS0tLSBTVEFSVDogalF1ZXJ5IEF1dG9jb21wbGV0ZSBPdmVycmlkZXMgLS0tLS0tICovDQoudWktYXV0b2NvbXBsZXRlIC51aS1zdGF0ZS1mb2N1cyB7DQogICAgYm9yZGVyOiAxcHggc29saWQgI0Q5RDlEOTsNCiAgICBiYWNrZ3JvdW5kOiAjRjhGOEY4Ow0KICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7DQogICAgY29sb3I6ICMxQjdEQkY7DQp9DQovKiAtLS0tLS0gU1RBUlQ6IGpRdWVyeSBBdXRvY29tcGxldGUgT3ZlcnJpZGVzIC0tLS0tLSAqLw0KDQoubGF5ZXItY2F0YWxvZyB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIHdpZHRoOiAzMGVtOw0KICAgIGhlaWdodDogMzcuNWVtOw0KfQ0KQG1lZGlhIGFsbCBhbmQgKG1pbi13aWR0aDogMTAwMHB4KSB7DQogICAgLmxheWVyLWNhdGFsb2cgew0KICAgICAgICB3aWR0aDogNDBlbTsNCiAgICB9DQp9DQpAbWVkaWEgYWxsIGFuZCAobWluLXdpZHRoOiAxMjAwcHgpIHsNCiAgICAubGF5ZXItY2F0YWxvZyB7DQogICAgICAgIHdpZHRoOiA1MGVtOw0KICAgIH0NCn0NCi5sYy1maWx0ZXIgew0KICAgIGhlaWdodDogNGVtOw0KfQ0KLmxjLXN0YXR1cyB7DQogICAgdG9wOiA0MCU7DQp9DQoubGMtc2VhcmNoIGlucHV0LnNlYXJjaC1maWVsZCB7DQogICAgbWF4LXdpZHRoOiAxMDAlOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGZvbnQtc2l6ZTogMWVtOw0KfQ0KLmxjLWVudHJpZXMgew0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB0b3A6IDRlbTsNCiAgICByaWdodDogMDsNCiAgICBib3R0b206IDRlbTsNCiAgICBsZWZ0OiAwOw0KICAgIG92ZXJmbG93LXk6IGF1dG87DQp9DQoubGMtdHJlZSB7DQogICAgcGFkZGluZzogMDsNCiAgICBtYXJnaW46IDA7DQp9DQoubGMtYWN0aW9ucyB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIGJvdHRvbTogMDsNCiAgICBoZWlnaHQ6IDRlbTsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBwYWRkaW5nOiAwLjc1ZW07DQogICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNEOUQ5RDk7DQogICAgdGV4dC1hbGlnbjogcmlnaHQ7DQogICAgYmFja2dyb3VuZDogI0Y4RjhGODsNCn0NCi5sYy1hY3Rpb25zIGJ1dHRvbiB7DQogICAgd2lkdGg6IDdlbTsNCiAgICBtYXJnaW4tbGVmdDogMWVtOw0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCi5mb2xkZXItaXRlbSwNCi5jYXRhbG9nLWxheWVyLWl0ZW0sDQouY2F0YWxvZy1mb2xkZXItc2VsZWN0IHsNCiAgICBtYXJnaW46IDA7DQogICAgcGFkZGluZzogMDsNCiAgICBjbGVhcjogYm90aDsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQouY2F0YWxvZy1mb2xkZXItc2VsZWN0IHsNCiAgICBtYXJnaW4tbGVmdDogMC44MjVlbTsNCn0NCi5jYXRhbG9nLWZvbGRlci1zZWxlY3QgLmxheWVyLWl0ZW0tbmFtZSB7DQogICAgZm9udC1zdHlsZTogaXRhbGljOw0KICAgIGNvbG9yOiAjNjY2NjY2Ow0KfQ0KLmxheWVyLWNhdGFsb2ctaXRlbXMgew0KICAgIG1hcmdpbjogMDsNCiAgICBwYWRkaW5nOiAwOw0KfQ0KLmxheWVyLWNhdGFsb2ctaXRlbXMgLmxheWVyLWNhdGFsb2ctaXRlbXMgew0KICAgIG1hcmdpbi1sZWZ0OiAxLjc1ZW07DQp9DQoubGF5ZXItY2F0YWxvZy1pdGVtcyBsaSB7DQogICAgbGlzdC1zdHlsZTogbm9uZTsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQouY2F0YWxvZy1pdGVtLWJ1dHRvbiwNCi5jYXRhbG9nLWl0ZW0tbGFiZWwgew0KICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICBtaW4taGVpZ2h0OiAyZW07DQp9DQouY2F0YWxvZy1pdGVtLWJ1dHRvbjpob3ZlciwNCi5jYXRhbG9nLWl0ZW0tbGFiZWw6aG92ZXIgew0KICAgIGN1cnNvcjogcG9pbnRlcjsNCn0NCi5jYXRhbG9nLWl0ZW0tbGFiZWwgLmxheWVyLWl0ZW0gew0KICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICBwYWRkaW5nOiAwLjI1ZW0gMDsNCn0NCi5jYXRhbG9nLWl0ZW0tYnV0dG9uLA0KLmNhdGFsb2ctaXRlbS1sYWJlbCB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIHBhZGRpbmctbGVmdDogMmVtOw0KfQ0KLmZvbGRlci1pdGVtIC5mb2xkZXItaXRlbS1uYW1lIGlucHV0W3R5cGU9Y2hlY2tib3hdew0KICAgIG1hcmdpbi1yaWdodDowLjM1ZW07DQp9DQouY2F0YWxvZy1sYXllci1pdGVtIGlucHV0LA0KLmNhdGFsb2ctZm9sZGVyLXNlbGVjdCBpbnB1dCB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogMDsNCiAgICBsZWZ0OiAwOw0KICAgIG1hcmdpbjogMC41ZW07DQp9DQouY2F0YWxvZy1sYXllci1pdGVtIGEgew0KICAgIHBhZGRpbmctbGVmdDogMmVtOw0KfQ0KLmZvbGRlci1vcGVuIHsNCiAgICBiYWNrZ3JvdW5kOiB1cmwoIlJlc291cmNlcy9JbWFnZXMvSWNvbnMvdHJlZS1leHBhbmRlci1vcGVuLWxpZ2h0LTE2LnBuZyIpIGNlbnRlciBjZW50ZXIgbm8tcmVwZWF0ICFpbXBvcnRhbnQ7DQp9DQouY2F0YWxvZy1pdGVtLWNvbnRyb2wgew0KICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIHdpZHRoOiAyZW07DQogICAgaGVpZ2h0OiAyZW07DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogMDsNCiAgICBsZWZ0OiAwOw0KfQ0KLmV4cGFuZGVyLWJ1dHRvbiB7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgaGVpZ2h0OiAxMDAlOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGJhY2tncm91bmQ6IHVybCgiUmVzb3VyY2VzL0ltYWdlcy9JY29ucy90cmVlLWV4cGFuZGVyLWNsb3NlZC1saWdodC0xNi5wbmciKSBjZW50ZXIgY2VudGVyIG5vLXJlcGVhdDsNCn0NCi5sYy1kZXRhaWxzIHsNCiAgICBjb2xvcjogIzc3Nzc3NzsNCiAgICBmb250LXNpemU6IDAuOWVtOw0KICAgIG1hcmdpbi1sZWZ0OiAwLjVlbTsNCiAgICBjdXJzb3I6IHBvaW50ZXI7DQp9DQoubGMtZGV0YWlscyBpbWcgew0KICAgIG1heC1oZWlnaHQ6IDE2cHg7DQp9DQovKiAtLS0tLS0gU1RBUlQ6IGpRdWVyeSBBdXRvY29tcGxldGUgT3ZlcnJpZGVzIC0tLS0tLSAqLw0KLnVpLWF1dG9jb21wbGV0ZSB7DQogICAgbWF4LWhlaWdodDogMzBlbTsNCiAgICBvdmVyZmxvdy15OiBhdXRvOw0KfQ0KLnVpLWF1dG9jb21wbGV0ZS51aS1tZW51IC51aS1tZW51LWl0ZW0gYSB7DQogICAgcGFkZGluZzogMC41ZW0gMWVtIDAuNWVtIDAuNWVtOw0KfQ0KLyogLS0tLS0tIFNUQVJUOiBqUXVlcnkgQXV0b2NvbXBsZXRlIE92ZXJyaWRlcyAtLS0tLS0gKi8NCg0KLmxjLWxheWVycy10ZXh0IHsNCiAgICBwYWRkaW5nOiAxZW0gMGVtIDBlbSAxLjJlbTsNCiAgICBmb250LXdlaWdodDogYm9sZDsNCn0="),e.resourceManager.register("Mapping","inv","Mapping/modules/LayerCatalog/CSS/medium.css","css","LmxjLWZpbHRlciwNCi5sYy1zZWFyY2gsDQoubGMtc2hvdy1zZWxlY3RlZCwNCi5sYy1lbnRyaWVzIHVsIGxpLA0KLmNhbmNlbC1idXR0b24sDQouYm90dG9tLA0KLmxjLWFjdGlvbnMsDQoubGMtZmlsdGVyLA0KLmxheWVyLWNhdGFsb2ctaXRlbXMsDQoubGF5ZXItY2F0YWxvZy1pdGVtcyAqICB7DQogICAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KCS1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDsNCglib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KfQ0KLmxheWVyLWNhdGFsb2cgYSB7DQogICAgY29sb3I6ICMxQjdEQkY7DQogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOw0KfQ0KLmxheWVyLWNhdGFsb2cgYTphY3RpdmUgew0KICAgIGNvbG9yOiAjOTk5OTk5Ow0KfQ0KLmxheWVyLWNhdGFsb2cgYTpmb2N1cyB7DQogICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7DQp9DQoubGF5ZXItY2F0YWxvZyBhLmRpc2FibGVkOmZvY3VzIHsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQoubGMtc3RhdHVzIHsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgd2lkdGg6IDEwMCU7DQogICAgaGVpZ2h0OiAyNHB4Ow0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICBsZWZ0OiAwOw0KfQ0KDQovKiAtLS0tLS0gU1RBUlQ6IExheWVyIENhdGFsb2cgU2VhcmNoIEZpbHRlciAtLS0tLS0gKi8NCi5sYy1maWx0ZXIgew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICBjbGVhcjogYm90aDsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBwYWRkaW5nOiAwLjc1ZW0gOWVtIDAuNzVlbSAwLjc1ZW07DQogICAgYmFja2dyb3VuZDogI0Y4RjhGODsNCiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0Q5RDlEOTsNCn0NCi5sYy1zZWFyY2ggew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBwYWRkaW5nLXJpZ2h0OiA0LjVlbTsNCiAgICBiYWNrZ3JvdW5kOiAjRkZGRkZGOw0KICAgIGJvcmRlcjogMXB4IHNvbGlkICNDQ0NDQ0M7DQogICAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA2cHg7DQogICAgLW1vei1ib3JkZXItcmFkaXVzOiA2cHg7DQogICAgYm9yZGVyLXJhZGl1czogNnB4Ow0KfQ0KLmxjU2VhcmNoRGlzYWJsZSB7DQogICAgb3BhY2l0eTogMC41Ow0KfQ0KLmxjLXNlYXJjaCBpbnB1dC5zZWFyY2gtZmllbGQsDQoubGMtc2VhcmNoIC5zZWFyY2gtYnV0dG9uIHsNCiAgICBib3JkZXI6IG5vbmU7DQogICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7DQogICAgaGVpZ2h0OiAyLjVlbTsNCn0NCi5sYy1zZWFyY2ggLnNlYXJjaC1idXR0b24sIA0KLmxjLXNob3ctc2VsZWN0ZWQgew0KICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB0b3A6IDA7DQogICAgcmlnaHQ6IDA7DQp9DQoubGMtc2VhcmNoIC5zZWFyY2gtYnV0dG9uIHsNCiAgICBiYWNrZ3JvdW5kOiAjRUVFRUVFIHVybCgiUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9zZWFyY2gtMTYucG5nIikgY2VudGVyIGNlbnRlciBuby1yZXBlYXQ7DQogICAgd2lkdGg6IDIuNWVtOw0KICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgI0NDQ0NDQzsNCiAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDZweDsNCiAgICAtd2Via2l0LWJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDBweDsNCiAgICAtd2Via2l0LWJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDBweDsNCiAgICAtbW96LWJvcmRlci1yYWRpdXM6IDZweDsNCiAgICAtbW96LWJvcmRlci1yYWRpdXMtdG9wbGVmdDogMHB4Ow0KICAgIC1tb3otYm9yZGVyLXJhZGl1cy1ib3R0b21sZWZ0OiAwcHg7DQogICAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDBweDsNCiAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAwcHg7DQp9DQoubGMtc2hvdy1zZWxlY3RlZCB7DQogICAgd2lkdGg6IDllbTsNCiAgICBsaW5lLWhlaWdodDogMi41ZW07DQogICAgcGFkZGluZzogMC43NWVtOw0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCi5sYy1zZWFyY2ggLmNsZWFyLWJ1dHRvbiB7DQogICAgYmFja2dyb3VuZDogdXJsKCJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL2RlbGV0ZS0xNi5wbmciKSBjZW50ZXIgY2VudGVyIG5vLXJlcGVhdDsNCiAgICB3aWR0aDogMmVtOw0KICAgIGhlaWdodCA6Mi41ZW07DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogMDsNCiAgICByaWdodDogMi41ZW07DQp9DQouc2VsZWN0ZWQtaW5kaWNhdG9yIHsNCiAgICBmb250LXNpemU6MC44ZW07DQogICAgY29sb3I6ICM5OTk5OTk7DQogICAgbWFyZ2luLWxlZnQ6IDAuNWVtOw0KfQ0KLyogLS0tLS0tIEVORDogTGF5ZXIgQ2F0YWxvZyBTZWFyY2ggRmlsdGVyIC0tLS0tLSAqLw0KDQovKiAtLS0tLS0gU1RBUlQ6IGpRdWVyeSBBdXRvY29tcGxldGUgT3ZlcnJpZGVzIC0tLS0tLSAqLw0KLnVpLWF1dG9jb21wbGV0ZSAudWktc3RhdGUtZm9jdXMgew0KICAgIGJvcmRlcjogMXB4IHNvbGlkICNEOUQ5RDk7DQogICAgYmFja2dyb3VuZDogI0Y4RjhGODsNCiAgICBmb250LXdlaWdodDogbm9ybWFsOw0KICAgIGNvbG9yOiAjMUI3REJGOw0KfQ0KLyogLS0tLS0tIFNUQVJUOiBqUXVlcnkgQXV0b2NvbXBsZXRlIE92ZXJyaWRlcyAtLS0tLS0gKi8NCg0KLmxheWVyLWNhdGFsb2cgew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICB3aWR0aDogMzBlbTsNCiAgICBoZWlnaHQ6IDM3LjVlbTsNCn0NCkBtZWRpYSBhbGwgYW5kIChtaW4td2lkdGg6IDEwMDBweCkgew0KICAgIC5sYXllci1jYXRhbG9nIHsNCiAgICAgICAgd2lkdGg6IDQwZW07DQogICAgfQ0KfQ0KQG1lZGlhIGFsbCBhbmQgKG1pbi13aWR0aDogMTIwMHB4KSB7DQogICAgLmxheWVyLWNhdGFsb2cgew0KICAgICAgICB3aWR0aDogNTBlbTsNCiAgICB9DQp9DQoubGMtZmlsdGVyIHsNCiAgICBoZWlnaHQ6IDRlbTsNCn0NCi5sYy1zdGF0dXMgew0KICAgIHRvcDogNDAlOw0KfQ0KLmxjLXNlYXJjaCBpbnB1dC5zZWFyY2gtZmllbGQgew0KICAgIG1heC13aWR0aDogMTAwJTsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBmb250LXNpemU6IDFlbTsNCn0NCi5sYy1lbnRyaWVzIHsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgdG9wOiA0ZW07DQogICAgcmlnaHQ6IDA7DQogICAgYm90dG9tOiA0ZW07DQogICAgbGVmdDogMDsNCiAgICBvdmVyZmxvdy15OiBhdXRvOw0KfQ0KLmxjLXRyZWUgew0KICAgIHBhZGRpbmc6IDA7DQogICAgbWFyZ2luOiAwOw0KfQ0KLmxjLWFjdGlvbnMgew0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICBib3R0b206IDA7DQogICAgaGVpZ2h0OiA0ZW07DQogICAgd2lkdGg6IDEwMCU7DQogICAgcGFkZGluZzogMC43NWVtOw0KICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjRDlEOUQ5Ow0KICAgIHRleHQtYWxpZ246IHJpZ2h0Ow0KICAgIGJhY2tncm91bmQ6ICNGOEY4Rjg7DQp9DQoubGMtYWN0aW9ucyBidXR0b24gew0KICAgIHdpZHRoOiA3ZW07DQogICAgbWFyZ2luLWxlZnQ6IDFlbTsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQouZm9sZGVyLWl0ZW0sDQouY2F0YWxvZy1sYXllci1pdGVtLA0KLmNhdGFsb2ctZm9sZGVyLXNlbGVjdCB7DQogICAgbWFyZ2luOiAwOw0KICAgIHBhZGRpbmc6IDA7DQogICAgY2xlYXI6IGJvdGg7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KLmNhdGFsb2ctZm9sZGVyLXNlbGVjdCB7DQogICAgbWFyZ2luLWxlZnQ6IDAuODI1ZW07DQp9DQouY2F0YWxvZy1mb2xkZXItc2VsZWN0IC5sYXllci1pdGVtLW5hbWUgew0KICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsNCiAgICBjb2xvcjogIzY2NjY2NjsNCn0NCi5sYXllci1jYXRhbG9nLWl0ZW1zIHsNCiAgICBtYXJnaW46IDA7DQogICAgcGFkZGluZzogMDsNCn0NCi5sYXllci1jYXRhbG9nLWl0ZW1zIC5sYXllci1jYXRhbG9nLWl0ZW1zIHsNCiAgICBtYXJnaW4tbGVmdDogMS43NWVtOw0KfQ0KLmxheWVyLWNhdGFsb2ctaXRlbXMgbGkgew0KICAgIGxpc3Qtc3R5bGU6IG5vbmU7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KLmNhdGFsb2ctaXRlbS1idXR0b24sDQouY2F0YWxvZy1pdGVtLWxhYmVsIHsNCiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgbWluLWhlaWdodDogM2VtOw0KfQ0KLmNhdGFsb2ctaXRlbS1idXR0b246aG92ZXIsDQouY2F0YWxvZy1pdGVtLWxhYmVsOmhvdmVyIHsNCiAgICBjdXJzb3I6IHBvaW50ZXI7DQp9DQouY2F0YWxvZy1pdGVtLWxhYmVsIC5sYXllci1pdGVtIHsNCiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgcGFkZGluZzogMC41ZW0gMDsNCn0NCi5jYXRhbG9nLWl0ZW0tYnV0dG9uLA0KLmNhdGFsb2ctaXRlbS1sYWJlbCB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIHBhZGRpbmctbGVmdDogM2VtOw0KfQ0KLmZvbGRlci1pdGVtIC5mb2xkZXItaXRlbS1uYW1lIGlucHV0W3R5cGU9Y2hlY2tib3hdew0KICAgIG1hcmdpbi1yaWdodDowLjM1ZW07DQp9DQouY2F0YWxvZy1sYXllci1pdGVtIGlucHV0LA0KLmNhdGFsb2ctZm9sZGVyLXNlbGVjdCBpbnB1dCB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogMDsNCiAgICBsZWZ0OiAwOw0KICAgIG1hcmdpbjogMC41ZW07DQp9DQouY2F0YWxvZy1sYXllci1pdGVtIGEgew0KICAgIHBhZGRpbmctbGVmdDogM2VtOw0KfQ0KLmZvbGRlci1vcGVuIHsNCiAgICBiYWNrZ3JvdW5kOiB1cmwoIlJlc291cmNlcy9JbWFnZXMvaWNvbnMvbWludXMtMjQucG5nIikgY2VudGVyIGNlbnRlciBuby1yZXBlYXQgIWltcG9ydGFudDsNCn0NCi5jYXRhbG9nLWl0ZW0tY29udHJvbCB7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgd2lkdGg6IDNlbTsNCiAgICBoZWlnaHQ6IDNlbTsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgdG9wOiAwOw0KICAgIGxlZnQ6IDA7DQogICAgcG9pbnRlci1ldmVudHM6IG5vbmU7DQp9DQouZXhwYW5kZXItYnV0dG9uIHsNCiAgICBkaXNwbGF5OiBibG9jazsNCiAgICBoZWlnaHQ6IDEwMCU7DQogICAgd2lkdGg6IDEwMCU7DQogICAgYmFja2dyb3VuZDogdXJsKCJSZXNvdXJjZXMvSW1hZ2VzL2ljb25zL2FkZC0yNC5wbmciKSBjZW50ZXIgY2VudGVyIG5vLXJlcGVhdDsNCn0NCi5sYy1kZXRhaWxzIHsNCiAgICBjb2xvcjogIzc3Nzc3NzsNCiAgICBmb250LXNpemU6IDAuOWVtOw0KICAgIG1hcmdpbi1sZWZ0OiAwLjVlbTsNCiAgICBjdXJzb3I6IHBvaW50ZXI7DQp9DQoubGMtZGV0YWlscyBpbWcgew0KICAgIG1heC1oZWlnaHQ6IDE2cHg7DQp9DQovKiAtLS0tLS0gU1RBUlQ6IGpRdWVyeSBBdXRvY29tcGxldGUgT3ZlcnJpZGVzIC0tLS0tLSAqLw0KLnVpLWF1dG9jb21wbGV0ZSB7DQogICAgbWF4LWhlaWdodDogMzBlbTsNCiAgICBvdmVyZmxvdy15OiBhdXRvOw0KfQ0KLnVpLWF1dG9jb21wbGV0ZS51aS1tZW51IC51aS1tZW51LWl0ZW0gYSB7DQogICAgcGFkZGluZzogMC41ZW0gMWVtIDAuNWVtIDAuNWVtOw0KfQ0KLyogLS0tLS0tIFNUQVJUOiBqUXVlcnkgQXV0b2NvbXBsZXRlIE92ZXJyaWRlcyAtLS0tLS0gKi8NCg0KLmxjLWxheWVycy10ZXh0IHsNCiAgICBwYWRkaW5nOiAxZW0gMGVtIDBlbSAxLjJlbTsNCiAgICBmb250LXdlaWdodDogYm9sZDsNCn0="),e.resourceManager.register("Mapping","inv","Mapping/modules/LayerCatalog/CSS/small.css","css","LmxjLWZpbHRlciwNCi5sYy1zZWFyY2gsDQoubGMtc2hvdy1zZWxlY3RlZCwNCi5sYy1lbnRyaWVzIHVsIGxpLA0KLmNhbmNlbC1idXR0b24sDQouYm90dG9tLA0KLmxjLWFjdGlvbnMsDQoubGMtZmlsdGVyICB7DQogICAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KCS1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDsNCglib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KfQ0KLmxjLXN0YXR1cyB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGhlaWdodDogMjRweDsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgbGVmdDogMDsNCn0NCg0KLyogLS0tLS0tIFNUQVJUOiBMYXllciBDYXRhbG9nIFNlYXJjaCBGaWx0ZXIgLS0tLS0tICovDQoubGMtZmlsdGVyIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgY2xlYXI6IGJvdGg7DQogICAgd2lkdGg6IDEwMCU7DQogICAgcGFkZGluZzogMC43NWVtIDllbSAwLjc1ZW0gMC43NWVtOw0KICAgIGJhY2tncm91bmQ6ICNGOEY4Rjg7DQogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNEOUQ5RDk7DQp9DQoubGMtc2VhcmNoIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgd2lkdGg6IDEwMCU7DQogICAgcGFkZGluZy1yaWdodDogN2VtOw0KICAgIGJhY2tncm91bmQ6ICNGRkZGRkY7DQogICAgYm9yZGVyOiAxcHggc29saWQgI0NDQ0NDQzsNCiAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtOw0KfQ0KLmxjU2VhcmNoRGlzYWJsZSB7DQogICAgb3BhY2l0eTogMC41Ow0KfQ0KLmxjLXNlYXJjaCBpbnB1dC5zZWFyY2gtZmllbGQsDQoubGMtc2VhcmNoIC5zZWFyY2gtYnV0dG9uIHsNCiAgICBib3JkZXI6IG5vbmU7DQogICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7DQogICAgaGVpZ2h0OiAyLjVlbTsNCn0NCi5sYy1zZWFyY2ggLnNlYXJjaC1idXR0b24sIA0KLmxjLXNob3ctc2VsZWN0ZWQgew0KICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB0b3A6IDA7DQogICAgcmlnaHQ6IDA7DQp9DQoubGF5ZXItY2F0YWxvZyAubGMtc2VhcmNoIC5zZWFyY2gtYnV0dG9uIHsNCiAgICBiYWNrZ3JvdW5kOiAjRUVFRUVFIHVybCgiUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9zZWFyY2gtMTYucG5nIikgY2VudGVyIGNlbnRlciBuby1yZXBlYXQ7DQogICAgd2lkdGg6IDMuNWVtOw0KICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgI0NDQ0NDQzsNCiAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtOw0KICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDA7DQogICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMDsNCn0NCi5sYy1zaG93LXNlbGVjdGVkIHsNCiAgICB3aWR0aDogOWVtOw0KICAgIGxpbmUtaGVpZ2h0OiAyLjVlbTsNCiAgICBwYWRkaW5nOiAwLjc1ZW07DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KLmxjLXNlYXJjaCAuY2xlYXItYnV0dG9uIHsNCiAgICBiYWNrZ3JvdW5kOiB1cmwoIlJlc291cmNlcy9JbWFnZXMvSWNvbnMvZGVsZXRlLTE2LnBuZyIpIGNlbnRlciBjZW50ZXIgbm8tcmVwZWF0Ow0KICAgIHdpZHRoOiAzLjVlbTsNCiAgICBoZWlnaHQ6IDIuNWVtOw0KICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB0b3A6IDA7DQogICAgcmlnaHQ6IDMuNWVtOw0KfQ0KLnNlbGVjdGVkLWluZGljYXRvciB7DQogICAgZm9udC1zaXplOjAuOGVtOw0KICAgIGNvbG9yOiAjOTk5OTk5Ow0KICAgIG1hcmdpbi1sZWZ0OiAwLjVlbTsNCn0NCi8qIC0tLS0tLSBFTkQ6IExheWVyIENhdGFsb2cgU2VhcmNoIEZpbHRlciAtLS0tLS0gKi8NCg0KLyogLS0tLS0tIFNUQVJUOiBqUXVlcnkgQXV0b2NvbXBsZXRlIE92ZXJyaWRlcyAtLS0tLS0gKi8NCi51aS1hdXRvY29tcGxldGUgLnVpLXN0YXRlLWZvY3VzIHsNCiAgICBib3JkZXI6IDFweCBzb2xpZCAjRDlEOUQ5Ow0KICAgIGJhY2tncm91bmQ6ICNGOEY4Rjg7DQogICAgZm9udC13ZWlnaHQ6IG5vcm1hbDsNCiAgICBjb2xvcjogIzFCN0RCRjsNCn0NCi8qIC0tLS0tLSBTVEFSVDogalF1ZXJ5IEF1dG9jb21wbGV0ZSBPdmVycmlkZXMgLS0tLS0tICovDQoNCi5sYXllci1jYXRhbG9nIHsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgd2lkdGg6IDEwMCU7DQogICAgbWluLWhlaWdodDogMTAwJTsNCn0NCi5sYy1yaWdodCB7DQogICAgZmxvYXQ6IHJpZ2h0Ow0KfQ0KLmxjLWxlZnQgew0KICAgIGZsb2F0OiBsZWZ0Ow0KfQ0KLmJvdHRvbSB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIGJvdHRvbTogMDsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBwYWRkaW5nOiAwLjc1ZW07DQp9DQoubGF5ZXItY2F0YWxvZyAuY2FuY2VsLWJ1dHRvbiB7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIGJvcmRlcjogMXB4IHNvbGlkICNDQTMyMzE7DQogICAgY29sb3I6ICNDQTMyMzE7DQogICAgd2lkdGg6IDEwMCU7DQogICAgcGFkZGluZzogMC41ZW07DQogICAgYm9yZGVyLXJhZGl1czogMC4yNXJlbTsNCn0NCi5sYy1zdGF0dXMgew0KICAgIHRvcDogNTAlOw0KfQ0KLmxheWVyLWNhdGFsb2cgLmNhbmNlbC1idXR0b246Zm9jdXMsDQoubGF5ZXItY2F0YWxvZyAuY2FuY2VsLWJ1dHRvbjpob3ZlciB7DQogICAgYmFja2dyb3VuZDogI0NBMzIzMTsNCiAgICBjb2xvcjogI0ZGRkZGRjsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQouc2hvd05vbmUgew0KICAgIGRpc3BsYXk6IG5vbmU7DQp9DQovKiAtLS0tLS0gU1RBUlQ6IEhlYWRlciAtLS0tLS0gKi8NCi5sYXllci1jYXRhbG9nIC5wYW5lbC1oZWFkZXIgaDIgew0KICAgIG1hcmdpbjogMCA0LjVlbTsNCn0NCi5sYXllci1jYXRhbG9nIC5wYW5lbC1oZWFkZXIgLmJ1dHRvbi10ZXh0LWxpbmsgew0KICAgIHBhZGRpbmc6IDAgMC41ZW07DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgd2lkdGg6IDQuNWVtOw0KICAgIGhlaWdodDogMTAwJTsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOw0KICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7DQp9DQoubGMtbGVmdCB7DQogICAgdGV4dC1hbGlnbjogbGVmdDsNCn0NCi5sYy1yaWdodCB7DQogICAgdGV4dC1hbGlnbjogcmlnaHQ7DQp9DQovKiAtLS0tLS0gRU5EOiBIZWFkZXIgLS0tLS0tICovDQoNCi8qIC0tLS0tLSBTVEFSVDogTGF5ZXIgQ2F0YWxvZyBFbnRyaWVzIC0tLS0tLSAqLw0KLmxjLWVudHJpZXMgew0KICAgIHBhZGRpbmctYm90dG9tOiA0ZW07DQp9DQoubGMtZW50cmllcyB1bCwNCi5sYy1lbnRyaXMgdWwgbGkgew0KICAgIGxpc3Qtc3R5bGU6IG5vbmU7DQogICAgcGFkZGluZzogMDsNCiAgICBtYXJnaW46IDA7DQp9DQouY2F0YWxvZy1pdGVtLWJ1dHRvbiwNCi5sYXllci1pdGVtLWxhYmVsIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgbWluLWhlaWdodDogNGVtOw0KICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjRDlEOUQ5Ow0KICAgIHBhZGRpbmc6IDEuMjVlbSAyZW0gMS4yNWVtIDNlbTsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBkaXNwbGF5OiBibG9jazsNCiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KfQ0KLmxheWVyLWl0ZW0gew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCn0NCi5zZWxlY3RlZC1zdGF0ZSB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogMGVtOw0KICAgIGxlZnQ6IDA7DQogICAgd2lkdGg6IDNlbTsNCiAgICBoZWlnaHQ6IDRlbTsNCiAgICBib3JkZXI6IG5vbmU7DQp9DQppbnB1dFt0eXBlPSJjaGVja2JveCJdLnNlbGVjdGVkLXN0YXRlIHsNCiAgICBtYXJnaW46IDFlbSAwLjVlbTsNCn0NCi5zZWxlY3RlZC1zdGF0ZS1jaGVja2JveCB7DQogICAgdG9wOjFlbTsNCiAgICBsZWZ0OjAuNWVtOw0KfQ0KLnNlbGVjdGVkLXN0YXRlLWZvbGRlcnsNCiAgICBiYWNrZ3JvdW5kOiB1cmwoUmVzb3VyY2VzL0ltYWdlcy9pY29ucy9zZWxlY3RlZC1ub25lLTI0LnBuZykgY2VudGVyIGNlbnRlciBuby1yZXBlYXQ7DQp9DQoubGMtaXRlbS1sYWJlbCB7DQogICAgcG9pbnRlci1ldmVudHM6IG5vbmU7DQp9DQoubGF5ZXItY2F0YWxvZyBhOmZvY3VzLmxjLWl0ZW0tbGFiZWwsDQoubGF5ZXItY2F0YWxvZyBhOmFjdGl2ZS5sYy1pdGVtLWxhYmVsIHsNCiAgICBjb2xvcjogIzFCN0RCRjsNCn0NCi5sYy1kZXRhaWxzIHsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgdG9wOiAwOw0KICAgIHJpZ2h0OiAwOw0KICAgIHdpZHRoOiAyZW07DQogICAgaGVpZ2h0OiAxMDAlOw0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICBjdXJzb3I6IHBvaW50ZXI7DQp9DQoubGMtZGV0YWlscyBpbWcgew0KICAgIG1heC1oZWlnaHQ6IDE2cHg7DQp9DQouZm9sZGVyLWl0ZW0uY2hldnJvbi1yaWdodC0yNCB7DQogICAgYmFja2dyb3VuZC1wb3NpdGlvbjogcmlnaHQgY2VudGVyOw0KICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7DQp9DQouZm9sZGVyU29tZVNlbGVjdGVkIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRTlGNkZGOw0KfQ0KLmZvbGRlckFsbFNlbGVjdGVkLA0KLmxheWVyU2VsZWN0ZWQgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNBQ0NERTQ7DQp9DQouZm9sZGVyU29tZVNlbGVjdGVkSW1hZ2Ugew0KICAgIGJhY2tncm91bmQ6IHVybChSZXNvdXJjZXMvSW1hZ2VzL2ljb25zL3NlbGVjdGVkLXBhcnRpYWwtMjQucG5nKSBjZW50ZXIgY2VudGVyIG5vLXJlcGVhdCAhaW1wb3J0YW50Ow0KfQ0KLmZvbGRlckFsbFNlbGVjdGVkSW1hZ2Ugew0KICAgIGJhY2tncm91bmQ6IHVybChSZXNvdXJjZXMvSW1hZ2VzL2ljb25zL3NlbGVjdGVkLWFsbC0yNC5wbmcpIGNlbnRlciBjZW50ZXIgbm8tcmVwZWF0ICFpbXBvcnRhbnQ7DQp9DQouY2F0YWxvZy1mb2xkZXItc2VsZWN0IHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjREVGMkZGOw0KfQ0KLmNhdGFsb2ctZm9sZGVyLXNlbGVjdCAubGF5ZXItaXRlbS1sYWJlbCB7DQogICAgZm9udC1zdHlsZTogaXRhbGljOw0KICAgIGNvbG9yOiAjNjY2NjY2Ow0KfQ0KLyogLS0tLS0tIEVORDogTGF5ZXIgQ2F0YWxvZyBFbnRyaWVzIC0tLS0tLSAqLw0KDQoudWktbWVudQ0Kew0KICAgIHBhZGRpbmc6IDJweDsNCiAgICBtYXJnaW4tdG9wOiAzcHg7DQogICAgbWFyZ2luLWJvdHRvbTogM3B4Ow0KICAgIGxpc3Qtc3R5bGU6IG5vbmU7DQp9DQoNCi51aS1tZW51IC51aS1tZW51LWl0ZW0gYSANCnsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgcGFkZGluZzogMnB4IC40ZW07DQogICAgbGluZS1oZWlnaHQ6IDEuNTsNCiAgICB6b29tOiAxOw0KICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7DQp9DQoNCi51aS1oZWxwZXItaGlkZGVuLWFjY2Vzc2libGUNCnsNCiAgICBib3JkZXI6IDA7DQogICAgY2xpcDogcmVjdCgwIDAgMCAwKTsNCiAgICBoZWlnaHQ6IDFweDsNCiAgICBtYXJnaW46IC0xcHg7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICBwYWRkaW5nOiAwOw0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB3aWR0aDogMXB4Ow0KfQ0KDQoNCi8qIC0tLS0tLSBTVEFSVDogalF1ZXJ5IEF1dG9jb21wbGV0ZSBPdmVycmlkZXMgLS0tLS0tICovDQoudWktYXV0b2NvbXBsZXRlIHsNCiAgICBtYXgtaGVpZ2h0OiA2NSU7DQogICAgd2lkdGg6IDkwJTsNCiAgICBvdmVyZmxvdy15OiBhdXRvOw0KfQ0KLnVpLWF1dG9jb21wbGV0ZS51aS1tZW51IC51aS1tZW51LWl0ZW0gYSB7DQogICAgcGFkZGluZzogMC41ZW0gMWVtIDAuNWVtIDAuNWVtOw0KfQ0KLyogLS0tLS0tIFNUQVJUOiBqUXVlcnkgQXV0b2NvbXBsZXRlIE92ZXJyaWRlcyAtLS0tLS0gKi8NCg0KLmxjLWxheWVycy10ZXh0IHsNCiAgICBwYWRkaW5nOiAxZW0gMGVtIDBlbSAxLjJlbTsNCiAgICBmb250LXdlaWdodDogYm9sZDsNCn0="),e.resourceManager.register("Mapping","inv","Mapping/modules/LayerCatalog/LayerCatalogView.html","html",t),e.resourceManager.register("Mapping","inv","Mapping/modules/LayerCatalog/PagedLayerCatalogView.html","html",a),e.resourceManager.register("Mapping","inv","Mapping/modules/LayerCatalog/Templates/FolderItemTemplate.html","html",i),e.resourceManager.register("Mapping","inv","Mapping/modules/LayerCatalog/Templates/LayerItemTemplate.html","html",r)}),require({cache:{}}),define(["Mapping/modules/LayerCatalog/AssemblyProvider","Mapping/modules/LayerCatalog/BaseLayerCatalogView","Mapping/modules/LayerCatalog/BaseLayerCatalogViewModel","Mapping/modules/LayerCatalog/BaseProvider","Mapping/modules/LayerCatalog/CatalogEntryType","Mapping/modules/LayerCatalog/CatalogEntryViewModel","Mapping/modules/LayerCatalog/DeferredUtils","Mapping/modules/LayerCatalog/Dictionary","Mapping/modules/LayerCatalog/EssentialsSiteProvider","Mapping/modules/LayerCatalog/LayerCatalogConstructor","Mapping/modules/LayerCatalog/LayerCatalogModule","Mapping/modules/LayerCatalog/LayerCatalogView","Mapping/modules/LayerCatalog/LayerCatalogViewModel","Mapping/modules/LayerCatalog/MapUtilities","Mapping/modules/LayerCatalog/PagedLayerCatalogView","Mapping/modules/LayerCatalog/PagedLayerCatalogViewModel","Mapping/modules/LayerCatalog/WmsPropertyNames"],function(t,a,i,r,s,o,n,l,c,d,g,p,y,u,h,C,v){e(t,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.AssemblyProvider",t.AssemblyProvider),e(a,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.BaseLayerCatalogView",a.BaseLayerCatalogView),e(i,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.LayerCatalogViewModelBase",i.LayerCatalogViewModelBase),e(i,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.CheckboxVisibility",i.CheckboxVisibility),e(r,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.BaseProvider",r.BaseProvider),e(s,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.CatalogEntryType.FOLDER",s.FOLDER),e(s,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.CatalogEntryType.LAYER",s.LAYER),e(o,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.CatalogEntryViewModel",o.CatalogEntryViewModel),e(n,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.Deferred",n.Deferred),e(l,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.Dictionary",l.Dictionary),e(c,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.EssentialsSiteProvider",c.EssentialsSiteProvider),e(d,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.LayerCatalogConstructor",d.LayerCatalogConstructor),e(d,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.LayerCatalogRoot",d.LayerCatalogRoot),e(d,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.LayerCatalogEntry",d.LayerCatalogEntry),e(g,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.LayerCatalogModule",g.LayerCatalogModule),e(p,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.LayerCatalogView",p.LayerCatalogView),e(y,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.LayerCatalogViewModel",y.LayerCatalogViewModel),e(u,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.MapUtilities",u.MapUtilities),e(h,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.PagedLayerCatalogView",h.PagedLayerCatalogView),e(C,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.PagedLayerCatalogViewModel",C.PagedLayerCatalogViewModel),e(v,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.WmsPropertyNames.WMS_LAYER_NAME",v.WMS_LAYER_NAME),e(v,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.WmsPropertyNames.WMS_SERVICE_URL",v.WMS_SERVICE_URL),e(v,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.WmsPropertyNames.WMS_INSERT_POSITION",v.WMS_INSERT_POSITION)})}();