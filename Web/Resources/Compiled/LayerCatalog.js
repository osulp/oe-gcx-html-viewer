!function(){var t="<div class='layer-catalog'>    <div class='lc-filter'>        <div class='lc-search' data-binding='{@noclass-lcSearchDisable: showingAll}'>            <input class='search-field' type='text' id='lc-filter-input' data-binding='{@value: filterText}{@event-keydown: handleKeyDown}{placeholder: @language-layer-catalog-search-placeholder}{@enabled: showingAll}{aria-label: @language-layer-catalog-view-label}' />            <button class='clear-button' data-binding='{@event-onclick: handleClear}{title: @language-layer-catalog-clear-filter}'></button>            <button class='search-button' data-binding='{@event-onclick: handleSearch}{@enabled: showingAll}{title: @language-layer-catalog-search-button}'></button>        </div>        <button class='lc-show-selected button-text-link' data-binding='{@event-onclick: handleShowSelectedClick}{@text: showSelectedButtonText}'></button>    </div>    <div class='lc-content'>        <div class='lc-status lc-loader' data-binding='{@visible: isBusy}'>            <img src='Resources/Images/loader-small.gif' alt='Loading' width='24' height='24' />        </div>        <div class='lc-entries' data-binding='{@hidden: isBusy}'>            <div class='lc-layers-text' data-binding='{@visible: showLayerMessageText}'>                <span data-binding='{@text: @language-layer-catalog-not-finished}{@visible: showNotFinishedText}'></span>                <span data-binding='{@text: @language-layer-catalog-more-layers}{@visible: showMoreLayersText}'></span>                <a href='' data-binding='{@text: @language-layer-catalog-refresh}{@visible: showMoreLayersText}{@event-onclick: handleRefreshClick}'></a>            </div>            <span data-binding='{@text: @language-layer-catalog-no-layers-selected}{@visible: showNoLayersSelectedText}'></span>            <ul class='layer-catalog-items' role='tree' data-binding='{@source: filteredCatalog}{@template-selector: type}'>                <li class='lc-tree' role='treeitem' data-binding='{@template-select: folder}{@template: Mapping/modules/LayerCatalog/Templates/FolderItemTemplate.html}'></li>                <li class='lc-tree' role='treeitem' data-binding='{@template-select: layer}{@template: Mapping/modules/LayerCatalog/Templates/LayerItemTemplate.html}'></li>            </ul>        </div>        <div class='lc-actions'>            <button class='button' data-binding='{@event-onclick: handleClickOk}{@text: @language-layer-catalog-ok-button}'></button>            <button class='button' data-binding='{@event-onclick: handleClickCancel}{@text: @language-layer-catalog-cancel-button}'></button>        </div>    </div></div>",a="<div class='layer-catalog'>    \x3c!-- Header --\x3e    <div class='lc-header'>        <div class='middle panel-header'>            <button class='lc-left button-text-link' data-binding='{@event-onclick: handleBackClick}{@class-disabled: backDisabled}'>                \x3c!-- for screen readers --\x3e                <span data-binding='{aria-label: backString}{@hidden: backDisabled}'></span>                <span data-binding='{@text: backText}'></span>            </button>            <button class='lc-right button-text-link' data-binding='{@event-onclick: handleClickOk}{@text: @language-layer-catalog-done-button}'></button>            <h2 class='panel-title' data-binding='{@text: breadcrumb}'></h2>        </div>        <div class='lc-filter'>            <div class='lc-search' data-binding='{@noclass-lcSearchDisable: showingAll}'>                <input class='search-field' type='text' id='lc-filter-input' data-binding='{@value: filterText}{@event-keydown: handleKeyDown}{placeholder: @language-layer-catalog-search-placeholder}{@enabled: showingAll}' />                <button class='clear-button' data-binding='{@event-onclick: handleClear}{title: @language-layer-catalog-clear-filter}'></button>                <button class='search-button' data-binding='{@event-onclick: handleSearch}{@enabled: showingAll}{title: @language-layer-catalog-search-button}'></button>            </div>            <button class='lc-show-selected button-text-link' data-binding='{@event-onclick: handleShowSelectedClick}{@text: showSelectedButtonText}'></button>        </div>    </div>    <div class='lc-status lc-loader' data-binding='{@visible: isBusy}'>        <img src='Resources/Images/loader-small.gif' alt='Loading' border='0' width='24' height='24' />    </div>    <div class='lc-status no-selection-message' data-binding='{@text: @language-layer-catalog-no-layers-selected}{@noclass-showNone: showNoLayersSelectedText}'></div>    \x3c!-- Content Body --\x3e    <div class='lc-layers-text' data-binding='{@visible: showLayerMessageText}'>        <span data-binding='{@text: @language-layer-catalog-not-finished}{@visible: showNotFinishedText}'></span>        <span data-binding='{@text: @language-layer-catalog-more-layers}{@visible: showMoreLayersText}'></span>        <a href='' data-binding='{@text: @language-layer-catalog-refresh}{@visible: showMoreLayersText}{@event-onclick: handleRefreshClick}'></a>    </div>    <div class='lc-entries'>        <div class='lc-items layer-item catalog-folder-select' data-binding='{@visible: showGroupCheckbox}{checked: allChecked}'>            <label class='layer-item-label'>                <input class='selected-state' type='checkbox' data-binding='{@event-onclick: handleSelectAllChecked}{checked: allChecked}' />                <span class='lc-item-label' data-binding='{@text: @language-layer-catalog-select-all}'></span>            </label>        </div>        <ul class='lc-items' data-binding='{@source: resultPage}{@template-for: resultPage}{@template-selector: type}'>            <li class='layer-item' data-binding='{@class-layerSelected: isChecked}{@template-select: layer}{@visible: visible}'>                <label class='layer-item-label'>                    <input type='checkbox' class='selected-state selected-state-layer' data-binding='{@class-layerCheckedImage: isChecked}{@value: isChecked}'>                    <span class='lc-item-label' data-binding='{@text: displayName}'></span>                </label>                <button class='lc-details' data-binding='{@event-onclick: handleShowDetails}{@visible: infoLinkVisible}'><img data-binding='{alt: infoLinkText}{src: infoLinkIconUri}{title: infoLinkTooltip}' border='0' /></button>            </li>            <li class='folder-item chevron-right-24' data-binding='{@template-select: folder}{@event-onclick: handleFolderClick}{@visible: visible}'>                <button class='catalog-item-button' data-binding='{title: @language-layer-catalog-folder-drill-down}'>                    <span class='selected-state selected-state-folder' data-binding='{@class-folderSomeSelectedImage: someChecked}{@class-folderAllSelectedImage: allChecked}'></span>                    <span class='lc-item-label' data-binding='{@text: displayName}{@event-onclick: handleFolderClick}'></span>                    \x3c!-- Chrome Vox: Announces when folder is opened --\x3e                    <span data-binding='{@visible: expanded}{aria-label: @language-layer-catalog-folder-opened}'></span>                    <span data-binding='{@visible: someChecked}{@text: @language-layer-catalog-selected-some}' class='selected-indicator'></span>                    <span data-binding='{@visible: allChecked}{@text: @language-layer-catalog-selected-all}' class='selected-indicator'></span>                </button>            </li>        </ul>        <div class='bottom'>            <button class='cancel-button button' data-binding='{@event-onclick: handleClickCancel}{@text: @language-layer-catalog-cancel-button}'></button>        </div>    </div></div>",i="\x3c!-- Recursive template for folder items. Used in the desktop view --\x3e<div class='folder-item' data-binding='{@visible: visible}{id: folderId}'>    <div class='folder-item-name' data-binding='{@event-onclick: handleExpand}'>        <button class='catalog-item-button' data-binding='{@event-onclick: handleExpand}'>            <span class='catalog-item-control'>                \x3c!-- Chrome Vox: Announces when folder is open or closed --\x3e                <span class='expander-button' data-binding='{@class-folder-open: expanded}{aria-label: @language-layer-catalog-folder-toggle-open}{@visible: expanded}'></span>                <span class='expander-button' data-binding='{@class-folder-open: expanded}{aria-label: @language-layer-catalog-folder-toggle-closed}{@hidden: expanded}'></span>            </span>            <span data-binding='{@text: displayName}'></span>            <span data-binding='{@visible: someChecked}{@text: @language-layer-catalog-selected-some}' class='selected-indicator'></span>            <span data-binding='{@visible: allChecked}{@text: @language-layer-catalog-selected-all}' class='selected-indicator'></span>        </button>        <div class='catalog-folder-select' data-binding='{@visible: expanded}'>            <label class='catalog-item-label' data-binding='{@event-onclick: handleSelectAllChecked}{checked: allChecked}{@visible: showGroupCheckbox}'>                <span class='catalog-item-control'>                    <input type='checkbox' data-binding='{@event-onclick: handleSelectAllChecked}{checked: allChecked}' />                </span>                <span class='layer-item'>                    <span class='layer-item-name' data-binding='{@text: @language-layer-catalog-select-all}'></span>                </span>            </label>        </div>    </div>    <ul class='layer-catalog-items' data-binding='{@source: bindingEntries}{@template-selector: type}{@visible: expanded}{aria-labelledby: folderId}'>        <li class='lc-tree' data-binding='{@template-select: layer}{@template: Mapping/modules/LayerCatalog/Templates/LayerItemTemplate.html}'></li>        <li class='lc-tree' data-binding='{@template-select: folder}{@template: Mapping/modules/LayerCatalog/Templates/FolderItemTemplate.html}'></li>    </ul></div>",r="\x3c!-- Template for layer items. Used in Desktop view --\x3e<div class='catalog-layer-item' data-binding='{@visible: visible}'>    <label class='catalog-item-label'>        <span class='catalog-item-control'>            <input type='checkbox' data-binding='{checked: isChecked}{@event-onchange: handleLayerChecked}' />        </span>        <span class='layer-item' data-binding='{@event-onclick: handleLayerChecked}'>            <span class='layer-item-name' data-binding='{@text: displayName}'></span>        </span>    </label>    <button class='lc-details' data-binding='{@event-onclick: handleShowDetails}{@visible: infoLinkVisible}'><img data-binding='{alt: infoLinkText}{src: infoLinkIconUri}{title: infoLinkTooltip}' /></button></div>";function v(e,t,a){if("string"==typeof e&&(a=t,t=e),void 0!==a)for(var i=t.split("."),r=null,s=window,o=0,l=i.length;o<l;o++)r=i[o],o==l-1?s[r]=a:s[r]||(s[r]={}),s=s[r];else console.warn("Undefined shim for: "+t)}require({cache:{"Mapping/modules/LayerCatalog/AssemblyProvider":function(){var i,l=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","./BaseProvider","geocortex/essentials/catalog/LayerCatalogParams","geocortex/essentials/catalog/LayerCatalogDetail","geocortex/essentials/MapService","geocortex/essentials/Layer","geocortex/essentials/MapServiceConstants","./WmsPropertyNames"],function(e,t,a,i,n,p,y,u,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,s=(r=a.BaseProvider,l(o,r),o.prototype.initialize=function(e){var t=this;r.prototype.initialize.call(this,e),this._registerCommands(),this.app.waitUntilSiteInitializing().then(function(){t.app.command("ShowLayerCatalog").raiseCanExecuteChanged()})},o.prototype._registerCommands=function(){this.app.command("RestoreDynamicLayer").register(this,this.restoreDynamicLayers),this.app.event("ProjectLoadingEvent").subscribe(this,this.executeClearLayerCatalogLayers)},o.prototype.smartOrderUserAddedLayersWhileLoadingProject=function(e,t){var a=e,i=new Array;i.push(t);var r=a.layers,s=this._getOrderedLayerIdArray(r,i);a.add(t),this._setDynamicLayerInfosWithSmartOrderedLayers(a,s)},o.prototype.restoreDynamicLayers=function(e){var t=e.gcxLayerDefinition,a=e.mapService,i=new y.Layer(t.url);i.createFromDefinition(t),i.isUserCreated=!0,i.catalogId=i.id,this.smartOrderUserAddedLayers?this.smartOrderUserAddedLayersWhileLoadingProject(a,i):a.add(i),this.app.event("MapServiceLayersChangedWithResultEvent").publish({mapService:a,newItems:[].concat([i]),oldItems:[].concat([])}),this.app.event("MapServiceLayersChangedEvent").publish(a),e.callback(i)},o.prototype.executeGetLayerCatalog=function(t){this.app.site.getLayerCatalog(new i.LayerCatalogParams,function(){},function(e){t.resolve(e)},function(e){t.reject(e)})},o.prototype.canExecuteGetLayerCatalog=function(){return this.canShowLayerCatalog()},o.prototype.executeGetLayerCatalogDetails=function(t,e){this.app.site.getLayerCatalogDetails(e,function(){},function(e){t.resolve(e)},function(e){t.reject(e)})},o.prototype.canExecuteGetLayerCatalogDetails=function(){return this.canExecuteGetLayerCatalog()},o.prototype.getFlatListAfterFiringGetLayerCatalog=function(t){var a=this;if(this.flattenedList&&0<this.flattenedList.length)t.resolve(this.flattenedList);else{var e=$.Deferred();this.executeGetLayerCatalog(e),e.done(function(e){a.flattenedList=a.getFlatEntries(e.catalogs[0].entries),t.resolve(a.flattenedList)})}},o.prototype.restoreMapService=function(l){var n=this,e=l.serviceLayer;if("WMS"===e.layerType){var c=new Array,t=e.layers;if(0<t.length)for(var a=0,i=t;a<i.length;a++){var r=i[a];c.push(r.gcxLayerDefinition.catalogId)}var s=$.Deferred(),d=$.Deferred(),g=new Array;this.getFlatListAfterFiringGetLayerCatalog(s),s.done(function(e){for(var t=e,a=0,i=c;a<i.length;a++){var r=i[a],s=n.getIdForWMSFromDisplayName(t,r);g.push(s)}var o={ids:g};n.app.commandRegistry.command("GetLayerCatalogDetails").execute(d,o),d.done(function(e){n._createNewWmsServices(e.catalogs[0].entries,l.callback)})})}else l.callback(null)},o.prototype.getIdForWMSFromDisplayName=function(e,t){for(var a=0,i=e;a<i.length;a++){var r=i[a];if(r.displayName===t)return r.id}},o.prototype.getFlatEntries=function(e){var t=new Array;if(0<e.length)for(var a=0,i=e;a<i.length;a++){var r=i[a];if("folder"===r.type){var s=this.getFlatEntries(r.entries);if(0<s.length)for(var o=0,l=s;o<l.length;o++){var n=l[o];t.push(n)}}else t.push(r)}return t},o.prototype.executeApplyLayerCatalogDetails=function(e){if(e&&e.catalogs)for(var t=0,a=e.catalogs;t<a.length;t++){var i=a[t];i&&(this._removeExistingCataLogWmsServices(),this._createNewWmsServices(i.entries),i&&this._createNewDynamicLayers(i))}},o.prototype._createNewDynamicLayers=function(e){var t=e.mapServiceId,a=[],i=new n.LayerCatalogDetail;i.mapServiceId=t;for(var r=0,s=e.entries;r<s.length;r++){var o=s[r];o.isDynamic&&a.push(o)}i.entries=a;var l=this.app.site.essentialsMap.findMapServiceById(t);l&&this._addCatalogLayerToMapService(i,l)},o.prototype._addCatalogLayerToMapService=function(e,t){var a=!1,i=[];if(t.id===e.mapServiceId){for(var r=0,s=e.entries;r<s.length;r++){var o=s[r],l=t.findLayerById(o.id);l||(l=new y.Layer(t.url+"/layers/"+o.id),o.visible=!0,l.createFromDefinition(o),l.isUserCreated=!0,l.userLayerType=u.UserLayerType.LAYER_CATALOG,l.includeInLayerList=!0,l.setInActiveTheme(!0),l.catalogId=l.id),i.push(l)}var n=t.layers.filter(function(e){return e.isUserCreated&&i.indexOf(e)<0}),c=i.filter(function(e){return t.layers.indexOf(e)<0});n.forEach(function(e){t.remove(e),a=!0});var d=this._getOrderedLayerIdArray(t.layers,c);return c.forEach(function(e){t.add(e),a=!0}),this.smartOrderUserAddedLayers&&this._setDynamicLayerInfosWithSmartOrderedLayers(t,d),a?(this.app.event("MapServiceLayersChangedWithResultEvent").publish({mapService:t,newItems:[].concat(c),oldItems:[].concat(n)}),this.app.event("MapServiceLayersChangedEvent").publish(t),c):[]}},o.prototype._getOrderedLayerIdArray=function(e,t){var a=this._getLayerIDArrayByGeoTypems(e,["point","multipoint"]),i=this._getLayerIDArrayByGeoTypems(e,["line"]),r=this._getLayerIDArrayByGeoTypems(e,["polygon"]),s=this._getLayerIDArrayByGeoTypems(t,["point","multipoint"]),o=this._getLayerIDArrayByGeoTypems(t,["line"]),l=this._getLayerIDArrayByGeoTypems(t,["polygon"]);return s.concat(a).concat(o).concat(i).concat(l).concat(r)},o.prototype._getLayerIDArrayByGeoTypems=function(e,t){var a=[];return e.forEach(function(e){0<=t.indexOf(e.featureType.toLowerCase())&&a.push(e.id)}),a},o.prototype._setDynamicLayerInfosWithSmartOrderedLayers=function(e,t){var a=e.serviceLayer,s=[],o=[];if(a.dynamicLayerInfos){s=a.dynamicLayerInfos,o=[],t.forEach(function(e){for(var t=null,a=0,i=s;a<i.length;a++){var r=i[a];if(r.id.toString()===e){t=r;break}}t&&o.push(t)});var i=a.visibleLayers;a.setDynamicLayerInfos(o,!0),0<i.length?a.setVisibleLayers(i,!0):a.setVisibleLayers(["-1"],!0),a.refresh()}},o.prototype.canExecuteApplyLayerCatalogDetails=function(){return this.canExecuteGetLayerCatalog()},o.prototype.canShowLayerCatalog=function(){return!!(this.app.site&&this.app.site.essentialsMap&&this.app.site.essentialsMap.mapServices&&dojo.some(this.app.site.essentialsMap.mapServices,function(e){return e.hasLayerCatalog}))},o.prototype.executeClearLayerCatalogLayers=function(){this._removeExistingCataLogWmsServices(),this._removeAllCatalogLayersFromMap()},o.prototype.executeGetLayerCatalogMapServiceIds=function(e){for(var t=new Array,a=0,i=this.app.site.essentialsMap.mapServices;a<i.length;a++){var r=i[a];r.hasLayerCatalog&&t.push(r.id)}e.resolve(t)},o.prototype._removeExistingCataLogWmsServices=function(){if(this.app&&this.app.site&&this.app.site.essentialsMap&&this.app.site.essentialsMap.mapServices)for(var e=this.app.site.essentialsMap.mapServices,t=0;t<e.length;t++)if(e[t].isUserCreated&&e[t].hasLayerCatalog&&e[t].mapServiceType===u.MapServiceType.WMS){var a=e[t];this.app.site.essentialsMap.getMap().removeLayer(a.serviceLayer),e.splice(t,1),t--,this.app.eventRegistry.event("MapServiceRemovedEvent").publish(a)}},o.prototype._removeAllCatalogLayersFromMap=function(){if(this.app&&this.app.site&&this.app.site.essentialsMap&&this.app.site.essentialsMap.mapServices)for(var e=0,t=this.app.site.essentialsMap.mapServices;e<t.length;e++){var a=t[e];if(a.hasLayerCatalog){var i=new n.LayerCatalogDetail;i.mapServiceId=a.id,this.app.site.essentialsMap.applyCatalogLayersChange(i)}}},o.prototype._createNewWmsServices=function(e,t){for(var a=new Object,i=0,r=e;i<r.length;i++){var s=r[i];if(!s.isDynamic)for(var o=0,l=s.properties;o<l.length;o++){var n=l[o];if(n.name===g.WMS_SERVICE_URL){var c=n.value;a[c]||(a[c]=[]),a[c].push(s)}}}for(var d in a)a.hasOwnProperty(d)&&this._createWmsClosure(d,a,t)},o.prototype._createWmsClosure=function(o,l,n){var c=this,d=new esri.layers.WMSLayer(o),e=dojo.connect(d,"onLoad",function(e){var t=new p.MapService(e.url);t.mapServiceType=u.MapServiceType.WMS,t.serviceLayer=e,t.id=c._getUniqueMapServiceId(),t.catalogId=t.id,t.isUserCreated=!0,t.userLayerType=u.UserLayerType.LAYER_CATALOG,t.hasLayerCatalog=!0,t.drawingBehavior="MapService",t.displayName=e.title,t.configuredVisible=!0,t.serverVersion=e.version,t.includeInLayerList=!0,t.mapServiceFunction=u.MapServiceFunction.OPERATIONAL,t.essentialsMap=c.app.site.essentialsMap,t.serviceUrl=e.url,t._extendWms(),t._handleServiceLayerLoaded(t.serviceLayer),d.visible=!0,d.setImageFormat("image/png"),d.setOpacity(e.opacity);for(var a=[],i=0;i<l[o].length;i++){var r=new y.Layer(o);if(r.mapService=t,r.createFromDefinition(l[o][i]),r.name=c._getWmsLayerName(l[o][i]),r.wmsLayerName=r.name,c._fillEssLayerFromWmsLayerInfo(r,e.layerInfos),r.id=i.toString(),r.includeInLegend=!1,r.isUserCreated=!0,r.userLayerType=u.UserLayerType.LAYER_CATALOG,r.includeInLayerList=!0,r.configuredVisible=!0,r._visible=!0,r.catalogId=r.displayName,l[o][i]&&l[o][i].properties){var s=l[o][i].properties.filter(function(e){return"catalogDisplayName"===e.name})[0];s&&(r.catalogId=s.value)}a.push(r.wmsLayerName),t.layers.push(r)}d.setVisibleLayers(a),t.essentialsMap.getMap().addLayer(d),c.app.site.essentialsMap.mapServices.push(t),d.show(),c.app.eventRegistry.event("MapServiceAddedEvent").publish(t),n&&n(t),g()}),t=dojo.connect(d,"onError",function(e){throw n&&n(null),g(),new Error("Failed to get capabilities for WMS Service.")}),g=function(){dojo.disconnect(e),dojo.disconnect(t)}},o.prototype._fillEssLayerFromWmsLayerInfo=function(e,t){for(var a=null,i=0,r=this._flattenWmsLayerInfos(t);i<r.length;i++){var s=r[i];if(s.name.toLowerCase()===e.wmsLayerName.toLowerCase()){a=s;break}}a&&a.hasOwnProperty("extent")&&(e.fullExtent=a.extent)},o.prototype._flattenWmsLayerInfos=function(e){for(var t=[],a=0,i=e;a<i.length;a++){var r=i[a];t.push(r);var s=this._flattenWmsLayerInfos(r.subLayers);if(0<s.length)for(var o=0,l=s;o<l.length;o++){var n=l[o];t.push(n)}}return t},o.prototype._getUniqueMapServiceId=function(){var e=this.app.site.essentialsMap.mapServices;if(e){var t=[];if(dojo.forEach(e,function(e){t.push(e.id)}),0<t.length){var a=Math.max.apply(null,t);return(++a).toString()}}return"0"},o.prototype._getWmsLayerName=function(e){if(e)for(var t=0,a=e.properties;t<a.length;t++){var i=a[t];if(i.name===g.WMS_LAYER_NAME)return i.value}return null},o.prototype.executeRemoveLayerCatalogItem=function(e){var t=new Array,a=e.mapService;if(a.serviceLayer instanceof esri.layers.ArcGISDynamicMapServiceLayer)a.remove(e),this._hackRefreshModules(a.serviceLayer.id);else if(a.serviceLayer instanceof esri.layers.WMSLayer){if(e.setVisibility(!1),a.layers.splice(a.layers.indexOf(e),1),0===a.layers.length)return this.app.site.essentialsMap.removeMapService(a),void this.app.event("MapServiceRemoved").publish(a);this._hackRefreshModules(a.serviceLayer.id)}t.push(e),this.app.event("MapServiceLayersChangedWithResultEvent").publish({mapService:a,newItems:[].concat([]),oldItems:[].concat(t)}),this.app.event("MapServiceLayersChangedEvent").publish(a)},o);function o(){var e=null!==r&&r.apply(this,arguments)||this;return e.smartOrderUserAddedLayers=!0,e.flattenedList=[],e}t.AssemblyProvider=s})},"Mapping/modules/LayerCatalog/BaseLayerCatalogView":function(){var i,l=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","geocortex/framework/ui/ViewBase","geocortex/essentials/catalog/CatalogEntry"],function(e,t,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=(i=a.ViewBase,l(o,i),o.prototype.attach=function(e){if(i.prototype.attach.call(this,e),this.configuration){if(this.configuration.hasOwnProperty("minFilterLength")){var t=parseInt(this.configuration.minFilterLength);t&&(this.minFilterLength=t)}this.configuration.hasOwnProperty("autocompleteEnabled")&&this.configuration.autocompleteEnabled&&(this.autocompleteEnabled=!0)}this.enableAutoComplete(this.autocompleteEnabled)},o.prototype.activated=function(){this.viewModel.ready()},o.prototype.enableAutoComplete=function(e){if(e){var a=this;$("#lc-filter-input").autocomplete({source:this.viewModel.autocompleteValues,minLength:this.minFilterLength,select:function(e,t){t&&t.item&&t.item.value&&(a.viewModel.filterText.set(t.item.value),a.handleSearch(null,null,null))}})}},o.prototype.handleSearch=function(e,t,a){},o.prototype.handleClickOk=function(e,t,a){this.viewModel.applyChanges(),this.app.commandRegistry.command("DeactivateView").execute("LayerCatalogView"),this.app.commandRegistry.command("ShowMap").execute()},o.prototype.handleClickCancel=function(e,t,a){this.app.commandRegistry.command("DeactivateView").execute("LayerCatalogView")},o.prototype._isSpecialChar=function(e){switch(e){case 16:case 17:case 18:case 19:case 20:case 27:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 144:case 145:return!0}return!1},o.prototype.handleShowDetails=function(e,t,a){var i=this.viewModel.infoLinkCommandName,r=new s.CatalogEntry;r.id=a.id,r.displayName=a.displayName,r.type=a.type,this.app.commandRegistry.command(i).execute(r)},o);function o(){var e=null!==i&&i.apply(this,arguments)||this;return e.minFilterLength=3,e.autocompleteEnabled=!1,e}t.BaseLayerCatalogView=r})},"Mapping/modules/LayerCatalog/BaseLayerCatalogViewModel":function(){var i,v=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","./CatalogEntryViewModel","geocortex/framework-ui/LazyObservable","geocortex/essentials/Layer","geocortex/essentials/catalog/LayerCatalogDetailsParams","geocortex/essentials/LayerHyperlink","./LayerCatalogModule","./WmsPropertyNames","./CatalogEntryType","geocortex/essentials/MapServiceConstants"],function(e,t,a,i,o,r,l,c,n,d,s,g,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var y,u,h=(y=a.ViewModelBase,v(C,y),C.prototype.initialize=function(e){var t=this;y.prototype.initialize.call(this,e),dojo.subscribe("CatalogLayersChangedEvent",this,function(e){e&&t.app.event("MapServiceLayersChangedEvent").publish(e)}),this.app.event("OnAddCatalogLayersCommandEvent").subscribe(this,this._handleOnAddCatalogLayersCommandFired),this.app.event("OnAppendCatalogLayersCommandEvent").subscribe(this,this._handleOnAppendCatalogLayersCommandFired),this.app.event("LayerCatalogProviderUpdatedEvent").subscribe(this,this._handleLayerCatalogProviderUpdated),this.app.event("LayerCatalogProviderStartedEvent").subscribe(this,this._handleLayerCatalogProviderStarted),this.app.event("LayerCatalogProviderFinishedEvent").subscribe(this,this._handleLayerCatalogProviderFinished),this.loadConfiguration(e)},C.prototype.ready=function(){this.showMoreLayersText.set(!1),this._updatedLayerCatalogResults=null,this._loadCatalogIfNeeded(),this._calcShowText()},C.prototype._handleLayerCatalogProviderUpdated=function(e){this.showNotFinishedText.set(!1),this.showMoreLayersText.set(!0),this._updatedLayerCatalogResults=e,this.catalogCached=!1},C.prototype.refreshLayerCatalog=function(){this._updatedLayerCatalogResults&&(this._onLoadBegin(),this._onLoadCompleted(this._updatedLayerCatalogResults),this.ready())},C.prototype._calcShowText=function(){this.layerCatalogProviderFinished?(this.showNotFinishedText.set(!1),this.showLayerMessageText.set(!1)):(this.showNotFinishedText.set(!0),this.showLayerMessageText.set(!0))},C.prototype._handleLayerCatalogProviderStarted=function(){this.layerCatalogProviderFinished=!1},C.prototype._handleLayerCatalogProviderFinished=function(){this.layerCatalogProviderFinished=!0},C.prototype.loadConfiguration=function(e){var a=this;if(e){if(e.hasOwnProperty("infoLink")){var t=e.infoLink;t&&(this.showInfoLink=!!t.enabled,t.hasOwnProperty("command")&&(this.infoLinkCommandName=t.command),t.hasOwnProperty("tooltip")&&(this.infoLinkTooltip=t.tooltip),t.hasOwnProperty("text")&&(this.infoLinkText=t.text),t.hasOwnProperty("iconUri")&&(this.infoLinkIconUri=t.iconUri))}if(e.hasOwnProperty("filterProvider")){var i=e.filterProvider;i&&(this._lazyFilterProvider=new r.LazyObservable(null,function(){var e=dojo.getObject(i.type);if(e){var t=new e(a.app,i.libraryId||a.libraryId);return t.initialize(i.configuration||{}),t}a.app.trace.error(a.id+" can't find layer catalog filter provider typed "+i.type)},!0))}}},C.prototype.getFilterProvider=function(){return this._lazyFilterProvider?this._lazyFilterProvider.get():null},C.prototype.catalogLayersInLayerList=function(){var o=this,l=$.Deferred(),n=[],e=$.Deferred();return this.app.commandRegistry.command("GetLayerCatalogMapServiceIds").execute(e),e.done(function(e){var a=new Array,i={};o.app.site.essentialsMap.mapServices.forEach(function(e){i[e.id]=e}),e.forEach(function(e){var t=i[e];null!=t&&a.push(t)});for(var t=0;t<a.length;t++)for(var r=a[t],s=0;s<r.layers.length;s++)r.layers[s].isUserCreated&&n.push(r.layers[s]);l.resolve(n)}).fail(function(){l.reject()}),l.promise()},C.prototype.syncAddedLayers=function(){var o=this;this._resetCatalogVisibility(),this.catalogLayersInLayerList().done(function(e){for(var t=[],a=o._getFlattenedEntries(),i=0;i<e.length;i++){var r=o._findEntry(e[i],a);r&&(t.push(r),r.isChecked.set(!0))}for(i=0;i<t.length;i++)for(var s=0;s<a.length&&t[i]!==a[s];s++);})},C.prototype.uncheckAllEntries=function(){this._resetCatalogVisibility()},C.prototype.applyChanges=function(){var e=this.getCheckedEntries(),t=e.length;if(e&&0<t){for(var a=new c.LayerCatalogDetailsParams,i=0;i<t;i++)a.ids.push(e[i].id);this._getLayerCatalogDetails(a)}else this.app.commandRegistry.command("ClearLayerCatalogLayers").execute()},C.prototype.loadLayerDetails=function(e,s,t){var a=new c.LayerCatalogDetailsParams;a.ids.push(e),this.app.site.getLayerCatalogDetails(a,function(){},function(e){if(e&&e.catalogs){var t=e.catalogs[0];if(t.entries){var a=t.entries[0];if(a){var i=new l.Layer("detailsLayer");if(i.createFromDefinition(a),a.hasOwnProperty("layerHyperlinks"))for(var r=0;r<a.layerHyperlinks.length;r++)i.layerHyperlinks[r]=new n.LayerHyperlink(a.layerHyperlinks[r],i);return void s(i)}}}s(null)},function(e){t(e)})},C.prototype._onLoadCompleted=function(e){if(this.filteredCatalog.clear(),e&&e.catalogs)for(var t=0;t<e.catalogs.length;t++)if(e.catalogs[t]){var a=e.catalogs[t];if(a.entries)for(var i=0;i<a.entries.length;i++){var r=o.CatalogEntryViewModel.fromJson(a.entries[i],this.app,this.libraryId);r&&(r.calculateShowGroupCheckbox(d.LayerCatalogModule.instance.checkboxVisibility,d.LayerCatalogModule.instance.checkboxSuffix),this.filteredCatalog.addItem(r))}}if(this._populateAutocompleteValues(),this.syncAddedLayers(),this.showInfoLink){var s=this._getFlattenedEntries(!0);for(t=0;t<s.length;t++)s[t].infoLinkVisible.set(!0),s[t].infoLinkTooltip.set(this.infoLinkTooltip),s[t].infoLinkText.set(this.infoLinkText),s[t].infoLinkIconUri.set(this.infoLinkIconUri)}this.isBusy.set(!1),this.catalogCached=!0},C.prototype._populateAutocompleteValues=function(){for(var e=this._getFlattenedEntries(!0),t=0;t<e.length;t++)this.autocompleteValues.push(e[t].displayName);this.autocompleteValues.sort()},C.prototype._getLayerCatalog=function(){var t=this;this._onLoadBegin();var e=$.Deferred();this.app.commandRegistry.command("GetLayerCatalog").execute(e),e.done(function(e){t._onLoadCompleted(e)}).fail(function(){t._onLoadError(null)})},C.prototype._getLayerCatalogDetails=function(e){var t=this,a=$.Deferred();this.app.commandRegistry.command("GetLayerCatalogDetails").execute(a,e),a.done(function(e){t.app.commandRegistry.command("ApplyLayerCatalogDetails").execute(e)})},C.prototype._onLoadBegin=function(){this.isBusy.set(!0)},C.prototype._loadCatalogIfNeeded=function(){this.catalogCached||this._getLayerCatalog()},C.prototype._handleOnAddCatalogLayersCommandFired=function(e){if(e){this._loadCatalogIfNeeded();var t=[];t=Array.isArray(e)?e:e.split(",");var a=new c.LayerCatalogDetailsParams;a.ids=t,this._getLayerCatalogDetails(a)}},C.prototype._handleOnAppendCatalogLayersCommandFired=function(e){var l=this;if(e){this._loadCatalogIfNeeded();var t=[];t=Array.isArray(e)?e:e.split(",");var n=new c.LayerCatalogDetailsParams;n.ids=t,this.catalogLayersInLayerList().done(function(e){for(var t=l._getFlattenedEntries(!0),a=0,i=e;a<i.length;a++){var r=i[a],s=l._findEntry(r,t);if(s){var o=s.id;n.ids.indexOf(o)<0&&n.ids.push(o)}}}),this._getLayerCatalogDetails(n)}},C.prototype._getUniqueMapServiceId=function(){var e=this.app.site.essentialsMap.mapServices;if(e){var t=[];if(dojo.forEach(e,function(e){t.push(e.id)}),0<t.length){var a=Math.max.apply(null,t);return(++a).toString()}}return"0"},C.prototype._getWmsLayerName=function(e){if(e)for(var t=0;t<e.properties.length;t++)if(e.properties[t].name===s.WMS_LAYER_NAME)return e.properties[t].value;return null},C.prototype._resetCatalogVisibility=function(){for(var e=this._getFlattenedEntries(),t=0;t<e.length;t++)e[t].isChecked.set(!1)},C.prototype._onLoadError=function(e){throw this.isBusy.set(!1),new Error(e.message)},C.prototype.getCheckedEntries=function(){for(var e=[],t=this._getFlattenedEntries(!0),a=0;a<t.length;a++)t[a].isChecked.get()&&e.push(t[a]);return e},C.prototype._getFlattenedEntries=function(e){return e?this._flattenCollection(this.filteredCatalog,!0):this._flattenCollection(this.filteredCatalog,!1)},C.prototype._flattenCollection=function(e,t){for(var a=[],i=0;i<e.get().length;i++)if(e.getAt(i).type===g.FOLDER){t||a.push(e.getAt(i));var r=this._flattenCollection(e.getAt(i).entries,t);if(0<r.length)for(var s=0;s<r.length;s++)a.push(r[s])}else a.push(e.getAt(i));return a},C.prototype._findEntry=function(e,t){var a=null,i=e.id,r=e.catalogId;null!=r&&(i=r);for(var s=0;s<t.length;s++)if(null!=e.wmsLayerName&&e.mapService.mapServiceType==p.MapServiceType.WMS){var o=e.properties.catalogDisplayName?e.properties.catalogDisplayName:e.displayName;if(t[s].displayName===o){a=t[s];break}}else if(t[s].id===i){a=t[s];break}return a},C);function C(e,t){var a=y.call(this,e,t)||this;return a.autocompleteValues=[],a.catalogCached=!1,a.clearButtonVisible=null,a.filteredCatalog=null,a.filterText=null,a.isBusy=null,a.showSelectedButtonText=null,a.showingAll=null,a.showInfoLink=!1,a.showNoLayersSelectedText=null,a.showMoreLayersText=null,a.showNotFinishedText=null,a.layerCatalogProviderFinished=!0,a.showLayerMessageText=null,a.filteredCatalog=new i.ObservableCollection,a.isBusy=new i.Observable(!1),a.filterText=new i.Observable(""),a.showSelectedButtonText=new i.Observable(e.getResource(t,"language-layer-catalog-show-selected-button")),a.autocompleteValues=[],a.showNoLayersSelectedText=new i.Observable(!1),a.showMoreLayersText=new i.Observable(!1),a.showNotFinishedText=new i.Observable(!1),a.showingAll=new i.Observable(!0),a.clearButtonVisible=new i.Observable(!1),a.showLayerMessageText=new i.Observable(!1),a}t.LayerCatalogViewModelBase=h,(u=t.CheckboxVisibility||(t.CheckboxVisibility={}))[u.all=0]="all",u[u.configuredOnly=1]="configuredOnly",u[u.none=2]="none"})},"Mapping/modules/LayerCatalog/BaseProvider":function(){define(["require","exports","geocortex/geocortex"],function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(r.prototype.initialize=function(e){var t=this;this.app.layerList?(this.layerList=this.app.layerList,this.layerListResolved.resolve()):this.app.event("LayerListInitializedEvent").once(this,function(e){t.layerList=e,t.layerListResolved.resolve()})},r.geocortexRequest=function(e){var t=$.Deferred();return a.request({url:e,content:{f:"json"},load:t.resolve,error:t.reject,callbackParamName:"Callback"}),t.promise()},r.prototype._geocortexRequest=function(e){return r.geocortexRequest(e)},r.prototype.executeGetLayerCatalog=function(e){e.reject()},r.prototype.canExecuteGetLayerCatalog=function(e){return!1},r.prototype.restoreMapService=function(e){},r.prototype.executeGetLayerCatalogDetails=function(e,t){e.reject()},r.prototype.canExecuteGetLayerCatalogDetails=function(e,t){return!1},r.prototype.executeApplyLayerCatalogDetails=function(e){},r.prototype.canExecuteApplyLayerCatalogDetails=function(e){return!1},r.prototype.executeClearLayerCatalogLayers=function(){},r.prototype.executeGetLayerCatalogMapServiceIds=function(e){e.reject()},r.prototype.canShowLayerCatalog=function(){return!1},r.prototype.getState=function(){return null},r.prototype.reset=function(e){},r.prototype.executeRemoveLayerCatalogItem=function(e){},r.prototype._hackRefreshModules=function(e){var t=this.app.site.getMap(),a=t.getLayer(e);a&&t.removeLayer(a),a._img=null,t.addLayer(a)},r);function r(e,t){this.layerListResolved=$.Deferred(),this.app=e,this.libraryId=t}t.BaseProvider=i})},"Mapping/modules/LayerCatalog/CatalogEntryType":function(){define(["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FOLDER="folder",t.LAYER="layer"})},"Mapping/modules/LayerCatalog/CatalogEntryViewModel":function(){var i,d=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","./CatalogEntryType","geocortex/framework/utils/utils","./BaseLayerCatalogViewModel"],function(e,t,a,i,o,l,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,n=(s=a.ViewModelBase,d(c,s),c.fromJson=function(e,t,a){if(e.hasOwnProperty("id")&&e.hasOwnProperty("type")&&e.hasOwnProperty("displayName")){var i=new c(t,a);if(i.displayName=e.displayName,i.type=e.type,i.id=e.id,i.type==o.FOLDER&&i.folderId.set("folderItem-{0}".format(l.alphaNumericToken())),e.hasOwnProperty("entries"))for(var r=0;r<e.entries.length;r++){var s=c.fromJson(e.entries[r],t,a);s&&(i.entries.addItem(s),s.parent=i)}return i}return null},c.prototype.calculateShowGroupCheckbox=function(t,a){var e=!1;if(a&&""!=a&&this.displayName.endsWith(a)&&(this.displayName=this.displayName.slice(0,this.displayName.length-a.length),e=!0),this.type==o.FOLDER){var i=t==r.CheckboxVisibility.all||t==r.CheckboxVisibility.configuredOnly&&e;this.showGroupCheckbox.set(i)}this.entries&&this.entries.getItems().forEach(function(e){e.calculateShowGroupCheckbox(t,a)})},c.prototype.toggleAllChildren=function(t){this.entries.getItems().forEach(function(e){e.isChecked.set(t),e.toggleAllChildren(t)})},c.prototype.areAllChildrenChecked=function(){return!(this.entries&&0<this.entries.length())||this.entries.getItems().every(function(e){return!e.visible.get()||e.isChecked.get()&&e.areAllChildrenChecked()})},c.prototype._handleIsCheckedChanged=function(e){if(this.type===o.FOLDER){var t=dojo.some(this.entries.get(),function(e){return e.isChecked.get()&&e.visible.get()}),a=!1;t&&(a=this.areAllChildrenChecked()),a?(this.allChecked.set(!0),this.someChecked.set(!1)):t?(this.allChecked.set(!1),this.someChecked.set(!0)):(this.allChecked.set(!1),this.someChecked.set(!1)),this.isChecked.get()!=t&&this.isChecked.set(t)}this.parent&&(this.parent.isChecked.set(this.isChecked.get()),this.app.configuration.mobileMode&&this.app.command("ReevaluateAllChecked").execute(this.parent.areAllChildrenChecked()))},c.prototype.filter=function(e){e?-1<this.displayName.toLowerCase().indexOf(e.toLowerCase())&&this.type===o.LAYER?(this.visible.set(!0),this.expandUpTree()):this.visible.set(!1):(this.visible.set(!0),this.expanded.set(!1));for(var t=0;t<this.entries.get().length;t++)this.entries.getAt(t).filter(e);this._setFolderVisibilityBasedOnChildren()},c.prototype.expandUpTree=function(){this.parent&&(this.parent.expanded.get()||this.parent.expanded.set(!0),this.parent.expandUpTree())},c.prototype.expandAll=function(e){this.expanded.set(e);for(var t=0;t<this.entries.get().length;t++)this.entries.getAt(t).expandAll(e)},c.prototype._setFolderVisibilityBasedOnChildren=function(){var e=!1;if(this.type===o.FOLDER){for(var t=0;t<this.entries.get().length;t++)if(this.entries.getAt(t)._setFolderVisibilityBasedOnChildren()){e=!0;break}this.visible.set(e)}else this.visible.get()&&(e=!0);return e},c);function c(e,t){var a=s.call(this,e,t)||this;return a.libraryId=null,a.id=null,a.expanded=null,a.isChecked=null,a.displayName=null,a.type=null,a.parent=null,a.visible=null,a.entries=null,a.bindingEntries=null,a.allChecked=null,a.someChecked=null,a.infoLinkVisible=null,a.infoLinkTooltip=null,a.infoLinkText=null,a.infoLinkIconUri=null,a.showGroupCheckbox=null,a.folderId=null,a.app=e,a.libraryId=t,a.entries=new i.ObservableCollection,a.isChecked=new i.Observable(!1),a.allChecked=new i.Observable(!1),a.someChecked=new i.Observable(!1),a.expanded=new i.Observable(!1),a.visible=new i.Observable(!0),a.isChecked.bind(a,a._handleIsCheckedChanged),a.infoLinkVisible=new i.Observable(!1),a.infoLinkTooltip=new i.Observable(""),a.infoLinkText=new i.Observable(""),a.infoLinkIconUri=new i.Observable(""),a.folderId=new i.Observable(""),a.showGroupCheckbox=new i.Observable(!1),a.bindingEntries=new i.ObservableCollection,a.expanded.bind(a,function(e){e?a.bindingEntries.set(a.entries.get()):a.bindingEntries.clear()}),a}t.CatalogEntryViewModel=n})},"Mapping/modules/LayerCatalog/DeferredUtils":function(){define(["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(i.createDeferredList=function(e){var i=$.Deferred(),r=[];return $.when.apply($,e).then(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var a=0;a<e.length;a++)r.push(e[a]);i.resolve(r)}).fail(function(e){i.reject(e)}),i.promise()},i);function i(){}t.Deferred=a})},"Mapping/modules/LayerCatalog/Dictionary":function(){define(["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(o.prototype.containsKey=function(e){return this._backingStore.hasOwnProperty(e)},o.prototype.get=function(e){return this._backingStore[e]},o.prototype.set=function(e,t){this._backingStore[e]=t},o.prototype.deleteEntry=function(e){delete this._backingStore[e]},o.prototype.values=function(){var e=new Array;for(var t in this._backingStore)e.push(this._backingStore[t]);return e},o.prototype.clear=function(){for(var e in this._backingStore)delete this._backingStore[e]},o.prototype.keys=function(){var e=new Array;for(var t in this._backingStore)e.push(t);return e},o.fromArray=function(e,t){for(var a=new o,i=0;i<e.length;i++){var r=e[i],s=t(r);a.set(s,r)}return a},o);function o(){this._backingStore={}}t.Dictionary=a})},"Mapping/modules/LayerCatalog/EssentialsSiteProvider":function(){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","./BaseProvider","./Dictionary","geocortex/infrastructure/layerList/LayerListItem","geocortex/infrastructure/layerList/LayerListFolderItem","./LayerCatalogConstructor","./DeferredUtils","./MapUtilities","geocortex/essentials/MapServiceConstants","geocortex/infrastructure/commandArgs/AddStatusArgs","geocortex/infrastructure/layerList/LayerListLayerItem","geocortex/infrastructure/gis/ServiceLayerInfo","geocortex/infrastructure/layerList/LayerListMapServiceItem","./LayerCatalogModule","geocortex/infrastructure/GraphicsLayerUtils","geocortex/essentials/MapServiceConstants","geocortex/essentials/LayerThemeSetting"],function(c,e,t,l,n,p,d,g,y,u,i,h,C,v,L,m,I,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,a=(r=t.BaseProvider,o(s,r),s.prototype.initialize=function(e){var s=this;r.prototype.initialize.call(this,e),this._layerCatalogFolderInLayerList=!1,this._addedMapServices=new l.Dictionary,this._addedLayerListItems=new l.Dictionary,this._layerListLookup=new l.Dictionary,this._fetchedMapServiceJsons=new l.Dictionary,this._atLeastOneLayerListDeferred=$.Deferred(),this._allLayerListsFinished=$.Deferred(),this._restoredMapServices=new Array;var a,o=new Array;this._resetInProgress=!1,this.app.waitUntilSiteInitializing().then(function(){!function(e){if(0<e.layerCatalogs.length){for(var t=0;t<e.layerCatalogs.length;t++)s._siteUrls[t]=e.url.replace(e.id,e.layerCatalogs[t].siteId.toString());a=s._siteUrls.map(function(e){return{siteUrl:e,rootFolder:null}})}if(a){s.layerListResolved.done(function(){s._layerListRoot||(s._layerListRoot=new p.LayerListFolderItem("LayerCatalogRoot",s.app.getResource(s.libraryId,"language-layer-catalog-home-text"),s.layerList),s._layerListRoot.isUserCreated=!0,s._layerListRoot.configuredVisible=!0)});var r=0;a.forEach(function(a,i){var e=s._geocortexRequest(a.siteUrl+"/map/layerlist?verbose=true");e.done(function(e){var t=a.rootFolder?[{type:"folder",name:a.rootFolder,items:e.items}]:e.items;s._processLayerListLookup(t,null,i),s._atLeastOneLayerListDeferred.resolve(),s.app.event("LayerCatalogProviderUpdatedEvent").publish(new d.LayerCatalogConstructor(s._layerListLookup))}),e.always(function(){1===(r+=1)&&s.app.event("LayerCatalogProviderStartedEvent").publish(),r===s._siteUrls.length&&s.app.event("LayerCatalogProviderFinishedEvent").publish()}),o.push(e)}),g.Deferred.createDeferredList(o).done(function(){s._allLayerListsFinished.resolve()}).fail(function(){s._allLayerListsFinished.reject()})}s.app.command("ShowLayerCatalog").raiseCanExecuteChanged()}(s.app.site)})},s.prototype.restoreMapService=function(l){var n=this,e=$.Deferred();this._restoredMapServicesPromises.push(e),this._getMapServiceJson(l.lookupId).done(function(a){if(a){a.properties.push({name:"layerCatalogLookupId",value:l.lookupId});var e=l.lookupId.split(".")[0],t=n._getSeedSiteUrlFromSiteId(e),i=$.Deferred();n._mapServiceCreatedPromises.push(i);var r,s=null,o=[];l.layerLookupIds.forEach(function(e){var t=e.indexOf(".",e.indexOf(".")+1);if(-1!==t&&(r=e.substring(t+1)),r){if(!(s=a.layers.filter(function(e){return e.name===r&&(!e.subLayerIds||0===e.subLayerIds.length)})[0]))return void n._failedMapServices.push(l.lookupId);s.properties.push({name:"layerCatalogLookupId",value:e})}else s=a;s&&o.push(s)}),y.MapUtilities.createMapServiceFromJson(a,t).done(function(r){o.forEach(function(t){var a=r.serviceLayer;if(c(["esri/layers/VectorTileLayer"],function(e){a instanceof e&&y.MapUtilities.addLayerToVectorTiledService(t,r)}),a instanceof esri.layers.WebTiledLayer)y.MapUtilities.addLayerToWebTiledService(t,r);else if(a instanceof esri.layers.ArcGISDynamicMapServiceLayer)r.mapServiceType===u.MapServiceType.TILED&&y.MapUtilities.addLayerToTiledService(t,r),a.supportsDynamicLayers&&(r.supportsDynamicLayers=!0),y.MapUtilities.addLayersWithDynamicDefinitions([t],r),y.MapUtilities.addLayersToDynamicMapService([t],r);else if(a instanceof esri.layers.FeatureLayer&&!(a instanceof esri.layers.StreamLayer))y.MapUtilities.addLayerToFeatureService(t,r);else if(a instanceof esri.layers.WFSLayer);else if(a instanceof esri.layers.WMTSLayer);else if(a instanceof esri.layers.StreamLayer);else if(a instanceof esri.layers.ArcGISImageServiceLayer)y.MapUtilities.addLayerToImageService(t,r);else if(a instanceof esri.layers.ArcGISTiledMapServiceLayer)y.MapUtilities.addLayerToTiledService(t,r);else if(a instanceof esri.virtualearth.VETiledLayer)y.MapUtilities.addLayerToBingService(t,r);else if(a instanceof esri.layers.WMSLayer){var e=r.catalogId.split(".")[0],i=n._getSeedSiteUrlFromSiteId(e);y.MapUtilities.addLayersToWMSService([t],r,i)}}),r.id=l.mapServiceId,r.serviceLayer.id=r.id,n._addedMapServices.get(r.catalogId)?(n.app.site.getMap().removeLayer(r.serviceLayer),n.app.site.essentialsMap.removeMapService(n._addedMapServices.get(r.catalogId)),n.app.site.essentialsMap.mapServices.push(r),n._addedMapServices.set(r.catalogId,r)):(n.app.site.essentialsMap.mapServices.push(r),n._mapServiceEvent(r,"MapServiceAddedEvent")),n._restoredMapServices.push(r),l.callback(r)}).fail(function(){n._failedMapServices.push(l.lookupId),l.callback(null)}).always(function(){i.resolve()})}}).fail(function(){n._failedMapServices.push(l.lookupId),l.callback(null)}).always(function(){e.resolve()})},s.prototype.reset=function(e){var i=this;this._resetInProgress=!0,this._allLayerListsFinished.always(function(){i.addStatus(i.app.getResource(i.libraryId,"language-layer-catalog-restoration-status"),"LayerCatalogRestoration"),g.Deferred.createDeferredList(i._restoredMapServicesPromises).always(function(){g.Deferred.createDeferredList(i._mapServiceCreatedPromises).always(function(){var t=i._addedMapServices.keys();i.executeClearLayerCatalogLayers();var a=i.app.site.getMap();i._restoredMapServices.forEach(function(e){-1<t.indexOf(e.catalogId)&&(i.app.site.essentialsMap.mapServices.push(e),i._mapServiceEvent(e,"MapServiceAddedEvent")),e.serviceLayer instanceof esri.layers.WMSLayer&&e.serviceLayer.setVisibleLayers(e.layers.map(function(e){return e.wmsLayerName})),e.serviceLayer instanceof esri.layers.ArcGISDynamicMapServiceLayer&&e.serviceLayer.setVisibleLayers(e.layers.map(function(e){return e.id})),a.addLayer(e.serviceLayer),i._addedMapServices.set(e.catalogId,e),i._createLayerListItems(e)});var e="The following map services fully or partially were unable to be restored: "+i._failedMapServices.join(", ");0<i._failedMapServices.length&&i.app.trace.warning(e),i._restoredMapServices.length=0,i.layerList._processEligibleSingleMapServiceFolders(),i._layerListRoot.refreshOnDemandItemCollection(),i._restoredMapServicesPromises.length=0,i._mapServiceCreatedPromises.length=0,i._failedLayerNames.length=0,i._failedMapServices.length=0,i._layerListRoot.setItemVisibility(!1),setTimeout(function(){i._layerListRoot.setItemVisibility(!0)},100),i.removeStatus("LayerCatalogRestoration"),i._resetInProgress=!1})})})},s.prototype._treeItemCmp=function(e,t){var a=this._layerListLookup.get(e),i=this._layerListLookup.get(t),r=a.siteIndex,s=i.siteIndex;return r!==s?r-s:a.order-i.order},s.prototype._processLayerListLookup=function(e,c,d){var g=this;e.forEach(function(e,t){var a,i,r=new Array,s=g._getSeedSiteIdFromUrl(g._siteUrls[d]);if("folder"===e.type){var o=g._generateFolderId(e,c);e.items&&(r=g._generateItemsChildrenIds(e,o,s),g._processLayerListLookup(e.items,o,d));var l=g._layerListLookup.get(o);if(null!=l)return void g._editExistingLookupItem(l,d,t,r);a=o,i=!0}else a=null!=e.layerID?"{0}.{1}.{2}".format(s,e.mapServiceID,e.layerName):"{0}.{1}".format(s,e.mapServiceID),i=!1;if(a){var n={childrenLookupIds:r,siteIndex:d,order:t,parentLookupId:c,displayName:e.name,addedChildrenLookupIds:new Array,isFolder:i};g._layerListLookup.set(a,n)}})},s.prototype._generateItemsChildrenIds=function(e,t,a){return e.items.map(function(e){return"folder"===e.type?"{0}.{1}".format(t,e.name):null!=e.layerID?"{0}.{1}.{2}".format(a,e.mapServiceID,e.layerName):"{0}.{1}".format(a,e.mapServiceID)})},s.prototype._generateFolderId=function(e,t){var a=e.name;return t&&""!==t&&(a="{0}.{1}".format(t,a)),a},s.prototype._editExistingLookupItem=function(t,e,a,i){e<t.siteIndex&&(t.siteIndex=e,t.order=a),i.forEach(function(e){0<=t.childrenLookupIds.indexOf(e)||t.childrenLookupIds.push(e)}),t.childrenLookupIds.sort(dojo.hitch(this,this._treeItemCmp))},s.prototype.executeGetLayerCatalog=function(t){var a=this;this.layerListResolved.done(function(){a._atLeastOneLayerListDeferred.done(function(){var e=new d.LayerCatalogConstructor(a._layerListLookup);t.resolve(e)})})},s.prototype.canExecuteGetLayerCatalog=function(){return this.canShowLayerCatalog()},s.prototype.executeGetLayerCatalogDetails=function(t,e){var n=this;this.addStatus(this.app.getResource(this.libraryId,"language-layer-catalog-get-layer-details-status"),"GetLayerDetails");var c=new Array,a=e.ids.filter(function(e){return n._isLookupIdForAMapService(e)}),i=e.ids.filter(function(e){return!n._isLookupIdForAMapService(e)}),r=i.map(function(e){return n._getMapServiceKeyFromLayerLookupId(e)}).filter(function(e,t,a){return a.indexOf(e)===t});this._getAndSetMapServiceJsons(r).always(function(){var l=new Array;i.forEach(function(e){var t,a=e.indexOf(".",e.indexOf(".")+1);-1!==a&&(t=e.substring(a+1));var i=n._getMapServiceKeyFromLayerLookupId(e),r=n._fetchedMapServiceJsons.get(i);if(r){r.properties.push({name:"layerCatalogLookupId",value:i});var s=r.layers.filter(function(e){return e.name===t&&(!e.subLayerIds||0===e.subLayerIds.length)})[0];if(s){s.properties.push({name:"layerCatalogLookupId",value:e});var o=$.Deferred();o.resolve(s),c.push(o)}else l.push(e)}else l.push(e)}),a.forEach(function(t){var a=$.Deferred();c.push(a.promise()),n._getMapServiceJson(t).done(function(e){e.properties.push({name:"layerCatalogLookupId",value:t}),a.resolve(e)}).fail(function(){l.push(t),a.resolve(null)})}),g.Deferred.createDeferredList(c).done(function(e){n.removeStatus("GetLayerDetails"),0<l.length&&n.app.command("Alert").execute(n.app.getResource(n.libraryId,"language-layer-catalog-failed-items-error").format(l.join(", "))),t.resolve({catalogs:[{entries:e,mapServiceId:"N/A"}]})})})},s.prototype._getAndSetMapServiceJsons=function(e){var i=this,r=new Array;return e.forEach(function(t){var a=$.Deferred();i._fetchedMapServiceJsons.containsKey(t)||(r.push(a),i._getMapServiceJson(t).done(function(e){i._fetchedMapServiceJsons.set(t,e),a.resolve()}).fail(function(){a.reject()}))}),g.Deferred.createDeferredList(r)},s.prototype._getMapServiceKeyFromLayerLookupId=function(e){if(this._isLookupIdForAMapService(e))return e;var t=e.split(".");return t[0]+"."+t[1]},s.prototype._isLookupIdForAMapService=function(e){return 2===e.split(".").length},s.prototype._getMapServiceJson=function(e){var t=$.Deferred(),a=this._getMapServiceRestUrl(e);return this._geocortexRequest(a).done(function(e){t.resolve(e)}).fail(function(){t.reject()}),t.promise()},s.prototype._getMapServiceRestUrl=function(e){var t=e.split("."),a=t[0],i=this._getSeedSiteUrlFromSiteId(a),r=t[1];return"{0}/map/mapservices/{1}?deep=true".format(i,r)},s.prototype.canExecuteGetLayerCatalogDetails=function(){return this.canExecuteGetLayerCatalog()},s.prototype.addStatus=function(e,t){var a=new i.AddStatusArgs(e,null,null,t,3e4,!0);this.app.command("AddStatus").execute(a)},s.prototype.removeStatus=function(e){this.app.command("RemoveStatus").execute(e)},s.prototype.executeApplyLayerCatalogDetails=function(e){if(this.addStatus(this.app.getResource(this.libraryId,"language-layer-catalog-updating-layer-list-status"),"UpdatingLayerList"),e&&e.catalogs)for(var t=function(e){if(!e)return"continue";for(var a=[],t=0,i=o._addedLayerListItems.keys();t<i.length;t++){var r=i[t],s=o._addedLayerListItems.get(r);s instanceof p.LayerListFolderItem&&a.push(s)}o.layerList._addedFolderReferences.forEach(function(t){a.some(function(e){return e===t})&&t.canAdjustOpacity.set(!1)}),o._removeEntriesIfNecessary(e.entries),o._addEntriesToMap(e.entries)},o=this,a=0,i=e.catalogs;a<i.length;a++)t(i[a])},s.prototype.executeRemoveLayerCatalogItem=function(e){var t=e.catalogId,a=this.getState().layers.filter(function(e){return t.indexOf(e.layerId)<0}).map(function(e){return{properties:[{name:"layerCatalogLookupId",value:e.layerId}]}});this._removeEntriesIfNecessary(a)},s.prototype._removeEntriesIfNecessary=function(e){var r=this,s=new l.Dictionary;if(e.forEach(function(e){if(e){var t=e.properties.filter(function(e){return"layerCatalogLookupId"===e.name})[0];null!=t&&s.set(t.value,t.value)}}),0!==e.length){this._addedMapServices.keys().forEach(function(e){var t=r._addedMapServices.get(e),a=r._findLayersToBeRemoved(t,s),i=a.map(function(e){return t.layers[e].catalogId});a.forEach(function(e){t.supportsLayerVisibility()&&t.layers[e].setVisibility(!1),r.app.command("RemoveClusterLayer").execute({gcxLayer:t.layers[e]}),r.app.event("UserAddedLayerOrMapServiceRemovedEvent").publish(t.layers.splice(e,1)[0]),r._mapServiceEvent(t,"MapServiceRemovedEvent"),r._mapServiceEvent(t,"MapServiceAddedEvent")}),i.forEach(function(e){r._removeItemFromLayerList(e)}),0===t.layers.length?r._removeMapService(e):(t.serviceLayer instanceof esri.layers.ArcGISDynamicMapServiceLayer||t.serviceLayer instanceof esri.layers.WMSLayer)&&r._hackRefreshModules(t.serviceLayer.id),r._resetMapServiceReferences(t)}),this._layerListRoot.refreshOnDemandItemCollection();var t=this.layerList._addedFolderReferences.filter(function(e){return 0===e.children.length()}).map(function(e){return r.layerList._addedFolderReferences.indexOf(e)});t.reverse(),t.forEach(function(e){r.layerList._addedFolderReferences.splice(e,1)})}else this.executeClearLayerCatalogLayers()},s.prototype._removeMapService=function(e){var t=this._addedMapServices.get(e),a=this.app.site.essentialsMap.mapServices.indexOf(t);-1<a&&this.app.site.essentialsMap.mapServices.splice(a,1),this.app.site.getMap().removeLayer(t.serviceLayer),this._addedMapServices.deleteEntry(e),this.layerList.removeServiceLayer(t.serviceLayer);var i=this.layerList._allMapServiceReferences.filter(function(e){return e.id===t.id})[0];-1<(a=this.layerList._allMapServiceReferences.indexOf(i))&&this.layerList._allMapServiceReferences.splice(a,1),this._mapServiceEvent(t,"MapServiceRemovedEvent"),this._resetInProgress||this.app.event("UserAddedLayerOrMapServiceRemovedEvent").publish(t)},s.prototype._findLayersToBeRemoved=function(e,t){for(var a=new Array,i=e.layers,r=i.length-1;0<=r;r--){var s=i[r].catalogId;null!=s&&(t.containsKey(s)||a.push(r))}return a},s.prototype._removeItemFromLayerList=function(e){var t=this._layerListLookup.get(e),a=this._addedLayerListItems.get(e),i=this._addedLayerListItems.get(t.parentLookupId),r=this._layerListLookup.get(t.parentLookupId);if(r&&r.addedChildrenLookupIds.splice(r.addedChildrenLookupIds.indexOf(e),1),a&&(a&&a.isVisible&&a.isVisible.bindingEvent&&a.isVisible.bindingEvent.clear(),i?i.children.removeItem(a):0<=this._layerListRoot.children.indexOf(a)&&this._layerListRoot.children.removeItem(a),a.type===n.LayerListItemType.LAYER)){var s=a;s.layer&&s.layer.serviceLayerInfo&&(s.layer.serviceLayerInfo.id=null)}this._addedLayerListItems.deleteEntry(e),r&&(0===r.addedChildrenLookupIds.length?this._removeItemFromLayerList(t.parentLookupId):i&&i.refreshOnDemandItemCollection())},s.prototype.executeGetLayerCatalogMapServiceIds=function(e){var a=this,t=this._addedMapServices.keys(),i=new Array;t.forEach(function(e){var t=a._addedMapServices.get(e).id;i.push(t)}),e.resolve(i)},s.prototype.canExecuteApplyLayerCatalogDetails=function(){return this.canExecuteGetLayerCatalog()},s.prototype.canShowLayerCatalog=function(){return 0<this._siteUrls.length},s.prototype.executeClearLayerCatalogLayers=function(){var i=this,e=this._addedMapServices.keys();e.forEach(function(e){i.app.event("MapServiceRemovedEvent").publish(i._addedMapServices.get(e)),i._removeMapService(e)});var t=this.layerList._userAddedLayersFolder;if(t){var a=t.children.getItems().filter(function(e){return"LayerCatalogRoot"===e.id.get()})[0],r=t.children.indexOf(a);a&&(t.children.getAt(r).children.clear(),t.children.removeAt(r),t.refreshOnDemandItemCollection())}(e=this._layerListLookup.keys()).forEach(function(e){i._layerListLookup.get(e).addedChildrenLookupIds.length=0}),this._addedLayerListItems.keys().forEach(function(e){var t=i._addedLayerListItems.get(e);if(t.type===n.LayerListItemType.FOLDER){var a=i.layerList._addedFolderReferences.map(function(e){return e.id.get()}).indexOf(t.id.get());i.layerList._addedFolderReferences.splice(a,1)}i._removeItemFromLayerList(e)});var s=this.layerList._addedFolderReferences.map(function(e){return e.id.get()}).indexOf("LayerCatalogRoot");this.layerList._addedFolderReferences.splice(s,1),this._addedLayerListItems.clear();var o=this.layerList.children.indexOf(this._layerListRoot);0<=o&&!this._layerListRoot.children.getLength()&&(this.layerList.children.getAt(o).cleanUp(),this.layerList.children.removeAt(o)),this._layerCatalogFolderInLayerList=!1},s.prototype._addEntriesToMap=function(e){var n=this,c=new Array;e.forEach(function(e){if(e){var t=e.properties.filter(function(e){return"layerCatalogLookupId"===e.name})[0].value.split("."),a=t[0],i=n._siteUrls.indexOf(n._getSeedSiteUrlFromSiteId(a)),r=t[1],s=!1;if(2===t.length)s=!0;else{var o=c.filter(function(e){return e.mapServiceId===r&&e.siteIndex===i})[0];null==o?s=!0:o.layerJsons.push(e)}if(s){var l={siteIndex:i,siteId:a,mapServiceId:r,layerJsons:[e]};c.push(l)}}});var i=new Array;c.forEach(function(e,t){var a=$.Deferred();i[t]=a.promise(),n._applyLayerCatalogDetailsToMapService(e).always(function(){a.resolve()})}),g.Deferred.createDeferredList(i).always(function(){n.layerList._processEligibleSingleMapServiceFolders(),n._layerListRoot.refreshOnDemandItemCollection(),n.removeStatus("UpdatingLayerList")})},s.prototype._applyLayerCatalogDetailsToMapService=function(s){var o=this,l=$.Deferred(),n=this.app.site.getMap(),t=$.Deferred(),a="{0}.{1}".format(s.siteId,s.mapServiceId),e=this._addedMapServices.get(a);return null!=e?t.resolve(e):this._getNewMapService(a).done(function(e){o._isLayerInLayerList(e.serviceLayer)?(o.app.trace.error("We can't add the same service layer twice to the layer list"),t.reject()):(o.app.site.essentialsMap.mapServices.push(e),o._addedMapServices.set(a,e),t.resolve(e))}).fail(function(){t.reject()}),t.done(function(t){var a=t.serviceLayer,i=s.layerJsons;if(c(["esri/layers/VectorTileLayer"],function(e){a instanceof e&&y.MapUtilities.addLayerToVectorTiledService(i[0],t)}),a instanceof esri.layers.WebTiledLayer)y.MapUtilities.addLayerToWebTiledService(i[0],t);else if(a instanceof esri.layers.ArcGISDynamicMapServiceLayer)t.mapServiceType===u.MapServiceType.TILED&&y.MapUtilities.addLayerToTiledService(i[0],t),a.supportsDynamicLayers&&(t.supportsDynamicLayers=!0),y.MapUtilities.addLayersWithDynamicDefinitions(i,t),y.MapUtilities.addLayersToDynamicMapService(i,t);else if(a instanceof esri.layers.FeatureLayer&&!(a instanceof esri.layers.StreamLayer))y.MapUtilities.addLayerToFeatureService(i[0],t);else if(a instanceof esri.layers.WFSLayer);else if(a instanceof esri.layers.WMTSLayer);else if(a instanceof esri.layers.StreamLayer);else if(a instanceof esri.layers.ArcGISImageServiceLayer)y.MapUtilities.addLayerToImageService(i[0],t);else if(a instanceof esri.layers.ArcGISTiledMapServiceLayer)y.MapUtilities.addLayerToTiledService(i[0],t);else if(a instanceof esri.virtualearth.VETiledLayer)y.MapUtilities.addLayerToBingService(i[0],t);else if(a instanceof esri.layers.WMSLayer){var e=t.catalogId.split(".")[0],r=o._getSeedSiteUrlFromSiteId(e);y.MapUtilities.addLayersToWMSService(i,t,r)}o._mapServiceEvent(t,"MapServiceRemovedEvent"),o._mapServiceEvent(t,"MapServiceAddedEvent"),o._createLayerListItems(t),n.getLayer(t.serviceLayer.id)&&"Dynamic"===t.mapServiceType?o._hackRefreshModules(t.serviceLayer.id):n.addLayer(a),l.resolve()}).fail(function(){l.reject()}),l.promise()},s.prototype._getNewMapService=function(i){var r=this,s=$.Deferred();if(this._fetchedMapServiceJsons.containsKey(i)){var e=this._fetchedMapServiceJsons.get(i),t=i.split(".")[0],a=this._getSeedSiteUrlFromSiteId(t);y.MapUtilities.createMapServiceFromJson(e,a).done(function(e){s.resolve(e)})}else this._getMapServiceJson(i).done(function(e){e.properties.push({name:"layerCatalogLookupId",value:i}),r._fetchedMapServiceJsons.set(i,e);var t=i.split(".")[0],a=r._getSeedSiteUrlFromSiteId(t);y.MapUtilities.createMapServiceFromJson(e,a).done(function(e){s.resolve(e)})});return s.promise()},s.prototype._resetMapServiceReferences=function(e,t){t=t||C.ServiceLayerInfo.fromGcxMapService(e);for(var a=this.layerList._allMapServiceReferences,i=0;i<a.length;i++)t.id===a[i].id&&(a[i]=t);var r=u.MapServiceType;if(-1<[r.TILED,r.WEBTILED,r.IMAGE,r.BING,r.VECTORTILE].indexOf(t.serviceType))for(var s=this.layerList._handledMapServiceReferences,o=0;o<s.length;o++)t.id===s[o].id&&(s[o]=t);for(var l=0,n=this.layerList._addedFolderReferences;l<n.length;l++)for(var c=n[l].containedMapServices,d=0;d<c.length;d++)if(t.id===c[d].id){c[d]=t;break}},s.prototype._isLayerInLayerList=function(e){for(var t=0,a=this.layerList.getDescendants();t<a.length;t++){var i=a[t];if(i.mapService&&i.mapService.serviceLayer.url===e.url&&!i.mapService.isUserCreated)return!0}return!1},s.prototype._createLayerListItems=function(e){var i=this,t=C.ServiceLayerInfo.fromGcxMapService(e);function r(e,t){e._applyDeferredInitialVisibility(),e.unbindFromActiveTheme(),e.inActiveTheme.set(!0),i._addToLayerList(e,t)}switch(this._resetMapServiceReferences(null,t),e.mapServiceType){case u.MapServiceType.TILED:case u.MapServiceType.WEBTILED:case u.MapServiceType.IMAGE:case u.MapServiceType.BING:case u.MapServiceType.VECTORTILE:case u.MapServiceType.WMTS:for(var a=0,s=e.layers;a<s.length;a++){var o=s[a];o.catalogId||(o.catalogId=e.catalogId)}var l=e.layers[0].catalogId;if(null!=l&&!this._addedLayerListItems.containsKey(l)){var n=new v.LayerListMapServiceItem(e.layers[0].id,t,this.layerList);n.setItemVisibility(!0),r(n,l),n.populateMapServicesInParentFolders()}break;case u.MapServiceType.DYNAMIC:case u.MapServiceType.FEATURE:case u.MapServiceType.WMS:case u.MapServiceType.WFS:case u.MapServiceType.STREAM:if(e.layers[0].catalogId||(e.layers[0].catalogId=e.catalogId),e.drawingBehavior===I.DrawingBehavior.STREAM_LAYER){var c=e.layers[0];(c&&c.identifiable||c.showMapTips)&&m.registerStreamLayerAsClickable(e.serviceLayer,this.app,c.displayName)}t.layers.forEach(function(e){var t=e.gcxLayer.catalogId;if(null!=t&&!i._addedLayerListItems.containsKey(t)){var a=new h.LayerListLayerItem(e.id,e,i.layerList);a.canNotAssignVisibility.set(!1),r(a,t),i._resetAddedFolderReferences(),a.populateMapServicesInParentFolders()}})}},s.prototype._resetAddedFolderReferences=function(){var t=this,a=new l.Dictionary,i=new l.Dictionary,r=0,s=new Array,o=function(e){s.length=0,e.forEach(function(e){i.set(e,r++);var t=a.get(e);t&&t.children&&t.children.getItems().forEach(function(e){e.type===n.LayerListItemType.FOLDER&&s.push(e.id.get())})}),0<s.length&&o(s.slice())};this.layerList._addedFolderReferences.forEach(function(e){a.set(e.id.get(),e),e.parent&&e.parent!==t.layerList._userAddedLayersFolder||s.push(e.id.get())}),o(s.slice()),this.layerList._addedFolderReferences.sort(function(e,t){return i.get(e.id.get())-i.get(t.id.get())})},s.prototype._mapServiceEvent=function(e,t){var a,i,r,s=this.app.event(t),o=Object.keys(s.subscriptions);for(a=0;a<o.length;a++){var l=s.subscriptions[o[a]];if(l.scope&&l.scope.id&&"module-Mapping-LayerList"===l.scope.id){i=o[a],r=l;break}}i&&s.unsubscribe(i),this.app.event(t).publish(e),s.subscriptions[i]=r},s.prototype._addToLayerList=function(e,t){var a=this._layerListLookup.get(t);a?null!=a.parentLookupId?this._addChildToLayerList(e,t):this._addOrphanToLayerList(e,t):this.app.trace.error("Layer list tree structure unable to be built for the following item: "+t)},s.prototype._addChildToLayerList=function(e,t){var a=this._layerListLookup.get(t),i=this._addedLayerListItems.get(a.parentLookupId),r=this._layerListLookup.get(a.parentLookupId);if(null==i){var s=L.LayerCatalogModule.instance.checkboxSuffix;s&&""!==s&&r.displayName.endsWith(s)&&(r.displayName=r.displayName.slice(0,r.displayName.length-s.length));var o=new p.LayerListFolderItem(a.parentLookupId,r.displayName,this.layerList);o.isUserCreated=!0,o.children.addItem(e),r.addedChildrenLookupIds.push(t),o.isExpanded.set(!0),o.configuredVisible=!0,o.isVisible.set(!0),this._addToLayerList(o,a.parentLookupId),this._addedLayerListItems.set(a.parentLookupId,o)}else{var l=this._findIndexToInsertChildLayerListItem(r.addedChildrenLookupIds,a);i.children.insertItem(l,e),r.addedChildrenLookupIds.splice(l,0,t),i.refreshOnDemandItemCollection()}this._addedLayerListItems.set(t,e)},s.prototype._addOrphanToLayerList=function(e,t){var a,i=this,r=this._layerListLookup.get(t);if(0===this._layerListRoot.children.getLength()){if(this.layerList._userAddedLayersFolder){if(!(a=this.layerList._userAddedLayersFolder).children.contains(this._layerListRoot)){if(this._layerListRoot.layerList&&this._layerListRoot.layerList.mapInfo&&this._layerListRoot.layerList.mapInfo.gcxMap&&this._layerListRoot.layerList.mapInfo.gcxMap.layerThemesInfo&&this._layerListRoot.layerList.mapInfo.gcxMap.layerThemesInfo&&this._layerListRoot.layerList.mapInfo.gcxMap.layerThemesInfo.themes&&0<this._layerListRoot.layerList.mapInfo.gcxMap.layerThemesInfo.themes.length)for(var s=this._layerListRoot.layerList.mapInfo.gcxMap.layerThemesInfo.themes,o=function(t){0===l._layerListRoot.layerThemeSettings.filter(function(e){return e.theme.id===t.id}).length&&l._layerListRoot.layerThemeSettings.push(new f.LayerThemeSetting(t,!0))},l=this,n=0,c=s;n<c.length;n++)o(c[n]);this._layerListRoot.canDisplayItem.set(!0),this._layerListRoot.inActiveTheme.set(!0),this._layerListRoot.displayItem.set(!0),this._layerListRoot.isExpanded.set(!0),this._layerListRoot.isVisible.set(!0),a.children.insertItem(0,this._layerListRoot)}}else a=this._layerListRoot,this._layerCatalogFolderInLayerList||(this.layerList.children.insertItem(0,a),this._layerCatalogFolderInLayerList=!0);this._layerListRoot.configuredVisible=!0,-1<this.layerList._addedFolderReferences.map(function(e){return e.id.get()}).indexOf(this._layerListRoot.id.get())||this.layerList._addedFolderReferences.push(this._layerListRoot),this._layerListRoot.isVisible.set(!0),this.layerList._userAddedFolderInitialized=!0}var d=this._layerListLookup.keys().filter(function(e){return null==i._layerListLookup.get(e).parentLookupId&&i._addedLayerListItems.containsKey(e)}),g=this._findIndexToInsertChildLayerListItem(d,r);this._layerListRoot.children.insertItem(g,e),this._addedLayerListItems.set(t,e),this._layerListRoot.isExpanded.set(!0),this.layerList._userAddedLayersFolder&&this.layerList._userAddedLayersFolder.isExpanded.set(!0),a&&(a.canDisplayItem.set(!0),a.inActiveTheme.set(!0),a.displayItem.set(!0),a.isExpanded.set(!0),a.isVisible.set(!0),a.parent&&a.parent instanceof p.LayerListFolderItem&&a.parent.refreshOnDemandItemCollection())},s.prototype._findIndexToInsertChildLayerListItem=function(e,t){var a;for(a=0;a<e.length;a++){var i=e[a],r=this._layerListLookup.get(i);if(r.siteIndex>t.siteIndex)break;if(r.siteIndex===t.siteIndex&&r.order>t.order)break}return a},s.prototype.getState=function(){var r=this,s=new Array;return this._addedLayerListItems.keys().forEach(function(e){var t,a,i=r._addedLayerListItems.get(e);i.type===n.LayerListItemType.LAYER&&(t=i.layer.displayName,a=i.layer.gcxLayer.mapService.id),i.type===n.LayerListItemType.MAPSERVICE&&(t=i.mapService.displayName,a=i.mapService.id),t&&a&&s.push({layerId:e,layerDisplayName:t,mapServiceObjectId:a})}),{layers:s}},s.prototype._getSeedSiteIdFromUrl=function(e){return e.substring(e.lastIndexOf("/")+1)},s.prototype._getSeedSiteUrlFromSiteId=function(t){var a=this;return this._siteUrls.filter(function(e){return a._getSeedSiteIdFromUrl(e)===t})[0]},s);function s(){var e=null!==r&&r.apply(this,arguments)||this;return e._siteUrls=new Array,e._restoredMapServicesPromises=new Array,e._mapServiceCreatedPromises=new Array,e._failedMapServices=new Array,e._failedLayerNames=new Array,e}e.EssentialsSiteProvider=a})},"Mapping/modules/LayerCatalog/IProvider":function(){define(["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})},"Mapping/modules/LayerCatalog/LayerCatalogConstructor":function(){define(["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function a(e){this.catalogs=new Array,this.catalogs.push(new i(e))}t.LayerCatalogConstructor=a;var i=function(o){var t=this;this.mapServiceId="N/A";var e=o.keys();if(0<e.length){this.entries=new Array;var a=e.filter(function(e){return null==o.get(e).parentLookupId});a.sort(function(e,t){var a=o.get(e),i=o.get(t),r=a.siteIndex,s=i.siteIndex;return r!=s?r-s:a.order-i.order}),a.forEach(function(e){t.entries.push(new r(e,o))})}};t.LayerCatalogRoot=i;var r=function t(e,a){var i=this;this.id=e;var r=a.get(e);this.displayName=r.displayName,this.type=r.isFolder?"folder":"layer",r.isFolder&&(this.entries=new Array),0<r.childrenLookupIds.length&&r.childrenLookupIds.forEach(function(e){i.entries.push(new t(e,a))})};t.LayerCatalogEntry=r})},"Mapping/modules/LayerCatalog/LayerCatalogModule":function(){var i,c=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","geocortex/framework/application/ModuleBase","./BaseLayerCatalogViewModel","./MapUtilities","geocortex/infrastructure/commands.meta"],function(e,t,a,i,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,l=(o=a.ModuleBase,c(n,o),n.prototype.initialize=function(e){var t=this;if(e.hasOwnProperty("layerCatalogProviders")&&dojo.isArray(e.layerCatalogProviders)&&this._loadProviders(e.layerCatalogProviders),this.app.waitUntilSiteInitializing().then(function(){t._onSiteInitialized()}),e.hasOwnProperty("checkboxes")){var a=e.checkboxes;a.hasOwnProperty("visibility")&&(this.checkboxVisibility=i.CheckboxVisibility[a.visibility]),a.hasOwnProperty("suffix")&&(this.checkboxSuffix=a.suffix)}},n.prototype.getStateFilter=function(){return{layers:{item:this.app.project.filter.object}}},n.prototype.applyState=function(t){var a=this;return this.app.event("ProjectLoadedEvent").once(this,function(){var e=a._providers.filter(function(e){return e.isEnabled&&e.canExecuteApplyLayerCatalogDetails(null)})[0];null!=e&&e.reset(t)}),Promise.resolve()},n.prototype.exportState=function(){var e,t=this._providers.filter(function(e){return e.isEnabled&&e.canExecuteApplyLayerCatalogDetails(null)})[0];return null!=t&&(e=t.getState()),Promise.resolve(e)},n.prototype._loadProviders=function(e){var t=this;e.forEach(function(e){e.libraryId&&!t.app.allLibrariesLoaded?t._loadProviderWhenLibrariesDownloaded(e):t._loadProvider(e)})},n.prototype._loadProviderWhenLibrariesDownloaded=function(e){var t=this,a=this.app.event("ViewerLibrariesDownloadedEvent").subscribe(this,function(){t.app.event("ViewerLibrariesDownloadedEvent").unsubscribe(a),t._loadProvider(e)})},n.prototype._loadProvider=function(e){var t=dojo.getObject(e.type);if(t){var a=new t(this.app,e.libraryId||this.libraryId);a.isEnabled=!(!1===e.enabled),a.isEnabled&&a.initialize(e.configuration||{}),this._providers.push(a)}else this.app.trace.error(this.id+" can't find layer catalog provider typed "+e.type)},n.prototype._onSiteInitialized=function(){var e=this;this.app.commandRegistry.command("GetLayerCatalog").register(this,this._executeGetLayerCatalog,this._canExecuteGetLayerCatalog),this.app.commandRegistry.command("GetLayerCatalogDetails").register(this,this._executeGetLayerCatalogDetails,this._canExecuteGetLayerCatalogDetails),this.app.commandRegistry.command("ApplyLayerCatalogDetails").register(this,this._executeApplyLayerCatalogDetails,this._canExecuteApplyLayerCatalogDetails),this.app.commandRegistry.command("ClearLayerCatalogLayers").register(this,this._executeClearLayerCatalogLayers),this.app.commandRegistry.command("ShowLayerCatalog").register(this,this._executeShowLayerCatalog,this._canExecuteShowLayerCatalog),this.app.commandRegistry.command("GetLayerCatalogMapServiceIds").register(this,this._executeGetLayerCatalogMapServiceIds),this.app.commandRegistry.command("RemoveLayerCatalogItem").register(this,this._executeRemoveLayerCatalogItem),this.app.command("LayerCatalogRestoreMapService").register(this,this.restoreMapService),s.Commands.commandsMetadata.push({name:"ShowLayerCatalog",metadata:{arguments:"none",description:"Shows the layer catalog view.",isHyperlinkable:!0,visibility:"public"}}),this.app.commandRegistry.command("AddCatalogLayers").register(this,this._executeAddCatalogLayers,this._canExecuteAddCatalogLayers),s.Commands.commandsMetadata.push({name:"AddCatalogLayers",metadata:{arguments:"Comma seperated string of layer ids.",description:"Adds catalog layers.",isHyperlinkable:!1,visibility:"public"}}),this.app&&this.app.urlParameters&&this.app.urlParameters.catalogLayers&&setTimeout(function(){e.app.commandRegistry.command("AddCatalogLayers").execute(e.app.urlParameters.catalogLayers)},0),this.app.commandRegistry.command("AppendCatalogLayers").register(this,this._executeAppendCatalogLayers,this._canExecuteAppendCatalogLayers),s.Commands.commandsMetadata.push({name:"AppendCatalogLayers",metadata:{arguments:"Comma seperated string of layer ids.",description:"Appends catalog layers.",isHyperlinkable:!1,visibility:"public"}})},n.prototype.restoreMapService=function(e){var t=this._providers.filter(function(e){return e.isEnabled&&e.canExecuteApplyLayerCatalogDetails(null)})[0];null!=t&&t.restoreMapService(e)},n.prototype._executeGetLayerCatalog=function(e){var t=this._providers.filter(function(e){return e.isEnabled&&e.canExecuteGetLayerCatalog(null)})[0];null!=t&&t.executeGetLayerCatalog(e)},n.prototype._canExecuteGetLayerCatalog=function(){return this._providers.some(function(e){return e.isEnabled&&e.canExecuteGetLayerCatalog(null)})},n.prototype._executeGetLayerCatalogDetails=function(e,t){var a=this._providers.filter(function(e){return e.isEnabled&&e.canExecuteGetLayerCatalog(null)})[0];null!=a&&a.executeGetLayerCatalogDetails(e,t)},n.prototype._canExecuteGetLayerCatalogDetails=function(){return this._providers.some(function(e){return e.isEnabled&&e.canExecuteGetLayerCatalogDetails(null,null)})},n.prototype._executeApplyLayerCatalogDetails=function(e){var t=this._providers.filter(function(e){return e.isEnabled&&e.canExecuteApplyLayerCatalogDetails(null)})[0];null!=t&&t.executeApplyLayerCatalogDetails(e)},n.prototype._canExecuteApplyLayerCatalogDetails=function(){return this._providers.some(function(e){return e.isEnabled&&e.canExecuteApplyLayerCatalogDetails(null)})},n.prototype._executeClearLayerCatalogLayers=function(){var e=this._providers.filter(function(e){return e.isEnabled&&e.canShowLayerCatalog()})[0];null!=e&&e.executeClearLayerCatalogLayers()},n.prototype._executeShowLayerCatalog=function(){this.app.commandRegistry.command("ActivateView").execute("LayerCatalogView")},n.prototype._canExecuteShowLayerCatalog=function(){return this._providers.some(function(e){return e.isEnabled&&e.canShowLayerCatalog()})},n.prototype._executeAddCatalogLayers=function(e){if(e){if(Array.isArray(e)&&0===e.length)return;this.app.eventRegistry.event("OnAddCatalogLayersCommandEvent").publish(e)}},n.prototype._executeAppendCatalogLayers=function(e){if(e){if(Array.isArray(e)&&0===e.length)return;this.app.eventRegistry.event("OnAppendCatalogLayersCommandEvent").publish(e)}},n.prototype._canExecuteAddCatalogLayers=function(){return this._canExecuteShowLayerCatalog()},n.prototype._canExecuteAppendCatalogLayers=function(){return this._canExecuteShowLayerCatalog()},n.prototype._executeGetLayerCatalogMapServiceIds=function(e){var t=this._providers.filter(function(e){return e.isEnabled&&e.canShowLayerCatalog()})[0];null!=t&&t.executeGetLayerCatalogMapServiceIds(e)},n.prototype._executeRemoveLayerCatalogItem=function(e){var t=this._providers.filter(function(e){return e.isEnabled&&e.canShowLayerCatalog()})[0];null!=t&&t.executeRemoveLayerCatalogItem(e)},n);function n(e,t){var a=o.call(this,e,t)||this;return a._providers=new Array,r.MapUtilities.app=a.app,a.checkboxVisibility=i.CheckboxVisibility.none,a.checkboxSuffix=null,n.instance=a}t.LayerCatalogModule=l})},"Mapping/modules/LayerCatalog/LayerCatalogState":function(){define(["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})},"Mapping/modules/LayerCatalog/LayerCatalogView":function(){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","./BaseLayerCatalogView"],function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=(i=a.BaseLayerCatalogView,o(s,i),s.prototype.handleKeyDown=function(e,t,a){var i=e.which?e.which:e.keyCode;return this._isSpecialChar(i)||13===i&&(this.viewModel.filterCatalog(),t.blur()),!0},s.prototype.handleExpand=function(e,t,a){if(this._ignoreHandleExpand)return!(this._ignoreHandleExpand=!1);a&&a.expanded.set(!a.expanded.get())},s.prototype.handleSelectAllChecked=function(e,t,a){return a.toggleAllChildren(t.checked),this._ignoreHandleExpand=!0},s.prototype.handleLayerChecked=function(e,t,a){a&&a.isChecked.set(!a.isChecked.get())},s.prototype.handleClear=function(e,t,a){this.viewModel.showingAll.get()&&this.viewModel.reset()},s.prototype.handleSearch=function(e,t,a){this.viewModel.filterCatalog()},s.prototype.handleShowSelectedClick=function(){this.viewModel.toggleSelected()},s.prototype.handleRefreshClick=function(){this.viewModel.refreshLayerCatalog()},s);function s(){return null!==i&&i.apply(this,arguments)||this}t.LayerCatalogView=r})},"Mapping/modules/LayerCatalog/LayerCatalogViewModel":function(){var i,l=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","./BaseLayerCatalogViewModel","./CatalogEntryType"],function(e,t,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=(i=a.LayerCatalogViewModelBase,l(o,i),o.prototype.ready=function(){i.prototype.ready.call(this),this.catalogCached&&(this.reset(),this.syncAddedLayers())},o.prototype.reset=function(){this._clearFilter(),this.showingAll.get()||this.toggleSelected()},o.prototype.filterCatalog=function(){var e=this.filterText.get(),t=this.getFilterProvider();if(t)t.filter(e,this.filteredCatalog);else for(var a=0;a<this.filteredCatalog.get().length;a++)this.filteredCatalog.getAt(a).filter(e)},o.prototype._clearFilter=function(){this.filterText.set(""),this.filterCatalog()},o.prototype.toggleSelected=function(){this.filterText.set(""),this.showingAll.set(!this.showingAll.get());var e="",t=!1;if(this.showingAll.get())this.showNoLayersSelectedText.set(!1),this._clearFilter(),e="language-layer-catalog-show-selected-button";else{this.filterText.set("");for(var a=this._getFlattenedEntries(),i=0;i<a.length;i++){var r=!1;a[i].type===s.LAYER?a[i].isChecked.get()&&(r=t=!0):(a[i].someChecked.get()||a[i].allChecked.get())&&(r=!0),a[i].visible.set(r)}for(i=0;i<this.filteredCatalog.get().length;i++)(this.filteredCatalog.getAt(i).someChecked.get()||this.filteredCatalog.getAt(i).allChecked.get())&&this.filteredCatalog.getAt(i).expandAll(!0);e="language-layer-catalog-show-all-button",t?this.showNoLayersSelectedText.set(!1):this.showNoLayersSelectedText.set(!0)}t&&!this.showingAll.get()?this.clearButtonVisible.set(!0):this.clearButtonVisible.set(!1),this.showSelectedButtonText.set(this.app.getResource(this.libraryId,e))},o);function o(e,t){return i.call(this,e,t)||this}t.LayerCatalogViewModel=r})},"Mapping/modules/LayerCatalog/MapUtilities":function(){define(["require","exports","geocortex/essentials/MapService","geocortex/essentials/Layer","geocortex/geocortex","geocortex/essentials/ServiceHelper","geocortex/essentials/MapServiceConstants","geocortex/essentials/LayerVisibilityEventManager","geocortex/essentials/FeatureLayerService","geocortex/essentials/WFSLayerService","geocortex/essentials/StreamLayerService","geocortex/essentials/utilities/UrlUtilities","geocortex/essentials/RestHelperHTTPService","geocortex/framework/SimplePromise"],function(L,e,m,c,d,I,f,b,A,w,S,s,o,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=(i.addLayerToWebTiledService=function(e,t){this._addLayerToService(e,t)},i.addLayerToVectorTiledService=function(e,t){this._addLayerToService(e,t)},i.addLayerToTiledService=function(e,t){this._addLayerToService(e,t)},i.addLayerToImageService=function(e,t){this._addLayerToService(e,t)},i.addLayerToBingService=function(e,t){this._addLayerToService(e,t)},i.addLayersToWMSService=function(e,r,t){var s=this;e.forEach(function(t){if(!r.layers.some(function(e){return e.id==t.id})){t.parentLayerId=null;var e=r.url+"/layers/"+t.id,a=s._createGcxLayer(e,t,r,t.name,t.id);a.wmsLayerName=t.nativeID,r.layers.push(a);var i=new esri.layers.WMSLayerInfo({name:a.wmsLayerName,title:a.name});i.styleName=a.styleName,r.serviceLayer.layerInfos.push(i)}});var a=r.layers;if(a&&0<a.length){var i=a.filter(function(e){return 1==e.isVisible()});if(i&&0<i.length){var o=i.map(function(e){return e.wmsLayerName});o&&0<o.length&&r.serviceLayer.setVisibleLayers(o)}}},i.addLayersToWMTSService=function(e,i,t){var r=this;e.forEach(function(t){if(!i.layers.some(function(e){return e.id==t.id})){var e=i.url+"/layers/"+t.id,a=r._createGcxLayer(e,t,i,t.name,t.id);i.layers.push(a)}})},i._addLayerToService=function(e,i){var r=this;if("MapService"===e.drawingBehavior&&e.layers&&0<e.layers.length)e.layers.forEach(function(t){if(!i.layers.some(function(e){return e.id==t.id})){var e=i.url+"/layers/"+t.id,a=r._createGcxLayer(e,t,i,t.name,t.id);i.layers.push(a)}});else{var t=new c.Layer(i.originalUrl);t.id="0",t.isUserCreated=!0,t.userLayerType=f.UserLayerType.LAYER_CATALOG,t.mapService=i,t.catalogId=d._getProperties(e.properties).layerCatalogLookupId,i.layers.push(t)}},i.addLayersWithDynamicDefinitions=function(e,i){var r=this;e.forEach(function(t){if(t.dynamicDefinition&&""!=t.dynamicDefinition&&!i.layers.some(function(e){return e.id==t.id})){var e=i.url+"/layers/"+t.id,a=r._createGcxLayer(e,t,i,t.displayName,t.id);i.add(a)}})},i.addLayersToDynamicMapService=function(o,l){var n=this,c=o.map(function(e){return e.id}),d=c.slice(),e=l.serviceLayer;e.layerInfos.forEach(function(t,e){if(0<=c.indexOf(t.id.toString())){var a=l.layers.filter(function(e){return e.id==t.id.toString()})[0];if(null==a){var i=o.filter(function(e){return e.id==t.id})[0],r=l.url+"/layers/"+i.id,s=n._createGcxLayer(r,i,l,t.name,t.id.toString());s.parentLayerId=null,l.layers.push(s)}else a.isVisible()||d.splice(d.indexOf(t.id.toString()),1)}}),d&&0<d.length?e.setVisibleLayers(d):e.setVisibleLayers(["-1"])},i.addLayerToFeatureService=function(e,t){var a=t.serviceLayer;if(!t.layers.some(function(e){return e.id==a.layerId.toString()})){var i=t.url+"/layers/"+e.id,r=this._createGcxLayer(i,e,t,e.displayName,a.layerId.toString());t.layers.push(r)}},i.addLayerToWFSOrStreamService=function(e,i){var r=this;e.forEach(function(t){if(!i.layers.some(function(e){return e.id==t.id})){var e=i.url+"/layers/"+t.id,a=r._createGcxLayer(e,t,i,t.name,t.id);i.layers.push(a)}})},i._createGcxLayer=function(e,t,a,i,r){var s=new c.Layer(e);t.visible=!0,s.mapService=a,s._configureObject(t),s.catalogId=d._getProperties(t.properties).layerCatalogLookupId,s.includeInLayerList=!0,s.site=this.app.site,s.name=i,s.id=r,s.isInitialized=!0,s.configuredVisible=!0,s.isUserCreated=!0,s.userLayerType=f.UserLayerType.LAYER_CATALOG;for(var o,l=e.split("/"),n=0;n<l.length;n++)if("sites"==l[n]){o=l[n+1];break}return s.iconUri&&(s.iconUri=s.iconUri.replace(this.app.site.id,o)),s},i.getUrlForCreatingServiceLayer=function(e){var t=e.serviceUrl;return e.serviceToken&&(t=o.RestHelperHTTPService.appendTokenToUrl(t,e.serviceToken)),t},i.createMapServiceFromJson=function(a,e){var i,r,s=this,t=$.Deferred(),o=I.ServiceHelper.extractConnectionStringValue,l=o(a.connectionString,"styleUrl"),n=e+"/map/mapservices/"+a.id,c=a.drawingBehavior;if(a.serviceType,c===f.DrawingBehavior.MAP_SERVICE)switch((r=new m.MapService(n)).essentialsMap=this.app.site.essentialsMap,r.createFromDefinition(a),a.serviceType){case f.MapServiceType.WEBTILED:var d=o(a.connectionString,"subDomains"),g=[];d&&(g=d.split(","));var p={copyright:a.copyright,id:a.id,subDomains:g};r.subDomains=g,r._processConnectionString(a.connectionString,a),i=new esri.layers.WebTiledLayer(this.getUrlForCreatingServiceLayer(r),p),r.url=n;break;case f.MapServiceType.TILED:r._processConnectionString(a.connectionString,a),i=new esri.layers.ArcGISTiledMapServiceLayer(this.getUrlForCreatingServiceLayer(r)),this._applyAttributionUrl(a,i);break;case f.MapServiceType.DYNAMIC:r._processConnectionString(a.connectionString,a),i=new esri.layers.ArcGISDynamicMapServiceLayer(this.getUrlForCreatingServiceLayer(r)),this._applyAttributionUrl(a,i),r.layerVisibilityEventManager=new b.LayerVisibilityEventManager(r,i),null!=a.format&&i.setImageFormat(a.format.toLowerCase());break;case f.MapServiceType.IMAGE:r._processConnectionString(a.connectionString,a),i=new esri.layers.ArcGISImageServiceLayer(this.getUrlForCreatingServiceLayer(r)),this._applyAttributionUrl(a,i),i.setImageFormat(this._getAgsImageServiceImageFormat(a.imageFormat));break;case f.MapServiceType.VECTORTILE:L(["esri/layers/VectorTileLayer"],function(e){r._processConnectionString(a.connectionString,a);var t=s.getUrlForCreatingServiceLayer(r);l&&(t=l),r._addCredentialForLayer(),i=new e(t)}),this._applyAttributionUrl(a,i);break;case f.MapServiceType.BING:var y={},u=void 0;(u=o(a.connectionString,"mapStyle"))&&0<u.length&&(y.mapStyle=u),(u=o(a.connectionString,"culture"))&&0<u.length&&(y.culture=u),(u=o(a.connectionString,"key"))&&0<u.length&&(y.bingMapsKey=u),i=new esri.virtualearth.VETiledLayer(y),r.bingProperties=y,r._processConnectionString(a.connectionString,a);break;case f.MapServiceType.WMS:this._extendWms(),r._processConnectionString(a.connectionString,a),i=new esri.layers.WMSLayer(this.getUrlForCreatingServiceLayer(r),{resourceInfo:{extent:this.app.site.essentialsMap.initialExtent,layerInfos:[],version:a.serverVersion},visibleLayers:[]});var h=this.app.site.essentialsMap.spatialReference.wkid;102100==h&&(h=3857),i.spatialReferences.push(h),i.preferredSpatialReference=h,this._applyAttributionUrl(a,i),r.layerVisibilityEventManager=new b.LayerVisibilityEventManager(r,i);var C=null;null!=a.imageFormat&&(C="jpeg"==(C=a.imageFormat.replace(/^image\//,""))?"jpg":C),i.setImageFormat(C),i.show(),this._corsRequest(this.getUrlForCreatingServiceLayer(r)).then(function(){i.refresh()},function(e){i.refresh()});break;case f.MapServiceType.WMTS:r._processConnectionString(a.connectionString,a),this.addLayersToWMTSService(a.layers,r,e),r._createServiceLayer(),i=r.serviceLayer;break;default:t.reject()}else c===f.DrawingBehavior.FEATURE_LAYER?((r=new A.FeatureLayerService(n)).createFromDefinition(a),r._configurePropertiesAndrenderer(a),r.essentialsMap=this.app.site.essentialsMap,r._processConnectionString(a.connectionString,a),i=new esri.layers.FeatureLayer(this.getUrlForCreatingServiceLayer(r)),this._applyAttributionUrl(a,i)):c===f.DrawingBehavior.WFS_LAYER?((r=new w.WFSLayerService(n)).createFromDefinition(a),r.essentialsMap=this.app.site.essentialsMap,r._processConnectionString(a.connectionString,a),this.addLayerToWFSOrStreamService(a.layers,r),r._restWFSConfigObject=a,r._createServiceLayer(),i=r.serviceLayer):c===f.DrawingBehavior.STREAM_LAYER&&((r=new S.StreamLayerService(n)).createFromDefinition(a),r.essentialsMap=this.app.site.essentialsMap,r._processConnectionString(a.connectionString,a),r._configureStreamSettings(a.streamSettings),r._createServiceLayer(),this.addLayerToWFSOrStreamService(a.layers,r),i=r.serviceLayer);function v(){r.serviceLayer=i,r.minScale&&r.serviceLayer.setMinScale(r.minScale),r.minScale&&r.serviceLayer.setMaxScale(r.maxScale),r.disableClientCaching&&r.serviceLayer&&r.serviceLayer.setDisableClientCaching&&r.serviceLayer.setDisableClientCaching(!0),r.isUserCreated=!0,r.userLayerType=f.UserLayerType.LAYER_CATALOG,r.includeInLayerList=!0,i.setOpacity(r.opacity);var e=a.properties.filter(function(e){return"layerCatalogLookupId"==e.name})[0].value.split(".")[0];r.id="{0}-{1}".format(e,a.id),r.serviceLayer.id=r.id}return i.loaded?(v(),t.resolve(r)):(i.on("load",function(e){v(),t.resolve(r)}),i.on("error",function(e){console.log("Error in initializing layer: {0}".format(e.error)),t.reject()})),t.promise()},i._corsRequest=function(i,r,s){var o=this;return new t.SimplePromise(function(t,a){try{L(["dojo/request"],function(e){return s=!!s,e(i,{headers:{"X-Requested-With":null},withCredentials:r=!!r}).response.then(function(e){return t()},function(e){return s?a(e):t(o._corsRequest(i,!r,!0))})})}catch(e){return console.log("Error in initializing WMS layer: "+e),a(e)}})},i._getAgsImageServiceImageFormat=function(e){if(null==e||e.length<1)return null;var t=e.toLowerCase();switch(t){case"jpgpng":case"png":case"png8":case"png24":case"png32":case"jpeg":case"jpg":case"gif":case"bmp":case"tiff":return t;default:return null}},i._extendWms=function(){if(!m.MapService._wmsExtended){var i=esri.layers.WMSLayer._meta.hidden.getImageUrl,h=/.*images\/pixel.png$/;esri.layers.WMSLayer.extend({getImageUrl:function(e,t,a,y){var u=this;i.apply(this,[e,t,a,function(e){if(h.test(e))y(e);else{for(var t={},a=0,i=u.layerInfos;a<i.length;a++){var r=i[a];t[r.name]=r.styleName}for(var s=[],o=0,l=u.visibleLayers;o<l.length;o++){var n=l[o];s.push(t[n])}var c=s.join(","),d=e.substring(e.lastIndexOf("?")+1,e.length),g=dojo.queryToObject(d);g.STYLES=c,u.preferredSpatialReference&&(g[g.CRS?"CRS":"SRS"]="EPSG:"+u.preferredSpatialReference),u.__gcxWmsImageFormat&&(g.FORMAT=u.__gcxWmsImageFormat);var p=e.substring(0,e.lastIndexOf("?")+1)+dojo.objectToQuery(g);y(p)}}])}}),m.MapService._wmsExtended=!0}},i._applyAttributionUrl=function(e,t){var a=e.attributionDataUrl,i=e.hasAttributionData;if(a&&""!==a)t.attributionDataUrl=a,t.hasAttributionData=!0;else if(i){t.attributionDataUrl=s.UrlUtilities.simplify(e.url)+"/attribution",t.hasAttributionData=!0;var r=o.RestHelperHTTPService.getTokenForScope(t.attributionDataUrl);r&&(t.attributionDataUrl=o.RestHelperHTTPService.appendTokenToUrl(t.attributionDataUrl,r))}},i);function i(){}e.MapUtilities=a})},"Mapping/modules/LayerCatalog/PagedLayerCatalogView":function(){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","./BaseLayerCatalogView"],function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=(i=a.BaseLayerCatalogView,o(s,i),s.prototype.handleKeyDown=function(e,t,a){var i=e.which?e.which:e.keyCode;if(this._isSpecialChar(i))return!0;if(13===i&&t.value){var r=this.viewModel.filterText.get();this.viewModel.filterCatalog(r),t.blur()}return!0},s.prototype.handleSearch=function(e,t,a){this.viewModel.filterCatalog(this.viewModel.filterText.get())},s.prototype.handleLayerClick=function(e,t,a){a&&a.isChecked.set(!a.isChecked.get())},s.prototype.handleFolderClick=function(e,t,a){if(this._ignoreHandleFolderClick)return!(this._ignoreHandleFolderClick=!1);this.viewModel.presentableCatalog.attachToCollection(a.entries),this.viewModel.setBackText(this.viewModel.breadcrumb.get()),this.viewModel.setBreadcrumbText(a.displayName),this.viewModel.currentFolderName.set(a.displayName),this.viewModel.backDisabled.set(!1),this.app.command("FocusOnFirstInputInView").execute(this)},s.prototype.handleSelectAllChecked=function(e,t){return!(!this.viewModel.resultPage||!this.viewModel.resultPage.getLength()||(this.viewModel.resultPage.getAt(0).parent.toggleAllChildren(t.checked),0))},s.prototype.handleBackClick=function(e,t,a){if(this.viewModel.showingAll.get()){var i=this.viewModel.presentableCatalog.items.getAt(0).parent;if(i&&i.parent&&i.parent.entries){var r=i.parent;this.viewModel.presentableCatalog.attachToCollection(r.entries),this.viewModel.setBreadcrumbText(r.displayName),this.viewModel.currentFolderName.set(r.displayName),this.viewModel.backDisabled.set(!1),r.parent?this.viewModel.setBackText(r.parent.displayName):this.viewModel.setBackText(this.viewModel.homeText)}else this.viewModel.presentableCatalog.attachToCollection(this.viewModel.filteredCatalog),this.viewModel.setBreadcrumbText(null),this.viewModel.currentFolderName.set(this.viewModel.homeText),this.viewModel.backDisabled.set(!0),this.viewModel.setBackText(this.viewModel.homeText)}else this.viewModel.reset()},s.prototype.handleShowSelectedClick=function(e,t,a){this.viewModel.toggleShowSelection()},s.prototype.handleClear=function(e,t,a){this.viewModel.showingAll.get()&&this.viewModel.reset()},s.prototype.handleRefreshClick=function(){this.viewModel.refreshLayerCatalog()},s);function s(){return null!==i&&i.apply(this,arguments)||this}t.PagedLayerCatalogView=r})},"Mapping/modules/LayerCatalog/PagedLayerCatalogViewModel":function(){var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","./BaseLayerCatalogViewModel","geocortex/framework-ui/PresentableCollection","geocortex/framework/observables"],function(e,t,a,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=(r=a.LayerCatalogViewModelBase,n(l,r),l.prototype.ready=function(){r.prototype.ready.call(this),this.catalogCached&&(this.reset(),this.syncAddedLayers())},l.prototype._clearFilter=function(){this.filterText.set("");for(var e=0;e<this.filteredCatalog.get().length;e++)this.filteredCatalog.getAt(e).filter(this.filterText.get())},l.prototype.filterCatalog=function(i){var r=this;if(i){var e=this.getFilterProvider();(e?e.filter(i,this.filteredCatalog):new Promise(function(e,t){for(var a=0;a<r.filteredCatalog.get().length;a++)r.filteredCatalog.getAt(a).filter(i);e()})).then(function(){for(var e=new Array,t=r._getFlattenedEntries(!0),a=0;a<t.length;a++)t[a].visible.get()&&e.push(t[a]);r.presentableCatalog.attachToCollection(new s.ObservableCollection(e))})}},l.prototype.reset=function(){this.backDisabled.set(!0),this.filterText.set(""),this._clearFilter(),this.presentableCatalog.attachToCollection(this.filteredCatalog),this.setBreadcrumbText(null),this.setBackText(this.homeText),this.showingAll.set(!0),this.showNoLayersSelectedText.set(!1),this.showSelectedButtonText.set(this.app.getResource(this.libraryId,"language-layer-catalog-show-selected-button")),this.allChecked.set(!1),this.showGroupCheckbox.set(!1),this.currentFolderName.set(this.homeText)},l.prototype.setBreadcrumbText=function(e){e?this.breadcrumb.set(e):this.breadcrumb.set(this.homeText)},l.prototype.setBackText=function(e){e&&(20<e.length&&(e="< "+(e=e.substring(0,20))+"..."),this.backText.set(e))},l.prototype.toggleShowSelection=function(){var e=this.getCheckedEntries();if(this.showingAll.get()){for(var t=0;t<e.length;t++)e[t].visible.set(!0);this.showSelectedButtonText.set(this.app.getResource(this.libraryId,"language-layer-catalog-show-all-button")),this.breadcrumb.set(this.app.getResource(this.libraryId,"language-layer-catalog-showing-selected-text")),this.backDisabled.set(!0),this.presentableCatalog.attachToCollection(new s.ObservableCollection(e)),0===e.length&&this.showNoLayersSelectedText.set(!0)}else this.showNoLayersSelectedText.set(!0),this.showSelectedButtonText.set(this.app.getResource(this.libraryId,"language-layer-catalog-show-selected-button")),this.breadcrumb.set(this.homeText),this.backDisabled.set(!0),this.presentableCatalog.attachToCollection(this.filteredCatalog),this.showNoLayersSelectedText.set(!1);this.setBackText(this.homeText),this.showingAll.set(!this.showingAll.get()),this.presentableCatalog.sortCollection()},l);function l(e,t){var a=r.call(this,e,t)||this;return a.presentableCatalog=null,a.resultPage=null,a.breadcrumb=null,a.backText=null,a.backDisabled=null,a.homeText=null,a.currentFolderName=null,a.backString=null,a.allChecked=null,a.showGroupCheckbox=null,a.presentableCatalog=new i.PresentableCollection,a.presentableCatalog.attachToCollection(a.filteredCatalog),a.resultPage=a.presentableCatalog.items,a.presentableCatalog.isPaginated.set(!1),a.homeText=e.getResource(t,"language-layer-catalog-home-text"),a.presentableCatalog.pageSize.set(10),a.currentFolderName=new s.Observable(a.homeText),a.backString=new s.Observable(e.getResource(t,"language-layer-catalog-folder-up").format(a.currentFolderName.get())),a.breadcrumb=new s.Observable(a.homeText),a.backDisabled=new s.Observable(!0),a.backText=new s.Observable(a.homeText),a.allChecked=new s.Observable(!1),a.showGroupCheckbox=new s.Observable(!1),a.currentFolderName.bind(a,function(){a.backString.set(e.getResource(t,"language-layer-catalog-folder-up").format(a.currentFolderName.get()))}),a.backDisabled.bind(a,function(){a.resultPage&&a.resultPage.getLength()&&a.resultPage.getAt(0).parent?(a.allChecked.set(a.resultPage.getAt(0).parent.allChecked.get()),a.showGroupCheckbox.set(a.resultPage.getAt(0).parent.showGroupCheckbox.get()&&!a.backDisabled.get())):(a.allChecked.set(!1),a.showGroupCheckbox.set(!1))}),a.app.command("ReevaluateAllChecked").register(a,function(e){a.allChecked.set(e)}),a}t.PagedLayerCatalogViewModel=o})},"Mapping/modules/LayerCatalog/WmsPropertyNames":function(){define(["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WMS_LAYER_NAME="wmsLayerName",t.WMS_SERVICE_URL="wmsServiceUrl",t.WMS_INSERT_POSITION="defaultInsertPosition"})},"url:/Mapping/modules/LayerCatalog/LayerCatalogView.html":t,"url:/Mapping/modules/LayerCatalog/PagedLayerCatalogView.html":a,"url:/Mapping/modules/LayerCatalog/Templates/FolderItemTemplate.html":i,"url:/Mapping/modules/LayerCatalog/Templates/LayerItemTemplate.html":r}}),require(["geocortex/framework/resourceManager"],function(e){e.resourceManager.register("Mapping","inv","Mapping/modules/LayerCatalog/CSS/large.css","css","LmxjLWZpbHRlciwNCi5sYy1zZWFyY2gsDQoubGMtc2hvdy1zZWxlY3RlZCwNCi5sYy1lbnRyaWVzIHVsIGxpLA0KLmNhbmNlbC1idXR0b24sDQouYm90dG9tLA0KLmxjLWFjdGlvbnMsDQoubGMtZmlsdGVyLA0KLmxheWVyLWNhdGFsb2ctaXRlbXMsDQoubGF5ZXItY2F0YWxvZy1pdGVtcyAqIHsNCiAgICAtd2Via2l0LWJveC1zaXppbmc6IGJvcmRlci1ib3g7DQoJLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KCWJveC1zaXppbmc6IGJvcmRlci1ib3g7DQp9DQoubGF5ZXItY2F0YWxvZyBhIHsNCiAgICBjb2xvcjogIzFCN0RCRjsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQoubGF5ZXItY2F0YWxvZyBhOmFjdGl2ZSB7DQogICAgY29sb3I6ICM5OTk5OTk7DQp9DQoubGF5ZXItY2F0YWxvZyBhOmZvY3VzIHsNCiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsNCn0NCi5sYXllci1jYXRhbG9nIGEuZGlzYWJsZWQ6Zm9jdXMgew0KICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsNCn0NCi5sYy1zdGF0dXMgew0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBoZWlnaHQ6IDI0cHg7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIGxlZnQ6IDA7DQp9DQoNCi8qIC0tLS0tLSBTVEFSVDogTGF5ZXIgQ2F0YWxvZyBTZWFyY2ggRmlsdGVyIC0tLS0tLSAqLw0KLmxjLWZpbHRlciB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIGNsZWFyOiBib3RoOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIHBhZGRpbmc6IDAuNzVlbSA5ZW0gMC43NWVtIDAuNzVlbTsNCiAgICBiYWNrZ3JvdW5kOiAjRjhGOEY4Ow0KICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjRDlEOUQ5Ow0KfQ0KLmxjLXNlYXJjaCB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIHBhZGRpbmctcmlnaHQ6IDQuNWVtOw0KICAgIGJhY2tncm91bmQ6ICNGRkZGRkY7DQogICAgYm9yZGVyOiAxcHggc29saWQgI0NDQ0NDQzsNCiAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDZweDsNCiAgICAtbW96LWJvcmRlci1yYWRpdXM6IDZweDsNCiAgICBib3JkZXItcmFkaXVzOiA2cHg7DQp9DQoubGNTZWFyY2hEaXNhYmxlIHsNCiAgICBvcGFjaXR5OiAwLjU7DQp9DQoubGMtc2VhcmNoIGlucHV0LnNlYXJjaC1maWVsZCwNCi5sYy1zZWFyY2ggLnNlYXJjaC1idXR0b24gew0KICAgIGJvcmRlcjogbm9uZTsNCiAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsNCiAgICBoZWlnaHQ6IDIuNWVtOw0KfQ0KLmxjLXNlYXJjaCAuc2VhcmNoLWJ1dHRvbiwgDQoubGMtc2hvdy1zZWxlY3RlZCB7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogMDsNCiAgICByaWdodDogMDsNCn0NCi5sYy1zZWFyY2ggLnNlYXJjaC1idXR0b24gew0KICAgIGJhY2tncm91bmQ6ICNFRUVFRUUgdXJsKCJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL3NlYXJjaC0xNi5wbmciKSBjZW50ZXIgY2VudGVyIG5vLXJlcGVhdDsNCiAgICB3aWR0aDogMi41ZW07DQogICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjQ0NDQ0NDOw0KICAgIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNnB4Ow0KICAgIC13ZWJraXQtYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMHB4Ow0KICAgIC13ZWJraXQtYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMHB4Ow0KICAgIC1tb3otYm9yZGVyLXJhZGl1czogNnB4Ow0KICAgIC1tb3otYm9yZGVyLXJhZGl1cy10b3BsZWZ0OiAwcHg7DQogICAgLW1vei1ib3JkZXItcmFkaXVzLWJvdHRvbWxlZnQ6IDBweDsNCiAgICBib3JkZXItcmFkaXVzOiA2cHg7DQogICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMHB4Ow0KICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDBweDsNCn0NCi5sYy1zaG93LXNlbGVjdGVkIHsNCiAgICB3aWR0aDogOWVtOw0KICAgIGxpbmUtaGVpZ2h0OiAyLjVlbTsNCiAgICBwYWRkaW5nOiAwLjc1ZW07DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KLmxjLXNlYXJjaCAuY2xlYXItYnV0dG9uIHsNCiAgICBiYWNrZ3JvdW5kOiB1cmwoIlJlc291cmNlcy9JbWFnZXMvSWNvbnMvZGVsZXRlLTE2LnBuZyIpIGNlbnRlciBjZW50ZXIgbm8tcmVwZWF0Ow0KICAgIHdpZHRoOiAyZW07DQogICAgaGVpZ2h0IDoyLjVlbTsNCiAgICBkaXNwbGF5OiBibG9jazsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgdG9wOiAwOw0KICAgIHJpZ2h0OiAyLjVlbTsNCn0NCi5zZWxlY3RlZC1pbmRpY2F0b3Igew0KICAgIGZvbnQtc2l6ZTowLjhlbTsNCiAgICBjb2xvcjogIzk5OTk5OTsNCiAgICBtYXJnaW4tbGVmdDogMC41ZW07DQp9DQovKiAtLS0tLS0gRU5EOiBMYXllciBDYXRhbG9nIFNlYXJjaCBGaWx0ZXIgLS0tLS0tICovDQoNCi8qIC0tLS0tLSBTVEFSVDogalF1ZXJ5IEF1dG9jb21wbGV0ZSBPdmVycmlkZXMgLS0tLS0tICovDQoudWktYXV0b2NvbXBsZXRlIC51aS1zdGF0ZS1mb2N1cyB7DQogICAgYm9yZGVyOiAxcHggc29saWQgI0Q5RDlEOTsNCiAgICBiYWNrZ3JvdW5kOiAjRjhGOEY4Ow0KICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7DQogICAgY29sb3I6ICMxQjdEQkY7DQp9DQovKiAtLS0tLS0gU1RBUlQ6IGpRdWVyeSBBdXRvY29tcGxldGUgT3ZlcnJpZGVzIC0tLS0tLSAqLw0KDQoubGF5ZXItY2F0YWxvZyB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIHdpZHRoOiAzMGVtOw0KICAgIGhlaWdodDogMzcuNWVtOw0KfQ0KQG1lZGlhIGFsbCBhbmQgKG1pbi13aWR0aDogMTAwMHB4KSB7DQogICAgLmxheWVyLWNhdGFsb2cgew0KICAgICAgICB3aWR0aDogNDBlbTsNCiAgICB9DQp9DQpAbWVkaWEgYWxsIGFuZCAobWluLXdpZHRoOiAxMjAwcHgpIHsNCiAgICAubGF5ZXItY2F0YWxvZyB7DQogICAgICAgIHdpZHRoOiA1MGVtOw0KICAgIH0NCn0NCi5sYy1maWx0ZXIgew0KICAgIGhlaWdodDogNGVtOw0KfQ0KLmxjLXN0YXR1cyB7DQogICAgdG9wOiA0MCU7DQp9DQoubGMtc2VhcmNoIGlucHV0LnNlYXJjaC1maWVsZCB7DQogICAgbWF4LXdpZHRoOiAxMDAlOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGZvbnQtc2l6ZTogMWVtOw0KfQ0KLmxjLWVudHJpZXMgew0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB0b3A6IDRlbTsNCiAgICByaWdodDogMDsNCiAgICBib3R0b206IDRlbTsNCiAgICBsZWZ0OiAwOw0KICAgIG92ZXJmbG93LXk6IGF1dG87DQp9DQoubGMtdHJlZSB7DQogICAgcGFkZGluZzogMDsNCiAgICBtYXJnaW46IDA7DQp9DQoubGMtYWN0aW9ucyB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIGJvdHRvbTogMDsNCiAgICBoZWlnaHQ6IDRlbTsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBwYWRkaW5nOiAwLjc1ZW07DQogICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNEOUQ5RDk7DQogICAgdGV4dC1hbGlnbjogcmlnaHQ7DQogICAgYmFja2dyb3VuZDogI0Y4RjhGODsNCn0NCi5sYy1hY3Rpb25zIGJ1dHRvbiB7DQogICAgd2lkdGg6IDdlbTsNCiAgICBtYXJnaW4tbGVmdDogMWVtOw0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCi5mb2xkZXItaXRlbSwNCi5jYXRhbG9nLWxheWVyLWl0ZW0sDQouY2F0YWxvZy1mb2xkZXItc2VsZWN0IHsNCiAgICBtYXJnaW46IDA7DQogICAgcGFkZGluZzogMDsNCiAgICBjbGVhcjogYm90aDsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQouY2F0YWxvZy1mb2xkZXItc2VsZWN0IHsNCiAgICBtYXJnaW4tbGVmdDogMC44MjVlbTsNCn0NCi5jYXRhbG9nLWZvbGRlci1zZWxlY3QgLmxheWVyLWl0ZW0tbmFtZSB7DQogICAgZm9udC1zdHlsZTogaXRhbGljOw0KICAgIGNvbG9yOiAjNjY2NjY2Ow0KfQ0KLmxheWVyLWNhdGFsb2ctaXRlbXMgew0KICAgIG1hcmdpbjogMDsNCiAgICBwYWRkaW5nOiAwOw0KfQ0KLmxheWVyLWNhdGFsb2ctaXRlbXMgLmxheWVyLWNhdGFsb2ctaXRlbXMgew0KICAgIG1hcmdpbi1sZWZ0OiAxLjc1ZW07DQp9DQoubGF5ZXItY2F0YWxvZy1pdGVtcyBsaSB7DQogICAgbGlzdC1zdHlsZTogbm9uZTsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQouY2F0YWxvZy1pdGVtLWJ1dHRvbiwNCi5jYXRhbG9nLWl0ZW0tbGFiZWwgew0KICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICBtaW4taGVpZ2h0OiAyZW07DQp9DQouY2F0YWxvZy1pdGVtLWJ1dHRvbjpob3ZlciwNCi5jYXRhbG9nLWl0ZW0tbGFiZWw6aG92ZXIgew0KICAgIGN1cnNvcjogcG9pbnRlcjsNCn0NCi5jYXRhbG9nLWl0ZW0tbGFiZWwgLmxheWVyLWl0ZW0gew0KICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICBwYWRkaW5nOiAwLjI1ZW0gMDsNCn0NCi5jYXRhbG9nLWl0ZW0tYnV0dG9uLA0KLmNhdGFsb2ctaXRlbS1sYWJlbCB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIHBhZGRpbmctbGVmdDogMmVtOw0KfQ0KLmZvbGRlci1pdGVtIC5mb2xkZXItaXRlbS1uYW1lIGlucHV0W3R5cGU9Y2hlY2tib3hdew0KICAgIG1hcmdpbi1yaWdodDowLjM1ZW07DQp9DQouY2F0YWxvZy1sYXllci1pdGVtIGlucHV0LA0KLmNhdGFsb2ctZm9sZGVyLXNlbGVjdCBpbnB1dCB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogMDsNCiAgICBsZWZ0OiAwOw0KICAgIG1hcmdpbjogMC41ZW07DQp9DQouY2F0YWxvZy1sYXllci1pdGVtIGEgew0KICAgIHBhZGRpbmctbGVmdDogMmVtOw0KfQ0KLmZvbGRlci1vcGVuIHsNCiAgICBiYWNrZ3JvdW5kOiB1cmwoIlJlc291cmNlcy9JbWFnZXMvSWNvbnMvdHJlZS1leHBhbmRlci1vcGVuLWxpZ2h0LTE2LnBuZyIpIGNlbnRlciBjZW50ZXIgbm8tcmVwZWF0ICFpbXBvcnRhbnQ7DQp9DQouY2F0YWxvZy1pdGVtLWNvbnRyb2wgew0KICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIHdpZHRoOiAyZW07DQogICAgaGVpZ2h0OiAyZW07DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogMDsNCiAgICBsZWZ0OiAwOw0KfQ0KLmV4cGFuZGVyLWJ1dHRvbiB7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgaGVpZ2h0OiAxMDAlOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGJhY2tncm91bmQ6IHVybCgiUmVzb3VyY2VzL0ltYWdlcy9JY29ucy90cmVlLWV4cGFuZGVyLWNsb3NlZC1saWdodC0xNi5wbmciKSBjZW50ZXIgY2VudGVyIG5vLXJlcGVhdDsNCn0NCi5sYy1kZXRhaWxzIHsNCiAgICBjb2xvcjogIzc3Nzc3NzsNCiAgICBmb250LXNpemU6IDAuOWVtOw0KICAgIG1hcmdpbi1sZWZ0OiAwLjVlbTsNCiAgICBjdXJzb3I6IHBvaW50ZXI7DQp9DQoubGMtZGV0YWlscyBpbWcgew0KICAgIG1heC1oZWlnaHQ6IDE2cHg7DQp9DQovKiAtLS0tLS0gU1RBUlQ6IGpRdWVyeSBBdXRvY29tcGxldGUgT3ZlcnJpZGVzIC0tLS0tLSAqLw0KLnVpLWF1dG9jb21wbGV0ZSB7DQogICAgbWF4LWhlaWdodDogMzBlbTsNCiAgICBvdmVyZmxvdy15OiBhdXRvOw0KfQ0KLnVpLWF1dG9jb21wbGV0ZS51aS1tZW51IC51aS1tZW51LWl0ZW0gYSB7DQogICAgcGFkZGluZzogMC41ZW0gMWVtIDAuNWVtIDAuNWVtOw0KfQ0KLyogLS0tLS0tIFNUQVJUOiBqUXVlcnkgQXV0b2NvbXBsZXRlIE92ZXJyaWRlcyAtLS0tLS0gKi8NCg0KLmxjLWxheWVycy10ZXh0IHsNCiAgICBwYWRkaW5nOiAxZW0gMGVtIDBlbSAxLjJlbTsNCiAgICBmb250LXdlaWdodDogYm9sZDsNCn0="),e.resourceManager.register("Mapping","inv","Mapping/modules/LayerCatalog/CSS/medium.css","css","LmxjLWZpbHRlciwNCi5sYy1zZWFyY2gsDQoubGMtc2hvdy1zZWxlY3RlZCwNCi5sYy1lbnRyaWVzIHVsIGxpLA0KLmNhbmNlbC1idXR0b24sDQouYm90dG9tLA0KLmxjLWFjdGlvbnMsDQoubGMtZmlsdGVyLA0KLmxheWVyLWNhdGFsb2ctaXRlbXMsDQoubGF5ZXItY2F0YWxvZy1pdGVtcyAqICB7DQogICAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KCS1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDsNCglib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KfQ0KLmxheWVyLWNhdGFsb2cgYSB7DQogICAgY29sb3I6ICMxQjdEQkY7DQogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOw0KfQ0KLmxheWVyLWNhdGFsb2cgYTphY3RpdmUgew0KICAgIGNvbG9yOiAjOTk5OTk5Ow0KfQ0KLmxheWVyLWNhdGFsb2cgYTpmb2N1cyB7DQogICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7DQp9DQoubGF5ZXItY2F0YWxvZyBhLmRpc2FibGVkOmZvY3VzIHsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQoubGMtc3RhdHVzIHsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgd2lkdGg6IDEwMCU7DQogICAgaGVpZ2h0OiAyNHB4Ow0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICBsZWZ0OiAwOw0KfQ0KDQovKiAtLS0tLS0gU1RBUlQ6IExheWVyIENhdGFsb2cgU2VhcmNoIEZpbHRlciAtLS0tLS0gKi8NCi5sYy1maWx0ZXIgew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICBjbGVhcjogYm90aDsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBwYWRkaW5nOiAwLjc1ZW0gOWVtIDAuNzVlbSAwLjc1ZW07DQogICAgYmFja2dyb3VuZDogI0Y4RjhGODsNCiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0Q5RDlEOTsNCn0NCi5sYy1zZWFyY2ggew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBwYWRkaW5nLXJpZ2h0OiA0LjVlbTsNCiAgICBiYWNrZ3JvdW5kOiAjRkZGRkZGOw0KICAgIGJvcmRlcjogMXB4IHNvbGlkICNDQ0NDQ0M7DQogICAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA2cHg7DQogICAgLW1vei1ib3JkZXItcmFkaXVzOiA2cHg7DQogICAgYm9yZGVyLXJhZGl1czogNnB4Ow0KfQ0KLmxjU2VhcmNoRGlzYWJsZSB7DQogICAgb3BhY2l0eTogMC41Ow0KfQ0KLmxjLXNlYXJjaCBpbnB1dC5zZWFyY2gtZmllbGQsDQoubGMtc2VhcmNoIC5zZWFyY2gtYnV0dG9uIHsNCiAgICBib3JkZXI6IG5vbmU7DQogICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7DQogICAgaGVpZ2h0OiAyLjVlbTsNCn0NCi5sYy1zZWFyY2ggLnNlYXJjaC1idXR0b24sIA0KLmxjLXNob3ctc2VsZWN0ZWQgew0KICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB0b3A6IDA7DQogICAgcmlnaHQ6IDA7DQp9DQoubGMtc2VhcmNoIC5zZWFyY2gtYnV0dG9uIHsNCiAgICBiYWNrZ3JvdW5kOiAjRUVFRUVFIHVybCgiUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9zZWFyY2gtMTYucG5nIikgY2VudGVyIGNlbnRlciBuby1yZXBlYXQ7DQogICAgd2lkdGg6IDIuNWVtOw0KICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgI0NDQ0NDQzsNCiAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDZweDsNCiAgICAtd2Via2l0LWJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDBweDsNCiAgICAtd2Via2l0LWJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDBweDsNCiAgICAtbW96LWJvcmRlci1yYWRpdXM6IDZweDsNCiAgICAtbW96LWJvcmRlci1yYWRpdXMtdG9wbGVmdDogMHB4Ow0KICAgIC1tb3otYm9yZGVyLXJhZGl1cy1ib3R0b21sZWZ0OiAwcHg7DQogICAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDBweDsNCiAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAwcHg7DQp9DQoubGMtc2hvdy1zZWxlY3RlZCB7DQogICAgd2lkdGg6IDllbTsNCiAgICBsaW5lLWhlaWdodDogMi41ZW07DQogICAgcGFkZGluZzogMC43NWVtOw0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCi5sYy1zZWFyY2ggLmNsZWFyLWJ1dHRvbiB7DQogICAgYmFja2dyb3VuZDogdXJsKCJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL2RlbGV0ZS0xNi5wbmciKSBjZW50ZXIgY2VudGVyIG5vLXJlcGVhdDsNCiAgICB3aWR0aDogMmVtOw0KICAgIGhlaWdodCA6Mi41ZW07DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogMDsNCiAgICByaWdodDogMi41ZW07DQp9DQouc2VsZWN0ZWQtaW5kaWNhdG9yIHsNCiAgICBmb250LXNpemU6MC44ZW07DQogICAgY29sb3I6ICM5OTk5OTk7DQogICAgbWFyZ2luLWxlZnQ6IDAuNWVtOw0KfQ0KLyogLS0tLS0tIEVORDogTGF5ZXIgQ2F0YWxvZyBTZWFyY2ggRmlsdGVyIC0tLS0tLSAqLw0KDQovKiAtLS0tLS0gU1RBUlQ6IGpRdWVyeSBBdXRvY29tcGxldGUgT3ZlcnJpZGVzIC0tLS0tLSAqLw0KLnVpLWF1dG9jb21wbGV0ZSAudWktc3RhdGUtZm9jdXMgew0KICAgIGJvcmRlcjogMXB4IHNvbGlkICNEOUQ5RDk7DQogICAgYmFja2dyb3VuZDogI0Y4RjhGODsNCiAgICBmb250LXdlaWdodDogbm9ybWFsOw0KICAgIGNvbG9yOiAjMUI3REJGOw0KfQ0KLyogLS0tLS0tIFNUQVJUOiBqUXVlcnkgQXV0b2NvbXBsZXRlIE92ZXJyaWRlcyAtLS0tLS0gKi8NCg0KLmxheWVyLWNhdGFsb2cgew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICB3aWR0aDogMzBlbTsNCiAgICBoZWlnaHQ6IDM3LjVlbTsNCn0NCkBtZWRpYSBhbGwgYW5kIChtaW4td2lkdGg6IDEwMDBweCkgew0KICAgIC5sYXllci1jYXRhbG9nIHsNCiAgICAgICAgd2lkdGg6IDQwZW07DQogICAgfQ0KfQ0KQG1lZGlhIGFsbCBhbmQgKG1pbi13aWR0aDogMTIwMHB4KSB7DQogICAgLmxheWVyLWNhdGFsb2cgew0KICAgICAgICB3aWR0aDogNTBlbTsNCiAgICB9DQp9DQoubGMtZmlsdGVyIHsNCiAgICBoZWlnaHQ6IDRlbTsNCn0NCi5sYy1zdGF0dXMgew0KICAgIHRvcDogNDAlOw0KfQ0KLmxjLXNlYXJjaCBpbnB1dC5zZWFyY2gtZmllbGQgew0KICAgIG1heC13aWR0aDogMTAwJTsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBmb250LXNpemU6IDFlbTsNCn0NCi5sYy1lbnRyaWVzIHsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgdG9wOiA0ZW07DQogICAgcmlnaHQ6IDA7DQogICAgYm90dG9tOiA0ZW07DQogICAgbGVmdDogMDsNCiAgICBvdmVyZmxvdy15OiBhdXRvOw0KfQ0KLmxjLXRyZWUgew0KICAgIHBhZGRpbmc6IDA7DQogICAgbWFyZ2luOiAwOw0KfQ0KLmxjLWFjdGlvbnMgew0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICBib3R0b206IDA7DQogICAgaGVpZ2h0OiA0ZW07DQogICAgd2lkdGg6IDEwMCU7DQogICAgcGFkZGluZzogMC43NWVtOw0KICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjRDlEOUQ5Ow0KICAgIHRleHQtYWxpZ246IHJpZ2h0Ow0KICAgIGJhY2tncm91bmQ6ICNGOEY4Rjg7DQp9DQoubGMtYWN0aW9ucyBidXR0b24gew0KICAgIHdpZHRoOiA3ZW07DQogICAgbWFyZ2luLWxlZnQ6IDFlbTsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQouZm9sZGVyLWl0ZW0sDQouY2F0YWxvZy1sYXllci1pdGVtLA0KLmNhdGFsb2ctZm9sZGVyLXNlbGVjdCB7DQogICAgbWFyZ2luOiAwOw0KICAgIHBhZGRpbmc6IDA7DQogICAgY2xlYXI6IGJvdGg7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KLmNhdGFsb2ctZm9sZGVyLXNlbGVjdCB7DQogICAgbWFyZ2luLWxlZnQ6IDAuODI1ZW07DQp9DQouY2F0YWxvZy1mb2xkZXItc2VsZWN0IC5sYXllci1pdGVtLW5hbWUgew0KICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsNCiAgICBjb2xvcjogIzY2NjY2NjsNCn0NCi5sYXllci1jYXRhbG9nLWl0ZW1zIHsNCiAgICBtYXJnaW46IDA7DQogICAgcGFkZGluZzogMDsNCn0NCi5sYXllci1jYXRhbG9nLWl0ZW1zIC5sYXllci1jYXRhbG9nLWl0ZW1zIHsNCiAgICBtYXJnaW4tbGVmdDogMS43NWVtOw0KfQ0KLmxheWVyLWNhdGFsb2ctaXRlbXMgbGkgew0KICAgIGxpc3Qtc3R5bGU6IG5vbmU7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KLmNhdGFsb2ctaXRlbS1idXR0b24sDQouY2F0YWxvZy1pdGVtLWxhYmVsIHsNCiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgbWluLWhlaWdodDogM2VtOw0KfQ0KLmNhdGFsb2ctaXRlbS1idXR0b246aG92ZXIsDQouY2F0YWxvZy1pdGVtLWxhYmVsOmhvdmVyIHsNCiAgICBjdXJzb3I6IHBvaW50ZXI7DQp9DQouY2F0YWxvZy1pdGVtLWxhYmVsIC5sYXllci1pdGVtIHsNCiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgcGFkZGluZzogMC41ZW0gMDsNCn0NCi5jYXRhbG9nLWl0ZW0tYnV0dG9uLA0KLmNhdGFsb2ctaXRlbS1sYWJlbCB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIHBhZGRpbmctbGVmdDogM2VtOw0KfQ0KLmZvbGRlci1pdGVtIC5mb2xkZXItaXRlbS1uYW1lIGlucHV0W3R5cGU9Y2hlY2tib3hdew0KICAgIG1hcmdpbi1yaWdodDowLjM1ZW07DQp9DQouY2F0YWxvZy1sYXllci1pdGVtIGlucHV0LA0KLmNhdGFsb2ctZm9sZGVyLXNlbGVjdCBpbnB1dCB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogMDsNCiAgICBsZWZ0OiAwOw0KICAgIG1hcmdpbjogMC41ZW07DQp9DQouY2F0YWxvZy1sYXllci1pdGVtIGEgew0KICAgIHBhZGRpbmctbGVmdDogM2VtOw0KfQ0KLmZvbGRlci1vcGVuIHsNCiAgICBiYWNrZ3JvdW5kOiB1cmwoIlJlc291cmNlcy9JbWFnZXMvaWNvbnMvbWludXMtMjQucG5nIikgY2VudGVyIGNlbnRlciBuby1yZXBlYXQgIWltcG9ydGFudDsNCn0NCi5jYXRhbG9nLWl0ZW0tY29udHJvbCB7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgd2lkdGg6IDNlbTsNCiAgICBoZWlnaHQ6IDNlbTsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgdG9wOiAwOw0KICAgIGxlZnQ6IDA7DQogICAgcG9pbnRlci1ldmVudHM6IG5vbmU7DQp9DQouZXhwYW5kZXItYnV0dG9uIHsNCiAgICBkaXNwbGF5OiBibG9jazsNCiAgICBoZWlnaHQ6IDEwMCU7DQogICAgd2lkdGg6IDEwMCU7DQogICAgYmFja2dyb3VuZDogdXJsKCJSZXNvdXJjZXMvSW1hZ2VzL2ljb25zL2FkZC0yNC5wbmciKSBjZW50ZXIgY2VudGVyIG5vLXJlcGVhdDsNCn0NCi5sYy1kZXRhaWxzIHsNCiAgICBjb2xvcjogIzc3Nzc3NzsNCiAgICBmb250LXNpemU6IDAuOWVtOw0KICAgIG1hcmdpbi1sZWZ0OiAwLjVlbTsNCiAgICBjdXJzb3I6IHBvaW50ZXI7DQp9DQoubGMtZGV0YWlscyBpbWcgew0KICAgIG1heC1oZWlnaHQ6IDE2cHg7DQp9DQovKiAtLS0tLS0gU1RBUlQ6IGpRdWVyeSBBdXRvY29tcGxldGUgT3ZlcnJpZGVzIC0tLS0tLSAqLw0KLnVpLWF1dG9jb21wbGV0ZSB7DQogICAgbWF4LWhlaWdodDogMzBlbTsNCiAgICBvdmVyZmxvdy15OiBhdXRvOw0KfQ0KLnVpLWF1dG9jb21wbGV0ZS51aS1tZW51IC51aS1tZW51LWl0ZW0gYSB7DQogICAgcGFkZGluZzogMC41ZW0gMWVtIDAuNWVtIDAuNWVtOw0KfQ0KLyogLS0tLS0tIFNUQVJUOiBqUXVlcnkgQXV0b2NvbXBsZXRlIE92ZXJyaWRlcyAtLS0tLS0gKi8NCg0KLmxjLWxheWVycy10ZXh0IHsNCiAgICBwYWRkaW5nOiAxZW0gMGVtIDBlbSAxLjJlbTsNCiAgICBmb250LXdlaWdodDogYm9sZDsNCn0="),e.resourceManager.register("Mapping","inv","Mapping/modules/LayerCatalog/CSS/small.css","css","LmxjLWZpbHRlciwNCi5sYy1zZWFyY2gsDQoubGMtc2hvdy1zZWxlY3RlZCwNCi5sYy1lbnRyaWVzIHVsIGxpLA0KLmNhbmNlbC1idXR0b24sDQouYm90dG9tLA0KLmxjLWFjdGlvbnMsDQoubGMtZmlsdGVyICB7DQogICAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KCS1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDsNCglib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KfQ0KLmxjLXN0YXR1cyB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGhlaWdodDogMjRweDsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgbGVmdDogMDsNCn0NCg0KLyogLS0tLS0tIFNUQVJUOiBMYXllciBDYXRhbG9nIFNlYXJjaCBGaWx0ZXIgLS0tLS0tICovDQoubGMtZmlsdGVyIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgY2xlYXI6IGJvdGg7DQogICAgd2lkdGg6IDEwMCU7DQogICAgcGFkZGluZzogMC43NWVtIDllbSAwLjc1ZW0gMC43NWVtOw0KICAgIGJhY2tncm91bmQ6ICNGOEY4Rjg7DQogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNEOUQ5RDk7DQp9DQoubGMtc2VhcmNoIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgd2lkdGg6IDEwMCU7DQogICAgcGFkZGluZy1yaWdodDogN2VtOw0KICAgIGJhY2tncm91bmQ6ICNGRkZGRkY7DQogICAgYm9yZGVyOiAxcHggc29saWQgI0NDQ0NDQzsNCiAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtOw0KfQ0KLmxjU2VhcmNoRGlzYWJsZSB7DQogICAgb3BhY2l0eTogMC41Ow0KfQ0KLmxjLXNlYXJjaCBpbnB1dC5zZWFyY2gtZmllbGQsDQoubGMtc2VhcmNoIC5zZWFyY2gtYnV0dG9uIHsNCiAgICBib3JkZXI6IG5vbmU7DQogICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7DQogICAgaGVpZ2h0OiAyLjVlbTsNCn0NCi5sYy1zZWFyY2ggLnNlYXJjaC1idXR0b24sIA0KLmxjLXNob3ctc2VsZWN0ZWQgew0KICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB0b3A6IDA7DQogICAgcmlnaHQ6IDA7DQp9DQoubGF5ZXItY2F0YWxvZyAubGMtc2VhcmNoIC5zZWFyY2gtYnV0dG9uIHsNCiAgICBiYWNrZ3JvdW5kOiAjRUVFRUVFIHVybCgiUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9zZWFyY2gtMTYucG5nIikgY2VudGVyIGNlbnRlciBuby1yZXBlYXQ7DQogICAgd2lkdGg6IDMuNWVtOw0KICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgI0NDQ0NDQzsNCiAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtOw0KICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDA7DQogICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMDsNCn0NCi5sYy1zaG93LXNlbGVjdGVkIHsNCiAgICB3aWR0aDogOWVtOw0KICAgIGxpbmUtaGVpZ2h0OiAyLjVlbTsNCiAgICBwYWRkaW5nOiAwLjc1ZW07DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KLmxjLXNlYXJjaCAuY2xlYXItYnV0dG9uIHsNCiAgICBiYWNrZ3JvdW5kOiB1cmwoIlJlc291cmNlcy9JbWFnZXMvSWNvbnMvZGVsZXRlLTE2LnBuZyIpIGNlbnRlciBjZW50ZXIgbm8tcmVwZWF0Ow0KICAgIHdpZHRoOiAzLjVlbTsNCiAgICBoZWlnaHQ6IDIuNWVtOw0KICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB0b3A6IDA7DQogICAgcmlnaHQ6IDMuNWVtOw0KfQ0KLnNlbGVjdGVkLWluZGljYXRvciB7DQogICAgZm9udC1zaXplOjAuOGVtOw0KICAgIGNvbG9yOiAjOTk5OTk5Ow0KICAgIG1hcmdpbi1sZWZ0OiAwLjVlbTsNCn0NCi8qIC0tLS0tLSBFTkQ6IExheWVyIENhdGFsb2cgU2VhcmNoIEZpbHRlciAtLS0tLS0gKi8NCg0KLyogLS0tLS0tIFNUQVJUOiBqUXVlcnkgQXV0b2NvbXBsZXRlIE92ZXJyaWRlcyAtLS0tLS0gKi8NCi51aS1hdXRvY29tcGxldGUgLnVpLXN0YXRlLWZvY3VzIHsNCiAgICBib3JkZXI6IDFweCBzb2xpZCAjRDlEOUQ5Ow0KICAgIGJhY2tncm91bmQ6ICNGOEY4Rjg7DQogICAgZm9udC13ZWlnaHQ6IG5vcm1hbDsNCiAgICBjb2xvcjogIzFCN0RCRjsNCn0NCi8qIC0tLS0tLSBTVEFSVDogalF1ZXJ5IEF1dG9jb21wbGV0ZSBPdmVycmlkZXMgLS0tLS0tICovDQoNCi5sYXllci1jYXRhbG9nIHsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgd2lkdGg6IDEwMCU7DQogICAgbWluLWhlaWdodDogMTAwJTsNCn0NCi5sYy1yaWdodCB7DQogICAgZmxvYXQ6IHJpZ2h0Ow0KfQ0KLmxjLWxlZnQgew0KICAgIGZsb2F0OiBsZWZ0Ow0KfQ0KLmJvdHRvbSB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIGJvdHRvbTogMDsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBwYWRkaW5nOiAwLjc1ZW07DQp9DQoubGF5ZXItY2F0YWxvZyAuY2FuY2VsLWJ1dHRvbiB7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIGJvcmRlcjogMXB4IHNvbGlkICNDQTMyMzE7DQogICAgY29sb3I6ICNDQTMyMzE7DQogICAgd2lkdGg6IDEwMCU7DQogICAgcGFkZGluZzogMC41ZW07DQogICAgYm9yZGVyLXJhZGl1czogMC4yNXJlbTsNCn0NCi5sYy1zdGF0dXMgew0KICAgIHRvcDogNTAlOw0KfQ0KLmxheWVyLWNhdGFsb2cgLmNhbmNlbC1idXR0b246Zm9jdXMsDQoubGF5ZXItY2F0YWxvZyAuY2FuY2VsLWJ1dHRvbjpob3ZlciB7DQogICAgYmFja2dyb3VuZDogI0NBMzIzMTsNCiAgICBjb2xvcjogI0ZGRkZGRjsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQouc2hvd05vbmUgew0KICAgIGRpc3BsYXk6IG5vbmU7DQp9DQovKiAtLS0tLS0gU1RBUlQ6IEhlYWRlciAtLS0tLS0gKi8NCi5sYXllci1jYXRhbG9nIC5wYW5lbC1oZWFkZXIgaDIgew0KICAgIG1hcmdpbjogMCA0LjVlbTsNCn0NCi5sYXllci1jYXRhbG9nIC5wYW5lbC1oZWFkZXIgLmJ1dHRvbi10ZXh0LWxpbmsgew0KICAgIHBhZGRpbmc6IDAgMC41ZW07DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgd2lkdGg6IDQuNWVtOw0KICAgIGhlaWdodDogMTAwJTsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOw0KICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7DQp9DQoubGMtbGVmdCB7DQogICAgdGV4dC1hbGlnbjogbGVmdDsNCn0NCi5sYy1yaWdodCB7DQogICAgdGV4dC1hbGlnbjogcmlnaHQ7DQp9DQovKiAtLS0tLS0gRU5EOiBIZWFkZXIgLS0tLS0tICovDQoNCi8qIC0tLS0tLSBTVEFSVDogTGF5ZXIgQ2F0YWxvZyBFbnRyaWVzIC0tLS0tLSAqLw0KLmxjLWVudHJpZXMgew0KICAgIHBhZGRpbmctYm90dG9tOiA0ZW07DQp9DQoubGMtZW50cmllcyB1bCwNCi5sYy1lbnRyaXMgdWwgbGkgew0KICAgIGxpc3Qtc3R5bGU6IG5vbmU7DQogICAgcGFkZGluZzogMDsNCiAgICBtYXJnaW46IDA7DQp9DQouY2F0YWxvZy1pdGVtLWJ1dHRvbiwNCi5sYXllci1pdGVtLWxhYmVsIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgbWluLWhlaWdodDogNGVtOw0KICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjRDlEOUQ5Ow0KICAgIHBhZGRpbmc6IDEuMjVlbSAyZW0gMS4yNWVtIDNlbTsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBkaXNwbGF5OiBibG9jazsNCiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KfQ0KLmxheWVyLWl0ZW0gew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCn0NCi5zZWxlY3RlZC1zdGF0ZSB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogMGVtOw0KICAgIGxlZnQ6IDA7DQogICAgd2lkdGg6IDNlbTsNCiAgICBoZWlnaHQ6IDRlbTsNCiAgICBib3JkZXI6IG5vbmU7DQp9DQppbnB1dFt0eXBlPSJjaGVja2JveCJdLnNlbGVjdGVkLXN0YXRlIHsNCiAgICBtYXJnaW46IDFlbSAwLjVlbTsNCn0NCi5zZWxlY3RlZC1zdGF0ZS1jaGVja2JveCB7DQogICAgdG9wOjFlbTsNCiAgICBsZWZ0OjAuNWVtOw0KfQ0KLnNlbGVjdGVkLXN0YXRlLWZvbGRlcnsNCiAgICBiYWNrZ3JvdW5kOiB1cmwoUmVzb3VyY2VzL0ltYWdlcy9pY29ucy9zZWxlY3RlZC1ub25lLTI0LnBuZykgY2VudGVyIGNlbnRlciBuby1yZXBlYXQ7DQp9DQoubGMtaXRlbS1sYWJlbCB7DQogICAgcG9pbnRlci1ldmVudHM6IG5vbmU7DQp9DQoubGF5ZXItY2F0YWxvZyBhOmZvY3VzLmxjLWl0ZW0tbGFiZWwsDQoubGF5ZXItY2F0YWxvZyBhOmFjdGl2ZS5sYy1pdGVtLWxhYmVsIHsNCiAgICBjb2xvcjogIzFCN0RCRjsNCn0NCi5sYy1kZXRhaWxzIHsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgdG9wOiAwOw0KICAgIHJpZ2h0OiAwOw0KICAgIHdpZHRoOiAyZW07DQogICAgaGVpZ2h0OiAxMDAlOw0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICBjdXJzb3I6IHBvaW50ZXI7DQp9DQoubGMtZGV0YWlscyBpbWcgew0KICAgIG1heC1oZWlnaHQ6IDE2cHg7DQp9DQouZm9sZGVyLWl0ZW0uY2hldnJvbi1yaWdodC0yNCB7DQogICAgYmFja2dyb3VuZC1wb3NpdGlvbjogcmlnaHQgY2VudGVyOw0KICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7DQp9DQouZm9sZGVyU29tZVNlbGVjdGVkIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRTlGNkZGOw0KfQ0KLmZvbGRlckFsbFNlbGVjdGVkLA0KLmxheWVyU2VsZWN0ZWQgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNBQ0NERTQ7DQp9DQouZm9sZGVyU29tZVNlbGVjdGVkSW1hZ2Ugew0KICAgIGJhY2tncm91bmQ6IHVybChSZXNvdXJjZXMvSW1hZ2VzL2ljb25zL3NlbGVjdGVkLXBhcnRpYWwtMjQucG5nKSBjZW50ZXIgY2VudGVyIG5vLXJlcGVhdCAhaW1wb3J0YW50Ow0KfQ0KLmZvbGRlckFsbFNlbGVjdGVkSW1hZ2Ugew0KICAgIGJhY2tncm91bmQ6IHVybChSZXNvdXJjZXMvSW1hZ2VzL2ljb25zL3NlbGVjdGVkLWFsbC0yNC5wbmcpIGNlbnRlciBjZW50ZXIgbm8tcmVwZWF0ICFpbXBvcnRhbnQ7DQp9DQouY2F0YWxvZy1mb2xkZXItc2VsZWN0IHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjREVGMkZGOw0KfQ0KLmNhdGFsb2ctZm9sZGVyLXNlbGVjdCAubGF5ZXItaXRlbS1sYWJlbCB7DQogICAgZm9udC1zdHlsZTogaXRhbGljOw0KICAgIGNvbG9yOiAjNjY2NjY2Ow0KfQ0KLyogLS0tLS0tIEVORDogTGF5ZXIgQ2F0YWxvZyBFbnRyaWVzIC0tLS0tLSAqLw0KDQoudWktbWVudQ0Kew0KICAgIHBhZGRpbmc6IDJweDsNCiAgICBtYXJnaW4tdG9wOiAzcHg7DQogICAgbWFyZ2luLWJvdHRvbTogM3B4Ow0KICAgIGxpc3Qtc3R5bGU6IG5vbmU7DQp9DQoNCi51aS1tZW51IC51aS1tZW51LWl0ZW0gYSANCnsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgcGFkZGluZzogMnB4IC40ZW07DQogICAgbGluZS1oZWlnaHQ6IDEuNTsNCiAgICB6b29tOiAxOw0KICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7DQp9DQoNCi51aS1oZWxwZXItaGlkZGVuLWFjY2Vzc2libGUNCnsNCiAgICBib3JkZXI6IDA7DQogICAgY2xpcDogcmVjdCgwIDAgMCAwKTsNCiAgICBoZWlnaHQ6IDFweDsNCiAgICBtYXJnaW46IC0xcHg7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICBwYWRkaW5nOiAwOw0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB3aWR0aDogMXB4Ow0KfQ0KDQoNCi8qIC0tLS0tLSBTVEFSVDogalF1ZXJ5IEF1dG9jb21wbGV0ZSBPdmVycmlkZXMgLS0tLS0tICovDQoudWktYXV0b2NvbXBsZXRlIHsNCiAgICBtYXgtaGVpZ2h0OiA2NSU7DQogICAgd2lkdGg6IDkwJTsNCiAgICBvdmVyZmxvdy15OiBhdXRvOw0KfQ0KLnVpLWF1dG9jb21wbGV0ZS51aS1tZW51IC51aS1tZW51LWl0ZW0gYSB7DQogICAgcGFkZGluZzogMC41ZW0gMWVtIDAuNWVtIDAuNWVtOw0KfQ0KLyogLS0tLS0tIFNUQVJUOiBqUXVlcnkgQXV0b2NvbXBsZXRlIE92ZXJyaWRlcyAtLS0tLS0gKi8NCg0KLmxjLWxheWVycy10ZXh0IHsNCiAgICBwYWRkaW5nOiAxZW0gMGVtIDBlbSAxLjJlbTsNCiAgICBmb250LXdlaWdodDogYm9sZDsNCn0="),e.resourceManager.register("Mapping","inv","Mapping/modules/LayerCatalog/LayerCatalogView.html","html",t),e.resourceManager.register("Mapping","inv","Mapping/modules/LayerCatalog/PagedLayerCatalogView.html","html",a),e.resourceManager.register("Mapping","inv","Mapping/modules/LayerCatalog/Templates/FolderItemTemplate.html","html",i),e.resourceManager.register("Mapping","inv","Mapping/modules/LayerCatalog/Templates/LayerItemTemplate.html","html",r)}),require({cache:{}}),define(["Mapping/modules/LayerCatalog/AssemblyProvider","Mapping/modules/LayerCatalog/BaseLayerCatalogView","Mapping/modules/LayerCatalog/BaseLayerCatalogViewModel","Mapping/modules/LayerCatalog/BaseProvider","Mapping/modules/LayerCatalog/CatalogEntryType","Mapping/modules/LayerCatalog/CatalogEntryViewModel","Mapping/modules/LayerCatalog/DeferredUtils","Mapping/modules/LayerCatalog/Dictionary","Mapping/modules/LayerCatalog/EssentialsSiteProvider","Mapping/modules/LayerCatalog/LayerCatalogConstructor","Mapping/modules/LayerCatalog/LayerCatalogModule","Mapping/modules/LayerCatalog/LayerCatalogView","Mapping/modules/LayerCatalog/LayerCatalogViewModel","Mapping/modules/LayerCatalog/MapUtilities","Mapping/modules/LayerCatalog/PagedLayerCatalogView","Mapping/modules/LayerCatalog/PagedLayerCatalogViewModel","Mapping/modules/LayerCatalog/WmsPropertyNames"],function(e,t,a,i,r,s,o,l,n,c,d,g,p,y,u,h,C){v(e,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.AssemblyProvider",e.AssemblyProvider),v(t,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.BaseLayerCatalogView",t.BaseLayerCatalogView),v(a,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.LayerCatalogViewModelBase",a.LayerCatalogViewModelBase),v(a,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.CheckboxVisibility",a.CheckboxVisibility),v(i,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.BaseProvider",i.BaseProvider),v(r,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.CatalogEntryType.FOLDER",r.FOLDER),v(r,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.CatalogEntryType.LAYER",r.LAYER),v(s,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.CatalogEntryViewModel",s.CatalogEntryViewModel),v(o,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.Deferred",o.Deferred),v(l,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.Dictionary",l.Dictionary),v(n,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.EssentialsSiteProvider",n.EssentialsSiteProvider),v(c,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.LayerCatalogConstructor",c.LayerCatalogConstructor),v(c,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.LayerCatalogRoot",c.LayerCatalogRoot),v(c,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.LayerCatalogEntry",c.LayerCatalogEntry),v(d,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.LayerCatalogModule",d.LayerCatalogModule),v(g,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.LayerCatalogView",g.LayerCatalogView),v(p,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.LayerCatalogViewModel",p.LayerCatalogViewModel),v(y,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.MapUtilities",y.MapUtilities),v(u,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.PagedLayerCatalogView",u.PagedLayerCatalogView),v(h,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.PagedLayerCatalogViewModel",h.PagedLayerCatalogViewModel),v(C,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.WmsPropertyNames.WMS_LAYER_NAME",C.WMS_LAYER_NAME),v(C,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.WmsPropertyNames.WMS_SERVICE_URL",C.WMS_SERVICE_URL),v(C,"geocortex.essentialsHtmlViewer.mapping.modules.layerCatalog.WmsPropertyNames.WMS_INSERT_POSITION",C.WMS_INSERT_POSITION)})}();