/*
	
	Copyright (c) 2015, Latitude Geographics Group Ltd.
	All rights reserved.
	       
	Redistribution is not permitted. 
	
	Use in binary form, without modification, is permitted provided that neither 
	the name of the organization nor the names of its contributors may be used 
	to endorse or promote products derived from this software without specific 
	prior written permission.
	       
	THIS SOFTWARE IS PROVIDED BY COPYRIGHT HOLDER ''AS IS'' AND ANY
	EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
	WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
	DISCLAIMED. IN NO EVENT SHALL LATITUDE GEOGRAPHICS GROUP LTD. BE LIABLE FOR ANY
	DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
	(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
	LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
	ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
	(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
	SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

dojo.require("esri.urlUtils");dojo.require("esri.arcgis.utils");dojo.require("esri.arcgis.Portal");dojo.require("esri.layers.FeatureLayer");dojo.require("esri.layers.wms");dojo.require("esri.layers.wmts");dojo.require("esri.layers.WebTiledLayer");dojo.require("esri.virtualearth.VETiledLayer");dojo.require("dojox.data.CsvStore");dojo.require("dojo.aspect");dojo.require("dojo.on");dojo.require("dojox.gfx.matrix");dojo.require("esri.toolbars.draw");dojo.require("esri.toolbars.edit");var geocortex;
(function(d){(function(d){(function(d){d.commandsMetadata=[{name:"ActivateView",metadata:{arguments:"string",description:"Activates a view.",isHyperlinkable:true,visibility:"public"}},{name:"DeactivateView",metadata:{arguments:"string",description:"Deactivates a view.",isHyperlinkable:true,visibility:"public"}},{name:"ToggleView",metadata:{arguments:"string",description:"Activates or deactivates a view.",isHyperlinkable:true,visibility:"public"}},{name:"ToggleLogView",metadata:{arguments:"none",description:"Activates or deactivates log view.",
isHyperlinkable:true,visibility:"public"}},{name:"ShowLog",metadata:{arguments:"boolean",description:"Shows the log view if the parameter is true.",isHyperlinkable:true,visibility:"public"}},{name:"HideLog",metadata:{arguments:"none",description:"Hides the log view.",isHyperlinkable:true,visibility:"public"}},{name:"ToggleResultsFrame",metadata:{arguments:"none",description:"Activates or deactivates Results frame.",isHyperlinkable:true,visibility:"public"}},{name:"ToggleDataFrame",metadata:{arguments:"none",
description:"Activates or deactivates data frame.",isHyperlinkable:true,visibility:"public"}},{name:"DestroyView",metadata:{arguments:"string",description:"Destroys a view, wiping out its bindings and DOM substructure.",isHyperlinkable:true,visibility:"public"}},{name:"CloseModalRegion",metadata:{arguments:"none",description:"Closes the ModalWindowRegion.",isHyperlinkable:true,visibility:"public"}},{name:"OpenWebPage",metadata:{arguments:"string",description:"Opens a web page in another tab/window.",
isHyperlinkable:true,visibility:"public"}},{name:"Alert",metadata:{arguments:"string",description:"Displays an alert.",isHyperlinkable:true,visibility:"public"}},{name:"Confirm",metadata:{arguments:"list",description:"Displays a confirm.",isHyperlinkable:true,visibility:"private"}},{name:"Identify",metadata:{arguments:"esri.geometry.Geometry",description:"Executes an identify operation on a geometry.",isHyperlinkable:true,visibility:"private"}},{name:"IdentifyBufferedGeometry",metadata:{arguments:"esri.geometry.Geometry",
description:"Activates the Buffer Options dialog, buffers input geometry using settings specified by the user, places temporary markup on the map and identifies using the buffered geometry.",isHyperlinkable:true,visibility:"private"}},{name:"IdentifyBufferedFeature",metadata:{arguments:"esri.Graphic|geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature",description:"Activates the Buffer Options dialog, buffers input feature geometry using settings specified by the user, places temporary markup on the map and identifies using the buffered geometry.",
isHyperlinkable:true,visibility:"private"}},{name:"IdentifyBufferedFeatureSet",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureSet|geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureSetCollection|string",description:"Activates the Buffer Options dialog, buffers input feature set geometry using settings specified by the user, places temporary markup on the map and identifies using the buffered geometry.",isHyperlinkable:true,visibility:"private"}},{name:"IdentifyBufferedFeatureSetCollection",
metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureSetCollection|string",description:"Activates the Buffer Options dialog, buffers input feature set collection geometry using settings specified by the user, places temporary markup on the map and identifies using the buffered geometry.",isHyperlinkable:true,visibility:"private"}},{name:"Prompt",metadata:{arguments:"object",description:"Displays a prompt.",isHyperlinkable:true,visibility:"private"}},{name:"StepZoomIn",
metadata:{arguments:"none",description:"Zooms in a step.",isHyperlinkable:true,visibility:"public"}},{name:"StepZoomOut",metadata:{arguments:"none",description:"Zooms out a step.",isHyperlinkable:true,visibility:"public"}},{name:"RecenterMapOnNextMapResize",metadata:{arguments:"none",description:"Recenters the map to its existing position the next time the map is resized.",isHyperlinkable:true,visibility:"public"}},{name:"PanToPoint",metadata:{arguments:"esri.geometry.Geometry",description:"Pans to a point or other type of Geometry.",
isHyperlinkable:true,visibility:"private"}},{name:"PanUp",metadata:{arguments:"none",description:"Pans the map up.",isHyperlinkable:true,visibility:"public"}},{name:"PanDown",metadata:{arguments:"none",description:"Pans the map down.",isHyperlinkable:true,visibility:"public"}},{name:"PanLeft",metadata:{arguments:"none",description:"Pans the map left.",isHyperlinkable:true,visibility:"public"}},{name:"PanRight",metadata:{arguments:"none",description:"Pans the map right.",isHyperlinkable:true,visibility:"public"}},
{name:"ZoomToExtent",metadata:{arguments:"esri.geometry.Extent",description:"Zooms to the given extent.",isHyperlinkable:true,visibility:"public"}},{name:"ZoomToScale",metadata:{arguments:"number",description:"Zooms to the given scale.",isHyperlinkable:true,visibility:"public"}},{name:"ZoomOutToExtent",metadata:{arguments:"esri.geometry.Extent",description:"Zooms out to the given extent.",isHyperlinkable:true,visibility:"public"}},{name:"ZoomToLayerExtent",metadata:{arguments:"geocortex.essentials.Layer",
description:"Zooms to the extent of all the features in a layer.",isHyperlinkable:true,visibility:"private"}},{name:"ZoomToLayerVisibleScale",metadata:{arguments:"geocortex.essentials.Layer",description:"Zooms to the scale at which features in a layer become visible.",isHyperlinkable:true,visibility:"private"}},{name:"InitializeSite",metadata:{arguments:"none",description:"Tells the Geocortex Essentials Site object to begin initialization.",isHyperlinkable:true,visibility:"public"}},{name:"ZoomToInitialExtent",
metadata:{arguments:"none",description:"Zooms to the initial extent of the current Site.",isHyperlinkable:true,visibility:"public"}},{name:"ZoomToPreviousExtent",metadata:{arguments:"none",description:"Zooms to the previous recorded map extent if any.",isHyperlinkable:true,visibility:"public"}},{name:"ZoomToNamedExtent",metadata:{arguments:"string",description:"Zooms to the bookmarked extent with the specified name.",isHyperlinkable:true,visibility:"public"}},{name:"ZoomToNextExtent",metadata:{arguments:"none",
description:"Zooms to the next recorded map extent if any.",isHyperlinkable:true,visibility:"public"}},{name:"ZoomToFullExtent",metadata:{arguments:"none",description:"Zooms to the full extent of the current Site.",isHyperlinkable:true,visibility:"public"}},{name:"MapResize",metadata:{arguments:"none",description:"Tells the map control to resize itself. This should be called after altering the map container's dimensions.",isHyperlinkable:true,visibility:"public"}},{name:"MaximizePanel",metadata:{arguments:"string",
description:"Instructs the region hosting a view to maximize itself if it supports this action. As of v2.4, only the BottomPanelRegion and its sub regions support this action.",isHyperlinkable:true,visibility:"public"}},{name:"RestorePanel",metadata:{arguments:"string",description:"Instructs the region hosting a view to restore itself to default dimensions if it supports this action. As of v2.4, only the BottomPanelRegion and its sub regions support this action.",isHyperlinkable:true,visibility:"public"}},
{name:"AddTemporaryMarkupGeometry",metadata:{arguments:"esri.geometry.Geometry",description:"Adds a temporary markup graphic to the map. The {@link Commands.ClearTemporaryMarkup} command will clear this piece of markup.",isHyperlinkable:true,visibility:"private"}},{name:"ClearTemporaryMarkup",metadata:{arguments:"none",description:"Removes temporary markup created by {@link Commands.AddTemporaryMarkupGeometry}.",isHyperlinkable:true,visibility:"public"}},{name:"ZoomToFeature",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature",
description:"Zooms to a feature.",isHyperlinkable:true,visibility:"private"}},{name:"ZoomToFeatureIfOutsideMapExtent",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature",description:"Zooms to a feature if the it's outside of the map's extent, otherwise nothing happens.",isHyperlinkable:true,visibility:"private"}},{name:"ZoomToFeatures",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureSet",description:"Zooms to the extent of all the features in the feature set.",
isHyperlinkable:true,visibility:"private"}},{name:"ZoomToAllFeatures",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature[]",description:"Zooms to the extent of all the features.",isHyperlinkable:true,visibility:"private"}},{name:"ShowMap",metadata:{arguments:"none",description:"Activates map view.",isHyperlinkable:true,visibility:"public"}},{name:"ShowMapElement",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.ShowMapElementArgs",
description:"Displays an element anchored to a specific point on the map.",isHyperlinkable:true,visibility:"private"}},{name:"ShowMapCallout",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.ShowMapElementArgs",description:"Displays a map callout anchored to a given point.",isHyperlinkable:true,visibility:"private"}},{name:"HideMapElement",metadata:{arguments:"string",description:"Removes an element previously anchored to the map using {@link Commands.ShowMapElement}.",
isHyperlinkable:true,visibility:"public"}},{name:"ShowMapTipResults",metadata:{arguments:"string",description:"Shows map tip results for a FeatureSetCollection previously added to the FeatureSetManager.",isHyperlinkable:true,visibility:"public"}},{name:"ShowMapTipResultsInCallout",metadata:{arguments:"string",description:"Shows map tip results for a FeatureSetCollection previously added to the FeatureSetManager, in a floating callout window on the map (the default behavior prior to version 2.4).",
isHyperlinkable:true,visibility:"public"}},{name:"OpenDataFrame",metadata:{arguments:"none",description:"Opens the DataRegion, if it is present in the current shell.",isHyperlinkable:true,visibility:"public"}},{name:"CloseDataFrame",metadata:{arguments:"none",description:"Closes the DataRegion, if it is present in the current shell.",isHyperlinkable:true,visibility:"public"}},{name:"OpenBottomRegion",metadata:{arguments:"none",description:"Opens the BottomPanelRegion, if it is present in the current shell.",
isHyperlinkable:true,visibility:"public"}},{name:"CloseBottomRegion",metadata:{arguments:"none",description:"Closes the BottomPanelRegion, if it is present in the current shell.",isHyperlinkable:true,visibility:"public"}},{name:"RunWorkflowById",metadata:{arguments:"string",description:"Runs a workflow.",isHyperlinkable:true,visibility:"public"}},{name:"RunWorkflowWithGeometry",metadata:{arguments:"object",description:"Runs a workflow with a geometry used as an input argument.",isHyperlinkable:true,
visibility:"private"}},{name:"RunWorkflowWithArguments",metadata:{arguments:"object",description:"Runs a workflow with a set of input arguments.",isHyperlinkable:true,visibility:"public"}},{name:"DisplayWorkflowContainerContent",metadata:{arguments:"object",description:"Displays a view in a workflow container.",isHyperlinkable:true,visibility:"private"}},{name:"ClearActiveTool",metadata:{arguments:"none",description:"Clears the active tool.",isHyperlinkable:true,visibility:"public"}},{name:"SetActiveTool",
metadata:{arguments:"string",description:"Sets the active tool.",isHyperlinkable:true,visibility:"public"}},{name:"Geolocate",metadata:{arguments:"object",description:"Zooms to the current location of the device when it becomes available.",isHyperlinkable:true,visibility:"public"}},{name:"GeolocateTrack",metadata:{arguments:"none",description:"Enables the tracking of the device's location when it is available, without panning the map.",isHyperlinkable:true,visibility:"public"}},{name:"GeolocateFollow",
metadata:{arguments:"none",description:"Enables the following of the device's location when it is available, panning the map.",isHyperlinkable:true,visibility:"public"}},{name:"GeolocateStop",metadata:{arguments:"none",description:"Stops the tracking and following of the device's location.",isHyperlinkable:true,visibility:"public"}},{name:"GeolocateShowBuffer",metadata:{arguments:"none",description:"Display a circular buffer showing the accuracy of the latest GPS reading.",isHyperlinkable:true,visibility:"public"}},
{name:"GeolocateHideBuffer",metadata:{arguments:"none",description:"Hide a circular buffer showing the accuracy of the latest GPS reading.",isHyperlinkable:true,visibility:"public"}},{name:"TakeApplicationOffline",metadata:{arguments:"none",description:"Puts the application in an offline state.",isHyperlinkable:false,visibility:"public"}},{name:"TapToDismiss",metadata:{arguments:"args: {view: framework.ui.ViewBase; onOtherInteracted?: (evt?: Event) => void ; onElementInteracted?: (evt?: Event) => void}",
description:"Dismisses the specified view on the next tap anywhere on the screen. Optionally fires specified callbacks.",isHyperlinkable:false,visibility:"private"}},{name:"TakeApplicationOnline",metadata:{arguments:"none",description:"Connects the application to the internet.",isHyperlinkable:false,visibility:"public"}},{name:"SetGMAFOfflineButtonState",metadata:{arguments:"string",description:"Sets the visibility of the online/offline button in the GMAF app.",isHyperlinkable:true,visibility:"public"}},
{name:"ToggleConnectivity",metadata:{arguments:"none",description:"Toggles the connectivity of the app, from offline to online or viceversa",isHyperlinkable:true,visibility:"public"}},{name:"DownloadOfflineResources",metadata:{arguments:"string",description:"Downloads the viewer bundle for offline use.",isHyperlinkable:false,visibility:"public"}},{name:"OpenFeatureSetCollection",metadata:{arguments:"string",description:"Opens the FeatureSetCollection.",isHyperlinkable:true,visibility:"public"}},{name:"CloseFeatureSetCollection",
metadata:{arguments:"string",description:"Closes the FeatureSetCollection.",isHyperlinkable:true,visibility:"public"}},{name:"RemoveFeatureSetCollection",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureSetCollection",description:"Removes the specified collection from the FeatureSetManager.",isHyperlinkable:true,visibility:"private"}},{name:"RemoveFeatureSetCollectionById",metadata:{arguments:"string",description:"Removes the collection specified by ID from the FeatureSetManager.",
isHyperlinkable:true,visibility:"public"}},{name:"Search",metadata:{arguments:"string",description:"Performs a search on all active providers.",isHyperlinkable:true,visibility:"public"}},{name:"GlobalSearch",metadata:{arguments:"string",description:"Performs a search on all active providers.",isHyperlinkable:true,visibility:"public"}},{name:"BufferGeometry",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.buffer.BufferGeometryArgs",description:"Buffers input geometry, adds buffer markup to the map, and fires the callback and event with the buffered geometry. When the source command is specified, buffers using current settings for the command.",
isHyperlinkable:true,visibility:"private"}},{name:"CancelSearch",metadata:{arguments:"none",description:"Cancel the search on all providers.",isHyperlinkable:true,visibility:"public"}},{name:"ClearSearch",metadata:{arguments:"none",description:"Clear the search results.",isHyperlinkable:true,visibility:"public"}},{name:"ClearSelection",metadata:{arguments:"none",description:"Clears the open identify results/selection.",isHyperlinkable:true,visibility:"public"}},{name:"ShowFeatureDetails",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature",
description:"Creates and displays the Feature Details dialog for the Feature or FeatureSetCollection specified.",isHyperlinkable:true,visibility:"private"}},{name:"ShowFeatureDetailsCompact",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature",description:"Creates and displays the Feature Details dialog for the {@link Feature} in Compact View mode. If the feature is not specified, details for the last feature will be displayed.",isHyperlinkable:true,visibility:"private"}},
{name:"ShowFeatureDetailsExpanded",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature",description:"Creates and displays the Feature Details dialog for the {@link Feature} in Expanded View mode. If the feature is not specified, details for the last feature will be displayed.",isHyperlinkable:true,visibility:"private"}},{name:"SetFeatureDetailsMode",metadata:{arguments:"string",description:"Sets the feature details dialog to the specified view mode.",isHyperlinkable:true,
visibility:"public"}},{name:"ShowFeatureParentDetails",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature",description:"Shows the previously opened feature when browsing related features in the feature details view.",isHyperlinkable:true,visibility:"private"}},{name:"ShowFeatureAttributeEditor",metadata:{arguments:"none",description:"Shows the feature attribute editor used to set feature attributes.",isHyperlinkable:true,visibility:"public"}},{name:"HideFeatureAttributeEditor",
metadata:{arguments:"none",description:"Hides the feature attribute editor used to set feature attributes.",isHyperlinkable:true,visibility:"public"}},{name:"ShowFeatureTemplatePicker",metadata:{arguments:"layer",description:"Shows the feature template picker used to create new features. If a layer is supplied, shows the templates for the layer.",isHyperlinkable:true,visibility:"private"}},{name:"HideFeatureTemplatePicker",metadata:{arguments:"none",description:"Hides the feature template picker used to create new features.",
isHyperlinkable:true,visibility:"public"}},{name:"FeatureLayerClearData",metadata:{arguments:"string",description:"Clears the cached data for a given feature layer service.",isHyperlinkable:true,visibility:"public"}},{name:"FeatureLayerCacheData",metadata:{arguments:"list",description:"Caches the data for a given map service URL.",isHyperlinkable:true,visibility:"private"}},{name:"FeatureLayerClearCacheSpec",metadata:{arguments:"string",description:"Clears the caching spec for a specified feature layer, ensuring it will not be cached on the next sync.",
isHyperlinkable:true,visibility:"public"}},{name:"FeatureLayerSetCacheSpec",metadata:{arguments:"list",description:"Defines what data will be cached on the next sync.",isHyperlinkable:true,visibility:"private"}},{name:"FSMCollectionSetCommand",metadata:{arguments:"string, string",description:"Set the preferred command to open the FeatureSetCollection for the given source name.",isHyperlinkable:true,visibility:"private"}},{name:"FeatureLayerModuleRefreshData",metadata:{arguments:"none",description:'Refreshes layer edit summaries and the "syncNeeded" flag.',
isHyperlinkable:false,visibility:"public"}},{name:"FeatureLayerModuleStartSync",metadata:{arguments:"none",description:"Starts synchronizes the feature edits to the server.",isHyperlinkable:true,visibility:"public"}},{name:"ShowFeatureLayerDetails",metadata:{arguments:"geocortex.essentials.Layer",description:"Shows the feature layer details view used in setting cache behavior for a given feature layer.",isHyperlinkable:true,visibility:"private"}},{name:"ShowFeatureLayerEditLog",metadata:{arguments:"none",
description:"Shows the feature layer edit log.",isHyperlinkable:true,visibility:"public"}},{name:"PanToAllFeatures",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature[]",description:"Pans to the extent of all the features.",isHyperlinkable:true,visibility:"private"}},{name:"PanToFeature",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature",description:"Pans to a Geocortex feature.",isHyperlinkable:true,visibility:"private"}},{name:"PanToFeatureIfOutsideMapExtent",
metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature",description:"Pans to a Geocortex feature if the feature is outside of the map's extent, otherwise nothing happens.",isHyperlinkable:true,visibility:"private"}},{name:"Project",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.ProjectArgs",description:"Calls a geometry service to project geometries between different coordinate systems.",isHyperlinkable:false,visibility:"private"}},
{name:"InvokeMapTip",metadata:{arguments:"esri.geometry.Geometry",description:'Executes an Identify operation on the given geometry and sets "MapTip" as its source tag.',isHyperlinkable:true,visibility:"private"}},{name:"ShowMapTip",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature",description:"Displays a feature in the map tip view.",isHyperlinkable:true,visibility:"private"}},{name:"ShowMapTipInCallout",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature",
description:"Displays a feature in a map tip callout anchored to the map.",isHyperlinkable:true,visibility:"private"}},{name:"SuspendMapTips",metadata:{arguments:"none",description:"Suspends the display of map tips, allowing other components the opportunity to interact with the map without invoking map tips on click/tap events.",isHyperlinkable:true,visibility:"public"}},{name:"SwitchToLayerTheme",metadata:{arguments:"string",description:"Switches to the specified layer theme, identified by ID or display name.",
isHyperlinkable:true,visibility:"public"}},{name:"ResumeMapTips",metadata:{arguments:"none",description:"Resumes the previously suspended display of map tips.",isHyperlinkable:true,visibility:"public"}},{name:"ClearStorageForApplication",metadata:{arguments:"none",description:"Clears the offline data for the current application.",isHyperlinkable:true,visibility:"public"}},{name:"ClearStorageForDomain",metadata:{arguments:"none",description:"Clears all offline data for the current domain. This includes data for all applications loaded from the current domain.",
isHyperlinkable:true,visibility:"public"}},{name:"ListReports",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureSetCollection",description:"Presents a user interface for choosing to run a report from a list of reports that are available to the given reportable input (group of features).",isHyperlinkable:false,visibility:"public"}},{name:"RunFeatureReport",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureSetCollection",description:"Alias to 'ListReports' for backwards compatibility with the Silverlight viewer.",
isHyperlinkable:false,visibility:"public"}},{name:"RunFeaturesReport",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureSetCollection",description:"Alias to 'ListReports' for backwards compatibility with the Silverlight viewer.",isHyperlinkable:false,visibility:"public"}},{name:"RunReport",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.RunReportArgs",description:"Runs a given report on the provided features, and displays the result (a download link to the report file) to the user.",
isHyperlinkable:false,visibility:"public"}},{name:"ShowResultsList",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureSetCollection",description:"Displays the list of features in the given FeatureSetCollection as a list.",isHyperlinkable:false,visibility:"private"}},{name:"ShowResultsTable",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureSetCollection",description:"Displays the list of features in the given FeatureSetCollection in a tabular view.",
isHyperlinkable:false,visibility:"private"}},{name:"OpenResultsFrame",metadata:{arguments:"none",description:"Activates the ResultsRegion.",isHyperlinkable:true,visibility:"public"}},{name:"CloseResultsFrame",metadata:{arguments:"none",description:"Deactivates the ResultsRegion.",isHyperlinkable:true,visibility:"public"}},{name:"ShowLayerList",metadata:{arguments:"none",description:"Displays the layer list.",isHyperlinkable:true,visibility:"public"}},{name:"SwitchToLayerView",metadata:{arguments:"none",
description:"Displays the layer list.",isHyperlinkable:true,visibility:"public"}},{name:"SwitchToLegendView",metadata:{arguments:"none",description:"Displays the legend view.",isHyperlinkable:true,visibility:"public"}},{name:"ShowLayerActions",metadata:{arguments:"geocortex.essentials.Layer",description:"Shows available actions for a given layer.",isHyperlinkable:true,visibility:"private"}},{name:"PulseStatus",metadata:{arguments:"string",description:"Resets the timer of the status view model.",isHyperlinkable:true,
visibility:"public"}},{name:"RemoveStatus",metadata:{arguments:"string",description:"Removes the status indicator from the screen with the specified ID.",isHyperlinkable:true,visibility:"public"}},{name:"AddStatus",metadata:{arguments:"string",description:"Adds a status indicator to the screen.",isHyperlinkable:true,visibility:"public"}},{name:"CreateHighlightLayer",metadata:{arguments:"string",description:"Creates a new highlight layer with the specified name.",isHyperlinkable:true,visibility:"public"}},
{name:"SetActiveHighlightLayer",metadata:{arguments:"string",description:"Sets the layer with the specified name as active, if there is one.",isHyperlinkable:true,visibility:"public"}},{name:"SetActiveHighlightLayerDefault",metadata:{arguments:"none",description:"Sets the default highlight layer as the active highlight layer.",isHyperlinkable:true,visibility:"public"}},{name:"HighlightEsriFeatureSet",metadata:{arguments:"esri.tasks.FeatureSet",description:"Highlights all of the features in the specified Esri feature set in the active highlight layer.",
isHyperlinkable:false,visibility:"private"}},{name:"SetHighlightBorderColor",metadata:{arguments:"string",description:"Sets the border color used for new highlights, specified in 6 or 8 digit hex in RGB or ARGB form.",isHyperlinkable:true,visibility:"public"}},{name:"SetHighlightFillColor",metadata:{arguments:"string",description:"Sets the current highlight fill color to use, if the feature does not specify one.",isHyperlinkable:true,visibility:"public"}},{name:"RemoveHighlightLayer",metadata:{arguments:"string",
description:"Removes the highlight layer with the specified name, if there is one.",isHyperlinkable:true,visibility:"public"}},{name:"ClearHighlights",metadata:{arguments:"none",description:"Removes the highlights from the active highlight layer.",isHyperlinkable:true,visibility:"public"}},{name:"ClearDefaultHighlights",metadata:{arguments:"none",description:"Removes the highlights from the default highlight layer.",isHyperlinkable:true,visibility:"public"}},{name:"HighlightFeatureSet",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureSet",
description:"Highlights all of the features in the specified feature set in the active highlight layer.",isHyperlinkable:true,visibility:"private"}},{name:"HighlightFeature",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature",description:"Highlights the feature in the active highlight layer.",isHyperlinkable:true,visibility:"private"}},{name:"HighlightFeatureDefault",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature",description:"Highlights the feature in the default highlight layer.",
isHyperlinkable:true,visibility:"private"}},{name:"AddMarkup",metadata:{arguments:"esri.geometry.Geometry",description:"Adds the given geometry to the markup layer.",isHyperlinkable:true,visibility:"private"}},{name:"AddMarkupGeometry",metadata:{arguments:"esri.geometry.Geometry",description:"Adds the given geometry to the markup layer.  (Identical to the AddMarkup command.)",isHyperlinkable:true,visibility:"private"}},{name:"AddTextMarkup",metadata:{arguments:"esri.geometry.Geometry",description:"Prompts the user for text to add as markup. When completed, text markup is added at the provided geometry.",
isHyperlinkable:true,visibility:"private"}},{name:"ClearMarkup",metadata:{arguments:"none",description:"Prompts the user for confirmation, and if approved, clears all of the markup from the markup layer.",isHyperlinkable:true,visibility:"public"}},{name:"ClearMarkupQuiet",metadata:{arguments:"none",description:"Clears all of the markup from the markup layer without prompting for confirmation.",isHyperlinkable:true,visibility:"public"}},{name:"MeasureDistance",metadata:{arguments:"esri.geometry.Polyline",
description:"Computes the total and segment distance measurements for the specified Polyline geometry and plots it on the map along with its measurements. NOTE: An esri or geocortex feature may also be provided as arguments in lieu of a polyline geometry.",isHyperlinkable:true,visibility:"private"}},{name:"MeasureArea",metadata:{arguments:"esri.geometry.Polygon",description:"Computes the area, perimeter and individual segment distances for the specified Polylgon geometry and plots it on the map along with its measurements. NOTE: An esri or geocortex feature may also be provided as arguments in lieu of a polygon geometry.",
isHyperlinkable:true,visibility:"private"}},{name:"DeleteMeasurement",metadata:{arguments:"esri.geometry.Geometry",description:"Deletes measurement markup within the given geometry",isHyperlinkable:true,visibility:"private"}},{name:"SetMeasurementUnits",metadata:{arguments:"string, string",description:"Sets the measurement units for the measurements performed by the measurement module.  Also updates existing measurements already on the map.",isHyperlinkable:false,visibility:"private"}},{name:"ResizeShell",
metadata:{arguments:"none",description:"Recalculate the size and layout of the shell and refresh the shell accordingly.",isHyperlinkable:true,visibility:"public"}},{name:"ActivateHomePanel",metadata:{arguments:"none",description:"Activates Home Panel if it is configured to be included.",isHyperlinkable:true,visibility:"public"}},{name:"ShowHomePanel",metadata:{arguments:"none",description:"Activates Home Panel if it is configured to be included.",isHyperlinkable:true,visibility:"public"}},{name:"AttachFileToFeature",
metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature",description:"Checks for HTML5 FileReader / Cordova support and activates File Attachments if supported.",isHyperlinkable:true,visibility:"private"}},{name:"ToggleToolbar",metadata:{arguments:"none",description:"Toggles the visibility of the toolbar if present.",isHyperlinkable:true,visibility:"public"}},{name:"OpenToolbar",metadata:{arguments:"none",description:"Opens the toolbar, if present.",isHyperlinkable:true,
visibility:"public"}},{name:"CloseToolbar",metadata:{arguments:"none",description:"Closes the toolbar, if present.",isHyperlinkable:true,visibility:"public"}},{name:"PrintMap",metadata:{arguments:"none",description:"Displays a dialog to create a printable map.",isHyperlinkable:true,visibility:"public"}},{name:"ShowExportMapDialog",metadata:{arguments:"none",description:"Displays a dialog to save a map image.",isHyperlinkable:true,visibility:"public"}},{name:"ShowBookmarks",metadata:{arguments:"none",
description:"Displays the Bookmarked Locations menu if the BookmarkViewModel's property, bookmarksEnabled, is set to true.",isHyperlinkable:true,visibility:"public"}},{name:"AddBookmark",metadata:{arguments:"string",description:"Bookmark the current extent with the given name.",isHyperlinkable:true,visibility:"public"}},{name:"ShowAddBookmark",metadata:{arguments:"none",description:"Prompts the user to bookmark the current extent by entering a name.",isHyperlinkable:true,visibility:"public"}},{name:"RemoveBookmark",
metadata:{arguments:"string",description:"Removes a bookmark with the given name if exists.",isHyperlinkable:true,visibility:"public"}},{name:"SelectBaseMap",metadata:{arguments:"string",description:"A map can have a number of base maps associated with it. SelectBaseMap allows you to programmatically select one of the base maps to display. All other base maps are then faded out.",isHyperlinkable:true,visibility:"public"}},{name:"ActivateSelectLayersForIdentify",metadata:{arguments:"none",description:"Activates the Layer Selector for Identify and applies current settings.",
isHyperlinkable:true,visibility:"public"}},{name:"DeactivateSelectLayersForIdentify",metadata:{arguments:"none",description:"Deactivates the Layer Selector for Identify and enables all default identifiable layers.",isHyperlinkable:true,visibility:"public"}},{name:"ActivateBuffering",metadata:{arguments:"string|string[]",description:"Activates buffering for the specified command(s). Uses currently configured settings for the command.",isHyperlinkable:true,visibility:"public"}},{name:"ActivateBufferingAndDisplayOptions",
metadata:{arguments:"string",description:"Activates buffering for the specified command and displays the associated Buffer Options dialog. ",isHyperlinkable:true,visibility:"public"}},{name:"ActivateTransientElements",metadata:{arguments:"string",description:"Activates any transient elements configured against a specific ID in the toolbar module.",isHyperlinkable:true,visibility:"public"}},{name:"DeactivateBuffering",metadata:{arguments:"string|string[]",description:"Deactivates buffering, if active, for the specified command(s).",
isHyperlinkable:true,visibility:"public"}},{name:"DeactivateBufferingAndDismissOptions",metadata:{arguments:"string",description:"Deactivates buffering for the specified command and dismisses the associated Buffer Options dialog if its active. ",isHyperlinkable:true,visibility:"public"}},{name:"DeactivateTransientElements",metadata:{arguments:"string",description:"Deactivates any transient elements configured against a specific ID in the toolbar module.",isHyperlinkable:true,visibility:"public"}},
{name:"EditMarkup",metadata:{arguments:"esri.geometry.Geometry",description:"Edits markup that intersects the extent of the provided geometry.",isHyperlinkable:true,visibility:"private"}},{name:"DeleteMarkup",metadata:{arguments:"esri.geometry.Geometry",description:"Deletes markup within the given geometry",isHyperlinkable:true,visibility:"private"}},{name:"CreateMarkupStyleView",metadata:{arguments:"string",description:"Activates the style picker if 'point', 'polyline', 'polygon', or 'text' is the string provided. If it is null, then the app will try and detect what style selector to activate.",
isHyperlinkable:true,visibility:"public"}},{name:"ChangeMarkupStyle",metadata:{arguments:"MarkupTemplate",description:"Takes a MarkupTemplate, PointTemplate, PolylineTemplate, PolygonTemplate, or TextTemplate. It will change the style of the markup to suit the template provided.",isHyperlinkable:true,visibility:"private"}},{name:"StopEditingMarkup",metadata:{arguments:"boolean",description:"Stops editing. If arg is true, clears the active tool, if arg is false, doesn't clear active tool.",isHyperlinkable:true,
visibility:"public"}},{name:"StartEditingFeature",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature",description:"Shows the editing form.",isHyperlinkable:true,visibility:"private"}},{name:"EnableSearchRefinement",metadata:{arguments:"boolean",description:"Enables or disables the refinement of a global search from within search hints (if any).",isHyperlinkable:true,visibility:"public"}},{name:"ExportResultsTo",metadata:{arguments:"{ format: string, fsc: geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureSetCollection }",
description:"Enables or disables the refinement of a global search from within search hints (if any).",isHyperlinkable:true,visibility:"private"}},{name:"SignIn",metadata:{arguments:"string",description:"Navigates to the sign-in page. The sign in experience can be customized by crafting a custom sign-in URL, otherwise the default sign-in URL for the site will be used.",isHyperlinkable:true,visibility:"public"}},{name:"SignOut",metadata:{arguments:"string",description:"Navigates to the sign-out page, which will sign the current user out.",
isHyperlinkable:true,visibility:"public"}},{name:"LogOptimizerEvent",metadata:{arguments:"string, string",description:"Logs an event for Geocortex Optimizer.",isHyperlinkable:true,visibility:"private"}},{name:"AddPushpin",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature",description:"Creates and displays a pushpin for the Feature specified.",isHyperlinkable:true,visibility:"private"}},{name:"AddPushpins",metadata:{arguments:"string",description:"Creates and displays pushpins for the FeatureSetCollection specified.",
isHyperlinkable:true,visibility:"public"}},{name:"RemovePushpin",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature",description:"Removes the pushpin from the map for the given feature, if there is one.",isHyperlinkable:true,visibility:"private"}},{name:"RemovePushpins",metadata:{arguments:"none",description:"Removes all pushpins from the map.",isHyperlinkable:true,visibility:"public"}},{name:"EnablePushpins",metadata:{arguments:"none",description:"Enables the display of pushpins/markers on the map.",
isHyperlinkable:true,visibility:"public"}},{name:"DisablePushpins",metadata:{arguments:"none",description:"Disables the display of pushpins/markers on the map.",isHyperlinkable:true,visibility:"public"}},{name:"ShowPushpins",metadata:{arguments:"none",description:"Displays pushpins by setting their visibility to true, for each result in the results list or results table.  Pushpins must be enabled for this command to work.",isHyperlinkable:true,visibility:"public"}},{name:"HidePushpins",metadata:{arguments:"none",
description:"Prevents the display of pushpins by setting their visibility to false.  Pushpins must be enabled for this command to work.",isHyperlinkable:true,visibility:"public"}},{name:"SetCollectionOfInterest",metadata:{arguments:"string",description:"Sets the FeatureSetCollection of interest that will be used to generate data for Charts.",isHyperlinkable:true,visibility:"public"}},{name:"ShowChartingView",metadata:{arguments:"none",description:"Activates the charting view.",isHyperlinkable:true,
visibility:"public"}},{name:"DisplayBufferOptions",metadata:{arguments:"string",description:"Displays the Buffer Options dialog for the specified target command",isHyperlinkable:true,visibility:"public"}},{name:"DisplayChartById",metadata:{arguments:"string",description:"Opens the specified chart in the charting view.",isHyperlinkable:true,visibility:"public"}},{name:"RemoveChartById",metadata:{arguments:"string",description:"Removes the specified chart from the charting view.",isHyperlinkable:true,
visibility:"public"}},{name:"ClearCharts",metadata:{arguments:"none",description:"Removes all charts from the charting view.",isHyperlinkable:true,visibility:"public"}},{name:"ClearFeatureInformation",metadata:{arguments:"none",description:"Used to 'reset' the information stored within RelatedFeatures (which features are currently open, etc.)",isHyperlinkable:true,visibility:"public"}},{name:"DisableMapClick",metadata:{arguments:"none",description:"Prevents the commands configured to execute on map click from executing and also prevents the MapClickedEvent from firing.",
isHyperlinkable:true,visibility:"public"}},{name:"DisableMapTips",metadata:{arguments:"none",description:"Disables the display of map tips on the map.",isHyperlinkable:true,visibility:"public"}},{name:"EnableAllLayersForIdentify",metadata:{arguments:"none",description:"Enables all identifiable layers such that they participate in Identify operations",isHyperlinkable:true,visibility:"public"}},{name:"DisableAllLayersForIdentify",metadata:{arguments:"none",description:"Disables all identifiable layers such that they do not participate in Identify operations",
isHyperlinkable:true,visibility:"public"}},{name:"EnableLayerForIdentify",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.identify.LayerDescriptor",description:"Enables the specified layer, if it's identifiable, such that it participates in Identify operations.",isHyperlinkable:true,visibility:"public"}},{name:"DisableLayerForIdentify",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.identify.LayerDescriptor",description:"Disables the specified layer, if it's in the list of identifiable layers, such that it does not participate in Identify operations.",
isHyperlinkable:true,visibility:"public"}},{name:"EnableMapClick",metadata:{arguments:"none",description:"Enables all configured commands to execute on map click and also wires up the MapClickEvent to fire when the map is clicked.",isHyperlinkable:true,visibility:"public"}},{name:"EnableMapTips",metadata:{arguments:"none",description:"Enables the display of map tips on the map.",isHyperlinkable:true,visibility:"public"}},{name:"HideAllMapTips",metadata:{arguments:"none",description:"Prevents the display of map tips by setting their visibility to `false`.  Map tips must be enabled for this command to work.",
isHyperlinkable:true,visibility:"public"}},{name:"HideMapTips",metadata:{arguments:"none",description:"Prevents the display of map tips by setting their visibility to `false`, and suspends displaying map tips.  Map tips must be enabled for this command to work.",isHyperlinkable:true,visibility:"public"}},{name:"RestoreAllMapTips",metadata:{arguments:"none",description:"Displays previously hidden map tips by setting their visibility to `true`.  Map tips must be enabled for this command to work.",isHyperlinkable:true,
visibility:"public"}},{name:"ShowMapTips",metadata:{arguments:"none",description:"Displays previously hidden map tips by setting their visibility to `true`, and resumes displaying map tips.  Map tips must be enabled for this command to work.",isHyperlinkable:true,visibility:"public"}},{name:"ToggleMouseCoordinates",metadata:{arguments:"none",description:"Toggles the visibility of the mouse coordinates widget if present.",isHyperlinkable:true,visibility:"public"}},{name:"SetTimeExtent",metadata:{arguments:"esri.TimeExtent",
description:"Sets the time extent for the map.",isHyperlinkable:true,visibility:"public"}},{name:"ShowShareView",metadata:{arguments:"none",description:"Activates the share view",isHyperlinkable:true,visibility:"public"}},{name:"ShareOn",metadata:{arguments:"string",description:"Shares the Viewer url on the specified platform",isHyperlinkable:true,visibility:"public"}},{name:"ScreenReaderNarrate",metadata:{arguments:"string",description:"If a user has screenreader software enabled, then the provided string is immediately spoken to them.",
isHyperlinkable:true,visibility:"public"}},{name:"BroadcastCurrentViewpoint",metadata:{arguments:"string",description:"Broadcasts the viewers current viewpoint to the specified external component.",isHyperlinkable:true,visibility:"private"}},{name:"UpdateStatus",metadata:{arguments:"string",description:"Updates the message shown on the status indicator.",isHyperlinkable:true,visibility:"public"}},{name:"ShowExternalComponentView",metadata:{arguments:"none",description:"Activates the external component view.",
isHyperlinkable:true,visibility:"public"}},{name:"DisplayDockedExternalComponentById",metadata:{arguments:"string",description:"Opens the specified external component in the external components view. If this component is open in a seperate window, it will be closed.",isHyperlinkable:true,visibility:"public"}},{name:"DisplayUndockedExternalComponentById",metadata:{arguments:"string",description:"Opens the specified external component in a seperate window from the viewer. If this component is open in the viewer, it will be closed.",
isHyperlinkable:true,visibility:"public"}},{name:"RemoveExternalComponentById",metadata:{arguments:"string",description:"Removes the specified external component from the viewer. If the component is in a seperate window, that window will be closed.",isHyperlinkable:true,visibility:"public"}},{name:"ToggleExternalComponentSyncById",metadata:{arguments:"string",description:"Toggle whether the specified external component is synchronized with the viewer.",isHyperlinkable:true,visibility:"private"}},
{name:"ListenToExternalComponentFrame",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.integration.ComponentFrameInfo",description:"Wires up a PostMessage Transport and enables bi-directional communication with the component.",isHyperlinkable:true,visibility:"private"}},{name:"CreateOrEditFeatureFromBarcodeScan",metadata:{arguments:"object",description:"Launch the barcode scanner, and use the result to create a new feature or edit an existing one.",isHyperlinkable:true,
visibility:"public"}},{name:"LaunchBarcodeScannerWithCallback",metadata:{arguments:"none",description:"Lauches a QR scan, then calls the provided callback with the result.",isHyperlinkable:true,visibility:"public"}},{name:"ShowMarkers",metadata:{arguments:"none",description:"Displays markers by setting their visibility to `true`.",isHyperlinkable:true,visibility:"private"}},{name:"HideMarkers",metadata:{arguments:"none",description:"Prevents the display of markers by setting their visibility to `false`.",
isHyperlinkable:true,visibility:"private"}},{name:"AddMarker",metadata:{arguments:"string",description:"Creates and displays a marker on the map.",isHyperlinkable:true,visibility:"private"}},{name:"RemoveMarker",metadata:{arguments:"string",description:"Removes the marker from the map.",isHyperlinkable:true,visibility:"private"}},{name:"UpdateMarker",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.MarkerArgs",description:"Updates the marker with the given marker arguments.",
isHyperlinkable:true,visibility:"private"}},{name:"ShowAccessibilityView",metadata:{arguments:"none",description:"Activates the accessibility view.",isHyperlinkable:true,visibility:"public"}},{name:"AddClusterLayer",metadata:{arguments:"string",description:"Adds a cluster layer to an existing Geocortex Layer that holds an Esri FeatureLayer.",isHyperlinkable:true,visibility:"public"}},{name:"RemoveClusterLayer",metadata:{arguments:"string",description:"Removes a cluster layer from an existing Geocortex Layer that holds an Esri FeatureLayer.",
isHyperlinkable:true,visibility:"public"}},{name:"AddHeatMap",metadata:{arguments:"string",description:"Adds a heat map visualization to a given Geocortex layer.",isHyperlinkable:true,visibility:"public"}},{name:"Redo",metadata:{arguments:"none",description:"Reverses the last recorded undo operation or transaction.",isHyperlinkable:true,visibility:"public"}},{name:"RemoveHeatMap",metadata:{arguments:"string",description:"Removes a heat map visualization from a Geocortex layer.",isHyperlinkable:true,
visibility:"public"}},{name:"RemoveVisualization",metadata:{arguments:"string",description:"Removes the visualization from a Geocortex layer, if one is enabled.",isHyperlinkable:true,visibility:"public"}},{name:"ShowVisualizationView",metadata:{arguments:"string",description:"Shows the visualization options view for a given Geocortex layer if the layer supports any visualizations.",isHyperlinkable:true,visibility:"public"}},{name:"Undo",metadata:{arguments:"none",description:"Invokes the last recorded undo operation or transaction.",
isHyperlinkable:true,visibility:"public"}},{name:"CreateGraphicsInMemory",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.EditInMemoryArgs",description:"Creates new graphics. These edits are only applied to the graphics layer in memory.",isHyperlinkable:true,visibility:"private"}},{name:"UpdateGraphicsInMemory",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.UpdateGraphicsArgs",description:"Updates existing graphics. These edits are only applied to the graphics layer in memory.",
isHyperlinkable:true,visibility:"private"}},{name:"DeleteGraphicsInMemory",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.EditInMemoryArgs",description:"Deletes graphics. These edits are only applied to the graphics layer in memory.",isHyperlinkable:true,visibility:"private"}},{name:"CutGraphicsInMemory",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.CutGraphicsArgs",description:"Cut graphics using a polyline. These edits are only applied to the graphics layer in memory.",
isHyperlinkable:true,visibility:"private"}},{name:"ExplodeGraphicsInMemory",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.EditInMemoryArgs",description:"Separates multi-part graphics into individual graphics. These edits are only applied to the graphics layer in memory.",isHyperlinkable:true,visibility:"private"}},{name:"UnionGraphicsInMemory",metadata:{arguments:"geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.EditInMemoryArgs",description:"Merge graphics into a single graphic. These edits are only applied to the graphics layer in memory.",
isHyperlinkable:true,visibility:"private"}}];d.metadataForCommandName=function(k){for(var h=0;h<d.commandsMetadata.length;h++){var f=d.commandsMetadata[h];if(f.name===k)return f.metadata}return null};d.publicCommands=function(){for(var k=[],h=0;h<d.commandsMetadata.length;h++){var f=d.commandsMetadata[h];f.metadata.visibility==="public"&&k.push(f)}return k}})(d.Commands||(d.Commands={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){function c(a,b){this.app=a;this.libraryId=b}c.prototype.initialize=function(a){if(a.id)this.id=a.id};return c}();d.AccessibilityProviderBase=f})(d.accessibility||(d.accessibility={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){function c(){}c.MOUSE="mouse";c.KEYBOARD="keyboard";return c}();d.InputMethod=f})(d.accessibility||(d.accessibility={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){var h=function(){function f(){}f.translate=function(c,a,b,i){if(!c||!a)return null;switch(c.type){case "point":c=a.toScreen(c);c=a.toMap(c.offset(b,i));break;case "polyline":c=this._applyOffset(c,c.paths,b,i,a);break;case "polygon":c=this._applyOffset(c,c.rings,b,i,a)}return{geometry:c,transform:dojox.gfx.matrix.translate(b,i)}};f.rotate=function(c,a,b,i){if(!c||!a)return null;var i=i||this.getCentroid(c),e=dojox.gfx.matrix.rotategAt(-b,i.x,i.y);
switch(c.type){case "polyline":c=this._applyTransform(c,c.paths,e);break;case "polygon":c=this._applyTransform(c,c.rings,e)}a=a.toScreen(i);return{geometry:c,transform:dojox.gfx.matrix.rotategAt(-b,a.x,a.y)}};f.scale=function(c,a,b,i){i===void 0&&(i=null);if(!c||!a)return null;if(isNaN(b)||Infinity===b||-Infinity===b)b=1;if(i===null||typeof i==="undefined")i=b;var e=this.getCentroid(c),j=dojox.gfx.matrix.scaleAt(b,i,e.x,e.y);switch(c.type){case "polyline":c=this._applyTransform(c,c.paths,j);break;
case "polygon":c=this._applyTransform(c,c.rings,j)}a=a.toScreen(e);return{geometry:c,transform:dojox.gfx.matrix.scaleAt(b,i,a.x,a.y)}};f.getCentroid=function(c){if(!c||!c.type||!d.GeometryUtils.isValidGeometry(c))return null;var a;switch(c.type){case "point":return c;case "multipoint":case "polyline":case "polygon":if(a=c.getExtent())return a.getCenter();case "extent":return c.getCenter()}return null};f._applyOffset=function(c,a,b,i,e){if(c&&a)for(var j=c.getPoint(0,0),i=e.toMap(e.toScreen(j).offset(b,
i)),b=i.x-j.x,j=i.y-j.y,i=0;i<a.length;i++)for(e=0;e<a[i].length;e++){var l=c.getPoint(i,e);c.setPoint(i,e,l.offset(b,j))}return c};f._applyTransform=function(c,a,b){if(c&&a)for(var i=0;i<a.length;i++)for(var e=0;e<a[i].length;e++){var j=c.getPoint(i,e),l=dojox.gfx.matrix.multiplyPoint(b,j.x,j.y);j.setX(l.x);j.setY(l.y);c.setPoint(i,e,j)}return c};return f}();d.MatrixUtils=h})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||
(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){function c(a,b,i){this.map=this.graphic=this.owner=null;this.suspended=false;this.graphic=a;this.map=b;this.owner=i}c.prototype.destroy=function(){this.suspended=false;this.graphic=this.map=this.owner=null};c.prototype.refresh=function(){};c.prototype.suspend=function(){this.suspended=true};c.prototype.resume=function(){this.suspended=false};return c}();d.EditCapabilityBase=f})(d.accessibility||(d.accessibility={}))})(d.infrastructure||
(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));var __extends=this.__extends||function(d,g){function n(){this.constructor=d}for(var k in g)g.hasOwnProperty(k)&&(d[k]=g[k]);n.prototype=g.prototype;d.prototype=new n};
(function(d){(function(d){(function(d){(function(d){(function(h){var f=function(c){function a(b,a,e,j){c.call(this,b,a,e);this._keyUpHandle=this._keyDownHandle=null;this._keyDy=this._keyDx=0;this._transform=null;this._isActive=this._isMoving=false;this._vertexHandleGraphic=this._selectedControl=this._allControls=this._midpointControls=this._vertexControls=null;this._options={offsetX:10,offsetY:10,preciseOffsetX:1,preciseOffsetY:1,allowAddVertices:true,allowDeleteVertices:true};this._snappingInputMovedToken=
null;this._options=dojo.mixin(this._options,j||{});this._init();if(this.owner&&this.owner.app)this._snappingInputMovedToken=this.owner.app.event("SnappingFeedbackEvent").subscribe(this,this._handleSnappingInputMovedEvent)}__extends(a,c);a.create=function(b,a,e,c){if(!b||!b.geometry)return null;switch(b.geometry.type){case "multipoint":return new h.MultipointVertexEditor(b,a,e,c);case "polyline":return new h.PolylineVertexEditor(b,a,e,c);case "polygon":return new h.PolygonVertexEditor(b,a,e,c)}return null};
a.prototype._handleSnappingInputMovedEvent=function(b){b&&b.snappingPoint&&this.graphic&&this.getSelectedVertex()&&this._vertexHandleGraphic&&this._vertexHandleGraphic.visible&&(this._updateGraphicVertex(b.snappingPoint,this.getSelectedVertex().segmentIndex,this.getSelectedVertex().pointIndex),this.owner.refresh())};a.prototype.isActive=function(){return this._isActive};a.prototype.hideVertexHandle=function(){this._vertexHandleGraphic&&(this._vertexHandleGraphic.hide(),this.owner&&this.owner.app&&
this.owner.app.event("VertexHandleHiddenEvent").publish())};a.prototype.showVertexHandle=function(){if(this._selectedControl){var b=this._selectedControl.point.offset(0,0);this._vertexHandleGraphic?(this._vertexHandleGraphic.setGeometry(b).setSymbol(this._options.selectedVertexSymbol),this._vertexHandleGraphic.show()):this._vertexHandleGraphic=this.map.graphics.add(new esri.Graphic(b,this._options.selectedVertexSymbol));this.owner&&this.owner.app&&this.owner.app.event("VertexHandleShownEvent").publish(b);
(b=this._vertexHandleGraphic.getDojoShape())&&b.moveToFront()}};a.prototype.destroy=function(){this._cleanUp();c.prototype.destroy.call(this)};a.prototype.refresh=function(b){b===void 0&&(b=false);this._transform=null;b?(this._removeControllers(),this._addControllers()):this._refreshControllers()};a.prototype.getSelectedVertex=function(){return this._selectedControl};a.prototype.onVertexAdd=function(b){if(b&&b.segmentIndex===this._selectedControl.segmentIndex){var a=null,e=this._selectedControl.segmentIndex,
c=this._selectedControl.pointIndex;if(this._selectedControl.isGhost)if(a=this._midpointControls,b.pointIndex<c+1)c+=1;else{if(b.pointIndex===c+1)c=b.pointIndex,a=this._vertexControls}else a=this._vertexControls,c+=b.pointIndex<=c?1:0;this._selectedControl=a[e][c]}};a.prototype.onVertexDelete=function(b){if(b&&b.segmentIndex===this._selectedControl.segmentIndex){var a=null,e=this._selectedControl.segmentIndex,c=this._selectedControl.pointIndex;this._selectedControl.isGhost?(a=this._midpointControls,
c-=b.pointIndex<=c?1:0):(a=this._vertexControls,c-=b.pointIndex<=c&&c>0?1:0);this._selectedControl=a[e][c]}};a.prototype._init=function(){this._keyDownHandle=dojo.on(this.map.root,"keydown",dojo.hitch(this,"_onKeyDownHandler"))};a.prototype._cleanUp=function(){this._isMoving=this._isActive=false;this._selectedControl=this._transform=null;this._removeControllers();if(this._vertexHandleGraphic)this.map.graphics.remove(this._vertexHandleGraphic),this._vertexHandleGraphic=null;if(this._keyDownHandle)this._keyDownHandle.remove(),
this._keyDownHandle=null;if(this._keyUpHandle)this._keyUpHandle.remove(),this._keyUpHandle=null;this.owner.app&&this.owner.app&&this._snappingInputMovedToken&&this.owner.app.event("SnappingFeedbackEvent").unsubscribe(this._snappingInputMovedToken)};a.prototype._getSegments=function(){throw Error("This method is abstract");};a.prototype._getMidpointSegments=function(){throw Error("This method is abstract");};a.prototype._updatePoints=function(){throw Error("This method is abstract");};a.prototype._insertGraphicVertex=
function(){throw Error("This method is abstract");};a.prototype._updateGraphicVertex=function(){throw Error("This method is abstract");};a.prototype._deleteGraphicVertex=function(){throw Error("This method is abstract");};a.prototype._findVertex=function(b,a){for(var e=a?a.length:0,c=0;c<e;c++)for(var l=a[c],m=0;m<l.length;m++){var f=l[m];if(f&&d.GeometryUtils.pointsAreEqual(f.point,b))return f}return null};a.prototype._addControllers=function(){var b=this;this._vertexControls=this._add(this._getSegments(this.graphic.geometry));
if(this._options.allowAddVertices)this._midpointControls=this._add(this._getMidpointSegments(this.graphic.geometry),true);this._allControls=[];this._vertexControls.forEach(function(a,e){a.forEach(function(a,i){b._allControls.push(a);b._midpointControls&&b._midpointControls[e]&&i<b._midpointControls[e].length&&b._allControls.push(b._midpointControls[e][i])})})};a.prototype._removeControllers=function(){this._remove(this._vertexControls);this._remove(this._midpointControls);this._vertexControls=this._midpointControls=
this._allControls=null};a.prototype._refreshControllers=function(){this._refresh(this._vertexControls,this._getSegments(this.graphic.geometry));this._options.allowAddVertices&&this._refresh(this._midpointControls,this._getMidpointSegments(this.graphic.geometry),true)};a.prototype._add=function(b,a){a===void 0&&(a=false);for(var e=[],c=0;c<b.length;c++){for(var l=b[c],d=[],f=0;f<l.length;f++)d.push({isGhost:a,segmentIndex:c,pointIndex:f,point:l[f]});e.push(d)}return e};a.prototype._remove=function(b){if(b)b.forEach(function(b){b.length=
0}),b.length=0};a.prototype._refresh=function(b,a,e){e===void 0&&(e=false);b&&a&&b.forEach(function(b,e){b.forEach(function(b,c){b.point=a[e][c]})})};a.prototype._previous=function(){var b=this._allControls.indexOf(this._selectedControl);this._selectedControl=b==0?this._allControls[this._allControls.length-1]:this._allControls[b-1];this.showVertexHandle();this._refreshControllers()};a.prototype._next=function(){this._selectedControl=this._allControls[(this._allControls.indexOf(this._selectedControl)+
1)%this._allControls.length];this.showVertexHandle();this._refreshControllers()};a.prototype._onKeyDownHandler=function(b){if(!this.suspended)if(this._isActive)this._onKeyDownWhenActive(b);else if((b.keyCode||b.which)===86)b.preventDefault(),b.stopImmediatePropagation(),this._isActive=true,this.owner.suspend(),this.resume(),this._addControllers(),this._selectedControl=this._vertexControls[0][0],this.showVertexHandle()};a.prototype._onKeyDownWhenActive=function(b){var a=b.altKey,e=a?this._options.preciseOffsetX:
this._options.offsetX,a=a?this._options.preciseOffsetY:this._options.offsetY;switch(b.keyCode||b.which){case 86:b.preventDefault();b.stopImmediatePropagation();b.shiftKey?this._previous():this._next();return;case dojo.keys.ENTER:case dojo.keys.NUMPAD_ENTER:b.preventDefault();b.stopImmediatePropagation();this.owner.resume();this._isActive=this._isMoving=false;this._selectedControl=null;if(this._vertexHandleGraphic)this.hideVertexHandle(),this.map.graphics.remove(this._vertexHandleGraphic),this._vertexHandleGraphic=
null;return;case 68:this._options.allowDeleteVertices&&(this._delete(this.getSelectedVertex()),b.preventDefault(),b.stopImmediatePropagation());return;case dojo.keys.UP_ARROW:case dojo.keys.NUMPAD_8:this._keyDy-=a;break;case dojo.keys.RIGHT_ARROW:case dojo.keys.NUMPAD_6:this._keyDx+=e;break;case dojo.keys.DOWN_ARROW:case dojo.keys.NUMPAD_2:this._keyDy+=a;break;case dojo.keys.LEFT_ARROW:case dojo.keys.NUMPAD_4:this._keyDx-=e;break;case dojo.keys.PAGE_UP:case dojo.keys.NUMPAD_9:this._keyDx+=e;this._keyDy-=
a;break;case dojo.keys.PAGE_DOWN:case dojo.keys.NUMPAD_3:this._keyDx+=e;this._keyDy+=a;break;case dojo.keys.END:case dojo.keys.NUMPAD_1:this._keyDx-=e;this._keyDy+=a;break;case dojo.keys.HOME:case dojo.keys.NUMPAD_7:this._keyDx-=e;this._keyDy-=a;break;default:return}b.preventDefault();b.stopImmediatePropagation();this._move(this.getSelectedVertex(),this._keyDx,this._keyDy);this._moveStop(this.getSelectedVertex(),this._keyDx,this._keyDy);this._keyDx=this._keyDy=0};a.prototype._move=function(b,a,e){var c=
{isGhost:b.isGhost,pointIndex:b.pointIndex,segmentIndex:b.segmentIndex};if(!this._isMoving)this._isMoving=true,this.owner.onVertexMoveStart(this.graphic,c),this.owner.onVertexFirstMove(this.graphic,c);b=this.map.toScreen(b.point).offset(a,e);this._vertexHandleGraphic.setGeometry(this.map.toMap(b));this.owner.onVertexMove(this.graphic,c,this._transform);this._raiseEditVertexMoved({sender:this,mapPoint:this.map.toMap(b),screenPoint:b})};a.prototype._raiseEditVertexMoved=function(b){this.owner&&this.owner.app&&
this.owner.app.event("EditVertexMovedEvent").publish(b)};a.prototype._moveStop=function(b,a,e){this._isMoving=false;if(b&&b.point){var c={isGhost:b.isGhost,pointIndex:b.pointIndex,segmentIndex:b.segmentIndex},b=d.MatrixUtils.translate(b.point,this.map,a,e);this._transform=b.transform;c.isGhost?(c.pointIndex+=1,this._insertGraphicVertex(b.geometry,c.segmentIndex,c.pointIndex)):this._updateGraphicVertex(b.geometry,c.segmentIndex,c.pointIndex);this.owner.refresh();this.owner.onVertexMoveStop(this.graphic,
c,this._transform);if(c.isGhost)c.isGhost=false,this.owner.onVertexAdd(this.graphic,c)}};a.prototype._delete=function(b){if(b&&!b.isGhost){var a={isGhost:b.isGhost,pointIndex:b.pointIndex,segmentIndex:b.segmentIndex};this._deleteGraphicVertex(b.segmentIndex,b.pointIndex);this.owner.refresh();this.owner.onVertexDelete(this.graphic,a)}};return a}(h.EditCapabilityBase);h.VertexEditor=f})(d.accessibility||(d.accessibility={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(c){function a(){c.apply(this,arguments)}__extends(a,c);a.prototype._getSegments=function(b){for(var a=0,e=[];a<b.points.length;a++)e.push(b.getPoint(a));return[e]};a.prototype._getMidpointSegments=function(){return[]};a.prototype._insertGraphicVertex=function(){};a.prototype._updateGraphicVertex=function(b,a,e){a=this.graphic.geometry;a.setPoint(e,b.offset(0,0));this.graphic.setGeometry(a)};a.prototype._deleteGraphicVertex=
function(b,a){var e=this.graphic.geometry;e.removePoint(a);this.graphic.setGeometry(e)};return a}(d.VertexEditor);d.MultipointVertexEditor=f})(d.accessibility||(d.accessibility={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(h){var f=function(c){function a(){c.apply(this,arguments)}__extends(a,c);a.prototype._getSegments=function(b){for(var a=[],e=0;e<b.rings.length;e++){for(var c=b.rings[e].length,l=[],d=0;d<c-1;d++)l.push(b.getPoint(e,d));a.push(l)}return a};a.prototype._getMidpointSegments=function(b){for(var a=[],e=0;e<b.rings.length;e++){for(var c=b.rings[e].length,l=[],m=0;m<c-1;m++){var f=b.getPoint(e,m),h=b.getPoint(e,m+1),f=d.GeometryUtils.getMidpoint(f,
h);l.push(f)}a.push(l)}return a};a.prototype._insertGraphicVertex=function(b,a,e){var c=this.graphic.geometry;c.insertPoint(a,e,b.offset(0,0));this.graphic.setGeometry(c)};a.prototype._updateGraphicVertex=function(b,a,e){var c=this.graphic.geometry;c.setPoint(a,e,b.offset(0,0));e===0&&c.setPoint(a,c.rings[a].length-1,b.offset(0,0));this.graphic.setGeometry(c)};a.prototype._deleteGraphicVertex=function(b,a){var e=this.graphic.geometry;e.removePoint(b,a);if(a===0){var c=e.rings[b],l=e.getPoint(b,0);
e.setPoint(b,c.length-1,l.offset(0,0))}this.graphic.setGeometry(e)};return a}(h.VertexEditor);h.PolygonVertexEditor=f})(d.accessibility||(d.accessibility={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(h){var f=function(c){function a(){c.apply(this,arguments)}__extends(a,c);a.prototype._getSegments=function(b){for(var a=[],e=0;e<b.paths.length;e++){for(var c=b.paths[e].length,l=[],d=0;d<c;d++)l.push(b.getPoint(e,d));a.push(l)}return a};a.prototype._getMidpointSegments=function(b){for(var a=[],e=0;e<b.paths.length;e++){for(var c=b.paths[e].length,l=[],m=0;m<c-1;m++){var f=b.getPoint(e,m),h=b.getPoint(e,m+1),f=d.GeometryUtils.getMidpoint(f,
h);l.push(f)}a.push(l)}return a};a.prototype._insertGraphicVertex=function(b,a,e){var c=this.graphic.geometry;c.insertPoint(a,e,b.offset(0,0));this.graphic.setGeometry(c)};a.prototype._updateGraphicVertex=function(b,a,e){var c=this.graphic.geometry;c.setPoint(a,e,b.offset(0,0));this.graphic.setGeometry(c)};a.prototype._deleteGraphicVertex=function(b,a){var e=this.graphic.geometry;e.removePoint(b,a);this.graphic.setGeometry(e)};return a}(h.VertexEditor);h.PolylineVertexEditor=f})(d.accessibility||
(d.accessibility={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){function c(a){this._registeredComponentTypes={"esri.toolbars.draw":"esri.toolbars.Draw","esri.toolbars.edit":"esri.toolbars.Edit","geocortex.accessibility.draw":"geocortex.essentialsHtmlViewer.mapping.infrastructure.accessibility.Draw","geocortex.accessibility.edit":"geocortex.essentialsHtmlViewer.mapping.infrastructure.accessibility.Edit"};this._stack=[];this.app=a;this.app.event("AccessibleComponentStartedEvent").subscribe(this,
this._handleAccessibleComponentStarted);this.app.event("AccessibleComponentCompletedEvent").subscribe(this,this._handleAccessibleComponentCompleted)}c.prototype.registerComponent=function(a,b){if(a==null||b==null)throw Error("[AccessibilityManager::registerComponent] Null name or typeName passed to registerComponent");this._registeredComponentTypes[a]=b};c.prototype.unregisterComponent=function(a){return a&&this._registeredComponentTypes.hasOwnProperty(a)?(delete this._registeredComponentTypes[a],
true):false};c.prototype.createComponent=function(a,b,i){if(a&&this._registeredComponentTypes.hasOwnProperty(a)){var e=this._registeredComponentTypes[a],c=dojo.getObject(e);if(c)return new c(b,i,this.app);else this.app.trace.warning("Could not create component '{0}' from type name '{1}'".format(a,e))}return null};c.prototype._handleAccessibleComponentStarted=function(a){if(a&&this._stack){var b=this._stack.indexOf(a);b>-1&&this._stack.splice(b,1);this._stack.forEach(function(b){return!b.suspended&&
b.suspend()});this._stack.push(a);a.resume()}};c.prototype._handleAccessibleComponentCompleted=function(a){if(a&&this._stack&&this._stack.length!=0){var b=this._stack.indexOf(a);b>-1&&(this._stack.splice(b,1),!a.suspended&&a.suspend());this._stack.length>0&&this._stack[this._stack.length-1].resume()}};return c}();d.AccessibilityManager=f})(d.accessibility||(d.accessibility={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(k){(function(h){var f=function(){function c(a,b){this.inputMethod=null;this.isKeyboardActive=this.suspended=false;this.id=d.framework.utils.alphaNumericToken();this._keyUpHandle=this._keyDownHandle=this._mouseDownHandle=this._mapNavState=this._map=null;this.setMap(a);this.setApp(b)}c.prototype.setMap=function(a){this._map=a};c.prototype.setApp=function(a){this.app=a};c.prototype.setInputMethod=function(a){if(a!==this.inputMethod){var b=this.inputMethod;
this.inputMethod=a;this.onInputMethodChange({previousMethod:b,newMethod:this.inputMethod})}};c.prototype.setKeyboardActive=function(a){this.isKeyboardActive=a};c.prototype.suspend=function(){this.suspended=true};c.prototype.resume=function(){this.suspended=false};c.prototype.disableMapNavigation=function(a,b,i){a===void 0&&(a=false);b===void 0&&(b=false);i===void 0&&(i=true);var e=this._map;this._mapNavState={isDoubleClickZoom:e.isDoubleClickZoom,isClickRecenter:e.isClickRecenter,isPan:e.isPan,isRubberBandZoom:e.isRubberBandZoom,
isKeyboardNavigation:e.isKeyboardNavigation,isScrollWheelZoom:e.isScrollWheelZoom,isShiftDoubleClickZoom:e.isShiftDoubleClickZoom,isPanArrows:e.isPanArrows,isZoomSlider:e.isZoomSlider};e.disableDoubleClickZoom();e.disableClickRecenter();e.disablePan();e.disableRubberBandZoom();e.disableKeyboardNavigation();e.disableScrollWheelZoom();e.disableShiftDoubleClickZoom();a&&e.isZoomSlider&&e.hideZoomSlider();b&&e.isPanArrows&&e.hidePanArrows();i&&e.graphics.disableMouseEvents();return this._mapNavState};
c.prototype.enableMapNavigation=function(a,b,i,e){a===void 0&&(a=false);b===void 0&&(b=false);i===void 0&&(i=true);var c=this._map;if(e=e||this._mapNavState)e.isDoubleClickZoom&&c.enableDoubleClickZoom(),e.isClickRecenter&&c.enableClickRecenter(),e.isPan&&c.enablePan(),e.isRubberBandZoom&&c.enableRubberBandZoom(),e.isKeyboardNavigation&&c.enableKeyboardNavigation(),e.isScrollWheelZoom&&c.enableScrollWheelZoom(),e.isShiftDoubleClickZoom&&c.enableShiftDoubleClickZoom(),a&&e.isZoomSlider&&c.showZoomSlider(),
b&&e.isPanArrows&&c.showPanArrows(),i&&c.graphics.enableMouseEvents()};c.prototype.getMapState=function(){return this._mapNavState};c.prototype.activateMouseControls=function(a){var b=this;a===void 0&&(a=true);this.deactivateMouseControls(a);this._mouseDownHandle=this.app.map.on("mouse-down",function(){b._mouseDownHandle.remove();b._mouseDownHandle=null;b.setInputMethod(h.InputMethod.MOUSE)})};c.prototype.deactivateMouseControls=function(a){a===void 0&&(a=true);if(this._mouseDownHandle)this._mouseDownHandle.remove(),
this._mouseDownHandle=null;a&&this.inputMethod===h.InputMethod.MOUSE&&this.setInputMethod(null)};c.prototype.activateKeyboardControls=function(a){a===void 0&&(a=true);this.isKeyboardActive&&this.deactivateKeyboardControls(a);this.setKeyboardActive(true);this._keyDownHandle=dojo.on(this._map.root,"keydown",dojo.hitch(this,"_onKeyDown"));this._keyUpHandle=dojo.on(this._map.root,"keyup",dojo.hitch(this,"_onKeyUp"));this.app.event("AccessibleComponentStartedEvent").publish(this)};c.prototype.deactivateKeyboardControls=
function(a){a===void 0&&(a=true);this.setKeyboardActive(false);if(this._keyDownHandle)this._keyDownHandle.remove(),this._keyDownHandle=null;if(this._keyUpHandle)this._keyUpHandle.remove(),this._keyUpHandle=null;a&&this.inputMethod===h.InputMethod.KEYBOARD&&this.setInputMethod(null);this.app.event("AccessibleComponentCompletedEvent").publish(this)};c.prototype.toggleKeyboardMode=function(){if(this.inputMethod===h.InputMethod.KEYBOARD)this.onKeyboardStop();else this.onKeyboardStart()};c.prototype.onInputMethodChange=
function(a){this.app.event("InputMethodChangedEvent").publish(a)};c.prototype.onKeyboardStart=function(){if(this._mouseDownHandle)this._mouseDownHandle.remove(),this._mouseDownHandle=null;this.setInputMethod(h.InputMethod.KEYBOARD)};c.prototype.onKeyboardStop=function(){this.setInputMethod(null)};c.prototype._onKeyDown=function(){};c.prototype._onKeyUp=function(){};return c}();h.AccessibleMapComponent=f})(k.accessibility||(k.accessibility={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||
(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(k){(function(h){var f=function(c){function a(b,a,e,j,l){c.call(this,b,a,e);this._options={rotateEnabled:false,scaleEnabled:false,uniformScaling:false,rotationAngle:15,preciseRotationAngle:1,scaleFactor:0.2,preciseScaleFactor:0.01};this._isScaling=this._isRotating=this._modified=this._isTextPoint=this._uniformScaling=this._rotateEnabled=this._scaleEnabled=false;this._keyUpHandle=this._keyDownHandle=this._transform=this._markerSymbol=this._lineSymbol=
null;this._options=dojo.mixin(this._options,l||{});b=e.getOptions();this._markerSymbol=this._options.boxHandleSymbol?this._options.boxHandleSymbol:b.boxHandleSymbol;this._lineSymbol=this._options.boxLineSymbol?this._options.boxLineSymbol:b.boxLineSymbol;this._scaleEnabled=!!this._options.scaleEnabled;this._rotateEnabled=!!this._options.rotateEnabled;this._uniformScaling=!!this._options.uniformScaling;this._isTextPoint=j;this._init()}__extends(a,c);a.prototype.destroy=function(){c.prototype.destroy.call(this);
this._cleanUp()};a.prototype._init=function(){this._keyDownHandle=dojo.on(this.map.root,"keydown",dojo.hitch(this,"_onKeyDownHandler"));this._keyUpHandle=dojo.on(this.map.root,"keyup",dojo.hitch(this,"_onKeyUpHandler"))};a.prototype._cleanUp=function(){this._isRotating=this._isScaling=this._modified=this._scaleEnabled=this._rotateEnabled=this._uniformScaling=this._isTextPoint=false;this._lineSymbol=this._markerSymbol=this._transform=null;if(this._keyDownHandle)this._keyDownHandle.remove(),this._keyDownHandle=
null;if(this._keyUpHandle)this._keyUpHandle.remove(),this._keyUpHandle=null};a.prototype._onKeyDownHandler=function(b){if(!this.suspended){var a=b.altKey,e=b.shiftKey,c=false,l=a?this._options.preciseScaleFactor:this._options.scaleFactor,a=a?this._options.preciseRotationAngle:this._options.rotationAngle,d=b.keyCode||b.which;if(this._scaleEnabled)switch(d){case 83:l=e?l*-1:l,this._scaleGraphic(1+l,1+l),c=true}if(this._rotateEnabled)switch(d){case 82:this._rotateGraphic(e?a*-1:a),c=true}c&&(b.preventDefault(),
b.stopPropagation())}};a.prototype._onKeyUpHandler=function(b){if(!this.suspended){var a=b.keyCode||b.which,e=false;if(this._scaleEnabled)switch(a){case 83:this._isScaling=false,this.owner.onScaleStop(this.graphic,this._transform),e=true}if(this._rotateEnabled)switch(a){case 82:this._isRotating=false,this.owner.onRotateStop(this.graphic,this._transform),e=true}e&&(b.preventDefault(),b.stopPropagation())}};a.prototype._rotateGraphic=function(b,a){if(!this._isRotating)this.owner.onRotateStart(this.graphic),
this.owner.onRotateFirstMove(this.graphic),this._isRotating=true;var e=this.graphic.geometry,c=a||k.GeometryUtils.getMiddle(e);if(k.GeometryUtils.isValidGeometry(e)&&!d.framework.utils.isNullOrUndefined(c)){e=k.MatrixUtils.rotate(e,this.map,b,c);this._transform=e.transform;this._modified=true;if(this._isTextPoint){var l=this.graphic.symbol;l.angle+=b;this.graphic.setSymbol(l)}else this.graphic.setGeometry(e.geometry);c={transform:e.transform,angle:b,scaleX:1,scaleY:1,around:this.map.toScreen(c)};
this.owner.refresh();this.owner.onRotate(this.graphic,c)}};a.prototype._scaleGraphic=function(b,a){if(!this._isScaling)this.owner.onScaleStart(this.graphic),this.owner.onScaleFirstMove(this.graphic),this._isScaling=true;if(a===null||typeof a==="undefined")a=b;var e=k.MatrixUtils.scale(this.graphic.geometry,this.map,b,a);this._transform=e.transform;this._modified=true;if(this._isTextPoint){var c=this.graphic.symbol;c.font.setSize(Math.round(100*c.font.size*b)/100);this.graphic.setSymbol(c)}else this.graphic.setGeometry(e.geometry);
e={transform:e.transform,angle:0,scaleX:b,scaleY:a,around:null};this.owner.refresh();this.owner.onScale(this.graphic,e)};return a}(h.EditCapabilityBase);h.BoxEditor=f})(k.accessibility||(k.accessibility={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(h){var f=function(c){function a(b,a,e,j,l){c.call(this,b,a,e);this._options={offsetX:10,offsetY:10,preciseOffsetX:1,preciseOffsetY:1};this._isMoving=this._modified=false;this._keyUpHandle=this._keyDownHandle=this._textAnchor=this._transform=null;this._options=dojo.mixin(this._options,l||{});this._textAnchor=j;this._init()}__extends(a,c);a.prototype.hasMoved=function(){return this._modified};a.prototype.destroy=function(){c.prototype.destroy.call(this);
this._cleanUp()};a.prototype.refresh=function(b){b===void 0&&(b=false);c.prototype.refresh.call(this,b);if(this.graphic&&(b||this._needsRefresh()))this._cleanUp(),this._init()};a.prototype._needsRefresh=function(){return this._keyDownHandle==null};a.prototype._init=function(){this._keyDownHandle=dojo.on(this.map.root,"keydown",dojo.hitch(this,"_onKeyDownHandler"));this._keyUpHandle=dojo.on(this.map.root,"keyup",dojo.hitch(this,"_onKeyUpHandler"))};a.prototype._cleanUp=function(){this._isMoving=this._modified=
false;this._textAnchor=this._transform=null;if(this._keyDownHandle)this._keyDownHandle.remove(),this._keyDownHandle=null;if(this._keyUpHandle)this._keyUpHandle.remove(),this._keyUpHandle=null};a.prototype._onKeyDownHandler=function(b){if(!this.suspended){var a=b.altKey,e=a?this._options.preciseOffsetX:this._options.offsetX,a=a?this._options.preciseOffsetY:this._options.offsetY,c=0,l=0;switch(b.keyCode||b.which){case dojo.keys.UP_ARROW:case dojo.keys.NUMPAD_8:l=-1;break;case dojo.keys.RIGHT_ARROW:case dojo.keys.NUMPAD_6:c=
1;break;case dojo.keys.DOWN_ARROW:case dojo.keys.NUMPAD_2:l=1;break;case dojo.keys.LEFT_ARROW:case dojo.keys.NUMPAD_4:c=-1;break;case dojo.keys.PAGE_UP:case dojo.keys.NUMPAD_9:c=1;l=-1;break;case dojo.keys.PAGE_DOWN:case dojo.keys.NUMPAD_3:l=c=1;break;case dojo.keys.END:case dojo.keys.NUMPAD_1:c=-1;l=1;break;case dojo.keys.HOME:case dojo.keys.NUMPAD_7:l=c=-1;break;default:return}this._moveGraphic(c*e,l*a);b.preventDefault();b.stopPropagation()}};a.prototype._onKeyUpHandler=function(b){if(!this.suspended){switch(b.keyCode||
b.which){case dojo.keys.UP_ARROW:case dojo.keys.NUMPAD_8:case dojo.keys.RIGHT_ARROW:case dojo.keys.NUMPAD_6:case dojo.keys.DOWN_ARROW:case dojo.keys.NUMPAD_2:case dojo.keys.LEFT_ARROW:case dojo.keys.NUMPAD_4:case dojo.keys.PAGE_UP:case dojo.keys.NUMPAD_9:case dojo.keys.PAGE_DOWN:case dojo.keys.NUMPAD_3:case dojo.keys.END:case dojo.keys.NUMPAD_1:case dojo.keys.HOME:case dojo.keys.NUMPAD_7:this._isMoving=false;this.map.enableMapNavigation();this.owner.onGraphicMoveStop(this.graphic,this._transform);
break;default:return}b.preventDefault();b.stopPropagation()}};a.prototype._moveGraphic=function(b,a){if(!this._isMoving)this.owner.onGraphicMoveStart(this.graphic),this.owner.onGraphicFirstMove(this.graphic),this._isMoving=true,this.map.disableMapNavigation();var e=d.MatrixUtils.translate(this.graphic.geometry,this.map,b,a);this._transform=e.transform;this._modified=true;this.graphic.setGeometry(e.geometry);this._textAnchor&&this._textAnchor.setGeometry(new esri.geometry.Point(this.graphic.geometry.toJson()));
this.owner.refresh();this.owner.onGraphicMove(this.graphic,e.transform);this.graphic.geometry instanceof esri.geometry.Point&&(e=this.graphic.geometry.offset(0,0),this._raiseEditVertexMoved({sender:this,mapPoint:e,screenPoint:this.map.toScreen(e)}))};a.prototype._raiseEditVertexMoved=function(b){this.owner&&this.owner.app&&this.owner.app.event("EditVertexMovedEvent").publish(b)};return a}(h.EditCapabilityBase);h.GraphicMover=f})(d.accessibility||(d.accessibility={}))})(d.infrastructure||(d.infrastructure=
{}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(k){(function(h){var f=function(c){function a(b,a,e){c.call(this,b,e);this._defaultOptions=this._options=this._editObject=null;this._tool=0;this._needsRefresh=this._cancelled=this._modified=this._active=this._isGeo=this._isTextPoint=false;this._handles=[];this._boxEditor=this._vertexEditor=this._graphicMover=this._lastSnapPoint=this._snappingFeedbackEventToken=null;e=Modernizr&&!!Modernizr.touch;e={vertexSymbol:new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,
e?20:12,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color([0,0,0,0.5]),1),new esri.Color([128,128,128])),ghostVertexSymbol:new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,e?18:10,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color([0,0,0,0.5]),1),new esri.Color([255,255,255,0.75])),ghostLineSymbol:new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_DOT,new esri.Color([128,128,
128]),2),allowDeleteVertices:true,allowAddVertices:true,narrateKeyboardShortcuts:true,rotateHandleOffset:e?24:16,boxLineSymbol:new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_DASH,new esri.Color([64,64,64]),1),boxHandleSymbol:new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_SQUARE,e?16:9,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color([0,0,0,0.5]),1),new esri.Color([255,255,255,0.75])),textAnchorSymbol:new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,
10,null,new esri.Color([255,0,0])),selectedVertexSymbol:new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,e?25:15,null,new esri.Color([0,0,255,0.75]))};this._defaultOptions=dojo.mixin(e,a||{});this._editObject=new esri.toolbars.Edit(b,a)}__extends(a,c);a.prototype.activate=function(b,i,e){var c=this;this.deactivate();if(this.app)this._snappingFeedbackEventToken=this.app.event("SnappingFeedbackEvent").subscribe(this,function(b){c._lastSnapPoint=b&&b.snappingPoint?b.snappingPoint:
null});this._active=true;this._graphic=i;this._tool=b;this._options=dojo.mixin(dojo.mixin({},this._defaultOptions),e||{});if(b>0){var e=this._map.spatialReference,l=i&&i.geometry?i.geometry.spatialReference:null;this._isGeo=e&&l&&!e.equals(l)&&e.isWebMercator()&&4326===l.wkid;this._isTextPoint=i&&i.geometry&&i.geometry.type==="point"?(e=this._getSymbol(i))&&e.type==="textsymbol":false;if(i&&i.geometry&&i.geometry.type==="multipoint")this._options.allowAddVertices=false;this._handles.push(dojo.aspect.after(this._editObject,
"onGraphicClick",dojo.hitch(this,"_onGraphicClickImpl"),true));this._handles.push(dojo.aspect.after(this._editObject,"onGraphicFirstMove",dojo.hitch(this,"_onGraphicFirstMoveImpl"),true));this._handles.push(dojo.aspect.after(this._editObject,"onGraphicMove",dojo.hitch(this,"_onGraphicMoveImpl"),true));this._handles.push(dojo.aspect.after(this._editObject,"onGraphicMoveStart",dojo.hitch(this,"_onGraphicMoveStartImpl"),true));this._handles.push(dojo.aspect.after(this._editObject,"onGraphicMoveStop",
dojo.hitch(this,"_onGraphicMoveStopImpl"),true));this._handles.push(dojo.aspect.after(this._editObject,"onRotate",dojo.hitch(this,"_onRotateImpl"),true));this._handles.push(dojo.aspect.after(this._editObject,"onRotateFirstMove",dojo.hitch(this,"_onRotateFirstMoveImpl"),true));this._handles.push(dojo.aspect.after(this._editObject,"onRotateStart",dojo.hitch(this,"_onRotateStartImpl"),true));this._handles.push(dojo.aspect.after(this._editObject,"onRotateStop",dojo.hitch(this,"_onRotateStopImpl"),true));
this._handles.push(dojo.aspect.after(this._editObject,"onScale",dojo.hitch(this,"_onScaleImpl"),true));this._handles.push(dojo.aspect.after(this._editObject,"onScaleFirstMove",dojo.hitch(this,"_onScaleFirstMoveImpl"),true));this._handles.push(dojo.aspect.after(this._editObject,"onScaleStart",dojo.hitch(this,"_onScaleStartImpl"),true));this._handles.push(dojo.aspect.after(this._editObject,"onScaleStop",dojo.hitch(this,"_onScaleStopImpl"),true));this._handles.push(dojo.aspect.after(this._editObject,
"onVertexAdd",dojo.hitch(this,"_onVertexAddImpl"),true));this._handles.push(dojo.aspect.after(this._editObject,"onVertexClick",dojo.hitch(this,"_onVertexClickImpl"),true));this._handles.push(dojo.aspect.after(this._editObject,"onVertexDelete",dojo.hitch(this,"_onVertexDeleteImpl"),true));this._handles.push(dojo.aspect.after(this._editObject,"onVertexFirstMove",dojo.hitch(this,"_onVertexFirstMoveImpl"),true));this._handles.push(dojo.aspect.after(this._editObject,"onVertexMouseOut",dojo.hitch(this,
"_onVertexMouseOutImpl"),true));this._handles.push(dojo.aspect.after(this._editObject,"onVertexMouseOver",dojo.hitch(this,"_onVertexMouseOverImpl"),true));this._handles.push(dojo.aspect.after(this._editObject,"onVertexMove",dojo.hitch(this,"_onVertexMoveImpl"),true));this._handles.push(dojo.aspect.after(this._editObject,"onVertexMoveStart",dojo.hitch(this,"_onVertexMoveStartImpl"),true));this._handles.push(dojo.aspect.after(this._editObject,"onVertexMoveStop",dojo.hitch(this,"_onVertexMoveStopImpl"),
true));this.activateMouseControls();this.activateKeyboardControls();var d=l=e=false;(b&a.MOVE)===a.MOVE&&(e=this._enableMove(i));var f=(b&a.SCALE)===a.SCALE,h=(b&a.ROTATE)===a.ROTATE;if(f||h)l=this._enableBoxEditing(i,f,h);(b&a.EDIT_VERTICES)===a.EDIT_VERTICES&&(d=this._enableVertexEditing(i));if(!e&&!l&&!d)throw Error("[esri.toolbars.Edit::activate] Unable to activate the tool. Check if the tool is valid for the given geometry type.");this.onKeyboardStart();this._updateToolStatusMessage();this.onActivate(b,
i);this.raiseGraphicEditActivated({sender:this,graphic:i,tool:b})}};a.prototype.deactivate=function(){var b=this._tool;this._active=false;if(this.app&&this._snappingFeedbackEventToken)this.app.event("SnappingFeedbackEvent").unsubscribe(this._snappingFeedbackEventToken),this._snappingFeedbackEventToken=null;if(b>0){var a=this._modified,e=this._cancelled,c=this._graphic;this._graphicMover&&this._graphicMover.hasMoved()&&this._adjustGraphicMoverPoint(c,this._lastSnapPoint);this._clear();this._graphic=
null;this._isGeo=this._isTextPoint=false;this.deactivateMouseControls();this.deactivateKeyboardControls();if(this.app.toolRegistry&&this.app.toolRegistry.getActiveTool){var l=this.app.toolRegistry.getActiveTool();l instanceof k.tools.MapTool&&l.drawMode===k.tools.DrawMode.EXTENT&&c.setGeometry(this._convertPolygonToExtent(c.geometry))}this.onDeactivate(b,c,{isModified:a,cancelled:e});this.raiseGraphicEditDeactivated({sender:this,graphic:c,tool:b,isModified:a,cancelled:e})}};a.prototype._convertPolygonToExtent=
function(b){return b.getExtent?b.getExtent():(this.app.trace.warning("Tried to convert polygon to extent, but failed. Polygon object lacks getExtent() method."),null)};a.prototype.getOptions=function(){return this._options||this._defaultOptions||{}};a.prototype.getCurrentState=function(){return{tool:this._tool,graphic:this._graphic,isModified:this._modified}};a.prototype.getEnabledTools=function(){return[this._graphicMover,this._boxEditor,this._vertexEditor].filter(function(b){return!d.framework.utils.isNullOrUndefined(b)})};
a.prototype.refresh=function(){this._editObject.refresh();this._needsRefresh=false};a.prototype.setNeedsRefresh=function(b){this._needsRefresh=b};a.prototype.suspend=function(){c.prototype.suspend.call(this);this.getEnabledTools().forEach(function(b){return b.suspend()})};a.prototype.resume=function(){c.prototype.resume.call(this);this.getEnabledTools().forEach(function(b){return b.resume()})};a.prototype.isActive=function(){return this._active};a.prototype.activateMouseControls=function(b){b===void 0&&
(b=true);c.prototype.activateMouseControls.call(this,b);if(this._tool>0)this._editObject.__attached_stopEvent=true,this._editObject.activate(this._tool,this._graphic,this._options);else throw Error("[esri.toolbars.Edit::activate] Unable to activate the tool. Check if the tool is valid for the given geometry type.");};a.prototype.deactivateMouseControls=function(b){b===void 0&&(b=true);c.prototype.deactivateMouseControls.call(this,b);this._editObject.__attached_stopEvent=true;this._editObject.deactivate()};
a.prototype.on=function(){throw Error("[geocortex.essentialsHtmlViewer.mapping.infrastructure.accessibility.Edit] On style events not implemented yet. Use connect instead.");};a.prototype.onActivate=function(){};a.prototype.onDeactivate=function(){};a.prototype.onGraphicClick=function(){};a.prototype._onGraphicClickImpl=function(b,a){this.onGraphicClick(b,a)};a.prototype.onGraphicFirstMove=function(){this._modified=true};a.prototype._onGraphicFirstMoveImpl=function(b){this.suspend();this._vertexEditor!==
null&&this._vertexEditor.isActive()&&this._vertexEditor.hideVertexHandle();this.onGraphicFirstMove(b)};a.prototype.onGraphicMove=function(){};a.prototype._onGraphicMoveImpl=function(b,a){this.onGraphicMove(b,a)};a.prototype.onGraphicMoveStart=function(){};a.prototype._onGraphicMoveStartImpl=function(b){this.onGraphicMoveStart(b)};a.prototype.onGraphicMoveStop=function(){};a.prototype._onGraphicMoveStopImpl=function(b,a){this.resume();this._vertexEditor!==null&&this._vertexEditor.isActive()&&(this.suspend(),
this._vertexEditor.resume(),this._vertexEditor.refresh(),this._vertexEditor.showVertexHandle());this.onGraphicMoveStop(b,a)};a.prototype.onRotate=function(){};a.prototype._onRotateImpl=function(b,a){this.onRotate(b,a)};a.prototype.onRotateFirstMove=function(){this._modified=true};a.prototype._onRotateFirstMoveImpl=function(b){this.suspend();this._vertexEditor!==null&&this._vertexEditor.isActive()&&this._vertexEditor.hideVertexHandle();this.onRotateFirstMove(b)};a.prototype.onRotateStart=function(){};
a.prototype._onRotateStartImpl=function(b){this.onRotateStart(b)};a.prototype.onRotateStop=function(){};a.prototype._onRotateStopImpl=function(b,a){this.resume();this._vertexEditor!==null&&this._vertexEditor.isActive()&&(this.suspend(),this._vertexEditor.resume(),this._vertexEditor.refresh(),this._vertexEditor.showVertexHandle());this.onRotateStop(b,a)};a.prototype.onScale=function(){};a.prototype._onScaleImpl=function(b,a){this.onScale(b,a)};a.prototype.onScaleFirstMove=function(){this._modified=
true};a.prototype._onScaleFirstMoveImpl=function(b){this.suspend();this._vertexEditor!==null&&this._vertexEditor.isActive()&&this._vertexEditor.hideVertexHandle();this.onScaleFirstMove(b)};a.prototype.onScaleStart=function(){};a.prototype._onScaleStartImpl=function(b){this.onScaleStart(b)};a.prototype.onScaleStop=function(){};a.prototype._onScaleStopImpl=function(b,a){this.resume();this._vertexEditor!==null&&this._vertexEditor.isActive()&&(this.suspend(),this._vertexEditor.resume(),this._vertexEditor.refresh(),
this._vertexEditor.showVertexHandle());this.onScaleStop(b,a)};a.prototype.onVertexAdd=function(b,a){this._modified=true;this._vertexEditor!==null&&this._vertexEditor.isActive()&&(this._vertexEditor.refresh(true),this._vertexEditor.onVertexAdd(a),this._vertexEditor.showVertexHandle())};a.prototype._onVertexAddImpl=function(b,a){this.onVertexAdd(b,a)};a.prototype.onVertexClick=function(){};a.prototype._onVertexClickImpl=function(b,a){this.onVertexClick(b,a)};a.prototype.onVertexDelete=function(b,a){this._modified=
true;this._vertexEditor!==null&&this._vertexEditor.isActive()&&(this._vertexEditor.refresh(true),this._vertexEditor.onVertexDelete(a),this._vertexEditor.showVertexHandle())};a.prototype._onVertexDeleteImpl=function(b,a){this.onVertexDelete(b,a)};a.prototype.onVertexFirstMove=function(){this._modified=true};a.prototype._onVertexFirstMoveImpl=function(b,a){this.suspend();this._vertexEditor!==null&&this._vertexEditor.isActive()&&this._vertexEditor.hideVertexHandle();this.onVertexFirstMove(b,a)};a.prototype.onVertexMouseOut=
function(){};a.prototype._onVertexMouseOutImpl=function(b,a){this.onVertexMouseOut(b,a)};a.prototype.onVertexMouseOver=function(){};a.prototype._onVertexMouseOverImpl=function(b,a){this.onVertexMouseOver(b,a)};a.prototype.onVertexMove=function(b,a){a&&a.graphic&&this.app.event("EditVertexHandleMovedEvent").publish(a.graphic)};a.prototype._onVertexMoveImpl=function(b,a,e){this.onVertexMove(b,a,e)};a.prototype.onVertexMoveStart=function(){};a.prototype._onVertexMoveStartImpl=function(b,a){this.onVertexMoveStart(b,
a)};a.prototype.onVertexMoveStop=function(b,a){this._vertexEditor!==null&&this._vertexEditor.isActive()&&!a.isGhost&&(this._vertexEditor.refresh(),this._vertexEditor.showVertexHandle())};a.prototype._onVertexMoveStopImpl=function(b,a,e){this.resume();this._vertexEditor!==null&&this._vertexEditor.isActive()&&(this.suspend(),this._vertexEditor.resume());this.onVertexMoveStop(b,a,e)};a.prototype.onKeyboardStart=function(){c.prototype.onKeyboardStart.call(this)};a.prototype.onKeyboardStop=function(b){b===
void 0&&(b=false);c.prototype.onKeyboardStop.call(this,b);this._cancelled=b;this.deactivate()};a.prototype._onKeyDown=function(b){c.prototype._onKeyDown.call(this,b);if(!this.suspended&&this._active&&this.inputMethod!==h.InputMethod.MOUSE){var a=false;switch(b.keyCode||b.which){case dojo.keys.ENTER:case dojo.keys.NUMPAD_ENTER:this.toggleKeyboardMode();a=true;break;case dojo.keys.ESCAPE:this.onKeyboardStop(true),a=true}a&&(b.preventDefault(),b.stopPropagation())}};a.prototype.raiseGraphicEditActivated=
function(b){this.app.event("GraphicEditActivatedEvent").publish(b)};a.prototype.raiseGraphicEditDeactivated=function(b){this.app.event("GraphicEditDeactivatedEvent").publish(b)};a.prototype._updateToolStatusMessage=function(){if(this._graphic&&this._graphic.geometry&&this._graphic.geometry.type!=="point"){var b=this.app.getResource("Mapping.Infrastructure","language-toolbar-markup-edit-desc-shortcuts");b&&(this.app.command("UpdateStatus").execute(new d.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs(b)),
this._options.narrateKeyboardShortcuts&&this.app.command("ScreenReaderNarrate").execute(b))}};a.prototype._clear=function(){this._disableMove();this._disableBoxEditing();this._disableVertexEditing();this._tool=0;this.suspended=this._cancelled=this._modified=false;this.setInputMethod(null)};a.prototype._getSymbol=function(b){if(b){var a=b.symbol;if(a)return a;if(a=b.getLayer()?b.getLayer().renderer:null)return a.getSymbol(b)}return null};a.prototype._enableMove=function(b){switch(b.geometry.type){case "point":return this._graphicMover=
new h.GraphicMover(b,this._map,this,this._isTextPoint&&this._editObject._textAnchor?this._editObject._textAnchor:null),true;case "polyline":case "polygon":return this._graphicMover=new h.GraphicMover(b,this._map,this,null),true}return false};a.prototype._enableBoxEditing=function(b,a,e){a={scaleEnabled:a,rotateEnabled:e,uniformScaling:this._options.uniformScaling,boxHandleSymbol:this._options.boxHandleSymbol,boxLineSymbol:this._options.boxLineSymbol};return this._isTextPoint||["polyline","polygon"].indexOf(b.geometry.type)>
-1?(this._boxEditor=new h.BoxEditor(b,this._map,this,this._isTextPoint,a),true):false};a.prototype._enableVertexEditing=function(b){var a={allowAddVertices:this._options.allowAddVertices,allowDeleteVertices:this._options.allowDeleteVertices,selectedVertexSymbol:this._options.selectedVertexSymbol};switch(b.geometry.type){case "multipoint":case "polyline":case "polygon":return this._vertexEditor=h.VertexEditor.create(b,this._map,this,a),true}return false};a.prototype._adjustGraphicMoverPoint=function(b,
a){a&&b&&a instanceof esri.geometry.Point&&b.geometry instanceof esri.geometry.Point&&b.setGeometry(a)};a.prototype._disableMove=function(){if(this._graphicMover)this._graphicMover.destroy(),this._graphicMover=null};a.prototype._disableBoxEditing=function(){if(this._boxEditor)this._boxEditor.destroy(),this._boxEditor=null};a.prototype._disableVertexEditing=function(){if(this._vertexEditor)this._vertexEditor.destroy(),this._vertexEditor=null};a._edit=function(){require(["esri/toolbars/edit"],function(b){a.EDIT_TEXT=
b.EDIT_TEXT;a.EDIT_VERTICES=b.EDIT_VERTICES;a.MOVE=b.MOVE;a.ROTATE=b.ROTATE;a.SCALE=b.SCALE})}();return a}(h.AccessibleMapComponent);h.Edit=f})(k.accessibility||(k.accessibility={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(h){var f=function(c){function a(b,i,e){c.call(this,b,e);this.respectDrawingVertexOrder=false;this._arrowShapeTemplate=[[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]];this._leftArrowShapeTemplate=[[0,0],[24,24],[24,12],[96,12],[96,-12],[24,-12],[24,-24],[0,0]];this._rightArrowShapeTemplate=[[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]];this._upArrowShapeTemplate=[[0,0],[-24,24],[-12,24],[-12,
96],[12,96],[12,24],[24,24],[0,0]];this._downArrowShapeTemplate=[[0,0],[-24,-24],[-12,-24],[-12,-96],[12,-96],[12,-24],[24,-24],[0,0]];this._triangleShapeTemplate=[[0,-48],[41.56921938165306,24],[-41.56921938165306,24],[0,-48]];this._rectangleShapeTemplate=[[0,-48],[96,-48],[96,0],[0,0],[0,-48]];this._defaultOptions=this._options=this._editObject=this._drawObject=null;this._active=false;this._createGeometryDeferred=this._graphic=null;this._isPlottingPolyGeometry=false;this._ghostLine=this._vertexAnchor=
this._lastVertexPosition=null;this._handles=[];this._lastSnappingPoint=this._dblClickHandlerToken=this._editCompletedHandle=this._polyGeometryKeyDownHandle=null;var j=Modernizr&&!!Modernizr.touch,j={enableEditing:true,vertexOffsetX:10,vertexOffsetY:10,preciseVertexOffsetX:1,preciseVertexOffsetY:1,vertexSymbol:new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,j?20:12,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color([0,0,0,0.5]),1),
new esri.Color([128,128,128])),selectedVertexSymbol:new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,j?25:15,null,new esri.Color([0,0,255,0.75]))};this._defaultOptions=dojo.mixin(j,i||{});this._points=[];this._drawObject=new esri.toolbars.Draw(b,i);this._twoClicksWithin300MsFixup();this._editObject=new a.EditInternal(b,null,e);this.fillSymbol=this._drawObject.fillSymbol;this.lineSymbol=this._drawObject.lineSymbol;this.markerSymbol=this._drawObject.markerSymbol;this.respectDrawingVertexOrder=
this._drawObject.respectDrawingVertexOrder;this.setVertexSymbol(this._defaultOptions.vertexSymbol);this.setSelectedVertexSymbol(this._defaultOptions.selectedVertexSymbol);this.app&&this.app.event("SnappingFeedbackEvent").subscribe(this,this._handleSnappingEvent)}__extends(a,c);a.createEllipse=function(b){for(var a=b.center,e=b.longAxis||48,c=b.shortAxis||24,l=b.numberOfPoints||60,d=b.map,b=[],f=2*Math.PI/l,h=0;h<l;h++){var k=Math.cos(h*f),g=Math.sin(h*f),k=d.toMap(new esri.geometry.ScreenPoint({x:e*
k+a.x,y:c*g+a.y}));b.push(k)}b.push(b[0]);a=new esri.geometry.Polygon(d.spatialReference);a.addRing(b);return a};a.createCircle=function(b){return a.createEllipse({center:b.center,longAxis:b.radius,shortAxis:b.radius,numberOfPoints:b.numberOfPoints,map:b.map})};a.prototype.activate=function(b,i){var e=this;(this._active||this._geometryType)&&this.deactivate();this._handles.push(this.app.map.on("click",function(){return e.app.trace.debug("[DrawTool] map-click")}));this._handles.push(this.app.map.on("dbl-click",
function(){return e.app.trace.debug("[DrawTool] map-double-click")}));this._active=true;this._geometryType=b;this._options=dojo.mixin(dojo.mixin({},this._defaultOptions),i||{});if(b===a.MULTI_POINT)this._options.enableEditing=false;this.setVertexSymbol(this._options.vertexSymbol);this.setSelectedVertexSymbol(this._options.selectedVertexSymbol);this._handles.push(dojo.aspect.after(this._drawObject,"onDrawEnd",dojo.hitch(this,"onDrawEnd"),true));this._handles.push(dojo.aspect.after(this._drawObject,
"onDrawComplete",dojo.hitch(this,"onDrawComplete"),true));this._drawObject&&typeof this._drawObject._onClickHandler==="function"&&this._handles.push(dojo.aspect.after(this._drawObject,"_onClickHandler",dojo.hitch(this,"_onClickHandler"),true));this._extraPointOnTouchDevicesFixup();this.activateMouseControls();this._supportsKeyboardInput(this._geometryType)&&this.activateKeyboardControls();this.onActivate();this.raiseGraphicDrawActivated({sender:this,geometryType:b})};a.prototype.deactivate=function(){var b=
this._geometryType;this._active=false;this._clear();this.setInputMethod(null);if(this._dblClickHandlerToken)this._dblClickHandlerToken.remove(),this._dblClickHandlerToken=null;this._handles.forEach(function(b){b.remove()});this._handles.length=0;this._geometryType=this.vertexSymbol=this.selectedVertexSymbol=null;this.onDeactivate();this.raiseGraphicDrawDeactivated({sender:this,geometryType:b})};a.prototype.finishDrawing=function(){switch(this.inputMethod){case h.InputMethod.MOUSE:this._drawObject.finishDrawing();
this._syncPointsCollection();break;case h.InputMethod.KEYBOARD:this._finishKeyboardDrawing()}};a.prototype.setFillSymbol=function(b){this.fillSymbol=b;this._drawObject.setFillSymbol(b)};a.prototype.setLineSymbol=function(b){this.lineSymbol=b;this._drawObject.setLineSymbol(b)};a.prototype.setMarkerSymbol=function(b){this.markerSymbol=b;this._drawObject.setMarkerSymbol(b)};a.prototype.setRespectDrawingVertexOrder=function(b){this.respectDrawingVertexOrder=b;this._drawObject.setRespectDrawingVertexOrder(b)};
a.prototype.setVertexSymbol=function(b){this.vertexSymbol=b};a.prototype.setSelectedVertexSymbol=function(b){this.selectedVertexSymbol=b};a.prototype.activateMouseControls=function(b){b===void 0&&(b=true);c.prototype.activateMouseControls.call(this,b);if(this._geometryType)this._drawObject.__attached_stopEvent=true,this._drawObject.activate(this._geometryType,this._options)};a.prototype.deactivateMouseControls=function(b){b===void 0&&(b=true);c.prototype.deactivateMouseControls.call(this,b);this._drawObject.__attached_stopEvent=
true;this._drawObject.deactivate()};a.prototype.raiseGraphicDrawActivated=function(b){this.app.event("GraphicDrawActivatedEvent").publish(b)};a.prototype.raiseGraphicDrawDeactivated=function(b){this.app.event("GraphicDrawDeactivatedEvent").publish(b)};a.prototype.raiseGraphicVertexAdded=function(b){this.app.event("GraphicVertexAddedEvent").publish(b)};a.prototype.raiseGraphicVertexMoved=function(b){this.app.event("GraphicVertexMovedEvent").publish(b)};a.prototype.on=function(){throw Error("[geocortex.essentialsHtmlViewer.mapping.infrastructure.accessibilit.Draw::on] On style events not implemented yet. Use connect instead.");
};a.prototype.onActivate=function(){};a.prototype.onDeactivate=function(){};a.prototype.onDrawComplete=function(){this.inputMethod==h.InputMethod.MOUSE&&this._clear()};a.prototype.onDrawEnd=function(b){this.app.trace.debug("[DrawTool] Number of vertices drawn "+this._vertexCount(b));this.inputMethod==h.InputMethod.MOUSE&&this._clear();this.app.event("GraphicDrawCompletedEvent").publish(b)};a.prototype.onKeyboardStart=function(){var b=this;c.prototype.onKeyboardStart.call(this);this.deactivateMouseControls();
this._plotShape(this._map.extent.getCenter(),this._geometryType).then(function(a){return b._editShape(a)})};a.prototype.onKeyboardStop=function(b){b===void 0&&(b=false);c.prototype.onKeyboardStop.call(this,b);this._graphic&&!b?(b=this._graphic.geometry,this._clear(),this._drawEnd(b)):this._clear()};a.prototype._onKeyDown=function(b){c.prototype._onKeyDown.call(this,b);if(!this.suspended&&this._active&&this.inputMethod!==h.InputMethod.MOUSE){var a=false;switch(b.keyCode||b.which){case dojo.keys.ENTER:case dojo.keys.NUMPAD_ENTER:this.toggleKeyboardMode();
a=true;break;case dojo.keys.ESCAPE:this.onKeyboardStop(true),a=true}a&&(b.preventDefault(),b.stopPropagation())}};a.prototype._onClickHandler=function(){this.inputMethod===h.InputMethod.MOUSE&&this._syncPointsCollection()};a.prototype._supportsKeyboardInput=function(b){switch(b){case a.ARROW:case a.CIRCLE:case a.DOWN_ARROW:case a.ELLIPSE:case a.EXTENT:case a.LEFT_ARROW:case a.MULTI_POINT:case a.POINT:case a.POLYGON:case a.POLYLINE:case a.RECTANGLE:case a.RIGHT_ARROW:case a.TRIANGLE:case a.UP_ARROW:return true}return false};
a.prototype._finishKeyboardDrawing=function(b){b===void 0&&(b=true);if(this._active){var i,e=this._map.spatialReference,c=this._points.slice(0,this._points.length);switch(this._geometryType){case a.POLYLINE:if(!this._graphic||c.length<2)return;i=new esri.geometry.Polyline(e);i.addPath(c);this._graphic.setGeometry(i);break;case a.POLYGON:if(!this._graphic||c.length<2)return;c.push(c[0].offset(0,0));!esri.geometry.Polygon.prototype.isClockwise(c)&&!this.respectDrawingVertexOrder&&(this.app.trace.debug("Polygons drawn in anti-clockwise direction will be reversed to be clockwise."),
c.reverse());i=new esri.geometry.Polygon(e);i.addRing(c);this._graphic.setGeometry(i);break;case a.MULTI_POINT:i=new esri.geometry.Multipoint(e);c.forEach(function(b){i.addPoint(b)});this._graphic.setGeometry(i);break;default:if(!this._graphic||!this._graphic.geometry)return;i=this._graphic.geometry}if(b)this.onKeyboardStop()}};a.prototype._clear=function(){this._graphic&&this._map.graphics.remove(this._graphic);this._ghostLine&&this._map.graphics.remove(this._ghostLine);this._vertexAnchor&&this._map.graphics.remove(this._vertexAnchor);
this._editCompletedHandle&&this._editCompletedHandle.remove();this._polyGeometryKeyDownHandle&&this._polyGeometryKeyDownHandle.remove();this._editObject&&this._editObject.deactivate();this._polyGeometryKeyDownHandle=this._editCompletedHandle=this._createGeometryDeferred=this._graphic=this._vertexAnchor=this._ghostLine=null;this._isPlottingPolyGeometry=false;this._lastVertexPosition=null;this.suspended=false;this._points.length=0;this.deactivateMouseControls();this._supportsKeyboardInput(this._geometryType)&&
this.deactivateKeyboardControls();this.setInputMethod(null);this._active&&(this.activateMouseControls(),this._supportsKeyboardInput(this._geometryType)&&this.activateKeyboardControls())};a.prototype._drawEnd=function(b){if(b){this.onDrawEnd(b);var a,e=this._map.spatialReference;e&&(e.isWebMercator()?a=esri.geometry.webMercatorToGeographic(b):e.wkid===4326&&(a=esri.geometry.fromJson(b.toJson())));this.onDrawComplete({geometry:b,geographicGeometry:a})}};a.prototype._moveVertexAnchor=function(b,i){if(this._vertexAnchor&&
!isNaN(b)&&!isNaN(i)){var e=this._vertexAnchor.geometry,c=this._map.toMap(this._map.toScreen(e).offset(b,i)),e=e.offset(c.x-e.x,c.y-e.y);[a.POLYLINE,a.POLYGON].indexOf(this._geometryType)>-1&&this._updateGhostLine(e);this._vertexAnchor.setGeometry(e).setSymbol(this.selectedVertexSymbol);this._vertexAnchor.getDojoShape().moveToFront();this.raiseGraphicVertexMoved({sender:this,mapPoint:e,screenPoint:this._map.toScreen(e)})}};a.prototype._handleSnappingEvent=function(b){if(!this._active||!this._editObject.isActive())(this._lastSnappingPoint=
b.snappingPoint)&&this._ghostLine&&this._updateGhostLine(this._lastSnappingPoint)};a.prototype._updateGhostLine=function(b){if(this._points&&this._points.length>0){var a=this._ghostLine.geometry;a.setPoint(0,0,this._points[this._points.length-1].offset(0,0));a.setPoint(0,1,b);this._ghostLine.setGeometry(a)}};a.prototype._addVertex=function(b){var i=b;if(this._lastSnappingPoint)b=this._lastSnappingPoint;var e;this._points.push(b.offset(0,0));switch(this._geometryType){case a.POLYLINE:this._points.length===
1?(e=new esri.geometry.Polyline(this._map.spatialReference),e.addPath(this._points),this._graphic=this._map.graphics.add(new esri.Graphic(e,this.lineSymbol)),e=new esri.geometry.Polyline(this._map.spatialReference),e.addPath([b.offset(0,0),b.offset(0,0)]),this._ghostLine=this._map.graphics.add(new esri.Graphic(e,this.lineSymbol))):(e=this._graphic.geometry,e.insertPoint(0,e.paths[0].length,b.offset(0,0)),this._graphic.setGeometry(e).setSymbol(this.lineSymbol),e=this._ghostLine.geometry,e.setPoint(0,
0,b.offset(0,0)),e.setPoint(0,1,b.offset(0,0)),this._ghostLine.setGeometry(e));break;case a.POLYGON:this._points.length===1?(e=new esri.geometry.Polygon(this._map.spatialReference),e.addRing(this._points),this._graphic=this._map.graphics.add(new esri.Graphic(e,this.fillSymbol)),e=new esri.geometry.Polyline(this._map.spatialReference),e.addPath([b.offset(0,0),b.offset(0,0)]),this._ghostLine=this._map.graphics.add(new esri.Graphic(e,this.fillSymbol))):(e=this._graphic.geometry,e.insertPoint(0,e.rings[0].length,
b.offset(0,0)),this._graphic.setGeometry(e).setSymbol(this.fillSymbol),e=this._ghostLine.geometry,e.setPoint(0,0,b.offset(0,0)),e.setPoint(0,1,b.offset(0,0)),this._ghostLine.setGeometry(e));break;case a.MULTI_POINT:this._points.length===1?(e=new esri.geometry.Multipoint(this._map.spatialReference),e.addPoint(b.offset(0,0)),this._graphic=this._map.graphics.add(new esri.Graphic(e,this.markerSymbol))):(e=this._graphic.geometry,e.addPoint(b.offset(0,0)),this._graphic.setGeometry(e).setSymbol(this.markerSymbol))}this._lastVertexPosition=
i.offset(0,0);this._vertexAnchor.setGeometry(i.offset(0,0)).setSymbol(this.selectedVertexSymbol);this._vertexAnchor.getDojoShape().moveToFront()};a.prototype._drawPolyGeometry=function(b){var a=this;if(!b||this._isPlottingPolyGeometry)return Promise.resolve(null);if(this._lastSnappingPoint)b=this._lastSnappingPoint;this._isPlottingPolyGeometry=true;this.app.map.disableMapNavigation();this.suspend();this._lastVertexPosition=null;this._vertexAnchor=this._map.graphics.add(new esri.Graphic(b.offset(0,
0),this.selectedVertexSymbol));this.raiseGraphicVertexMoved({sender:this,mapPoint:b,screenPoint:this._map.toScreen(b)});if(this._polyGeometryKeyDownHandle)this._polyGeometryKeyDownHandle.remove(),this._polyGeometryKeyDownHandle=null;var e=null;return(new Promise(function(b,e){return a._polyGeometryKeyDownHandle=a._drawPolyGeometry_handleKeyDown(b,e)})).then(function(b){return e=b}).caught(function(){a.onKeyboardStop(true);return e=null}).lastly(function(){a._isPlottingPolyGeometry=false;a.app.map.enableMapNavigation();
if(a._polyGeometryKeyDownHandle)a._polyGeometryKeyDownHandle.remove(),a._polyGeometryKeyDownHandle=null;a.resume();return e})};a.prototype._drawPolyGeometry_handleKeyDown=function(b,a){var e=this;return dojo.on(this._map.root,"keydown",function(c){var l=c.altKey,m=l?e._options.preciseVertexOffsetX:e._options.vertexOffsetX,l=l?e._options.preciseVertexOffsetY:e._options.vertexOffsetY;switch(c.keyCode||c.which){case dojo.keys.UP_ARROW:case dojo.keys.NUMPAD_8:e._moveVertexAnchor(0,-l);break;case dojo.keys.RIGHT_ARROW:case dojo.keys.NUMPAD_6:e._moveVertexAnchor(m,
0);break;case dojo.keys.DOWN_ARROW:case dojo.keys.NUMPAD_2:e._moveVertexAnchor(0,l);break;case dojo.keys.LEFT_ARROW:case dojo.keys.NUMPAD_4:e._moveVertexAnchor(-m,0);break;case dojo.keys.PAGE_UP:case dojo.keys.NUMPAD_9:e._moveVertexAnchor(m,-l);break;case dojo.keys.PAGE_DOWN:case dojo.keys.NUMPAD_3:e._moveVertexAnchor(m,l);break;case dojo.keys.END:case dojo.keys.NUMPAD_1:e._moveVertexAnchor(-m,l);break;case dojo.keys.HOME:case dojo.keys.NUMPAD_7:e._moveVertexAnchor(-m,-l);break;case dojo.keys.ENTER:case dojo.keys.NUMPAD_ENTER:d.GeometryUtils.pointsAreEqual(e._vertexAnchor.geometry,
e._lastVertexPosition)?(e._graphic&&e._map.graphics.remove(e._graphic),e._vertexAnchor&&e._map.graphics.remove(e._vertexAnchor),e._finishKeyboardDrawing(false),b(e._graphic?e._graphic.geometry:null)):(m=e._vertexAnchor.geometry,e._addVertex(m),m={sender:e,mapPoint:m,screenPoint:e._map.toScreen(m)},e.raiseGraphicVertexAdded(m));break;case dojo.keys.ESCAPE:a(null);break;default:return}c.preventDefault();c.stopPropagation()})};a.prototype._plotShape=function(b,c){var e=this._map.toScreen(b);switch(c){case a.POINT:return Promise.resolve(b.offset(0,
0));case a.POLYLINE:return this._drawPolyGeometry(b,c);case a.POLYGON:return this._drawPolyGeometry(b,c);case a.MULTI_POINT:return this._drawPolyGeometry(b,c);case a.ARROW:return Promise.resolve(this._toPolygon(this._arrowShapeTemplate,e.x,e.y));case a.LEFT_ARROW:return Promise.resolve(this._toPolygon(this._leftArrowShapeTemplate,e.x,e.y));case a.RIGHT_ARROW:return Promise.resolve(this._toPolygon(this._rightArrowShapeTemplate,e.x,e.y));case a.UP_ARROW:return Promise.resolve(this._toPolygon(this._upArrowShapeTemplate,
e.x,e.y));case a.DOWN_ARROW:return Promise.resolve(this._toPolygon(this._downArrowShapeTemplate,e.x,e.y));case a.TRIANGLE:return Promise.resolve(this._toPolygon(this._triangleShapeTemplate,e.x,e.y));case a.RECTANGLE:case a.EXTENT:return Promise.resolve(this._toPolygon(this._rectangleShapeTemplate,e.x-48,e.y+24));case a.CIRCLE:return e=a.createCircle({center:e,radius:48,numberOfPoints:60,map:this._map}),Promise.resolve(e);case a.ELLIPSE:return e=a.createEllipse({center:e,longAxis:48,shortAxis:24,numberOfPoints:60,
map:this._map}),Promise.resolve(e)}return Promise.resolve(null)};a.prototype._editShape=function(b){if(b)if(this._options.enableEditing===false)this._clear(),this._drawEnd(b);else{this.suspend();var a;switch(b.type){case "point":case "multipoint":a=this.markerSymbol;break;case "polyline":a=this.lineSymbol;break;case "polygon":case "extent":a=this.fillSymbol}var e=this._getEditMode(this._geometryType);this._graphic=this._map.graphics.add(new esri.Graphic(b,a));if(this._editCompletedHandle)this._editCompletedHandle.remove(),
this._editCompletedHandle=null;this._editCompletedHandle=dojo.aspect.after(this._editObject,"onDeactivate",dojo.hitch(this,"_onEditShapeCompleted"),true);this._editObject.activate(e.mode,this._graphic,e.options)}};a.prototype._onEditShapeCompleted=function(b,a,e){b=e?!!e.isModified:false;e=e?!!e.cancelled:false;if(a&&b)this._graphic=a;this.resume();this.onKeyboardStop(e)};a.prototype._toPolygon=function(b,a,e){var c=this._map,b=b.map(function(b){return c.toMap(new esri.geometry.ScreenPoint(b[0]+a,
b[1]+e))}),l=new esri.geometry.Polygon(c.spatialReference);l.addRing(b);return l};a.prototype._syncPointsCollection=function(){this._points=this._drawObject._points};a.prototype._getEditMode=function(b){var c={mode:0,options:{}};switch(b){case a.POINT:c.mode=h.Edit.MOVE;break;case a.MULTI_POINT:c.mode=h.Edit.EDIT_VERTICES;c.options.allowAddVertices=false;c.options.allowDeleteVertices=true;break;case a.POLYLINE:case a.ARROW:case a.LEFT_ARROW:case a.RIGHT_ARROW:case a.UP_ARROW:case a.DOWN_ARROW:case a.TRIANGLE:case a.RECTANGLE:case a.POLYGON:c.mode=
h.Edit.MOVE|h.Edit.ROTATE|h.Edit.SCALE|h.Edit.EDIT_VERTICES;c.options.allowAddVertices=true;c.options.allowDeleteVertices=true;c.options.uniformScaling=false;break;case a.EXTENT:c.mode=h.Edit.MOVE|h.Edit.SCALE;c.options.allowAddVertices=false;c.options.allowDeleteVertices=false;c.options.uniformScaling=false;break;case a.CIRCLE:c.mode=h.Edit.MOVE|h.Edit.SCALE;c.options.uniformScaling=true;break;case a.ELLIPSE:c.mode=h.Edit.MOVE|h.Edit.ROTATE|h.Edit.SCALE,c.options.uniformScaling=false}return c};a.prototype._vertexCount=
function(b){return b&&b.type==="polyline"?b.paths[0].length:b&&b.type==="polygon"?b.rings[0].length-1:b&&b.type==="multipoint"?b.points.length:0};a.prototype._twoClicksWithin300MsFixup=function(){var b=this,a=this._drawObject;if(a&&typeof a._onClickHandler==="function"){var c=a._onClickHandler;a._onClickHandler=function(a){return b._twoClicksWithin300MsFixup_handleClick(a,c)}}else this.app.trace.warning("The _drawObject _onClickHandler hook is dysfunctional. Markup and Measurement (tool) functionality may be affected on touch devices.")};
a.prototype._twoClicksWithin300MsFixup_handleClick=function(b,c){var e=false,j=0,l=0,d=function(b){j=b[0].mapPoint.x;l=b[0].mapPoint.y};if(this._geometryType===a.POLYLINE||this._geometryType===a.POLYGON||this._geometryType===a.POINT||this._geometryType===a.MULTI_POINT){if(!e&&!(b.mapPoint.x===j&&b.mapPoint.y===l)){e=true;setTimeout(function(){e=false},300);var f={sender:this,mapPoint:b.mapPoint,screenPoint:b.screenPoint};c.apply(this._drawObject,arguments);this.raiseGraphicVertexAdded(f)}d(arguments)}else c.apply(this._drawObject,
arguments)};a.prototype._extraPointOnTouchDevicesFixup=function(){var b=this,a=function(a){var c=b._drawObject,i=!(!require||!require.has||!require.has("esri-touch"));b.app.trace.debug("[DrawTool] IsTouch = "+i);var d=c?c._points:null;if(d)if(i){if(d.length>=2){var f=d.push;d.push=function(){b.app.trace.debug("[DrawTool] points.length "+d.length);d.push=f}}}else if(d.length<2||d[d.length-1].x!==a.mapPoint.x&&d[d.length-1].y!==a.mapPoint.y)b._lastSnappingPoint?b.app.trace.debug("[DrawTool] Bailout due to snapping"):
(d.push(a.mapPoint),b.raiseGraphicVertexAdded({sender:b,mapPoint:a.mapPoint,screenPoint:a.screenPoint}))};this._dblClickHandlerToken?this.app.trace.debug("[DrawTool] No double click subscribed"):this._dblClickHandlerToken=this.app.map.on("dbl-click",a)};a._draw=function(){require(["esri/toolbars/draw"],function(b){a.ARROW=b.ARROW;a.CIRCLE=b.CIRCLE;a.DOWN_ARROW=b.DOWN_ARROW;a.ELLIPSE=b.ELLIPSE;a.EXTENT=b.EXTENT;a.FREEHAND_POLYGON=b.FREEHAND_POLYGON;a.FREEHAND_POLYLINE=b.FREEHAND_POLYLINE;a.LEFT_ARROW=
b.LEFT_ARROW;a.LINE=b.LINE;a.MULTI_POINT=b.MULTI_POINT;a.POINT=b.POINT;a.POLYGON=b.POLYGON;a.POLYLINE=b.POLYLINE;a.RECTANGLE=b.RECTANGLE;a.RIGHT_ARROW=b.RIGHT_ARROW;a.TRIANGLE=b.TRIANGLE;a.UP_ARROW=b.UP_ARROW})}();return a}(h.AccessibleMapComponent);h.Draw=f;(function(c){var a=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.raiseGraphicEditActivated=function(b){this.app.event("GraphicDrawAccessibleEditActivatedEvent").publish(b)};a.prototype.raiseGraphicEditDeactivated=
function(b){this.app.event("GraphicDrawAccessibleEditDeactivatedEvent").publish(b)};return a}(d.accessibility.Edit);c.EditInternal=a})(f=h.Draw||(h.Draw={}))})(d.accessibility||(d.accessibility={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){var h=function(){return function(){}}();d.AttributeGroup=h})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){var h=function(){function f(){this.dataLink=new Observable;this.table=new Observable}f.prototype.toAttributes=function(){var c=this.table.get();if(!c)return null;for(var a={},b=0;b<c.columns.length;b++)a[c.columns[b]]=c.rows.length>0?c.rows[0].row[b]:null;return a};f.prototype.asAttributeGroup=function(){if(!this._attributeGroup)this._attributeGroup=new d.AttributeGroup,this._attributeGroup.owner=this,this._attributeGroup.attributes=this.toAttributes();
return this._attributeGroup};return f}();d.DataLinkingResult=h})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(k){var h=function(){function f(c,a,b,i,e,j,l){this.value=new Observable(typeof c==="undefined"?"":c);this.name=new Observable(typeof a==="undefined"?"":a);this.alias=new Observable(typeof b==="undefined"?this.name.get():b);this.displayName=new Observable(typeof i==="undefined"?this.name.get():i);this.visible=new Observable(typeof e==="undefined"?true:e);this.type=new Observable(typeof l==="undefined"?"":l);this.presentableValue=j?new d.framework.ui.LazyObservable(null,
j(c),true):new d.framework.ui.LazyObservable(null,function(){return c},true);this.displayAsUrl=d.framework.utils.isUrl(c)}f.ignoreAttribute=function(c){return c&&f.ignoreAttributeMatcher.test(c)};f.ignoreAttributeMatcher=/.*\.Name\(\)$/;return f}();k.FeatureAttribute=h})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){d.formatNumber=function(d,c,a){c=(0.1).toLocaleString(c).charAt(1);return d.toFixed(a).replace(".",c)}})(d.FormatUtils||(d.FormatUtils={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(k){var h=function(){function f(){}f.typeIdForLayerAndAttributes=function(c,a){return c.typeIdField?a[c.typeIdField]:null};f.typeFromLayerAndId=function(c,a){for(var b=0;b<c.types.length;b++)if(c.types[b].id==a)return c.types[b];return null};f.makeValueTruthy=function(c){return c===0?"0":c===false?"false":c};f.valuePresenterDelegate=function(c,a){var b,i;if(typeof c==="string")i=c,a&&a.layer&&(b=a.layer.fields.filter(function(b){return b.name===i})[0]);
else if(c)b=c,i=b.name;return function(c){return function(){var j=a?a.featureLayer:null,l=a?a.getType():null,m=j?j.getField(i):null;if(!m&&!b)return f.makeValueTruthy(c);else if(b&&b.hyperlinkLabel)c=b.hyperlinkLabel;m=m?k.gis.FieldInfo.fromEsriField(m,j,b):k.gis.FieldInfo.fromGcxField(b);if(j&&(m.isCodedValueDomain()||m.hasSubtypeCodedValueDomains()))if(j=m.resolveCodedDomainValue(c,l?l.id.toString():null),j!=null)return j;if(a&&(j=a.esriFeature.get())&&j.attributes.hasOwnProperty(i+".Name()"))return f.makeValueTruthy(j.attributes[i+
".Name()"]);j=d.framework.applications&&d.framework.applications.length>0?d.framework.applications[0].locale:"en-US";if(m.isDate()){if(typeof c==="number"||typeof c==="string"&&c.match(/^\s*-?\d+\s*$/))return m=new Date(c),m=="Invalid Date"&&(m=new Date(parseInt(c))),f.makeValueTruthy(m.toLocaleString(j))}else if(m.isNumeric()&&c){var m=c.toString(),l=m.lastIndexOf("."),u=m.lastIndexOf(","),h="";l!==-1&&u===-1?h=".":l===-1&&u!==-1?h=",":l!==-1&&u!==-1&&(l<u?(h=",",m=m.replace(/\./g,"")):(h=".",m=
m.replace(/,/g,"")));if(!isNaN(parseFloat(m)))return l=h!==""?m.split(h)[1]:"",g.infrastructure.FormatUtils.formatNumber(parseFloat(m),j,l.length)}return f.makeValueTruthy(c)}}};return f}();k.PresentableDelegateFactory=h})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){var h=function(){return function(){this.id=new Observable;this.contentType=new Observable;this.size=new Observable;this.name=new Observable;this.url=new Observable}}();d.AttachmentInfo=h})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){return function(c,a,b,i,e){this.geometries=c;this.outputSpatialReference=i;this.callback=a;this.errback=b;this.transformation=e}}();d.ProjectArgs=f})(d.commandArgs||(d.commandArgs={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(k){(function(h){function f(c,a){return c===a||c.type===a.type&&c.spatialReference&&a.spatialReference&&c.spatialReference.equals(a.spatialReference)}h.stepZoom=function(c,a,b){if(b==null)b=c.extent;a=d.essentials.GeometryUtilities.scaleEnvelopeWithoutTranslation(b,1/a);c.setExtent(a,!!c._fitTiledMapsToExtent);return a};h.stepZoomWithPriority=function(c,a,b,i){if(b==null)b=c.getMap().extent;a=d.essentials.GeometryUtilities.scaleEnvelopeWithoutTranslation(b,
1/a);c.essentialsMap.extentManager.setExtentWithPriority(a,i);return a};h.getExtent=function(c){return c?c.type=="point"?new esri.geometry.Extent(c.x,c.y,c.x,c.y,c.spatialReference):c.getExtent():null};h.panToPointWithPriority=function(c,a,b,i){a&&a.isInstanceOf(esri.geometry.Geometry)&&(a=new d.essentialsHtmlViewer.mapping.infrastructure.commandArgs.ProjectArgs([a],function(a){var j=null,l=null;a&&a.length>0&&(j=a[0]);if(c.map&&j)if((i||i===void 0)&&c.command("ShowMap").execute(),j.type=="point")c.site.essentialsMap.extentManager.centerAtWithPriority(j,
b);else if(j.type=="extent")c.site.essentialsMap.extentManager.centerAtWithPriority(j.getCenter(),b);else if(j.type=="polyline"||j.type=="polygon"||j.type=="multipoint")(l=j.getExtent())&&c.site.essentialsMap.extentManager.centerAtWithPriority(l.getCenter(),b)},function(b){c.trace.warning("PanToPoint: "+b.message)}),c.command("Project").execute(a))};h.zoomToExtent=function(c,a,b){this.zoomToExtentWithPriority(c,a,null,null,b)};h.zoomToExtentWithPriority=function(c,a,b,i){var e=function(a){a&&a.length>
0&&((i||i===void 0)&&c.command("ShowMap").execute(),b==null?c.map.setExtent(a[0],!!c.map._fitTiledMapsToExtent):c.site.essentialsMap.extentManager.setExtentWithPriority(a[0],b),c.event("MapStartupExtentChangedEvent").publish(a[0]))};if(a&&a.isInstanceOf(esri.geometry.Extent))if(!a.spatialReference&&c.map.spatialReference)a.spatialReference=c.map.spatialReference,e([a]);else{if(a.spatialReference&&!a.spatialReference.toJson&&(a.spatialReference.wkid||a.spatialReference.wkt))a.spatialReference=new esri.SpatialReference(a.spatialReference);
a=new d.essentialsHtmlViewer.mapping.infrastructure.commandArgs.ProjectArgs([a],e,function(b){c.trace.warning("ZoomToExtent: "+b.message)});c.command("Project").execute(a)}};h.cloneEsriFeature=function(c){var a=new esri.Graphic(c.toJson());a._graphicsLayer=c._graphicsLayer;return a};h.esriFeaturesEqual=function(c,a){if(c===a)return true;var b=["__editingMeta","timestamp"],i=function(a){var c=0,e;for(e in a)!d.framework.utils.ArrayUtils.contains(b,e)&&a.hasOwnProperty(e)&&++c;return c};if(i(c.attributes)!==
i(a.attributes))return false;for(var e in c.attributes)if(c.attributes.hasOwnProperty(e)&&!d.framework.utils.ArrayUtils.contains(b,e)&&(!a.attributes.hasOwnProperty(e)||c.attributes[e]!=a.attributes[e]))return false;return true};h.compareTypeSR=f;h.esriPointsEqual=function(c,a){return c===a||c.x==a.x&&c.y==a.y&&f(c,a)};h.esriMultipointsEqual=function(c,a){var b=f(c,a);if(b&&c.points.length===a.points.length){for(var i=0;b&&i<c.points.length;i++)b=c.points[i][0]===a.points[i][0]&&c.points[i][1]===
a.points[i][1];return b}return false};h.esriPolylinesEqual=function(c,a){var b=f(c,a);b&&dojo.forEach(c.paths,function(c,e){if(c.length===a.paths[e].length){for(var j=0;b&&j<c.length;j++)b=c[j][0]===a.paths[e][j][0]&&c[j][1]===a.paths[e][j][1];if(!b)return b}else b=false});return b};h.esriPolygonsEqual=function(c,a){var b=f(c,a);b&&dojo.forEach(c.rings,function(c,e){if(c.length===a.rings[e].length){for(var j=0;b&&j<c.length;j++)b=c[j][0]===a.rings[e][j][0]&&c[j][1]===a.rings[e][j][1];if(!b)return b}else b=
false});return b};h.esriExtentsEqual=function(c,a){return f(c,a)&&c.xmin==a.xmin&&c.xmax==a.xmax&&c.ymin==a.ymin&&c.ymax==a.ymax};h.findFeatureInLayer=function(c,a){if(!c||!a)return null;var b=a.objectIdField,i=a.graphics;if(i.length<1)return null;var e=["__editingMeta","timestamp"];if(a.editFieldsInfo)for(var j in a.editFieldsInfo)a.editFieldsInfo.hasOwnProperty(j)&&e.push(a.editFieldsInfo[j]);j=function(b){var a=0,c;for(c in b)!d.framework.utils.ArrayUtils.contains(e,c)&&b.hasOwnProperty(c)&&++a;
return a};var l=i[0].attributes;if(j(l)!==j(c.attributes))return null;var m=0,f=[],h=[],k;for(k in l){var g=d.framework.utils.ArrayUtils.contains(e,k);if(!g&&(!l.hasOwnProperty(k)||!c.attributes.hasOwnProperty(k)))return null;g||(f.push(k),h.push(k),++m)}for(k=0;k<m;++k)if(f[k]!==h[k])return null;for(m=0;m<i.length;m++)if(f=i[m],j(l)===j(c.attributes)&&f.attributes[b]===c.attributes[b])return f._graphicsLayer=a,f;return null};h.findFeatureInMap=function(c,a,b){var i=null;if(b&&(i=this.findFeatureInLayer(c,
b)))return i._graphicsLayer=b,i;for(var a=a.getFeatureServices(),e=0;e<a.length;e++){var j=a[e].serviceLayer;if(!(b&&j===b)&&(i=this.findFeatureInLayer(c,j)))return i}!i&&c.getLayer&&c.getLayer()&&(i=c);return i}})(k.MapUtils||(k.MapUtils={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(k){var h=function(){function f(c){var a=this;this._isAttachmentInfosLoaded=false;this._defaultFieldFormatString="{0}: {1}";this.featureSet=this.featureLayer=this.token=null;this.labelFormat=new d.framework.ui.LazyObservable;this.minScale=new d.framework.ui.LazyObservable;this.maxScale=new d.framework.ui.LazyObservable;this.zoomScale=new d.framework.ui.LazyObservable;this.zoomFactor=new d.framework.ui.LazyObservable;this.zoomExtent=new Observable;this.borderColor=
new d.framework.ui.LazyObservable;this.fillColor=new d.framework.ui.LazyObservable;this.id=new d.framework.ui.LazyObservable;this.attributes=new ObservableCollection;this.label=new d.framework.ui.LazyObservable;this.plainLabel=new d.framework.ui.LazyObservable;this.description=new d.framework.ui.LazyObservable;this.descriptionFormat=new d.framework.ui.LazyObservable;this.longDescription=new d.framework.ui.LazyObservable;this.longDescriptionFormat=new d.framework.ui.LazyObservable;this.hyperlinks=
new ObservableCollection;this.extendedProperties=new ObservableCollection;this.attachmentInfos=null;this.attachmentInfosInitialized=new Observable(false);this.hasAttachments=new Observable(false);this.hasRelationships=new Observable(false);this.hasVisibleRelationships=new Observable(false);this.hasGeometry=new d.framework.ui.LazyObservable;this.hasValidGeometry=new d.framework.ui.LazyObservable;this.iconUri=new d.framework.ui.LazyObservable;this.linkedAttributes=new ObservableCollection;this.dataLinkingResults=
new ObservableCollection;this._resolveLayerFields=this._allowUnsafeContent=false;var b=null;if(c&&c.hasOwnProperty("graphic"))this._graphic=c.graphic;if(c&&c.hasOwnProperty("featureLayer"))this.featureLayer=c.featureLayer;if(c&&c.hasOwnProperty("layer"))(b=c.layer)&&!this.featureLayer&&b.getFeatureLayer().then(function(b){(a.featureLayer=b)&&a._refreshPresentableValues()});if(c&&c.hasOwnProperty("resolveLayerFields"))this._resolveLayerFields=c.resolveLayerFields;else if(b&&b.fields)this._resolveLayerFields=
true;this._allowUnsafeContent=c&&c.hasOwnProperty("allowUnsafeContent")?c.allowUnsafeContent:false;this.token=d.framework.utils.alphaNumericToken();this.esriFeature=new Observable(this._graphic);this.esriFeature.bind(this,function(){a._graphic=a.esriFeature.get();a.loadAttributes(a._resolveLayerFields);a._setupLinkedAttributes();a.attachmentInfos.clear();a._isAttachmentInfosLoaded=false;a.attachmentInfosInitialized.set(false);a._refreshPresentableValues()});this.connectDelegates();if(b){this.layer=
b;this.hasAttachments.set(this.layer.hasAttachments);if(this.layer.relationships&&this.layer.relationships.length>0){this.hasRelationships.set(true);for(c=0;c<this.layer.relationships.length;c++)if(this.layer.relationships[c].visible){this.hasVisibleRelationships.set(true);break}}b.featureHyperlinks!=null&&this.hyperlinks.addItems(b.featureHyperlinks)}this.loadAttributes(this._resolveLayerFields);this._prepAttachmentInfos();this._graphic&&this._setupLinkedAttributes()}f.prototype.getExtendedPropertyByName=
function(c){for(var a=0;a<this.extendedProperties.getLength();a++){var b=this.extendedProperties.getAt(a);if(b&&b.name==c)return b.value}return null};f.prototype.setExtendedProperty=function(c,a){for(var b=0;b<this.extendedProperties.getLength();b++){var i=this.extendedProperties.getAt(b);if(i&&i.name==c){i.value=a;return}}this.extendedProperties.addItem({name:c,value:a})};f.prototype.connectDelegates=function(){var c=this;this.hasGeometry.delegateGetter=function(){return!(!c._graphic||!c._graphic.geometry)};
this.hasValidGeometry.delegateGetter=function(){return!(!c._graphic||!c._graphic.geometry)&&k.GeometryUtils.isValidGeometry(c._graphic.geometry)};this.id.cacheDelegateResults=true;this.id.delegateGetter=function(){var a="";if(c._graphic&&c.layer){var b=null;c.layer&&(b=c.layer.getObjectIdFieldName());b&&c._graphic.attributes&&c._graphic.attributes.hasOwnProperty(b)&&(a=c._graphic.attributes[b])}return a};this.label.delegateGetter=function(){var a=null,a=c.labelFormat.get(),a=c.formatTemplateString(a);
if(a==null||a==void 0||!a.toString().trim())a=c._getDefaultFieldValue(),a!=void 0&&a!=null&&c.layer&&(a=c.layer.displayName&&c.layer.displayName.toString().trim()?c.layer.displayName+(a.toString().trim()?", "+a:""):a.toString().trim()?a:"");return a};this.plainLabel.delegateGetter=function(){return c.label.get().replace(/((<.*?>)+)/g,"")};this.labelFormat.delegateGetter=function(){if(c.layer&&c.layer.featureLabel)return c.layer.featureLabel;else if(c.featureSet&&c.featureSet.esriFeatureSet&&c.featureSet.esriFeatureSet.displayFieldName&&
c.featureSet.layer&&c.featureSet.layer.displayName)return c.featureSet.layer.displayName+", {"+c.featureSet.esriFeatureSet.displayFieldName+"}";else if(c.featureSet&&c.featureSet.esriFeatureSet&&c.featureSet.esriFeatureSet.displayFieldName)return"{"+c.featureSet.esriFeatureSet.displayFieldName+"}";return""};this.borderColor.delegateGetter=function(){return c.layer&&c.layer.featureBorderColor?c.layer.featureBorderColor:null};this.fillColor.delegateGetter=function(){return c.layer&&c.layer.featureFillColor?
c.layer.featureFillColor:null};this.description.delegateGetter=function(){var a=c.descriptionFormat.get();return c.formatTemplateString(a)};this.descriptionFormat.delegateGetter=function(){return c.layer&&c.layer.featureDescription?c.layer.featureDescription:null};this.longDescription.delegateGetter=function(){var a=c.longDescriptionFormat.get();return c.formatTemplateString(a)};this.longDescriptionFormat.delegateGetter=function(){return c.layer&&c.layer.featureLongDescription?c.layer.featureLongDescription:
c.descriptionFormat.get()};this.minScale.delegateGetter=function(){return c.layer&&!isNaN(c.layer.minScale)?c.layer.minScale:Infinity};this.maxScale.delegateGetter=function(){return c.layer&&!isNaN(c.layer.maxScale)?c.layer.maxScale:null};this.iconUri.delegateGetter=function(){if(c.layer&&c.layer.iconUri)return c.layer.iconUri;else if(c.featureSet&&c.featureSet.iconUri&&c.featureSet.iconUri.get())return c.featureSet.iconUri.get();return null};this.zoomScale.delegateGetter=function(){return c.layer&&
c.layer.featureZoomScale?c.layer.featureZoomScale:null};this.zoomFactor.delegateGetter=function(){return c.layer&&c.layer.featureZoomFactor?c.layer.featureZoomFactor:null}};f.prototype.withinScaleRange=function(c){return this.maxScale.get()==0&&this.minScale.get()==Infinity||isNaN(this.maxScale.get())&&isNaN(this.minScale.get())?true:!c?false:this.maxScale.get()<=c&&c<=this.minScale.get()};f.prototype.calculateScaleToMakeVisible=function(c){return this.withinScaleRange(c)?c:c<this.maxScale.get()?
this.maxScale.get():this.minScale.get()};f.prototype._getDefaultFieldValue=function(){var c="",a=this.esriFeature.get();a&&this.layer&&this.layer.displayField&&(c=a.attributes[this.layer.displayField.name],c!==null&&c!==void 0&&(c=c.toString().trim()));if((c==null||c==void 0||!c)&&a&&a.attributes)c=a.attributes.OBJECTID,c!==null&&c!==void 0&&(c=c.toString().trim());if((c==null||c==void 0||!c)&&a&&a.attributes)for(var b in a.attributes)if(c=a.attributes[b],c!==null&&c!==void 0&&(c=c.toString().trim()),
c)break;return String.escapeHtmlEncode(c)};f.prototype._prepAttachmentInfos=function(){var c=this,a=new ObservableCollection,b=a.get;a.get=function(){c._isAttachmentInfosLoaded||c._loadAttachmentsInfos();return b.call(a)};var i=a.getItems;a.getItems=function(){c._isAttachmentInfosLoaded||c._loadAttachmentsInfos();return i.call(a)};var e=a.getAt;a.getAt=function(b){c._isAttachmentInfosLoaded||c._loadAttachmentsInfos();return e.call(a,b)};this.attachmentInfos=a};f.prototype.loadAttributes=function(c){this.attributes.clear();
this.attributes.addItems(this.getAttributesFromEsriFeature(this._graphic.attributes,c))};f.prototype.getAttributesFromEsriFeature=function(c,a){var b=this,i=[];if(a!==false&&this.layer&&this.layer.fields){var e=null;if(this.layer.mapService)e=this.layer.mapService.serviceLayer;for(var j=[],l=0;l<this.layer.fields.length;l++){var m=this.layer.fields[l],f;if(c&&(m.name||m.alias))f=c[m.name]||c[m.alias];d.essentialsHtmlViewer.mapping.infrastructure.FeatureAttribute.ignoreAttribute(m.name)?j.push(m):
typeof f==="undefined"||f==null?i.push(new k.FeatureAttribute("",m.name,m.alias,m.displayName,m.visible,k.PresentableDelegateFactory.valuePresenterDelegate(m,this),m.dataType)):i.push(new k.FeatureAttribute(f,m.name,m.alias,m.displayName,m.visible,k.PresentableDelegateFactory.valuePresenterDelegate(m,this),m.dataType))}for(f=0;f<j.length;f++){var h=j[f];if(h.visible&&(l=i.filter(function(b){return b.name.get()===h.name.substr(0,h.name.length-7)}),l=l.length===1?l[0]:null))l.visible.get()||l.visible.set(true),
l.alias.set(h.alias),l.displayName.set(h.displayName)}if(e instanceof esri.layers.WMSLayer)for(var g in c){e=false;j=c[g];for(f=0;f<this.layer.fields.length;f++)if(g===this.layer.fields[f].name){e=true;break}e||i.push(new k.FeatureAttribute(j,g))}}else if(this.featureLayer)this.featureLayer.fields.forEach(function(a){var e=a.alias?a.alias:a.name;i.push(new k.FeatureAttribute(c[a.name],a.name,e,e,true,k.PresentableDelegateFactory.valuePresenterDelegate(a.name,b)))});else if(this.featureSet&&this.featureSet.attributes&&
this.featureSet.attributes.length()>0&&c)for(f=0;f<this.featureSet.attributes.length();f++)g=this.featureSet.attributes.getAt(f),e=g.name.get(),d.essentialsHtmlViewer.mapping.infrastructure.FeatureAttribute.ignoreAttribute(e)||c.hasOwnProperty(e)&&i.push(new k.FeatureAttribute(c[e],e,g.alias.get(),g.displayName.get(),g.visible.get(),k.PresentableDelegateFactory.valuePresenterDelegate(e,this)));else if(c)for(e in c)i.push(new k.FeatureAttribute(c[e],e,e,e,true,k.PresentableDelegateFactory.valuePresenterDelegate(e,
this)));return i};f.prototype.getAttributes=function(){for(var c=this.linkedAttributes.get(),a=[],b=0;b<c.length;b++){var i=c[b];if(b===0)for(var i=this.attributes.get(),e=0;e<i.length;e++)a.push(i[e]);else{var i=i.attributes,j;for(j in i)i.hasOwnProperty(j)&&a.push(new k.FeatureAttribute(i[j],j,j,j,true,k.PresentableDelegateFactory.valuePresenterDelegate(null,null)))}}return a};f.prototype.getPrimaryKeyValue=function(){var c=null;if(this.layer&&this.layer.primaryKeyField){var a=this.layer.primaryKeyField;
a&&(c=this._graphic.attributes[a.name])}return c};f.prototype.getFeatureUrl=function(){var c=null,a=this.layer.getLayerUrl?this.layer.getLayerUrl():this.layer.url,b=null;if(this.layer instanceof d.essentials.Layer)b=this.getPrimaryKeyValue();else if(this.layer instanceof esri.layers.Layer)b=this.layer,b=this.esriFeature.get().attributes[b.objectIdField];a&&b&&(c=a+"/"+b);return c};f.prototype.getType=function(){if(!this.featureLayer)return null;var c=k.PresentableDelegateFactory.typeIdForLayerAndAttributes(this.featureLayer,
this._graphic.attributes);if(c!==null)return k.PresentableDelegateFactory.typeFromLayerAndId(this.featureLayer,c)};f.prototype.equals=function(c){if(!c||!c.declaredClass||c.declaredClass!="geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature"||!this._graphic||!c._graphic)return false;if(this===c)return true;var a=this._graphic.geometry,b=c._graphic.geometry,i=this.id.get()===c.id.get()||this.id.get()&&c.id.get()&&this.id.get()==c.id.get(),e=this.layer===c.layer||this.layer&&c.layer&&this.layer.id==
c.layer.id,j=this.layer===c.layer||this.layer&&c.layer&&this.layer.mapService===c.layer.mapService||this.layer&&c.layer&&this.layer.mapService&&c.layer.mapService&&this.layer.mapService.id==c.layer.mapService.id,l=a===b||a&&b&&a.declaredClass==b.declaredClass;if(!i||!e||!j||!l)return false;if(!d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.esriFeaturesEqual(this._graphic,c._graphic))return false;switch(a.declaredClass){case "esri.geometry.Point":case "esri.geometry.ScreenPoint":return k.MapUtils.esriPointsEqual(a,
b);case "esri.geometry.MultiPoint":return k.MapUtils.esriMultipointsEqual(a,b);case "esri.geometry.Polyline":return k.MapUtils.esriPolylinesEqual(a,b);case "esri.geometry.Polygon":return k.MapUtils.esriPolygonsEqual(a,b);case "esri.geometry.Extent":return k.MapUtils.esriExtentsEqual(a,b);default:throw Error("Warning: equals() in Feature.js - declared class does not match known geometry.");}};f.prototype._loadAttachmentsInfos=function(){var c=this;this._isAttachmentInfosLoaded=true;if(!this.layer)throw Error("Error fetching attachment infos: Feature was not associated with any known layer.");
var a={url:this.getFeatureUrl()+"/attachments/?f=json&ts={0}".format((new Date).getTime()),handleAs:"json"},b=this.layer.mapService&&this.layer.mapService.serviceToken?this.layer.mapService.serviceToken:null,i=this.layer;if(!this.layer.mapService&&i.credential&&i.credential.token)b=i.credential.token;b&&(a.url+="&token="+encodeURIComponent(b));i=null;try{i=this.layer.mapService.serviceLayer.queryAttachmentInfos(parseInt(this.id.get()))}catch(e){i=esri.request(a)}i.then(function(a){if(a.length>0&&
!a.attachmentInfos&&a instanceof Array){a.attachmentInfos=[];for(var e=0;e<a.length;e++)a.attachmentInfos[e]=a[e]}if(a&&a.attachmentInfos&&a.attachmentInfos.length>0)for(e=0;e<a.attachmentInfos.length;e++){var i=a.attachmentInfos[e],f=new d.essentialsHtmlViewer.mapping.infrastructure.AttachmentInfo;f.id.set(i.id);f.contentType.set(i.contentType);f.size.set(i.size);f.name.set(i.name);i="{0}/attachments/{1}".format(c.getFeatureUrl(),i.id);b&&(i+="?token="+b);f.url.set(i);c.attachmentInfos.addItem(f)}c.attachmentInfosInitialized.set(true)},
function(){c.attachmentInfosInitialized.set(true)})};f.prototype.formatTemplateString=function(c){var a=this;return!c?"":c.replace(/{{.+?}}|{.+?}/g,function(b){if(b.match(/{{.+?}}/g))return b.substring(1,b.length-1);else{var b=b.substring(1,b.length-1),c="",e=b.match(/(.*)\.Name\(\)$/);e&&(b=e[1]);for(var e=a.getAttributes(),j=0;j<e.length;j++)if(e[j].name&&e[j].name.get()===b||e[j].alias&&e[j].alias.get()===b){if(a.layer&&a.layer.getFieldByName(b)&&d.framework.utils.isUrl(e[j].value.get())){c=e[j].value.get();
break}c=e[j].presentableValue.get();break}!c&&a.layer&&(c=d.essentials.utilities.StringUtilities.replaceLayerTokens(b,a.layer));!c&&a.layer&&a.layer.mapService&&(c=d.essentials.utilities.StringUtilities.replaceMapServicetokens(b,a.layer.mapService));if(!c&&(e={},a.parseDataLinkId(b,e)&&a.dataLinkingResults.get()))for(j=0;j<a.dataLinkingResults.length();j++){var l=a.dataLinkingResults.getAt(j);if(l.dataLink.get()&&l.dataLink.get().id===e.dataLinkId){if(e.attributeName.toLowerCase()==="_rowcount")c=
l.table?l.table.get().rows.length:0;else if(l.table.get()){j=l.table.get();for(l=0;l<j.columns.length;l++)if(j.columns[l].toLowerCase()===e.attributeName.toLowerCase()){j.rows.length>0&&(c=j.rows[0].row[l]);break}}break}}if(!c&&b==="RestToken")c=d.essentials.RestHelperHTTPService.token;a._allowUnsafeContent?c==null&&(c=""):c=c||c===0?String.escapeHtmlEncode(c.toString()):"";return c}})};f.prototype.parseDataLinkId=function(c,a){var b=c.indexOf(".");if(b<0)return false;a.dataLinkId=c.substring(0,b);
a.attributeName=c.substring(b+1);return true};f.prototype._setupLinkedAttributes=function(){var c=new d.essentialsHtmlViewer.mapping.infrastructure.AttributeGroup;c.owner=this._graphic;c.attributes=this._graphic.attributes;this.linkedAttributes.clear();this.linkedAttributes.addItem(c)};f.prototype._refreshPresentableValues=function(){this.attributes.get().forEach(function(c){c.presentableValue.clear();c.presentableValue.pulse()});this.label.clear();this.plainLabel.clear();this.description.clear();
this.longDescription.clear();this.label.pulse();this.plainLabel.pulse();this.description.pulse();this.longDescription.pulse()};return f}();k.Feature=h})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(k){var h=function(){function f(c){var a=this;this.id="";this.displayName=new d.framework.ui.LazyObservable;this.features=new ObservableCollection;this.attributes=new ObservableCollection;this.iconUri=new d.framework.ui.LazyObservable;this.extendedProperties=new ObservableCollection;this.isSelectedInCollection=new Observable(false);this.dataLinksResolved=new Observable(false);var b=null,i=null;if(c&&c.hasOwnProperty("esriFeatureSet"))b=c.esriFeatureSet;
if(c&&c.hasOwnProperty("layer"))i=c.layer;this._allowUnsafeContent=c&&c.hasOwnProperty("allowUnsafeContent")?c.allowUnsafeContent:false;if(c&&c.hasOwnProperty("app"))this.app=c.app;this.uniqueId="fs_"+d.framework.utils.alphaNumericToken();this.esriFeatureSet=b;if(i&&(this.layer=i)&&this.layer.mapService)this.id="{0}/{1}".format(this.layer.mapService.id,this.layer.id);this.displayName.delegateGetter=function(){return a.layer&&a.layer.displayName?a.layer.displayName:""};this.iconUri.delegateGetter=
function(){return a.layer&&a.layer.iconUri?a.layer.iconUri:""};this.loadFeatures();this.loadAttributes()}f.prototype.getExtendedPropertyByName=function(c){for(var a=0;a<this.extendedProperties.getLength();a++){var b=this.extendedProperties.getAt(a);if(b&&b.name==c)return b.value}return null};f.prototype.setExtendedProperty=function(c,a){for(var b=0;b<this.extendedProperties.getLength();b++){var i=this.extendedProperties.getAt(b);if(i&&i.name==c){i.value=a;return}}this.extendedProperties.addItem({name:c,
value:a})};f.prototype.addFeature=function(c){if(!c)throw Error("Feature cannot be null.");c.featureSet=this;this.features.addItem(c);this.esriFeatureSet&&this.esriFeatureSet.features&&this.esriFeatureSet.features.push(c.esriFeature.get())};f.prototype.loadGeometries=function(c,a,b){var i=this,e=new dojo.Deferred;if(!this.layer){var j=Error("loadGeometries: Layer must be present.");d.deferredReject(e,j);typeof b=="function"&&b(j);return e}if(!this.layer.primaryKeyField)return j=Error("loadGeometries: Layer must have a PrimaryKeyField to load geometries."),
d.deferredReject(e,j),typeof b=="function"&&b(j),e;var l=this.layer.primaryKeyField.name;c||(c=this.features.getItems());var m=[];if(c)for(j=0;j<c.length;j++){var f=c[j];if(!f.hasGeometry.get()){var h=f.esriFeature.get();h&&h.attributes[l]&&m.push(f)}}if(m.length>0){c=[];for(j=0;j<m.length;j++)c.push(m[j].esriFeature.get().attributes[l]);j=new esri.tasks.QueryTask(g.infrastructure.taskUtils.getQueryTaskUrl(this.layer));f=new esri.tasks.Query;f.objectIds=c;f.returnGeometry=true;f.outFields=[l];if(this.layer&&
this.layer.mapService&&this.layer.mapService.essentialsMap&&this.layer.mapService.essentialsMap.site&&this.layer.mapService.essentialsMap.site.getMap())f.outSpatialReference=this.layer.mapService.essentialsMap.site.getMap().spatialReference;j.execute(f).then(function(b){if(b&&b.features&&b.features.length>0)for(var c=0;c<b.features.length;c++){var j=b.features[c],f=i._findFeature(j.attributes[l],l,m);if(f)f.esriFeature.get().geometry=j.geometry}d.deferredResolve(e,void 0);typeof a=="function"&&a()},
function(a){a=Error("loadGeometries: Query error: "+a.message);d.deferredReject(e,a);typeof b=="function"&&b(a)})}else d.deferredResolve(e,void 0),typeof a=="function"&&a();return e};f.prototype.findFeatureByEsriFeature=function(c){var a=null,b=c.getLayer();if(b&&this.layer&&this.layer.mapService&&this.layer.mapService.serviceLayer!==b)return null;for(b=0;b<this.features.length();b++){var i=this.features.getAt(b);if(i.esriFeature&&(i.esriFeature.get()===c||k.MapUtils.esriFeaturesEqual(i.esriFeature.get(),
c))){a=i;break}}return a};f.prototype._findFeature=function(c,a,b){var i=null,e,j;if(b&&b.length>0)for(e=0;e<b.length;e++)if((j=b[e].esriFeature.get())&&j.attributes&&j.attributes[a]==c){i=b[e];break}return i};f.prototype.loadFeatures=function(){this.features.clear();var c=[],a;if(this.esriFeatureSet&&this.esriFeatureSet.features)for(var b=0;b<this.esriFeatureSet.features.length;++b)a=new k.Feature({graphic:this.esriFeatureSet.features[b],layer:this.layer,resolveLayerFields:true,allowUnsafeContent:this._allowUnsafeContent}),
a.featureSet=this,c.push(a);this.features.useThrottling=false;this.features.addItems(c);this.features.bind(this,this.featureSetChanged)};f.prototype.loadAttributes=function(){this.attributes.clear();var c=[],a=[];if(this.layer&&this.layer.fields){for(var b=0;b<this.layer.fields.length;b++){var i=this.layer.fields[b];d.essentialsHtmlViewer.mapping.infrastructure.FeatureAttribute.ignoreAttribute(i.name)?a.push(i):c.push(new k.FeatureAttribute("",i.name,i.alias,i.displayName,i.visible,k.PresentableDelegateFactory.valuePresenterDelegate(i,
null)))}for(b=0;b<a.length;b++){var e=a[b];if(e.visible&&(i=c.filter(function(b){return b.name.get()===e.name.substr(0,e.name.length-7)}),i=i.length===1?i[0]:null))i.visible.get()||i.visible.set(true),i.alias.set(e.alias),i.displayName.set(e.displayName)}}else if(this.esriFeatureSet&&this.esriFeatureSet.features&&this.esriFeatureSet.features.length>0)for(b in a=this.esriFeatureSet.features[0],a.attributes)a.attributes.hasOwnProperty(b)&&c.push(new k.FeatureAttribute("",b,b,b));this.attributes.addItems(c)};
f.prototype.featureSetChanged=function(c){if(c.type=="append"||c.type=="insert")for(var a=c.rangeStart;a<=c.rangeEnd;a++)this.features.getAt(a).featureSet=this;if(c.type=="remove"||c.type=="clear")for(a=c.rangeStart;a<=c.rangeEnd;a++)this.features.getAt(a).featureSet=null};f.prototype._applyDataLinks=function(c,a,b,i){for(var e=0;e<c.features.length();e++){var j=c.features.getAt(e);if(j.linkedAttributes.length()>0){var l=j.linkedAttributes.getAt(0);j.linkedAttributes.clear();j.linkedAttributes.addItem(l);
j.dataLinkingResults.clear()}}for(e=0;e<a.length;e++)for(var l=b[e],m=a[e],f=0;f<l.length;f++){var j=l[f],h=new d.essentialsHtmlViewer.mapping.infrastructure.DataLinkingResult;h.table.set(j.linkedData);h.dataLink.set(m);j=c.features.getAt(j.index);j.dataLinkingResults.addItem(h);i&&i(j);m.isOneToOne&&j.linkedAttributes.addItem(h.asAttributeGroup())}};f.prototype.resolveDataLinks=function(c,a,b,i,e){var j=this,l=this;typeof a==="undefined"&&(a=true);if(l.layer&&l.layer.hasDataLinks&&l.features.length()>
0){l.dataLinksResolved.set(false);for(var d=[],d=a?dojo.filter(l.layer.dataLinks,function(b){return b.visible}):l.layer.dataLinks,d=dojo.filter(d,function(b){return!(!b||!b.parameters||!b.parameters.length)}),f=[],h=0,k=false,a=0;a<d.length;a++){if(k)break;var g=function(a){return function(e){if(!k&&(f[a]=e,h++,h>=d.length)){j._applyDataLinks(l,d,f,c);l.dataLinksResolved.set(true);if(typeof j.app!=="undefined")for(e=0;e<d.length;e++)j.app.event("DatalinkResolutionCompletedEvent").publish(d[e].id,
l);i&&i(l,b)}}}(a);typeof this.app!=="undefined"&&this.app.event("DatalinkResolutionStartedEvent").publish(d[a].id,l);d[a].performDataLinking(l.esriFeatureSet,g,function(a){k=true;e&&e(l,a,b)})}}else l.dataLinksResolved.set(true),i&&i(l,b)};f.prototype.doWhenDataLinkingCompleted=function(c){var a=this;if(typeof c==="function")if(this.dataLinksResolved.get())c(this);else var b=this.dataLinksResolved.bind(this,function(i){i&&(a.dataLinksResolved.unbind(b),c(a))})};f.prototype.append=function(c){for(var a=
{},b=0;b<this.features.length();b++){var i=this.features.getAt(b),e;if(this.layer&&this.layer.primaryKeyField)e=this.layer.primaryKeyField.name;if(e){var j=i.esriFeature.get().attributes[e];a[j]=i}}for(b=0;b<c.features.length();b++){i=c.features.getAt(b);if(c.layer&&c.layer.primaryKeyField)e=c.layer.primaryKeyField.name;e?(j=i.esriFeature.get().attributes[e],a[j]||this.features.addItem(i)):this.features.addItem(i)}};return f}();k.FeatureSet=h})(g.infrastructure||(g.infrastructure={}))})(g.mapping||
(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(k){var h=function(){function f(){this.displayName=new Observable("");this.featureSets=new ObservableCollection;this.extendedProperties=new ObservableCollection;this.id="FSC-{0}".format(d.framework.utils.alphaNumericToken());this.featureSets.useThrottling=false}f.prototype.getExtendedPropertyByName=function(c){for(var a=0;a<this.extendedProperties.getLength();a++){var b=this.extendedProperties.getAt(a);if(b&&b.name==c)return b.value}return null};f.prototype.setExtendedProperty=
function(c,a){for(var b=0;b<this.extendedProperties.getLength();b++){var i=this.extendedProperties.getAt(b);if(i&&i.name==c){i.value=a;return}}this.extendedProperties.addItem({name:c,value:a})};f.prototype.getFeatureSetById=function(c){for(var a=0;a<this.featureSets.getLength();++a){var b=this.featureSets.getAt(a);if(b.id==c)return b}return null};f.prototype.findFeatureByEsriFeature=function(c){for(var a=0;a<this.featureSets.getLength();a++){var b=this.featureSets.getAt(a).findFeatureByEsriFeature(c);
if(b)return b}return null};f.prototype.firstFeature=function(){for(var c=0;c<this.featureSets.getLength();c++){var a=this.featureSets.getAt(c);if(a.features.getLength()>0)return a.features.getAt(0)}return null};f.prototype.countFeatures=function(){for(var c=0,a=0;a<this.featureSets.length();a++)c+=this.featureSets.getAt(a).features.length();return c};f.prototype.clear=function(){for(var c=0;c<this.featureSets.getLength();c++)this.featureSets.getAt(c).features.clear();this.featureSets.clear()};return f}();
k.FeatureSetCollection=h})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){return function(c){dojo.safeMixin(this,c)}}();d.FeatureSetManagerEventArgs=f})(d.eventArgs||(d.eventArgs={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureSetManagerEventArgs=geocortex.essentialsHtmlViewer.mapping.infrastructure.eventArgs.FeatureSetManagerEventArgs;
(function(d){(function(g){(function(g){(function(k){var h=function(){function f(c){this.featureSetCollections=new ObservableCollection;this._featureSetCollectionsMap={};this._collectionChangedEventMap={};this._collectionOpenCount={};this._searchSuggestions={};this.app=c;this._registerCommands()}f.prototype._registerCommands=function(){this.app.command("OpenFeatureSetCollection").register(this,this.openCollection);this.app.command("CloseFeatureSetCollection").register(this,this.closeCollection);this.app.command("RemoveCollection").register(this,
this.removeCollection);this.app.command("RemoveFeatureSetCollection").register(this,this.removeCollection);this.app.command("RemoveCollectionById").register(this,this.removeCollectionById);this.app.command("RemoveFeatureSetCollectionById").register(this,this.removeCollectionById)};f.prototype.openCollection=function(c){if(!this._featureSetCollectionsMap.hasOwnProperty(c))return this.app.trace.warning("Cannot open feature set collection '{0}': No feature set collection with matching ID found.".format(c)),
null;this._collectionOpenCount.hasOwnProperty(c)||(this._collectionOpenCount[c]=0);++this._collectionOpenCount[c];if(this._collectionOpenCount[c]==1){var a=new d.essentialsHtmlViewer.mapping.infrastructure.eventArgs.FeatureSetManagerEventArgs({sender:this,featureSetCollection:this._featureSetCollectionsMap[c],featureSetCollectionId:c});this.app.event("FSMCollectionOpenedEvent").publish(a)}return this._featureSetCollectionsMap[c]};f.prototype.closeCollection=function(c){if(!this._featureSetCollectionsMap.hasOwnProperty(c))return this.app.trace.warning("Cannot close feature set collection '{0}': No feature set collection with matching ID found.".format(c)),
false;if(!this._collectionOpenCount.hasOwnProperty(c)||this._collectionOpenCount[c]==0)return this.app.trace.warning("Attempted to close an already-closed FeatureSetCollection."),false;--this._collectionOpenCount[c];this._collectionOpenCount[c]==0&&(c=new d.essentialsHtmlViewer.mapping.infrastructure.eventArgs.FeatureSetManagerEventArgs({sender:this,featureSetCollection:this._featureSetCollectionsMap[c],featureSetCollectionId:c}),this.app.event("FSMCollectionClosedEvent").publish(c));return true};
f.prototype.tryCloseCollection=function(c){return!this._featureSetCollectionsMap.hasOwnProperty(c)?false:this.isCollectionOpen(c)?this.closeCollection(c):true};f.prototype.isCollectionOpen=function(c){return!this._featureSetCollectionsMap.hasOwnProperty(c)?(this.app.trace.warning("Cannot check open state of feature set collection '{0}': No feature set collection with matching ID found.".format(c)),false):this._collectionOpenCount.hasOwnProperty(c)&&this._collectionOpenCount[c]>0};f.prototype.addCollection=
function(c){return this._addCollectionImpl(c)};f.prototype._addCollectionImpl=function(c){if(this._featureSetCollectionsMap.hasOwnProperty(c.id))return this.app.trace.warning("Cannot add feature set collection '{0}': A feature set collection with that ID already exists.".format(c.id)),false;this._featureSetCollectionsMap[c.id]=c;this.featureSetCollections.addItem(c);var a=c.featureSets.bind(this,dojo.hitch(this,function(b){this.handleCollectionChanged(c,b)}));this._collectionChangedEventMap[c.id]=
a;a=new d.essentialsHtmlViewer.mapping.infrastructure.eventArgs.FeatureSetManagerEventArgs({sender:this,featureSetCollection:this._featureSetCollectionsMap[c.id],featureSetCollectionId:c.id});this.app.event("FSMCollectionAddedEvent").publish(a);return true};f.prototype.handleCollectionChanged=function(c,a){var b=new d.essentialsHtmlViewer.mapping.infrastructure.eventArgs.FeatureSetManagerEventArgs({sender:this,featureSetCollection:c,featureSetCollectionId:c.id,collectionChangedEventArgs:a});this.app.event("FSMCollectionChangedEvent").publish(b)};
f.prototype.removeCollection=function(c){return this.canRemoveCollection(c)?this.removeCollectionById(c.id):false};f.prototype.removeCollectionById=function(c){if(!this._featureSetCollectionsMap.hasOwnProperty(c))return this.app.trace.warning("Cannot remove feature set collection '{0}': Collection not found.".format(c)),false;this.isCollectionOpen(c)&&this.closeCollection(c);this._featureSetCollectionsMap[c].featureSets.unbind(this._collectionChangedEventMap[c]);this.featureSetCollections.removeItem(this._featureSetCollectionsMap[c]);
delete this._collectionOpenCount[c];var a=new d.essentialsHtmlViewer.mapping.infrastructure.eventArgs.FeatureSetManagerEventArgs({sender:this,featureSetCollection:this._featureSetCollectionsMap[c],featureSetCollectionId:c});this.app.event("FSMCollectionRemovedEvent").publish(a);delete this._featureSetCollectionsMap[c];return true};f.prototype.canRemoveCollection=function(c){return c!=null&&this.getCollectionById(c.id)!=null};f.prototype.getCollectionById=function(c){return this._featureSetCollectionsMap[c]};
f.prototype.getCollectionIds=function(){var c=[],a;for(a in this._featureSetCollectionsMap)this._featureSetCollectionsMap.hasOwnProperty(a)&&c.push(a);return c};f.prototype.findFeaturesByEsriFeature=function(c){var a=[];this.featureSetCollections.get().forEach(function(b){(b=b.findFeatureByEsriFeature(c))&&a.push(b)});return a};f.prototype.addSearchSuggestions=function(c){for(var a in c)c.hasOwnProperty(a)&&(this._searchSuggestions.hasOwnProperty(a)?this.app.trace.warning("Cannot add search suggestion '{0}': A search suggestion for that feature set type already exists.".format(c[a])):
c[a]&&(this._searchSuggestions[a]=c[a]))};f.prototype.getSearchSuggestion=function(c){return this._searchSuggestions[c]};return f}();k.FeatureSetManager=h})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){d.getColorFromList=function(d){d&&d.length===4&&d[3]>1&&(d[3]/=255);return new dojo.Color(d)};d.getColorFromString=function(d){if(typeof d==="string"&&d.startsWith("#")&&d.length===9){var c=parseInt(d.slice(1,3),16),a=parseInt(d.slice(3,5),16),b=parseInt(d.slice(5,7),16),d=parseInt(d.slice(7,9),16);c/=255;return new esri.Color([a,b,d,c])}else return new esri.Color(d)};d.getStringFromList=function(d){if(d)if(d.length===4)return d[3]>
1&&(d[3]/=255),"rgba({0}, {1}, {2}, {3})".format(d[0],d[1],d[2],d[3]);else if(d.length===3)return"rgb({0}, {1}, {2})".format(d[0],d[1],d[2])};d.getStringFromHex=function(d){if(typeof d==="string"&&d.startsWith("#"))if(d.length===9){var c=parseInt(d.slice(1,3),16),a=parseInt(d.slice(3,5),16),b=parseInt(d.slice(5,7),16),d=parseInt(d.slice(7,9),16);c/=255;return"rgba({0}, {1}, {2}, {3})".format(a,b,d,c)}else if(d.length===7)return a=parseInt(d.slice(1,3),16),b=parseInt(d.slice(3,5),16),d=parseInt(d.slice(5,
7),16),"rgb({0}, {1}, {2})".format(a,b,d)}})(d.ColorUtils||(d.ColorUtils={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(k){var h=function(){function f(){this.fillColor=new esri.Color([236,236,0,0.22745]);this.borderColor=new esri.Color([204,204,51,1]);this.defaultSymbol=null;this._pictureMarkerSymbolCache={}}f.prototype.clone=function(){var c=new d.essentialsHtmlViewer.mapping.infrastructure.SimpleRenderer;c.fillColor=this.fillColor;c.borderColor=this.borderColor;return c};f.prototype.getSymbol=function(c){return!c||!c.geometry?null:c.geometry instanceof esri.geometry.Point||
c.geometry instanceof esri.geometry.Multipoint?new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,10,null,this.borderColor):c.geometry instanceof esri.geometry.Polygon?new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,this.borderColor,2),this.fillColor):c.geometry instanceof esri.geometry.Polyline?new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,this.borderColor,
5):null};f.prototype.getSymbolWithHacks=function(c,a){if(a&&a.renderer&&c&&c.geometry&&(c.geometry instanceof esri.geometry.Point||c.geometry instanceof esri.geometry.Multipoint)){var b=a.renderer.getSymbol(c);if(b instanceof esri.symbol.SimpleMarkerSymbol)return new esri.symbol.SimpleMarkerSymbol(b.style,b.size+2,null,this.fillColor);if(b instanceof esri.symbol.PictureMarkerSymbol)return this._getPictureMarkerSymbolHighlight(b);if(b instanceof esri.symbol.MarkerSymbol)return new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,
b.size,null,this.fillColor)}return this.getSymbol(c)};f.prototype._getPictureMarkerSymbolHighlight=function(c){if(this._pictureMarkerSymbolCache.hasOwnProperty(c.url))return this._pictureMarkerSymbolCache[c.url];if(Modernizr&&Modernizr.canvas)try{var a=document.createElement("canvas");a.width=c.width;a.height=c.height;var b=a.getContext("2d");b.fillStyle=this.fillColor.toCss(Modernizr.rgba);b.fillRect(0,0,a.width,a.height);b.globalCompositeOperation="destination-atop";var i=new Image;i.src=c.url;
b.drawImage(i,0,0);return this._pictureMarkerSymbolCache[c.url]=new esri.symbol.PictureMarkerSymbol(a.toDataURL("image/png"),a.width,a.height)}catch(e){}return this._pictureMarkerSymbolCache[c.url]=new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,Math.min(c.width,c.height),null,this.fillColor)};f.prototype.toJson=function(){return{fillColor:this.fillColor,borderColor:this.borderColor}};return f}();k.SimpleRenderer=h})(g.infrastructure||(g.infrastructure={}))})(g.mapping||
(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){var h=function(){function f(c){this._activeHighlightLayerName=null;this._highlightLayers={};this._managedGraphics={};this._clonedGraphics={};this._nextHighlightId=0;this._defaultRenderer=new d.SimpleRenderer;this._defaultHighlightLayerName=null;this.app=c}f.prototype.createHighlightLayer=function(c,a,b){if(!c)throw Error("Unable to create new highlight layer with null or empty name");if(this._highlightLayers.hasOwnProperty(c))return this.app.trace.warning("Cannot create highlight layer because layer with name '{0}' already exists.".format(c)),
null;var i=new esri.layers.GraphicsLayer;if(a!==null&&a!==void 0||b!==null&&b!==void 0){i.renderer=this._defaultRenderer.clone();if(a!==null&&a!==void 0)i.renderer.fillColor=typeof a=="string"?d.ColorUtils.getColorFromString(a):d.ColorUtils.getColorFromList(a);if(b!==null&&b!==void 0)i.renderer.borderColor=typeof b=="string"?d.ColorUtils.getColorFromString(b):d.ColorUtils.getColorFromList(b)}this._highlightLayers[c]=i;this._addLayerToMap(i);if(!this._activeHighlightLayerName||this._activeHighlightLayerName===
"")this._activeHighlightLayerName=c;this.app.event("HighlightLayerCreated").publish(c);return i};f.prototype.setActiveHighlightLayer=function(c){if(!c)throw Error("Unable to set the active highlight layer because no layer name was given.");if(!this._highlightLayers.hasOwnProperty(c))throw Error("Unable to set {0} as the active highlight layer, because a highlight layer with that name does not exist".format(c));this._activeHighlightLayerName=c};f.prototype.highlightEsriFeatureSet=function(c,a){if(c)if(!c.features||
c.features.length==0)this.app.trace.warning("No features detected in FeatureSet; as such, no features were highlighted");else{var b=this.getHighlightLayerOrActive(a);(!b||!b.graphics)&&this.app.trace.warning("Unable to highlight feature because the required layer was not found, or could not accept graphics");for(var i=0;i<c.features.length;i++)this._drawGraphic(c.features[i],b)}else this.app.trace.warning("No FeatureSet was provided; as such, no features were highlighted")};f.prototype.highlightFeatures=
function(c,a){if(c){var b=this.getHighlightLayerOrActive(a);b||this.app.trace.warning("Unable to highlight feature because the required layer was not found, or could not accept graphics");for(var i=this._defaultRenderer.borderColor,e=this._defaultRenderer.fillColor,j=0;j<c.length;j++){var l=c[j];try{var m;l.borderColor&&l.borderColor.get()&&(m=d.ColorUtils.getColorFromList(l.borderColor.get()))&&this._setBorderColor(m);l.fillColor&&l.fillColor.get()&&(m=d.ColorUtils.getColorFromList(l.fillColor.get()))&&
this._setFillColor(m);this._drawGraphic(l.esriFeature.get(),b)}finally{this._setBorderColor(i),this._setFillColor(e)}}}else this.app.trace.warning("No Features were provided, as such, no features were highlighted")};f.prototype.highlightGraphics=function(c,a){if(c){var b=this.getHighlightLayerOrActive(a);b||this.app.trace.warning("Unable to highlight feature because the required layer was not found, or could not accept graphics");for(var i=0;i<c.length;i++)this._drawGraphic(c[i],b)}else this.app.trace.warning("No Graphics were provided, as such, no graphics were highlighted")};
f.prototype.removeHighlightLayer=function(c){if(!c)throw Error("Unable to remove a highlight layer with null or empty name");if(!this._highlightLayers.hasOwnProperty(c))throw Error("Cannot remove highlight layer because layer with name {0} does not exist.".format(c));var a=this._highlightLayers[c];this.clearHighlights(a);this.app.map.removeLayer(a);delete this._highlightLayers[c];if(this._activeHighlightLayerName===c)this._activeHighlightLayerName=null};f.prototype.clearHighlights=function(c){var a=
null;if(!c&&this._activeHighlightLayerName)a=this._activeHighlightLayerName;var b=null;if(a||typeof c=="string")a||(a=c),b=this.getHighlightLayer(a);if(b||typeof c=="object"&&c instanceof esri.layers.GraphicsLayer)if(b||(b=c),b&&b.graphics)for(c=b.graphics.length-1;c>=0;c--)this._removeClonedGraphic(b.graphics[c]);else this.app.trace.warning("An attempt was made to clear a highlight layer which contained no graphics")};f.prototype.getHighlightFillColor=function(){return this._getFillColor().toHex()};
f.prototype.getHighlightBorderColor=function(){return this._getBorderColor().toHex()};f.prototype.setHighlightFillColor=function(c){this._setFillColor(d.ColorUtils.getColorFromString(c))};f.prototype.setHighlightBorderColor=function(c){this._setBorderColor(d.ColorUtils.getColorFromString(c))};f.prototype.getHighlightLayer=function(c){return!c?(this.app.trace.warning("Unable to get a highlight layer with null or empty name"),null):this._highlightLayers[c]};f.prototype.getHighlightLayerOrActive=function(c){return c?
this.getHighlightLayer(c):this._activeHighlightLayer()};f.prototype.activeHighlightLayerGraphics=function(){var c=this._activeHighlightLayer();return c&&c.graphics?c.graphics.slice(0):null};f.prototype.defaultHighlightLayerGraphics=function(){var c=this.getHighlightLayer(this._defaultHighlightLayerName);return c?c.graphics.slice(0):null};f.prototype._drawGraphic=function(c,a){if(!c||!a)this.app.trace.error("HighlightManager given null graphic or layer. Skipping...");else{this._showHighlightLayer(a);
if(!c.__gcxHlId)c.__gcxHlId=this._nextId();var b;this._managedGraphics.hasOwnProperty(c.__gcxHlId)?b=this._managedGraphics[c.__gcxHlId]:(b=[],this._managedGraphics[c.__gcxHlId]=b);for(var i=0;i<b.length;i++)if(b[i].layer===a)return;i={layer:a,managedGraphic:c,clonedGraphic:null};b.push(i);b=new esri.Graphic;b.attributes={};for(var e in c.attributes)c.attributes.hasOwnProperty(e)&&(b.attributes[e]=c.attributes[e]);b.geometry=c.geometry;b.__gcxHlId=this._nextId();i.clonedGraphic=b;this._clonedGraphics[b.__gcxHlId]=
i;if(b.geometry){if(!a.renderer)b.symbol=this._defaultRenderer.getSymbolWithHacks(b,c._graphicsLayer);a.add(b)}}};f.prototype._getFillColor=function(){return this._defaultRenderer.fillColor};f.prototype._setFillColor=function(c){this._defaultRenderer.fillColor=c};f.prototype._getBorderColor=function(){return this._defaultRenderer.borderColor};f.prototype._setBorderColor=function(c){this._defaultRenderer.borderColor=c};f.prototype._nextId=function(){return"gcx_hl_"+this._nextHighlightId++};f.prototype._showHighlightLayer=
function(c){this.app.map.reorderLayer(c,this.app.map.graphicsLayerIds.length-1);c!=this._highlightLayers[this._defaultHighlightLayerName]&&this.app.map.reorderLayer(this._highlightLayers[this._defaultHighlightLayerName],this.app.map.graphicsLayerIds.length-1)};f.prototype._addLayerToMap=function(c){this.app.map.addLayer(c)};f.prototype._activeHighlightLayer=function(){return this._activeHighlightLayerName?this.getHighlightLayer(this._activeHighlightLayerName):null};f.prototype._removeClonedGraphic=
function(c){this._clonedGraphics.hasOwnProperty(c.__gcxHlId)&&(c=this._clonedGraphics[c.__gcxHlId],this._removeManagedGraphic(c.managedGraphic,c.layer))};f.prototype._removeManagedGraphic=function(c,a){if(this._managedGraphics.hasOwnProperty(c.__gcxHlId)){for(var b=this._managedGraphics[c.__gcxHlId],i=null,e=0;e<b.length;e++)if(b[e].layer===a){i=b[e];break}i&&(a.remove(i.clonedGraphic),delete this._clonedGraphics[i.clonedGraphic.__gcxHlId],i=b.indexOf(i),b.splice(i,1),b.length===0&&delete this._managedGraphics[c.__gcxHlId])}};
return f}();d.HighlightManager=h})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(k){(function(h){var f=function(){function c(a,b){this.app=a;this.libraryId=b;this.id="SearchProvider-"+d.framework.utils.alphaNumericToken();this.supportsHints=this.supportsOffline=false;this.status=d.essentialsHtmlViewer.mapping.infrastructure.search.Status.IDLE}c.prototype.initialize=function(){};c.prototype.search=function(){};c.prototype.cancelSearch=function(){};c.prototype.getResource=function(a,b){return this.app.getResource(this.libraryId,a,
b)};return c}();h.SearchProviderBase=f})(k.search||(k.search={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){return function(){this.query=this.results=this.message=this.error=this.endpointUrl=this.searchType=this.status=null}}();d.SearchProgressEventArgs=f})(d.eventArgs||(d.eventArgs={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
geocortex.essentialsHtmlViewer.mapping.infrastructure.search.SearchProgressEventArgs=geocortex.essentialsHtmlViewer.mapping.infrastructure.eventArgs.SearchProgressEventArgs;
(function(d){(function(g){(function(g){(function(k){(function(h){(function(c){c.IDLE="Idle";c.SEARCHING="Searching";c.ERROR="Error"})(h.Status||(h.Status={}));var f=function(){function c(a){this._searchProviders=[];this._fscRootID="SearchResultsCollection";this._count=0;this._fscSourceName="Search";this.app=a;this._registerCommands();this.app.event("SearchProgressEvent").subscribe(this,this._searchProgress)}c.prototype._resetFeatureSetCollection=function(){this._fsc?(this.app.featureSetManager.getCollectionById(this._fsc.id)||
this.app.featureSetManager.addCollection(this._fsc),this._fsc.clear(),this.app.featureSetManager.tryCloseCollection(this._fsc.id)):(this._fsc=new k.FeatureSetCollection,this._fsc.id=this._fscRootID,this._fsc.sourceName=this._fscSourceName,this.app.featureSetManager.addCollection(this._fsc))};c.prototype.getSearchHints=function(a,b){var c=this._enabledProviders();if(c.length==0)this.app.trace.warning("No search providers enabled.");else for(var e=0;e<c.length;e++)c[e].supportsHints&&c[e].getSearchHints(a,
b)};c.prototype._registerCommands=function(){this.app.command("RegisterSearchProvider").register(this,this._registerProvider);this.app.command("Search").register(this,this._search);this.app.command("GlobalSearch").register(this,this._search);this.app.command("CancelSearch").register(this,this._cancelSearch);this.app.command("ClearSearch").register(this,this._clearSearch)};c.prototype._registerProvider=function(a){if(!a)throw Error("Search Provider cannot be null.");for(var b=0;b<this._searchProviders.length;b++)if(this._searchProviders[b].id==
a.id)throw Error("Search Provider '{0}' already registered.".format(a.name));this._searchProviders.push(a)};c.prototype._enabledProviders=function(){for(var a=[],b=0;b<this._searchProviders.length;b++){var c=this._searchProviders[b];c.isEnabled&&(this.app.isOffline.get()===true?c.supportsOffline&&a.push(c):a.push(c))}return a};c.prototype._isSearching=function(){for(var a=0;a<this._searchProviders.length;a++)if(this._searchProviders[a].status==d.essentialsHtmlViewer.mapping.infrastructure.search.Status.SEARCHING)return true;
return false};c.prototype._cancelSearch=function(){if(this._isSearching())for(var a=0;a<this._searchProviders.length;a++){var b=this._searchProviders[a];b.status==d.essentialsHtmlViewer.mapping.infrastructure.search.Status.SEARCHING&&b.cancelSearch()}};c.prototype._clearSearch=function(){this._isSearching()&&this._cancelSearch();this._resetFeatureSetCollection()};c.prototype._search=function(a){this._isSearching()&&this._cancelSearch();this._resetFeatureSetCollection();if(!a||a.replace(/ /g,"")==
"")this.app.trace.warning("Cannot perform search without search text.");else{var b=this._enabledProviders();if(b.length==0)this.app.trace.warning("No search providers enabled.");else{this._fsc.displayName.set(this.app.getResource("Mapping","language-search-fsc-display-name").format(a));this.app.featureSetManager.isCollectionOpen(this._fsc.id)||this.app.featureSetManager.openCollection(this._fsc.id);for(var c=0;c<b.length;c++)b[c].search(this._fsc,a)}}};c.prototype._searchProgress=function(a){var b=
true;if(a.status!=d.essentialsHtmlViewer.mapping.infrastructure.search.Status.SEARCHING){for(var c=0;c<this._searchProviders.length;c++)this._searchProviders[c].status==d.essentialsHtmlViewer.mapping.infrastructure.search.Status.SEARCHING&&(b=false);b&&this.app.featureSetManager.tryCloseCollection(a.results.id)}};return c}();h.SearchManager=f})(k.search||(k.search={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||
(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){return function(c,a){!a||!a.command?c&&c.trace.warning("BatchItemModel: Could not create batch item. Configuration or command not specified."):(this.app=c,this.command=c.command(a.command),this.commandParameter=a.commandParameter||null,this.abortBatchOnFailure=!!a.abortBatchOnFailure)}}();d.BatchItemModel=f})(d.menus||(d.menus={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(k){(function(h){var f=function(){function c(a,b){var c=this;if(!a||!b)throw Error("MenuItemModel: Required input parameters cannot be undefined");this.menuModel=a;this.app=a.app;this.text=b.text||"";this.description=b.description||"";this.iconUri=b.iconUri||this.app.menuRegistry.getDefaultIconUri(this.menuModel.id);this.hideOnDisable=b.hideOnDisable!=void 0?b.hideOnDisable:false;if(b.batch)this.batchItems=[],this._setBatchItems(b.batch);else if(b.command)this.command=
this.app.command(b.command),this.commandParameter=b.commandParameter||null;b.libraryId&&(d.framework.ui.stringLocalizer.localizeString(this.app,b.libraryId,this.text,function(b){return c.text=b}),d.framework.ui.stringLocalizer.localizeString(this.app,b.libraryId,this.description,function(b){return c.description=b}))}c.prototype._setBatchItems=function(a){var b=this;a&&a.length&&a.forEach(function(a){a&&a.command&&b.batchItems.push(new h.BatchItemModel(b.app,a))})};return c}();h.MenuItemModel=f})(k.menus||
(k.menus={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(k){(function(h){var f=function(){function c(a,b){if(!a||!b||!b.id)throw Error("MenuModel: Required input parameters cannot be undefined");this.app=a;this.id=b.id;this.title=b.title||"";this.description=b.description||"";this.items=this._createMenuItems(b.items);this.defaultIconUri=b.defaultIconUri||""}c.prototype._createMenuItems=function(a){var b=this,c=[];a&&a.length&&a.forEach(function(a){try{var j=new d.essentialsHtmlViewer.mapping.infrastructure.menus.MenuItemModel(b,
a);j&&(j.command||j.batchItems)?c.push(j):b.app.trace.warning("MenuModel: Could not create menu item for menu with id: {0}. Invalid configuration.".format(b.id))}catch(l){b.app.trace.warning("Unexpected configuration error: {0}".format(l.message))}});return c};return c}();h.MenuModel=f})(k.menus||(k.menus={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(k){(function(h){var f=function(){function c(a){this.menuList=[];this._viewMenuEntries={};this._menuConfig=[];this.app=a}c.prototype.loadMenus=function(a){var b=this;if(a&&a.menus&&a.menus.length)a.menus.forEach(function(a){return b.register(a)}),this._menuConfig=this._menuConfig.concat(a.menus)};c.prototype.register=function(a){var b=a&&a.id;this._validMenuId(b)?(a=a instanceof h.MenuModel?a:new d.essentialsHtmlViewer.mapping.infrastructure.menus.MenuModel(this.app,
a),this._validateMenuModel(a)?this.menuList.push(a):this.app.trace.warning("Could not register menu with id: {0}. Invalid menu configuration.")):this.app.trace.warning("Could not register menu with id: {0}. Menu id should be defined and unique.".format(b))};c.prototype.unregister=function(a){for(var b=this.menuList.length-1;b>=0;b--)this.menuList[b].id===a&&this.menuList.splice(b,1)};c.prototype.getMenu=function(a){for(var b=this.menuList,c=0;c<b.length;c++)if(b[c].id===a)return b[c];return null};
c.prototype.getDefaultIconUri=function(a){return(a=this.getMenu(a))&&a.defaultIconUri?a.defaultIconUri:""};c.prototype.getMenuWidgetsForView=function(a){return this._viewMenuEntries[a.id]||[]};c.prototype.createMenuWidget=function(a,b,c,e){var j=this,l=c.domElement,m=c.viewModel,f=l.getAttribute("data-menu-id");if(!f||!this.getMenu(f))return console.log("Warning: Could not create menu view from DOM element attributes. Menu Id: {0} not registered with the MenuRegistry.".format(f)),null;var h=l.getAttribute("data-menu-template")||
"Mapping/infrastructure/menus/MenuView.html",k=l.getAttribute("data-menu-type")||"geocortex.essentialsHtmlViewer.mapping.infrastructure.menus.MenuView",e=l.getAttribute("data-menu-library-id")||e||"Mapping",h=this.app.viewManager.createView({type:k,markup:h,visible:true});if(!h)return console.log("Warning: Could not create menu '{0}' for view '{1}': Could not construct the menu widget view.".format(f,a.id)),null;h.app=this.app;h.configuration.menuId=f;if(e)h.libraryId=e;k=new d.essentialsHtmlViewer.mapping.infrastructure.menus.MenuViewModel(this.app,
e);k.id="MenuViewModel-{0}".format(h.id);k.menuSourceView=a;h.attach(k);(e=b)&&b.isObservable?k.menuContext.sync(e):m&&c&&m[c.target]&&m[c.target].isObservable?(e=m[c.target],k.menuContext.sync(e)):k.menuContext.set(e);b={view:a,widgetView:h,widgetViewModel:k,context:e,menuId:f,domElement:l};this._viewMenuEntries[a.id]||(this._viewMenuEntries[a.id]=[]);this._viewMenuEntries[a.id].push(b);dojo.aspect.after(a,"onDestroy",function(){return j._viewMenuEntries[a.id]=null});this.app.event("MenuWidgetCreatedForView").publish(b);
return h};c.prototype.destroyMenuWidget=function(a){var b=this;a.viewModel&&(a.viewModel.menuContext.removeSync(),a.viewModel.destroy());for(var c in this._viewMenuEntries)this._viewMenuEntries.hasOwnProperty(c)&&this._viewMenuEntries[c].filter(function(b){return b.widgetView===a}).forEach(function(a,d){b._viewMenuEntries[c].splice(d,1)})};c.prototype._validMenuId=function(a){var b=a?this.menuList.filter(function(b){return b.id===a}):null;return b!==null&&b.length===0};c.prototype._validateMenuModel=
function(a){return!(!a||!a.id||!a.items||!a.items.length)};return c}();h.MenuRegistry=f})(k.menus||(k.menus={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){function c(a,b){this.name="";this.isActive=false;dojo.mixin(this,b);this.app=a}c.prototype.setActive=function(a){a?(this.isActive=true,this.onActivated()):(this.isActive=false,this.onDeactivated())};c.prototype.onActivated=function(){};c.prototype.onDeactivated=function(){};return c}();d.ToolBase=f})(d.tools||(d.tools={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){function c(a){this.tools={};this._subscriptions={};this._toolTypes={};this.app=a;this._registerCommands()}c.prototype._registerCommands=function(){var a=this;this.app.command("SetActiveTool").register(this,function(b){return a.setActiveTool(b)},function(b){return a._setActiveToolCanExecute(b)});this.app.command("ClearActiveTool").register(this,function(){return a.clearActiveTool()})};c.prototype._setActiveToolCanExecute=
function(a){return!this.tool(a)?false:true};c.prototype.clearActiveTool=function(){for(var a in this.tools)if(this.tools.hasOwnProperty(a)){var b=this.tools[a];b&&b.isActive&&b.setActive(false)}};c.prototype.getActiveTool=function(){for(var a in this.tools)if(this.tools.hasOwnProperty(a)){var b=this.tools[a];if(b&&b.isActive)return b}return null};c.prototype.setActiveTool=function(a){this.clearActiveTool();if(a){var b=this.tool(a);b?b.setActive(true):this.app.trace.warning("Could not activate tool '{0}'. The tool does not exist in the registry.".format(a))}};
c.prototype.tool=function(a){return this.tools[a]};c.prototype.register=function(a){var b=this;this.unregister(a);a&&a.name&&(this.tools[a.name]=a,this._subscriptions[a.name]=dojo.connect(a,"setActive",function(c){if(c===true){for(var e in b.tools)b.hasOwnProperty(e)&&(c=b.tools[e])&&c!=a&&c.isActive&&c.setActive(false);b.app.event("ActiveToolChanged").publish({tool:a,previousTool:null});b.app.event("ActiveToolChanged").publish({tool:a,previousTool:null});b.app.event("ActiveToolChangedEvent").publish({tool:a,
previousTool:null});a instanceof d.MapTool&&b.app.event("ToolCommandActivatedEvent").publish(a.command)}else b.getActiveTool()||(b.app.event("ActiveToolChanged").publish({tool:null,previousTool:a}),b.app.event("ActiveToolChangedEvent").publish({tool:null,previousTool:a}),a instanceof d.MapTool&&b.app.event("ToolCommandDeactivatedEvent").publish(a.command))}))};c.prototype.unregister=function(a){if(a&&a.name&&this.tools[a.name]==a){this.tools[a.name]=null;var b=this._subscriptions[a.name];b&&(dojo.disconnect(b),
this._subscriptions[a.name]=null)}};c.prototype.clear=function(){for(var a in this.tools){var b=this.tools[a];b&&this.unregister(b)}};c.prototype.createTools=function(a,b){var c=this,e=[];a&&dojo.forEach(a,function(d){var l=d.typeName?d.typeName:"geocortex.essentialsHtmlViewer.mapping.infrastructure.tools.MapTool";c._toolTypes.hasOwnProperty(d.command)&&(l=c._toolTypes[d.command]);(l=dojo.getObject(l))?(d=new l(c.app,d),e.push(d),b&&c.register(d)):c.app.trace.warning("Could not create tool '{0}' from type name '{1}'.".format(a.name,
a.typeName))});return e};c.prototype.registerToolTypeForCommand=function(a,b){this._toolTypes[a]=b};return c}();d.ToolRegistry=f})(d.tools||(d.tools={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(k){var h=function(d){function c(a,b,c,e){d.call(this,a,b);this.commandName="";this.commandParameter=null;this.canExecute=new Observable(true);this.notExecuteHidden=new Observable(false);c&&this._bindToCommand(c,e)}__extends(c,d);c.prototype.applyContext=function(a){this._command&&a&&this.canExecute.set(this._command.canExecute(a))};c.prototype._bindToCommand=function(a,b){this._canExecuteChangedBindingToken&&this._command&&this._command.canExecuteChanged.unsubscribe(this._canExecuteChangedBindingToken);
this.commandName=a;this.commandParameter=b||null;this._command=this.app.command(a);this._canExecuteChangedBindingToken=this._command.canExecuteChanged.subscribe(this,this._handleCanExecuteChanged);this.canExecute.set(this._command.canExecute(b))};c.prototype._handleCanExecuteChanged=function(){this.canExecute.set(this._command.canExecute(this.commandParameter))};return c}(d.framework.ui.ViewModelBase);k.CommandViewModel=h})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));(function(d){var g=d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}),g=g.mapping||(g.mapping={}),g=g.modules||(g.modules={});(g.command||(g.command={})).CommandViewModel=d.essentialsHtmlViewer.mapping.infrastructure.CommandViewModel})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(k){(function(h){var f=function(){function c(a,b,c){this.libraryId="";this.isActive=new Observable(true);this.activeTransient=new Observable(false);this.disabled=new Observable(false);this.hidden=new Observable(false);this.cssClass=new Observable;this.hasSmallLayout=new Observable(false);this.selectedTool=new Observable(null);this.toolChangeActive=new Observable(false);if(c)this.id=c.id,this.app=a,this.libraryId=b,this.type=c.type,this.name=new Observable(c.name),
this.tooltip=new Observable(c.tooltip||null),this.hideOnDisable=new Observable(!!c.hideOnDisable),c.libraryId&&d.framework.ui.stringLocalizer.localizeObservables(a,c.libraryId,[this.name,this.tooltip])}c.prototype.areAllHidden=function(a){for(var b=0;b<a.length();b++)if(a.getAt(b).disabled.get()===false||a.getAt(b).hideOnDisable.get()===false)return false;return true};c.prototype.setHidden=function(){this.disabled.get()===true&&this.hideOnDisable.get()===true?this.hidden.set(true):this.hidden.set(false)};
c.prototype.execute=function(){};c.prototype.activate=function(){this.isActive.set(true)};c.prototype.deactivate=function(){this.isActive.set(false);this.activeTransient.set(false)};c.prototype.onDestroy=function(){};return c}();h.ToolbarGroupItemBase=f})(k.toolbarGroup||(k.toolbarGroup={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(k){(function(h){var f=function(){function c(a,b,c){this.libraryId="";this.isActive=new Observable(false);this.disabled=new Observable(false);this.cssClass=new Observable;this.app=a;this.libraryId=b;if(c)this.name=new Observable(c.name),this.id=c.id||c.name||d.framework.utils.alphaNumericToken(),this.tooltip=new Observable(c.tooltip||null),this.type=c.type||"toolbarGroup",this.items=c.items?this.getToolbarGroupItems(c.items):new ObservableCollection,
c.libraryId&&d.framework.ui.stringLocalizer.localizeObservables(a,c.libraryId,[this.name,this.tooltip])}c.prototype.getToolbarGroupItems=function(a){for(var b=new ObservableCollection,c=0;c<a.length;c++){var e=null;a[c].type=="button"?e=new h.ToolbarButton(this.app,this.libraryId,a[c]):a[c].type=="toggleButton"?e=new h.ToolbarToggleButton(this.app,this.libraryId,a[c]):a[c].type=="region"?e=new h.ToolbarRegion(this.app,this.libraryId,a[c]):a[c].type=="tool"?e=new h.ToolbarTool(this.app,this.libraryId,
a[c]):a[c].type=="toolbarGroup"?e=new h.ToolbarGroup(this.app,this.libraryId,a[c]):a[c].type=="flyout"&&(e=new h.ToolbarFlyout(this.app,this.libraryId,a[c]));b.addItem(e)}return b};return c}();h.ToolbarGroupBase=f})(k.toolbarGroup||(k.toolbarGroup={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(k){(function(h){var f=function(){function c(a){this.toolbarGroupList=new ObservableCollection;this._toolbarGroupsConfig=[];this.app=a}c.prototype.getToolbarGroupById=function(a){if(this.toolbarGroupList.get().length===0||a===null)return null;for(var b=0;b<this.toolbarGroupList.get().length;b++)if(this.toolbarGroupList.getAt(b).id==a)return this.toolbarGroupList.getAt(b);return null};c.prototype.registerToolbarGroups=function(a,b){if(a)for(var c=0;c<
a.length;c++){var e=a[c],j=new d.essentialsHtmlViewer.mapping.infrastructure.toolbarGroup.ToolbarGroupBase(this.app,b,e);this._toolbarGroupsConfig.push(e);this.unregisterToolbarGroup(e.id);this.toolbarGroupList.addItem(j)}};c.prototype.unregisterToolbarGroup=function(a){a=this.getPosition(a);a!=null&&this.toolbarGroupList.get().splice(a,1)};c.prototype.getPosition=function(a){for(var b=0;b<this.toolbarGroupList.getLength();b++)if(this.toolbarGroupList.getAt(b).id===a)return b;return null};return c}();
h.ToolbarGroupRegistry=f})(k.toolbarGroup||(k.toolbarGroup={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(h){(function(c){c.IDLE="Idle";c.UNDOING="Undoing";c.REDOING="Redoing";c.COMMITTING="Committing";c.ROLLINGBACK="RollingBack"})(h.Status||(h.Status={}));var f=function(){function c(a,b){this.maxOperations=0;this.canUndo=this.canRedo=this.isRedoing=this.isUndoing=this.isSuspended=false;this.position=this.length=0;this.rootTransaction=null;this._status=d.undo.Status.IDLE;this._historyStack=[];this.app=a;b=b||{};typeof b.maxOperations=="number"&&
this.setMaxOperations(b.maxOperations);this.registerCommands()}c.prototype.registerCommands=function(){var a=this;this.app.command("Undo").register(this,this.undo,function(){return a.canUndo});this.app.command("Redo").register(this,this.redo,function(){return a.canRedo})};c.prototype.suspend=function(){this.isSuspended=true};c.prototype.resume=function(){this.isSuspended=false};c.prototype.setMaxOperations=function(a){this.maxOperations=a};c.prototype.getCurrentState=function(){return{historyStack:(this._historyStack||
[]).slice(),position:this.position,rootTransaction:this.rootTransaction,status:this._status}};c.prototype.add=function(a){if(!a)throw Error("Undo operation cannot be null");for(;this.maxOperations>0&&this._historyStack.length>=this.maxOperations;){var b=this._historyStack.shift();this.app.event("UndoOperationDiscardedEvent").publish({sender:this,operation:b})}this._historyStack.splice(this.position,0,a);this.position++;this.clearRedo();this.app.event("UndoOperationAddedEvent").publish({sender:this,
operation:a});this._checkAvailability()};c.prototype.undo=function(){var a=this;if(this.position===0)return Promise.resolve();var b=this.peekUndo();this.position--;if(!b||typeof b.performUndo!=="function")return Promise.resolve();this._updateStatus(d.undo.Status.UNDOING);this.app.event("UndoStartedEvent").publish({sender:this,operation:b});return b.performUndo(b.state).lastly(function(){a._updateStatus(d.undo.Status.IDLE);a.app.event("UndoCompletedEvent").publish({sender:a,operation:b});a._checkAvailability()})};
c.prototype.redo=function(){var a=this;if(this.position===this._historyStack.length)return Promise.resolve();var b=this.peekRedo();this.position++;if(!b||typeof b.performRedo!=="function")return Promise.resolve();this._updateStatus(d.undo.Status.REDOING);this.app.event("RedoStartedEvent").publish({sender:this,operation:b});return b.performRedo(b.state).lastly(function(){a._updateStatus(d.undo.Status.IDLE);a.app.event("RedoCompletedEvent").publish({sender:a,operation:b});a._checkAvailability()})};
c.prototype.peekUndo=function(){return this._historyStack.length>0&&this.position>0?this.getAt(this.position-1):null};c.prototype.peekRedo=function(){return this._historyStack.length>0&&this.position<this._historyStack.length?this.getAt(this.position):null};c.prototype.clearUndo=function(){this._historyStack.splice(0,this.position);this.position=0;this._checkAvailability()};c.prototype.clearRedo=function(){this._historyStack.splice(this.position,this._historyStack.length-this.position);this.position=
this._historyStack.length;this._checkAvailability()};c.prototype.getAt=function(a){return this._historyStack[a]};c.prototype.removeAt=function(a){0<=a&&a<this._historyStack.length&&(this._historyStack.splice(a,1),this.position>0&&this.position>a&&this.position--,this._checkAvailability())};c.prototype.beginTransaction=function(a,b){var c=new h.UndoTransaction(this,a);this.rootTransaction?c.parentTransaction=b||this.rootTransaction:this.rootTransaction=c;return c};c.prototype.commitTransaction=function(a){var b=
this,a=a||this.rootTransaction;if(!a)return Promise.reject(Error("Cannot find the transaction to commit"));if(a.isComplete())return Promise.reject(Error("Transaction has been closed already"));a.transactionStatus=h.TransactionStatus.COMMITTING;if(!a.hasChanges())return a.transactionStatus=h.TransactionStatus.COMMITTED,this._onTransactionCommitted(a),Promise.resolve();var c=function(b){if(b instanceof h.UndoTransaction)return b.isComplete()?Promise.resolve():b.commit();if(b&&typeof b.performRedo==
"function")return b.performRedo(b.state,a)},e=function(b,a){return a?c(a):null};return c(a.changes[0]).then(function(){return Promise.reduce(a.changes.slice(1),e,null)}).then(function(){if(a.transactionStatus==h.TransactionStatus.COMMITTING)a.transactionStatus=h.TransactionStatus.COMMITTED,b._onTransactionCommitted(a)})};c.prototype.rollbackTransaction=function(a){var b=this,a=a||this.rootTransaction;if(!a)return Promise.reject(Error("Cannot find the transaction to rollback"));if(a.isComplete())return Promise.reject(Error("Transaction has been closed already"));
a.transactionStatus=h.TransactionStatus.ABORTING;return!a.hasChanges()?(a.transactionStatus=h.TransactionStatus.ABORTED,this._onTransactionAborted(a),Promise.resolve()):Promise.reduce(a.changes.slice().reverse(),function(b,c){if(c instanceof h.UndoTransaction)return c.isAborted()?Promise.resolve():c.rollback();if(c&&typeof c.performUndo=="function")return c.performUndo(c.state,a)},null).then(function(){if(!a.isAborted())a.transactionStatus=h.TransactionStatus.ABORTED,b._onTransactionAborted(a);if(!a.isTopLevel()&&
!a.parentTransaction.isAborted())return b.rollbackTransaction(a.parentTransaction)})};c.prototype.destroy=function(){this._historyStack=null};c.prototype._onTransactionCommitted=function(a){if(a&&a.isTopLevel()&&a==this.rootTransaction)this.rootTransaction=null,this.add(a)};c.prototype._onTransactionAborted=function(a){if(a){var b=a.parentTransaction;if(b){var c=b.changes.indexOf(a);c>-1&&b.changes.splice(c,1)}if(a.isTopLevel()&&a==this.rootTransaction)this.rootTransaction=null}};c.prototype._checkAvailability=
function(){this.length=this._historyStack.length;this.isUndoing=this._status==d.undo.Status.UNDOING;this.isRedoing=this._status==d.undo.Status.REDOING;this.length===0?this.canUndo=this.canRedo=false:this.position===0?(this.canUndo=false,this.canRedo=true):this.position===this.length?(this.canUndo=true,this.canRedo=false):this.canUndo=this.canRedo=true;this.app.command("Undo").raiseCanExecuteChanged();this.app.command("Redo").raiseCanExecuteChanged();this.app.event("UndoStackChangedEvent").publish({sender:this})};
c.prototype._updateStatus=function(a){this._status=a||d.undo.Status.IDLE;this.isUndoing=this._status==d.undo.Status.UNDOING;this.isRedoing=this._status==d.undo.Status.REDOING};return c}();h.UndoManager=f})(d.undo||(d.undo={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){var n=function(k){function h(f,c,a,b){k.call(this,f,c,a,b);this.version=d.essentialsHtmlViewer.version;this.markupLayer=new Observable;this.localServerAddress=null;this.isArcGisWebApp=false;this._workflowActivityDispatcher=null;this._activityTypeHandlerQueue=[];this._activityIdHandlerQueue=[];this.___uaIsiPad=!!navigator.userAgent.match(/iPad/i);this.accessibilityManager=new d.essentialsHtmlViewer.mapping.infrastructure.accessibility.AccessibilityManager(this);this.featureSetManager=
new d.essentialsHtmlViewer.mapping.infrastructure.FeatureSetManager(this);this.searchManager=new d.essentialsHtmlViewer.mapping.infrastructure.search.SearchManager(this);this.highlightManager=new d.essentialsHtmlViewer.mapping.infrastructure.HighlightManager(this);this.toolRegistry=new d.essentialsHtmlViewer.mapping.infrastructure.tools.ToolRegistry(this);this.menuRegistry=new d.essentialsHtmlViewer.mapping.infrastructure.menus.MenuRegistry(this);this.toolbarGroupRegistry=new d.essentialsHtmlViewer.mapping.infrastructure.toolbarGroup.ToolbarGroupRegistry(this);
this.stateManager=new d.essentialsHtmlViewer.mapping.infrastructure.applicationState.StateManager(this,"Mapping.Infrastructure");this.undoManager=new d.essentialsHtmlViewer.mapping.infrastructure.undo.UndoManager(this)}__extends(h,k);h.prototype.initialize=function(){if(document.all&&!document.querySelector)this.debugMode=true;var d=this.configUri?this.configUri.split("/"):window.location.href.split("/");this.configTokens.ViewerConfigUri=d.slice(0,d.length-1).join("/")+"/";if(this.getUrlParameter("gcxLocalServer"))this.localServerAddress=
this.getUrlParameter("gcxLocalServer");k.prototype.initialize.call(this)};h.prototype.registerActivityTypeHandler=function(d,c){this._workflowActivityDispatcher?this._workflowActivityDispatcher.registerActivityHandler(d,c):this._activityTypeHandlerQueue.push({typeName:d,handler:c})};h.prototype.registerActivityIdHandler=function(d,c){this._workflowActivityDispatcher?this._workflowActivityDispatcher.registerExternalIdHandler(d,c):this._activityIdHandlerQueue.push({id:d,handler:c})};h.prototype.getWorkflowActivityDispatcher=
function(){return this._workflowActivityDispatcher};h.prototype.setWorkflowActivityDispatcher=function(d){this._workflowActivityDispatcher=d;for(d=0;d<this._activityTypeHandlerQueue.length;++d){var c=this._activityTypeHandlerQueue[d];this._workflowActivityDispatcher.registerActivityHandler(c.typeName,c.handler)}for(d=this._activityTypeHandlerQueue.length=0;d<this._activityIdHandlerQueue.length;++d)c=this._activityIdHandlerQueue[d],this._workflowActivityDispatcher.registerExternalIdHandler(c.id,c.handler);
this._activityIdHandlerQueue.length=0};h.prototype.shutdown=function(d){this.toolRegistry.clear();this.undoManager.destroy();k.prototype.shutdown.call(this,d)};h.prototype.onConfigurationLoaded=function(f){var c=f.configuration;if(c.hasOwnProperty("application")&&c.application.hasOwnProperty("geometryServiceUrl"))esri.config.defaults.geometryService=new esri.tasks.GeometryService(c.application.geometryServiceUrl);c.hasOwnProperty("application")&&c.application.hasOwnProperty("datumTransforms")?g.mapping.infrastructure.GeometryUtils.registerDatumTransforms(c.application.datumTransforms):
g.mapping.infrastructure.GeometryUtils.registerDefaultDatumTransforms();f.configuration.application&&f.configuration.application.oAuth2ClientId&&!d.essentials.OAuth2Client.applicationHasImplicitGrant()&&!d.essentials.OAuth2Client.applicationHasImplicitGrantError()?(d.essentials.OAuth2Client.redirectToLogOnPage(f.configuration.application.oAuth2AuthorizeUri||"http://www.arcgisonline.com/sharing/oauth2/authorize",f.configuration.application.oAuth2ClientId),this.abortInitialization=true):k.prototype.onConfigurationLoaded.call(this,
f)};h.prototype.doWhenMapInitialized=function(d){var c=this;if(this.isArcGisWebApp)d();else if(this.site&&this.site.isInitialized)d();else var a=this.eventRegistry.event("SiteServiceLayersLoadedEvent").subscribe(this,function(){c.eventRegistry.event("SiteServiceLayersLoadedEvent").unsubscribe(a);d()})};return h}(d.framework.application.Application);g.ViewerApplication=n})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(k){(function(h){function f(b){var a=d.framework.utils.isNullOrUndefined;if(a(b))return false;switch(b.type){case "point":return!a(b.x)&&!a(b.y);case "multipoint":return(b=b.points)&&b.length>0;case "polyline":return(b=b.paths)&&b.length>0;case "polygon":return(b=b.rings)&&b.length>0;case "extent":return!a(b.xmin)&&!a(b.xmax)&&!a(b.ymin)&&!a(b.ymax);default:return false}}function c(b,a){var c=a.x-b.x,e=a.y-b.y;return Math.sqrt(c*c+e*e)}function a(b){if(!b||
!b.configuration)return null;else if(j&&j.url&&j.url.startsWith(b.configuration.geometryServiceUrl))return j;var a=b.configuration.geometryServiceUrl,c=b.configuration.geometryServiceToken;if(c){a+=(a.indexOf("?")>-1?"&token=":"?token=")+encodeURIComponent(c);var e=dojo.subscribe("ServiceTokenRefreshed",function(a){if(a.serviceUrl===b.configuration.geometryServiceUrl)b.configuration.geometryServiceToken=a.token,j=null,dojo.unsubscribe(e)})}return j=new esri.tasks.GeometryService(a)}function b(b){b.forEach(function(b){var a=
null;b.fromWkid&&b.fromWkid>0?a=new esri.SpatialReference(b.fromWkid):b.fromWkt&&(a=new esri.SpatialReference(b.fromWkt));var c=null;b.toWkid&&b.toWkid>0?c=new esri.SpatialReference(b.toWkid):b.toWkt&&(c=new esri.SpatialReference(b.toWkt));var i=null;b.transformWkid&&b.transformWkid>0?i=new esri.SpatialReference(b.transformWkid):b.transformWkt&&(i=new esri.SpatialReference(b.transformWkt));if(!a||!c||!i)throw Error("Invalid or missing spatial reference. Cannot register datum transform.");e.push({fromSR:a,
toSR:c,transformation:i})})}function i(b,a){if(!b||!a||e.length==0)return null;for(var c=d.essentials.GeometryUtilities.spatialRefsAreEqual,i=0;i<e.length;i++){var j=e[i];if(c(b,j.fromSR)&&c(a,j.toSR))return{transformation:j.transformation,transformForward:true};if(c(b,j.toSR)&&c(a,j.fromSR))return{transformation:j.transformation,transformForward:false}}return null}h.DEFAULT_GEOMETRY_SERVICE_URI="http://sampleserver6.arcgisonline.com/arcgis/rest/services/Utilities/Geometry/GeometryServer";var e=[],
j=null;h.isValidGeometry=f;h.getMiddle=function(b){if(!b||!b.type||!f(b))return null;if(b.type=="point")return b;else if(b.type=="multipoint")return(b=b.getExtent())?b.getCenter():null;else if(b.type=="polyline"){for(var a=0,e=0;e<b.paths.length;e++)for(var i=0;i<b.paths[e].length-1;i++){var d=new esri.geometry.Point(b.paths[e][i]),j=new esri.geometry.Point(b.paths[e][i+1]);a+=c(d,j)}for(var h=0,e=0;e<b.paths.length;e++)for(i=0;i<b.paths[e].length-1;i++){var d=new esri.geometry.Point(b.paths[e][i]),
j=new esri.geometry.Point(b.paths[e][i+1]),k=c(d,j);if(h+k>a/2)return a=k/(a/2-h),new esri.geometry.Point(d.x+(j.x-d.x)/a,d.y+(j.y-d.y)/a,b.spatialReference);h+=k}}else if(b.type=="polygon")return(b=b.getExtent())?b.getCenter():null;else if(b.type=="extent")return b.getCenter();return null};h.getMidpoint=function(b,a){if(!b||!a)throw Error("The beginning and ending points are required.");return new esri.geometry.Point({x:(b.x+a.x)/2,y:(b.y+a.y)/2,spatialReference:b.spatialReference.toJson()})};h.getEsriGeometryType=
function(b,a){if(!b)return null;var c=null;switch(b.toLowerCase()){case "rectangle":c=esri.toolbars.Draw.EXTENT;break;case "freehandpolygon":c=esri.toolbars.Draw.FREEHAND_POLYGON;break;case "freehandpolyline":c=esri.toolbars.Draw.FREEHAND_POLYLINE;break;case "mappoint":c=esri.toolbars.Draw.POINT;break;case "multipoint":c=esri.toolbars.Draw.MULTI_POINT;break;case "polygon":c=esri.toolbars.Draw.POLYGON;break;case "polyline":c=esri.toolbars.Draw.POLYLINE;break;default:c=a||esri.toolbars.Draw.EXTENT}return c};
h._getGeometryService=function(b){return a(b)};h.getGeometryService=a;h.needsProjection=function(b,a){return d.essentials.GeometryUtilities.spatialRefsAreEqual(b.spatialReference,a.map.spatialReference,false)?false:true};h.projectGeometry=function(b,a,c,e,i){if(!b||!b.spatialReference)e&&e(Error("Invalid geometry or spatial reference."));else if(b.spatialReference.equals(a))c&&c(b);else{var d=new esri.tasks.ProjectParameters;d.outSR=a;d.geometries=[b];this.project(d,function(b){b&&b.length>0&&c&&
c(b[0])},e,i)}};h.projectGeometryWithTransform=function(b,a,c,e,i,d){if(c)if(!b||!b.spatialReference)i&&i(Error("Invalid geometry or spatial reference."));else if(b.spatialReference.equals(a))e&&e(b);else{var j=new esri.tasks.ProjectParameters;j.outSR=a;j.geometries=[b];j.transformation={wkid:c};this.project(j,function(b){b&&b.length>0&&e&&e(b[0])},i,d)}else this.projectGeometry(b,a,e,i)};h.project=function(b,a,c,e){if(!b||esri.tasks.hasOwnProperty("ProjectParameters")&&!(b instanceof esri.tasks.ProjectParameters)||
!b.hasOwnProperty("outSR")||!b.hasOwnProperty("geometries"))c&&dojo.isFunction(c)&&c(Error("projectParameters required."));else if(!a||!dojo.isFunction(a))c&&dojo.isFunction(c)&&c(Error("callback required."));else if(b.outSR){var j=b.geometries,f=false;j&&j.length>0&&(d.essentials.GeometryUtilities.spatialRefsAreEqual(j[0].spatialReference,b.outSR,false)||(f=true));if(f)if(f=this._getGeometryService(e),b.outSR.isWebMercator()&&j[0].spatialReference.wkid===4326||b.outSR.wkid===4326&&j[0].spatialReference.isWebMercator())this._projectLocally(b.geometries,
b.outSR,a,c);else if(e&&e.isOffline&&e.isOffline.get()&&!e.isNative.get())b="An operation requiring projection attempted to project while offline, but was not between WebMercator and WGS84",c&&dojo.isFunction(c)&&c(Error(b));else if(f){if((e=i(j[0].spatialReference,b.outSR))&&!b.transformation)b.transformation=e.transformation,b.transformForward=e.transformForward;esri.tasks.hasOwnProperty("ProjectParameters")?f.project(b,a,c):f.project(b.geometries,b.outSR,a,c)}else c&&dojo.isFunction(c)&&c(Error("Unable to get the geometry service. Make sure a geometry service url is configured in the application."));
else a(j)}else c&&dojo.isFunction(c)&&c(Error("output spatial reference is required."))};h.simplifyPolygons=function(b,a,c,e){this._getGeometryService(e).simplify(b,a,c)};h.simplifyPolygon=function(b,a,c,e){this.simplifyPolygons([b],function(b){b&&b.length>0?a(b[0]):c()},c,e)};h._projectLocally=function(b,a,c,e){for(var i=[],d=0;d<b.length;d++)b[d].spatialReference.isWebMercator()&&a.wkid===4326?i[d]=esri.geometry.webMercatorToGeographic(b[d]):b[d].spatialReference.wkid===4326&&a.isWebMercator()?
i[d]=esri.geometry.geographicToWebMercator(b[d]):(e&&dojo.isFunction(e)&&e(Error("Unable to get the geometry service. Make sure a geometry service url is configured in the application.")),this.app.trace.error("An operation requiring projection attempted to project while offline, but was not between WebMercator and WGS84"));c(i)};h.createCircle=function(b,a,c,e){for(var i=[],d=null,e=e||40,b=new esri.geometry.Polygon(b),d=360/e,j=1;j<=e;j++){var f=j*d*Math.PI/180;i.push([a.x+c*Math.cos(f),a.y+c*Math.sin(f)])}i.push(i[0]);
b.addRing(i);return b};h.fixAspectRatio=function(b,a){var c=a.getWidth()/a.getHeight(),e=b.getWidth()/b.getHeight(),i=b.getWidth(),d=b.getHeight();e<c?i=c*d:d=1/c*i;c=b.getCenter();return new esri.geometry.Extent(c.x-i/2,c.y-d/2,c.x+i/2,c.y+d/2,b.spatialReference)};h.extentToPolygon=function(b){var a=new esri.geometry.Polygon(b.spatialReference),c=[];c.push(new esri.geometry.Point(b.getCenter().x-b.getWidth()/2,b.getCenter().y-b.getHeight()/2));c.push(new esri.geometry.Point(b.getCenter().x-b.getWidth()/
2,b.getCenter().y+b.getHeight()/2));c.push(new esri.geometry.Point(b.getCenter().x+b.getWidth()/2,b.getCenter().y+b.getHeight()/2));c.push(new esri.geometry.Point(b.getCenter().x+b.getWidth()/2,b.getCenter().y-b.getHeight()/2));c.push(new esri.geometry.Point(b.getCenter().x-b.getWidth()/2,b.getCenter().y-b.getHeight()/2));a.addRing(c);return a};h.pointsAreEqual=function(b,a){return b&&!a||!b&&a?false:!b?true:b.x!==a.x||b.y!==a.y?false:!b.spatialReference&&a.spatialReference||b.spatialReference&&!a.spatialReference?
false:!b.spatialReference.equals(a.spatialReference)?false:true};h.registerDefaultDatumTransforms=function(){var a=[];a.push({transformWkid:108457,fromWkid:28992,toWkid:4326});a.push({transformWkid:1195,fromWkid:27700,toWkid:4326});a.push({transformWkid:1623,fromWkid:102067,toWkid:4326});b(a)};h.registerDatumTransforms=b;h.getDatumTransformParameters=i;h.unionGeometries=function(b){return new Promise(function(a,c){try{require(["esri/geometry/geometryEngine"],function(c){a(c.union(b))})}catch(e){c(e)}})};
h.explodeGeometry=function(b){switch(b.type){case "polygon":return b.rings.map(function(a){return(new esri.geometry.Polygon(a)).setSpatialReference(b.spatialReference)});case "polyline":return b.paths.map(function(a){return(new esri.geometry.Polyline(a)).setSpatialReference(b.spatialReference)});case "multipoint":return b.points.map(function(a){return new esri.geometry.Point(a,b.spatialReference)})}return[b]};h.cutGeometries=function(b,a,c){var e=this;return new Promise(function(i,d){var j=e.getGeometryService(c);
if(!j)return Promise.reject(Error("Unable to get the geometry service. Make sure a geometry service url is configured in the application."));try{j.cut(b,a).then(function(b){for(var a=[],c=0;c<b.geometries.length;c++){var e=b.cutIndexes[c];a[e]||(a[e]=[]);a[e].push(b.geometries[c])}i(a)})}catch(f){d(f)}})}})(k.GeometryUtils||(k.GeometryUtils={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(k){(function(h){(function(f){function c(c,d){var m=function(e){var m=null;require(["esri/tasks/BufferParameters"],function(){m=new esri.tasks.BufferParameters;m.geometries=e;m.unit=b(d.bufferUnit);m.bufferSpatialReference=d.bufferSpatialReference||d.outSpatialReference||d.geometries[0].spatialReference||c.map.spatialReference;m.outSpatialReference=d.outSpatialReference||c.map.spatialReference||d.geometries[0].spatialReference||d.bufferSpatialReference;
m.distances=[d.bufferDistance];m.unionResults=d.unionResults!=void 0?!!d.unionResults:true;m.geodesic=!!d.geodesic;if(m.unit==f.GCX_UNIT_YARDS)m.unit=esri.tasks.GeometryService.UNIT_FOOT,m.distances=[i(d.bufferDistance,f.GCX_UNIT_YARDS,esri.tasks.GeometryService.UNIT_FOOT)]});return new Promise(function(b,e){a(c,m).then(b,e)})};return new Promise(function(b,a){var c=[];e(d.geometries).forEach(function(b){c.push(m(b))});Promise.all(c).then(function(c){var e=c[0];e.bufferId=d.bufferId;e.sourceCommand=
d.sourceCommand;if(c.length===1)b(e);else{for(var i=1;i<c.length;i++){var j=c[i].geometries;if(j.length)e.geometries=e.geometries.concat(j)}d.unionResults?k.GeometryUtils.unionGeometries(e.geometries).then(function(a){if(k.GeometryUtils.isValidGeometry(a))e.geometries=[a],e.geometry=a,b(e)},function(b){var c={};c.error=b;c.bufferId=d.bufferId;c.sourceCommand=d.sourceCommand;a(c)}):b(e)}},function(b){b.bufferId=d.bufferId;b.sourceCommand=d.sourceCommand;a(b)})})}function a(b,a){var c=function(b,a){var c=
{};if(b)c.geometries=b;if(a)c.error=a;return c};return new Promise(function(e,i){var d=k.GeometryUtils.getGeometryService(b);if(d){var f=function(){d.buffer(a,function(b){return e(c(b,null))},function(b){return i(c(null,b))})};esri.geometry.normalizeCentralMeridian(a.geometries).then(function(b){b[0].type==="polygon"?d.simplify(a.geometries,function(b){a.geometries=b;f()},function(b){i(c(null,b))}):(a.geometries=b,f())})}else b.trace.error("BufferUtils: Buffer operation failed. Could not retrieve geometry service."),
i(c(null,Error("BufferUtils: Buffer operation failed. Could not retrieve geometry service.")))})}function b(b,a){if(!b)return null;var c=null;switch(b){case "feet":case d.essentials.DistanceUnitType.FEET:case esri.tasks.GeometryService.UNIT_FOOT.toString():case esri.Units.FEET:c=esri.tasks.GeometryService.UNIT_FOOT;break;case "kilometer":case d.essentials.DistanceUnitType.KILOMETERS:case esri.tasks.GeometryService.UNIT_KILOMETER.toString():case esri.Units.KILOMETERS:c=esri.tasks.GeometryService.UNIT_KILOMETER;
break;case "meter":case d.essentials.DistanceUnitType.METERS:case esri.tasks.GeometryService.UNIT_METER.toString():case esri.Units.METERS:c=esri.tasks.GeometryService.UNIT_METER;break;case "mile":case d.essentials.DistanceUnitType.MILES:case esri.tasks.GeometryService.UNIT_STATUTE_MILE.toString():case esri.Units.MILES:c=esri.tasks.GeometryService.UNIT_STATUTE_MILE;break;case "nauticalmile":case d.essentials.DistanceUnitType.NAUTICAL_MILES:case esri.tasks.GeometryService.UNIT_NAUTICAL_MILE.toString():case esri.Units.NAUTICAL_MILES:c=
esri.tasks.GeometryService.UNIT_NAUTICAL_MILE;break;case "yard":case d.essentials.DistanceUnitType.YARDS:case esri.Units.YARDS:c=f.GCX_UNIT_YARDS;break;default:c=a||b}return c}function i(b,a,c){var e=0;switch(a){case esri.tasks.GeometryService.UNIT_METER:e=b*3.280839895013;break;case esri.tasks.GeometryService.UNIT_KILOMETER:e=b*3280.839895013123;break;case esri.tasks.GeometryService.UNIT_STATUTE_MILE:e=b*5280;break;case esri.tasks.GeometryService.UNIT_NAUTICAL_MILE:e=b*6076.12;break;case f.GCX_UNIT_YARDS:e=
b*3;break;default:e=b}switch(c){case esri.tasks.GeometryService.UNIT_METER:return e/3.280839895013;case esri.tasks.GeometryService.UNIT_KILOMETER:return e/3280.839895013123;case esri.tasks.GeometryService.UNIT_STATUTE_MILE:return e/5280;case esri.tasks.GeometryService.UNIT_NAUTICAL_MILE:return e/6076.12;case f.GCX_UNIT_YARDS:return e/3;default:return e}}function e(b){var a=[];b.forEach(function(b){for(var c=false,e=0;e<a.length;e++)if(a[e].length&&a[e][0].type===b.type){a[e].push(b);c=true;break}if(!c)c=
a.length,a[c]=[],a[c].push(b)});return a}f.SUPPORTED_BUFFER_UNITS={feet:null,yard:null,meter:null,kilometer:null,mile:null,nauticalmile:null};f.geographicWkidRanges=[[4001,4999],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],
[3350,3352],[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];f.GCX_UNIT_YARDS=12345;f.bufferGeometry=function(b,a){var e={bufferId:a.bufferId,geometries:[a.geometry],callback:a.callback,geodesic:a.geodesic,bufferSpatialReference:a.bufferSpatialReference,
outSpatialReference:a.outSpatialReference,bufferDistance:a.bufferDistance,bufferUnit:a.bufferUnit,unionResults:a.unionResults,sourceCommand:a.sourceCommand};return new Promise(function(a,i){c(b,e).then(function(b){b.geometry=b.geometries[0]||null;a(b)},function(b){i(b)})})};f.bufferGeometries=c;f.buffer=a;f.isGeographicWkid=function(b){for(var a=0;a<f.geographicWkidRanges.length;a++)if(b>=f.geographicWkidRanges[a][0]&&b<=f.geographicWkidRanges[a][1])return true;return false};f.getUnitDescFromConfig=
function(b){for(var a in k.buffer.BufferUtils.SUPPORTED_BUFFER_UNITS)if(k.buffer.BufferUtils.SUPPORTED_BUFFER_UNITS.hasOwnProperty(a)&&f.SUPPORTED_BUFFER_UNITS[a]&&f.SUPPORTED_BUFFER_UNITS[a].config===b)return k.buffer.BufferUtils.SUPPORTED_BUFFER_UNITS[a];return null};f.getGeometryServiceUnitConstant=b;f.convertLength=i})(h.BufferUtils||(h.BufferUtils={}))})(k.buffer||(k.buffer={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){var h=function(f){function c(a,b){var c=this;f.call(this);this.singleFeatureLayer=this.featureLayer=this.gcxLayer=null;this.clusterRadius=new Observable(null);this.maxFeaturesInCluster=new Observable(null);this.renderer=null;this.rendererInformation=[];this.featureLayerRenderer=null;this._featureLayerGraphics=[];this._clusters=[];this._hiddenClusters=[];this._featureSetName=this._clusterBackgroundColor=this._clusterLabelColor=null;this._esriEventHandlers=
[];this._gcxEventHandlers=[];this._fontSize="10pt";this._fontFamily="Segoe UI";if(!(a.mapService.serviceLayer instanceof esri.layers.FeatureLayer))throw Error("ClusterLayers require an Esri FeatureLayer to be passed in as a parameter.");this.app=b;this.id=a.mapService.id+"-cluster";this._featureSetName=this.id+"FeatureSet";this.gcxLayer=a;this.featureLayer=a.mapService.serviceLayer;this.singleFeatureLayer=new esri.layers.GraphicsLayer;this.url=this.featureLayer.url;this.setVisibility(this.featureLayer.visible&&
this.featureLayer.visibleAtMapScale);this.setOpacity(this.featureLayer.opacity);this.featureLayerRenderer=this.featureLayer.renderer;this.featureLayer.setRenderer(null);this.featureLayer.redraw();this.singleFeatureLayer.id=a.mapService.id+"-explodedClusterLayer";this.singleFeatureLayer.setRenderer(this.featureLayerRenderer);this.singleFeatureLayer.setOpacity(this.featureLayer.opacity);this.singleFeatureLayer.url=this.url;this.clusterRadius.set(a.mapService.featureClustering.radius||50);this.maxFeaturesInCluster.set(a.mapService.featureClustering.maximumFeatures||
0);this._clusterLabelColor=new esri.Color(a.mapService.featureClustering.labelColor);this._clusterBackgroundColor=new esri.Color(a.mapService.featureClustering.backgroundColor);for(var e=0;e<4;e++)this.rendererInformation.push({isVisible:new Observable(false),rangeString:new Observable("")});this.maxFeaturesInCluster.bind(this,function(){c._loadRenderer()});this.maxFeaturesInCluster.get()>0&&this._loadRenderer();if(this.app.map&&this.app.map.loaded)this._setupEventListeners(this.app.map);else this.app.event("MapLoadedEvent").once(this,
function(b){c._setupEventListeners(b)});this.recluster()}__extends(c,f);c.prototype.recluster=function(){if(!(this.singleFeatureLayer.graphics.length>0))this._featureLayerGraphics=this.featureLayer.graphics.slice(0,this.featureLayer.graphics.length),this._generateClusters(),this.redraw()};c.prototype.destroy=function(){this.app.map.getLayer(this.singleFeatureLayer.id)&&this.app.map.removeLayer(this.singleFeatureLayer);this.app.featureSetManager.getCollectionById(this._featureSetName)&&(this.app.featureSetManager.closeCollection(this._featureSetName),
this.app.featureSetManager.removeCollectionById(this._featureSetName));this.gcxLayer.mapService.featureClustering.maximumFeatures=this.maxFeaturesInCluster.get();this.gcxLayer.mapService.featureClustering.radius=this.clusterRadius.get();this.app.map.removeLayer(this);this.featureLayer.setRenderer(this.featureLayerRenderer);this.featureLayer.redraw();for(var a=0;a<this._esriEventHandlers.length;a++)this._esriEventHandlers[a].remove();for(a=0;a<this._gcxEventHandlers.length;a++)this.app.event(this._gcxEventHandlers[a].eventName).unsubscribe(this._gcxEventHandlers[a].token)};
c.prototype.onClick=function(a){a.stopPropagation();if(dojo.isIE===8)this.onFeatureClicked(a)};c.prototype.onFeatureClicked=function(a){var b=this;if(a.graphic instanceof esri.Graphic&&!this.app.toolRegistry.getActiveTool()){var c=a.graphic;this.singleFeatureLayer.clear();this._hiddenClusters=[];for(var a=[],e=0;e<this._featureLayerGraphics.length;e++)this._featureLayerGraphics[e].attributes.clusterId===c.attributes.clusterId&&(a.push(new d.Feature({graphic:this._featureLayerGraphics[e],layer:this.gcxLayer,
symbol:this._getRenderedSymbol(this._featureLayerGraphics[e]),resolveLayerFields:true})),this.singleFeatureLayer.add(this._featureLayerGraphics[e]));this._hiddenClusters=this.graphics.slice(0,this.graphics.length);this.clear();this.redraw();this.app.map.getLayer(this.singleFeatureLayer.id)||this.app.map.addLayer(this.singleFeatureLayer);this.singleFeatureLayer.redraw();c=new d.FeatureSet;c.features.set(a);a=new d.FeatureSetCollection;a.featureSets.addItem(c);a.id=this._featureSetName;a.sourceName=
"ClusterFeatures";this.app.featureSetManager.getCollectionById(this._featureSetName)&&this.app.featureSetManager.removeCollectionById(this._featureSetName);this.app.featureSetManager.addCollection(a);this.app.featureSetManager.openCollection(this._featureSetName);this.app.featureSetManager.closeCollection(this._featureSetName);this.app.command("DisableMapClick").execute();var j=this.app.map.on("click",function(){if(b.app.stateManager.getActiveStates().filter(function(b){return b.stateDefinition.name===
"EditorActiveState"}).length>0)b.singleFeatureLayer.redraw();else return j.remove(),b.app.command("EnableMapClick").execute(),b.singleFeatureLayer.clear(),b.recluster(),false})}};c.prototype._setupEventListeners=function(){var a=this;this._gcxEventHandlers.push({eventName:"MapClickedEvent",token:this.app.event("MapClickedEvent").subscribe(this,function(b){return a._mapClickedEvent(b)})});this._gcxEventHandlers.push({eventName:"MapExtentChangedEvent",token:this.app.event("MapExtentChangedEvent").subscribe(this,
function(b,c){return a._mapExtentChangedEvent(b,c)})});this._gcxEventHandlers.push({eventName:"MapTipClosedEvent",token:this.app.event("MapTipClosedEvent").subscribe(this,function(){return a._mapTipClosedEvent()})});this._gcxEventHandlers.push({eventName:"ClusterLayerRemovedEvent",token:this.app.event("ClusterLayerRemovedEvent").subscribe(this,function(b){return a._clusterLayerRemovedEvent(b)})});this._gcxEventHandlers.push({eventName:"LayerVisibilityChangedEvent",token:this.app.event("LayerVisibilityChangedEvent").subscribe(this,
function(b){return a._layerVisibilityChangedEvent(b)})});this._gcxEventHandlers.push({eventName:"FeatureLayerOfflineEvent",token:this.app.event("FeatureLayerOfflineEvent").subscribe(this,function(b){return a._handleOffline(b)})});this._gcxEventHandlers.push({eventName:"FeatureLayerOnlineEvent",token:this.app.event("FeatureLayerOnlineEvent").subscribe(this,function(b){return a._handleOnline(b)})});this._gcxEventHandlers.push({eventName:"GeometryEditInvokedEvent",token:this.app.event("GeometryEditInvokedEvent").subscribe(this,
function(){return a.recluster()})});this._gcxEventHandlers.push({eventName:"GeometryEditCompletedEvent",token:this.app.event("GeometryEditCompletedEvent").subscribe(this,function(){return a._handleGeometryChange()})});this._gcxEventHandlers.push({eventName:"EditorClosedEvent",token:this.app.event("EditorClosedEvent").subscribe(this,function(){return a._handleEditorClosedEvent()})});this._esriEventHandlers.push(this.featureLayer.on("update-end",function(){a.recluster()}));var b=false,c=null,e=null;
this._esriEventHandlers.push(this.on("mouse-down",function(a){dojo.isIE===8?b=true:a.button!==0?b=true:(b=false,c=a.x,e=a.y)}));this._esriEventHandlers.push(this.on("mouse-drag",function(a){if(a.x>c+3||a.x<c-3||a.y>e+3||a.y<e-3)b=true}));this._esriEventHandlers.push(this.on("mouse-up",function(c){if(!b)a.onFeatureClicked(c)}))};c.prototype._handleGeometryChange=function(){this.recluster();this.singleFeatureLayer.graphics.length>0&&this.singleFeatureLayer.redraw()};c.prototype._handleEditorClosedEvent=
function(){this.recluster();this.singleFeatureLayer.graphics.length>0&&this.singleFeatureLayer.redraw()};c.prototype._mapClickedEvent=function(a){this.visible&&this.app.toolRegistry.getActiveTool()===null&&(a.graphic&&a.graphic.attributes&&a.graphic.geometry instanceof esri.geometry.Point?this.app.command("ShowMapTip").execute(new d.Feature({graphic:a.graphic,layer:this.gcxLayer})):(this.singleFeatureLayer.graphics.length>0&&(this.singleFeatureLayer.clear(),this.app.command("RemovePushpins").execute()),
this.recluster()))};c.prototype._mapExtentChangedEvent=function(){!this.featureLayer.visibleAtMapScale||!this.featureLayer.visible?this.setVisibility(false):this.setVisibility(true);this.singleFeatureLayer.graphics.length===0&&this.visible&&this.featureLayer.visibleAtMapScale&&this.recluster();this._loadRenderer()};c.prototype._handleOnline=function(a){if(a.serviceLayer.id===this.featureLayer.id&&a.serviceLayer instanceof esri.layers.FeatureLayer)this.featureLayer=a.serviceLayer};c.prototype._handleOffline=
function(a){if(a.serviceLayer.id===this.featureLayer.id&&a.serviceLayer instanceof esri.layers.FeatureLayer)this.featureLayer=a.serviceLayer};c.prototype._mapTipClosedEvent=function(){this.singleFeatureLayer.clear();this.recluster()};c.prototype._clusterLayerRemovedEvent=function(a){a===this&&this.destroy()};c.prototype._layerVisibilityChangedEvent=function(a){var b=this;a.forEach(function(a){a.layer===b.gcxLayer&&(b.setVisibility(a.visibility&&b.featureLayer.visibleAtMapScale),b._loadRenderer())})};
c.prototype._loadRenderer=function(){var a=new esri.renderer.ClassBreaksRenderer(null,"clusterCount"),b=null;if(this.maxFeaturesInCluster.get()>0)b=this.maxFeaturesInCluster.get();else for(var c=b=0;c<this._clusters.length;c++)if(this._clusters[c].attributes.clusterCount>b)b=this._clusters[c].attributes.clusterCount;c=Math.ceil(b*0.309999999999);c===1&&c++;var e=Math.ceil(b*0.31);e<=c&&(e=c+1);var d=Math.ceil(b*0.609999999999);d<e&&(d=e);var l=Math.ceil(b*0.61);l<=d&&(l=d+1);var f=Math.ceil(b*0.909999999999);
f<l&&(f=l);var h=Math.ceil(b*0.91);h<=f&&(h=f+1);this._addBreak(a,21,2,c,b,0);this._addBreak(a,28,e,d,b,1);this._addBreak(a,35,l,f,b,2);this._addBreak(a,42,h,Infinity,b,3);this.setRenderer(a)};c.prototype._addBreak=function(a,b,c,e,d,l){d>=c&&this.visible&&this.featureLayer.visibleAtMapScale?(c!==e?e!==Infinity?this.rendererInformation[l].rangeString.set(c+" - "+e):this.rendererInformation[l].rangeString.set(c+"+"):this.rendererInformation[l].rangeString.set(c.toString()),this.rendererInformation[l].isVisible.set(true)):
this.rendererInformation[l].isVisible.set(false);d=null;d=dojo.isIE===8?new esri.symbol.SimpleMarkerSymbol({color:this._clusterBackgroundColor.toRgba(),size:b,type:"esriSMS",style:"esriSMSCircle",outline:{color:this._makeTransparent(this._clusterBackgroundColor.toRgba()),width:8,type:"esriSLS",style:"esriSLSSolid"}}):new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,b,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color(this._makeTransparent(this._clusterBackgroundColor.toRgba())),
8),this._clusterBackgroundColor);a.addBreak(c,e,d)};c.prototype._makeTransparent=function(a){a.length===4&&(a[3]=0.25);return a};c.prototype._isValidCluster=function(a,b,c){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))/c<=this.clusterRadius.get()&&this._isClusterFull(b)};c.prototype._isClusterFull=function(a){return a.attributes.clusterCount<this.maxFeaturesInCluster.get()||this.maxFeaturesInCluster.get()==0||this.maxFeaturesInCluster.get().toString()==""};c.prototype._generateClusters=
function(){this.clear();this._clusters=[];this._addGraphicsToClusters(false);for(var a=[],b=0;b<this._clusters.length;b++)a[b]={x:this._clusters[b].x,y:this._clusters[b].y,attributes:{clusterCount:0,clusterId:this._clusters[b].attributes.clusterId,extent:this._clusters[b].attributes.extent}};this._clusters=a;this._addGraphicsToClusters(true);this._showAllClusters()};c.prototype._addGraphicsToClusters=function(a){for(var b=this._featureLayerGraphics.length,c=this.app.map.extent.getWidth()/this.app.map.width,
e=0;e<b;e++){var d=null;if(this._featureLayerGraphics[e].geometry instanceof esri.geometry.Point&&this._featureLayerGraphics[e].visible)if(d=this._featureLayerGraphics[e].geometry,this.app.map.extent.contains(d)){for(var l=this._featureLayerGraphics[e],f=[],h=0;h<this._clusters.length;h++){var k=this._clusters[h];this._isValidCluster(d,k,c)&&f.push(k)}if(f.length===1)this._clusterAddPoint(l,d,f[0],a);else if(f.length>1){k=[];for(h=0;h<f.length;h++)k[h]=Math.sqrt(Math.pow(f[h].x-d.x,2)+Math.pow(f[h].y-
d.y,2));for(var g=null,n=null,h=0;h<k.length;h++)if(n===null||n>k[h])n=k[h],g=f[h];this._clusterAddPoint(l,d,g,a)}else this._createCluster(l,d)}else this._featureLayerGraphics[e].attributes.clusterId=-1}};c.prototype._showAllClusters=function(){(this.maxFeaturesInCluster.get()==0||this.maxFeaturesInCluster.get().toString()=="")&&this._loadRenderer();for(var a=0,b=this._clusters.length;a<b;a++)this._showCluster(this._clusters[a])};c.prototype._showCluster=function(a){var b=new esri.geometry.Point(a.x,
a.y,this.app.map.spatialReference),c=new esri.Graphic(b,null,a.attributes);c.setSymbol(this._getRenderedSymbol(c));this.add(c);a.attributes.clusterCount<2||(c=null,dojo.isIE===8?(c=new esri.symbol.TextSymbol({type:"esriTS",color:this._clusterLabelColor.toRgba(),xoffset:0,yoffset:-5,font:{family:this._fontFamily,size:this._fontSize,weight:"bold"}}),c.setText(a.attributes.clusterCount.toString())):(c=new esri.symbol.TextSymbol(a.attributes.clusterCount),c.setColor(this._clusterLabelColor),c.setOffset(0,
-5),c.setFont((new esri.symbol.Font(this._fontSize)).setFamily(this._fontFamily).setWeight(esri.symbol.Font.WEIGHT_BOLD))),this.add(new esri.Graphic(b,c,a.attributes)))};c.prototype._getRenderedSymbol=function(a){if(a.attributes.clusterCount!==1)return null;var b=this.featureLayerRenderer;if(!b)return null;if(b instanceof esri.renderer.SimpleRenderer)return b.getSymbol(a);else for(var c=0;c<this._featureLayerGraphics.length;c++){var e=this._featureLayerGraphics[c];if(e.attributes.clusterId===a.attributes.clusterId)return b.getSymbol(e)}};
c.prototype._clusterAddPoint=function(a,b,c,e){var d;if(!e)d=c.attributes.clusterCount,e=(b.x+c.x*d)/(d+1),d=(b.y+c.y*d)/(d+1),c.x=e,c.y=d;if(b.x<c.attributes.extent[0])c.attributes.extent[0]=b.x;else if(b.x>c.attributes.extent[2])c.attributes.extent[2]=b.x;if(b.y<c.attributes.extent[1])c.attributes.extent[1]=b.y;else if(b.y>c.attributes.extent[3])c.attributes.extent[3]=b.y;c.attributes.clusterCount++;if(!b.hasOwnProperty("attributes"))b.attributes={};a.attributes.clusterId=b.attributes.clusterId=
c.attributes.clusterId};c.prototype._createCluster=function(a,b){var c=this._clusters.length+1;a.attributes.clusterId=c;this._clusters.push({x:b.x,y:b.y,attributes:{clusterCount:1,clusterId:c,extent:[b.x,b.y,b.x,b.y]}})};return c}(esri.layers.GraphicsLayer);d.ClusterLayer=h})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(h){h.getAllFeaturesFromReportable=function(f){var c=[];f instanceof d.FeatureSetCollection?f.featureSets.get().forEach(function(a){a.features.get().forEach(function(b){c.push(b)})}):f instanceof d.FeatureSet?f.features.get().forEach(function(a){c.push(a)}):f instanceof d.Feature?c.push(f):f&&f.constructor===Array&&(c=f);return c}})(d.reporting||(d.reporting={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){return function(){}}();d.ClusterLayerArgs=f})(d.commandArgs||(d.commandArgs={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){return function(){}}();d.SnappingFeedbackEventArgs=f})(d.eventArgs||(d.eventArgs={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){function c(){}c.Default="default";c.MutuallyExclusive="mutuallyExclusive";return c}();d.LayerVisibilityType=f})(d.layerList||(d.layerList={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(h){var f=function(){function c(a,b){this.filteredLayerSelectorLayerItems=[];this.unfilteredLayerSelectorLayerItems=[];this.itemTypes={FOLDER:"folder",LAYER:"layer",SERVICELAYER:"serviceLayer"};this._infrastructureLibraryId="Mapping.Infrastructure";this._unfilteredItems=[];this.appInfo=a;if(b){if(b.layerFilter&&dojo.isFunction(b.layerFilter))this.layerFilter=b.layerFilter;if(b.layerStateChangeHandler&&dojo.isFunction(b.layerStateChangeHandler))this.layerStateChangeHandler=
b.layerStateChangeHandler;if(b.enableAllLayersHandler&&dojo.isFunction(b.enableAllLayersHandler))this.enableAllLayersHandler=b.enableAllLayersHandler;if(b.disableAllLayersHandler&&dojo.isFunction(b.disableAllLayersHandler))this.disableAllLayersHandler=b.disableAllLayersHandler;if(b.onInitializedHandler&&dojo.isFunction(b.onInitializedHandler))this.onInitializedHandler=b.onInitializedHandler}this.items=new ObservableCollection;this._suspendLayerStateChangeHandler=this.initialized=false;this.initialize()}
c.prototype.initialize=function(){this._loadLayerSelectorItems();this.applyFilter(this.layerFilter);this.setLayerStateChangeHandler(this.layerStateChangeHandler);this.setEnableAllLayersHandler(this.enableAllLayersHandler);this.setDisableAllLayersHandler(this.disableAllLayersHandler);if(this.onInitializedHandler&&!this.initialized)this.onInitializedHandler(this);this.initialized=true};c.prototype.applyFilter=function(a){var b=this;this.layerFilter=a&&dojo.isFunction(a)?a:null;this.items.clear();this.filteredLayerSelectorLayerItems=
[];if(this.layerFilter){var c=function(a){var d=null;a.itemType===b.itemTypes.FOLDER?(d=b._generateItemCloneForFilter(a),a.items.get().forEach(function(b){(b=c(b))&&(!b.isFolder||b.isFolder&&b.items.length())&&d.items.addItem(b)})):a.itemType===b.itemTypes.SERVICELAYER&&a.items.getLength()>0?(b.layerFilter(a)?(d=b._generateItemCloneForFilter(a),b.filteredLayerSelectorLayerItems.push(d)):d=b._creatFolderFromServiceLayer(a,true,true),a.items.get().forEach(function(b){(b=c(b))&&(!b.isFolder||b.isFolder&&
b.items.length())&&d.items.addItem(b)})):b.layerFilter(a)&&(d=a,b.filteredLayerSelectorLayerItems.push(d));return d};this._unfilteredItems.forEach(function(a){(a=c(a))&&(!a.isFolder||a.isFolder&&a.items.length())&&b.items.addItem(a)})}else this.items.set(this._unfilteredItems),this.filteredLayerSelectorLayerItems=this.unfilteredLayerSelectorLayerItems.slice(0)};c.prototype.setLayerStateChangeHandler=function(a){var b=this;(function(){b.unfilteredLayerSelectorLayerItems.forEach(function(b){b._isEnabledBindingToken&&
(b.isEnabled.unbind(b._isEnabledBindingToken),delete b._isEnabledBindingToken)})})();(this.layerStateChangeHandler=a&&dojo.isFunction(a)?a:null)&&this.unfilteredLayerSelectorLayerItems.forEach(function(a){a._isEnabledBindingToken=a.isEnabled.bind(b,function(){b._suspendLayerStateChangeHandler||b.layerStateChangeHandler(a)})})};c.prototype.setEnableAllLayersHandler=function(a){this.enableAllLayersHandler=a&&dojo.isFunction(a)?a:null};c.prototype.setDisableAllLayersHandler=function(a){this.disableAllLayersHandler=
a&&dojo.isFunction(a)?a:null};c.prototype.enableAllLayers=function(){this._suspendLayerStateChangeHandler=true;this.filteredLayerSelectorLayerItems.forEach(function(a){return a.isEnabled.set(true)});this._suspendLayerStateChangeHandler=false;this.enableAllLayersHandler&&this.enableAllLayersHandler()};c.prototype.disableAllLayers=function(){this._suspendLayerStateChangeHandler=true;this.filteredLayerSelectorLayerItems.forEach(function(a){return a.isEnabled.set(false)});this._suspendLayerStateChangeHandler=
false;this.disableAllLayersHandler&&this.disableAllLayersHandler()};c.prototype.addUserAddedServiceLayer=function(a){var b=this;if(a instanceof d.gis.ServiceLayerInfo)a=a.gcxMapService;if(!a)return false;if(this.unfilteredLayerSelectorLayerItems.filter(function(b){return b.serviceLayer&&b.serviceLayer.gcxMapService===a}).length)return false;var c=this._createServiceLayerItemFromServiceLayer(d.gis.ServiceLayerInfo.fromGcxMapService(a),true,true);this.unfilteredLayerSelectorLayerItems.push(c);a.layers.forEach(function(a){if(b.unfilteredLayerSelectorLayerItems.filter(function(b){return b.layer&&
b.layer.gcxLayer===a}).length)return false;var c=d.gis.LayerInfo.fromGcxLayer(a);(c=b._createLayerItemFromLayer(c,true,true))&&b.unfilteredLayerSelectorLayerItems.push(c)});this._unfilteredItems.push(c);this.applyFilter(this.layerFilter);this.setLayerStateChangeHandler(this.layerStateChangeHandler);return true};c.prototype.removeServiceLayer=function(a){var b=this;if(a instanceof d.gis.ServiceLayerInfo)a=a.gcxMapService;if(!a)return false;var c=this.unfilteredLayerSelectorLayerItems.filter(function(b){return b.serviceLayer&&
b.serviceLayer.gcxMapService===a});if(!c.length)return false;c.forEach(function(a){return b._removeItemFromUnfilteredCollections(a)});a.layers.forEach(function(a){var c=b.unfilteredLayerSelectorLayerItems.filter(function(b){return b.layer&&b.layer.gcxLayer===a});if(!c.length)return false;c.forEach(function(a){return b._removeItemFromUnfilteredCollections(a)})});this.applyFilter(this.layerFilter);this.setLayerStateChangeHandler(this.layerStateChangeHandler);return true};c.prototype._removeItemFromUnfilteredCollections=
function(a){var b=this;if(a){var c=[],e=function(b,a){var c=b.indexOf(a);c>-1&&b.splice(c,1)},d=function(b,a){for(var f=b.length-1;f>=0;f--){var h=b[f];h===a?b.splice(f,1):h.isFolder&&h.items.length()&&(e(h.items.get(),a),h.items.pulse(),d(h.items.get(),a),h.items.length()===0&&c.push(h))}};a.isFolder||e(this.unfilteredLayerSelectorLayerItems,a);d(this._unfilteredItems,a);c.length&&c.forEach(function(a){return b._removeItemFromUnfilteredCollections(a)})}};c.prototype._loadLayerSelectorItems=function(){var a=
this,b=this.appInfo.gcxApp.site.layerListRestEndpoint,c=this.appInfo.mapInfo;this._unfilteredItems=[];this.unfilteredLayerSelectorLayerItems=[];var e=function(b){var d,f=b.isExpanded!=void 0?b.isExpanded:true;switch(b.type){case "folder":d=a._createFolderItemFromRestItem(b,true,f);break;case "mapService":d=c.findMapServiceById(b.mapServiceID);d=a._createServiceLayerItemFromServiceLayer(d,true,f);a.unfilteredLayerSelectorLayerItems.push(d);break;case "layer":d=(d=c.findMapServiceById(b.mapServiceID))&&
d.findLayerById(b.layerID),d=a._createLayerItemFromLayer(d,true,f),a.unfilteredLayerSelectorLayerItems.push(d)}if(d&&b.items)for(f=0;f<b.items.length;f++){var h=e(b.items[f]);h&&d.items.addItem(h)}return b.type==="folder"&&d&&d.items.getLength()===0?null:d};b.items&&b.items.length&&b.items.forEach(function(b){(b=e(b))&&a._unfilteredItems.push(b)});this._loadSelectorItemsNotInLayerList()};c.prototype._loadSelectorItemsNotInLayerList=function(){for(var a=0;a<this.appInfo.mapInfo.serviceLayers.length;a++){var b=
null,c=this.appInfo.mapInfo.serviceLayers[a];c&&!c.includeInLayerList&&(b=this._createServiceLayerItemFromServiceLayer(c,true,true),this._unfilteredItems.push(b),this.unfilteredLayerSelectorLayerItems.push(b));for(var e=0;e<c.layers.length;e++){var d=c.layers[e];if(d&&(!d||!d.includeInLayerList))d=this._createLayerItemFromLayer(d,true,true),b&&d?(b.items.addItem(d),this.unfilteredLayerSelectorLayerItems.push(d)):b==null&&d&&(this._unfilteredItems.push(d),this.unfilteredLayerSelectorLayerItems.push(d))}}};
c.prototype._createFolderItemFromRestItem=function(a,b,c){if(!a)return null;var e={};e.itemType=this.itemTypes.FOLDER;e.name=new Observable(a.name||"Layers");e.isFolder=true;e.isEnabled=new Observable(!!b);e.isExpanded=new Observable(!!c);e.iconUri=new Observable("");e.items=new ObservableCollection;this._setTooltips(e);return e};c.prototype._creatFolderFromServiceLayer=function(a,b,c){var e={};e.itemType=this.itemTypes.FOLDER;e.name=new Observable(a.name.get()||"Layers");e.isFolder=true;e.isEnabled=
new Observable(!!b);e.isExpanded=new Observable(!!c);e.iconUri=new Observable(a.iconUri.get()||"");e.items=new ObservableCollection;this._setTooltips(e);return e};c.prototype._createLayerItemFromLayer=function(a,b,c){if(!a)return null;var e={};e.itemType=this.itemTypes.LAYER;e.isEnabled=new Observable(!!b);e.isExpanded=new Observable(!!c);e.name=new Observable(a.gcxLayer.displayName);e.isFolder=false;e.iconUri=new Observable(a.gcxLayer.iconUri);e.layer=a;e.items=new ObservableCollection([]);this._setTooltips(e);
return e};c.prototype._createServiceLayerItemFromServiceLayer=function(a,b,c){if(!a)return null;var e={};e.itemType=this.itemTypes.SERVICELAYER;e.isEnabled=new Observable(!!b);e.isExpanded=new Observable(!!c);e.name=new Observable(a.gcxMapService.displayName);e.isFolder=false;e.iconUri=new Observable(a.gcxMapService.iconUri);e.serviceLayer=a;e.items=new ObservableCollection([]);this._setTooltips(e);return e};c.prototype._generateItemCloneForFilter=function(a){var b={};b.name=a.name;b.isFolder=a.isFolder;
b.isExpanded=a.isExpanded;b.iconUri=a.iconUri;b.itemType=a.itemType;b.expanderTooltip=a.expanderTooltip;b.stateToggleTooltip=a.stateToggleTooltip;b.iconTooltip=a.iconTooltip;b.isEnabled=new Observable(true);if(a.serviceLayer!=void 0)b.serviceLayer=a.serviceLayer;b.items=new ObservableCollection;return b};c.prototype._setTooltips=function(a){var b=this.appInfo.gcxApp.getResource(this._infrastructureLibraryId,"language-layerselector-item-expand").format(a.name.get()),c=this.appInfo.gcxApp.getResource(this._infrastructureLibraryId,
"language-layerselector-state-toggle").format(a.name.get()),e=this.appInfo.gcxApp.getResource(this._infrastructureLibraryId,"language-layerselector-icon-tooltip").format(a.name.get());a.expanderTooltip=new Observable(b);a.stateToggleTooltip=new Observable(c);a.iconTooltip=new Observable(e)};return c}();h.LayerSelector=f})(d.layerSelector||(d.layerSelector={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||
(geocortex={}));(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){return function(c,a,b,i,e,d,l){this.text=c;this.imageUri=a;this.userClosedCallback=b;this.imageClass=i;this.id=e;this.timeoutMS=d||3E4;this.showBusyIcon=!!l}}();d.AddStatusArgs=f})(d.commandArgs||(d.commandArgs={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){var f=function(){function c(a,b,c,e){this.title=null;this.destroyContentView=false;this.delay=0;this.elementID=a||null;this.mapPoint=b||null;this.content=c||null;this.title=e||null}c.prototype.getNode=function(){if(this.content){if(this.contentIsView())return this.content.root;if(this.content.nodeName)return this.content;if(typeof this.content==="string"){var a=dojo.create("div");$(a).html(this.content);return a}}return null};c.prototype.getTitleNode=
function(){if(this.title){if(this.titleIsView())return this.title.root;if(this.title.nodeName)return this.title;if(typeof this.title==="string"){var a=dojo.create("div");$(a).html(this.title);return a}}return null};c.prototype.contentIsView=function(){return this.content&&this.content instanceof d.framework.ui.ViewBase};c.prototype.titleIsView=function(){return this.title&&this.title instanceof d.framework.ui.ViewBase};return c}();h.ShowMapElementArgs=f})(g.commandArgs||(g.commandArgs={}))})(g.infrastructure||
(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));geocortex.essentialsHtmlViewer.mapping.infrastructure.ShowMapElementArgs=geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.ShowMapElementArgs;
(function(d){(function(d){(function(d){(function(g){var h=function(){function c(){}c.DD="dd";c.DDM="ddm";c.DMS="dms";return c}();g.AngleFormat=h;var f=function(){function c(){}c.POLAR="polar";c.NORTH_AZIMUTH="north_azimuth";c.SOUTH_AZIMUTH="south_azimuth";return c}();g.AngleDirectionSystem=f;f=function(){function c(){}c.formatAngle=function(a,b,i,e){if(e==null||typeof e==="undefined")e=4;if(!b)b=h.DD;b=b.toLowerCase();switch(b){case h.DDM:return c._formatAngleAsDdm(a,i,e);case h.DMS:return c._formatAngleAsDms(a,
i,e);default:return c._formatAngleAsDd(a,i,e)}};c.formatLatLon=function(a,b,i,e,d){var l=null,f=null,l=a>0?c._getResource(e,"north-abbrev"):c._getResource(e,"south-abbrev"),f=b>0?c._getResource(e,"east-abbrev"):c._getResource(e,"west-abbrev");return{latitude:"{0} {1}".format(c.formatAngle(Math.abs(a),i,e,d),l),longitude:"{0} {1}".format(c.formatAngle(Math.abs(b),i,e,d),f)}};c.formatXYCoordinate=function(a,b,c){if(c==null||typeof c==="undefined")c=4;return d.infrastructure.FormatUtils.formatNumber(a,
b.locale,c)};c.formatBearing=function(a,b,i,e){if(a===0)return c._getResource(i,"north-abbrev");else if(a===90)return c._getResource(i,"east-abbrev");else if(a===180)return c._getResource(i,"south-abbrev");else if(a===270)return c._getResource(i,"west-abbrev");var d=c._getResource(i,"north-abbrev"),l=c._getResource(i,"east-abbrev");a>=90&&a<180?(d=c._getResource(i,"south-abbrev"),a=180-a):a>=180&&a<270?(d=c._getResource(i,"south-abbrev"),l=c._getResource(i,"west-abbrev"),a-=180):a>=270&&a<360&&(l=
c._getResource(i,"west-abbrev"),a=360-a);return"{0} {1} {2}".format(d,c.formatAngle(a,b,i,e),l)};c._formatAngleAsDd=function(a,b,i){return"{0}{1}".format(d.infrastructure.FormatUtils.formatNumber(a,b.locale,i),c._getResource(b,"degrees"))};c._formatAngleAsDms=function(a,b,i){var e=Math.floor(Math.abs(a)),j=Math.floor((Math.abs(a)-e)*60),l=(Math.abs(a)-e-j/60)*3600;return"{0}{1} {2}{3} {4}{5}".format(e*c._sign(a),c._getResource(b,"degrees"),j,c._getResource(b,"minutes"),d.infrastructure.FormatUtils.formatNumber(l,
b.locale,i),c._getResource(b,"seconds"))};c._formatAngleAsDdm=function(a,b,i){var e=Math.floor(Math.abs(a)),j=(Math.abs(a)-e)*60;return"{0}{1} {2}{3}".format(e*c._sign(a),c._getResource(b,"degrees"),d.infrastructure.FormatUtils.formatNumber(j,b.locale,i),c._getResource(b,"minutes"))};c._sign=function(a){return typeof a!=="number"?NaN:a>0?1:a<0?-1:a};c._getResource=function(a,b){return a.getResource("Mapping.Infrastructure","language-coordinates-"+b)};return c}();g.CoordinateUtils=f})(d.infrastructure||
(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){return function(){this.token=this.username=this.result=null}}();d.AuthenticationEventArgs=f})(d.eventArgs||(d.eventArgs={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
geocortex.essentialsHtmlViewer.mapping.infrastructure.AuthenticationEventArgs=geocortex.essentialsHtmlViewer.mapping.infrastructure.eventArgs.AuthenticationEventArgs;
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){return function(){this.accuracyThreshold=this.typeOfGeolocation=this.location=this.projectedMapPoint=this.mapPoint=null;this.timedOut=false}}();d.GeolocationEventArgs=f})(d.eventArgs||(d.eventArgs={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){return function(){this.currentResolution=this.currentScale=this.centerLatLon=null}}();d.MapExtentEventArgs=f})(d.eventArgs||(d.eventArgs={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){return function(){this.isCancelled=false}}();d.UserEventArgs=f})(d.eventArgs||(d.eventArgs={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){var h=function(f){function c(a,b){f.call(this,a,b)}__extends(c,f);c.prototype.descriptionGet=function(a){var b=this.contentField=="description"?a.descriptionFormat.get():a.longDescriptionFormat.get(),b=this.cleansedFormatForFormat(b);return a.formatTemplateString(b)};c.prototype.descriptionApply=function(a,b){var c=this,e=this.contentField=="description"?a.descriptionFormat.get():a.longDescriptionFormat.get();if((e=this.cleansedFormatForFormat(e))&&
a.hasRelationships){var d=e.match(/{{.[^}]+?\..+?}}|{.[^}]+?\..+?}/g),l=[],f;for(f in d)if(d.hasOwnProperty(f)){var h=d[f],h=h.substr(1,h.length-2);l.push(h.match(/[^.].[^.]*/g))}for(f in a.layer.relationships)a.layer.relationships.hasOwnProperty(f)&&(h=a.layer.relationships[f],(l.toString().indexOf(h.name)!=-1||l.toString().indexOf(h.displayName)!=-1)&&this.app.command("GetRelatedFeatures").execute({mapService:a.layer.mapService,relationshipId:h.id,objectId:a.id.get(),successCallback:function(c){for(var i in l)if(l.hasOwnProperty(i)){var f=
l[i];for(i in d)if(d.hasOwnProperty(i)){var h=d[i];if(h.indexOf(f[0])!=-1&&h.indexOf(f[1])!=-1)e=e.replace(h,c[0].attributes[f[1]]),b.innerHTML=a.formatTemplateString(e)}}},errorCallback:function(b){c.app.trace.warning("There was an error retrieving related features: "+b)}}))}b.innerHTML=a.formatTemplateString(e)};c.prototype.cleansedFormatForFormat=function(a){var b=this;if(a===null)return null;if(a in this._descFormats)return this._descFormats[a];else{var c=/(<a.*?href\s*?=\s*?")(command:.+?)(".*?)(\/?>)/,
e=a.replace(/<a[^>]*(\/?>)/g,function(a){var e=a.match(c);return e?'<a _key="'+b.keyForUri(e[2])+'" href="javascript:void(0)" data-binding="{{@event-onclick: handleHyperlinkClick}}{{@event-mouseup: ignoreEvent}}{{@event-mousedown: ignoreEvent}}"'+e[4]:a});return this._descFormats[a]=e}};c.prototype.keyForUri=function(a){var b=dojo.indexOf(this._uris,a);if(!(b>=0))b=this._uris.length,this._uris.push(a);return b};c.prototype.parseArguments=function(a,b,c){var e={};if(b==="none")return null;else if(b===
"string")return this.tryPerformTokenSubstitution(a,c,e)?[e.value]:[a];else if(b==="list"){var d;try{d=JSON.parse(a)}catch(l){d=a.split("&")}for(var f=0;f<d.length;f++)if(this.tryPerformTokenSubstitution(d[f],c,e))d[f]=e.value;return d}else{try{f=JSON.parse(a)}catch(h){if(a.indexOf("=")<0){if(this.tryPerformTokenSubstitution(a,c,e))return[e.value];this.app.trace.warning("The specified parameter could not be parsed to a valid Object in JSON or Query String format.");return[null]}f=dojo.queryToObject(a)}for(var g in f)if(f.hasOwnProperty(g)&&
typeof f[g]!=="function"&&this.tryPerformTokenSubstitution(f[g],c,e))f[g]=e.value;c=null;b!=="object"&&(b=dojo.getObject(b)(),c=f,f=dojo.safeMixin(b,f));if(c&&f.spatialReference&&!c.spatialReference)f.spatialReference=null;return[f]}};c.prototype.tryPerformTokenSubstitution=function(a,b,c){var e=this;if(a===null||b===null)c.value=null;else if(a==="{$Feature}")return c.value=b,true;else if(a==="{$Graphic}")return c.value=b.esriFeature.get(),true;else if(a==="{$Geometry}")return c.value=b.esriFeature.get().geometry,
true;else if(typeof a==="string"){var d=false,a=a.replace(/{.+?}/g,function(a){d=true;var a=a.substring(1,a.length-1),c=b.esriFeature.get().attributes[a];return c?c:(e.app.trace.warning("The token syntax {{0}} was detected, but could not be matched to a valid replacement.".format(a)),"")});c.value=a;return d}return false};c.prototype.decodeHtmlQuotes=function(a){a=a.replace(/&quot;/g,'"');return a=a.replace(/&39;/g,"'")};c.prototype.decodeHtmlAmpersands=function(a){return a=a.replace(/&amp;/g,"&")};
c.prototype.handleHyperlinkClick=function(a,b,c){if(a=this._uris[b.getAttribute("_key")])a=new dojo._Url(a),a.scheme==="command"&&this.runCommand(a.path,a.query,c);return false};c.prototype.ignoreEvent=function(){return false};c.prototype.runCommand=function(a,b,c){var e=this.app.command(a),j=d.essentialsHtmlViewer.Commands.metadataForCommandName(a);j===null?this.app.trace.warning('The specified command "{0}" has no associated metadata.'.format(a)):j.isHyperlinkable?(a=[],b&&(b=this.decodeHtmlQuotes(b),
b=this.decodeHtmlAmpersands(b),a=this.parseArguments(b,j.arguments,c)),e.execute.apply(e,a)):this.app.trace.warning('The specified command "{0}" is not able to be hyperlinked.'.format(a))};return c}(d.framework.ui.ViewBase);g.FeatureDescriptionPresenterView=h;h.prototype._uris=[];h.prototype._descFormats={};h.prototype.contentField=null})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){function f(c){c&&d.framework.ui.animation.runWhenIdle(function(){try{c.focus()}catch(a){}})}h.focusOnFirstInput=function(c){if(c&&c.root&&(!c.app||!c.app.modalRegionSingleton||!(c.app.modalRegionSingleton.isActive&&c.id!=="ModalViewContainerView")))try{for(var a=$(c.root).find("input, a, button, select, textarea, [tabindex]").not(".inactive, .bound-invisible, .disabled, .close-16, .back-16, [tabindex=-1]"),b=0;b<a.length;b++){var d=
a[b];if(!($(d).parentsUntil(c.root,".inactive, .bound-invisible, .disabled, .invisible, .hidden-hoisted-menu").length>=1)){$.inArray(d.tagName.toLowerCase(),["select","input","textarea"])!==-1?(d.setAttribute("readonly","true"),f(d),$(document).trigger("keypress.focus-control mousedown.focus-control touchstart.focus-control"),$(document).one("keypress.focus-control mousedown.focus-control touchstart.focus-control",function(b){d.removeAttribute("readonly");if((b.target||b.srcElement)!==d)d.blur();
else{d.blur();f(d);var a=d.getAttribute("type");a&&a.toLowerCase&&(a=a.toLowerCase());(a==="text"||a==="textarea")&&b.type==="keypress"&&b.keyCode!=0&&$(d).val($(d).val()+String.fromCharCode(b.keyCode))}$(document).off("keypress.focus-control mousedown.focus-control touchstart.focus-control")})):f(d);break}}}catch(e){c.app&&c.app.trace.debug("Could not focus: "+e)}};h.focusOnMap=function(c){if(c){var a=function(b){b=b.root;$(b).find("svg").attr("focusable","false");b.tabIndex=0;f(b)};if(c.loaded)a(c);
else var b=c.on("load",function(c){b.remove();a(c.map)})}};h.focus=f})(g.FocusUtils||(g.FocusUtils={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){function f(b,a){if(a&&b&&b.name)if(b.name.indexOf(".Name()",b.name.length-7)!==-1)return true;else if(a.getFieldByName(b.name+".Name()"))return true;return false}function c(b,c,e,d,i,j,f,l){i===void 0&&(i=false);l===void 0&&(l="Mapping");var h=[],g=[],k=0,n={},q=function(){for(var b=0;b<h.length;b++)if(h[b].visible)if(i&&!h[b].hasOwnProperty("measurementId"))h.splice(b,1);else{var a=h[b].getLayer();a&&a.remove(h[b])}else h.splice(b,
1)};if(!b||!c||!c.length||!e)e?e.trace.error("Error deleting markup. Required parameters missing."):console.log("Error deleting markup. Required parameters missing."),d&&d(h);else{for(var o=0;o<c.length;o++){var z=e.map.getLayer(c[o]);z&&g.push(z)}if(g.length){for(c=0;c<g.length;c++)(o=a(b,g[c],e))&&o.length&&(h=h.concat(o));for(b=0;b<h.length;b++)if(g=h[b],g.visible&&(g.hasOwnProperty("measurementId")?n.hasOwnProperty(g.measurementId)||(n[g.measurementId]=true,k++):i||k++),k>1)break;k===0?d&&d(h):
k===1||!j?(q(),d&&d(h)):(j=e.getResource(l,j),f=f?e.getResource(l,f):null,e.command("Confirm").execute(j,f,function(b){b?q():h=[];d&&d(h)}))}else e.trace.error("Error deleting markup. No graphics layer(s) found."),d&&d(h)}}function a(a,c,d){var j=null,f=[];if(!a||!c||!d)return d?d.trace.error("Error retrieving markup. Required parameters missing."):console.log("Error retrieving markup. Required parameters missing."),f;if(!c.graphics.length)return f;a.type=="point"?j=i(a,6,d).getExtent():a.type=="polyline"?
j=a.getExtent():a.type=="polygon"&&(j=a.getExtent());if(j==null)return d.trace.error("Error retrieving markup. Could not compute extent."),f;for(a=0;a<c.graphics.length;a++)if(j.intersects(c.graphics[a].geometry))f.push(c.graphics[a]);else if(c.graphics[a].symbol instanceof esri.symbol.SimpleMarkerSymbol)if(c.graphics[a].geometry instanceof esri.geometry.Point){var l=i(c.graphics[a].geometry,c.graphics[a].symbol.size,d);j.intersects(l)&&f.push(c.graphics[a])}else{if(c.graphics[a].geometry instanceof
esri.geometry.Multipoint)for(var l=c.graphics[a].symbol,h=c.graphics[a].geometry,g=0;g<h.points.length;g++){var k=new esri.geometry.Point(h.points[g],h.spatialReference);if(j.intersects(i(k,l.size,d))){f.push(c.graphics[a]);break}}}else if(c.graphics[a].symbol instanceof esri.symbol.TextSymbol){var h=l=c.graphics[a].symbol,g=d.map.toScreen(c.graphics[a].geometry),n=e(h.text,h.font.family,h.font.size,h.font.weight),k=n.height,n=n.width;g.x+=h.xoffset;g.y-=h.yoffset;switch(h.align){case esri.symbol.TextSymbol.ALIGN_START:var r=
new esri.geometry.Point(g.x,g.y-k,null),s=new esri.geometry.Point(g.x+n,g.y-k,null),q=new esri.geometry.Point(g.x,g.y,null),o=new esri.geometry.Point(g.x+n,g.y,null);break;case esri.symbol.TextSymbol.ALIGN_MIDDLE:r=new esri.geometry.Point(g.x-n/2,g.y-k,null);s=new esri.geometry.Point(g.x+n/2,g.y-k,null);q=new esri.geometry.Point(g.x-n/2,g.y,null);o=new esri.geometry.Point(g.x+n/2,g.y,null);break;case esri.symbol.TextSymbol.ALIGN_END:r=new esri.geometry.Point(g.x-n,g.y-k,null),s=new esri.geometry.Point(g.x,
g.y-k,null),q=new esri.geometry.Point(g.x-n,g.y,null),o=new esri.geometry.Point(g.x,g.y,null)}r=d.map.toMap(r);s=d.map.toMap(s);q=d.map.toMap(q);o=d.map.toMap(o);h=new esri.geometry.Polygon({rings:[[[r.x,r.y],[s.x,s.y],[o.x,o.y],[q.x,q.y]]],spatialReference:r.spatialReference});h=b(l.angle,c.graphics[a].geometry,h);j.intersects(h)&&f.push(c.graphics[a])}return f}function b(b,a,c){for(var c=new esri.geometry.Polygon(c.toJson()),b=(360-(b<0?360+b:b)%360)*(Math.PI/180),e=0;e<c.rings.length;e++)for(var d=
0;d<c.rings[e].length;d++){var i=c.getPoint(e,d),j=(i.x-a.x)*Math.cos(b)-(i.y-a.y)*Math.sin(b)+a.x,f=(i.x-a.x)*Math.sin(b)+(i.y-a.y)*Math.cos(b)+a.y;i.setX(j);i.setY(f);c.setPoint(e,d,i)}return c}function i(b,a,c){var b=c.map.toScreen(b),e=a/Math.sqrt(2)/2,a=new esri.geometry.Point(b.x-e,b.y-e,null),d=new esri.geometry.Point(b.x+e,b.y-e,null),i=new esri.geometry.Point(b.x-e,b.y+e,null),b=new esri.geometry.Point(b.x+e,b.y+e,null),a=c.map.toMap(a),d=c.map.toMap(d),i=c.map.toMap(i),b=c.map.toMap(b);
return new esri.geometry.Polygon({rings:[[[a.x,a.y],[d.x,d.y],[b.x,b.y],[i.x,i.y],[a.x,a.y]]],spatialReference:a.spatialReference})}function e(b,a,c,e){e===void 0&&(e="normal");var d=document.body,i=document.createElement("div"),a={fontFamily:a,fontSize:c!=void 0&&typeof c==="number"?c+"px":c,fontWeight:e,padding:"0",position:"absolute",lineHeight:"1",visibility:"hidden"},j;for(j in a)i.style[j]=a[j];i.appendChild(document.createTextNode(b));d.appendChild(i);b={width:i.clientWidth,height:i.clientHeight};
d.removeChild(i);return b}function j(b,a,c){var e=c.map.getLayer(b);if(!e&&a)e=new esri.layers.GraphicsLayer,e.id=b,c.map.addLayer(e);return e}var l={};d.sanitizeAttributeNames=function(b,a){var c=a.mapService?"{0}.{1}".format(a.mapService.id,a.id):null,e;if(c&&l[c])e=l[c];else{e={};for(var d=0;d<a.fields.length;d++){var i=a.fields[d];if(!f(i,a))e[i.alias]=i.name}c&&(l[c]=e)}var c=[],j;for(j in e)e.hasOwnProperty(j)&&b.attributes.hasOwnProperty(j)&&(b.attributes[j]==="Null"&&(b.attributes[j]=null),
d=b.attributes[j],d!==void 0&&(d={alias:j,name:e[j],value:d},d.alias!=d.name&&c.push(d)));for(e=0;e<c.length;e++)j=c[e],delete b.attributes[j.alias],b.attributes[j.name]=j.value};d._isSEPCodedDomainField=f;d.deleteMarkupSilently=function(b,a,e,d,i){i===void 0&&(i=false);c(b,a,e,d,i)};d.deleteMarkup=c;d.getMarkupFromGeometry=a;d.rotatePolygon=b;d.getPolygonFromPoint=i;d.getRenderedTextMarkupSize=e;d.addGraphicToLayer=function(b,a,c){return b?(a=j(a,true,c),a.add(b),a.visible||a.setVisibility(true),
true):false};d.getGraphicsLayer=j})(d.GraphicUtils||(d.GraphicUtils={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){d=d.essentialsHtmlViewer||(d.essentialsHtmlViewer={});d=d.mapping||(d.mapping={});d=d.infrastructure||(d.infrastructure={});d=d.undo||(d.undo={});d=d.TransactionStatus||(d.TransactionStatus={});d.PENDING="pending";d.COMMITTING="committing";d.COMMITTED="committed";d.ABORTING="aborting";d.ABORTED="aborted"})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(c){c[c.SCALE=0]="SCALE";c[c.CENTER=1]="CENTER";c[c.EXTENT=2]="EXTENT"})(d.ExtentLinkPriority||(d.ExtentLinkPriority={}));(function(c){c[c.LAYERTHEME=0]="LAYERTHEME";c[c.LAYERS=1]="LAYERS"})(d.LayerListLinkPriority||(d.LayerListLinkPriority={}));var f=function(){function c(a,b){this.generateParameter=this.acceptParameter=true;this.app=a;this.libraryId=b}c.prototype.initialize=function(){};c.prototype.generate=function(){return""};
c.prototype.apply=function(){};c.prototype.getResource=function(a,b){return this.app.getResource(this.libraryId,a,b)};return c}();d.SharingLinkProviderBase=f})(d.sharing||(d.sharing={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){var f=function(c){function a(b,a){c.call(this,b,a);this.menuTitle=new Observable("");this.menuDescription=new Observable("");this.menuItems=new ObservableCollection([]);this.visibleMenuItems=new ObservableCollection([]);this.hasExecutableMenuItems=new Observable(false);this.menuContext=new Observable(null);this.auto(this.menuContext,this,this._handleContextChanged);this.auto(this.menuItems,this,this._handleMenuItemsChanged)}__extends(a,
c);a.prototype.initialize=function(b){c.prototype.initialize.call(this,b);this.menuId=b&&b.menuId||null;this.libraryId=b&&b.libraryId||this.libraryId};a.prototype.setupMenu=function(b){var a=this;if(this.menuId=b||this.menuId)if(this.menuItems.clear(),b=this.app.menuRegistry.getMenu(this.menuId)){if(b.title&&this.menuTitle.set(b.title),b.description&&this.menuDescription.set(b.description),b.items&&b.items.length){var c=[];b.items.forEach(function(b){b=new h.MenuItemViewModel(a,b);c.push(b);a.auto(b.canExecute,
a,a._computeExecutableMenuItems)});this.menuItems.addItems(c)}}else this.app.trace.error("MenuViewModel: Could not load menu '{0}'. Menu not registered.".format(this.menuId));else this.app.trace.error("MenuViewModel: Could not load menu. Menu id not specified.")};a.prototype.onDestroy=function(){c.prototype.onDestroy.call(this);this.menuItems.get().forEach(function(b){return b.destroy()});this.menuItems.clear();this.visibleMenuItems.clear()};a.prototype._computeExecutableMenuItems=function(){for(var b=
false,a=0;a<this.menuItems.length();a++){var c=this.menuItems.getAt(a),d=this.visibleMenuItems.indexOf(c);d<0?c.canExecute.get()?(b=true,this.visibleMenuItems.insertItem(a,c)):c.menuItem.hideOnDisable||this.visibleMenuItems.insertItem(a,c):c.canExecute.get()?b=true:c.menuItem.hideOnDisable&&this.visibleMenuItems.removeAt(d)}this.hasExecutableMenuItems.set(b)};a.prototype._handleContextChanged=function(){this.menuItems.get().forEach(function(b){return b.refreshCanExecute()})};a.prototype._handleMenuItemsChanged=
function(b){if(b.type==="clear")this.visibleMenuItems.clear();else if(b.type==="append")this._computeExecutableMenuItems();else if(b.type==="remove")for(var b=b.sender.get().slice(b.rangeStart,b.rangeEnd+1),a=0;a<b.length;a++)this.visibleMenuItems.removeItem(b[a]);else b.type==="insert"&&this._computeExecutableMenuItems()};a.DefaultParameterName="context";return a}(d.framework.ui.ViewModelBase);h.MenuViewModel=f})(g.menus||(g.menus={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping=
{}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){return function(c,a){this.stateDefinition=c;this.activatedBy=a}}();d.ActiveState=f})(d.applicationState||(d.applicationState={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){function c(a,b){this.registeredStates=[];this.activeStates=[];this.previousModalState=this.modalState=null;this.commandTokens=[];this.eventTokens=[];this.app=a;this.libraryId=b;for(var c=0;c<d.definedStates.length;c++)this.registerState(d.definedStates[c])}c.prototype.registerState=function(a){var b=this;if(this.registeredStates.some(function(b){return b.name===a.name}))this.app.trace.info("States with duplicate names registered! New state ignored. Name is: "+
a.name);else if(this.registeredStates.filter(function(b){return b.hasOwnProperty("parentState")}).some(function(b){return b.name===a.parentState}))this.app.trace.info("Tried to load a state with a parent that references another state that has a parent. Only parent -> child relationships are allowed. State name: "+a.name);else{var c=dojo.connect(this.app,"onLibrariesDownloaded",this,function(){dojo.disconnect(c);if(b.app.hasLibrary(b.libraryId)&&a.description.search(" ")===-1)a.description=b.app.getResource(b.libraryId,
a.description)});a.enterCommands&&a.enterCommands.forEach(function(c){var d=b.app.command(c.name).register(b,function(d){return b._stateEntered(a,c,d)});b.commandTokens.push({instance:c,token:d})});a.exitCommands&&a.exitCommands.forEach(function(c){var d=b.app.command(c.name).register(b,function(d){return b._stateExited(a,c,d)});b.commandTokens.push({instance:c,token:d})});a.enterEvents&&a.enterEvents.forEach(function(c){var d=b.app.event(c.name).subscribe(b,function(d){return b._stateEntered(a,c,
d)});b.eventTokens.push({instance:c,token:d})});a.exitEvents&&a.exitEvents.forEach(function(c){var d=b.app.event(c.name).subscribe(b,function(d){return b._stateExited(a,c,d)});b.eventTokens.push({instance:c,token:d})});this.registeredStates.push(a);a.name==="DefaultState"&&this.activeStates.push(new d.ActiveState(a))}};c.prototype.onDestroy=function(){for(var a=0;a<this.eventTokens.length;a++)this.app.event(this.eventTokens[a].instance.name).unsubscribe(this.eventTokens[a].token);for(a=0;a<this.commandTokens.length;a++)this.app.command(this.commandTokens[a].instance.name).unregister(this.commandTokens[a].token)};
c.prototype.getActiveStates=function(){for(var a=[],b=0;b<this.activeStates.length;b++)a[this.activeStates[b].stateDefinition.name]=this.activeStates[b];return this.activeStates.filter(function(b){return b.stateDefinition.parentState&&a[b.stateDefinition.parentState]||!b.stateDefinition.parentState})};c.prototype.getStateByName=function(a){for(var b=0;b<this.registeredStates.length;b++)if(this.registeredStates[b].name===a)return this.registeredStates[b];return null};c.prototype.getModalState=function(){return this.modalState||
null};c.prototype.isModalStateActive=function(){return this.modalState!==null};c.prototype.isCurrentlyActive=function(a){return this.activeStates.some(function(b){return b.stateDefinition.name===a})};c.prototype.getAllStateNames=function(){for(var a=[],b=0;b<this.registeredStates.length;b++)a.push(this.registeredStates[b].name);return a};c.prototype._stateEntered=function(a,b,c){if((!a.parentState||this.activeStates.some(function(b){return b.stateDefinition.name===a.parentState}))&&!this.isCurrentlyActive(a.name)&&
!(b.parameter&&b.parameter!==c)){var e=null;if(typeof c==="string"||c instanceof String)e=c;this.app.trace.debug("State entered: "+a.name);if(a.isModal){if(this.modalState!==null)this.previousModalState=this.modalState,this._exitState(this.modalState,b,e);this.app.trace.debug("Modal State entered: "+a.name);this.modalState=a}this.activeStates.push(new d.ActiveState(a,b));this.app.event("StateEnteredEvent").publish({stateDefinition:a,activeStates:this.activeStates,modalState:this.modalState,previousModalState:this.modalState})}};
c.prototype._stateExited=function(a,b,c){if(!(b.parameter&&b.parameter!==c)){for(var e=false,d=0;d<this.activeStates.length;d++)this.activeStates[d].stateDefinition===a&&(e=true);d=false;a.parentState&&(d=this.activeStates.some(function(b){return b.stateDefinition.name===a.parentState}));if(e&&(!a.parentState||d)){e=null;if(typeof c==="string"||c instanceof String)e=c;this._exitState(a,b,e)}}};c.prototype._exitState=function(a,b,c){this._exitChildStates(a,b,c);for(b=this.activeStates.length-1;b>=
0;b--)this.activeStates[b].stateDefinition===a&&(this.activeStates.splice(b,1),this.app.trace.debug("State exited: "+a.name));if(this.modalState===a)this.modalState=null,this.previousModalState=a,this.app.trace.debug("Modal state exited: "+a.name);this.app.event("StateExitedEvent").publish({stateDefinition:a,activeStates:this.activeStates,modalState:this.modalState,previousModalState:this.previousModalState})};c.prototype._exitChildStates=function(a,b,c){for(var e=[],d=0;d<this.activeStates.length;d++)if(this.activeStates[d].stateDefinition.parentState===
a.name){var f=this.activeStates[d].stateDefinition;if(f.exitCommands)for(var h=0;h<f.exitCommands.length;h++)f.exitCommands[h].name===b.name&&(!f.exitCommands[h].parameter||f.exitCommands[h].parameter===c)&&e.push(f);if(f.exitEvents)for(h=0;h<f.exitEvents.length;h++)f.exitEvents[h].name===b.name&&(!f.exitEvents[h].parameter||f.exitEvents[h].parameter===c)&&e.push(f)}for(d=0;d<e.length;d++)this._exitState(e[d],b,c)};return c}();d.StateManager=f})(d.applicationState||(d.applicationState={}))})(d.infrastructure||
(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){d=d.essentialsHtmlViewer||(d.essentialsHtmlViewer={});d=d.mapping||(d.mapping={});d=d.infrastructure||(d.infrastructure={});(d.applicationState||(d.applicationState={})).definedStates=[{name:"DefaultState",description:"language-states-default-description",isModal:false},{name:"TransientActiveState",description:"language-states-transient-active-description",isModal:false,enterEvents:[{name:"TransientActivatedEvent"}],exitEvents:[{name:"TransientsDeactivatedEvent"}]},{name:"IdentifyState",
description:"language-states-identify-state-description",isModal:false,enterCommands:[{name:"SetActiveTool",parameter:"PointIdentifyTool-Navigation"},{name:"SetActiveTool",parameter:"IdentifyRectangleTool"},{name:"SetActiveTool",parameter:"RectangleIdentifyTool"}],exitEvents:[{name:"ToolCommandDeactivatedEvent",parameter:"Identify"}]},{name:"IdentifyBufferingState",parentState:"IdentifyState",description:"language-states-buffering-description",isModal:false,enterEvents:[{name:"BufferingActivatedEvent",
parameter:"Identify"}],exitEvents:[{name:"BufferingDeactivatedEvent",parameter:"Identify"}]},{name:"SnappingState",description:"language-states-snapping-description",isModal:false,enterCommands:[{name:"ActivateSnapping"}],exitCommands:[{name:"DeactivateSnapping"}]},{name:"FindDataState",description:"language-states-identify-state-description",isModal:true,enterEvents:[{name:"ToolCommandActivatedEvent",parameter:"Identify"}],exitEvents:[{name:"ToolCommandDeactivatedEvent",parameter:"Identify"}]},{name:"FindDataBufferingState",
parentState:"FindDataState",description:"language-states-buffering-description",isModal:false,enterEvents:[{name:"BufferingActivatedEvent",parameter:"Identify"}],exitEvents:[{name:"BufferingDeactivatedEvent",parameter:"Identify"}]},{name:"DrawMarkupState",description:"language-states-draw-markup-state-description",isModal:true,enterEvents:[{name:"ToolCommandActivatedEvent",parameter:"AddMarkup"},{name:"ToolCommandActivatedEvent",parameter:"AddTextMarkup"}],exitEvents:[{name:"ToolCommandDeactivatedEvent",
parameter:"AddMarkup"},{name:"ToolCommandDeactivatedEvent",parameter:"AddTextMarkup"}]},{name:"MeasureState",description:"language-states-measure-state-description",isModal:true,enterEvents:[{name:"ToolCommandActivatedEvent",parameter:"MeasureDistance"},{name:"ToolCommandActivatedEvent",parameter:"MeasureArea"}],exitEvents:[{name:"ToolCommandDeactivatedEvent",parameter:"MeasureDistance"},{name:"ToolCommandDeactivatedEvent",parameter:"MeasureArea"}]},{name:"SelectMarkupForEditingState",description:"language-states-edit-state-description",
isModal:true,enterEvents:[{name:"ToolCommandActivatedEvent",parameter:"DeleteMeasurement"},{name:"ToolCommandActivatedEvent",parameter:"DeleteMarkup"},{name:"ToolCommandActivatedEvent",parameter:"EditMarkup"}],exitEvents:[{name:"ToolCommandDeactivatedEvent",parameter:"DeleteMeasurement"},{name:"ToolCommandDeactivatedEvent",parameter:"DeleteMarkup"},{name:"ToolCommandDeactivatedEvent",parameter:"EditMarkup"}]},{name:"EditorActiveState",description:"language-states-editing-active-state-description",
isModal:false,enterCommands:[{name:"StartEditingFeature"},{name:"StartEditingNewFeature"},{name:"StartEditingNewRelatedRecord"}],exitEvents:[{name:"EditorClosedEvent"}]},{name:"EditingMarkupState",description:"language-states-editing-state-description",isModal:false,enterEvents:[{name:"MarkupEditingStartedEvent"}],exitEvents:[{name:"MarkupEditingStoppedEvent"}]},{name:"EditingMeasurementMarkupState",description:"language-states-editing-state-description",isModal:false,enterEvents:[{name:"MeasurementEditingStartedEvent"}],
exitEvents:[{name:"MarkupEditingStoppedEvent"}]},{name:"FeaturePlacementState",description:"language-states-feature-editing-state-description",isModal:true,enterEvents:[{name:"StartFeaturePlacementEvent"},{name:"ToolCommandActivatedEvent",parameter:"SetEditorFeatureGeometry"}],exitEvents:[{name:"StopFeaturePlacementEvent"},{name:"ToolCommandDeactivatedEvent",parameter:"SetEditorFeatureGeometry"}]},{name:"FeaturePlacementGraphicState",parentState:"FeaturePlacementState",description:"language-states-feature-editing-state-graphic-description",
isModal:false,enterCommands:[{name:"StartEditingGraphicGeometry"}],enterEvents:[{name:"ToolCommandActivatedEvent",parameter:"SetEditorFeatureGeometry"}],exitEvents:[{name:"StopFeaturePlacementEvent"},{name:"ToolCommandDeactivatedEvent",parameter:"SetEditorFeatureGeometry"}]},{name:"FeaturePlacementPointGraphicState",parentState:"FeaturePlacementState",description:"language-states-feature-editing-state-point-graphic-description",isModal:false,enterEvents:[{name:"GeometryEditPointActivatedEvent"}],
exitEvents:[{name:"StopFeaturePlacementEvent"},{name:"ToolCommandDeactivatedEvent",parameter:"SetEditorFeatureGeometry"}]}]})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){function f(b,a){if(!b)return null;a&&a.serviceToken&&!/.*token=.*/.test(b)&&(b+=b.indexOf("?")>-1?"&token=":"?token=",b+=encodeURIComponent(a.serviceToken));return b}function c(b){return!b?false:!b.identifiable||!b.supportsIdentify?false:true}function a(b){return!b?false:!b.queryable||!b.supportsQuery?false:true}function b(b){if(!b||!b.serviceLayer)return false;if(b.mapServiceType===d.essentials.MapServiceType.WMS){for(var c=0;c<b.layers.length;c++)if(a(b.layers[c]))return true;
return false}b=b.serviceLayer;return!b.capabilities?false:b.version<10?true:b.capabilities&&b.capabilities.indexOf("Query")>=0}var i=function(){return function(){}}();h.getQueryTaskUrl=function(a,c){var l=null,h=null;a instanceof d.essentials.Layer?(l=a,c=l.mapService):a instanceof esri.layers.Layer&&(h=a);if(h instanceof esri.layers.FeatureLayer&&h.type==="table"||h instanceof esri.layers.FeatureLayer&&!c)return h.url;if(!b(c))return null;var g=null;if(c.serviceLayer instanceof esri.layers.WMSLayer){if(!l)return console.log("### TRIED TO PERFORM WMS QUERY WITHOUT HAVING GEOCORTEX LAYER"),
null;g=l.url}else if(l)g=l.mapService.serviceLayer.url;else if(h)g=h.url;var k,n=null;if(l)if(l.isDynamic)if(k="dynamicLayer",n=null,(h=l.mapService.getDynamicLayerInfoById(a.id))&&h.source&&(h.source instanceof esri.layers.LayerDataSource||h.source instanceof esri.layers.LayerMapSource)){n=new i;n.source=h.source.toJson();if(h.id)n.id=h.id;if(l=l.getDefinitionExpression(l.mapService.serviceLayer))n.definitionExpression=l}else throw Error("A dynamic layer must have a DataSource!");else k=l.id;else if(h)k=
h.id;!(c.serviceLayer instanceof esri.layers.FeatureLayer)&&!g.match(/\/\d+(\?.*)?$/)&&(l=g.indexOf("?"),h=g.indexOf("#"),l!=-1?g=g.substring(0,l)+"/"+k+g.substring(l):h!=-1?g=g.substring(0,h)+"/"+k+g.substring(h):g+="/"+k);g=f(g,c);n&&(g+=g.indexOf("?")>-1?"&layer=":"?layer=",g+=encodeURIComponent(JSON.stringify(n)));return g};h.getIdentifyTaskUrl=function(a){if(!a||!a.serviceUrl)return null;if(a.mapServiceType===d.essentials.MapServiceType.WMS){for(var i=0;i<a.layers.length;i++)if(c(a.layers[i]))return f(a.url,
a);return null}return!b(a)?null:a instanceof d.essentials.FeatureLayerService?a.serviceUrl.substring(0,a.serviceUrl.lastIndexOf("/")).replace(/FeatureServer$/i,"MapServer"):a.mapServiceType==d.essentials.MapServiceType.DYNAMIC||a.mapServiceType==d.essentials.MapServiceType.TILED?f(a.serviceUrl,a):null};h.getTokenizedUrl=f;h.canIdentifyLayer=c;h.canQueryLayer=a;h.canQueryMapService=b})(g.taskUtils||(g.taskUtils={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(h){(function(c){c[c.TOGGLE_BUTTON_OFF=0]="TOGGLE_BUTTON_OFF";c[c.TOGGLE_BUTTON_ON=1]="TOGGLE_BUTTON_ON"})(h.ToggleButtonState||(h.ToggleButtonState={}));var f=function(c){function a(b,a,e){var j=this;c.call(this,b,a,e);this.state=new Observable(null);this.toggleButtonEntry=e;this.toggleOnCommand=new d.CommandViewModel(this.app,a,e.toggleOn.command,e.toggleOn.commandParameter);this.toggleOffCommand=new d.CommandViewModel(this.app,a,e.toggleOff.command,
e.toggleOff.commandParameter);this.isToggledOn=new Observable(false);this.iconUri=new Observable(null);this.state.bind(this,function(b){return j.setState(b)});this.toggleButtonEntry.toggleStateName&&this.toggleButtonEntry.toggleStateName!==""?(this.app.event("StateEnteredEvent").subscribe(this,function(b){b.stateDefinition.name===j.toggleButtonEntry.toggleStateName&&j.state.set(1);j.isToggledOn.get()&&b.stateDefinition.name==="TransientActiveState"&&j.activeTransient.set(true)}),this.app.event("StateExitedEvent").subscribe(this,
function(b){b.stateDefinition.name===j.toggleButtonEntry.toggleStateName&&j.state.set(0);b.stateDefinition.name==="TransientActiveState"&&j.activeTransient.set(false)})):this._setUpBindings();if(!this.app.site||!this.app.site.isInitialized)this.app.event("SiteInitializedEvent").once(this,function(){j.toggleOffCommand.commandName&&j.app.command(j.toggleOffCommand.commandName).raiseCanExecuteChanged();j.toggleOnCommand.commandName&&j.app.command(j.toggleOnCommand.commandName).raiseCanExecuteChanged();
j.state.get()===0?j.disabled.set(!j.toggleOffCommand.canExecute.get()):j.disabled.set(!j.toggleOnCommand.canExecute.get())});e.toggleStateName&&this.app.stateManager.isCurrentlyActive(e.toggleStateName)?this.state.set(1):this.state.set(0)}__extends(a,c);a.prototype.execute=function(){this.command&&this.command.commandName&&(this.command.commandParameter?this.app.commandRegistry.command(this.command.commandName).execute(this.command.commandParameter):this.app.commandRegistry.command(this.command.commandName).execute())};
a.prototype.setState=function(b){if(b===0)var a=this.toggleButtonEntry.toggleOn.name||this.toggleButtonEntry.name||"",c=this.toggleButtonEntry.toggleOn.iconUri||this.toggleButtonEntry.iconUri||null,d=this.toggleButtonEntry.toggleOn.tooltip||this.toggleButtonEntry.tooltip||null,f=this.toggleButtonEntry.toggleOn.hideOnDisable!=void 0?!!this.toggleButtonEntry.toggleOn.hideOnDisable:!!this.toggleButtonEntry.hideOnDisable,h=false;else a=this.toggleButtonEntry.toggleOff.name||this.toggleButtonEntry.name||
"",c=this.toggleButtonEntry.toggleOff.iconUri||this.toggleButtonEntry.iconUri||null,d=this.toggleButtonEntry.toggleOff.tooltip||this.toggleButtonEntry.tooltip||null,f=this.toggleButtonEntry.toggleOff.hideOnDisable!=void 0?!!this.toggleButtonEntry.toggleOff.hideOnDisable:!!this.toggleButtonEntry.hideOnDisable,h=true;this.name.set(a);this.isToggledOn.set(h);this.iconUri.set(c);this.tooltip.set(d);this.command=b===0?this.toggleOnCommand:this.toggleOffCommand;this.disabled.set(!this.command.canExecute.get());
this.hideOnDisable.set(f);this.setHidden();this.app.event("ToggleButtonStateChangedEvent").publish({toggleButtonEntry:this.toggleButtonEntry,state:b})};a.prototype.onDestroy=function(){this._disconnectBindings()};a.prototype._setUpBindings=function(){var b=this;this._toggleOnCommandCanExecuteBindingToken=this.toggleOnCommand.canExecute.bind(this,function(a){return b._handleCommandCanExecuteChanged(b.toggleOnCommand,a)});this._toggleOnCommandPostExecSubscriptionToken=this.app.command(this.toggleButtonEntry.toggleOn.command).postExecute.subscribe(this,
this._handleToggleOnCommandPostExecute);this._toggleOffCommandCanExecuteBindingToken=this.toggleOffCommand.canExecute.bind(this,function(a){return b._handleCommandCanExecuteChanged(b.toggleOffCommand,a)});this._toggleOffCommandPostExecSubscriptionToken=this.app.command(this.toggleButtonEntry.toggleOff.command).postExecute.subscribe(this,this._handleToggleOffCommandPostExecute)};a.prototype._disconnectBindings=function(){this.toggleOnCommand.canExecute.unbind(this._toggleOnCommandCanExecuteBindingToken);
this.app.command(this.toggleButtonEntry.toggleOn.command).postExecute.unsubscribe(this._toggleOnCommandPostExecSubscriptionToken);this.toggleOffCommand.canExecute.unbind(this._toggleOffCommandCanExecuteBindingToken);this.app.command(this.toggleButtonEntry.toggleOff.command).postExecute.unsubscribe(this._toggleOffCommandPostExecSubscriptionToken)};a.prototype._handleToggleOnCommandPostExecute=function(b){b&&this.command.commandParameter!==b||this.state.get()!==1&&this.state.set(1)};a.prototype._handleToggleOffCommandPostExecute=
function(b){b&&this.command.commandParameter!==b||this.state.get()!==0&&this.state.set(0)};a.prototype._handleCommandCanExecuteChanged=function(b,a){this.command===b&&(this.disabled.set(!a),this.setHidden())};return a}(h.ToolbarGroupItemBase);h.ToolbarToggleButton=f})(d.toolbarGroup||(d.toolbarGroup={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){var f=function(c){function a(b,a,e){var d=this;c.call(this,b,a,e);e.layout&&e.layout.toLowerCase()==="small"&&this.hasSmallLayout.set(true);this.items=new ObservableCollection;for(b=0;b<e.items.length;b++)(a=this.getToolbarItemType(e.items[b]))&&this.items.addItem(a);this.disabled.set(this.areAllHidden(this.items));this.setHidden();this.disabled.bind(this,function(){d.setHidden()})}__extends(a,c);a.prototype.getToolbarItemType=function(b){if(b.type==
"button")return new d.essentialsHtmlViewer.mapping.infrastructure.toolbarGroup.ToolbarButton(this.app,this.libraryId,b);else if(b.type=="toggleButton")return new d.essentialsHtmlViewer.mapping.infrastructure.toolbarGroup.ToolbarToggleButton(this.app,this.libraryId,b);else if(b.type=="region")return new d.essentialsHtmlViewer.mapping.infrastructure.toolbarGroup.ToolbarRegion(this.app,this.libraryId,b);else if(b.type=="tool")return new d.essentialsHtmlViewer.mapping.infrastructure.toolbarGroup.ToolbarTool(this.app,
this.libraryId,b);else if(b.type=="toolbarGroup")return new d.essentialsHtmlViewer.mapping.infrastructure.toolbarGroup.ToolbarGroup(this.app,this.libraryId,b);else if(b.type=="flyout")return new d.essentialsHtmlViewer.mapping.infrastructure.toolbarGroup.ToolbarFlyout(this.app,this.libraryId,b)};return a}(h.ToolbarGroupItemBase);h.ToolbarGroup=f})(g.toolbarGroup||(g.toolbarGroup={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){var f=function(c){function a(b,a,e){var d=this;c.call(this,b,a,e);this.flyoutButtonDescription=new Observable("");this.selectedTool.set(this.items.getAt(0));this.flyoutButtonDescription.set(this.app.getResource(this.libraryId,"language-toolbar-flyout-description").format(this.name.get()));this.app.event("ActiveToolChangedEvent").subscribe(this,function(b){var a=d.items.get().filter(function(a){return d._seeIfActiveToolIsInFlyout(a,b)});
a.length>0&&d.selectedTool.set(a[0])})}__extends(a,c);a.prototype._seeIfActiveToolIsInFlyout=function(b,a){if(!(b.tool instanceof g.tools.MapTool))return false;var c=b.tool;if(a.tool instanceof g.tools.MapTool){var d=a.tool;return c.command===d.command&&c.drawMode===d.drawMode}return false};a.prototype.toggleFlyout=function(){this.toolChangeActive.set(!this.toolChangeActive.get())};a.prototype.switchActiveFlyoutTool=function(b){b.type==="tool"&&this.selectedTool.set(b);b.execute()};a.prototype.getToolbarItemType=
function(b){if(b.type=="button")return new d.essentialsHtmlViewer.mapping.infrastructure.toolbarGroup.ToolbarButton(this.app,this.libraryId,b);else if(b.type=="toggleButton")return new d.essentialsHtmlViewer.mapping.infrastructure.toolbarGroup.ToolbarToggleButton(this.app,this.libraryId,b);else if(b.type=="region")return new d.essentialsHtmlViewer.mapping.infrastructure.toolbarGroup.ToolbarRegion(this.app,this.libraryId,b);else if(b.type=="tool")return new d.essentialsHtmlViewer.mapping.infrastructure.toolbarGroup.ToolbarTool(this.app,
this.libraryId,b);else if(b.type=="toolbarGroup")return new d.essentialsHtmlViewer.mapping.infrastructure.toolbarGroup.ToolbarGroup(this.app,this.libraryId,b);return null};return a}(h.ToolbarGroup);h.ToolbarFlyout=f})(g.toolbarGroup||(g.toolbarGroup={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(g){(function(h){var f=function(c){function a(b,a,e){var j=this;c.call(this,b,a,e);this.command=new d.modules.command.CommandViewModel(this.app,void 0,e.command,e.commandParameter);this.disabled.set(!this.command.canExecute.get());this.setHidden();this.command.canExecute.bind(this,function(b){j.disabled.set(!b);j.setHidden()});this.iconUri=new Observable(e.iconUri);if(!this.app.site||!this.app.site.isInitialized)this.app.event("SiteInitializedEvent").once(this,
this._raiseCommandCanExecuteChanged)}__extends(a,c);a.prototype.execute=function(){this.command&&this.command.commandName&&(this.command.commandParameter?this.app.commandRegistry.command(this.command.commandName).execute(this.command.commandParameter):this.app.commandRegistry.command(this.command.commandName).execute());var b={commandName:this.command.commandName,commandParameter:this.command.commandParameter,id:this.id,name:this.name.get(),libraryId:this.libraryId};this.app.event("ToolbarButtonClickedEvent").publish(b)};
a.prototype._raiseCommandCanExecuteChanged=function(){this.command.commandName&&this.app.command(this.command.commandName).raiseCanExecuteChanged()};return a}(h.ToolbarGroupItemBase);h.ToolbarButton=f})(g.toolbarGroup||(g.toolbarGroup={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(c){function a(b,a,e){c.call(this,b,a,e);this.regionName=e.regionName}__extends(a,c);return a}(d.ToolbarGroupItemBase);d.ToolbarRegion=f})(d.toolbarGroup||(d.toolbarGroup={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(c){function a(b,a,e){var d=this;c.call(this,b,a,e);if(e){var b={},f;for(f in e){if(!f)break;b[f]=e[f]}b.name=e.id;var h=[];h.push(b);this.app.allLibrariesLoaded?this._initializeTool(h):(this.disabled.set(true),this.setHidden(),this.app.event("ViewerLibrariesDownloadedEvent").once(this,function(){d.disabled.set(false);d.setHidden();d._initializeTool(h)}));this.isActive.set(false);this.iconUri=new Observable(e.iconUri);
this.app.event("StateEnteredEvent").subscribe(this,function(b){d.isActive.get()&&b.stateDefinition.name==="TransientActiveState"&&d.activeTransient.set(true)});this.app.event("StateExitedEvent").subscribe(this,function(b){b.stateDefinition.name==="TransientActiveState"&&d.activeTransient.set(false)})}}__extends(a,c);a.prototype.execute=function(){this.isActive.get()||this.tool.isActive?this.app.commandRegistry.command("ClearActiveTool").execute():(!this.tool.enabled||this.tool.enabled.get())&&this.app.commandRegistry.command("SetActiveTool").execute(this.tool.id)};
a.prototype._initializeTool=function(b){var a=this;(this.tool=this.app.toolRegistry.createTools(b,true)[0])?this.tool.enabled&&(this.disabled.set(!this.tool.enabled.get()),this.setHidden(),this.tool.enabled.bind(this,function(b){a.disabled.set(!b);a.setHidden();!b&&(a.isActive.get()||a.tool.isActive)&&a.app.commandRegistry.command("ClearActiveTool").execute()})):(this.disabled.set(true),this.setHidden())};return a}(d.ToolbarGroupItemBase);d.ToolbarTool=f})(d.toolbarGroup||(d.toolbarGroup={}))})(d.infrastructure||
(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){var f=function(c){function a(b,a){c.call(this,b,a);this._drawIsActive=false;this._mapMouseDownToken=this._mapMouseHoverToken=this._inputMethodChangeHandle=this._drawEndHandlerToken=null;this._autoPanPixelTolerance=15;this._autoPanStep=1/3;this._unsupportedAutoPanDrawModes=["FREEHAND_POLYGON","FREEHAND_POLYLINE","POINT","MULTI_POINT"];this._drawEndSuspended=false}__extends(a,c);a.prototype._createDrawObject=function(){this._drawObject=
this.app.accessibilityManager.createComponent("geocortex.accessibility.draw",this.app.map);this._drawObject.setMarkerSymbol(new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,10,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color([0,0,0,0.8]),2),new esri.Color([0,0,0,0.8])));this._drawObject.setFillSymbol(new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,
new esri.Color([0,0,0,0.8]),2),new esri.Color([0,0,0,0.25])));this._drawObject.setLineSymbol(new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color([0,0,0,0.8]),2))};a.prototype._activateToolbar=function(){this._drawObject||this._createDrawObject();if(!this._drawEndHandlerToken)this._drawEndHandlerToken=dojo.aspect.after(this._drawObject,"onDrawEnd",dojo.hitch(this,"onDrawEnd"),true);if(this._drawObject instanceof d.essentialsHtmlViewer.mapping.infrastructure.accessibility.Draw)this._inputMethodChangeHandle=
dojo.aspect.after(this._drawObject,"onInputMethodChange",dojo.hitch(this,"onInputMethodChange"),true);this._drawObject.activate(esri.toolbars.Draw[this.drawMode]);this._drawIsActive=true;this._drawEndSuspended=false};a.prototype._deactivateToolbar=function(){if(this._drawEndHandlerToken)this._drawEndHandlerToken.remove(),this._drawEndHandlerToken=null;if(this._inputMethodChangeHandle)this._inputMethodChangeHandle.remove(),this._inputMethodChangeHandle=null;if(this._drawObject&&this._drawIsActive)this._drawObject.deactivate(),
this._drawEndSuspended=this._drawIsActive=false};a.prototype.onActivated=function(){this._drawObject||this._createDrawObject();this._drawIsActive&&this._deactivateToolbar();if(this.drawMode=="CURRENT_EXTENT")this.onDrawEnd(this.app.map.extent);else{if(!this.app.map.graphics)return;this.app.command("ShowMap").execute();this._activateToolbar()}this._mapMouseDownToken=this.app.event("MapMouseDownEvent").subscribe(this,this.onMapMouseDown);this._mapMouseHoverToken=this.app.event("MapMouseHoverEvent").subscribe(this,
this.onMapMouseHover)};a.prototype.onDeactivated=function(){if(this._mapMouseHoverToken)this.app.event("MapMouseHoverEvent").unsubscribe(this._mapMouseHoverToken),this._mapMouseHoverToken=null;if(this._mapMouseDownToken)this.app.event("MapMouseDownEvent").unsubscribe(this._mapMouseDownToken),this._mapMouseDownToken=null;this._deactivateToolbar();this.app.command("ShowMap").execute()};a.prototype.onDrawEnd=function(b){var a=this;if(!this._drawEndSuspended){if(this.command){var c=this.app.command(this.command);
c.canExecute(b)?(c.execute(b),this.app.command("LogOptimizerEvent").execute(this.name,this.command)):this.app.trace.warning("Could not invoke command '{0}' for tool '{1}'.".format(this.name,this.command))}this.isSticky?(this._drawEndSuspended=true,setTimeout(function(){return a._drawEndSuspended=false},100)):this.setActive(false)}};a.prototype.onInputMethodChange=function(b){b={tool:this,previousMethod:b?b.previousMethod:null,newMethod:b?b.newMethod:null};this.app.event("ToolInputMethodChangedEvent").publish(b)};
a.prototype.onMapMouseDown=function(b){b.which===3&&this._drawObject&&(this.app.command("ClearActiveTool").execute(),this._deactivateToolbar(),this.app.command("RemoveStatus").execute())};a.prototype.onMapMouseHover=function(b){if(!(this._drawObject==null||!this._drawIsActive||this._unsupportedAutoPanDrawModes.indexOf(this.drawMode)>=0)&&b.hasOwnProperty("clientX")&&b.hasOwnProperty("clientY")){var a=$(this.app.map.root).offset();b.clientX<a.left+this._autoPanPixelTolerance?this.app.command("PanLeft").execute(this._autoPanStep):
a.left+this.app.map.width-this._autoPanPixelTolerance<b.clientX?this.app.command("PanRight").execute(this._autoPanStep):b.clientY<a.top+this._autoPanPixelTolerance?this.app.command("PanUp").execute(this._autoPanStep):a.top+this.app.map.height-this._autoPanPixelTolerance<b.clientY&&this.app.command("PanDown").execute(this._autoPanStep)}};return a}(h.ToolBase);h.MapTool=f;f.prototype.command=null;f.prototype.drawMode=null;f.prototype.isSticky=false})(g.tools||(g.tools={}))})(g.infrastructure||(g.infrastructure=
{}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(c){function a(b,a){var d=this;c.call(this,b,a);this.enabled=new Observable(true);if(a.command){var j=b.command(a.command);this.enabled.set(j.canExecute());j.canExecuteChanged.subscribe(this,function(){var b=j.canExecute();!b&&d.isActive&&d.setActive(false);d.enabled.set(b)})}}__extends(a,c);return a}(d.MapTool);d.DisablingMapTool=f})(d.tools||(d.tools={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping=
{}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){var f=function(c){function a(b,a){c.call(this,b,a);this.currentFeature=new Observable(null);this.providerEnabled=new Observable(false);this.currentFeature.bind(this,this.handleCurrentFeatureChanged)}__extends(a,c);a.prototype.initialize=function(){};a.prototype.handleCurrentFeatureChanged=function(){};a.prototype.updateProviderState=function(b){b=!!this.currentFeature.get()&&!!b;this.providerEnabled.get()!==b&&this.providerEnabled.set(b)};
a.prototype.createAttachedViews=function(b,a,c,d){var f=this,h=[];if(!b.viewType||!b.markup||!a)this.app.trace.warning("FeatureProviderBase: View type, markup or region not specified. Cannot create view for {0}".format(b.type));else{var g=function(c,e,g){var k=a[e];k!==null&&(k?(c=f.app.viewManager.createView({viewId:g,markupResource:c,typeName:b.viewType,iconUri:b.iconUri,title:b.title||"",regionName:k,isVisible:true,libraryId:b.libraryId||f.libraryId,configuration:b.viewConfig}),c.attach(d||f),
h.push(c)):f.app.trace.warning("FeatureProviderBase: Could not resolve target region for view mode {0}. Failed to create view with id {1}".format(e,g)))};if(typeof b.markup==="string")g(b.markup,"default",b.viewId||null);else for(var k in b.markup)if(b.markup.hasOwnProperty(k)){var n=b.viewId?"{0}-{1}".format(b.viewId,k):null;g(b.markup[k],k,n)}c&&typeof c==="function"&&c(h)}};return a}(d.framework.ui.ViewModelBase);h.FeatureProviderBase=f})(g.featureDetails||(g.featureDetails={}))})(g.infrastructure||
(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){var f=function(){function c(){this.layers=[];this.isUserCreated=false;this.isExpanded=this.includeInLayerList=true;this._delayedRefreshToken=null}c.fromEsriLayer=function(a){var b=new c;b.serviceLayer=a;b.serviceType=h.GisUtils.getServiceLayerType(a);b.id=a.id;if(a instanceof esri.layers.ArcGISDynamicMapServiceLayer||a instanceof esri.layers.ArcGISTiledMapServiceLayer)for(var d=0;d<a.layerInfos.length;d++){var e=h.LayerInfo.fromEsriLayerInfo(a.layerInfos[d],
a);e.serviceLayerInfo=b;b.layers.push(e)}else if(a instanceof esri.layers.FeatureLayer)e=h.LayerInfo.fromEsriFeatureLayer(a),e.serviceLayerInfo=b,b.layers.push(e);return b};c.fromGcxMapService=function(a){var b=new c;b.gcxMapService=a;b.serviceType=a.mapServiceType;b.serviceLayerFunction=a.mapServiceFunction;b.serviceLayer=a.serviceLayer;b.id=a.id;b.isExpanded=a.isExpanded;b.isUserCreated=a.isUserCreated;b.includeInLayerList=a.includeInLayerList;for(var d=0;d<a.layers.length;d++){var e=h.LayerInfo.fromGcxLayer(a.layers[d]);
e.serviceLayerInfo=b;b.layers.push(e)}return b};c.prototype.findLayerById=function(a){for(var b=0,c=this.layers.length;b<c;b++){var d=this.layers[b];if(a===d.id.toString())return d}return null};c.prototype.isVisible=function(){var a=false;if(this.serviceLayer&&typeof this.serviceLayer.visible==="boolean")a=this.serviceLayer.visible;return a};c.prototype.setVisibility=function(a){this.gcxMapService?this.gcxMapService.setVisibility(a):this.serviceLayer!==null&&this.serviceLayer.setVisibility(a)};c.prototype.opacity=
function(){if(this.gcxMapService)return this.gcxMapService.opacity;else if(this.serviceLayer)return this.serviceLayer.opacity;return null};c.prototype.setOpacity=function(a){if(this.gcxMapService)this.gcxMapService.setOpacity(a);else if(this.serviceLayer){if(a==null||isNaN(a))a=1;a=Math.min(1,Math.max(0,a));this.serviceLayer.setOpacity(a)}};c.prototype.refresh=function(a){var b=this,c=this.serviceLayer;if(c&&typeof c.refresh==="function"){var d=function(){b._delayedRefreshToken=null;if(a===true&&
typeof c.setDisableClientCaching==="function"){var a=c.disableClientCaching;c.setDisableClientCaching(true);c.refresh();c.setDisableClientCaching(a)}else c.refresh()};this._delayedRefreshToken&&clearTimeout(this._delayedRefreshToken);typeof a!=="number"?d():this._delayedRefreshToken=setTimeout(d,a)}};c.prototype.supportsLayerVisibility=function(){switch(this.serviceType){case d.essentials.MapServiceType.FEATURE:case d.essentials.MapServiceType.GEORSS:case d.essentials.MapServiceType.KML:case d.essentials.MapServiceType.BING:case d.essentials.MapServiceType.TILED:case d.essentials.MapServiceType.WMTS:case d.essentials.MapServiceType.IMAGE:case d.essentials.MapServiceType.WEBTILED:return false;
case d.essentials.MapServiceType.DYNAMIC:return this.serviceLayer!==null&&!!this.serviceLayer.visibleLayers}return true};return c}();h.ServiceLayerInfo=f})(g.gis||(g.gis={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){function c(a,b){this.parent=this.children=null;if(a)this.id=new Observable(a);if(b)this.parent=b}c.prototype.getRoot=function(){for(var a=this;a.parent!=null;)a=a.parent;return a};c.prototype.getAncestors=function(){var a=null;if(this.parent)for(var a=[],b=this.parent;b!=null;)a.push(b),b=b.parent;return a};c.prototype.getSelfAndAncestors=function(){var a=this.getAncestors(),a=a&&a.length?a:[];a.unshift(this);return a};
c.prototype.getSiblings=function(a){a===void 0&&(a=false);var b=null;if(this.parent&&this.parent.children&&(b=this.parent.children.get(),!a)){b=b.slice(0);for(a=0;a<b.length;a++)if(b[a]===this){b.splice(a,1);break}}return b};c.prototype.getDescendants=function(){if(this.children){for(var a=[],b=this.children.get(),c=0;c<b.length;c++){var d=b[c];a.push(d);for(var d=d.getDescendants(),j=0;j<d.length;j++)a.push(d[j])}return a}};c.prototype.getSelfAndDescendants=function(){var a=this.getDescendants(),
a=a&&a.length?a:[];a.unshift(this);return a};return c}();d.LayerListNode=f})(d.layerList||(d.layerList={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){var f=function(c){function a(b,a,e,j){c.call(this,"GCXLayerListRootNode-".concat(d.framework.utils.alphaNumericToken()));this.layerListInitialized=false;this.layerListInitializationFailure=null;this.onLayerListInitializationFailed=function(){};this.onLayerListInitialized=function(){};this.autoActivateAncestorVisibilities=this.onlyShowSwatchesOnVisibleLayers=this.enableLegendIntegration=false;this._addedFolderReferences=[];this._handledMapServiceReferences=
[];this._allMapServiceReferences=[];this._outOfFolderMapServiceReferences=[];this._initializing=false;this._groupByOperationalAndBase=true;this._userAddedLayersFolder=null;this._userAddedFolderInitialized=false;this._layerListRestEndpoint=null;if(!b||!b.mapInfo)throw Error("LayerList: Initialization failed. AppInfo/MapInfo cannot be null");this.appInfo=b;this.mapInfo=b.mapInfo;this.url=a||"";this._libraryId="Mapping.Infrastructure";this._layerListRestEndpoint=e||null;this.enableLegendIntegration=
j&&j.enableLegendIntegration!=void 0?j.enableLegendIntegration:false;this.onlyShowSwatchesOnVisibleLayers=j&&j.onlyShowSwatchesOnVisibleLayers!=void 0?j.onlyShowSwatchesOnVisibleLayers:false;this.autoActivateAncestorVisibilities=j&&j.autoActivateAncestorVisibilities!=void 0?j.autoActivateAncestorVisibilities:false;this._groupByOperationalAndBase=j&&j.groupByOperationalAndBase!=void 0?j.groupByOperationalAndBase:true;this.enableLayerIcons=j&&j.enableLayerIcons!=void 0?j.enableLayerIcons:false;this.serviceLoadFailureIconUri=
j?j.serviceLoadFailureIconUri||"":"";this.serviceLoadFailureIconTooltip=j?j.serviceLoadFailureIconTooltip||"":"";this.multiLegendSwatchElement=j?j.multiLegendSwatchElement||"":"";this.singleLegendIconTooltip=j?j.singleLegendIconTooltip||"":"";this.multiLegendIconTooltip=j?j.multiLegendIconTooltip||"":""}__extends(a,c);a.prototype.initialize=function(){if(!this.layerListInitialized&&!this._initializing)this._initializing=true,this.children=new h.LayerListItemCollection(null),this._layerListRestEndpoint?
this._layerListInitializationHandler(this._layerListRestEndpoint):this.url&&this.appInfo.essentialsVersion&&this.appInfo.essentialsVersion>=4.02?d.request({url:this.url,content:{f:"json"},load:dojo.hitch(this,this._layerListInitializationHandler),error:dojo.hitch(this,this._layerListInitializationErrorHandler),callbackParamName:"CallBack"}):this._layerListInitializationHandler(null)};a.prototype.addUserAddedServiceLayer=function(b){if(!this.layerListInitialized)return false;if(!(b instanceof g.gis.ServiceLayerInfo))if(b instanceof
d.essentials.MapService)b=g.gis.ServiceLayerInfo.fromGcxMapService(b);else if(b instanceof esri.layers.Layer)b=g.gis.ServiceLayerInfo.fromEsriLayer(b);else return this.appInfo.gcxApp.trace.error("addUserAddedServiceLayer: Could not add layer. Invalid layer type."),false;if(!this._userAddedLayersFolder)this._userAddedLayersFolder=new h.LayerListFolderItem(this.id.get()+":UserAdded",this.appInfo.gcxApp.getResource(this._libraryId,"language-layerlist-user-added-layers-folder-title"),this);if((b=this._generateLayerListItemsFromServiceLayer(b,
this,true))&&b.length){var a=this._userAddedLayersFolder.children.length();this._userAddedLayersFolder.children.validateAndAddItems(b);if(this._userAddedLayersFolder.children.length()>a){if(!this._userAddedFolderInitialized)this._generateThemeSettingsForCoreFolder(this._userAddedLayersFolder,true),this._userAddedLayersFolder.configuredVisible=true,this.children.insertItem(0,this._userAddedLayersFolder),this._userAddedLayersFolder.isVisible.set(true),this._userAddedFolderInitialized=true;this._applyDeferredItemVisibilities(this._userAddedLayersFolder.children.get());
this._userAddedLayersFolder.isExpanded.set(true);return true}}return false};a.prototype.removeServiceLayer=function(b){if(!this.layerListInitialized)return false;if(!(b instanceof esri.layers.Layer))if(b instanceof d.essentials.MapService||b instanceof g.gis.ServiceLayerInfo)b=b.serviceLayer;else return this.appInfo.gcxApp.trace.error("removeServiceLayer: Could not remove layer. Invalid layer type."),false;var a=this.getDescendants();if(a.length){for(var c=0;c<a.length;c++){var j=a[c];if(j.mapService&&
j.mapService.serviceLayer===b){var f=j.parent;f?(f.children.removeItem(j),f instanceof h.LayerListItem&&f.refreshOnDemandItemCollection()):this.children.removeItem(j)}}return true}return false};a.prototype.updateServiceLayerLegendSwatch=function(b){if(!this.layerListInitialized)return false;var a=b.serviceLayer;if(!a)return this.appInfo.gcxApp.trace.error("updateServiceLayerLegendSwatch: Could not update layer swatch. Invalid layer type."),false;return(b=this.getDescendants().filter(function(b){return b.mapService&&
b.mapService.serviceLayer.id===a.id})[0])&&b instanceof h.LayerListLayerItem?(b.updateLegendItems(),true):false};a.prototype._applyDeferredItemVisibilities=function(b){var a=this;dojo.forEach(b,function(b){b._applyDeferredInitialVisibility();b.children&&b.children.length()&&a._applyDeferredItemVisibilities(b.children.get())})};a.prototype._layerListInitializationErrorHandler=function(b){this.layerListInitializationFailure=b;if(this.onLayerListInitializationFailed)this.onLayerListInitializationFailed(b);
this._initializing=false};a.prototype._layerListInitializationHandler=function(b){var a=this,c=function(){a.layerListInitialized=true;a._initializing=false;a._processEligibleSingleMapServiceFolders();a._processUnhandledMapServices();a._setupOpacityBindingsForParentsOfHiddenItemsWithOpacityBindings();a._applyInitialLayerTheme();a._applyDeferredItemVisibilities(a.children.get());if(a.onLayerListInitialized)a.onLayerListInitialized(a)};b?this._configureLayerListFromRestResponse(b,c,this._layerListInitializationErrorHandler):
this._configureLayerListFromMapInfo(this.mapInfo,c,this._layerListInitializationErrorHandler)};a.prototype._configureLayerListFromMapInfo=function(b,a,c){if(b){if(b.gcxMap&&b.serviceLayers.length&&b.serviceLayers[0].serviceLayerFunction!=void 0&&this._groupByOperationalAndBase)var d=new h.LayerListFolderItem(this.id.get()+":Operational",this.appInfo.gcxApp.getResource(this._libraryId,"language-layerlist-operational-maps-folder-title"),this),f=new h.LayerListFolderItem(this.id.get()+":Base",this.appInfo.gcxApp.getResource(this._libraryId,
"language-layerlist-base-maps-folder-title"),this);try{for(var g=0;g<b.serviceLayers.length;g++){var k=b.serviceLayers[g],n=this._generateLayerListItemsFromServiceLayer(k,this);if(n&&n.length)if(this._groupByOperationalAndBase)switch(k.serviceLayerFunction){case "Operational":d.children.addItems(n);break;case "Base":f.children.addItems(n);break;default:throw Error("ServiceLayerFunction undefined or not recognized: {0}".format(k.serviceLayerFunction));}else this.children.addItems(n)}if(this._groupByOperationalAndBase){if(d.children.length())this._generateThemeSettingsForCoreFolder(d),
this.children.addItem(d),d.isExpanded.set(true),d.isVisible.set(true),d.configuredVisible=true;if(f.children.length())this._generateThemeSettingsForCoreFolder(f),this.children.addItem(f),f.isExpanded.set(true),f.isVisible.set(true),f.configuredVisible=true}}catch(p){console.error("Layer List Configuration Error: {0}".format(p&&p.message||"Unknown Error"));c(p);return}a()}else this._layerListInitializationErrorHandler(Error("Error initializing layer list from MapInfo."))};a.prototype._configureLayerListFromRestResponse=
function(b,a,c){if(!b||!b.items)this._layerListInitializationErrorHandler(Error("Error initializing layer list from rest response."));else{try{for(var d=0,f=b.items.length;d<f;d++){var h=this._createLayerListItemFromRestResult(b.items[d],this);h&&this.children.addItem(h)}}catch(g){console.error("Layer List Configuration Error: {0}".format(g&&g.message||"Unknown Error"));c(g);return}a()}};a.prototype._generateLayerListItemsFromServiceLayer=function(b,a,c){var d=this;c===void 0&&(c=false);var f=[],
g=null,k=function(a,c){var e=a.subLayerIds||[];if(e.length>0)for(var i=0;i<e.length;i++){var f=b.findLayerById(e[i]);if(f&&(f.processed=true,f.includeInLayerList)){var l=new h.LayerListLayerItem(f.id,f,d);n(l);c.children.addItem(l);k(f,l)}}c.isExpanded.set(a.isExpanded&&!(!a.subLayerIds||!a.subLayerIds.length))},n=function(b){b&&c&&(b.unbindFromActiveTheme(),b.inActiveTheme.set(true))};b.includeInLayerList&&(g=new h.LayerListMapServiceItem(b.id,b,this),n(g));b.serviceLayer instanceof esri.layers.GraphicsLayer&&
b.layers.length===1?(g=this._handleGraphicsLayerItem(b,g),n(g&&g.children.length()?g.children.getAt(0):g)):b.layers.length&&(dojo.forEach(b.layers,function(b){if((b.includeInLayerList||b.isUserCreated)&&!b.processed){var a=new h.LayerListLayerItem(b.id,b,d);n(a);g?g.children.addItem(a):f.push(a);k(b,a)}}),g&&g.isExpanded.set(b.isExpanded&&!!b.layers.length));if(g&&(f.push(g),a))g.parent=a;return f};a.prototype._handleGraphicsLayerItem=function(b,a){var c=a;if(b.layers[0].includeInLayerList||b.layers[0].isUserCreated){var d=
b.layers[0],f=new h.LayerListGraphicsLayerItem(d.id,b.layers[0],this);f.isExpanded.set(d.isExpanded&&!(!d.subLayerIds||!d.subLayerIds.length));c?(c.isVisible.set(f.isVisible.get()),f.isVisible.set(true),f.canNotAssignVisibility.set(true),c.children.addItem(f),c.isExpanded.set(b.isExpanded&&!!b.layers.length)):c=f}return c};a.prototype._createLayerListItemFromRestResult=function(b,a){var c=this,d=null,f=function(a){console.error("Layer List Error: {0} with ID: {1} not available. Excluding from layer list. Please check your security settings.".format(a===
1?"MapService":a===2?"Map Layer":"Object",b.mapServiceID))};switch(b.type){case "folder":b.items&&b.items.length&&this._subItemIncludedInLayerList(b.items)&&(d=new h.LayerListFolderItem(b.id,b.name,this));break;case "mapService":var g=this.mapInfo.findMapServiceById(b.mapServiceID);g||f(1);g&&g.includeInLayerList&&(d=new h.LayerListMapServiceItem(b.id,g,this));break;case "layer":(g=this.mapInfo.findMapServiceById(b.mapServiceID))||f(1);if(g){var k=g.findLayerById(b.layerID);k||f(2);k&&k.includeInLayerList&&
(d=g.serviceLayer instanceof esri.layers.GraphicsLayer?new h.LayerListGraphicsLayerItem(b.id,k,this):new h.LayerListLayerItem(b.id,k,this))}break;default:throw Error("Unknown layer list item type. Reported type: {0}".format(b.type));}if(d){if(a)d.parent=a;b.items!=null&&b.items.length&&dojo.forEach(b.items,function(b){(b=c._createLayerListItemFromRestResult(b,d))&&d.children.addItem(b)});this._processItem(d,b)}return d};a.prototype._subItemIncludedInLayerList=function(b){var e;for(var a=0;a<b.length;a++){var c;
c=b[a];if(c.type==="folder")c=c.items&&c.items.length?this._subItemIncludedInLayerList(c.items):false;else if(c.type==="mapService"){var d=this.mapInfo.findMapServiceById(c.mapServiceID);c=d?!!d.includeInLayerList:false}else c.type==="layer"?(d=this.mapInfo.findMapServiceById(c.mapServiceID),e=(c=d.findLayerById(c.layerID))?!!c.includeInLayerList:false,c=e):c=void 0;if(c)return true}return false};a.prototype._processItem=function(b,a){if(b.type===0){if(this.mapInfo.gcxMap&&a.themeSettings&&a.themeSettings.length)for(var c=
0;c<a.themeSettings.length;c++){var j=a.themeSettings[c],f=this.mapInfo.gcxMap.layerThemesInfo.getTheme(j.themeID);f&&b.layerThemeSettings.push(new d.essentials.LayerThemeSetting(f,j.visible!=void 0?j.visible:a.isVisible))}b._deferredVisibilitySetting=a.isVisible;b.isVisible.set(a.isVisible);b.configuredVisible=a.isVisible;b.isExpanded.set(a.isExpanded&&!(!a.items||!a.items.length));this._disableFolderIfParentTiled(b)}b.type===1&&b.isExpanded.set(b.mapService.isExpanded);b.type===2&&b.isExpanded.set(b.layer.isExpanded&&
!(!b.layer.subLayerIds||!b.layer.subLayerIds.length));if(b.type===0&&(c=a.iconUri))this.mapInfo.gcxMap&&this.mapInfo.gcxMap.site&&(c=d.essentials.RestHelper.processClientSideTokens(this.mapInfo.gcxMap.site,c)),b.iconUri.set(c),b.iconTooltip.set(b.name.get());b.canDisplayItem.set(a.isVisibleInLayerList!==false);if(a.layerVisibilityType===h.LayerVisibilityType.MutuallyExclusive&&a.items&&a.items.length>1){c=d.framework.utils.alphaNumericToken(32);for(j=0;j<b.children.length();j++)b.children.getAt(j).isMutuallyExclusive.set(true),
b.children.getAt(j).hasRadioToggle.set(true),b.children.getAt(j).radioGroup.set(c)}};a.prototype._disableFolderIfParentTiled=function(b){for(var a=b.parent;a&&a.id!==this.id&&(a.type===1||a.type===0);){if(a.type===0&&a.canNotAssignVisibility.get()||a.type===1&&a.mapService.serviceType===d.essentials.MapServiceType.TILED){b.canNotAssignVisibility.set(true);break}a=a.parent}};a.prototype._generateThemeSettingsForCoreFolder=function(b,a){a===void 0&&(a=false);if(a){if(this.mapInfo.gcxMap&&this.mapInfo.gcxMap.layerThemesInfo.layerThemesConfigured)for(var c=
this.mapInfo.gcxMap.layerThemesInfo.themes,j=0;j<c.length;j++)b.layerThemeSettings.push(new d.essentials.LayerThemeSetting(c[j],true));b.inActiveTheme.set(true)}else for(var c={},j=0,f=b.children.length();j<f;j++){var h=b.children.getAt(j),g=null;switch(h.type){case 0:g=h.layerThemeSettings;break;case 1:g=h.mapService.gcxMapService?h.mapService.gcxMapService.layerThemeSettings:null;break;case 2:case 3:g=h.layer.gcxLayer?h.layer.gcxLayer.layerThemeSettings:null}if(g&&g.length)for(h=0;h<g.length;h++){var k=
g[h].theme.id;c[k]==void 0&&(b.layerThemeSettings.push(new d.essentials.LayerThemeSetting(g[h].theme,true)),c[k]=true)}}};a.prototype._applyInitialLayerTheme=function(){this.mapInfo.gcxMap&&this.mapInfo.gcxMap.layerThemesInfo.layerThemesConfigured&&this.mapInfo.gcxMap.applyStartupTheme()};a.prototype._processEligibleSingleMapServiceFolders=function(){for(var b=this._handledMapServiceReferences.slice(0),a=this._getFoldersContainingSingleMapService(),a=this._filterEligibleSingleMsFolders(a),a=this._selectDeepestLevelSingleMapServiceFolders(a),
c=0;c<a.length;c++){var d=a[c];d.containedMapServices[0].serviceLayer instanceof esri.layers.GraphicsLayer||b.indexOf(d.containedMapServices[0])!==-1||this._outOfFolderMapServiceReferences.indexOf(d.containedMapServices[0])!==-1||(d.linkWithMapService(d.containedMapServices[0]),b.push(d.containedMapServices[0]))}};a.prototype._setupOpacityBindingsForParentsOfHiddenItemsWithOpacityBindings=function(){for(var b=this.getDescendants(),b=dojo.filter(b,function(b){return b.canAdjustOpacity.get()}),a=0;a<
b.length;a++){var c=b[a];if(!this.isEffectivelyDisplayed(c)){for(c=c.parent;c instanceof h.LayerListItem&&!this.isEffectivelyDisplayed(c);)c=c.parent;c instanceof h.LayerListItem&&c._setupOpacityBindings()}}};a.prototype.isEffectivelyDisplayed=function(b){return b.displayItem.get()?b.parent instanceof h.LayerListItem?this.isEffectivelyDisplayed(b.parent):true:false};a.prototype._getFoldersContainingSingleMapService=function(){for(var b=[],a=0;a<this._addedFolderReferences.length;a++)this._addedFolderReferences[a].containedMapServices.length===
1&&b.push(this._addedFolderReferences[a]);return b};a.prototype._filterEligibleSingleMsFolders=function(b){if(b){for(var a=[],c=0;c<b.length;c++){var d=b[c],f=dojo.filter(this._addedFolderReferences,function(b){return b.id!==d.id&&b.containedMapServices.length>1&&b.containedMapServices.indexOf(d.containedMapServices[0])!==-1})||[];this._noChildItemsWithMapService(d.containedMapServices[0],f)&&this._allFoldersAncestorsOf(d,f)&&a.push(d)}return a}};a.prototype._selectDeepestLevelSingleMapServiceFolders=
function(b){if(b){for(var a=[],c=[],d=0;d<b.length;d++){var f=b[d];if(c.indexOf(f.containedMapServices[0])===-1){var h=dojo.filter(b,function(b){return b.id!==f.id&&b.containedMapServices.indexOf(f.containedMapServices[0])!==-1})||[];if(h.length){var g=f,k;for(k=0;k<h.length;k++)if(this._onlyFolderItems(g.children.get())&&this._allFoldersDescendantsOf(g,h.slice(k))){if(g.children.length()>1)break;g=h[k]}else{g=k>=1?h[k-1]:g;break}this._allFoldersDescendantsOf(g,h.slice(k))&&(a.push(g),c.push(g.containedMapServices[0]))}else a.push(f),
c.push(f.containedMapServices[0])}}return a}};a.prototype._allFoldersDescendantsOf=function(b,a){for(var c=0;c<a.length;c++){var d=a[c].getAncestors();if(!d||d.indexOf(b)===-1)return false}return true};a.prototype._allFoldersAncestorsOf=function(b,a){for(var c=b.getAncestors(),d=0;d<a.length;d++)if(c.indexOf(a[d])===-1)return false;return true};a.prototype._noChildItemsWithMapService=function(b,a){for(var c=0;c<a.length;c++)for(var d=a[c].children.get(),f=0;f<d.length;f++)if(d[f].mapService&&d[f].mapService===
b)return false;return true};a.prototype._onlyFolderItems=function(b){for(var a=0;a<b.length;a++)if(b[a].type!==0)return false;return true};a.prototype._processUnhandledMapServices=function(){for(var b=this,a=dojo.filter(this._allMapServiceReferences,function(a){return b._handledMapServiceReferences.indexOf(a)===-1}),c=0;c<a.length;c++){var d=a[c];if(d.serviceLayer instanceof esri.layers.ArcGISDynamicMapServiceLayer||d.serviceLayer instanceof esri.layers.WMSLayer)d.serviceLayer.on("visibility-change",
function(b){if(b.visible){if(d._esriLayerStateBackup)d.serviceLayer.setVisibleLayers(d._esriLayerStateBackup),d._esriLayerStateBackup=null}else d.serviceLayer instanceof esri.layers.ArcGISDynamicMapServiceLayer?(d._esriLayerStateBackup=d.serviceLayer.visibleLayers?d.serviceLayer.visibleLayers.slice(0):[-1],d.serviceLayer.setVisibleLayers(["-1"])):(d._esriLayerStateBackup=d.serviceLayer.visibleLayers?d.serviceLayer.visibleLayers.slice(0):[],d.serviceLayer.setVisibleLayers([]))})}};return a}(h.LayerListNode);
h.LayerList=f})(g.layerList||(g.layerList={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){(function(c){c[c.FOLDER=0]="FOLDER";c[c.MAPSERVICE=1]="MAPSERVICE";c[c.LAYER=2]="LAYER";c[c.GRAPHICSLAYER=3]="GRAPHICSLAYER";c[c.KMLFOLDER=4]="KMLFOLDER"})(h.LayerListItemType||(h.LayerListItemType={}));var f=function(c){function a(b,a,d){var f=this;c.call(this,b);this.opacity=this.mapService=null;if(!b)throw Error("LayerListItem: Initialization failed. Layer list item id cannot be null");if(!d)throw Error("LayerListItem: Initialization failed. LayerList cannot be null");
this.type=a;this.layerList=d;this.allAncestorsVisible=true;this.isVisible=new Observable(false);this.isEffectivelyVisible=new Observable(false);this.parentEffectivelyVisible=new Observable(true);this.inVisibleScaleRange=new Observable(true);this.isEffectivelyVisible.syncTransform(this.isVisible,function(b){return b&&!!f.allAncestorsVisible});this.name=new Observable("");this.isExpanded=new Observable(false);this.expandLegend=new Observable(false);this.canNotAssignVisibility=new Observable(false);
this.canAdjustOpacity=new Observable(false);this.inActiveTheme=new Observable(true);this.canDisplayItem=new Observable(true);this.displayItem=new Observable(true);this.hasDisplayedChildren=new Observable(false);this.children=new h.LayerListItemCollection(this);this.onDemandItemCollection=new ObservableCollection([]);this.legendItems=new ObservableCollection([]);this.legendSwatch=new Observable("");this.legendHasMultipleItems=new Observable(false);this.enableLayerActions=false;this.iconUri=new Observable("");
this.iconTooltip=new Observable("");this.legendTooltip=new Observable("");this.layerFolderToggleTooltip=new Observable("");this.layerActionsTooltip=new Observable("");this.layerToggleTooltip=new Observable("");this.isMutuallyExclusive=new Observable(false);this.hasRadioToggle=new Observable(false);this.radioGroup=new Observable("");this.isVisible.bind(this,this.setVisibility);this.isExpanded.bind(this,this.refreshOnDemandItemCollection);this.inActiveTheme.bind(this,this._onActiveThemeChanged);this.canDisplayItem.bind(this,
this._updateDisplayItem);this.currentUserClickOriginator=false;this.legendIsVisible=new Observable(false);this.layerList.enableLegendIntegration&&this.legendIsVisible.set(true);this.layerList.onlyShowSwatchesOnVisibleLayers&&(this.isEffectivelyVisible.bind(this,this._processLegendVisibility),this.inVisibleScaleRange.bind(this,this._processLegendVisibility),this.legendItems.bind(this,this._processLegendVisibility));this.layerList&&this.layerList.mapInfo&&this.layerList.mapInfo.gcxMap&&this.layerList.mapInfo.gcxMap.layerThemesInfo&&
dojo.connect(this.layerList.mapInfo.gcxMap.layerThemesInfo,"layerThemeChangingEvent",dojo.hitch(this,this._handleLayerThemeChangingEvent))}__extends(a,c);a.prototype.bindToActiveTheme=function(){};a.prototype.unbindFromActiveTheme=function(){};a.prototype.notifyActiveThemeChanged=function(b){b&&!this.inActiveTheme.get()&&this.inActiveTheme.set(true);this.type===0&&!b&&this.inActiveTheme.get()&&this.children&&dojo.every(this.children.get(),function(b){return!b.inActiveTheme.get()})&&this.inActiveTheme.set(false)};
a.prototype.setItemVisibility=function(b){this.currentUserClickOriginator=true;this.isVisible.set(b)};a.prototype.setVisibility=function(b){if(this.allAncestorsVisible!==void 0)if(this._deferredVisibilitySetting!=void 0)this._deferredVisibilitySetting=b;else if(b&&this.isMutuallyExclusive.get()&&this.parent&&!this.layerList.mapInfo.gcxMap.layerThemesInfo.themeChangeInProgress)for(b=0;b<this.parent.children.length();b++){var a=this.parent.children.getAt(b);a!==this&&a.isVisible.get()&&a.isVisible.set(false)}};
a.prototype.setAncestorVisibility=function(b){this.allAncestorsVisible=b;this.isVisible.pulse()};a.prototype.refreshOnDemandItemCollection=function(b){b=b==void 0?this.isExpanded.get():b;this.onDemandItemCollection.clear();if(this.children&&this.children.length()&&b)for(var b=0,a=this.children.length();b<a;b++){var c=this.children.getAt(b);this._notFolderOrContainsAtLeastOneChildLayer(c)&&this.onDemandItemCollection.addItem(c)}};a.prototype.populateMapServicesInParentFolders=function(){var b=this;
if(this.type!==0&&this.mapService){for(var a=[],c=this.parent,d=true;c;){if(c.type===1&&c.mapService===this.mapService)return;c.type===0&&(d=false,c.containedMapServices.indexOf(this.mapService)===-1&&c.id.get().indexOf(this.layerList.id.get())===-1&&a.push(c));c=c.parent}d?this.layerList._outOfFolderMapServiceReferences.push(this.mapService):dojo.forEach(a,function(a){a.containedMapServices.push(b.mapService)})}};a.prototype._applyDeferredInitialVisibility=function(){if(this._deferredVisibilitySetting!=
void 0){var b=this._deferredVisibilitySetting;delete this._deferredVisibilitySetting;this.setVisibility(b)}};a.prototype._setupOpacityBindings=function(){var b=this;if(!(this.type===2||this.type===3)&&this.mapService&&this.mapService.serviceLayer&&this.mapService.serviceLayer.opacity!=void 0&&this.mapService.serviceLayer.setOpacity!=void 0&&this.mapService.serviceType!==d.essentials.MapServiceType.FEATURE)this.canAdjustOpacity.set(true),this.opacity=new Observable(this.mapService.serviceLayer.opacity),
this.opacity.bind(this,function(a){b.mapService.setOpacity(a)}),this.mapService.serviceLayer.on("opacity-change",function(){return b.opacity.set(b.mapService.opacity())})};a.prototype._notFolderOrContainsAtLeastOneChildLayer=function(b){if(b.type!==0)return true;if(b.children&&b.children.length())for(var a=0,c=b.children.length();a<c;a++)if(this._notFolderOrContainsAtLeastOneChildLayer(b.children.getAt(a)))return true;return false};a.prototype._handleLayerThemeChangingEvent=function(b){if(b.currTheme)this.type===
0&&(this.isVisible.get()||this.isVisible.set(true)),this._deferredVisibilitySetting=this.isEffectivelyVisible.get()};a.prototype._updateDisplayItem=function(){this.displayItem.set(this.canDisplayItem.get()&&this.inActiveTheme.get());var b=this.getSiblings(true);if(b&&b.length){for(var a=0,c=0;c<b.length;c++){var d=b[c];d.displayItem.get()&&a++}for(c=0;c<b.length;c++)d=b[c],d.hasRadioToggle.set(d.isMutuallyExclusive.get()&&a!==1)}};a.prototype._onActiveThemeChanged=function(b){this._updateDisplayItem();
var a=this.parent;a&&a.id!==this.layerList.id&&a.notifyActiveThemeChanged(b)};a.prototype._processLegendVisibility=function(){this.legendIsVisible.set(this.isEffectivelyVisible.get()&&this.inVisibleScaleRange.get()&&!!this.legendItems.length())};a.prototype._setTooltips=function(){var b=this,a=this.layerList.appInfo.gcxApp.getResource(this.layerList._libraryId,"language-layerlist-toggle").format(this.name.get()),c=this.layerList.appInfo.gcxApp.getResource(this.layerList._libraryId,"language-layer-actions-tooltip").format(this.name.get()),
d=this.layerList.appInfo.gcxApp.getResource(this.layerList._libraryId,"language-layerlist-visible-at-extent"),f=this.layerList.appInfo.gcxApp.getResource(this.layerList._libraryId,"language-layerlist-not-visible-at-extent"),h=this.layerList.appInfo.gcxApp.getResource(this.layerList._libraryId,"language-layerlist-expand").format(this.name.get());this.layerActionsTooltip.set(c);this.layerFolderToggleTooltip.set(h);this.inVisibleScaleRange.get()?this.layerToggleTooltip.set(a+" "+d):this.layerToggleTooltip.set(a+
" "+f);this.inVisibleScaleRange.bind(this,function(c){c?b.layerToggleTooltip.set(a+" "+d):b.layerToggleTooltip.set(a+" "+f)})};return a}(h.LayerListNode);h.LayerListItem=f})(g.layerList||(g.layerList={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(c){function a(b,a,d,f){c.call(this,b,4,a);if(!d)throw Error("LayerListKmlFolderItem: Initialization failed. KML layer object cannot be null.");if(!f)throw Error("LayerListKmlFolderItem: Initialization failed. KML folder object cannot be null.");this._kmlLayer=d;this._kmlFolder=f;this.name=new Observable(f.name);this._setTooltips();this.isVisible.set(!!f.visibility)}__extends(a,c);a.prototype.setItemVisibility=function(b){c.prototype.setItemVisibility.call(this,
b);this._kmlLayer.setFolderVisibility(this._kmlFolder,b)};return a}(d.LayerListItem);d.LayerListKmlFolderItem=f})(d.layerList||(d.layerList={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){var h=function(){function d(){}d.sortBy=function(c,a){c.sort(function(b,c){var d=a(b),f=a(c);return d==f?0:d<f?-1:1});return c};return d}();d.ArrayUtils=h})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){var h=function(){function d(){this._backingStore={}}d.prototype.containsKey=function(c){return this._backingStore.hasOwnProperty(c)};d.prototype.get=function(c){return this._backingStore[c]};d.prototype.set=function(c,a){this._backingStore[c]=a};d.prototype.values=function(){var c=[],a;for(a in this._backingStore)this._backingStore.hasOwnProperty(a)&&c.push(this._backingStore[a]);return c};d.prototype.keys=function(){var c=[],a;for(a in this._backingStore)this._backingStore.hasOwnProperty(a)&&
c.push(a+"");return c};return d}();d.Dictionary=h})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){var f=function(c){function a(b,a){c.call(this,b,a);this._emptyFeatureSetCollection=null;this.featureSetCollection=new Observable;this.featureActions=new ObservableCollection;this.currentFeature=new Observable;this.hasFeatureSets=new Observable(false);this.isBusy=new Observable(false);this.defaultIsPaged=true;this.defaultPageSize=50;this.headerText=new Observable(this.app.getResource(this.libraryId,"language-common-results"));this.searchSuggestion=
new Observable(this.app.getResource(this.libraryId,"language-common-no-results-desc"));this.featureSetCollection.bind(this,this.handleCollectionChanged);this.registerCommand();this.subscribeEvents()}__extends(a,c);a.prototype.subscribeEvents=function(){this.app.event("FSMCollectionOpenedEvent").subscribe(this,this._openFSC);this.app.event("FSMCollectionClosedEvent").subscribe(this,this._closeFSC);this.app.event("FSMCollectionRemovedEvent").subscribe(this,this._removeFSC);this.app.event("FeatureEditedEvent").subscribe(this,
this._pulseFeatureSetsInCollection);this.app.event("FeatureDeletedEvent").subscribe(this,this._pulseFeatureSetsInCollection);this.app.event("RelatedRecordEditedEvent").subscribe(this,this._pulseFeatureSetsInCollection)};a.prototype.handleCollectionChanged=function(b){var a=b&&this.app.featureSetManager.getCollectionById(b.id);!a&&b&&b.featureSets&&(a=b);a?(this.isBusy.set(this.app.featureSetManager.isCollectionOpen(b.id)),this.hasFeatureSets.set(this._featureSetsHaveFeatures(a.featureSets))):this.isBusy.set(false)};
a.prototype.handleFeatureSetsChanged=function(b){b=this._featureSetsHaveFeatures(b.sender);this.hasFeatureSets.get()!==b&&this.hasFeatureSets.set(b)};a.prototype.updateHeaderText=function(b){var a=null,c="";b&&(c=" ("+b+")");this.featureSetCollection.get()&&(a=this.featureSetCollection.get().displayName.get());this.headerText.set((a?a:this.app.getResource(this.libraryId,"language-common-results"))+c)};a.prototype._featureSetsHaveFeatures=function(b){if(b)for(var a=0;a<b.length();a++)if(b.getAt(a).features&&
b.getAt(a).features.length()>0||b.getAt(a).esriFeatureSet&&b.getAt(a).esriFeatureSet.features&&b.getAt(a).esriFeatureSet.features.length>0)return true;return false};a.prototype._openFSC=function(b){this.featureSetCollection.get()&&b&&b.featureSetCollectionId&&b.featureSetCollectionId==this.featureSetCollection.get().id&&(this.isBusy.set(true),this.hasFeatureSets.set(false),b=this.app.featureSetManager.getSearchSuggestion(this.featureSetCollection.get().sourceName),this.searchSuggestion.set(b?b:this.app.getResource(this.libraryId,
"language-common-no-results-desc")))};a.prototype._closeFSC=function(b){this.featureSetCollection.get()&&b&&b.featureSetCollectionId&&b.featureSetCollectionId==this.featureSetCollection.get().id&&this.isBusy.set(false);this.featureSetCollection.pulse()};a.prototype._removeFSC=function(b){this.featureSetCollection.get()&&b&&b.featureSetCollectionId&&b.featureSetCollectionId==this.featureSetCollection.get().id&&this.featureSetCollection.set(this._getEmptyFeatureSetCollection())};a.prototype._getEmptyFeatureSetCollection=
function(){this._emptyFeatureSetCollection==null?this._emptyFeatureSetCollection=new d.essentialsHtmlViewer.mapping.infrastructure.FeatureSetCollection:this._emptyFeatureSetCollection.clear();return this._emptyFeatureSetCollection};a.prototype.registerCommand=function(){var b=this;this.app.command("ShowResultsListFeatureAction").register(this,function(a){b.currentFeature.set(a);b.getResultsFeatureActions();b.app.command("ActivateView").execute("ResultsFeatureActionsView")});this.app.command("ClearSelection").register(this,
function(){b.app.command("RemoveFeatureSetCollection").execute(b.featureSetCollection.get())})};a.prototype.getResultsFeatureActions=function(){this.featureActions.clear();var b=this.app.menuRegistry.getMenu("ResultsListFeatureAction");this.app.menuRegistry.getDefaultIconUri("ResultsListFeatureAction");if(b)this.featureActions.addItems(b.items);else throw Error("Results Feature Actions not found");};a.prototype._pulseFeatureSetsInCollection=function(){this.featureSetCollection&&this.featureSetCollection.get()&&
this.featureSetCollection.get().featureSets&&this.featureSetCollection.get().featureSets.length()>0&&this.featureSetCollection.get().featureSets.pulse()};return a}(d.framework.ui.ViewModelBase);h.ResultsViewModel=f})(g.results||(g.results={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){var f=function(c){function a(b,a){var e=this;c.call(this,b,a);this.pageControlsEnabled=new Observable(false);this.resultsList=new Observable("results-list");this.pagingControlClassName=new Observable("paging-control no-pages");this.contentField=new Observable("description");this._boundFeatureSetCollection=this._featureSetsBindingToken=null;this._featureViewMap={};this.results=new d.framework.ui.ObservableCollectionAggregator(new ObservableCollection);
this.presentableResults=new d.framework.ui.PresentableCollection(this.results);this.presentableResults.items.useThrottling=true;this.resultsPage=this.presentableResults.items;this.presentableResults.pageSize.set(this.defaultPageSize);this.defaultIsPaged!=this.presentableResults.isPaginated.get()&&this.presentableResults.isPaginated.set(this.defaultIsPaged);this.resultsPage.bind(this,this.handlePageResultsChange);this.presentableResults.numberOfItems.bind(this,function(b){b>0?e.pagingControlClassName.set("paging-control has-pages"):
e.pagingControlClassName.set("paging-control no-pages");e.updateHeaderText(b)});this.app.command("ShowResultsList").register(this,this.showResultsList)}__extends(a,c);a.prototype.subscribeEvents=function(){c.prototype.subscribeEvents.call(this);this.app.event("FeatureChangedEvent").subscribe(this,this.handleFeatureChanged)};a.prototype.handleCollectionChanged=function(b){c.prototype.handleCollectionChanged.call(this,b);this._clearResetUnderlyingCollection(true);if(b&&b.featureSets){this._featureSetsBindingToken=
b.featureSets.bind(this,this.handleFeatureSetsChanged);this._boundFeatureSetCollection=b;for(var a=this.results.getCollectionSource(),d=0,f=b.featureSets.length();d<f;d++)a.addItem(b.featureSets.getAt(d).features)}};a.prototype.handleFeatureSetsChanged=function(b){c.prototype.handleFeatureSetsChanged.call(this,b);var a=this.results.getCollectionSource();if(b.type==="append")for(var d=b.sender.getRange(b.rangeStart,b.rangeEnd),b=0;b<d.length;b++)a.addItem(d[b].features);else if(b.type==="remove"){d=
b.sender.getRange(b.rangeStart,b.rangeEnd);for(b=0;b<d.length;b++)a.removeItem(d[b].features)}else b.type==="clear"&&(this._clearResetUnderlyingCollection(false),this.results.bindingEvent.publish(b))};a.prototype.handlePageResultsChange=function(b){b=b?b:{type:null};b.type==="clear"?this._featureViewMap={}:b.type==="remove"&&b.sender.value.length>b.rangeStart&&delete this._featureViewMap[b.sender.getAt(b.rangeStart).token];var a=new g.eventArgs.ResultsPageChangedEventArgs;a.featureSetCollection=this.featureSetCollection.get();
a.newValue=b.type==="clear"?new ObservableCollection:this.resultsPage;this.app.event("ResultsPageChangedEvent").publish(a)};a.prototype.handleFeatureChanged=function(b){if(b&&this._featureViewMap.hasOwnProperty(b.token)){var a=this._featureViewMap[b.token];a.destroyBindings();b.hasRelationships&&b.hasRelationships.get()?a.descriptionApply(b,a.root):a.root.innerHTML=a.descriptionGet(b);a.attach(b)}};a.prototype.showResultsList=function(b){(b=typeof b==="string"?this.app.featureSetManager.getCollectionById(b):
b)&&b!==this.featureSetCollection.get()?(this.unbindFeatureSet(),this.featureSetCollection.set(b)):this.handlePageResultsChange();this.app.command("_setResultMappingCommand").execute(b.sourceName,"ShowResultsList");this.headerText.set(b.displayName.get()?b.displayName.get():this.getResource("language-common-results"))};a.prototype.getFeatureView=function(b){return this._featureViewMap[b]};a.prototype.setFeatureView=function(b,a){this._featureViewMap[b]=a};a.prototype.unbindFeatureSet=function(){if(this._featureSetsBindingToken&&
this._boundFeatureSetCollection)this._boundFeatureSetCollection.featureSets.unbind(this._featureSetsBindingToken),this._boundFeatureSetCollection=this._featureSetsBindingToken=null};a.prototype._pulseFeatureSetsInCollection=function(){var b=this.presentableResults.currPageNumber.get();c.prototype._pulseFeatureSetsInCollection.call(this);this.presentableResults.currPageNumber.set(b)};a.prototype._clearResetUnderlyingCollection=function(b){this.results.getCollectionSource().clear();this.presentableResults.currPageNumber.set(1);
if(b)this.unbindFeatureSet(),this._featureViewMap={}};return a}(h.ResultsViewModel);h.FlatResultsViewModel=f})(g.results||(g.results={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){var f=function(){function c(a,b,c,d){this.sortState=new Observable(0);this.sortClass=new Observable("");this._reverseSortingPredicate=this._sortingPredicate=null;this.displayName=b.displayName;this._sharedState=a;c==="DateTime"?(this._sortingPredicate=this.buildDateSortingFunction(d),this._reverseSortingPredicate=this.buildReverseDateSortingFunction(d)):(this._sortingPredicate=this.buildSortingFunction(d),this._reverseSortingPredicate=
this.buildReverseSortingFunction(d));this.sortClass.syncTransform(this.sortState,function(b){switch(b){case 1:return a.sortedClass;case 2:return a.reverseSortedClass}return a.unsortedClass});this.sortState.bind(this,this.onSortStateChange)}c.prototype.buildSortingFunction=function(a){return function(b,c){return d.essentialsHtmlViewer.mapping.infrastructure.results.ResultsAttributeHeaderViewModel.collator(b.attributes.getAt(a).presentableValue.get(),c.attributes.getAt(a).presentableValue.get())}};
c.prototype.buildReverseSortingFunction=function(a){return function(b,c){return d.essentialsHtmlViewer.mapping.infrastructure.results.ResultsAttributeHeaderViewModel.collator(c.attributes.getAt(a).presentableValue.get(),b.attributes.getAt(a).presentableValue.get())}};c.prototype.buildDateSortingFunction=function(a){return function(b,c){var e=b.attributes.getAt(a).value.get(),f=c.attributes.getAt(a).value.get(),h=new Date(e),g=new Date(f),k=h!="Invalid Date";return k!==(g!="Invalid Date")?k?-1:1:k?
h.getTime()-g.getTime():d.essentialsHtmlViewer.mapping.infrastructure.results.ResultsAttributeHeaderViewModel.collator(e,f)}};c.prototype.buildReverseDateSortingFunction=function(a){return function(b,c){var e=c.attributes.getAt(a).value.get(),f=b.attributes.getAt(a).value.get(),h=new Date(e),g=new Date(f),k=h!="Invalid Date";return k!==(g!="Invalid Date")?k?-1:1:k?h.getTime()-g.getTime():d.essentialsHtmlViewer.mapping.infrastructure.results.ResultsAttributeHeaderViewModel.collator(e,f)}};c.prototype.onSortStateChange=
function(a){if(!this._sharedState.ignoreStateChange){if(a<0||a>2)throw Error("Illegal column sort state: "+a);if(a==0){if(this._sharedState.lastSortedColumn!=this)throw Error("Column sort state out of sync");this._sharedState.lastSortedColumn=null;this._sharedState.presentableResults.sortingPredicate=null;this._sharedState.presentableResults.unsortCollection()}else{if(this._sharedState.lastSortedColumn!=null&&this._sharedState.lastSortedColumn!=this)this._sharedState.ignoreStateChange=true,this._sharedState.lastSortedColumn.sortState.set(0),
this._sharedState.ignoreStateChange=false;this._sharedState.lastSortedColumn=this;if(a==1)this._sharedState.presentableResults.sortingPredicate=this._sortingPredicate;else if(a==2)this._sharedState.presentableResults.sortingPredicate=this._reverseSortingPredicate;else throw Error("Invalid column sort state.");this._sharedState.presentableResults.sortCollection()}}};return c}();h.ResultsAttributeHeaderViewModel=f;(function(c){c.manualCollator=function(b,a){return!isNaN(b)&&!isNaN(a)?+b-a:b<a?-1:b>
a?1:0};c.collator=typeof Intl=="object"&&typeof Intl.Collator=="function"?(new Intl.Collator(void 0,{numeric:true})).compare:d.essentialsHtmlViewer.mapping.infrastructure.results.ResultsAttributeHeaderViewModel.manualCollator;var a=function(){function b(b,a,c,d){this.lastSortedColumn=null;this.presentableResults=b;this.unsortedClass=a;this.sortedClass=c;this.reverseSortedClass=d;this.reset()}b.prototype.reset=function(){this.ignoreStateChange=false;this.lastSortedColumn=null};return b}();c.SharedState=
a})(f=h.ResultsAttributeHeaderViewModel||(h.ResultsAttributeHeaderViewModel={}))})(g.results||(g.results={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){var f=function(c){function a(){c.apply(this,arguments)}__extends(a,c);a.prototype.handleMenuItemClick=function(b,a,c){c.execute(this.viewModel.currentFeature.get())};a.prototype.handleGetDescription=function(b,a,c){a.title=c.description.get()};return a}(d.framework.ui.ViewBase);h.ResultsFeatureActionsView=f})(g.results||(g.results={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){var f=function(c){function a(b,a){var d=this;c.call(this,b,a);this.isContainerCollapsed=this.isCollapsed=true;this._pressStartTime=this._longPressTimer=null;this._pressLengthMs=1500;this._ignoreMouseEventFlag=this._firedTouchOrPress=false;this._lastTouchY=this._pressYStart=null;this._scrollYDeltaThreshold=35;this._firstEvent=null;this.app.event("ViewContainerActivatedEvent").subscribe(this,function(b){if(!d.isCollapsed&&d._isViewHostedInContainer(b))d.app.event("ResultsViewOpenedEvent").publish(d),
d.isContainerCollapsed=false});this.app.event("ViewContainerDeactivatedEvent").subscribe(this,function(b){if(!d.isCollapsed&&d._isViewHostedInContainer(b))d.app.event("ResultsViewCollapsedEvent").publish(d),d.isContainerCollapsed=true})}__extends(a,c);a.prototype.activated=function(){c.prototype.activated.call(this);this.isCollapsed=false;this.app.event("ResultsViewOpenedEvent").publish(this)};a.prototype.deactivated=function(){c.prototype.deactivated.call(this);this.isCollapsed=true;this.app.event("ResultsViewCollapsedEvent").publish(this)};
a.prototype.handleTouchStart=function(b,a,c){if(!this._firstEvent)this._firstEvent="touch start",this._beginLongPress(c);return true};a.prototype.handleTouchMove=function(){if(this._firstEvent==="touch start")this._firstEvent=null,this._cancelLongPress();return true};a.prototype.handleTouchEnd=function(){if(this._firstEvent==="touch start")this._firstEvent=null,this._cancelLongPress();return true};a.prototype.handleTouchCancel=function(){if(this._firstEvent==="touch start")this._firstEvent=null,this._cancelLongPress();
return true};a.prototype.handleMouseDown=function(b,a,c){if(!this._firstEvent)this._firstEvent="mouse down",this._beginLongPress(c);return true};a.prototype.handleClick=function(b,a,c){if(this._firstEvent)this._firstEvent=null,this._cancelLongPress();b=b.target;a=!!(b.tagName==="IMG"&&b.parentElement&&b.parentElement.tagName==="A"&&b.parentElement.href);if(b.tagName==="A"||a)return true;else this.app.command("ClearFeatureInformation").execute(),this.app.event(this.featureClickedEventName).publish(c);
return false};a.prototype.handleMouseUp=function(){if(this._firstEvent==="mouse down")this._firstEvent=null,this._cancelLongPress();return true};a.prototype.handleMouseOut=function(){if(this._firstEvent==="mouse down")this._firstEvent=null,this._cancelLongPress()};a.prototype._beginLongPress=function(b){var a=this;this._longPressTimer&&clearTimeout(this._longPressTimer);this._longPressTimer=setTimeout(function(){a.app.event(a.featurePressedEventName).publish(b)},this._pressLengthMs)};a.prototype._cancelLongPress=
function(){if(this._longPressTimer)clearTimeout(this._longPressTimer),this._longPressTimer=null};a.prototype._isViewHostedInContainer=function(b){if(b instanceof d.framework.ui.ViewContainer.ViewContainerView){var b=b.viewModel.regionName.get(),a=this.app.viewManager.getRegionForViewId(this.id);if(a&&a.name===b)return true}return false};a.prototype.scrollView=function(b){if(this.scrollContainerElement)this.scrollContainerElement.scrollTop=b||0};return a}(d.framework.ui.ViewBase);h.ResultsViewBase=
f;f.prototype.featureClickedEventName="ResultsListFeatureClickedEvent";f.prototype.featurePressedEventName="ResultsListFeaturePressedEvent"})(g.results||(g.results={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){var f=function(c){function a(b,a){c.call(this,b,a);this.featureClickedEventName="ResultsListFeatureClickedEvent";this.featurePressedEventName="ResultsListFeaturePressedEvent";this._subscriptions=null;this._scrollTop=0;this.app.command("ShowResultsList").register(this,this.showResultsList);this.app.command("ShowResultsTable").register(this,this._handleShowResultsTable)}__extends(a,c);a.prototype.activated=function(){var b=this;c.prototype.activated.call(this);
this._unsubscribeFromEvents();if(this.regionName==="DataFrameResultsContainerRegion"||this.regionName==="DataRegion"){var a=this.app.event("DataFrameOpenedEvent").subscribe(this,this._dataFrameOpenedEventHandler),d=this.app.event("DataFrameClosedEvent").subscribe(this,this._dataFrameClosedEventHandler);this._subscriptions=[{eventName:"DataFrameOpenedEvent",token:a},{eventName:"DataFrameClosedEvent",token:d}]}if(this.resultsList){var f=this.resultsList;setTimeout(function(){dojo.style(f,{display:"block"})},
1)}this.viewModel.featureSetCollection.bind(this,function(){b.app.trace.debug("View focused in results list: "+b.id);b.app.command("FocusOnFirstInputInView").execute(b)})};a.prototype.deactivated=function(){c.prototype.deactivated.call(this);this._unsubscribeFromEvents()};a.prototype.attach=function(b){var a=this;this.title.sync(b.headerText);this.isBusy.sync(b.isBusy);this.configuration.isPaged!=void 0&&b.presentableResults.isPaginated.set(this.configuration.isPaged);this.configuration.pageSize&&
b.presentableResults.pageSize.set(this.configuration.pageSize);this.configuration.contentField&&b.contentField.set(this.configuration.contentField);b.presentableResults.currPageNumber.bindingEvent.subscribe(this,function(){a.scrollViewTop()});this.scrollViewTop(this._scrollTop);c.prototype.attach.call(this,b)};a.prototype.showResultsList=function(){this.app.viewManager.activateView(this)};a.prototype.handlePageFirst=function(){this.viewModel.presentableResults.currPageNumber.get()>1&&this.viewModel.presentableResults.currPageNumber.set(1)};
a.prototype.handlePagePrev=function(){this.viewModel.presentableResults.currPageNumber.get()>1&&this.viewModel.presentableResults.currPageNumber.set(this.viewModel.presentableResults.currPageNumber.get()-1)};a.prototype.handlePageNext=function(){this.viewModel.presentableResults.lastPageNumber.get()>this.viewModel.presentableResults.currPageNumber.get()&&this.viewModel.presentableResults.currPageNumber.set(this.viewModel.presentableResults.currPageNumber.get()+1)};a.prototype.handlePageLast=function(){this.viewModel.presentableResults.currPageNumber.get()<
this.viewModel.presentableResults.lastPageNumber.get()&&this.viewModel.presentableResults.currPageNumber.set(this.viewModel.presentableResults.lastPageNumber.get())};a.prototype.handleScrollChange=function(b,a,c){if(c)this._scrollTop=a.scrollTop};a.prototype.getDescription=function(b,a,c){a.title=c.description.get()};a.prototype.scrollViewTop=function(b){if(this.scrollContainerElement)this.scrollContainerElement.scrollTop=b||0};a.prototype.resolveWidget=function(b,a,e){c.prototype.resolveWidget.call(this,
b,a);switch(b){case "GetDescription":if(b=new d.essentialsHtmlViewer.mapping.infrastructure.FeatureDescriptionPresenterView(this.app,this.libraryId))return b.contentField=this.viewModel.contentField.get(),b.root=dojo.create("div"),b.root.className="feature-description",a.hasRelationships&&a.hasRelationships.get()?b.descriptionApply(a,b.root):b.root.innerHTML=b.descriptionGet(a),b.attach(a),this.viewModel.setFeatureView(a.token,b),b;break;case "ResultsListActionsWidget":if(a=this.app.menuRegistry.createMenuWidget(this,
a,e))return a}};a.prototype._handleShowResultsTable=function(){this.app.viewManager.deactivateView(this)};a.prototype._dataFrameOpenedEventHandler=function(){this.isContainerCollapsed||this.app.event("ResultsViewOpenedEvent").publish(this)};a.prototype._dataFrameClosedEventHandler=function(){this.isContainerCollapsed||this.app.event("ResultsViewCollapsedEvent").publish(this)};a.prototype._unsubscribeFromEvents=function(){if(this._subscriptions)for(var b=0;b<this._subscriptions.length;b++){var a=this._subscriptions[b];
this.app.event(a.eventName).unsubscribe(a.token)}this._subscriptions=null};return a}(h.ResultsViewBase);h.ResultsListView=f})(g.results||(g.results={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){var f=function(){function a(){}a.prototype.toJSONString=function(){return JSON.stringify({name:this.name,featureSet:this.featureSet.toJson()})};return a}(),c=function(a){function b(){a.apply(this,arguments);this._supportedFormats=["csv","xlsx","shp"]}__extends(b,a);b.prototype.initialize=function(b){var c=this;a.prototype.initialize.call(this,b);if(b)this.resultMappings=b.resultMappings,b.customSearchSuggestions&&this.app.featureSetManager.addSearchSuggestions(b.customSearchSuggestions);
this.wireUpResultMapping();this.app.command("ExportResultsTo").register(this,function(b){var a="csv";b.fsc?(b.format?c._supportedFormats.indexOf(b.format)===-1?c.app.trace.warning("ExportResultsTo: {0} file format not recognized. Defaulting to csv.".format(b.format)):a=b.format:c.app.trace.warning("ExportResulTo: file format not specified. Defaulting to csv."),c.exportTo({fsc:b.fsc,format:a})):c.app.trace.error("ExportResultsTo: Cannot export, no feature set collection specified.")},this.exportToCanExecute)};
b.prototype.wireUpResultMapping=function(){this.app.event("FSMCollectionOpenedEvent").subscribe(this,this.fsmCollectionOpenedHandler);this.app.command("_setResultMappingCommand").register(this,this.fsmCollectionSetCommand);this.app.command("FSMCollectionSetCommand").register(this,this.fsmCollectionSetCommand)};b.prototype.fsmCollectionOpenedHandler=function(b){b=b.featureSetCollection;if(this.resultMappings){var a=this.resultMappings[b.sourceName];if(a)for(var c=0;c<a.length;c++){var d=a[c];this.app.command(d).execute(b.id);
this._lastCommand=d}}};b.prototype.fsmCollectionSetCommand=function(b,a){if(a){var c=null;a==="ShowResultsList"?c="ShowResultsTable":a==="ShowResultsTable"&&(c="ShowResultsList");if(c&&this.resultMappings&&this.resultMappings[b]){var d=this.resultMappings[b],c=d.indexOf(c);c>-1?d[c]=a:d.indexOf(a)===-1&&d.push(a)}}};b.prototype.exportTo=function(b){var a=this,c=new d.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs(this.app.getResource(this.libraryId,"language-results-export-to-status-message").format(b.format)),
f="exportTo "+b.format+"StatusMessage";c.id=f;c.showBusyIcon=true;this.app.command("AddStatus").execute(c);c=this.app.site.url;c=c.substring(0,c.lastIndexOf("/sites/"))+"/Utilities/Extract";d.request({url:c,content:{format:b.format,featureSets:this.fscToJson(b.fsc),f:"json"},load:dojo.hitch(this,function(c){return a.exportToSuccess(c,b.format)}),error:function(c){a.app.command("RemoveStatus").execute(f);a.app.commandRegistry.command("Alert").execute(c.message,a.app.getResource(a.libraryId,"language-results-export-to-alert-error-message").format(b.format))}})};
b.prototype.exportToSuccess=function(b,a){if(b&&b.hasOwnProperty("href")){var c=b.href,d=this.app.getResource(this.libraryId,"language-results-export-to-confirm-content").format(a),f=this.app.getResource(this.libraryId,"language-results-export-to-confirm-title").format(a);this.app.command("RemoveStatus").execute("exportTo "+a+"StatusMessage");this.app.commandRegistry.command("Confirm").execute(d,f,function(b){b&&window.location.assign(c)})}};b.prototype.exportToCanExecute=function(b){var a=null;if(b)if(b instanceof
g.FeatureSetCollection)a=b;else if(b.fsc&&b.fsc instanceof g.FeatureSetCollection)a=b.fsc;return a&&a.featureSets.get()&&a.featureSets.get().length>0};b.prototype.getFields=function(b){var a=[];b.esriFeatureSet&&b.esriFeatureSet.features&&b.esriFeatureSet.features.length>0&&(a=this.getFieldsFromEsriLayer(b.esriFeatureSet.features[0].getLayer(),b));a.length===0&&(b.layer&&b.layer.fields&&b.layer.fields.length>0?a=this.getFieldsFromEssentialsLayer(b.layer):b.attributes.get()&&b.attributes.get().length>
0?a=this.getFieldsFromGcxFeatureSetAttributes(b.attributes.get(),b):b.features.get()&&b.features.get().length>0&&b.features.getAt(0).attributes.get()&&b.features.getAt(0).attributes.get().length>0?a=this.getFieldsFromGcxFeatureAttributes(b.features.getAt(0).attributes.get(),b):b.esriFeatureSet&&b.esriFeatureSet.features&&b.esriFeatureSet.features.length>0&&b.esriFeatureSet.features[0].attributes&&b.esriFeatureSet.features[0].attributes.length>0?a=this.getFieldsFromEsriFeatureAttributeValues(b.esriFeatureSet.features):
b.features.get()&&b.features.get().length>0&&b.features.getAt(0).attributes.get()&&b.features.getAt(0).attributes.get().length>0&&(a=this.getFieldsFromGcxFeatureAttributeValues(b.features.get())));return a};b.prototype.getFieldsFromEsriLayer=function(b,a){var c=[];if(b&&b.fields&&(c=b.fields.slice(0),a&&a.features.get()&&a.features.getAt(0).attributes.get())){var d=a.features.getAt(0).attributes.get();d.length===c.length&&d.forEach(function(b,a){c[a].alias=b.displayName.get()?b.displayName.get():
c[a].alias})}return c};b.prototype.getFieldsFromEssentialsLayer=function(b){var a=[],c=new esri.layers.Field;b.fields.forEach(function(b){c=new esri.layers.Field;c.name=b.name;c.alias=b.displayName;c.type=d.essentials.Field.convertToEsriFieldType(b.dataType);a.push(c)});return a};b.prototype.getFieldsFromGcxFeatureSetAttributes=function(b,a){var c=this,f=[],h=new esri.layers.Field;b.forEach(function(b,i){h=new esri.layers.Field;h.name=b.name.get();h.alias=b.displayName.get();h.type=b.type.get()?d.essentials.Field.convertToEsriFieldType(b.type.get()):
a.features.get().length>0&&a.features.getAt(0).attributes.get()&&a.features.getAt(0).attributes.get().length>0?c.getTypeFromGcxFeatures(a.features.get(),i):c.getEsriTypeFromValue(null);f.push(h)});return f};b.prototype.getFieldsFromGcxFeatureAttributes=function(b,a){var c=this,f=[],h=new esri.layers.Field;b.forEach(function(b,i){h=new esri.layers.Field;h.name=b.name.get();h.alias=b.displayName.get();h.type=b.type.get()?d.essentials.Field.convertToEsriFieldType(b.type.get()):c.getTypeFromGcxFeatures(a.features.get(),
i);f.push(h)});return f};b.prototype.getFieldsFromEsriFeatureAttributeValues=function(b){var a=0,c=[],d=new esri.layers.Field,f=b[0].attributes,h;for(h in f)if(f.hasOwnProperty(h))d=new esri.layers.Field,d.name=h,d.alias=h,d.type=this.getTypeFromEsriFeatures(b,a),c.push(d),a++;return c};b.prototype.getFieldsFromGcxFeatureAttributeValues=function(b){var a=0,c=[],d=new esri.layers.Field,f=b[0].attributes.get(),h;for(h in f)if(f.hasOwnProperty(h))d=new esri.layers.Field,d.name=h,d.alias=h,d.type=this.getTypeFromGcxFeatures(b,
a),c.push(d),a++;return c};b.prototype.getTypeFromEsriFeatures=function(b,a){var c=this,d=this.getEsriTypeFromValue(null);b.forEach(function(b){(b=b.attributes[a])&&(d=c.getEsriTypeFromValue(b))});return d};b.prototype.getTypeFromGcxFeatures=function(b,a){var c=this,d=this.getEsriTypeFromValue(null);b.forEach(function(b){(b=b.attributes.getAt(a).value.get())&&(d=c.getEsriTypeFromValue(b))});return d};b.prototype.getEsriTypeFromValue=function(b){var a="esriFieldTypeString";typeof b==="number"?a="esriFieldTypeDouble":
b instanceof Date&&(a="esriFieldTypeDate");return a};b.prototype.getFeatureSets=function(b){var a=this,c=new esri.tasks.FeatureSet,h=new esri.Graphic,g=[];b.featureSets.get().forEach(function(k,n){var p=a.getFields(k);c=new esri.tasks.FeatureSet;if(k&&k.features.get()&&k.features.get().length>0){var y=[];k.features.getAt(0).attributes.get().forEach(function(b){y.push(b.name.get())});var w={};y.forEach(function(b){var a=k.features.get(),c;for(c in a){var d=a[c].attributes.get(),e;for(e in d){var i=
d[e];if(b===i.name.get()&&i.presentableValue.get()){w[b]={presentableValue:i.presentableValue.get()};break}}if(w[b])break}});p.forEach(function(b){var a=w[b.name];if(a)if(a=a.presentableValue,a instanceof Date)b.type=d.essentials.EsriFieldTypes.esriFieldTypeDate;else if($.isNumeric(a))b.type=Math.abs(a%1)!==0?d.essentials.EsriFieldTypes.esriFieldTypeDouble:d.essentials.EsriFieldTypes.esriFieldTypeInteger;else if(typeof a==="string"||a instanceof String)b.type=d.essentials.EsriFieldTypes.esriFieldTypeString});
k.features.get().forEach(function(b){var a={},e=b.esriFeature.get().attributes;b.getAttributes().forEach(function(b){var c=b.name.get(),i=b.presentableValue.get(),f,h;for(h in p){var g=p[h];if(g.name===b.name.get()){f=g.type;if((b=p.filter(function(b){return b.name.indexOf(".Name()",b.name.length-7)!==-1&&b.name.substr(0,b.name.length-7)===g.name}))&&b.length>0)if((b=b[0].name)&&e&&e.hasOwnProperty(b)){var j=h=e[g.name];h=i;i=j;a[b]=h}break}}if(i&&c)f===d.essentials.EsriFieldTypes.esriFieldTypeDouble&&
typeof i.replace==="function"?a[c]=parseFloat(i.replace(",",".")):f===d.essentials.EsriFieldTypes.esriFieldTypeInteger||g.type===d.essentials.EsriFieldTypes.esriFieldTypeSingle||g.type===d.essentials.EsriFieldTypes.esriFieldTypeSmallInteger?a[c]=parseInt(i):f===d.essentials.EsriFieldTypes.esriFieldTypeDate&&!(i instanceof Date)&&!$.isNumeric(i)?g.type=d.essentials.EsriFieldTypes.esriFieldTypeString:a[c]=i});c.displayFieldName=k.esriFeatureSet.displayFieldName;h=new esri.Graphic(b.esriFeature.get().geometry,
null,a,null);c.features.push(h)})}else k&&k.features.get().length>0&&k.features.get().forEach(function(b){h=b.esriFeature.get();c.features.push(h)});if(c.features.length>0){if(p&&p.length>0)c.fields=p;var t=new f;t.name=b.featureSets.getAt(n).displayName.get();t.featureSet=c;var x=0;g.forEach(function(b){t.name===b.name&&(x+=1)});x>0&&(t.name+=x);g.push(t)}});return g};b.prototype.fscToJson=function(b){var a="[";this.getFeatureSets(b).forEach(function(b,c,d){var i=new f;i.featureSet=b.featureSet;
i.name=b.name;a+=i.toJSONString();c!==d.length-1&&(a+=",")});a+="]";return a};return b}(d.framework.application.ModuleBase);h.ResultsModule=c})(g.results||(g.results={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){var f=function(c){function a(b,a){c.call(this,b,a);this.featureClickedEventName="ResultsTableFeatureClickedEvent";this.featurePressedEventName="ResultsTableFeaturePressedEvent";this._boundFs=this._fsBindingToken=this.scrollTabRightElement=this.scrollTabLeftElement=this.tabElements=this.tabContainerElement=this.scrollContainerElement=null;this.app.command("ShowResultsTable").register(this,this.showResultsTable);this.app.command("ShowResultsList").register(this,
this._handleShowResultsList)}__extends(a,c);a.prototype.attach=function(b){var a=this;this.title.sync(b.headerText);this.isBusy.sync(b.isBusy);this.configuration.isPaged!=void 0&&b.presentableResults.isPaginated.set(this.configuration.isPaged);this.configuration.pageSize&&b.presentableResults.pageSize.set(this.configuration.pageSize);b.presentableResults.currPageNumber.bindingEvent.subscribe(this,function(){var b=a.viewModel.curFeatureSet.get();a.scrollView(b?a.viewModel.currScrollPosWithinTab[b.uniqueId]||
0:0)});c.prototype.attach.call(this,b)};a.prototype.resolveWidget=function(b,a,e){c.prototype.resolveWidget.call(this,b,a);switch(b){case "ResultsTableActionsWidget":return this.app.menuRegistry.createMenuWidget(this,a,e);case "TableViewWidget":b=this.viewModel;if(a=this.app.viewManager.createView({type:"geocortex.essentialsHtmlViewer.mapping.infrastructure.ui.components.Table.TableView",markup:"Mapping/infrastructure/ui/components/Table/TableView.html",libraryId:this.libraryId,visible:true}))e=new d.essentialsHtmlViewer.mapping.infrastructure.ui.components.Table.TableViewModel(this.app,
this.libraryId),e.addRecordClickEvents(this.featureClickedEventName),e.addRecordLongPressEvents(this.featurePressedEventName),e.columnHeaders=this.viewModel.columnHeaders,e.attachToPresentableCollection(b.presentableResults),a.attach(e),this.scrollContainerElement=a.tableContainerElement;return a;default:this.app.trace.warning("ResultsTableView: Unknown Widget")}};a.prototype.showResultsTable=function(){var b=this;this.app.viewManager.activateView(this);if(this.viewModel.featureSetCollection.get()&&
(this._unbindFromPrevFeatureSet(),this._boundFs=this.viewModel.featureSetCollection.get().featureSets))this._fsBindingToken=this.viewModel.featureSetCollection.get().featureSets.bind(this,this._refreshTabControlVisibility);var a=null,c=this.app.event("ApplicationResizedEvent").subscribe(this,function(){b.isActive?(a&&(clearTimeout(a),a=null),a=setTimeout(function(){b._refreshTabControlVisibility()},200)):(b.app.event("ApplicationResizedEvent").unsubscribe(c),c=null)});this._refreshTabControlVisibility()};
a.prototype._refreshTabControlVisibility=function(){var b=this;setTimeout(function(){b.tabContainerElement&&b.tabElements&&(b.viewModel.tabControlsEnabled.set(b.tabElements.offsetWidth>b.tabContainerElement.offsetWidth),b._updateScrollTabDisabledStatus())},100)};a.prototype.handleTabClick=function(b,a,c){if(this.scrollContainerElement)this.viewModel.currScrollPosWithinTab[this.viewModel.curFeatureSet.get().uniqueId]=this.scrollContainerElement.scrollTop;if((b=dojo.filter(this.viewModel.featureSetCollection.get().featureSets.get(),
function(b){return b.uniqueId===c.uniqueId}))&&b[0]&&this.viewModel.curFeatureSet.get()!==b[0])this.viewModel.setCurrentSelectedFeatureSet(b[0]),this.viewModel.setCurrentPageWithinTab(c.uniqueId);this.app.command("FocusOnFirstInputInView").execute(this)};a.prototype.handlePageFirst=function(){this.viewModel.presentableResults.currPageNumber.get()>1&&(this.viewModel.updateCurrentPageAndScrollPosWithinTab(1,0),this.viewModel.presentableResults.currPageNumber.set(1))};a.prototype.handlePagePrev=function(){if(this.viewModel.presentableResults.currPageNumber.get()>
1){var b=this.viewModel.presentableResults.currPageNumber.get()-1;this.viewModel.updateCurrentPageAndScrollPosWithinTab(b,0);this.viewModel.presentableResults.currPageNumber.set(b)}};a.prototype.handlePageNext=function(){if(this.viewModel.presentableResults.lastPageNumber.get()>this.viewModel.presentableResults.currPageNumber.get()){var b=this.viewModel.presentableResults.currPageNumber.get()+1;this.viewModel.updateCurrentPageAndScrollPosWithinTab(b,0);this.viewModel.presentableResults.currPageNumber.set(b)}};
a.prototype.handlePageLast=function(){if(this.viewModel.presentableResults.currPageNumber.get()<this.viewModel.presentableResults.lastPageNumber.get()){var b=this.viewModel.presentableResults.lastPageNumber.get();this.viewModel.updateCurrentPageAndScrollPosWithinTab(b,0);this.viewModel.presentableResults.currPageNumber.set(b)}};a.prototype.handleTabScrollBack=function(){var b=$(this.tabContainerElement),a=b.scrollLeft()-this.scrollTabLeftElement.offsetWidth*2;b.scrollLeft(a<0?0:a);this._updateScrollTabDisabledStatus()};
a.prototype.handleTabScrollForward=function(){var b=$(this.tabContainerElement),a=this.tabContainerElement.scrollWidth-this.tabContainerElement.offsetWidth,c=b.scrollLeft()+this.scrollTabRightElement.offsetWidth*2;b.scrollLeft(c>a?a:c);this._updateScrollTabDisabledStatus()};a.prototype.handleClickFeature=function(b,a,c){this.app.event("ResultsTableFeatureClickedEvent").publish(c)};a.prototype.handleColumnHeadClick=function(b,a,c){c.sortState.set((c.sortState.get()+1)%3)};a.prototype._handleShowResultsList=
function(){this.app.viewManager.deactivateView(this)};a.prototype._updateScrollTabDisabledStatus=function(){if(this.tabContainerElement){var b=this.tabContainerElement.scrollWidth-this.tabContainerElement.offsetWidth;this.viewModel.leftScrollTabDisabled.set(this.tabContainerElement.scrollLeft===0);this.viewModel.rightScrollTabDisabled.set(this.tabContainerElement.scrollLeft>b-1)}};a.prototype._unbindFromPrevFeatureSet=function(){this._fsBindingToken&&this._boundFs&&this._boundFs.unbind(this._fsBindingToken);
this._fsBindingToken=this._boundFs=null};return a}(h.ResultsViewBase);h.ResultsTableView=f})(g.results||(g.results={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){var f=function(c){function a(b,a){c.call(this,b,a);this.curFeatureSet=new Observable(null);this.currPageWithinTab={};this.currScrollPosWithinTab={};this.presentableResults=new d.framework.ui.PresentableCollection;this.pageControlsEnabled=new Observable(false);this.tabControlsEnabled=new Observable(false);this.resultsTable=new Observable("results-table");this.columnSharedState=null;this.columnHeaders=new ObservableCollection([]);this.leftScrollTabDisabled=
new Observable(false);this.rightScrollTabDisabled=new Observable(false);this._firstVisibleTab=0;this._emptyFeatureSet=new d.essentialsHtmlViewer.mapping.infrastructure.FeatureSet({app:this.app});this._featureSetsBindingToken=this._boundFeatureSets=null;this.presentableResults.items.useThrottling=true;this.resultsPage=this.presentableResults.items;this.presentableResults.pageSize.set(this.defaultPageSize);this.defaultIsPaged!=this.presentableResults.isPaginated.get()&&this.presentableResults.isPaginated.set(this.defaultIsPaged);
this.curFeatureSet.bind(this,this.handleCurrentFeatureSetChanged);this.presentableResults.numberOfItems.bind(this,this.updateHeaderText);this.resultsPage.bind(this,this._handlePageResultsChange);this.app.command("ShowResultsTable").register(this,this.showResultsTable)}__extends(a,c);a.prototype.handleCollectionChanged=function(b){c.prototype.handleCollectionChanged.call(this,b);this.unbindFeatureSets();if(b&&b.featureSets){this._featureSetsBindingToken=b.featureSets.bind(this,this.handleFeatureSetsChanged);
this._boundFeatureSets=b.featureSets;this._firstVisibleTab=0;for(var a=null,d=0;d<b.featureSets.length();d++)if(b.featureSets.getAt(d).isSelectedInCollection.get()){a=b.featureSets.getAt(d);break}!a&&b.featureSets.length()>0&&(a=b.featureSets.getAt(0));if(a!==this.curFeatureSet.get())this.setCurrentSelectedFeatureSet(a),this.currPageWithinTab={},this.currScrollPosWithinTab={}}};a.prototype.handleCurrentFeatureSetChanged=function(b){this.presentableResults.sortingPredicate=null;this.presentableResults.attachToCollection(b.features);
this.buildColumnHeaders(b)};a.prototype.handleFeatureSetsChanged=function(b){c.prototype.handleFeatureSetsChanged.call(this,b);var a=b.sender;if(b.type==="append"){b.rangeStart===0&&this.setCurrentSelectedFeatureSet(a.getAt(0));for(var d=b.rangeStart;d<=b.rangeEnd;d++)a.getAt(d).isSelectedInCollection.get()&&this.setCurrentSelectedFeatureSet(a.getAt(d))}else if(b.type==="remove"&&(d=this.curFeatureSet.get()))d=a.indexOf(d),d>=b.rangeStart&&d<=b.rangeEnd&&(b.rangeEnd+1<a.length()?this.setCurrentSelectedFeatureSet(a.getAt(b.rangeEnd+
1)):b.rangeStart>0?this.setCurrentSelectedFeatureSet(a.getAt(b.rangeStart-1)):this.setCurrentSelectedFeatureSet(null))};a.prototype.showResultsTable=function(b){if(b=typeof b==="string"?this.app.featureSetManager.getCollectionById(b):b)b!==this.featureSetCollection.get()?(this.unbindFeatureSets(),this.featureSetCollection.set(b)):this._handlePageResultsChange(),this.headerText.set(b.displayName.get()?b.displayName.get():this.getResource("language-common-results")),this.app.command("_setResultMappingCommand").execute(b.sourceName,
"ShowResultsTable");this.currPageWithinTab={};this.currScrollPosWithinTab={}};a.prototype.setCurrentSelectedFeatureSet=function(b){for(var a=this.featureSetCollection.get().featureSets,c=0;c<a.length();c++)a.getAt(c).isSelectedInCollection.set(a.getAt(c)===b);b&&this.curFeatureSet.set(b)};a.prototype.unbindFeatureSets=function(){this._featureSetsBindingToken&&this._boundFeatureSets&&this._boundFeatureSets.unbind(this._featureSetsBindingToken);this._featureSetsBindingToken=this._boundFeatureSets=null};
a.prototype.buildColumnHeaders=function(b){this.columnHeaders.clear();this.columnSharedState?this.columnSharedState.reset():this.columnSharedState=new d.essentialsHtmlViewer.mapping.infrastructure.ui.components.Table.TableColumnHeaderViewModel.SharedState(this.presentableResults,"sort","sort-up","sort-down");var a,c={};if(b.layer&&b.layer.fields)for(a=0;a<b.layer.fields.length;a++){var f=b.layer.fields[a];c[f.name]=f.dataType}f=b.attributes.length();f||(b.loadAttributes(),f=b.attributes.length());
for(a=0;a<f;a++){var h=b.attributes.getAt(a);(!h.visible||h.visible.get())&&this.columnHeaders.addItem(new d.essentialsHtmlViewer.mapping.infrastructure.ui.components.Table.TableColumnHeaderViewModel(this.app,this.libraryId,this.columnSharedState,h.displayName.get(),c[h.name.get()],a))}};a.prototype.setCurrentPageWithinTab=function(b){this.currPageWithinTab[b]?this.currPageWithinTab[b]!==this.presentableResults.currPageNumber.get()&&this.presentableResults.currPageNumber.set(this.currPageWithinTab[b]):
this.currPageWithinTab[b]=this.presentableResults.currPageNumber.get()};a.prototype.updateCurrentPageAndScrollPosWithinTab=function(b,a){this.currScrollPosWithinTab[this.curFeatureSet.get().uniqueId]=a;this.currPageWithinTab[this.curFeatureSet.get().uniqueId]=b};a.prototype._handlePageResultsChange=function(b){var b=b?b:{type:null},a=new g.eventArgs.ResultsPageChangedEventArgs;a.featureSetCollection=this.featureSetCollection.get();a.newValue=b.type==="clear"?new ObservableCollection:this.resultsPage;
this.app.event("ResultsPageChangedEvent").publish(a)};return a}(h.ResultsViewModel);h.TabbedResultsViewModel=f})(g.results||(g.results={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){function c(a,b){var c=this;this.BEGIN_EMPHASIS="{{-begin-emphasis-}}";this.END_EMPHASIS="{{-end-emphasis-}}";this._emphasis={beginTag:"<em>",endTag:"</em>"};this.iconUri=new Observable("");this.text=new Observable(a);if(b)this._emphasis.beginTag=b.emphasisBeginTag||"<em>",this._emphasis.endTag=b.emphasisEndTag||"</em>";this._beginRegex=RegExp(this._emphasis.beginTag,"ig");this._endRegex=RegExp(this._emphasis.endTag,
"ig");this.plainText=new Observable("");this.plainText.syncTransform(this.text,function(b){return b.replace(c._beginRegex,"").replace(c._endRegex,"")});this.safeText=new Observable("");this.safeText.syncTransform(this.text,function(b){return c.sanitizeText(b)})}c.prototype.sanitizeText=function(a){if(!a)return"";a=a.replace(this._beginRegex,this.BEGIN_EMPHASIS).replace(this._endRegex,this.END_EMPHASIS);a=String.escapeHtmlEncode(a);return a.replace(RegExp(this.BEGIN_EMPHASIS,"ig"),"<strong>").replace(RegExp(this.END_EMPHASIS,
"ig"),"</strong>")};c.prototype.toString=function(){return this.plainText.get()};return c}();d.SearchHintItem=f})(d.search||(d.search={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){function c(){}c.POINT="POINT";c.MULTI_POINT="MULTI_POINT";c.LINE="LINE";c.POLYGON="POLYGON";c.FREEHAND_POLYGON="FREEHAND_POLYGON";c.POLYLINE="POLYLINE";c.FREEHAND_POLYLINE="FREEHAND_POLYLINE";c.RECTANGLE="RECTANGLE";c.TRIANGLE="TRIANGLE";c.CIRCLE="CIRCLE";c.ELLIPSE="ELLIPSE";c.ARROW="ARROW";c.LEFT_ARROW="LEFT_ARROW";c.RIGHT_ARROW="RIGHT_ARROW";c.UP_ARROW="UP_ARROW";c.DOWN_ARROW="DOWN_ARROW";c.EXTENT="EXTENT";return c}();
d.DrawMode=f})(d.tools||(d.tools={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){(function(f){(function(c){var a=function(b){function a(c,d){b.call(this,c,d);this.hoistedMenuViewModel=new Observable(a.emptyMenuViewModel);this.hasHoistedMenu=new Observable(false);this.hasExecutableMenuItems=new Observable(false);this.inlineMenuIsOpen=new Observable(false);this.panelMaximized=new Observable(false);this.showingMaximizeButton=new Observable(false);this.resizeY=this.resizeX=false;if(!a.emptyMenuViewModel)a.emptyMenuViewModel=
new g.menus.MenuViewModel(c,d)}__extends(a,b);a.prototype.initialize=function(a){b.prototype.initialize.call(this,a);if(a.resizeX)this.resizeX=a.resizeX;if(a.resizeY)this.resizeY=a.resizeY;this.menuRegion=a.menuRegion||null;a.showMaximizeButton!=void 0&&this.showingMaximizeButton.set(a.showMaximizeButton)};return a}(d.framework.ui.ViewContainer.ViewContainerViewModel);c.SmartPanelViewModel=a})(f.SmartPanel||(f.SmartPanel={}))})(h.components||(h.components={}))})(g.ui||(g.ui={}))})(g.infrastructure||
(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){(function(f){(function(c){var a=function(b){function a(){b.apply(this,arguments);this.paneItems=new ObservableCollection;this.defaultPaneItems=new ObservableCollection;this.displayedPaneItems=new ObservableCollection;this.expanded=new Observable(false);this.headerIsVisible=new Observable(true);this.showXButton=new Observable(true);this.selectorIconUri=new Observable("");this.selectorText=new Observable("")}__extends(a,b);a.prototype.initialize=
function(a){b.prototype.initialize.call(this,a);a&&(a.hasOwnProperty("headerIsVisible")&&this.headerIsVisible.set(!!a.headerIsVisible),a.hasOwnProperty("showXButton")&&this.showXButton.set(!!a.showXButton),a.hasOwnProperty("selectorIconUri")&&this.selectorIconUri.set(a.selectorIconUri),a.hasOwnProperty("selectorText")&&this.selectorText.set(a.selectorText))};a.prototype.findPaneItemById=function(b){return d.framework.utils.ArrayUtils.firstOrDefault(this.paneItems.getItems(),function(a){return a.id&&
a.id===b})};a.prototype.findDisplayedPaneItemById=function(b){return d.framework.utils.ArrayUtils.firstOrDefault(this.displayedPaneItems.getItems(),function(a){return a.id&&a.id===b})};return a}(d.essentialsHtmlViewer.mapping.infrastructure.ui.components.SmartPanel.SmartPanelViewModel);c.MultiPaneViewModel=a})(f.MultiPane||(f.MultiPane={}))})(h.components||(h.components={}))})(g.ui||(g.ui={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){(function(f){(function(c){var a=function(b){function a(){b.apply(this,arguments);this.currentPaneItem=new Observable(null);this.headerIsVisible=new Observable(true);this.showXButton=new Observable(true)}__extends(a,b);a.prototype.initialize=function(a){b.prototype.initialize.call(this,a);a&&(a.hasOwnProperty("headerIsVisible")&&this.headerIsVisible.set(!!a.headerIsVisible),a.hasOwnProperty("showXButton")&&this.showXButton.set(!!a.showXButton))};
a.prototype.onDestroy=function(){b.prototype.onDestroy.call(this);this.currentPaneItem.set(null);this.app=this.currentPaneItem=null};return a}(d.framework.ui.ViewModelBase);c.PaneViewModel=a})(f.MultiPane||(f.MultiPane={}))})(h.components||(h.components={}))})(g.ui||(g.ui={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){(function(f){(function(c){var a=function(b){function a(){b.apply(this,arguments);this._isDestroyed=false}__extends(a,b);a.prototype.destroy=function(){b.prototype.destroy.call(this);this._isDestroyed=true};a.prototype.onClose=function(){};a.prototype.handleClickClose=function(){if(this.viewModel&&this.onClose)this.onClose(this.viewModel.currentPaneItem.get());this._isDestroyed||this.app.command("DestroyView").execute(this.id)};return a}(d.framework.ui.ViewBase);
c.PaneView=a})(f.MultiPane||(f.MultiPane={}))})(h.components||(h.components={}))})(g.ui||(g.ui={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(g){(function(f){(function(c){var a=function(b){function a(){b.apply(this,arguments);this.resizeX=this.resizeY=false;this._menuViews={};this._menuItemInvokedSubscriptionToken=null}__extends(a,b);a.prototype.attach=function(a){var c=this;b.prototype.attach.call(this,a);if(this.configuration.resizableParentRegion)if(this.app.site&&this.app.site.isInitialized)a=this.app.viewManager.getExistingRegionByName(this.configuration.resizableParentRegion),
this.resizableRegion=a.domElement;else this.app.event("SiteInitializedEvent").once(this,function(){var b=c.app.viewManager.getExistingRegionByName(c.configuration.resizableParentRegion);c.resizableRegion=b.domElement});else if(this.app.site&&this.app.site.isInitialized)a=this.app.viewManager.getExistingRegionByName(this.regionName),this.resizableRegion=a.domElement;else this.app.event("SiteInitializedEvent").once(this,function(){var b=c.app.viewManager.getExistingRegionByName(c.regionName);c.resizableRegion=
b.domElement});if(this.viewModel.resizeX)this.resizeX=this.viewModel.resizeX;else if(this.configuration.resizeX)this.resizeX=this.configuration.resizeX;if(this.viewModel.resizeY)this.resizeY=this.viewModel.resizeY;else if(this.configuration.resizeY)this.resizeY=this.configuration.resizeY;$(this.app.getHostElement()).on("onclick.handle-resize-error",function(){$(c.app.getHostElement()).off("mousemove.header-resize touchmove.header-resize");c.resizePreviewElement.parentNode!=null&&c.resizableRegion.parentNode.removeChild(c.resizePreviewElement)});
this.viewModel.panelMaximized.bind(this,function(b){b?$(c.resizableRegion).attr("data-maximized","true"):$(c.resizableRegion).attr("data-maximized","false")});this._initializeEvents();this.app.command("MaximizePanel").register(this,function(b){return c._togglePanelMaximized(b,"maximize")},this._canExecuteMaximizeRestoreOperations);this.app.command("RestorePanel").register(this,function(b){return c._togglePanelMaximized(b,"restore")},this._canExecuteMaximizeRestoreOperations)};a.prototype._initializeEvents=
function(){var b=this;this.app.event("PanelRegionRestoredEvent").subscribe(this,function(a){a===b.resizableRegion&&b.viewModel.panelMaximized.set(false)});this.app.event("PanelRegionMaximizedEvent").subscribe(this,function(a){a===b.resizableRegion&&b.viewModel.panelMaximized.set(true)})};a.prototype._togglePanelMaximized=function(b,a){b===this.id&&a==="maximize"&&this.maximizePanel();b===this.id&&a==="restore"&&this.minimizePanel()};a.prototype._canExecuteMaximizeRestoreOperations=function(){return this.viewModel.showingMaximizeButton.get()?
true:false};a.prototype._handleViewActivatedInContainerEvent=function(c){b.prototype._handleViewActivatedInContainerEvent.call(this,c);if(this.viewModel&&this.viewModel.getDescriptorForActiveView(c))if(c instanceof a===true)c.setParentPanel(this),(c=c.viewModel.currentView)&&c.viewModel&&c.isActive&&this.hoistMenuForView(c);else{for(var d=this._parentPanel,f;d;)d.viewModel.headerIsVisible.get()&&(f=d),d=d._parentPanel;f?f.hoistMenuForView(c):this.hoistMenuForView(c)}};a.prototype.activated=function(){b.prototype.activated.call(this)};
a.prototype.deactivated=function(){b.prototype.deactivated.call(this)};a.prototype.destroy=function(){b.prototype.destroy.call(this);this._unsubscribeMenuItemInvokedSubscription();for(var a in this._menuViews)this._menuViews.hasOwnProperty(a)&&this.app.viewManager.destroyView(this._menuViews[a]);this._parentPanel=this._menuViews=null};a.prototype.openHoistedMenuInRegion=function(b){this._destroyHoistedMenuOwnerViewIfExists();this.hoistedMenuOwnerView=this.createMenuView(this.viewModel.hoistedMenuViewModel.get());
this.hoistedMenuOwnerView.regionName=b;this.app.viewManager.activateView(this.hoistedMenuOwnerView)};a.prototype.resolveWidget=function(b,a){if(b==="SmartPanelHoistedMenu"){if(!this.hoistedMenuId)return;this._destroyHoistedMenuOwnerViewIfExists();this.hoistedMenuOwnerView=this.createMenuView(a);return this.viewModel.menuRegion?null:this.hoistedMenuOwnerView}return null};a.prototype.createMenuView=function(b){var a=this,c=this.app.viewManager.createView({markupResource:"Mapping/infrastructure/menus/MenuView.html",
type:"geocortex.essentialsHtmlViewer.mapping.infrastructure.menus.MenuView",libraryId:"Mapping.Infrastructure"});c.libraryId=this.libraryId;c.configuration.menuId=this.hoistedMenuId;b&&(c.attach(b),this.auto(b.hasExecutableMenuItems,this,function(b){!b&&!a.viewModel.menuRegion&&a.viewModel.inlineMenuIsOpen.set(false)}));this._menuViews[c.id]=c;this._unsubscribeMenuItemInvokedSubscription();this._menuItemInvokedSubscriptionToken=this.app.event("MenuItemInvokedEvent").subscribe(this,function(b){b.menuView.id in
a._menuViews&&(a.viewModel.menuRegion||a.viewModel.inlineMenuIsOpen.set(false),a.app.viewManager.deactivateView(b.menuView))});var d=this.app.event("ViewDeactivatedEvent").subscribe(this,function(b){if(b===c)a.app.event("ViewDeactivatedEvent").unsubscribe(d),b.viewModel=null,a.app.viewManager.destroyView(b),delete a._menuViews[c.id]});b.menuContext.pulse();return c};a.prototype.handleTapMenuButton=function(){var b=this;if(this.viewModel.menuRegion)if(this.hoistedMenuOwnerView&&this.hoistedMenuOwnerView.regionName===
this.viewModel.menuRegion&&this.hoistedMenuOwnerView.isActive){var a=this.hoistedMenuOwnerView.viewModel&&this.hoistedMenuOwnerView.viewModel.menuSourceView;this._destroyHoistedMenuOwnerViewIfExists();a&&this.app.viewManager.activateView(a)}else this.openHoistedMenuInRegion(this.viewModel.menuRegion);else this.viewModel.inlineMenuIsOpen.set(!this.viewModel.inlineMenuIsOpen.get()),this.viewModel.inlineMenuIsOpen.get()&&(this.app.event("FlyoutActivated").publish(this),a={view:this.hoistedMenuOwnerView,
onOtherInteracted:function(){b.viewModel.inlineMenuIsOpen.set(false);b.app.event("FlyoutDeactivated").publish(b)}},this.app.command("TapToDismiss").execute(a))};a.prototype.hoistMenuForView=function(b){var f=this;if(b!==this.hoistedMenuOwnerView){var g=this.app.menuRegistry.getMenuWidgetsForView(b);if(!g||!g.length)this.viewModel.inlineMenuIsOpen.get()&&this.viewModel.inlineMenuIsOpen.set(false),this.viewModel.hasHoistedMenu.set(false),this.viewModel.hoistedMenuViewModel.set(c.SmartPanelViewModel.emptyMenuViewModel),
this.viewModel.hasExecutableMenuItems.removeSync(),this.viewModel.hasExecutableMenuItems.set(false);else{var h=g[0],g=new d.essentialsHtmlViewer.mapping.infrastructure.menus.MenuViewModel(this.app,this.libraryId);g.menuSourceView=b;h.context&&h.context.isObservable?g.menuContext.sync(h.context):g.menuContext.sync(h.widgetViewModel.menuContext);this.hoistedMenuId=h.menuId;this.viewModel.hoistedMenuViewModel.set(g);this.viewModel.hasHoistedMenu.set(true);this.viewModel.hasExecutableMenuItems.sync(g.hasExecutableMenuItems);
$(h.domElement).addClass(a.HoistedClassName);var k=this.app.event("ViewUnhostedEvent").subscribe(this,function(a){a.view===b&&(f.app.event("ViewUnhostedEvent").unsubscribe(k),$(h.domElement).removeClass("hidden-hoisted-menu"))})}}};a.prototype.setParentPanel=function(b){this._parentPanel=b};a.prototype.handleMaximizeToggleClick=function(){this.viewModel.panelMaximized.get()?this.minimizePanel():this.maximizePanel()};a.prototype.maximizePanel=function(){this.viewModel.panelMaximized.set(true);this.app.command("ResizeShell").execute();
this.app.event("ApplicationResizedEvent").publish();this.app.event("PanelRegionMaximizedEvent").publish(this.resizableRegion)};a.prototype.minimizePanel=function(){this.viewModel.panelMaximized.set(false);this.app.command("ResizeShell").execute();this.app.event("ApplicationResizedEvent").publish();this.app.event("PanelRegionRestoredEvent").publish(this.resizableRegion)};a.prototype._unsubscribeMenuItemInvokedSubscription=function(){if(this._menuItemInvokedSubscriptionToken)this.app.event("MenuItemInvokedEvent").unsubscribe(this._menuItemInvokedSubscriptionToken),
this._menuItemInvokedSubscriptionToken=null};a.prototype.handleHeaderMouseDown=function(b){var a=this;if(!this.viewModel.panelMaximized.get()){$(this.app.getHostElement()).off("mouseup.header-click touchend.header-click");var c=true;$(this.app.getHostElement()).one("mouseup.header-click touchend.header-click",function(){c=false});setTimeout(function(){c&&a.resizableRegion&&($(a.app.getHostElement()).off("mouseup.header-click touchend.header-click"),a.resizeSmartPanel(b.pageX,b.pageY),b.preventDefault())},
250)}};a.prototype.handleHeaderTouchStart=function(b){var a=this;if(this.viewModel.panelMaximized.get())return true;for(var c=b.target||b.srcElement;c!=this.root;){if($(c).is("button"))return true;c=c.parentElement}$(this.app.getHostElement()).off("touchend.header-click");var d=true;$(this.app.getHostElement()).one("touchend.header-click",function(){d=false});setTimeout(function(){d&&a.resizableRegion&&(b.preventDefault(),$(a.app.getHostElement()).off("touchend.header-click"),a.resizeSmartPanel(b.targetTouches[0].pageX,
b.targetTouches[0].pageY))},250);b.preventDefault();return true};a.prototype.resizeSmartPanel=function(b,a){var c=this;if(!this.resizeX&&!this.resizeY)this.app.trace.debug("This panel is not configured to be resizable!");else{var d={};d.initialX=b;d.initialY=a;this.app.event("PanelResizeStartEvent").publish({viewId:this.id,resizeInformation:d});if(this.resizePreviewElement===null||this.resizePreviewElement===void 0)this.resizePreviewElement=document.createElement("div"),this.resizePreviewElement.className=
"resize-hint";this.resizePreviewElement.parentElement===null&&(this.app.getHostElement().appendChild(this.resizePreviewElement),$(this.resizePreviewElement).css("left",this.root.getBoundingClientRect().left));d.initialPanelHeight=$(this.resizableRegion).height();d.initialPanelWidth=$(this.resizableRegion).width();if(d.initialPanelHeight===0||d.initialPanelHeight>$(this.resizableRegion.parentElement).height())d.initialPanelHeight=$(this.resizableRegion.parentElement).height();if(d.initialPanelWidth===
0||d.initialPanelWidth>$(this.resizableRegion.parentElement).width())d.initialPanelWidth=$(this.resizableRegion.parentElement).width();if(this.resizeX)$(this.resizePreviewElement).width(d.initialPanelWidth),$(this.resizePreviewElement).height(d.initialPanelHeight),d.minWidth=parseInt($(this.resizableRegion).css("min-width")),d.maxWidth=parseInt($(this.resizableRegion).css("max-width"));else if(this.resizeY)$(this.resizePreviewElement).width(d.initialPanelWidth),$(this.resizePreviewElement).height(d.initialPanelHeight),
d.minHeight=parseInt($(this.resizableRegion).css("min-height")),d.maxHeight=parseInt($(this.resizableRegion).css("max-height"));this._resizeAccordingToSizeConstraints(d,this.resizePreviewElement);$(this.app.getHostElement()).one("mouseup.header-resize touchend.header-resize",function(b){return c._handleResizeEnd(b,d)});$(this.app.getHostElement()).on("mousemove.header-resize ",function(b){c.app.event("PanelResizingEvent").publish({viewId:c.id,resizeInformation:d});d.currentX=b.pageX;d.currentY=b.pageY;
c._resizeAccordingToSizeConstraints(d,c.resizePreviewElement);b.preventDefault();return false});$(this.app.getHostElement()).on("touchmove.header-resize",function(b){c.app.event("PanelResizingEvent").publish({viewId:c.id,resizeInformation:d});var a=b.originalEvent;d.currentX=a.targetTouches[0].pageX;d.currentY=a.targetTouches[0].pageY;c._resizeAccordingToSizeConstraints(d,c.resizePreviewElement);b.preventDefault();return false})}};a.prototype._handleResizeEnd=function(b,a){$(this.app.getHostElement()).off("mousemove.header-resize touchmove.header-resize");
this.resizePreviewElement.parentNode&&this.resizePreviewElement.parentNode.removeChild(this.resizePreviewElement);this._resizeAccordingToSizeConstraints(a,this.resizableRegion);this.app.event("PanelResizeEndEvent").publish({viewId:this.id,resizeInformation:a});this.app.command("ResizeShell").execute();this.app.event("ApplicationResizedEvent").publish()};a.prototype._resizeAccordingToSizeConstraints=function(b,a){if(this.resizeX){var c=b.initialPanelWidth+(b.currentX-b.initialX);c<b.minWidth?$(a).width(b.minWidth):
c>b.maxWidth?$(a).width(b.maxWidth):$(a).width(c)}this.resizeY&&(c=b.initialPanelHeight+(b.initialY-b.currentY),c<b.minHeight?$(a).height(b.minHeight):c>b.maxHeight?$(a).height(b.maxHeight):$(a).height(c))};a.prototype._destroyHoistedMenuOwnerViewIfExists=function(){if(this.hoistedMenuOwnerView){var b=this.hoistedMenuOwnerView;this.hoistedMenuOwnerView=null;b.viewModel=null;this.app.viewManager.destroyView(b);delete this._menuViews[b.id]}};a.HoistedClassName="hidden-hoisted-menu";return a}(d.framework.ui.ViewContainer.ViewContainerView);
c.SmartPanelView=a})(f.SmartPanel||(f.SmartPanel={}))})(g.components||(g.components={}))})(g.ui||(g.ui={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(g){(function(f){(function(c){var a=function(b){function a(c,d){b.call(this,c,d);this._panes=[];this.app.event("ApplicationResizedEvent").subscribe(this,this.handleApplicationResizedEvent);this.app.event("ViewDeactivatedEvent").subscribe(this,this.handleViewDeactivatedEvent)}__extends(a,b);a.prototype.activated=function(){var a=this;b.prototype.activated.call(this);this.viewModel&&this.viewModel.expanded.set(true);setTimeout(function(){a.handleApplicationResizedEvent()},
0)};a.prototype.deactivated=function(){b.prototype.deactivated.call(this);this.viewModel&&this.viewModel.expanded.set(false)};a.prototype.addDefaultPanes=function(){if(!(this.viewModel.displayedPaneItems.getLength()>0))for(var b=0;b<this.viewModel.defaultPaneItems.getLength();b++)this.addPaneItem(this.viewModel.defaultPaneItems.getAt(b))};a.prototype.addPaneItemById=function(b){this.addPaneItem(this.viewModel.findPaneItemById(b))};a.prototype.addPaneItem=function(){throw Error("Not implemented");
};a.prototype.canAddPaneItem=function(b){return b&&this.viewModel?!this.viewModel.displayedPaneItems.contains(b):false};a.prototype.destroyPaneItemById=function(b){this.destroyPaneItem(this.viewModel.findDisplayedPaneItemById(b))};a.prototype.destroyPaneItem=function(b){if(b&&this.canDestroyPaneItem(b)){var a=this.findPaneForPaneItem(b);if(!a)return false;this.viewModel.displayedPaneItems.removeItem(b);this.selector.unselectItem(b);this.app.command("DestroyView").execute(a.id);this.viewModel.displayedPaneItems.length()==
0&&!this.viewModel.headerIsVisible.get()&&this.app.command("DeactivateView").execute(this.id);return true}return false};a.prototype.canDestroyPaneItem=function(b){return b&&this.viewModel?this.viewModel.displayedPaneItems.contains(b):false};a.prototype.clearPaneItems=function(){for(var b=this.viewModel.displayedPaneItems.getLength();b--;)this.destroyPaneItem(this.viewModel.displayedPaneItems.getAt(b))};a.prototype.handleSelectPane=function(b){this.addPaneItem(b)};a.prototype.handleUnSelectPane=function(b){this.destroyPaneItem(b)};
a.prototype.handleClickClose=function(){this.deactivateContainer()};a.prototype.handleApplicationResizedEvent=function(){if(this.viewModel){var b=this.viewModel.regionType.get().indexOf("Stack")>-1,a=this.scrollRegionElement,c=$(".view .pane",a);b&&c.length!==0&&(b=a.clientWidth/c.length-5,$(c).width(b))}};a.prototype.handleViewDeactivatedEvent=function(b){d.framework.utils.ArrayUtils.firstOrDefault(this._panes,function(a){return b===a})&&(d.framework.utils.ArrayUtils.removeItem(this._panes,b),this.handleApplicationResizedEvent())};
a.prototype.findPaneForPaneItem=function(b){for(var a=0;a<this._panes.length;a++){var c=this._panes[a];if(c.viewModel.currentPaneItem.get()===b)return c}return null};a.prototype._executeShowMultiPaneView=function(){this.app.command("ActivateView").execute(this.id);this.addDefaultPanes();this.viewModel.displayedPaneItems.getLength()>0&&this.handleApplicationResizedEvent()};return a}(d.essentialsHtmlViewer.mapping.infrastructure.ui.components.SmartPanel.SmartPanelView);c.MultiPaneView=a})(f.MultiPane||
(f.MultiPane={}))})(g.components||(g.components={}))})(g.ui||(g.ui={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(g){(function(f){(function(c){var a=function(){function b(b,a,c,d,f,g){this.visible=new Observable(true);this.value=new Observable("");this.presentableValue=new Observable("");this.columnDescriptor=new Observable("");this.sortState=new Observable(0);this.sortClass=new Observable("");this._reverseSortingPredicate=this._sortingPredicate=null;this.app=b;this.libraryId=a;this.value.set(d);this.presentableValue.set(d);this.columnDescriptor.set(this.app.getResource(this.libraryId,
"language-ui-table-unsorted").format(this.presentableValue.get()));this._sharedState=c;f==="DateTime"?(this._sortingPredicate=this.buildDateSortingFunction(g),this._reverseSortingPredicate=this.buildReverseDateSortingFunction(g)):(this._sortingPredicate=this.buildSortingFunction(g),this._reverseSortingPredicate=this.buildReverseSortingFunction(g));this.sortClass.syncTransform(this.sortState,function(b){switch(b){case 1:return c.sortedClass;case 2:return c.reverseSortedClass}return c.unsortedClass});
this.sortState.bind(this,this.onSortStateChange)}b.prototype.buildSortingFunction=function(b){return function(a,c){return d.essentialsHtmlViewer.mapping.infrastructure.results.ResultsAttributeHeaderViewModel.collator(a.attributes.getAt(b).presentableValue.get(),c.attributes.getAt(b).presentableValue.get())}};b.prototype.buildReverseSortingFunction=function(b){return function(a,c){return d.essentialsHtmlViewer.mapping.infrastructure.results.ResultsAttributeHeaderViewModel.collator(c.attributes.getAt(b).presentableValue.get(),
a.attributes.getAt(b).presentableValue.get())}};b.prototype.buildDateSortingFunction=function(b){return function(a,c){var f=a.attributes.getAt(b).value.get(),g=c.attributes.getAt(b).value.get(),h=new Date(f),k=new Date(g),n=h!="Invalid Date";return n!==(k!="Invalid Date")?n?-1:1:n?h.getTime()-k.getTime():d.essentialsHtmlViewer.mapping.infrastructure.results.ResultsAttributeHeaderViewModel.collator(f,g)}};b.prototype.buildReverseDateSortingFunction=function(b){return function(a,c){var f=c.attributes.getAt(b).value.get(),
g=a.attributes.getAt(b).value.get(),h=new Date(f),k=new Date(g),n=h!="Invalid Date";return n!==(k!="Invalid Date")?n?-1:1:n?h.getTime()-k.getTime():d.essentialsHtmlViewer.mapping.infrastructure.results.ResultsAttributeHeaderViewModel.collator(f,g)}};b.prototype.onSortStateChange=function(b){if(!this._sharedState.ignoreStateChange){if(b<0||b>2)throw Error("Illegal column sort state: "+b);if(b==0){if(this._sharedState.lastSortedColumn!=this)throw Error("Column sort state out of sync");this._sharedState.lastSortedColumn=
null;this._sharedState.presentableResults.sortingPredicate=null;this._sharedState.presentableResults.unsortCollection();this.columnDescriptor.set(this.app.getResource(this.libraryId,"language-ui-table-unsorted").format(this.presentableValue.get()))}else{if(this._sharedState.lastSortedColumn!=null&&this._sharedState.lastSortedColumn!=this)this._sharedState.ignoreStateChange=true,this._sharedState.lastSortedColumn.sortState.set(0),this._sharedState.ignoreStateChange=false;this._sharedState.lastSortedColumn=
this;if(b==1)this._sharedState.presentableResults.sortingPredicate=this._sortingPredicate,this.columnDescriptor.set(this.app.getResource(this.libraryId,"language-ui-table-sorted-ascending").format(this.presentableValue.get()));else if(b==2)this._sharedState.presentableResults.sortingPredicate=this._reverseSortingPredicate,this.columnDescriptor.set(this.app.getResource(this.libraryId,"language-ui-table-sorted-descending").format(this.presentableValue.get()));else throw Error("Invalid column sort state.");
this._sharedState.presentableResults.sortCollection()}}};return b}();c.TableColumnHeaderViewModel=a;(function(b){b.manualCollator=function(b,a){return!isNaN(b)&&!isNaN(a)?+b-a:b<a?-1:b>a?1:0};b.collator=typeof Intl=="object"&&typeof Intl.Collator=="function"?(new Intl.Collator(void 0,{numeric:true})).compare:d.essentialsHtmlViewer.mapping.infrastructure.results.ResultsAttributeHeaderViewModel.manualCollator;var a=function(){function b(a,c,d,e){this.lastSortedColumn=null;this.presentableResults=a;
this.unsortedClass=c;this.sortedClass=d;this.reverseSortedClass=e;this.reset()}b.prototype.reset=function(){this.ignoreStateChange=false;this.lastSortedColumn=null};return b}();b.SharedState=a})(a=c.TableColumnHeaderViewModel||(c.TableColumnHeaderViewModel={}))})(f.Table||(f.Table={}))})(g.components||(g.components={}))})(g.ui||(g.ui={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){(function(c){var a=function(){return function(){}}();c.TableColumnViewModelInterface=a})(d.Table||(d.Table={}))})(d.components||(d.components={}))})(d.ui||(d.ui={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){(function(c){var a=function(b){function a(){b.apply(this,arguments)}__extends(a,b);return a}(c.TableColumnViewModelInterface);c.TableColumnHeaderViewModelInterface=a})(d.Table||(d.Table={}))})(d.components||(d.components={}))})(d.ui||(d.ui={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(g){(function(f){(function(c){var a=function(b){function a(){b.apply(this,arguments);this._pressStartTime=this._longPressTimer=this.tableContainerElement=null;this._ignoreMouseEventFlag=this._firedTouchOrPress=false;this._lastTouchY=this._pressYStart=null;this._scrollYDeltaThreshold=35;this._firstEvent=null}__extends(a,b);a.prototype.handleColumnHeadClick=function(b,a,c){c.sortState.set((c.sortState.get()+1)%3)};a.prototype.handleMouseDown=
function(b,a,c){this._beginLongPressIfNoEventsInProgress(c,"mouse-down");return true};a.prototype.handleMouseUp=function(){this._cancelLongPressIfEventInProgress("mouse-down");return true};a.prototype.handleTouchStart=function(b,a,c){this._beginLongPressIfNoEventsInProgress(c,"touch-start");return true};a.prototype.handleTouchMove=function(b,a,c){return this.handleTouchEnd(b,a,c)};a.prototype.handleTouchEnd=function(){this._cancelLongPressIfEventInProgress("touch-start");return true};a.prototype.handleClick=
function(b,a,c){var d=this;this.viewModel&&this.viewModel.recordClickEvents.length&&this.viewModel.recordClickEvents.forEach(function(b){return d.app.event(b).publish(c)});return true};a.prototype._beginLongPressIfNoEventsInProgress=function(b,a){if(!this._firstEvent)this._firstEvent=a,this._beginLongPress(b)};a.prototype._cancelLongPressIfEventInProgress=function(b){if(this._firstEvent===b)this._firstEvent=null,this._cancelLongPress()};a.prototype._beginLongPress=function(b){var a=this;this._cancelLongPress();
if(this.viewModel&&this.viewModel.recordLongPressEvents.length)this._longPressTimer=setTimeout(function(){a.viewModel.recordLongPressEvents.forEach(function(c){a.app.event(c).publish(b)},a.viewModel.recordLongPressDuration||1E3)})};a.prototype._cancelLongPress=function(){if(this._longPressTimer)clearTimeout(this._longPressTimer),this._longPressTimer=null};return a}(d.framework.ui.ViewBase);c.TableView=a})(f.Table||(f.Table={}))})(g.components||(g.components={}))})(g.ui||(g.ui={}))})(g.infrastructure||
(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(g){(function(f){(function(c){var a=function(b){function a(c,d){b.call(this,c,d);this.columnHeaders=new ObservableCollection([]);this.records=new ObservableCollection([]);this.presentableRecordCollection=null;this.recordClickEvents=[];this.recordLongPressEvents=[];this.recordLongPressDuration=1E3}__extends(a,b);a.prototype.attachToPresentableCollection=function(b){if(b&&b instanceof d.framework.ui.PresentableCollection)this.presentableRecordCollection=
b,this.records=this.presentableRecordCollection.items};a.prototype.addRecordClickEvents=function(b){this._executeAddEvents(b,0)};a.prototype.addRecordLongPressEvents=function(b){this._executeAddEvents(b,1)};a.prototype._executeAddEvents=function(b,a){var c=this,d=function(b){if(b&&typeof b==="string")if(a===0)c.recordClickEvents=c.recordClickEvents.filter(function(a){return a!==b}),c.recordClickEvents.push(b);else if(a===1)c.recordLongPressEvents=c.recordLongPressEvents.filter(function(a){return a!==
b}),c.recordLongPressEvents.push(b)};b&&dojo.isArray(b)?b.forEach(function(b){return d(b)}):d(b)};return a}(d.framework.ui.ViewModelBase);c.TableViewModel=a})(f.Table||(f.Table={}))})(g.components||(g.components={}))})(g.ui||(g.ui={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){function c(a,b,c){b===void 0&&(b="[anonymous]");c===void 0&&(c={});if(!a)throw Error("Transaction manager is required");this.owner=a;this.displayName=b;this.state=c;this.transactionStatus=d.TransactionStatus.PENDING;this.changes=[]}c.prototype.isTopLevel=function(){return!this.parentTransaction};c.prototype.isComplete=function(){return this.isCommitted()||this.isAborted()};c.prototype.isAborted=function(){return this.transactionStatus==
d.TransactionStatus.ABORTED};c.prototype.isCommitted=function(){return this.transactionStatus==d.TransactionStatus.COMMITTED};c.prototype.add=function(a,b,d){d===void 0&&(d={});b&&!this.isComplete()&&this.changes.push(b instanceof c?b:this._wrapInTransaction(a,b,d))};c.prototype._wrapInTransaction=function(a,b,f){f===void 0&&(f={});b.state=b.state||f;a=new c(this.owner,a);a.transactionStatus=d.TransactionStatus.PENDING;a.parentTransaction=this;a.changes.push(b);return a};c.prototype.hasChanges=function(){return this.changes.length>
0};c.prototype.commit=function(){return this.owner.commitTransaction(this)};c.prototype.rollback=function(){return this.owner.rollbackTransaction(this)};c.prototype.performUndo=function(){var a=this;return!this.hasChanges()?Promise.resolve():Promise.reduce(this.changes.slice().reverse(),function(b,c){if(c)return c.performUndo(c.state,a)},null)};c.prototype.performRedo=function(){var a=this;return!this.hasChanges()?Promise.resolve():Promise.reduce(this.changes,function(b,c){if(c)return c.performRedo(c.state,
a)},null)};return c}();d.UndoTransaction=f})(d.undo||(d.undo={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){d.getFeatureHeatMap=function(d){return d&&d.mapService?d.mapService.heatMap:null};d.getHeatMapRenderer=function(d){if(!d||!d.mapService||!d.mapService.serviceLayer)return null;d=d.mapService.serviceLayer.renderer;return d instanceof esri.renderer.HeatmapRenderer?d:null}})(d.VisualizationUtils||(d.VisualizationUtils={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){function c(a,b){this.currentLayer=new Observable(null);this.isEnabled=new Observable(false);this.isSupported=new Observable(false);this.app=a;this.libraryId=b;this.currentLayer.bind(this,this.handleCurrentLayerChanged)}c.prototype.initialize=function(a){if(a.viewId)this.viewId=a.viewId;if(a.displayName)this.displayName=a.displayName};c.prototype.canSupport=function(){return false};c.prototype.handleCurrentLayerChanged=function(){throw Error("Not implemented");
};c.prototype.handleActivate=function(){throw Error("Not implemented");};c.prototype.handleApply=function(){throw Error("Not implemented");};return c}();d.VisualizationProviderBase=f})(d.visualization||(d.visualization={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){return function(c,a){var b=this;this.esriLayer=c;this.templateType="single-item";this.swatchElement=null;this.label=new Observable("");this.description=new Observable("");this.isVisible=new Observable(true);this.isVisibleInLayerListLegend=new Observable(true);this.isCluster=false;this.expanded=new Observable(true);this.expanderClass=new Observable;this.children=new ObservableCollection;this.children.useThrottling=!!a;
this.expanderClass.syncTransform(this.expanded,function(b){return b?"tree-expander expanded":"tree-expander collapsed"});this.expanded.pulse();this.isVisibleInLayerListLegend.syncTransform(this.isVisible,function(a){return!b.isCluster?true:a})}}();d.LegendItem=f})(d.legend||(d.legend={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(c){c[c.NotFound=0]="NotFound";c[c.Rendered=1]="Rendered";c[c.Show=2]="Show";c[c.Hide=3]="Hide";c[c.Pending=4]="Pending";c[c.Error=5]="Error"})(d.LegendItemProviderResponseCode||(d.LegendItemProviderResponseCode={}));var f=function(){return function(c,a){this.code=new Observable(c);this.item=a}}();d.LegendItemProviderResponse=f})(d.legend||(d.legend={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){return function(c,a){this.identifier=c;this._provider=a}}();d.LegendItemProviderEntry=f})(d.legend||(d.legend={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){function c(){}c.registerLegendItemProvider=function(a){var b=this,c=function(a,c){b._legendItemInfos.push({uniqueId:a,legendItem:c});for(var d=0;d<b._legendItemCallbacks.length;d++)if(a===b._legendItemCallbacks[d].uniqueId){b._legendItemCallbacks[d].callback(c);b._legendItemCallbacks.splice(d,1);break}},d=function(b){var a=b.essLayer&&b.essLayer.mapService&&b.essLayer.mapService.id||b.children&&b.children.length()&&
b.children.getAt(0).essLayer&&b.children.getAt(0).essLayer.mapService&&b.children.getAt(0).essLayer.mapService.id||b.esriLayer.id,b=b.essLayer&&b.essLayer.id||b.sublayerId||null;return a+(b!=null?"."+b:"")},f=function(b){if(b){if(b.templateType==="group"){var a;if(a=b.children.length())a:{a=b.children.get();if(a.length)for(var g,h=0;h<a.length;h++){var k=a[h].sublayerId||a[h].essLayer&&a[h].essLayer.id;h===0&&(g=k);if(k!==g||a[h].templateType!=="single-item"){a=false;break a}}a=true}if(a){g=b.children.getAt(0);
c(d(g),b);return}if(b.children&&b.children.length()){g=0;for(a=b.children.length();g<a;g++)h=b.children.getAt(g),f(h)}}b.templateType==="single-item"&&c(d(b),b)}};dojo.aspect.after(a,"provide",function(a){var c=a.code.get();if(c===4||c===2)if(c===2)a.item&&f(a.item);else var d=a.code.bind(b,function(b){a.code.unbind(d);b===2&&a.item&&f(a.item)});return a});this._providers.push(a)};c.getProviders=function(){return this._providers};c.getLegendItemWhenAvailable=function(a,b){this.getLegendItemByIdWhenAvailable(a.uniqueId,
b)};c.getLegendItemByIdWhenAvailable=function(a,b){if(a&&b){for(var c=null,d=0,f=this._legendItemInfos.length;d<f;d++){var g=this._legendItemInfos[d];if(g.uniqueId===a)c=g.legendItem}c?b(c):this._legendItemCallbacks.push({uniqueId:a,callback:b})}};c._providers=[];c._legendItemInfos=[];c._legendItemCallbacks=[];return c}();d.LegendItemProviderFactory=f})(d.legend||(d.legend={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){return function(){}}();d.ResultsPageChangedEventArgs=f})(d.eventArgs||(d.eventArgs={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(g){var f=function(){function c(){}c.fromGeocortexApp=function(a){var b=new c;b.gcxApp=a;b.urlParameters=a.urlParameters;a.isArcGisWebApp?b.mapInfo=g.MapInfo.fromEsriMap(a.map):(b.essentialsVersion=a.site.getEssentialsVersion(),b.mapInfo=g.MapInfo.fromViewerApp(a));b.map=b.mapInfo.map;return b};c.prototype.getGeometryService=function(){return this._geometryService?this._geometryService:this.geometryServiceUrl?this._geometryService=new esri.tasks.GeometryService(this.geometryServiceUrl):
this.gcxApp?d.GeometryUtils.getGeometryService(this.gcxApp):null};return c}();g.AppInfo=f})(d.gis||(d.gis={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(g){var f=function(){function c(){this.subtypeDomains={};this.subtypeDomainInfos={};this.isVisible=true}c.fromEsriField=function(a,b,d){var e=new c;e.name=a.name;e.type=a.type;e.alias=d?d.displayName||a.alias:a.alias;e.isVisible=d?d.visible:true;e.searchable=d?d.searchable:true;e.editable=a.editable;e.nullable=a.nullable;e.length=a.length;e.esriField=a;e.isTypeField=b&&b.typeIdField===a.name;if(b){if(e.isTypeField&&!a.domain){var f=new esri.layers.CodedValueDomain;
f.codedValues=[];f.type="codedValue";b.types.forEach(function(b){f.codedValues.push({name:b.name,code:b.id})});e.domainInfo=g.DomainInfo.create(f);e.domain=f}else e.domainInfo=g.DomainInfo.create(a.domain),e.domain=a.domain;b.types&&b.types.forEach(function(b){for(var c in b.domains)if(b.domains.hasOwnProperty(c)&&c===a.name){c=b.domains[c];e.subtypeDomains[b.id.toString()]=c;e.subtypeDomainInfos[b.id.toString()]=g.DomainInfo.create(c);break}})}return e};c.fromGcxField=function(a){var b=new esri.layers.Field;
new c;b.name=a.name;b.type=d.essentials.Field.convertToEsriFieldType(a.dataType);b.alias=a.displayName;b.editable=false;b.nullable=true;return c.fromEsriField(b,null,a)};c.prototype.isNumeric=function(){return dojo.indexOf([d.essentials.EsriFieldTypes.esriFieldTypeOID,d.essentials.EsriFieldTypes.esriFieldTypeSmallInteger,d.essentials.EsriFieldTypes.esriFieldTypeInteger,d.essentials.EsriFieldTypes.esriFieldTypeSingle,d.essentials.EsriFieldTypes.esriFieldTypeDouble],this.type)>=0?true:false};c.prototype.isDate=
function(){return dojo.indexOf([d.essentials.EsriFieldTypes.esriFieldTypeDate],this.type)>=0?true:false};c.prototype.isText=function(){return dojo.indexOf([d.essentials.EsriFieldTypes.esriFieldTypeString],this.type)>=0?true:false};c.prototype.isCodedValueDomain=function(){return this.domainInfo&&this.domainInfo.isCodedValueDomain()};c.prototype.hasSubtypeCodedValueDomains=function(){for(var a in this.subtypeDomainInfos)if(this.subtypeDomainInfos.hasOwnProperty(a)&&this.subtypeDomainInfos[a].isCodedValueDomain())return true;
return false};c.prototype.getCodedValueDomain=function(){return this.domain};c.prototype.getSubtypeCodedValueDomains=function(){var a={},b;for(b in this.subtypeDomainInfos)if(this.subtypeDomainInfos.hasOwnProperty(b)&&this.subtypeDomainInfos[b].isCodedValueDomain())a[b]=this.subtypeDomainInfos[b].domain;return a};c.prototype.resolveCodedDomainValue=function(a,b){var c=null;this.domainInfo&&(c=this.domainInfo.getName(a));if(c==null){var d=this.subtypeDomainInfos[b];d&&(c=d.getName(a))}return c};return c}();
g.FieldInfo=f})(g.gis||(g.gis={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(g){var f=function(){function c(){this.fields=[];this.isUserCreated=false;this.isExpanded=this.includeInLayerList=true;this._fieldsRetrieved=this._visible=false}c.fromEsriLayerInfo=function(a,b){var f=new c;f.esriLayerInfo=a;f.id=a.id+"";f.name=a.name;f.displayName=a.name;f.parentLayerId=a.parentLayerId?a.parentLayerId.toString():null;f.subLayerIds=a.subLayerIds?dojo.map(a.subLayerIds,function(b){return b.toString()}):null;f.uniqueId=b.id.replace(".",
"..")+"."+a.id;f.url=d.essentials.utilities.DecomposedUri.appendToPath(b.url,"/"+a.id);f.queryable=true;f.dataProvider="Default";f._visible=a.defaultVisibility;return f};c.fromEsriFeatureLayer=function(a){var b=new c;b.id=a.id+"";b.name=a.name;b.displayName=a.name;b.uniqueId=a.id;b.url=a.url;b.queryable=true;b.dataProvider="Default";b._featureLayer=a;b._visible=a.defaultVisibility;b.subLayerIds=null;b.parentLayerId=null;return b};c.fromGcxLayer=function(a){var b=new c;b.gcxLayer=a;b.id=a.id;b.name=
a.name;b.displayName=a.displayName||a.name;b.uniqueId=a.mapService.id+"."+a.id;b.dataProvider=a.dataProvider||"Default";b.isExpanded=a.isExpanded;b.isUserCreated=a.isUserCreated;if(a.mapService.drawingBehavior==d.essentials.DrawingBehavior.FEATURE_LAYER)b.url=a.mapService.serviceLayer.url;else if(a.mapService.mapServiceType==d.essentials.MapServiceType.DYNAMIC||a.mapService.mapServiceType==d.essentials.MapServiceType.TILED)b.url=d.essentials.utilities.DecomposedUri.appendToPath(a.mapService.serviceLayer.url,
"/"+a.id);else if(a.mapService.serviceLayer instanceof esri.layers.WMSLayer)b.url=a.url;if(a.parentLayerId)b.parentLayerId=a.parentLayerId;if(a.subLayerIds)b.subLayerIds=a.subLayerIds;b.includeInLayerList=a.includeInLayerList;b.queryable=a.queryable&&a.fields.length>0&&a.supportsQuery;b._visible=a.configuredVisible;return b};c.prototype.getFields=function(){var a=this,b=new dojo.Deferred;this._fieldsRetrieved?b.resolve(this.fields):this.getInitializedFeatureLayer().then(function(c){for(var d=0;d<
c.fields.length;d++){var f=c.fields[d],k=a.gcxLayer?a.gcxLayer.getFieldByName(f.name):null,f=g.FieldInfo.fromEsriField(f,c,k);a.fields.push(f)}a._fieldsRetrieved=true;b.resolve(a.fields)},function(a){b.errback(a)});return b};c.prototype.getInitializedFeatureLayer=function(){var a=this;return this.gcxLayer?this.gcxLayer.getFeatureLayer():new Promise(function(b,c){if(!a._featureLayer)a._featureLayer=new esri.layers.FeatureLayer(a.url);if(a._featureLayer.loaded)b(a._featureLayer);else if(a._featureLayer.__attached_error)c(a._featureLayer.__attached_error);
else var e=a._featureLayer.on("load",function(){e.remove();f.remove();if(a.gcxLayer.wmsLayerName)for(var c=a.gcxLayer.fields,g=a._featureLayer.fields.length-1;g>=0;g--){var i=a._featureLayer.fields[g];i.name==="gml:id"&&a._featureLayer.fields.splice(g,1);i.type=d.essentials.Field.convertToEsriFieldType(c[g].dataType)}b(a._featureLayer)}),f=a._featureLayer.on("error",function(b){e.remove();f.remove();a._featureLayer.__attached_error=b;c(b)})})};c.prototype.setDefinitionExpression=function(a){var b=
this.serviceLayerInfo.serviceLayer;if(b instanceof esri.layers.ArcGISDynamicMapServiceLayer){var c=b.layerDefinitions||[];!a||a=="1 = 1"?delete c[parseInt(this.id)]:c[parseInt(this.id)]=a;b.setLayerDefinitions(c)}else b instanceof esri.layers.FeatureLayer&&(!a||a=="1 = 1"?b.setDefinitionExpression(null):b.setDefinitionExpression(a))};c.prototype.getDefinitionExpression=function(){var a=this.serviceLayerInfo.serviceLayer;return a instanceof esri.layers.ArcGISDynamicMapServiceLayer?(a.layerDefinitions||
[])[parseInt(this.id)]:null};c.prototype.isVisible=function(){return this.gcxLayer?this.gcxLayer.isVisible():this._visible};c.prototype.areAllAncestorsVisible=function(){for(var a=this.serviceLayerInfo.findLayerById(this.parentLayerId);a!==null&&a!==void 0;){if(!a.isVisible())return false;a=this.serviceLayerInfo.findLayerById(a.parentLayerId)}return true};c.prototype.setVisibility=function(a,b,c,d){b===void 0&&(b=false);c===void 0&&(c=false);d===void 0&&(d=150);var f=false;c&&this.serviceLayerInfo&&
this.serviceLayerInfo.serviceLayer&&(f=this.serviceLayerInfo.supportsLayerVisibility());this.gcxLayer?this.gcxLayer.setVisibility(a,b||f):this.setEsriLayerVisibility(a,b||f);f&&this.serviceLayerInfo.refresh(d)};c.prototype.setEsriLayerVisibility=function(a,b){b===void 0&&(b=false);if((this._visible=a)||this.serviceLayerInfo.serviceLayer.visible){var c={mapServiceId:this.serviceLayerInfo.id,layerId:this.id,visibility:a},e,f;f=this.serviceLayerInfo.serviceLayer;switch(this.serviceLayerInfo.serviceType){case d.essentials.MapServiceType.DYNAMIC:if((e=
this.serviceLayerInfo.serviceLayer.visibleLayers.slice(0))&&e.length||f.layerInfos&&f.layerInfos.length){e.length===1&&e[0]==-1&&e.pop();f=e.indexOf(parseInt(this.id));if(a){if(f!==-1)break;if(this.subLayerIds&&this.subLayerIds.length)break;e.push(parseInt(this.id))}else{if(f===-1)break;e.splice(f,1)}e.length||e.push(-1);e.InternallyChangedLayer=c;this.serviceLayerInfo.serviceLayer.setVisibleLayers(e,b)}else f.setVisibility(a),dojo.publish("LayerVisibilityChange",[Array(c)]);break;case d.essentials.MapServiceType.WMS:if(f!==
null){var g=[];g.InternallyChangedLayer=c;for(f=e=0;f<this.serviceLayerInfo.layers.length;f++){var h=this.serviceLayerInfo.layers[f];if(h.isVisible()&&(h.subLayerIds===null||h.subLayerIds.length===0)&&h.areAllAncestorsVisible())if(h=h.gcxLayer?h.gcxLayer.wmsLayerName:h.serviceLayerInfo.serviceLayer.id,this.gcxLayer&&this.gcxLayer.wmsLayerName===h||this.serviceLayerInfo.serviceLayer.id===h||h!==null&&h!=="")g[e]=h,e++}b?(this.serviceLayerInfo.serviceLayer.visibleLayers=g.slice(0),dojo.publish("LayerVisibilityChange",
[Array(c)])):this.serviceLayerInfo.serviceLayer.setVisibleLayers(g)}break;case d.essentials.MapServiceType.FEATURE:case d.essentials.MapServiceType.GEORSS:case d.essentials.MapServiceType.KML:case d.essentials.MapServiceType.BING:case d.essentials.MapServiceType.TILED:case d.essentials.MapServiceType.WMTS:case d.essentials.MapServiceType.IMAGE:case d.essentials.MapServiceType.WEBTILED:if(f!==null)if(this.serviceLayerInfo.layers.length===1)a?f.show():f.hide(),dojo.publish("LayerVisibilityChange",[Array(c)]);
else throw Error("Visibility of individual layers cannot be set for this Map Service: {0}".format(this.displayName));break;default:throw Error("Cannot set layer visibility. Unknown MapService type.");}}};c.prototype.getMinScale=function(){var a;a=this.gcxLayer?this.gcxLayer.minScale:this._featureLayer?this._featureLayer.minScale:this.esriLayerInfo.minScale;return this.serviceLayerInfo&&this.serviceLayerInfo.serviceLayer.minScale?Math.min(a,this.serviceLayerInfo.serviceLayer.minScale):a};c.prototype.getMaxScale=
function(){var a;a=this.gcxLayer?this.gcxLayer.maxScale:this._featureLayer?this._featureLayer.maxScale:this.esriLayerInfo.maxScale;return this.serviceLayerInfo&&this.serviceLayerInfo.serviceLayer.maxScale?Math.max(a,this.serviceLayerInfo.serviceLayer.maxScale):a};return c}();g.LayerInfo=f})(g.gis||(g.gis={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){function c(){this.serviceLayers=[];this.markupLayer=new Observable}c.fromEsriMap=function(a){var b=new c;b.map=a;b.markupLayer.set(a.graphics);for(var f=a.layerIds.concat(a.graphicsLayerIds),e=0;e<f.length;e++){var g=a.getLayer(f[e]),g=d.ServiceLayerInfo.fromEsriLayer(g);b.serviceLayers.push(g)}return b};c.fromViewerApp=function(a){var b=c.fromEssentialsMap(a.site.essentialsMap);b.markupLayer.sync(a.markupLayer);return b};
c.fromEssentialsMap=function(a){var b=new c;b.gcxMap=a;b.map=a.getMap();b.markupLayer.set(a.getMap().graphics);for(var f=0;f<a.mapServices.length;f++){var e=d.ServiceLayerInfo.fromGcxMapService(a.mapServices[f]);b.serviceLayers.push(e)}return b};c.prototype.getLayerInfos=function(){for(var a=[],b=0;b<this.serviceLayers.length;b++)for(var c=this.serviceLayers[b].layers,d=0;d<c.length;d++)a.push(c[d]);return a};c.prototype.getGraphicsLayers=function(){var a=[];a.push(this.map.graphics);for(var b=0;b<
this.map.graphicsLayerIds.length;b++)a.push(this.map.getLayer(this.map.graphicsLayerIds[b]));return a};c.prototype.findMapServiceById=function(a){for(var b=null,c,d=0,f=this.serviceLayers.length;d<f;d++){var g=this.serviceLayers[d];b==null&&(b=!(!g||!g.gcxMapService));if((c=b?g.gcxMapService:g.serviceLayer)&&c.id===a)return g}return null};return c}();d.MapInfo=f})(d.gis||(d.gis={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){function c(){}c.create=function(a){var b=new c;b.domain=a;return b};c.prototype.isCodedValueDomain=function(){return this.domain&&this.domain.type=="codedValue"};c.prototype.getCodedValueDomain=function(){return this.domain};c.prototype.getName=function(a){if(this.isCodedValueDomain())for(var b=0;b<this.getCodedValueDomain().codedValues.length;b++){var c=this.getCodedValueDomain().codedValues[b];if(c.code+""==a+"")return c.name}return null};
return c}();d.DomainInfo=f})(d.gis||(d.gis={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){function c(a,b){this.app=a;this.libraryId=b}c.prototype.initialize=function(){};c.prototype.search=function(){};c.prototype.cancelSearch=function(){};c.prototype.getResource=function(a,b){return this.app.getResource(this.libraryId,a,b)};return c}();d.IdentifyProviderBase=f})(d.identify||(d.identify={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(c){function a(b,a,d){c.call(this,b,0,d);this.layerThemeSettings=[];this.containedMapServices=[];this.configuredVisible=false;this.name=new Observable(a||this.layerList.appInfo.gcxApp.getResource(this.layerList._libraryId,"language-layerlist-default-folder-title"));this._setTooltips();this.layerList&&this.layerList.mapInfo&&this.layerList.mapInfo.gcxMap&&this.layerList.mapInfo.gcxMap.layerThemesInfo&&dojo.connect(this.layerList.mapInfo.gcxMap.layerThemesInfo,
"layerThemeChangedEvent",dojo.hitch(this,this._handleLayerThemeChangedEvent));d._addedFolderReferences.push(this)}__extends(a,c);a.prototype.setVisibility=function(b){c.prototype.setVisibility.call(this,b);if(this._deferredVisibilitySetting==void 0)this.currentUserClickOriginator=false,this.mapService&&this.mapService.setVisibility(b&&this.allAncestorsVisible&&(this.inActiveTheme.get()||this.mapService.isUserCreated))};a.prototype.refreshOnDemandItemCollection=function(b){c.prototype.refreshOnDemandItemCollection.call(this,
b);this.displayItem.set(!!this.children.length())};a.prototype.linkWithMapService=function(b){var a=this;if(b)this.mapService=b,this.layerList._handledMapServiceReferences.push(this.mapService),this.layerList._allMapServiceReferences.indexOf(this.mapService)===-1&&this.layerList._allMapServiceReferences.push(this.mapService),this._setupOpacityBindings(),this.mapService.serviceLayer.on("visibility-change",function(b){if(!(a._deferredVisibilitySetting==void 0&&a.isEffectivelyVisible.get()===b.visible)||
a.isEffectivelyVisible.get()&&!a.inActiveTheme.get()&&!a.mapService.isUserCreated)b=b.visible&&(a.inActiveTheme.get()||a.mapService.isUserCreated),a.isVisible.set(b)})};a.prototype._setupOpacityBindings=function(){var b=this;if(this.containedMapServices.length===1)c.prototype._setupOpacityBindings.call(this);else if(this.containedMapServices.length>1){var a=dojo.filter(this.containedMapServices,function(b){return b.serviceLayer&&b.serviceLayer.setOpacity});Math.max.apply(null,a.map(function(b){return b.serviceLayer.opacity}));
this.canAdjustOpacity.set(true);this.opacity=new Observable(1);this.opacity.bind(this,function(a){for(var c=0;c<b.containedMapServices.length;c++)b.containedMapServices[c].gcxMapService&&b.containedMapServices[c].gcxMapService.setOpacityFilter(a)})}};a.prototype._handleLayerThemeChangedEvent=function(b){var a=this;if(b.currTheme){var c=b.currTheme,b=function(){a.layerList._applyDeferredItemVisibilities(a.layerList.children.get());a._refreshMutuallyExclusiveItemVisibilities()};if(c.isDefaultTheme)this.isVisible.get()!==
this.configuredVisible&&this.isVisible.set(this.configuredVisible),this._setInActiveThemeIfChildrenPresent();else{if(this.layerThemeSettings.length)for(var d=0;d<this.layerThemeSettings.length;d++){var f=this.layerThemeSettings[d];if(c.id===f.theme.id){c=f.visible==void 0?this.configuredVisible:f.visible;this.isVisible.get()!==c&&this.isVisible.set(c);this._setInActiveThemeIfChildrenPresent();b();return}}this.isVisible.set(false);this.inActiveTheme.set(false)}b()}};a.prototype._refreshMutuallyExclusiveItemVisibilities=
function(){this.children.get().forEach(function(b){b.isMutuallyExclusive.get()&&b.isVisible.get()&&b.isVisible.pulse()})};a.prototype._setInActiveThemeIfChildrenPresent=function(){var b=this._recursivelyConfirmChildrenInActiveTheme(this.children.get());!b&&this.inActiveTheme.get()&&this.inActiveTheme.set(false);b&&!this.inActiveTheme.get()&&this.inActiveTheme.set(true)};a.prototype._recursivelyConfirmChildrenInActiveTheme=function(b){for(var a=0;a<b.length;a++)if(b[a].type===0?b[a].children&&b[a].children.length()&&
this._recursivelyConfirmChildrenInActiveTheme(b[a].children.get()):b[a].inActiveTheme.get())return true;return false};return a}(d.LayerListItem);d.LayerListFolderItem=f})(d.layerList||(d.layerList={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(g){var f=function(c){function a(b,a,d,f){c.call(this,b,f||2,d);this._themeSyncHandle=null;this._deferRefreshTimeoutMs=200;this._forceSetAncestorVisibilityOperationActive=false;if(!a)throw Error("LayerListLayerItem Initialization failed. Layer cannot be null");this.layer=a;this._updateVisibilityAtCurrentScale();this.layerList.appInfo.mapInfo.map.on("zoom-end",dojo.hitch(this,this._updateVisibilityAtCurrentScale));if(this.type===2)b=a.gcxLayer?
a.gcxLayer.isVisible()||a.gcxLayer.configuredVisible:true,this.canNotAssignVisibility.set(!this.layer.serviceLayerInfo.supportsLayerVisibility()),this._deferredVisibilitySetting=b,this.isVisible.set(b);this.name.set(a.displayName||a.name);this._setTooltips();this.mapService=a.serviceLayerInfo;d._allMapServiceReferences.indexOf(this.mapService)===-1&&d._allMapServiceReferences.push(this.mapService);this.enableLayerActions=true;this._subscribeEvents();this._setupGcxBindingsIfAvailable()}__extends(a,
c);a.prototype.setVisibility=function(b,a){c.prototype.setVisibility.call(this,b);this._forceSetAncestorVisibilityOperationActive=this._forceSetAncestorVisibilityOperationActive||a;if((!this.canNotAssignVisibility||!this.canNotAssignVisibility.get())&&this.allAncestorsVisible!==void 0&&this._deferredVisibilitySetting==void 0){if((this._forceSetAncestorVisibilityOperationActive||this.layerList.autoActivateAncestorVisibilities&&this.currentUserClickOriginator)&&b===true&&!this.allAncestorsVisible){this.isVisible.get()!==
b&&this.isVisible.set(b);for(var d=this.parent;d&&d.id!==this.layerList.id&&d.isVisible.get();)d=d.parent;if(d&&d.id!==this.layerList.id){d.isVisible.set(true);return}}d=!this.currentUserClickOriginator&&this.mapService.supportsLayerVisibility();this._forceSetAncestorVisibilityOperationActive=this.currentUserClickOriginator=false;var f=b&&this.allAncestorsVisible&&(this.inActiveTheme.get()||this.layer.isUserCreated);this.layer.isVisible()!==f&&this.layer.setVisibility(f,false,d,this._deferRefreshTimeoutMs)}};
a.prototype.updateLegendItems=function(){var b=this;d.legend.LegendItemProviderFactory.getLegendItemWhenAvailable(this.layer,dojo.hitch(this,function(a){b.legendItems.clear();b._populateLegendItem(a)}))};a.prototype.bindToActiveTheme=function(){var b=this;c.prototype.bindToActiveTheme.call(this);this._themeSyncHandle=dojo.subscribe("LayerInActiveThemeChangedEvent",function(a){a&&a===b.layer.gcxLayer&&b.inActiveTheme.set(a.inActiveTheme)})};a.prototype.unbindFromActiveTheme=function(){c.prototype.unbindFromActiveTheme.call(this);
this._themeSyncHandle&&dojo.unsubscribe(this._themeSyncHandle);this._themeSyncHandle=null};a.prototype._subscribeEvents=function(){dojo.subscribe("LayerVisibilityChange",dojo.hitch(this,this._handleLayerVisibilityChange))};a.prototype._onServiceLayerProcessed=function(){this._setupIconUri();this.layerList.enableLegendIntegration&&!this.layer.serviceLayerInfo.serviceLayer.loadError&&d.legend.LegendItemProviderFactory.getLegendItemWhenAvailable(this.layer,dojo.hitch(this,this._populateLegendItem))};
a.prototype._handleLayerVisibilityChange=function(b){if(b&&b.length&&b[0].mapServiceId===this.layer.serviceLayerInfo.id)for(var a=0;a<b.length;a++)if(b[a].layerId===this.layer.id){if(this._deferredVisibilitySetting==void 0&&this.isEffectivelyVisible.get()===b[a].visibility&&(!this.isEffectivelyVisible.get()||this.inActiveTheme.get()||this.layer.isUserCreated))break;this.isVisible.set(b[a].visibility&&(this.inActiveTheme.get()||this.layer.isUserCreated));break}};a.prototype._populateLegendItem=function(b){b.templateType===
"single-item"?(this.legendItems.addItem(b),this.legendSwatch.set(b.swatchElement)):(this.legendItems.addItems(b.children.get()),this.legendItems.length()===1?this.legendSwatch.set(this.legendItems.getAt(0).swatchElement):this.legendItems.length()&&this.legendSwatch.set(this.layerList.multiLegendSwatchElement||this.legendItems.getAt(0).swatchElement));this.legendItems.length()>1?this.legendHasMultipleItems.set(true):this.legendHasMultipleItems.set(false);this.legendItems.length()&&(this.iconUri.set(""),
this.legendTooltip.set(this.legendItems.length()===1?this.layerList.singleLegendIconTooltip.format(this.name.get()):this.layerList.multiLegendIconTooltip),this.legendTooltip.set(this.legendTooltip.get().format(this.name.get())))};a.prototype._setupIconUri=function(){var b=this.layer.gcxLayer,a=b?b.mapService:null;if(this.layer.serviceLayerInfo.serviceLayer.loadError&&this.layerList.serviceLoadFailureIconUri)this.iconUri.set(this.layerList.serviceLoadFailureIconUri),this.iconTooltip.set(this.layerList.serviceLoadFailureIconTooltip?
this.layerList.serviceLoadFailureIconTooltip:"");else if(this.layerList&&this.layerList.enableLayerIcons&&(b&&b.iconUri||a&&this.type===3&&a.iconUri))this.iconUri.set(b.iconUri||a.iconUri),this.iconTooltip.set(this.name.get())};a.prototype._setupGcxBindingsIfAvailable=function(){var b=this;if(this.layer.gcxLayer)if(this.bindToActiveTheme(),!this.layer.serviceLayerInfo.serviceLayer.loaded&&!this.layer.serviceLayerInfo.serviceLayer.loadError)var a=null,c=null,d=function(){a&&dojo.disconnect(a);c&&dojo.disconnect(c);
a=c=null},a=dojo.connect(this.mapService.serviceLayer,"onLoad",function(){d();b._onServiceLayerProcessed()}),c=dojo.connect(this.mapService.serviceLayer,"onError",function(){d();b._onServiceLayerProcessed()});else this._onServiceLayerProcessed()};a.prototype._updateVisibilityAtCurrentScale=function(){var b=false,a=esri.geometry.getScale(this.layerList.appInfo.mapInfo.map);if(this.layer.getMaxScale()==0&&this.layer.getMinScale()==Infinity||isNaN(this.layer.getMaxScale())&&isNaN(this.layer.getMinScale()))b=
true;this.inVisibleScaleRange.set(b||this.layer.getMaxScale()<a&&a<this.layer.getMinScale())};return a}(g.LayerListItem);g.LayerListLayerItem=f})(d.layerList||(d.layerList={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(c){function a(b,a,d){c.call(this,b,a,d,3);if(!a)throw Error("LayerListGraphicsLayerItem Initialization failed. Layer cannot be null");b=a.gcxLayer?a.gcxLayer.isVisible()||a.gcxLayer.configuredVisible:a.serviceLayerInfo.serviceLayer.defaultVisibility||a.isVisible();this.canNotAssignVisibility.set(false);this._deferredVisibilitySetting=b;this.isVisible.set(b)}__extends(a,c);return a}(d.LayerListLayerItem);d.LayerListGraphicsLayerItem=
f})(d.layerList||(d.layerList={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(c){function a(b,a){a===void 0&&(a=[]);c.call(this,a||[]);this._parent=b}__extends(a,c);a.prototype.addItem=function(b){if(b)this._prepItemForAddition(b),c.prototype.addItem.call(this,b),this._processItemPostAddition(b);else throw Error("Layer list item not defined. Cannot insert in collection.");};a.prototype.validateAndAddItem=function(b){if(!b)return false;if(this._validateCanAdd(b))return this.addItem(b),true;console.error("LayerListItemCollection: Cannot add item with id: {0} in collection. Validation failed.".format(b.id));
return false};a.prototype.addItems=function(b){if(b)this._prepItemsForAddition(b),c.prototype.addItems.call(this,b),this._processItemsPostAddition(b);else throw Error("Layer list items are not defined. Cannot insert in collection.");};a.prototype.validateAndAddItems=function(b){if(!b||!b.length)return false;for(var a=0;a<b.length;a++)if(!this._validateCanAdd(b[a]))return console.error("LayerListItemCollection: Cannot add items in collection. Validation failed."),false;this.addItems(b);return true};
a.prototype.insertItem=function(a,d){if(d)this._prepItemForAddition(d),c.prototype.insertItem.call(this,a,d),this._processItemPostAddition(d);else throw Error("Layer list item not defined. Cannot insert at index "+a+" in collection.");};a.prototype.insertItems=function(a,d){if(d)this._prepItemsForAddition(d),c.prototype.insertItems.call(this,a,d),this._processItemsPostAddition(d);else throw Error("Layer list items are not defined. Cannot insert at index "+a+" in collection.");};a.prototype.validateAndInsertItem=
function(a,c){if(!a||!c)return false;if(this._validateCanAdd(c))return this.insertItem(a,c),true;console.error("LayerListItemCollection: Could not insert item with id: {0} in collection. Validation failed.".format(c.id));return false};a.prototype.validateAndInsertItems=function(a,c){if(!c||!c.length)return false;for(var d=0;d<c.length;d++)if(!this._validateCanAdd(c[d]))return console.error("Could not insert items in collection. Validation failed."),false;this.insertItems(a,c);return true};a.prototype.removeItem=
function(a){if(a)this._prepItemForRemoval(a),c.prototype.removeItem.call(this,a);else throw Error("LayerListItemCollection: Cannot remove item at index from collection.");};a.prototype.removeAt=function(a){var d=this.getAt(a);if(d)this._prepItemForRemoval(d),c.prototype.removeAt.call(this,a);else throw Error("LayerListItemCollection: Cannot remove item at index "+a+" from collection.");};a.prototype.removeRange=function(a,d){a=a!=void 0?Math.max(0,a):0;d=d!=void 0?Math.min(d,this.getLength()-1):this.getLength()-
1;this._prepItemsForRemoval(this.get().slice(a,d+1));c.prototype.removeRange.call(this,a,d)};a.prototype.clear=function(){this._prepItemsForRemoval(this.get());c.prototype.clear.call(this)};a.prototype._prepItemForAddition=function(a){var c=this;if(this._parent)a.parent=this._parent,a.parentEffectivelyVisible.sync(a.parent.isEffectivelyVisible),a.setAncestorVisibility(this._parent.isVisible.get()),a._visibilityBindingToken=this._parent.isVisible.bind(a,function(d){a.setAncestorVisibility(d&&c._parent.allAncestorsVisible)}),
this.length()&&this.getAt(0).isMutuallyExclusive.get()&&(a.isMutuallyExclusive.set(true),a.hasRadioToggle.set(true),a.radioGroup.set(this.getAt(0).radioGroup.get())),a._displayItemBindingToken=a.displayItem.bind(a,function(a){if(a)c._parent.hasDisplayedChildren.set(true);else{for(var a=false,b=0;b<c.length();b++)if(c.getAt(b).displayItem.get()){a=true;break}c._parent.hasDisplayedChildren.set(a)}}),a.displayItem.pulse()};a.prototype._processItemPostAddition=function(a){(a.type===1||a.type===2||a.type===
3)&&a.populateMapServicesInParentFolders()};a.prototype._prepItemForRemoval=function(a){a.parentEffectivelyVisible.removeSync();a.parent=null;if(a._visibilityBindingToken&&this._parent)this._parent.isVisible.unbind(a._visibilityBindingToken),a._visibilityBindingToken=null;if(a._displayItemBindingToken&&this._parent&&(a.displayItem.unbind(a._displayItemBindingToken),a._displayItemBindingToken=null,a.displayItem)){for(var c=false,d=0;d<this.length();d++)if(this.getAt(d)!==a&&this.getAt(d).displayItem.get()){c=
true;break}this._parent.hasDisplayedChildren.set(c)}};a.prototype._prepItemsForAddition=function(a){var c=this;dojo.forEach(a,function(a){c._prepItemForAddition(a)})};a.prototype._processItemsPostAddition=function(a){var c=this;dojo.forEach(a,function(a){c._processItemPostAddition(a)})};a.prototype._prepItemsForRemoval=function(a){var c=this;dojo.forEach(a,function(a){c._prepItemForRemoval(a)})};a.prototype._validateCanAdd=function(a){if(a&&this._parent){for(var c=this._parent.layerList.getDescendants(),
d=0;d<c.length;d++){var f=c[d];if(f.mapService&&a.mapService&&f.mapService.serviceLayer===a.mapService.serviceLayer)return false}return true}};return a}(ObservableCollection);d.LayerListItemCollection=f})(d.layerList||(d.layerList={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(h){var f=function(c){function a(a,d,e){var f=this;c.call(this,a,1,e);this._themeSyncHandle=null;this._forceSetAncestorVisibilityOperationActive=false;if(!d)throw Error("LayerListMapServiceItem Initialization failed. MapService cannot be null");a=this.layerList&&this.layerList.mapInfo&&this.layerList.mapInfo.gcxMap&&this.layerList.mapInfo.gcxMap.layerThemesInfo&&this.layerList.mapInfo.gcxMap.layerThemesInfo.layerThemesConfigured?d.gcxMapService&&
d.gcxMapService.serviceLayer?d.gcxMapService.serviceLayer.visible:true:d.gcxMapService?d.gcxMapService.configuredVisible:true;this.name.set(d.gcxMapService?d.gcxMapService.displayName:"");this._setTooltips();this.mapService=d;e._handledMapServiceReferences.push(d);e._allMapServiceReferences.indexOf(d)===-1&&e._allMapServiceReferences.push(d);this._deferredVisibilitySetting=a;this.isVisible.set(a);this._setupOpacityBindings();this._subscribeEvents();this._setupBindings();if(d.serviceLayer instanceof
esri.layers.KMLLayer)if(d=d.serviceLayer,d.loaded)this._kmlLayerLoadHandler(d);else d.on("load",function(a){return f._kmlLayerLoadHandler(a.layer)})}__extends(a,c);a.prototype.setVisibility=function(a,d){c.prototype.setVisibility.call(this,a);this._forceSetAncestorVisibilityOperationActive=this._forceSetAncestorVisibilityOperationActive||d;this._syncChildVisibilitiesIfApplicable(a);if(this.allAncestorsVisible!==void 0&&this._deferredVisibilitySetting==void 0){if((this._forceSetAncestorVisibilityOperationActive||
this.layerList.autoActivateAncestorVisibilities&&this.currentUserClickOriginator)&&a===true&&!this.allAncestorsVisible){this.isVisible.get()!==a&&this.isVisible.set(a);for(var e=this.parent;e&&e.id!==this.layerList.id&&e.isVisible.get();)e=e.parent;if(e&&e.id!==this.layerList.id){e.isVisible.set(true);return}}this._forceSetAncestorVisibilityOperationActive=this.currentUserClickOriginator=false;this.mapService.setVisibility(a&&this.allAncestorsVisible&&(this.inActiveTheme.get()||this.mapService.isUserCreated))}};
a.prototype.bindToActiveTheme=function(){var a=this;c.prototype.bindToActiveTheme.call(this);this._themeSyncHandle=dojo.subscribe("MapServiceInActiveThemeChangedEvent",function(c){c&&c===a.mapService.gcxMapService&&a.inActiveTheme.set(c.inActiveTheme)})};a.prototype.unbindFromActiveTheme=function(){c.prototype.unbindFromActiveTheme.call(this);this._themeSyncHandle&&dojo.unsubscribe(this._themeSyncHandle);this._themeSyncHandle=null};a.prototype._subscribeEvents=function(){var a=this;this.mapService.serviceLayer.on("visibility-change",
function(c){if(!(a._deferredVisibilitySetting==void 0&&a.isEffectivelyVisible.get()===c.visible)||a.isEffectivelyVisible.get()&&!a.inActiveTheme.get()&&!a.mapService.isUserCreated)c=c.visible&&(a.inActiveTheme.get()||a.mapService.isUserCreated),a.isVisible.set(c)})};a.prototype._setupIconUri=function(){this.mapService.serviceLayer.loadError&&this.layerList.serviceLoadFailureIconUri?(this.iconUri.set(this.layerList.serviceLoadFailureIconUri),this.iconTooltip.set(this.layerList.serviceLoadFailureIconTooltip?
this.layerList.serviceLoadFailureIconTooltip:"")):this.mapService.gcxMapService&&this.mapService.gcxMapService.iconUri&&(this.iconUri.set(this.mapService.gcxMapService.iconUri),this.iconTooltip.set(this.name.get()))};a.prototype._syncChildVisibilitiesIfApplicable=function(a){var c=this;switch(this.mapService.serviceType){case d.essentials.MapServiceType.BING:case d.essentials.MapServiceType.TILED:case d.essentials.MapServiceType.WMTS:case d.essentials.MapServiceType.IMAGE:case d.essentials.MapServiceType.WEBTILED:this.children.length()>
0&&this.getDescendants().forEach(function(d){d.type===2&&d.mapService.id===c.mapService.id&&d.isVisible.get()!==a&&d.isVisible.set(a)})}};a.prototype._setupBindings=function(){var a=this;this.mapService.gcxMapService&&this.bindToActiveTheme();if(!this.mapService.serviceLayer.loaded&&!this.mapService.serviceLayer.loadError)var c=null,d=null,f=function(){c&&dojo.disconnect(c);d&&dojo.disconnect(d);c=d=null},c=dojo.connect(this.mapService.serviceLayer,"onLoad",function(){f();a._setupIconUri()}),d=dojo.connect(this.mapService.serviceLayer,
"onError",function(){f();a._setupIconUri()});else this._setupIconUri();if(!this.mapService.serviceLayer.loaded&&!this.mapService.serviceLayer.loadError)var g=this.mapService.serviceLayer.on("load",function(){a._updateVisibilityAtCurrentScale();g.remove()});if(!this.mapService.serviceLayer.getMap())var h=this.layerList.appInfo.map.on("layer-add",function(c){c.layer===a.mapService.serviceLayer&&(a._updateVisibilityAtCurrentScale(),h.remove())});this._updateVisibilityAtCurrentScale();this.mapService.serviceLayer.on("scale-visibility-change",
function(){return a._updateVisibilityAtCurrentScale()})};a.prototype._kmlLayerLoadHandler=function(a){a.folders&&a.folders.length>1&&(this._createKmlFolders(this,a.folders[1],a),this.refreshOnDemandItemCollection())};a.prototype._createKmlFolders=function(a,c,d){for(var f=d.folders,h=0;h<c.subFolderIds.length;h++){for(var m=c.subFolderIds[h],n=null,v=0;v<f.length;v++)if(f[v].id===m){n=f[v];break}if(!n)throw Error("Could not find KML folder with ID '{0}'.".format(m));m=new g.layerList.LayerListKmlFolderItem(this.mapService.id+
m,this.layerList,d,n);this._createKmlFolders(m,n,d);a.children.addItem(m)}};a.prototype._updateVisibilityAtCurrentScale=function(){this.mapService.serviceLayer.loaded&&this.mapService.serviceLayer.getMap()&&this.inVisibleScaleRange.set(this.mapService.serviceLayer.visibleAtMapScale)};return a}(h.LayerListItem);h.LayerListMapServiceItem=f})(g.layerList||(g.layerList={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||
(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(g){(function(f){f.getServiceLayerType=function(c){return c instanceof esri.layers.DynamicMapServiceLayer?c instanceof esri.layers.ArcGISDynamicMapServiceLayer?d.essentials.MapServiceType.DYNAMIC:c instanceof esri.layers.ArcGISImageServiceLayer?d.essentials.MapServiceType.IMAGE:c instanceof esri.layers.WMSLayer?d.essentials.MapServiceType.WMS:d.essentials.MapServiceType.DYNAMIC:c instanceof esri.layers.TiledMapServiceLayer?c instanceof esri.layers.WMTSLayer?
d.essentials.MapServiceType.WMTS:c instanceof esri.layers.WebTiledLayer?d.essentials.MapServiceType.WEBTILED:c instanceof esri.virtualearth.VETiledLayer?d.essentials.MapServiceType.BING:d.essentials.MapServiceType.TILED:c instanceof esri.layers.GraphicsLayer?c instanceof esri.layers.FeatureLayer?esri.layers.StreamLayer&&c instanceof esri.layers.StreamLayer?d.essentials.MapServiceType.STREAM:c instanceof esri.layers.CSVLayer?d.essentials.MapServiceType.CSV:d.essentials.MapServiceType.FEATURE:esri.layers.LabelLayer&&
c instanceof esri.layers.LabelLayer?d.essentials.MapServiceType.LABEL:d.essentials.MapServiceType.GRAPHICS:c instanceof esri.layers.GeoRSSLayer?d.essentials.MapServiceType.GEORSS:c instanceof esri.layers.KMLLayer?d.essentials.MapServiceType.KML:c instanceof esri.layers.MapImageLayer?d.essentials.MapServiceType.MAPIMAGE:d.essentials.MapServiceType.UNKNOWN}})(g.GisUtils||(g.GisUtils={}))})(g.gis||(g.gis={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){d.defaultSymbolColor=function(d){d||(d={});return new dojo.Color({a:d.a?d.a:1,r:d.r?d.r:204,g:d.g?d.g:51,b:d.b?d.b:51})};d.defaultMarkerSymbol=function(){return new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,14,null,this.defaultSymbolColor())};d.defaultLineSymbol=function(){return new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,this.defaultSymbolColor({a:0.8}),2)};d.defaultFillSymbol=
function(){return new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,this.defaultLineSymbol(),this.defaultSymbolColor({a:0.5}))};d.defaultTextSymbol=function(){var d=new esri.symbol.TextSymbol(""),c=new esri.symbol.Font;c.setSize("14pt");c.setFamily("Arial");d.setFont(c);d.setAlign(esri.symbol.TextSymbol.ALIGN_START);return d}})(d.SymbolUtils||(d.SymbolUtils={}))})(d.infrastructure||(d.infrastructure={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var f=function(){function c(a,b){this._canExecuteChangedBindingTokens=[];this._contextPropertyBindingTokens={};if(!d.MenuViewModel||!b)throw Error("MenuViewModel: Could not create menu view model. Input arguments cannot be undefined.");this.menuViewModel=a;this.menuItem=b;this.app=b.app;this.text=new Observable(b.text);this.description=new Observable(b.description);this.canExecute=new Observable(this.computeCanExecute());this.iconUri=
new Observable(b.iconUri);this._setupBindings()}c.prototype.execute=function(){var a=this;this.computeCanExecute()&&(this.menuItem.command?this.menuItem.command.execute(c._computeCommandParameter(this,this.menuItem.commandParameter)):this.menuItem.batchItems.forEach(function(b){return b.command.execute(c._computeCommandParameter(a,b.commandParameter))}))};c.prototype.computeCanExecute=function(){if(this.menuItem.batchItems&&this.menuItem.batchItems.length){for(var a=!!this.menuItem.batchItems.length,
b=0;b<this.menuItem.batchItems.length;b++){var d=this.menuItem.batchItems[b];a&&d.abortBatchOnFailure&&(a=d.command&&d.command.canExecute(c._computeCommandParameter(this,d.commandParameter)))}return a}else return this.menuItem.command&&this.menuItem.command.canExecute(c._computeCommandParameter(this,this.menuItem.commandParameter))};c.prototype.refreshCanExecute=function(){var a=this.computeCanExecute();this.canExecute.get()!==a&&this.canExecute.set(a)};c.prototype.destroy=function(){for(var a=this._canExecuteChangedBindingTokens.length-
1;a>=0;a--){var b=this._canExecuteChangedBindingTokens[a];b.canExecuteEvent.unsubscribe(b.token);this._canExecuteChangedBindingTokens.pop()}for(var c in this._contextPropertyBindingTokens)this._contextPropertyBindingTokens.hasOwnProperty(c)&&(a=this.menuViewModel.menuContext.get(),a[c]&&a[c].unbind(this._contextPropertyBindingTokens[c]));this._canExecuteChangedBindingTokens=this._contextPropertyBindingTokens=null};c.prototype._setupBindings=function(){var a=this,b=function(b){b&&a._canExecuteChangedBindingTokens.push({canExecuteEvent:b.canExecuteChanged,
token:b.canExecuteChanged.subscribe(a,a.refreshCanExecute)})};this.menuItem.batchItems&&this.menuItem.batchItems.length?this.menuItem.batchItems.forEach(function(a){b(a.command)}):b(this.menuItem.command)};c._computeCommandParameter=function(a,b){var c=a.menuViewModel.menuContext.get(),e=function(b){b=b.trim();return b.indexOf("{{")===0&&b.indexOf("}}")>0?(b=b.replace("{{","").replace("}}",""),b.toLowerCase()===d.MenuViewModel.DefaultParameterName.toLowerCase()?c:!c||typeof c[b]==="undefined"?(a.app.trace.warning("Could not find menu item '{0}'.".format(b)),
null):(c[b].isObservable&&(a._contextPropertyBindingTokens[b]&&c[b].unbind(a._contextPropertyBindingTokens[b]),a._contextPropertyBindingTokens[b]=c[b].once(a,a.refreshCanExecute)),c[b])):b};if(b===null||typeof b==="undefined")return c;if(typeof b==="string")return e(b);if(c&&b&&typeof b==="object"){var f={},g;for(g in b)if(b.hasOwnProperty(g)){var k=b[g];f[g]=typeof k==="string"?e(k):k}return f}return b};return c}();d.MenuItemViewModel=f})(d.menus||(d.menus={}))})(d.infrastructure||(d.infrastructure=
{}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(g){(function(g){(function(g){(function(g){var f=function(c){function a(){c.apply(this,arguments)}__extends(a,c);a.prototype.attach=function(a){var d=this.configuration.libraryId||a.libraryId||this.libraryId;a instanceof g.MenuViewModel===false&&(d=new g.MenuViewModel(this.app,d),d.menuContext.set(a),a=d);if((this.viewModel=a)&&!this.viewModel.menuId)this.viewModel.menuId=this.configuration&&this.configuration.menuId||null;this.viewModel.setupMenu();!this.viewModel||!this.viewModel.menuId?
this.app.trace.warning("Could not set up menu view '{0}'. View model or 'menuId' option not found.".format(this.id)):(this.title.set(this.getResource("language-menu-default-title")),c.prototype.attach.call(this,a))};a.prototype.handleMenuItemClick=function(a,c,d){d&&(this.app.event("MenuItemInvokedEvent").publish({menuView:this,menuId:this.viewModel.menuId,menuItem:d}),d.execute())};a.prototype.getDescription=function(a,c,d){if(d.description)c.title=d.description.get()};a.prototype.onDestroy=function(){c.prototype.onDestroy.call(this);
this.app.menuRegistry.destroyMenuWidget(this)};return a}(d.framework.ui.ViewBase);g.MenuView=f})(g.menus||(g.menus={}))})(g.infrastructure||(g.infrastructure={}))})(g.mapping||(g.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));var Feature=null,FeatureSet=null,FeatureSetCollection=null;
dojo.ready(function(){FeatureAttribute=dojo.getObject("geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureAttribute");Feature=dojo.getObject("geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature");FeatureSet=dojo.getObject("geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureSet");FeatureSetCollection=dojo.getObject("geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureSetCollection")});geocortex||(geocortex={});
if(!geocortex.essentialsHtmlViewer)geocortex.essentialsHtmlViewer={};geocortex.essentialsHtmlViewer.version="2.5.0.0620";geocortex.resourceManager.register("Mapping.Infrastructure","inv","Mapping/infrastructure/menus/IconMenuView.html","html","PGRpdiBjbGFzcz0ibWVudS1uby1pdGVtcyIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogdmlzaWJsZU1lbnVJdGVtc317QHRleHQ6IEBsYW5ndWFnZS1tZW51LW5vLWl0ZW1zfSI+PC9kaXY+IDxkaXYgY2xhc3M9Imxpc3QtbWVudSBhY3RpdmUgaGFzLWljb24gaWNvbi1tZW51IiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogdmlzaWJsZU1lbnVJdGVtc317QHNvdXJjZTogdmlzaWJsZU1lbnVJdGVtc30iPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogdmlzaWJsZU1lbnVJdGVtc317QGVuYWJsZWQ6IGNhbkV4ZWN1dGV9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVNZW51SXRlbUNsaWNrfSI+IDxidXR0b24gY2xhc3M9Imxpc3QtbWVudS1kZXRhaWxzIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlTWVudUl0ZW1DbGlja317dGl0bGU6IGRlc2NyaXB0aW9ufSI+IDxpbWcgY2xhc3M9Imxpc3QtbWVudS1pY29uIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaWNvblVyaX17c3JjOiBpY29uVXJpfSIgYWx0PSIgIiAvPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiB0ZXh0fSI+PC9zcGFuPiA8L2J1dHRvbj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping.Infrastructure","inv","Mapping/infrastructure/menus/MenuHyperlinkView.html","html","PGRpdiBjbGFzcz0ibWVudS1oeXBlcmxpbmtzIj4gPHVsIGNsYXNzPSJsaXN0LW1lbnUgYWN0aXZlIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogdmlzaWJsZU1lbnVJdGVtc317QHNvdXJjZTogdmlzaWJsZU1lbnVJdGVtc30iPiA8bGkgY2xhc3M9Imxpc3QtbWVudS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiB2aXNpYmxlTWVudUl0ZW1zfSI+IDxidXR0b24gY2xhc3M9Imxpc3QtbWVudS1idXR0b24iIGRhdGEtYmluZGluZz0ie3RpdGxlOiBkZXNjcmlwdGlvbn17QHRleHQ6IHRleHR9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVNZW51SXRlbUNsaWNrfXtAZW5hYmxlZDogY2FuRXhlY3V0ZX0iPjwvYnV0dG9uPiA8L2xpPiA8L3VsPiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping.Infrastructure","inv","Mapping/infrastructure/menus/MenuView.html","html","PGRpdiBjbGFzcz0ibWVudS1uby1pdGVtcyIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogdmlzaWJsZU1lbnVJdGVtc317QHRleHQ6IEBsYW5ndWFnZS1tZW51LW5vLWl0ZW1zfSI+PC9kaXY+IDxkaXYgY2xhc3M9Imxpc3QtbWVudSBhY3RpdmUgaGFzLWljb24iIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiB2aXNpYmxlTWVudUl0ZW1zfXtAc291cmNlOiB2aXNpYmxlTWVudUl0ZW1zfSI+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiB2aXNpYmxlTWVudUl0ZW1zfXtAZW5hYmxlZDogY2FuRXhlY3V0ZX17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZU1lbnVJdGVtQ2xpY2t9Ij4gPGltZyBjbGFzcz0ibGlzdC1tZW51LWljb24iIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpY29uVXJpfXtzcmM6IGljb25Vcml9e2FsdDogdGV4dH0iIC8+IDxidXR0b24gY2xhc3M9Imxpc3QtbWVudS1kZXRhaWxzIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlTWVudUl0ZW1DbGlja317dGl0bGU6IGRlc2NyaXB0aW9ufSI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHRleHR9Ij48L3NwYW4+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGRlc2NyaXB0aW9ufXtAdGV4dDogZGVzY3JpcHRpb259Ij48L3NwYW4+IDwvYnV0dG9uPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping.Infrastructure","inv","Mapping/infrastructure/results/ResultsFeatureActionsView.html","html","PGRpdiBjbGFzcz0ibGlzdC1tZW51IiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBmZWF0dXJlQWN0aW9uc30iPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogZmVhdHVyZUFjdGlvbnN9e0BldmVudC1vbm1vdXNlb3ZlcjogaGFuZGxlR2V0RGVzY3JpcHRpb259e0BldmVudC1vbmNsaWNrOiBoYW5kbGVNZW51SXRlbUNsaWNrfSI+IDxidXR0b24gY2xhc3M9Imxpc3QtbWVudS1kZXRhaWxzIj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1uYW1lIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogdGV4dH0iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXNjIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogZGVzY3JpcHRpb259Ij48L3NwYW4+IDwvYnV0dG9uPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping.Infrastructure","inv","Mapping/infrastructure/results/ResultsListView.html","html","PGRpdiBjbGFzcz0icmVzdWx0cy1saXN0LWFjdGlvbnMtd2lkZ2V0IiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogZmVhdHVyZVNldENvbGxlY3Rpb259e0B3aWRnZXQ6IFJlc3VsdHNMaXN0QWN0aW9uc1dpZGdldH17QHdpZGdldC1jb250ZXh0OiBmZWF0dXJlU2V0Q29sbGVjdGlvbn17QHdpZGdldC1yZXF1aXJlZDogZmFsc2V9IiBkYXRhLW1lbnUtaWQ9IlJlc3VsdHNMaXN0QWN0aW9ucyIgZGF0YS1tZW51LXRlbXBsYXRlPSJNYXBwaW5nL2luZnJhc3RydWN0dXJlL21lbnVzL01lbnVIeXBlcmxpbmtWaWV3Lmh0bWwiPjwvZGl2PiA8ZGl2IGNsYXNzPSJyZXN1bHRzIj4gIDxkaXYgY2xhc3M9Im5vLXJlc3VsdHMiIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGhhc0ZlYXR1cmVTZXRzfXtAdGV4dDogc2VhcmNoU3VnZ2VzdGlvbn0iIHRhYmluZGV4PSIwIj48L2Rpdj4gICAgPGRpdiBjbGFzcz0icmVzdWx0cy1saXN0IiBkYXRhLWJpbmRpbmc9IntAdmFyOiBzY3JvbGxDb250YWluZXJFbGVtZW50fXtAZXZlbnQtb25zY3JvbGw6IGhhbmRsZVNjcm9sbENoYW5nZX0iIHRhYmluZGV4PSItMSI+IDxkaXYgY2xhc3M9Imxpc3QtbWVudSBhY3RpdmUgaGFzLWljb24iIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHJlc3VsdHNQYWdlfXtAdmlzaWJsZTogcmVzdWx0c1BhZ2V9e0B2YXI6IHJlc3VsdHNMaXN0fSI+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiByZXN1bHRzUGFnZX17QGV2ZW50LW1vdXNlZG93bjogaGFuZGxlTW91c2VEb3dufXtAZXZlbnQtY2xpY2s6IGhhbmRsZUNsaWNrfXtAZXZlbnQtbW91c2VvdXQ6IGhhbmRsZU1vdXNlT3V0fXtAZXZlbnQtbW91c2V1cDogaGFuZGxlTW91c2VVcH17QGV2ZW50LXRvdWNoc3RhcnQ6IGhhbmRsZVRvdWNoU3RhcnR9e0BldmVudC10b3VjaG1vdmU6IGhhbmRsZVRvdWNoTW92ZX17QGV2ZW50LXRvdWNoY2FuY2VsOiBoYW5kbGVUb3VjaENhbmNlbH17QGV2ZW50LXRvdWNoZW5kOiBoYW5kbGVUb3VjaEVuZH0iIHRhYmluZGV4PSIwIj4gPGltZyBjbGFzcz0ibGlzdC1tZW51LWljb24iIGRhdGEtYmluZGluZz0ie3NyYzogaWNvblVyaX17YWx0OiBsYWJlbH17QHZpc2libGU6IGljb25Vcml9IiBhbHQ9IiAiIGFyaWEtaGlkZGVuPSJ0cnVlIiAvPiA8aW1nIGNsYXNzPSJsaXN0LW1lbnUtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7YWx0OiBsYWJlbH17QGhpZGRlbjogaWNvblVyaX0iIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9tYXAtZGVmYXVsdC0yNC5wbmciIGFsdD0iICIgYXJpYS1oaWRkZW49InRydWUiIC8+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyI+IDxidXR0b24gY2xhc3M9Imxpc3QtbWVudS1uYW1lIiBkYXRhLWJpbmRpbmc9Intpbm5lckhUTUw6IGxhYmVsfXtAdmlzaWJsZTogbGFiZWx9e0BldmVudC1tb3VzZWRvd246IGhhbmRsZU1vdXNlRG93bn17QGV2ZW50LWNsaWNrOiBoYW5kbGVDbGlja317QGV2ZW50LW1vdXNlb3V0OiBoYW5kbGVNb3VzZU91dH17QGV2ZW50LW1vdXNldXA6IGhhbmRsZU1vdXNlVXB9e0BldmVudC10b3VjaHN0YXJ0OiBoYW5kbGVUb3VjaFN0YXJ0fXtAZXZlbnQtdG91Y2htb3ZlOiBoYW5kbGVUb3VjaE1vdmV9e0BldmVudC10b3VjaGNhbmNlbDogaGFuZGxlVG91Y2hDYW5jZWx9e0BldmVudC10b3VjaGVuZDogaGFuZGxlVG91Y2hFbmR9Ij48L2J1dHRvbj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXNjIiBkYXRhLWJpbmRpbmc9IntAd2lkZ2V0OiBHZXREZXNjcmlwdGlvbn17QHdpZGdldC1jb250ZXh0OiBAY29udGV4dH0iPjwvc3Bhbj4gPC9zcGFuPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiAgIDxkaXYgY2xhc3M9InBhZ2luZy1jb250cm9sIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBwcmVzZW50YWJsZVJlc3VsdHN9e2NsYXNzTmFtZTogcGFnaW5nQ29udHJvbENsYXNzTmFtZX0iPiA8ZGl2IGNsYXNzPSJwYWdpbmctY29udHJvbC1pbm5lciIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogcHJlc2VudGFibGVSZXN1bHRzfSI+IDxkaXYgY2xhc3M9InBhZ2luZy1yZXN1bHQtaW5mbyI+IDxzcGFuIGNsYXNzPSJwYWdpbmctcmVzdWx0cy10b3RhbCIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogbnVtYmVyT2ZJdGVtc317QHRleHQ6IEBsYW5ndWFnZS1jb21tb24tbm8tcmVzdWx0c30iPjwvc3Bhbj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IG51bWJlck9mSXRlbXN9Ij4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1yZXN1bHRzLWRpc3BsYXlpbmd9Ij48L3NwYW4+Jm5ic3A7PHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGN1cnJJbmRleFN0YXJ0RnJvbU9uZX0iPjwvc3Bhbj4mbmJzcDstJm5ic3A7PHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGN1cnJJbmRleEVuZH0iPjwvc3Bhbj4mbmJzcDsoPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1yZXN1bHRzLXRvdGFsfSI+PC9zcGFuPjombmJzcDs8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogbnVtYmVyT2ZJdGVtc30iPjwvc3Bhbj4pIDwvc3Bhbj4gPC9kaXY+IDxkaXYgY2xhc3M9InBhZ2luZy1idXR0b25zIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogbnVtYmVyT2ZJdGVtc30iPiA8YnV0dG9uIGNsYXNzPSJmaXJzdCIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVBhZ2VGaXJzdH17dGl0bGU6IEBsYW5ndWFnZS1wYWdlLWZpcnN0fSI+PGltZyBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvcGFnaW5nLWNvbnRyb2wtZmlyc3QtNDQucG5nIiBhbHQ9IiAiLz48L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz0icHJldiIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVBhZ2VQcmV2fXt0aXRsZTogQGxhbmd1YWdlLXBhZ2UtcHJldn0iPjxpbWcgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL3BhZ2luZy1jb250cm9sLXByZXZpb3VzLTQ0LnBuZyIgYWx0PSIgIi8+PC9idXR0b24+IDxzcGFuIGNsYXNzPSJwYWdpbmctYnV0dG9ucy1pbmZvIiB0YWJpbmRleD0iMCI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtcmVzdWx0cy1wYWdlfSI+PC9zcGFuPiZuYnNwOzxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBjdXJyUGFnZU51bWJlcn0iPjwvc3Bhbj4mbmJzcDs8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXJlc3VsdHMtcGFnZS1vZn0iPjwvc3Bhbj4mbmJzcDs8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogbGFzdFBhZ2VOdW1iZXJ9Ij48L3NwYW4+IDwvc3Bhbj4gPGJ1dHRvbiBjbGFzcz0ibmV4dCIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVBhZ2VOZXh0fXt0aXRsZTogQGxhbmd1YWdlLXBhZ2UtbmV4dH0iPjxpbWcgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL3BhZ2luZy1jb250cm9sLW5leHQtNDQucG5nIiBhbHQ9IiAiIC8+PC9idXR0b24+IDxidXR0b24gY2xhc3M9Imxhc3QiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVQYWdlTGFzdH17dGl0bGU6IEBsYW5ndWFnZS1wYWdlLWxhc3R9Ij48aW1nIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9wYWdpbmctY29udHJvbC1sYXN0LTQ0LnBuZyIgYWx0PSIgIiAvPjwvYnV0dG9uPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiAgPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping.Infrastructure","inv","Mapping/infrastructure/results/ResultsTableView.html","html","PGRpdiBjbGFzcz0icmVzdWx0cy10YWJsZS1hY3Rpb25zLXdpZGdldCIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGZlYXR1cmVTZXRDb2xsZWN0aW9ufXtAd2lkZ2V0OiBSZXN1bHRzVGFibGVBY3Rpb25zV2lkZ2V0fXtAd2lkZ2V0LWNvbnRleHQ6IGZlYXR1cmVTZXRDb2xsZWN0aW9ufXtAd2lkZ2V0LXJlcXVpcmVkOiBmYWxzZX0iDQogICAgIGRhdGEtbWVudS1pZD0iUmVzdWx0c1RhYmxlQWN0aW9ucyIgZGF0YS1tZW51LXRlbXBsYXRlPSJNYXBwaW5nL2luZnJhc3RydWN0dXJlL21lbnVzL01lbnVIeXBlcmxpbmtWaWV3Lmh0bWwiPjwvZGl2PiA8ZGl2IGNsYXNzPSJyZXN1bHRzIj4gIDxkaXYgY2xhc3M9Im5vLXJlc3VsdHMiIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGhhc0ZlYXR1cmVTZXRzfXtAdGV4dDogc2VhcmNoU3VnZ2VzdGlvbn0iPjwvZGl2PiAgIDxkaXYgY2xhc3M9InRhYi1jb250YWluZXIiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBoYXNGZWF0dXJlU2V0c317QHZhcjogc2Nyb2xsaW5nVGFiQ29udGFpbmVyRWxlbWVudH0iPiA8dGFibGU+IDx0cj4gPHRkIGNsYXNzPSJ0YWItbGVmdC1zY3JvbGwiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiB0YWJDb250cm9sc0VuYWJsZWR9e0BjbGFzcy1kaXNhYmxlZDogbGVmdFNjcm9sbFRhYkRpc2FibGVkfXtAdmFyOiBzY3JvbGxUYWJMZWZ0RWxlbWVudH0iPiA8YnV0dG9uIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVUYWJTY3JvbGxCYWNrfXt0aXRsZTogQGxhbmd1YWdlLXRhYi1zY3JvbGwtcHJldn0iPiA8aW1nIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9jaGV2cm9uLWxlZnQtMTYucG5nIiBhbHQ9IiI+IDwvYnV0dG9uPiA8L3RkPiA8dGQgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogZmVhdHVyZVNldENvbGxlY3Rpb259Ij4gPGRpdiBjbGFzcz0idGFiLWNvbnRhaW5lciIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogZmVhdHVyZVNldENvbGxlY3Rpb259e0B2YXI6IHRhYkNvbnRhaW5lckVsZW1lbnR9Ij4gPHVsIGNsYXNzPSJ0YWItY29udHJvbCIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogZmVhdHVyZVNldHN9e0B2YXI6IHRhYkVsZW1lbnRzfSI+IDxsaSBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBmZWF0dXJlU2V0c30iPiA8YnV0dG9uIGNsYXNzPSJ0YWIiIGRhdGEtYmluZGluZz0ie0BjbGFzcy10YWItYWN0aXZlOiBpc1NlbGVjdGVkSW5Db2xsZWN0aW9ufXtAbm9jbGFzcy10YWI6IGlzU2VsZWN0ZWRJbkNvbGxlY3Rpb259e0BldmVudC1vbmNsaWNrOiBoYW5kbGVUYWJDbGlja30iPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogZGlzcGxheU5hbWV9e3RpdGxlOiBkaXNwbGF5TmFtZX0iPjwvc3Bhbj4gPC9idXR0b24+IDwvbGk+IDwvdWw+IDwvZGl2PiA8L3RkPiA8dGQgY2xhc3M9InRhYi1yaWdodC1zY3JvbGwiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiB0YWJDb250cm9sc0VuYWJsZWR9e0BjbGFzcy1kaXNhYmxlZDogcmlnaHRTY3JvbGxUYWJEaXNhYmxlZH17QHZhcjogc2Nyb2xsVGFiUmlnaHRFbGVtZW50fSI+IDxidXR0b24gZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVRhYlNjcm9sbEZvcndhcmR9e3RpdGxlOiBAbGFuZ3VhZ2UtdGFiLXNjcm9sbC1uZXh0fSI+IDxpbWcgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL2NoZXZyb24tcmlnaHQtMTYucG5nIj4gPC9idXR0b24+IDwvdGQ+IDwvdHI+IDwvdGFibGU+IDwvZGl2PiAgIDxkaXYgY2xhc3M9IndpZGdldCIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGhhc0ZlYXR1cmVTZXRzfXtAd2lkZ2V0OiBUYWJsZVZpZXdXaWRnZXR9e0B3aWRnZXQtY29udGV4dDogQGNvbnRleHR9e0B3aWRnZXQtcmVxdWlyZWQ6IGZhbHNlfSI+PC9kaXY+ICAgPGRpdiBjbGFzcz0icGFnaW5nLWNvbnRyb2wiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHByZXNlbnRhYmxlUmVzdWx0c30iPiA8ZGl2IGNsYXNzPSJwYWdpbmctY29udHJvbC1pbm5lciIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogcHJlc2VudGFibGVSZXN1bHRzfSI+IDxkaXYgY2xhc3M9InBhZ2luZy1yZXN1bHQtaW5mbyI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IG51bWJlck9mSXRlbXN9e0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLW5vLXJlc3VsdHN9Ij48L3NwYW4+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBudW1iZXJPZkl0ZW1zfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtcmVzdWx0cy1kaXNwbGF5aW5nfSI+PC9zcGFuPiZuYnNwOzxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBjdXJySW5kZXhTdGFydEZyb21PbmV9Ij48L3NwYW4+Jm5ic3A7LSZuYnNwOzxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBjdXJySW5kZXhFbmR9Ij48L3NwYW4+Jm5ic3A7KDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtcmVzdWx0cy10b3RhbH0iPjwvc3Bhbj46Jm5ic3A7PHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG51bWJlck9mSXRlbXN9Ij48L3NwYW4+KSA8L3NwYW4+IDwvZGl2PiA8ZGl2IGNsYXNzPSJwYWdpbmctYnV0dG9ucyIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IG51bWJlck9mSXRlbXN9Ij4gPGJ1dHRvbiBjbGFzcz0iZmlyc3QiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVQYWdlRmlyc3R9e3RpdGxlOiBAbGFuZ3VhZ2UtcGFnZS1maXJzdH0iPjxpbWcgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL3BhZ2luZy1jb250cm9sLWZpcnN0LTQ0LnBuZyIgYWx0PSIgIi8+PC9idXR0b24+IDxidXR0b24gY2xhc3M9InByZXYiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVQYWdlUHJldn17dGl0bGU6IEBsYW5ndWFnZS1wYWdlLXByZXZ9Ij48aW1nIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9wYWdpbmctY29udHJvbC1wcmV2aW91cy00NC5wbmciIGFsdD0iICIvPjwvYnV0dG9uPiA8c3BhbiBjbGFzcz0icGFnaW5nLWJ1dHRvbnMtaW5mbyIgdGFiaW5kZXg9IjAiPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXJlc3VsdHMtcGFnZX0iPjwvc3Bhbj4mbmJzcDs8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogY3VyclBhZ2VOdW1iZXJ9Ij48L3NwYW4+Jm5ic3A7PHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1yZXN1bHRzLXBhZ2Utb2Z9Ij48L3NwYW4+Jm5ic3A7PHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGxhc3RQYWdlTnVtYmVyfSI+PC9zcGFuPiA8L3NwYW4+IDxidXR0b24gY2xhc3M9Im5leHQiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVQYWdlTmV4dH17dGl0bGU6IEBsYW5ndWFnZS1wYWdlLW5leHR9Ij48aW1nIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9wYWdpbmctY29udHJvbC1uZXh0LTQ0LnBuZyIgYWx0PSIgIi8+PC9idXR0b24+IDxidXR0b24gY2xhc3M9Imxhc3QiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVQYWdlTGFzdH17dGl0bGU6IEBsYW5ndWFnZS1wYWdlLWxhc3R9Ij48aW1nIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9wYWdpbmctY29udHJvbC1sYXN0LTQ0LnBuZyIgYWx0PSIgIi8+PC9idXR0b24+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+ICA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping.Infrastructure","inv","Mapping/infrastructure/ui/components/SmartPanel/SmartPanelView.html","html","PGRpdiBjbGFzcz0idmlldy1jb250YWluZXItdmlldyBzbWFydC1wYW5lbCIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogY29udGFpbmVyRWxlbWVudH0iPiAgPGRpdiBjbGFzcz0icGFuZWwtaGVhZGVyIGJhbm5lci1ub3NlbGVjdCIgIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBoZWFkZXJJc1Zpc2libGV9e0B2YXI6IGhlYWRlckVsZW1lbnR9e0BldmVudC1tb3VzZWRvd246IGhhbmRsZUhlYWRlck1vdXNlRG93bn0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7QGV2ZW50LXRvdWNoc3RhcnQ6IGhhbmRsZUhlYWRlclRvdWNoU3RhcnR9e0BjbGFzcy1yZXNpemUtaG9yaXpvbnRhbC1oaW50OiByZXNpemVYfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtAY2xhc3MtcmVzaXplLXZlcnRpY2FsLWhpbnQ6IHJlc2l6ZVl9Ij4gPGRpdiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogdGl0bGVCYXJJc1Zpc2libGV9Ij4gPGJ1dHRvbiBjbGFzcz0icGFuZWwtaGVhZGVyLWJ1dHRvbiByaWdodCBjbG9zZS0xNiIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHNob3dpbmdYQnV0dG9ufXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tDbG9zZX17dGl0bGU6IEBsYW5ndWFnZS1zbWFydC1wYW5lbC1jbG9zZX0iPjwvYnV0dG9uPiA8YnV0dG9uIGNsYXNzPSJwYW5lbC1oZWFkZXItYnV0dG9uIHJpZ2h0IiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc2hvd2luZ01heGltaXplQnV0dG9ufXtAY2xhc3MtbWluaW1pemUtMTY6IHBhbmVsTWF4aW1pemVkfXtAbm9jbGFzcy1tYXhpbWl6ZS0xNjogcGFuZWxNYXhpbWl6ZWR9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVNYXhpbWl6ZVRvZ2dsZUNsaWNrfXt0aXRsZTogQGxhbmd1YWdlLXNtYXJ0LXBhbmVsLW1heGltaXplLXJlc3RvcmV9Ij48L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz0icGFuZWwtaGVhZGVyLWJ1dHRvbiBtZW51LWJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QGVuYWJsZWQ6IGhhc0V4ZWN1dGFibGVNZW51SXRlbXN9e0B2aXNpYmxlOiBoYXNIb2lzdGVkTWVudX17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVRhcE1lbnVCdXR0b259e0B2YXI6IG1lbnVCdXR0b25FbGVtZW50fXt0aXRsZTogQGxhbmd1YWdlLXNtYXJ0LXBhbmVsLW1lbnV9Ij48L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz0icGFuZWwtaGVhZGVyLWJ1dHRvbiBsZWZ0IGJhY2stMTYiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBzaG93aW5nQmFja0J1dHRvbn17QGV2ZW50LWNsaWNrOiBoYW5kbGVDbGlja0JhY2t9e3RpdGxlOiBAbGFuZ3VhZ2Utc21hcnQtcGFuZWwtYmFja30iPjwvYnV0dG9uPiA8aDIgY2xhc3M9InBhbmVsLXRpdGxlIGJhbm5lci1ub3NlbGVjdCI+IDxpbWcgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL2xvYWRlci1zbWFsbC5naWYiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBzaG93QnVzeUluZGljYXRvcn0iIGFsdD0iICIgLz4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGNvbnRhaW5lclRpdGxlfXtAdmlzaWJsZTogY29udGFpbmVyVGl0bGV9Ij48L3NwYW4+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBjb250YWluZXJUaXRsZX0iPiZuYnNwOy0mbmJzcDs8L3NwYW4+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiB2aWV3VGl0bGV9e0B2aXNpYmxlOiB2aWV3VGl0bGV9Ij48L3NwYW4+IDwvaDI+IDwvZGl2PiA8ZGl2IGNsYXNzPSJzbWFydC1wYW5lbC1ob2lzdGVkLW1lbnUtaW5saW5lIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaW5saW5lTWVudUlzT3Blbn17QHdpZGdldDogU21hcnRQYW5lbEhvaXN0ZWRNZW51fXtAd2lkZ2V0LXJlcXVpcmVkOiBmYWxzZX17QHdpZGdldC1jb250ZXh0OiBob2lzdGVkTWVudVZpZXdNb2RlbH0iPjwvZGl2PiA8ZGl2IGRhdGEtYmluZGluZz0ie0Bkb206IGhlYWRlckluc2VydERvbUVsZW1lbnR9Ij48L2Rpdj4gPC9kaXY+ICAgPGRpdiBjbGFzcz0icGFuZWwtc2Nyb2xsLWNvbnRhaW5lciIgZGF0YS1iaW5kaW5nPSJ7ZGF0YS1yZWdpb24tbmFtZTogcmVnaW9uTmFtZX17ZGF0YS1yZWdpb24tYWRhcHRlcjogcmVnaW9uVHlwZX17QHZhcjogc2Nyb2xsUmVnaW9uRWxlbWVudH17QGV2ZW50LW9uc2Nyb2xsOiBoYW5kbGVTY3JvbGxDaGFuZ2V9IiB0YWJpbmRleD0iLTEiPjwvZGl2PiAgIDxkaXYgY2xhc3M9InBhbmVsLWZvb3RlciIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogZm9vdGVyRWxlbWVudH17QHZpc2libGU6IGZvb3Rlckluc2VydERvbUVsZW1lbnR9IiBzdHlsZT0icG9zaXRpb246IGFic29sdXRlIj4gPGRpdiBjbGFzcz0icGFuZWwtZm9vdGVyLWlubmVyIiBkYXRhLWJpbmRpbmc9IntAZG9tOiBmb290ZXJJbnNlcnREb21FbGVtZW50fSI+PC9kaXY+IDwvZGl2PiAgPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping.Infrastructure","inv","Mapping/infrastructure/ui/components/Table/TableView.html","html","PGRpdiBjbGFzcz0icmVzdWx0cy10YWJsZSIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogdGFibGVDb250YWluZXJFbGVtZW50fSI+IDx0YWJsZT4gPHRoZWFkPiA8dHIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogY29sdW1uSGVhZGVyc30iPiA8dGggZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogY29sdW1uSGVhZGVyc317QHZpc2libGU6IHZpc2libGV9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDb2x1bW5IZWFkQ2xpY2t9IiBzY29wZT0iY29sIj4gPGJ1dHRvbiBkYXRhLWJpbmRpbmc9InthcmlhLWxhYmVsOiBjb2x1bW5EZXNjcmlwdG9yfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie2NsYXNzOiBzb3J0Q2xhc3N9e3RpdGxlOiBAbGFuZ3VhZ2UtcmVzdWx0cy1zb3J0fSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0icmVzdWx0LWhlYWRpbmciIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBwcmVzZW50YWJsZVZhbHVlfSI+PC9zcGFuPiA8L2J1dHRvbj4gPC90aD4gPC90cj4gPC90aGVhZD4gPHRib2R5IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHJlY29yZHN9Ij4gPHRyIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IHJlY29yZHN9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7QHNvdXJjZTogYXR0cmlidXRlc30NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtAZXZlbnQtbW91c2Vkb3duOiBoYW5kbGVNb3VzZURvd259DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7QGV2ZW50LW1vdXNldXA6IGhhbmRsZU1vdXNlVXB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7QGV2ZW50LXRvdWNoc3RhcnQ6IGhhbmRsZVRvdWNoU3RhcnR9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7QGV2ZW50LXRvdWNobW92ZTogaGFuZGxlVG91Y2hNb3ZlfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge0BldmVudC10b3VjaGVuZDogaGFuZGxlVG91Y2hFbmR9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7QGV2ZW50LWNsaWNrOiBoYW5kbGVDbGlja30iPiA8dGQgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogYXR0cmlidXRlc317QHZpc2libGU6IHZpc2libGV9Ij4gPGEgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGRpc3BsYXlBc1VybH17QHRleHQ6IHByZXNlbnRhYmxlVmFsdWV9e2hyZWY6IHZhbHVlfSIgdGFyZ2V0PSJfYmxhbmsiPjwvYT4gPGJ1dHRvbiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBkaXNwbGF5QXNVcmx9e0B0ZXh0OiBwcmVzZW50YWJsZVZhbHVlfSIgdGFiaW5kZXg9IjAiPjwvYnV0dG9uPiA8L3RkPiA8L3RyPiA8L3Rib2R5PiA8L3RhYmxlPiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping.Infrastructure","inv","Invariant","json","eyJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXRvZ2dsZS1sb2ctdmlldyI6IkFjdGl2YXRlcyBvciBkZWFjdGl2YXRlcyBsb2cgdmlldy4iLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LWZyZWVoYW5kLXRvb2x0aXAiOiJGaW5kIG91dCBhYm91dCBhbiBhcmVhIG9uIHRoZSBtYXAgZGVmaW5lZCBieSBhIGZyZWVoYW5kIHNoYXBlIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zdGFydC1lZGl0aW5nLW5ldy1mZWF0dXJlIjoiQmVnaW5zIGVkaXRpbmcgYSBuZXcgZmVhdHVyZS4iLCJsYW5ndWFnZS1zdGF0ZXMtZmVhdHVyZS1lZGl0aW5nLXN0YXRlLWRlc2NyaXB0aW9uIjoiVGhlIGNyZWF0ZSBhIGZlYXR1cmUgdG9vbCBpcyBjdXJyZW50bHkgYWN0aXZlLiIsImxhbmd1YWdlLXRvb2xiYXItaWRlbnRpZnktcG9seWxpbmUtZGVzYy1rZXlib2FyZCI6IlRvIGxlYXJuIHdoYXRcdTIwMTlzIHRoZXJlLCB1c2UgYXJyb3dzIHRvIG1vdmUgdGhlIHBvaW50LiBIaXQgRU5URVIgdG8gcGxvdCBhbmQgYmVnaW4gbW92aW5nIHRoZSBuZXh0IHBvaW50LiBIaXQgRU5URVIgdHdpY2UgdG8gZmluaXNoLiIsImxhbmd1YWdlLWNvbW1vbi1jcmVhdGUiOiJDcmVhdGUiLCJsYW5ndWFnZS1sYXllcmxpc3QtdmlzaWJsZS1hdC1leHRlbnQiOiJDdXJyZW50bHkgd2l0aGluIHZpc2libGUgc2NhbGUuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zaG93LW1hcC10aXAtcmVzdWx0cyI6IlNob3dzIG1hcCB0aXAgcmVzdWx0cyBmb3IgYSBGZWF0dXJlU2V0Q29sbGVjdGlvbiBwcmV2aW91c2x5IGFkZGVkIHRvIHRoZSBGZWF0dXJlU2V0TWFuYWdlci4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLW9wZW4tcmVzdWx0cy1mcmFtZSI6IkFjdGl2YXRlcyB0aGUgUmVzdWx0c1JlZ2lvbi4iLCJsYW5ndWFnZS1zdGF0ZXMtbWVhc3VyZS1zdGF0ZS1kZXNjcmlwdGlvbiI6IlRoZSBtZWFzdXJpbmcgdG9vbCBpcyBjdXJyZW50bHkgYWN0aXZlLiIsImxhbmd1YWdlLW1lbnUtc29jaWFsLWxpbmtzLW1lbnUtZGVzYyI6IlNvY2lhbCBMaW5rcyIsImxhbmd1YWdlLW1lbnUtYWRkLWEtZmVhdHVyZSI6IkNyZWF0ZSBhIGZlYXR1cmUiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWhpZ2hsaWdodC1mZWF0dXJlLXNldCI6IkhpZ2hsaWdodHMgYWxsIG9mIHRoZSBmZWF0dXJlcyBpbiB0aGUgc3BlY2lmaWVkIGZlYXR1cmUgc2V0IGluIHRoZSBhY3RpdmUgaGlnaGxpZ2h0IGxheWVyLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tc2hvdy1yZXN1bHRzLWZlYXR1cmUtYWN0aW9uIjoiQ3JlYXRlcyBSZXN1bHRzTGlzdEZlYXR1cmVBY3Rpb25zVmlldyBhbmQgZGlzcGxheXMgdGhlIEZlYXR1cmUgQWN0aW9ucy4iLCJsYW5ndWFnZS10b29sYmFyLW5hdmlnYXRpb24tcGFuLXRvb2x0aXAiOiJDYW5jZWwgYW55IGFjdGl2ZSB0b29scyBhbmQgcHV0IHRoZSBtYXAgaW50byBwYW4gbW9kZSIsImxhbmd1YWdlLXVpLXRhYmxlLXNvcnRlZC1kZXNjZW5kaW5nIjoiQ29sdW1uIGhlYWRlci4gezB9IC0gU29ydGVkIGRlc2NlbmRpbmcuIiwibGFuZ3VhZ2UtY29tbW9uLWZlYXR1cmUtZWRpdGxvZy1kZXNjIjoiRGlzcGxheXMgaW5mb3JtYXRpb24gYWJvdXQgZWRpdGluZyBoaXN0b3J5IG9mIHRoZSBmZWF0dXJlIGxheWVyLiIsImxhbmd1YWdlLWNvb3JkaW5hdGVzLWxvbmdpdHVkZS1hYmJyZXYiOiJMb246IiwibGFuZ3VhZ2UtdG9vbGJhci1ncm91cC1hZHZhbmNlZC1tZWFzdXJlbWVudCI6IkFkdmFuY2VkIE1lYXN1cmVtZW50IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi16b29tLXRvLWZlYXR1cmUiOiJab29tcyB0byBhIGZlYXR1cmUuIiwibGFuZ3VhZ2UtdG9vbGJhci1ncm91cC1maW5kLWRhdGEiOiJGaW5kIERhdGEiLCJsYW5ndWFnZS1tZW51LXNob3ctcmVzdWx0cy1saXN0IjoiTGlzdCBWaWV3IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1mZWF0dXJlLWxheWVyLW1vZHVsZS1yZWZyZXNoLWRhdGEiOiJSZWZyZXNoZXMgbGF5ZXIgZWRpdCBzdW1tYXJpZXMgYW5kIHRoZSBcInN5bmMgbmVlZGVkXCIgZmxhZy4iLCJsYW5ndWFnZS10b29sYmFyLWdyb3VwLWFuYWx5c2lzIjoiQW5hbHlzaXMiLCJsYW5ndWFnZS1tZW51LXRpdGxlIjoiSSB3YW50IHRvLi4uIiwibGFuZ3VhZ2UtdG9vbGJhci10YWItdG9vbHMiOiJUb29scyIsImxhbmd1YWdlLXRvb2xiYXItaW5mb3JtYXRpb24tYWN0aW9ucyI6IkluZm9ybWF0aW9uICYgQWN0aW9ucyIsImxhbmd1YWdlLWNvbW1vbi1mZWF0dXJlLWxheWVyLWRldGFpbHMiOiJTeW5jIFNldHRpbmdzIGZvciB7MH0iLCJsYW5ndWFnZS1tZW51LXZpZXctZWRpdC1sb2ctZGVzYyI6IlByZXBhcmUgbXkgdmlld2VyIGZvciBvZmZsaW5lIHVzZSBpZiByZXF1aXJlZCwgcmV2aWV3IG15IGVkaXRzLCBzZW5kIHRoZW0gdG8gdGhlIHNlcnZlciBhbmQgdXBkYXRlIG15IG9mZmxpbmUgZGF0YS4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXNob3ctcmVzdWx0cy10YWJsZSI6IkRpc3BsYXlzIHRoZSBsaXN0IG9mIGZlYXR1cmVzIGluIHRoZSBnaXZlbiBmZWF0dXJlIHNldCBjb2xsZWN0aW9uIGluIGEgdGFidWxhciB2aWV3LiIsImxhbmd1YWdlLXRvb2xiYXItaWRlbnRpZnktc25hcHBpbmctdG9vbHRpcCI6IkVuYWJsZS9EaXNhYmxlIHNuYXBwaW5nIHdoaWxlIGlkZW50aWZ5aW5nIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1hZGQtbWFya3VwIjoiQWRkcyB0aGUgZ2l2ZW4gZ2VvbWV0cnkgdG8gdGhlIG1hcmt1cCBsYXllci4iLCJsYW5ndWFnZS1yZXN1bHRzLWV4cG9ydC10by1jb25maXJtLXRpdGxlIjoiRG93bmxvYWQgezB9IGZpbGUiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWhpZ2hsaWdodC1mZWF0dXJlIjoiSGlnaGxpZ2h0cyB0aGUgZmVhdHVyZSBpbiB0aGUgYWN0aXZlIGhpZ2hsaWdodCBsYXllci4iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1kcmF3aW5nLXRvb2xzIjoiRHJhdyIsImxhbmd1YWdlLXRvb2xiYXItZ3JvdXAtbWVhc3VyZW1lbnQiOiJNZWFzdXJlIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zdGVwLXpvb20tb3V0IjoiWm9vbXMgb3V0IGEgc3RlcC4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWNsZWFyLXN0b3JhZ2UtZm9yLWFwcGxpY2F0aW9uIjoiQ2xlYXJzIHRoZSBvZmZsaW5lIGRhdGEgZm9yIHRoZSBjdXJyZW50IGFwcGxpY2F0aW9uLiIsImxhbmd1YWdlLW1lbnUtc2hvdy1jaGFydGluZy12aWV3IjoiQ2hhcnRpbmcgVmlldyIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tY2xlYXItZGVmYXVsdC1oaWdobGlnaHRzIjoiUmVtb3ZlcyB0aGUgaGlnaGxpZ2h0cyBmcm9tIHRoZSBkZWZhdWx0IGhpZ2hsaWdodCBsYXllci4iLCJsYW5ndWFnZS1tZW51LXpvb20tb3V0IjoiWm9vbSBvdXQiLCJsYW5ndWFnZS1tZW51LW1hcHRpcC1hY3Rpb25zLWRlc2MiOiJNYXBUaXAgQWN0aW9ucyIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tcnVuLXdvcmtmbG93LXdpdGgtYXJndW1lbnRzIjoiUnVucyBhIHdvcmtmbG93IHdpdGggYSBzZXQgb2YgaW5wdXQgYXJndW1lbnRzLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tY2hhbmdlLWVkaXQtbG9nLWVudHJ5IjoiQ2hhbmdlIGFuIGV4aXN0aW5nIGVkaXQgbG9nIGVudHJ5LiIsImxhbmd1YWdlLWxheWVyLWFjdGlvbnMtdG9vbHRpcCI6IkNsaWNrIHRvIHNlZSBsYXllciBhY3Rpb25zIGF2YWlsYWJsZSBmb3IgezB9IGxheWVyLiIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXJlY3RhbmdsZS10b29sdGlwIjoiRHJhdyBhIHJlY3RhbmdsZSBvbiB0aGUgbWFwIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtZnJlZWhhbmQtZGVzYyI6IkhvbGQgdGhlIG1vdXNlIGJ1dHRvbiBvciB5b3VyIGZpbmdlcnRpcCBkb3duLCB0aGVuIGRyYXcgYSBmcmVlaGFuZCBsaW5lLiIsImxhbmd1YWdlLXRvb2xiYXItc25hcHBpbmctZGlzYWJsZSI6IkRpc2FibGUgU25hcHBpbmciLCJsYW5ndWFnZS1sYXllcmxpc3QtZGVmYXVsdC1mb2xkZXItdGl0bGUiOiJMYXllciBMaXN0IEZvbGRlciIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tY29uZmlybSI6IkRpc3BsYXlzIGEgY29uZmlybS4iLCJsYW5ndWFnZS11aS10YWJsZS11bnNvcnRlZCI6IkNvbHVtbiBoZWFkZXIuIHswfSAtIFVuc29ydGVkIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi11cGRhdGUtZmVhdHVyZSI6IlVwZGF0ZXMgZWl0aGVyIGEgbmV3IG9yIGV4aXN0aW5nIGZlYXR1cmUuIiwibGFuZ3VhZ2UtbWVudS1idWZmZXItaWRlbnRpZnktZmVhdHVyZS1kZXNjIjoiSWRlbnRpZnkgbmVhcmJ5IGZlYXR1cmVzIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtZWxsaXBzZS10b29sdGlwIjoiRHJhdyBhbiBlbGxpcHNlIG9uIHRoZSBtYXAiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWZzbS1jb2xsZWN0aW9uLXNldC1jb21tYW5kIjoiU2V0IHRoZSBwcmVmZXJyZWQgY29tbWFuZCB0byBvcGVuIHRoZSBmZWF0dXJlIHNldCBjb2xsZWN0aW9uIGZvciB0aGUgZ2l2ZW4gc291cmNlIG5hbWUuIiwibGFuZ3VhZ2UtdG9vbGJhci10YXNrcy1wcmludC1tYXAtdG9vbHRpcCI6IkNyZWF0ZSBhIHByaW50YWJsZSB2ZXJzaW9uIG9mIHRoZSBtYXAiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXRvZ2dsZS1kYXRhLWZyYW1lIjoiQWN0aXZhdGVzIG9yIGRlYWN0aXZhdGVzIGRhdGEgZnJhbWUuIiwibGFuZ3VhZ2UtY29tbW9uLWRlbGV0ZSI6IkRlbGV0ZSIsImxhbmd1YWdlLWNvbW1vbi1kb25lIjoiRG9uZSIsImxhbmd1YWdlLXRvb2xiYXItc2hvdy1sYXllcmxpc3QtZGVzYyI6IkRpc3BsYXkgdGhlIGxpc3Qgb2YgYXZhaWxhYmxlIGxheWVycyIsImxhbmd1YWdlLXRvb2xiYXItZWRpdGluZy1zeW5jLXRvb2x0aXAiOiJQdXNoIGFueSBvZmZsaW5lIGVkaXRzIHRvIHRoZSBzZXJ2ZXIgYW5kIGNoZWNrIG91dCBmcmVzaCBkYXRhIiwibGFuZ3VhZ2UtbWVudS1nbG9iYWwtc2VhcmNoLWRlc2MiOiJTZWFyY2ggZm9yIGZlYXR1cmVzIG9uIHRoZSBtYXAuIiwibGFuZ3VhZ2UtbWVudS1lbnRlci1vZmZsaW5lIjoiR28gdG8gb2ZmbGluZSBtb2RlIiwibGFuZ3VhZ2UtdG9vbGJhci10YXNrcy1zaGFyZSI6IlNoYXJlIiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1wb2x5Z29uLWRlc2Mta2V5Ym9hcmQiOiJUbyBsZWFybiB3aGF0XHUyMDE5cyB0aGVyZSwgdXNlIGFycm93cyB0byBtb3ZlIHRoZSBwb2ludC4gSGl0IEVOVEVSIHRvIHBsb3QgYW5kIGJlZ2luIG1vdmluZyB0aGUgbmV4dCBwb2ludC4gSGl0IEVOVEVSIHR3aWNlIHRvIGZpbmlzaC4iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC10ZXh0IjoiVGV4dCIsImxhbmd1YWdlLXN0YXRlcy1zbmFwcGluZy1kZXNjcmlwdGlvbiI6IlNuYXBwaW5nIGlzIGVuYWJsZWQgZm9yIHRoZSBjdXJyZW50IHRvb2wuIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtcG9pbnQtZGVzYy1rZXlib2FyZCI6IlVzZSBhcnJvd3MgdG8gbW92ZSB0aGUgcG9pbnQuIEhpdCBFTlRFUiB0byBhZGQgaXQgdG8gdGhlIG1hcC4iLCJsYW5ndWFnZS10b29sYmFyLWdyb3VwLWVkaXRpbmciOiJFZGl0IERyYXdpbmdzIiwibGFuZ3VhZ2UtY29vcmRpbmF0ZXMtc291dGgtYWJicmV2IjoiUyIsImxhbmd1YWdlLXJlc3VsdHMtbWVudS1kZXNjcmlwdGlvbiI6IkZlYXR1cmUgQWN0aW9ucyBmb3IgUmVzdWx0cyBMaXN0IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zdGVwLXpvb20taW4iOiJab29tcyBpbiBhIHN0ZXAuIiwibGFuZ3VhZ2UtY29vcmRpbmF0ZXMtbm9ydGgtYWJicmV2IjoiTiIsImxhbmd1YWdlLW1lbnUtYWRkLWEtZmVhdHVyZS1kZXNjIjoiQ3JlYXRlIGEgbmV3IGZlYXR1cmUgb24gdGhpcyBsYXllci4iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1lZGl0LWRlc2MiOiJDbGljayBvciB0YXAgYW4gZXhpc3RpbmcgZHJhd2luZyB0byBiZWdpbiBlZGl0aW5nIGl0LiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tdG9nZ2xlLXZpZXciOiJBY3RpdmF0ZXMgb3IgZGVhY3RpdmF0ZXMgYSB2aWV3LiIsImxhbmd1YWdlLXRvb2xiYXItaWRlbnRpZnktZnJlZWhhbmQiOiJGcmVlaGFuZCIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tdGFrZS1hcHBsaWNhdGlvbi1vbmxpbmUiOiJDb25uZWN0cyB0aGUgYXBwbGljYXRpb24gdG8gdGhlIGludGVybmV0LiIsImxhbmd1YWdlLXRvb2xiYXItaWRlbnRpZnktcG9seWxpbmUiOiJMaW5lIiwibGFuZ3VhZ2UtY29tbW9uLWRlYWN0aXZhdGUtdG9vbCI6IkRlYWN0aXZhdGUgVG9vbCIsImxhbmd1YWdlLXRvb2xiYXItbXVsdGl0b29sIjoiTXVsdGktdG9vbCIsImxhbmd1YWdlLW1lbnUtc2hvdy1jaGFydGluZy12aWV3LWRlc2MiOiJTd2l0Y2ggdG8gQ2hhcnRpbmcgVmlldyIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tYWRkLXRleHQtbWFya3VwIjoiUHJvbXB0cyB0aGUgdXNlciBmb3IgdGV4dCB0byBhZGQgYXMgbWFya3VwLiBXaGVuIGNvbXBsZXRlZCwgdGV4dCBtYXJrdXAgaXMgYWRkZWQgYXQgdGhlIHByb3ZpZGVkIGdlb21ldHJ5LiIsImxhbmd1YWdlLXRvb2xiYXItdG9nZ2xlLWJ1ZmZlci1vZmYtbmFtZSI6IkJ1ZmZlcmluZyBPbiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tem9vbS1vdXQtdG8tZXh0ZW50IjoiWm9vbXMgb3V0IHRvIHRoZSBnaXZlbiBleHRlbnQuIiwibGFuZ3VhZ2UtbWVudS1tYXB0aXAtYWN0aW9ucy12aWV3LWRldGFpbHMtZGVzYyI6IlZpZXcgYWRkaXRpb25hbCBkZXRhaWxzIGFib3V0IHRoaXMgZmVhdHVyZSIsImxhbmd1YWdlLW1lbnUtcnVuLXdvcmtmbG93IjoiUGVyZm9ybSBhIHRhc2siLCJsYW5ndWFnZS10b29sYmFyLWVkaXRpbmctbWFuYWdlLW9mZmxpbmUtZGF0YSI6Ik1hbmFnZSBPZmZsaW5lIERhdGEiLCJsYW5ndWFnZS1wYWdlLWZpcnN0IjoiRmlyc3QgcGFnZSIsImxhbmd1YWdlLXRvb2xiYXItZ3JvdXAtdG9vbHMiOiJUb29scyIsImxhbmd1YWdlLXRvb2xiYXItZWRpdGluZy1jcmVhdGUtbmV3LWZlYXR1cmUtZ2VvbG9jYXRpb24iOiJVc2UgR2VvbG9jYXRpb24iLCJsYW5ndWFnZS10b29sYmFyLWVkaXRpbmctZGF0YSI6IkRhdGEiLCJsYW5ndWFnZS1tZW51LXJlc3VsdHMtdGFibGUtYWN0aW9ucy1kZXNjIjoiUmVzdWx0cyBUYWJsZSBBY3Rpb25zIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1vcGVuLWZlYXR1cmUtc2V0LWNvbGxlY3Rpb24iOiJPcGVucyB0aGUgZmVhdHVyZSBzZXQgY29sbGVjdGlvbi4iLCJsYW5ndWFnZS1jb21tb24tbm90aWZpY2F0aW9uIjoiTm90aWZpY2F0aW9uIiwibGFuZ3VhZ2UtbGF5ZXJzZWxlY3Rvci1pY29uLXRvb2x0aXAiOiJ7MH0gaWNvbiIsImxhbmd1YWdlLXN0YXRlcy1kZWZhdWx0LWRlc2NyaXB0aW9uIjoiVGhlIHZpZXdlciBjdXJyZW50bHkgaGFzIG5vdGhpbmcgYWN0aXZlLiIsImxhbmd1YWdlLXRvb2xiYXItaWRlbnRpZnktcG9pbnQtZGVzYyI6IkNsaWNrIG9yIHRhcCBhIGxvY2F0aW9uIG9uIHRoZSBtYXAgdG8gbGVhcm4gd2hhdFx1MjAxOXMgdGhlcmUuIiwibGFuZ3VhZ2UtdG9vbGJhci1idWZmZXJpbmctZW5hYmxlIjoiRW5hYmxlIGJ1ZmZlcmluZyIsImxhbmd1YWdlLXRvb2xiYXItaWRlbnRpZnktcG9seWdvbi10b29sdGlwIjoiRHJhdyBhIGN1c3RvbSBzaGFwZSBvbiB0aGUgbWFwIHRvIGZpbmQgb3V0IGFib3V0IGFuIGFyZWEiLCJsYW5ndWFnZS10b29sYmFyLXNlbGVjdC1sYXllcnMtdG9nZ2xlLW9mZi1uYW1lIjoiTGF5ZXJzIGFyZSBGaWx0ZXJlZCIsImxhbmd1YWdlLW1lbnUtZXhwb3J0LXJlc3VsdHMtdG8tY3N2IjoiRXhwb3J0IHRvIENTViIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLWNpcmNsZS10b29sdGlwIjoiRHJhdyBhIGNpcmNsZSBvbiB0aGUgbWFwIiwibGFuZ3VhZ2UtY29tbW9uLWZlYXR1cmUtdGVtcGxhdGUtcGlja2VyLWRlc2MiOiJTZWxlY3QgYSBmZWF0dXJlIHR5cGUuIiwibGFuZ3VhZ2UtdG9vbGJhci0zcmQtcGFydHktbWFwcy1zaG93LW1hcHMtdG9vbHRpcCI6IkRpc3BsYXkgbGlua2VkIG1hcHMgaW4gdGhlIGV4dGVybmFsIGNvbXBvbmVudCB2aWV3IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1jbGVhci1tYXJrdXAtcXVpZXQiOiJDbGVhcnMgYWxsIG9mIHRoZSBtYXJrdXAgZnJvbSB0aGUgbWFya3VwIGxheWVyIHdpdGhvdXQgcHJvbXB0aW5nIGZvciBjb25maXJtYXRpb24uIiwibGFuZ3VhZ2UtdG9vbGJhci1idWZmZXJpbmctYWx0LWVuYWJsZSI6IkVuYWJsZSBidWZmZXJpbmcgZm9yIGFjdGl2ZSB0b29sLiIsImxhbmd1YWdlLXRvb2xiYXItaWRlbnRpZnktbGF5ZXJzLWNoYW5nZSI6IklkZW50aWZpYWJsZSBMYXllcnMiLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LXBvbHlsaW5lLXRvb2x0aXAiOiJGaW5kIG91dCBhYm91dCBhbiBhcmVhIG9uIHRoZSBtYXAgZGVmaW5lZCBieSBhIGxpbmUiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWNsZWFyLXRlbXBvcmFyeS1tYXJrdXAiOiJSZW1vdmVzIHRlbXBvcmFyeSBtYXJrdXAgY3JlYXRlZCBieSBBZGRUZW1wb3JhcnlNYXJrdXBHZW9tZXRyeS4iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1yZWN0YW5nbGUiOiJSZWN0YW5nbGUiLCJsYW5ndWFnZS10b29sYmFyLXRhYi1lZGl0aW5nIjoiRWRpdGluZyIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tc2V0LWhpZ2hsaWdodC1maWxsLWNvbG9yIjoiU2V0cyB0aGUgZmlsbCBjb2xvciB1c2VkIGZvciBuZXcgaGlnaGxpZ2h0cywgc3BlY2lmaWVkIGluIDYgb3IgOCBkaWdpdCBoZXggaW4gUkdCIG9yIEFSR0IgZm9ybS4iLCJsYW5ndWFnZS10b29sYmFyLWFuYWx5c2lzLWxvY2F0aW9uLWluZm9ybWF0aW9uIjoiTG9jYXRpb24gSW5mb3JtYXRpb24iLCJsYW5ndWFnZS10b29sYmFyLW5hdmlnYXRpb24tem9vbS1pbiI6Ilpvb20gSW4iLCJsYW5ndWFnZS10b29sYmFyLWNsZWFyLWFsbCI6IkNsZWFyIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1mZWF0dXJlLWxheWVyLWNsZWFyLWNhY2hlLXNwZWMiOiJTcGVjaWZ5IHRoaXMgbGF5ZXIgYXMgbm90IHRvIGJlIGNhY2hlZCBvbiBuZXh0IHN5bmMuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1yZW1vdmUtaGlnaGxpZ2h0LWxheWVyIjoiUmVtb3ZlcyB0aGUgaGlnaGxpZ2h0IGxheWVyIHdpdGggdGhlIHNwZWNpZmllZCBuYW1lLCBpZiB0aGVyZSBpcyBvbmUuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zaG93LW1hcC1jYWxsb3V0IjoiRGlzcGxheXMgYSBtYXAgY2FsbG91dCBhbmNob3JlZCB0byBhIGdpdmVuIHBvaW50LiIsImxhbmd1YWdlLXRvb2xiYXItdGFza3MtcHJpbnRpbmciOiJQcmludGluZyIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLWRyYXdpbmciOiJDcmVhdGUiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1jaGFuZ2UtbWFya3VwLXN0eWxlIjoiU3R5bGVzIiwibGFuZ3VhZ2UtdG9vbGJhci1uYXZpZ2F0aW9uLWZ1bGwtZXh0ZW50LXRvb2x0aXAiOiJSZXR1cm4gdG8gdGhlIGZ1bGwgZXh0ZW50IG9mIHRoZSBtYXAiLCJsYW5ndWFnZS1yZXN1bHRzLWV4cG9ydC10by1jb25maXJtLWNvbnRlbnQiOiJUaGUgezB9IGZpbGUgaXMgYWJvdXQgdG8gYmUgZG93bmxvYWRlZC4gQ29uZmlybT8iLCJsYW5ndWFnZS1tZW51LWZvb3Rlci1tZW51LWRlc2MiOiJGb290ZXIgTWVudSIsImxhbmd1YWdlLW1lbnUtbWFwLWxheWVycy1leHBhbmQiOiJFeHBhbmQgYW5kIGNvbGxhcHNlIHswfSBsYXllciBncm91cCIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLWZyZWVoYW5kLXBvbHlnb24tdG9vbHRpcCI6IkRyYXcgYSBmcmVlaGFuZCBzaGFwZSBvbiB0aGUgbWFwIiwibGFuZ3VhZ2UtbWVudS16b29tLXRvLXZpc2libGUtc2NhbGUiOiJab29tIHRvIHZpc2libGUgc2NhbGUiLCJsYW5ndWFnZS1jb29yZGluYXRlcy13ZXN0LWFiYnJldiI6IlciLCJsYW5ndWFnZS1tZW51LWJvb2ttYXJrLWFkZC1kZXNjIjoiQWRkIHRoZSBjdXJyZW50IG1hcCBleHRlbnQgdG8gdGhlIGxpc3Qgb2YgYm9va21hcmtzLCBzbyB0aGF0IEkgY2FuIHJldHVybiB0byBpdCBsYXRlci4iLCJsYW5ndWFnZS10b29sYmFyLWVyYXNlIjoiRXJhc2UiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1lbGxpcHNlLWRlc2MiOiJDbGljayBhbmQgZHJhZyB0byBkcmF3IGFuIGVsbGlwc2Ugb24gdGhlIG1hcC4iLCJsYW5ndWFnZS1zZWFyY2gtZnNjLWRpc3BsYXktbmFtZSI6IlNlYXJjaCBSZXN1bHRzOiB7MH0iLCJsYW5ndWFnZS10b29sYmFyLXNuYXBwaW5nLXNlbGVjdC1sYXllcnMiOiJTZWxlY3QgU25hcHBpbmcgTGF5ZXJzIiwibGFuZ3VhZ2UtbWVudS1zaG93LXJlc3VsdHMtbGlzdC1kZXNjIjoiU3dpdGNoIHRvIExpc3QgVmlldyIsImxhbmd1YWdlLXRvb2xiYXItZ3JvdXAtZmluZC1kYXRhLXRvb2xzIjoiRmluZCIsImxhbmd1YWdlLXRvb2xiYXItbmF2aWdhdGlvbi16b29tLWluLXRvb2x0aXAiOiJEcmF3IGFuIGFyZWEgb24gdGhlIG1hcCB0byB6b29tIHRvIiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1wb2ludC1kZXNjLWtleWJvYXJkIjoiVXNlIGFycm93cyB0byBtb3ZlIHRoZSBwb2ludC4gSGl0IEVOVEVSIHRvIGxlYXJuIHdoYXRcdTIwMTlzIHRoZXJlLiIsImxhbmd1YWdlLXRvb2xiYXItaWRlbnRpZnktZnJlZWhhbmQtcG9seWdvbiI6IkZyZWVoYW5kIFNoYXBlIElkZW50aWZ5IiwibGFuZ3VhZ2UtcmVzdWx0cy1wYWdlIjoiUGFnZSIsImxhbmd1YWdlLWxheWVybGlzdC11c2VyLWFkZGVkLWxheWVycy1mb2xkZXItdGl0bGUiOiJVc2VyIEFkZGVkIExheWVycyIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXBvbHlsaW5lLXRvb2x0aXAiOiJEcmF3IGEgbGluZSBvbiB0aGUgbWFwIiwibGFuZ3VhZ2UtbWVudS12aWV3LWVkaXQtbG9nIjoiU3luYyBvZmZsaW5lIGRhdGEiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1jaXJjbGUiOiJDaXJjbGUiLCJsYW5ndWFnZS1zbWFydC1wYW5lbC1tYXhpbWl6ZS1yZXN0b3JlIjoiTWF4aW1pemUvUmVzdG9yZSBQYW5lbCIsImxhbmd1YWdlLXRvb2xiYXItZWRpdGluZy10b29scyI6IkVkaXQgRmVhdHVyZXMiLCJsYW5ndWFnZS1tZW51LXJ1bi1yZXBvcnQiOiJSdW4gYSBSZXBvcnQiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1kZWxldGUtdG9vbHRpcCI6IkRlbGV0ZSBhbiBleGlzdGluZyBkcmF3aW5nLiIsImxhbmd1YWdlLWNvbW1vbi1mZWF0dXJlLXRlbXBsYXRlLXBpY2tlciI6IkNyZWF0ZSBhIGZlYXR1cmUiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWluaXRpYWxpemUtc2l0ZSI6IlRlbGxzIHRoZSBHZW9jb3J0ZXggRXNzZW50aWFscyBTaXRlIG9iamVjdCB0byBiZWdpbiBpbml0aWFsaXphdGlvbi4iLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LWZyZWVoYW5kLXBvbHlnb24tdG9vbHRpcCI6IklkZW50aWZ5IHRoaW5ncyBvbiB0aGUgbWFwIGJ5IGRyYXdpbmcgYSBmcmVlaGFuZCBzaGFwZSIsImxhbmd1YWdlLW1lbnUtcnVuLXdvcmtmbG93LWRlc2MiOiJTZWxlY3QgZnJvbSBhIGxpc3Qgb2YgYXZhaWxhYmxlIHRhc2tzLiIsImxhbmd1YWdlLXRvb2xiYXItZ3JvdXAtbGF5ZXJzIjoiTGF5ZXJzIiwibGFuZ3VhZ2UtbWVudS1idWZmZXItaWRlbnRpZnktZmVhdHVyZSI6IlNob3cgQnVmZmVyIE9wdGlvbnMiLCJsYW5ndWFnZS10b29sYmFyLW9wZW4tdG9vbGJhciI6Ik9wZW4gdG9vbGJhciIsImxhbmd1YWdlLXRvb2xiYXItdGFiLW1hcCI6Ik1hcCIsImxhbmd1YWdlLXRvb2xiYXItaWRlbnRpZnktZnJlZWhhbmQtZGVzYyI6IkNsaWNrL3RhcCBhbmQgaG9sZCBkb3duLCB0aGVuIGRyYXcgYSBmcmVlaGFuZCBzaGFwZSB0byBsZWFybiB3aGF0XHUyMDE5cyB0aGVyZS4iLCJsYW5ndWFnZS1tZW51LXN3aXRjaC10by1sYXllcmxpc3QtZGVzYyI6IkRpc3BsYXkgdGhlIGxpc3Qgb2YgYXZhaWxhYmxlIGxheWVycyIsImxhbmd1YWdlLXRvb2xiYXItbmF2aWdhdGlvbiI6Ik5hdmlnYXRpb24iLCJsYW5ndWFnZS1tZW51LW9wZW4tb2ZmbGluZS10b29scy1tZW51IjoiTWFuYWdlIG9mZmxpbmUgZGF0YSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tZGVsZXRlLWZlYXR1cmUiOiJEZWxldGVzIGVpdGhlciBhIG5ldyBvciBleGlzdGluZyBmZWF0dXJlLiIsImxhbmd1YWdlLXRvb2xiYXItbmF2aWdhdGlvbi1mdWxsLWV4dGVudCI6IkZ1bGwgRXh0ZW50IiwibGFuZ3VhZ2UtdG9vbGJhci10YXNrcy1wcmludC1tYXAiOiJQcmludCIsImxhbmd1YWdlLXRvb2xiYXItZ3JvdXAtZWRpdC1mZWF0dXJlcyI6IkVkaXQgRmVhdHVyZXMiLCJsYW5ndWFnZS1sYXllcmxpc3Qtb3BlcmF0aW9uYWwtbWFwcy1mb2xkZXItdGl0bGUiOiJPcGVyYXRpb25hbCBMYXllcnMiLCJsYW5ndWFnZS10b29sYmFyLXRhc2tzLWlkZW50aWZ5LXRvb2x0aXAiOiJGaW5kIGRhdGEgb24gdGhlIG1hcCIsImxhbmd1YWdlLW1lbnUtZ2xvYmFsLXNlYXJjaCI6IlNlYXJjaCIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXBvbHlnb24tZGVzYyI6IkNsaWNrIG9yIHRhcCBsb2NhdGlvbnMgdG8gZGVmaW5lIGEgcG9seWdvbi4gRG91YmxlLWNsaWNrL3RhcCB0byBmaW5pc2guIiwibGFuZ3VhZ2UtcmVzdWx0cy1wYWdlLW9mIjoib2YiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWlkZW50aWZ5IjoiRXhlY3V0ZXMgYW4gaWRlbnRpZnkgb3BlcmF0aW9uIG9uIGEgZ2VvbWV0cnkuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1hZGQtdGVtcG9yYXJ5LW1hcmt1cC1nZW9tZXRyeSI6IkFkZHMgYSB0ZW1wb3JhcnkgbWFya3VwIGdyYXBoaWMgdG8gdGhlIG1hcC4gVGhlIENsZWFyVGVtcG9yYXJ5TWFya3VwIGNvbW1hbmQgd2lsbCBjbGVhciB0aGlzIG1hcmt1cC4iLCJsYW5ndWFnZS1jb21tb24tY2xvc2UiOiJDbG9zZSIsImxhbmd1YWdlLXRvb2xiYXItc25hcHBpbmctZW5hYmxlIjoiRW5hYmxlIFNuYXBwaW5nIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1jbG9zZS1yZXN1bHRzLWZyYW1lIjoiRGVhY3RpdmF0ZXMgdGhlIFJlc3VsdHNSZWdpb24uIiwibGFuZ3VhZ2UtbWVudS1pZGVudGlmeS1idWZmZXJlZC1mZWF0dXJlLXNldC1jb2xsZWN0aW9uLWRlc2MiOiJJZGVudGlmeSBmZWF0dXJlcyBuZWFyIHRoZXNlIHJlc3VsdHMiLCJsYW5ndWFnZS10b29sYmFyLWdyb3VwLTNyZC1wYXJ0eS1tYXBzIjoiTGlua2VkIE1hcHMiLCJsYW5ndWFnZS1zdGF0ZXMtZmVhdHVyZS1lZGl0aW5nLXN0YXRlLWdyYXBoaWMtZGVzY3JpcHRpb24iOiJUaGUgY3JlYXRlIGEgZmVhdHVyZSB0b29sIGlzIGN1cnJlbnRseSBlZGl0aW5nIGEgZ3JhcGhpYy4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWFjdGl2YXRlLXZpZXciOiJBY3RpdmF0ZXMgYSB2aWV3LiIsImxhbmd1YWdlLXJlc3VsdHMtdG9nZ2xlLXRhYmxlLXZpZXciOiJTd2l0Y2ggdG8gVGFibGUiLCJsYW5ndWFnZS1yZXN1bHRzLXRvZ2dsZS1saXN0LXZpZXctZGVzYyI6IlZpZXcgcmVzdWx0cyBpbiBsaXN0IGZvcm1hdCIsImxhbmd1YWdlLW1lbnUtem9vbS10by1sYXllci1kZXNjIjoiWm9vbSB0aGUgbWFwIHRvIHRoZSBmdWxsIGV4dGVudCBvZiB0aGUgbGF5ZXIuIiwibGFuZ3VhZ2UtdG9vbGJhci10YWItb2ZmbGluZSI6Ik9mZmxpbmUiLCJsYW5ndWFnZS1tZW51LXNob3ctcmVzdWx0cy10YWJsZS1kZXNjIjoiU3dpdGNoIHRvIFRhYmxlIFZpZXciLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXVwZGF0ZS1hdHRhY2htZW50IjoiVXBkYXRlcyBhIGZlYXR1cmUgYXR0YWNobWVudC4iLCJsYW5ndWFnZS1tZW51LW1hbmFnZS1zeW5jLXNldHRpbmdzIjoiTWFuYWdlIHN5bmMgc2V0dGluZ3MiLCJsYW5ndWFnZS1tZW51LWlkZW50aWZ5LXBvaW50IjoiSWRlbnRpZnkgYnkgcG9pbnQiLCJsYW5ndWFnZS10b29sYmFyLXRhYi1ob21lIjoiSG9tZSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tcmVtb3ZlLXN0YXR1cyI6IlJlbW92ZXMgdGhlIHN0YXR1cyBpbmRpY2F0b3IgZnJvbSB0aGUgc2NyZWVuIHdpdGggdGhlIHNwZWNpZmllZCBJRC4iLCJsYW5ndWFnZS1tZW51LWV4cG9ydC1yZXN1bHRzLXRvLXhsc3gtZGVzYyI6IkV4cG9ydCBSZXN1bHRzIHRvIFhMU1giLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXRvZ2dsZS1yZXN1bHRzLWZyYW1lIjoiQWN0aXZhdGVzIG9yIGRlYWN0aXZhdGVzIFJlc3VsdHMgZnJhbWUuIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtZWRpdC10b29sdGlwIjoiRWRpdCBhbiBleGlzdGluZyBkcmF3aW5nIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1yZW1vdmUtZmVhdHVyZS1zZXQtY29sbGVjdGlvbi1ieS1pZCI6IlJlbW92ZXMgdGhlIHNwZWNpZmllZCBjb2xsZWN0aW9uIGZyb20gdGhlIGZlYXR1cmUgc2V0IG1hbmFnZXIuIiwibGFuZ3VhZ2UtbGF5ZXJzZWxlY3Rvci1zdGF0ZS10b2dnbGUiOiJUb2dnbGUgezB9IGxheWVyIHZpc2liaWxpdHkuIiwibGFuZ3VhZ2UtdG9vbGJhci1uYXZpZ2F0aW9uLWhvbWUiOiJIb21lIiwibGFuZ3VhZ2UtbWVudS1pZGVudGlmeS1kZXNjIjoiQ2xpY2ssIHRhcCwgb3IgZHJhdyBhIHJlY3RhbmdsZSBvbiB0aGUgbWFwIHRvIGlkZW50aWZ5IGZlYXR1cmVzLiIsImxhbmd1YWdlLWxheWVyLWFjdGlvbnMtZGVzYyI6IkRpc3BsYXkgYSBsaXN0IG9mIGxheWVyIGFjdGlvbnMiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXJ1bi13b3JrZmxvdy13aXRoLWdlb21ldHJ5IjoiUnVucyBhIHdvcmtmbG93IHdpdGggYSBnZW9tZXRyeSB1c2VkIGFzIGFuIGlucHV0IGFyZ3VtZW50LiIsImxhbmd1YWdlLW1lbnUtcHJvdmlzaW9uLWZvci1vZmZsaW5lLWRlc2MiOiJQcmVwYXJlIG15IGRldmljZSBmb3Igb2ZmbGluZSB1c2UgYnkgZG93bmxvYWRpbmcgdGhlIHJlcXVpcmVkIGZpbGVzLiIsImxhbmd1YWdlLXRvb2xiYXItbmF2aWdhdGlvbi1pbml0aWFsLWV4dGVudC10b29sdGlwIjoiUmV0dXJuIHRvIHRoZSBpbml0aWFsIHBvc2l0aW9uIG9mIHRoZSBtYXAiLCJsYW5ndWFnZS1jb29yZGluYXRlcy1kZWdyZWVzIjoiwrAiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXNob3ctZmVhdHVyZS1sYXllci1tb2RhbC1tZXNzYWdlIjoiQ3JlYXRlcyBhIE1vZGVsTWVzc2FnZVZpZXcgdmlldyBhbmQgZGlzcGxheXMgdGhlIGdpdmVuIG1lc3NhZ2UuIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtZWRpdCI6IkVkaXQiLCJsYW5ndWFnZS10b29sYmFyLXRhc2tzLXNoYXJlLXRvb2x0aXAiOiJTaGFyZSB0aGUgY3VycmVudCBtYXAgb24gdGhlIG1vc3QgY29tbW9uIFNvY2lhbCBNZWRpYSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tc2V0LWVkaXRvci1mZWF0dXJlLWdlb21ldHJ5IjoiU2V0cyB0aGUgZ2VvbWV0cnkgb2YgdGhlIGZlYXR1cmUgdGhhdCBpcyBjdXJyZW50bHkgYmVpbmcgZWRpdGVkIGluIHRoZSBBdHRyaWJ1dGUgRWRpdG9yLCBhbmQgYWN0aXZhdGVzIHRoZSBBdHRyaWJ1dGVFZGl0b3IgVmlldy4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXBhbi10by1mZWF0dXJlIjoiUGFucyB0byB0aGUgR2VvY29ydGV4IGZlYXR1cmUuIiwibGFuZ3VhZ2UtbWVudS12aXN1YWxpemF0aW9uIjoiVHVybiBvbi9vZmYgbGF5ZXIgdmlzdWFsaXphdGlvbnMiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1mcmVlaGFuZC1wb2x5Z29uLWRlc2MiOiJIb2xkIHRoZSBtb3VzZSBidXR0b24gb3IgeW91ciBmaW5nZXJ0aXAgZG93biwgdGhlbiBkcmF3IGEgZnJlZWhhbmQgc2hhcGUuIiwibGFuZ3VhZ2UtY29tbW9uLXBhbi1kZXNjcmlwdGlvbiI6IlBhbiB0aGUgbWFwIHRvIGNlbnRlciB0aGlzIGZlYXR1cmUuIiwibGFuZ3VhZ2UtbWVudS1tYXB0aXAtYWN0aW9ucy12aWV3LWRldGFpbHMiOiJWaWV3IEFkZGl0aW9uYWwgRGV0YWlscyIsImxhbmd1YWdlLXRvb2xiYXItbmF2aWdhdGlvbi1wcmV2aW91cy1leHRlbnQiOiJQcmV2aW91cyBFeHRlbnQiLCJsYW5ndWFnZS10b29sYmFyLWdyb3VwLW1lYXN1cmVtZW50LXRvb2xzIjoiTWVhc3VyZSIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXBvbHlnb24tdG9vbHRpcCI6IkRyYXcgYSBjdXN0b20gc2hhcGUgb24gdGhlIG1hcCIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tZGlzcGxheS13b3JrZmxvdy1jb250YWluZXItY29udGVudCI6IkRpc3BsYXlzIGEgdmlldyBpbiBhIHdvcmtmbG93IGNvbnRhaW5lci4iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1lZGl0LWRlc2Mta2V5Ym9hcmQiOiJVc2UgYXJyb3dzIHRvIG1vdmUgdGhlIHBvaW50LiBIaXQgRU5URVIgdG8gYmVnaW4gZWRpdGluZyBhbiBleGlzdGluZyBkcmF3aW5nLiIsImxhbmd1YWdlLW1lbnUtbGF0aXR1ZGUtZ2VvZ3JhcGhpY3MtZGVzYyI6IkxhdGl0dWRlIEdlb2dyYXBoaWNzIEdyb3VwIEx0ZC4iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1wb2ludCI6IlBvaW50IiwibGFuZ3VhZ2UtY29vcmRpbmF0ZXMtZWFzdC1hYmJyZXYiOiJFIiwibGFuZ3VhZ2UtbGF5ZXJzZWxlY3Rvci1pdGVtLWV4cGFuZCI6IkNvbGxhcHNlIG9yIGV4cGFuZCB7MH0gbGF5ZXIgZ3JvdXAiLCJsYW5ndWFnZS10b29sYmFyLWJ1ZmZlci10b2dnbGUtdG9vbHRpcCI6IkJ1ZmZlciBhbiBhcmVhIGFyb3VuZCB5b3VyIHNlbGVjdGlvbiIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLWNpcmNsZS1kZXNjIjoiRHJhZyBhIGNpcmNsZSBvbiB0byB0aGUgbWFwIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1oaWRlLWZlYXR1cmUtbGF5ZXItbW9kYWwtbWVzc2FnZSI6IlJlbW92ZXMgYSBtb2RhbCBtZXNzYWdlLiIsImxhbmd1YWdlLXRvb2xiYXItZWRpdGluZy1zeW5jIjoiU3luYyIsImxhbmd1YWdlLWNvbW1vbi1zeW5jLWNvbXBsZXRlIjoiU3luY2hyb25pemF0aW9uIGNvbXBsZXRlIiwibGFuZ3VhZ2UtbWVudS1pZGVudGlmeS1mcmVlaGFuZC1kZXNjIjoiRHJhdyBhIHNoYXBlIHRvIHZpZXcgaW5mb3JtYXRpb24gYWJvdXQgdGhhdCBhcmVhLiIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXBhbGV0dGUtc21hbGwtZWRpdCI6IkVkaXQiLCJsYW5ndWFnZS1tZW51LXNob3ctcmVzdWx0cy10YWJsZSI6IlRhYmxlIFZpZXciLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXNob3ctZmVhdHVyZS1kZXRhaWxzIjoiQ3JlYXRlcyBhbmQgZGlzcGxheXMgdGhlIEZlYXR1cmUgRGV0YWlscyBkaWFsb2cgZm9yIHRoZSBmZWF0dXJlIG9yIGZlYXR1cmUgc2V0IGNvbGxlY3Rpb24gc3BlY2lmaWVkLiIsImxhbmd1YWdlLXRvb2xiYXItbmF2aWdhdGlvbi1uZXh0LWV4dGVudCI6Ik5leHQgRXh0ZW50IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1nZW9sb2NhdGUiOiJab29tcyB0byB0aGUgY3VycmVudCBsb2NhdGlvbiBvZiB0aGUgZGV2aWNlLiIsImxhbmd1YWdlLXRvb2xiYXItZ3JvdXAtbmF2aWdhdGlvbiI6Ik5hdmlnYXRpb24iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1jbGVhciI6IkNsZWFyIiwibGFuZ3VhZ2Utc3RhdGVzLWlkZW50aWZ5LXN0YXRlLWRlc2NyaXB0aW9uIjoiVGhlIGlkZW50aWZ5IHRvb2wgaXMgY3VycmVudGx5IGFjdGl2ZS4iLCJsYW5ndWFnZS1tZW51LWVudGVyLW9mZmxpbmUtZGVzYyI6IkdvIHRvIG9mZmxpbmUgbW9kZSBhbmQgdmlldyBjYWNoZWQgbWFwIGRhdGEuIiwibGFuZ3VhZ2UtbWVudS16b29tLWluaXRpYWwtZXh0ZW50LWRlc2MiOiJSZXR1cm4gdG8gdGhlIGluaXRpYWwgbWFwIHBvc2l0aW9uIGFuZCB6b29tIGxldmVsLiIsImxhbmd1YWdlLWNvbW1vbi1xdWVyeS1yZXN1bHRzIjoiUXVlcnkgUmVzdWx0cyIsImxhbmd1YWdlLXRvb2xiYXItdGFza3MtZXhwb3J0LW1hcC10b29sdGlwIjoiU2F2ZSBhIG1hcCBpbWFnZSIsImxhbmd1YWdlLWZyYW1ld29yay11aS12aWV3LWNvbnRhaW5lci12aWV3LWNsb3NlIjoiQ2xvc2UgezB9IiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtZnJlZWhhbmQtdG9vbHRpcCI6IkRyYXcgYSBmcmVlaGFuZCBsaW5lIG9uIHRoZSBtYXAiLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LWxheWVycy1jaGFuZ2UtdG9vbHRpcCI6IkVuYWJsZS9EaXNhYmxlIGxheWVycyBzZWxlY3RlZCBmb3IgaWRlbnRpZnkgb3BlcmF0aW9ucyIsImxhbmd1YWdlLXJlc3VsdHMtZXhwb3J0LXRvLWFsZXJ0LWVycm9yLW1lc3NhZ2UiOiJFcnJvciBleHBvcnRpbmcgdG8gezB9IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1tYXAtcmVzaXplIjoiVGVsbHMgdGhlIG1hcCBjb250cm9sIHRvIHJlc2l6ZSBpdHNlbGYuIFRoaXMgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciBhbHRlcmluZyB0aGUgbWFwIGNvbnRhaW5lcidzIGRpbWVuc2lvbnMuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1jbGVhci1zdG9yYWdlLWZvci1kb21haW4iOiJDbGVhcnMgYWxsIG9mZmxpbmUgZGF0YSBmb3IgdGhlIGN1cnJlbnQgZG9tYWluLiBUaGlzIGluY2x1ZGVzIGRhdGEgZm9yIGFsbCBhcHBsaWNhdGlvbnMgbG9hZGVkIGZyb20gdGhlIGN1cnJlbnQgZG9tYWluLiIsImxhbmd1YWdlLWNvbW1vbi1wYW4iOiJQYW4iLCJsYW5ndWFnZS1zdGF0ZXMtZHJhdy1tYXJrdXAtc3RhdGUtZGVzY3JpcHRpb24iOiJUaGUgZHJhdyB0b29sIGlzIGN1cnJlbnRseSBhY3RpdmUuIiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1wb2x5Z29uIjoiUG9seWdvbiIsImxhbmd1YWdlLWNvbW1vbi1kZWJ1Zy1sb2cta2V5cyI6IlRvIHZpZXcgdGhlIGxvZyBvbiBhIGRlc2t0b3AgbWFjaGluZSwgcHJlc3MgQ3RybCArIFNoaWZ0ICsgfi4gT24gYSBtb2JpbGUgZGV2aWNlLCBwcmVzcyBhbmQgaG9sZCB0aGUgdG9vbGJhci4iLCJsYW5ndWFnZS1jb21tb24tdmlldy1sb2ciOiJWaWV3IExvZyIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tYWN0aXZhdGUtY29udGFpbmVycy1mb3Itd29ya2Zsb3ciOiJBY3RpdmF0ZXMgYW55IHdvcmtmbG93IGNvbnRhaW5lciB2aWV3cyBhc3NvY2lhdGVkIHdpdGggYSBnaXZlbiB3b3JrZmxvdy4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXNldC1lZGl0LWxvZyI6IlNldHMgdGhlIGVkaXQgbG9nLCBwYXNzaW5nIGl0IGludG8gYSBjYWxsYmFjay4gSWYgYW4gZXJyb3Igb2NjdXJzLCB0aGUgZXJyb3IgaXMgcGFzc2VkIGludG8gdGhlIGNhbGxiYWNrLiIsImxhbmd1YWdlLXRvb2xiYXItbmF2aWdhdGlvbi1pbml0aWFsLWV4dGVudCI6IkluaXRpYWwgVmlldyIsImxhbmd1YWdlLWNvbW1vbi1zaG93IjoiU2hvdyIsImxhbmd1YWdlLWNvbW1vbi1leHRyYWN0LWRhdGEiOiJFeHRyYWN0IERhdGEiLCJsYW5ndWFnZS1yZXN1bHRzLXRvZ2dsZS1saXN0LXZpZXciOiJTd2l0Y2ggdG8gTGlzdCIsImxhbmd1YWdlLXRhYi1zY3JvbGwtcHJldiI6IlByZXZpb3VzIExheWVyIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtcG9seWxpbmUiOiJMaW5lIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zaG93LW1hcC1lbGVtZW50IjoiRGlzcGxheXMgYW4gZWxlbWVudCBhbmNob3JlZCB0byBhIHNwZWNpZmljIHBvaW50IG9uIHRoZSBtYXAuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1yZWNlbnRlci1tYXAtb24tbmV4dC1tYXAtcmVzaXplIjoiUmVjZW50ZXJzIHRoZSBtYXAgdG8gaXRzIGV4aXN0aW5nIHBvc2l0aW9uIHRoZSBuZXh0IHRpbWUgdGhlIG1hcCBpcyByZXNpemVkLiIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXRleHQtZGVzYyI6IkNsaWNrIGEgbG9jYXRpb24gd2hlcmUgeW91IHdhbnQgdG8gYWRkIHRleHQgb24gdGhlIG1hcC4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWNyZWF0ZS1hdHRhY2htZW50IjoiQ3JlYXRlcyBhIGZlYXR1cmUgYXR0YWNobWVudC4iLCJsYW5ndWFnZS10b29sYmFyLWdyb3VwLXRhc2tzIjoiVGFza3MiLCJsYW5ndWFnZS10b29sYmFyLWJ1ZmZlcmluZy1hbHQtZGlzYWJsZSI6IkRpc2FibGUgYnVmZmVyaW5nIGZvciBhY3RpdmUgdG9vbCIsImxhbmd1YWdlLW1lbnUtcG93ZXJlZC1ieS1nZW9jb3J0ZXgiOiJQb3dlcmVkIGJ5IEdlb2NvcnRleCIsImxhbmd1YWdlLW1vbnRocy0xMSI6IkRlY2VtYmVyIiwibGFuZ3VhZ2UtbW9udGhzLTEwIjoiTm92ZW1iZXIiLCJsYW5ndWFnZS1sYXllcmxpc3QtZXhwYW5kIjoiQ29sbGFwc2Ugb3IgZXhwYW5kIHswfSBsYXllciBncm91cCIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tY3JlYXRlLWZlYXR1cmUiOiJDcmVhdGVzIGEgbmV3IGZlYXR1cmUuIiwibGFuZ3VhZ2UtY29vcmRpbmF0ZXMteSI6Ilk6IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1jcmVhdGUtcmVsYXRlZC1yZWNvcmQiOiJDcmVhdGVzIGEgcmVsYXRlZCB0YWJsZSByZWNvcmQuIiwibGFuZ3VhZ2UtdG9vbGJhci1lZGl0aW5nLWVkaXQiOiJFZGl0IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1wdWxzZS1zdGF0dXMiOiJSZXNldHMgdGhlIHRpbWVyIG9mIHRoZSBzdGF0dXMgdmlld01vZGVsLiIsImxhbmd1YWdlLWNvb3JkaW5hdGVzLXgiOiJYOiIsImxhbmd1YWdlLW1lbnUtc3dpdGNoLXRvLWxlZ2VuZCI6IlNob3cgTGVnZW5kIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtcGFsZXR0ZS1zbWFsbC1kZWxldGUiOiJEZWxldGUiLCJsYW5ndWFnZS10b29sYmFyLWdyb3VwLWhvbWUiOiJCYXNpYyBUb29scyIsImxhbmd1YWdlLXRvb2xiYXItYW5hbHlzaXMtbG9jYXRpb24taW5mbyI6IkxvY2F0aW9uIEluZm8iLCJsYW5ndWFnZS1jb21tb24tbm8tcmVzdWx0cy1kZXNjIjoiSXRlbXMgYXBwZWFyIGFmdGVyIHlvdSBwZXJmb3JtIGEgdmFsaWQgc2VhcmNoIG9yIG90aGVyIHRhc2sgdGhhdCByZXR1cm5zIHJlc3VsdHMuIiwibGFuZ3VhZ2UtY29tbW9uLWVkaXRpbmciOiJFZGl0aW5nIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtcG9seWdvbiI6IlBvbHlnb24iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWRlc3Ryb3ktdmlldyI6IkRlc3Ryb3lzIGEgdmlldywgd2lwaW5nIG91dCBpdHMgYmluZGluZyBhbmQgRE9NIHN1YnN0cnVjdHVyZXMuIiwibGFuZ3VhZ2UtY29tbW9uLW9rIjoiT0siLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LXBvbHlnb24tZGVzYyI6IlRvIGxlYXJuIHdoYXRcdTIwMTlzIHRoZXJlLCBkcmF3IGEgc2hhcGUgb24gdGhlIG1hcC4gRG91YmxlLWNsaWNrL3RhcCB0byBmaW5pc2guIiwibGFuZ3VhZ2Utc3RhdGVzLWZlYXR1cmUtZWRpdGluZy1zdGF0ZS1wb2ludC1ncmFwaGljLWRlc2NyaXB0aW9uIjoiVGhlIGNyZWF0ZSBhIGZlYXR1cmUgdG9vbCBpcyBjdXJyZW50bHkgZWRpdGluZyBhIHBvaW50LWJhc2VkIGdyYXBoaWMuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1oaWRlLW1hcC1lbGVtZW50IjoiUmVtb3ZlcyBhbiBlbGVtZW50IHByZXZpb3VzbHkgYW5jaG9yZWQgdG8gdGhlIG1hcCB1c2luZyBTaG93TWFwRWxlbWVudC4iLCJsYW5ndWFnZS1tZW51LXJ1bi1hLXdvcmtmbG93IjoiUGVyZm9ybSBhIHRhc2siLCJsYW5ndWFnZS10b29sYmFyLW5vdC1hdmFpbGFibGUiOiJUb29sYmFyIGlzIG5vdCBhdmFpbGFibGUiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC10ZXh0LXRvb2x0aXAiOiJBZGQgeW91ciBvd24gdGV4dCB0byB0aGUgbWFwIiwibGFuZ3VhZ2UtZXh0cmFjdC1kYXRhLWRlc2NyaXB0aW9uIjoiRXh0cmFjdCBmZWF0dXJlIGRhdGEgZnJvbSB0aGUgbWFwLiIsImxhbmd1YWdlLWNvbW1vbi12YWxpZGF0aW9uLXN5bWJvbCI6IioiLCJsYW5ndWFnZS1yZXN1bHRzLXNvcnQiOiJTb3J0IFJlc3VsdHMiLCJsYW5ndWFnZS10b29sYmFyLXRhc2tzLWV4cG9ydC1tYXAiOiJFeHBvcnQiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWdldC1mZWF0dXJlLWRldGFpbHMtcHJvdmlkZXJzIjoiQ3JlYXRlcyB2aWV3IGZvciBhbGwgY29uZmlndXJlZCBmZWF0dXJlIGRldGFpbHMgcHJvdmlkZXJzIGFuZCBlbWJlZHMgdGhlbSBpbnRvIGZlYXR1cmUgZGV0YWlscyBkaWFsb2cuIiwibGFuZ3VhZ2UtY29tbW9uLWZlYXR1cmUtbGF5ZXItZGV0YWlscy1kZXNjIjoiTWFuYWdlIGNhY2hpbmcgb2YgYSBmZWF0dXJlIGxheWVyIGZvciBvZmZsaW5lIHVzZS4iLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LXBvaW50LXRvb2x0aXAiOiJGaW5kIG91dCBhYm91dCBhIGxvY2F0aW9uIG9uIHRoZSBtYXAiLCJsYW5ndWFnZS1tZW51LW1hcC1sYXllcnMtZGVzYyI6IlR1cm4gbGF5ZXJzIG9uIGFuZCBvZmYsIHBlcmZvcm0gbGF5ZXIgYWN0aW9ucywgYW5kIHZpZXcgdGhlIGxlZ2VuZC4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXJlbW92ZS1mZWF0dXJlLXNldC1jb2xsZWN0aW9uIjoiUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGNvbGxlY3Rpb24gZnJvbSB0aGUgZmVhdHVyZSBzZXQgbWFuYWdlci4iLCJsYW5ndWFnZS10b29sYmFyLWVkaXRpbmctY3JlYXRlLW5ldy1mZWF0dXJlIjoiQ3JlYXRlIE5ldyBGZWF0dXJlIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1hZGQtc3RhdHVzIjoiQWRkcyBhIHN0YXR1cyBpbmRpY2F0b3IgdG8gdGhlIHNjcmVlbi4iLCJsYW5ndWFnZS10b29sYmFyLXRvZ2dsZS1idWZmZXItb24tbmFtZSI6IkJ1ZmZlciBPcHRpb25zIiwibGFuZ3VhZ2UtbWVudS1hY2Nlc3NpYmlsaXR5LXBhbmVsIjoiVmlldyB0aGUgYWNjZXNzaWJpbGl0eSBwYW5lbCIsImxhbmd1YWdlLXRvb2xiYXItZ3JvdXAtZHJhdyI6IkRyYXciLCJsYW5ndWFnZS1jb21tb24tc2hhcmUiOiJTaGFyZSIsImxhbmd1YWdlLXRvb2xiYXItaWRlbnRpZnktcG9pbnQiOiJQb2ludCIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLWRyYXdpbmctZWRpdC10b29scyI6IkVkaXQiLCJsYW5ndWFnZS1wYWdlLW5leHQiOiJOZXh0IHBhZ2UiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1mcmVlaGFuZC1wb2x5Z29uIjoiRnJlZWhhbmQgU2hhcGUiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWRlbGV0ZS1yZWxhdGVkLXJlY29yZCI6IkRlbGV0ZXMgYSByZWxhdGVkIHRhYmxlIHJlY29yZC4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLW9wZW4tZGF0YS1mcmFtZSI6Ik9wZW5zIHRoZSBEYXRhUmVnaW9uLCBpZiBwcmVzZW50IGluIHRoZSBjdXJyZW50IHNoZWxsLiIsImxhbmd1YWdlLWNvbW1vbi13ZWxjb21lIjoiSG9tZSIsImxhbmd1YWdlLWNvbW1vbi1sb2dpbiI6IkxvZyBJbiIsImxhbmd1YWdlLXRvb2xiYXItdGl0bGUiOiJUb29sYmFyIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi16b29tLXRvLWluaXRpYWwtZXh0ZW50IjoiWm9vbXMgdG8gdGhlIGluaXRpYWwgZXh0ZW50IG9mIHRoZSBjdXJyZW50IFNpdGUuIiwibGFuZ3VhZ2UtbWVudS1pZGVudGlmeSI6IkZpbmQgZGF0YSBvbiB0aGUgbWFwIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1jbGVhci1hY3RpdmUtdG9vbCI6IkNsZWFycyB0aGUgYWN0aXZlIHRvb2wuIiwibGFuZ3VhZ2Utc3RhdGVzLWVkaXRpbmctc3RhdGUtZGVzY3JpcHRpb24iOiJBIGRyYXdpbmcgaXMgYWN0aXZlbHkgYmVpbmcgZWRpdGVkLiIsImxhbmd1YWdlLW1lbnUtYm9va21hcmstYWRkIjoiQm9va21hcmsgY3VycmVudCBtYXAgZXh0ZW50IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zdGFydC1lZGl0aW5nLWVkaXQtbG9nLWVudHJ5IjoiQ3JlYXRlcyBhIGF2aWV3IHRvIGNoYW5nZSBhbiBleGlzdGluZyBlZGl0LiIsImxhbmd1YWdlLW1lbnUtem9vbS1pbiI6Ilpvb20gaW4iLCJsYW5ndWFnZS10b29sYmFyLW5hdmlnYXRpb24tem9vbS1pbi1kZXNjIjoiQ2xpY2sgb3IgdGFwLCB0aGVuIGRyYWcgYXJlYSBvZiBpbnRlcmVzdCBvbiB0aGUgbWFwLiBNYXAgd2lsbCB6b29tIHRvIHRoYXQgbG9jYXRpb24uIiwibGFuZ3VhZ2UtbWVudS1uby1pdGVtcyI6Ik5vIG1lbnUgb3B0aW9ucy4iLCJsYW5ndWFnZS10b29sYmFyLWhvbWUtc3ViIjoiSG9tZSIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLWRlbGV0ZSI6IkVyYXNlIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1yZWdpc3Rlci1zZWFyY2gtcHJvdmlkZXIiOiJSZWdpc3RlcnMgYSBzZWFyY2ggcHJvdmlkZXIgaWYgbm90IGFscmVhZHkgcmVnaXN0ZXJlZC4iLCJsYW5ndWFnZS1jb21tb24tc2F2ZSI6IlNhdmUiLCJsYW5ndWFnZS1yZXN1bHRzLWRpc3BsYXlpbmciOiJEaXNwbGF5aW5nIiwibGFuZ3VhZ2UtbWVudS16b29tLXRvLWxheWVyIjoiWm9vbSB0byBmdWxsIGV4dGVudCIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tem9vbS10by1lc3JpLWZlYXR1cmUtc2V0IjoiWm9vbXMgdG8gdGhlIGV4dGVudCBvZiBhbGwgdGhlIGZlYXR1cmVzIGluIHRoZSBmZWF0dXJlIHNldC4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWNsb3NlLWRhdGEtZnJhbWUiOiJDbG9zZXMgdGhlIERhdGFSZWdpb24sIGlmIGl0IGlzIHByZXNlbnQgaW4gdGhlIGN1cnJlbnQgc2hlbGwuIiwibGFuZ3VhZ2UtbWVudS1ydW4tcmVwb3J0LWRlc2MiOiJSdW4gYSBSZXBvcnQgb24gdGhlIFNlbGVjdGVkIFJlc3VsdHMiLCJsYW5ndWFnZS10b29sYmFyLWVkaXRpbmctbWFuYWdlLW9mZmxpbmUtZGF0YS10b29sdGlwIjoiU2VsZWN0LCBzeW5jLCBhbmQgY2xlYXIgb2ZmbGluZSBkYXRhIiwibGFuZ3VhZ2UtY29vcmRpbmF0ZXMtc2Vjb25kcyI6IlwiIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zaG93LXJlc3VsdHMtbGlzdCI6IkRpc3BsYXlzIHRoZSBsaXN0IG9mIGZlYXR1cmVzIGluIHRoZSBnaXZlbiBmZWF0dXJlIHNldCBjb2xsZWN0aW9uIGFzIGEgbGlzdC4iLCJsYW5ndWFnZS1jb21tb24tY2FuY2VsIjoiQ2FuY2VsIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zZXQtYWN0aXZlLWhpZ2hsaWdodC1sYXllciI6IlNldHMgdGhlIGxheWVyIHdpdGggdGhlIHNwZWNpZmllZCBuYW1lIGFzIGFjdGl2ZSwgaWYgdGhlcmUgaXMgb25lLiIsImxhbmd1YWdlLW1lbnUtem9vbS10by12aXNpYmxlLXNjYWxlLWRlc2MiOiJab29tIHRoZSBtYXAgdG8gYSBzY2FsZSB3aGVyZSB0aGUgbGF5ZXIgaXMgdmlzaWJsZS4iLCJsYW5ndWFnZS10b29sYmFyLXRvb2xiYXIiOiJUb29sYmFyIiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1wb2x5bGluZS1kZXNjIjoiVG8gbGVhcm4gd2hhdFx1MjAxOXMgdGhlcmUsIGRyYXcgYSBsaW5lIG9mIGludGVyZXN0IGFsb25nIHRoZSBtYXAuIERvdWJsZS1jbGljay90YXAgdG8gZmluaXNoLiIsImxhbmd1YWdlLXN0YXRlcy1lZGl0aW5nLWFjdGl2ZS1zdGF0ZS1kZXNjcmlwdGlvbiI6IlRoZSBmZWF0dXJlIGVkaXRvciBpcyBjdXJyZW50bHkgYWN0aXZlLiIsImxhbmd1YWdlLXRvb2xiYXItZmluZC1kYXRhIjoiRmluZCBEYXRhIiwibGFuZ3VhZ2UtY29tbW9uLXNob3ctZGV0YWlscy1kZXNjcmlwdGlvbiI6IlNlZSBhZGRpdGlvbmFsIGRldGFpbHMgZm9yIHRoaXMgZmVhdHVyZS4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWZlYXR1cmUtbGF5ZXItY2FjaGUtZGF0YSI6IkNhY2hlcyB0aGUgZGF0YSBmb3IgYSBnaXZlbiBtYXAgc2VydmljZSBVUkwuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1hbGxvdy1oaWRlLWZlYXR1cmUtbGF5ZXItbW9kYWwtbWVzc2FnZSI6IlNob3cgdGhlIGNsb3NlIGJ1dHRvbiBvbiB0aGUgTW9kYWxNZXNzYWdlVmlldyBhbGxvd2luZyB0aGUgdXNlciB0byBjbG9zZSBpdC4iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1kZWxldGUtZGVzYyI6IkNsaWNrIG9yIHRhcCB0byBpbW1lZGlhdGVseSBhbmQgcGVybWFuZW50bHkgZGVsZXRlIGEgZHJhd2luZy4gVGhpcyBjYW5ub3QgYmUgdW5kb25lLiIsImxhbmd1YWdlLW1lbnUtbWVudXMtZGVzY3JpcHRpb24iOiJJIFdhbnQgVG8uLi4gTWVudXMiLCJsYW5ndWFnZS10b29sYmFyLWVkaXRpbmctY3JlYXRlLW5ldy1mZWF0dXJlLWdlb2xvY2F0aW9uLXRvb2x0aXAiOiJDcmVhdGUgYSBwb2ludC1iYXNlZCBmZWF0dXJlIHVzaW5nIGdlb2xvY2F0aW9uLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tZ2V0LWVkaXQtbG9nIjoiR2V0cyB0aGUgZWRpdCBsb2csIHBhc3NpbmcgaXQgaW50byBhIGNhbGxiYWNrLiBJZiBhbiBlcnJvciBvY2N1cnMsIHRoZSBlcnJvciBpcyBwYXNzZWQgaW50byB0aGUgY2FsbGJhY2suIiwibGFuZ3VhZ2UtZXh0cmFjdC1kYXRhIjoiRXh0cmFjdCBkYXRhIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1jbGVhci1tYXJrdXAiOiJQcm9tcHRzIHRoZSB1c2VyIGZvciBjb25maXJtYXRpb24sIGFuZCBpZiBhcHByb3ZlZCwgY2xlYXJzIGFsbCBvZiB0aGUgbWFya3VwIGZyb20gdGhlIG1hcmt1cCBsYXllci4iLCJsYW5ndWFnZS10b29sYmFyLWNoYXJ0aW5nLXNob3ctY2hhcnRzLXRvb2x0aXAiOiJMYXVuY2ggdGhlIGNoYXJ0aW5nIHZpZXciLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWhpZ2hsaWdodC1mZWF0dXJlLWRlZmF1bHQiOiJIaWdobGlnaHRzIHRoZSBmZWF0dXJlIGluIHRoZSBkZWZhdWx0IGhpZ2hsaWdodCBsYXllci4iLCJsYW5ndWFnZS1jb21tb24tc2hvdy1kZXRhaWxzIjoiU2VlIERldGFpbHMiLCJsYW5ndWFnZS1tZW51LXNob3ctbG9nLWRlc2MiOiJEaXNwbGF5IHRoZSB2aWV3ZXIncyBsb2csIGluY2x1ZGluZyBkaWFnbm9zdGljIGVycm9ycyBhbmQgdGhlIHZlcnNpb24gbnVtYmVyLiIsImxhbmd1YWdlLW1lbnUtY2xlYXItb2ZmbGluZS1kYXRhLWRlc2MiOiJDbGVhciBhbGwgb2ZmbGluZSBkYXRhIGZvciB0aGlzIHZpZXdlciBhbmQvb3IgcmVsYXRlZCBhcHBsaWNhdGlvbnMuIiwibGFuZ3VhZ2UtdG9vbGJhci1lZGl0aW5nLWNyZWF0ZS1uZXctZmVhdHVyZS10b29sdGlwIjoiQ3JlYXRlIGEgbmV3IGZlYXR1cmUgb24gdGhlIG1hcCIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tc2hvdy1mZWF0dXJlLXRlbXBsYXRlLXBpY2tlciI6IlNob3dzIHRoZSBmZWF0dXJlIHRlbXBsYXRlIHBpY2tlciB1c2VkIHRvIGNyZWF0ZSBuZXcgZmVhdHVyZXMuIElmIGEgbGF5ZXIgaXMgc3VwcGxpZWQsIHNob3dzIHRoZSB0ZW1wbGF0ZXMgZm9yIHRoZSBsYXllci4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWRlbGV0ZS1hdHRhY2htZW50IjoiRGVsZXRlcyBhIGZlYXR1cmUgYXR0YWNobWVudC4iLCJsYW5ndWFnZS1jb29yZGluYXRlcy1sYXRpdHVkZS1hYmJyZXYiOiJMYXQ6IiwibGFuZ3VhZ2Utc3RhdGVzLXRyYW5zaWVudC1hY3RpdmUtZGVzY3JpcHRpb24iOiJBdCBsZWFzdCBvbmUgdHJhbnNpZW50IHRvb2xiYXIgaXMgY3VycmVudGx5IG9wZW4uIiwibGFuZ3VhZ2UtcmVzdWx0cy1leHBvcnQtdG8tc3RhdHVzLW1lc3NhZ2UiOiJFeHBvcnRpbmcgdG8gezB9IiwibGFuZ3VhZ2UtbWVudS1ob21lLXBhbmVsLWRlc2MiOiJWaWV3IGluZm9ybWF0aW9uIGFib3V0IHRoaXMgYXBwbGljYXRpb24uIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1hbGVydCI6IkRpc3BsYXlzIGFuIGFsZXJ0LiIsImxhbmd1YWdlLWNvbW1vbi1mZWF0dXJlLWVkaXRpbmctZGVzYyI6IkVkaXQgdGhlIGF0dHJpYnV0ZXMgb2YgdGhlIGZlYXR1cmUgYW5kIHNhdmUgdGhlbS4iLCJsYW5ndWFnZS1tZW51LXBvd2VyZWQtYnktZ2VvY29ydGV4LWRlc2MiOiJQb3dlcmVkIGJ5IEdlb2NvcnRleCIsImxhbmd1YWdlLW1lbnUtYWNjZXNzaWJpbGl0eS1wYW5lbC1kZXNjIjoiVmlldyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgYWNjZXNzaWJpbGl0eSBvZiB0aGlzIGFwcGxpY2F0aW9uLiIsImxhbmd1YWdlLW1lbnUtem9vbS1pbml0aWFsLWV4dGVudCI6IlJldHVybiB0byBpbml0aWFsIG1hcCBleHRlbnQiLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LWZyZWVoYW5kLXBvbHlnb24tZGVzYyI6IkRyYXcgYSBmcmVlaGFuZCBzaGFwZSBvbiB0aGUgbWFwIHRvIHNlZSB3aGF0J3MgdGhlcmUiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWRlbGV0ZS1mcm9tLWVkaXQtbG9nIjoiUmVtb3ZlcyB0aGUgZ2l2ZW4gZW50cnkgZnJvbSB0aGUgZWRpdCBsb2csIHRoZW4gc2V0cyB0aGUgZWRpdCBsb2cuIiwibGFuZ3VhZ2UtbGF5ZXJsaXN0LWJhc2UtbWFwcy1mb2xkZXItdGl0bGUiOiJCYXNlIE1hcHMiLCJsYW5ndWFnZS1tZW51LXN3aXRjaC10by1sZWdlbmQtZGVzYyI6IkRpc3BsYXkgdGhlIGxlZ2VuZCBmb3IgdmlzaWJsZSBsYXllcnMiLCJsYW5ndWFnZS10b29sYmFyLWdyb3VwLW9mZmxpbmUtbWFuYWdlbWVudCI6Ik9mZmxpbmUgTWFuYWdlbWVudCIsImxhbmd1YWdlLW1lbnUtbWFuYWdlLXN5bmMtc2V0dGluZ3MtZGVzYyI6Ik1hbmFnZSB3aGF0IGRhdGEgYXJlIGNvcGllZCB0byBteSBkZXZpY2Ugb24gc3luYy4iLCJsYW5ndWFnZS1jb21tb24tZmVhdHVyZS1zeW5jLXNldHRpbmdzIjoiTWFuYWdlIFN5bmMgU2V0dGluZ3MiLCJsYW5ndWFnZS1tZW51LXNldHRpbmdzLWRlc2NyaXB0aW9uIjoiTW9iaWxlIFNldHRpbmdzIiwibGFuZ3VhZ2Utc3RhdGVzLWVkaXQtc3RhdGUtZGVzY3JpcHRpb24iOiJUaGUgdG9vbCB0byBzZWxlY3QgYW4gaXRlbSBmb3IgZWRpdGluZyBpcyBjdXJyZW50bHkgYWN0aXZlLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tcnVuLXdvcmtmbG93LWJ5LWlkIjoiUnVucyBhIHdvcmtmbG93LiIsImxhbmd1YWdlLWxheWVybGlzdC10b2dnbGUiOiJUb2dnbGUgezB9IGxheWVyIHZpc2liaWxpdHkuIiwibGFuZ3VhZ2UtbWVudS1leHBvcnQtcmVzdWx0cy10by1jc3YtZGVzYyI6IkV4cG9ydCBSZXN1bHRzIHRvIENTViIsImxhbmd1YWdlLWNvbW1vbi1mZWF0dXJlLXN5bmMtc2V0dGluZ3MtZGVzYyI6IkRpc3BsYXlzIGEgbGlzdCBvZiBmZWF0dXJlIGxheWVycyB0byBjaG9vc2UgZnJvbS4iLCJsYW5ndWFnZS10b29sYmFyLXRhYi10YXNrcyI6IlRhc2tzIiwibGFuZ3VhZ2UtdG9vbGJhci1ob21lLXRvb2x0aXAiOiJPcGVuIHRoZSBIb21lIFBhbmVsIiwibGFuZ3VhZ2UtbWVudS1kZXNjcmlwdGlvbiI6IlF1aWNrIGFjY2VzcyB0byBjb21tb24gdGFza3MiLCJsYW5ndWFnZS1tZW51LXpvb20iOiJab29tIHRvIEZlYXR1cmUiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1wb2x5Z29uLWRlc2Mta2V5Ym9hcmQiOiJVc2UgYXJyb3dzIHRvIG1vdmUgdGhlIHBvaW50LiBIaXQgRU5URVIgdG8gcGxvdCBhbmQgYmVnaW4gbW92aW5nIHRoZSBuZXh0IHBvaW50LiBIaXQgRU5URVIgdHdpY2UgdG8gZmluaXNoLiIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXJlY3RhbmdsZS1kZXNjIjoiQ2xpY2sgYW5kIGRyYWcgdG8gZHJhdyBhIHJlY3RhbmdsZSBvbiB0aGUgbWFwLiIsImxhbmd1YWdlLWxheWVyLWFjdGlvbnMiOiJQZXJmb3JtIGFuIGFjdGlvbiBvbiB7MH0iLCJsYW5ndWFnZS1jb21tb24tY2xlYXIiOiJDbGVhciIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tZmVhdHVyZS1sYXllci1tb2R1bGUtc3RhcnQtc3luYyI6IlN0YXJ0cyBzeW5jaHJvbml6ZXMgdGhlIGZlYXR1cmUgZWRpdHMgdG8gdGhlIHNlcnZlci4iLCJsYW5ndWFnZS1tZW51LWhvbWUtcGFuZWwiOiJWaWV3IHRoZSBob21lIHBhbmVsIiwibGFuZ3VhZ2UtY29tbW9uLWZlYXR1cmUtZWRpdGluZyI6IkZlYXR1cmUgQXR0cmlidXRlcyIsImxhbmd1YWdlLXRvb2xiYXItbmF2aWdhdGlvbi1wYW4iOiJQYW4iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1lZGl0LWRlc2Mtc2hvcnRjdXRzIjoiVXNlIGFycm93cyB0byBtb3ZlLCBSIHRvIHJvdGF0ZSwgUyB0byBzY2FsZSwgViB0byBzZWxlY3QgdmVydGV4LiBDb21iaW5lIHdpdGggQUxUIGZvciBmaW5lciBjb250cm9sLiBDb21iaW5lIHdpdGggU0hJRlQgdG8gcmV2ZXJzZS4iLCJsYW5ndWFnZS1tb250aHMtMiI6Ik1hcmNoIiwibGFuZ3VhZ2UtbW9udGhzLTEiOiJGZWJydWFyeSIsImxhbmd1YWdlLW1vbnRocy00IjoiTWF5IiwibGFuZ3VhZ2UtbW9udGhzLTMiOiJBcHJpbCIsImxhbmd1YWdlLXNtYXJ0LXBhbmVsLW1lbnUiOiJQYW5lbCBBY3Rpb25zIE1lbnUuIENsaWNrIHRvIG9wZW4vY2xvc2UuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zaG93LW1hcCI6IkFjdGl2YXRlcyBtYXAgdmlldy4iLCJsYW5ndWFnZS1tb250aHMtMCI6IkphbnVhcnkiLCJsYW5ndWFnZS10b29sYmFyLW5hdmlnYXRpb24tem9vbS1vdXQtdG9vbHRpcCI6IkRyYXcgYW4gYXJlYSBvZiBpbnRlcmVzdCBvbiB0aGUgbWFwIGFuZCB6b29tIG91dCwga2VlcGluZyB0aGUgYXJlYSBjZW50ZXJlZCIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXBvaW50LWRlc2MiOiJDbGljayBvciB0YXAgYSBtYXAgbG9jYXRpb24gdG8gYWRkIGEgcG9pbnQuIiwibGFuZ3VhZ2UtdG9vbGJhci1zbmFwcGluZy1hbHQtZGlzYWJsZSI6IkRpc2FibGUgc25hcHBpbmcgZm9yIGFjdGl2ZSB0b29sLiIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXBhbGV0dGUtc21hbGwtY2hhbmdlLXN0eWxlIjoiU3R5bGVzIiwibGFuZ3VhZ2UtbW9udGhzLTkiOiJPY3RvYmVyIiwibGFuZ3VhZ2UtdG9vbGJhci1uYXZpZ2F0aW9uLW5leHQtZXh0ZW50LXRvb2x0aXAiOiJab29tIHRvIHRoZSBuZXh0IGV4dGVudCIsImxhbmd1YWdlLW1vbnRocy02IjoiSnVseSIsImxhbmd1YWdlLW1vbnRocy01IjoiSnVuZSIsImxhbmd1YWdlLW1lbnUtc3dpdGNoLXRvLWxheWVybGlzdCI6IlNob3cgTGF5ZXIgTGlzdCIsImxhbmd1YWdlLXBhZ2UtcHJldiI6IlByZXZpb3VzIHBhZ2UiLCJsYW5ndWFnZS1tb250aHMtOCI6IlNlcHRlbWJlciIsImxhbmd1YWdlLW1vbnRocy03IjoiQXVndXN0IiwibGFuZ3VhZ2UtbWVudS1leHBvcnQtcmVzdWx0cy10by1zaHAtZGVzYyI6IkV4cG9ydCBSZXN1bHRzIHRvIFNoYXBlZmlsZSIsImxhbmd1YWdlLW1lbnUtaWRlbnRpZnktcG9pbnQtZGVzYyI6IkRyYXcgYSBwb2ludCBvbiB0aGUgbWFwIHRvIHZpZXcgaW5mb3JtYXRpb24gYXQgdGhhdCBwb2ludCBvbiB0aGUgbWFwLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24taW52b2tlLW1hcC10aXAiOiJFeGVjdXRlcyBhbiBJZGVudGlmeSBvcGVyYXRpb24gb24gdGhlIGdpdmVuIGdlb21ldHJ5IGFuZCBcIk1hcFRpcFwiIGFzIGl0cyBzb3VyY2UgdGFnLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tY2xvc2UtZmVhdHVyZS1zZXQtY29sbGVjdGlvbiI6IkNsb3NlcyB0aGUgZmVhdHVyZSBzZXQgY29sbGVjdGlvbi4iLCJsYW5ndWFnZS1tZW51LWNsZWFyLW9mZmxpbmUtZGF0YSI6IkNsZWFyIG9mZmxpbmUgZGF0YSIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXBvbHlsaW5lLWRlc2Mta2V5Ym9hcmQiOiJVc2UgYXJyb3dzIHRvIG1vdmUgdGhlIHBvaW50LiBIaXQgRU5URVIgdG8gcGxvdCBhbmQgYmVnaW4gbW92aW5nIHRoZSBuZXh0IHBvaW50LiBIaXQgRU5URVIgdHdpY2UgdG8gZmluaXNoLiIsImxhbmd1YWdlLXVpLXRhYmxlLXNvcnRlZC1hc2NlbmRpbmciOiJDb2x1bW4gaGVhZGVyLiB7MH0gLSBTb3J0ZWQgYXNjZW5kaW5nLiIsImxhbmd1YWdlLW1lbnUtZW50ZXItb25saW5lIjoiR28gdG8gb25saW5lIG1vZGUiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXNlYXJjaCI6IlBlcmZvcm1zIGEgc2VhcmNoIG9uIGFsbCBhY3RpdmUgcHJvdmlkZXJzLiIsImxhbmd1YWdlLW1lbnUtZWRpdC1mZWF0dXJlLWRlc2NyaXB0aW9uIjoiRWRpdCB0aGUgZGV0YWlscyBhYm91dCB0aGlzIGZlYXR1cmUuIiwibGFuZ3VhZ2UtbWVudS1pZGVudGlmeS1mcmVlaGFuZCI6IklkZW50aWZ5IGJ5IGZyZWVoYW5kIHNoYXBlIiwibGFuZ3VhZ2UtdG9vbGJhci1uYXZpZ2F0aW9uLXpvb20tb3V0LWRlc2MiOiJEcmFnIGEgcmVjdGFuZ2xlIG9uIHRoZSBtYXAgdG8gem9vbSBvdXQgd2hpbGUga2VlcGluZyB0aGF0IGFyZWEgY2VudGVyZWQiLCJsYW5ndWFnZS1tZW51LWlkZW50aWZ5LWJ1ZmZlcmVkLWZlYXR1cmUtc2V0LWNvbGxlY3Rpb24iOiJTaG93IEJ1ZmZlciBPcHRpb25zIiwibGFuZ3VhZ2UtdG9vbGJhci1uYXZpZ2F0aW9uLXpvb20tb3V0IjoiWm9vbSBPdXQiLCJsYW5ndWFnZS10b29sYmFyLXNuYXBwaW5nLWFsdC1lbmFibGUiOiJFbmFibGUgc25hcHBpbmcgZm9yIGFjdGl2ZSB0b29sLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tY2xlYXItaGlnaGxpZ2h0cyI6IlJlbW92ZXMgdGhlIGhpZ2hsaWdodHMgZnJvbSB0aGUgYWN0aXZlIGhpZ2hsaWdodCBsYXllci4iLCJsYW5ndWFnZS10b29sYmFyLW5hdmlnYXRpb24tcHJldmlvdXMtZXh0ZW50LXRvb2x0aXAiOiJab29tIHRvIHRoZSBwcmV2aW91cyBleHRlbnQiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1kZWxldGUtZGVzYy1rZXlib2FyZCI6IlVzZSBhcnJvd3MgdG8gbW92ZSB0aGUgcG9pbnQuIEhpdCBFTlRFUiB0byBpbW1lZGlhdGVseSBhbmQgcGVybWFuZW50bHkgZGVsZXRlIGEgZHJhd2luZy4gVGhpcyBjYW5ub3QgYmUgdW5kb25lLiIsImxhbmd1YWdlLXRvb2xiYXItc2VsZWN0LWxheWVycy10b2dnbGUtb24tbmFtZSI6IkZpbHRlciBMYXllcnMiLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LXJlY3RhbmdsZSI6IlJlY3RhbmdsZSIsImxhbmd1YWdlLXRvb2xiYXItc25hcHBpbmctc2VsZWN0LWxheWVycy10b29sdGlwIjoiQ2hhbmdlIHdoaWNoIGxheWVycyBhcmUgc25hcHBhYmxlLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tb3Blbi13ZWItcGFnZSI6Ik9wZW5zIGEgd2ViIHBhZ2UgaW4gYW5vdGhlciB0YWIvd2luZG93LiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tY2xvc2UtbW9kYWwtcmVnaW9uIjoiQ2xvc2VzIHRoZSBNb2RhbFdpbmRvd1JlZ2lvbi4iLCJsYW5ndWFnZS10b29sYmFyLW5hdmlnYXRpb24taG9tZS1zdWIiOiJIb21lIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1jYW5jZWwtc2VhcmNoIjoiQ2FuY2VsIHRoZSBzZWFyY2ggb24gYWxsIHByb3ZpZGVycy4iLCJsYW5ndWFnZS1jb21tb24td29ya2Zsb3ciOiJXb3JrZmxvdyIsImxhbmd1YWdlLW1lbnUtZG9uZSI6IkRvbmUiLCJsYW5ndWFnZS1tZW51LWVkaXQtZmVhdHVyZSI6IkVkaXQgdGhpcyBGZWF0dXJlIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtcG9pbnQtdG9vbHRpcCI6IkFkZCBhIHBvaW50IHRvIHRoZSBtYXAiLCJsYW5ndWFnZS10b29sYmFyLTNyZC1wYXJ0eS1tYXBzLXNob3ctbWFwcyI6IkxpbmtlZCBNYXBzIiwibGFuZ3VhZ2UtbGF5ZXJsaXN0LW5vdC12aXNpYmxlLWF0LWV4dGVudCI6IkN1cnJlbnRseSBub3Qgd2l0aGluIHZpc2libGUgc2NhbGUuIiwibGFuZ3VhZ2UtbWVudS16b29tLWRlc2NyaXB0aW9uIjoiWm9vbSB0byB0aGlzIGZlYXR1cmUgb24gdGhlIG1hcC4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWdsb2JhbC1zZWFyY2giOiJQZXJmb3JtcyBhIHNlYXJjaCBvbiBhbGwgYWN0aXZlIHByb3ZpZGVycy4iLCJsYW5ndWFnZS1tZW51LXNob3ctbG9nIjoiU2hvdyBMb2ciLCJsYW5ndWFnZS1jb29yZGluYXRlcy1taW51dGVzIjoiJyIsImxhbmd1YWdlLXRvb2xiYXItc2VsZWN0LWxheWVycy10b2dnbGUtdG9vbHRpcCI6IkZpbHRlciBsYXllcnMgZm9yIElkZW50aWZ5IHJlc3VsdHMiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXNldC1oaWdobGlnaHQtYm9yZGVyLWNvbG9yIjoiU2V0cyB0aGUgYm9yZGVyIGNvbG9yIHVzZWQgZm9yIG5ldyBoaWdobGlnaHRzLCBzcGVjaWZpZWQgaW4gNiBvciA4IGRpZ2l0IGhleCBpbiBSR0Igb3IgQVJHQiBmb3JtLiIsImxhbmd1YWdlLW1lbnUtb3Blbi1vZmZsaW5lLXRvb2xzLW1lbnUtZGVzYyI6Ik1hbmFnZSBjYWNoZSBzZXR0aW5ncywgdmlldyBlZGl0cywgYW5kIHN5bmMgd2l0aCB0aGUgc2VydmVyLiIsImxhbmd1YWdlLW1lbnUtbWFwLWxheWVycyI6IkNoYW5nZSB2aXNpYmxlIG1hcCBsYXllcnMiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWhpZ2hsaWdodC1lc3JpLWZlYXR1cmUtc2V0IjoiSGlnaGxpZ2h0cyBhbGwgb2YgdGhlIGZlYXR1cmVzIGluIHRoZSBzcGVjaWZpZWQgZmVhdHVyZSBzZXQgaW4gdGhlIGFjdGl2ZSBoaWdobGlnaHQgbGF5ZXIuIiwibGFuZ3VhZ2UtdG9vbGJhci1jaGFydGluZy1zaG93LWNoYXJ0cyI6IlZpZXcgQ2hhcnRzIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtcG9seWxpbmUtZGVzYyI6IkNsaWNrIG9yIHRhcCBsb2NhdGlvbnMgYWxvbmcgdGhlIG1hcCB0byBjcmVhdGUgYSBsaW5lLiBEb3VibGUgY2xpY2svdGFwIHRvIGZpbmlzaC4iLCJsYW5ndWFnZS10b29sYmFyLXRhc2tzLWlkZW50aWZ5IjoiSWRlbnRpZnkiLCJsYW5ndWFnZS1tZW51LWlkZW50aWZ5LXJlY3RhbmdsZS1kZXNjIjoiRHJhdyBhIHJlY3RhbmdsZSB0byB2aWV3IGluZm9ybWF0aW9uIGFib3V0IHRoYXQgYXJlYS4iLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LXJlY3RhbmdsZS1kZXNjIjoiVG8gbGVhcm4gd2hhdFx1MjAxOXMgdGhlcmUsIGNsaWNrIG9yIHRhcCBhbmQgZHJhZyB0byBkcmF3IGEgcmVjdGFuZ2xlIG9uIHRoZSBtYXAuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1kZWFjdGl2YXRlLWNvbnRhaW5lcnMtZm9yLXdvcmtmbG93IjoiRGVhY3RpdmF0ZXMgYW55IHdvcmtmbG93IHZpZXdzIGFzc29jaWF0ZWQgd2l0aCBhIGdpdmVuIHdvcmtmbG93LiIsImxhbmd1YWdlLXNtYXJ0LXBhbmVsLWJhY2siOiJHbyBCYWNrIGluIFBhbmVsIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zaG93LW1hcC10aXAiOiJDcmVhdGVzIGEgTWFwIFRpcCBWaWV3IGFuZCBkaXNwbGF5cyB0aGUgZmVhdHVyZSBpbiBpdC4iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1jbGVhci10b29sdGlwIjoiQ2xlYXIgYWxsIGRyYXdpbmdzIGZyb20gdGhlIG1hcCIsImxhbmd1YWdlLXN0YXRlcy1idWZmZXJpbmctZGVzY3JpcHRpb24iOiJCdWZmZXJpbmcgaXMgZW5hYmxlZCBmb3IgdGhlIGN1cnJlbnQgdG9vbC4iLCJsYW5ndWFnZS1jb21tb24tZmVhdHVyZS1vZmZsaW5lLXRvb2xzIjoiTWFuYWdlIE9mZmxpbmUgRGF0YSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tZGVhY3RpdmF0ZS12aWV3IjoiRGVhY3RpdmF0ZXMgYSB2aWV3LiIsImxhbmd1YWdlLXRvb2xiYXItZmluZC1kYXRhLXRvb2xzIjoiRmluZCBEYXRhIFRvb2xzIiwibGFuZ3VhZ2UtbWVudS1leHBvcnQtcmVzdWx0cy10by1zaHAiOiJFeHBvcnQgdG8gU2hhcGVmaWxlIiwibGFuZ3VhZ2Utc2VhcmNoLXdvcmxkLXBsYWNlLW5hbWVzIjoiV29ybGQgUGxhY2UgTmFtZXMiLCJsYW5ndWFnZS1jb21tb24tbm90LWF2YWlsYWJsZS1vZmZsaW5lIjoiVGhpcyBmdW5jdGlvbiBpcyBub3QgYXZhaWxhYmxlIHdoZW4gb2ZmbGluZS4iLCJsYW5ndWFnZS1yZXN1bHRzIjoiUmVzdWx0cyIsImxhbmd1YWdlLXRvb2xiYXItYW5hbHlzaXMtbWVhc3VyZW1lbnQtdG9vbHMiOiJNZWFzdXJlIiwibGFuZ3VhZ2UtdG9vbGJhci1uYXZpZ2F0aW9uLWhvbWUtdG9vbHRpcCI6IlJldHVybnMgdG8gaW50cm9kdWN0b3J5IHBhZ2UiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXNldC1hY3RpdmUtdG9vbCI6IlNldHMgdGhlIGFjdGl2ZSB0b29sLiIsImxhbmd1YWdlLW1lbnUtZXhwb3J0LXJlc3VsdHMtdG8teGxzeCI6IkV4cG9ydCB0byBYTFNYIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zaG93LWxheWVyLWxpc3QiOiJBY3RpdmF0ZXMgdGhlIExheWVyTGlzdCBWaWV3LiIsImxhbmd1YWdlLXRvb2xiYXItc2hvdy1sYXllcmxpc3QiOiJMYXllciBMaXN0IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi11cGRhdGUtZmVhdHVyZS1sYXllci1tb2RhbC1tZXNzYWdlIjoiVXBkYXRlIHRoZSB2aXNpYmxlIE1vZGVsTWVzc2FnZVZpZXcgdG8gYWxzbyBpbmNsdWRlIHRoZSBnaXZlbiBtZXNzYWdlLiIsImxhbmd1YWdlLXJlc3VsdHMtdG9nZ2xlLXRhYmxlLXZpZXctZGVzYyI6IlZpZXcgcmVzdWx0cyBpbiB0YWJsZSBmb3JtYXQiLCJsYW5ndWFnZS1jb21tb24tZmVhdHVyZS1lZGl0bG9nIjoiVmlldyBFZGl0IExvZyIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tdGFrZS1hcHBsaWNhdGlvbi1vZmZsaW5lIjoiUHV0cyB0aGUgYXBwbGljYXRpb24gaW4gYW4gb2ZmbGluZSBzdGF0ZS4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXN0YXJ0LWVkaXRpbmctZmVhdHVyZSI6IkJlZ2lucyBlZGl0aW5nIGFuIGV4aXN0aW5nIGZlYXR1cmUuIiwibGFuZ3VhZ2UtbWVudS1kZWZhdWx0LXRpdGxlIjoiT3B0aW9ucyIsImxhbmd1YWdlLW1lbnUtcmVzdWx0cy1saXN0LWFjdGlvbnMtZGVzYyI6IlJlc3VsdHMgTGlzdCBBY3Rpb25zIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi16b29tLXRvLWV4dGVudCI6Ilpvb21zIHRvIHRoZSBnaXZlbiBleHRlbnQuIiwibGFuZ3VhZ2UtY29tbW9uLW5vLXJlc3VsdHMtc2hvcnQiOiJObyByZXN1bHRzIiwibGFuZ3VhZ2UtcGFnZS1sYXN0IjoiTGFzdCBwYWdlIiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1yZWN0YW5nbGUtdG9vbHRpcCI6IkZpbmQgb3V0IGFib3V0IGFuIGFyZWEgb24gdGhlIG1hcCBkZWZpbmVkIGJ5IGEgcmVjdGFuZ2xlIiwibGFuZ3VhZ2UtY29tbW9uLWhpZGUiOiJIaWRlIiwibGFuZ3VhZ2UtdG9vbGJhci10YWItbmF2aWdhdGlvbiI6Ik5hdmlnYXRpb24iLCJsYW5ndWFnZS1jb21tb24tbGF5ZXItZGF0YSI6IkxheWVyIERhdGEiLCJsYW5ndWFnZS1tZW51LWxhdGl0dWRlLWdlb2dyYXBoaWNzIjoiTGF0aXR1ZGUgR2VvZ3JhcGhpY3MgR3JvdXAgTHRkLiIsImxhbmd1YWdlLXRhYi1zY3JvbGwtbmV4dCI6Ik5leHQgTGF5ZXIiLCJsYW5ndWFnZS1sYXllci1hY3Rpb25zLXRpdGxlIjoiTGF5ZXIgQWN0aW9ucyIsImxhbmd1YWdlLWNvbW1vbi1yZXN1bHRzIjoiUmVzdWx0cyIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tZ2V0LXJlbGF0ZWQtZmVhdHVyZSI6IkdldHMgZmVhdHVyZXMgcmVsYXRlZCB0byB0aGUgZmVhdHVyZS4iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1mcmVlaGFuZCI6IkZyZWVoYW5kIiwibGFuZ3VhZ2UtbWVudS1tYXB0aXAtYWN0aW9ucyI6IkFjdGlvbnMiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXByb2plY3QiOiJDYWxscyBhIGdlb21ldHJ5IHNlcnZpY2UgdG8gcHJvamVjdCBnZW9tZXRyaWVzIGJldHdlZW4gZGlmZmVyZW50IGNvb3JkaW5hdGUgc3lzdGVtcy4iLCJsYW5ndWFnZS1yZXN1bHRzLXRvdGFsIjoiVG90YWwiLCJsYW5ndWFnZS1jb21tb24tYmFjayI6IkJhY2siLCJsYW5ndWFnZS1tZW51LWVudGVyLW9ubGluZS1kZXNjIjoiR28gdG8gb25saW5lIG1vZGUgYW5kIHZpZXcgbGl2ZSBtYXAgZGF0YSBmcm9tIHRoZSB3ZWIuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1wcm9tcHQiOiJEaXNwbGF5cyBhIHByb21wdC4iLCJsYW5ndWFnZS1jb21tb24tbm8tcmVzdWx0cyI6Ik5vIHJlc3VsdHMgdG8gZGlzcGxheSIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXBhbGV0dGUtc21hbGwtY2xlYXItYWxsIjoiQ2xlYXIgQWxsIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1jcmVhdGUtaGlnaGxpZ2h0LWxheWVyIjoiQ3JlYXRlcyBhIG5ldyBoaWdobGlnaHQgbGF5ZXIgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUuIiwibGFuZ3VhZ2UtbWVudS1wcm92aXNpb24tZm9yLW9mZmxpbmUiOiJQcmVwYXJlIGRldmljZSBmb3Igb2ZmbGluZSB1c2UiLCJsYW5ndWFnZS1jb21tb24tbG9hZGluZyI6IkxvYWRpbmcuLi4iLCJsYW5ndWFnZS1tZW51LXZpc3VhbGl6YXRpb24tZGVzYyI6IkVuYWJsZSBIZWF0IE1hcHMgb3IgQ2x1c3RlcmluZyB0byBiZSBzaG93bi4iLCJsYW5ndWFnZS1tZW51LWlkZW50aWZ5LXJlY3RhbmdsZSI6IklkZW50aWZ5IGJ5IHJlY3RhbmdsZSIsImxhbmd1YWdlLXRvb2xiYXItYm9va21hcmstb3BlbiI6Ik9wZW4gdGhlIGJvb2ttYXJrcyB2aWV3IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1wYW4tdG8tcG9pbnQiOiJQYW5zIHRvIGEgcG9pbnQgb3Igb3RoZXIgdHlwZSBvZiBHZW9tZXRyeS4iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1lbGxpcHNlIjoiRWxsaXBzZSIsImxhbmd1YWdlLXRvb2xiYXItdGFiLWFuYWx5c2lzIjoiQW5hbHlzaXMiLCJsYW5ndWFnZS1zbWFydC1wYW5lbC1jbG9zZSI6IkNsb3NlIFBhbmVsIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1mZWF0dXJlLWxheWVyLWNsZWFyLWRhdGEiOiJDbGVhcnMgdGhlIGRhdGEgZm9yIGEgZ2l2ZW4gbWFwIHNlcnZpY2UgVVJMLiIsImxhbmd1YWdlLXRvb2xiYXItYnVmZmVyaW5nLWRpc2FibGUiOiJEaXNhYmxlIGJ1ZmZlcmluZyIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tdXBkYXRlLXJlbGF0ZWQtcmVjb3JkIjoiVXBkYXRlcyBhIHJlbGF0ZWQgdGFibGUgcmVjb3JkLiIsImxhbmd1YWdlLXRvb2xiYXItYm9va21hcmsiOiJCb29rbWFya3MiLCJsYW5ndWFnZS1mcmFtZXdvcmstdWktdmlldy1jb250YWluZXItdmlldy1iYWNrIjoiR28gQmFjayB7MH0ifQ==");
geocortex.framework.notifyLibraryDownload("Mapping.Infrastructure");
