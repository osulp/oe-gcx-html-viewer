!function(){function e(e,t,n){if("string"==typeof e&&(n=t,t=e),void 0!==n)for(var o=t.split("."),i=null,r=window,a=0,s=o.length;a<s;a++)i=o[a],a==s-1?r[i]=n:r[i]||(r[i]={}),r=r[i];else console.warn("Undefined shim for: "+t)}var t="<div class='region context-menu-region' data-binding='{@var: contextMenu}{@class-offset-left: isOffsetLeft}{@class-offset-up: isOffsetUp}' data-region-name='ContextMenuContentRegion' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>";require({cache:{"Mapping/modules/ContextMenu/ContextMenuModule":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define(["require","exports","geocortex/framework/application/ModuleBase"],function(t,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.initialize=function(e){t.prototype.initialize.call(this,e),e&&e.menus&&this.app.menuRegistry.loadMenus(e)},n}(o.ModuleBase);n.ContextMenuModule=i})},"Mapping/modules/ContextMenu/ContextMenuView":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define(["require","exports","geocortex/framework/ui/ViewBase"],function(t,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function n(e,n){var o=t.call(this,e,n)||this;return o.app.command("ActivateContextMenu").register(o,o._positionAndActivateMenu),o.app.command("DeactivateContextMenu").register(o,o._deactivateMenu),o}return e(n,t),n.prototype.attach=function(e){t.prototype.attach.call(this,e)},n.prototype.activated=function(){var e=this;t.prototype.activated.call(this),this.app.command("TapToDismiss").execute({view:this,onOtherInteracted:function(t){return e._onOtherViewTapped(t)}}),this.app.event("ContextMenuActivated").publish()},n.prototype.deactivated=function(){t.prototype.deactivated.call(this),this.viewModel.isOffsetLeft.set(!1),this.viewModel.isOffsetUp.set(!1),this.app.event("ContextMenuDeactivated").publish()},n.prototype._positionAndActivateMenu=function(e){if(this._tryActivateView(e.viewId),!this.app.configuration.mobileMode){this.root.style.left=e.pageX+"px",this.root.style.top=e.pageY+"px";var t=this.contextMenu;t.style.opacity="0",this.app.viewManager.activateView(this);var n=document.body.clientWidth,o=document.body.clientHeight,i=t.getBoundingClientRect();e.pageX+i.width>n?(this.viewModel.isOffsetLeft.set(!0),this.root.style.left=e.pageX-i.width+"px"):this.viewModel.isOffsetLeft.set(!1),e.pageY+i.height>o?(this.viewModel.isOffsetUp.set(!0),this.root.style.top=e.pageY-i.height+"px"):this.viewModel.isOffsetUp.set(!1),t.style.opacity="1"}},n.prototype._tryActivateView=function(e){var t=this.app.viewManager.getViewById(e);t?this.app.viewManager.activateView(t):this.app.trace.error(String.format("ContextMenuView: Could not find view by id when activating the context menu: {0}",e))},n.prototype._deactivateMenu=function(){this.app.viewManager.deactivateView(this)},n.prototype._onOtherViewTapped=function(e){this._deactivateMenu()},n}(o.ViewBase);n.ContextMenuView=i})},"Mapping/modules/ContextMenu/ContextMenuViewModel":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables"],function(t,n,o,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.isOffsetLeft=new i.Observable(!1),e.isOffsetUp=new i.Observable(!1),e}return e(n,t),n}(o.ViewModelBase);n.ContextMenuViewModel=r})},"url:/Mapping/modules/ContextMenu/ContextMenuView.html":t}}),require(["geocortex/framework/resourceManager"],function(e){e.resourceManager.register("Mapping","inv","Mapping/modules/ContextMenu/CSS/common.css","css","LkNvbnRleHRNZW51VmlldyB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHotaW5kZXg6IDk5OTsNCn0NCg0KLkNvbnRleHRNZW51VmlldyAuY29udGV4dC1tZW51LXJlZ2lvbiA+IGRpdiB7DQogICAgYmFja2dyb3VuZDogd2hpdGU7DQogICAgYm9yZGVyOiAxcHggc29saWQgI2Q5ZDlkOTsNCiAgICBib3gtc2hhZG93OiAwIDhweCAxN3B4IDAgcmdiYSgwLCAwLCAwLCAwLjIpLCAwIDZweCAyMHB4IDAgcmdiYSgwLCAwLCAwLCAwLjE5KTsNCiAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtOw0KfQ0KDQouQ29udGV4dE1lbnVWaWV3IC5tYXAtbWVudS1jb29yZGluYXRlcywNCi5Db250ZXh0TWVudVZpZXcgLm1hcC1tZW51LXJldmVyc2UtZ2VvY29kZSB7DQogICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7DQogICBmb250LXNpemU6IDAuOWVtOw0KICAgYmFja2dyb3VuZC1jb2xvcjogI0VFRUVFRTsNCiAgIHBhZGRpbmc6IDAuMjVlbSAxZW07DQogICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0Q5RDlEOTsNCn0="),e.resourceManager.register("Mapping","inv","Mapping/modules/ContextMenu/CSS/small.css","css","Lk1hcENvbnRleHRNZW51VmlldyAubWFwLW1lbnUtY29vcmRpbmF0ZXMsDQouTWFwQ29udGV4dE1lbnVWaWV3IC5tYXAtbWVudS1yZXZlcnNlLWdlb2NvZGUgew0KICAgd29yZC13cmFwOiBicmVhay13b3JkOw0KICAgYmFja2dyb3VuZC1jb2xvcjogI0VFRUVFRTsNCiAgIHBhZGRpbmc6IDAuMjVlbSAxZW07DQogICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0Q5RDlEOTsNCn0NCi5NYXBDb250ZXh0TWVudVZpZXcgLm1hcC1tZW51LXJldmVyc2UtZ2VvY29kZSBiIHsNCiAgICBkaXNwbGF5OiBibG9jaw0KfQ=="),e.resourceManager.register("Mapping","inv","Mapping/modules/ContextMenu/ContextMenuView.html","html",t)}),require({cache:{}}),define(["Mapping/modules/ContextMenu/ContextMenuModule","Mapping/modules/ContextMenu/ContextMenuView","Mapping/modules/ContextMenu/ContextMenuViewModel"],function(t,n,o){e(t,"geocortex.essentialsHtmlViewer.mapping.modules.ContextMenu.ContextMenuModule",t.ContextMenuModule),e(n,"geocortex.essentialsHtmlViewer.mapping.modules.ContextMenu.ContextMenuView",n.ContextMenuView),e(o,"geocortex.essentialsHtmlViewer.mapping.modules.ContextMenu.ContextMenuViewModel",o.ContextMenuViewModel)})}();