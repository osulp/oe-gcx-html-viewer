!function(){function e(e,n,t){if("string"==typeof e&&(t=n,n=e),void 0!==t)for(var i=n.split("."),o=null,r=window,s=0,a=i.length;s<a;s++)o=i[s],s==a-1?r[o]=t:r[o]||(r[o]={}),r=r[o];else console.warn("Undefined shim for: "+n)}var n="<div class='sign-in' tabindex='-1'>    <button type='button'        data-binding='{@event-onclick: handleSignInClick}                      {@text: @language-user-sign-in}                      {title: @language-user-sign-in-desc}                      {@style-color: linkColor}' tabindex='0'>    </button></div>",t="<div class='user-info-wrapper' tabindex='-1'>    <div class='user-info' data-binding='{@class-expanded: expanded}{@style-backgroundColor: backgroundColor}' >        <div class='user-info-expander'>            <a href='#' data-binding='{@event-onclick: handleExpanderClick}{@text: @language-user-openmenu}'></a>        </div>        <div class='sign-out'>            <button type='button'                data-binding='{@text: @language-user-sign-out}                              {title: @language-user-sign-out-desc}                              {@visible: signOutVisible}                              {@event-onclick: handleSignOutClick}                              {@style-color: linkColor}'>            </button>        </div>    </div>    <div class='user-info-popup' data-binding='{@visible: expanded}{@style-color: textColor}{@style-backgroundColor: backgroundColor}' tabindex='-1'>        <p class='user-info-desc' data-binding='{@text: @language-user-signed-in-as}'></p>        <p class='user-name' data-binding='{@text: userName}'></p>        <button            data-binding='{@text: @language-user-sign-out}                          {title: @language-user-sign-out-desc}                          {@visible: signOutVisible}                          {@event-onclick: handleSignOutClick}                          {@style-color: linkColor}'>        </button>    </div></div>";require({cache:{"Mapping/modules/User/SignInView":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();define(["require","exports","geocortex/framework/ui/ViewBase"],function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(n){function t(e,t){var i=n.call(this,e,t)||this;return i.app.command("SignIn").canExecuteChanged.subscribe(i,i._handleCanExecuteSignInChanged),i}return e(t,n),t.prototype._handleCanExecuteSignInChanged=function(){this.app.command("SignIn").canExecute()?this.isActive||this.app.viewManager.activateView(this):this.isActive&&this.app.viewManager.deactivateView(this)},t.prototype.handleSignInClick=function(e,n,t){this.app.command("SignIn").execute(null)},t}(i.ViewBase);t.SignInView=o})},"Mapping/modules/User/SignInViewModel":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables"],function(n,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.linkColor=new o.Observable("#1A72C4"),e}return e(t,n),t.prototype.initialize=function(e){e.linkColor&&this.linkColor.set(e.linkColor)},t}(i.ViewModelBase);t.SignInViewModel=r})},"Mapping/modules/User/UserInfoView":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();define(["require","exports","geocortex/framework/ui/ViewBase"],function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(n){function t(e,t){var i=n.call(this,e,t)||this;return i._unclickHandler=null,i.app.command("SignOut").canExecuteChanged.subscribe(i,i._handleCanExecuteSignOutChanged),i}return e(t,n),t.prototype.handleExpanderClick=function(e,n,t){this.viewModel.expanded.get()?this._hideUserInfo():this._showUserInfo()},t.prototype.handleSignOutClick=function(e,n,t){this._hideUserInfo(),this.app.command("SignOut").execute()},t.prototype._showUserInfo=function(){var e=this;$(document).bind("mousedown",this,this._unclickHandler=function(n){var t=e;$(n.target).parents().is(t.root)||e._hideUserInfo()}),this.viewModel.setExpanded(!0)},t.prototype._hideUserInfo=function(){this._unclickHandler&&($(document).unbind("mousedown",this._unclickHandler),this._unclickHandler=null),this.viewModel.setExpanded(!1)},t.prototype._handleCanExecuteSignOutChanged=function(){this.app.command("SignOut").canExecute()?this.app.viewManager.activateView(this):this.app.viewManager.deactivateView(this)},t}(i.ViewBase);t.UserInfoView=o})},"Mapping/modules/User/UserInfoViewModel":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables"],function(n,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.expanded=new o.Observable(!1),e.userName=new o.Observable(""),e.backgroundColor=new o.Observable("transparent"),e}return e(t,n),t.prototype.initialize=function(e){this.linkColor=new o.Observable(e.linkColor||"#1A72C4"),this.textColor=new o.Observable(e.textColor||"#333333"),this._backgroundColor=e.backgroundColor||"#FFFFFF";var n=this.app.site;n&&n.isInitialized?this._handleSiteInitialized(n):this.app.event("SiteInitializedEvent").once(this,this._handleSiteInitialized)},t.prototype.setExpanded=function(e){this.expanded.set(e),this.backgroundColor.set(e?this._backgroundColor:"transparent")},t.prototype._handleSiteInitialized=function(e){this.userName.set(e.principal.label)},t}(i.ViewModelBase);t.UserInfoViewModel=r})},"Mapping/modules/User/UserModule":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();define(["require","exports","geocortex/framework/application/ModuleBase","geocortex/infrastructure/eventArgs/UserEventArgs"],function(n,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(n){function t(e,t){var i=n.call(this,e,t)||this;return i.app.command("SignIn").register(i,i._executeSignIn,i._canExecuteSignIn),i.app.command("SignOut").register(i,i._executeSignOut,i._canExecuteSignOut),i}return e(t,n),t.prototype.initialize=function(e){n.prototype.initialize.call(this,e);var t=this.app.site;t&&t.isInitialized?this._handleSiteInitialized(t):this.app.event("SiteInitializedEvent").once(this,this._handleSiteInitialized),this.app.event("SiteAuthorizationFailedEvent").subscribe(this,this._handleSiteAuthorizationFailedEvent)},t.prototype._canExecuteSignIn=function(){return!!this.app.site&&this.app.site.canSignIn()},t.prototype._canExecuteSignOut=function(){return!!this.app.site&&this.app.site.canSignOut()},t.prototype._executeSignIn=function(e){var n=new o.UserEventArgs;this.app.event("UserSigningInEvent").publish(n),n.isCancelled||this.app.site.signIn(e)},t.prototype._executeSignOut=function(){var e=new o.UserEventArgs;this.app.event("UserSigningOutEvent").publish(e),e.isCancelled||this.app.site.signOut()},t.prototype._handleSiteInitialized=function(e){this.app.command("SignIn").raiseCanExecuteChanged(),this.app.command("SignOut").raiseCanExecuteChanged()},t.prototype._handleSiteAuthorizationFailedEvent=function(){this.app.command("SignIn").raiseCanExecuteChanged(),this.app.command("SignOut").raiseCanExecuteChanged()},t}(i.ModuleBase);t.UserModule=r})},"url:/Mapping/modules/User/SignInView.html":n,"url:/Mapping/modules/User/UserInfoView.html":t}}),require(["geocortex/framework/resourceManager"],function(e){e.resourceManager.register("Mapping","inv","Mapping/modules/User/CSS/common.css","css","LyogU1RBUlQ6IFVzZXIgLS0tLS0tLS0tLS0tLS0tICovDQoNCi5TaWduSW5WaWV3LCAuU2lnbkluVmlldy5hY3RpdmUsIC5Vc2VySW5mb1ZpZXcsIC5Vc2VySW5mb1ZpZXcuYWN0aXZlIHsNCiAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wOw0KICAgIGZsb2F0OiByaWdodDsNCn0NCg0KLnVzZXItaW5mby13cmFwcGVyIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQoNCi51c2VyLW5hbWUgew0KICAgIGZvbnQtc2l6ZTogMS4zZW07DQogICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCn0NCg0KLnVzZXItaW5mbyB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIG1hcmdpbjogMDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDsNCiAgICBib3JkZXItYm90dG9tOiAwOw0KICAgIHBhZGRpbmctbGVmdDogNXB4Ow0KfQ0KDQoudXNlci1pbmZvLWV4cGFuZGVyIHsNCiAgICBmbG9hdDogcmlnaHQ7DQogICAgYmFja2dyb3VuZDogdXJsKCJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL2Fycm93LWRvd24tc21hbGwtMjQucG5nIikgY2VudGVyIGNlbnRlciBuby1yZXBlYXQ7DQogICAgd2lkdGg6IDI0cHg7DQogICAgaGVpZ2h0OiAzM3B4Ow0KICAgIG1hcmdpbi10b3A6IDJweDsNCiAgICBtYXJnaW4tcmlnaHQ6IDJweDsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgIHRleHQtaW5kZW50OiAtOTk5cHg7DQp9DQoNCi51c2VyLWluZm8tZXhwYW5kZXI6aG92ZXIsDQoudXNlci1pbmZvLmV4cGFuZGVkIC51c2VyLWluZm8tZXhwYW5kZXIgew0KICAgIGZpbHRlcjogbm9uZTsNCn0NCg0KLnVzZXItaW5mbywNCi51c2VyLWluZm8gYSB7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgei1pbmRleDogMTsNCn0NCg0KLnVzZXItaW5mby1leHBhbmRlciBhIHsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBoZWlnaHQ6IDEwMCU7DQp9DQoNCi51c2VyLWluZm8uZXhwYW5kZWQgew0KICAgIGJvcmRlcjogMXB4IHNvbGlkICNEOUQ5RDk7DQogICAgYm9yZGVyLWJvdHRvbTogbm9uZTsNCiAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtIDAuMjVyZW0gMCAwOw0KICAgIHpvb206IDE7DQp9DQoNCi51c2VyLWluZm8tcG9wdXAgew0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICByaWdodDogMHB4Ow0KICAgIHRvcDogNDVweDsNCiAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtIDAgMC4yNXJlbSAwLjI1cmVtOw0KICAgIGZvbnQtc2l6ZTogMWVtOw0KICAgIG1hcmdpbjogMDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCAjRDlEOUQ5Ow0KICAgIHBhZGRpbmc6IDIwcHg7DQogICAgbWluLXdpZHRoOiAyMDBweDsNCiAgICB0ZXh0LWFsaWduOiBsZWZ0Ow0KfQ0KLnNpZ24tb3V0LA0KLnNpZ24taW4gew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICBsaW5lLWhlaWdodDogMWVtOw0KfQ0KLnNpZ24tb3V0IHsNCiAgICBmbG9hdDogcmlnaHQ7DQp9DQoNCi5zaWduLW91dCBidXR0b24sDQouc2lnbi1pbiBidXR0b24gew0KICAgIHBhZGRpbmc6IC41OGVtOw0KICAgIGJvcmRlci1yYWRpdXM6IDAuMjVyZW07DQp9DQoNCg0KLnNpZ24taW4gYnV0dG9uLCAuc2lnbi1pbiBidXR0b246dmlzaXRlZCwgLnVzZXItaW5mby13cmFwcGVyIGJ1dHRvbiwgLnVzZXItaW5mby13cmFwcGVyIGJ1dHRvbjp2aXNpdGVkIHsNCiAgICBmb250LXNpemU6IDEuMTVlbTsNCn0NCg0KLyogRU5EOiBVc2VyIC0tLS0tLS0tLS0tLS0tLSAqLw0K"),e.resourceManager.register("Mapping","inv","Mapping/modules/User/SignInView.html","html",n),e.resourceManager.register("Mapping","inv","Mapping/modules/User/UserInfoView.html","html",t)}),require({cache:{}}),define(["Mapping/modules/User/SignInView","Mapping/modules/User/SignInViewModel","Mapping/modules/User/UserInfoView","Mapping/modules/User/UserInfoViewModel","Mapping/modules/User/UserModule"],function(n,t,i,o,r){e(n,"geocortex.essentialsHtmlViewer.mapping.modules.User.SignInView",n.SignInView),e(t,"geocortex.essentialsHtmlViewer.mapping.modules.User.SignInViewModel",t.SignInViewModel),e(i,"geocortex.essentialsHtmlViewer.mapping.modules.User.UserInfoView",i.UserInfoView),e(o,"geocortex.essentialsHtmlViewer.mapping.modules.User.UserInfoViewModel",o.UserInfoViewModel),e(r,"geocortex.essentialsHtmlViewer.mapping.modules.User.UserModule",r.UserModule)})}();