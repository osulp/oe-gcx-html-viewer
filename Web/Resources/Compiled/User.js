function shim(e,n,i){if("string"==typeof e&&(i=n,n=e),"undefined"==typeof i)return void console.warn("Undefined shim for: "+n);for(var t=n.split("."),s=null,r=window,o=0,a=t.length;o<a;o++)s=t[o],o==a-1?r[s]=i:r[s]||(r[s]={}),r=r[s]}require({cache:{"Mapping/modules/User/SignInView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,n,i){"use strict";var t=function(e){function n(n,i){var t=e.call(this,n,i)||this;return t.app.command("SignIn").canExecuteChanged.subscribe(t,t._handleCanExecuteSignInChanged),t}return __extends(n,e),n.prototype._handleCanExecuteSignInChanged=function(){this.app.command("SignIn").canExecute()?this.isActive||this.app.viewManager.activateView(this):this.isActive&&this.app.viewManager.deactivateView(this)},n.prototype.handleSignInClick=function(e,n,i){this.app.command("SignIn").execute(null)},n}(i.ViewBase);n.SignInView=t})},"Mapping/modules/User/SignInViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables"],function(e,n,i,t){"use strict";var s=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.linkColor=new t.Observable("#1A72C4"),n}return __extends(n,e),n.prototype.initialize=function(e){e.linkColor&&this.linkColor.set(e.linkColor)},n}(i.ViewModelBase);n.SignInViewModel=s})},"Mapping/modules/User/UserInfoView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,n,i){"use strict";var t=function(e){function n(n,i){var t=e.call(this,n,i)||this;return t._unclickHandler=null,t.app.command("SignOut").canExecuteChanged.subscribe(t,t._handleCanExecuteSignOutChanged),t}return __extends(n,e),n.prototype.handleExpanderClick=function(e,n,i){this.viewModel.expanded.get()?this._hideUserInfo():this._showUserInfo()},n.prototype.handleSignOutClick=function(e,n,i){this._hideUserInfo(),this.app.command("SignOut").execute()},n.prototype._showUserInfo=function(){var e=this;$(document).bind("mousedown",this,this._unclickHandler=function(n){var i=e,t=$(n.target).parents().is(i.root);t||e._hideUserInfo()}),this.viewModel.setExpanded(!0)},n.prototype._hideUserInfo=function(){this._unclickHandler&&($(document).unbind("mousedown",this._unclickHandler),this._unclickHandler=null),this.viewModel.setExpanded(!1)},n.prototype._handleCanExecuteSignOutChanged=function(){this.app.command("SignOut").canExecute()?this.app.viewManager.activateView(this):this.app.viewManager.deactivateView(this)},n}(i.ViewBase);n.UserInfoView=t})},"Mapping/modules/User/UserInfoViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables"],function(e,n,i,t){"use strict";var s=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.expanded=new t.Observable((!1)),n.userName=new t.Observable(""),n.backgroundColor=new t.Observable("transparent"),n}return __extends(n,e),n.prototype.initialize=function(e){this.linkColor=new t.Observable(e.linkColor||"#1A72C4"),this.textColor=new t.Observable(e.textColor||"#333333"),this._backgroundColor=e.backgroundColor||"#FFFFFF";var n=this.app.site;n&&n.isInitialized?this._handleSiteInitialized(n):this.app.event("SiteInitializedEvent").once(this,this._handleSiteInitialized)},n.prototype.setExpanded=function(e){this.expanded.set(e),this.backgroundColor.set(e?this._backgroundColor:"transparent")},n.prototype._handleSiteInitialized=function(e){this.userName.set(e.principal.label)},n}(i.ViewModelBase);n.UserInfoViewModel=s})},"Mapping/modules/User/UserModule":function(){define(["require","exports","geocortex/framework/application/ModuleBase","geocortex/infrastructure/eventArgs/UserEventArgs"],function(e,n,i,t){"use strict";var s=function(e){function n(n,i){var t=e.call(this,n,i)||this;return t.app.command("SignIn").register(t,t._executeSignIn,t._canExecuteSignIn),t.app.command("SignOut").register(t,t._executeSignOut,t._canExecuteSignOut),t}return __extends(n,e),n.prototype.initialize=function(n){e.prototype.initialize.call(this,n);var i=this.app.site;i&&i.isInitialized?this._handleSiteInitialized(i):this.app.event("SiteInitializedEvent").once(this,this._handleSiteInitialized),this.app.event("SiteAuthorizationFailedEvent").subscribe(this,this._handleSiteAuthorizationFailedEvent)},n.prototype._canExecuteSignIn=function(){return!!this.app.site&&this.app.site.canSignIn()},n.prototype._canExecuteSignOut=function(){return!!this.app.site&&this.app.site.canSignOut()},n.prototype._executeSignIn=function(e){var n=new t.UserEventArgs;this.app.event("UserSigningInEvent").publish(n),n.isCancelled||this.app.site.signIn(e)},n.prototype._executeSignOut=function(){var e=new t.UserEventArgs;this.app.event("UserSigningOutEvent").publish(e),e.isCancelled||this.app.site.signOut()},n.prototype._handleSiteInitialized=function(e){this.app.command("SignIn").raiseCanExecuteChanged(),this.app.command("SignOut").raiseCanExecuteChanged()},n.prototype._handleSiteAuthorizationFailedEvent=function(){this.app.command("SignIn").raiseCanExecuteChanged(),this.app.command("SignOut").raiseCanExecuteChanged()},n}(i.ModuleBase);n.UserModule=s})},"url:/Mapping/modules/User/SignInView.html":'<div class="sign-in" tabindex="-1">\r\n    <button type="button"\r\n        data-binding="{@event-onclick: handleSignInClick}\r\n                      {@text: @language-user-sign-in}\r\n                      {title: @language-user-sign-in-desc}\r\n                      {@style-color: linkColor}" tabindex="0">\r\n    </button>\r\n</div>\r\n',"url:/Mapping/modules/User/UserInfoView.html":'<div class="user-info-wrapper" tabindex="-1">\r\n    <div class="user-info" data-binding="{@class-expanded: expanded}{@style-backgroundColor: backgroundColor}" >\r\n        <div class="user-info-expander">\r\n            <a href="#" data-binding="{@event-onclick: handleExpanderClick}{@text: @language-user-openmenu}"></a>\r\n        </div>\r\n        <div class="sign-out">\r\n            <button type="button"\r\n                data-binding="{@text: @language-user-sign-out}\r\n                              {title: @language-user-sign-out-desc}\r\n                              {@visible: signOutVisible}\r\n                              {@event-onclick: handleSignOutClick}\r\n                              {@style-color: linkColor}">\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div class="user-info-popup" data-binding="{@visible: expanded}{@style-color: textColor}{@style-backgroundColor: backgroundColor}" tabindex="-1">\r\n        <p class="user-info-desc" data-binding="{@text: @language-user-signed-in-as}"></p>\r\n        <p class="user-name" data-binding="{@text: userName}"></p>\r\n        <button\r\n            data-binding="{@text: @language-user-sign-out}\r\n                          {title: @language-user-sign-out-desc}\r\n                          {@visible: signOutVisible}\r\n                          {@event-onclick: handleSignOutClick}\r\n                          {@style-color: linkColor}">\r\n        </button>\r\n    </div>\r\n</div>\r\n'}}),define(["Mapping/modules/User/SignInView","Mapping/modules/User/SignInViewModel","Mapping/modules/User/UserInfoView","Mapping/modules/User/UserInfoViewModel","Mapping/modules/User/UserModule"],function(e,n,i,t,s){shim(e,"geocortex.essentialsHtmlViewer.mapping.modules.User.SignInView",e.SignInView),shim(n,"geocortex.essentialsHtmlViewer.mapping.modules.User.SignInViewModel",n.SignInViewModel),shim(i,"geocortex.essentialsHtmlViewer.mapping.modules.User.UserInfoView",i.UserInfoView),shim(t,"geocortex.essentialsHtmlViewer.mapping.modules.User.UserInfoViewModel",t.UserInfoViewModel),shim(s,"geocortex.essentialsHtmlViewer.mapping.modules.User.UserModule",s.UserModule)});