!function(){var t="<div class='sign-in' tabindex='-1'>    <button type='button'        data-binding='{@event-onclick: handleSignInClick}                      {@text: @language-user-sign-in}                      {title: @language-user-sign-in-desc}                      {@style-color: linkColor}' tabindex='0'>    </button></div>",n="<div class='user-info-wrapper' tabindex='-1'>    <div class='user-info' data-binding='{@class-expanded: expanded}{@style-backgroundColor: backgroundColor}' >        <div class='user-info-expander'>            <a href='#' data-binding='{@event-onclick: handleExpanderClick}{@text: @language-user-openmenu}'></a>        </div>        <div class='sign-out'>            <button type='button'                data-binding='{@text: @language-user-sign-out}                              {title: @language-user-sign-out-desc}                              {@visible: signOutVisible}                              {@event-onclick: handleSignOutClick}                              {@style-color: linkColor}'>            </button>        </div>    </div>    <div class='user-info-popup' data-binding='{@visible: expanded}{@style-color: textColor}{@style-backgroundColor: backgroundColor}' tabindex='-1'>        <p class='user-info-desc' data-binding='{@text: @language-user-signed-in-as}'></p>        <p class='user-name' data-binding='{@text: userName}'></p>        <button            data-binding='{@text: @language-user-sign-out}                          {title: @language-user-sign-out-desc}                          {@visible: signOutVisible}                          {@event-onclick: handleSignOutClick}                          {@style-color: linkColor}'>        </button>    </div></div>";function a(e,t,n){if("string"==typeof e&&(n=t,t=e),void 0!==n)for(var i=t.split("."),o=null,a=window,s=0,r=i.length;s<r;s++)o=i[s],s==r-1?a[o]=n:a[o]||(a[o]={}),a=a[o];else console.warn("Undefined shim for: "+t)}require({cache:{"Mapping/modules/User/SignInView":function(){var i,s=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=(i=n.ViewBase,s(a,i),a.prototype._handleCanExecuteSignInChanged=function(){this.app.command("SignIn").canExecute()?this.isActive||this.app.viewManager.activateView(this):this.isActive&&this.app.viewManager.deactivateView(this)},a.prototype.handleSignInClick=function(e,t,n){this.app.command("SignIn").execute(null)},a);function a(e,t){var n=i.call(this,e,t)||this;return n.app.waitUntilApplicationReady().then(function(){n.app.command("SignIn").canExecute()&&n.app.viewManager.activateView(n),n.app.command("SignIn").canExecuteChanged.subscribe(n,n._handleCanExecuteSignInChanged)}),n}t.SignInView=o})},"Mapping/modules/User/SignInViewModel":function(){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables"],function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a=(o=n.ViewModelBase,r(s,o),s.prototype.initialize=function(e){e.linkColor&&this.linkColor.set(e.linkColor)},s);function s(){var e=null!==o&&o.apply(this,arguments)||this;return e.linkColor=new i.Observable("#1A72C4"),e}t.SignInViewModel=a})},"Mapping/modules/User/UserInfoView":function(){var i,s=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=(i=n.ViewBase,s(a,i),a.prototype.handleExpanderClick=function(e,t,n){this.viewModel.expanded.get()?this._hideUserInfo():this._showUserInfo()},a.prototype.handleSignOutClick=function(e,t,n){this._hideUserInfo(),this.app.command("SignOut").execute()},a.prototype._showUserInfo=function(){var n=this;$(document).bind("mousedown",this,this._unclickHandler=function(e){var t=n;$(e.target).parents().is(t.root)||n._hideUserInfo()}),this.viewModel.setExpanded(!0)},a.prototype._hideUserInfo=function(){this._unclickHandler&&($(document).unbind("mousedown",this._unclickHandler),this._unclickHandler=null),this.viewModel.setExpanded(!1)},a.prototype._handleCanExecuteSignOutChanged=function(){this.app.command("SignOut").canExecute()?this.app.viewManager.activateView(this):this.app.viewManager.deactivateView(this)},a);function a(e,t){var n=i.call(this,e,t)||this;return n.app.waitUntilApplicationReady().then(function(){n.app.command("SignOut").canExecute()&&n.app.viewManager.activateView(n),n.app.command("SignOut").canExecuteChanged.subscribe(n,n._handleCanExecuteSignOutChanged)}),n}t.UserInfoView=o})},"Mapping/modules/User/UserInfoViewModel":function(){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables"],function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a=(o=n.ViewModelBase,r(s,o),s.prototype.initialize=function(e){var t=this;this.linkColor=new i.Observable(e.linkColor||"#1A72C4"),this.textColor=new i.Observable(e.textColor||"#333333"),this._backgroundColor=e.backgroundColor||"#FFFFFF",this.app.waitUntilSiteInitialized().then(function(){t._handleSiteInitialized()})},s.prototype.setExpanded=function(e){this.expanded.set(e),this.backgroundColor.set(e?this._backgroundColor:"transparent")},s.prototype._handleSiteInitialized=function(){this.userName.set(this.app.site.principal.label)},s);function s(){var e=null!==o&&o.apply(this,arguments)||this;return e.expanded=new i.Observable(!1),e.userName=new i.Observable(""),e.backgroundColor=new i.Observable("transparent"),e}t.UserInfoViewModel=a})},"Mapping/modules/User/UserModule":function(){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});define(["require","exports","geocortex/framework/application/ModuleBase","geocortex/infrastructure/eventArgs/UserEventArgs"],function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a=(o=n.ModuleBase,r(s,o),s.prototype.initialize=function(e){o.prototype.initialize.call(this,e);var t=this.app.site;t&&t.isInitialized?this._handleSiteInitialized(t):this.app.event("SiteInitializingEvent").once(this,this._handleSiteInitialized),this.app.event("SiteAuthorizationFailedEvent").subscribe(this,this._handleSiteAuthorizationFailedEvent)},s.prototype._canExecuteSignIn=function(){return!!this.app.site&&this.app.site.canSignIn()},s.prototype._canExecuteSignOut=function(){return!!this.app.site&&this.app.site.canSignOut()},s.prototype._executeSignIn=function(e){var t=new i.UserEventArgs;this.app.event("UserSigningInEvent").publish(t),t.isCancelled||this.app.site.signIn(e)},s.prototype._executeSignOut=function(){var e=new i.UserEventArgs;this.app.event("UserSigningOutEvent").publish(e),e.isCancelled||this.app.site.signOut()},s.prototype._handleSiteInitialized=function(e){this.app.command("SignIn").raiseCanExecuteChanged(),this.app.command("SignOut").raiseCanExecuteChanged()},s.prototype._handleSiteAuthorizationFailedEvent=function(){this.app.command("SignIn").raiseCanExecuteChanged(),this.app.command("SignOut").raiseCanExecuteChanged()},s);function s(e,t){var n=o.call(this,e,t)||this;return n.app.command("SignIn").register(n,n._executeSignIn,n._canExecuteSignIn),n.app.command("SignOut").register(n,n._executeSignOut,n._canExecuteSignOut),n}t.UserModule=a})},"url:/Mapping/modules/User/SignInView.html":t,"url:/Mapping/modules/User/UserInfoView.html":n}}),require(["geocortex/framework/resourceManager"],function(e){e.resourceManager.register("Mapping","inv","Mapping/modules/User/CSS/common.css","css","LyogU1RBUlQ6IFVzZXIgLS0tLS0tLS0tLS0tLS0tICovDQoNCi5TaWduSW5WaWV3LCAuU2lnbkluVmlldy5hY3RpdmUsIC5Vc2VySW5mb1ZpZXcsIC5Vc2VySW5mb1ZpZXcuYWN0aXZlIHsNCiAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wOw0KICAgIGZsb2F0OiByaWdodDsNCn0NCg0KLnVzZXItaW5mby13cmFwcGVyIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQoNCi51c2VyLW5hbWUgew0KICAgIGZvbnQtc2l6ZTogMS4zZW07DQogICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCn0NCg0KLnVzZXItaW5mbyB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIG1hcmdpbjogMDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDsNCiAgICBib3JkZXItYm90dG9tOiAwOw0KICAgIHBhZGRpbmctbGVmdDogNXB4Ow0KfQ0KDQoudXNlci1pbmZvLWV4cGFuZGVyIHsNCiAgICBmbG9hdDogcmlnaHQ7DQogICAgYmFja2dyb3VuZDogdXJsKCJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL2Fycm93LWRvd24tc21hbGwtMjQucG5nIikgY2VudGVyIGNlbnRlciBuby1yZXBlYXQ7DQogICAgd2lkdGg6IDI0cHg7DQogICAgaGVpZ2h0OiAzM3B4Ow0KICAgIG1hcmdpbi10b3A6IDJweDsNCiAgICBtYXJnaW4tcmlnaHQ6IDJweDsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgIHRleHQtaW5kZW50OiAtOTk5cHg7DQp9DQoNCi51c2VyLWluZm8tZXhwYW5kZXI6aG92ZXIsDQoudXNlci1pbmZvLmV4cGFuZGVkIC51c2VyLWluZm8tZXhwYW5kZXIgew0KICAgIGZpbHRlcjogbm9uZTsNCn0NCg0KLnVzZXItaW5mbywNCi51c2VyLWluZm8gYSB7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgei1pbmRleDogMTsNCn0NCg0KLnVzZXItaW5mby1leHBhbmRlciBhIHsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBoZWlnaHQ6IDEwMCU7DQp9DQoNCi51c2VyLWluZm8uZXhwYW5kZWQgew0KICAgIGJvcmRlcjogMXB4IHNvbGlkICNEOUQ5RDk7DQogICAgYm9yZGVyLWJvdHRvbTogbm9uZTsNCiAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtIDAuMjVyZW0gMCAwOw0KICAgIHpvb206IDE7DQp9DQoNCi51c2VyLWluZm8tcG9wdXAgew0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICByaWdodDogMHB4Ow0KICAgIHRvcDogNDVweDsNCiAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtIDAgMC4yNXJlbSAwLjI1cmVtOw0KICAgIGZvbnQtc2l6ZTogMWVtOw0KICAgIG1hcmdpbjogMDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCAjRDlEOUQ5Ow0KICAgIHBhZGRpbmc6IDIwcHg7DQogICAgbWluLXdpZHRoOiAyMDBweDsNCiAgICB0ZXh0LWFsaWduOiBsZWZ0Ow0KfQ0KLnNpZ24tb3V0LA0KLnNpZ24taW4gew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICBsaW5lLWhlaWdodDogMWVtOw0KfQ0KLnNpZ24tb3V0IHsNCiAgICBmbG9hdDogcmlnaHQ7DQp9DQoNCi5zaWduLW91dCBidXR0b24sDQouc2lnbi1pbiBidXR0b24gew0KICAgIHBhZGRpbmc6IC41OGVtOw0KICAgIGJvcmRlci1yYWRpdXM6IDAuMjVyZW07DQp9DQoNCg0KLnNpZ24taW4gYnV0dG9uLCAuc2lnbi1pbiBidXR0b246dmlzaXRlZCwgLnVzZXItaW5mby13cmFwcGVyIGJ1dHRvbiwgLnVzZXItaW5mby13cmFwcGVyIGJ1dHRvbjp2aXNpdGVkIHsNCiAgICBmb250LXNpemU6IDEuMTVlbTsNCn0NCg0KLyogRU5EOiBVc2VyIC0tLS0tLS0tLS0tLS0tLSAqLw0K"),e.resourceManager.register("Mapping","inv","Mapping/modules/User/SignInView.html","html",t),e.resourceManager.register("Mapping","inv","Mapping/modules/User/UserInfoView.html","html",n)}),require({cache:{}}),define(["Mapping/modules/User/SignInView","Mapping/modules/User/SignInViewModel","Mapping/modules/User/UserInfoView","Mapping/modules/User/UserInfoViewModel","Mapping/modules/User/UserModule"],function(e,t,n,i,o){a(e,"geocortex.essentialsHtmlViewer.mapping.modules.User.SignInView",e.SignInView),a(t,"geocortex.essentialsHtmlViewer.mapping.modules.User.SignInViewModel",t.SignInViewModel),a(n,"geocortex.essentialsHtmlViewer.mapping.modules.User.UserInfoView",n.UserInfoView),a(i,"geocortex.essentialsHtmlViewer.mapping.modules.User.UserInfoViewModel",i.UserInfoViewModel),a(o,"geocortex.essentialsHtmlViewer.mapping.modules.User.UserModule",o.UserModule)})}();