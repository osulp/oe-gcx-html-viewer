!function(){function e(e,t,i){if("string"==typeof e&&(i=t,t=e),void 0!==i)for(var r=t.split("."),n=null,o=window,a=0,s=r.length;a<s;a++)n=r[a],a==s-1?o[n]=i:o[n]||(o[n]={}),o=o[n];else console.warn("Undefined shim for: "+t)}var t="<ul class='transient-identify'>    <li data-binding='{@source: bufferToggleButton}'>        <button class='toolbar-item' data-binding='{@template-for: bufferToggleButton}{@disabled: disabled}{@class-hidden: hidden}{@class-toggled-on: isToggledOn}{@noclass-toggled-off: isToggledOn}{@event-onclick: handleToolbarItemClick}{title: tooltip}'>            <img class='icon' data-binding='{@visible: iconUri}{src: iconUri}{alt: @language-identify-buffer-toggle-button-icon}' src='Resources/Images/Icons/Toolbar/icon-blank-24.png' />        <p data-binding='{@text: name}'></p>        </button>    </li>    <li data-binding='{@source: selectLayersButton}'>        <button class='toolbar-item' data-binding='{@template-for: selectLayersButton}{@disabled: disabled}{@event-onclick: handleToolbarItemClick}{title: tooltip}'>            <img class='icon' data-binding='{@visible: iconUri}{src: iconUri}{alt: @language-identify-select-layer-button-icon}' src='Resources/Images/Icons/Toolbar/icon-blank-24.png'  />            <p data-binding='{@text: name}'></p>        </button>    </li></ul>",i="<ul class='markup-edit'>    <li data-binding='{@source: bufferToggleButton}'>        <button class='toolbar-item' data-binding='{@template-for: bufferToggleButton}{@disabled: disabled}{@class-hidden: hidden}{@class-toggled-on: isToggledOn}{@noclass-toggled-off: isToggledOn}{@event-onclick: handleToolbarItemClick}{title: tooltip}'>            <img class='icon' data-binding='{@visible: iconUri}{src: iconUri}{alt: @language-identify-buffer-toggle-button-icon}' src='Resources/Images/Icons/Toolbar/icon-blank-24.png' />            <p data-binding='{@text: name}'></p>        </button>    </li>    <li data-binding='{@source: selectLayersButton}'>        <button class='toolbar-item' data-binding='{@template-for: selectLayersButton}{@disabled: disabled}{@event-onclick: handleToolbarItemClick}{title: tooltip}'>            <img class='icon' data-binding='{@visible: iconUri}{src: iconUri}{alt: @language-identify-select-layer-button-icon}' src='Resources/Images/Icons/Toolbar/icon-blank-24.png' />            <p data-binding='{@text: name}'></p>        </button>    </li></ul>";require({cache:{"Mapping/modules/Identify/IdentifyLayerSelectorView":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();define(["require","exports","geocortex/infrastructure/layerselector/LayerSelectorViewBase","geocortex/framework-ui/animation/AnimationSequence"],function(t,i,r,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return e(i,t),i.prototype.attach=function(e){e&&(t.prototype.attach.call(this,e),this.registerCommands())},i.prototype.registerCommands=function(){this.app.command("ActivateSelectLayersForIdentify").register(this,this.executeActivateSelectLayersForIdentify),this.app.command("DeactivateSelectLayersForIdentify").register(this,this.executeDeactivateSelectLayersForIdentify)},i.prototype.executeActivateSelectLayersForIdentify=function(){var e=this;n.runWhenIdle(function(){e.app.viewManager.activateView(e),e.viewModel.activateSelectLayersForIdentify()})},i.prototype.executeDeactivateSelectLayersForIdentify=function(){this.app.viewManager.deactivateView(this),this.viewModel.deactivateSelectLayersForIdentify()},i}(r.LayerSelectorViewBase);i.IdentifyLayerSelectorView=o})},"Mapping/modules/Identify/IdentifyLayerSelectorViewModel":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();define(["require","exports","geocortex/infrastructure/layerselector/LayerSelectorViewModelBase"],function(t,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(t){function i(e,i){var r=t.call(this,e,i)||this;return r.selectAllButtonTitle.set(r.app.getResource(i,"language-layer-selector-identify-select-all-tooltip")),r.clearAllButtonTitle.set(r.app.getResource(i,"language-layer-selector-identify-clear-all-tooltip")),r}return e(i,t),i.prototype.filter=function(e){var t="serviceLayer"===e.itemType?e.serviceLayer.gcxMapService:e.layer.gcxLayer;return!!t&&t.identifiable},i.prototype.handleLayerStateChange=function(e){this._setLayerStateForIdentify(e)},i.prototype.handleAllLayersEnabled=function(){this.app.command("EnableAllLayersForIdentify").execute()},i.prototype.handleAllLayersDisabled=function(){this.app.command("DisableAllLayersForIdentify").execute()},i.prototype.activateSelectLayersForIdentify=function(){var e=this,t=this.layerSelector.filteredLayerSelectorLayerItems.filter(function(e){return!e.isEnabled.get()});this.app.command("EnableAllLayersForIdentify").execute(),t.length&&t.forEach(function(t){return e._setLayerStateForIdentify(t)}),this.app.event("SelectLayersForIdentifyActivatedEvent").publish(this.layerSelector.filteredLayerSelectorLayerItems.slice(0))},i.prototype.deactivateSelectLayersForIdentify=function(){this.app.command("EnableAllLayersForIdentify").execute(),this.app.event("SelectLayersForIdentifyDeactivatedEvent").publish(this.layerSelector.filteredLayerSelectorLayerItems.slice(0))},i.prototype._setLayerStateForIdentify=function(e){var t="serviceLayer"===e.itemType?e.serviceLayer.gcxMapService:e.layer.serviceLayerInfo.gcxMapService,i="layer"===e.itemType?e.layer.gcxLayer:null;if(t){var r={};r.mapServiceId=t.id,r.layerId=i?i.id:null,e.isEnabled.get()?this.app.command("EnableLayerForIdentify").execute(r):this.app.command("DisableLayerForIdentify").execute(r)}else this.app.trace.error("IdentifyLayerSelectorViewModel: Could not handle layer state change. MapService not defined.")},i}(r.LayerSelectorViewModelBase);i.IdentifyLayerSelectorViewModel=n})},"Mapping/modules/Identify/IdentifyModule":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();define(["require","exports","geocortex/framework/application/ModuleBase","./LayerSelectorForIdentify","geocortex/framework/utils/utils","geocortex/infrastructure/FeatureSetCollection","geocortex/infrastructure/selection/CombineMode"],function(t,i,r,n,o,a,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=function(t){function i(e,i){var r=t.call(this,e,i)||this;return r.bufferingEnabled=!0,r._providers=[],r._previousFscSource=null,r._previousFscIds={},r._fscSourceCount={},r._fscDisplayName="",r._combineMode=s.CombineMode.REPLACE,r.app.command("Identify").register(r,r.search),r.app.command("SetIdentifyCombineMode").register(r,r._setIdentifyCombineMode,r._setIdentifyCombineModeCanExecute),r._fscDisplayName=e.getResource(i,"language-identify-results-header"),r}return e(i,t),i.prototype.initialize=function(e){t.prototype.initialize.call(this,e),e&&(e.resultsDisplayName&&(this._fscDisplayName=e.resultsDisplayName),this.pixelTolerance=isNaN(parseInt(e.pixelTolerance))?5:parseInt(e.pixelTolerance),this.polygonPixelTolerance=isNaN(parseInt(e.polygonPixelTolerance))?2:parseInt(e.polygonPixelTolerance),this.topMostLayerOnly=void 0!=e.topMostLayerOnly&&!!e.topMostLayerOnly,this.returnGeometry=void 0==e.returnGeometry||!!e.returnGeometry,this.visibleLayersOnly=void 0==e.visibleLayersOnly||!!e.visibleLayersOnly,this.layersInVisibleScaleRangeOnly=void 0==e.layersInVisibleScaleRangeOnly||!!e.layersInVisibleScaleRangeOnly,this.bufferingEnabled=void 0==e.bufferingEnabled||!!e.bufferingEnabled,this.restrictRasterIdentifyToPoint=void 0==e.restrictRasterIdentifyToPoint||!!e.restrictRasterIdentifyToPoint,dojo.isArray(e.tools)&&this.app&&this.app.toolRegistry&&this.app.toolRegistry.createTools(e.tools,!0),this.layerSelectorForIdentify=new n.LayerSelectorForIdentify(this.app,this),dojo.isArray(e.identifyProviders)&&this._loadProviders(e.identifyProviders))},i.prototype._setIdentifyCombineMode=function(e){-1===Object.keys(s.CombineMode).map(function(e){return Object[e]}).indexOf(e)?(this._combineMode=e,this.app.event("IdentifyCombineModeChangeEvent").publish(e)):this.app.trace.error("Invalid identify combine mode: "+e)},i.prototype._setIdentifyCombineModeCanExecute=function(e){return!0},i.prototype._loadProviders=function(e){for(var t=0;t<e.length;t++){var i=e[t];i&&(i.libraryId&&!this.app.allLibrariesLoaded?this._loadProviderWhenLibrariesDownloaded(i):this._loadProvider(i))}},i.prototype._loadProviderWhenLibrariesDownloaded=function(e){var t=this,i=this.app.event("ViewerLibrariesDownloadedEvent").subscribe(this,function(){t.app.event("ViewerLibrariesDownloadedEvent").unsubscribe(i),t._loadProvider(e)})},i.prototype._loadProvider=function(e){var t=dojo.getObject(e.type);if(t){var i=new t(this.app,e.libraryId||this.libraryId);i.isEnabled=!(!1===e.enabled),i.initialize(e.configuration||{}),this._providers.push(i)}else this.app.trace.error(this.id+" can't find identify provider typed "+e.type)},i.prototype.search=function(e){var t=this,i=this._processIdentifyArgs(e);this.cancelSearch();try{if(i.geometry&&"polygon"==i.geometry.type){var r=i.geometry;if(r.rings&&1===r.rings.length&&5===r.rings[0].length){var n=i.geometry.getExtent();if(!o.isNullOrUndefined(n)&&this.app.site){var a=this.app.site.getMap();if(a){var s=a.toScreen(new esri.geometry.Point(n.xmin,n.ymin,n.spatialReference)),l=a.toScreen(new esri.geometry.Point(n.xmax,n.ymax,n.spatialReference));96===Math.abs(l.x-s.x)&&96===Math.abs(l.y-s.y)&&(i.geometry=n.getCenter())}}}}}catch(e){this.app.trace.warning("Could not perform rectangle validation of polygon geometry: "+e)}i.source=i.source||"Identify",i.doNotBuffer?this._executeIdentifyImpl(i):this._applyBufferIfConfigured(i).then(function(e){i.geometry=e.geometry,t._executeIdentifyImpl(i)},function(e){t.app.trace.error("Identify: Could not apply buffer. Operation failed.")})},i.prototype._executeIdentifyImpl=function(e){var t=this,i=e.source||"Identify";"MapTip"===i&&this.app.event("_mapTipIdentifyTaskStartedEvent").publish();var r=new a.FeatureSetCollection;r.displayName.set(this._fscDisplayName),r.tag=e.geometry,this._previousFscSource=r.sourceName=i;var n=this.app.featureSetManager.getCollectionById(this._previousFscIds[i]),o=0;if(e.combineMode!==s.CombineMode.REPLACE&&n)r.id=n.id,o=n.countFeatures();else{this._previousFscSource&&(this.app.featureSetManager.tryCloseCollection(this._previousFscIds[this._previousFscSource]),this._previousFscIds[i]&&(this.app.featureSetManager.removeCollectionById(this._previousFscIds[i]),delete this._previousFscIds[i]));do{this._fscSourceCount[i]=this._fscSourceCount.hasOwnProperty(i)?this._fscSourceCount[i]+1:0,r.id=i+this._fscSourceCount[i]}while(this.app.featureSetManager.getCollectionById(r.id));this._previousFscIds[i]=r.id,this.app.featureSetManager.addCollection(r)}var l=[];this._providers.forEach(function(t){if(t.isEnabled){var i=t.search(r,e);i&&(i=i.then(function(){var t=e.combineMode;t!==s.CombineMode.REPLACE&&t!==s.CombineMode.INTERSECT&&n&&(t===s.CombineMode.UNION?n.unionInPlace(r):t===s.CombineMode.SUBTRACT&&n.subtractInPlace(r),n.featureSets.pulse())}),l.push(i))}}),l.length?Promise.all(l).then(function(){if(e.combineMode===s.CombineMode.INTERSECT&&n&&(n.intersectInPlace(r),n.featureSets.pulse()),"Identify"===e.source&&n){var i=void 0;switch(e.combineMode){case s.CombineMode.UNION:i=t.getResource("language-common-results-added-confirmation");break;case s.CombineMode.SUBTRACT:i=t.getResource("language-common-results-removed-confirmation")}if(i){if(0===o&&e.combineMode===s.CombineMode.SUBTRACT)i=t.getResource("language-common-results-combine-no-results");else{var a=n.countFeatures(),l=Math.abs(a-o);i=i.format(l,t.getResource("language-common-identify-results"))}t.app.command("AddResultsStatus").execute(i)}}t.app.event("_identifyTaskCompleteEvent").publish(),t.app.command("SetIdentifyCombineMode").raiseCanExecuteChanged()}):this.app.event("_identifyTaskCompleteEvent").publish()},i.prototype.cancelSearch=function(){for(var e=0;e<this._providers.length;e++)this._providers[e].cancelSearch()},i.prototype._processIdentifyArgs=function(e){var t={geometry:e instanceof esri.geometry.Geometry?e:e.geometry,source:e.source||"Identify",extent:e instanceof esri.geometry.Geometry?null:e.extent||null,width:e instanceof esri.geometry.Geometry?null:parseInt(e.width)||null,height:e instanceof esri.geometry.Geometry?null:parseInt(e.height)||null,pixelTolerance:isNaN(parseInt(e.pixelTolerance))?this.pixelTolerance:parseInt(e.pixelTolerance),polygonPixelTolerance:isNaN(parseInt(e.polygonPixelTolerance))?this.polygonPixelTolerance:parseInt(e.polygonPixelTolerance),topMostLayerOnly:void 0!=e.topMostLayerOnly?!!e.topMostLayerOnly:this.topMostLayerOnly,visibleLayersOnly:void 0!=e.visibleLayersOnly?!!e.visibleLayersOnly:this.visibleLayersOnly,visibleMapServicesOnly:void 0!=e.visibleMapServicesOnly&&!!e.visibleMapServicesOnly,layersInVisibleScaleRangeOnly:void 0!=e.layersInVisibleScaleRangeOnly?!!e.layersInVisibleScaleRangeOnly:this.layersInVisibleScaleRangeOnly,restrictRasterIdentifyToPoint:void 0!=e.restrictRasterIdentifyToPoint?!!e.restrictRasterIdentifyToPoint:this.restrictRasterIdentifyToPoint,returnGeometry:void 0!=e.returnGeometry?!!e.returnGeometry:this.returnGeometry,delayFSCOpen:void 0!=e.delayFSCOpen&&!!e.delayFSCOpen,layerRestriction:void 0!=e.layerRestriction&&dojo.isFunction(e.layerRestriction)?e.layerRestriction:null,doNotBuffer:void 0!=e.doNotBuffer&&!!e.doNotBuffer,combineMode:e.combineMode||s.CombineMode.REPLACE};return"Identify"===t.source&&(t.identifiableLayerInfo=this.layerSelectorForIdentify.mapServiceLayersToIdentify,e.combineMode||(t.combineMode=this._combineMode)),t},i.prototype._applyBufferIfConfigured=function(e){var t=this;return new Promise(function(i,r){var n=t.app.command("BufferGeometry");if(t.bufferingEnabled&&!n.isWrapper){var o={geometry:e.geometry,callback:function(e){return i(e)},errback:function(e){return r(e)},sourceCommand:e.source};n.execute(o)}else i({geometry:e.geometry})})},i}(r.ModuleBase);i.IdentifyModule=l})},"Mapping/modules/Identify/IdentifyOptionsView":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();define(["require","exports","geocortex/framework/ui/ViewBase"],function(t,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(t){function i(e,i){return t.call(this,e,i)||this}return e(i,t),i.prototype.attach=function(e){t.prototype.attach.call(this,e)},i.prototype.handleClickClose=function(){this.app.command("ClearActiveTool").execute()},i.prototype.handleToolbarItemClick=function(e,t,i){i.execute()},i}(r.ViewBase);i.IdentifyOptionsView=n})},"Mapping/modules/Identify/IdentifyOptionsViewModel":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/infrastructure/toolbarGroup/types/ToolbarToggleButton","geocortex/infrastructure/toolbarGroup/types/ToolbarButton","geocortex/framework/utils/utils"],function(t,i,r,n,o,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=function(t){function i(e,i){var r=t.call(this,e,i)||this;return r.DEFAULT_BUFFER_ICON_URI="Resources/Images/Icons/Toolbar/buffer-identify-24.png",r.DEFAULT_SELECT_LAYERS_ICON_URI="Resources/Images/Icons/Toolbar/layers-filtered-24.png",r}return e(i,t),i.prototype.initialize=function(e){this.bufferOnIconUri=e.bufferOnIconUri||e.bufferIconUri||this.DEFAULT_BUFFER_ICON_URI,this.bufferOffIconUri=e.bufferOffIconUri||e.bufferIconUri||this.DEFAULT_BUFFER_ICON_URI,this.selectLayersIconUri=e.selectLayersOnIconUri||e.selectLayersIconUri||this.DEFAULT_SELECT_LAYERS_ICON_URI,this.bufferToggleButton=new n.ToolbarToggleButton(this.app,this.libraryId,this._getBufferToggleButtonEntry()),this.selectLayersButton=new o.ToolbarButton(this.app,this.libraryId,this._getSelectLayersButtonEntry())},i.prototype._getBufferToggleButtonEntry=function(){var e={};return e.id=a.alphaNumericToken(),e.type="toggleButton",e.hideOnDisable=!1,e.tooltip=this.app.getResource(this.libraryId,"language-toolbar-buffer-toggle-tooltip"),e.toggleOn={},e.toggleOn.name=this.app.getResource(this.libraryId,"language-toolbar-toggle-buffer-on-name"),e.toggleOn.iconUri=this.bufferOnIconUri,e.toggleOn.command="ActivateBufferingAndDisplayOptions",e.toggleOn.commandParameter="Identify",e.toggleOff={},e.toggleOff.name=this.app.getResource(this.libraryId,"language-toolbar-toggle-buffer-off-name"),e.toggleOff.iconUri=this.bufferOffIconUri,e.toggleOff.command="DeactivateBufferingAndDismissOptions",e.toggleOff.commandParameter="Identify",e},i.prototype._getSelectLayersButtonEntry=function(){var e={};return e.id=a.alphaNumericToken(),e.type="button",e.tooltip=this.app.getResource(this.libraryId,"language-toolbar-select-layers-toggle-tooltip"),e.name=this.app.getResource(this.libraryId,"language-toolbar-select-layers-toggle-on-name"),e.command="ActivateSelectLayersForIdentify",e.commandParameter=null,e.hideOnDisable=!1,e.iconUri=this.selectLayersIconUri,e},i}(r.ViewModelBase);i.IdentifyOptionsViewModel=s})},"Mapping/modules/Identify/LayerSelectorForIdentify":function(){define(["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this.mapServiceLayersToIdentify=[],this.app=e,this.identifyModule=t,this.app.site&&this.app.site.isInitialized?this.onSiteInitialized():this.app.event("SiteInitializedEvent").once(this,this.onSiteInitialized)}return e.prototype.onSiteInitialized=function(){this._loadMapServicesAndLayers(),this.registerCommands(),this.subscribeEvents()},e.prototype.registerCommands=function(){this.app.command("EnableAllLayersForIdentify").register(this,this.executeEnableAllLayersForIdentify),this.app.command("DisableAllLayersForIdentify").register(this,this.executeDisableAllLayersForIdentify),this.app.command("EnableLayerForIdentify").register(this,this.executeEnableLayerForIdentify),this.app.command("DisableLayerForIdentify").register(this,this.executeDisableLayerForIdentify)},e.prototype.subscribeEvents=function(){this.app.event("MapServiceAddedEvent").subscribe(this,this._loadMapServicesAndLayers),this.app.event("MapServiceRemovedEvent").subscribe(this,this._loadMapServicesAndLayers),this.app.event("MapServiceLayersChangedWithResultEvent").subscribe(this,this._loadMapServicesAndLayers)},e.prototype.executeEnableAllLayersForIdentify=function(){for(var e=0;e<this.mapServiceLayersToIdentify.length;e++){var t=this.mapServiceLayersToIdentify[e],i=this.app.site.essentialsMap.findMapServiceById(t.mapServiceId);if(i){for(var r=[],n=0;n<i.layers.length;n++){i.layers[n].identifiable&&r.push(i.layers[n].id)}t.layerIds=r,t.mapServiceIdentifiable=!!i.identifiable,this.app.event("AllLayersEnabledForIdentifyEvent").publish(this.mapServiceLayersToIdentify)}else this.app.trace.error("LayerSelectorForIdentify: Could not apply EnableAllLayersForIdentify to map service with id {0}. Map service not found.".format(t.mapServiceId))}},e.prototype.executeDisableAllLayersForIdentify=function(){for(var e=0;e<this.mapServiceLayersToIdentify.length;e++){var t=this.mapServiceLayersToIdentify[e];t.mapServiceIdentifiable=!1,t.layerIds=[]}this.app.event("AllLayersDisabledForIdentifyEvent").publish(this.mapServiceLayersToIdentify)},e.prototype.executeEnableLayerForIdentify=function(e){for(var t=0;t<this.mapServiceLayersToIdentify.length;t++){var i=this.mapServiceLayersToIdentify[t];if(i.mapServiceId===e.mapServiceId){var r=this.app.site.essentialsMap.findMapServiceById(e.mapServiceId),n=e.layerId?r&&r.findLayerById(e.layerId):null;if(n&&n.identifiable||!n&&r&&r.identifiable){n?i.layerIds.push(e.layerId):i.mapServiceIdentifiable=!0,this.app.event("LayerEnabledForIdentifyEvent").publish(e);break}}}},e.prototype.executeDisableLayerForIdentify=function(e){for(var t=0;t<this.mapServiceLayersToIdentify.length;t++){var i=this.mapServiceLayersToIdentify[t];if(i.mapServiceId===e.mapServiceId)if(null!=e.layerId){for(var r=i.layerIds.length-1;r>=0;r--)if(null!=e.layerId&&i.layerIds[r]===e.layerId){i.layerIds.splice(r,1),this.app.event("LayerDisabledForIdentifyEvent").publish(e);break}}else if(!0===i.mapServiceIdentifiable){i.mapServiceIdentifiable=!1,this.app.event("LayerDisabledForIdentifyEvent").publish(e);break}}},e.prototype._loadMapServicesAndLayers=function(){this.mapServiceLayersToIdentify.length=0;for(var e=0;e<this.app.site.essentialsMap.mapServices.length;e++){for(var t=this.app.site.essentialsMap.mapServices[e],i=[],r=0;r<t.layers.length;r++){t.layers[r].identifiable&&i.push(t.layers[r].id)}var n=!!t.identifiable;this.mapServiceLayersToIdentify.push({mapServiceId:this.app.site.essentialsMap.mapServices[e].id,mapServiceIdentifiable:n,layerIds:i})}this.app.event("AllLayersEnabledForIdentifyEvent").publish(this.mapServiceLayersToIdentify)},e}();t.LayerSelectorForIdentify=i})},"url:/Mapping/modules/Identify/IdentifyOptionsView.html":t,"url:/Mapping/modules/Identify/Widgets/IdentifyOptionsTransientView.html":i}}),require(["geocortex/framework/resourceManager"],function(e){e.resourceManager.register("Mapping","inv","Mapping/modules/Identify/IdentifyOptionsView.html","html",t),e.resourceManager.register("Mapping","inv","Mapping/modules/Identify/Widgets/IdentifyOptionsTransientView.html","html",i)}),require({cache:{}}),define(["geocortex/infrastructure/identify/GraphicsLayerIdentifyProvider","Mapping/modules/Identify/IdentifyLayerSelectorView","Mapping/modules/Identify/IdentifyLayerSelectorViewModel","Mapping/modules/Identify/IdentifyModule","Mapping/modules/Identify/IdentifyOptionsView","Mapping/modules/Identify/IdentifyOptionsViewModel","Mapping/modules/Identify/LayerSelectorForIdentify","geocortex/infrastructure/identify/IdentifyUtils","geocortex/infrastructure/identify/MapIdentifyTask","geocortex/infrastructure/identify/MapIdentifyTaskIdentifyProvider","geocortex/infrastructure/identify/RasterIdentifyTask","geocortex/infrastructure/identify/RasterIdentifyTaskIdentifyProvider","geocortex/infrastructure/identify/RasterIdentifyUtils"],function(t,i,r,n,o,a,s,l,c,d,p,y,f){e(t,"geocortex.essentialsHtmlViewer.mapping.modules.identify.GraphicsLayerIdentifyProvider",t.GraphicsLayerIdentifyProvider),e(i,"geocortex.essentialsHtmlViewer.mapping.modules.identify.IdentifyLayerSelectorView",i.IdentifyLayerSelectorView),e(r,"geocortex.essentialsHtmlViewer.mapping.modules.identify.IdentifyLayerSelectorViewModel",r.IdentifyLayerSelectorViewModel),e(n,"geocortex.essentialsHtmlViewer.mapping.modules.identify.IdentifyModule",n.IdentifyModule),e(o,"geocortex.essentialsHtmlViewer.mapping.modules.identify.IdentifyOptionsView",o.IdentifyOptionsView),e(a,"geocortex.essentialsHtmlViewer.mapping.modules.identify.IdentifyOptionsViewModel",a.IdentifyOptionsViewModel),e(s,"geocortex.essentialsHtmlViewer.mapping.modules.identify.LayerSelectorForIdentify",s.LayerSelectorForIdentify),e(l,"geocortex.essentialsHtmlViewer.mapping.modules.identify.IdentifyUtils.getIdentifyLayerIds",l.getIdentifyLayerIds),e(l,"geocortex.essentialsHtmlViewer.mapping.modules.identify.IdentifyUtils.getLayerDefinitions",l.getLayerDefinitions),e(l,"geocortex.essentialsHtmlViewer.mapping.modules.identify.IdentifyUtils.getDynamicLayerInfos",l.getDynamicLayerInfos),e(l,"geocortex.essentialsHtmlViewer.mapping.modules.identify.IdentifyUtils.appendToFeatureSetCollection",l.appendToFeatureSetCollection),e(c,"geocortex.essentialsHtmlViewer.mapping.modules.identify.MapIdentifyTask",c.MapIdentifyTask),e(d,"geocortex.essentialsHtmlViewer.mapping.modules.identify.MapIdentifyTaskIdentifyProvider",d.MapIdentifyTaskIdentifyProvider),e(p,"geocortex.essentialsHtmlViewer.mapping.modules.identify.RasterIdentifyTask",p.RasterIdentifyTask),e(y,"geocortex.essentialsHtmlViewer.mapping.modules.identify.RasterIdentifyTaskIdentifyProvider",y.RasterIdentifyTaskIdentifyProvider),e(f,"geocortex.essentialsHtmlViewer.mapping.modules.identify.RasterIdentifyUtils",f.RasterIdentifyUtils)})}();