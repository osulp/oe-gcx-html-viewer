!function(){var t="<div class='upload-data layer-details-dialog'>    \x3c!-- Layer details form. --\x3e    <form action='javascript:void(0)' data-binding='{@var: form}'>        \x3c!-- Feature parameter details. --\x3e        <div class='form-fields'>            <label for='layer-details-layer-name' data-binding='{@text: @language-layer-details-layer-name}'></label>            <input id='layer-details-layer-name' name='layer-name' data-binding='{@var: layerName}{value: @language-layer-details-layer-name-default}' />        </div>        \x3c!-- Publish checkbox (determines whether to use Generate or Publish endpoint). --\x3e        <div class='publish-checkbox-container' data-binding='{@visible: publishIsAvailable}'>            <label data-binding='{@disabled: publishDisabledMessage}'>                <input type='checkbox' class='publish-checkbox' name='publish' data-binding='{@var: publish}{@disabled: publishDisabledMessage}' />                <span class='publish-checkbox-label' data-binding='{@text: publishCheckboxText}'></span>            </label>            <div class='publish-info' data-binding='{@visible: publishDisabledMessage}'>                <span data-binding='{@text: publishDisabledMessage}'></span>            </div>        </div>        \x3c!-- Validation problems. --\x3e        <ol class='validation-problems' data-binding='      {@source: validationProblems}      {@visible: validationProblems}'>            <li data-binding='{@template-for: validationProblems}'>                <p data-binding='{@text: title}'></p>                <p data-binding='{@text: message}'></p>            </li>        </ol>        \x3c!-- Bottom buttons. --\x3e        <div class='form-btns'>            <button type='submit' class='button' data-binding='{@text: @language-layer-details-dialog-button-proceed}{@event-onclick: handleProceed}'></button>            <button class='button' data-binding='{@text: @language-layer-details-dialog-button-cancel}{@event-onclick: handleCancel}'></button>        </div>    </form></div>",a="<div class='upload-data symbol-dialog'>    \x3c!-- Symbology settings widget. --\x3e    <div data-binding='{@widget: SymbologySettings}{@widget-replace: true}'></div>    \x3c!-- Bottom buttons. --\x3e    <div class='form-btns'>        <button class='button' data-binding='{@text: @language-symbol-dialog-button-proceed}{@event-onclick: handleProceed}'></button>    </div></div>",i="\x3c!-- Dialog where the user can affect the way the table data will be interpreted as a layer. --\x3e<div class='upload-data table-mapping-dialog'>    \x3c!-- Table mapping form form where the user can change details about the way table data is interpreted as a layer. --\x3e    <form class='table-mapping-form' name='table-mapping' action='javascript:void(0)' data-binding='{@var: form}{@event-onchange: validate}'>        \x3c!-- Radio buttons for switching between Spatial and Address table mapping modes. --\x3e        <fieldset class='table-mapping-location-type-box' data-binding='{@var: locationType}{@event-onchange: handleChangeLocationType}'>            <legend data-binding='{@text: @language-table-mapping-dialog-view-legend}'></legend>            <label>                <input type='radio' name='table-mapping-location-type' value='coordinates' checked />                <span data-binding='{@text: @language-table-mapping-location-type-coordinates}'></span>            </label>            <label data-binding='{@visible: hasConfiguredGeocoder}'>                <input type='radio' name='table-mapping-location-type' value='address' />                <span data-binding='{@text: @language-table-mapping-location-type-address}'></span>            </label>        </fieldset>        \x3c!-- Coordinate data options. --\x3e        <ol class='table-mapping coordinates' data-binding='{@visible: locationTypeIsCoordinates}'>            <li>                <label class='form-label'>                    <span data-binding='{@text: @language-table-mapping-x-axis}'></span>                    <select name='x-axis' data-binding='{@source: tableHeadings}{@var: xAxis}'>                        <option data-binding='{@template-for: tableHeadings}{@text: @context}'></option>                    </select>                </label>            </li>            <li>                <label class='form-label'>                    <span data-binding='{@text: @language-table-mapping-y-axis}'></span>                    <select name='y-axis' data-binding='{@source: tableHeadings}{@var: yAxis}'>                        <option data-binding='{@template-for: tableHeadings}{@text: @context}'></option>                    </select>                </label>            </li>            <li data-binding='{@visible: zAxisEnabled}'>                <label class='form-label'>                    <span data-binding='{@text: @language-table-mapping-z-axis}'></span>                    <select name='z-axis' data-binding='{@source: tableHeadings}{@var: zAxis}'>                        <option data-binding='{@template-for: tableHeadings}{@text: @context}'></option>                    </select>                </label>            </li>            <li>                <label class='form-label'>                    <span data-binding='{@text: @language-table-mapping-source-spatial-reference}'></span>                    <select name='source-spatial-reference' data-binding='{@source: sourceSpatialReferences}{@event-onchange: handleChangeSourceSpatialReference}{@var: sourceSpatialReference}'>                        <option data-binding='{@template-for: sourceSpatialReferences}{@text: label}'></option>                    </select>                </label>            </li>            <li data-binding='{@visible: sourceSpatialReferencesUseCustom}'>                <label for='table-mapping-source-spatial-reference-custom' data-binding='{@text: @language-table-mapping-source-spatial-reference-custom}'></label>                <input type='text' id='table-mapping-source-spatial-reference-custom' name='source-spatial-reference-custom' data-binding='{@var: sourceSpatialReferenceCustom}' />            </li>        </ol>        \x3c!-- Address data options. --\x3e        <ol class='table-mapping address' data-binding='{@visible: locationTypeIsAddress}{@source: addressFieldSelectors}'>            <li data-binding='{@template-for: addressFieldSelectors}'>                <label class='form-label' data-binding='{@text: label}'></label>                <select class='address-select' data-binding='{@source: tableHeadingOptions}'>                    <option data-binding='{@template-for: tableHeadingOptions}{@text: @context}'></option>                </select>            </li>        </ol>        \x3c!-- Checkbox that controls table headings. --\x3e        <label class='table-mapping-is-first-row-header-box'>            <input type='checkbox' name='is-first-row-header' data-binding='{@var: isFirstRowHeader}{@event-onchange: handleChangeUseFirstRowAsHeader}' checked />            <span data-binding='{@text: @language-table-mapping-is-first-row-header}'></span>        </label>        \x3c!-- Table mapping preview. --\x3e        <div class='table-mapping-preview-container'>            <table class='table-mapping-preview'>                <tbody data-binding='{@source: tablePreview}'>                    <tr data-binding='{@template-for: tablePreview}{@source: @context}'>                        <td data-binding='{@template-for: @context}{@text: @context}'></td>                    </tr>                </tbody>            </table>        </div>        \x3c!-- Validation problems. --\x3e        <ol class='validation-problems error-message' data-binding='        {@source: validationProblems}        {@visible: validationProblems}'>            <li data-binding='{@template-for: validationProblems}'>                <p data-binding='{@text: title}'></p>                <p data-binding='{@text: message}'></p>            </li>        </ol>        \x3c!-- Bottom buttons. --\x3e        <div class='form-btns'>            <button type='submit' class='button' data-binding='{@text: @language-table-mapping-dialog-proceed}{@event-onclick: handleProceed}'></button>            <button class='button' data-binding='{@text: @language-table-mapping-dialog-cancel}{@event-onclick: handleCancel}'></button>        </div>    </form>  </div>",o="<div class='upload-data table-record-results-dialog'>    \x3c!-- Table Record results. --\x3e    <div class='table-record-result'>        <span class='table-record-result-details'>            <img src='Resources/Images/Icons/Toolbar/alert-24.png' data-binding='{alt: @language-symbol-dialog-alert}' />            <span data-binding='{@text: rejectedRecordsMessage}'></span>        </span>        <span class='table-record-result-details'>            <img src='Resources/Images/Icons/Toolbar/check-24.png' data-binding='{alt: @language-symbol-dialog-check}' />            <span data-binding='{@text: acceptedRecordsMessage}'></span>        </span>        <p class='table-record-result-download'><a download data-binding='{@visible: rejectedRecordsUrl}{href: rejectedRecordsUrl}{@text: @language-table-record-results-dialog-rejected-records-link}'></a></p>    </div>    \x3c!-- Bottom buttons. --\x3e    <div class='form-btns'>        <button class='button' data-binding='{@text: @language-table-record-results-dialog-button-proceed}{@event-onclick: handleProceed}'></button>    </div></div>",n="<div class='upload-data upload-dialog' data-binding='{@class-uploader-disabled: disabled}'>    \x3c!-- Description for this dialog. --\x3e    <p class='upload-dialog-description' data-binding='{@text: @language-upload-dialog-description}'></p>    <p class='upload-dialog-supported-files'>        <strong data-binding='{@text: @language-upload-dialog-supported-files-label}'></strong>        <em data-binding='{@text: @language-upload-dialog-supported-files}'></em>    </p>    <p class='gcx-warning-message'>        <strong data-binding='{@text: @language-common-note}'></strong>        <span data-binding='{@text: @language-upload-dialog-warning}'></span>    </p>    \x3c!-- Uploader widget. --\x3e    <div data-binding='{@widget: Uploader}{@widget-replace: true}'></div>    \x3c!-- Validation problems. --\x3e    <ol class='validation-problems error-message' data-binding='        {@source: validationProblems}        {@visible: validationProblems}'>        <li data-binding='{@template-for: validationProblems}'>            <p data-binding='{@text: title}'></p>            <p data-binding='{@text: message}'></p>        </li>    </ol></div>",s="<div class='uploader' data-binding='{@class-uploader-disabled: disabled}'>    \x3c!-- Upload form. --\x3e    <form action='javascript:void(0)' data-binding='{@var: form}{@event-onchange: handleChange}{@event-onsubmit: handleSubmit}'>        \x3c!-- Modern implementation of file input that allows multiple files to be selected at once. --\x3e        <input type='file' name='files' title='files' multiple data-binding='{@var: input}{disabled: disabled}{aria-label: @language-uploader-view-label}' />        \x3c!-- List of selected files. --\x3e        <ol class='selected-file-list' data-binding='{@var: selectedFileList}{@visible: selectedFiles}{@source: selectedFiles}'>            <li data-binding='{@template-for: selectedFiles}{@class-flagged: flag}'>                <div class='selected-file-box'>                    <span class='selected-file-name' data-binding='{@text: name}'></span>                    <span class='selected-file-size' data-binding='{@visible: size}{@text: size}'></span>                </div>                \x3c!-- Validation flag about the specific file. --\x3e                <div class='file-flag error-message' data-binding='{@visible: flag}{@text: flag}'></div>            </li>        </ol>        \x3c!-- Legacy file input implementation. --\x3e        <div class='uploader-legacy-input-box' data-binding='{@var: legacyInputBox}'>            <ol data-binding='{@source: legacyInputs}'>                <li data-binding='{@template-for: legacyInputs}'>                    <input type='file' name='files' data-binding='{disabled: disabled}' />                    <button class='uploader-legacy-remove-button' data-binding='{@event-onclick: handleLegacyRemoveInput}'></button>                    <button class='uploader-legacy-add-button' data-binding='{@event-onclick: handleLegacyAddInput}'></button>                    \x3c!-- Validation flag about the specific file. --\x3e                    <div class='file-flag' data-binding='{@visible: flag}{@text: flag}'></div>                </li>            </ol>        </div>        <div class='form-btns'>            <button type ='submit' class='button' data-binding='{@event-onclick: handleProceed}{@text: @language-upload-dialog-button-proceed}'></button>            <button class='button' data-binding='{@event-onclick: handleCancel}{@text: @language-upload-dialog-button-cancel}'></button>        </div>    </form>    \x3c!-- Upload progress bar. --\x3e    <progress max='100' value='0' data-binding='{@visible: progress}{value: progress}'></progress></div>";function b(e,t,a){if("string"==typeof e&&(a=t,t=e),void 0!==a)for(var i=t.split("."),o=null,n=window,s=0,r=i.length;s<r;s++)o=i[s],s==r-1?n[o]=a:n[o]||(n[o]={}),n=n[o];else console.warn("Undefined shim for: "+t)}require({cache:{"Mapping/modules/UploadData/Dialog":function(){var i,s=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=(i=a.ViewBase,s(n,i),n.prototype.attach=function(e){var t=this;i.prototype.attach.call(this,e),this.viewContainerViewClosedEventToken||(this.viewContainerViewClosedEventToken=this.app.event("ViewContainerViewClosedEvent").subscribe(this,function(e){e&&e.viewId===t.id&&t.handleCancel()}))},n.prototype.destroy=function(){i.prototype.destroy.call(this),this.viewContainerViewClosedEventToken&&(this.app.event("ViewContainerViewClosedEvent").unsubscribe(this.viewContainerViewClosedEventToken),this.viewContainerViewClosedEventToken=null)},n.prototype.handleCancel=function(){this.close(),this.viewModel.processActions&&this.viewModel.processActions.cancel&&this.viewModel.processActions.cancel()},n.prototype.close=function(){this.app.viewManager.deactivateView(this)},n);function n(){return null!==i&&i.apply(this,arguments)||this}t.DialogViewBase=o})},"Mapping/modules/UploadData/RestInterfaces":function(){define(["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})},"Mapping/modules/UploadData/UploadDataModule":function(){var i,v=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","geocortex/framework/application/ModuleBase","geocortex/framework/observables","geocortex/infrastructure/PortalUtils","geocortex/infrastructure/commandArgs/AddStatusArgs","geocortex/geocortex","geocortex/essentials/LayerStyle","geocortex/essentials/KmlService","geocortex/infrastructure/GeometryUtils","geocortex/infrastructure/LayerIntegrationUtils","geocortex/essentials/Site"],function(e,m,t,a,s,h,f,n,c,p,l,r){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var d=[".shp",".shx",".dbf"];m.SERVICE_TYPE_FEATURE="Feature Service",m.SERVICE_TYPE_KML="KML",m.ERROR_CANCELLED="UploadDataError/Cancelled",m.ERROR_CANCELLED_MESSAGE="Upload data process was cancelled.",m.ERROR_MUST_SIGN_IN_TO_PUBLISH_GEODATABASE="UploadDataError/MustSignInToPublishGeodatabase",m.ERROR_NOT_AUTHORIZED_TO_PUBLISH_GEODATABASE="UploadDataError/NotAuthorizedToPublishGeodatabase",m.ERROR_COULD_NOT_PARSE_XSLX="UploadDataError/CouldNotParseXLSX";var i,o=(i=t.ModuleBase,v(u,i),u.prototype.initialize=function(e){e.checkJobStatusPeriod=e.checkJobStatusPeriod||4e3,e.warnOnFeatureCount=e.warnOnFeatureCount||1e4,e.heatMap=e.heatMap||{enabled:!1,userCanToggle:!0,respectScaleRange:!0,gradient:[[255,255,255,0],[0,0,255,98],[255,0,0,139],[255,255,0,181]],offset:[0,.5,.75,1],intensity:25,includeInLegend:!0},e.cluster=e.cluster||{enabled:!1,userCanToggle:!0,radius:25,maximumFeatures:1e3,backgroundColor:[0,0,255],labelColor:[255,255,255]},this.configuration=e,this.app.command("UploadData").register(this,this._executeUploadData,this._canExecuteUploadData)},u.prototype._canExecuteUploadData=function(){return!this.app.isOffline.get()&&!this._processInProgress.get()},u.prototype._executeUploadData=function(){var t=this;if(!/iPhone|iPad|iPod|GeocortexApp\.iOS/.test(navigator.userAgent)||window.MSBlobBuilder){if(this._processInProgress.get()){var e=new Error("You cannot start an upload data process while one is already in progress.");return e.name="UploadDataError/AlreadyInProgress",this._handleError(e)}return this._processInProgress.set(!0),Promise.resolve({uploadResponse:void 0,tableMapping:void 0,layerDetailsResults:void 0,mainResponse:void 0,mapServices:void 0,symbols:void 0}).then(function(e){return t._promptUploadDialog(e)}).then(function(e){return t._promptTableMappingDialog(e)}).then(function(e){return t._promptLayerDetailsDialog(e)}).then(function(e){return t._confirmBeforePublish(e)}).then(function(e){return t._sendRequest(e)}).then(function(e){return t._handleMainResponse(e)}).then(function(e){return t._displayTableRecordResults(e)}).then(function(e){return t._promptSymbolDialog(e)}).then(function(e){return t._symbolize(e)}).then(function(e){return t._autoDetectFeatureLabels(e)}).then(function(e){return t._attachDefaultVisualizations(e)}).then(function(e){return t._addMapServicesToMap(e)}).then(function(e){return t._handleCompletion(e)}).catch(function(e){return t._handleError(e)})}this.app.command("Alert").execute(this.getResource("language-upload-data-ios-warning-message"),this.getResource("language-upload-data-ios-warning"))},u.prototype._promptUploadDialog=function(t){var a=this,i=this.app.viewManager.getViewById("UploadDialogView");return this.app.viewManager.activateView(i),i.reset(),i.viewModel.prompt().then(function(e){return t.uploadResponse=e,a.app.viewManager.deactivateView(i),t}).catch(function(e){return a.app.viewManager.deactivateView(i),Promise.reject(e)})},u.prototype._promptTableMappingDialog=function(t){var a=this,e=t.uploadResponse,i=t.uploadResponse.fileItems[0].fileType,o=e.fileItems.length&&e.fileItems[0].tablePreviews&&e.fileItems[0].tablePreviews.length?e.fileItems[0].tablePreviews[0]:null;if(o){var n=this.app.viewManager.getViewById("TableMappingDialogView");if(!o[0].length&&"xlsx"===i){var s=new Error("Each worksheet in the file must contain rows of data");return s.name=m.ERROR_COULD_NOT_PARSE_XSLX,Promise.reject(s)}this.app.viewManager.activateView(n);var r=n.viewModel.prompt(o).then(function(e){return t.tableMapping=e,a.app.viewManager.deactivateView(n),t}).catch(function(e){return a.app.viewManager.deactivateView(n),Promise.reject(e)});return n.reset(),r}return t.tableMapping=!1,Promise.resolve(t)},u.prototype._promptLayerDetailsDialog=function(o){var t=this,e=o.uploadResponse.fileItems[0].fileType;if("fileGeodatabase"===e){var a;if(!s.hasAccessToPortal(this.app))return(a=new Error("Geodatabase must be published, but the user is not signed into ArcGIS Online.")).name=m.ERROR_MUST_SIGN_IN_TO_PUBLISH_GEODATABASE,Promise.reject(a);if(!s.hasPublishFeaturePrivilege(this.app))return(a=new Error("Geodatabase must be published, but the user does not have sufficient privileges to publish layers to ArcGIS Online.")).name=m.ERROR_NOT_AUTHORIZED_TO_PUBLISH_GEODATABASE,Promise.reject(a)}var i=this.app.viewManager.getViewById("LayerDetailsDialogView");this.app.viewManager.activateView(i);var n=o.layerDetailsResults?o.layerDetailsResults.details.layerName:o.uploadResponse.fileItems[0].fileName;return i.reset(n),"shapefile"===e&&"application/zip"!==o.uploadResponse.fileItems[0].contentType&&(function(){for(var e=function(t){if(!o.uploadResponse.fileItems.some(function(e){return e.fileName.endsWith(t)}))return{value:!1}},t=0,a=d;t<a.length;t++){var i=e(a[t]);if("object"==typeof i)return i.value}return!0}()||i.viewModel.publishDisabledMessage.set(this.getResource("language-layer-details-publish-disabled-shapefile"))),i.viewModel.prompt(e).then(function(e){return o.layerDetailsResults=e,t.app.viewManager.deactivateView(i),o}).catch(function(e){return t.app.viewManager.deactivateView(i),Promise.reject(e)})},u.prototype._promptSymbolDialog=function(t){var a=this,i=this.app.viewManager.getViewById("SymbolDialogView");this.app.viewManager.activateView(i);var e=i.symbologySettingsWidget.viewModel;return e.isPoint.set(t.mapServices.some(function(e){return"esriGeometryPoint"===e.serviceLayer.geometryType})),e.isPolygon.set(t.mapServices.some(function(e){return"esriGeometryPolygon"===e.serviceLayer.geometryType})),e.isLine.set(t.mapServices.some(function(e){return"esriGeometryPolyline"===e.serviceLayer.geometryType})),i.reset(),i.viewModel.prompt().then(function(e){return t.symbols=e,t}).catch(function(e){return a.app.viewManager.deactivateView(i),Promise.reject(e)})},u.prototype._confirmBeforePublish=function(o){var n=this;return o.layerDetailsResults.publish?new Promise(function(t,e){var a=n.getResource("language-upload-data-confirm-before-publish"),i=n.getResource("language-upload-data-confirm-before-publish-message");n.app.command("Confirm").execute(i,a,function(e){e?t(o):(o.layerDetailsResults.publish=!1,t(n._promptLayerDetailsDialog(o).then(function(e){return n._confirmBeforePublish(e)})))})}):Promise.resolve(o)},u.prototype._sendRequest=function(n){var s=this,e=n.uploadResponse,t=n.tableMapping,a=n.layerDetailsResults,i=a.details,o=a.publish,r="WaitForUploadDataMainResponse",l=new h.AddStatusArgs(this.getResource("language-upload-data-wait-for-main-response"));l.id=r,l.showBusyIcon=!0,l.timeoutMS=0,this.app.command("AddStatus").execute(l);var d=this.app.site.url+(o?"/publish":"/generate"),c=e.fileItems.map(function(e){return e.fileId}),p=e.fileItems[0].fileType,u={layerName:i.layerName,targetSR:this.app.site.essentialsMap.spatialReference};[t,i].forEach(function(e){if(e&&!0!==e)for(var t=0,a=Object.keys(e);t<a.length;t++){var i=a[t];u[i]=e[i]}});var g=o?{f:"json",title:i.layerName,tags:"",fileIds:c,fileType:p,featureParameters:u}:{f:"json",fileIds:c,fileType:p,featureParameters:u},b=f.encodeJson(g);return new Promise(function(i,o){f.request({url:d,content:b},{usePost:!0}).then(function(e){s.app.command("RemoveStatus").execute(r),n.mainResponse=e,i(n)},function(e){var t;if(s.app.command("RemoveStatus").execute(r),t=e.message.match(/409 - Item '(.*)' already exists\./))if("fileGeodatabase"===n.uploadResponse.fileItems[0].fileType){s.app.command("Alert").execute(s.getResource("language-upload-data-error-publish-geodatabase-name-taken-message").format(t[1]),s.getResource("language-upload-data-error-publish-name-taken"));var a=new Error(m.ERROR_CANCELLED_MESSAGE);a.name=m.ERROR_CANCELLED,o(a)}else s.app.command("Confirm").execute(s.getResource("language-upload-data-error-publish-name-taken-message").format(t[1]),s.getResource("language-upload-data-error-publish-name-taken"),function(e){if(e)n.layerDetailsResults.publish=!1,i(s._sendRequest(n));else{var t=new Error(m.ERROR_CANCELLED_MESSAGE);t.name=m.ERROR_CANCELLED,o(t)}});else o(e)})})},u.prototype._handleMainResponse=function(t){function a(e,t){return t.mapServices=e,t}var e=t.mainResponse,i=t.layerDetailsResults.details.layerName;if(e.featureCollection)return this._acceptGenerateResponse(e,i).then(function(e){return a(e,t)});if(e.services){if(/^https/i.test(window.location.protocol)){var o=/^http:/;e.services.map(function(e){return e.serviceUrl=e.serviceUrl.replace(o,"https:"),e.jobStatusUrl=e.jobStatusUrl.replace(o,"https:"),e})}return this._acceptPublishResponse(e,i).then(function(e){return a(e,t)})}if(e.error){var n=new Error(e.error.message);throw n.name=e.error.name,n}throw new Error("Invalid response.")},u.prototype._symbolize=function(e){for(var t=0,a=e.mapServices;t<a.length;t++){var i=a[t].serviceLayer;"esriGeometryPoint"===i.geometryType?i.setRenderer(new esri.renderer.SimpleRenderer(e.symbols.marker)):"esriGeometryPolyline"===i.geometryType?i.setRenderer(new esri.renderer.SimpleRenderer(e.symbols.line)):"esriGeometryPolygon"===i.geometryType&&i.setRenderer(new esri.renderer.SimpleRenderer(e.symbols.fill))}return Promise.resolve(e)},u.prototype._autoDetectFeatureLabels=function(e){var t=e.mapServices,a=this.app.viewManager.getViewById("TableMappingDialogView").viewModel.configuration;if(a.autoDetectionTerms&&a.autoDetectionTerms.featureLabel)for(var i=function(e,t){for(var a=0,i=e;a<i.length;a++){var o=i[a];if(b(o.name,t))return o}return null},o=0,n=t;o<n.length;o++)for(var s=n[o],r=0,l=s.layers;r<l.length;r++){var d=l[r];if(!d.displayField){var c=i(d.fields,a.autoDetectionTerms.featureLabel);c&&(d.displayField=c,s.serviceLayer instanceof esri.layers.FeatureLayer&&(s.serviceLayer.displayField=c.name))}}return Promise.resolve(e)},u.prototype._attachDefaultVisualizations=function(e){for(var t=0,a=e.mapServices;t<a.length;t++){var i=a[t];if(i.serviceLayer instanceof esri.layers.FeatureLayer){"esriGeometryPoint"===i.serviceLayer.geometryType&&(i.heatMap=this.configuration.heatMap,i.featureClustering=this.configuration.cluster);var o=JSON.stringify(i.serviceLayer.renderer.toJson());i.layers[0].allowSymbolization=!0,i.layers[0].styles.push(new n.LayerStyle(o,n.CUSTOM_STYLE_ID,n.CUSTOM_STYLE_ID,!0))}}return Promise.resolve(e)},u.prototype._displayTableRecordResults=function(e){var t=e.mainResponse.recordResults;if(t&&e.tableMapping){var a=this.app.viewManager.getViewById("TableRecordResultsDialogView");return this.app.viewManager.activateView(a),a.viewModel.prompt(t).then(function(){return e})}return Promise.resolve(e)},u.prototype._handleCompletion=function(t){var a=this;this._processInProgress.set(!1);for(var e=[],i=0,o=t.mapServices;i<o.length;i++){var n=o[i];n instanceof c.KmlService?e.push.apply(e,n.serviceLayer.getLayers()):e.push.apply(e,n.layers)}for(var s=[],r=0,l=e;r<l.length;r++){var d=l[r];d.fullExtent&&p.isValidGeometry(d.fullExtent)&&s.push(d.fullExtent)}return p.unionGeometries(s,this.app).then(function(e){return a.app.command("ZoomToExtent").execute(e),a.app.event("UploadDataCompletedEvent").publish(t),t})},u.prototype._handleError=function(e){return this._processInProgress.set(!1),e.name===m.ERROR_CANCELLED||(e.name===m.ERROR_MUST_SIGN_IN_TO_PUBLISH_GEODATABASE?this.app.command("Alert").execute(this.getResource("language-upload-data-error-must-be-signed-in-to-publish-geodatabase-message"),this.getResource("language-upload-data-error-must-be-signed-in-to-publish-geodatabase")):e.name===m.ERROR_COULD_NOT_PARSE_XSLX?this.app.command("Alert").execute(this.getResource("language-upload-data-error-unable-to-parse-excel-file-message"),this.getResource("language-upload-data-error-unable-to-parse-excel-file")):e.name===m.ERROR_NOT_AUTHORIZED_TO_PUBLISH_GEODATABASE?this.app.command("Alert").execute(this.getResource("language-upload-data-error-unauthorized-to-publish-message"),this.getResource("language-upload-data-error-unauthorized-to-publish")):"UploaderError/500"===e.name&&/Unable to upload file\: Invalid zip file\./.test(e.message)?this.app.command("Alert").execute(this.getResource("language-upload-data-error-invalid-zip-message"),this.getResource("language-upload-data-error-invalid-zip")):"UploaderError/500"===e.name&&/Unable to upload file\: Wrong Local header signature\:/.test(e.message)?this.app.command("Alert").execute(this.getResource("language-upload-data-error-invalid-zip-other-message"),this.getResource("language-upload-data-error-invalid-zip")):/Projection .+ is not supported/.test(e.message)?this.app.command("Alert").execute(this.getResource("language-upload-data-error-projection-not-supported-message"),this.getResource("language-upload-data-error-projection-not-supported")):/406 - Error while analyzing Shapefile/.test(e.message)?this.app.command("Alert").execute(this.getResource("language-upload-data-error-invalid-shapefile-message"),this.getResource("language-upload-data-error-invalid-shapefile")):/499 - Token required/.test(e.message)?this.app.command("Alert").execute(this.getResource("language-upload-data-error-geocoding-unauthenticated-message"),this.getResource("language-upload-data-error-geocoding-unauthenticated")):/The provided file was empty/.test(e.message)?this.app.command("Alert").execute(this.getResource("language-upload-data-error-empty-file-message"),this.getResource("language-upload-data-error-empty-file")):(this.app.trace.error(e.message,e),this.app.command("Alert").execute(this.getResource("language-upload-data-error-message"),this.getResource("language-upload-data-error")))),this.app.event("UploadDataFailedEvent").publish(e),Promise.reject(e)},u.prototype._acceptGenerateResponse=function(t,e){for(var o=this,n=0,a=0,i=t.featureCollection.layers;a<i.length;a++){var s=i[a];s.layerDefinition.name||(s.layerDefinition.name=e+" "+ ++this._layerNamePlaceholderCounter),s.layerDefinition.visibilityField&&(s.layerDefinition.visibilityField=null),s.featureSet&&s.featureSet.features&&(n+=s.featureSet.features.length)}function r(){var e=t.featureCollection.layers.map(function(e){return l.buildLocalFeatureLayerService(e)});return Promise.all(e)}return n>=this.configuration.warnOnFeatureCount?new Promise(function(a,i){var e=o.getResource("language-upload-data-confirm-add-layer"),t=o.getResource("language-upload-data-confirm-add-layer-message").format(n);o.app.command("Confirm").execute(t,e,function(e){if(e)return a(r());var t=new Error(m.ERROR_CANCELLED_MESSAGE);t.name=m.ERROR_CANCELLED,i(t)})}):r()},u.prototype._acceptPublishResponse=function(e,t){var a=this,i="WaitOnPublishJob",o=s.isPortal(this.app)?new h.AddStatusArgs(this.getResource("language-upload-data-wait-on-publish-job-portal")):new h.AddStatusArgs(this.getResource("language-upload-data-wait-on-publish-job"));return o.id=i,o.showBusyIcon=!0,o.timeoutMS=0,this.app.command("AddStatus").execute(o),Promise.map(e.services,function(e){return a._waitOnJob(e).then(function(e){return a.app.command("RemoveStatus").execute(i),e}).then(function(e){return a._buildService(e,t)})}).then(function(e){return g(e)})},u.prototype._waitOnJob=function(i){var o=this;return new Promise(function(t,a){if(i.type===m.SERVICE_TYPE_FEATURE){if(!/^https/i.test(i.jobStatusUrl))return a(new Error("Job URL must be HTTPS."));var e={f:"json",token:o.app.site.getTokenFromPrincipal(i.jobStatusUrl,esri.IdentityManagerBase)||o.app.site.getTokenFromPrincipal(i.jobStatusUrl,r.Site),jobId:i.jobId};esri.request({url:i.jobStatusUrl,content:e,handleAs:"json"}).then(function(e){"completed"===e.status?t(i):"processing"===e.status||"partial"===e.status?setTimeout(function(){t(o._waitOnJob(i))},o.configuration.checkJobStatusPeriod):a(new Error("Publish job check failed."))},a)}else t(i)})},u.prototype._buildService=function(e,t){if(e.type===m.SERVICE_TYPE_FEATURE)return l.discoverFeatureServices(e.serviceUrl).then(function(e){return Promise.all(e.map(l.buildFeatureLayerService))});if(e.type!==m.SERVICE_TYPE_KML)throw new TypeError("Given service type '"+e.type+"' unsupported.");var a=t+" "+ ++this._layerNamePlaceholderCounter;return l.buildKmlService(e.serviceUrl,{displayName:a}).then(function(e){return[e]})},u.prototype._addMapServicesToMap=function(e){for(var t=0,a=e.mapServices;t<a.length;t++){var i=a[t];this.app.command("AddMapService").execute(i)}return Promise.resolve(e)},u);function u(){var e=null!==i&&i.apply(this,arguments)||this;return e._processInProgress=new a.Observable(!1),e._layerNamePlaceholderCounter=0,e}function g(e){return e.reduce(function(e,t){return e.concat(t)})}function b(t,e){return e.some(function(e){return new RegExp("(?:^|\\b|_)"+e+"(?:$|\\b|_)","i").test(t)})}m.UploadDataModule=o,m.flatten=g,m.checkStringForTerms=b})},"Mapping/modules/UploadData/Dialogs/LayerDetailsDialogView":function(){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","./../Dialog"],function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=/[^a-z0-9_]/gi,n=(i=a.DialogViewBase,r(s,i),s.prototype.attach=function(e){i.prototype.attach.call(this,e),$(this.form).change(this.validate.bind(this))},s.prototype.reset=function(e){void 0===e&&(e=""),e=e.replace(/\.[^\.]+$/,""),this.layerName.value=e.replace(o,""),this.publish.checked=!1,this.viewModel.publishDisabledMessage.set("")},s.prototype.validator=function(){var e=[];return this.layerName.value.trim()||e.push({title:this.getResource("language-layer-details-validation-error-name-cannot-be-empty"),message:this.getResource("language-layer-details-validation-error-name-cannot-be-empty-message")}),this.publish.checked&&this.layerName.value.match(o)&&e.push({title:this.getResource("language-layer-details-validation-error-invalid-publish-name"),message:this.getResource("language-layer-details-validation-error-invalid-publish-name-message")}),"fileGeodatabase"!==this.viewModel.fileType.get()||this.publish.checked||e.push({title:this.getResource("language-layer-details-validation-error-filegeodatabase-must-be-published"),message:this.getResource("language-layer-details-validation-error-filegeodatabase-must-be-published-message")}),e},s.prototype.validate=function(){this.viewModel.validationProblems.set(this.validator())},s.prototype.handleProceed=function(){this.validate(),1<=this.viewModel.validationProblems.getLength()?this.app.command("Alert").execute(this.getResource("language-upload-data-cannot-proceed-when-invalid-message"),this.getResource("language-upload-data-cannot-proceed-when-invalid")):(this.close(),this.viewModel.processActions.proceed({details:{layerName:this.layerName.value},publish:this.viewModel.signedIn.get()&&this.publish.checked}))},s);function s(){return null!==i&&i.apply(this,arguments)||this}t.LayerDetailsDialogView=n})},"Mapping/modules/UploadData/Dialogs/LayerDetailsDialogViewModel":function(){var i,d=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","geocortex/infrastructure/PortalUtils","./../UploadDataModule"],function(e,t,a,i,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_CANCELLED_LOCAL="UploadDataError/Cancelled",t.ERROR_CANCELLED_MESSAGE_LOCAL="Upload data process was cancelled.";var s,r=(s=a.ViewModelBase,d(l,s),l.prototype.initialize=function(e){s.prototype.initialize.call(this,e),this.configuration=e,o.isPortal(this.app)?this.publishCheckboxText.set(this.getResource("language-layer-details-publish-portal")):this.publishCheckboxText.set(this.getResource("@language-layer-details-publish"))},l.prototype.prompt=function(e){var i=this;return this.fileType.set(e),this.signedIn.set(o.hasAccessToPortal(this.app)),this.publishIsAvailable.set(this.signedIn.get()&&"gpx"!==e&&o.hasPublishFeaturePrivilege(this.app)),new Promise(function(t,a){i.processActions={proceed:function(e){return t(e)},error:function(e){return a(e)},cancel:function(){var e=new Error(n.ERROR_CANCELLED_MESSAGE);e.name=n.ERROR_CANCELLED,a(e)}}})},l);function l(){var e=null!==s&&s.apply(this,arguments)||this;return e.signedIn=new i.Observable(!1),e.fileType=new i.Observable(void 0),e.publishIsAvailable=new i.Observable(!1),e.publishDisabledMessage=new i.Observable,e.validationProblems=new i.ObservableCollection,e.publishCheckboxText=new i.Observable,e}t.LayerDetailsDialogViewModel=r})},"Mapping/modules/UploadData/Dialogs/SymbolDialogView":function(){var i,s=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","./../Dialog"],function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=(i=a.DialogViewBase,s(n,i),n.prototype.reset=function(){this.symbologySettingsWidget.reset(),this.symbologySettingsWidget.applySettings()},n.prototype.handleProceed=function(){this.close(),this.viewModel.processActions.proceed(this.symbologySettingsWidget.viewModel.symbols)},n.prototype.handleCancel=function(){this.handleProceed()},n);function n(){return null!==i&&i.apply(this,arguments)||this}t.SymbolDialogView=o})},"Mapping/modules/UploadData/Dialogs/SymbolDialogViewModel":function(){var i,s=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","geocortex/framework/ui/ViewModelBase"],function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=(i=a.ViewModelBase,s(n,i),n.prototype.prompt=function(){var e=this;return new Promise(function(t,a){e.processActions={proceed:function(e){return t(e)},error:function(e){return a(e)},cancel:function(){return t()}}})},n);function n(){return null!==i&&i.apply(this,arguments)||this}t.SymbolDialogViewModel=o})},"Mapping/modules/UploadData/Dialogs/TableMappingDialogView":function(){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","./../Dialog","./../UploadDataModule"],function(e,t,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Z_AXIS_ENABLED=!1,t.Z_AXIS_REQUIRED=t.Z_AXIS_ENABLED&&!1;var i,o=(i=a.DialogViewBase,r(s,i),s.prototype.validator=function(){var r=this,e=[];if(this.viewModel.locationTypeIsCoordinates.get()&&((![this.xAxis,this.yAxis].every(function(e){return-1!==e.selectedIndex})||t.Z_AXIS_ENABLED&&t.Z_AXIS_REQUIRED&&-1===this.zAxis.selectedIndex)&&e.push({title:this.getResource("language-table-mapping-validation-error-all-coordinates-must-be-set"),message:this.getResource("language-table-mapping-validation-error-all-coordinates-must-be-set-message")}),function(){for(var e=[r.xAxis,r.yAxis,r.zAxis],t=0,a=e;t<a.length;t++)for(var i=a[t],o=0,n=e;o<n.length;o++){var s=n[o];if(i!==s&&i.value&&i.value===s.value)return!1}return!0}()||e.push({title:this.getResource("language-table-mapping-validation-error-axes-must-be-unique"),message:this.getResource("language-table-mapping-validation-error-axes-must-be-unique-message")}),this.getSourceSpatialReference()||e.push({title:this.getResource("language-table-mapping-validation-error-source-spatial-mapping-invalid"),message:this.getResource("language-table-mapping-validation-error-source-spatial-mapping-invalid-message")})),this.viewModel.locationTypeIsAddress.get()){var a=[];this.viewModel.addressFieldSelectors.get().forEach(function(e,t){!e.required||e.value&&""!==e.value||0<$(r.form).find(".address select").get(t).selectedIndex||a.push(e)}),a.length&&e.push({title:this.getResource("language-table-mapping-validation-error-lacking-required-address-fields"),message:this.getResource("language-table-mapping-validation-error-lacking-required-address-fields-message").format(a.map(function(e){return e.label}).join(", "))})}return e},s.prototype.validate=function(){this.viewModel.validationProblems.set(this.validator())},s.prototype.attach=function(e){i.prototype.attach.call(this,e),this.reset(),$(this.form).change(this.validate.bind(this))},s.prototype.reset=function(){this.refreshLocationType(),this.viewModel.transformTablePreview(this.isFirstRowHeader.checked);var e=this.viewModel.sourceSpatialReferences.get();this.sourceSpatialReference.selectedIndex=e.findIndex(function(e){return e.preselected}),this.viewModel.sourceSpatialReferencesUseCustom.set(!1),$(this.form).find(".address select").each(function(e,t){t.selectedIndex=-1}),this.performAutoDetection(),this.validate()},s.prototype.performAutoDetection=function(){function a(e){for(var t=o.viewModel.tableHeadings.get(),a=0;a<t.length;a++){var i=t[a];if(n.checkStringForTerms(i,e))return a}return-1}var o=this,i=this.viewModel.configuration.autoDetectionTerms;this.xAxis.selectedIndex=i&&i.xAxis?a(i.xAxis):-1,this.yAxis.selectedIndex=i&&i.yAxis?a(i.yAxis):-1,this.zAxis.selectedIndex=i&&i.zAxis?a(i.zAxis):-1,this.viewModel.addressFieldSelectors.get().forEach(function(e,t){$(o.form).find(".address li").eq(t).find("select").get(0).selectedIndex=i&&i[e.name]?a(i[e.name])+1:-1})},s.prototype.refreshLocationType=function(){var e=this.locationType.querySelector("input[type=radio]:checked").value;this.viewModel.locationTypeIsCoordinates.set("coordinates"===e),this.viewModel.locationTypeIsAddress.set("address"===e)},s.prototype.handleChangeLocationType=function(){this.refreshLocationType(),this.validate()},s.prototype.handleChangeUseFirstRowAsHeader=function(){this.reset()},s.prototype.handleChangeSourceSpatialReference=function(e,t){this.viewModel.sourceSpatialReferencesUseCustom.set(this.viewModel.sourceSpatialReferences.getAt(t.selectedIndex).custom),this.validate()},s.prototype.getSourceSpatialReference=function(){if(-1===this.sourceSpatialReference.selectedIndex)return null;var e=this.viewModel.sourceSpatialReferences.getAt(this.sourceSpatialReference.selectedIndex);if(e.spatialReference)return e.spatialReference;if(e.map)return this.app.map.spatialReference;if(e.custom){var t=this.sourceSpatialReferenceCustom.value.trim();return t?/^[0-9]+$/.test(t)?new esri.SpatialReference(parseInt(t,10)):new esri.SpatialReference(t):null}},s.prototype.handleProceed=function(){var i=this;if(this.validate(),1<=this.viewModel.validationProblems.getLength())this.app.command("Alert").execute(this.getResource("language-upload-data-cannot-proceed-when-invalid-message"),this.getResource("language-upload-data-cannot-proceed-when-invalid"));else{var e;if(this.viewModel.locationTypeIsCoordinates.get())e={locationType:"coordinates",isFirstRowHeader:this.isFirstRowHeader.checked,x:this.xAxis.value,y:this.yAxis.value,sourceSR:this.getSourceSpatialReference()},t.Z_AXIS_ENABLED&&(e.z=this.zAxis.value);else if(this.viewModel.locationTypeIsAddress.get()){var o={};$(this.form).find(".address select").each(function(e,t){var a=i.viewModel.addressFieldSelectors.getAt(e);t.value&&(o[a.name]=t.value)}),e={locationType:"address",isFirstRowHeader:this.isFirstRowHeader.checked,addressFields:o}}else this.viewModel.processActions.error(new Error("Location type is invalid."));this.close(),this.viewModel.processActions.proceed(e)}},s);function s(){return null!==i&&i.apply(this,arguments)||this}t.TableMappingDialogView=o})},"Mapping/modules/UploadData/Dialogs/TableMappingDialogViewModel":function(){var i,l=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","./../UploadDataModule"],function(e,t,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=(i=a.ViewModelBase,l(s,i),s.prototype.initialize=function(e){i.prototype.initialize.call(this,e),this.configuration=e},s.prototype.prompt=function(e){var i=this;if(this.sourceSpatialReferences.set(this.configuration.sourceSpatialReferences.map(function(e){return e.map&&(e.spatialReference=i.app.map.spatialReference,e.spatialReference.wkid&&(e.label=i.getResource("language-table-mapping-source-spatial-reference-map-format").format(i.app.map.spatialReference.wkid))),e})),this.rawTablePreview=e,this.transformTablePreview(),this.geocoder=this.app.site.getDefaultBatchGeocoder(),this.hasConfiguredGeocoder.set(this.geocoder&&0<this.geocoder.parameters.length),this.addressFieldSelectors.clear(),this.hasConfiguredGeocoder.get())for(var t=0,a=this.geocoder.parameters;t<a.length;t++){var o=a[t];this.addressFieldSelectors.addItem({name:o.name,label:o.displayName||o.name,required:o.isRequired,value:o.value,tableHeadingOptions:this.tableHeadingOptions})}return new Promise(function(t,a){i.processActions={proceed:function(e){return t(e)},error:function(e){return a(e)},cancel:function(){var e=new Error(n.ERROR_CANCELLED_MESSAGE);e.name=n.ERROR_CANCELLED,a(e)}}})},s.prototype.transformTablePreview=function(e){if(void 0===e&&(e=!0),this.tablePreview.clear(),this.rawTablePreview){if(!e){for(var t=this.rawTablePreview[0].length,a=new r.ObservableCollection,i=1;i<=t;i++)a.addItem(this.getResource("language-table-mapping-generated-column-prefix")+i);this.tablePreview.addItem(a)}for(var o=0,n=this.rawTablePreview;o<n.length;o++){var s=n[o];this.tablePreview.addItem(new r.ObservableCollection(s))}this.tableHeadings.set(this.tablePreview.getAt(0).get()),this.tableHeadingOptions.set([""].concat(this.tableHeadings.get()))}},s);function s(){var e=null!==i&&i.apply(this,arguments)||this;return e.hasConfiguredGeocoder=new r.Observable(!1),e.tablePreview=new r.ObservableCollection,e.tableHeadings=new r.ObservableCollection,e.tableHeadingOptions=new r.ObservableCollection,e.locationTypeIsCoordinates=new r.Observable(!1),e.locationTypeIsAddress=new r.Observable(!1),e.zAxisEnabled=new r.Observable(!1),e.sourceSpatialReferences=new r.ObservableCollection,e.sourceSpatialReferencesUseCustom=new r.Observable(!1),e.addressFieldSelectors=new r.ObservableCollection,e.validationProblems=new r.ObservableCollection,e}t.TableMappingDialogViewModel=o})},"Mapping/modules/UploadData/Dialogs/TableRecordResultsDialogView":function(){var i,s=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","./../Dialog"],function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=(i=a.DialogViewBase,s(n,i),n.prototype.handleProceed=function(){this.close(),this.viewModel.processActions.proceed()},n);function n(){return null!==i&&i.apply(this,arguments)||this}t.TableRecordResultsDialogView=o})},"Mapping/modules/UploadData/Dialogs/TableRecordResultsDialogViewModel":function(){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables"],function(e,t,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,n=(o=a.ViewModelBase,r(s,o),s.prototype.initialize=function(e){o.prototype.initialize.call(this,e),this.configuration=e},s.prototype.prompt=function(e){var a=this;return this.rejectedRecordsMessage.set(this.getResource("language-table-record-results-dialog-rejected-records-message").format(e.rejected)),this.acceptedRecordsMessage.set(this.getResource("language-table-record-results-dialog-accepted-records-message").format(e.accepted)),this.rejectedRecordsUrl.set(e.rejectedRecordsUrl),new Promise(function(e,t){a.processActions={proceed:function(){return e()},error:function(e){return t(e)},cancel:function(){return e()}}})},s);function s(){var e=null!==o&&o.apply(this,arguments)||this;return e.rejectedRecordsMessage=new i.Observable(""),e.acceptedRecordsMessage=new i.Observable(""),e.rejectedRecordsUrl=new i.Observable(""),e}t.TableRecordResultsDialogViewModel=n})},"Mapping/modules/UploadData/Dialogs/UploadDialogView":function(){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","./../Dialog","geocortex/framework/observables"],function(e,t,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,n=(o=a.DialogViewBase,r(s,o),s.prototype.attachUploader=function(e){var t=this;this.uploaderWidget=e,this.uploaderWidget.handleProceed=function(){t.handleProceed()},this.uploaderWidget.handleCancel=function(){t.handleCancel()},this.isBusy.sync(this.uploaderWidget.viewModel.uploading),this.viewModel.disabled.sync(this.uploaderWidget.viewModel.disabled),this.uploaderWidget.viewModel.uploadRequestParameters.validator="feature",$(this.uploaderWidget.form).off("change").on("change",function(){t.validate()}),this.uploaderWidget.viewModel.onUploadSuccess=function(e){return t.viewModel.processActions.proceed(e)},this.uploaderWidget.viewModel.onUploadFailure=function(e){return t.viewModel.processActions.error(e)}},s.prototype.reset=function(){this.uploaderWidget.reset(),this.viewModel.validationProblems.clear()},s.prototype.validate=function(){this.viewModel.validationProblems.set(this.validator()),this.uploaderWidget.viewModel.selectedFiles.pulse()},s.prototype.handleProceed=function(e){this.validate(),1<=this.viewModel.validationProblems.getLength()?this.app.command("Alert").execute(this.getResource("language-upload-data-cannot-proceed-when-invalid-message"),this.getResource("language-upload-data-cannot-proceed-when-invalid")):this.uploaderWidget.viewModel.upload(this.uploaderWidget.form)},s);function s(){var d=null!==o&&o.apply(this,arguments)||this;return d.isBusy=new i.Observable(!1),d.validator=function(){var e=d.uploaderWidget.viewModel.selectedFiles.get(),t=[],a=["csv","xlsx","gpx","kml","zip"],i=["shp","dbf","shx","prj","cpg","sbn","sbx","shp.xml"],o=a.concat(i);e.length||t.push({title:d.getResource("language-uploader-validation-error-no-file-title"),message:d.getResource("language-uploader-validation-error-no-file-message")});var n=0;e.forEach(function(t){o.some(function(e){return t.name.toLowerCase().endsWith("."+e.toLowerCase())})||(t.flag=d.getResource("language-upload-dialog-selected-file-flag-extension-not-allowed"),n++)}),n&&t.push({title:d.getResource("language-upload-dialog-validation-error-extension-not-allowed"),message:d.getResource("language-upload-dialog-validation-error-extension-not-allowed-message")});var s=e.filter(function(t){return a.some(function(e){return t.name.endsWith("."+e)})});1<s.length&&t.push({title:d.getResource("language-upload-dialog-validation-error-too-many"),message:d.getResource("language-upload-dialog-validation-error-too-many-message").format(s.length)});var r=e.filter(function(t){return["shp"].concat(i).some(function(e){return t.name.endsWith("."+e)})}),l=r.some(function(e){return e.name.endsWith(".shp")});return 0<r.length&&!l&&t.push({title:d.getResource("language-upload-dialog-validation-error-shapefile-incomplete"),message:d.getResource("language-upload-dialog-validation-error-shapefile-incomplete-message")}),t},d}t.UploadDialogView=n})},"Mapping/modules/UploadData/Dialogs/UploadDialogViewModel":function(){var i,l=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","./../UploadDataModule"],function(e,t,a,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=(n=a.ViewModelBase,l(r,n),r.prototype.initialize=function(e){n.prototype.initialize.call(this,e),this.configuration=e},r.prototype.prompt=function(){var e=this;return new Promise(function(t,a){e.processActions={proceed:function(e){return t(e)},error:function(e){return a(e)},cancel:function(){var e=new Error(o.ERROR_CANCELLED_MESSAGE);e.name=o.ERROR_CANCELLED,a(e)}}})},r);function r(){var e=null!==n&&n.apply(this,arguments)||this;return e.validationProblems=new i.ObservableCollection,e.disabled=new i.Observable(!1),e}t.UploadDialogViewModel=s})},"Mapping/modules/UploadData/Widgets/Uploader/UploaderView":function(){var i,s=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=(i=a.ViewBase,s(n,i),n.prototype.added=function(e){var a=this;i.prototype.added.call(this,e),this.viewModel.legacyMode?($(this.input).add(this.selectedFileList).remove(),this.handleLegacyAddInput(),this.viewModel.selectedFiles.bind(this,function(){var t=$(a.legacyInputBox).find("input");a.viewModel.selectedFiles.get().forEach(function(o,e){t.each(function(e,t){if(t.value.endsWith(o.name)){var a=!!o.flag,i=$(t).closest("li");a?i.removeClass("flagged"):i.addClass("flagged"),i.find(".file-flag").text(a?o.flag:"")}})})})):$(this.legacyInputBox).remove(),e.attachUploader(this)},n.prototype.updateSelectedFiles=function(){var i=this;if(this.viewModel.legacyMode){var e=$(this.legacyInputBox).find("input");this.viewModel.selectedFiles.clear(),e.each(function(e,t){var a=t.value;a&&i.viewModel.selectedFiles.addItem({name:/(?:\\|\/)(.+)$/.exec(a)[1],size:null,flag:null})})}else{var t=[].slice.call(this.input.files);this.viewModel.selectedFiles.set(t.map(function(e){return{name:e.name,size:1048576<e.size?(e.size/1024/1024).toFixed(1)+" "+i.getResource("language-uploader-megabyte-abbreviation"):(e.size/1024).toFixed(0)+" "+i.getResource("language-uploader-kilobyte-abbreviation"),flag:null}}))}this.app.viewManager.notifyDimensionsChanged(this)},n.prototype.reset=function(){this.viewModel.disabled.set(!1),this.viewModel.legacyMode?(this.viewModel.legacyInputs.clear(),this.handleLegacyAddInput()):this.form.reset(),this.viewModel.selectedFiles.clear(),this.viewModel.progress.set(0)},n.prototype.handleChange=function(){this.updateSelectedFiles()},n.prototype.handleLegacyAddInput=function(){this.viewModel.legacyInputs.addItem({})},n.prototype.handleLegacyRemoveInput=function(e,t){var a=$(t).closest("li").index();this.viewModel.legacyInputs.removeAt(a),$(this.form).change()},n.prototype.handleProceed=function(e){},n.prototype.handleCancel=function(e){},n.prototype.handleSubmit=function(e){var t=this;if(e.preventDefault(),1<=this.viewModel.selectedFiles.getLength())return this.viewModel.upload(this.form).caught(function(e){throw t.reset(),/\/0$/.test(e.name)?t.app.command("Alert").execute(t.getResource("language-uploader-error-cors-message"),t.getResource("language-uploader-error-cors-title")):t.app.command("Alert").execute(t.getResource("language-uploader-error-unknown-message"),t.getResource("language-uploader-error-unknown-title")),e}),!1;var a=new Error("Cannot upload when there are no selected files.");throw a.name="UploaderError/NoSelectedFiles",a},n);function n(){return null!==i&&i.apply(this,arguments)||this}t.UploaderView=o})},"Mapping/modules/UploadData/Widgets/Uploader/UploaderViewModel":function(){var i,l=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","geocortex/essentials/utilities/UrlUtilities"],function(e,t,a,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=(n=a.ViewModelBase,l(r,n),r.prototype.upload=function(o){var r=this;return new Promise(function(n,s){r.uploading.set(!0);var e=r.uploadEndpointUrl;if(function(e,t){var a=new dojo._Url(e),i=window.location;if(!a.scheme&&!a.host&&!a.port)return!1;if(t.nativeManager.isNative()&&"https"===a.scheme)return!1;var o=a.scheme+"://"+a.host+(a.port?":"+a.port:""),n=i.protocol+"//"+i.hostname+(i.port?":"+i.port:"");return o!=n}(e,r.app)){var t=function(){try{var e=esri._getProxyUrl();if(e.path)return e.path}catch(e){return}return null}();if(!t)throw new Error("Proxy is required but not available");e=t+"?"+e}if(r.legacyMode){var a={url:e,data:r.uploadRequestParameters,files:$(":file",o),iframe:!0,processData:!1};$.ajax(a).always(function(e,t,a){var i=JSON.parse(a.responseText);if(i.error){r.disabled.set(!1);var o=new Error(i.error.message);o.name="UploaderError/"+i.error.code,r.onUploadFailure(o),s(o)}else r.onUploadSuccess(i),n(i)})}else{var i=new FormData(o);Object.keys(r.uploadRequestParameters).forEach(function(e){i.append(e,r.uploadRequestParameters[e])}),$.ajax({url:e,data:i,type:"POST",processData:!1,contentType:!1,dataType:"json",xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&(e.upload.onprogress=function(e){var t=e.loaded/e.total,a=isNaN(t)?0:100*t;r.progress.set(a)}),e}}).done(function(e,t,a){if(e.error){r.disabled.set(!1);var i=new Error(e.error.message);i.name="UploaderError/"+e.error.code,r.onUploadFailure(i),s(i)}else r.onUploadSuccess(e),n(e)}).fail(function(e,t,a){r.disabled.set(!1);var i=new Error(a);i.name="UploaderError/"+e.status,r.onUploadFailure(i),s(i)}).always(function(){r.uploading.set(!1)})}r.disabled.set(!0)})},r);function r(e,t){var a=n.call(this,e,t)||this;return a.selectedFiles=new i.ObservableCollection,a.progress=new i.Observable(0),a.uploading=new i.Observable(!1),a.disabled=new i.Observable(!1),a.legacyMode=document.documentMode&&document.documentMode<=9,a.legacyInputs=new i.ObservableCollection,a.uploadEndpointUrl=null,a.uploadRequestParameters={f:"json"},a.onUploadSuccess=function(){},a.onUploadFailure=function(){},a.app.waitUntilSiteInitializing().then(function(){a.uploadEndpointUrl=o.UrlUtilities.simplify(a.app.site.url+"/../../")+"/files/upload"}),a}t.UploaderViewModel=s})},"url:/Mapping/modules/UploadData/Dialogs/LayerDetailsDialogView.html":t,"url:/Mapping/modules/UploadData/Dialogs/SymbolDialogView.html":a,"url:/Mapping/modules/UploadData/Dialogs/TableMappingDialogView.html":i,"url:/Mapping/modules/UploadData/Dialogs/TableRecordResultsDialogView.html":o,"url:/Mapping/modules/UploadData/Dialogs/UploadDialogView.html":n,"url:/Mapping/modules/UploadData/Widgets/Uploader/UploaderView.html":s}}),require(["geocortex/framework/resourceManager"],function(e){e.resourceManager.register("Mapping","inv","Mapping/modules/UploadData/common.css","css","LyotLS1VcGxvYWQgRGF0YTogVmFsaWRhdGlvbiBQcm9ibGVtcy0tLSovDQoNCi52YWxpZGF0aW9uLXByb2JsZW1zIHsNCiAgICBsaXN0LXN0eWxlOiBub25lOw0KICAgIHBhZGRpbmc6IDAgNSU7DQogICAgbWFyZ2luOiAxZW0gMC4zNWVtIDEuNWVtIDAuNWVtOw0KICAgIGJvcmRlcjogc29saWQgMXB4ICNEODAwMEM7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0ZGQkFCQTsNCiAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtOw0KICAgIGNvbG9yOiAjNjYwMDAwOw0KfQ0KLnZhbGlkYXRpb24tcHJvYmxlbXMgbGkgew0KICAgIG1hcmdpbjogMWVtIGF1dG87DQp9DQoudmFsaWRhdGlvbi1wcm9ibGVtcyBwIHsNCiAgICBtYXJnaW46IGF1dG87DQp9DQoudmFsaWRhdGlvbi1wcm9ibGVtcyBwOmZpcnN0LWNoaWxkIHsNCiAgICBmb250LXdlaWdodDogYm9sZDsNCn0NCg0KDQovKi0tLVVwbG9hZCBEYXRhOiBVcGxvYWQgRGlhbG9nLS0tKi8NCg0KLnVwbG9hZC1kaWFsb2cgew0KICAgIHdpZHRoOiAzNjBweDsNCiAgICBtYXgtaGVpZ2h0OiA0MDBweDsNCiAgICBwYWRkaW5nOiAxZW07DQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICBtYXJnaW4tYm90dG9tOiAwLjVlbTsNCiAgICBvdmVyZmxvdzogYXV0bzsNCn0NCg0KLnVwbG9hZC1kaWFsb2ctc3VwcG9ydGVkLWZpbGVzID4gc3Ryb25nOjphZnRlciB7DQogICAgY29udGVudDogIjoiOw0KfQ0KDQoudXBsb2FkLWRpYWxvZy51cGxvYWRlci1kaXNhYmxlZCAuZm9ybS1idG5zIHsNCiAgICBvcGFjaXR5OiAwLjU7DQp9DQoNCg0KLyotLS1VcGxvYWQgRGF0YTogVGFibGUgTWFwcGluZyBEaWFsb2ctLS0qLw0KDQoudGFibGUtbWFwcGluZy1kaWFsb2cgew0KICAgIG1heC13aWR0aDogNjAwcHg7DQogICAgcGFkZGluZzogMWVtOw0KfQ0KDQoudGFibGUtbWFwcGluZyB7DQogICAgbGlzdC1zdHlsZTogbm9uZTsNCiAgICBwYWRkaW5nOiAwOw0KICAgIG1hcmdpbjogMDsNCn0NCg0KLnRhYmxlLW1hcHBpbmctZm9ybSBpbnB1dCB7DQogICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsNCn0NCg0KLnRhYmxlLW1hcHBpbmcgLmZvcm0tbGFiZWwgew0KICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBwYWRkaW5nOiAwLjNlbSAwOw0KICAgIGZsb2F0OiBub25lOw0KfQ0KDQoudGFibGUtbWFwcGluZyAuZm9ybS1sYWJlbCBzcGFuLA0KLnRhYmxlLW1hcHBpbmcuYWRkcmVzcyAuZm9ybS1sYWJlbCB7DQogICAgbWFyZ2luLWJvdHRvbTogMC4yNWVtOw0KICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCn0NCg0KLnRhYmxlLW1hcHBpbmcuYWRkcmVzcyAuZm9ybS1sYWJlbCB7DQogICAgcGFkZGluZzogMDsNCn0NCg0KLnRhYmxlLW1hcHBpbmcgLmZvcm0tbGFiZWwgc3Bhbjo6YWZ0ZXIsDQoudGFibGUtbWFwcGluZy5hZGRyZXNzIC5mb3JtLWxhYmVsOjphZnRlciB7DQogICAgY29udGVudDogIjoiOw0KfQ0KDQoudGFibGUtbWFwcGluZyBzZWxlY3QsDQoudGFibGUtbWFwcGluZyBpbnB1dCB7DQogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICAgIHdpZHRoOiAxMDAlOw0KfQ0KDQoudGFibGUtbWFwcGluZy1sb2NhdGlvbi10eXBlLWJveCB7DQogICAgcGFkZGluZzogMDsNCiAgICBib3JkZXItcmFkaXVzOiAwOw0KICAgIG1hcmdpbi1ib3R0b206IDAuNWVtOw0KfQ0KDQoudGFibGUtbWFwcGluZy1sb2NhdGlvbi10eXBlLWJveCBzcGFuIHsNCiAgICBtYXJnaW4tcmlnaHQ6IDJlbTsNCiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOw0KfQ0KDQoudGFibGUtbWFwcGluZy1pcy1maXJzdC1yb3ctaGVhZGVyLWJveCB7DQogICAgbWFyZ2luOiAwLjc1ZW0gMCAwLjVlbSAwOw0KICAgIGRpc3BsYXk6IGJsb2NrOw0KfQ0KDQoudGFibGUtbWFwcGluZy1wcmV2aWV3LWNvbnRhaW5lciB7DQogICAgb3ZlcmZsb3c6IGF1dG87DQogICAgYm94LXNoYWRvdzogDQogICAgICAgIGluc2V0IC04cHggMCAwIC03cHggI0NDQ0NDQywgDQogICAgICAgIGluc2V0IDhweCAwIDAgLTdweCAjQ0NDQ0NDOw0KfQ0KDQoudGFibGUtbWFwcGluZy1wcmV2aWV3IHsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOw0KfQ0KDQoudGFibGUtbWFwcGluZy1wcmV2aWV3IHRyOmZpcnN0LW9mLXR5cGUgew0KICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KDQoudGFibGUtbWFwcGluZy1wcmV2aWV3IHRyOmZpcnN0LW9mLXR5cGUgdGQgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNDQ0NDQ0M7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIGJvcmRlci1yaWdodDogc29saWQgMXB4IHdoaXRlOw0KfQ0KDQoudGFibGUtbWFwcGluZy1wcmV2aWV3IHRyOmZpcnN0LW9mLXR5cGUgdGQ6bGFzdC1vZi10eXBlIHsNCiAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjQ0NDQ0NDOw0KfQ0KDQoudGFibGUtbWFwcGluZy1wcmV2aWV3IHRkIHsNCiAgICBwYWRkaW5nOiAwLjI1ZW0gMC41ZW07DQogICAgdGV4dC1hbGlnbjogbGVmdDsNCiAgICBtaW4td2lkdGg6IDZlbTsNCiAgICBib3JkZXI6IHNvbGlkIDFweCAjQ0NDQ0NDOw0KfQ0KDQoudGFibGUtbWFwcGluZy5hZGRyZXNzIGxpIHsNCiAgICBwYWRkaW5nOiAwLjNlbSAwOw0KfQ0KDQovKi0tLVVwbG9hZCBEYXRhOiBMYXllciBEZXRhaWxzIERpYWxvZy0tLSovDQoNCi5sYXllci1kZXRhaWxzLWRpYWxvZyB7DQogICAgcGFkZGluZzogMWVtOw0KICAgIG1heC13aWR0aDogNDgwcHg7DQp9DQoNCi5sYXllci1kZXRhaWxzLWRpYWxvZyAuZm9ybS1maWVsZHMgbGFiZWwgew0KICAgIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50Ow0KICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgIC1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICBmbG9hdDogbGVmdDsNCiAgICB3aWR0aDogMjUlOw0KICAgIHBhZGRpbmctdG9wOiAuM2VtOw0KICAgIGZvbnQtc2l6ZTogMWVtOw0KfQ0KDQoubGF5ZXItZGV0YWlscy1kaWFsb2cgLmZvcm0tZmllbGRzIGxhYmVsOjphZnRlciB7DQogICAgY29udGVudDogIjoiOw0KfQ0KDQoubGF5ZXItZGV0YWlscy1kaWFsb2cgLmZvcm0tZmllbGRzIGlucHV0IHsNCiAgICB3aWR0aDogNzUlOw0KfQ0KDQoubGF5ZXItZGV0YWlscy1kaWFsb2cgLnB1Ymxpc2gtY2hlY2tib3gtY29udGFpbmVyIHsNCiAgICBtYXJnaW46IDFlbSBhdXRvOw0KICAgIG1hcmdpbi1ib3R0b206IDJlbTsNCn0NCg0KLnB1Ymxpc2gtY2hlY2tib3gtbGFiZWwgew0KICAgIG1hcmdpbi1sZWZ0OiAwLjI1ZW07DQp9DQoNCi5wdWJsaXNoLWNoZWNrYm94LA0KLnB1Ymxpc2gtY2hlY2tib3gtbGFiZWwgew0KICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7DQp9DQoNCi5wdWJsaXNoLWluZm8gew0KICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgbWFyZ2luLXRvcDogMC4yNWVtOw0KfQ0KDQovKi0tLVVwbG9hZCBEYXRhOiBUYWJsZSBSZWNvcmQgUmVzdWx0cyBEaWFsb2ctLS0qLw0KDQoudGFibGUtcmVjb3JkLXJlc3VsdHMtZGlhbG9nIHsNCiAgICBwYWRkaW5nOiAxZW07DQp9DQoNCi50YWJsZS1yZWNvcmQtcmVzdWx0LWRldGFpbHMgew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIG1hcmdpbi1ib3R0b206IDFlbTsNCn0NCg0KLnRhYmxlLXJlY29yZC1yZXN1bHQtZGV0YWlscyBpbWcgew0KICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7DQogICAgbWFyZ2luLXJpZ2h0OiAwLjNlbTsNCn0NCg0KLnRhYmxlLXJlY29yZC1yZXN1bHQtZGV0YWlscyBzcGFuIHsNCiAgICBkaXNwbGF5OiBpbmxpbmU7DQogICAgd2lkdGg6IDgwJTsNCiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOw0KfQ0KDQoudGFibGUtcmVjb3JkLXJlc3VsdC1kb3dubG9hZCB7DQogICAgbWFyZ2luOiAxLjE1ZW0gMCAwLjNlbSAwOw0KfQ0KDQoNCi8qLS0tVXBsb2FkIERhdGE6IFN5bWJvbCBEaWFsb2ctLS0qLw0KDQouc3ltYm9sLWRpYWxvZyB7DQogICAgcGFkZGluZzogMWVtOw0KfQ0KDQoudXBsb2FkLWRhdGEgLmltYWdlLWNvbnRhaW5lciB7DQogICAgaGVpZ2h0OiAxNmVtOw0KICAgIG1heC13aWR0aDogMzJlbTsNCn0="),e.resourceManager.register("Mapping","inv","Mapping/modules/UploadData/Widgets/Uploader/common.css","css","DQovKi0tLSBVcGxvYWRlciB3aWRnZXQgLS0tKi8NCg0KLnVwbG9hZGVyLWRpc2FibGVkIGZvcm0gew0KICAgIG9wYWNpdHk6IDAuNTsNCn0NCg0KLnVwbG9hZGVyIGlucHV0IHsNCiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjY2NjOw0KICAgIGJvcmRlci1yYWRpdXM6IDAuMjVyZW07DQogICAgd2lkdGg6IDEwMCU7DQogICAgYmFja2dyb3VuZDogbm9uZTsNCn0NCg0KLnVwbG9hZGVyIGlucHV0W3R5cGU9ImNoZWNrYm94Il0sDQoudXBsb2FkZXIgaW5wdXRbdHlwZT0icmFkaW8iXSB7DQogICAgd2lkdGg6IGF1dG87DQogICAgdmVydGljYWwtYWxpZ246IGJvdHRvbTsNCiAgICBtYXJnaW4tcmlnaHQ6IDAuNWVtOw0KfQ0KDQoudXBsb2FkZXIgLnNlbGVjdGVkLWZpbGUtbGlzdCB7DQogICAgYmFja2dyb3VuZDogI2VmZWZlZjsNCiAgICBwYWRkaW5nOiAwLjVlbTsNCiAgICBib3JkZXItcmFkaXVzOiAwLjI1ZW07DQp9DQoNCi51cGxvYWRlciAuc2VsZWN0ZWQtZmlsZS1saXN0IGxpIHsNCiAgICB3aWR0aDogOTAlOw0KICAgIGxpc3Qtc3R5bGU6IG5vbmU7DQogICAgbWFyZ2luOiAwLjVlbSAwIDAgMDsNCiAgICBwYWRkaW5nOiAwLjVlbSA1JTsNCiAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOw0KICAgIGJvcmRlci1yYWRpdXM6IDAuMjVyZW07DQp9DQoNCi51cGxvYWRlciAuc2VsZWN0ZWQtZmlsZS1saXN0IGxpLmZsYWdnZWQgew0KICAgIGJvcmRlcjogMXB4IHNvbGlkICM5OTAwMDA7DQp9DQoNCi51cGxvYWRlciAuc2VsZWN0ZWQtZmlsZS1saXN0IGxpLmZsYWdnZWQgLnNlbGVjdGVkLWZpbGUtbmFtZTo6YmVmb3JlLA0KLnVwbG9hZGVyIC52YWxpZGF0aW9uLXByb2JsZW1zIGxpIHA6Zmlyc3QtY2hpbGQ6OmJlZm9yZSB7DQogICAgY29udGVudDogIiI7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgZmxvYXQ6IGxlZnQ7DQogICAgd2lkdGg6IDFlbTsNCiAgICBoZWlnaHQ6IDFlbTsNCiAgICBiYWNrZ3JvdW5kOiB1cmwoIlJlc291cmNlcy9JbWFnZXMvSWNvbnMvc3RvcC1yZWQtMzIucG5nIik7DQogICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjsNCiAgICBtYXJnaW4tcmlnaHQ6IDAuNWVtOw0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICB0b3A6IDAuMTVlbTsNCn0NCg0KLnVwbG9hZGVyIC5zZWxlY3RlZC1maWxlLWxpc3QgbGk6Zmlyc3QtY2hpbGQgew0KICAgIG1hcmdpbi10b3A6IDA7DQp9DQoNCi51cGxvYWRlciAuc2VsZWN0ZWQtZmlsZS1ib3ggew0KICAgIGRpc3BsYXk6IHRhYmxlOw0KICAgIHdpZHRoOiAxMDAlOw0KfQ0KDQoudXBsb2FkZXIgLnNlbGVjdGVkLWZpbGUtYm94ID4gc3BhbiB7DQogICAgZGlzcGxheTogdGFibGUtY2VsbDsNCiAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wOw0KfQ0KDQoudXBsb2FkZXIgLnNlbGVjdGVkLWZpbGUtbmFtZSB7DQogICAgd29yZC1icmVhazogYnJlYWstYWxsOw0KfQ0KDQoudXBsb2FkZXIgLnNlbGVjdGVkLWZpbGUtc2l6ZSB7DQogICAgb3BhY2l0eTogMC41Ow0KICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsNCiAgICB0ZXh0LWFsaWduOiByaWdodDsNCn0NCg0KLnVwbG9hZGVyIHByb2dyZXNzIHsNCiAgICB3aWR0aDogMTAwJTsNCn0NCg0KDQovKi0tLSBVcGxvYWRlciB3aWRnZXQgbGVnYWN5IGltcGxlbWVudGF0aW9ucyAtLS0qLw0KDQoudXBsb2FkZXItbGVnYWN5LWlucHV0LWJveCB7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KDQoudXBsb2FkZXItbGVnYWN5LWlucHV0LWJveCBvbCB7DQogICAgbGlzdC1zdHlsZTogbm9uZTsNCiAgICBwYWRkaW5nOiAwOw0KICAgIHRleHQtYWxpZ246IGxlZnQ7DQp9DQoNCi51cGxvYWRlci1sZWdhY3ktaW5wdXQtYm94IGxpIHsNCiAgICBtYXJnaW46IDFlbSAwOw0KfQ0KDQoudXBsb2FkZXItbGVnYWN5LWlucHV0LWJveCBsaSA+ICogew0KICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCn0NCg0KLnVwbG9hZGVyLWxlZ2FjeS1pbnB1dC1ib3ggaW5wdXQgew0KICAgIHdpZHRoOiA3NSU7DQp9DQoNCi51cGxvYWRlci1sZWdhY3ktaW5wdXQtYm94IC5maWxlLWZsYWcgew0KICAgIG1hcmdpbi1ib3R0b206IDFlbTsNCiAgICBjb2xvcjogIzk5MDAwMDsNCn0NCg0KLnVwbG9hZGVyLWxlZ2FjeS1yZW1vdmUtYnV0dG9uIHsNCiAgICBiYWNrZ3JvdW5kOiB1cmwoIlJlc291cmNlcy9JbWFnZXMvSWNvbnMvVG9vbGJhci90cmFzaC0yNC5wbmciKSBjZW50ZXIgY2VudGVyIG5vLXJlcGVhdDsNCiAgICBtYXJnaW46IDAgMC4yNWVtIDAgMC41ZW07DQp9DQoNCi51cGxvYWRlci1sZWdhY3ktYWRkLWJ1dHRvbiB7DQogICAgYmFja2dyb3VuZDogdXJsKCJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL2FkZC0yNC5wbmciKSBjZW50ZXIgY2VudGVyIG5vLXJlcGVhdDsNCiAgICBtYXJnaW4tbGVmdDogMC4yNWVtOw0KfQ0KDQoudXBsb2FkZXItbGVnYWN5LXJlbW92ZS1idXR0b24sDQoudXBsb2FkZXItbGVnYWN5LWFkZC1idXR0b24gew0KICAgIGhlaWdodDogMjRweDsNCiAgICB3aWR0aDogMjRweDsNCiAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyOw0KICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7DQp9DQo="),e.resourceManager.register("Mapping","inv","Mapping/modules/UploadData/Dialogs/LayerDetailsDialogView.html","html",t),e.resourceManager.register("Mapping","inv","Mapping/modules/UploadData/Dialogs/SymbolDialogView.html","html",a),e.resourceManager.register("Mapping","inv","Mapping/modules/UploadData/Dialogs/TableMappingDialogView.html","html",i),e.resourceManager.register("Mapping","inv","Mapping/modules/UploadData/Dialogs/TableRecordResultsDialogView.html","html",o),e.resourceManager.register("Mapping","inv","Mapping/modules/UploadData/Dialogs/UploadDialogView.html","html",n),e.resourceManager.register("Mapping","inv","Mapping/modules/UploadData/Widgets/Uploader/UploaderView.html","html",s)}),require({cache:{}}),define(["Mapping/modules/UploadData/Dialog","Mapping/modules/UploadData/UploadDataModule","Mapping/modules/UploadData/Dialogs/LayerDetailsDialogView","Mapping/modules/UploadData/Dialogs/LayerDetailsDialogViewModel","Mapping/modules/UploadData/Dialogs/SymbolDialogView","Mapping/modules/UploadData/Dialogs/SymbolDialogViewModel","Mapping/modules/UploadData/Dialogs/TableMappingDialogView","Mapping/modules/UploadData/Dialogs/TableMappingDialogViewModel","Mapping/modules/UploadData/Dialogs/TableRecordResultsDialogView","Mapping/modules/UploadData/Dialogs/TableRecordResultsDialogViewModel","Mapping/modules/UploadData/Dialogs/UploadDialogView","Mapping/modules/UploadData/Dialogs/UploadDialogViewModel","Mapping/modules/UploadData/Widgets/Uploader/UploaderView","Mapping/modules/UploadData/Widgets/Uploader/UploaderViewModel"],function(e,t,a,i,o,n,s,r,l,d,c,p,u,g){b(e,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.DialogViewBase",e.DialogViewBase),b(t,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.SERVICE_TYPE_FEATURE",t.SERVICE_TYPE_FEATURE),b(t,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.SERVICE_TYPE_KML",t.SERVICE_TYPE_KML),b(t,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.ERROR_CANCELLED",t.ERROR_CANCELLED),b(t,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.ERROR_CANCELLED_MESSAGE",t.ERROR_CANCELLED_MESSAGE),b(t,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.ERROR_MUST_SIGN_IN_TO_PUBLISH_GEODATABASE",t.ERROR_MUST_SIGN_IN_TO_PUBLISH_GEODATABASE),b(t,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.ERROR_NOT_AUTHORIZED_TO_PUBLISH_GEODATABASE",t.ERROR_NOT_AUTHORIZED_TO_PUBLISH_GEODATABASE),b(t,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.ERROR_COULD_NOT_PARSE_XSLX",t.ERROR_COULD_NOT_PARSE_XSLX),b(t,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.UploadDataModule",t.UploadDataModule),b(t,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.flatten",t.flatten),b(t,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.checkStringForTerms",t.checkStringForTerms),b(a,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.LayerDetailsDialogView",a.LayerDetailsDialogView),b(i,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.ERROR_CANCELLED_LOCAL",i.ERROR_CANCELLED_LOCAL),b(i,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.ERROR_CANCELLED_MESSAGE_LOCAL",i.ERROR_CANCELLED_MESSAGE_LOCAL),b(i,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.LayerDetailsDialogViewModel",i.LayerDetailsDialogViewModel),b(o,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.SymbolDialogView",o.SymbolDialogView),b(n,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.SymbolDialogViewModel",n.SymbolDialogViewModel),b(s,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.Z_AXIS_ENABLED",s.Z_AXIS_ENABLED),b(s,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.Z_AXIS_REQUIRED",s.Z_AXIS_REQUIRED),b(s,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.TableMappingDialogView",s.TableMappingDialogView),b(r,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.TableMappingDialogViewModel",r.TableMappingDialogViewModel),b(l,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.TableRecordResultsDialogView",l.TableRecordResultsDialogView),b(d,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.TableRecordResultsDialogViewModel",d.TableRecordResultsDialogViewModel),b(c,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.UploadDialogView",c.UploadDialogView),b(p,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.UploadDialogViewModel",p.UploadDialogViewModel),b(u,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.widgets.uploader.UploaderView",u.UploaderView),b(g,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.widgets.uploader.UploaderViewModel",g.UploaderViewModel)})}();