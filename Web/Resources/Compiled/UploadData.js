!function(){function e(e,t,a){if("string"==typeof e&&(a=t,t=e),void 0!==a)for(var i=t.split("."),o=null,n=window,r=0,s=i.length;r<s;r++)o=i[r],r==s-1?n[o]=a:n[o]||(n[o]={}),n=n[o];else console.warn("Undefined shim for: "+t)}var t="<div class='upload-data layer-details-dialog'>    \x3c!-- Layer details form. --\x3e    <form action='javascript:void(0)' data-binding='{@var: form}'>        \x3c!-- Feature parameter details. --\x3e        <div class='form-fields'>            <label for='layer-details-layer-name' data-binding='{@text: @language-layer-details-layer-name}'></label>            <input id='layer-details-layer-name' name='layer-name' data-binding='{@var: layerName}{value: @language-layer-details-layer-name-default}' />        </div>        \x3c!-- Publish checkbox (determines whether to use Generate or Publish endpoint). --\x3e        <div class='publish-checkbox-container' data-binding='{@visible: publishIsAvailable}'>            <label data-binding='{@disabled: publishDisabledMessage}'>                <input type='checkbox' class='publish-checkbox' name='publish' data-binding='{@var: publish}{@disabled: publishDisabledMessage}' />                <span class='publish-checkbox-label' data-binding='{@text: @language-layer-details-publish}'></span>            </label>            <div class='publish-info' data-binding='{@visible: publishDisabledMessage}'>                <span data-binding='{@text: publishDisabledMessage}'></span>            </div>        </div>        \x3c!-- Validation problems. --\x3e        <ol class='validation-problems' data-binding='      {@source: validationProblems}      {@visible: validationProblems}'>            <li data-binding='{@template-for: validationProblems}'>                <p data-binding='{@text: title}'></p>                <p data-binding='{@text: message}'></p>            </li>        </ol>        \x3c!-- Bottom buttons. --\x3e        <div class='form-btns'>            <button type='submit' class='button' data-binding='{@text: @language-layer-details-dialog-button-proceed}{@event-onclick: handleProceed}'></button>            <button class='button' data-binding='{@text: @language-layer-details-dialog-button-cancel}{@event-onclick: handleCancel}'></button>        </div>    </form></div>",a="<div class='upload-data symbol-dialog'>    \x3c!-- Symbology settings widget. --\x3e    <div data-binding='{@widget: SymbologySettings}{@widget-replace: true}'></div>    \x3c!-- Bottom buttons. --\x3e    <div class='form-btns'>        <button class='button' data-binding='{@text: @language-symbol-dialog-button-proceed}{@event-onclick: handleProceed}'></button>    </div></div>",i="\x3c!-- Dialog where the user can affect the way the table data will be interpreted as a layer. --\x3e<div class='upload-data table-mapping-dialog'>    \x3c!-- Table mapping form form where the user can change details about the way table data is interpreted as a layer. --\x3e    <form class='table-mapping-form' name='table-mapping' action='javascript:void(0)' data-binding='{@var: form}{@event-onchange: validate}'>        \x3c!-- Radio buttons for switching between Spatial and Address table mapping modes. --\x3e        <fieldset class='table-mapping-location-type-box' data-binding='{@var: locationType}{@event-onchange: handleChangeLocationType}'>            <legend data-binding='{@text: @language-table-mapping-dialog-view-legend}'></legend>            <label>                <input type='radio' name='table-mapping-location-type' value='coordinates' checked />                <span data-binding='{@text: @language-table-mapping-location-type-coordinates}'></span>            </label>            <label data-binding='{@visible: hasConfiguredGeocoder}'>                <input type='radio' name='table-mapping-location-type' value='address' />                <span data-binding='{@text: @language-table-mapping-location-type-address}'></span>            </label>        </fieldset>        \x3c!-- Coordinate data options. --\x3e        <ol class='table-mapping coordinates' data-binding='{@visible: locationTypeIsCoordinates}'>            <li>                <label class='form-label'>                    <span data-binding='{@text: @language-table-mapping-x-axis}'></span>                    <select name='x-axis' data-binding='{@source: tableHeadings}{@var: xAxis}'>                        <option data-binding='{@template-for: tableHeadings}{@text: @context}'></option>                    </select>                </label>            </li>            <li>                <label class='form-label'>                    <span data-binding='{@text: @language-table-mapping-y-axis}'></span>                    <select name='y-axis' data-binding='{@source: tableHeadings}{@var: yAxis}'>                        <option data-binding='{@template-for: tableHeadings}{@text: @context}'></option>                    </select>                </label>            </li>            <li data-binding='{@visible: zAxisEnabled}'>                <label class='form-label'>                    <span data-binding='{@text: @language-table-mapping-z-axis}'></span>                    <select name='z-axis' data-binding='{@source: tableHeadings}{@var: zAxis}'>                        <option data-binding='{@template-for: tableHeadings}{@text: @context}'></option>                    </select>                </label>            </li>            <li>                <label class='form-label'>                    <span data-binding='{@text: @language-table-mapping-source-spatial-reference}'></span>                    <select name='source-spatial-reference' data-binding='{@source: sourceSpatialReferences}{@event-onchange: handleChangeSourceSpatialReference}{@var: sourceSpatialReference}'>                        <option data-binding='{@template-for: sourceSpatialReferences}{@text: label}'></option>                    </select>                </label>            </li>            <li data-binding='{@visible: sourceSpatialReferencesUseCustom}'>                <label for='table-mapping-source-spatial-reference-custom' data-binding='{@text: @language-table-mapping-source-spatial-reference-custom}'></label>                <input type='text' id='table-mapping-source-spatial-reference-custom' name='source-spatial-reference-custom' data-binding='{@var: sourceSpatialReferenceCustom}' />            </li>        </ol>        \x3c!-- Address data options. --\x3e        <ol class='table-mapping address' data-binding='{@visible: locationTypeIsAddress}{@source: addressFieldSelectors}'>            <li data-binding='{@template-for: addressFieldSelectors}'>                <label class='form-label' data-binding='{@text: label}'></label>                <select class='address-select' data-binding='{@source: tableHeadingOptions}'>                    <option data-binding='{@template-for: tableHeadingOptions}{@text: @context}'></option>                </select>            </li>        </ol>        \x3c!-- Checkbox that controls table headings. --\x3e        <label class='table-mapping-is-first-row-header-box'>            <input type='checkbox' name='is-first-row-header' data-binding='{@var: isFirstRowHeader}{@event-onchange: handleChangeUseFirstRowAsHeader}' checked />            <span data-binding='{@text: @language-table-mapping-is-first-row-header}'></span>        </label>        \x3c!-- Table mapping preview. --\x3e        <div class='table-mapping-preview-container'>            <table class='table-mapping-preview'>                <tbody data-binding='{@source: tablePreview}'>                    <tr data-binding='{@template-for: tablePreview}{@source: @context}'>                        <td data-binding='{@template-for: @context}{@text: @context}'></td>                    </tr>                </tbody>            </table>        </div>        \x3c!-- Validation problems. --\x3e        <ol class='validation-problems error-message' data-binding='        {@source: validationProblems}        {@visible: validationProblems}'>            <li data-binding='{@template-for: validationProblems}'>                <p data-binding='{@text: title}'></p>                <p data-binding='{@text: message}'></p>            </li>        </ol>        \x3c!-- Bottom buttons. --\x3e        <div class='form-btns'>            <button type='submit' class='button' data-binding='{@text: @language-table-mapping-dialog-proceed}{@event-onclick: handleProceed}'></button>            <button class='button' data-binding='{@text: @language-table-mapping-dialog-cancel}{@event-onclick: handleCancel}'></button>        </div>    </form>  </div>",o="<div class='upload-data table-record-results-dialog'>    \x3c!-- Table Record results. --\x3e    <div class='table-record-result'>        <span class='table-record-result-details'>            <img src='Resources/Images/Icons/Toolbar/alert-24.png' data-binding='{alt: @language-symbol-dialog-alert}' />            <span data-binding='{@text: rejectedRecordsMessage}'></span>        </span>        <span class='table-record-result-details'>            <img src='Resources/Images/Icons/Toolbar/check-24.png' data-binding='{alt: @language-symbol-dialog-check}' />            <span data-binding='{@text: acceptedRecordsMessage}'></span>        </span>        <p class='table-record-result-download'><a download data-binding='{@visible: rejectedRecordsUrl}{href: rejectedRecordsUrl}{@text: @language-table-record-results-dialog-rejected-records-link}'></a></p>    </div>    \x3c!-- Bottom buttons. --\x3e    <div class='form-btns'>        <button class='button' data-binding='{@text: @language-table-record-results-dialog-button-proceed}{@event-onclick: handleProceed}'></button>    </div></div>",n="<div class='upload-data upload-dialog' data-binding='{@class-uploader-disabled: disabled}'>    \x3c!-- Description for this dialog. --\x3e    <p class='upload-dialog-description' data-binding='{@text: @language-upload-dialog-description}'></p>    <p class='upload-dialog-supported-files'>        <strong data-binding='{@text: @language-upload-dialog-supported-files-label}'></strong>        <em data-binding='{@text: @language-upload-dialog-supported-files}'></em>    </p>    <p class='gcx-warning-message'>        <strong data-binding='{@text: @language-common-note}'></strong>        <span data-binding='{@text: @language-upload-dialog-warning}'></span>    </p>    \x3c!-- Uploader widget. --\x3e    <div data-binding='{@widget: Uploader}{@widget-replace: true}'></div>    \x3c!-- Validation problems. --\x3e    <ol class='validation-problems error-message' data-binding='        {@source: validationProblems}        {@visible: validationProblems}'>        <li data-binding='{@template-for: validationProblems}'>            <p data-binding='{@text: title}'></p>            <p data-binding='{@text: message}'></p>        </li>    </ol></div>",r="<div class='uploader' data-binding='{@class-uploader-disabled: disabled}'>    \x3c!-- Upload form. --\x3e    <form action='javascript:void(0)' data-binding='{@var: form}{@event-onchange: handleChange}{@event-onsubmit: handleSubmit}'>        \x3c!-- Modern implementation of file input that allows multiple files to be selected at once. --\x3e        <input type='file' name='files' title='files' multiple data-binding='{@var: input}{disabled: disabled}{aria-label: @language-uploader-view-label}' />        \x3c!-- List of selected files. --\x3e        <ol class='selected-file-list' data-binding='{@var: selectedFileList}{@visible: selectedFiles}{@source: selectedFiles}'>            <li data-binding='{@template-for: selectedFiles}{@class-flagged: flag}'>                <div class='selected-file-box'>                    <span class='selected-file-name' data-binding='{@text: name}'></span>                    <span class='selected-file-size' data-binding='{@visible: size}{@text: size}'></span>                </div>                \x3c!-- Validation flag about the specific file. --\x3e                <div class='file-flag error-message' data-binding='{@visible: flag}{@text: flag}'></div>            </li>        </ol>        \x3c!-- Legacy file input implementation. --\x3e        <div class='uploader-legacy-input-box' data-binding='{@var: legacyInputBox}'>            <ol data-binding='{@source: legacyInputs}'>                <li data-binding='{@template-for: legacyInputs}'>                    <input type='file' name='files' data-binding='{disabled: disabled}' />                    <button class='uploader-legacy-remove-button' data-binding='{@event-onclick: handleLegacyRemoveInput}'></button>                    <button class='uploader-legacy-add-button' data-binding='{@event-onclick: handleLegacyAddInput}'></button>                    \x3c!-- Validation flag about the specific file. --\x3e                    <div class='file-flag' data-binding='{@visible: flag}{@text: flag}'></div>                </li>            </ol>        </div>        <div class='form-btns'>            <button type ='submit' class='button' data-binding='{@event-onclick: handleProceed}{@text: @language-upload-dialog-button-proceed}'></button>            <button class='button' data-binding='{@event-onclick: handleCancel}{@text: @language-upload-dialog-button-cancel}'></button>        </div>    </form>    \x3c!-- Upload progress bar. --\x3e    <progress max='100' value='0' data-binding='{@visible: progress}{value: progress}'></progress></div>";require({cache:{"Mapping/modules/UploadData/Dialog":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","geocortex/framework/ui/ViewBase"],function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return e(a,t),a.prototype.attach=function(e){var a=this;t.prototype.attach.call(this,e),this.viewContainerViewClosedEventToken||(this.viewContainerViewClosedEventToken=this.app.event("ViewContainerViewClosedEvent").subscribe(this,function(e){e&&e.viewId===a.id&&a.handleCancel()}))},a.prototype.destroy=function(){t.prototype.destroy.call(this),this.viewContainerViewClosedEventToken&&(this.app.event("ViewContainerViewClosedEvent").unsubscribe(this.viewContainerViewClosedEventToken),this.viewContainerViewClosedEventToken=null)},a.prototype.handleCancel=function(){this.close(),this.viewModel.processActions&&this.viewModel.processActions.cancel&&this.viewModel.processActions.cancel()},a.prototype.close=function(){this.app.viewManager.deactivateView(this)},a}(i.ViewBase);a.DialogViewBase=o})},"Mapping/modules/UploadData/RestInterfaces":function(){define(["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})},"Mapping/modules/UploadData/UploadDataModule":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","geocortex/framework/application/ModuleBase","geocortex/framework/observables","geocortex/infrastructure/PortalUtils","geocortex/infrastructure/commandArgs/AddStatusArgs","geocortex/geocortex","geocortex/essentials/LayerStyle","geocortex/essentials/KmlService","geocortex/infrastructure/GeometryUtils","geocortex/infrastructure/LayerIntegrationUtils","geocortex/essentials/Site"],function(t,a,i,o,n,r,s,l,d,c,p,u){"use strict";function g(e){return e.reduce(function(e,t){return e.concat(t)})}function b(e,t){return t.some(function(t){return new RegExp("(?:^|\\b|_)"+t+"(?:$|\\b|_)","i").test(e)})}Object.defineProperty(a,"__esModule",{value:!0});var m=[".shp",".shx",".dbf"];a.SERVICE_TYPE_FEATURE="Feature Service",a.SERVICE_TYPE_KML="KML",a.ERROR_CANCELLED="UploadDataError/Cancelled",a.ERROR_CANCELLED_MESSAGE="Upload data process was cancelled.",a.ERROR_MUST_SIGN_IN_TO_PUBLISH_GEODATABASE="UploadDataError/MustSignInToPublishGeodatabase",a.ERROR_NOT_AUTHORIZED_TO_PUBLISH_GEODATABASE="UploadDataError/NotAuthorizedToPublishGeodatabase",a.ERROR_COULD_NOT_PARSE_XSLX="UploadDataError/CouldNotParseXLSX";var h=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e._processInProgress=new o.Observable(!1),e._layerNamePlaceholderCounter=0,e}return e(i,t),i.prototype.initialize=function(e){e.checkJobStatusPeriod=e.checkJobStatusPeriod||4e3,e.warnOnFeatureCount=e.warnOnFeatureCount||1e4,e.heatMap=e.heatMap||{enabled:!1,userCanToggle:!0,respectScaleRange:!0,gradient:[[255,255,255,0],[0,0,255,98],[255,0,0,139],[255,255,0,181]],offset:[0,.5,.75,1],intensity:25,includeInLegend:!0},e.cluster=e.cluster||{enabled:!1,userCanToggle:!0,radius:25,maximumFeatures:1e3,backgroundColor:[0,0,255],labelColor:[255,255,255]},this.configuration=e,this.app.command("UploadData").register(this,this._executeUploadData,this._canExecuteUploadData)},i.prototype._canExecuteUploadData=function(){return!this.app.isOffline.get()&&!this._processInProgress.get()},i.prototype._executeUploadData=function(){var e=this;{if(!/iPhone|iPad|iPod|GeocortexApp\.iOS/.test(navigator.userAgent)||window.MSBlobBuilder){if(this._processInProgress.get()){var t=new Error("You cannot start an upload data process while one is already in progress.");return t.name="UploadDataError/AlreadyInProgress",this._handleError(t)}return this._processInProgress.set(!0),Promise.resolve({uploadResponse:void 0,tableMapping:void 0,layerDetailsResults:void 0,mainResponse:void 0,mapServices:void 0,symbols:void 0}).then(function(t){return e._promptUploadDialog(t)}).then(function(t){return e._promptTableMappingDialog(t)}).then(function(t){return e._promptLayerDetailsDialog(t)}).then(function(t){return e._confirmBeforePublish(t)}).then(function(t){return e._sendRequest(t)}).then(function(t){return e._handleMainResponse(t)}).then(function(t){return e._displayTableRecordResults(t)}).then(function(t){return e._promptSymbolDialog(t)}).then(function(t){return e._symbolize(t)}).then(function(t){return e._autoDetectFeatureLabels(t)}).then(function(t){return e._attachDefaultVisualizations(t)}).then(function(t){return e._addMapServicesToMap(t)}).then(function(t){return e._handleCompletion(t)}).catch(function(t){return e._handleError(t)})}this.app.command("Alert").execute(this.getResource("language-upload-data-ios-warning-message"),this.getResource("language-upload-data-ios-warning"))}},i.prototype._promptUploadDialog=function(e){var t=this,a=this.app.viewManager.getViewById("UploadDialogView");return this.app.viewManager.activateView(a),a.reset(),a.viewModel.prompt().then(function(i){return e.uploadResponse=i,t.app.viewManager.deactivateView(a),e}).catch(function(e){return t.app.viewManager.deactivateView(a),Promise.reject(e)})},i.prototype._promptTableMappingDialog=function(e){var t=this,i=e.uploadResponse,o=e.uploadResponse.fileItems[0].fileType,n=i.fileItems.length&&i.fileItems[0].tablePreviews&&i.fileItems[0].tablePreviews.length?i.fileItems[0].tablePreviews[0]:null;if(n){var r=this.app.viewManager.getViewById("TableMappingDialogView");if(!n[0].length&&"xlsx"===o){var s=new Error("Each worksheet in the file must contain rows of data");return s.name=a.ERROR_COULD_NOT_PARSE_XSLX,Promise.reject(s)}this.app.viewManager.activateView(r);var l=r.viewModel.prompt(n).then(function(a){return e.tableMapping=a,t.app.viewManager.deactivateView(r),e}).catch(function(e){return t.app.viewManager.deactivateView(r),Promise.reject(e)});return r.reset(),l}return e.tableMapping=!1,Promise.resolve(e)},i.prototype._promptLayerDetailsDialog=function(e){var t=this,i=e.uploadResponse.fileItems[0].fileType;if("fileGeodatabase"===i){if(!n.hasAccessToPortal(this.app))return(o=new Error("Geodatabase must be published, but the user is not signed into ArcGIS Online.")).name=a.ERROR_MUST_SIGN_IN_TO_PUBLISH_GEODATABASE,Promise.reject(o);if(!n.hasPublishFeaturePrivilege(this.app)){var o=new Error("Geodatabase must be published, but the user does not have sufficient privileges to publish layers to ArcGIS Online.");return o.name=a.ERROR_NOT_AUTHORIZED_TO_PUBLISH_GEODATABASE,Promise.reject(o)}}var r=this.app.viewManager.getViewById("LayerDetailsDialogView");this.app.viewManager.activateView(r);var s=e.layerDetailsResults?e.layerDetailsResults.details.layerName:e.uploadResponse.fileItems[0].fileName;return r.reset(s),"shapefile"===i&&"application/zip"!==e.uploadResponse.fileItems[0].contentType&&(function(){for(var t=0,a=m;t<a.length;t++){var i=a[t];if(!e.uploadResponse.fileItems.some(function(e){return e.fileName.endsWith(i)}))return!1}return!0}()||r.viewModel.publishDisabledMessage.set(this.getResource("language-layer-details-publish-disabled-shapefile"))),r.viewModel.prompt(i).then(function(a){return e.layerDetailsResults=a,t.app.viewManager.deactivateView(r),e}).catch(function(e){return t.app.viewManager.deactivateView(r),Promise.reject(e)})},i.prototype._promptSymbolDialog=function(e){var t=this,a=this.app.viewManager.getViewById("SymbolDialogView");this.app.viewManager.activateView(a);var i=a.symbologySettingsWidget.viewModel;return i.isPoint.set(e.mapServices.some(function(e){return"esriGeometryPoint"===e.serviceLayer.geometryType})),i.isPolygon.set(e.mapServices.some(function(e){return"esriGeometryPolygon"===e.serviceLayer.geometryType})),i.isLine.set(e.mapServices.some(function(e){return"esriGeometryPolyline"===e.serviceLayer.geometryType})),a.reset(),a.viewModel.prompt().then(function(t){return e.symbols=t,e}).catch(function(e){return t.app.viewManager.deactivateView(a),Promise.reject(e)})},i.prototype._confirmBeforePublish=function(e){var t=this;return e.layerDetailsResults.publish?new Promise(function(a,i){var o=t.getResource("language-upload-data-confirm-before-publish"),n=t.getResource("language-upload-data-confirm-before-publish-message");t.app.command("Confirm").execute(n,o,function(i){i?a(e):(e.layerDetailsResults.publish=!1,a(t._promptLayerDetailsDialog(e).then(function(e){return t._confirmBeforePublish(e)})))})}):Promise.resolve(e)},i.prototype._sendRequest=function(e){var t=this,i=e.uploadResponse,o=e.tableMapping,n=e.layerDetailsResults,l=n.details,d=n.publish,c="WaitForUploadDataMainResponse",p=new r.AddStatusArgs(this.getResource("language-upload-data-wait-for-main-response"));p.id=c,p.showBusyIcon=!0,p.timeoutMS=0,this.app.command("AddStatus").execute(p);var u=this.app.site.url+(d?"/publish":"/generate"),g="json",b=i.fileItems.map(function(e){return e.fileId}),m=i.fileItems[0].fileType,h={layerName:l.layerName,targetSR:this.app.site.essentialsMap.spatialReference};[o,l].forEach(function(e){if(e)for(var t=0,a=Object.keys(e);t<a.length;t++){var i=a[t];h[i]=e[i]}});var f=d?{f:g,title:l.layerName,tags:"",fileIds:b,fileType:m,featureParameters:h}:{f:g,fileIds:b,fileType:m,featureParameters:h},v=s.encodeJson(f);return new Promise(function(i,o){s.request({url:u,content:v},{usePost:!0}).then(function(a){t.app.command("RemoveStatus").execute(c),e.mainResponse=a,i(e)},function(n){t.app.command("RemoveStatus").execute(c);var r;if(r=n.message.match(/409 - Item '(.*)' already exists\./))if("fileGeodatabase"==e.uploadResponse.fileItems[0].fileType){t.app.command("Alert").execute(t.getResource("language-upload-data-error-publish-geodatabase-name-taken-message").format(r[1]),t.getResource("language-upload-data-error-publish-name-taken"));var s=new Error(a.ERROR_CANCELLED_MESSAGE);s.name=a.ERROR_CANCELLED,o(s)}else t.app.command("Confirm").execute(t.getResource("language-upload-data-error-publish-name-taken-message").format(r[1]),t.getResource("language-upload-data-error-publish-name-taken"),function(n){if(n)e.layerDetailsResults.publish=!1,i(t._sendRequest(e));else{var r=new Error(a.ERROR_CANCELLED_MESSAGE);r.name=a.ERROR_CANCELLED,o(r)}});else o(n)})})},i.prototype._handleMainResponse=function(e){var t=e.mainResponse,a=function(e,t){return t.mapServices=e,t},i=e.layerDetailsResults.details.layerName;if(t.featureCollection)return this._acceptGenerateResponse(t,i).then(function(t){return a(t,e)});if(t.services){if(/^https/i.test(window.location.protocol)){var o=/^http:/;t.services.map(function(e){return e.serviceUrl=e.serviceUrl.replace(o,"https:"),e.jobStatusUrl=e.jobStatusUrl.replace(o,"https:"),e})}return this._acceptPublishResponse(t,i).then(function(t){return a(t,e)})}if(t.error){var n=new Error(t.error.message);throw n.name=t.error.name,n}throw new Error("Invalid response.")},i.prototype._symbolize=function(e){for(var t=0,a=e.mapServices;t<a.length;t++){var i=a[t].serviceLayer;"esriGeometryPoint"===i.geometryType?i.setRenderer(new esri.renderer.SimpleRenderer(e.symbols.marker)):"esriGeometryPolyline"===i.geometryType?i.setRenderer(new esri.renderer.SimpleRenderer(e.symbols.line)):"esriGeometryPolygon"===i.geometryType&&i.setRenderer(new esri.renderer.SimpleRenderer(e.symbols.fill))}return Promise.resolve(e)},i.prototype._autoDetectFeatureLabels=function(e){var t=e.mapServices,a=this.app.viewManager.getViewById("TableMappingDialogView").viewModel.configuration;if(a.autoDetectionTerms&&a.autoDetectionTerms.featureLabel)for(var i=0,o=t;i<o.length;i++)for(var n=o[i],r=0,s=n.layers;r<s.length;r++){var l=s[r];if(!l.displayField){var d=function(e,t){for(var a=0,i=e;a<i.length;a++){var o=i[a];if(b(o.name,t))return o}return null}(l.fields,a.autoDetectionTerms.featureLabel);d&&(l.displayField=d,n.serviceLayer instanceof esri.layers.FeatureLayer&&(n.serviceLayer.displayField=d.name))}}return Promise.resolve(e)},i.prototype._attachDefaultVisualizations=function(e){for(var t=0,a=e.mapServices;t<a.length;t++){var i=a[t];if(i.serviceLayer instanceof esri.layers.FeatureLayer){"esriGeometryPoint"===i.serviceLayer.geometryType&&(i.heatMap=this.configuration.heatMap,i.featureClustering=this.configuration.cluster);var o=JSON.stringify(i.serviceLayer.renderer.toJson());i.layers[0].allowSymbolization=!0,i.layers[0].styles.push(new l.LayerStyle(o,"__CUSTOM__","__CUSTOM__",!0))}}return Promise.resolve(e)},i.prototype._displayTableRecordResults=function(e){var t=e.mainResponse.recordResults;if(t&&e.tableMapping){var a=this.app.viewManager.getViewById("TableRecordResultsDialogView");return this.app.viewManager.activateView(a),a.viewModel.prompt(t).then(function(){return e})}return Promise.resolve(e)},i.prototype._handleCompletion=function(e){var t=this;this._processInProgress.set(!1);for(var a=[],i=0,o=e.mapServices;i<o.length;i++){var n=o[i];n instanceof d.KmlService?a.push.apply(a,n.serviceLayer.getLayers()):a.push.apply(a,n.layers)}for(var r=[],s=0,l=a;s<l.length;s++){var p=l[s];p.fullExtent&&c.isValidGeometry(p.fullExtent)&&r.push(p.fullExtent)}return c.unionGeometries(r,this.app).then(function(a){return t.app.command("ZoomToExtent").execute(a),t.app.event("UploadDataCompletedEvent").publish(e),e})},i.prototype._handleError=function(e){return this._processInProgress.set(!1),e.name===a.ERROR_CANCELLED||(e.name===a.ERROR_MUST_SIGN_IN_TO_PUBLISH_GEODATABASE?this.app.command("Alert").execute(this.getResource("language-upload-data-error-must-be-signed-in-to-publish-geodatabase-message"),this.getResource("language-upload-data-error-must-be-signed-in-to-publish-geodatabase")):e.name===a.ERROR_COULD_NOT_PARSE_XSLX?this.app.command("Alert").execute(this.getResource("language-upload-data-error-unable-to-parse-excel-file-message"),this.getResource("language-upload-data-error-unable-to-parse-excel-file")):e.name===a.ERROR_NOT_AUTHORIZED_TO_PUBLISH_GEODATABASE?this.app.command("Alert").execute(this.getResource("language-upload-data-error-unauthorized-to-publish-message"),this.getResource("language-upload-data-error-unauthorized-to-publish")):"UploaderError/500"===e.name&&/Unable to upload file\: Invalid zip file\./.test(e.message)?this.app.command("Alert").execute(this.getResource("language-upload-data-error-invalid-zip-message"),this.getResource("language-upload-data-error-invalid-zip")):"UploaderError/500"===e.name&&/Unable to upload file\: Wrong Local header signature\:/.test(e.message)?this.app.command("Alert").execute(this.getResource("language-upload-data-error-invalid-zip-other-message"),this.getResource("language-upload-data-error-invalid-zip")):/Projection .+ is not supported/.test(e.message)?this.app.command("Alert").execute(this.getResource("language-upload-data-error-projection-not-supported-message"),this.getResource("language-upload-data-error-projection-not-supported")):/406 - Error while analyzing Shapefile/.test(e.message)?this.app.command("Alert").execute(this.getResource("language-upload-data-error-invalid-shapefile-message"),this.getResource("language-upload-data-error-invalid-shapefile")):/499 - Token required/.test(e.message)?this.app.command("Alert").execute(this.getResource("language-upload-data-error-geocoding-unauthenticated-message"),this.getResource("language-upload-data-error-geocoding-unauthenticated")):/The provided file was empty/.test(e.message)?this.app.command("Alert").execute(this.getResource("language-upload-data-error-empty-file-message"),this.getResource("language-upload-data-error-empty-file")):(this.app.trace.error(e.message,e),this.app.command("Alert").execute(this.getResource("language-upload-data-error-message"),this.getResource("language-upload-data-error")))),this.app.event("UploadDataFailedEvent").publish(e),Promise.reject(e)},i.prototype._acceptGenerateResponse=function(e,t){for(var i=this,o=0,n=0,r=e.featureCollection.layers;n<r.length;n++){var s=r[n];s.layerDefinition.name||(s.layerDefinition.name=t+" "+ ++this._layerNamePlaceholderCounter),s.layerDefinition.visibilityField&&(s.layerDefinition.visibilityField=null),s.featureSet&&s.featureSet.features&&(o+=s.featureSet.features.length)}var l=function(){var t=e.featureCollection.layers.map(function(e){return p.buildLocalFeatureLayerService(e)});return Promise.all(t)};return o>=this.configuration.warnOnFeatureCount?new Promise(function(e,t){var n=i.getResource("language-upload-data-confirm-add-layer"),r=i.getResource("language-upload-data-confirm-add-layer-message").format(o);i.app.command("Confirm").execute(r,n,function(i){if(i)return e(l());var o=new Error(a.ERROR_CANCELLED_MESSAGE);o.name=a.ERROR_CANCELLED,t(o)})}):l()},i.prototype._acceptPublishResponse=function(e,t){var a=this,i=new r.AddStatusArgs(this.getResource("language-upload-data-wait-on-publish-job"));return i.id="WaitOnPublishJob",i.showBusyIcon=!0,i.timeoutMS=0,this.app.command("AddStatus").execute(i),Promise.map(e.services,function(e){return a._waitOnJob(e).then(function(e){return a.app.command("RemoveStatus").execute("WaitOnPublishJob"),e}).then(function(e){return a._buildService(e,t)})}).then(function(e){return g(e)})},i.prototype._waitOnJob=function(e){var t=this;return new Promise(function(i,o){if(e.type===a.SERVICE_TYPE_FEATURE){if(!/^https/i.test(e.jobStatusUrl))return o(new Error("Job URL must be HTTPS."));var n={f:"json",token:t.app.site.getTokenFromPrincipal(e.jobStatusUrl,esri.IdentityManagerBase)||t.app.site.getTokenFromPrincipal(e.jobStatusUrl,u.Site),jobId:e.jobId};esri.request({url:e.jobStatusUrl,content:n,handleAs:"json"}).then(function(a){"completed"===a.status?i(e):"processing"===a.status?setTimeout(function(){i(t._waitOnJob(e))},t.configuration.checkJobStatusPeriod):o(new Error("Publish job check failed."))},o)}else i(e)})},i.prototype._buildService=function(e,t){if(e.type===a.SERVICE_TYPE_FEATURE)return p.discoverFeatureServices(e.serviceUrl).then(function(e){return Promise.all(e.map(p.buildFeatureLayerService))});if(e.type===a.SERVICE_TYPE_KML){var i=t+" "+ ++this._layerNamePlaceholderCounter;return p.buildKmlService(e.serviceUrl,{displayName:i}).then(function(e){return[e]})}throw new TypeError("Given service type '"+e.type+"' unsupported.")},i.prototype._addMapServicesToMap=function(e){for(var t=0,a=e.mapServices;t<a.length;t++){var i=a[t];this.app.command("AddMapService").execute(i)}return Promise.resolve(e)},i}(i.ModuleBase);a.UploadDataModule=h,a.flatten=g,a.checkStringForTerms=b})},"Mapping/modules/UploadData/Dialogs/LayerDetailsDialogView":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","./../Dialog"],function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=/[^a-z0-9_]/gi,n=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return e(a,t),a.prototype.attach=function(e){t.prototype.attach.call(this,e),$(this.form).change(this.validate.bind(this))},a.prototype.reset=function(e){void 0===e&&(e=""),e=e.replace(/\.[^\.]+$/,""),this.layerName.value=e.replace(o,""),this.publish.checked=!1,this.viewModel.publishDisabledMessage.set("")},a.prototype.validator=function(){var e=[];return this.layerName.value.trim()||e.push({title:this.getResource("language-layer-details-validation-error-name-cannot-be-empty"),message:this.getResource("language-layer-details-validation-error-name-cannot-be-empty-message")}),this.publish.checked&&this.layerName.value.match(o)&&e.push({title:this.getResource("language-layer-details-validation-error-invalid-publish-name"),message:this.getResource("language-layer-details-validation-error-invalid-publish-name-message")}),"fileGeodatabase"!==this.viewModel.fileType.get()||this.publish.checked||e.push({title:this.getResource("language-layer-details-validation-error-filegeodatabase-must-be-published"),message:this.getResource("language-layer-details-validation-error-filegeodatabase-must-be-published-message")}),e},a.prototype.validate=function(){this.viewModel.validationProblems.set(this.validator())},a.prototype.handleProceed=function(){this.validate(),this.viewModel.validationProblems.getLength()>=1?this.app.command("Alert").execute(this.getResource("language-upload-data-cannot-proceed-when-invalid-message"),this.getResource("language-upload-data-cannot-proceed-when-invalid")):(this.close(),this.viewModel.processActions.proceed({details:{layerName:this.layerName.value},publish:this.viewModel.signedIn.get()&&this.publish.checked}))},a}(i.DialogViewBase);a.LayerDetailsDialogView=n})},"Mapping/modules/UploadData/Dialogs/LayerDetailsDialogViewModel":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","geocortex/infrastructure/PortalUtils","./../UploadDataModule"],function(t,a,i,o,n,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.ERROR_CANCELLED_LOCAL="UploadDataError/Cancelled",a.ERROR_CANCELLED_MESSAGE_LOCAL="Upload data process was cancelled.";var s=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.signedIn=new o.Observable(!1),e.fileType=new o.Observable(void 0),e.publishIsAvailable=new o.Observable(!1),e.publishDisabledMessage=new o.Observable,e.validationProblems=new o.ObservableCollection,e}return e(a,t),a.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.configuration=e},a.prototype.prompt=function(e){var t=this;return this.fileType.set(e),this.signedIn.set(n.hasAccessToPortal(this.app)),this.publishIsAvailable.set(this.signedIn.get()&&"gpx"!==e&&n.hasPublishFeaturePrivilege(this.app)),new Promise(function(e,a){t.processActions={proceed:function(t){return e(t)},error:function(e){return a(e)},cancel:function(){var e=new Error(r.ERROR_CANCELLED_MESSAGE);e.name=r.ERROR_CANCELLED,a(e)}}})},a}(i.ViewModelBase);a.LayerDetailsDialogViewModel=s})},"Mapping/modules/UploadData/Dialogs/SymbolDialogView":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","./../Dialog"],function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return e(a,t),a.prototype.reset=function(){this.symbologySettingsWidget.reset(),this.symbologySettingsWidget.applySettings()},a.prototype.handleProceed=function(){this.close(),this.viewModel.processActions.proceed(this.symbologySettingsWidget.viewModel.symbols)},a.prototype.handleCancel=function(){this.handleProceed()},a}(i.DialogViewBase);a.SymbolDialogView=o})},"Mapping/modules/UploadData/Dialogs/SymbolDialogViewModel":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","geocortex/framework/ui/ViewModelBase"],function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return e(a,t),a.prototype.prompt=function(){var e=this;return new Promise(function(t,a){e.processActions={proceed:function(e){return t(e)},error:function(e){return a(e)},cancel:function(){return t()}}})},a}(i.ViewModelBase);a.SymbolDialogViewModel=o})},"Mapping/modules/UploadData/Dialogs/TableMappingDialogView":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","./../Dialog","./../UploadDataModule"],function(t,a,i,o){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Z_AXIS_ENABLED=!1,a.Z_AXIS_REQUIRED=a.Z_AXIS_ENABLED&&!1;var n=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return e(i,t),i.prototype.validator=function(){var e=this,t=[];if(this.viewModel.locationTypeIsCoordinates.get()&&((![this.xAxis,this.yAxis].every(function(e){return-1!==e.selectedIndex})||a.Z_AXIS_ENABLED&&a.Z_AXIS_REQUIRED&&-1===this.zAxis.selectedIndex)&&t.push({title:this.getResource("language-table-mapping-validation-error-all-coordinates-must-be-set"),message:this.getResource("language-table-mapping-validation-error-all-coordinates-must-be-set-message")}),function(){for(var t=[e.xAxis,e.yAxis,e.zAxis],a=0,i=t;a<i.length;a++)for(var o=i[a],n=0,r=t;n<r.length;n++){var s=r[n];if(o!==s&&o.value&&o.value===s.value)return!1}return!0}()||t.push({title:this.getResource("language-table-mapping-validation-error-axes-must-be-unique"),message:this.getResource("language-table-mapping-validation-error-axes-must-be-unique-message")}),this.getSourceSpatialReference()||t.push({title:this.getResource("language-table-mapping-validation-error-source-spatial-mapping-invalid"),message:this.getResource("language-table-mapping-validation-error-source-spatial-mapping-invalid-message")})),this.viewModel.locationTypeIsAddress.get()){var i=[];this.viewModel.addressFieldSelectors.get().forEach(function(t,a){!t.required||t.value&&""!==t.value||$(e.form).find(".address select").get(a).selectedIndex>0||i.push(t)}),i.length&&t.push({title:this.getResource("language-table-mapping-validation-error-lacking-required-address-fields"),message:this.getResource("language-table-mapping-validation-error-lacking-required-address-fields-message").format(i.map(function(e){return e.label}).join(", "))})}return t},i.prototype.validate=function(){this.viewModel.validationProblems.set(this.validator())},i.prototype.attach=function(e){t.prototype.attach.call(this,e),this.reset(),$(this.form).change(this.validate.bind(this))},i.prototype.reset=function(){this.refreshLocationType(),this.viewModel.transformTablePreview(this.isFirstRowHeader.checked);var e=this.viewModel.sourceSpatialReferences.get();this.sourceSpatialReference.selectedIndex=e.findIndex(function(e){return e.preselected}),this.viewModel.sourceSpatialReferencesUseCustom.set(!1),$(this.form).find(".address select").each(function(e,t){t.selectedIndex=-1}),this.performAutoDetection(),this.validate()},i.prototype.performAutoDetection=function(){var e=this,t=this.viewModel.configuration.autoDetectionTerms,a=function(t){for(var a=e.viewModel.tableHeadings.get(),i=0;i<a.length;i++){var n=a[i];if(o.checkStringForTerms(n,t))return i}return-1};this.xAxis.selectedIndex=t&&t.xAxis?a(t.xAxis):-1,this.yAxis.selectedIndex=t&&t.yAxis?a(t.yAxis):-1,this.zAxis.selectedIndex=t&&t.zAxis?a(t.zAxis):-1,this.viewModel.addressFieldSelectors.get().forEach(function(i,o){$(e.form).find(".address li").eq(o).find("select").get(0).selectedIndex=t&&t[i.name]?a(t[i.name])+1:-1})},i.prototype.refreshLocationType=function(){var e=this.locationType.querySelector("input[type=radio]:checked").value;this.viewModel.locationTypeIsCoordinates.set("coordinates"===e),this.viewModel.locationTypeIsAddress.set("address"===e)},i.prototype.handleChangeLocationType=function(){this.refreshLocationType(),this.validate()},i.prototype.handleChangeUseFirstRowAsHeader=function(){this.reset()},i.prototype.handleChangeSourceSpatialReference=function(e,t){this.viewModel.sourceSpatialReferencesUseCustom.set(this.viewModel.sourceSpatialReferences.getAt(t.selectedIndex).custom),this.validate()},i.prototype.getSourceSpatialReference=function(){if(-1===this.sourceSpatialReference.selectedIndex)return null;var e=this.viewModel.sourceSpatialReferences.getAt(this.sourceSpatialReference.selectedIndex);if(e.spatialReference)return e.spatialReference;if(e.map)this.app.map.spatialReference;else if(e.custom){var t=this.sourceSpatialReferenceCustom.value.trim();return t?/^[0-9]+$/.test(t)?new esri.SpatialReference(parseInt(t,10)):new esri.SpatialReference(t):null}},i.prototype.handleProceed=function(){var e=this;if(this.validate(),this.viewModel.validationProblems.getLength()>=1)this.app.command("Alert").execute(this.getResource("language-upload-data-cannot-proceed-when-invalid-message"),this.getResource("language-upload-data-cannot-proceed-when-invalid"));else{var t;if(this.viewModel.locationTypeIsCoordinates.get())t={locationType:"coordinates",isFirstRowHeader:this.isFirstRowHeader.checked,x:this.xAxis.value,y:this.yAxis.value,sourceSR:this.getSourceSpatialReference()},a.Z_AXIS_ENABLED&&(t.z=this.zAxis.value);else if(this.viewModel.locationTypeIsAddress.get()){var i={};$(this.form).find(".address select").each(function(t,a){var o=e.viewModel.addressFieldSelectors.getAt(t);a.value&&(i[o.name]=a.value)}),t={locationType:"address",isFirstRowHeader:this.isFirstRowHeader.checked,addressFields:i}}else this.viewModel.processActions.error(new Error("Location type is invalid."));this.close(),this.viewModel.processActions.proceed(t)}},i}(i.DialogViewBase);a.TableMappingDialogView=n})},"Mapping/modules/UploadData/Dialogs/TableMappingDialogViewModel":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","./../UploadDataModule"],function(t,a,i,o,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasConfiguredGeocoder=new o.Observable(!1),e.tablePreview=new o.ObservableCollection,e.tableHeadings=new o.ObservableCollection,e.tableHeadingOptions=new o.ObservableCollection,e.locationTypeIsCoordinates=new o.Observable(!1),e.locationTypeIsAddress=new o.Observable(!1),e.zAxisEnabled=new o.Observable(!1),e.sourceSpatialReferences=new o.ObservableCollection,e.sourceSpatialReferencesUseCustom=new o.Observable(!1),e.addressFieldSelectors=new o.ObservableCollection,e.validationProblems=new o.ObservableCollection,e}return e(a,t),a.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.configuration=e},a.prototype.prompt=function(e){var t=this;if(this.sourceSpatialReferences.set(this.configuration.sourceSpatialReferences.map(function(e){return e.map&&(e.spatialReference=t.app.map.spatialReference,e.spatialReference.wkid&&(e.label=t.getResource("language-table-mapping-source-spatial-reference-map-format").format(t.app.map.spatialReference.wkid))),e})),this.rawTablePreview=e,this.transformTablePreview(),this.geocoder=this.app.site.getDefaultBatchGeocoder(),this.hasConfiguredGeocoder.set(this.geocoder&&this.geocoder.parameters.length>0),this.addressFieldSelectors.clear(),this.hasConfiguredGeocoder.get())for(var a=0,i=this.geocoder.parameters;a<i.length;a++){var o=i[a];this.addressFieldSelectors.addItem({name:o.name,label:o.displayName||o.name,required:o.isRequired,value:o.value,tableHeadingOptions:this.tableHeadingOptions})}return new Promise(function(e,a){t.processActions={proceed:function(t){return e(t)},error:function(e){return a(e)},cancel:function(){var e=new Error(n.ERROR_CANCELLED_MESSAGE);e.name=n.ERROR_CANCELLED,a(e)}}})},a.prototype.transformTablePreview=function(e){if(void 0===e&&(e=!0),this.tablePreview.clear(),this.rawTablePreview){if(!e){for(var t=this.rawTablePreview[0].length,a=new o.ObservableCollection,i=1;i<=t;i++)a.addItem(this.getResource("language-table-mapping-generated-column-prefix")+i);this.tablePreview.addItem(a)}for(var n=0,r=this.rawTablePreview;n<r.length;n++){var s=r[n];this.tablePreview.addItem(new o.ObservableCollection(s))}this.tableHeadings.set(this.tablePreview.getAt(0).get()),this.tableHeadingOptions.set([""].concat(this.tableHeadings.get()))}},a}(i.ViewModelBase);a.TableMappingDialogViewModel=r})},"Mapping/modules/UploadData/Dialogs/TableRecordResultsDialogView":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","./../Dialog"],function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return e(a,t),a.prototype.handleProceed=function(){this.close(),this.viewModel.processActions.proceed()},a}(i.DialogViewBase);a.TableRecordResultsDialogView=o})},"Mapping/modules/UploadData/Dialogs/TableRecordResultsDialogViewModel":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables"],function(t,a,i,o){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.rejectedRecordsMessage=new o.Observable(""),e.acceptedRecordsMessage=new o.Observable(""),e.rejectedRecordsUrl=new o.Observable(""),e}return e(a,t),a.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.configuration=e},a.prototype.prompt=function(e){var t=this;return this.rejectedRecordsMessage.set(this.getResource("language-table-record-results-dialog-rejected-records-message").format(e.rejected)),this.acceptedRecordsMessage.set(this.getResource("language-table-record-results-dialog-accepted-records-message").format(e.accepted)),this.rejectedRecordsUrl.set(e.rejectedRecordsUrl),new Promise(function(e,a){t.processActions={proceed:function(){return e()},error:function(e){return a(e)},cancel:function(){return e()}}})},a}(i.ViewModelBase);a.TableRecordResultsDialogViewModel=n})},"Mapping/modules/UploadData/Dialogs/UploadDialogView":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","./../Dialog","geocortex/framework/observables"],function(t,a,i,o){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.isBusy=new o.Observable(!1),e.validator=function(){var t=e.uploaderWidget.viewModel.selectedFiles.get(),a=[],i=["csv","xlsx","gpx","kml","zip"],o=["shp","dbf","shx","prj","cpg","sbn","sbx","shp.xml"],n=i.concat(o);t.length||a.push({title:e.getResource("language-uploader-validation-error-no-file-title"),message:e.getResource("language-uploader-validation-error-no-file-message")});var r=0;t.forEach(function(t){n.some(function(e){return t.name.toLowerCase().endsWith("."+e.toLowerCase())})||(t.flag=e.getResource("language-upload-dialog-selected-file-flag-extension-not-allowed"),r++)}),r&&a.push({title:e.getResource("language-upload-dialog-validation-error-extension-not-allowed"),message:e.getResource("language-upload-dialog-validation-error-extension-not-allowed-message")});var s=t.filter(function(e){return i.some(function(t){return e.name.endsWith("."+t)})});s.length>1&&a.push({title:e.getResource("language-upload-dialog-validation-error-too-many"),message:e.getResource("language-upload-dialog-validation-error-too-many-message").format(s.length)});var l=t.filter(function(e){return["shp"].concat(o).some(function(t){return e.name.endsWith("."+t)})}),d=l.some(function(e){return e.name.endsWith(".shp")});return l.length>0&&!d&&a.push({title:e.getResource("language-upload-dialog-validation-error-shapefile-incomplete"),message:e.getResource("language-upload-dialog-validation-error-shapefile-incomplete-message")}),a},e}return e(a,t),a.prototype.attachUploader=function(e){var t=this;this.uploaderWidget=e,this.uploaderWidget.handleProceed=function(){t.handleProceed()},this.uploaderWidget.handleCancel=function(){t.handleCancel()},this.isBusy.sync(this.uploaderWidget.viewModel.uploading),this.viewModel.disabled.sync(this.uploaderWidget.viewModel.disabled),this.uploaderWidget.viewModel.uploadRequestParameters.validator="feature",$(this.uploaderWidget.form).off("change").on("change",function(){t.validate()}),this.uploaderWidget.viewModel.onUploadSuccess=function(e){return t.viewModel.processActions.proceed(e)},this.uploaderWidget.viewModel.onUploadFailure=function(e){return t.viewModel.processActions.error(e)}},a.prototype.reset=function(){this.uploaderWidget.reset(),this.viewModel.validationProblems.clear()},a.prototype.validate=function(){this.viewModel.validationProblems.set(this.validator()),this.uploaderWidget.viewModel.selectedFiles.pulse()},a.prototype.handleProceed=function(e){this.validate(),this.viewModel.validationProblems.getLength()>=1?this.app.command("Alert").execute(this.getResource("language-upload-data-cannot-proceed-when-invalid-message"),this.getResource("language-upload-data-cannot-proceed-when-invalid")):this.uploaderWidget.viewModel.upload(this.uploaderWidget.form)},a}(i.DialogViewBase);a.UploadDialogView=n})},"Mapping/modules/UploadData/Dialogs/UploadDialogViewModel":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","./../UploadDataModule"],function(t,a,i,o,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.validationProblems=new o.ObservableCollection,e.disabled=new o.Observable(!1),e}return e(a,t),a.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.configuration=e},a.prototype.prompt=function(){var e=this;return new Promise(function(t,a){e.processActions={proceed:function(e){return t(e)},error:function(e){return a(e)},cancel:function(){var e=new Error(n.ERROR_CANCELLED_MESSAGE);e.name=n.ERROR_CANCELLED,a(e)}}})},a}(i.ViewModelBase);a.UploadDialogViewModel=r})},"Mapping/modules/UploadData/Widgets/Uploader/UploaderView":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","geocortex/framework/ui/ViewBase"],function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return e(a,t),a.prototype.added=function(e){var a=this;t.prototype.added.call(this,e),this.viewModel.legacyMode?($(this.input).add(this.selectedFileList).remove(),this.handleLegacyAddInput(),this.viewModel.selectedFiles.bind(this,function(){var e=$(a.legacyInputBox).find("input");a.viewModel.selectedFiles.get().forEach(function(t,a){e.each(function(e,a){if(a.value.endsWith(t.name)){var i=!!t.flag,o=$(a).closest("li");i?o.removeClass("flagged"):o.addClass("flagged"),o.find(".file-flag").text(i?t.flag:"")}})})})):$(this.legacyInputBox).remove(),e.attachUploader(this)},a.prototype.updateSelectedFiles=function(){var e=this;if(this.viewModel.legacyMode){var t=$(this.legacyInputBox).find("input");this.viewModel.selectedFiles.clear(),t.each(function(t,a){var i=a.value;i&&e.viewModel.selectedFiles.addItem({name:/(?:\\|\/)(.+)$/.exec(i)[1],size:null,flag:null})})}else{var a=[].slice.call(this.input.files);this.viewModel.selectedFiles.set(a.map(function(t){return{name:t.name,size:t.size>1048576?(t.size/1024/1024).toFixed(1)+" "+e.getResource("language-uploader-megabyte-abbreviation"):(t.size/1024).toFixed(0)+" "+e.getResource("language-uploader-kilobyte-abbreviation"),flag:null}}))}this.app.viewManager.notifyDimensionsChanged(this)},a.prototype.reset=function(){this.viewModel.disabled.set(!1),this.viewModel.legacyMode?(this.viewModel.legacyInputs.clear(),this.handleLegacyAddInput()):this.form.reset(),this.viewModel.selectedFiles.clear(),this.viewModel.progress.set(0)},a.prototype.handleChange=function(){this.updateSelectedFiles()},a.prototype.handleLegacyAddInput=function(){this.viewModel.legacyInputs.addItem({})},a.prototype.handleLegacyRemoveInput=function(e,t){var a=$(t).closest("li").index();this.viewModel.legacyInputs.removeAt(a),$(this.form).change()},a.prototype.handleProceed=function(e){},a.prototype.handleCancel=function(e){},a.prototype.handleSubmit=function(e){var t=this;if(e.preventDefault(),!(this.viewModel.selectedFiles.getLength()>=1)){var a=new Error("Cannot upload when there are no selected files.");throw a.name="UploaderError/NoSelectedFiles",a}return this.viewModel.upload(this.form).caught(function(e){throw t.reset(),/\/0$/.test(e.name)?t.app.command("Alert").execute(t.getResource("language-uploader-error-cors-message"),t.getResource("language-uploader-error-cors-title")):t.app.command("Alert").execute(t.getResource("language-uploader-error-unknown-message"),t.getResource("language-uploader-error-unknown-title")),e}),!1},a}(i.ViewBase);a.UploaderView=o})},"Mapping/modules/UploadData/Widgets/Uploader/UploaderViewModel":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","geocortex/essentials/utilities/UrlUtilities"],function(t,a,i,o,n){"use strict";function r(){try{var e=esri._getProxyUrl();if(e.path)return e.path}catch(e){}return null}function s(e,t){var a=new dojo._Url(e),i=window.location;return!!(a.scheme||a.host||a.port)&&((!t.nativeManager.isNative()||"https"!==a.scheme)&&a.scheme+"://"+a.host+(a.port?":"+a.port:"")!==i.protocol+"//"+i.hostname+(i.port?":"+i.port:""))}Object.defineProperty(a,"__esModule",{value:!0});var l=function(t){function a(e,a){var i=t.call(this,e,a)||this;return i.selectedFiles=new o.ObservableCollection,i.progress=new o.Observable(0),i.uploading=new o.Observable(!1),i.disabled=new o.Observable(!1),i.legacyMode=document.documentMode&&document.documentMode<=9,i.legacyInputs=new o.ObservableCollection,i.uploadEndpointUrl=null,i.uploadRequestParameters={f:"json"},i.onUploadSuccess=function(){},i.onUploadFailure=function(){},i.app.waitUntilSiteInitialized().then(function(){i.uploadEndpointUrl=n.UrlUtilities.simplify(i.app.site.url+"/../../")+"/files/upload"}),i}return e(a,t),a.prototype.upload=function(e){var t=this;return new Promise(function(a,i){t.uploading.set(!0);var o=t.uploadEndpointUrl;if(s(o,t.app)){var n=r();if(!n)throw new Error("Proxy is required but not available");o=n+"?"+o}if(t.legacyMode){var l={url:o,data:t.uploadRequestParameters,files:$(":file",e),iframe:!0,processData:!1};$.ajax(l).always(function(e,o,n){var r=JSON.parse(n.responseText);if(r.error){t.disabled.set(!1);var s=new Error(r.error.message);s.name="UploaderError/"+r.error.code,t.onUploadFailure(s),i(s)}else t.onUploadSuccess(r),a(r)})}else{var d=new FormData(e);Object.keys(t.uploadRequestParameters).forEach(function(e){d.append(e,t.uploadRequestParameters[e])}),$.ajax({url:o,data:d,type:"POST",processData:!1,contentType:!1,dataType:"json",xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&(e.upload.onprogress=function(e){var a=e.loaded/e.total,i=isNaN(a)?0:100*a;t.progress.set(i)}),e}}).done(function(e,o,n){if(e.error){t.disabled.set(!1);var r=new Error(e.error.message);r.name="UploaderError/"+e.error.code,t.onUploadFailure(r),i(r)}else t.onUploadSuccess(e),a(e)}).fail(function(e,a,o){t.disabled.set(!1);var n=new Error(o);n.name="UploaderError/"+e.status,t.onUploadFailure(n),i(n)}).always(function(){t.uploading.set(!1)})}t.disabled.set(!0)})},a}(i.ViewModelBase);a.UploaderViewModel=l})},"url:/Mapping/modules/UploadData/Dialogs/LayerDetailsDialogView.html":t,"url:/Mapping/modules/UploadData/Dialogs/SymbolDialogView.html":a,"url:/Mapping/modules/UploadData/Dialogs/TableMappingDialogView.html":i,"url:/Mapping/modules/UploadData/Dialogs/TableRecordResultsDialogView.html":o,"url:/Mapping/modules/UploadData/Dialogs/UploadDialogView.html":n,"url:/Mapping/modules/UploadData/Widgets/Uploader/UploaderView.html":r}}),require(["geocortex/framework/resourceManager"],function(e){e.resourceManager.register("Mapping","inv","Mapping/modules/UploadData/common.css","css","LyotLS1VcGxvYWQgRGF0YTogVmFsaWRhdGlvbiBQcm9ibGVtcy0tLSovDQoNCi52YWxpZGF0aW9uLXByb2JsZW1zIHsNCiAgICBsaXN0LXN0eWxlOiBub25lOw0KICAgIHBhZGRpbmc6IDAgNSU7DQogICAgbWFyZ2luOiAxZW0gMC4zNWVtIDEuNWVtIDAuNWVtOw0KICAgIGJvcmRlcjogc29saWQgMXB4ICNEODAwMEM7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0ZGQkFCQTsNCiAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtOw0KICAgIGNvbG9yOiAjNjYwMDAwOw0KfQ0KLnZhbGlkYXRpb24tcHJvYmxlbXMgbGkgew0KICAgIG1hcmdpbjogMWVtIGF1dG87DQp9DQoudmFsaWRhdGlvbi1wcm9ibGVtcyBwIHsNCiAgICBtYXJnaW46IGF1dG87DQp9DQoudmFsaWRhdGlvbi1wcm9ibGVtcyBwOmZpcnN0LWNoaWxkIHsNCiAgICBmb250LXdlaWdodDogYm9sZDsNCn0NCg0KDQovKi0tLVVwbG9hZCBEYXRhOiBVcGxvYWQgRGlhbG9nLS0tKi8NCg0KLnVwbG9hZC1kaWFsb2cgew0KICAgIHdpZHRoOiAzNjBweDsNCiAgICBtYXgtaGVpZ2h0OiA0MDBweDsNCiAgICBwYWRkaW5nOiAxZW07DQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICBtYXJnaW4tYm90dG9tOiAwLjVlbTsNCiAgICBvdmVyZmxvdzogYXV0bzsNCn0NCg0KLnVwbG9hZC1kaWFsb2ctc3VwcG9ydGVkLWZpbGVzID4gc3Ryb25nOjphZnRlciB7DQogICAgY29udGVudDogIjoiOw0KfQ0KDQoudXBsb2FkLWRpYWxvZy51cGxvYWRlci1kaXNhYmxlZCAuZm9ybS1idG5zIHsNCiAgICBvcGFjaXR5OiAwLjU7DQp9DQoNCg0KLyotLS1VcGxvYWQgRGF0YTogVGFibGUgTWFwcGluZyBEaWFsb2ctLS0qLw0KDQoudGFibGUtbWFwcGluZy1kaWFsb2cgew0KICAgIG1heC13aWR0aDogNjAwcHg7DQogICAgcGFkZGluZzogMWVtOw0KfQ0KDQoudGFibGUtbWFwcGluZyB7DQogICAgbGlzdC1zdHlsZTogbm9uZTsNCiAgICBwYWRkaW5nOiAwOw0KICAgIG1hcmdpbjogMDsNCn0NCg0KLnRhYmxlLW1hcHBpbmctZm9ybSBpbnB1dCB7DQogICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsNCn0NCg0KLnRhYmxlLW1hcHBpbmcgLmZvcm0tbGFiZWwgew0KICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBwYWRkaW5nOiAwLjNlbSAwOw0KICAgIGZsb2F0OiBub25lOw0KfQ0KDQoudGFibGUtbWFwcGluZyAuZm9ybS1sYWJlbCBzcGFuLA0KLnRhYmxlLW1hcHBpbmcuYWRkcmVzcyAuZm9ybS1sYWJlbCB7DQogICAgbWFyZ2luLWJvdHRvbTogMC4yNWVtOw0KICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCn0NCg0KLnRhYmxlLW1hcHBpbmcuYWRkcmVzcyAuZm9ybS1sYWJlbCB7DQogICAgcGFkZGluZzogMDsNCn0NCg0KLnRhYmxlLW1hcHBpbmcgLmZvcm0tbGFiZWwgc3Bhbjo6YWZ0ZXIsDQoudGFibGUtbWFwcGluZy5hZGRyZXNzIC5mb3JtLWxhYmVsOjphZnRlciB7DQogICAgY29udGVudDogIjoiOw0KfQ0KDQoudGFibGUtbWFwcGluZyBzZWxlY3QsDQoudGFibGUtbWFwcGluZyBpbnB1dCB7DQogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICAgIHdpZHRoOiAxMDAlOw0KfQ0KDQoudGFibGUtbWFwcGluZy1sb2NhdGlvbi10eXBlLWJveCB7DQogICAgcGFkZGluZzogMDsNCiAgICBib3JkZXItcmFkaXVzOiAwOw0KICAgIG1hcmdpbi1ib3R0b206IDAuNWVtOw0KfQ0KDQoudGFibGUtbWFwcGluZy1sb2NhdGlvbi10eXBlLWJveCBzcGFuIHsNCiAgICBtYXJnaW4tcmlnaHQ6IDJlbTsNCiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOw0KfQ0KDQoudGFibGUtbWFwcGluZy1pcy1maXJzdC1yb3ctaGVhZGVyLWJveCB7DQogICAgbWFyZ2luOiAwLjc1ZW0gMCAwLjVlbSAwOw0KICAgIGRpc3BsYXk6IGJsb2NrOw0KfQ0KDQoudGFibGUtbWFwcGluZy1wcmV2aWV3LWNvbnRhaW5lciB7DQogICAgb3ZlcmZsb3c6IGF1dG87DQogICAgYm94LXNoYWRvdzogDQogICAgICAgIGluc2V0IC04cHggMCAwIC03cHggI0NDQ0NDQywgDQogICAgICAgIGluc2V0IDhweCAwIDAgLTdweCAjQ0NDQ0NDOw0KfQ0KDQoudGFibGUtbWFwcGluZy1wcmV2aWV3IHsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOw0KfQ0KDQoudGFibGUtbWFwcGluZy1wcmV2aWV3IHRyOmZpcnN0LW9mLXR5cGUgew0KICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KDQoudGFibGUtbWFwcGluZy1wcmV2aWV3IHRyOmZpcnN0LW9mLXR5cGUgdGQgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNDQ0NDQ0M7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIGJvcmRlci1yaWdodDogc29saWQgMXB4IHdoaXRlOw0KfQ0KDQoudGFibGUtbWFwcGluZy1wcmV2aWV3IHRyOmZpcnN0LW9mLXR5cGUgdGQ6bGFzdC1vZi10eXBlIHsNCiAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjQ0NDQ0NDOw0KfQ0KDQoudGFibGUtbWFwcGluZy1wcmV2aWV3IHRkIHsNCiAgICBwYWRkaW5nOiAwLjI1ZW0gMC41ZW07DQogICAgdGV4dC1hbGlnbjogbGVmdDsNCiAgICBtaW4td2lkdGg6IDZlbTsNCiAgICBib3JkZXI6IHNvbGlkIDFweCAjQ0NDQ0NDOw0KfQ0KDQoudGFibGUtbWFwcGluZy5hZGRyZXNzIGxpIHsNCiAgICBwYWRkaW5nOiAwLjNlbSAwOw0KfQ0KDQovKi0tLVVwbG9hZCBEYXRhOiBMYXllciBEZXRhaWxzIERpYWxvZy0tLSovDQoNCi5sYXllci1kZXRhaWxzLWRpYWxvZyB7DQogICAgcGFkZGluZzogMWVtOw0KICAgIG1heC13aWR0aDogNDgwcHg7DQp9DQoNCi5sYXllci1kZXRhaWxzLWRpYWxvZyAuZm9ybS1maWVsZHMgbGFiZWwgew0KICAgIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50Ow0KICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgIC1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICBmbG9hdDogbGVmdDsNCiAgICB3aWR0aDogMjUlOw0KICAgIHBhZGRpbmctdG9wOiAuM2VtOw0KICAgIGZvbnQtc2l6ZTogMWVtOw0KfQ0KDQoubGF5ZXItZGV0YWlscy1kaWFsb2cgLmZvcm0tZmllbGRzIGxhYmVsOjphZnRlciB7DQogICAgY29udGVudDogIjoiOw0KfQ0KDQoubGF5ZXItZGV0YWlscy1kaWFsb2cgLmZvcm0tZmllbGRzIGlucHV0IHsNCiAgICB3aWR0aDogNzUlOw0KfQ0KDQoubGF5ZXItZGV0YWlscy1kaWFsb2cgLnB1Ymxpc2gtY2hlY2tib3gtY29udGFpbmVyIHsNCiAgICBtYXJnaW46IDFlbSBhdXRvOw0KICAgIG1hcmdpbi1ib3R0b206IDJlbTsNCn0NCg0KLnB1Ymxpc2gtY2hlY2tib3gtbGFiZWwgew0KICAgIG1hcmdpbi1sZWZ0OiAwLjI1ZW07DQp9DQoNCi5wdWJsaXNoLWNoZWNrYm94LA0KLnB1Ymxpc2gtY2hlY2tib3gtbGFiZWwgew0KICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7DQp9DQoNCi5wdWJsaXNoLWluZm8gew0KICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgbWFyZ2luLXRvcDogMC4yNWVtOw0KfQ0KDQovKi0tLVVwbG9hZCBEYXRhOiBUYWJsZSBSZWNvcmQgUmVzdWx0cyBEaWFsb2ctLS0qLw0KDQoudGFibGUtcmVjb3JkLXJlc3VsdHMtZGlhbG9nIHsNCiAgICBwYWRkaW5nOiAxZW07DQp9DQoNCi50YWJsZS1yZWNvcmQtcmVzdWx0LWRldGFpbHMgew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIG1hcmdpbi1ib3R0b206IDFlbTsNCn0NCg0KLnRhYmxlLXJlY29yZC1yZXN1bHQtZGV0YWlscyBpbWcgew0KICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7DQogICAgbWFyZ2luLXJpZ2h0OiAwLjNlbTsNCn0NCg0KLnRhYmxlLXJlY29yZC1yZXN1bHQtZGV0YWlscyBzcGFuIHsNCiAgICBkaXNwbGF5OiBpbmxpbmU7DQogICAgd2lkdGg6IDgwJTsNCiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOw0KfQ0KDQoudGFibGUtcmVjb3JkLXJlc3VsdC1kb3dubG9hZCB7DQogICAgbWFyZ2luOiAxLjE1ZW0gMCAwLjNlbSAwOw0KfQ0KDQoNCi8qLS0tVXBsb2FkIERhdGE6IFN5bWJvbCBEaWFsb2ctLS0qLw0KDQouc3ltYm9sLWRpYWxvZyB7DQogICAgcGFkZGluZzogMWVtOw0KfQ0KDQoudXBsb2FkLWRhdGEgLmltYWdlLWNvbnRhaW5lciB7DQogICAgaGVpZ2h0OiAxNmVtOw0KICAgIG1heC13aWR0aDogMzJlbTsNCn0="),e.resourceManager.register("Mapping","inv","Mapping/modules/UploadData/Widgets/Uploader/common.css","css","DQovKi0tLSBVcGxvYWRlciB3aWRnZXQgLS0tKi8NCg0KLnVwbG9hZGVyLWRpc2FibGVkIGZvcm0gew0KICAgIG9wYWNpdHk6IDAuNTsNCn0NCg0KLnVwbG9hZGVyIGlucHV0IHsNCiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjY2NjOw0KICAgIGJvcmRlci1yYWRpdXM6IDAuMjVyZW07DQogICAgd2lkdGg6IDEwMCU7DQogICAgYmFja2dyb3VuZDogbm9uZTsNCn0NCg0KLnVwbG9hZGVyIGlucHV0W3R5cGU9ImNoZWNrYm94Il0sDQoudXBsb2FkZXIgaW5wdXRbdHlwZT0icmFkaW8iXSB7DQogICAgd2lkdGg6IGF1dG87DQogICAgdmVydGljYWwtYWxpZ246IGJvdHRvbTsNCiAgICBtYXJnaW4tcmlnaHQ6IDAuNWVtOw0KfQ0KDQoudXBsb2FkZXIgLnNlbGVjdGVkLWZpbGUtbGlzdCB7DQogICAgYmFja2dyb3VuZDogI2VmZWZlZjsNCiAgICBwYWRkaW5nOiAwLjVlbTsNCiAgICBib3JkZXItcmFkaXVzOiAwLjI1ZW07DQp9DQoNCi51cGxvYWRlciAuc2VsZWN0ZWQtZmlsZS1saXN0IGxpIHsNCiAgICB3aWR0aDogOTAlOw0KICAgIGxpc3Qtc3R5bGU6IG5vbmU7DQogICAgbWFyZ2luOiAwLjVlbSAwIDAgMDsNCiAgICBwYWRkaW5nOiAwLjVlbSA1JTsNCiAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOw0KICAgIGJvcmRlci1yYWRpdXM6IDAuMjVyZW07DQp9DQoNCi51cGxvYWRlciAuc2VsZWN0ZWQtZmlsZS1saXN0IGxpLmZsYWdnZWQgew0KICAgIGJvcmRlcjogMXB4IHNvbGlkICM5OTAwMDA7DQp9DQoNCi51cGxvYWRlciAuc2VsZWN0ZWQtZmlsZS1saXN0IGxpLmZsYWdnZWQgLnNlbGVjdGVkLWZpbGUtbmFtZTo6YmVmb3JlLA0KLnVwbG9hZGVyIC52YWxpZGF0aW9uLXByb2JsZW1zIGxpIHA6Zmlyc3QtY2hpbGQ6OmJlZm9yZSB7DQogICAgY29udGVudDogIiI7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgZmxvYXQ6IGxlZnQ7DQogICAgd2lkdGg6IDFlbTsNCiAgICBoZWlnaHQ6IDFlbTsNCiAgICBiYWNrZ3JvdW5kOiB1cmwoIlJlc291cmNlcy9JbWFnZXMvSWNvbnMvc3RvcC1yZWQtMzIucG5nIik7DQogICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjsNCiAgICBtYXJnaW4tcmlnaHQ6IDAuNWVtOw0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICB0b3A6IDAuMTVlbTsNCn0NCg0KLnVwbG9hZGVyIC5zZWxlY3RlZC1maWxlLWxpc3QgbGk6Zmlyc3QtY2hpbGQgew0KICAgIG1hcmdpbi10b3A6IDA7DQp9DQoNCi51cGxvYWRlciAuc2VsZWN0ZWQtZmlsZS1ib3ggew0KICAgIGRpc3BsYXk6IHRhYmxlOw0KICAgIHdpZHRoOiAxMDAlOw0KfQ0KDQoudXBsb2FkZXIgLnNlbGVjdGVkLWZpbGUtYm94ID4gc3BhbiB7DQogICAgZGlzcGxheTogdGFibGUtY2VsbDsNCiAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wOw0KfQ0KDQoudXBsb2FkZXIgLnNlbGVjdGVkLWZpbGUtbmFtZSB7DQogICAgd29yZC1icmVhazogYnJlYWstYWxsOw0KfQ0KDQoudXBsb2FkZXIgLnNlbGVjdGVkLWZpbGUtc2l6ZSB7DQogICAgb3BhY2l0eTogMC41Ow0KICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsNCiAgICB0ZXh0LWFsaWduOiByaWdodDsNCn0NCg0KLnVwbG9hZGVyIHByb2dyZXNzIHsNCiAgICB3aWR0aDogMTAwJTsNCn0NCg0KDQovKi0tLSBVcGxvYWRlciB3aWRnZXQgbGVnYWN5IGltcGxlbWVudGF0aW9ucyAtLS0qLw0KDQoudXBsb2FkZXItbGVnYWN5LWlucHV0LWJveCB7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KDQoudXBsb2FkZXItbGVnYWN5LWlucHV0LWJveCBvbCB7DQogICAgbGlzdC1zdHlsZTogbm9uZTsNCiAgICBwYWRkaW5nOiAwOw0KICAgIHRleHQtYWxpZ246IGxlZnQ7DQp9DQoNCi51cGxvYWRlci1sZWdhY3ktaW5wdXQtYm94IGxpIHsNCiAgICBtYXJnaW46IDFlbSAwOw0KfQ0KDQoudXBsb2FkZXItbGVnYWN5LWlucHV0LWJveCBsaSA+ICogew0KICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCn0NCg0KLnVwbG9hZGVyLWxlZ2FjeS1pbnB1dC1ib3ggaW5wdXQgew0KICAgIHdpZHRoOiA3NSU7DQp9DQoNCi51cGxvYWRlci1sZWdhY3ktaW5wdXQtYm94IC5maWxlLWZsYWcgew0KICAgIG1hcmdpbi1ib3R0b206IDFlbTsNCiAgICBjb2xvcjogIzk5MDAwMDsNCn0NCg0KLnVwbG9hZGVyLWxlZ2FjeS1yZW1vdmUtYnV0dG9uIHsNCiAgICBiYWNrZ3JvdW5kOiB1cmwoIlJlc291cmNlcy9JbWFnZXMvSWNvbnMvVG9vbGJhci90cmFzaC0yNC5wbmciKSBjZW50ZXIgY2VudGVyIG5vLXJlcGVhdDsNCiAgICBtYXJnaW46IDAgMC4yNWVtIDAgMC41ZW07DQp9DQoNCi51cGxvYWRlci1sZWdhY3ktYWRkLWJ1dHRvbiB7DQogICAgYmFja2dyb3VuZDogdXJsKCJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL2FkZC0yNC5wbmciKSBjZW50ZXIgY2VudGVyIG5vLXJlcGVhdDsNCiAgICBtYXJnaW4tbGVmdDogMC4yNWVtOw0KfQ0KDQoudXBsb2FkZXItbGVnYWN5LXJlbW92ZS1idXR0b24sDQoudXBsb2FkZXItbGVnYWN5LWFkZC1idXR0b24gew0KICAgIGhlaWdodDogMjRweDsNCiAgICB3aWR0aDogMjRweDsNCiAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyOw0KICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7DQp9DQo="),e.resourceManager.register("Mapping","inv","Mapping/modules/UploadData/Dialogs/LayerDetailsDialogView.html","html",t),e.resourceManager.register("Mapping","inv","Mapping/modules/UploadData/Dialogs/SymbolDialogView.html","html",a),e.resourceManager.register("Mapping","inv","Mapping/modules/UploadData/Dialogs/TableMappingDialogView.html","html",i),e.resourceManager.register("Mapping","inv","Mapping/modules/UploadData/Dialogs/TableRecordResultsDialogView.html","html",o),e.resourceManager.register("Mapping","inv","Mapping/modules/UploadData/Dialogs/UploadDialogView.html","html",n),e.resourceManager.register("Mapping","inv","Mapping/modules/UploadData/Widgets/Uploader/UploaderView.html","html",r)}),require({cache:{}}),define(["Mapping/modules/UploadData/Dialog","Mapping/modules/UploadData/UploadDataModule","Mapping/modules/UploadData/Dialogs/LayerDetailsDialogView","Mapping/modules/UploadData/Dialogs/LayerDetailsDialogViewModel","Mapping/modules/UploadData/Dialogs/SymbolDialogView","Mapping/modules/UploadData/Dialogs/SymbolDialogViewModel","Mapping/modules/UploadData/Dialogs/TableMappingDialogView","Mapping/modules/UploadData/Dialogs/TableMappingDialogViewModel","Mapping/modules/UploadData/Dialogs/TableRecordResultsDialogView","Mapping/modules/UploadData/Dialogs/TableRecordResultsDialogViewModel","Mapping/modules/UploadData/Dialogs/UploadDialogView","Mapping/modules/UploadData/Dialogs/UploadDialogViewModel","Mapping/modules/UploadData/Widgets/Uploader/UploaderView","Mapping/modules/UploadData/Widgets/Uploader/UploaderViewModel"],function(t,a,i,o,n,r,s,l,d,c,p,u,g,b){e(t,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.DialogViewBase",t.DialogViewBase),e(a,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.SERVICE_TYPE_FEATURE",a.SERVICE_TYPE_FEATURE),e(a,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.SERVICE_TYPE_KML",a.SERVICE_TYPE_KML),e(a,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.ERROR_CANCELLED",a.ERROR_CANCELLED),e(a,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.ERROR_CANCELLED_MESSAGE",a.ERROR_CANCELLED_MESSAGE),e(a,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.ERROR_MUST_SIGN_IN_TO_PUBLISH_GEODATABASE",a.ERROR_MUST_SIGN_IN_TO_PUBLISH_GEODATABASE),e(a,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.ERROR_NOT_AUTHORIZED_TO_PUBLISH_GEODATABASE",a.ERROR_NOT_AUTHORIZED_TO_PUBLISH_GEODATABASE),e(a,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.ERROR_COULD_NOT_PARSE_XSLX",a.ERROR_COULD_NOT_PARSE_XSLX),e(a,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.UploadDataModule",a.UploadDataModule),e(a,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.flatten",a.flatten),e(a,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.checkStringForTerms",a.checkStringForTerms),e(i,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.LayerDetailsDialogView",i.LayerDetailsDialogView),e(o,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.ERROR_CANCELLED_LOCAL",o.ERROR_CANCELLED_LOCAL),e(o,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.ERROR_CANCELLED_MESSAGE_LOCAL",o.ERROR_CANCELLED_MESSAGE_LOCAL),e(o,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.LayerDetailsDialogViewModel",o.LayerDetailsDialogViewModel),e(n,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.SymbolDialogView",n.SymbolDialogView),e(r,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.SymbolDialogViewModel",r.SymbolDialogViewModel),e(s,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.Z_AXIS_ENABLED",s.Z_AXIS_ENABLED),e(s,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.Z_AXIS_REQUIRED",s.Z_AXIS_REQUIRED),e(s,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.TableMappingDialogView",s.TableMappingDialogView),e(l,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.TableMappingDialogViewModel",l.TableMappingDialogViewModel),e(d,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.TableRecordResultsDialogView",d.TableRecordResultsDialogView),e(c,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.TableRecordResultsDialogViewModel",c.TableRecordResultsDialogViewModel),e(p,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.UploadDialogView",p.UploadDialogView),e(u,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.UploadDialogViewModel",u.UploadDialogViewModel),e(g,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.widgets.uploader.UploaderView",g.UploaderView),e(b,"geocortex.essentialsHtmlViewer.mapping.modules.uploadData.widgets.uploader.UploaderViewModel",b.UploaderViewModel)})}();