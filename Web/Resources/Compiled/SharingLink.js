function shim(i,e,r){if("string"==typeof i&&(r=e,e=i),"undefined"==typeof r)return void console.warn("Undefined shim for: "+e);for(var n=e.split("."),t=null,a=window,o=0,s=n.length;o<s;o++)t=n[o],o==s-1?a[t]=r:a[t]||(a[t]={}),a=a[t]}require({cache:{"Mapping/modules/SharingLink/SharingLinkModule":function(){define(["require","exports","geocortex/framework/application/ModuleBase"],function(i,e,r){"use strict";var n=function(i){function e(e,r){var n=i.call(this,e,r)||this;return n._providers=[],n._intrinsicUrlParameters=["configBase","viewer","viewerConfigUri"],n._appInitialized=!1,n.app.command("HandleGenerateSharingLink").register(n,n.handleGenerateSharingLink),dojo.connect(n.app,"initializationCompleteCallback",function(){return n.handleAppInitialize()}),n}return __extends(e,i),e.prototype.initialize=function(e){i.prototype.initialize.call(this,e),e&&(dojo.isArray(e.intrinsicUrlParameters)&&(this._intrinsicUrlParameters=e.intrinsicUrlParameters),dojo.isArray(e.sharingLinkProviders)&&this._loadProviders(e.sharingLinkProviders))},e.prototype.handleGenerateSharingLink=function(i){var e=window.location.href;e.indexOf("?")>-1&&(e=e.substring(0,e.indexOf("?")));for(var r=0;r<this._intrinsicUrlParameters.length;r++)this.app.getUrlParameter(this._intrinsicUrlParameters[r])&&(e+=e.indexOf("?")>-1?"&":"?",e+=encodeURIComponent(this._intrinsicUrlParameters[r])+"=",e+=encodeURIComponent(this.app.getUrlParameter(this._intrinsicUrlParameters[r])));for(var r=0;r<this._providers.length;r++){var n=this._providers[r];n.generateParameter&&(e+=e.indexOf("?")>-1?"&":"?",e+=encodeURIComponent(n.name)+"=",e+=encodeURIComponent(n.generate()))}i(e)},e.prototype.handleAppInitialize=function(){if(this.app&&this.app.urlParameters){this._providers.sort(function(i,e){return i.priority-e.priority});for(var i=0;i<this._providers.length;i++)this._applyProvider(this._providers[i]);this._appInitialized=!0}},e.prototype._applyProvider=function(i){if(i.acceptParameter){var e=this.app.getUrlParameter(i.name);try{i.apply(e)}catch(r){this.app.trace.warning("SharingLinkModule: Could not apply the url parameter '{0}={1}'".format(i.name,e))}}},e.prototype._loadProviders=function(i){for(var e=0;e<i.length;e++){var r=i[e];r&&(r.libraryId&&!this.app.allLibrariesLoaded?this._loadProvidersWhenLibrariesDownloaded(r):this._loadProvider(r))}},e.prototype._loadProvidersWhenLibrariesDownloaded=function(i){var e=this;this.app.event("ViewerLibrariesDownloadedEvent").once(this,function(){var r=e._loadProvider(i);e._appInitialized&&e._applyProvider(r)})},e.prototype._loadProvider=function(i){var e=dojo.getObject(i.type);if(!e)return void this.app.trace.error(this.id+" can't find sharing link provider typed "+i.type);var r=new e(this.app,i.libraryId||this.libraryId);return r.acceptParameter=!(i.apply===!1),r.generateParameter=!(i.generate===!1),i.name&&(r.name=i.name),r.initialize(i.configuration||{}),this._providers.push(r),r},e}(r.ModuleBase);e.SharingLinkModule=n})}}}),define(["Mapping/modules/SharingLink/SharingLinkModule"],function(i){shim(i,"geocortex.essentialsHtmlViewer.mapping.modules.sharingLink.SharingLinkModule",i.SharingLinkModule)});