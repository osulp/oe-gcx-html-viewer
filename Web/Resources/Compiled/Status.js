function shim(e,t,s){if("string"==typeof e&&(s=t,t=e),"undefined"==typeof s)return void console.warn("Undefined shim for: "+t);for(var i=t.split("."),a=null,n=window,r=0,o=i.length;r<o;r++)a=i[r],r==o-1?n[a]=s:n[a]||(n[a]={}),n=n[a]}require({cache:{"Mapping/modules/Status/StatusIndicatorView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,s){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.ViewBase);t.StatusIndicatorView=i})},"Mapping/modules/Status/StatusMessageView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,s){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.attach=function(t){if(e.prototype.attach.call(this,t),t){this.updateClassBinding(t.statusClass.get());var s=t.statusClass.bind(this,this.updateClassBinding);this.addDisposableBinding(t.statusClass,s)}},t.prototype.updateClassBinding=function(e){e=e||"";var t=this._previousClass||"";e&&e!==t&&(this._previousClass=e,dojo.removeClass(this.containerElement,t),dojo.addClass(this.containerElement,e))},t.prototype.handleClickClose=function(e,t,s){this.app.viewManager.destroyView(this),s&&s.userClosedCallback&&s.userClosedCallback.call(this,this)},t}(s.ViewBase);t.StatusMessageView=i})},"Mapping/modules/Status/StatusMessageViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables"],function(e,t,s,i){"use strict";var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.text=new i.Observable,t.closeTitle=new i.Observable,t.imageUri=new i.Observable,t.imageClass=new i.Observable,t.imageAltText=new i.Observable,t.statusClass=new i.Observable,t.userClosedCallback=null,t}return __extends(t,e),t}(s.ViewModelBase);t.StatusMessageViewModel=a})},"Mapping/modules/Status/StatusModule":function(){define(["require","exports","geocortex/framework/application/ModuleBase","geocortex/infrastructure/Dictionary","geocortex/infrastructure/commandArgs/AddStatusArgs","./StatusMessageViewModel","geocortex/framework/utils/TimeDelayedOperation"],function(e,t,s,i,a,n,r){"use strict";var o=function(e){function t(t,s){var a=e.call(this,t,s)||this;return a.messageRegionName="StatusIndicatorMessageRegion",a.statusViewName="StatusIndicatorView",a.lastTestAddArgs=null,a.viewInstanceCounter=0,a._regionNames=new i.Dictionary,a.app.command("AddStatus").register(a,a.addStatus),a.app.command("UpdateStatus").register(a,a.updateStatus),a.app.command("PulseStatus").register(a,a.pulseStatus),a.app.command("RemoveStatus").register(a,a.removeStatus),a.app.event("ViewUnhostedEvent").subscribe(a,a.viewUnhostedHandler),a}return __extends(t,e),t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),t.busyIcon||(t.busyIcon="Resources/Images/loader-small.gif"),this._defaultCloseTitle=this.getResource("language-common-close")},t.prototype.addStatus=function(e){var t;t="string"==typeof e||e instanceof String?new a.AddStatusArgs(e):e;var s=!0,i=t.regionName||this.messageRegionName,o=this.app.viewManager.getExistingRegionByName(i);if(o){var u=o.ownerView;u&&u.configuration&&"boolean"==typeof u.configuration.showStatusMessages&&(s=u.configuration.showStatusMessages)}if(s){this._trackRegion(i),i==this.messageRegionName&&this.app.command("ActivateView").execute(this.statusViewName);var l=t.id?t.id:"StatusMessageView"+this.viewInstanceCounter++,g=this.app.viewManager.getViewById(l),d=g?g.viewModel:null;g||(g=this.createView("StatusMessageView",l,i)),t.id=l,d||(d=new n.StatusMessageViewModel(this.app,this.libraryId),g.attach(d)),d.text.set(t.text),d.closeTitle.set(t.closeTitle||this._defaultCloseTitle),t.imageProperties&&(d.imageUri.set(t.imageProperties.uri),d.imageClass.set(t.imageProperties["class"]),d.imageAltText.set(t.imageProperties.altText)),d.statusClass.set(t.statusClass),d.userClosedCallback=t.userClosedCallback,t.showBusyIcon&&d.imageUri.set(this.configuration.busyIcon),d.timer?d.timer.reset():t.timeoutMS&&t.timeoutMS>0&&(d.timer=new r.TimeDelayedAction(t.timeoutMS,function(){this.removeStatus(l)},this),d.timer.start())}},t.prototype.updateStatus=function(e){var t;t="string"==typeof e||e instanceof String?new a.AddStatusArgs(e):e;var s=t.regionName||this.messageRegionName;s==this.messageRegionName&&this.app.command("ActivateView").execute(this.statusViewName);var i=null;if(t.id)i=this.app.viewManager.getViewById(t.id);else{var n=this.app.viewManager.getExistingRegionByName(s);n.views.length>=1&&(i=n.views[n.views.length-1])}if(i){var r=i.viewModel;r&&(t.text&&r.text.set(t.text),t.closeTitle&&r.closeTitle.set(t.closeTitle),t.imageProperties&&t.imageProperties.uri&&r.imageUri.set(t.imageProperties.uri),t.imageProperties&&t.imageProperties["class"]&&r.imageClass.set(t.imageProperties["class"]),t.imageProperties&&t.imageProperties.altText&&r.imageAltText.set(t.imageProperties.altText),t.statusClass&&r.statusClass.set(t.statusClass),"function"==typeof t.userClosedCallback&&(r.userClosedCallback=t.userClosedCallback),r.timer&&r.timer.reset())}},t.prototype.pulseStatus=function(e){if(e){var t=this.app.viewManager.getViewById(e);if(t){var s=t.viewModel;s&&s.timer&&s.timer.reset()}}},t.prototype.removeStatus=function(e){var t=null;if(e)t=this.app.viewManager.getViewById(e);else{var s=this.app.viewManager.getExistingRegionByName(this.messageRegionName);s.views.length>=1&&(t=s.views[s.views.length-1])}t&&this.app.viewManager.destroyView(t)},t.prototype.createView=function(e,t,s){return this.app.viewManager.createView({viewId:t,typeName:"geocortex.essentialsHtmlViewer.mapping.modules.status."+e,markupResource:this.libraryId+"/modules/Status/"+e+".html",isVisible:!0,libraryId:this.libraryId,regionName:s})},t.prototype.viewUnhostedHandler=function(e){var t=e.region,s=e.view;this._regionNames.containsKey(t.name)&&(s&&s.viewModel&&s.viewModel.timer&&s.viewModel.timer.stop(),0==t.views.length&&(this._regionNames.remove(t.name),t.name==this.messageRegionName&&this.app.command("DeactivateView").execute(this.statusViewName)))},t.prototype._trackRegion=function(e){this._regionNames.set(e,e)},t}(s.ModuleBase);t.StatusModule=o})},"url:/Mapping/modules/Status/StatusIndicatorView.html":'\r\n<div class="status-indicator anim-zoom-in" data-region-name="StatusIndicatorMessageRegion" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n',"url:/Mapping/modules/Status/StatusMessageView.html":'\r\n<div class="status-window" data-binding="{@var: containerElement}">\r\n    <table>\r\n        <tr>\r\n            <td class="status-img-container">\r\n                <img class="status-img" data-binding="{src: imageUri}{alt: imageAltText}{@visible: imageUri}" aria-hidden="true" />\r\n            </td>\r\n            <td class="status-msg-container">\r\n                <span class="status-msg" data-binding="{@text: text}{title: text}"></span>\r\n            </td>\r\n            <td class="status-close">\r\n                <button class="status-btn" data-binding="{@event-onclick: handleClickClose}{title: closeTitle}">\r\n                    <span>&nbsp;</span>\r\n                </button>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n</div>\r\n'}}),define(["Mapping/modules/Status/StatusIndicatorView","Mapping/modules/Status/StatusMessageView","Mapping/modules/Status/StatusMessageViewModel","Mapping/modules/Status/StatusModule"],function(e,t,s,i){shim(e,"geocortex.essentialsHtmlViewer.mapping.modules.status.StatusIndicatorView",e.StatusIndicatorView),shim(t,"geocortex.essentialsHtmlViewer.mapping.modules.status.StatusMessageView",t.StatusMessageView),shim(s,"geocortex.essentialsHtmlViewer.mapping.modules.status.StatusMessageViewModel",s.StatusMessageViewModel),shim(i,"geocortex.essentialsHtmlViewer.mapping.modules.status.StatusModule",i.StatusModule)});