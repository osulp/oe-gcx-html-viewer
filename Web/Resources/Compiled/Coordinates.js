function shim(e,t,o){if("string"==typeof e&&(o=t,t=e),"undefined"==typeof o)return void console.warn("Undefined shim for: "+t);for(var i=t.split("."),n=null,s=window,r=0,a=i.length;r<a;r++)n=i[r],r==a-1?s[n]=o:s[n]||(s[n]={}),s=s[n]}require({cache:{"Mapping/modules/Coordinates/CoordinatesModule":function(){define(["require","exports","geocortex/framework/application/ModuleBase"],function(e,t,o){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getStateFilter=function(){return{coordinateSystem:this.app.project.filter.coordinateSystem,isActive:!0}},t.prototype.exportState=function(){var e=this,t={coordinateSystem:null,isActive:!1};return Promise["try"](function(){return e.app.command("_ExportCoordinatesState").execute(t),t})},t.prototype.applyState=function(e){var t=this,o={state:e,completePromise:null};return this.app.waitUntilAllLibrariesLoaded().then(function(){return t.app.command("_ApplyCoordinatesState").execute(o),o.completePromise})},t}(o.ModuleBase);t.CoordinatesModule=i})},"Mapping/modules/Coordinates/CoordinatesState":function(){define(["require","exports"],function(e,t){"use strict"})},"Mapping/modules/Coordinates/CoordinatesView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,o){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.activated=function(){var e=this;this.viewModel.isEnabled.get()!==!1&&($(this.root).parent("[class*='top']").length&&(this.viewModel.isTop.set(!0),$(this.root).find(".arrow-closed").text(this.getResource("language-feature-coordinates-down-arrow")),$(this.root).find(".arrow-opened").text(this.getResource("language-feature-coordinates-up-arrow"))),$(this.root).parent("[class*='left']").length&&this.viewModel.isLeft.set(!0),$(this.root).parent("[class*='right']").length&&this.viewModel.isRight.set(!0),$(this.root).parent("[class*='bottom']").length&&$(this.root).parent("[class*='right']").length&&$(".esriControlsBR").addClass("coordinate-attribution-override"),$(this.root).parent("[class*='bottom']").length&&this.viewModel.isBottom.set(!0),this.viewModel.coordinateSystemsLoaded.bind(this,function(t){return t?e.selectFirstInListOfCoordinateSystems():null}),this.app.command("ToggleMouseCoordinates").register(this,function(){e.toggleCoordinatesActive()}),this.viewModel.coordinateSelectEnabled.bind(this,function(t){if(t){e.app.event("FlyoutActivated").publish(e);var o={view:e,onOtherInteracted:function(t){return e._onOtherInteracted(t)}};e.app.command("TapToDismiss").execute(o)}else e.app.event("FlyoutDeactivated").publish(e)}))},t.prototype.toggleCoordinatesActive=function(e,t,o){0==this.viewModel.isActive.get()?this.viewModel.startTracking():this.viewModel.stopTracking(),this.viewModel.coordinateSelectEnabled.set(!1)},t.prototype.toggleSelectContainer=function(e,t,o){if(this.viewModel.coordinateSelectEnabled.set(!this.viewModel.coordinateSelectEnabled.get()),!this.viewModel.isTop.get()){var i=$(this.root).find(".coords-select-item"),n=i[0],s=$(n).height();i.length*s}},t.prototype.changeCoordinateSystem=function(e,t,o){var i=$(t.parentElement).index();$(t.parentElement.parentElement).children().children().removeClass("coords-select-item-selected"),$(t).addClass("coords-select-item-selected"),this.viewModel.currentCoordinateSystem.set(this.viewModel.coordinateSystems.getAt(i)),this.viewModel.coordinateSelectEnabled.set(!1)},t.prototype.selectFirstInListOfCoordinateSystems=function(){var e=$(this.root).find(".coords-select-item"),t=e.get(0);$(t.firstElementChild).addClass("coords-select-item-selected")},t.prototype._onOtherInteracted=function(e){this.viewModel.coordinateSelectEnabled.set(!1)},t}(o.ViewBase);t.CoordinatesView=i})},"Mapping/modules/Coordinates/CoordinatesViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","geocortex/infrastructure/coordinates/CoordinateUtils","geocortex/framework/utils/ArrayUtils"],function(e,t,o,i,n,s){"use strict";var r=function(e){function t(t,o){var n=e.call(this,t,o)||this;return n.coordinatesModel=new i.Observable(null),n.isEnabled=new i.Observable((!0)),n.isActive=new i.Observable((!1)),n.coordinateSystems=new i.ObservableCollection([]),n.currentCoordinateSystem=new i.Observable(null),n.coordinateSelectEnabled=new i.Observable((!1)),n.coordinateSelectArrow=new i.Observable(null),n.xValue=new i.Observable(null),n.yValue=new i.Observable(null),n.xValueType=new i.Observable(null),n.yValueType=new i.Observable(null),n.coordinateSystemsLoaded=new i.Observable((!1)),n.isTop=new i.Observable((!1)),n.isBottom=new i.Observable((!1)),n.isLeft=new i.Observable((!1)),n.isRight=new i.Observable((!1)),n._openByDefault=!1,n._outPutStreamBindingToken=null,n.app.command("_ExportCoordinatesState").register(n,n._exportState),n.app.command("_ApplyCoordinatesState").register(n,n._applyState),n}return __extends(t,e),t.prototype.initialize=function(e){var t=this;return void 0==e.isEnabled||e.isEnabled?e.coordinatesModel?(this._openByDefault=!!e.openByDefault,this._initializePromise=this.app.coordinatesManager.getCoordinatesModel(e.coordinatesModel).then(function(e){return t._integrateCoordinatesModel(e)})["catch"](function(o){throw t.isEnabled.set(!1),t.app.trace.error("CoordinatesViewModel: Error Initializing ViewModel. Could not retrieve {0}. {1}".format(e.coordinatesModel,o.message)),o}),void this.coordinateSelectArrow.syncTransform(this.coordinateSelectEnabled,function(e){return t.isTop.get()?e?t.getResource("language-feature-coordinates-up-arrow"):t.getResource("language-feature-coordinates-down-arrow"):e?t.getResource("language-feature-coordinates-down-arrow"):t.getResource("language-feature-coordinates-up-arrow")})):void this.app.trace.error("CoordinatesViewModel: Failed to initialize. A coordinatesModel must be specified in configuration."):void this.isEnabled.set(!1)},t.prototype.startTracking=function(){var e=this.coordinatesModel.get();e&&(this.isActive.set(!0),this._outPutStreamBindingToken=e.outputStream.bind(this,this._updateDisplaySettings))},t.prototype.stopTracking=function(){this.isActive.set(!1);var e=this.coordinatesModel.get();e&&this._outPutStreamBindingToken&&(e.outputStream.unbind(this._outPutStreamBindingToken),this._outPutStreamBindingToken=null)},t.prototype._updateDisplaySettings=function(e){return e?(this.xValue.set(e.formattedLatitudeOrX),void this.yValue.set(e.formattedLongitudeOrY)):(this.xValue.set(""),void this.yValue.set(""))},t.prototype._integrateCoordinatesModel=function(e){this.coordinatesModel.set(e),this.coordinateSystems.sync(e.coordinateSystems),this.currentCoordinateSystem.sync(e.currentCoordinateSystem),this.currentCoordinateSystem.bind(this,function(t){e.currentCoordinateSystem.get()!==t&&e.currentCoordinateSystem.set(t)}),this.currentCoordinateSystem.bind(this,this._updateCoordinateSystemDisplay),this._openByDefault&&this.startTracking()},t.prototype._updateCoordinateSystemDisplay=function(e){this.coordinateSystemsLoaded.get()||this.coordinateSystemsLoaded.set(!0),this.xValue.set(""),this.yValue.set(""),"xy"===e.output?(this.xValueType.set(this._getCoordinateResource("x")),this.yValueType.set(this._getCoordinateResource("y"))):(this.xValueType.set(this._getCoordinateResource("latitude-abbrev")+":"),this.yValueType.set(this._getCoordinateResource("longitude-abbrev")+":"))},t.prototype._getCoordinateResource=function(e){return n.getResource(this.app,e)},t.prototype._exportState=function(e){e.isActive=this.isActive.get();var t=this.currentCoordinateSystem.get();t&&(e.coordinateSystem={wkid:t.wkid,wkt:t.wkt,output:t.output})},t.prototype._applyState=function(e){var t=this;e.completePromise=this._initializePromise.then(function(){e.state.isActive?t.startTracking():t.stopTracking();var o=e.state.coordinateSystem;if(o){var i=s.firstOrDefault(t.coordinateSystems.get(),function(e){return e.output===o.output&&e.wkid===o.wkid&&e.wkt===o.wkt});i&&t.currentCoordinateSystem.set(i)}})},t}(o.ViewModelBase);t.CoordinatesViewModel=r})},"url:/Mapping/modules/Coordinates/CoordinatesView.html":'<div class="coords" data-binding="{@visible: isEnabled}">\r\n    <button class="coords-toggle" data-binding="{@event-onclick: toggleCoordinatesActive}{@class-coords-toggle-active: isActive}{@class-coords-toggle-left: isLeft}{@class-coords-toggle-right: isRight}{@text: @language-feature-coordinates-toggle-button-text}{title: @language-feature-coordinates-toggle-button}" tabindex="0"></button>\r\n    <div class="coords-info" data-binding="{@visible: isActive}{@class-coords-info-float-left: isLeft}{@class-coords-info-float-right: isRight}">\r\n        <button class="coords-select-btn" data-binding="{@event-onclick: toggleSelectContainer}{title:@language-feature-coordinates-change-system}" tabindex="0">\r\n            <span data-binding="{@source: currentCoordinateSystem}">\r\n                <span data-binding="{@template-for: currentCoordinateSystem}{@text: displayName}"></span>\r\n            </span>\r\n            <span class="coord-select-arrow" data-binding="{@text: coordinateSelectArrow}"></span>\r\n        </button>\r\n        <ul class="coords-select" data-binding="{@source: coordinateSystems}{@visible: coordinateSelectEnabled}\r\n                                                {@class-coords-select-top: isTop}">\r\n            <li class="coords-select-item" data-binding="{@template-for: coordinateSystems}">\r\n                <button data-binding="{@text: displayName}{@event-onclick: changeCoordinateSystem}"></button>\r\n            </li>\r\n        </ul>\r\n        <div class="coords-display">\r\n            <div class="coords-item coords-x">\r\n                <span class="coords-label" data-binding="{@text: xValueType}"></span>\r\n                <span class="coords-values" data-binding="{@text: xValue}"></span>\r\n            </div>\r\n            <div class="coords-item coords-y">\r\n                <span class="coords-label" data-binding="{@text: yValueType}"></span>\r\n                <span class="coords-values" data-binding="{@text: yValue}"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}}),define(["Mapping/modules/Coordinates/CoordinatesModule","Mapping/modules/Coordinates/CoordinatesView","Mapping/modules/Coordinates/CoordinatesViewModel"],function(e,t,o){shim(e,"geocortex.essentialsHtmlViewer.mapping.modules.coordinates.CoordinatesModule",e.CoordinatesModule),shim(t,"geocortex.essentialsHtmlViewer.mapping.modules.coordinates.CoordinatesView",t.CoordinatesView),shim(o,"geocortex.essentialsHtmlViewer.mapping.modules.coordinates.CoordinatesViewModel",o.CoordinatesViewModel)});