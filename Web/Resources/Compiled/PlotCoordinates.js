function shim(t,e,i){if("string"==typeof t&&(i=e,e=t),"undefined"==typeof i)return void console.warn("Undefined shim for: "+e);for(var o=e.split("."),n=null,r=window,a=0,s=o.length;a<s;a++)n=o[a],a==s-1?r[n]=i:r[n]||(r[n]={}),r=r[n]}require({cache:{"Mapping/modules/PlotCoordinates/CoordinateDescriptor":function(){define(["require","exports","geocortex/framework/observables","geocortex/infrastructure/coordinates/CoordinatesModel","geocortex/infrastructure/highlightedLabel/HighlightedLabelGraphic","geocortex/infrastructure/coordinates/CoordinatesManager","geocortex/infrastructure/GraphicsLayerUtils","geocortex/infrastructure/coordinates/CoordinateUtils"],function(t,e,i,o,n,r,a,s){"use strict";var d=function(){function t(t,e,o,n,r){this.id=new i.Observable(""),this.mapPoint=null,this.coordinate=new i.Observable(null),this.isEditing=new i.Observable((!1)),this.userModifiedText=new i.Observable((!1)),this.coordinatesModel=null,this.layer=null,this.feature=null,this.highlightLabel=null,this.coordClass=new i.Observable(""),this.degreeLat=new i.Observable(" "),this.degreeLon=new i.Observable(" "),this.minuteLat=new i.Observable(""),this.minuteLon=new i.Observable(""),this.secondLat=new i.Observable(""),this.secondLon=new i.Observable(""),this.outputX=new i.Observable(""),this.outputY=new i.Observable(""),this.bearingLat=new i.Observable(""),this.bearingLon=new i.Observable(""),this.xLabel=new i.Observable(""),this.xVal=new i.Observable(""),this.yLabel=new i.Observable(""),this.yVal=new i.Observable(""),this.isNew=new i.Observable((!0)),this.isVisible=new i.Observable((!1)),this.showDegree=new i.Observable((!1)),this.showMinute=new i.Observable((!1)),this.showSecond=new i.Observable((!1)),this._outPutStreamBindingToken=null,this._inputStreamBindingToken=null,this._coordSystemBindingToken=null,this._descriptorOptions=null,this._inputStreamUpdatedAfterLastClear=!1,this.app=t,this.id.set(e||""),this._populateStringResources(),this._integrateCoordinatesModel(o),this.isEditing.bind(this,this._handleEditingModeChanged),this._descriptorOptions=n,r?this.setBaseCoordinate(r):this.isEditing.set(!0)}return t.prototype.setBaseCoordinate=function(t){this.mapPoint=t instanceof esri.geometry.Point?t:new esri.geometry.Point(t.x,t.y,t.spatialReference),this._updateCoordinateAndRefreshLabel(this.isEditing.get()&&!this.isNew.get()),this.isEditing.set(!1),this.isNew.set(!1)},t.prototype.removeLabelFromLayer=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),!this.highlightLabel)return void this.app.trace.error("CoordinateDescriptor: Graphic not added to map. Cannot remove.");if(this.highlightLabel.removeFromLayer(t),this._coordSystemBindingToken&&this.coordinatesModel.currentCoordinateSystem.unbind(this._coordSystemBindingToken),e){var i={sender:this,coordinateId:this.id.get(),coordinate:this.coordinate.get()};this.app.event("CoordinateDeletedEvent").publish(i)}this._raiseCanExecuteChanged()},t.prototype.showLabel=function(){this.highlightLabel&&(this.highlightLabel.show(),this.isVisible.set(!0))},t.prototype.hideLabel=function(){this.highlightLabel&&(this.highlightLabel.hide(),this.isVisible.set(!1))},t.prototype.labelVisible=function(){if(this.highlightLabel)return this.highlightLabel.isVisible()},t.prototype.updateCoordinateId=function(t){if(t&&this.id.get()!=t){var e=this.id.get();this.id.set(t),this.highlightLabel&&(this.highlightLabel.assignGraphicIdentifierKey(r.coordinateIdentifierProperty,this.id.get()),this.highlightLabel.updateIdTagText(this.id.get()));var i={sender:this,oldId:e,updatedId:this.id.get()};this.app.event("CoordinateIdUpdatedEvent").publish(i)}},t.prototype.clearValues=function(){this._inputStreamUpdatedAfterLastClear=!1,this._updateDisplaySettings()},t.prototype._addLabelToLayer=function(){if(this.highlightLabel){var t="CoordinateDescriptor: Graphic already added to map.";return this.app.trace.error(t),Promise.reject(new Error(t))}var e=this._descriptorOptions;return this.layer=a.getInternalGraphicsLayer(e.layerId,this.app,a.GraphicsLayerType.Label),this.layer?this._createHighlightLabel(!0,e.fontSize,e.fontFamily,e.cornerRadius,e.textColor,e.highlightColor,e.highlightOutlineSymbol):Promise.reject(new Error("CoordinateDescriptor: Could not create graphics layer {0}".format(e.layerId)))},t.prototype._integrateCoordinatesModel=function(t){var e=this;this.coordinatesModel=t instanceof o.CoordinatesModel?t:null,this.coordinatesModel&&(this._updateDisplaySettings(),this._coordSystemBindingToken=this.coordinatesModel.currentCoordinateSystem.bind(this,function(t){return e._updateCoordinateAndRefreshLabel(!1,!0)}))},t.prototype._handleEditingModeChanged=function(t){var e=this;if(this.coordinatesModel){var i=function(){e._inputStreamBindingToken&&(e.coordinatesModel.inputStream.unbind(e._inputStreamBindingToken),e._inputStreamBindingToken=null),e._outPutStreamBindingToken&&(e.coordinatesModel.outputStream.unbind(e._outPutStreamBindingToken),e._outPutStreamBindingToken=null)};t?(this.coordinate.get()&&this._updateDisplaySettings(this.coordinate.get()),i(),this._inputStreamBindingToken=this.coordinatesModel.inputStream.bind(this,function(){e._inputStreamUpdatedAfterLastClear=!0}),this._outPutStreamBindingToken=this.coordinatesModel.outputStream.bind(this,function(t){e.userModifiedText.get()||e._updateDisplaySettings(t,!0)})):i()}},t.prototype._createHighlightLabel=function(t,e,i,o,a,s,d){var l=this;if(!this.mapPoint||!this.coordinate)return Promise.reject(new Error("MapPoint or Coordinate not defined."));var c=function(c){l._getTextLabel().then(function(h){var p={};p.layerId=l.layer.id,p.mapPoint=l.mapPoint,p.calloutWithIdTag=!0,p.idTagText=l.id.get(),p.text=h,p.fontSize=void 0==e?void 0:e,p.fontFamily=void 0==i?void 0:i,p.cornerRadius=void 0==o?10:o,p.textColor=a instanceof esri.Color?a:void 0,p.highlightColor=s instanceof esri.Color?s:void 0,p.highlightOutlineSymbol=void 0==d?new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color("white"),4):d,l.highlightLabel=new n.HighlightedLabelGraphic(p,l.app),l.highlightLabel.assignGraphicIdentifierKey(r.coordinateIdentifierProperty,l.id.get()),l.highlightLabel.addToLayer(t),l.isVisible.set(t),l._raiseCanExecuteChanged(),c()})};return new Promise(c)},t.prototype._updateCoordinateAndRefreshLabel=function(t,e){var i=this;return void 0===e&&(e=!1),this.mapPoint?void this.app.coordinatesManager.getCoordinate(this.mapPoint,this.coordinatesModel.currentCoordinateSystem.get(),this.coordinatesModel.id).then(function(o){i.userModifiedText.set(!1),i.coordinate.set(o),i._updateDisplaySettings(o),i._getTextLabel().then(function(o){var n=function(){var o={sender:i,coordinateId:i.id.get(),coordinate:i.coordinate.get()};e?i.app.event("CoordinateSystemUpdateAppliedEvent").publish(o):t?i.app.event("CoordinateEditedEvent").publish(o):i.app.event("CoordinateAddedEvent").publish(o),i._raiseCanExecuteChanged()};i.highlightLabel?(t?i.highlightLabel.update(i.mapPoint,o):i.highlightLabel.refresh(o),n()):i._addLabelToLayer().then(n)})}):void this._updateDisplaySettings()},t.prototype._getTextLabel=function(){var t=this,e=function(e,i){var o=function(){var i="xy"===t.coordinatesModel.currentCoordinateSystem.get().output?t._XDisplayName:t._latitudeDisplayName,o="xy"===t.coordinatesModel.currentCoordinateSystem.get().output?t._YDisplayName:t._longitudeDisplayName,n=t._labelFormat.format(i,t.coordinate.get().formattedLatitudeOrX,o,t.coordinate.get().formattedLongitudeOrY);e(n)};t.coordinate.get()&&t.coordinatesModel&&t.coordinate.get().targetCoordinateSystem===t.coordinatesModel.currentCoordinateSystem.get()?o():t.coordinate.once(t,o)};return new Promise(e)},t.prototype._updateDisplaySettings=function(t,e){var i=t?t.targetCoordinateSystem:this.coordinatesModel.currentCoordinateSystem.get(),o="xy"===i.output?this._XDisplayName:this._latitudeDisplayName,n="xy"===i.output?this._YDisplayName:this._longitudeDisplayName;this.coordClass.set("coord-inputs {0}".format(i.output)),this._updateInputParams(i.output,t,e),this.xLabel.get()!==o&&this.xLabel.set(o),this.yLabel.get()!==n&&this.yLabel.set(n)},t.prototype._updateInputParams=function(t,e,i){var o=this;if(!i||this._inputStreamUpdatedAfterLastClear){var n=function(t,e,i,n,r,a,s,d,l,c){o.degreeLat.set(t),o.degreeLon.set(e),o.minuteLat.set(i),o.minuteLon.set(n),o.secondLat.set(r),o.secondLon.set(a),o.bearingLat.set(s),o.bearingLon.set(d),o.outputX.set(l),o.outputY.set(c)},r=function(){o.userModifiedText.get()||n("","","","","","","","","","")},a=function(t,e,i){o.showDegree.set(t),o.showMinute.set(e),o.showSecond.set(i)};switch(t){case"xy":if(a(!1,!1,!1),e){var s=e.formattedLatitudeOrX,d=e.formattedLongitudeOrY;n("","","","","","","","",s.trim(),d.trim())}else r();break;case"dd":if(a(!0,!1,!1),e){var l=e.formattedLatitudeOrX.split(this.degreeSymbol),c=e.formattedLongitudeOrY.split(this.degreeSymbol);n(l[0].trim(),c[0].trim(),"","","","",l[1].trim(),c[1].trim(),"","")}else r();break;case"ddm":if(a(!0,!0,!1),e){var l=e.formattedLatitudeOrX.split(this.degreeSymbol),c=e.formattedLongitudeOrY.split(this.degreeSymbol),h=l[1].split(this.minuteSymbol),p=c[1].split(this.minuteSymbol);n(l[0].trim(),c[0].trim(),h[0].trim(),p[0].trim(),"","",h[1].trim(),p[1].trim(),"","")}else r();break;case"dms":if(a(!0,!0,!0),e){var l=e.formattedLatitudeOrX.split(this.degreeSymbol),c=e.formattedLongitudeOrY.split(this.degreeSymbol),h=l[1].split(this.minuteSymbol),p=c[1].split(this.minuteSymbol),u=h[1].split(this.secondSymbol),g=p[1].split(this.secondSymbol);n(l[0].trim(),c[0].trim(),h[0].trim(),p[0].trim(),u[0].trim(),g[0].trim(),u[1].trim(),g[1].trim(),"","")}else r();break;default:a(!1,!1,!1),r()}e&&!i&&(this.xVal.set(e.formattedLatitudeOrX),this.yVal.set(e.formattedLongitudeOrY))}},t.prototype._raiseCanExecuteChanged=function(){this.app.command("EditMarkup").raiseCanExecuteChanged(),this.app.command("DeleteMarkup").raiseCanExecuteChanged(),this.app.command("ClearMarkup").raiseCanExecuteChanged(),this.app.command("ShowCoordinates").raiseCanExecuteChanged(),this.app.command("ShowAllCoordinates").raiseCanExecuteChanged(),this.app.command("HideCoordinates").raiseCanExecuteChanged(),this.app.command("HideAllCoordinates").raiseCanExecuteChanged(),this.app.command("DeleteAllCoordinates").raiseCanExecuteChanged()},t.prototype._populateStringResources=function(){this.degreeSymbol=s.getResource(this.app,"degrees"),this.minuteSymbol=s.getResource(this.app,"minutes"),this.secondSymbol=s.getResource(this.app,"seconds"),this._latitudeDisplayName=s.getResource(this.app,"language-coordinates-latitude-abbrev"),this._longitudeDisplayName=s.getResource(this.app,"language-coordinates-longitude-abbrev"),this._XDisplayName=s.getResource(this.app,"language-coordinates-x"),this._YDisplayName=s.getResource(this.app,"language-coordinates-y"),this._labelFormat=this.app.getResource("Mapping","language-plotcoordinates-label-format")},t}();e.CoordinateDescriptor=d})},"Mapping/modules/PlotCoordinates/CoordinateDescriptorOptions":function(){define(["require","exports"],function(t,e){"use strict"})},"Mapping/modules/PlotCoordinates/CoordinatesFscIntegration":function(){define(["require","exports","geocortex/framework/FrameworkObject","geocortex/infrastructure/FeatureSetCollection","geocortex/infrastructure/FeatureSet","./CoordinateDescriptor","geocortex/infrastructure/coordinates/CoordinatesManager"],function(t,e,i,o,n,r,a){"use strict";var s=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._featureIdMapping=[],o._coordinatesFeatureSetCollection=o._getCoordinateResultsCollection(),o.subscribeEvents(),o}return __extends(e,t),e.prototype.subscribeEvents=function(){this.app.event("CoordinateAddedEvent").subscribe(this,this._handleCoordinateAddedEvent),this.app.event("CoordinateEditedEvent").subscribe(this,this._refreshCoordinateData),this.app.event("CoordinateDeletedEvent").subscribe(this,this._handleCoordinateDeletedEvent),this.app.event("CoordinateIdUpdatedEvent").subscribe(this,this._refreshCoordinateData),this.app.event("CoordinateSystemUpdateAppliedEvent").subscribe(this,this._refreshCoordinateData)},e.prototype._handleCoordinateAddedEvent=function(t){var e=t.sender;this._addDescriptorOnCoordinatePopulated(e)},e.prototype._handleCoordinateDeletedEvent=function(t){var e=t.sender,i=e.feature;i&&this._removeFeature(i)},e.prototype._refreshCoordinateData=function(t){var e=t instanceof r.CoordinateDescriptor?t:t.sender;this._refreshData(e)},e.prototype._addDescriptorOnCoordinatePopulated=function(t){var e=this;t.coordinate.get()?this._addDescriptor(t):t.coordinate.once(this,function(){return e._addDescriptor(t)})},e.prototype._addDescriptor=function(t){this._updateDescriptorFeature(t),this._setCoordinateData(t)},e.prototype._updateDescriptorFeature=function(t){t.feature||(t.feature=new esri.Graphic),t.feature.geometry=t.mapPoint,this._setFeatureAttributes(t)},e.prototype._setFeatureAttributes=function(t){if(t.feature){var e={},i=t.coordinate.get();i&&(e.Id=t.id.get(),e.X=i.x,e.Y=i.y,e.Latitude="xy"===i.targetCoordinateSystem.output?null:i.formattedLatitudeOrX,e.Longitude="xy"===i.targetCoordinateSystem.output?null:i.formattedLongitudeOrY,e["Coordinate System"]=i.targetCoordinateSystem.displayName,e.WKID=i.targetCoordinateSystem.wkid||""),t.feature.setAttributes(e)}},e.prototype._getCoordinateResultsCollection=function(){var t=this.app.featureSetManager.getCollectionById("Coordinates");return t||(t=new o.FeatureSetCollection,t.id="Coordinates",t.sourceName="Coordinates",t.displayName.set(this.app.getResource(this.libraryId,"language-plotcoordinates-results-collection-name")),this.app.featureSetManager.addCollection(t)),t},e.prototype._getEsriFeatureSet=function(){return this._esriFeatureSet||(this._esriFeatureSet=new esri.tasks.FeatureSet),this._esriFeatureSet},e.prototype._setCoordinateData=function(t){var e=this._getEsriFeatureSet();e.features.push(t.feature),this._featureIdMapping.push({id:t.id.get(),feature:t.feature}),this._coordinatesData?(this._coordinatesData.esriFeatureSet=e,this._coordinatesData.loadFeatures()):(this._coordinatesData=new n.FeatureSet({esriFeatureSet:e}),this._coordinatesData.displayName.set(this.app.getResource(this.libraryId,"language-plotcoordinates-results-display-name")),this._coordinatesData.isSelectedInCollection.set(!0),this._coordinatesData.extendedProperties.addItem({name:a.featureSetExtendedProperty,value:!0})),this._setFeatureExtendedProperties();var i=this._getCoordinateResultsCollection();i.featureSets.contains(this._coordinatesData)||i.featureSets.addItem(this._coordinatesData),this.app.featureSetManager.openCollection(i.id),this.app.featureSetManager.closeCollection(i.id)},e.prototype._removeFeature=function(t){if(this._coordinatesData){var e=this._getEsriFeatureSet();e.features=e.features.filter(function(e){return e!==t}),this._featureIdMapping=this._featureIdMapping.filter(function(e){return e.feature!==t}),this._coordinatesData.loadFeatures(),this._setFeatureExtendedProperties()}},e.prototype._refreshData=function(t){t.feature&&(t.feature.geometry=t.mapPoint),this._setFeatureAttributes(t),this._coordinatesData.loadFeatures(),this._setFeatureExtendedProperties()},e.prototype._setFeatureExtendedProperties=function(){var t=this;this._coordinatesData.features.get().forEach(function(e){var i=e.esriFeature.get();if(i){var o=t._featureIdMapping.filter(function(t){return t.feature===i});if(o&&o.length){var n=e.extendedProperties.get().filter(function(t){return t.name===a.coordinateIdentifierProperty});n&&n.length||e.extendedProperties.addItem({name:a.coordinateIdentifierProperty,value:o[0].id})}}})},e}(i.FrameworkObject);e.CoordinatesFscIntegration=s})},"Mapping/modules/PlotCoordinates/PlotCoordinatesModule":function(){define(["require","exports","geocortex/framework/application/ModuleBase"],function(t,e,i){"use strict";var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._plotCoordinatesCommandName="PlotCoordinates",e}return __extends(e,t),e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),e&&e.tools&&this.app&&this.app.toolRegistry&&this.app.toolRegistry.createTools(e.tools,!0),this.subscribeEvents(),this.registerCommands(),this._monitorToolActivations()},e.prototype.registerCommands=function(){this.app.command("EditCoordinate").register(this,this.editCoordinateImpl)},e.prototype.subscribeEvents=function(){this.app.event("ToolCommandDeactivatedEvent").subscribe(this,this._handleToolCommandDeactivatedEvent)},e.prototype.editCoordinateImpl=function(){var t=this.app.toolRegistry.getActiveTool();if(!t||!t.command||t.command!==this._plotCoordinatesCommandName){var e=this._getToolNamesByCommand(this._plotCoordinatesCommandName);e&&e.length&&this.app.command("SetActiveTool").execute(e[0])}this.app.behavior("CoordinateEditingStartedBehavior").run()},e.prototype.getStateFilter=function(){return{coordinates:{item:this.app.project.filter.point},coordinateSystem:this.app.project.filter.coordinateSystem,hiddenCoordinateIds:!0}},e.prototype.exportState=function(){var t=this,e={coordinates:[],coordinateSystem:null};return Promise["try"](function(){return t.app.command("_ExportPlotCoordinatesState").execute(e),e})},e.prototype.applyState=function(t){var e=this,i={state:t,completePromise:null};return this.app.waitUntilAllLibrariesLoaded().then(function(){return e.app.command("_ApplyPlotCoordinatesState").execute(i),i.completePromise})},e.prototype._handleToolCommandDeactivatedEvent=function(t){t===this._plotCoordinatesCommandName&&(this.app.command("CancelEditCoordinate").execute(),this.app.event("PlotCoordinatesToolDeactivatedEvent").publish())},e.prototype._monitorToolActivations=function(){var t=this;this.app.event("ActiveToolChangedEvent").subscribe(this,function(e){var i=e.tool;i&&i.command&&i.command===t._plotCoordinatesCommandName&&(t.app.command("EditCoordinate").execute(),t.app.event("PlotCoordinatesToolActivatedEvent").publish())})},e.prototype._getToolNamesByCommand=function(t){var e=[],i=this.app.toolRegistry.tools;for(var o in i){if(!i.hasOwnProperty(o))return;var n=i[o];n.command===t&&e.push(n.name)}return e},e}(i.ModuleBase);e.PlotCoordinatesModule=o})},"Mapping/modules/PlotCoordinates/PlotCoordinatesState":function(){define(["require","exports"],function(t,e){"use strict"})},"Mapping/modules/PlotCoordinates/PlotCoordinatesView":function(){define(["require","exports","geocortex/framework/ui/ViewBase","geocortex/infrastructure/coordinates/CoordinateUtils","geocortex/infrastructure/GeometryUtils","geocortex/infrastructure/Feature","geocortex/infrastructure/coordinates/CoordinatesManager"],function(t,e,i,o,n,r,a){"use strict";var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.attach=function(e){e&&(t.prototype.attach.call(this,e),e.coordinateDescriptors.bind(this,this._scrollToBottom),this.initialize())},e.prototype.initialize=function(){this.title.set(this.app.getResource(this.libraryId,"language-plotcoordinates-title")),this.app.viewManager.notifyDimensionsChanged(this),this.registerCommands()},e.prototype.registerCommands=function(){this.app.command("ActivatePlotCoordinatesView").register(this,this._activatePlotCoordinatesView)},e.prototype.resolveWidget=function(e,i,o){return t.prototype.resolveWidget.call(this,e,i),"CoordinatesListActionsWidget"===e?this.app.menuRegistry.createMenuWidget(this,i,o):null},e.prototype.handleCoordinateActions=function(t,e,i){i&&this.app.command("ShowCoordinateActions").execute(i.id.get())},e.prototype.handleAddCoordinateClick=function(t,e,i){var r=this;i.userModifiedText.set(!1);var a,s,d,l=function(){r.app.command("Alert").execute(r.getResource("language-plotcoordinates-invalid-coordinate-alert"))},c=this.viewModel.coordinatesModel.get().currentCoordinateSystem.get();if("xy"===c.output){if(a=parseFloat(i.outputX.get()),s=parseFloat(i.outputY.get()),isNaN(a)||isNaN(s))return void l()}else if(s=o.convertDmsToDecimalDegrees(this.app,i.degreeLat.get(),i.minuteLat.get()||"0",i.secondLat.get()||"0",i.bearingLat.get()),a=o.convertDmsToDecimalDegrees(this.app,i.degreeLon.get(),i.minuteLon.get()||"0",i.secondLon.get()||"0",i.bearingLon.get()),null==s||null==a)return void l();d=c.wkid||c.wkt;var h=new esri.geometry.Point(a,s,new esri.SpatialReference(d));n.projectGeometry(h,this.app.map.spatialReference,function(t){r.app.command("PlotCoordinates").execute(t)},function(t){l()},this.app)},e.prototype.handleUpdateCoordinateClick=function(t,e,i){i.userModifiedText.set(!1),this.handleAddCoordinateClick(t,e,i)},e.prototype.handleCancelAddCoordinateClick=function(t,e,i){i.userModifiedText.set(!1),this.app.command("CancelEditCoordinate").execute()},e.prototype.handleClickAddAnotherCoordinate=function(t,e,i){this.app.coordinatesManager.hasRegisteredCoordinatesModel(this.viewModel.coordinatesModel.get()&&this.viewModel.coordinatesModel.get().id)?this.app.command("SetActiveTool").execute("PlotCoordinatesTool"):this.app.trace.warning(this.getResource("language-plotcoordinates-target-coordinates-model-not-configured"))},e.prototype.handleCoordinateItemClick=function(t,e,i){if(i.userModifiedText.set(!1),i){var o=new r.Feature({graphic:i.feature});o.extendedProperties.addItem({name:a.coordinateIdentifierProperty,value:i.id.get()}),this.app.behavior("CoordinateListItemClickedBehavior").run(o)}},e.prototype.handleKeyDown=function(t,e,i){var o=t.which?t.which:t.keyCode;return this._isSpecialChar(o)||67===o&&t.ctrlKey||i.userModifiedText.set(!0),!0},e.prototype._scrollToBottom=function(){var t=this;this.coordList&&setTimeout(function(){return t.coordList.scrollTop=t.coordList.scrollHeight},0)},e.prototype._activatePlotCoordinatesView=function(){this.app.viewManager.activateView(this),this.viewModel.focusOnMapDelayed()},e.prototype._isSpecialChar=function(t){switch(t){case dojo.keys.TAB:case dojo.keys.SHIFT:case dojo.keys.CTRL:case dojo.keys.ALT:case dojo.keys.PAUSE:case dojo.keys.CAPS_LOCK:case dojo.keys.ESCAPE:case dojo.keys.PAGE_UP:case dojo.keys.PAGE_DOWN:case dojo.keys.END:case dojo.keys.HOME:case dojo.keys.LEFT_ARROW:case dojo.keys.UP_ARROW:case dojo.keys.RIGHT_ARROW:case dojo.keys.DOWN_ARROW:case dojo.keys.NUM_LOCK:case dojo.keys.SCROLL_LOCK:return!0}return!1},e}(i.ViewBase);e.PlotCoordinatesView=s})},"Mapping/modules/PlotCoordinates/PlotCoordinatesViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","./CoordinateDescriptor","./CoordinatesFscIntegration","geocortex/framework/utils/ArrayUtils","geocortex/infrastructure/coordinates/CoordinatesManager","geocortex/infrastructure/FocusUtils","geocortex/infrastructure/GraphicsLayerIds"],function(t,e,i,o,n,r,a,s,d,l){"use strict";var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isEnabled=new o.Observable((!1)),e.coordinatesModel=new o.Observable(null),e.coordinateDescriptors=new o.ObservableCollection([]),e.descCurrentlyBeingEdited=null,e.currentlyEditing=new o.Observable((!1)),e.hasCoordinates=new o.Observable((!1)),e.coordId=0,e._mouseOutBindingToken=null,e._highlightedCoordinateIds=[],e._highlightedLabelHighlightWidth=3,e}return __extends(e,t),e.prototype.initialize=function(t){var e=this;t.isEnabled!==!1&&t.coordinatesModel&&(this._fontFamily=t.fontFamily?t.fontFamily:"Arial",this._fontSize=t.fontSize?t.fontSize:"12px",this._highlightColor=t.highlightColor?t.highlightColor:"#333333",this._textColor=t.textColor?t.textColor:"#FFFFFF",this._editingHighlightColor=t.editingHighlightColor?t.editingHighlightColor:"#1A72C4",this._editingTextColor=t.editingTextColor?t.editingTextColor:"#FFFFFF",this._cornerRadius=void 0!=t.cornerRadius?parseInt(t.cornerRadius,10):5,this._highlightOutlineColor=t.highlightOutlineColor?t.highlightOutlineColor:"#FFFFFF",this._highlightOutlineWidth=void 0!=t.highlightOutlineWidth?parseInt(t.highlightOutlineWidth,10):1,this.coordinateDescriptors.bind(this,this._setHasCoordinates),this.app.coordinatesManager.getCoordinatesModel(t.coordinatesModel).then(function(t){e.isEnabled.set(!0),e.coordinatesModel.set(t)},function(i){e.app.trace.error("PlotCoordinatesViewModel: Error Initializing ViewModel. Could not retrieve {0}. {1}".format(t.coordinatesModel,i.message))}),this.coordinatesFscIntegration=new r.CoordinatesFscIntegration(this.app,this.libraryId),this.registerCommands())},e.prototype.registerCommands=function(){this.app.command("PlotCoordinates").register(this,this._plotCoordinatesImpl,this._canExecutePlotCoordinates),this.app.command("DeleteCoordinates").register(this,this._deleteCoordinatesImpl,this._canExecuteDeleteCoordinates),this.app.command("HideCoordinates").register(this,this._hideCoordinatesImpl,this._canExecuteHideCoordinatesImpl),this.app.command("ShowCoordinates").register(this,this._showCoordinatesImpl,this._canExecuteShowCoordinatesImpl),this.app.command("DeleteAllCoordinates").register(this,this._deleteAllCoordinatesImpl,this._canExecuteDeleteAllCoordinates),this.app.command("HideAllCoordinates").register(this,this._hideAllCoordinatesImpl,this._canExecuteHideAllCoordinatesImpl),this.app.command("ShowAllCoordinates").register(this,this._showAllCoordinatesImpl,this._canExecuteShowAllCoordinatesImpl),this.app.command("EditCoordinate").register(this,this._editCoordinateImpl,this._canExecuteEditCoordinate),this.app.command("CancelEditCoordinate").register(this,this._cancelEditCoordinateImpl,this._canExecuteCancelEditCoordinate),this.app.command("HighlightFeature").register(this,this._highlightCoordinateFeature),this.app.command("ClearHighlights").register(this,this._clearCoordinateHighlights),this.app.command("HighlightFeatureDefault").register(this,this._highlightCoordinateFeature),this.app.command("HighlightFeatureSet").register(this,this._highlightCoordinateFeatureSet),this.app.command("ClearDefaultHighlights").register(this,this._clearCoordinateHighlights),this.app.command("_ExportPlotCoordinatesState").register(this,this._exportState),this.app.command("_ApplyPlotCoordinatesState").register(this,this._applyState)},e.prototype._hideAllCoordinatesImpl=function(){this._hideCoordinatesImpl(this.coordinateDescriptors.get().map(function(t){return t.id.get()}))},e.prototype._canExecuteHideAllCoordinatesImpl=function(){return this._testSomeDescriptorVisibility(this.coordinateDescriptors.get().map(function(t){return t.id.get()}),!0)},e.prototype._showAllCoordinatesImpl=function(){this._showCoordinatesImpl(this.coordinateDescriptors.get().map(function(t){return t.id.get()}))},e.prototype._canExecuteShowAllCoordinatesImpl=function(){return this._testSomeDescriptorVisibility(this.coordinateDescriptors.get().map(function(t){return t.id.get()}),!1)},e.prototype._hideCoordinatesImpl=function(t){this._setDescriptorVisibilities(t,!1)},e.prototype._canExecuteHideCoordinatesImpl=function(t){return this._testSomeDescriptorVisibility(t,!0)},e.prototype._showCoordinatesImpl=function(t){this._setDescriptorVisibilities(t,!0)},e.prototype._canExecuteShowCoordinatesImpl=function(t){return this._testSomeDescriptorVisibility(t,!1)},e.prototype._plotCoordinatesImpl=function(t){var e=this;if(t){var i=dojo.isArray(t)?t:[t];i.length>1&&this._cancelDescCurrentlyBeingEdited(),i.forEach(function(t){var i=null;e.descCurrentlyBeingEdited?(e.descCurrentlyBeingEdited.setBaseCoordinate(t),i=e.descCurrentlyBeingEdited):i=e._addDescForBaseCoord(t),e._cancelDescCurrentlyBeingEdited()});var o=this.app.toolRegistry.getActiveTool();o&&"PlotCoordinates"===o.command&&o.isSticky&&this.app.command("EditCoordinate").execute()}},e.prototype._canExecutePlotCoordinates=function(t){return!!t&&((!dojo.isArray(t)||0!==t.length)&&!!this.app.coordinatesManager.hasRegisteredCoordinatesModel(this.coordinatesModel.get()&&this.coordinatesModel.get().id))},e.prototype._editCoordinateImpl=function(t){var e=this;if(!this.app.coordinatesManager.hasRegisteredCoordinatesModel(this.coordinatesModel.get()&&this.coordinatesModel.get().id)){var i=this.getResource("language-plotcoordinates-target-coordinates-model-not-configured");return void this.app.trace.warning(i)}var o=function(){e.descCurrentlyBeingEdited?e.descCurrentlyBeingEdited.isNew.get()||(e._cancelDescCurrentlyBeingEdited(),e._addNewDescInEditMode()):e._addNewDescInEditMode()},n=function(){var i=e._getCoordinateDescriptorById(t);i&&e._setDescriptorCurrentlyBeingEdited(i)};t?n():o(),this.focusOnMapDelayed()},e.prototype._canExecuteEditCoordinate=function(t){if(void 0!=t){var e=this._getCoordinateDescriptorById(t);if(!e)return!1}return!0},e.prototype._cancelEditCoordinateImpl=function(){this._cancelDescCurrentlyBeingEdited(),this.app.behavior("CancelEditCoordinateBehavior").run()},e.prototype._canExecuteCancelEditCoordinate=function(){return!0},e.prototype._deleteAllCoordinatesImpl=function(){var t=this,e=this.coordinateDescriptors.get().filter(function(t){return!t.isEditing.get()});if(e.length){var i=this.app.getResource(this.libraryId,"language-plotcoordinates-delete-all-coordinates-confirm"),o=this.app.getResource(this.libraryId,"language-plotcoordinates-delete-all-coordinates");this.app.command("Confirm").execute(i,o,function(i){i&&t._deleteCoordinatesImpl(e.map(function(t){return t.id.get()}))})}},e.prototype._canExecuteDeleteAllCoordinates=function(){var t=this.coordinateDescriptors.get().filter(function(t){return!t.isEditing.get()});return t.length>0},e.prototype._deleteCoordinatesImpl=function(t){var e=this;if(t){var i=dojo.isArray(t)?t:[t];i.forEach(function(t){var i=e._getCoordinateDescriptorById(t);i&&(e.coordinateDescriptors.removeItem(i),i.removeLabelFromLayer(!0,!0))}),i.length&&this._reorderCoordinateIds()}},e.prototype._canExecuteDeleteCoordinates=function(t){var e=this;if(void 0==t)return!1;var i=dojo.isArray(t)?t:[t];return i.some(function(t){return void 0!=e._getCoordinateDescriptorById(t)})},e.prototype._clearCoordinates=function(){this._deleteCoordinatesImpl(this.coordinateDescriptors.get().map(function(t){return t.id.get()}))},e.prototype._getCoordinateDescriptorById=function(t){if(null==t)return null;var e=this.coordinateDescriptors.get().filter(function(e){return e.id.get()===t});return e[0]},e.prototype._setDescriptorCurrentlyBeingEdited=function(t){this._cancelDescCurrentlyBeingEdited(),this.descCurrentlyBeingEdited=t,t.highlightLabel&&(t.highlightLabel.setHighlightColor(new esri.Color(this._editingHighlightColor)),t.highlightLabel.setTextColor(new esri.Color(this._editingTextColor))),t.isEditing.set(!0),this.currentlyEditing.set(!0),this._manageMapMouseOutActions()},e.prototype._cancelDescCurrentlyBeingEdited=function(){this.descCurrentlyBeingEdited&&(this.descCurrentlyBeingEdited.isNew.get()&&(this.coordId--,this.coordinateDescriptors.removeItem(this.descCurrentlyBeingEdited)),this.descCurrentlyBeingEdited.highlightLabel&&(this.descCurrentlyBeingEdited.highlightLabel.setHighlightColor(new esri.Color(this._highlightColor)),this.descCurrentlyBeingEdited.highlightLabel.setTextColor(new esri.Color(this._textColor))),this.descCurrentlyBeingEdited.isEditing.set(!1)),this.descCurrentlyBeingEdited=null,this.currentlyEditing.set(!1),this._manageMapMouseOutActions()},e.prototype._addNewDescInEditMode=function(){this.coordId++,this.descCurrentlyBeingEdited=this._addDescriptor(void 0,this.coordId.toString()),this.coordinateDescriptors.addItem(this.descCurrentlyBeingEdited),this.currentlyEditing.set(!0),this._manageMapMouseOutActions()},e.prototype._addDescForBaseCoord=function(t,e){e||this.coordId++;var i=this._addDescriptor(t,e);return e||this.coordinateDescriptors.addItem(i),i},e.prototype._addDescriptor=function(t,e){var i=void 0!=e?e:this.coordId.toString(),o=new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color(this._highlightOutlineColor),this._highlightOutlineWidth),r={layerId:l.COORDINATES_LAYER_ID,fontSize:this._fontSize,fontFamily:this._fontFamily,cornerRadius:this._cornerRadius,textColor:new esri.Color(this._textColor),highlightColor:new esri.Color(this._highlightColor),highlightOutlineSymbol:o},a=new n.CoordinateDescriptor(this.app,i,this.coordinatesModel.get(),r,t);
return a},e.prototype._setHasCoordinates=function(){var t=this;setTimeout(function(){t.hasCoordinates.set(t.coordinateDescriptors.length()>0)},0)},e.prototype._manageMapMouseOutActions=function(){var t=this;this.descCurrentlyBeingEdited&&this.app.map&&this.app.map.loaded?this._mouseOutBindingToken=this.app.map.on("mouse-out",function(){t.descCurrentlyBeingEdited&&t.descCurrentlyBeingEdited.clearValues()}):this._mouseOutBindingToken&&(this._mouseOutBindingToken.remove(),this._mouseOutBindingToken=null)},e.prototype._reorderCoordinateIds=function(){var t=this;this.coordId=0;var e=this.coordinateDescriptors.get();e.forEach(function(e){t.coordId++,e.updateCoordinateId(t.coordId.toString())})},e.prototype._exportState=function(t){var e=this;t.coordinates=this.coordinateDescriptors.get().filter(function(t){return!t.isEditing.get()}).map(function(t){return e.app.project.convert.fromEsriGeometry(t.mapPoint)});var i=this.coordinatesModel.get().currentCoordinateSystem.get();i&&(t.coordinateSystem={wkid:i.wkid,wkt:i.wkt,output:i.output});var o=this.coordinateDescriptors.get().filter(function(t){return!t.isEditing.get()&&!t.isVisible.get()}).map(function(t){return t.id.get()});o&&o.length&&(t.hiddenCoordinateIds=o)},e.prototype._applyState=function(t){var e=this;this._clearCoordinates();var i=t.state.coordinateSystem;if(i){var o=a.firstOrDefault(this.coordinatesModel.get().coordinateSystems.get(),function(t){return t.output===i.output&&t.wkid===i.wkid&&t.wkt===i.wkt});o&&this.coordinatesModel.get().currentCoordinateSystem.set(o)}var n=t.state.hiddenCoordinateIds;if(n&&n.length)var r=this.app.event("CoordinateAddedEvent").subscribe(this,function(t){var i=n.indexOf(t.coordinateId);i>-1&&(e._hideCoordinatesImpl(n[i]),n.splice(i,1)),0===n.length&&e.app.event("CoordinateAddedEvent").unsubscribe(r)});var s=(t.state.coordinates||[]).map(function(t){return{x:t.x,y:t.y,spatialReference:e.app.project.convert.toEsriSpatialReference(t.spatialReference)}});this._plotCoordinatesImpl(s),t.completePromise=Promise.resolve()},e.prototype._testSomeDescriptorVisibility=function(t,e){if(!t)return!1;for(var i=dojo.isArray(t)?t:[t],o=0;o<i.length;o++){var n=this._getCoordinateDescriptorById(i[o]);if(n&&!n.isEditing.get()&&(e&&n.labelVisible()||!e&&!n.labelVisible()))return!0}return!1},e.prototype._setDescriptorVisibilities=function(t,e){var i=this;if(t){var o=dojo.isArray(t)?t:[t];o.forEach(function(t){var o=i._getCoordinateDescriptorById(t);o&&(e?(o.showLabel(),i.app.event("CoordinateSetVisibleEvent").publish(o.id.get())):(i._highlightedCoordinateIds.length&&i.app.command("ClearDefaultHighlights").execute(),o.hideLabel(),i.app.event("CoordinateSetHiddenEvent").publish(o.id.get())))}),this._raiseCanExecuteChangedForShowHideCoords()}},e.prototype._raiseCanExecuteChangedForShowHideCoords=function(){this.app.command("ShowCoordinates").raiseCanExecuteChanged(),this.app.command("ShowAllCoordinates").raiseCanExecuteChanged(),this.app.command("HideCoordinates").raiseCanExecuteChanged(),this.app.command("HideAllCoordinates").raiseCanExecuteChanged()},e.prototype._highlightCoordinateFeature=function(t){if(t&&t.extendedProperties){var e=t.extendedProperties.get().filter(function(t){return t.name===s.coordinateIdentifierProperty}),i=e&&e.length?this._getCoordinateDescriptorById(e[0].value):null;i&&this._highlightCoordinateImpl(i)}},e.prototype._highlightCoordinateFeatureSet=function(t){var e=this;t&&t.features&&t.features.get().forEach(function(t){return e._highlightCoordinateFeature(t)})},e.prototype._clearCoordinateHighlights=function(){var t=this,e=this._highlightedCoordinateIds.slice(0);e.forEach(function(e){return t._clearCoordinateHighlightImpl(t._getCoordinateDescriptorById(e))})},e.prototype._highlightCoordinateImpl=function(t){if(t&&t.highlightLabel&&!(this._highlightedCoordinateIds.indexOf(t.id.get())>-1)){t.highlightLabel.moveToTop();var e=this.app.highlightManager&&this.app.highlightManager.getHighlightBorderColor();if(e){var i=new esri.symbol.SimpleLineSymbol;i.setColor(new esri.Color(e)),i.setWidth(this._highlightedLabelHighlightWidth),t.highlightLabel.highlightSymbol.setOutline(i),t.highlightLabel.highlightGraphic.setSymbol(t.highlightLabel.highlightSymbol),this._highlightedCoordinateIds.push(t.id.get())}}},e.prototype._clearCoordinateHighlightImpl=function(t){if(t&&t.highlightLabel){var e=this._highlightedCoordinateIds.indexOf(t.id.get());if(e>-1){var i=t.highlightLabel.getConfig().highlightOutlineSymbol||null;t.highlightLabel.highlightSymbol.setOutline(i),t.highlightLabel.highlightGraphic.setSymbol(t.highlightLabel.highlightSymbol),this._highlightedCoordinateIds.splice(e,1)}}},e.prototype.focusOnMapDelayed=function(t){var e=this;void 0===t&&(t=300),setTimeout(function(){d.focusOnMap(e.app.map)},t)},e}(i.ViewModelBase);e.PlotCoordinatesViewModel=c})},"Mapping/modules/PlotCoordinates/PlotCoordinatesViewModelConfig":function(){define(["require","exports"],function(t,e){"use strict"})},"Mapping/modules/PlotCoordinates/CoordinateActions/CoordinateActionsView":function(){define(["require","exports","geocortex/infrastructure/menus/MenuView"],function(t,e,i){"use strict";var o=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),e.prototype.attach=function(e){e&&(e.coordinateActionsView=this,t.prototype.attach.call(this,e))},e.prototype.handleMenuItemClick=function(e,i,o){t.prototype.handleMenuItemClick.call(this,e,i,o),this.app.command("DeactivateView").execute(this.id)},e}(i.MenuView);e.CoordinateActionsView=o})},"Mapping/modules/PlotCoordinates/CoordinateActions/CoordinateActionsViewModel":function(){define(["require","exports","geocortex/infrastructure/menus/MenuViewModel"],function(t,e,i){"use strict";var o=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.registerCommands(),o.subscribeEvents(),o}return __extends(e,t),e.prototype.registerCommands=function(){var t=this;this.app.command("ShowCoordinateActions").register(this,function(e){void 0!=e&&t.coordinateActionsView&&(t.menuContext.set(e),t.coordinateActionsView.title.set(t.app.getResource(t.libraryId,"language-plotcoordinates-coordinate-actions-title").format(e)),t.app.command("ActivateView").execute(t.coordinateActionsView.id))}),this.app.command("HideCoordinateActions").register(this,function(){t.coordinateActionsView&&t.coordinateActionsView.isActive&&t.app.command("DeactivateView").execute(t.coordinateActionsView.id)})},e.prototype.subscribeEvents=function(){var t=this;this.app.event("CoordinateDeletedEvent").subscribe(this,function(e){e.coordinateId===t.menuContext.get()&&t.coordinateActionsView.isActive&&t.app.command("DeactivateView").execute(t.coordinateActionsView.id)})},e}(i.MenuViewModel);e.CoordinateActionsViewModel=o})},"url:/Mapping/modules/PlotCoordinates/PlotCoordinatesView.html":'<div class="coordinate-list-actions-widget" data-binding="{@widget: CoordinatesListActionsWidget}{@widget-context: @context}{@widget-required: false}"\r\n     data-menu-id="CoordinatesListActions" data-menu-template="Mapping/infrastructure/menus/MenuHyperlinkView.html"></div>\r\n\r\n<div class="plot-coordinates">\r\n    <div class="coord-sys-switcher" data-binding="{@visible: isEnabled}{@source: coordinatesModel}">\r\n        <label class="coord-sys-label" data-binding="{@template-for: coordinatesModel}">\r\n            <label class="coord-select-label" for="coord-select-input" data-binding="{@text: @language-plotcoordinates-coordinates-label}"></label>\r\n            <select id="coord-select-input" data-binding="{@source: coordinateSystems}{@value: currentCoordinateSystem}{title: @language-plotcoordinates-coordinate-system-selector}">\r\n                <option data-binding="{@template-for: coordinateSystems}{@text: displayName}{@attach: @context}" />\r\n            </select>\r\n        </label>\r\n    </div>\r\n\r\n    <ul class="coord-list" data-binding="{@source: coordinateDescriptors}{@var: coordList}">\r\n        <li class="coord-item" data-binding="{@template-for: coordinateDescriptors}">\r\n            <div class="coord-contents editing" data-binding="{@visible: isEditing}{@event-keydown: handleKeyDown}">\r\n                <div class="coord-ref-label" data-binding="{@text: id}"></div>\r\n                <div class="coord-group">\r\n                    <label class="coord-label" data-binding="{@text: xLabel}"></label>\r\n                    <div class="coord-inputs" data-binding="{class: coordClass}">\r\n                        <input type="text" class="coord-val coord-xy" data-binding="{@hidden: showDegree}{@value: outputX}{title: @language-plotcoordinates-x-title}" />\r\n\r\n                        <input type="text" class="coord-val coord-degrees" data-binding="{@visible: showDegree}{@value: degreeLat}{title: @language-plotcoordinates-degrees-title}" />\r\n                        <span class="field-sym" data-binding="{@visible: showDegree}{@text: degreeSymbol}"></span>\r\n\r\n                        <input type="text" class="coord-val coord-min" data-binding="{@visible: showMinute}{@value: minuteLat}{title: @language-plotcoordinates-minutes-title}" />\r\n                        <span class="field-sym" data-binding="{@visible: showMinute}{@text: minuteSymbol}"></span>\r\n\r\n                        <input type="text" class="coord-val coord-sec" data-binding="{@visible: showSecond}{@value: secondLat}{title: @language-plotcoordinates-seconds-title}" />\r\n                        <span class="field-sym" data-binding="{@visible: showSecond}{@text: secondSymbol}"></span>\r\n\r\n                        <input type="text" class="coord-val coord-bearing" data-binding="{@visible: showDegree}{@value: bearingLat}{title: @language-plotcoordinates-bearing-title}" />\r\n                    </div>\r\n                </div>\r\n                <div class="coord-group">\r\n                    <label class="coord-label" data-binding="{@text: yLabel}"></label>\r\n                    <div class="coord-inputs" data-binding="{class: coordClass}">\r\n                        <input type="text" class="coord-val coord-xy" data-binding="{@hidden: showDegree}{@value: outputY}{title: @language-plotcoordinates-y-title}" />\r\n\r\n                        <input type="text" class="coord-val coord-degrees" data-binding="{@visible: showDegree}{@value: degreeLon}{title: @language-plotcoordinates-degrees-title}" />\r\n                        <span class="field-sym" data-binding="{@visible: showDegree}{@text: degreeSymbol}"></span>\r\n\r\n                        <input type="text" class="coord-val coord-min" data-binding="{@visible: showMinute}{@value: minuteLon}{title: @language-plotcoordinates-minutes-title}" />\r\n                        <span class="field-sym" data-binding="{@visible: showMinute}{@text: minuteSymbol}"></span>\r\n\r\n                        <input type="text" class="coord-val coord-sec" data-binding="{@visible: showSecond}{@value: secondLon}{title: @language-plotcoordinates-seconds-title}" />\r\n                        <span class="field-sym" data-binding="{@visible: showSecond}{@text: secondSymbol}"></span>\r\n\r\n                        <input type="text" class="coord-val coord-bearing" data-binding="{@visible: showDegree}{@value: bearingLon}{title: @language-plotcoordinates-bearing-title}" />\r\n                    </div>\r\n                </div>\r\n                <div class="form-btns">\r\n                    <button class="button" data-binding="{@visible: isNew}{title: @language-plotcoordinates-add-coordinate-button-title}{@text: @language-plotcoordinates-add-coordinate-button-text}{@event-click: handleAddCoordinateClick}"></button>\r\n                    <button class="button" data-binding="{@hidden: isNew}{title: @language-plotcoordinates-update-coordinate-button-title}{@text: @language-plotcoordinates-update-coordinate-button-text}{@event-click: handleUpdateCoordinateClick}"></button>\r\n                    <button class="button" data-binding="{title: @language-plotcoordinates-cancel-add-coordinate-button-title}{@text: @language-plotcoordinates-cancel-add-coordinate-button-text}{@event-click: handleCancelAddCoordinateClick}"></button>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="coord-contents plotted" data-binding="{@hidden: isEditing}{@noclass-coord-hidden: isVisible}">\r\n                <button class="item-contents" data-binding="{@event-click: handleCoordinateItemClick}">\r\n                    <span class="coord-ref-label" data-binding="{@text: id}"></span>\r\n                    <span class="coord-group">\r\n                        <span class="coord-label" data-binding="{@text: xLabel}"></span>\r\n                        <span class="coord-inputs">\r\n                            <span class="coord-val" data-binding="{@text: xVal}"></span>\r\n                        </span>\r\n                    </span>\r\n                    <span class="coord-group">\r\n                        <span class="coord-label" data-binding="{@text: yLabel}"></span>\r\n                        <span class="coord-inputs">\r\n                            <span class="coord-val" data-binding="{@text: yVal}"></span>\r\n                        </span>\r\n                    </span>\r\n                </button>\r\n                <div class="item-actions">\r\n                    <button class="more-24" data-binding="{title: @language-plotcoordinates-actions-tooltip}{@event-click: handleCoordinateActions}"></button>\r\n                </div>\r\n            </div>\r\n        </li>\r\n    </ul>\r\n\r\n    <div class="no-coordinates" data-binding="{@hidden: hasCoordinates}{@text: @language-plotcoordinates-no-coordinates}"></div>\r\n    <div class="add-coordinate">\r\n        <button class="list-menu-item" data-binding="{@class-add-disabled: currentlyEditing}{disabled: currentlyEditing}{@event-click: handleClickAddAnotherCoordinate}">\r\n            <img class="list-menu-icon" src="Resources/Images/Icons/add-24.png" alt=" " />\r\n            <span class="list-menu-desc" data-binding="{@text: @language-plotcoordinates-add-another-coordinate}"></span>\r\n        </button>\r\n    </div>\r\n</div>',"url:/Mapping/modules/PlotCoordinates/CoordinateActions/CoordinateActionsView.html":'<div class="panel-group no-item" data-binding="{@hidden: visibleMenuItems}{@text: @language-plotcoordinates-no-coordinate-actions}"></div>\r\n\r\n<ul class="panel-group list-menu" data-binding="{@visible: visibleMenuItems}{@source: visibleMenuItems}">\r\n    <li class="list-menu-item active has-icon" data-binding="{@template-for: visibleMenuItems}{@enabled: canExecute}">\r\n        <button class="list-menu-button" data-binding="{@event-onmouseover: getDescription}{@event-onclick: handleMenuItemClick}">\r\n            <img class="list-menu-icon" data-binding="{@visible: iconUri}{src: iconUri}" alt=" ">\r\n            <span class="list-menu-details">\r\n                <strong class="list-menu-name" data-binding="{@text: text}"></strong>\r\n                <span class="list-menu-desc" data-binding="{@text: description}"></span>\r\n            </span>\r\n        </button>\r\n    </li>\r\n</ul>\r\n'}}),define(["Mapping/modules/PlotCoordinates/CoordinateDescriptor","Mapping/modules/PlotCoordinates/CoordinatesFscIntegration","Mapping/modules/PlotCoordinates/PlotCoordinatesModule","Mapping/modules/PlotCoordinates/PlotCoordinatesView","Mapping/modules/PlotCoordinates/PlotCoordinatesViewModel","Mapping/modules/PlotCoordinates/CoordinateActions/CoordinateActionsView","Mapping/modules/PlotCoordinates/CoordinateActions/CoordinateActionsViewModel"],function(t,e,i,o,n,r,a){shim(t,"geocortex.essentialsHtmlViewer.mapping.modules.plotCoordinates.CoordinateDescriptor",t.CoordinateDescriptor),shim(e,"geocortex.essentialsHtmlViewer.mapping.modules.plotCoordinates.CoordinatesFscIntegration",e.CoordinatesFscIntegration),shim(i,"geocortex.essentialsHtmlViewer.mapping.modules.plotCoordinates.PlotCoordinatesModule",i.PlotCoordinatesModule),shim(o,"geocortex.essentialsHtmlViewer.mapping.modules.plotCoordinates.PlotCoordinatesView",o.PlotCoordinatesView),shim(n,"geocortex.essentialsHtmlViewer.mapping.modules.plotCoordinates.PlotCoordinatesViewModel",n.PlotCoordinatesViewModel),shim(r,"geocortex.essentialsHtmlViewer.mapping.modules.plotCoordinates.CoordinateActionsView",r.CoordinateActionsView),shim(a,"geocortex.essentialsHtmlViewer.mapping.modules.plotCoordinates.CoordinateActionsViewModel",a.CoordinateActionsViewModel)});