!function(){var t="<div class='timeslider-settings'>        <span class='info-message' data-binding='{@visible: sliderSettingsInfoMessage}{@text: sliderSettingsInfoMessage}{title: sliderSettingsInfoMessage}'></span>    <div class='form-item'>        <label class='form-label'>            <span data-binding='{@text: @language-timeslider-settings-timeslider-profiles}'></span>            <select data-binding='{@source: timeSliders}{@value: selectedSliderId}{title: @language-timeslider-profile-select-title}'>                <option data-binding='{@template-for: timeSliders}{value: id}{@text: displayName}' />            </select>        </label>    </div>    <div class='form-item'>        <label class='form-label'>            <span data-binding='{@text: @language-timeslider-settings-timeslider-mode}'></span>            <select data-binding='{@source: sliderModes}{@value: selectedSliderMode}{title: @language-timeslider-mode-select-title}'>                <option data-binding='{@template-for: sliderModes}{value: mode}{@text: displayName}' />            </select>        </label>    </div>    <div class='form-item'>        <label class='form-label'>            <span data-binding='{@text: @language-timeslider-settings-time-interval}{title: @language-timeslider-time-interval-title}'></span>            <input type='number' min='1' data-binding='{@value: timeInterval}' />        </label>\t\t<span class='time-settings-error-message' data-binding='{@visible: sliderSettingsTimeIntervalError}{@text: sliderSettingsTimeIntervalError}'></span>    </div>    <div class='form-item'>        <label class='form-label'>            <span data-binding='{@text: @language-timeslider-settings-time-interval-unit}'></span>            <select data-binding='{@source: timeIntervalUnits}{@value: selectedTimeIntervalUnit}{title: @language-timeslider-time-interval-unit-title}'>                <option data-binding='{@template-for: timeIntervalUnits}{value: timeIntervalUnit}{@text: displayName}' />            </select>        </label>    </div>    <div class='form-item'>        <label class='form-label'>            <span data-binding='{@text: @language-timeslider-settings-playback-delay}{title: @language-timeslider-playback-delay-title}'></span>            <input type='number' min='1' data-binding='{@value: playbackDelaySeconds}' />        </label>\t\t<span class='time-settings-error-message' data-binding='{@visible: sliderSettingsPlaybackDelayError}{@text: sliderSettingsPlaybackDelayError}'></span>    </div>    <div class='form-item'>        <label class='form-label'>            <input class='checkbox' type='checkbox' data-binding='{@value: loopPlayback}' />            <span class='checkbox-label' data-binding='{@text: @language-timeslider-loop-playback-checkbox}'></span>        </label>    </div></div>",i="<div class='timeslider-container'>    <div class='current-profile-title' data-binding='{@visible: currentProfile}{@text: currentProfile}{title: currentProfile}'></div>    <div class='main-row'>        <div class='slider-widget' data-binding='{@widget: TimeSliderElement}{@widget-context: sliderViewModel}{@widget-required: false}{@widget-replace: true}' tabindex='0'></div>        <div class='slider-actions-toggle item-actions'>            <button data-binding='{@noclass-chevron-down-24: showActionsContainer}{@class-chevron-up-24: showActionsContainer}{title: @language-timeslider-show-actions-tooltip}{@event-click: handleToggleActionsContainer}'></button>        </div>    </div>    <div class='actions-container' data-binding='{@visible: showActionsContainer}'>        <div class='info-message' data-binding='{@visible: infoMessage}{@text: infoMessage}{title: infoMessage}'></div>        <div class='slider-date-pickers'>            <div class='slider-start-date-picker' data-binding='{@widget: DatePickerFormItem}{@widget-context: startDateViewModel}{title: @language-timeslider-start-time-select-tooltip}'></div>            <div class='slider-start-to-end-date-label' data-binding='{@text: @language-timeslider-start-to-end-date-label}'></div>            <div class='slider-end-date-picker' data-binding='{@widget: DatePickerFormItem}{@widget-context: endDateViewModel}{title: @language-timeslider-end-time-select-tooltip}'></div>        </div>        <div class='gcx-error-message' data-binding='{@visible: datePickerErrorMessage}'>            <span data-binding='{@text: datePickerErrorMessage}{title: datePickerErrorMessage}'></span>        </div>        <ul class='slider-actions'>            <li class='list-menu-item'>                <button class='slider-actions-button' data-binding='{@class-stop-timeline-24: isPlayingBack}{@noclass-play-timeline-24: isPlayingBack}{title: @language-timeslider-play-timeline-tooltip}{@event-click: handlePlayTimelineClick}'>                        <img src='Resources/Images/Icons/playback-play-24.png' data-binding='{@hidden: isPlayingBack}{alt: @language-timeslider-playback-play}' />                        <img src='Resources/Images/Icons/playback-stop-24.png' data-binding='{@visible: isPlayingBack}{alt: @language-timeslider-playback-stop}' />                        <span class='action-label' data-binding='{@hidden: isPlayingBack}{@text: @language-timeslider-play-timeline-button-label}'></span>                        <span class='action-label' data-binding='{@visible: isPlayingBack}{@text: @language-timeslider-stop-timeline-button-label}'></span>                </button>            </li>            <li class='list-menu-item'>                <button class='slider-actions-button' data-binding='{title: @language-timeslider-step-back-tooltip}{@event-click: handleStepBackClick}'>                        <img src='Resources/Images/Icons/playback-previous-24.png' data-binding='{alt: @language-timeslider-playback-previous}'/>                        <span class='action-label' data-binding='{@text: @language-timeslider-step-back-button-label}'></span>                </button>            </li>            <li class='list-menu-item'>                <button class='slider-actions-button' data-binding='{title: @language-timeslider-step-forward-tooltip}{@event-click: handleStepForwardClick}'>                        <img src='Resources/Images/Icons/playback-next-24.png' data-binding='{alt: @language-timeslider-playback-next}'/>                        <span class='action-label' data-binding='{@text: @language-timeslider-step-forward-button-label}'></span>                </button>            </li>            <li class='list-menu-item'>                <button class='slider-actions-button' data-binding='{title: @language-timeslider-more-settings-tooltip}{@event-click: handleMoreActionsClick}'>                        <img src='Resources/Images/Icons/Toolbar/more-24.png' data-binding='{alt: @language-timeslider-playback-more}' />                        <span class='action-label' data-binding='{@text: @language-timeslider-more-settings-button-label}'></span>                </button>            </li>            <li class='list-menu-item'>                <button class='slider-actions-button' data-binding='{title: @language-timeslider-close-timeline-tooltip}{@event-click: handleCloseClick}'>                        <img src='Resources/Images/Icons/close-24.png' data-binding='{alt: @language-timeslider-playback-close}'/>                        <span class='action-label' data-binding='{@text: @language-timeslider-close-timeline-button-label}'></span>                </button>            </li>        </ul>    </div></div>";function l(e,t,i){if("string"==typeof e&&(i=t,t=e),void 0!==i)for(var a=t.split("."),l=null,s=window,n=0,r=a.length;n<r;n++)l=a[n],n==r-1?s[l]=i:s[l]||(s[l]={}),s=s[l];else console.warn("Undefined shim for: "+t)}require({cache:{"Mapping/modules/TimeSlider/TimeSliderModule":function(){var a,n=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","geocortex/framework/application/ModuleBase"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,l=(a=i.ModuleBase,n(s,a),s.prototype.getStateFilter=function(){return{isActive:!0,showActionsContainer:!0,selectedSliderId:!0,sliderMode:!0,timeIntervalOverride:!0,timeIntervalUnitOverride:!0,sliderCurrentStartDate:!0,sliderCurrentEndDate:!0,timeSliderViewActive:!0,playbackDelaySeconds:!0,loopPlayback:!0,timeSliderSettingsViewActive:!0}},s.prototype.exportState=function(){var e=this,t={isActive:!1,showActionsContainer:!1,selectedSliderId:null,sliderMode:null,timeIntervalOverride:0,timeIntervalUnitOverride:null,sliderCurrentStartDate:0,sliderCurrentEndDate:0,playbackDelaySeconds:0,loopPlayback:!1,timeSliderViewActive:!1,timeSliderSettingsViewActive:!1};return Promise.try(function(){return e.app.command("_ExportTimeSliderState").execute(t),t})},s.prototype.applyState=function(e){var t=this,i={state:e,completePromise:null};return this.app.waitUntilAllLibrariesLoaded().then(function(){return t.app.command("_ApplyTimeSliderState").execute(i),i.completePromise})},s);function s(){return null!==a&&a.apply(this,arguments)||this}t.TimeSliderModule=l})},"Mapping/modules/TimeSlider/TimeSliderSettingsView":function(){var a,n=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,l=(a=i.ViewBase,n(s,a),s.prototype.registerCommands=function(){var e=this;this.app.command("ShowTimeSliderSettings").register(this,function(){return e.app.command("ActivateView").execute(e.id)}),this.app.command("HideTimeSliderSettings").register(this,function(){return e.isActive&&e.app.command("DeactivateView").execute(e.id)}),this.app.command("_ExportTimeSliderState").register(this,this._exportState)},s.prototype._exportState=function(e){e.timeSliderSettingsViewActive=this.isActive},s);function s(e,t){var i=a.call(this,e,t)||this;return i.registerCommands(),i}t.TimeSliderSettingsView=l})},"Mapping/modules/TimeSlider/TimeSliderState":function(){define(["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})},"Mapping/modules/TimeSlider/TimeSliderView":function(){var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","geocortex/framework/ui/ViewBase","geocortex/essentials/TimeSliderMode"],function(e,t,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s=(a=i.ViewBase,r(n,a),n.prototype.registerCommands=function(){var e=this;this.app.command("ToggleTimeSliderActions").register(this,function(){return e.viewModel&&e.viewModel.showActionsContainer.set(!e.viewModel.showActionsContainer.get())}),this.app.command("HideTimeSlider").register(this,function(){return e.app.command("DeactivateView").execute(e.id)}),this.app.command("_ExportTimeSliderState").register(this,this._exportState)},n.prototype.subscribeEvents=function(){this._appResizeToken||(this._appResizeToken=this.app.event("ApplicationResizedEvent").subscribe(this,this._handleApplicationResizedEvent))},n.prototype.attach=function(e){e&&(e.selectedSliderMode.bind(this,this._handleSliderModeChanged),this._viewModelEnabledToken=e.isEnabled.bind(this,this._onViewModelEnabled),this._onViewModelEnabled(this.viewModel.isEnabled.get()),a.prototype.attach.call(this,e))},n.prototype.onDestroy=function(){a.prototype.onDestroy.call(this),this._appResizeToken&&(this.app.event("ApplicationResizedEvent").unsubscribe(this._appResizeToken),this._appResizeToken=null)},n.prototype.resolveWidget=function(e,t,i){if(t)switch(e){case"TimeSliderElement":var a=this.app.viewManager.createView({markupResource:"Mapping/infrastructure/ui/components/Slider/SliderView.html",libraryId:"Mapping.Infrastructure",typeName:"geocortex.essentialsHtmlViewer.mapping.infrastructure.ui.components.Slider.SliderViewBase",isVisible:!0});return a&&a.attach(t),this._sliderView=a;default:return}},n.prototype.handleToggleActionsContainer=function(e,t,i){this.viewModel.isEnabled.get()&&(this._handleSliderModeChanged(this.viewModel.selectedSliderMode.get()),this.app.command("ToggleTimeSliderActions").execute())},n.prototype.handlePlayTimelineClick=function(e,t,i){this.viewModel.isEnabled.get()&&(this.viewModel.isPlayingBack.get()?this.viewModel.stopPlayTimeline():this.viewModel.playTimeline())},n.prototype.handleStepBackClick=function(e,t,i){this.viewModel.isEnabled.get()&&(this.viewModel.stepBack(),this._refreshSliderLabelPositions())},n.prototype.handleStepForwardClick=function(e,t,i){this.viewModel.isEnabled.get()&&(this.viewModel.stepForward(),this._refreshSliderLabelPositions())},n.prototype.handleMoreActionsClick=function(e,t,i){this.viewModel.isEnabled.get()&&this.app.behavior("TimeSliderMoreSettingsActionInvokedBehavior").run()},n.prototype.handleCloseClick=function(e,t,i){this.viewModel.stopPlayTimeline(),this.app.behavior("TimeSliderCloseTimelineActionInvokedBehavior").run()},n.prototype._onViewModelEnabled=function(e){e&&(this._viewModelEnabledToken&&(this.viewModel.isEnabled.unbind(this._viewModelEnabledToken),this._viewModelEnabledToken=null),this.viewModel.isActive.bind(this,this._onTimeSliderActivated),this.subscribeEvents(),this._onTimeSliderActivated(this.viewModel.isActive.get()))},n.prototype._onTimeSliderActivated=function(e){e?(this.app.viewManager.activateView(this),this._refreshSliderLabelPositions()):(this.viewModel.stopPlayTimeline(),this.app.behavior("TimeSliderCloseTimelineActionInvokedBehavior").run(),this.app.viewManager.deactivateView(this))},n.prototype._handleApplicationResizedEvent=function(){this.viewModel.isEnabled.get()&&(this._refreshSliderLabelPositions(),this.isActive&&($(".slider-start-date-picker .hasDatepicker.gcxDatepicker",this.root).datepicker("hide"),$(".slider-end-date-picker .hasDatepicker.gcxDatepicker",this.root).datepicker("hide")))},n.prototype._refreshSliderLabelPositions=function(){this._sliderView&&this._sliderView.refreshLabelPositions()},n.prototype._handleSliderModeChanged=function(e){var t=this;if("string"!=typeof e){var i=function(e){e?$(".slider-start-date-picker",t.root).addClass("disable-date-picker"):$(".slider-start-date-picker",t.root).removeClass("disable-date-picker"),$(".slider-start-date-picker :input",t.root).prop("disabled",e),$(".slider-start-date-picker .hasDatepicker.gcxDatepicker",t.root).prop("disabled",e),$(".slider-start-date-picker .ui-datepicker-trigger",t.root).prop("disabled",e)},a=function(e){e?$(".slider-end-date-picker",t.root).addClass("disable-date-picker"):$(".slider-end-date-picker",t.root).removeClass("disable-date-picker"),$(".slider-end-date-picker :input",t.root).prop("disabled",e),$(".slider-end-date-picker .hasDatepicker.gcxDatepicker",t.root).prop("disabled",e),$(".slider-end-date-picker .ui-datepicker-trigger",t.root).prop("disabled",e)};e===l.TimeSliderMode.Instant?(i(!1),a(!0)):(e===l.TimeSliderMode.Cumulative?i(!0):i(!1),a(!1))}},n.prototype._exportState=function(e){e.timeSliderViewActive=this.isActive},n);function n(e,t){var i=a.call(this,e,t)||this;return i._sliderView=null,i._appResizeToken=null,i._viewModelEnabledToken=null,i.registerCommands(),i}t.TimeSliderView=s})},"Mapping/modules/TimeSlider/TimeSliderViewModel":function(){var a,u=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","geocortex/infrastructure/ui/components/Slider/SliderViewModelBase","geocortex/forms/items/DatePickerFormItem","geocortex/infrastructure/DateFormat","geocortex/essentials/TimeSliderMode","geocortex/essentials/TimeUnits","geocortex/forms/items/TimePickerFormItem","geocortex/infrastructure/TimeSliderUtils","geocortex/infrastructure/FormatUtils","geocortex/essentials/utilities/TimeZoneUtils"],function(e,t,i,a,l,s,n,S,r,d,v,o,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c,g=(c=i.ViewModelBase,u(p,c),p.prototype.initialize=function(t){var i=this;t&&(this._enabledInConfig=void 0===t.enabled||null===t.enabled||!!t.enabled,this._animateSlider=void 0===t.animateSlider||null===t.animateSlider||!!t.animateSlider,this._activateSliderOnStartup=void 0===t.activateOnStartup||null===t.activateOnStartup||!!t.activateOnStartup,this._maxSignificantTimeExtentDisplayUnits=void 0!==t.maxTimeExtentDisplayUnits&&null!==t.maxTimeExtentDisplayUnits&&parseInt(t.maxTimeExtentDisplayUnits,10)||3,this._noOfflineSupportStatusMsgSecs=void 0!==t.noOfflineSupportStatusMsgTimeoutSecs&&null!==t.noOfflineSupportStatusMsgTimeoutSecs&&parseInt(t.noOfflineSupportStatusMsgTimeoutSecs,10)||10),this.app.waitUntilSiteInitialized().then(function(){if(i._populateTimeSliderProfiles()){var e=i.selectedTimeSlider.get()||i.timeSliders.getAt(0);i.selectedTimeSlider.set(e)}i.app.site&&i.app.site.serviceLayersLoaded?i._onSiteServiceLayersLoaded(t):i.app.event("SiteServiceLayersLoadedEvent").once(i,function(){return i._onSiteServiceLayersLoaded(t)})}),this.app.event("ProjectLoadingEvent").subscribe(this,function(){return i.app.command("DeactivateTimeSlider").execute()})},p.prototype.registerCommands=function(){var t=this;this.app.command("ActivateTimeSlider").register(this,this._activateTimeSliderCommandImpl,this._canExecuteActivateTimeSlider),this.app.command("DeactivateTimeSlider").register(this,this._deactivateTimeSliderCommandImpl,this._canExecuteDeactivateTimeSlider),this.app.command("StartTimeSliderPlayback").register(this,this._startTimeSliderPlaybackCommandImpl,this._canExecuteStartTimeSliderPlayback),this.app.command("StopTimeSliderPlayback").register(this,this._stopTimeSliderPlaybackCommandImpl,this._canExecuteStopTimeSliderPlayback),this.app.command("StepTimeSliderForward").register(this,this._stepTimeSliderForwardCommandImpl,this._canExecuteStepTimeSliderForward),this.app.command("StepTimeSliderBack").register(this,this._stepTimeSliderBackCommandImpl,this._canExecuteStepTimeSliderBack),this.app.command("SetTimeSliderProfile").register(this,this._setTimeSliderProfileCommandHandler,this._canExecuteSetTimeSliderProfile),this.isEnabled.bind(this,function(e){t.app.command("StartTimeSliderPlayback").raiseCanExecuteChanged(),t.app.command("StopTimeSliderPlayback").raiseCanExecuteChanged(),t.app.command("StepTimeSliderForward").raiseCanExecuteChanged(),t.app.command("StepTimeSliderBack").raiseCanExecuteChanged(),t.app.command("SetTimeSliderProfile").raiseCanExecuteChanged()}),this.app.command("_ExportTimeSliderState").register(this,this._exportState),this.app.command("_ApplyTimeSliderState").register(this,this._applyState),this.app.command("_runCallbackWithTimeSliderState").register(this,function(e){e(t.selectedTimeSlider.get()||t.timeSliders.getAt(0))})},p.prototype.handleSliderItemSlide=function(e,t){var s=this;if(this.sliderViewModel.get()||this.app.trace.error("TimeSliderViewModel: Failed to set time extent for the Time Slider. Slider ViewModel undefined."),this.app.map.timeExtent){var i=this.sliderViewModel.get().sliderMinHandleCurrentItem.get(),n=i?i.value:null;if(null===n||isNaN(parseInt(n,10)))this.app.trace.error("TimeSliderViewModel: Failed to set time extent for the Time Slider. Minimum time not defined.");else{var a=this.sliderViewModel.get().sliderMaxHandleCurrentItem.get(),r=a?a.value:null,l=this._applyTimezoneOffset(new Date(n)),d=null===r?null:this._applyTimezoneOffset(new Date(r));0===t?this.startDateViewModel.get()&&(this.startDateViewModel.get().date.set(l),this.startDateViewModel.pulse()):this.sliderViewModel.get().range&&null!==d&&this.endDateViewModel.get()&&(this.endDateViewModel.get().date.set(d),this.endDateViewModel.pulse()),this._updateCurrentlyDisplayedTimeExtent(n,r),this._mapTimeExtentSetTimeoutToken&&clearTimeout(this._mapTimeExtentSetTimeoutToken),this._mapTimeExtentSetTimeoutToken=setTimeout(function(){var e=new esri.TimeExtent(new Date(n),s.sliderViewModel.get().range?new Date(r):new Date(n)),t=s.app.map.timeExtent.startTime.getTime(),i=s.app.map.timeExtent.endTime.getTime(),a=e.startTime.getTime(),l=e.endTime.getTime();t===a&&i===l||(s.app.map.setTimeExtent(e),s._fireTimeSliderFrameChangedEvent())},this._mapTimeExtentSetDelayMs)}}},p.prototype.stepForward=function(){if(!this.sliderViewModel.get())return this.app.trace.error("TimeSliderViewModel: Could not step forward in time. Slider ViewModel not defined."),!1;if(this.sliderViewModel.get().range){if(this.sliderViewModel.get().setNextSliderItem(1)){if(this.selectedSliderMode.get()===S.TimeSliderMode.Extent)return this.sliderViewModel.get().setNextSliderItem(0);if(this.selectedSliderMode.get()===S.TimeSliderMode.Cumulative)return!0}return!1}return this.sliderViewModel.get().setNextSliderItem(0)},p.prototype.stepBack=function(){return this.sliderViewModel.get()?this.sliderViewModel.get().range?this.selectedSliderMode.get()===S.TimeSliderMode.Cumulative?this.sliderViewModel.get().setPreviousSliderItem(1):this.selectedSliderMode.get()===S.TimeSliderMode.Extent&&!!this.sliderViewModel.get().setPreviousSliderItem(0)&&this.sliderViewModel.get().setPreviousSliderItem(1):this.sliderViewModel.get().setPreviousSliderItem(0):(this.app.trace.error("TimeSliderViewModel: Could not step back in time. Slider ViewModel not defined."),!1)},p.prototype._fireTimeSliderFrameChangedEvent=function(){this.app.event("TimeSliderFrameChangedEvent").publish(this.selectedTimeSlider.get())},p.prototype.playTimeline=function(){var a=this,l=this.sliderViewModel.get();if(l){if(!this.isPlayingBack.get()){this.isPlayingBack.set(!0),this.app.event("TimeSliderPlayTimelineStartedEvent").publish(this.selectedTimeSlider.get());var s=!0,n=null,r=function(){if(s=a.stepForward(),l.range&&(n=null!==n?n:l.getRawSliderValueForItem(l.sliderMaxHandleCurrentItem.get())-l.getRawSliderValueForItem(l.sliderMinHandleCurrentItem.get())),!s&&a.loopPlayback.get()){var e=l.isNumeric?l.numericSliderMinVal:0,t=l.getSliderItemByRawSliderValue(e);if(l.range){var i=a.selectedSliderMode.get()===S.TimeSliderMode.Cumulative?l.getNextActiveSliderItem(t):l.getSliderItemByRawSliderValue(n+e);a.selectedSliderMode.get()===S.TimeSliderMode.Extent&&l.setSelectedSliderItem(0,t),l.setSelectedSliderItem(1,i)}else l.setSelectedSliderItem(0,t);s=!0}a.isPlayingBack.get()&&s?a._playTimelineTimeoutToken=setTimeout(r,1e3*a._playbackDelaySeconds):a.stopPlayTimeline()};setTimeout(r,1e3*this._playbackDelaySeconds)}}else this.app.trace.error("TimeSliderViewModel: Could not play timeline. Slider ViewModel not defined.")},p.prototype.stopPlayTimeline=function(){null!==this._playTimelineTimeoutToken&&(clearTimeout(this._playTimelineTimeoutToken),this._playTimelineTimeoutToken=null),this.isPlayingBack.set(!1),this.app.event("TimeSliderPlayTimelineStoppedEvent").publish(this.selectedTimeSlider.get())},p.prototype._activateTimeSliderCommandImpl=function(){this._activateTimeSlider()},p.prototype._canExecuteActivateTimeSlider=function(){return this.isEnabled.get()&&!this.app.isOffline.get()},p.prototype._deactivateTimeSliderCommandImpl=function(){this._deactivateTimeSlider()},p.prototype._canExecuteDeactivateTimeSlider=function(){return!0},p.prototype._startTimeSliderPlaybackCommandImpl=function(){this.playTimeline()},p.prototype._canExecuteStartTimeSliderPlayback=function(){return this.isEnabled.get()},p.prototype._stopTimeSliderPlaybackCommandImpl=function(){this.stopPlayTimeline()},p.prototype._canExecuteStopTimeSliderPlayback=function(){return this.isEnabled.get()},p.prototype._stepTimeSliderForwardCommandImpl=function(){this.stepForward()},p.prototype._canExecuteStepTimeSliderForward=function(){return this.isEnabled.get()},p.prototype._stepTimeSliderBackCommandImpl=function(){this.stepBack()},p.prototype._canExecuteStepTimeSliderBack=function(){return this.isEnabled.get()},p.prototype._canExecuteSetTimeSliderProfile=function(e){return this.isEnabled.get()},p.prototype._onSiteServiceLayersLoaded=function(e){var t=this;this.isEnabled.set(this._enabledInConfig&&0<this.timeSliders.getLength()),this.isEnabled.get()&&this.app.map&&(this._setupBindings(),this._initializeDatePickerViewModels(),this.app.map.on("time-extent-change",function(e){return t._handleMapTimeExtentChanged(e.timeExtent)}),this._activateSliderOnStartup&&this.app.waitUntilApplicationReady().then(function(){t._activateTimeSlider()}))},p.prototype._activateTimeSlider=function(){if(this.isEnabled.get()&&!this.app.isOffline.get()){var e=this.selectedTimeSlider.get()||this.timeSliders.getAt(0);if(e&&e.timeExtent){var t=e.initialTimeExtent||e.timeExtent;t&&this.app.map.setTimeExtent(new esri.TimeExtent(t.startTime,t.endTime))}this.selectedTimeSlider.set(e),this.isActive.set(!0)}else this.isActive.set(!1)},p.prototype._deactivateTimeSlider=function(){var e=this;if(this.isActive.get()){if(this.app.map&&this.app.map.timeExtent){var t,i=this.timeSliders.getAt(0);if(i&&(t=new esri.TimeExtent(this.app.map.timeExtent.startTime,this.app.map.timeExtent.endTime),i.initialTimeExtent=t),!this.app.isOffline.get()||this.app.isOffline.get()&&!this.app.map.updating)this.app.map.setTimeExtent(t);else var a=this.app.map.on("update-end",function(){a.remove(),e.app.map.setTimeExtent(t)})}this.isActive.set(!1)}else this.isActive.pulse()},p.prototype._setupBindings=function(){var t=this;this.selectedTimeSlider.bind(this,this._setTimeSliderProfileImpl),this.selectedSliderId.bind(this,this.handleSliderIdChange),this.displayFormat.bind(this,function(e){return t.startDateViewModel.get().dateFormat.set(e)}),this.displayFormat.bind(this,function(e){return t.endDateViewModel.get().dateFormat.set(e)}),this.startDateViewModel.get().date.bind(this,this._handleDatePickerStartDateChanged),this.endDateViewModel.get().date.bind(this,this._handleDatePickerEndDateChanged),this.selectedSliderMode.bind(this,this._handleSliderModeChanged),this.selectedTimeIntervalUnit.bind(this,this._handleTimeIntervalUnitChanged),this.timeInterval.bind(this,this._handleTimeIntervalChanged),this.playbackDelaySeconds.bind(this,this._handlePlaybackDelayChanged),this.app.isOffline.bind(this,this._handleIsOffline)},p.prototype._initializeDatePickerViewModels=function(){this._setupDatePickerViewModel(this.startDateViewModel.get()),this._setupDatePickerViewModel(this.endDateViewModel.get()),this.startDateViewModel.pulse(),this.endDateViewModel.pulse()},p.prototype._setupDatePickerViewModel=function(e){e.timePickerItem=new d.TimePickerFormItem(null,null),e.timePickerItem.jQueryPickerTimeAsInfoMsg.set(!0),e.includeTimePicker.set(!0),e.isRequired.set(!1),e.nullable.set(!1)},p.prototype._configureSliderViewModel=function(e,t,i,a){var l,s,n,r,d,o,m=this,c=null!=t?t:e.mode||this.selectedSliderMode.get(),g=e.timeExtent,p=e.initialTimeExtent;if(g&&g.startTime&&((d=g.startTime)instanceof Date||(d=new Date(d)),l=d.getTime()),g&&g.endTime&&((o=g.endTime)instanceof Date||(o=new Date(o)),s=o.getTime()),p&&p.startTime&&((d=p.startTime)instanceof Date||(d=new Date(d)),n=d.getTime()),p&&p.endTime&&((o=p.endTime)instanceof Date||(o=new Date(o)),r=o.getTime()),c===S.TimeSliderMode.Cumulative&&n!==l&&(n=l),c===S.TimeSliderMode.Instant&&r!==n&&(r=n),!this._validateSliderTimes(l,s,n,r))return!1;var u=null!=i?i:e.timeInterval||this.timeInterval.get(),h=a||e.timeIntervalUnit||this.selectedTimeIntervalUnit.get();this._sliderViewModelOnHandle&&this._sliderViewModelOnHandle.remove();var I={};I.range=c!==S.TimeSliderMode.Instant,I.animate=this._animateSlider,I.disableSnappingForNumericValues=!e.snapToTimeIntervals,I.lockMinSliderHandleAtMinVal=c===S.TimeSliderMode.Cumulative,I.sliderMinHandleAriaLabel=this.getResource("language-timeslider-range-mode-min-handle-aria-label"),I.sliderMaxHandleAriaLabel=this.getResource("language-timeslider-range-mode-max-handle-aria-label"),I.sliderSingleHandleAriaLabel=this.getResource("language-timeslider-instant-mode-single-handle-aria-label");var b=v.computeTimeIntervalInMs(u,h);s-l<=(b=isNaN(b)?1:b)?this.sliderSettingsInfoMessage.set(this.app.getResource(this.libraryId,"language-timeslider-settings-time-interval-exceeds-time-extent")):this.sliderSettingsInfoMessage.set("");var C=this.sliderViewModel.get();return this._sliderViewModelOnHandle=dojo.aspect.after(C,"sliderHandleSlide",function(e,t){return m.handleSliderItemSlide(e,t)},!0),C.initialize(I),C.setupDateSlider(l,s,u,h,function(e,t){return m.labelGenerator(e,t)},null,[n,r]),!0},p.prototype._populateTimeSliderProfiles=function(){var t=this;if(!this.app.site.hasTimeSliders||!this.app.site.timeSliders||!this.app.site.timeSliders.length)return!1;var e=this.app.site.timeSliders.filter(function(e){return t._validateProfile(e)});return 0!==e.length&&(this.timeSliders.set(e),!0)},p.prototype._setTimeSliderProfileCommandHandler=function(e){var t={profile:this.selectedTimeSlider.get(),isPlayingBack:this.isPlayingBack.get()};this.app.event("TimeSliderProfileChangingEvent").publish(t),this._setTimeSliderProfileImpl(e)},p.prototype._setTimeSliderProfileImpl=function(e){if(this.stopPlayTimeline(),this.selectedTimeSlider.get()&&void 0===e.id&&($.extend(this.selectedTimeSlider.get(),e),e=this.selectedTimeSlider.get()),e.timeExtent&&(!e.timeExtent.startTime||e.timeExtent.startTime instanceof Date||(e.timeExtent.startTime=new Date(e.timeExtent.startTime)),!e.timeExtent.endTime||e.timeExtent.endTime instanceof Date||(e.timeExtent.endTime=new Date(e.timeExtent.endTime))),e.initialTimeExtent)!e.initialTimeExtent.startTime||e.initialTimeExtent.startTime instanceof Date||(e.initialTimeExtent.startTime=new Date(e.initialTimeExtent.startTime)),!e.initialTimeExtent.endTime||e.initialTimeExtent.endTime instanceof Date||(e.initialTimeExtent.endTime=new Date(e.initialTimeExtent.endTime));else if(this.selectedTimeSlider.get()!==e){var t=$.extend({},e);return void this.selectedTimeSlider.set(t)}var i=e.mode;if(void 0===i||this.selectedSliderMode.get()===i){var a=e.timeInterval;if(void 0===a||this.timeInterval.get()===a){var l=e.timeIntervalUnit;if(void 0===l||this.selectedTimeIntervalUnit.get()===l)if(void 0!==e.id&&this.selectedSliderId.get()!==e.id&&this.selectedSliderId.set(e.id),this.displayFormat.set(e.displayFormat),this._configureSliderViewModel(e,this.selectedSliderMode.get(),this.timeInterval.get(),this.selectedTimeIntervalUnit.get())){this.currentProfile.set(e.displayName);var s=jQuery.extend({},e);this.app.event("TimeSliderProfileChangedEvent").publish(s)}else this.app.trace.error("TimeSliderViewModel: Could not set slider profile with name: {0}.".format(e.displayName));else this.selectedTimeIntervalUnit.set(l)}else this.timeInterval.set(a)}else this.selectedSliderMode.set(i)},p.prototype._updateCurrentlyDisplayedTimeExtent=function(e,t){this.infoMessage.set(""),null==e||null==t||isNaN(e)||isNaN(t)||this.infoMessage.set(this._formatMilliSecondsAsString(e,t,this._maxSignificantTimeExtentDisplayUnits))},p.prototype._defaultSliderLabelGenerator=function(e,t){var i=new Date(e);if(isNaN(e)||isNaN(i.getTime()))return this._invalidDateString;var a={timeZoneId:"",displayTimeZoneId:this.app.site.displayTimeZoneId};return o.formatDate(i,this.displayFormat.get(),a)},p.prototype._applyTimezoneOffset=function(e,t){void 0===t&&(t=!1);var i=m.UTC_ZONE_ID,a=this.app.site.displayTimeZoneId;return t?m.correctDatesToSubmitInDatabaseTime(e,i,a):m.correctDatesForDisplayInDisplayTimeZone(e,i,a)},p.prototype._validateSliderTimes=function(e,t,i,a){if(isNaN(parseInt(e,10))||isNaN(parseInt(t,10))||isNaN(parseInt(i,10))||isNaN(parseInt(a,10)))return!1;var l=!0;return l=(l=(l=l&&e<=t)&&i<=a)&&e<=i&&i<=t&&e<=a&&a<=t},p.prototype._validateTimeSliderAdditionalSettings=function(){var e=parseFloat(+this.timeInterval.get()),t=parseFloat(+this.playbackDelaySeconds.get()),i=isNaN(e)||e%1!=0||e<1,a=isNaN(t)||t%1!=0||t<1;this.sliderSettingsTimeIntervalError.set(i?this.app.getResource(this.libraryId,"language-timeslider-settings-time-interval-error"):""),this.sliderSettingsPlaybackDelayError.set(a?this.app.getResource(this.libraryId,"language-timeslider-settings-playback-delay-error"):"");var l=!i&&!a;return this.sliderSettingsInfoMessage.set(l?"":this.app.getResource(this.libraryId,"language-timeslider-settings-contains-errors")),l},p.prototype.handleSliderIdChange=function(t){if(!this.selectedTimeSlider.get()||this.selectedTimeSlider.get().id!==t){var e=this.timeSliders.get().filter(function(e){return e.id===t})[0];e&&this.selectedTimeSlider.set(e)}},p.prototype._handleDatePickerStartDateChanged=function(e){this._handleDatePickerDateChanged(!0,e)},p.prototype._handleDatePickerEndDateChanged=function(e){this._handleDatePickerDateChanged(!1,e)},p.prototype._handleDatePickerDateChanged=function(e,t){var i=this._applyTimezoneOffset(t,!0).getTime(),a=this.sliderViewModel.get();if(a){this.datePickerErrorMessage.set("");var l=a.sliderMinHandleCurrentItem.get()&&a.sliderMinHandleCurrentItem.get().value,s=a.sliderMaxHandleCurrentItem.get()&&a.sliderMaxHandleCurrentItem.get().value;this.selectedSliderMode.get()===S.TimeSliderMode.Instant?s=a.numericSliderMaxVal:this.selectedSliderMode.get()===S.TimeSliderMode.Cumulative&&(l=a.numericSliderMinVal);var n=e?l:s;if(null==n||n!==i){var r=a.numericSliderMinVal,d=a.numericSliderMaxVal;this._validateSliderTimes(r,d,e?i:l,e?s:i)?a.setSelectedSliderItem(e?0:1,a.getSliderItemByItemValue(i)):this.datePickerErrorMessage.set(this.app.getResource(this.libraryId,"language-timeslider-datepicker-range-error"))}}else this.app.trace.error("TimeSliderViewModel: Could not handle datepicker date change. Slider view model not defined.")},p.prototype._handleSliderModeChanged=function(e){null!==e&&(this.stopPlayTimeline(),"string"!=typeof e?this.selectedTimeSlider.get()&&null!=e&&(this.selectedTimeSlider.get().mode=e,this._setTimeSliderProfileImpl(this.selectedTimeSlider.get())):this.selectedSliderMode.set(parseInt(e,10)))},p.prototype._handlePlaybackDelayChanged=function(e){null!==e&&this._validateTimeSliderAdditionalSettings()&&(this._playbackDelaySeconds=e)},p.prototype._handleTimeIntervalChanged=function(e){null!==e&&this._validateTimeSliderAdditionalSettings()&&(this.stopPlayTimeline(),"string"!=typeof e?this.selectedTimeSlider.get()&&null!=e&&(this.selectedTimeSlider.get().timeInterval=e,this._setTimeSliderProfileImpl(this.selectedTimeSlider.get())):this.timeInterval.set(parseInt(e,10)))},p.prototype._handleTimeIntervalUnitChanged=function(e){null!==e&&(this.stopPlayTimeline(),this.selectedTimeSlider.get()&&e&&(this.selectedTimeSlider.get().timeIntervalUnit=e,this._setTimeSliderProfileImpl(this.selectedTimeSlider.get())))},p.prototype._handleMapTimeExtentChanged=function(d){var o=this;if(this.app.map&&this.isActive.get()){var m=!d||!d.startTime&&!d.endTime,e=this.app.map.graphicsLayerIds.map(function(e){return o.app.map.getLayer(e)}).filter(function(e){return e instanceof esri.layers.FeatureLayer&&e.timeInfo&&(!0===e._collection||!e.url)});if(e.length){var c=function(e,t){e&&e.visible!==t&&(t?e.show():e.hide())};e.forEach(function(e){for(var t=0,i=e.graphics;t<i.length;t++){var a=i[t];if(a&&a.attributes)if(m)c(a,!0);else{var l=a.attributes[e.timeInfo.startTimeField],s=a.attributes[e.timeInfo.endTimeField];if(s=s||l,l&&s){l=o._applyTimezoneOffset(new Date(l)).getTime(),s=o._applyTimezoneOffset(new Date(s)).getTime();var n=d.startTime.getTime(),r=d.endTime?d.endTime.getTime():n;c(a,n<=l&&l<=r&&n<=s&&s<=r)}}}})}}},p.prototype._handleIsOffline=function(e){if(e&&this.isActive.get()){this.app.command("DeactivateTimeSlider").execute();var t=this.getResource("language-timeslider-not-supported-offline"),i={id:this._notificationDisplayId,text:t,closeButton:{}};this.app.command("DisplayNotification").execute(i),this.app.trace.info(t)}this.app.command("ActivateTimeSlider").raiseCanExecuteChanged()},p.prototype._populateAvailableSliderModes=function(){this.sliderModes.clear();var e=[];e.push(this._getTimeSliderModeDataContract(S.TimeSliderMode.Cumulative)),e.push(this._getTimeSliderModeDataContract(S.TimeSliderMode.Extent)),e.push(this._getTimeSliderModeDataContract(S.TimeSliderMode.Instant)),this.sliderModes.addItems(e)},p.prototype._populateAvailableTimeIntervalUnits=function(){this.timeIntervalUnits.clear();var e=[];e.push(this._getTimeIntervalUnitDataContract(r.TimeUnits.UNIT_MILLISECONDS)),e.push(this._getTimeIntervalUnitDataContract(r.TimeUnits.UNIT_SECONDS)),e.push(this._getTimeIntervalUnitDataContract(r.TimeUnits.UNIT_MINUTES)),e.push(this._getTimeIntervalUnitDataContract(r.TimeUnits.UNIT_HOURS)),e.push(this._getTimeIntervalUnitDataContract(r.TimeUnits.UNIT_DAYS)),e.push(this._getTimeIntervalUnitDataContract(r.TimeUnits.UNIT_WEEKS)),e.push(this._getTimeIntervalUnitDataContract(r.TimeUnits.UNIT_MONTHS)),e.push(this._getTimeIntervalUnitDataContract(r.TimeUnits.UNIT_YEARS)),e.push(this._getTimeIntervalUnitDataContract(r.TimeUnits.UNIT_DECADES)),e.push(this._getTimeIntervalUnitDataContract(r.TimeUnits.UNIT_CENTURIES)),this.timeIntervalUnits.addItems(e)},p.prototype._getTimeSliderModeDataContract=function(e){var t={};switch(t.mode=e.toString(),e){case S.TimeSliderMode.Instant:t.displayName=this.app.getResource(this.libraryId,"language-timeslider-settings-timeslider-mode-instant");break;case S.TimeSliderMode.Cumulative:t.displayName=this.app.getResource(this.libraryId,"language-timeslider-settings-timeslider-mode-cumulative");break;case S.TimeSliderMode.Extent:default:t.displayName=this.app.getResource(this.libraryId,"language-timeslider-settings-timeslider-mode-extent")}return t},p.prototype._validateProfile=function(e){if(!e||null===e.mode||void 0===e.mode||!e.timeExtent||!e.initialTimeExtent)return!1;var t,i,a,l,s=e.mode;return t=e.timeExtent.startTime.getTime(),i=e.timeExtent.endTime.getTime(),a=e.initialTimeExtent.startTime.getTime(),l=e.initialTimeExtent.endTime.getTime(),s===S.TimeSliderMode.Cumulative&&a!==t&&(a=t),s===S.TimeSliderMode.Instant&&l!==a&&(l=a),!!this._validateSliderTimes(t,i,a,l)},p.prototype._getTimeIntervalUnitDataContract=function(e){var t={};switch(t.timeIntervalUnit=e.toString(),e){case r.TimeUnits.UNIT_CENTURIES:t.displayName=this.app.getResource(this.libraryId,"language-timeslider-settings-time-interval-unit-century");break;case r.TimeUnits.UNIT_DAYS:t.displayName=this.app.getResource(this.libraryId,"language-timeslider-settings-time-interval-unit-day");break;case r.TimeUnits.UNIT_DECADES:t.displayName=this.app.getResource(this.libraryId,"language-timeslider-settings-time-interval-unit-decade");break;case r.TimeUnits.UNIT_HOURS:t.displayName=this.app.getResource(this.libraryId,"language-timeslider-settings-time-interval-unit-hour");break;case r.TimeUnits.UNIT_MILLISECONDS:t.displayName=this.app.getResource(this.libraryId,"language-timeslider-settings-time-interval-unit-millisecond");break;case r.TimeUnits.UNIT_MINUTES:t.displayName=this.app.getResource(this.libraryId,"language-timeslider-settings-time-interval-unit-minute");break;case r.TimeUnits.UNIT_MONTHS:t.displayName=this.app.getResource(this.libraryId,"language-timeslider-settings-time-interval-unit-month");break;case r.TimeUnits.UNIT_SECONDS:t.displayName=this.app.getResource(this.libraryId,"language-timeslider-settings-time-interval-unit-second");break;case r.TimeUnits.UNIT_WEEKS:t.displayName=this.app.getResource(this.libraryId,"language-timeslider-settings-time-interval-unit-week");break;case r.TimeUnits.UNIT_YEARS:default:t.displayName=this.app.getResource(this.libraryId,"language-timeslider-settings-time-interval-unit-year")}return t},p.prototype._formatMilliSecondsAsString=function(e,t,i){var l=this,a=parseInt(t-e,10);if(isNaN(a)||a<=0)return null;function s(e,t){i<=d||0===d&&0===t||(r+=t+l.getResource(e)+" ",d++)}var n=new Date(a),r="",d=0,o=null,m=null,c=null,g=null,p=null,u=null,h=function(){var e=l.sliderViewModel.get(),t=n.getUTCMonth(),i=e.sliderMinHandleCurrentItem.get()&&new Date(e.sliderMinHandleCurrentItem.get().value),a=e.sliderMaxHandleCurrentItem.get()&&new Date(e.sliderMaxHandleCurrentItem.get().value);if(!isNaN(i.getTime())&&!isNaN(a.getTime()))return i.getUTCDate()===a.getUTCDate()&&i.getUTCHours()===a.getUTCHours()&&i.getUTCMinutes()===a.getUTCMinutes()&&(28<=n.getUTCDate()&&(t+=1),12===t&&(o=n.getUTCFullYear()-1970+1,t=0),u=p=g=c=m=0),t}();return s("language-timeslider-current-time-extent-info-year-abbr",null===o?n.getUTCFullYear()-1970:o),s("language-timeslider-current-time-extent-info-month-abbr",h),s("language-timeslider-current-time-extent-info-day-abbr",null===m?n.getUTCDate()-1:m),s("language-timeslider-current-time-extent-info-hour-abbr",null===c?n.getUTCHours():c),s("language-timeslider-current-time-extent-info-minute-abbr",null===g?n.getUTCMinutes():g),s("language-timeslider-current-time-extent-info-second-abbr",null===p?n.getUTCSeconds():p),s("language-timeslider-current-time-extent-info-millisecond-abbr",null===u?n.getMilliseconds():u),r.trim()?this.getResource("language-timeslider-current-time-extent-info").format(r.trim()):null},p.prototype._exportState=function(e){this.stopPlayTimeline(),e.isActive=this.isActive.get(),e.selectedSliderId=this.selectedSliderId.get(),e.showActionsContainer=this.showActionsContainer.get(),e.sliderCurrentStartDate=this.sliderViewModel.get().sliderMinHandleCurrentItem.get().value,e.sliderCurrentEndDate=this.sliderViewModel.get().sliderMaxHandleCurrentItem.get()&&this.sliderViewModel.get().sliderMaxHandleCurrentItem.get().value,e.sliderMode=this.selectedSliderMode.get().toString(),e.timeIntervalOverride=this.sliderViewModel.get().dateModeTimeInterval,e.timeIntervalUnitOverride=this.sliderViewModel.get().dateModeTimeIntervalUnit,e.playbackDelaySeconds=this.playbackDelaySeconds.get(),e.loopPlayback=this.loopPlayback.get()},p.prototype._applyState=function(e){var t=e.state,i=this.timeSliders.get().filter(function(e){return e.id===t.selectedSliderId})[0];if(!this.isEnabled.get())return this.app.trace.info("Saved Project: Time Slider state could not be applied. Time Slider not enabled or no time slider profiles defined."),void(e.completePromise=Promise.resolve());i||(this.app.trace.info("Saved Project: Time Slider profile with id {0} not found. Applying first available profile."),i=this.timeSliders.getAt(0)),this.app.command("ActivateTimeSlider").execute(),this.selectedTimeSlider.get()!==i&&this.selectedTimeSlider.set(i),this.selectedSliderMode.set(t.sliderMode),this.timeInterval.get()!==t.timeIntervalOverride&&this.timeInterval.set(t.timeIntervalOverride),this.selectedTimeIntervalUnit.set(t.timeIntervalUnitOverride),this.showActionsContainer.set(t.showActionsContainer),this.playbackDelaySeconds.set(t.playbackDelaySeconds),this.loopPlayback.set(t.loopPlayback);var a=this._applyTimezoneOffset(new Date(t.sliderCurrentStartDate)),l=this._applyTimezoneOffset(new Date(t.sliderCurrentEndDate));this.sliderViewModel.get().range||isNaN(a.getTime())?!this.sliderViewModel.get().range||isNaN(a.getTime())||isNaN(l.getTime())||(this.startDateViewModel.get()&&this.startDateViewModel.get().date.set(a),this.endDateViewModel.get()&&this.endDateViewModel.get().date.set(l)):this.startDateViewModel.get()&&this.startDateViewModel.get().date.set(a),t.timeSliderViewActive||this.app.command("HideTimeSlider").execute(),t.timeSliderSettingsViewActive?this.app.command("ShowTimeSliderSettings").execute():this.app.command("HideTimeSliderSettings").execute(),t.isActive||this.app.command("DeactivateTimeSlider").execute(),e.completePromise=Promise.resolve()},p);function p(e,t){var i=c.call(this,e,t)||this;return i.isEnabled=new a.Observable(!1),i.isActive=new a.Observable(!1),i.showActionsContainer=new a.Observable(!1),i.timeSliders=new a.ObservableCollection([]),i.selectedSliderId=new a.Observable(""),i.selectedTimeSlider=new a.Observable(null),i.sliderViewModel=new a.Observable(null),i.startDateViewModel=new a.Observable(null),i.endDateViewModel=new a.Observable(null),i.currentProfile=new a.Observable(""),i.infoMessage=new a.Observable(""),i.datePickerErrorMessage=new a.Observable(""),i.sliderSettingsInfoMessage=new a.Observable(""),i.sliderSettingsTimeIntervalError=new a.Observable(""),i.sliderSettingsPlaybackDelayError=new a.Observable(""),i.displayFormat=new a.Observable(n.DateFormat.DEFAULT),i.sliderModes=new a.ObservableCollection([]),i.selectedSliderMode=new a.Observable(null),i.timeInterval=new a.Observable(1),i.timeIntervalUnits=new a.ObservableCollection([]),i.selectedTimeIntervalUnit=new a.Observable(null),i.loopPlayback=new a.Observable(!0),i.playbackDelaySeconds=new a.Observable(1),i.isPlayingBack=new a.Observable(!1),i.labelGenerator=null,i._animateSlider=!0,i._invalidDateString="Invalid Date",i._sliderViewModelOnHandle=null,i._enabledInConfig=!0,i._playbackDelaySeconds=1,i._activateSliderOnStartup=!0,i._mapTimeExtentSetTimeoutToken=null,i._mapTimeExtentSetDelayMs=300,i._maxSignificantTimeExtentDisplayUnits=3,i._playTimelineTimeoutToken=null,i._noOfflineSupportStatusMsgSecs=10,i._notificationDisplayId="TimeSliderNotificationView",i.labelGenerator=i._defaultSliderLabelGenerator,i.startDateViewModel.set(new s.DatePickerFormItem(null,null)),i.endDateViewModel.set(new s.DatePickerFormItem(null,null)),i.sliderViewModel.set(new l.SliderViewModelBase(i.app,i.libraryId)),i._populateAvailableSliderModes(),i._populateAvailableTimeIntervalUnits(),i.registerCommands(),i}t.TimeSliderViewModel=g})},"url:/Mapping/modules/TimeSlider/TimeSliderSettingsView.html":t,"url:/Mapping/modules/TimeSlider/TimeSliderView.html":i}}),require(["geocortex/framework/resourceManager"],function(e){e.resourceManager.register("Mapping","inv","Mapping/modules/TimeSlider/CSS/common.css","css","LyotLS0tLVNUQVJUOiBNYWluIFJvdy0tLS0tKi8NCg0KLnRpbWVzbGlkZXItY29udGFpbmVyIHsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgdG9wOiAwLjRlbTsNCiAgICBsZWZ0OiAzMyU7DQogICAgd2lkdGg6IDMzJTsNCiAgICBtaW4td2lkdGg6IDI1ZW07DQogICAgbWF4LXdpZHRoOiAzNWVtOw0KICAgIGJvcmRlcjogMXB4IHNvbGlkICNEOUQ5RDk7DQogICAgYm9yZGVyLXJhZGl1czogMC4yNWVtOw0KICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkZGRkY7DQogICAgei1pbmRleDogMTAxOw0KfQ0KDQouY3VycmVudC1wcm9maWxlLXRpdGxlIHsNCiAgICBwYWRkaW5nOiAwLjI1ZW07DQogICAgYmFja2dyb3VuZDogI0ZGRkZGRjsNCiAgICBjb2xvcjogIzc2NzY3NjsNCiAgICBmb250LXNpemU6IDEuMWVtOw0KICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgY3Vyc29yOiBkZWZhdWx0Ow0KICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjRDlEOUQ5Ow0KICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDAuMjVlbTsNCiAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMC4yNWVtOw0KfQ0KDQoubWFpbi1yb3cgew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCn0NCg0KLm1haW4tcm93IC5nY3gtc2xpZGVyLWNvbnRhaW5lciB7DQogICAgd2lkdGg6IDEwMCU7DQp9DQoNCi5zbGlkZXItYWN0aW9ucy10b2dnbGUgew0KICAgIGhlaWdodDogMTAwJTsNCn0NCg0KLnNsaWRlci1hY3Rpb25zLXRvZ2dsZSBidXR0b24gew0KICAgIGJvcmRlcjogbm9uZTsNCiAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogMC4yNWVtOw0KfQ0KDQouc2xpZGVyLWFjdGlvbnMtdG9nZ2xlIGJ1dHRvbiwNCi5zbGlkZXItYWN0aW9ucy10b2dnbGUgYnV0dG9uOmZvY3VzIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsNCn0NCg0KLyotLS0tLUVORDogTWFpbiBSb3ctLS0tLSovDQoNCi5pbmZvLW1lc3NhZ2Ugew0KICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIHBhZGRpbmc6IDAuNWVtOw0KICAgIGJhY2tncm91bmQ6ICNGRkZBQ0Q7DQogICAgZm9udC1zaXplOiAwLjllbTsNCiAgICB0ZXh0LWFsaWduOiBsZWZ0Ow0KICAgIGJvcmRlcjogMXB4IHNvbGlkICNEOUQ5RDk7DQogICAgYm9yZGVyLXJhZGl1czogMC4yNWVtOw0KICAgIGN1cnNvcjogZGVmYXVsdDsNCiAgICBsaW5lLWhlaWdodDogMS41ZW07DQp9DQoNCi50aW1lc2xpZGVyLWNvbnRhaW5lciAuaW5mby1tZXNzYWdlIHsNCiAgICBwYWRkaW5nOiAwLjI1ZW07DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIGJvcmRlci1sZWZ0OiBub25lOw0KICAgIGJvcmRlci1yaWdodDogbm9uZTsNCiAgICBib3JkZXItcmFkaXVzOiAwOw0KfQ0KDQovKi0tLS0tU1RBUlQ6IFNsaWRlciBEYXRlIFBpY2tlcnMtLS0tLSovDQoNCi5zbGlkZXItZGF0ZS1waWNrZXJzIHsNCiAgICBwYWRkaW5nOiAwLjVlbTsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZGRkZGOw0KICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjRDlEOUQ5Ow0KfQ0KDQouc2xpZGVyLWRhdGUtcGlja2VycywNCi5zbGlkZXItYWN0aW9ucyB7DQogICAgaGVpZ2h0OiAxMDAlOw0KICAgIC13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCn0NCg0KLnNsaWRlci1hY3Rpb25zOjphZnRlciwNCi5zbGlkZXItZGF0ZS1waWNrZXJzOjphZnRlciB7DQogICAgY29udGVudDogIiI7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgY2xlYXI6IGJvdGg7DQp9DQoNCi5zbGlkZXItZGF0ZS1waWNrZXJzIC5mb3JtLWxhYmVsIHsNCiAgICBwYWRkaW5nOiAwOw0KfQ0KDQouc2xpZGVyLWRhdGUtcGlja2VycyAuZm9ybS1jb250cm9sLA0KLnNsaWRlci1kYXRlLXBpY2tlcnMgLmlubGluZS1ibG9jayB7DQogICAgd2lkdGg6IDEwMCU7DQp9DQoNCi5zbGlkZXItc3RhcnQtZGF0ZS1waWNrZXIsDQouc2xpZGVyLWVuZC1kYXRlLXBpY2tlciB7DQogICAgd2lkdGg6IDEwMCU7DQp9DQoNCi5uby10b3VjaCAuc2xpZGVyLXN0YXJ0LWRhdGUtcGlja2VyLA0KLm5vLXRvdWNoIC5zbGlkZXItZW5kLWRhdGUtcGlja2VyIHsNCiAgICB3aWR0aDogNDcuNSU7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0ZGRkZGRjsNCiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KfQ0KDQoubm8tdG91Y2ggLnNsaWRlci1zdGFydC1kYXRlLXBpY2tlciB7DQogICAgZmxvYXQ6IGxlZnQ7DQogICAgcGFkZGluZy1yaWdodDogMC4yNWVtOw0KfQ0KDQoubm8tdG91Y2ggLnNsaWRlci1lbmQtZGF0ZS1waWNrZXIgew0KICAgIGZsb2F0OiByaWdodDsNCiAgICBwYWRkaW5nLWxlZnQ6IDAuMjVlbTsNCn0NCg0KLmRwLXRwLXNlbGVjdCB7DQogICAgZGlzcGxheTogYmxvY2s7DQp9DQoNCi5zbGlkZXItZGF0ZS1waWNrZXJzIC5kYXRldGltZS1zZWxlY3QgbGFiZWwgew0KICAgIG1hcmdpbjogMDsNCiAgICBtYXJnaW4tcmlnaHQ6IDQlOw0KfQ0KDQouc2xpZGVyLWRhdGUtcGlja2VycyAuc2xpZGVyLXN0YXJ0LXRvLWVuZC1kYXRlLWxhYmVsIHsNCiAgICBkaXNwbGF5OiBibG9jazsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBtYXJnaW4tYm90dG9tOiAwLjVlbTsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQoNCi5uby10b3VjaCAuc2xpZGVyLWRhdGUtcGlja2VycyAuc2xpZGVyLXN0YXJ0LXRvLWVuZC1kYXRlLWxhYmVsIHsNCiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgd2lkdGg6IDUlOw0KICAgIG1hcmdpbi1ib3R0b206IDA7DQp9DQoNCi5kYXRldGltZS1zZWxlY3Qgc2VsZWN0LA0KLmRhdGUtcGlja2VyLWNvbnRhaW5lciBzZWxlY3Qgew0KICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICBtaW4taGVpZ2h0OiAxLjg3NWVtOw0KfQ0KDQouZGF0ZXRpbWUtc2VsZWN0IC55ZWFyLXNlbGVjdCB7DQogICAgd2lkdGg6IDI4JTsNCiAgICBtYXJnaW4tcmlnaHQ6IDIlOw0KfQ0KDQouZGF0ZXRpbWUtc2VsZWN0IC5tb250aC1zZWxlY3Qgew0KICAgIHdpZHRoOiA0NyU7DQogICAgbWFyZ2luOiAwIC00cHg7DQp9DQoNCi5kYXRldGltZS1zZWxlY3QgLmRheS1zZWxlY3Qgew0KICAgIHdpZHRoOiAxOCU7DQogICAgbWFyZ2luLWxlZnQ6IDIlOw0KfQ0KDQoudGltZS1zZWxlY3Qgew0KICAgIHdpZHRoOiAyOCU7DQogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICAgIHBhZGRpbmctbGVmdDogMC45ZW07DQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQoNCi50aW1lLXNlbGVjdC1sYWJlbCB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogMC4zZW07DQogICAgbGVmdDogMDsNCn0NCg0KLm5hdGl2ZS1kYXRlLXBpY2tlciB7DQogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICAgIHdpZHRoOiAzNSU7DQogICAgcGFkZGluZy1yaWdodDogMWVtOw0KICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQp9DQoNCi5uYXRpdmUtZGF0ZS1waWNrZXIgaW5wdXQgew0KICAgIG1pbi13aWR0aDogMTAwJTsNCiAgICBmb250LXdlaWdodDogaW5pdGlhbDsNCn0NCg0KLnRpbWUtc2VsZWN0b3JzIHsNCiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgZmxvYXQ6IHJpZ2h0Ow0KICAgIHdpZHRoOiA2NSU7DQogICAgcGFkZGluZy1sZWZ0OiAxJTsNCiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KfQ0KDQouc2xpZGVyLWRhdGUtcGlja2VycyAuZGF0ZXRpbWUtcGlja2VyIC50aW1lLXNlbGVjdDpmaXJzdC1jaGlsZCB7DQogICAgbWFyZ2luLWxlZnQ6IDA7DQp9DQoNCi5zbGlkZXItZGF0ZS1waWNrZXJzIC5kYXRldGltZS1waWNrZXIgLnRpbWUtc2VsZWN0IHsNCiAgICB3aWR0aDogMzIlOw0KICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICBwYWRkaW5nLWxlZnQ6IDEuMWVtOw0KICAgIG1hcmdpbi1yaWdodDogLTRweDsNCiAgICBtYXJnaW4tbGVmdDogMiU7DQp9DQoNCi5zbGlkZXItZGF0ZS1waWNrZXJzIC5uYXRpdmUtZGF0ZS1waWNrZXIgLnRpbWUtc2VsZWN0IHsNCiAgICB3aWR0aDogMzElOw0KICAgIG1hcmdpbi1sZWZ0OiAyLjUlOw0KICAgIHBhZGRpbmctbGVmdDogMC44ZW07DQp9DQoNCi5kYXRldGltZS1zZWxlY3QgLnRpbWUtc2VsZWN0IHNlbGVjdCB7DQogICAgd2lkdGg6IDEwMCU7DQp9DQoNCi5kYXRlLXBpY2tlci1jb250YWluZXIgew0KICAgIHBhZGRpbmctcmlnaHQ6IDIuMTllbTsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCn0NCg0KLmRhdGUtcGlja2VyLWNvbnRhaW5lciAuaGFzRGF0ZXBpY2tlciB7DQogICAgaGVpZ2h0OiAxLjg3NWVtOw0KICAgIHdpZHRoOiAxMDAlOw0KfQ0KDQouZGF0ZS1waWNrZXItY29udGFpbmVyIC51aS1kYXRlcGlja2VyLXRyaWdnZXIgeyAgICANCiAgICBoZWlnaHQ6IDEuODc1ZW07DQogICAgd2lkdGg6IDEuODc1ZW07ICAgIA0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICByaWdodDogMnB4Ow0KICAgIG1hcmdpbjogMDsNCiAgICBiYWNrZ3JvdW5kOiB1cmwoUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9jYWxlbmRhci0yNC5wbmcpIG5vLXJlcGVhdCBjZW50ZXIgY2VudGVyOw0KICAgIHRleHQtaW5kZW50OiAtOTk5OTllbTsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KfQ0KDQouc2xpZGVyLWRhdGUtcGlja2VycyAuZGlzYWJsZS1kYXRlLXBpY2tlciB7DQogICAgcG9pbnRlci1ldmVudHM6IG5vbmU7DQogICAgb3BhY2l0eTogMC40Ow0KfQ0KDQovKi0tLS0tRU5EOiBTbGlkZXIgRGF0ZSBQaWNrZXJzLS0tLS0qLw0KDQovKi0tLS0tU1RBUlQ6IFNsaWRlciBBY3Rpb25zIExpc3QgTWVudS0tLS0tKi8NCg0KLnNsaWRlci1hY3Rpb25zIHsNCiAgICBtYXJnaW46IDA7DQogICAgcGFkZGluZzogMDsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjhGOEY4Ow0KfQ0KDQouc2xpZGVyLWFjdGlvbnMgLmxpc3QtbWVudS1pdGVtIHsNCiAgICB3aWR0aDogMjAlOw0KICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIGZsb2F0OiBsZWZ0Ow0KICAgIHBhZGRpbmc6IDA7DQogICAgYm9yZGVyLWJvdHRvbTogbm9uZTsNCn0NCg0KLnNsaWRlci1hY3Rpb25zIC5saXN0LW1lbnUtaXRlbTpmb2N1cyB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogbm9uZTsNCn0NCg0KLnNsaWRlci1hY3Rpb25zLWJ1dHRvbiB7DQogICAgd2lkdGg6IDEwMCU7DQogICAgcGFkZGluZzogMC41ZW0gMC4yNWVtOw0KICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgI0VFRUVFRTsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQoNCi5zbGlkZXItYWN0aW9ucy1idXR0b246aG92ZXIgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNERUYyRkY7DQp9DQoNCi5zbGlkZXItYWN0aW9ucy1idXR0b24gLmFjdGlvbi1sYWJlbCB7DQogICAgbWFyZ2luLXRvcDogMC4xNWVtOw0KICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIGxpbmUtaGVpZ2h0OiBpbml0aWFsOw0KICAgIGZvbnQtc2l6ZTogMC45ZW07DQp9DQoNCi8qLS0tLS1FTkQ6IFNsaWRlciBBY3Rpb25zIExpc3QgTWVudS0tLS0tKi8NCg0KLyotLS0tLVNUQVJUOiBUaW1lIFNsaWRlciBTZXR0aW5ncy0tLS0tKi8NCg0KLnRpbWVzbGlkZXItc2V0dGluZ3Mgew0KICAgIHBhZGRpbmc6IDFlbTsNCn0NCg0KLnRpbWVzbGlkZXItc2V0dGluZ3MgLmZvcm0tbGFiZWwgew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIHBhZGRpbmc6IDA7DQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCn0NCg0KLmNoZWNrYm94LA0KLmNoZWNrYm94LWxhYmVsIHsNCiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOw0KfQ0KDQoudGltZS1zZXR0aW5ncy1lcnJvci1tZXNzYWdlIHsNCiAgICBjb2xvcjogI0ZGMDAwMDsNCn0NCg0KLyotLS0tLUVORDogVGltZSBTbGlkZXIgU2V0dGluZ3MtLS0tLSovDQoNCi8qLS0tLS1TVEFSVDogRGF0ZSBQaWNrZXItLS0tLSovDQovKlVzZWQgIWltcG9ydGFudCB0aHJvdWdob3V0IHRoaXMgc2VjdGlvbiB0byBvdmVycmlkZSBqcXVlcnkgc3R5bGluZyovDQoudWktZGF0ZXBpY2tlciB7DQogICAgd2lkdGg6IDE5ZW07DQogICAgcGFkZGluZzogMC41ZW07DQp9DQoNCi51aS1kYXRlcGlja2VyLnVpLXdpZGdldCAudWktZGF0ZXBpY2tlci1oZWFkZXIgew0KICAgIGJhY2tncm91bmQ6IG5vbmU7DQp9DQoNCi51aS1kYXRlcGlja2VyLWhlYWRlciAudWktZGF0ZXBpY2tlci1wcmV2IC51aS1pY29uLA0KLnVpLWRhdGVwaWNrZXItaGVhZGVyIC51aS1kYXRlcGlja2VyLXByZXYudWktc3RhdGUtaG92ZXIgLnVpLWljb24gew0KICAgIGJhY2tncm91bmQ6IHVybChSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL2NoZXZyb24tbGVmdC0xNi5wbmcpIWltcG9ydGFudDsNCn0NCg0KLnVpLWRhdGVwaWNrZXItaGVhZGVyIC51aS1kYXRlcGlja2VyLW5leHQgLnVpLWljb24sDQoudWktZGF0ZXBpY2tlci1oZWFkZXIgLnVpLWRhdGVwaWNrZXItbmV4dC51aS1zdGF0ZS1ob3ZlciAudWktaWNvbiB7DQogICAgYmFja2dyb3VuZDogdXJsKFJlc291cmNlcy9JbWFnZXMvSWNvbnMvY2hldnJvbi1yaWdodC0xNi5wbmcpIWltcG9ydGFudDsNCn0NCg0KLnVpLWRhdGVwaWNrZXIudWktd2lkZ2V0IC51aS1kYXRlcGlja2VyLWNhbGVuZGFyIC51aS1zdGF0ZS1kZWZhdWx0IHsNCiAgICBiYWNrZ3JvdW5kOiAjRjVGNUY1Ow0KICAgIGNvbG9yOiAjMUE3MkM0Ow0KICAgIGhlaWdodDogMTAwJTsNCiAgICBsaW5lLWhlaWdodDogMmVtOw0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCg0KLnVpLWRhdGVwaWNrZXIudWktd2lkZ2V0IC51aS1kYXRlcGlja2VyLWNhbGVuZGFyIC51aS1zdGF0ZS1hY3RpdmUgew0KICAgIGJhY2tncm91bmQ6ICMxQTcyQzQ7DQogICAgYm9yZGVyOiAxcHggc29saWQgI0NDQ0NDQzsNCiAgICBjb2xvcjogI0ZGRkZGRjsNCn0NCg0KLnVpLWRhdGVwaWNrZXIudWktd2lkZ2V0IC51aS1kYXRlcGlja2VyLWNhbGVuZGFyIC51aS1zdGF0ZS1hY3RpdmUudWktc3RhdGUtaG92ZXIgew0KICAgIGJhY2tncm91bmQ6ICMxQTcyQzQhaW1wb3J0YW50Ow0KICAgIGJvcmRlcjogMXB4IHNvbGlkICNDQ0NDQ0MhaW1wb3J0YW50Ow0KICAgIGNvbG9yOiAjRkZGRkZGIWltcG9ydGFudDsNCiAgICBjdXJzb3I6IGRlZmF1bHQ7DQp9DQoNCi51aS1kYXRlcGlja2VyLWhlYWRlciAudWktZGF0ZXBpY2tlci1wcmV2LnVpLXN0YXRlLWhvdmVyLA0KLnVpLWRhdGVwaWNrZXItaGVhZGVyIC51aS1kYXRlcGlja2VyLW5leHQudWktc3RhdGUtaG92ZXIsDQoudWktZGF0ZXBpY2tlci51aS13aWRnZXQgLnVpLWRhdGVwaWNrZXItY2FsZW5kYXIgLnVpLXN0YXRlLWhvdmVyLA0KLnVpLWRhdGVwaWNrZXIudWktd2lkZ2V0IC51aS1kYXRlcGlja2VyLWNhbGVuZGFyIC51aS1zdGF0ZS1kZWZhdWx0OmZvY3VzIHsNCiAgICBib3JkZXI6IDFweCBzb2xpZCAjMUE3MkM0IWltcG9ydGFudDsNCiAgICBiYWNrZ3JvdW5kOiAjRTlGNkZGIWltcG9ydGFudDsNCn0NCg0KLnVpLWRhdGVwaWNrZXIgLnVpLXRpbWVwaWNrZXItZGl2IGRkIHsNCiAgICBwYWRkaW5nOiAwIDAuNWVtOw0KfQ0KDQoudWktZGF0ZXBpY2tlciAudWktdGltZXBpY2tlci1kaXYgZHQgew0KICAgIHBhZGRpbmc6IDFlbSAuNWVtIDAuNzVlbSAwLjVlbTsNCn0NCg0KLnVpLXRpbWVwaWNrZXItZGl2IC51aS1zbGlkZXItaG9yaXpvbnRhbCB7DQogICAgaGVpZ2h0OiAzcHg7DQp9DQoNCi51aS10aW1lcGlja2VyLWRpdiAudWktc2xpZGVyIC51aS1zbGlkZXItaGFuZGxlIHsNCiAgICBoZWlnaHQ6IDE2cHg7DQogICAgdG9wOiAtN3B4Ow0KfQ0KDQoudWktZGF0ZXBpY2tlci51aS13aWRnZXQgLnVpLWRhdGVwaWNrZXItYnV0dG9ucGFuZSB7DQogICAgYmFja2dyb3VuZDogbm9uZTsNCn0NCg0KLnVpLXRpbWVwaWNrZXItZGl2IC5pbmZvLW1lc3NhZ2Ugew0KICAgIG1hcmdpbjogMS41ZW0gMC4yZW0gMDsNCiAgICBmb250LXNpemU6IDFlbTsNCn0NCg0KLnVpLWRhdGVwaWNrZXIgLnVpLWRhdGVwaWNrZXItYnV0dG9ucGFuZSAudWktZGF0ZXBpY2tlci1jdXJyZW50LA0KLnVpLWRhdGVwaWNrZXIgLnVpLWRhdGVwaWNrZXItYnV0dG9ucGFuZSAudWktZGF0ZXBpY2tlci1jbG9zZSB7DQogICAgcGFkZGluZzogLjVlbTsNCiAgICBvdXRsaW5lOiBub25lOw0KICAgIGJhY2tncm91bmQ6ICNGNUY1RjU7DQogICAgYm9yZGVyOiAxcHggc29saWQgI0NDQ0NDQzsNCiAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtOw0KICAgIGZvbnQtd2VpZ2h0OiA2MDA7DQogICAgY29sb3I6ICMxQTcyQzQ7DQogICAgYm94LXNoYWRvdzogMDsNCiAgICBtYXJnaW46IDAuNWVtIDA7DQp9DQoNCi51aS1kYXRlcGlja2VyIC51aS1kYXRlcGlja2VyLWJ1dHRvbnBhbmUgLnVpLWRhdGVwaWNrZXItY3VycmVudC51aS1zdGF0ZS1ob3ZlciwNCi51aS1kYXRlcGlja2VyIC51aS1kYXRlcGlja2VyLWJ1dHRvbnBhbmUgLnVpLWRhdGVwaWNrZXItY2xvc2UudWktc3RhdGUtaG92ZXIgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICMxQTcyQzQhaW1wb3J0YW50Ow0KICAgIGNvbG9yOiAjRkZGRkZGIWltcG9ydGFudDsNCiAgICB0ZXh0LXNoYWRvdzogbm9uZTsNCn0NCg0KLyotLS0tLUVORDogRGF0ZSBQaWNrZXItLS0tLSov"),e.resourceManager.register("Mapping","inv","Mapping/modules/TimeSlider/CSS/small.css","css","LlRpbWVTbGlkZXJWaWV3IHsNCiAgICB3aWR0aDogMTAwJTsNCiAgICB0b3A6IDMuM2VtOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogdG9wIDUwMG1zOyAvKiBTYWZhcmkgKi8NCiAgICB0cmFuc2l0aW9uOiB0b3AgNTAwbXM7DQp9DQoNCi50aW1lc2xpZGVyLWNvbnRhaW5lciB7DQogICAgd2lkdGg6IDEwMCU7DQogICAgbWluLXdpZHRoOiBpbml0aWFsOw0KICAgIG1heC13aWR0aDogaW5pdGlhbDsNCiAgICB0b3A6IDA7DQogICAgbWFyZ2luOiAwOw0KICAgIHotaW5kZXg6IDEwMDsNCiAgICBsZWZ0OiAwOw0KICAgIGJvcmRlci1sZWZ0OiBub25lOw0KICAgIGJvcmRlci1yaWdodDogbm9uZTsNCiAgICBib3JkZXItcmFkaXVzOiAwOw0KICAgIG92ZXJmbG93LXk6IGF1dG87DQp9DQoNCi5oZWFkZXItcmVnaW9uLmhpZGRlbi1ieS1zY3JlZW4tZWxlbWVudCAuVGltZVNsaWRlclZpZXcgew0KICAgIHRvcDogMDsNCn0NCg0KLyoqIC5zaGVsbC1zbWFsbCBuZWVkcyB0byBiZSBwcmVwZW5kZWQgdG8gdGhlIGNzcyBydWxlIGJlbG93IHRvIG92ZXJyaWRlIFNtYWxsU2hlbGwuY3NzIHdoaWNoIHNldHMgLnNoZWxsLXNtYWxsIC5yZWdpb24uaGVhZGVyLXJlZ2lvbiAudmlldy5pbmFjdGl2ZSB0byBkaXNwbGF5IGJsb2NrLiovDQouc2hlbGwtc21hbGwgLnJlZ2lvbi5oZWFkZXItcmVnaW9uIC52aWV3LlRpbWVTbGlkZXJWaWV3LmluYWN0aXZlIHsNCiAgICBkaXNwbGF5OiBub25lOw0KfQ0KDQoudGltZXNsaWRlci1jb250YWluZXIgLmFjdGlvbnMtY29udGFpbmVyIC5zbGlkZXItZGF0ZS1waWNrZXJzIC5pbmxpbmUtYmxvY2sgYnV0dG9uLnVpLWRhdGVwaWNrZXItdHJpZ2dlciB7DQogICAgcGFkZGluZzogLjZlbTsNCn0NCg0KLnVpLXRpbWVwaWNrZXItZGl2IC51aS1zbGlkZXIgLnVpLXNsaWRlci1oYW5kbGUgew0KICAgIHRvcDogLTlweCFpbXBvcnRhbnQ7DQp9DQoNCi8qLS0tLS1TVEFSVDogTWVkaWEgUXVlcmllcyBmb3IgU2Nyb2xsIEJhci0tLS0tKi8NCkBtZWRpYSBhbGwgYW5kICggbWluLWhlaWdodDogMHB4KSB7DQogICAgLnRpbWVzbGlkZXItY29udGFpbmVyIHsNCiAgICAgICAgbWF4LWhlaWdodDogMjAwcHg7DQogICAgfQ0KfQ0KQG1lZGlhIGFsbCBhbmQgKCBtaW4taGVpZ2h0OiA0MDBweCkgew0KICAgIC50aW1lc2xpZGVyLWNvbnRhaW5lciB7DQogICAgICAgIG1heC1oZWlnaHQ6IDMwMHB4Ow0KICAgIH0NCn0NCkBtZWRpYSBhbGwgYW5kICggbWluLWhlaWdodDogNTAwcHgpIHsNCiAgICAudGltZXNsaWRlci1jb250YWluZXIgew0KICAgICAgICBtYXgtaGVpZ2h0OiA0MDBweDsNCiAgICB9DQp9DQpAbWVkaWEgYWxsIGFuZCAoIG1pbi1oZWlnaHQ6IDYwMHB4KSB7DQogICAgLnRpbWVzbGlkZXItY29udGFpbmVyIHsNCiAgICAgICAgbWF4LWhlaWdodDogNTAwcHg7DQogICAgfQ0KfQ=="),e.resourceManager.register("Mapping","inv","Mapping/modules/TimeSlider/TimeSliderSettingsView.html","html",t),e.resourceManager.register("Mapping","inv","Mapping/modules/TimeSlider/TimeSliderView.html","html",i)}),require({cache:{}}),define(["Mapping/modules/TimeSlider/TimeSliderModule","Mapping/modules/TimeSlider/TimeSliderSettingsView","Mapping/modules/TimeSlider/TimeSliderView","Mapping/modules/TimeSlider/TimeSliderViewModel"],function(e,t,i,a){l(e,"geocortex.essentialsHtmlViewer.mapping.modules.timeSlider.TimeSliderModule",e.TimeSliderModule),l(t,"geocortex.essentialsHtmlViewer.mapping.modules.timeSlider.TimeSliderSettingsView",t.TimeSliderSettingsView),l(i,"geocortex.essentialsHtmlViewer.mapping.modules.timeSlider.TimeSliderView",i.TimeSliderView),l(a,"geocortex.essentialsHtmlViewer.mapping.modules.timeSlider.TimeSliderViewModel",a.TimeSliderViewModel)})}();