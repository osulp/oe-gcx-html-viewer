function shim(e,i,t){if("string"==typeof e&&(t=i,i=e),"undefined"==typeof t)return void console.warn("Undefined shim for: "+i);for(var n=i.split("."),a=null,o=window,s=0,l=n.length;s<l;s++)a=n[s],s==l-1?o[a]=t:o[a]||(o[a]={}),o=o[a]}require({cache:{"Mapping/modules/Shells/CommonShellView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,i,t){"use strict";var n=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i._waitForEsc=!1,i._escTimer=null,i}return __extends(i,e),i.prototype.attach=function(i){var t=this;e.prototype.attach.call(this,i),window&&dojo.connect(window,"onkeyup",this,this.handleKeyUp),this.app.event("ViewActivatedEvent").subscribe(this,function(e){"MapView"===e.id&&t.app.command("CloseModalRegion").execute()}),this.handleiOSShellIssue()},i.prototype.handleiOSShellIssue=function(){navigator.userAgent.match(/iPad;.*CPU.*OS 7_\d/i)&&!window.navigator.standalone&&$("html").addClass("ipad ios7")},i.prototype.handleKeyUp=function(e){var i=this;return e.shiftKey===!0&&27===e.keyCode?this._waitForEsc?(this._waitForEsc=!1,this.app.command("ToggleLogView").execute()):(this._waitForEsc=!0,this._escTimer=setTimeout(function(){i._waitForEsc=!1},1e3)):e.ctrlKey===!0&&e.shiftKey===!0&&192===e.keyCode&&this.app.command("ToggleLogView").execute(),!0},i.prototype.scrollToTop=function(){window.scrollTo&&window.scrollTo(0,0)},i.prototype.handleCloseModalRegionClick=function(){this.app.modalRegionSingleton&&this.app.modalRegionSingleton.deactivateActiveView()},i}(t.ViewBase);i.CommonShellView=n})},"Mapping/modules/Shells/CommonShellViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase"],function(e,i,t){"use strict";var n=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i}(t.ViewModelBase);i.CommonShellViewModel=n})},"Mapping/modules/Shells/HandheldShellView":function(){define(["require","exports","./CommonShellView"],function(e,i,t){"use strict";var n=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i._resizeShell=!0,i}return __extends(i,e),i.prototype.attach=function(i){var t=this;if(e.prototype.attach.call(this,i),this.configuration&&this.configuration.resizeShell===!1&&(this._resizeShell=!1),this.app.event("ApplicationNativeReadyEvent").subscribe(this,function(){t._native=t.app.isNative.get()}),!this.configuration||this.configuration.disableHideAddressBar!==!0){var n=this.root,a=navigator.userAgent;this._iphone=!(!~a.indexOf("iPhone")&&!~a.indexOf("iPod")),this._ipad=!!~a.indexOf("iPad"),this._ios=this._iphone||this._ipad,this._native=this.app.isNative.get(),this._fullscreen=window.navigator.standalone,this._android=!!~a.indexOf("Android"),this._androidChrome=/Android.*Chrome/.test(a),this._androidFirefox=/Firefox/.test(a),this._androidWebkit=this._android&&/WebKit/.test(a),this._androidGecko=this._android&&/Gecko/.test(a);var o=0;window.onresize=function(){o!=n.offsetWidth&&(t.app.command("RecenterMapOnNextMapResize").execute(),o=n.offsetWidth)}}},i.prototype.resizeShell=function(){if(this._resizeShell&&this.screenRegionElement){var e=!this._android||this._androidChrome||this._androidFirefox?dojo.window.getBox().h:window.outerHeight/window.devicePixelRatio,i=!this._android||this._androidChrome||this._androidFirefox?dojo.window.getBox().w:window.outerWidth/window.devicePixelRatio,t=this.screenRegionElement,n=50;dojo.style(t,"height",e-n+"px"),dojo.style(t,"width",i+"px")}},i}(t.CommonShellView);i.HandheldShellView=n})},"Mapping/modules/Shells/LargeShellView":function(){define(["require","exports","./CommonShellView","./LargeShellViewModel","geocortex/framework-ui/ViewContainer/ViewContainerView","geocortex/infrastructure/ShellUtils","geocortex/framework/utils/utils","./ShellState"],function(e,i,t,n,a,o,s,l){"use strict";var r=function(e){function i(i,t){var n=e.call(this,i,t)||this;return n.dataFrameAwaitsViewModel=null,n.leftPanelView=null,n._resizeAllInvoked=!1,n.app.event("ViewActivatedEvent").subscribe(n,function(e){n.resizeAllDeferred(),"MapView"===e.id&&n.scrollToTop();var i=n.app.viewManager.getRegionForViewId(e.id);i&&"LeftPanelRegion"===i.name&&(n.viewModel.canAutoOpenDataframe.get()&&n.app.command("OpenDataFrame").execute(),n.leftPanelView=e),i&&"BottomPanelRegion"===i.name&&n.viewModel.canAutoOpenDataframe.get()&&n.app.command("OpenResultsFrame").execute()}),n.app.event("ViewDeactivatedEvent").subscribe(n,function(e){n.resizeAllDeferred()}),n.app.event("ApplicationResizedEvent").subscribe(n,function(){n.resizeAll()}),n.app.command("ActivateView").register(n,function(e){var i=n.app.viewManager.getRegionForViewId(e);i&&"LeftPanelRegion"===i.name&&n.viewModel.canAutoOpenDataframe.get()&&n.app.command("OpenDataFrame").execute(),i&&"BottomPanelRegion"===i.name&&n.app.command("OpenBottomRegion").execute()}),n.app.command("OpenDataFrame").register(n,n._executeOpenLeftPanel),n.app.command("CloseDataFrame").register(n,n._executeCloseLeftPanel),n.app.command("ToggleDataFrame").register(n,n._executeToggleLeftPanel),n.app.command("OpenResultsFrame").register(n,n._executeOpenBottomRegion),n.app.command("CloseResultsFrame").register(n,n._executeCloseBottomRegion),n.app.command("ToggleResultsFrame").register(n,n._executeToggleBottomRegion),n.app.command("OpenBottomRegion").register(n,n._executeOpenBottomRegion),n.app.command("CloseBottomRegion").register(n,n._executeCloseBottomRegion),n.app.command("_SetDataFrameAutoOpenClose").register(n,function(e){return n.viewModel.canAutoOpenDataframe.set(e)}),n.app.command("_ExportShellState").register(n,n._exportState),n.app.command("_ApplyShellState").register(n,n._applyState),n.app.event("RegionActivatedEvent").subscribe(n,function(e){"LeftPanelRegion"===e.name&&n.viewModel.canAutoOpenDataframe.get()&&n._activateDataRegion(!0),"BottomPanelRegion"===e.name&&n._activateBottomRegion(!0)}),n.app.event("RegionDeactivatedEvent").subscribe(n,function(e){"LeftPanelRegion"===e.name&&n._activateDataRegion(!1),"BottomPanelRegion"===e.name&&n._activateBottomRegion(!1)}),n.app.event("WorkflowFormTextInputBlurredEvent").subscribe(n,function(){setTimeout(function(){n.scrollToTop(),n.resizeAll()},100)}),n.app.command("ResizeShell").register(n,function(){n.resizeAll()}),n.app.event("PanelResizeEndEvent").subscribe(n,function(e){var i=n.app.viewManager.getViewById(e.viewId),t=i&&i.configuration&&i.configuration.resizableParentRegion?i.configuration.resizableParentRegion:null;if(!t){var a=n.app.viewManager.getRegionForViewId(e.viewId);t=a&&a.name?a.name:null}"LeftPanelRegion"===t&&(n.viewModel.dataFrameIsUserResized=!0,n.viewModel.dataFrameWidth.set(n.leftRegionElement.clientWidth)),"BottomPanelRegion"===t&&(n.viewModel.bottomRegionIsUserResized.set(!0),n.viewModel.bottomRegionHeight.set(n.bottomRegionElement.clientHeight))}),n}return __extends(i,e),i.prototype._activateDataRegion=function(e){e?this._executeOpenLeftPanel():this._executeCloseLeftPanel(),this.viewModel&&this.viewModel.dataFrameIsEmpty.set(!e)},i.prototype._activateBottomRegion=function(e){"boolean"==typeof e&&(e?this._executeOpenBottomRegion():this._executeCloseBottomRegion(),this.viewModel&&this.viewModel.bottomRegionHasViews.set(e))},i.prototype.attach=function(i){var t=this;$(this.app.getHostElement()).addClass("shell-large"),e.prototype.attach.call(this,i),this.dataFrameAwaitsViewModel&&(this._activateDataRegion(!0),this.dataFrameAwaitsViewModel=!1,this.resizeAll()),this._shellDimensions=this._shellDimensions||this._measureShellDimensions();var a={"min-width":this._shellDimensions.width?this._toPixels(this.viewModel.minWidth.get(),this._shellDimensions.width):n.LargeShellViewModel.DEFAULT_DATA_FRAME_MIN_WIDTH,"max-width":this._shellDimensions.width?this._toPixels(this.viewModel.maxWidth.get(),this._shellDimensions.width):n.LargeShellViewModel.DEFAULT_DATA_FRAME_MAX_WIDTH};$(this.leftRegionElement).css(a),this.viewModel.dataFrameOpenByDefault&&(this._executeOpenLeftPanel(),this.app.event("SiteInitializingEvent").once(this,function(){t.app.event("DataFrameOpenedEvent").publish()})),this._subscribeEvents()},i.prototype._subscribeEvents=function(){var e=this;this.app.event("DataFrameOpenedEvent").subscribe(this,function(){return e.leftPanelView?(e.app.trace.debug("View focused from dataframe opening: "+e.leftPanelView.id),void e.app.command("FocusOnFirstInputInView").execute(e.leftPanelView)):void e.app.trace.warning("View not found when trying to focus on dataframe.")})},i.prototype.handleClickCloseDataFrame=function(){this.app.command("CloseDataFrame").execute()},i.prototype.handleClickDataRegionTab=function(){this.app.command("OpenDataFrame").execute()},i.prototype.resizeAll=function(){this.resizeShell(),this.resizeScreenRegion()},i.prototype.resizeAllDeferred=function(){var e=this;if(!this._resizeAllInvoked){var i=function(){o.debounceViewEvents(e.app,function(){e.resizeAll(),e._resizeAllInvoked=!1},100)};this._resizeAllInvoked=!0,this.app&&this.app.site&&this.app.site.serviceLayersLoaded?i():this.app.event("SiteServiceLayersLoadedEvent").once(this,i)}},i.prototype.resizeScreenRegion=function(){if(this.viewModel&&this.headerContainerElement&&this.screenRegionElement){if(this.centerElement){var e=this.centerElement;setTimeout(function(){dojo.style(e,{display:"block"})},0)}this.app.command("MapResize").execute()}},i.prototype.resizeShell=function(){if(this.viewModel&&this.mainElement){this._shellDimensions=this._measureShellDimensions();var e=this.headerContainerElement?dojo.position(this.headerContainerElement):null,i=e?e.h:0,t=this.footerContainerElement?dojo.position(this.footerContainerElement):null,n=t?t.h:0,a=this._currentDataFrameWidth(),o=this._currentBottomRegionHeight(),l=Math.max(document.documentElement.clientHeight,window.innerHeight||0);if(o>l-i&&(o=l-i,$(this.bottomElement).height(o)),this.viewModel.dataFrameIsOpen.get()){var r=parseInt($(this.leftRegionElement).css("min-width")),d=parseInt($(this.leftRegionElement).css("max-width"));a=s.clamp(a,r,d)}if(this.viewModel.bottomRegionIsOpen.get()){var h=parseInt($(this.bottomRegionElement).css("min-height")),m=parseInt($(this.bottomRegionElement).css("max-height"));o=s.clamp(o,h,m)}dojo.style(this.mainElement,"top",i+"px"),dojo.style(this.mainElement,"bottom",n+"px"),dojo.style(this.leftElement,"width",a+"px"),dojo.style(this.leftRegionElement,"width",a+"px"),dojo.style(this.centerElement,"left",a+"px"),dojo.style(this.centerElement,"bottom",o+"px"),dojo.style(this.bottomElement,"left",a+"px"),dojo.style(this.bottomElement,"height",o+"px"),dojo.style(this.bottomRegionElement,"height",o+"px"),"true"===$(this.bottomRegionElement).attr("data-maximized")?$(this.bottomElement).addClass("maximized"):$(this.bottomElement).removeClass("maximized");var p=this.app.viewManager.getExistingRegionByName("BottomPanelRegion");p&&0===p.activeViews.length&&$(this.bottomElement).removeClass("maximized")}},i.prototype._executeOpenLeftPanel=function(){if(!this.viewModel)return void(this.dataFrameAwaitsViewModel=!0);if(this.viewModel.dataFrameIsOpen.get()===!1){if(this.viewModel.dataFrameIsOpen.set(!0),this.leftElement){this.app.command("RecenterMapOnNextMapResize").execute(),dojo.removeClass(this.leftElement,"panel-closed"),dojo.addClass(this.leftElement,"panel-open");var e=this._currentDataFrameWidth();$(this.leftRegionElement).width(e)}if(this.leftPanelView instanceof a.ViewContainerView){var i=this.leftPanelView;i.resize(),i.viewModel.currentView.resize&&i.viewModel.currentView.resize()}this.app.event("DataFrameOpenedEvent").publish(),this.app.event("ApplicationResizeEvent").publish(),this.app.event("ApplicationResizedEvent").publish()}},i.prototype._executeCloseLeftPanel=function(){this.viewModel&&this.viewModel.dataFrameIsOpen.get()===!0&&(this.viewModel.dataFrameIsOpen.set(!1),this.leftElement&&(this.app.command("RecenterMapOnNextMapResize").execute(),dojo.removeClass(this.leftElement,"panel-open"),dojo.addClass(this.leftElement,"panel-closed"),this.resizeAll()),this.app.event("DataFrameClosedEvent").publish(),this.app.event("ApplicationResizeEvent").publish(),this.app.event("ApplicationResizedEvent").publish())},i.prototype._executeToggleLeftPanel=function(){this.viewModel.dataFrameIsOpen.get()===!1?this.app.command("OpenDataFrame").execute():this.app.command("CloseDataFrame").execute()},i.prototype._executeOpenBottomRegion=function(){if(this.viewModel&&this.viewModel.bottomRegionIsOpen.get()===!1){if(this.viewModel.bottomRegionIsOpen.set(!0),this.bottomElement){this.app.command("RecenterMapOnNextMapResize").execute(),dojo.removeClass(this.bottomElement,"panel-closed"),dojo.addClass(this.bottomElement,"panel-open");var e=this._currentBottomRegionHeight();$(this.bottomRegionElement).height(e),this.resizeAll()}this.app.event("ResultsRegionOpenedEvent").publish(),this.app.event("ApplicationResizeEvent").publish(),this.app.event("ApplicationResizedEvent").publish()}},i.prototype._executeCloseBottomRegion=function(){this.viewModel&&this.viewModel.bottomRegionIsOpen.get()===!0&&(this.viewModel.bottomRegionIsOpen.set(!1),this.bottomElement&&(this.app.command("RecenterMapOnNextMapResize").execute(),dojo.removeClass(this.bottomElement,"panel-open"),dojo.addClass(this.bottomElement,"panel-closed"),this.resizeAll()),this.app.event("ResultsRegionClosedEvent").publish(),this.app.event("ApplicationResizeEvent").publish(),this.app.event("ApplicationResizedEvent").publish())},i.prototype._executeToggleBottomRegion=function(){this.viewModel.bottomRegionIsOpen.get()===!1?this.app.command("OpenBottomRegion").execute():this.app.command("CloseBottomRegion").execute()},i.prototype._measureShellDimensions=function(){return{width:this.mainElement?$(this.mainElement).width():0,height:this.mainElement?$(this.mainElement).height():0}},i.prototype._currentDataFrameWidth=function(){return this.viewModel.dataFrameIsOpen.get()===!1?0:(this._shellDimensions=this._shellDimensions||this._measureShellDimensions(),this._toPixels(this.viewModel.dataFrameWidth.get(),this._shellDimensions.width))},i.prototype._currentBottomRegionHeight=function(){return this.viewModel.bottomRegionIsOpen.get()===!1?0:(this._shellDimensions=this._shellDimensions||this._measureShellDimensions(),this._toPixels(this.viewModel.bottomRegionHeight.get(),this._shellDimensions.height))},i.prototype._toPixels=function(e,i){return"string"==typeof e&&s.isPercentage(e)?parseFloat(e)*i/100:e},i.prototype.openLayerList=function(e,i,t){this.app.command("ShowLayerList").execute()},i.prototype.openHomePanel=function(e,i,t){this.app.command("ActivateHomePanel").execute()},i.prototype._exportState=function(e){e.dataFrameIsOpen=this.viewModel.dataFrameIsOpen.get(),this.viewModel.dataFrameIsUserResized&&(e.dataFrameWidth=this.viewModel.dataFrameWidth.get()),e.resultsFrameIsOpen=this.viewModel.bottomRegionIsOpen.get();var i=this.app.viewManager.getViewById("ResultsRegionViewContainerView");i&&i.viewModel&&(e.resultsFrameIsMaximized=i.viewModel.panelMaximized.get()),this.viewModel.bottomRegionIsUserResized.get()&&(e.resultsFrameHeight=this.viewModel.bottomRegionHeight.get());var t=this.app.viewManager.getExistingRegionByName("DataRegion");e.dataFrameSelectedView=l.ProjectView.getTopmostViewInRegion(t);var n=this.app.viewManager.getExistingRegionByName("BottomPanelRegion");e.resultsFrameSelectedView=l.ProjectView.getTopmostViewInRegion(n)},i.prototype._applyState=function(e){s.isNullOrUndefined(e.dataFrameWidth)||(this.viewModel.dataFrameWidth.set(e.dataFrameWidth),this.viewModel.dataFrameIsUserResized=!0);var i=e.dataFrameSelectedView;"ResultsViewContainerView"===i&&(i="DataFrameResultsContainerView"),i&&this.app.command("ActivateView").execute(i),e.dataFrameIsOpen?this.app.command("OpenDataFrame").execute():this.app.command("CloseDataFrame").execute(),s.isNullOrUndefined(e.resultsFrameHeight)||(this.viewModel.bottomRegionHeight.set(e.resultsFrameHeight),this.viewModel.bottomRegionIsUserResized.set(!0));var t=this.app.viewManager.getViewById("ResultsRegionViewContainerView");t&&t.viewModel&&t.viewModel.panelMaximized.set(e.resultsFrameIsMaximized),e.resultsFrameSelectedView&&this.app.command("ActivateView").execute(e.resultsFrameSelectedView),e.resultsFrameIsOpen?this.app.command("OpenResultsFrame"):this.app.command("CloseResultsFrame")},i}(t.CommonShellView);i.LargeShellView=r})},"Mapping/modules/Shells/LargeShellViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","geocortex/framework-ui/LazyObservable","geocortex/framework/utils/utils"],function(e,i,t,n,a,o){"use strict";var s=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.dataFrameIsUserResized=!1,i.dataFrameOpenByDefault=!1,i.dataFrameIsOpen=new n.Observable((!1)),i.dataFrameIsEmpty=new n.Observable((!1)),i.canAutoOpenDataframe=new n.Observable((!1)),i.bottomRegionIsUserResized=new n.Observable((!1)),i.bottomRegionIsOpen=new n.Observable((!1)),i.bottomRegionIsMaximized=new n.Observable((!1)),i.bottomRegionHasViews=new n.Observable((!1)),i.linkableModuleLoaded=new n.Observable((!1)),i.infoModuleLoaded=new n.Observable((!1)),i.layerListModuleLoaded=new n.Observable((!1)),i}return __extends(i,e),i.prototype.initialize=function(e){var t=this;this.config={};var n=function(e,i,t,n){var a="string"==typeof e&&o.isPercentage(e),s=a?t:i,l=a?o.clamp(parseFloat(e),0,100):parseInt(e);l>=0&&(n[s]=l)};if(e){e.hasOwnProperty("minWidth")&&n(e.minWidth,"minWidth","minWidthPercent",this.config),e.hasOwnProperty("maxWidth")&&n(e.maxWidth,"maxWidth","maxWidthPercent",this.config),e.hasOwnProperty("dataFrameWidth")&&n(e.dataFrameWidth,"dataFrameWidth","dataFrameWidthPercent",this.config),0!==this.config.dataFrameWidth&&0!==this.config.dataFrameWidthPercent||(o.isNullOrUndefined(this.config.minWidth)?o.isNullOrUndefined(this.config.minWidthPercent)||(this.config.dataFrameWidthPercent=this.config.minWidthPercent,delete this.config.dataFrameWidth):(this.config.dataFrameWidth=this.config.minWidth,delete this.config.dataFrameWidthPercent)),e.hasOwnProperty("dataFrameOpenByDefault")&&(this.dataFrameOpenByDefault=e.dataFrameOpenByDefault);var s=this.app.configModel.moduleConfigs.filter(function(e){return"Shells"===e.moduleName})[0];s?s&&1==s.configuration.homePanelVisible&&(this.dataFrameOpenByDefault=!0):this.app.trace.warning("'Shells' module could not be found! Map offset may be incorrect due to missing panel setting."),e.hasOwnProperty("bottomRegionHeight")&&n(e.bottomRegionHeight,"bottomRegionHeight","bottomRegionHeightPercent",this.config)}this.minWidth=new a.LazyObservable(null,this._createLazyDelegateGetter(this.config.minWidth,this.config.minWidthPercent,i.DEFAULT_DATA_FRAME_MIN_WIDTH)),this.maxWidth=new a.LazyObservable(null,this._createLazyDelegateGetter(this.config.maxWidth,this.config.maxWidthPercent,i.DEFAULT_DATA_FRAME_MAX_WIDTH)),this.dataFrameWidth=new a.LazyObservable(null,this._createLazyDelegateGetter(this.config.dataFrameWidth,this.config.dataFrameWidthPercent,i.DEFAULT_DATA_FRAME_WIDTH)),this.bottomRegionHeight=new a.LazyObservable(null,this._createLazyDelegateGetter(this.config.bottomRegionHeight,this.config.bottomRegionHeightPercent,i.DEFAULT_BOTTOM_REGION_HEIGHT)),this.app.event("SiteInitializedEvent").once(this,function(){t.canAutoOpenDataframe.set(!0)}),this.app.command("ActivateHomePanel").canExecuteChanged.subscribe(this,function(e){t.infoModuleLoaded.set(t.app.command("ActivateHomePanel").canExecute()),t.linkableModuleLoaded.set(t.infoModuleLoaded.get()||t.layerListModuleLoaded.get())}),this.app.command("SwitchToLayerView").canExecuteChanged.subscribe(this,function(e){t.layerListModuleLoaded.set(t.app.command("SwitchToLayerView").canExecute()),t.linkableModuleLoaded.set(t.infoModuleLoaded.get()||t.layerListModuleLoaded.get())})},i.prototype.getValue=function(e,i,t){return o.isNullOrUndefined(e)?o.isNullOrUndefined(i)?t:"{0}%".format(i):e},i.prototype._createLazyDelegateGetter=function(e,i,t){var n=this,a=function(){return n.getValue(e,i,t)};return a},i}(t.ViewModelBase);s.DEFAULT_DATA_FRAME_MIN_WIDTH=200,s.DEFAULT_DATA_FRAME_MAX_WIDTH=500,s.DEFAULT_DATA_FRAME_WIDTH=350,s.DEFAULT_BOTTOM_REGION_HEIGHT=400,i.LargeShellViewModel=s})},"Mapping/modules/Shells/ShellModule":function(){define(["require","exports","geocortex/framework/application/ModuleBase","geocortex/infrastructure/ShellUtils","./ShellState","geocortex/framework-ui/utils/UiUtils","geocortex/framework-ui/ViewContainer/ViewContainerView"],function(e,i,t,n,a,o,s){"use strict";var l=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.initialize=function(e){var i=this;e&&(Array.isArray(e.css)&&e.css.forEach(function(e){var t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e,t.onload=function(){i.app.event("ApplicationResizedEvent").publish()},document.head.appendChild(t)}),e.homePanelVisible&&this.app.event("SiteInitializingEvent").once(this,function(){i.app.command("DisableScreenReaderNarrate").execute(),i.app.command("ActivateHomePanel").execute(),n.debounceViewEvents(i.app,function(){i._focusHomePanelAndEnableNarration()})})),this.registerCommands(),this.registerEvents()},i.prototype.getStateFilter=function(){return{dataFrameIsOpen:!0,dataFrameIsMaximized:!0,dataFrameWidth:!0,dataFrameSelectedView:!0,resultsFrameIsOpen:!0,resultsFrameIsMaximized:!0,resultsFrameHeight:!0,resultsFrameSelectedView:!0,views:!0}},i.prototype.exportState=function(){var e=this;return Promise["try"](function(){var i={dataFrameIsOpen:!1,dataFrameIsMaximized:!1,resultsFrameIsOpen:!1,resultsFrameIsMaximized:!1,views:{}};return a.ProjectView.All.forEach(function(t){var n=e.app.viewManager.getViewById(t);n&&(i.views[t]=n.isActive)}),e.app.command("_ExportShellState").execute(i),i.serialVersion=2,i})},i.prototype.applyState=function(e){var i=this;e=dojo.clone(e);var t=this.app.event("ProjectLoadedEvent").subscribe(this,function(n){i.app.event("ProjectLoadedEvent").unsubscribe(t),i.app.command("_SetDataFrameAutoOpenClose").execute(!1),e.views=e.views||{};i.app.project.isLoading=!0,a.ProjectView.All.forEach(function(t){var n=!!e.views[t],o=i.app.viewManager.getViewById(t);!o&&t===a.ProjectView.ResultsTable&&n?(o=i.app.viewManager.getViewById(a.ProjectView.Results),e.dataFrameIsOpen=e.dataFrameIsOpen||e.resultsFrameIsOpen):!o&&t===a.ProjectView.FeatureDetailsExpanded&&n&&(o=i.app.viewManager.getViewById(a.ProjectView.FeatureDetails),e.dataFrameIsOpen=e.dataFrameIsOpen||e.resultsFrameIsOpen),o&&(n?i.app.viewManager.activateView(o):i.app.viewManager.deactivateView(o))}),i.app.command("_ApplyShellState").execute(e),i.app.command("_SetDataFrameAutoOpenClose").execute(!0),i.app.project.isLoading=!1});return Promise.resolve()},i.prototype.registerCommands=function(){this.app.command("TapToDismiss").register(this,this._executeTapToDismiss),this.app.command("DisableTapToDismiss").register(this,function(e){return o.disableTapToDismiss(e)})},i.prototype.registerEvents=function(){var e=this;this.app.event("FlyoutActivated").subscribe(this,function(i){e.app.command("DisableMapClick").execute()}),this.app.event("FlyoutDeactivated").subscribe(this,function(i){e.app.command("EnableMapOnNextClick").execute()})},i.prototype._focusHomePanelAndEnableNarration=function(){var e=this,i=this.app.viewManager.getViewById("InfoView");if(i){var t=$(i.root);t&&dojo.isFunction(t.focusout)?t.focusout(function(){e.app.command("EnableScreenReaderNarrate").execute(),t.off("focusout")}):this.app.command("EnableScreenReaderNarrate").execute(),this.app.command("FocusOnFirstInputInView").execute(i)}},i.prototype._executeTapToDismiss=function(e){this.app.configuration.mobileMode&&"IWantToMenuView"!==e.view.id&&"SearchHintsView"!==e.view.id&&"ShellView"!==e.view.id||o.tapToDismissThis(e.view,e.onOtherInteracted,e.onElementInteracted)},i.prototype._getContainerView=function(e){var i=this.app.viewManager.getRegionForViewId(e);if(i){var t=i.ownerView;if(t instanceof s.ViewContainerView)return t}return null},i}(t.ModuleBase);i.ShellModule=l})},"Mapping/modules/Shells/ShellState":function(){define(["require","exports","geocortex/framework-ui/ViewContainer/ViewContainerView","geocortex/framework/utils/ArrayUtils"],function(e,i,t,n){"use strict";var a=function(){function e(){}return e.isProjectView=function(i){return e.All.indexOf(i.id)>=0},e.containsProjectView=function(i){if(!(i instanceof t.ViewContainerView))return!1;var n=i;return n.viewModel.viewDescriptors.get().some(function(i){return e.isProjectView(i.view)})},e.getTopmostViewInRegion=function(i){if(i){var t=n.lastOrDefault(i.activeViews,function(i){return e.isProjectView(i)||e.containsProjectView(i)});return t?t.id:void 0}},e}();a.HomePanel="InfoView",a.LayerList="LayerListView",a.Legend="LegendView",a.Results="ResultsListView",a.ResultsFeatureSet="FeatureSetResultsView",a.ResultsTable="ResultsTableView",a.FeatureDetails="FeatureDetailsCompactView",a.FeatureDetailsExpanded="FeatureDetailsExpandedView",a.QueryBuilder="SimpleQueryBuilderView",a.FilterBuilder="SimpleFilterBuilderView",a.Charting="ChartingView",a.PlotCoordinates="PlotCoordinatesView",a.TimeSliderView="TimeSliderSettingsView",a.All=[a.HomePanel,a.LayerList,a.Legend,a.QueryBuilder,a.FilterBuilder,a.Results,a.ResultsFeatureSet,a.PlotCoordinates,a.TimeSliderView,a.Charting,a.ResultsTable,a.FeatureDetails,a.FeatureDetailsExpanded],i.ProjectView=a})},"Mapping/modules/Shells/Components/DataFrameButtonView":function(){define(["require","exports","geocortex/framework/ui/ViewBase","geocortex/infrastructure/ui/components/SmartPanel/SmartPanelView"],function(e,i,t,n){"use strict";var a=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.timeoutId=null,i.dataframeIsOpen=!1,i.resizeDelay=300,i}return __extends(i,e),i.prototype.attach=function(e){var i=this;this.app.event("DataFrameOpenedEvent").subscribe(this,function(){$(i.buttonElement).removeClass("tab-closed"),$(i.buttonElement).addClass("tab-open"),i.isActive||i.app.command("ActivateView").execute(i.id),i.dataframeIsOpen=!0}),this.app.event("DataFrameClosedEvent").subscribe(this,function(){$(i.buttonElement).removeClass("tab-open"),$(i.buttonElement).addClass("tab-closed"),i.dataframeIsOpen=!1})},i.prototype.handleMouseDown=function(e,i,t){var n=this;e.button>1&&"mousedown"===e.type||this.dataframeIsOpen&&(this.timeoutId=setTimeout(function(){n._resizeDataFrame(e.pageX,e.pageY)},this.resizeDelay))},i.prototype.handleTouchStart=function(e,i,t){var n=this,a=null;return $(this.viewModel.currentView.root).is(":visible")?($(this.app.getHostElement()).one("touchend.dataframe-toggle-click",function(){n.app.command("CloseDataFrame").execute(),clearTimeout(a)}),void(a=setTimeout(function(){$(n.app.getHostElement()).off("touchend.dataframe-toggle-click"),n._resizeDataFrame(e.targetTouches[0].pageX,e.targetTouches[0].pageY)},this.resizeDelay))):void this.app.command("OpenDataFrame").execute()},i.prototype.handleOnClick=function(e,i,t){this.app.command("ToggleDataFrame").execute(),this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)},i.prototype._resizeDataFrame=function(e,i){if(this.viewModel.currentView instanceof n.SmartPanelView){var t=this.viewModel.currentView;t.resizeSmartPanel(e,i)}else{var a=this.app.viewManager.getViewById("DataFrameViewContainer");a.resizeSmartPanel(e,i)}},i}(t.ViewBase);i.DataFrameButtonView=a})},"Mapping/modules/Shells/Components/DataFrameResizeButtonView":function(){define(["require","exports","geocortex/framework/ui/ViewBase","geocortex/infrastructure/ui/components/SmartPanel/SmartPanelView"],function(e,i,t,n){"use strict";var a=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.timeoutId=null,i.resizeDelay=300,i}return __extends(i,e),i.prototype.attach=function(e){var i=this;this.app.event("DataFrameOpenedEvent").subscribe(this,function(){$(i.buttonElement).removeClass("inactive"),$(i.buttonElement).addClass("active")}),this.app.event("DataFrameClosedEvent").subscribe(this,function(){$(i.buttonElement).removeClass("active"),$(i.buttonElement).addClass("inactive")})},i.prototype.handleMouseDown=function(e,i,t){var n=this;e.button>1&&"mousedown"===e.type||(this.timeoutId=setTimeout(function(){n._resizeDataFrame(e.pageX,e.pageY)},this.resizeDelay))},i.prototype.handleTouchStart=function(e,i,t){var n=this,a=null;$(this.app.getHostElement()).one("touchend.dataframe-toggle-click",function(){clearTimeout(a)}),a=setTimeout(function(){$(n.app.getHostElement()).off("touchend.dataframe-toggle-click"),n._resizeDataFrame(e.targetTouches[0].pageX,e.targetTouches[0].pageY)},this.resizeDelay)},i.prototype._resizeDataFrame=function(e,i){if(this.viewModel.currentView instanceof n.SmartPanelView){var t=this.viewModel.currentView;t.resizeSmartPanel(e,i)}else{var a=this.app.viewManager.getViewById("DataFrameViewContainer");a.resizeSmartPanel(e,i)}},i}(t.ViewBase);i.DataFrameResizeButtonView=a})},"Mapping/modules/Shells/Components/NavBarSmallView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,i,t){"use strict";var n=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.handleTapNavButton=function(e,i,t){this.app.command("DeactivateView").execute(this.id),this.app.command("ActivateView").execute(t.view.id)},i.prototype.handleTapSwitcherCloseButton=function(e,i,t){this.app.command("DeactivateView").execute(this.id)},i}(t.ViewBase);i.NavBarSmallView=n})},"Mapping/modules/Shells/Components/Navigation/NavButtonView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,i,t){"use strict";var n=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.handleTap=function(e,i,t){return this.app.command("ToggleView").execute("NavBarSmallView"),!1},i}(t.ViewBase);i.NavButtonView=n})},"Mapping/modules/Shells/Components/Navigation/NavButtonViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase"],function(e,i,t){"use strict";var n=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i}(t.ViewModelBase);i.NavButtonViewModel=n})},"Mapping/modules/Shells/Components/Panels/ShellPanelView":function(){define(["require","exports","geocortex/infrastructure/ui/components/SmartPanel/SmartPanelView","geocortex/framework-ui/ViewContainer/ViewContainerView","../../Small/PanelPosition"],function(e,i,t,n,a){"use strict";var o=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.added=function(i){var t=this;e.prototype.added.call(this,i),this._wireUpHammer(),this.viewModel.titleBarIsVisible.set(!0),this.app.event("SmallShellPanelPositionChanged").subscribe(this,this.panelPositionChanged),this.app.event("ViewActivatedInContainerEvent").subscribe(this,function(e){e.regionName===t.viewModel.regionName.get()&&(e instanceof n.ViewContainerView?(t.activeContainer=e,t.viewModel.showingSmartBackButton.sync(t.activeContainer.viewModel.showingBackButton)):(t.activeContainer=null,t.viewModel.showingSmartBackButton.set(!1)))})},i.prototype.resolveWidget=function(i,t,n){return"SmartPanelHoistedMenu"===i?e.prototype.resolveWidget.call(this,i,t,n):"ShellPanelHeaderWidget"===i?this.viewModel.hoistedWidgetView:void 0},i.prototype.deactivateContainer=function(){this._destroyHoistedMenuOwnerViewIfExists(),this.app.command("CloseDataFrame").execute()},i.prototype.panelPositionChanged=function(e,i){var t=this;this.panelPosition=e,this.viewModel.maximizeDisabled.get()||(this.panelPosition!==a.PanelPosition.Partial||i)&&this.panelPosition!==a.PanelPosition.Maximized?this.viewModel.maximizeDisabled.get()&&this.viewModel.maximizeDisabled.set(!1):this.viewModel.maximizeDisabled.set(!0),this.panelPosition===a.PanelPosition.Hidden&&(this._destroyHoistedMenuOwnerViewIfExists(),this.viewModel.contextWidgetViewId&&this.viewModel.widgetViewModel.get()&&(this.app.command("_SetDataFrameAutoOpenClose").execute(!1),
this.app.viewManager.deactivateView(this.app.viewManager.getViewById(this.viewModel.contextWidgetViewId)),setTimeout(function(){return t.app.command("_SetDataFrameAutoOpenClose").execute(!0)},50)))},i.prototype.handleClickSmartBackButton=function(e,i,t){if(this.activeContainer){var n=this.activeContainer.viewModel&&this.activeContainer.viewModel.currentView,a=n&&n.viewModel&&n.viewModel.menuSourceView;this.activeContainer.handleClickBack(e,i,this.activeContainer.viewModel),a&&this.app.viewManager.activateView(a)}},i.prototype.handleClickPanelNavButton=function(e,i,t){this.app.command("ActivateView").execute(t.view.id)},i.prototype.handleTapMaximizeSizeButton=function(e,i,t){this.app.command("DataFrameRaise").execute()},i.prototype.handleTapMinimizeSizeButton=function(e,i,t){this.panelPosition!==a.PanelPosition.Hidden&&this.app.command("DataFrameLower").execute()},i.prototype.handleClickMore=function(e,i,t){this.app.command("ActivateView").execute("PrimaryViewSwitcherView")},i.prototype._wireUpHammer=function(){var e=this,i=(window.Hammer,new Hammer(this.headerElement,{}));i.get("swipe").set({direction:Hammer.DIRECTION_ALL}),i.on("swipe",function(i){if(i.isFinal)switch(i.direction){case Hammer.DIRECTION_UP:e.app.command("DataFrameRaise").execute();break;case Hammer.DIRECTION_DOWN:e.app.command("CloseDataFrame").execute();break;case Hammer.DIRECTION_LEFT:e.app.command("ActivateView").execute("IWantToMenu")}})},i}(t.SmartPanelView);i.ShellPanelView=o})},"Mapping/modules/Shells/Components/Panels/ShellPanelViewModel":function(){define(["require","exports","geocortex/infrastructure/ui/components/SmartPanel/SmartPanelViewModel","geocortex/framework/observables","geocortex/framework-ui/ViewContainer/ViewContainerView"],function(e,i,t,n,a){"use strict";var o=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.managedViewsOnly=!0,i.panelIsOpen=new n.Observable((!1)),i.showingSmartBackButton=new n.Observable((!1)),i.widgetViewModel=new n.Observable(null),i.maximizeDisabled=new n.Observable((!1)),i.maximizeVisible=new n.Observable((!1)),i}return __extends(i,e),i.prototype.initialize=function(i){var t=this;e.prototype.initialize.call(this,i),this.app.event("DataFrameOpenedEvent").subscribe(this,function(){t.panelIsOpen.set(!0)}),this.app.event("DataFrameClosedEvent").subscribe(this,function(){t.panelIsOpen.set(!1)}),this.app.event("SmallShellBottomPanelMinimizedModeChange").subscribe(this,function(e){return t.maximizeVisible.set(e)})},i.prototype.handleViewActivatedEvent=function(i){if(e.prototype.handleViewActivatedEvent.call(this,i),i instanceof a.ViewContainerView){var t="BottomPanelViewContainerRegion";return this._currentViewContainerId&&i.regionName===t&&this._currentViewContainerId!==i.id&&this.cleanUpCurrentWidget(i),void(i.regionName===t&&(this._currentViewContainerId=i.id,this._hoistWidgetInViewContainer(i)))}return this.contextWidgetViewId&&i.id===this.contextWidgetViewId&&this.cleanUpCurrentWidget(i),this._hoistWidgetIfNeeded(i),!0},i.prototype.handleViewDeactivatedEvent=function(i){if(e.prototype.handleViewDeactivatedEvent.call(this,i),!(i instanceof a.ViewContainerView))return this.contextWidgetViewId&&i.id===this.contextWidgetViewId&&this.cleanUpCurrentWidget(),!0},i.prototype._hoistWidgetInViewContainer=function(e){var i=this;e.childRegions.forEach(function(e){return e.views.forEach(function(e){e.root.className.indexOf("inactive")===-1&&e.createWidgetView&&i._hoistWidgetIfNeeded(e)})})},i.prototype._hoistWidgetIfNeeded=function(e){var i=e.createWidgetView;if(i){this.cleanUpCurrentWidget(e);var t=e.createWidgetView();this.contextWidgetViewId=e.id,this.contextWidgetViewRegionName=e.regionName,this.hoistedWidgetView=t,this.widgetViewModel.set(t.viewModel)}else this.hoistedWidgetView&&this.currentView&&this.currentView.childRegions.some(function(i){return i.name===e.regionName})&&this.cleanUpCurrentWidget(e)},i.prototype.cleanUpCurrentWidget=function(e){var i=this;this.hoistedWidgetView&&(this.hoistedWidgetView.destroy(),this.hoistedWidgetView=null,this.widgetViewModel.set(null)),(!e||this.contextWidgetViewId&&e.id!==this.contextWidgetViewId)&&setTimeout(function(){i.contextWidgetViewId&&(i.contextWidgetViewId=null,i.contextWidgetViewRegionName=null)},300)},i}(t.SmartPanelViewModel);i.ShellPanelViewModel=o})},"Mapping/modules/Shells/Small/PanelPosition":function(){define(["require","exports"],function(e,i){"use strict";var t;!function(e){e[e.Hidden=0]="Hidden",e[e.Minimized=1]="Minimized",e[e.Partial=2]="Partial",e[e.Maximized=3]="Maximized"}(t=i.PanelPosition||(i.PanelPosition={}))})},"Mapping/modules/Shells/Small/ShellDimensions":function(){define(["require","exports"],function(e,i){"use strict"})},"Mapping/modules/Shells/Small/SmallShellView":function(){define(["require","exports","./../HandheldShellView","./SmallShellViewModel","geocortex/framework-ui/ViewContainer/ViewContainerView","geocortex/framework-ui/animation/Animation","./PanelPosition","geocortex/framework/events/ViewDimensionsChangedArgs","./../ShellState"],function(e,i,t,n,a,o,s,l,r){"use strict";var d=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.cssClasses={maximized:"panel-maximized",minimized:"panel-minimized",partial:"panel-partial-height",hidden:"panel-hidden",hiddenDueToMaximization:"hidden-by-panel",screenRegionSlideUp:"slide-up-end",leftPanelOpen:"left-panel-open",leftPanelOpening:"left-panel-opening",leftPanelClosed:"left-panel-closed",leftPanelClosing:"left-panel-closing",hiddenByScreenElement:"hidden-by-screen-element"},i._headerBarDeactivateAnimation=["header-active:0","header-inactive:0"],i._headerBarActivateAnimation=["header-inactive:0","header-active:0"],i._leftPanelOpenAnimation=["left-panel-closed:0","left-panel-opening:0","left-panel-opened:300"],i._leftPanelCloseAnimation=["left-panel-opened:0","left-panel-closing:300","left-panel-closed:0"],i._topRightRegionActivateAnimation=["top-right-shell-region-closed:0","top-right-shell-region-opening","top-right-shell-region-opened:250"],i._topRightRegionDeactivateAnimation=["top-right-shell-region-opened:0","top-right-shell-region-closing:250","top-right-shell-region-closed:0"],i._navRegionActivateAnimation=["nav-region-closed:0","nav-region-opening:0","nav-region-opened:500"],i._navRegionDeactivateAnimation=["nav-region-opened:0","nav-region-closing:500","nav-region-closed:0"],i._domBreatheDelay=50,i._resizeSettleTimeoutMs=550,i._bottomPanelOpening=!1,i._useCssTransitions=!0,i._cssTransitionStyle="transition",i._cssTransitionEnd="transitionend",i._cssTransitionEndMap={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",msTransition:"MSTransitionEnd",transition:"transitionend"},i._minimizedMode=!1,i._discoveredChildRegions={BottomPanelRegion:!0},i}return __extends(i,e),i.prototype.added=function(e){var i=this;$(this.app.getHostElement()).addClass("shell-small"),this._detectCssTransitions(),this._shellDimensions=this._measureShellDimensions(),this.app.event("ViewActivatedEvent").subscribe(this,this._handleViewActivated),this.app.event("ViewDeactivatedEvent").subscribe(this,this._handleViewDeactivated),this.app.event("RegionActivatedEvent").subscribe(this,this._handleRegionActivated),this.app.event("RegionDeactivatedEvent").subscribe(this,this._handleRegionDeactivated),this.app.event("ApplicationResizedEvent").subscribe(this,this._resizeShellOnceSettled),this.app.event("ApplicationNativeReadyEvent").subscribe(this,this.resizeShell),this.app.command("ResizeShell").register(this,this.resizeShell),this.app.command("OpenDataFrame").register(this,function(){return i._openBottomPanel()}),this.app.command("CloseDataFrame").register(this,function(){return i._closeBottomPanel()}),this.app.command("DataFrameRaise").register(this,function(){return i._rotateDataFramePosition(!0,!1)}),this.app.command("DataFrameLower").register(this,function(){return i._rotateDataFramePosition(!1,!1)}),this.app.command("DataFrameCyclePosition").register(this,function(){return i._rotateDataFramePosition()}),this.app.command("_SetDataFrameAutoOpenClose").register(this,function(e){i.viewModel.bottomPanelAutoPosition=e}),this.app.command("_ExportShellState").register(this,this._exportState),this.app.command("_ApplyShellState").register(this,this._applyState),this.app.event("ToolbarFlyoutDeactivatedEvent").subscribe(this,this._handleToolbarFlyoutDeactivatedEvent),$(window).on("scroll",function(e){return i._resizeShellOnceSettled()}),this._yield(function(){o.create(i.bottomPanelRegionElement).add({transform:"translate(0px, {0}px)".format(i._shellDimensions.height),duration:0}).play()})},i.prototype.resizeShell=function(e){var i=this;if(void 0===e&&(e=!1),this.containerElement){var t,a,o=this._measureShellDimensions();if(this._shellDimensions?(t=this._shellDimensions.width!==o.width,a=this._shellDimensions.height!==o.height):(this._shellDimensions=this._measureShellDimensions(),t=!0,a=!0),this._ios&&!this._native){var r=document.body.offsetHeight,d=window.innerHeight,h=(90===Math.abs(window.orientation),d<r);h?($(this.containerElement).css({top:"{0}px".format(r-d)}),$(this.navigationRegionElement).css({top:"{0}px".format(d)}),o.height=d,e=!0):($(this.containerElement).css({top:"0px"}),$(this.navigationRegionElement).css({top:"{0}px".format(r)}),$("body").height(""),o.height=d)}if(e||t||a){if(this._shellDimensions=o,this.viewModel.headerHeight=$(this.headerRegionElement).height(),this.viewModel.headerHeight&&!isNaN(this.viewModel.headerHeight)||(this.viewModel.headerHeight=n.SmallShellViewModel.DEFAULT_HEADER_HEIGHT),a||e){switch(this.viewModel.bottomPanelPosition){case s.PanelPosition.Hidden:case s.PanelPosition.Partial:this.viewModel.bottomPanelTargetHeight=this.viewModel.config.bottomPanelHeightPercent*this._shellDimensions.height;break;case s.PanelPosition.Minimized:this.viewModel.bottomPanelTargetHeight=this.bottomPanelInnerRegionElement.clientHeight;break;case s.PanelPosition.Maximized:this.viewModel.bottomPanelTargetHeight=this._shellDimensions.height+1}$(this.screenRegionElement).height(o.height-this.viewModel.headerHeight),$(this.containerElement).height(o.height)}(t||a||e)&&(setTimeout(scrollTo,1,0,0),this._yieldForDom(function(){i.app.command("MapResize").execute(),i._changeDataFramePosition(i.viewModel.bottomPanelPosition);var e=i.app.viewManager.getRegionForViewId(i.id);i.app.event("ViewDimensionsChangedEvent").publish(new l.ViewDimensionsChangedArgs(i,e))}))}}},i.prototype._oneTimePanelTransitionEvent=function(e){return this._useCssTransitions?void $(this.bottomPanelRegionElement).one(this._cssTransitionEnd,function(i){e(i)}):void this._yield(e)},i.prototype._viewIsInBottomPanelRegion=function(e){var i=this.app.viewManager.getRegionForViewId(e.id);return i&&!!this._discoveredChildRegions[i.name]},i.prototype._handleViewActivated=function(e){var i=this;if(!this._bottomPanelOpening&&this.viewModel.bottomPanelAutoPosition){var t=this._viewIsInBottomPanelRegion(e);if(t){var n=function(e){var t=e instanceof a.ViewContainerView;if(t){e.childRegions.map(function(e){return i._discoveredChildRegions[e.name]=!0});var o=e.childRegions.filter(function(e){return e&&e.activeViews.length>0})[0],s=o?o.activeViews.filter(function(e){return e.root.className.indexOf("inactive")===-1})[0]:null;return n(s)}return e},o=e instanceof a.ViewContainerView;o?this._currentViewActiveInPanel=n(e):this._currentViewActiveInPanel=e}clearTimeout(this._debouncerTimer),this._debouncerTimer=setTimeout(function(){i._currentViewActiveInPanel&&i._currentViewActiveInPanel.root.className.indexOf("inactive")===-1&&(i._applyMinimizedMode(i._currentViewActiveInPanel.configuration.openMinimized),i._openBottomPanel())},50)}},i.prototype._handleViewDeactivated=function(e){if(this.viewModel.bottomPanelAutoPosition){if(this.viewModel.config.closeBottomPanelWhenDeactivated.indexOf(e.id)!==-1)return void this._changeDataFramePosition(s.PanelPosition.Hidden);var i=this.app.viewManager.getRegionForViewId(e.id);if(i&&(!i||"BottomPanelRegion"===i.name)){var t=!1;i.views.forEach(function(e){return t=!!e.isActive||t}),t||this._changeDataFramePosition(s.PanelPosition.Hidden)}}},i.prototype._handleRegionActivated=function(e){var i=this;switch(e.name){case"LeftPanelRegion":o.play(this.leftPanelRegionElement,this._leftPanelOpenAnimation).then(function(e){return i.app.event("LeftPanelOpenedEvent")}),$(this.leftPanelRegionElement).removeClass(this.cssClasses.leftPanelClosed),$(this.leftPanelRegionElement).removeClass(this.cssClasses.leftPanelClosing);break;case"TopRightShellRegion":this.app.event("SmallShellTopRightRegionOpeningEvent").publish(),o.play(this.topRightShellRegionElement,this._topRightRegionActivateAnimation);break;case"SmallNavigationRegion":o.play(this.navigationRegionElement,this._navRegionActivateAnimation).then(function(e){return i.app.event("SmallNavigationPanelOpenedEvent")})}},i.prototype._handleRegionDeactivated=function(e){var i=this;switch(e.name){case"LeftPanelRegion":o.play(this.leftPanelRegionElement,this._leftPanelCloseAnimation).then(function(e){return i.app.event("LeftPanelClosedEvent")}),$(this.leftPanelRegionElement).removeClass(this.cssClasses.leftPanelOpen),$(this.leftPanelRegionElement).removeClass(this.cssClasses.leftPanelOpening);break;case"TopRightShellRegion":this.app.event("SmallShellTopRightRegionClosingEvent").publish(),o.play(this.topRightShellRegionElement,this._topRightRegionDeactivateAnimation);break;case"SmallNavigationRegion":o.play(this.navigationRegionElement,this._navRegionDeactivateAnimation).then(function(e){return i.app.event("SmallNavigationPanelClosedEvent")})}},i.prototype._handleToolbarFlyoutDeactivatedEvent=function(e){var i=this;this.app.command("DeactivateView").execute(e),this._yield(function(){return i.app.command("CloseDataFrame").execute()})},i.prototype._yield=function(e){return setTimeout(e,0)},i.prototype._yieldForDom=function(e){return setTimeout(e,this._domBreatheDelay)},i.prototype._panelIsOpen=function(){return this.viewModel.bottomPanelPosition!==s.PanelPosition.Hidden},i.prototype._openBottomPanel=function(){return this._minimizedMode||this.viewModel.bottomPanelPosition!==s.PanelPosition.Minimized?void(this._panelIsOpen()||(this.viewModel.config.openToMaximum?this._changeDataFramePosition(s.PanelPosition.Maximized):this._minimizedMode?this._changeDataFramePosition(s.PanelPosition.Minimized):this._changeDataFramePosition(s.PanelPosition.Partial))):void this._changeDataFramePosition(this.viewModel.config.openToMaximum?s.PanelPosition.Maximized:s.PanelPosition.Partial)},i.prototype._closeBottomPanel=function(){this._panelIsOpen()&&(this.app.event("SmallBottomPanelClosedEvent").publish(),this._changeDataFramePosition(s.PanelPosition.Hidden))},i.prototype._rotateDataFramePosition=function(e,i){void 0===e&&(e=!0),void 0===i&&(i=!0);var t=[s.PanelPosition.Hidden,s.PanelPosition.Minimized,s.PanelPosition.Partial,s.PanelPosition.Maximized],n=t.indexOf(this.viewModel.bottomPanelPosition);n=n===t.length-1?t[0]:n+1,e?(this.viewModel.bottomPanelPosition===s.PanelPosition.Hidden&&(n=this._minimizedMode?s.PanelPosition.Minimized:s.PanelPosition.Partial),this.viewModel.bottomPanelPosition===s.PanelPosition.Minimized?n=s.PanelPosition.Partial:this.viewModel.bottomPanelPosition===s.PanelPosition.Partial?n=s.PanelPosition.Maximized:this.viewModel.bottomPanelPosition===s.PanelPosition.Maximized&&(n=i?s.PanelPosition.Hidden:s.PanelPosition.Maximized)):this.viewModel.bottomPanelPosition===s.PanelPosition.Maximized?n=s.PanelPosition.Partial:this.viewModel.bottomPanelPosition===s.PanelPosition.Partial?n=this._minimizedMode?s.PanelPosition.Minimized:s.PanelPosition.Hidden:this.viewModel.bottomPanelPosition===s.PanelPosition.Minimized?n=s.PanelPosition.Hidden:this.viewModel.bottomPanelPosition===s.PanelPosition.Hidden&&(n=i?s.PanelPosition.Maximized:s.PanelPosition.Hidden),this._changeDataFramePosition(n)},i.prototype._changeDataFramePosition=function(e,i){var t=this,n=this.viewModel.bottomPanelPosition,a=$(this.bottomPanelRegionElement);if(this.viewModel.bottomPanelPosition===s.PanelPosition.Maximized&&this._setToolAndScreenRegionVisibility(!0),e===s.PanelPosition.Minimized&&!this._minimizedMode){var r=this.viewModel.config.openToMaximum?s.PanelPosition.Maximized:s.PanelPosition.Partial;e=this._panelIsOpen()?s.PanelPosition.Hidden:r}this.viewModel.bottomPanelPosition=e,e===s.PanelPosition.Partial?(this.viewModel.bottomPanelTargetHeight=this._shellDimensions.height*this.viewModel.config.bottomPanelHeightPercent,a.height(this.viewModel.bottomPanelTargetHeight)):e===s.PanelPosition.Minimized?n===s.PanelPosition.Hidden?(a.removeClass(this.cssClasses.hidden),this.viewModel.bottomPanelTargetHeight=this.bottomPanelInnerRegionElement.clientHeight,a.addClass(this.cssClasses.hidden)):this.viewModel.bottomPanelTargetHeight=this.bottomPanelInnerRegionElement.clientHeight:e===s.PanelPosition.Maximized?(this.viewModel.bottomPanelTargetHeight=this._shellDimensions.height,a.height(this.viewModel.bottomPanelTargetHeight)):e===s.PanelPosition.Hidden&&(this._applyMinimizedMode(!1),this._currentViewActiveInPanel=null);var d,h=(100*this.viewModel.config.bottomPanelHeightPercent,this._shellDimensions.height);e===s.PanelPosition.Maximized||e===s.PanelPosition.Partial?(d=100*this.viewModel.config.bottomPanelHeightPercent/2,d+=100*(this.viewModel.headerHeight/h),d*=-1):d=0,0!==d&&$(this.headerRegionElement).addClass(this.cssClasses.hiddenByScreenElement),o.create(this.screenRegionElement).add({transform:"translate(0px, {0}%)".format(d)}).play().then(function(){var e=t.app.viewManager.getRegionForViewId(t.id),i=new l.ViewDimensionsChangedArgs(t,e);t.app.event("ViewDimensionsChangedEvent").publish(i),$(t.headerRegionElement).toggleClass(t.cssClasses.hiddenByScreenElement,0!==d),t.app.command("MapResize").execute()}),this._setPanelVerticalOffset(n,e,function(){return t._handlePanelVerticalOffsetChanged(n,i)})},i.prototype._handlePanelVerticalOffsetChanged=function(e,i){var t=this;this.viewModel.bottomPanelPosition===s.PanelPosition.Maximized&&this.viewModel.config.openToMaximum&&this._setToolAndScreenRegionVisibility(!1),this.viewModel.bottomPanelPosition===s.PanelPosition.Maximized?(e===s.PanelPosition.Hidden&&this.app.event("DataFrameOpenedEvent").publish(this.viewModel.config.bottomPanelHeightPercent),this.app.event("DataFrameMaximizedEvent").publish()):this.viewModel.bottomPanelPosition===s.PanelPosition.Partial||this.viewModel.bottomPanelPosition===s.PanelPosition.Minimized?this._yield(function(){return t.app.event("DataFrameOpenedEvent").publish(t.viewModel.config.bottomPanelHeightPercent)}):this._yield(function(){t.app.event("DataFrameClosedEvent").publish()}),this.app.event("SmallShellPanelPositionChanged").publish(this.viewModel.bottomPanelPosition,this.viewModel.config.openToMaximum),i&&i(this.viewModel.bottomPanelPosition)},i.prototype._setPanelVerticalOffset=function(e,i,t){var n=this,a=0,l=$(this.bottomPanelRegionElement);if(i===s.PanelPosition.Maximized)this.viewModel.bottomPanelTargetHeight=this._shellDimensions.height,a=-this.viewModel.headerHeight-2;else if(i===s.PanelPosition.Partial){var r=this._shellDimensions.height;a=this._shellDimensions.height-r*this.viewModel.config.bottomPanelHeightPercent,a-=this.viewModel.headerHeight}else if(i===s.PanelPosition.Minimized){var r=this._shellDimensions.height;a=this._shellDimensions.height-this.viewModel.bottomPanelTargetHeight,a-=this.viewModel.headerHeight}else i===s.PanelPosition.Hidden&&(a=this._shellDimensions.height);i===s.PanelPosition.Minimized&&e!==s.PanelPosition.Hidden||l.height(this.viewModel.bottomPanelTargetHeight);var d=this._cssClassForPanelPosition(i);null!=e&&l.removeClass(this._cssClassForPanelPosition(e)),o.create(this.bottomPanelRegionElement).add({transform:"translate(0px, {0}px)".format(a)}).play().then(function(){i!==s.PanelPosition.Hidden&&l.removeClass(n.cssClasses.hidden),i===s.PanelPosition.Minimized&&e!==s.PanelPosition.Hidden&&l.height(n.viewModel.bottomPanelTargetHeight),l.addClass(d),n._bottomPanelOpening=!1}).then(function(){t&&n._yieldForDom(t)}),this._bottomPanelOpening=!0},i.prototype._cssClassForPanelPosition=function(e){var i=[s.PanelPosition.Hidden,s.PanelPosition.Minimized,s.PanelPosition.Partial,s.PanelPosition.Maximized],t=[this.cssClasses.hidden,this.cssClasses.minimized,this.cssClasses.partial,this.cssClasses.maximized];return t[i.indexOf(e)]},i.prototype._setToolAndScreenRegionVisibility=function(e){if(void 0===e&&(e=!0),this.viewModel.toolAndScreenRegionsHidden!==e){var i=[this.headerRegionElement,this.screenRegionElement];e?$(i).removeClass(this.cssClasses.hiddenDueToMaximization):$(i).addClass(this.cssClasses.hiddenDueToMaximization),this.viewModel.toolAndScreenRegionsHidden=e}},i.prototype._resizeShellOnceSettled=function(e){var i=this;void 0===e&&(e=!1),this._resizeSettleHandle&&clearTimeout(this._resizeSettleHandle),this._resizeSettleHandle=setTimeout(function(){i.resizeShell(e)},this._resizeSettleTimeoutMs)},i.prototype._detectCssTransitions=function(){this._useCssTransitions=Modernizr.csstransitions,this._useCssTransitions?(this._cssTransitionStyle=Modernizr.prefixed("transition"),this._cssTransitionEnd=this._cssTransitionEndMap[this._cssTransitionStyle],this._cssTransitionEnd?this.app.trace.debug("Detected CSS transitions using '{0}' and '{1}'.".format(this._cssTransitionStyle,this._cssTransitionEnd)):(this._useCssTransitions=!1,this.app.trace.debug("No CSS transition end event detected. Transitions will not be used."))):this.app.trace.debug("Support for CSS transitions was not detected.")},i.prototype._measureShellDimensions=function(){return{width:!this._android||this._androidChrome||this._androidFirefox?$(window).width():window.outerWidth/window.devicePixelRatio,height:!this._android||this._androidChrome||this._androidFirefox?$(window).height():window.outerHeight/window.devicePixelRatio}},i.prototype._exportState=function(e){e.dataFrameIsOpen=this.viewModel.bottomPanelPosition!==s.PanelPosition.Hidden,e.dataFrameIsMaximized=this.viewModel.bottomPanelPosition===s.PanelPosition.Maximized;var i=this.app.viewManager.getExistingRegionByName("BottomPanelViewContainerRegion");e.dataFrameSelectedView=r.ProjectView.getTopmostViewInRegion(i)},i.prototype._applyState=function(e){e.dataFrameIsOpen&&e.dataFrameIsMaximized?this._changeDataFramePosition(s.PanelPosition.Maximized):this._changeDataFramePosition(e.dataFrameIsOpen?s.PanelPosition.Partial:s.PanelPosition.Hidden);var i=e.dataFrameSelectedView;"DataFrameResultsContainerView"!==i&&"SimpleQueryBuilderContainerView"!==i&&"SimpleFilterBuilderContainerView"!==i||(i="ResultsViewContainerView"),i&&this.app.command("ActivateView").execute(i)},i.prototype._applyMinimizedMode=function(e){e=!!e,this._minimizedMode!==e&&(this._minimizedMode=e,this.app.event("SmallShellBottomPanelMinimizedModeChange").publish(this._minimizedMode))},i}(t.HandheldShellView);i.SmallShellView=d})},"Mapping/modules/Shells/Small/SmallShellViewModel":function(){define(["require","exports","./../CommonShellViewModel","./PanelPosition"],function(e,i,t,n){"use strict";var a=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.toolAndScreenRegionsHidden=!1,t.bottomPanelPosition=n.PanelPosition.Hidden,t.bottomPanelTargetHeight=0,t.bottomPanelAutoPosition=!0,t.headerHeight=i.DEFAULT_HEADER_HEIGHT,t.closeBottomPanelWhenDeactivatedDefaults=["BookmarksView","GeolocateView"],t}return __extends(i,e),i.prototype.initialize=function(e){this.config={},e&&(this.config.openToMaximum=!!e.openToMaximum,this.config.bottomPanelHeightPercent=void 0!==e.bottomPanelHeightPercent?e.bottomPanelHeightPercent:i.DEFAULT_BOTTOM_PANEL_HEIGHT_PERCENT,this.config.bottomPanelHeightPercent/=100,this.config.closeBottomPanelWhenDeactivated=e.closeBottomPanelWhenDeactivated||this.closeBottomPanelWhenDeactivatedDefaults)},i}(t.CommonShellViewModel);a.DEFAULT_HEADER_HEIGHT=43,a.DEFAULT_BOTTOM_PANEL_HEIGHT_PERCENT=75,i.SmallShellViewModel=a})},"url:/Mapping/modules/Shells/DebugView.html":'<div class="debug-view">\r\n    <div class="debug-view-inner">\r\n        <b>Debug view</b>\r\n    </div>\r\n</div>',"url:/Mapping/modules/Shells/DesktopShellView.html":'<div class="shell-container">\r\n    <div class="shell-container-inner">\r\n\r\n        <div data-region-name="LogRegion" class="region log-region"></div>\r\n\r\n        <div class="large-shell-header" data-binding="{@var: headerContainerElement}">\r\n            <div data-region-name="AccessibilityRegion" class="region accessibility-region" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n            <div data-region-name="HeaderRegion" class="region header-region" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n            <div data-region-name="ToolbarRegion" class="region toolbar-region" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n        </div>\r\n\r\n        <div class="large-shell-main" data-binding="{@var: mainElement}">\r\n\r\n            <div class="large-shell-left panel-closed" data-binding="{@var: leftElement}{@visible: dataFrameIsOpen}">\r\n                <div data-binding="{@var: leftRegionElement}" data-region-name="LeftPanelRegion" class="region data-region" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter" data-maximized="false"></div>\r\n                <div class="panel-side-empty" data-binding="{@visible: dataFrameIsEmpty}">\r\n                    <h2 class="panel-empty-heading" data-binding="{@text: @language-shell-dataframe-disabled}"></h2>\r\n                    <div class="panel-empty-links" data-binding="{@visible: linkableModuleLoaded}">\r\n                        <p data-binding="{@text: @language-shell-dataframe-disabled-options}"></p>\r\n                        <ul>\r\n                            <li data-binding="{@visible: infoModuleLoaded}"><button class="button-text-link" data-binding="{@event-onclick: openHomePanel}{@text: @language-shell-dataframe-disabled-home-panel}"></button></li>\r\n                            <li data-binding="{@visible: layerListModuleLoaded}"><button class="button-text-link" data-binding="{@event-onclick: openLayerList}{@text: @language-shell-dataframe-disabled-layer-list}"></button></li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="large-shell-center" data-binding="{@var: centerElement}">\r\n                <div data-region-name="MapRegion" data-binding="{@var: screenRegionElement}" class="region map-region" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n            </div>\r\n\r\n            <div class="large-shell-bottom panel-closed" data-binding="{@var: bottomElement}">\r\n                <div data-binding="{@var: bottomRegionElement}" data-region-name="BottomPanelRegion" class="region bottom-region" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter" data-maximized="false"></div>\r\n            </div>\r\n\r\n            <div class="large-shell-right" data-binding="{@var: rightElement}">\r\n                <div data-region-name="RightPanelRegion" class="region data-region" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="large-shell-footer" data-binding="{@var: footerContainerElement}">\r\n            <div data-region-name="FooterRegion" class="region footer-region" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n        </div>\r\n\r\n        <div class="region" data-region-name="ContextMenuRegion" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n    </div>\r\n</div>\r\n\r\n<!-- The modal region is for presenting views in a modal fashion. Views activated in this region will be displayed\r\n     in a popup dialog box with an overlay over the application UI and behind the popup. -->\r\n\r\n<!-- NOTE: the modal region here is not the one to be used in configuration. There is an actual ContainerView that will sit in ModalWindowPlaceholderRegion and provide a region called ModalWindowRegion. -->\r\n<div data-region-name="ModalWindowPlaceholderRegion" class="region modal" data-region-adapter="geocortex.framework.ui.PopupModalRegionAdapter">\r\n    <div class="modal-overlay"></div>\r\n    <div class="modal-container" data-binding="{@var: modalContainerElement}">\r\n        <div class="modal-container-inner"></div>\r\n    </div>\r\n</div>\r\n\r\n<div class="foot"></div>\r\n',"url:/Mapping/modules/Shells/HandheldShellView.html":'<div class="shell-container">\r\n    <div class="shell-container-inner"> \r\n \r\n        <div data-region-name="ToolRegion" class="region tool-region" data-binding="{@var: bannerContainerElement}" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n        <div data-region-name="ScreenRegion" class="region screen-region"\r\n             data-binding="{@var: screenRegionElement}" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n        <div class="region" data-region-name="ContextMenuRegion" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n        <div class="clear"></div>\r\n    </div>\r\n</div>',"url:/Mapping/modules/Shells/LargeShellView.html":'<div class="shell-container">\r\n    <div class="shell-container-inner">\r\n\r\n        <div data-region-name="LogRegion" class="region log-region"></div>\r\n\r\n        <div class="medium-shell-header"  data-binding="{@var: headerContainerElement}">\r\n            <div data-region-name="AccessibilityRegion" class="region accessibility-region" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n            <div data-region-name="HeaderRegion"  class="region header-region" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n            <div data-region-name="ToolbarRegion" class="region toolbar-region" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter" ></div>\r\n        </div>\r\n\r\n        <div class="medium-shell-main" data-binding="{@var: mainElement}">\r\n\r\n            <div class="medium-shell-left panel-closed" data-binding="{@var: leftElement}{@visible: dataFrameIsOpen}">\r\n                <div data-binding="{@var: leftRegionElement}" data-region-name="LeftPanelRegion" class="region data-region" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n                <div class="panel-side-empty" data-binding="{@visible: dataFrameIsEmpty}">\r\n                    <h2 class="panel-empty-heading" data-binding="{@text: @language-shell-dataframe-disabled}"></h2>\r\n                    <div class="panel-empty-links" data-binding="{@visible: linkableModuleLoaded}">\r\n                        <p data-binding="{@text: @language-shell-dataframe-disabled-options}"></p>\r\n                        <ul>\r\n                            <li data-binding="{@visible: infoModuleLoaded}"><button class="button-text-link" data-binding="{@event-onclick: openHomePanel}{@text: @language-shell-dataframe-disabled-home-panel}"></button></li>\r\n                            <li data-binding="{@visible: layerListModuleLoaded}"><button class="button-text-link" data-binding="{@event-onclick: openLayerList}{@text: @language-shell-dataframe-disabled-layer-list}"></button></li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="medium-shell-center" data-binding="{@var: centerElement}">\r\n                <div data-region-name="MapRegion" data-binding="{@var: screenRegionElement}" class="region map-region" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n            </div>\r\n\r\n            <div class="medium-shell-bottom panel-closed" data-binding="{@var: bottomElement}">\r\n                <div data-binding="{@var: bottomRegionElement}" data-region-name="BottomPanelRegion" class="region" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n            </div>\r\n\r\n            <div class="medium-shell-right" data-binding="{@var: rightElement}">\r\n                <div data-region-name="RightPanelRegion" class="region data-region" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="medium-shell-footer" data-binding="{@var: footerContainerElement}">\r\n            <div data-region-name="FooterRegion" class="region footer-region" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n        </div>\r\n\r\n        <div class="region" data-region-name="ContextMenuRegion" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n    </div>\r\n</div>\r\n\r\n<!-- The modal region is for presenting views in a modal fashion. Views activated in this region will be displayed\r\n     in a popup dialog box with an overlay over the application UI and behind the popup. -->\r\n\r\n<!-- NOTE: the modal region here is not the one to be used in configuration. There is an actual ContainerView that will sit in ModalWindowPlaceholderRegion and provide a region called ModalWindowRegion. -->\r\n<div data-region-name="ModalWindowPlaceholderRegion" class="region modal" data-region-adapter="geocortex.framework.ui.PopupModalRegionAdapter">\r\n    <div class="modal-overlay"></div>\r\n    <div class="modal-container" data-binding="{@var: modalContainerElement}">\r\n        <div class="modal-container-inner"></div>\r\n    </div>\r\n</div>\r\n\r\n<div class="foot"></div>\r\n',
"url:/Mapping/modules/Shells/Components/DataFrameButtonView.html":'<button class="data-frame-button tab-closed" data-binding="{@var: buttonElement}{title: @language-shell-dataframe}{@event-mousedown: handleMouseDown}{@event-touchstart: handleTouchStart}{@event-onclick: handleOnClick}"></button>',"url:/Mapping/modules/Shells/Components/DataFrameResizeButtonView.html":'<button class="data-frame-resize resize-handle inactive" tabindex="-1" data-binding="{@var: buttonElement}{title: @language-shell-dataframe-resize}{@event-mousedown: handleMouseDown}{@event-touchstart: handleTouchStart}">\r\n    <span class="icon-drag"></span>\r\n</button>',"url:/Mapping/modules/Shells/Components/NavBarSmallView.html":'<div class="view-switcher-view">\r\n    <div class="panel-header-nav" data-binding="{@source: activeViewDescriptors}">\r\n        <button class="nav-btn" data-binding="{@template-for: activeViewDescriptors}{@event-onclick: handleTapNavButton}{@class-nav-btn-active: isActive}">\r\n            <span data-binding="{@text: title}"></span>\r\n        </button>\r\n    </div>\r\n    <button class="panel-header-button right" data-binding="{@event-onclick: handleTapSwitcherCloseButton}"></button>\r\n</div>',"url:/Mapping/modules/Shells/Components/Navigation/NavButtonView.html":'<button data-binding="{@event-onclick: handleTap}" class="nav-button-view"></button>',"url:/Mapping/modules/Shells/Components/Panels/ShellPanelView.html":'<div class="view-container-view smart-panel shell-panel" data-binding="{@var: containerElement}{@class-maximizable:maximizeVisible}">\r\n    <div class="panel-header clear" data-binding="{@visible: headerIsVisible}{@var: headerElement}">\r\n        <button class="panel-header-button panel-header-button-minimize panel-resizer right" data-binding="{@event-onclick: handleTapMinimizeSizeButton}"></button>\r\n        <button class="panel-header-button panel-header-button-maximize panel-resizer right" data-binding="{@event-onclick: handleTapMaximizeSizeButton}{@disabled: maximizeDisabled}{@visible:maximizeVisible}"></button>\r\n\r\n        <button class="menu-button" data-binding="{@enabled: hasExecutableMenuItems}{@visible: hasHoistedMenu}{@event-onclick: handleTapMenuButton}{@var: menuButtonElement}"></button>\r\n\r\n        <div class="panel-header-nav" data-binding="{@hidden: titleBarIsVisible}"></div>\r\n\r\n        <button class="panel-header-button panel-back left" data-binding="{@event-onclick: handleClickSmartBackButton}{@visible: showingSmartBackButton}"></button>\r\n\r\n        <h2 class="panel-title" data-binding="{@hidden:widgetViewModel}">\r\n            <span data-binding="{@visible: titleBarIsVisible}">\r\n                <img src="Resources/Images/loader-small.gif" data-binding="{@visible: showBusyIndicator}" alt=" " />\r\n                <span data-binding="{@text: viewTitle}"></span>\r\n            </span>\r\n        </h2>\r\n        <div class="shell-panel-widget" data-binding="{@visible:widgetViewModel}{@widget: ShellPanelHeaderWidget}{@widget-required: false}{@widget-context: widgetViewModel}"></div>\r\n        <div class="smart-panel-hoisted-menu-inline" data-binding="{@visible: inlineMenuIsOpen}{@widget: SmartPanelHoistedMenu}{@widget-required: false}{@widget-context: hoistedMenuViewModel}"></div>\r\n    </div>\r\n    <div class="panel-scroll-container" data-binding="{data-region-name: regionName}{data-region-adapter: regionType}{@var: scrollRegionElement}{@event-onscroll: handleScrollChange}"></div>\r\n</div>',"url:/Mapping/modules/Shells/Small/SmallShellView.html":'<div class="shell-container new-shell" data-binding="{@var: containerElement}">\r\n    <div data-region-name="AccessibilityRegion" class="region accessibility-region" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n\r\n    <div data-region-name="HeaderRegion" class="region header-region" data-binding="{@var: headerRegionElement}" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n    <div data-region-name="ScreenRegion" class="region screen-region" data-binding="{@var: screenRegionElement}" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n\r\n    <div data-region-name="TopLeftShellRegion" class="region top-left-shell-region top-left-shell-region-closed" data-binding="{@var: topLeftShellRegionElement}" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n    <div data-region-name="TopRightShellRegion" class="region top-right-shell-region top-right-shell-region-closed" data-binding="{@var: topRightShellRegionElement}" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n\r\n    <div data-region-name="BottomLeftShellRegion" class="region bottom-left-shell-region left-panel-closed" data-binding="{@var: bottomLeftShellRegionElement}" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n    <div data-region-name="BottomRightShellRegion" class="region bottom-right-shell-region right-panel-closed" data-binding="{@var: bottomRightShellRegionElement}" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n\r\n    <div class="bottom-panel panel-hidden" data-binding="{@var: bottomPanelRegionElement}">\r\n        <div data-region-name="BottomPanelRegion" class="region bottom-panel-region" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter" data-binding="{@var: bottomPanelInnerRegionElement}"></div>\r\n    </div>\r\n\r\n    <div data-region-name="SmallNavigationRegion" class="region small-navigation-region nav-region-closed" data-binding="{@var: navigationRegionElement}" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n\r\n    <div data-region-name="LeftPanelRegion" class="region side-region left-panel-region left-panel-closed" data-binding="{@var: leftPanelRegionElement}"></div>\r\n    <div data-region-name="RightPanelRegion" class="region side-region right-panel-region right-panel-closed" data-binding="{@var: rightPanelRegionElement}"></div>\r\n\r\n    <div class="region" data-region-name="ContextMenuRegion" data-region-adapter="geocortex.framework.ui.MultiDivRegionAdapter"></div>\r\n\r\n</div>'}}),define(["Mapping/modules/Shells/CommonShellView","Mapping/modules/Shells/CommonShellViewModel","Mapping/modules/Shells/HandheldShellView","Mapping/modules/Shells/LargeShellView","Mapping/modules/Shells/LargeShellViewModel","Mapping/modules/Shells/ShellModule","Mapping/modules/Shells/ShellState","Mapping/modules/Shells/Components/DataFrameButtonView","Mapping/modules/Shells/Components/DataFrameResizeButtonView","Mapping/modules/Shells/Components/NavBarSmallView","Mapping/modules/Shells/Small/PanelPosition","Mapping/modules/Shells/Small/SmallShellView","Mapping/modules/Shells/Small/SmallShellViewModel","Mapping/modules/Shells/Components/Navigation/NavButtonView","Mapping/modules/Shells/Components/Navigation/NavButtonViewModel","Mapping/modules/Shells/Components/Panels/ShellPanelView","Mapping/modules/Shells/Components/Panels/ShellPanelViewModel"],function(e,i,t,n,a,o,s,l,r,d,h,m,p,c,g,u,v){shim(e,"geocortex.essentialsHtmlViewer.mapping.modules.shells.CommonShellView",e.CommonShellView),shim(i,"geocortex.essentialsHtmlViewer.mapping.modules.shells.CommonShellViewModel",i.CommonShellViewModel),shim(t,"geocortex.essentialsHtmlViewer.mapping.modules.shells.HandheldShellView",t.HandheldShellView),shim(n,"geocortex.essentialsHtmlViewer.mapping.modules.shells.LargeShellView",n.LargeShellView),shim(a,"geocortex.essentialsHtmlViewer.mapping.modules.shells.LargeShellViewModel",a.LargeShellViewModel),shim(o,"geocortex.essentialsHtmlViewer.mapping.modules.shells.ShellModule",o.ShellModule),shim(s,"geocortex.essentialsHtmlViewer.mapping.modules.shells.ProjectView",s.ProjectView),shim(l,"geocortex.essentialsHtmlViewer.mapping.modules.shells.components.DataFrameButtonView",l.DataFrameButtonView),shim(r,"geocortex.essentialsHtmlViewer.mapping.modules.shells.components.DataFrameResizeButtonView",r.DataFrameResizeButtonView),shim(d,"geocortex.essentialsHtmlViewer.mapping.modules.shells.components.NavBarSmallView",d.NavBarSmallView),shim(h,"geocortex.essentialsHtmlViewer.mapping.modules.shells.PanelPosition",h.PanelPosition),shim(m,"geocortex.essentialsHtmlViewer.mapping.modules.shells.SmallShellView",m.SmallShellView),shim(p,"geocortex.essentialsHtmlViewer.mapping.modules.shells.SmallShellViewModel",p.SmallShellViewModel),shim(c,"geocortex.essentialsHtmlViewer.mapping.modules.shells.components.NavButtonView",c.NavButtonView),shim(g,"geocortex.essentialsHtmlViewer.mapping.modules.shells.components.NavButtonViewModel",g.NavButtonViewModel),shim(u,"geocortex.essentialsHtmlViewer.mapping.modules.shells.components.ShellPanelView",u.ShellPanelView),shim(v,"geocortex.essentialsHtmlViewer.mapping.modules.shells.components.ShellPanelViewModel",v.ShellPanelViewModel)});