!function(){var t="<button class='data-frame-button tab-closed' data-binding='{@var: buttonElement}{title: @language-shell-dataframe}{@event-mousedown: handleMouseDown}{@event-touchstart: handleTouchStart}{@event-onclick: handleOnClick}'></button>",i="<button class='data-frame-resize resize-handle inactive' tabindex='-1' data-binding='{@var: buttonElement}{title: @language-shell-dataframe-resize}{@event-mousedown: handleMouseDown}{@event-touchstart: handleTouchStart}'>    <span class='icon-drag'></span></button>",n="<div class='view-switcher-view'>    <div class='panel-header-nav' data-binding='{@source: activeViewDescriptors}'>        <button class='nav-btn' data-binding='{@template-for: activeViewDescriptors}{@event-onclick: handleTapNavButton}{@class-nav-btn-active: isActive}'>            <span data-binding='{@text: title}'></span>        </button>    </div>    <button class='panel-header-button right' data-binding='{@event-onclick: handleTapSwitcherCloseButton}'></button></div>",o="<button data-binding='{@event-onclick: handleTap}' class='nav-button-view'></button>",a="<div class='view-container-view smart-panel shell-panel' data-binding='{@var: containerElement}{@class-maximizable:maximizeVisible}'>    <div class='panel-header clear' data-binding='{@visible: headerIsVisible}{@var: headerElement}'>        <button class='panel-header-button panel-header-button-minimize panel-resizer right' data-binding='{@event-onclick: handleTapMinimizeSizeButton}'></button>        <button class='panel-header-button panel-header-button-maximize panel-resizer right' data-binding='{@event-onclick: handleTapMaximizeSizeButton}{@disabled: maximizeDisabled}{@visible:maximizeVisible}'></button>        <button class='menu-button' data-binding='{@enabled: hasExecutableMenuItems}{@visible: hasHoistedMenu}{@event-onclick: handleTapMenuButton}{@var: menuButtonElement}'></button>        <div class='panel-header-nav' data-binding='{@hidden: titleBarIsVisible}'></div>        <button class='panel-header-button panel-back left' data-binding='{@event-onclick: handleClickSmartBackButton}{@visible: showingSmartBackButton}'></button>        <h2 class='panel-title' data-binding='{@hidden:widgetViewModel}'>            <span data-binding='{@visible: titleBarIsVisible}'>                <img src='Resources/Images/loader-small.gif' data-binding='{@visible: showBusyIndicator}' alt=' ' />                <span data-binding='{@text: viewTitle}'></span>            </span>        </h2>        <div class='shell-panel-widget' data-binding='{@visible:widgetViewModel}{@widget: ShellPanelHeaderWidget}{@widget-required: false}{@widget-context: widgetViewModel}'></div>        <div class='smart-panel-hoisted-menu-inline' data-binding='{@visible: inlineMenuIsOpen}{@widget: SmartPanelHoistedMenu}{@widget-required: false}{@widget-context: hoistedMenuViewModel}'></div>    </div>    <div class='panel-scroll-container' data-binding='{data-region-name: regionName}{data-region-adapter: regionType}{@var: scrollRegionElement}{@event-onscroll: handleScrollChange}'></div></div>",s="<div class='debug-view'>    <div class='debug-view-inner'>        <strong>Debug view</strong>    </div></div>",l="<div class='shell-container'>    <div class='shell-container-inner'>        <div class='large-shell-header' data-binding='{@var: headerContainerElement}' role='banner'>            \x3c!--TopShellRegion should be the first region as we need skip links to be the first tabbable element in dom--\x3e            <div data-region-name='TopShellRegion' class='region top-shell-region' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>            <div data-region-name='AccessibilityRegion' class='region accessibility-region' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>            <div data-region-name='HeaderRegion' class='region header-region' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>            <div data-region-name='ToolbarRegion' class='region toolbar-region' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>        </div>        <div class='large-shell-main' data-binding='{@var: mainElement}'>            <div class='large-shell-left panel-closed' aria-label='left panel' data-binding='{@var: leftElement}{@visible: dataFrameIsOpen}' role='contentinfo'>                <div data-binding='{@var: leftRegionElement}' data-region-name='LeftPanelRegion' class='region data-region' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter' data-maximized='false'></div>                <div class='panel-side-empty' data-binding='{@visible: dataFrameIsEmpty}'>                    <h2 class='panel-empty-heading' data-binding='{@text: @language-shell-dataframe-disabled}'></h2>                    <div class='panel-empty-links' data-binding='{@visible: linkableModuleLoaded}'>                        <p data-binding='{@text: @language-shell-dataframe-disabled-options}'></p>                        <ul>                            <li data-binding='{@visible: infoModuleLoaded}'><button class='button-text-link' data-binding='{@event-onclick: openHomePanel}{@text: @language-shell-dataframe-disabled-home-panel}'></button></li>                            <li data-binding='{@visible: layerListModuleLoaded}'><button class='button-text-link' data-binding='{@event-onclick: openLayerList}{@text: @language-shell-dataframe-disabled-layer-list}'></button></li>                        </ul>                    </div>                </div>            </div>            <div class='large-shell-center' data-binding='{@var: centerElement}'>                <div data-region-name='MapRegion' data-binding='{@var: screenRegionElement}' class='region map-region' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>            </div>            <div class='large-shell-bottom panel-closed' aria-label='bottom panel' data-binding='{@var: bottomElement}' role='contentinfo'>                <div data-binding='{@var: bottomRegionElement}' data-region-name='BottomPanelRegion' class='region bottom-region' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter' data-maximized='false'></div>            </div>            <div class='large-shell-right' data-binding='{@var: rightElement}'>                <div data-region-name='RightPanelRegion' class='region data-region' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>            </div>        </div>        <div class='large-shell-footer' data-binding='{@var: footerContainerElement}'>            <div data-region-name='FooterRegion' class='region footer-region' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>        </div>        <div class='region' data-region-name='ContextMenuRegion' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>    </div></div>\x3c!-- The modal region is for presenting views in a modal fashion. Views activated in this region will be displayed     in a popup dialog box with an overlay over the application UI and behind the popup. --\x3e\x3c!-- NOTE: the modal region here is not the one to be used in configuration. There is an actual ContainerView that will sit in ModalWindowPlaceholderRegion and provide a region called ModalWindowRegion. --\x3e<div data-region-name='ModalWindowPlaceholderRegion' class='region modal' aria-label='modal window' data-region-adapter='geocortex.framework.ui.PopupModalRegionAdapter' role='form'>    <div class='modal-overlay'></div>    <div class='modal-container' data-binding='{@var: modalContainerElement}' aria-labelledby='modal-title' aria-describedby='modal-description' role='dialog'>        <div class='modal-container-inner'></div>    </div></div><div class='foot'></div>",r="<div class='shell-container'>    <div class='shell-container-inner'>          <div data-region-name='ToolRegion' class='region tool-region' data-binding='{@var: bannerContainerElement}' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>        <div data-region-name='ScreenRegion' class='region screen-region'             data-binding='{@var: screenRegionElement}' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>        <div class='region' data-region-name='ContextMenuRegion' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>        <div class='clear'></div>    </div></div>",d="<div class='shell-container'>    <div class='shell-container-inner'>        <div class='medium-shell-header'  data-binding='{@var: headerContainerElement}'>            \x3c!--TopShellRegion should be the first region as we need skip links to be the first tabbable element in dom--\x3e            <div data-region-name='TopShellRegion' class='region top-shell-region' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>            <div data-region-name='AccessibilityRegion' class='region accessibility-region' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>            <div data-region-name='HeaderRegion'  class='region header-region' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>            <div data-region-name='ToolbarRegion' class='region toolbar-region' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter' ></div>        </div>        <div class='medium-shell-main' data-binding='{@var: mainElement}'>            <div class='medium-shell-left panel-closed' data-binding='{@var: leftElement}{@visible: dataFrameIsOpen}'>                <div data-binding='{@var: leftRegionElement}' data-region-name='LeftPanelRegion' class='region data-region' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>                <div class='panel-side-empty' data-binding='{@visible: dataFrameIsEmpty}'>                    <h2 class='panel-empty-heading' data-binding='{@text: @language-shell-dataframe-disabled}'></h2>                    <div class='panel-empty-links' data-binding='{@visible: linkableModuleLoaded}'>                        <p data-binding='{@text: @language-shell-dataframe-disabled-options}'></p>                        <ul>                            <li data-binding='{@visible: infoModuleLoaded}'><button class='button-text-link' data-binding='{@event-onclick: openHomePanel}{@text: @language-shell-dataframe-disabled-home-panel}'></button></li>                            <li data-binding='{@visible: layerListModuleLoaded}'><button class='button-text-link' data-binding='{@event-onclick: openLayerList}{@text: @language-shell-dataframe-disabled-layer-list}'></button></li>                        </ul>                    </div>                </div>            </div>            <div class='medium-shell-center' data-binding='{@var: centerElement}'>                <div data-region-name='MapRegion' data-binding='{@var: screenRegionElement}' class='region map-region' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>            </div>            <div class='medium-shell-bottom panel-closed bottom-region' data-binding='{@var: bottomElement}'>                <div data-binding='{@var: bottomRegionElement}' data-region-name='BottomPanelRegion' class='region' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>            </div>            <div class='medium-shell-right' data-binding='{@var: rightElement}'>                <div data-region-name='RightPanelRegion' class='region data-region' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>            </div>        </div>        <div class='medium-shell-footer' data-binding='{@var: footerContainerElement}'>            <div data-region-name='FooterRegion' class='region footer-region' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>        </div>        <div class='region' data-region-name='ContextMenuRegion' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>    </div></div>\x3c!-- The modal region is for presenting views in a modal fashion. Views activated in this region will be displayed     in a popup dialog box with an overlay over the application UI and behind the popup. --\x3e\x3c!-- NOTE: the modal region here is not the one to be used in configuration. There is an actual ContainerView that will sit in ModalWindowPlaceholderRegion and provide a region called ModalWindowRegion. --\x3e<div data-region-name='ModalWindowPlaceholderRegion' class='region modal' data-region-adapter='geocortex.framework.ui.PopupModalRegionAdapter' role='form'>    <div class='modal-overlay'></div>    <div class='modal-container' data-binding='{@var: modalContainerElement}'>        <div class='modal-container-inner'></div>    </div></div><div class='foot'></div>",p="<div class='view-container-view' data-binding='{@var: containerElement}'>    <div class='panel-header' data-binding='{@visible: headerIsVisible}{@var: headerElement}'>        <div data-binding='{@visible: titleBarIsVisible}'>            <button class='panel-header-button right close-16' data-binding='{@visible: showingXButton}{@event-onclick: handleClickClose}{title: closeTitle}'></button>            <button class='panel-header-button left back-16' data-binding='{@visible: showingBackButton}{@event-click: handleClickBack}{title: backTitle}'></button>            <h2 class='panel-title' id='modal-title'>                <img src='Resources/Images/loader-small.gif' data-binding='{@visible: showBusyIndicator}' alt=' ' />                <span data-binding='{@text: containerTitle}{@visible: containerTitle}'></span>                <span data-binding='{@visible: containerTitle}'>&nbsp;-&nbsp;</span>                <span data-binding='{@text: viewTitle}{@visible: viewTitle}'></span>            </h2>        </div>        <div data-binding='{@dom: headerInsertDomElement}'></div>    </div>    <div class='panel-scroll-container' id='modal-description' data-binding='{data-region-name: regionName}{data-region-adapter: regionType}{@var: scrollRegionElement}{@event-onscroll: handleScrollChange}'></div>    <div class='panel-footer' data-binding='{@var: footerElement}{@visible: footerInsertDomElement}' style='position: absolute'>        <div class='panel-footer-inner' data-binding='{@dom: footerInsertDomElement}'></div>    </div></div>",h="<div class='shell-container new-shell' data-binding='{@var: containerElement}'>    <div data-region-name='AccessibilityRegion' class='region accessibility-region' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>    <div data-region-name='HeaderRegion' class='region header-region' data-binding='{@var: headerRegionElement}' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>    <div data-region-name='ScreenRegion' class='region screen-region' data-binding='{@var: screenRegionElement}' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>    <div data-region-name='TopLeftShellRegion' class='region top-left-shell-region top-left-shell-region-closed' data-binding='{@var: topLeftShellRegionElement}' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>    <div data-region-name='TopRightShellRegion' class='region top-right-shell-region top-right-shell-region-closed' data-binding='{@var: topRightShellRegionElement}' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>    <div data-region-name='BottomLeftShellRegion' class='region bottom-left-shell-region left-panel-closed' data-binding='{@var: bottomLeftShellRegionElement}' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>    <div data-region-name='BottomRightShellRegion' class='region bottom-right-shell-region right-panel-closed' data-binding='{@var: bottomRightShellRegionElement}' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>    <div class='bottom-panel panel-hidden' data-binding='{@var: bottomPanelRegionElement}'>        <div data-region-name='BottomPanelRegion' class='region bottom-panel-region' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter' data-binding='{@var: bottomPanelInnerRegionElement}'></div>    </div>    <div data-region-name='SmallNavigationRegion' class='region small-navigation-region nav-region-closed' data-binding='{@var: navigationRegionElement}' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div>    <div data-region-name='LeftPanelRegion' class='region side-region left-panel-region left-panel-closed' data-binding='{@var: leftPanelRegionElement}'></div>    <div data-region-name='RightPanelRegion' class='region side-region right-panel-region right-panel-closed' data-binding='{@var: rightPanelRegionElement}'></div>    <div class='region' data-region-name='ContextMenuRegion' data-region-adapter='geocortex.framework.ui.MultiDivRegionAdapter'></div></div>";function v(e,t,i){if("string"==typeof e&&(i=t,t=e),void 0!==i)for(var n=t.split("."),o=null,a=window,s=0,l=n.length;s<l;s++)o=n[s],s==l-1?a[o]=i:a[o]||(a[o]={}),a=a[o];else console.warn("Undefined shim for: "+t)}require({cache:{"Mapping/modules/Shells/CommonShellView":function(){var n,s=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=(n=i.ViewBase,s(a,n),a.prototype.attach=function(e){var t=this;n.prototype.attach.call(this,e),window&&dojo.connect(window,"onkeyup",this,this.handleKeyUp),this.app.event("ViewActivatedEvent").subscribe(this,function(e){"MapView"===e.id&&t.app.command("CloseModalRegion").execute()}),this.handleiOSShellIssue(),this.app.waitUntilAllLibrariesLoaded().then(function(){return t._shellConfigured=!0})},a.prototype.handleiOSShellIssue=function(){navigator.userAgent.match(/iPad;.*CPU.*OS 7_\d/i)&&!window.navigator.standalone&&$("html").addClass("ipad ios7")},a.prototype.handleKeyUp=function(e){var t=this;return!0===e.shiftKey&&27===e.keyCode?this._waitForEsc?(this._waitForEsc=!1,this.app.command("ToggleLogView").execute()):(this._waitForEsc=!0,this._escTimer=setTimeout(function(){t._waitForEsc=!1},1e3)):!0===e.ctrlKey&&!0===e.shiftKey&&192===e.keyCode&&this.app.command("ToggleLogView").execute(),!0},a.prototype.scrollToTop=function(){window.scrollTo&&window.scrollTo(0,0)},a.prototype.handleCloseModalRegionClick=function(){this.app.modalRegionSingleton&&this.app.modalRegionSingleton.deactivateActiveView()},a.prototype._resizeWhenFullyConfigured=function(e){var t=this;void 0===e&&(e=!1),this._resizePromise||(this._resizePromise=this._waitUntilFullyConfigured().then(function(){return t._resize(e),void(t._resizePromise=null)}))},a.prototype._waitUntilFullyConfigured=function(){var i=this;return this.app.applicationReady?Promise.resolve():this.app.site&&this.app.site.isInitialized?new Promise(function(e,t){i.app.event("_projectShellConfiguredEvent").once(i,function(){e()})}):new Promise(function(e,t){i.app.waitUntilApplicationReady().then(function(){setTimeout(function(){return e()})})})},a.prototype._resize=function(e){void 0===e&&(e=!1)},a);function a(){var e=null!==n&&n.apply(this,arguments)||this;return e._waitForEsc=!1,e._escTimer=null,e._resizePromise=null,e._shellConfigured=!1,e}t.CommonShellView=o})},"Mapping/modules/Shells/CommonShellViewModel":function(){var n,s=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","geocortex/framework/ui/ViewModelBase"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=(n=i.ViewModelBase,s(a,n),a);function a(){return null!==n&&n.apply(this,arguments)||this}t.CommonShellViewModel=o})},"Mapping/modules/Shells/HandheldShellView":function(){var n,s=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","./CommonShellView"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,n=(a=i.CommonShellView,s(o,a),o.prototype.attach=function(e){var t=this;if(a.prototype.attach.call(this,e),this.configuration&&!1===this.configuration.resizeShell&&(this._resizeShell=!1),this.app.event("ApplicationNativeReadyEvent").subscribe(this,function(){t._native=t.app.isNative.get()}),!this.configuration||!0!==this.configuration.disableHideAddressBar){var i=this.root,n=navigator.userAgent;this._iphone=!(!~n.indexOf("iPhone")&&!~n.indexOf("iPod")),this._ipad=!!~n.indexOf("iPad"),this._ios=this._iphone||this._ipad,this._native=this.app.isNative.get(),this._fullscreen=window.navigator.standalone,this._android=!!~n.indexOf("Android"),this._androidChrome=/Android.*Chrome/.test(n),this._androidFirefox=/Firefox/.test(n),this._androidWebkit=this._android&&/WebKit/.test(n),this._androidGecko=this._android&&/Gecko/.test(n);var o=0;window.onresize=function(){o!=i.offsetWidth&&(t.app.command("RecenterMapOnNextMapResize").execute(),o=i.offsetWidth)}}},o.prototype.resizeShell=function(){if(this._resizeShell&&this.screenRegionElement){var e=!this._android||this._androidChrome||this._androidFirefox?dojo.window.getBox().h:window.outerHeight/window.devicePixelRatio,t=!this._android||this._androidChrome||this._androidFirefox?dojo.window.getBox().w:window.outerWidth/window.devicePixelRatio,i=this.screenRegionElement;dojo.style(i,"height",e-50+"px"),dojo.style(i,"width",t+"px")}},o);function o(){var e=null!==a&&a.apply(this,arguments)||this;return e._resizeShell=!0,e}t.HandheldShellView=n})},"Mapping/modules/Shells/LargeShellView":function(){var n,p=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","./CommonShellView","./LargeShellViewModel","geocortex/framework-ui/ViewContainer/ViewContainerView","geocortex/infrastructure/ShellUtils","geocortex/framework/utils/utils","./ShellState"],function(e,t,i,n,o,a,c,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,r=(l=i.CommonShellView,p(d,l),d.prototype._activateDataRegion=function(e){e?this._executeOpenLeftPanel():this._executeCloseLeftPanel(),this.viewModel&&this.viewModel.dataFrameIsEmpty.set(!e)},d.prototype._activateBottomRegion=function(e){"boolean"==typeof e&&(e?this._executeOpenBottomRegion():this._executeCloseBottomRegion(),this.viewModel&&this.viewModel.bottomRegionHasViews.set(e))},d.prototype.attach=function(e){var t=this;$(this.app.getHostElement()).addClass("shell-large"),l.prototype.attach.call(this,e),this.dataFrameAwaitsViewModel&&(this._activateDataRegion(!0),this.dataFrameAwaitsViewModel=!1,this._resizeWhenFullyConfigured()),this._shellDimensions=this._shellDimensions||this._measureShellDimensions();var i={"min-width":this._shellDimensions.width?this._toPixels(this.viewModel.minWidth.get(),this._shellDimensions.width):n.LargeShellViewModel.DEFAULT_DATA_FRAME_MIN_WIDTH,"max-width":this._shellDimensions.width?this._toPixels(this.viewModel.maxWidth.get(),this._shellDimensions.width):n.LargeShellViewModel.DEFAULT_DATA_FRAME_MAX_WIDTH};$(this.leftRegionElement).css(i),this.viewModel.dataFrameOpenByDefault&&(this._executeOpenLeftPanel(),this.app.waitUntilSiteInitialized().then(function(){t.app.event("DataFrameOpenedEvent").publish()}),this.app.doIfSiteInitializationFails({initFailCallback:function(){return t._executeCloseLeftPanel()}})),this._subscribeEvents()},d.prototype._subscribeEvents=function(){var e=this;this.app.event("DataFrameOpenedEvent").subscribe(this,function(){e.leftPanelView?(e.app.trace.debug("View focused from dataframe opening: "+e.leftPanelView.id),e.app.command("FocusOnFirstInputInView").execute(e.leftPanelView)):e.app.trace.warning("View not found when trying to focus on dataframe.")})},d.prototype.handleClickCloseDataFrame=function(){this.app.command("CloseDataFrame").execute()},d.prototype.handleClickDataRegionTab=function(){this.app.command("OpenDataFrame").execute()},d.prototype._resize=function(e){void 0===e&&(e=!1),this.resizeShell(),this.resizeScreenRegion()},d.prototype.resizeAll=function(){this._resize()},d.prototype.resizeAllDeferred=function(){var e=this;if(!this._resizeAllInvoked){var t=function(){a.debounceViewEvents(e.app,function(){e._resizeWhenFullyConfigured(),e._resizeAllInvoked=!1},100)};this._resizeAllInvoked=!0,this.app&&this.app.site&&this.app.site.serviceLayersLoaded?t():this.app.event("SiteServiceLayersLoadedEvent").once(this,t)}},d.prototype.resizeScreenRegion=function(){if(this.viewModel&&this.headerContainerElement&&this.screenRegionElement){if(this.centerElement){var e=this.centerElement;setTimeout(function(){dojo.style(e,{display:"block"})})}this.app.command("MapResize").execute()}},d.prototype.resizeShell=function(){if(this.viewModel&&this.mainElement){this._shellDimensions=this._measureShellDimensions();var e=this.headerContainerElement?dojo.position(this.headerContainerElement):null,t=e?e.h:0,i=this.footerContainerElement?dojo.position(this.footerContainerElement):null,n=i?i.h:0,o=this._currentDataFrameWidth(),a=this._currentBottomRegionHeight(),s=Math.max(document.documentElement.clientHeight,window.innerHeight||0);if(s-t<a&&(a=s-t,$(this.bottomElement).height(a)),this.viewModel.dataFrameIsOpen.get()){var l=parseInt($(this.leftRegionElement).css("min-width"),10),r=parseInt($(this.leftRegionElement).css("max-width"),10);o=c.clamp(o,l,r)}if(this.viewModel.bottomRegionIsOpen.get()){var d=parseInt($(this.bottomRegionElement).css("min-height"),10),p=parseInt($(this.bottomRegionElement).css("max-height"),10);a=c.clamp(a,d,p)}dojo.style(this.mainElement,"top",t+"px"),dojo.style(this.mainElement,"bottom",n+"px"),dojo.style(this.leftElement,"width",o+"px"),dojo.style(this.leftRegionElement,"width",o+"px"),dojo.style(this.centerElement,"left",o+"px"),dojo.style(this.centerElement,"bottom",a+"px"),dojo.style(this.bottomElement,"left",o+"px"),dojo.style(this.bottomElement,"height",a+"px"),dojo.style(this.bottomRegionElement,"height",a+"px"),"true"===$(this.bottomRegionElement).attr("data-maximized")?$(this.bottomElement).addClass("maximized"):$(this.bottomElement).removeClass("maximized");var h=this.app.viewManager.getExistingRegionByName("BottomPanelRegion");h&&0===h.activeViews.length&&$(this.bottomElement).removeClass("maximized")}},d.prototype._executeOpenAndFocusDataFrame=function(){this.viewModel.dataFrameIsOpen.get()?this.app.command("FocusOnFirstInputInView").execute(this.leftPanelView):this._executeOpenLeftPanel()},d.prototype._executeOpenLeftPanel=function(){if(this.viewModel){if(!1===this.viewModel.dataFrameIsOpen.get()){if(this.viewModel.dataFrameIsOpen.set(!0),this.leftElement){this.app.command("RecenterMapOnNextMapResize").execute(),dojo.removeClass(this.leftElement,"panel-closed"),dojo.addClass(this.leftElement,"panel-open");var e=this._currentDataFrameWidth();$(this.leftRegionElement).width(e)}if(this.leftPanelView instanceof o.ViewContainerView){var t=this.leftPanelView;setTimeout(function(){return t.resize()}),t.viewModel&&t.viewModel.currentView&&("function"==typeof t.viewModel.currentView.resize&&t.viewModel.currentView.resize(),t.viewModel.currentView.isActive&&t.viewModel.currentView.activated())}this.app.event("DataFrameOpenedEvent").publish(),this.app.event("ApplicationResizeEvent").publish(),this.app.event("ApplicationResizedEvent").publish()}}else this.dataFrameAwaitsViewModel=!0},d.prototype._executeCloseLeftPanel=function(){this.viewModel&&!0===this.viewModel.dataFrameIsOpen.get()&&(this.viewModel.dataFrameIsOpen.set(!1),this.leftElement&&(this.app.command("RecenterMapOnNextMapResize").execute(),dojo.removeClass(this.leftElement,"panel-open"),dojo.addClass(this.leftElement,"panel-closed"),this._resizeWhenFullyConfigured()),this.app.event("DataFrameClosedEvent").publish(),this.app.event("ApplicationResizeEvent").publish(),this.app.event("ApplicationResizedEvent").publish())},d.prototype._executeToggleLeftPanel=function(){!1===this.viewModel.dataFrameIsOpen.get()?this.app.command("OpenDataFrame").execute():this.app.command("CloseDataFrame").execute()},d.prototype._executeOpenBottomRegion=function(){if(this.viewModel&&!1===this.viewModel.bottomRegionIsOpen.get()){if(this.viewModel.bottomRegionIsOpen.set(!0),this.bottomElement){this.app.command("RecenterMapOnNextMapResize").execute(),dojo.removeClass(this.bottomElement,"panel-closed"),dojo.addClass(this.bottomElement,"panel-open");var e=this._currentBottomRegionHeight();$(this.bottomRegionElement).height(e),this._resizeWhenFullyConfigured()}this.app.event("ResultsRegionOpenedEvent").publish(),this.app.event("ApplicationResizeEvent").publish(),this.app.event("ApplicationResizedEvent").publish()}},d.prototype._executeCloseBottomRegion=function(){this.viewModel&&!0===this.viewModel.bottomRegionIsOpen.get()&&(this.viewModel.bottomRegionIsOpen.set(!1),this.bottomElement&&(this.app.command("RecenterMapOnNextMapResize").execute(),dojo.removeClass(this.bottomElement,"panel-open"),dojo.addClass(this.bottomElement,"panel-closed"),this._resizeWhenFullyConfigured()),this.app.event("ResultsRegionClosedEvent").publish(),this.app.event("ApplicationResizeEvent").publish(),this.app.event("ApplicationResizedEvent").publish())},d.prototype._executeToggleBottomRegion=function(){!1===this.viewModel.bottomRegionIsOpen.get()?this.app.command("OpenBottomRegion").execute():this.app.command("CloseBottomRegion").execute()},d.prototype._measureShellDimensions=function(){return{width:this.mainElement?$(this.mainElement).width():0,height:this.mainElement?$(this.mainElement).height():0}},d.prototype._currentDataFrameWidth=function(){return!1===this.viewModel.dataFrameIsOpen.get()?0:(this._shellDimensions=this._shellDimensions||this._measureShellDimensions(),this._toPixels(this.viewModel.dataFrameWidth.get(),this._shellDimensions.width))},d.prototype._currentBottomRegionHeight=function(){return!1===this.viewModel.bottomRegionIsOpen.get()?0:(this._shellDimensions=this._shellDimensions||this._measureShellDimensions(),this._toPixels(this.viewModel.bottomRegionHeight.get(),this._shellDimensions.height))},d.prototype._toPixels=function(e,t){return"string"==typeof e&&c.isPercentage(e)?parseFloat(e)*t/100:e},d.prototype.openLayerList=function(e,t,i){this.app.command("ShowLayerList").execute()},d.prototype.openHomePanel=function(e,t,i){this.app.command("ActivateHomePanel").execute()},d.prototype._exportState=function(e){e.dataFrameIsOpen=this.viewModel.dataFrameIsOpen.get(),this.viewModel.dataFrameIsUserResized&&(e.dataFrameWidth=this.viewModel.dataFrameWidth.get()),e.resultsFrameIsOpen=this.viewModel.bottomRegionIsOpen.get();var t=this.app.viewManager.getViewById("ResultsRegionViewContainerView");t&&t.viewModel&&(e.resultsFrameIsMaximized=t.viewModel.panelMaximized.get()),this.viewModel.bottomRegionIsUserResized.get()&&(e.resultsFrameHeight=this.viewModel.bottomRegionHeight.get());var i=this.app.viewManager.getExistingRegionByName("DataRegion");e.dataFrameSelectedView=s.ProjectView.getTopmostViewInRegion(i);var n=this.app.viewManager.getExistingRegionByName("BottomPanelRegion");e.resultsFrameSelectedView=s.ProjectView.getTopmostViewInRegion(n)},d.prototype._applyState=function(e){var t=this;c.isNullOrUndefined(e.dataFrameWidth)||(this.viewModel.dataFrameWidth.set(e.dataFrameWidth),this.viewModel.dataFrameIsUserResized=!0);var i=e.dataFrameSelectedView;"ResultsViewContainerView"===i&&(i="DataFrameResultsContainerView"),i&&this.app.command("ActivateView").execute(i),e.dataFrameIsOpen?this.app.command("OpenDataFrame").execute():this.app.command("CloseDataFrame").execute(),c.isNullOrUndefined(e.resultsFrameHeight)||(this.viewModel.bottomRegionHeight.set(e.resultsFrameHeight),this.viewModel.bottomRegionIsUserResized.set(!0));var n=this.app.viewManager.getViewById("ResultsRegionViewContainerView");n&&n.viewModel&&n.viewModel.panelMaximized.set(e.resultsFrameIsMaximized),e.resultsFrameSelectedView&&this.app.command("ActivateView").execute(e.resultsFrameSelectedView),e.resultsFrameIsOpen?this.app.command("OpenResultsFrame"):this.app.command("CloseResultsFrame"),this.app.event("_projectShellConfiguredEvent").publish(),setTimeout(function(){return t.app.event("_shellStabilizedEvent").publish()})},d);function d(e,t){var o=l.call(this,e,t)||this;return o.dataFrameAwaitsViewModel=null,o.leftPanelView=null,o._resizeAllInvoked=!1,o.app.event("ViewActivatedEvent").subscribe(o,function(e){"MapView"===e.id&&o.scrollToTop();var t=o.app.viewManager.getRegionForViewId(e.id);t&&"LeftPanelRegion"===t.name&&(o.viewModel.canAutoOpenDataframe.get()&&o.app.command("OpenDataFrame").execute(),o.leftPanelView=e),t&&"BottomPanelRegion"===t.name&&o.viewModel.canAutoOpenDataframe.get()&&o.app.command("OpenResultsFrame").execute()}),o.app.event("ApplicationResizedEvent").subscribe(o,function(){o._resizeWhenFullyConfigured()}),o.app.command("ActivateView").register(o,function(e){var t=o.app.viewManager.getRegionForViewId(e);t&&"LeftPanelRegion"===t.name&&o.viewModel.canAutoOpenDataframe.get()&&o.app.command("OpenDataFrame").execute(),t&&"BottomPanelRegion"===t.name&&o.app.command("OpenBottomRegion").execute()}),o.app.command("OpenDataFrame").register(o,o._executeOpenLeftPanel),o.app.command("CloseDataFrame").register(o,o._executeCloseLeftPanel),o.app.command("ToggleDataFrame").register(o,o._executeToggleLeftPanel),o.app.command("OpenResultsFrame").register(o,o._executeOpenBottomRegion),o.app.command("CloseResultsFrame").register(o,o._executeCloseBottomRegion),o.app.command("ToggleResultsFrame").register(o,o._executeToggleBottomRegion),o.app.command("OpenBottomRegion").register(o,o._executeOpenBottomRegion),o.app.command("CloseBottomRegion").register(o,o._executeCloseBottomRegion),o.app.command("_SetDataFrameAutoOpenClose").register(o,function(e){return o.viewModel.canAutoOpenDataframe.set(e)}),o.app.command("_ExportShellState").register(o,o._exportState),o.app.command("_ApplyShellState").register(o,o._applyState),o.app.event("RegionActivatedEvent").subscribe(o,function(e){"LeftPanelRegion"===e.name&&o.viewModel.canAutoOpenDataframe.get()&&o._activateDataRegion(!0),"BottomPanelRegion"===e.name&&o._activateBottomRegion(!0)}),o.app.event("RegionDeactivatedEvent").subscribe(o,function(e){"LeftPanelRegion"===e.name&&o._activateDataRegion(!1),"BottomPanelRegion"===e.name&&o._activateBottomRegion(!1)}),o.app.event("WorkflowFormTextInputBlurredEvent").subscribe(o,function(){setTimeout(function(){o.scrollToTop(),o._resizeWhenFullyConfigured()},100)}),o.app.command("ResizeShell").register(o,function(){o._resizeWhenFullyConfigured()}),o.app.event("PanelResizeEndEvent").subscribe(o,function(e){var t=o.app.viewManager.getViewById(e.viewId),i=t&&t.configuration&&t.configuration.resizableParentRegion?t.configuration.resizableParentRegion:null;if(!i){var n=o.app.viewManager.getRegionForViewId(e.viewId);i=n&&n.name?n.name:null}"LeftPanelRegion"===i&&(o.viewModel.dataFrameIsUserResized=!0,o.viewModel.dataFrameWidth.set(o.leftRegionElement.clientWidth)),"BottomPanelRegion"===i&&(o.viewModel.bottomRegionIsUserResized.set(!0),o.viewModel.bottomRegionHeight.set(o.bottomRegionElement.clientHeight))}),o.app.command("_isDataFrameOpenedByDefault").register(o,function(e){o.viewModel.dataFrameOpenByDefault?e(!0):e(!1)}),o.app.command("OpenAndFocusDataFrame").register(o,o._executeOpenAndFocusDataFrame),o}t.LargeShellView=r})},"Mapping/modules/Shells/LargeShellViewModel":function(){var n,d=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","geocortex/framework-ui/LazyObservable","geocortex/framework/utils/utils"],function(e,t,i,n,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,s=(o=i.ViewModelBase,d(r,o),r.prototype.initialize=function(e){var t=this;function i(e,t,i,n){var o="string"==typeof e&&l.isPercentage(e),a=o?i:t,s=o?l.clamp(parseFloat(e),0,100):parseInt(e,10);0<=s&&(n[a]=s)}if(this.config={},e){e.hasOwnProperty("minWidth")&&i(e.minWidth,"minWidth","minWidthPercent",this.config),e.hasOwnProperty("maxWidth")&&i(e.maxWidth,"maxWidth","maxWidthPercent",this.config),e.hasOwnProperty("dataFrameWidth")&&i(e.dataFrameWidth,"dataFrameWidth","dataFrameWidthPercent",this.config),0!==this.config.dataFrameWidth&&0!==this.config.dataFrameWidthPercent||(l.isNullOrUndefined(this.config.minWidth)?l.isNullOrUndefined(this.config.minWidthPercent)||(this.config.dataFrameWidthPercent=this.config.minWidthPercent,delete this.config.dataFrameWidth):(this.config.dataFrameWidth=this.config.minWidth,delete this.config.dataFrameWidthPercent)),e.hasOwnProperty("dataFrameOpenByDefault")&&(this.dataFrameOpenByDefault=e.dataFrameOpenByDefault);var n=this.app.configModel.moduleConfigs.filter(function(e){return"Shells"===e.moduleName})[0];if(n?n&&!0===n.configuration.homePanelVisible&&(this.dataFrameOpenByDefault=!0):this.app.trace.warning("'Shells' module could not be found! Map offset may be incorrect due to missing panel setting."),this.dataFrameOpenByDefault){var o=0;this.config.dataFrameWidthPercent?o=Math.floor(window.innerWidth*this.config.dataFrameWidthPercent):this.config.dataFrameWidth&&(o=this.config.dataFrameWidth),this.app.event("_updateInitialShellSize").publish({width:o,height:0})}e.hasOwnProperty("bottomRegionHeight")&&i(e.bottomRegionHeight,"bottomRegionHeight","bottomRegionHeightPercent",this.config)}this.minWidth=new a.LazyObservable(null,this._createLazyDelegateGetter(this.config.minWidth,this.config.minWidthPercent,r.DEFAULT_DATA_FRAME_MIN_WIDTH)),this.maxWidth=new a.LazyObservable(null,this._createLazyDelegateGetter(this.config.maxWidth,this.config.maxWidthPercent,r.DEFAULT_DATA_FRAME_MAX_WIDTH)),this.dataFrameWidth=new a.LazyObservable(null,this._createLazyDelegateGetter(this.config.dataFrameWidth,this.config.dataFrameWidthPercent,r.DEFAULT_DATA_FRAME_WIDTH)),this.bottomRegionHeight=new a.LazyObservable(null,this._createLazyDelegateGetter(this.config.bottomRegionHeight,this.config.bottomRegionHeightPercent,r.DEFAULT_BOTTOM_REGION_HEIGHT)),this.app.event("SiteInitializingEvent").once(this,function(){t.canAutoOpenDataframe.set(!0)}),this.app.command("ActivateHomePanel").canExecuteChanged.subscribe(this,function(e){t.infoModuleLoaded.set(t.app.command("ActivateHomePanel").canExecute()),t.linkableModuleLoaded.set(t.infoModuleLoaded.get()||t.layerListModuleLoaded.get())}),this.app.command("SwitchToLayerView").canExecuteChanged.subscribe(this,function(e){t.layerListModuleLoaded.set(t.app.command("SwitchToLayerView").canExecute()),t.linkableModuleLoaded.set(t.infoModuleLoaded.get()||t.layerListModuleLoaded.get())})},r.prototype.getValue=function(e,t,i){return l.isNullOrUndefined(e)?l.isNullOrUndefined(t)?i:"{0}%".format(t):e},r.prototype._createLazyDelegateGetter=function(e,t,i){var n=this;return function(){return n.getValue(e,t,i)}},r.DEFAULT_DATA_FRAME_MIN_WIDTH=200,r.DEFAULT_DATA_FRAME_MAX_WIDTH=500,r.DEFAULT_DATA_FRAME_WIDTH=350,r.DEFAULT_BOTTOM_REGION_HEIGHT=400,r);function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.dataFrameIsUserResized=!1,e.dataFrameOpenByDefault=!1,e.dataFrameIsOpen=new n.Observable(!1),e.dataFrameIsEmpty=new n.Observable(!1),e.canAutoOpenDataframe=new n.Observable(!1),e.bottomRegionIsUserResized=new n.Observable(!1),e.bottomRegionIsOpen=new n.Observable(!1),e.bottomRegionIsMaximized=new n.Observable(!1),e.bottomRegionHasViews=new n.Observable(!1),e.linkableModuleLoaded=new n.Observable(!1),e.infoModuleLoaded=new n.Observable(!1),e.layerListModuleLoaded=new n.Observable(!1),e}t.LargeShellViewModel=s})},"Mapping/modules/Shells/ShellModule":function(){var n,p=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","geocortex/framework/application/ModuleBase","geocortex/infrastructure/ShellUtils","./ShellState","geocortex/framework-ui/utils/UiUtils","geocortex/framework-ui/ViewContainer/ViewContainerView"],function(e,t,i,n,r,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,l=(s=i.ModuleBase,p(d,s),d.prototype.initialize=function(e){var t=this;e&&(Array.isArray(e.css)&&e.css.forEach(function(e){var t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e,document.head.appendChild(t)}),e.homePanelVisible&&this.app.waitUntilSiteInitialized().then(function(){t.app.command("DisableScreenReaderNarrate").execute(),t.app.command("ActivateHomePanel").execute(),n.debounceViewEvents(t.app,function(){t._focusHomePanelAndEnableNarration()})})),this.registerCommands(),this.registerEvents()},d.prototype.getStateFilter=function(){return{dataFrameIsOpen:!0,dataFrameIsMaximized:!0,dataFrameWidth:!0,dataFrameSelectedView:!0,resultsFrameIsOpen:!0,resultsFrameIsMaximized:!0,resultsFrameHeight:!0,resultsFrameSelectedView:!0,views:!0}},d.prototype.exportState=function(){var n=this;return Promise.try(function(){var i={dataFrameIsOpen:!1,dataFrameIsMaximized:!1,resultsFrameIsOpen:!1,resultsFrameIsMaximized:!1,views:{}};return r.ProjectView.All.forEach(function(e){var t=n.app.viewManager.getViewById(e);t&&(i.views[e]=t.isActive)}),n.app.command("_ExportShellState").execute(i),i.serialVersion=2,i})},d.prototype.applyState=function(s){var l=this;s=dojo.clone(s),this.app.event("_shellDestabilizedEvent").publish();var t=this.app.event("ProjectLoadedEvent").subscribe(this,function(e){var o;l.app.event("ProjectLoadedEvent").unsubscribe(t),l.app.command("_SetDataFrameAutoOpenClose").execute(!1),s.views=s.views||{},l.app.project.isLoading=!0;var a=function(e){if(e>=r.ProjectView.All.length)return l.app.command("_ApplyShellState").execute(s),l.app.command("_SetDataFrameAutoOpenClose").execute(!0),void(l.app.project.isLoading=!1);var i=r.ProjectView.All[e],t=!!s.views[i],n=l.app.viewManager.getViewById(i);!n&&i===r.ProjectView.ResultsTable&&t?(n=l.app.viewManager.getViewById(r.ProjectView.Results),s.dataFrameIsOpen=s.dataFrameIsOpen||s.resultsFrameIsOpen):!n&&i===r.ProjectView.FeatureDetailsExpanded&&t&&(n=l.app.viewManager.getViewById(r.ProjectView.FeatureDetails),s.dataFrameIsOpen=s.dataFrameIsOpen||s.resultsFrameIsOpen),!n&&t?o=l.app.awaitModuleForView(i).then(function(e){if(e){var t=l.app.viewManager.getViewById(i);t&&l.app.viewManager.activateView(t)}}):n&&(o=Promise.resolve(),t?l.app.viewManager.activateView(n):l.app.viewManager.deactivateView(n)),o.then(function(){return a(++e)})};a(0)});return Promise.resolve()},d.prototype.registerCommands=function(){this.app.command("TapToDismiss").register(this,this._executeTapToDismiss),this.app.command("DisableTapToDismiss").register(this,function(e){return o.disableTapToDismiss(e)}),this.app.command("FocusToDismiss").register(this,function(e){return o.focusToDismissThis(e.view,e.onOtherFocused,e.shouldIgnoreFocus)}),this.app.command("DisableFocusToDismiss").register(this,function(e){return o.disableFocusToDismiss(e)})},d.prototype.registerEvents=function(){var t=this;this.app.event("FlyoutActivated").subscribe(this,function(e){t.app.command("DisableMapClick").execute()}),this.app.event("FlyoutDeactivated").subscribe(this,function(e){t.app.command("EnableMapOnNextClick").execute()})},d.prototype._focusHomePanelAndEnableNarration=function(){var e=this,t=this.app.viewManager.getViewById("InfoView");if(t){var i=$(t.root);i&&dojo.isFunction(i.focusout)?i.focusout(function(){e.app.command("EnableScreenReaderNarrate").execute(),i.off("focusout")}):this.app.command("EnableScreenReaderNarrate").execute(),this.app.command("FocusOnFirstInputInView").execute(t)}},d.prototype._executeTapToDismiss=function(e){this.app.configuration.mobileMode&&"IWantToMenuView"!==e.view.id&&"SearchHintsView"!==e.view.id&&"ShellView"!==e.view.id||o.tapToDismissThis(e.view,e.onOtherInteracted,e.onElementInteracted)},d.prototype._getContainerView=function(e){var t=this.app.viewManager.getRegionForViewId(e);if(t){var i=t.ownerView;if(i instanceof a.ViewContainerView)return i}return null},d);function d(){return null!==s&&s.apply(this,arguments)||this}t.ShellModule=l})},"Mapping/modules/Shells/ShellState":function(){define(["require","exports","geocortex/framework-ui/ViewContainer/ViewContainerView","geocortex/framework/utils/ArrayUtils"],function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(a.isProjectView=function(e){return 0<=a.All.indexOf(e.id)},a.containsProjectView=function(e){return e instanceof i.ViewContainerView&&e.viewModel.viewDescriptors.get().some(function(e){return a.isProjectView(e.view)})},a.getTopmostViewInRegion=function(e){if(e){var t=n.lastOrDefault(e.activeViews,function(e){return a.isProjectView(e)||a.containsProjectView(e)});return t?t.id:void 0}},a.HomePanel="InfoView",a.LayerList="LayerListView",a.Legend="LegendView",a.Results="ResultsListView",a.ResultsFeatureSet="FeatureSetResultsView",a.ResultsTable="ResultsTableView",a.FeatureDetails="FeatureDetailsCompactView",a.FeatureDetailsExpanded="FeatureDetailsExpandedView",a.QueryBuilder="SimpleQueryBuilderView",a.FilterBuilder="SimpleFilterBuilderView",a.Charting="ChartingView",a.All=[a.HomePanel,a.LayerList,a.Legend,a.QueryBuilder,a.FilterBuilder,a.Results,a.ResultsFeatureSet,a.PlotCoordinates="PlotCoordinatesView",a.TimeSliderView="TimeSliderSettingsView",a.Charting,a.ResultsTable,a.FeatureDetails,a.FeatureDetailsExpanded],a);function a(){}t.ProjectView=o})},"Mapping/modules/Shells/Components/DataFrameButtonView":function(){var n,l=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","geocortex/framework/ui/ViewBase","geocortex/infrastructure/ui/components/SmartPanel/SmartPanelView"],function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a=(o=i.ViewBase,l(s,o),s.prototype.attach=function(e){this.app.event("DataFrameOpenedEvent").subscribe(this,this._onOpenedDataFrame),this.app.event("DataFrameClosedEvent").subscribe(this,this._onClosedDataFrame)},s.prototype.activated=function(){var t=this;this.app.command("_isDataFrameOpenedByDefault").execute(function(e){e&&t._onOpenedDataFrame()})},s.prototype._onOpenedDataFrame=function(){$(this.buttonElement).removeClass("tab-closed"),$(this.buttonElement).addClass("tab-open"),this.dataframeIsOpen=!0},s.prototype._onClosedDataFrame=function(){$(this.buttonElement).removeClass("tab-open"),$(this.buttonElement).addClass("tab-closed"),this.dataframeIsOpen=!1},s.prototype.handleMouseDown=function(e,t,i){var n=this;1<e.button&&"mousedown"===e.type||this.dataframeIsOpen&&(this.timeoutId=setTimeout(function(){n._resizeDataFrame(e.pageX,e.pageY)},this.resizeDelay))},s.prototype.handleTouchStart=function(e,t,i){var n=this,o=null;$(this.viewModel.currentView.root).is(":visible")?($(this.app.getHostElement()).one("touchend.dataframe-toggle-click",function(){n.app.command("CloseDataFrame").execute(),clearTimeout(o)}),o=setTimeout(function(){$(n.app.getHostElement()).off("touchend.dataframe-toggle-click"),n._resizeDataFrame(e.targetTouches[0].pageX,e.targetTouches[0].pageY)},this.resizeDelay)):this.app.command("OpenDataFrame").execute()},s.prototype.handleOnClick=function(e,t,i){this.app.command("ToggleDataFrame").execute(),this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)},s.prototype._resizeDataFrame=function(e,t){this.viewModel.currentView instanceof n.SmartPanelView?this.viewModel.currentView.resizeSmartPanel(e,t):this.app.viewManager.getViewById("DataFrameViewContainer").resizeSmartPanel(e,t)},s);function s(){var e=null!==o&&o.apply(this,arguments)||this;return e.timeoutId=null,e.dataframeIsOpen=!1,e.resizeDelay=300,e}t.DataFrameButtonView=a})},"Mapping/modules/Shells/Components/DataFrameResizeButtonView":function(){var n,l=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","geocortex/framework/ui/ViewBase","geocortex/infrastructure/ui/components/SmartPanel/SmartPanelView"],function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a=(o=i.ViewBase,l(s,o),s.prototype.attach=function(e){this.app.event("DataFrameOpenedEvent").subscribe(this,this._onOpenedDataFrame),this.app.event("DataFrameClosedEvent").subscribe(this,this._onClosedDataFrame)},s.prototype.activated=function(){var t=this;this.app.command("_isDataFrameOpenedByDefault").execute(function(e){e&&t._onOpenedDataFrame()})},s.prototype._onOpenedDataFrame=function(){$(this.buttonElement).removeClass("inactive"),$(this.buttonElement).addClass("active")},s.prototype._onClosedDataFrame=function(){$(this.buttonElement).removeClass("active"),$(this.buttonElement).addClass("inactive")},s.prototype.handleMouseDown=function(e,t,i){var n=this;1<e.button&&"mousedown"===e.type||(this.timeoutId=setTimeout(function(){n._resizeDataFrame(e.pageX,e.pageY)},this.resizeDelay))},s.prototype.handleTouchStart=function(e,t,i){var n=this,o=null;$(this.app.getHostElement()).one("touchend.dataframe-toggle-click",function(){clearTimeout(o)}),o=setTimeout(function(){$(n.app.getHostElement()).off("touchend.dataframe-toggle-click"),n._resizeDataFrame(e.targetTouches[0].pageX,e.targetTouches[0].pageY)},this.resizeDelay)},s.prototype._resizeDataFrame=function(e,t){this.viewModel.currentView instanceof n.SmartPanelView?this.viewModel.currentView.resizeSmartPanel(e,t):this.app.viewManager.getViewById("DataFrameViewContainer").resizeSmartPanel(e,t)},s);function s(){var e=null!==o&&o.apply(this,arguments)||this;return e.timeoutId=null,e.resizeDelay=300,e}t.DataFrameResizeButtonView=a})},"Mapping/modules/Shells/Components/NavBarSmallView":function(){var n,s=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=(n=i.ViewBase,s(a,n),a.prototype.handleTapNavButton=function(e,t,i){this.app.command("DeactivateView").execute(this.id),this.app.command("ActivateView").execute(i.view.id)},a.prototype.handleTapSwitcherCloseButton=function(e,t,i){this.app.command("DeactivateView").execute(this.id)},a);function a(){return null!==n&&n.apply(this,arguments)||this}t.NavBarSmallView=o})},"Mapping/modules/Shells/Small/ShellDimensions":function(){define(["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})},"Mapping/modules/Shells/Small/SmallShellView":function(){var n,c=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","./../HandheldShellView","./SmallShellViewModel","geocortex/framework-ui/ViewContainer/ViewContainerView","geocortex/framework-ui/animation/Animation","geocortex/infrastructure/ui/PanelPosition","geocortex/framework/events/ViewDimensionsChangedArgs","./../ShellState"],function(e,t,i,l,a,r,d,p,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,s=(o=i.HandheldShellView,c(h,o),h.prototype.added=function(e){var t=this;$(this.app.getHostElement()).addClass("shell-small"),this._detectCssTransitions(),this._shellDimensions=this._measureShellDimensions(),this.app.event("ViewActivatedEvent").subscribe(this,this._handleViewActivated),this.app.event("ViewDeactivatedEvent").subscribe(this,this._handleViewDeactivated),this.app.event("RegionActivatedEvent").subscribe(this,this._handleRegionActivated),this.app.event("RegionDeactivatedEvent").subscribe(this,this._handleRegionDeactivated),this.app.event("ApplicationResizedEvent").subscribe(this,this._resizeShellOnceSettled),this.app.event("ApplicationNativeReadyEvent").subscribe(this,this._resizeWhenFullyConfigured),this.app.command("ResizeShell").register(this,this._resizeWhenFullyConfigured),this.app.command("OpenDataFrame").register(this,function(){return t._openBottomPanel()}),this.app.command("CloseDataFrame").register(this,function(){return t._closeBottomPanel()}),this.app.command("DataFrameRaise").register(this,function(){return t._rotateDataFramePosition(!0,!1)}),this.app.command("DataFrameLower").register(this,function(){return t._rotateDataFramePosition(!1,!1)}),this.app.command("DataFrameCyclePosition").register(this,function(){return t._rotateDataFramePosition()}),this.app.command("_SetDataFrameAutoOpenClose").register(this,function(e){t.viewModel.bottomPanelAutoPosition=e}),this.app.command("_ExportShellState").register(this,this._exportState),this.app.command("_ApplyShellState").register(this,this._applyState),this.app.event("ToolbarFlyoutDeactivatedEvent").subscribe(this,this._handleToolbarFlyoutDeactivatedEvent),$(window).on("scroll",function(e){return t._resizeShellOnceSettled()}),this._yield(function(){r.create(t.bottomPanelRegionElement).add({transform:"translate(0px, {0}px)".format(t._shellDimensions.height),duration:0}).play()})},h.prototype.resizeShell=function(e){void 0===e&&(e=!1),this._resize(e)},h.prototype._resize=function(e){var t=this;if(void 0===e&&(e=!1),this.containerElement){var i,n,o=this._measureShellDimensions();if(n=this._shellDimensions?(i=this._shellDimensions.width!==o.width,this._shellDimensions.height!==o.height):(this._shellDimensions=this._measureShellDimensions(),i=!0),e||i||n){if(this._ios&&!this._native){var a=document.body.offsetHeight,s=window.innerHeight;$(this.containerElement).css({top:"0px"}),$(this.navigationRegionElement).css({top:"{0}px".format(a)}),$("body").height(""),o.height=s}if(this._shellDimensions=o,this.viewModel.headerHeight=$(this.headerRegionElement).height(),this.viewModel.headerHeight&&!isNaN(this.viewModel.headerHeight)||(this.viewModel.headerHeight=l.SmallShellViewModel.DEFAULT_HEADER_HEIGHT),n||e){switch(this.viewModel.bottomPanelPosition){case d.PanelPosition.Hidden:case d.PanelPosition.Partial:this.viewModel.bottomPanelTargetHeight=this.viewModel.config.bottomPanelHeightPercent*this._shellDimensions.height;break;case d.PanelPosition.Minimized:this.viewModel.bottomPanelTargetHeight=this.bottomPanelInnerRegionElement.clientHeight;break;case d.PanelPosition.Maximized:this.viewModel.bottomPanelTargetHeight=this._shellDimensions.height+1}$(this.screenRegionElement).height(o.height-this.viewModel.headerHeight),$(this.containerElement).height(o.height)}(i||n||e)&&(setTimeout(scrollTo,1,0,0),this._yieldForDom(function(){t.app.command("MapResize").execute(),t._changeDataFramePosition(t.viewModel.bottomPanelPosition);var e=t.app.viewManager.getRegionForViewId(t.id);t.app.event("ViewDimensionsChangedEvent").publish(new p.ViewDimensionsChangedArgs(t,e))}))}}},h.prototype._oneTimePanelTransitionEvent=function(t){this._useCssTransitions?$(this.bottomPanelRegionElement).one(this._cssTransitionEnd,function(e){t(e)}):this._yield(t)},h.prototype._viewIsInBottomPanelRegion=function(e){var t=this.app.viewManager.getRegionForViewId(e.id);return t&&!!this._discoveredChildRegions[t.name]},h.prototype._handleViewActivated=function(e){var n=this;if(!this._bottomPanelOpening&&this.viewModel.bottomPanelAutoPosition&&"ResultsStatusRegion"!==e.regionName){if(this._viewIsInBottomPanelRegion(e)){var o=function(e){if(e instanceof a.ViewContainerView){e.childRegions.map(function(e){return n._discoveredChildRegions[e.name]=!0});var t=e.childRegions.filter(function(e){return e&&0<e.activeViews.length})[0],i=t?t.activeViews.filter(function(e){return-1===e.root.className.indexOf("inactive")})[0]:null;return o(i)}return e},t=e instanceof a.ViewContainerView;this._currentViewActiveInPanel=t?o(e):e}clearTimeout(this._debouncerTimer),this._debouncerTimer=setTimeout(function(){n._currentViewActiveInPanel&&-1===n._currentViewActiveInPanel.root.className.indexOf("inactive")&&(n._applyMinimizedMode(n._currentViewActiveInPanel.configuration.openMinimized),n._openBottomPanel())},50)}},h.prototype._handleViewDeactivated=function(e){if(this.viewModel.bottomPanelAutoPosition)if(-1===this.viewModel.config.closeBottomPanelWhenDeactivated.indexOf(e.id)){var t=this.app.viewManager.getRegionForViewId(e.id);if(t&&(!t||"BottomPanelRegion"===t.name)){var i=!1;t.views.forEach(function(e){return i=!!e.isActive||i}),i||this._changeDataFramePosition(d.PanelPosition.Hidden)}}else this._changeDataFramePosition(d.PanelPosition.Hidden)},h.prototype._handleRegionActivated=function(e){var t=this;switch(e.name){case"LeftPanelRegion":r.play(this.leftPanelRegionElement,this._leftPanelOpenAnimation).then(function(e){return t.app.event("LeftPanelOpenedEvent")}),$(this.leftPanelRegionElement).removeClass(this.cssClasses.leftPanelClosed),$(this.leftPanelRegionElement).removeClass(this.cssClasses.leftPanelClosing);break;case"TopRightShellRegion":this.app.event("SmallShellTopRightRegionOpeningEvent").publish(),r.play(this.topRightShellRegionElement,this._topRightRegionActivateAnimation);break;case"SmallNavigationRegion":r.play(this.navigationRegionElement,this._navRegionActivateAnimation).then(function(e){return t.app.event("SmallNavigationPanelOpenedEvent")})}},h.prototype._handleRegionDeactivated=function(e){var t=this;switch(e.name){case"LeftPanelRegion":r.play(this.leftPanelRegionElement,this._leftPanelCloseAnimation).then(function(e){return t.app.event("LeftPanelClosedEvent")}),$(this.leftPanelRegionElement).removeClass(this.cssClasses.leftPanelOpen),$(this.leftPanelRegionElement).removeClass(this.cssClasses.leftPanelOpening);break;case"TopRightShellRegion":this.app.event("SmallShellTopRightRegionClosingEvent").publish(),r.play(this.topRightShellRegionElement,this._topRightRegionDeactivateAnimation);break;case"SmallNavigationRegion":r.play(this.navigationRegionElement,this._navRegionDeactivateAnimation).then(function(e){return t.app.event("SmallNavigationPanelClosedEvent")})}},h.prototype._handleToolbarFlyoutDeactivatedEvent=function(e){var t=this;this.app.command("DeactivateView").execute(e),this._yield(function(){return t.app.command("CloseDataFrame").execute()})},h.prototype._yield=function(e){return setTimeout(e,0)},h.prototype._yieldForDom=function(e){return setTimeout(e,this._domBreatheDelay)},h.prototype._panelIsOpen=function(){return this.viewModel.bottomPanelPosition!==d.PanelPosition.Hidden},h.prototype._openBottomPanel=function(){this._minimizedMode||this.viewModel.bottomPanelPosition!==d.PanelPosition.Minimized?this._panelIsOpen()||(this.viewModel.config.openToMaximum?this._changeDataFramePosition(d.PanelPosition.Maximized):this._minimizedMode?this._changeDataFramePosition(d.PanelPosition.Minimized):this._changeDataFramePosition(d.PanelPosition.Partial)):this._changeDataFramePosition(this.viewModel.config.openToMaximum?d.PanelPosition.Maximized:d.PanelPosition.Partial)},h.prototype._closeBottomPanel=function(){this._panelIsOpen()&&(this.app.event("SmallBottomPanelClosedEvent").publish(),this._changeDataFramePosition(d.PanelPosition.Hidden))},h.prototype._rotateDataFramePosition=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var i=[d.PanelPosition.Hidden,d.PanelPosition.Minimized,d.PanelPosition.Partial,d.PanelPosition.Maximized],n=i.indexOf(this.viewModel.bottomPanelPosition);n=n===i.length-1?i[0]:n+1,e?(this.viewModel.bottomPanelPosition===d.PanelPosition.Hidden&&(n=this._minimizedMode?d.PanelPosition.Minimized:d.PanelPosition.Partial),this.viewModel.bottomPanelPosition===d.PanelPosition.Minimized?n=d.PanelPosition.Partial:this.viewModel.bottomPanelPosition===d.PanelPosition.Partial?n=d.PanelPosition.Maximized:this.viewModel.bottomPanelPosition===d.PanelPosition.Maximized&&(n=t?d.PanelPosition.Hidden:d.PanelPosition.Maximized)):this.viewModel.bottomPanelPosition===d.PanelPosition.Maximized?n=d.PanelPosition.Partial:this.viewModel.bottomPanelPosition===d.PanelPosition.Partial?n=this._minimizedMode?d.PanelPosition.Minimized:d.PanelPosition.Hidden:this.viewModel.bottomPanelPosition===d.PanelPosition.Minimized?n=d.PanelPosition.Hidden:this.viewModel.bottomPanelPosition===d.PanelPosition.Hidden&&(n=t?d.PanelPosition.Maximized:d.PanelPosition.Hidden),this._changeDataFramePosition(n)},h.prototype._changeDataFramePosition=function(e,t){var i=this,n=this.viewModel.bottomPanelPosition,o=$(this.bottomPanelRegionElement);if(this.viewModel.bottomPanelPosition===d.PanelPosition.Maximized&&this._setToolAndScreenRegionVisibility(!0),e===d.PanelPosition.Minimized&&!this._minimizedMode){var a=this.viewModel.config.openToMaximum?d.PanelPosition.Maximized:d.PanelPosition.Partial;e=this._panelIsOpen()?d.PanelPosition.Hidden:a}requestAnimationFrame(function(){return i.viewModel.bottomPanelPosition=e}),e===d.PanelPosition.Partial?(this.viewModel.bottomPanelTargetHeight=this._shellDimensions.height*this.viewModel.config.bottomPanelHeightPercent,o.height(this.viewModel.bottomPanelTargetHeight)):e===d.PanelPosition.Minimized?n===d.PanelPosition.Hidden?(o.removeClass(this.cssClasses.hidden),this.viewModel.bottomPanelTargetHeight=this.bottomPanelInnerRegionElement.clientHeight,o.addClass(this.cssClasses.hidden)):this.viewModel.bottomPanelTargetHeight=this.bottomPanelInnerRegionElement.clientHeight:e===d.PanelPosition.Maximized?(this.viewModel.bottomPanelTargetHeight=this._shellDimensions.height,o.height(this.viewModel.bottomPanelTargetHeight)):e===d.PanelPosition.Hidden&&(this._applyMinimizedMode(!1),this._currentViewActiveInPanel=null);var s,l=this._shellDimensions.height;e===d.PanelPosition.Maximized||e===d.PanelPosition.Partial?(s=100*this.viewModel.config.bottomPanelHeightPercent/2,s+=this.viewModel.headerHeight/l*100,s*=-1):s=0,0!==s&&$(this.headerRegionElement).addClass(this.cssClasses.hiddenByScreenElement),r.create(this.screenRegionElement).add({transform:"translate(0px, {0}%)".format(s)}).play().then(function(){var e=i.app.viewManager.getRegionForViewId(i.id),t=new p.ViewDimensionsChangedArgs(i,e);i.app.event("ViewDimensionsChangedEvent").publish(t),$(i.headerRegionElement).toggleClass(i.cssClasses.hiddenByScreenElement,0!==s),i.app.command("MapResize").execute()}),this._setPanelVerticalOffset(n,e,function(){return i._handlePanelVerticalOffsetChanged(n,t)})},h.prototype._handlePanelVerticalOffsetChanged=function(e,t){var i=this;this.viewModel.bottomPanelPosition===d.PanelPosition.Maximized&&this.viewModel.config.openToMaximum&&this._setToolAndScreenRegionVisibility(!1),this.viewModel.bottomPanelPosition===d.PanelPosition.Maximized?(e===d.PanelPosition.Hidden&&this.app.event("DataFrameOpenedEvent").publish(this.viewModel.config.bottomPanelHeightPercent),this.app.event("DataFrameMaximizedEvent").publish()):this.viewModel.bottomPanelPosition===d.PanelPosition.Partial||this.viewModel.bottomPanelPosition===d.PanelPosition.Minimized?this._yield(function(){return i.app.event("DataFrameOpenedEvent").publish(i.viewModel.config.bottomPanelHeightPercent)}):this._yield(function(){i.app.event("DataFrameClosedEvent").publish()}),this.app.event("SmallShellPanelPositionChanged").publish(this.viewModel.bottomPanelPosition,this.viewModel.config.openToMaximum),t&&t(this.viewModel.bottomPanelPosition)},h.prototype._setPanelVerticalOffset=function(e,t,i){var n=this,o=0,a=$(this.bottomPanelRegionElement);if(t===d.PanelPosition.Maximized)this.viewModel.bottomPanelTargetHeight=this._shellDimensions.height,o=-this.viewModel.headerHeight-2;else if(t===d.PanelPosition.Partial){var s=this._shellDimensions.height;o=this._shellDimensions.height-s*this.viewModel.config.bottomPanelHeightPercent,o-=this.viewModel.headerHeight}else t===d.PanelPosition.Minimized?(s=this._shellDimensions.height,o=this._shellDimensions.height-this.viewModel.bottomPanelTargetHeight,o-=this.viewModel.headerHeight):t===d.PanelPosition.Hidden&&(o=this._shellDimensions.height);t===d.PanelPosition.Minimized&&e!==d.PanelPosition.Hidden||a.height(this.viewModel.bottomPanelTargetHeight);var l=this._cssClassForPanelPosition(t);null!=e&&a.removeClass(this._cssClassForPanelPosition(e)),r.create(this.bottomPanelRegionElement).add({transform:"translate(0px, {0}px)".format(o)}).play().then(function(){t!==d.PanelPosition.Hidden&&a.removeClass(n.cssClasses.hidden),t===d.PanelPosition.Minimized&&e!==d.PanelPosition.Hidden&&a.height(n.viewModel.bottomPanelTargetHeight),a.addClass(l),n._bottomPanelOpening=!1}).then(function(){i&&n._yieldForDom(i)}),this._bottomPanelOpening=!0},h.prototype._cssClassForPanelPosition=function(e){var t=[d.PanelPosition.Hidden,d.PanelPosition.Minimized,d.PanelPosition.Partial,d.PanelPosition.Maximized];return[this.cssClasses.hidden,this.cssClasses.minimized,this.cssClasses.partial,this.cssClasses.maximized][t.indexOf(e)]},h.prototype._setToolAndScreenRegionVisibility=function(e){if(void 0===e&&(e=!0),this.viewModel.toolAndScreenRegionsHidden!==e){var t=[this.headerRegionElement,this.screenRegionElement];e?$(t).removeClass(this.cssClasses.hiddenDueToMaximization):$(t).addClass(this.cssClasses.hiddenDueToMaximization),this.viewModel.toolAndScreenRegionsHidden=e}},h.prototype._resizeShellOnceSettled=function(e){var t=this;void 0===e&&(e=!1),this._resizeSettleHandle&&clearTimeout(this._resizeSettleHandle),this._resizeSettleHandle=setTimeout(function(){t._resizeWhenFullyConfigured(e)},this._resizeSettleTimeoutMs)},h.prototype._detectCssTransitions=function(){this._useCssTransitions=Modernizr.csstransitions,this._useCssTransitions?(this._cssTransitionStyle=Modernizr.prefixed("transition"),this._cssTransitionEnd=this._cssTransitionEndMap[this._cssTransitionStyle],this._cssTransitionEnd?this.app.trace.debug("Detected CSS transitions using '{0}' and '{1}'.".format(this._cssTransitionStyle,this._cssTransitionEnd)):(this._useCssTransitions=!1,this.app.trace.debug("No CSS transition end event detected. Transitions will not be used."))):this.app.trace.debug("Support for CSS transitions was not detected.")},h.prototype._measureShellDimensions=function(){return{width:!this._android||this._androidChrome||this._androidFirefox?$(window).width():window.outerWidth/window.devicePixelRatio,height:!this._android||this._androidChrome||this._androidFirefox?$(window).height():window.outerHeight/window.devicePixelRatio}},h.prototype._exportState=function(e){e.dataFrameIsOpen=this.viewModel.bottomPanelPosition!==d.PanelPosition.Hidden,e.dataFrameIsMaximized=this.viewModel.bottomPanelPosition===d.PanelPosition.Maximized;var t=this.app.viewManager.getExistingRegionByName("BottomPanelViewContainerRegion");e.dataFrameSelectedView=n.ProjectView.getTopmostViewInRegion(t)},h.prototype._applyState=function(e){var t=this;e.dataFrameIsOpen&&e.dataFrameIsMaximized?this._changeDataFramePosition(d.PanelPosition.Maximized):this._changeDataFramePosition(e.dataFrameIsOpen?d.PanelPosition.Partial:d.PanelPosition.Hidden);var i=e.dataFrameSelectedView;"DataFrameResultsContainerView"!==i&&"SimpleQueryBuilderContainerView"!==i&&"SimpleFilterBuilderContainerView"!==i||(i="ResultsViewContainerView"),i&&this.app.command("ActivateView").execute(i),this.app.event("_projectShellConfiguredEvent").publish(),setTimeout(function(){return t.app.event("_shellStabilizedEvent").publish()})},h.prototype._applyMinimizedMode=function(e){e=!!e,this._minimizedMode!==e&&(this._minimizedMode=e,this.app.event("SmallShellBottomPanelMinimizedModeChange").publish(this._minimizedMode))},h);function h(){var e=null!==o&&o.apply(this,arguments)||this;return e.cssClasses={maximized:"panel-maximized",minimized:"panel-minimized",partial:"panel-partial-height",hidden:"panel-hidden",hiddenDueToMaximization:"hidden-by-panel",screenRegionSlideUp:"slide-up-end",leftPanelOpen:"left-panel-open",leftPanelOpening:"left-panel-opening",leftPanelClosed:"left-panel-closed",leftPanelClosing:"left-panel-closing",hiddenByScreenElement:"hidden-by-screen-element"},e._headerBarDeactivateAnimation=["header-active:0","header-inactive:0"],e._headerBarActivateAnimation=["header-inactive:0","header-active:0"],e._leftPanelOpenAnimation=["left-panel-closed:0","left-panel-opening:0","left-panel-opened:300"],e._leftPanelCloseAnimation=["left-panel-opened:0","left-panel-closing:300","left-panel-closed:0"],e._topRightRegionActivateAnimation=["top-right-shell-region-closed:0","top-right-shell-region-opening","top-right-shell-region-opened:250"],e._topRightRegionDeactivateAnimation=["top-right-shell-region-opened:0","top-right-shell-region-closing:250","top-right-shell-region-closed:0"],e._navRegionActivateAnimation=["nav-region-closed:0","nav-region-opening:0","nav-region-opened:500"],e._navRegionDeactivateAnimation=["nav-region-opened:0","nav-region-closing:500","nav-region-closed:0"],e._domBreatheDelay=50,e._resizeSettleTimeoutMs=550,e._bottomPanelOpening=!1,e._useCssTransitions=!0,e._cssTransitionStyle="transition",e._cssTransitionEnd="transitionend",e._cssTransitionEndMap={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",msTransition:"MSTransitionEnd",transition:"transitionend"},e._minimizedMode=!1,e._discoveredChildRegions={BottomPanelRegion:!0},e}t.SmallShellView=s})},"Mapping/modules/Shells/Small/SmallShellViewModel":function(){var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","./../CommonShellViewModel","geocortex/infrastructure/ui/PanelPosition","geocortex/framework/utils/utils"],function(e,t,i,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s=(a=i.CommonShellViewModel,r(l,a),l.prototype.initialize=function(e){var t=this;this.config={},e&&(this.config.openToMaximum=!!e.openToMaximum,this.config.bottomPanelHeightPercent=void 0!==e.bottomPanelHeightPercent?e.bottomPanelHeightPercent:l.DEFAULT_BOTTOM_PANEL_HEIGHT_PERCENT,this.config.bottomPanelHeightPercent/=100,this.config.closeBottomPanelWhenDeactivated=e.closeBottomPanelWhenDeactivated||this.closeBottomPanelWhenDeactivatedDefaults,this.config.headerHeight&&o.isInteger(this.config.headerHeight)&&(this.headerHeight=this.config.headerHeight)),this.app.command("_getCurrentBottomPanelPosition").register(this,function(e){e&&e(t.bottomPanelPosition)}),this.app.event("_updateInitialShellSize").publish({width:0,height:this.headerHeight})},l.DEFAULT_HEADER_HEIGHT=42,l.DEFAULT_BOTTOM_PANEL_HEIGHT_PERCENT=75,l);function l(){var e=null!==a&&a.apply(this,arguments)||this;return e.toolAndScreenRegionsHidden=!1,e.bottomPanelPosition=n.PanelPosition.Hidden,e.bottomPanelTargetHeight=0,e.bottomPanelAutoPosition=!0,e.headerHeight=l.DEFAULT_HEADER_HEIGHT,e.closeBottomPanelWhenDeactivatedDefaults=["BookmarksView","GeolocateView"],e}t.SmallShellViewModel=s})},"Mapping/modules/Shells/Components/Navigation/NavButtonView":function(){var n,s=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=(n=i.ViewBase,s(a,n),a.prototype.handleTap=function(e,t,i){return this.app.command("ToggleView").execute("NavBarSmallView"),!1},a);function a(){return null!==n&&n.apply(this,arguments)||this}t.NavButtonView=o})},"Mapping/modules/Shells/Components/Navigation/NavButtonViewModel":function(){var n,s=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","geocortex/framework/ui/ViewModelBase"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=(n=i.ViewModelBase,s(a,n),a);function a(){return null!==n&&n.apply(this,arguments)||this}t.NavButtonViewModel=o})},"Mapping/modules/Shells/Components/Panels/ShellPanelView":function(){var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","geocortex/infrastructure/ui/components/SmartPanel/SmartPanelView","geocortex/framework-ui/ViewContainer/ViewContainerView","geocortex/infrastructure/ui/PanelPosition"],function(e,t,i,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s=(a=i.SmartPanelView,r(l,a),l.prototype.added=function(e){var t=this;a.prototype.added.call(this,e),this._wireUpHammer(),this.viewModel.titleBarIsVisible.set(!0),this.app.event("SmallShellPanelPositionChanged").subscribe(this,this.panelPositionChanged),this.app.event("ViewActivatedInContainerEvent").subscribe(this,function(e){e.regionName===t.viewModel.regionName.get()&&(e instanceof n.ViewContainerView?(t.activeContainer=e,t.viewModel.showingSmartBackButton.sync(t.activeContainer.viewModel.showingBackButton)):(t.activeContainer=null,t.viewModel.showingSmartBackButton.set(!1)))})},l.prototype.resolveWidget=function(e,t,i){return"SmartPanelHoistedMenu"===e?a.prototype.resolveWidget.call(this,e,t,i):"ShellPanelHeaderWidget"===e?this.viewModel.hoistedWidgetView:void 0},l.prototype.deactivateContainer=function(){this.app.command("CloseDataFrame").execute()},l.prototype.panelPositionChanged=function(e,t){var i=this;this.panelPosition=e,this.viewModel.maximizeDisabled.get()||(this.panelPosition!==o.PanelPosition.Partial||t)&&this.panelPosition!==o.PanelPosition.Maximized?this.viewModel.maximizeDisabled.get()&&this.viewModel.maximizeDisabled.set(!1):this.viewModel.maximizeDisabled.set(!0),this.panelPosition===o.PanelPosition.Hidden&&this.viewModel.contextWidgetViewId&&this.viewModel.widgetViewModel.get()&&(this.app.command("_SetDataFrameAutoOpenClose").execute(!1),this.app.viewManager.deactivateView(this.app.viewManager.getViewById(this.viewModel.contextWidgetViewId)),setTimeout(function(){return i.app.command("_SetDataFrameAutoOpenClose").execute(!0)},50))},l.prototype.handleClickSmartBackButton=function(e,t,i){if(this.activeContainer){var n=this.activeContainer.viewModel&&this.activeContainer.viewModel.currentView,o=n&&n.viewModel&&n.viewModel.menuSourceView;this.activeContainer.handleClickBack(e,t,this.activeContainer.viewModel),o&&this.app.viewManager.activateView(o)}},l.prototype.handleClickPanelNavButton=function(e,t,i){this.app.command("ActivateView").execute(i.view.id)},l.prototype.handleTapMaximizeSizeButton=function(e,t,i){this.app.command("DataFrameRaise").execute()},l.prototype.handleTapMinimizeSizeButton=function(e,t,i){this.panelPosition!==o.PanelPosition.Hidden&&this.app.command("DataFrameLower").execute()},l.prototype.handleClickMore=function(e,t,i){this.app.command("ActivateView").execute("PrimaryViewSwitcherView")},l.prototype._wireUpHammer=function(){var t=this,e=new Hammer(this.headerElement,{});e.get("swipe").set({direction:Hammer.DIRECTION_ALL}),e.on("swipe",function(e){if(e.isFinal)switch(e.direction){case Hammer.DIRECTION_UP:t.app.command("DataFrameRaise").execute();break;case Hammer.DIRECTION_DOWN:t.app.command("CloseDataFrame").execute();break;case Hammer.DIRECTION_LEFT:t.app.command("ActivateView").execute("IWantToMenu")}})},l);function l(){return null!==a&&a.apply(this,arguments)||this}t.ShellPanelView=s})},"Mapping/modules/Shells/Components/Panels/ShellPanelViewModel":function(){var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","geocortex/infrastructure/ui/components/SmartPanel/SmartPanelViewModel","geocortex/framework/observables","geocortex/framework-ui/ViewContainer/ViewContainerView"],function(e,t,i,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s=(a=i.SmartPanelViewModel,r(l,a),l.prototype.initialize=function(e){var t=this;a.prototype.initialize.call(this,e),this.app.event("DataFrameOpenedEvent").subscribe(this,function(){t.panelIsOpen.set(!0)}),this.app.event("DataFrameClosedEvent").subscribe(this,function(){t.panelIsOpen.set(!1)}),this.app.event("SmallShellBottomPanelMinimizedModeChange").subscribe(this,function(e){return t.maximizeVisible.set(e)})},l.prototype.handleViewActivatedEvent=function(e){if(a.prototype.handleViewActivatedEvent.call(this,e),e instanceof o.ViewContainerView){var t="BottomPanelViewContainerRegion";return this._currentViewContainerId&&e.regionName===t&&this._currentViewContainerId!==e.id&&this.cleanUpCurrentWidget(e),void(e.regionName===t&&(this._currentViewContainerId=e.id,this._hoistWidgetInViewContainer(e)))}return this.contextWidgetViewId&&e.id===this.contextWidgetViewId&&this.cleanUpCurrentWidget(e),this._hoistWidgetIfNeeded(e),!0},l.prototype.handleViewDeactivatedEvent=function(e){if(a.prototype.handleViewDeactivatedEvent.call(this,e),!(e instanceof o.ViewContainerView))return this.contextWidgetViewId&&e.id===this.contextWidgetViewId&&this.cleanUpCurrentWidget(),!0},l.prototype._hoistWidgetInViewContainer=function(e){var t=this;e.childRegions.forEach(function(e){return e.views.forEach(function(e){-1===e.root.className.indexOf("inactive")&&e.createWidgetView&&t._hoistWidgetIfNeeded(e)})})},l.prototype._hoistWidgetIfNeeded=function(e){if(e.createWidgetView){this.cleanUpCurrentWidget(e);var t=e.createWidgetView();this.contextWidgetViewId=e.id,this.contextWidgetViewRegionName=e.regionName,this.hoistedWidgetView=t,this.widgetViewModel.set(t.viewModel)}else this.hoistedWidgetView&&this.currentView&&this.contextWidgetViewRegionName===e.regionName&&this.cleanUpCurrentWidget(e)},l.prototype.cleanUpCurrentWidget=function(e){var t=this;this.hoistedWidgetView&&(this.app.viewManager.destroyView(this.hoistedWidgetView),this.hoistedWidgetView=null,this.widgetViewModel.set(null)),(!e||this.contextWidgetViewId&&e.id!==this.contextWidgetViewId)&&setTimeout(function(){t.contextWidgetViewId&&(t.contextWidgetViewId=null,t.contextWidgetViewRegionName=null)},300)},l);function l(){var e=null!==a&&a.apply(this,arguments)||this;return e.managedViewsOnly=!0,e.panelIsOpen=new n.Observable(!1),e.showingSmartBackButton=new n.Observable(!1),e.widgetViewModel=new n.Observable(null),e.maximizeDisabled=new n.Observable(!1),e.maximizeVisible=new n.Observable(!1),e}t.ShellPanelViewModel=s})},"url:/Mapping/modules/Shells/Components/DataFrameButtonView.html":t,"url:/Mapping/modules/Shells/Components/DataFrameResizeButtonView.html":i,"url:/Mapping/modules/Shells/Components/NavBarSmallView.html":n,"url:/Mapping/modules/Shells/Components/Navigation/NavButtonView.html":o,"url:/Mapping/modules/Shells/Components/Panels/ShellPanelView.html":a,"url:/Mapping/modules/Shells/DebugView.html":s,"url:/Mapping/modules/Shells/DesktopShellView.html":l,"url:/Mapping/modules/Shells/HandheldShellView.html":r,"url:/Mapping/modules/Shells/LargeShellView.html":d,"url:/Mapping/modules/Shells/PopupModalView.html":p,"url:/Mapping/modules/Shells/Small/SmallShellView.html":h}}),require(["geocortex/framework/resourceManager"],function(e){e.resourceManager.register("Mapping","inv","Mapping/modules/Shells/CSS/common.css","css","DQovKiBTSEVMTCAoQ09NTU9OKSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KLnNoZWxsLWNvbnRhaW5lcg0Kew0KICAgIGhlaWdodDogMTAwJTsNCn0NCg0KLnNoZWxsLWNvbnRhaW5lci1pbm5lcg0Kew0KICAgIGhlaWdodDogMTAwJTsNCn0NCg0KLlNoZWxsVmlldyB7DQogICAgaGVpZ2h0OiAxMDAlOw0KICAgIG92ZXJmbG93OiBoaWRkZW47DQp9DQoNCi5zaGVsbCANCnsNCiAgICBoZWlnaHQ6IDEwMCU7DQp9DQoNCi5ib3R0b20tcmVnaW9uLnJlZ2lvbi1hY3RpdmUgew0KICAgIG1pbi1oZWlnaHQ6IDc1cHg7DQp9DQoNCi8qIGlPUyA3IGZpeCBmb3IgaVBhZHMgaW4gbGFuZHNjYXBlIG1vZGUuIFRha2VuIGZyb20gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xOTAxMjEzNS9pb3MtNy1pcGFkLXNhZmFyaS1sYW5kc2NhcGUtaW5uZXJoZWlnaHQtb3V0ZXJoZWlnaHQtbGF5b3V0LWlzc3VlLiAqLw0KQG1lZGlhIChvcmllbnRhdGlvbjpsYW5kc2NhcGUpIHsNCiAgICBodG1sLmlwYWQuaW9zNyA+IGJvZHkgew0KICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgIGJvdHRvbTogMDsNCiAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgIGhlaWdodDogNjcycHggIWltcG9ydGFudDsNCiAgICB9DQp9DQoNCi8qIEJFR0lOIERBVEFGUkFNRSBUT0dHTEUgLS0tLS0tLS0tLS0tLS0tICovDQoNCi5yZWdpb24gLnZpZXcuRGF0YUZyYW1lQnV0dG9uVmlldyB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIHdpZHRoOiAzLjllbTsNCiAgICBoZWlnaHQ6IDMuOGVtOw0KICAgIG1hcmdpbjogMDsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgdG9wOiAwOw0KICAgIGxlZnQ6IDA7DQp9DQouZGF0YS1mcmFtZS1idXR0b24gew0KICAgIHdpZHRoOiAzLjllbTsNCiAgICBoZWlnaHQ6IDMuOGVtOw0KICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICBiYWNrZ3JvdW5kOiAjRkZGRkZGOw0KICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNEOUQ5RDk7DQogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNEOUQ5RDk7DQogICAgYm9yZGVyLWxlZnQ6IG5vbmU7DQogICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDAuMjVyZW07DQogICAgY3Vyc29yOiBwb2ludGVyOw0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB6LWluZGV4OiAyMDA7DQogICAgdG9wOiAwZW07DQogICAgbGVmdDogMGVtOw0KfQ0KLm5vLXRvdWNoIC5kYXRhLWZyYW1lLWJ1dHRvbiB7DQogICAgd2lkdGg6IDMuMTRlbTsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgaGVpZ2h0OiAzLjA1ZW07DQp9DQoubm8tdG91Y2ggLnJlZ2lvbiAudmlldy5EYXRhRnJhbWVCdXR0b25WaWV3IHsNCiAgICB3aWR0aDogMy4xNGVtOw0KICAgIGhlaWdodDogMy4wNWVtOw0KfQ0KLmRhdGEtZnJhbWUtYnV0dG9uOmhvdmVyIHsNCiAgICBib3JkZXItbGVmdDogMDsNCn0NCi5kYXRhLWZyYW1lLWJ1dHRvbi50YWItb3BlbiB7DQogICAgYmFja2dyb3VuZDogI0ZGRkZGRiB1cmwoIlJlc291cmNlcy9JbWFnZXMvSWNvbnMvY2hldnJvbi1sZWZ0LTI0LnBuZyIpIG5vLXJlcGVhdCBjZW50ZXIgY2VudGVyOw0KfQ0KDQouZGF0YS1mcmFtZS1idXR0b24udGFiLWNsb3NlZCB7DQogICAgYmFja2dyb3VuZDogI0ZGRkZGRiB1cmwoIlJlc291cmNlcy9JbWFnZXMvSWNvbnMvY2hldnJvbi1yaWdodC0yNC5wbmciKSBuby1yZXBlYXQgY2VudGVyIGNlbnRlcjsNCn0NCg0KLyogRU5EIERBVEFGUkFNRSBUT0dHTEUgLS0tLS0tLS0tLS0tLS0tLS0gKi8NCg0KLyogU1RBUlQgREFUQUZSQU1FIFJFU0laRSAtLS0tLS0tLS0tLS0tLS0tLSAqLw0KDQouZGF0YS1mcmFtZS1yZXNpemUucmVzaXplLWhhbmRsZSB7DQogICAgY3Vyc29yOiBldy1yZXNpemU7DQogICAgYm94LXNpemluZzogY29udGVudC1ib3g7DQp9DQouZGF0YS1mcmFtZS1yZXNpemUucmVzaXplLWhhbmRsZSwNCi5kYXRhLWZyYW1lLXJlc2l6ZS5yZXNpemUtaGFuZGxlIC5pY29uLWRyYWcgew0KICAgIHdpZHRoOiAxZW07DQogICAgaGVpZ2h0OiAyZW07DQp9DQoNCi5yZXNpemUtaGFuZGxlIC5pY29uLWRyYWcgew0KICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIGJhY2tncm91bmQtY29sb3I6ICNFRUVFRUU7DQogICAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyIGNlbnRlcjsNCiAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0Ow0KICAgIGJvcmRlcjogMXB4IHNvbGlkICNEOUQ5RDk7DQogICAgYm9yZGVyLXJhZGl1czogMC4yNXJlbTsNCiAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAwOw0KICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgcG9pbnRlci1ldmVudHM6IG5vbmU7DQp9DQoNCi5kYXRhLWZyYW1lLXJlc2l6ZS5yZXNpemUtaGFuZGxlIC5pY29uLWRyYWcgew0KICAgIGJvcmRlci1sZWZ0OiBub25lOw0KICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDA7DQogICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL2RyYWctaC0xNi5wbmciKTsNCn0NCg0KLnRvdWNoIC5kYXRhLWZyYW1lLXJlc2l6ZS5yZXNpemUtaGFuZGxlIHsNCiAgICBwYWRkaW5nOiAwLjc1ZW0gMi41ZW0gMC43NWVtIDA7DQp9DQoNCi8qIEVORCBEQVRBRlJBTUUgUkVTSVpFIC0tLS0tLS0tLS0tLS0tLS0tICovDQoNCg0KLmxhcmdlLXNoZWxsLWxlZnQsDQoubWVkaXVtLXNoZWxsLWxlZnQgew0KICAgIGJhY2tncm91bmQ6IHVybCgiUmVzb3VyY2VzL0ltYWdlcy9CYWNrZ3JvdW5kcy9tYXAtYmctdGV4dHVyZS5wbmciKTsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KfQ0KDQoubGFyZ2Utc2hlbGwtbGVmdC5wYW5lbC1jbG9zZWQsDQoubWVkaXVtLXNoZWxsLWxlZnQucGFuZWwtY2xvc2VkIHsNCiAgICBkaXNwbGF5OiBub25lOw0KfQ0KDQoucGFuZWwtc2lkZS1lbXB0eSB7DQogICAgcGFkZGluZzogMmVtOw0KICAgIGNvbG9yOiAjNjY2NjY2Ow0KfQ0KDQoucGFuZWwtZW1wdHktaGVhZGluZyB7DQogICAgZm9udC1zaXplOiAxLjI1ZW07DQogICAgZm9udC13ZWlnaHQ6IG5vcm1hbDsNCiAgICBsaW5lLWhlaWdodDogMWVtOw0KICAgIG1hcmdpbi1ib3R0b206IDFlbTsNCn0NCg0KLmljb24gew0KICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7DQp9DQo="),e.resourceManager.register("Mapping","inv","Mapping/modules/Shells/CSS/large.css","css","DQovKiBTSEVMTCAoTEFSR0UpIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KDQoubGFyZ2Utc2hlbGwtbWFpbiwNCi5sYXJnZS1zaGVsbC1sZWZ0LA0KLmxhcmdlLXNoZWxsLXJpZ2h0LA0KLmxhcmdlLXNoZWxsLWNlbnRlciB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIC8qei1pbmRleDogMDsqLw0KfQ0KLmxhcmdlLXNoZWxsLWxlZnQgew0KICAgIHotaW5kZXg6IDMwMDsgLyogUG9zaXRpb24gaXQgb3ZlciB0aGUgbWFwIGZvciB0aGUgcmVzaXphYmxlIHRhYiB0byBvdmVybGF5IHRoZSBtYXAuICovDQp9DQoNCi5sYXJnZS1zaGVsbC1oZWFkZXIgew0KICAgIHRvcDogMDsNCiAgICBsZWZ0OiAwOw0KICAgIHdpZHRoOiAxMDAlOw0KfQ0KDQoubGFyZ2Utc2hlbGwtZm9vdGVyIHsNCiAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgYm90dG9tOiAwOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIHotaW5kZXg6IDYwMDsNCn0NCg0KLmxhcmdlLXNoZWxsLWhlYWRlciwNCi5sYXJnZS1zaGVsbC1ib3R0b20gew0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQp9DQoNCi5sYXJnZS1zaGVsbC1sZWZ0IHsNCiAgICB0b3A6IDA7DQogICAgbGVmdDogMDsNCiAgICBib3R0b206IDA7DQogICAgbWFyZ2luLWxlZnQ6IC0xcHg7DQogICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI0Q5RDlEOTsNCiAgICBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KfQ0KDQoubGFyZ2Utc2hlbGwtbGVmdC5wYW5lbC1jbG9zZWQgew0KICAgIGRpc3BsYXk6IG5vbmU7DQp9DQoNCi5sYXJnZS1zaGVsbC1sZWZ0LnVpLXJlc2l6YWJsZS5wYW5lbC1jbG9zZWQgPiAucmVnaW9uLmRhdGEtcmVnaW9uIHsNCiAgICBkaXNwbGF5OiBub25lOw0KfQ0KDQoubGFyZ2Utc2hlbGwtYm90dG9tIHsNCiAgICBib3R0b206IDA7DQogICAgbGVmdDogMDsNCiAgICByaWdodDogMDsNCiAgICB6LWluZGV4OiAyMjA7DQogICAgbWF4LWhlaWdodDogMTAwLjIlOw0KICAgIGJhY2tncm91bmQ6ICNGRkZGRkY7DQp9DQoNCi5sYXJnZS1zaGVsbC1ib3R0b20udWktcmVzaXphYmxlLnBhbmVsLWNsb3NlZCBidXR0b24gew0KICAgIGRpc3BsYXk6IG5vbmU7DQp9DQoNCi5sYXJnZS1zaGVsbC1tYWluLA0KLmxhcmdlLXNoZWxsLWNlbnRlciB7DQogICAgdG9wOiAwOw0KICAgIHJpZ2h0OiAwOw0KICAgIGxlZnQ6IDA7DQogICAgYm90dG9tOiAwOw0KfQ0KDQouY29sbGFwc2UtdGFiIGEgew0KICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIHdpZHRoOiAzOXB4Ow0KICAgIGhlaWdodDogNDJweDsNCiAgICBtYXJnaW4tbGVmdDogLTFweDsNCiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0Q5RDlEOTsNCiAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjRDlEOUQ5Ow0KICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgI0Y1RjVGNTsNCiAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogM3B4Ow0KICAgIC1tb3otYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDNweDsNCiAgICAtd2Via2l0LWJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAzcHg7DQp9DQoNCi5jb2xsYXBzZS10YWIgYTpob3ZlciB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0ZGRkZGRjsNCn0NCg0KLnRhYi1vcGVuDQp7DQogICAgYmFja2dyb3VuZDogI0ZGRkZGRiB1cmwoIlJlc291cmNlcy9JbWFnZXMvSWNvbnMvY2hldnJvbi1sZWZ0LTE2LnBuZyIpIG5vLXJlcGVhdCBjZW50ZXIgY2VudGVyOw0KfQ0KDQoudGFiLWNsb3NlZA0Kew0KICAgIGJhY2tncm91bmQ6ICNGRkZGRkYgdXJsKCJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL2NoZXZyb24tcmlnaHQtMTYucG5nIikgbm8tcmVwZWF0IGNlbnRlciBjZW50ZXI7DQp9DQoNCi5zaGVsbC1jb250YWluZXItaW5uZXINCnsNCiAgICBoZWlnaHQ6IDEwMCU7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KDQovKiBBTEVSVCAoTEFSR0UpIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KDQoubW9kYWwtY29udGFpbmVyIC5hbGVydCwNCi5tb2RhbC1jb250YWluZXIgLmNvbmZpcm0sDQoubW9kYWwtY29udGFpbmVyIC5wcm9tcHQgew0KICAgIG1heC13aWR0aDogNDAwcHg7DQp9"),e.resourceManager.register("Mapping","inv","Mapping/modules/Shells/CSS/medium.css","css","DQovKiBTSEVMTCAoTUVESVVNKSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KLm1lZGl1bS1zaGVsbC1tYWluLA0KLm1lZGl1bS1zaGVsbC1sZWZ0LA0KLm1lZGl1bS1zaGVsbC1yaWdodCwNCi5tZWRpdW0tc2hlbGwtY2VudGVyIHsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQp9DQoubWVkaXVtLXNoZWxsLWxlZnQgew0KICAgIHotaW5kZXg6IDMwMDsgLyogUG9zaXRpb24gaXQgb3ZlciB0aGUgbWFwIGZvciB0aGUgcmVzaXphYmxlIHRhYiB0byBvdmVybGF5IHRoZSBtYXAuICovDQp9DQoNCi5tZWRpdW0tc2hlbGwtaGVhZGVyIHsNCgl0b3A6IDA7DQoJbGVmdDogMDsNCgl3aWR0aDogMTAwJTsNCn0NCg0KLm1lZGl1bS1zaGVsbC1mb290ZXIgew0KICAgIHBvc2l0aW9uOiBmaXhlZDsNCiAgICBib3R0b206IDA7DQogICAgd2lkdGg6IDEwMCU7DQp9DQoNCi5tZWRpdW0tc2hlbGwtaGVhZGVyLA0KLm1lZGl1bS1zaGVsbC1ib3R0b20gew0KCXBvc2l0aW9uOiBhYnNvbHV0ZTsNCglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQp9DQoNCi5tZWRpdW0tc2hlbGwtbGVmdCB7DQogICAgdG9wOiAwOw0KICAgIGxlZnQ6IDA7DQogICAgYm90dG9tOiAwOw0KICAgIG1hcmdpbi1sZWZ0OiAtMXB4Ow0KCWJvcmRlci1yaWdodDogMXB4IHNvbGlkICNEOUQ5RDk7ICANCiAgICBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDsNCn0NCg0KLm1lZGl1bS1zaGVsbC1sZWZ0LnVpLXJlc2l6YWJsZS5wYW5lbC1jbG9zZWQgPiAucmVnaW9uLmRhdGEtcmVnaW9uIHsNCiAgICBkaXNwbGF5OiBub25lOw0KfQ0KDQoNCi5tZWRpdW0tc2hlbGwtYm90dG9tIHsNCiAgICBib3R0b206IDA7DQogICAgbGVmdDogMDsNCiAgICByaWdodDogMDsNCiAgICB6LWluZGV4OiA2MDA7DQogICAgbWF4LWhlaWdodDogMTAwLjIlOw0KICAgIGJhY2tncm91bmQ6ICNGRkZGRkY7DQp9DQoNCi5tZWRpdW0tc2hlbGwtbWFpbiwNCi5tZWRpdW0tc2hlbGwtY2VudGVyIHsNCiAgICB0b3A6IDA7DQogICAgcmlnaHQ6IDA7DQogICAgbGVmdDogMDsNCiAgICBib3R0b206IDA7DQp9DQoNCi5tZWRpdW0tc2hlbGwtY2VudGVyIHsNCn0NCg0KLmNvbGxhcHNlLXRhYiBhIHsNCiAgICBkaXNwbGF5OiBibG9jazsNCiAgICB3aWR0aDogMzlweDsNCiAgICBoZWlnaHQ6IDQycHg7DQogICAgbWFyZ2luLWxlZnQ6IC0xcHg7DQogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNEOUQ5RDk7DQogICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI0Q5RDlEOTsNCiAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkICNGNUY1RjU7DQogICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDNweDsNCiAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogM3B4Ow0KICAgIC1tb3otYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDNweDsNCiAgICAtd2Via2l0LWJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAzcHg7DQogICAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiAjREVGMkZGOw0KfQ0KDQouY29sbGFwc2UtdGFiIGE6aG92ZXIgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkZGRkY7DQogICAgb3BhY2l0eTogMTsNCn0NCg0KLnRhYi1vcGVuDQp7DQogICAgYmFja2dyb3VuZDogI0ZGRkZGRiB1cmwoIlJlc291cmNlcy9JbWFnZXMvSWNvbnMvY2hldnJvbi1sZWZ0LTE2LnBuZyIpIG5vLXJlcGVhdCBjZW50ZXIgY2VudGVyOw0KfQ0KDQoudGFiLWNsb3NlZA0Kew0KICAgIGJhY2tncm91bmQ6ICNGRkZGRkYgdXJsKCJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL2NoZXZyb24tcmlnaHQtMTYucG5nIikgbm8tcmVwZWF0IGNlbnRlciBjZW50ZXI7DQp9DQoNCg0KLnNoZWxsLW1lZGl1bSANCnsNCiAgICBoZWlnaHQ6IDEwMCU7DQp9DQoNCi5zaGVsbC1jb250YWluZXItaW5uZXINCnsNCiAgICBoZWlnaHQ6IDEwMCU7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KDQoubWVkaXVtLXNoZWxsLWxlZnQgDQp7DQogICAgLW1zLXRvdWNoLWFjdGlvbjogbm9uZTsNCn0NCg0KLyogQUxFUlQgKE1FRElVTSkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQoNCi5tb2RhbC1jb250YWluZXIgLmFsZXJ0LA0KLm1vZGFsLWNvbnRhaW5lciAuY29uZmlybSwNCi5tb2RhbC1jb250YWluZXIgLnByb21wdCB7DQogICAgbWF4LXdpZHRoOiA0MDBweDsNCn0="),e.resourceManager.register("Mapping","inv","Mapping/modules/Shells/CSS/small.css","css","DQovKiBTSEVMTCAoU01BTEwpIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KDQouc2NyZWVuLXJlZ2lvbiB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KfQ0KDQoudG9vbC1yZWdpb24gew0KICAgIG92ZXJmbG93OiBoaWRkZW47DQp9DQoNCi5zaGVsbC1zbWFsbCANCnsNCiAgICBoZWlnaHQ6IDEwMCU7DQp9DQoNCi5zaGVsbC1jb250YWluZXItaW5uZXINCnsNCiAgICBoZWlnaHQ6IDEwMCU7DQp9DQo="),e.resourceManager.register("Mapping","inv","Mapping/modules/Shells/Components/DataFrameButtonView.html","html",t),e.resourceManager.register("Mapping","inv","Mapping/modules/Shells/Components/DataFrameResizeButtonView.html","html",i),e.resourceManager.register("Mapping","inv","Mapping/modules/Shells/Components/NavBarSmallView.html","html",n),e.resourceManager.register("Mapping","inv","Mapping/modules/Shells/Components/Navigation/NavButtonView.html","html",o),e.resourceManager.register("Mapping","inv","Mapping/modules/Shells/Components/Panels/ShellPanelView.html","html",a),e.resourceManager.register("Mapping","inv","Mapping/modules/Shells/DebugView.html","html",s),e.resourceManager.register("Mapping","inv","Mapping/modules/Shells/DesktopShellView.html","html",l),e.resourceManager.register("Mapping","inv","Mapping/modules/Shells/HandheldShellView.html","html",r),e.resourceManager.register("Mapping","inv","Mapping/modules/Shells/LargeShellView.html","html",d),e.resourceManager.register("Mapping","inv","Mapping/modules/Shells/PopupModalView.html","html",p),e.resourceManager.register("Mapping","inv","Mapping/modules/Shells/Small/SmallShellView.html","html",h)}),require({cache:{}}),define(["Mapping/modules/Shells/CommonShellView","Mapping/modules/Shells/CommonShellViewModel","Mapping/modules/Shells/HandheldShellView","Mapping/modules/Shells/LargeShellView","Mapping/modules/Shells/LargeShellViewModel","Mapping/modules/Shells/ShellModule","Mapping/modules/Shells/ShellState","Mapping/modules/Shells/Components/DataFrameButtonView","Mapping/modules/Shells/Components/DataFrameResizeButtonView","Mapping/modules/Shells/Components/NavBarSmallView","Mapping/modules/Shells/Small/SmallShellView","Mapping/modules/Shells/Small/SmallShellViewModel","Mapping/modules/Shells/Components/Navigation/NavButtonView","Mapping/modules/Shells/Components/Navigation/NavButtonViewModel","Mapping/modules/Shells/Components/Panels/ShellPanelView","Mapping/modules/Shells/Components/Panels/ShellPanelViewModel"],function(e,t,i,n,o,a,s,l,r,d,p,h,c,m,g,u){v(e,"geocortex.essentialsHtmlViewer.mapping.modules.shells.CommonShellView",e.CommonShellView),v(t,"geocortex.essentialsHtmlViewer.mapping.modules.shells.CommonShellViewModel",t.CommonShellViewModel),v(i,"geocortex.essentialsHtmlViewer.mapping.modules.shells.HandheldShellView",i.HandheldShellView),v(n,"geocortex.essentialsHtmlViewer.mapping.modules.shells.LargeShellView",n.LargeShellView),v(o,"geocortex.essentialsHtmlViewer.mapping.modules.shells.LargeShellViewModel",o.LargeShellViewModel),v(a,"geocortex.essentialsHtmlViewer.mapping.modules.shells.ShellModule",a.ShellModule),v(s,"geocortex.essentialsHtmlViewer.mapping.modules.shells.ProjectView",s.ProjectView),v(l,"geocortex.essentialsHtmlViewer.mapping.modules.shells.components.DataFrameButtonView",l.DataFrameButtonView),v(r,"geocortex.essentialsHtmlViewer.mapping.modules.shells.components.DataFrameResizeButtonView",r.DataFrameResizeButtonView),v(d,"geocortex.essentialsHtmlViewer.mapping.modules.shells.components.NavBarSmallView",d.NavBarSmallView),v(p,"geocortex.essentialsHtmlViewer.mapping.modules.shells.SmallShellView",p.SmallShellView),v(h,"geocortex.essentialsHtmlViewer.mapping.modules.shells.SmallShellViewModel",h.SmallShellViewModel),v(c,"geocortex.essentialsHtmlViewer.mapping.modules.shells.components.NavButtonView",c.NavButtonView),v(m,"geocortex.essentialsHtmlViewer.mapping.modules.shells.components.NavButtonViewModel",m.NavButtonViewModel),v(g,"geocortex.essentialsHtmlViewer.mapping.modules.shells.components.ShellPanelView",g.ShellPanelView),v(u,"geocortex.essentialsHtmlViewer.mapping.modules.shells.components.ShellPanelViewModel",u.ShellPanelViewModel)})}();