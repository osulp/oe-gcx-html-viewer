/*
	
	Copyright (c) 2015, Latitude Geographics Group Ltd.
	All rights reserved.
	       
	Redistribution is not permitted. 
	
	Use in binary form, without modification, is permitted provided that neither 
	the name of the organization nor the names of its contributors may be used 
	to endorse or promote products derived from this software without specific 
	prior written permission.
	       
	THIS SOFTWARE IS PROVIDED BY COPYRIGHT HOLDER ''AS IS'' AND ANY
	EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
	WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
	DISCLAIMED. IN NO EVENT SHALL LATITUDE GEOGRAPHICS GROUP LTD. BE LIABLE FOR ANY
	DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
	(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
	LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
	ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
	(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
	SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

var __extends=this.__extends||function(d,f){function e(){this.constructor=d}for(var i in f)f.hasOwnProperty(i)&&(d[i]=f[i]);e.prototype=f.prototype;d.prototype=new e},geocortex;
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(){e.apply(this,arguments);this.userInitiatedDA=false}__extends(b,e);b.prototype.attach=function(a){if(a){e.prototype.attach.call(this,a);if(this.viewModel.content.get()!==null)this._activateAccessibilityView();else var g=this.app.eventRegistry.event("AccessibilityIconContentInitializedEvent").subscribe(this,function(){this._activateAccessibilityView();this.app.eventRegistry.event("AccessibilityIconContentInitializedEvent").unsubscribe(g)});
if(this.okButtonElement)try{this.okButtonElement.focus()}catch(h){}if(!this.viewContainerViewClosedEventToken)this.viewContainerViewClosedEventToken=this.app.event("ViewContainerViewClosedEvent").subscribe(this,function(a){a&&a.viewId==this.id&&this._deactivateForUser()})}};b.prototype._canExecuteActivateAccessibilityView=function(){return this.viewModel.included.get()};b.prototype._executeActivateAccessibilityView=function(){this.app.commandRegistry.command("ActivateView").execute(this.id)};b.prototype._activateAccessibilityView=
function(){this.viewModel.included.get()&&this.title.set(this.viewModel.title.get());this.app.commandRegistry.command("ShowAccessibilityView").register(this,this._executeActivateAccessibilityView,this._canExecuteActivateAccessibilityView)};b.prototype.resolveWidget=function(a,g){e.prototype.resolveWidget.call(this,a,g);if(a==="GetHTMLContent"){var h=new d.essentialsHtmlViewer.mapping.infrastructure.FeatureDescriptionPresenterView(this.app,this.libraryId);h.app=this.app;h.libraryId=this.libraryId;
h.root=dojo.create("div");h.root.className="content";var b=h.cleansedFormatForFormat(g).replace(/{{.+?}}|{.+?}/g,function(a){if(a.match(/{{.+?}}/g))return a.substring(1,a.length-1)});h.root.innerHTML=b;h.attach(g);return h}};b.prototype.handleClickOk=function(){this._deactivateForUser();return false};b.prototype._deactivateForUser=function(){this.userInitiatedDA=true;this.app.viewManager.deactivateView(this);this.viewModel.callback&&this.userInitiatedDA&&this.viewModel.callback()};return b}(d.framework.ui.ViewBase);
e.AccessibilityIconView=f})(e.accessibility||(e.accessibility={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.included=new Observable(true);this.content=new Observable(null);this.title=new Observable(null)}__extends(b,d);b.prototype.initialize=function(a){a&&(a.hasOwnProperty("included")&&this.included.set(a.included),a.hasOwnProperty("title")&&this.title.set(a.title),a.hasOwnProperty("content")&&(this.content.set(decodeURIComponent(a.content)),this.app.eventRegistry.event("AccessibilityIconContentInitializedEvent").publish()))};
return b}(d.framework.ui.ViewModelBase);e.AccessibilityIconViewModel=f})(e.accessibility||(e.accessibility={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=window.HTMLElement||window.Element,j=function(b){function a(){b.apply(this,arguments);this._keyupHandle=this._keydownHandle=null;this._panning=false;this._viewsIgnoreAutoFocus="LoadingStatus,StatusIndicatorView,StatusMessageView,View-,ProviderView,geometryEditingStatus".split(",");this._modalContainerView=null}__extends(a,b);a.prototype.initialize=function(a){var h=this;b.prototype.initialize.call(this,a);a.keyboardFocusIndicatorEnabled&&
($(document).on("mousedown",function(){$(document.documentElement).hasClass("keyboard-focus-active")&&(h.app.trace.debug("Keyboard focus deactivated."),$(document.documentElement).removeClass("keyboard-focus-active"))}),$(document).on("keydown",function(a){a.keyCode==9&&$(document.documentElement).hasClass("keyboard-focus-active")===false&&(h.app.trace.debug("Keyboard focus active."),$(document.documentElement).addClass("keyboard-focus-active"))}));if(a.providers)for(var o=0;o<a.providers.length;o++){var d=
a.providers[o];if(d.isEnabled===false)return;var e=dojo.getObject(d.type);e&&(new e(this.app,d.libraryId||this.libraryId)).initialize(d)}a.expandedMapKeyboardAccessibility&&this.enableKeyboardNavigation();a.automaticElementFocusing&&this.enableAutomaticElementFocusing()};a.prototype.enableAutomaticElementFocusing=function(){var a=this;this.app.command("FocusOnFirstInputInView").register(this,function(a){e.infrastructure.FocusUtils&&setTimeout(function(){e.infrastructure.FocusUtils.focusOnFirstInput(a)},
0)});this.app.event("ViewActivatedEvent").subscribe(this,function(h){if(!a._modalContainerView){var b=a.app.viewManager.getRegionForViewId(h.id);if(b&&b.name==="ModalWindowPlaceholderRegion")a._modalContainerView=h}for(b=0;b<a._viewsIgnoreAutoFocus.length;b++)if(h.id.search(a._viewsIgnoreAutoFocus[b])!==-1)return;a.app.trace.debug("View focused: "+h.id);a.app.command("FocusOnFirstInputInView").execute(h)});var h=function(h){return a._interceptTabsWhileModalActive(h)};this.app.event("RegionActivatedEvent").subscribe(this,
function(a){if(a.name==="ModalWindowRegion")$(document).on("keydown",h)});this.app.event("RegionDeactivatedEvent").subscribe(this,function(a){a.name==="ModalWindowRegion"&&$(document).off("keydown",h)})};a.prototype._resetModalFocus=function(a){if(a&&a.root)try{var h=$(a.root).find(":visible:input, a:visible, button:visible").not(".bound-disabled, .disabled, [tabindex=-1]");h&&h.length>0&&e.infrastructure.FocusUtils.focus(h[0])}catch(b){this.app.trace.debug("Could not focus: "+b)}};a.prototype._interceptTabsWhileModalActive=
function(a){var h=a.keyCode||a.which;if(h===9||h===9&&a.shiftKey){var b=document.activeElement,d=$(this._modalContainerView.root).find(":focusable");d&&b===d[0]&&h===9&&a.shiftKey?a.preventDefault():b===d[d.length]&&h===9&&a.preventDefault();$(b).parents(".ModalViewContainerView").length===0&&(this._resetModalFocus(this._modalContainerView),a.preventDefault())}};a.prototype.enableKeyboardNavigation=function(){var a=this;this.disableKeyboardNavigation();if(this.app.map&&this.app.map.loaded)this._keydownHandle=
dojo.on(document,"keydown",function(h){return a._onKeyDownHandler(h)}),this._keyupHandle=dojo.on(document,"keyup",function(h){return a._onKeyUpHandler(h)});else this.app.event("MapLoadedEvent").once(this,function(){a._keydownHandle=dojo.on(document,"keydown",function(h){return a._onKeyDownHandler(h)});a._keyupHandle=dojo.on(document,"keyup",function(h){return a._onKeyUpHandler(h)})})};a.prototype.disableKeyboardNavigation=function(){this._keydownHandle&&this._keydownHandle.remove();this._keyupHandle&&
this._keyupHandle.remove();this._keydownHandle=this._keyupHandle=null;this._panning=false};a.prototype._onKeyDownHandler=function(a){var h=a.target||a.srcElement,b=null;if(h instanceof i)b=h.className;if(!(h!==this.app.map.root&&b!=="ovwHighlight")&&(h=this.app.map,h.navigationManager._keyHandle))this._panning=true,h.navigationManager._keyHandle.advice(a)};a.prototype._onKeyUpHandler=function(a){var h=a.target||a.srcElement,b=null;if(h instanceof i)b=h.className;if(!(h!==this.app.map.root&&b!=="ovwHighlight")&&
(h=this.app.map,h.navigationManager._keyEndHandle&&this._panning))this._panning=false,h.navigationManager._keyEndHandle.advice(a)};return a}(d.framework.application.ModuleBase);f.AccessibilityModule=j})(f.accessibility||(f.accessibility={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(j){function b(){j.apply(this,arguments);this.changedDescription=this.fullDescription="";this.decimalPrecision=4;this.readAttributionInformation=false;this._viewDelay=0;this._timeoutId=null;this._eventDelay=250;this._mapReadDelay=1250;this._previousScale=this._previousExtent=null;this._queryTaskCollection=[];this._identifyTaskCollection=[];this._lastIdentifyMap=this._lastQueryMap=null;this._completedIdentifies=this._completedQueries=
false}__extends(b,j);b.prototype.initialize=function(a){var g=this;j.prototype.initialize.call(this,a);a.decimalPrecision>=0&&a.decimalPrecision<10?this.decimalPrecision=a.decimalPrecision:this.app.trace.warning("MapTextProvider: decimalPrecision entered in config is out of range (0-9). Using default value of "+this.decimalPrecision+".");this.readAttributionInformation=a.readAttributionInformation;this.app.event("MapExtentChangedEvent").subscribe(this,this._delayMapDescriptionChanged);this.app.event("MapPanStartedEvent").subscribe(this,
function(){clearTimeout(g._timeoutId);g._timeoutId=null});if(this.app.map)this._handleMapLoadedEvent(this.app.map);else this.app.event("SiteServiceLayersLoadedEvent").once(this,this._handleMapLoadedEvent)};b.prototype._handleMapLoadedEvent=function(){var a=this;$(this.app.map.root).attr("aria-label",this.app.getResource(this.libraryId,"language-accessibility-map-focused"));$(this.app.map.root).attr("role","main");$(this.app.map.root).children(".container, .esriControlsBR").attr("aria-hidden","true");
$(this.app.map.root).focus(function(){clearTimeout(a._timeoutId);a._timeoutId=setTimeout(function(){a.app.command("ScreenReaderNarrate").execute(a.fullDescription)},a._mapReadDelay)});if(this.readAttributionInformation)$(this.app.map.attribution.listNode).on("DOMSubtreeModified",function(){a._delayMapDescriptionChanged(a.app.map.extent)})};b.prototype._delayMapDescriptionChanged=function(a){var g=this;clearTimeout(this._timeoutId);this._timeoutId=setTimeout(function(){g._timeoutId=null;g._handleMapDescriptionChanged(a)},
this._eventDelay)};b.prototype._handleMapDescriptionChanged=function(a){var g=this;setTimeout(function(){g.app.trace.debug("setTimeout() called for loadingChanges.");g.app.command("ScreenReaderNarrate").execute(g.app.getResource(g.libraryId,"language-accessibility-map-loading-changes"))},this._viewDelay);var h="",b=function(b){b.length===0&&(b=g.app.getResource(g.libraryId,"language-accessibility-map-none"));g.fullDescription="";g.fullDescription=h;g.fullDescription+=" "+g._getScaleDescription();
g.fullDescription+=" "+g.app.getResource(g.libraryId,"language-accessibility-map-visible-features").format(b);g.changedDescription="";if(g._previousExtent===null||a.getCenter()!=g._previousExtent.getCenter())g.changedDescription+=h;g._previousScale!=g.app.map.getScale()&&(g.changedDescription+=" "+g._getScaleDescription());g.changedDescription+=" "+g.app.getResource(g.libraryId,"language-accessibility-map-visible-features").format(b);g.readAttributionInformation&&(b=g._getAttributionInformation(),
g.fullDescription+=" "+b,g.changedDescription+=" "+b);setTimeout(function(){g.app.trace.debug("setTimeout() called for changedDescription.");g.app.command("ScreenReaderNarrate").execute(g.app.getResource(g.libraryId,"language-accessibility-map-changed-information").format(g.changedDescription))},g._viewDelay);$(g.app.map.root).attr("aria-label",g.app.getResource(g.libraryId,"language-accessibility-map-focused"));g._previousExtent=a;g._previousScale=g.app.map.getScale()};this._getCentreCoordinatesDescription(a,
function(d){h=d;g._setVisibleFeaturesDescription(a,b)})};b.prototype._getCentreCoordinatesDescription=function(a,g){var h=this,b="",d="",j=new esri.SpatialReference(102100);e.infrastructure.GeometryUtils.projectGeometry(a,j,function(a){a instanceof esri.geometry.Extent&&(b=h._getFormattedLatitudeString(a),d=h._getFormattedLongitudeString(a));g(h.app.getResource(h.libraryId,"language-accessibility-map-coordinates-introduction").format(b,d))},function(a){h.app.trace.info("Error encountered attempting to project geometry: "+
a);g(h.app.getResource(h.libraryId,"language-accessibility-map-coordinates-error"))},this.app)};b.prototype._getFormattedLatitudeString=function(a){var g="";return g=a.getCenter().getLatitude()>0?this.app.getResource(this.libraryId,"language-accessibility-map-coordinates-north").format(Math.abs(a.getCenter().getLatitude()).toFixed(this.decimalPrecision)):this.app.getResource(this.libraryId,"language-accessibility-map-coordinates-south").format(Math.abs(a.getCenter().getLatitude()).toFixed(this.decimalPrecision))};
b.prototype._getFormattedLongitudeString=function(a){var g="";return g=a.getCenter().getLongitude()<0?this.app.getResource(this.libraryId,"language-accessibility-map-coordinates-west").format(Math.abs(a.getCenter().getLongitude()).toFixed(this.decimalPrecision)):this.app.getResource(this.libraryId,"language-accessibility-map-coordinates-east").format(Math.abs(a.getCenter().getLongitude()).toFixed(this.decimalPrecision))};b.prototype._getScaleDescription=function(){return this.app.getResource(this.libraryId,
"language-accessibility-map-scale").format(this.app.map.getScale().toFixed(this.decimalPrecision))};b.prototype._setVisibleFeaturesDescription=function(a,g){for(var h="",b=this._getVisibleLayers(a),t=[],e=[],j=0;j<b.length;j++){var f=b[j];if(f.mapService.mapServiceFunction!==d.essentials.MapServiceFunction.BASE)if(f.mapService.serviceLayer instanceof esri.layers.GraphicsLayer){var k=this._countGraphicsInExtent(a,f.mapService.serviceLayer);k>0&&(h+=" "+this.app.getResource(this.libraryId,"language-accessibility-map-visible-feature-information").format(k,
f.name))}else if(f.mapService.serviceLayer instanceof esri.layers.KMLLayer){for(var i=f.mapService.serviceLayer.getLayers(),f=f.mapService.displayName,l=k=0;l<i.length;l++){var r=i[l];r.graphics&&r.visible&&r.isVisibleAtScale(this.app.map.getScale())&&(k+=this._countGraphicsInExtent(a,r))}k>0&&(h+=" "+this.app.getResource(this.libraryId,"language-accessibility-map-visible-feature-information").format(k,f))}else if(k=f.mapService.serviceLayer,!k.capabilities||!(k.capabilities.toLowerCase().indexOf("query")<
0&&k.capabilities.toLowerCase().indexOf("identify")<0))f.queryable&&f.supportsQuery?e.push(f):f.identifiable&&f.supportsIdentify&&$.inArray(f.mapService,t)===-1?t.push(f.mapService):$.inArray(f.mapService,t)!==-1&&this.app.trace.debug(f.name+" layer does not support identify or query. Not supported for screenreader.")}t.length===0?this._completedIdentifies=true:this._completedIdentifies=false;e.length===0?this._completedQueries=true:this._completedQueries=false;t.length===0&&e.length===0?g(h):(t.length>
0&&this._performIdentify(g,h,a,t),e.length>0&&this._performQueries(g,h,a,e))};b.prototype._countGraphicsInExtent=function(a,g){for(var h=0,b=0;b<g.graphics.length;b++){var d=g.graphics[b];a.intersects(d.geometry)&&d.visible&&h++}return h};b.prototype._performIdentify=function(a,g,h,b){var d=this,j={};this._identifyTaskCollection=[];for(var f=0;f<b.length;f++){for(var k=this._getVisibleLayers(h),i=[],l=0;l<k.length;l++){var p=k[l];p.mapService.url===b[f].url&&i.push(parseInt(p.id))}k=new esri.tasks.IdentifyParameters;
k.mapExtent=h;k.geometry=h;k.layerIds=i;k.layerOption=esri.tasks.IdentifyParameters.LAYER_OPTION_VISIBLE;k.returnGeometry=false;k.tolerance=0;k.height=$(this.app.map.root).height();k.width=$(this.app.map.root).width();this._identifyTaskCollection.push({identifyTask:new esri.tasks.IdentifyTask(e.infrastructure.taskUtils.getIdentifyTaskUrl(b[f])),identifyParameters:k})}var r=false;this._lastIdentifyMap=Promise.map(this._identifyTaskCollection,function(a){return(new Promise(function(g,h){a.identifyTask.execute(a.identifyParameters,
g,h)})).then(function(a){if(!r)for(var g=0;g<a.length;g++){var h=a[g];j[h.layerName]!==void 0?j[h.layerName]+=1:j[h.layerName]=1}}).caught(function(a){d.app.trace.info("Error performing identify on server for feature count in MapTextProvider: "+a)})},{concurrency:1}).then(function(){for(var h in j)j.hasOwnProperty(h)&&j[h]>0&&(g+=" "+d.app.getResource(d.libraryId,"language-accessibility-map-visible-feature-information").format(j[h],h));!r&&d._completedQueries&&a(g)}).cancellable().caught(Promise.CancellationError,
function(){r=true;d.app.trace.debug("Feature information retrieval for MapTextProvider cancelled.")}).caught(function(a){d.app.trace.info("Error retrieving MapTextProvider info: "+a)}).lastly(function(){d._completedIdentifies=true})};b.prototype._performQueries=function(a,g,h,b){var d=this,j=new esri.tasks.Query;j.geometry=esri.geometry.Polygon.fromExtent(h);j.returnGeometry=false;j.where="1=1";this._queryTaskCollection=[];this._lastQueryMap!=null&&this._lastQueryMap.cancel();for(h=0;h<b.length;h++){var f=
b[h],k=f.name;f.mapService.serviceLayer.url.split("?");this._queryTaskCollection.push({queryTask:new esri.tasks.QueryTask(e.infrastructure.taskUtils.getQueryTaskUrl(f)),layerName:k})}var i=false;this._lastQueryMap=Promise.map(this._queryTaskCollection,function(a){return i?void 0:(new Promise(function(g,h){a.queryTask.executeForCount(j,g,h)})).then(function(h){h>0&&(g+=" "+d.app.getResource(d.libraryId,"language-accessibility-map-visible-feature-information").format(h,a.layerName))}).caught(function(a){d.app.trace.info("Error querying server for feature count in MapTextProvider: "+
a)})},{concurrency:1}).then(function(){!i&&d._completedIdentifies&&a(g)}).cancellable().caught(Promise.CancellationError,function(){i=true;d.app.trace.debug("Feature information retrieval for MapTextProvider cancelled.")}).caught(function(a){d.app.trace.info("Error retrieving MapTextProvider info: "+a)}).lastly(function(){d._completedQueries=true})};b.prototype._getVisibleLayers=function(){for(var a=this.app.site.essentialsMap.allLayers(),g=[],h=0;h<a.length;h++){var b=a[h],d=e.infrastructure.gis.LayerInfo.fromGcxLayer(b);
d.getMaxScale()>this.app.map.getScale()||d.getMinScale()<this.app.map.getScale()||d.isVisible()&&d.subLayerIds.length===0&&g.push(b)}return g};b.prototype._getAttributionInformation=function(){for(var a="",g=$(this.app.map.attribution.listNode).children(),h=0;h<g.length;h++){var b=g[h];$(b).css("display")!=="none"&&(a+=b.textContent+" ")}return a};return b}(e.infrastructure.accessibility.AccessibilityProviderBase);f.MapTextProvider=i})(f.accessibility||(f.accessibility={}))})(e.modules||(e.modules=
{}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){var i=function(d){function b(){d.apply(this,arguments);this._notifications={};this._subviewNotifications={};this._message="";this._isDataFrameOpen=false;this._openViews=[];this._closedViews=[];this._dataFrameOpenViews=[];this._dataFrameClosedViews=[];this._currentDataFrameViewId="LayerListView";this._activeContainerViews=["LayerDataContainerView"];this.startTime=(new Date).getTime();this.timeDelay=250;this.newEventTime=null}__extends(b,
d);b.prototype.initialize=function(a){d.prototype.initialize.call(this,a);if(a.notifications)this._notifications=a.notifications;if(a.subviewNotifications)this._subviewNotifications=a.subviewNotifications;this._resetViewArrays();this.app.event("ViewActivatedEvent").subscribe(this,this._handleViewActivated);this.app.event("ViewDeactivatedEvent").subscribe(this,this._handleViewDeactivated);this.app.event("DataFrameOpenedEvent").subscribe(this,this._handleDataFrameOpened);this.app.event("DataFrameClosedEvent").subscribe(this,
this._handleDataFrameClosed);this.app.event("FlyoutActivated").subscribe(this,this._compactToolbarFlyoutActivated);this.app.event("FlyoutDeactivated").subscribe(this,this._compactToolbarFlyoutDeactivated)};b.prototype._handleViewActivated=function(a){var g=this.app.getResource(this.libraryId,"language-accessibility-map-open");this.app.trace.debug("View activated: "+a.id);this._notifications[a.id]!=null?(this._openViews.indexOf(a.id)>-1||this._openViews.push(a.id),this._handleView(a)):a.regionName==
"DataRegion"&&this._isDataFrameOpen?(this._activeContainerViews.indexOf(a.id)>-1||(this._activeContainerViews.push(a.id),this.app.trace.debug("Active container views: {0}".format(this._activeContainerViews.length.toString()))),this._handleDataRegionView(a,g)):this.app.trace.debug("No corresponding notification message for "+a.id)};b.prototype._handleViewDeactivated=function(a){this.app.getResource(this.libraryId,"language-accessibility-map-closed");this.app.trace.debug("View deactivated: "+a.id);
if(this._activeContainerViews.indexOf(a.id)>-1){if(this._activeContainerViews.splice(this._activeContainerViews.indexOf(a.id),1),this.app.trace.debug("Active container views: {0}".format(this._activeContainerViews.length.toString())),this._activeContainerViews.length==0)this._currentDataFrameViewId="PlaceholderView"}else this._notifications[a.id]!=null?(this._closedViews.indexOf(a.id)>-1||this._closedViews.push(a.id),this._handleView(a)):this._subviewNotifications[a.id]!=null&&this._isDataFrameOpen?
(this._dataFrameClosedViews.indexOf(a.id)>-1||this._dataFrameClosedViews.push(a.id),this._handleView(a)):this.app.trace.debug("No corresponding notification message for "+a.id)};b.prototype._handleView=function(){var a=this;this.newEventTime=(new Date).getTime();setTimeout(function(){if((new Date).getTime()-a.newEventTime>a.timeDelay&&a._arraysNotEmpty())a._composeMessage(),a.app.trace.debug("Message: {0}".format(a._message)),a.app.command("ScreenReaderNarrate").execute(a._message),a._message="",
a._resetViewArrays()},this.timeDelay)};b.prototype._arraysNotEmpty=function(){return this._openViews.length>0||this._closedViews.length>0||this._dataFrameOpenViews.length>0||this._dataFrameClosedViews.length>0};b.prototype._handleDataRegionView=function(a,g){var h="";if(a.id==this.app.getResource(this.libraryId,"language-accessibility-map-workflowlist-view"))h=a.id;else if(!a.viewModel||!a.viewModel.currentView)return;else h=a.viewModel.currentView.id;if(this._subviewNotifications[h]!=null)if(h==
this._currentDataFrameViewId){this.app.trace.debug("Active view = Current data frame view.");return}else g==this.app.getResource(this.libraryId,"language-accessibility-map-open")?(this._dataFrameOpenViews.indexOf(a.id)>-1||this._dataFrameOpenViews.push(h),this._currentDataFrameViewId!=null&&!(this._dataFrameClosedViews.indexOf(this._currentDataFrameViewId)>-1)&&this._dataFrameClosedViews.push(this._currentDataFrameViewId),this._currentDataFrameViewId=h):this._dataFrameClosedViews.indexOf(this._currentDataFrameViewId)>
-1||this._dataFrameClosedViews.push(h);this._handleView(a)};b.prototype._composeMessage=function(){if(!this._isDataFrameOpen)this._dataFrameOpenViews=[];this._addOpenViews();this._addDataFrameOpenViews();this._addClosedViews();this._addDataFrameClosedViews()};b.prototype._addOpenViews=function(){for(var a=this.app.getResource(this.libraryId,"language-accessibility-map-open"),g=0;g<this._openViews.length;g++)this._message+=this._notifications[this._openViews[g]].format(a)};b.prototype._addClosedViews=
function(){for(var a=this.app.getResource(this.libraryId,"language-accessibility-map-closed"),g=0;g<this._closedViews.length;g++)this._message+=this._notifications[this._closedViews[g]].format(a)};b.prototype._addDataFrameOpenViews=function(){for(var a=this.app.getResource(this.libraryId,"language-accessibility-map-open"),g=0;g<this._dataFrameOpenViews.length;g++)this._message+=this._subviewNotifications[this._dataFrameOpenViews[g]].format(a)};b.prototype._addDataFrameClosedViews=function(){for(var a=
this.app.getResource(this.libraryId,"language-accessibility-map-closed"),g=0;g<this._dataFrameClosedViews.length;g++)this._message+=this._subviewNotifications[this._dataFrameClosedViews[g]].format(a)};b.prototype._resetViewArrays=function(){this._openViews=[];this._closedViews=[];this._dataFrameOpenViews=[];this._dataFrameClosedViews=[]};b.prototype._handleDataFrameOpened=function(){var a=this.app.getResource(this.libraryId,"language-accessibility-map-data-frame-open"),g=this.app.getResource(this.libraryId,
"language-accessibility-map-open");a+=this._subviewNotifications[this._currentDataFrameViewId].format(g);this._isDataFrameOpen=true;this.app.trace.debug(a);this.app.command("ScreenReaderNarrate").execute(a)};b.prototype._handleDataFrameClosed=function(){var a=this.app.getResource(this.libraryId,"language-accessibility-map-data-frame-closed");this._isDataFrameOpen=false;this.app.trace.debug(a);this.app.command("ScreenReaderNarrate").execute(a)};b.prototype._compactToolbarFlyoutActivated=function(a){a.id===
this.app.getResource(this.libraryId,"language-accessibility-map-compact-toolbar-view")&&(this.app.trace.debug("View activated: "+a.id),this._openViews.push(a.id),this._handleView(a))};b.prototype._compactToolbarFlyoutDeactivated=function(a){a.id===this.app.getResource(this.libraryId,"language-accessibility-map-compact-toolbar-view")&&(this.app.trace.debug("View deactivated: "+a.id),this._closedViews.push(a.id),this._handleView(a))};return b}(d.infrastructure.accessibility.AccessibilityProviderBase);
f.ViewActivatorProvider=i})(f.accessibility||(f.accessibility={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.ariaLabelText=new Observable("")}__extends(b,d);b.prototype.initialize=function(a){var g=this;d.prototype.initialize.call(this,a);this.app.command("ScreenReaderNarrate").register(this,function(a){setTimeout(function(){g.app.trace.debug("screenReaderNarrate() called.");g.ariaLabelText.set(a)},0)})};return b}(d.framework.ui.ViewModelBase);e.AccessibilityViewModel=f})(e.accessibility||
(e.accessibility={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.handleOnClick=function(){this.app.command("ShowAccessibilityView").execute();return false};return b}(d.framework.ui.ViewBase);e.AccessibilityButtonView=f})(e.accessibility||(e.accessibility={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this._outstandingWorkCount=0;this._attachedVideoEventListeners=false}__extends(b,d);b.prototype.activated=function(){d.prototype.activated.call(this);(this._getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia)?Worker?(this._startJsqrcodeWorker(),this._startJobWorker(),this._startVideo()):this.app.trace.error(this.id+
" shown but web workers aren't available.  Barcode and QR code scanning won't work."):this.app.trace.error(this.id+" shown but getUserMedia isn't available.  Barcode and QR code scanning won't work.")};b.prototype.deactivated=function(){d.prototype.deactivated.call(this);this._stopVideo()};b.prototype._startJsqrcodeWorker=function(){var a=this;if(!this._jsqrcodeWorker)this.configuration.jsqrcodeSource?(this._jsqrcodeWorker=new Worker(this.configuration.jsqrcodeSource),this._jsqrcodeWorker.onmessage=
function(g){a._outstandingWorkCount--;g.data.success&&(a.app.command("DeactivateView").execute(a.id),a.app.event("_HtmlBarcodeScannerResult").publish({format:"QR",value:g.data.result}))},this._jsqrcodeWorker.onerror=function(g){a.app.trace.error("Error scanning barcode. "+g.message)}):this.app.trace.error(this.id+" shown but jsqrcodeSource is not configured.  QR code scanning won't work.")};b.prototype._startJobWorker=function(){var a=this;if(!this._jobWorker)this.configuration.jobDecoderWorkerSource?
(this._jobWorker=new Worker(this.configuration.jobDecoderWorkerSource),this._jobWorker.onmessage=function(g){typeof g.data.success==="boolean"&&a._outstandingWorkCount--;g.data.success===true&&g.data.result.length>0&&(a.app.command("DeactivateView").execute(a.id),a.app.event("_HtmlBarcodeScannerResult").publish({format:g.data.result[0].Format,value:g.data.result[0].Value}))},this._jobWorker.onerror=function(g){a.app.trace.error("Error scanning barcode. "+g.message)}):this.app.trace.error(this.id+
" shown but jobDecoderWorkerSource is not configured.  Barcode scanning won't work.")};b.prototype._startVideo=function(){var a=this;if(!this._attachedVideoEventListeners)this._attachVideoEventListeners(),this._attachedVideoEventListeners=true;this._lastSourceInfo?this._startVideoWithSourceInfo(this._lastSourceInfo):MediaStreamTrack&&MediaStreamTrack.getSources?MediaStreamTrack.getSources(function(g){g=g.filter(function(a){return a.kind==="video"});if(g.length===0)a._startVideoWithConstraints({video:true,
audio:false});else if(g.length===1)a._startVideoWithSourceInfo(g[0]);else{var h=g.filter(function(a){return a.facing==="environment"});h.length>0?a._startVideoWithSourceInfo(h[0]):(a._sourceInfos=g,a.viewModel.showSourceSwitcher.set(true),a._startVideoWithSourceInfo(g[0]))}}):this._startVideoWithConstraints({video:true,audio:false})};b.prototype._attachVideoEventListeners=function(){var a=this,g,h=0,b=function(){g||(g=setInterval(function(){if(a._outstandingWorkCount>0)h++,h%5===0&&a.app.trace.warning(a.id+
" skipped processing "+h+" frames in a row.");else{if(a._outstandingWorkCount<0)a.app.trace.error(a.id+" outstanding work count is negative. Work dispatching and results have gone out of sync."),a._outstandingWorkCount=0;h=0;a._scan()}},a.configuration.scanInterval||750))},d=function(){g&&(clearInterval(g),g=null)};this.videoElement.addEventListener("play",b);this.videoElement.addEventListener("playing",b);this.videoElement.addEventListener("abort",d);this.videoElement.addEventListener("ended",d);
this.videoElement.addEventListener("pause",d);this.videoElement.addEventListener("waiting",d)};b.prototype._startVideoWithSourceInfo=function(a){this._lastSourceInfo=a;this._startVideoWithConstraints({video:{optional:[{sourceId:a.id}]},audio:false})};b.prototype._startVideoWithConstraints=function(a){var g=this;this._stopVideo();this._getUserMedia.call(navigator,a,function(a){g._mediaStream=a;var b=window.URL||window.webkitURL;g.videoElement.src=b?b.createObjectURL(a):a;g.videoElement.play();g.videoElement.focus()},
function(a){g.app.trace.error("Error getting user media. "+a.message)})};b.prototype._stopVideo=function(){this.videoElement.pause();this.videoElement.src="";if(this._mediaStream)this._mediaStream.stop(),this._mediaStream=null};b.prototype._scan=function(){if(!this.videoElement.paused&&!this.videoElement.ended){if(!this._canvasContext)this._canvasContext=this.canvasElement.getContext("2d");this._canvasContext.drawImage(this.videoElement,0,0);var a=this.canvasElement.width,g=this.canvasElement.height,
h=this._canvasContext.getImageData(0,0,a,g);h&&(this._jsqrcodeWorker&&(this._jsqrcodeWorker.postMessage({imageData:h,width:a,height:g}),this._outstandingWorkCount++),this._jobWorker&&(this._jobWorker.postMessage({scan:h.data,scanWidth:a,scanHeight:g}),this._outstandingWorkCount++))}};b.prototype.handleKeyDown=function(a){(a.which?a.which:a.keyCode)===dojo.keys.ESCAPE&&this.app.command("DeactivateView").execute(this.id)};b.prototype.handleBackClick=function(){this.app.command("DeactivateView").execute(this.id)};
b.prototype.handleSwitchSource=function(){if(this._sourceInfos){var a=this._sourceInfos.indexOf(this._lastSourceInfo);this._startVideoWithSourceInfo(this._sourceInfos[a+1<this._sourceInfos.length?a+1:0])}else this.app.trace.error(this.id+" handleSwitchSource called but source switching is not available.")};return b}(d.framework.ui.ViewBase);e.BarcodeScannerView=f})(e.barcodescanner||(e.barcodescanner={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.showSourceSwitcher=new Observable(false)}__extends(b,d);return b}(d.framework.ui.ViewModelBase);e.BarcodeScannerViewModel=f})(e.barcodescanner||(e.barcodescanner={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(f){function b(a,g,h){f.call(this,a,g);this.displayName=new Observable;this.visible=new Observable;this.iconUri=new Observable;this.services=[];this.slider=null;this._serviceIds=[];this._visibilityChangeHandles=[];this._sliderVisibilityBindToken=null;this.DEFAULT_ICON="Resources/Images/Icons/basemap-24.png";this.iconUri.set(this.DEFAULT_ICON);h&&this.setServices(h)}__extends(b,f);b.prototype.setServices=function(a){var g=
this;if(a){this._visibilityChangeHandles.forEach(function(a){return a.remove()});this._visibilityChangeHandles=[];this.slider&&(this.slider.visible.unbind(this._sliderVisibilityBindToken),this.slider.destroy());this.services=[];this._serviceIds=[];this.slider=null;var h=[];a.forEach(function(a){g._serviceIds.push(a.mapService.id);a.mapService.baseMapGroup&&h.length===0?h.push(a):a.mapService.baseMapGroup&&a.mapService.baseMapGroup===h[0].mapService.baseMapGroup?h.push(a):g.services.push(a)});h.length>
1?(h.sort(function(a,g){return a.mapService.baseMapGroupIndex-g.mapService.baseMapGroupIndex}),this.slider=new e.BasemapSliderViewModel(this.app,h,!h[0].mapService.baseMapGroupIsMutuallyExclusive,this.libraryId),this._sliderVisibilityBindToken=this.slider.visible.bind(this,function(){return g.visible.set(g._calculateIsVisible())})):h.length==1&&this.services.push(h[0]);this.visible.set(this._calculateIsVisible());this.app.site.essentialsMap.mapServices.forEach(function(a){g._visibilityChangeHandles.push(a.serviceLayer.on("visibility-change",
function(){g.visible.set(g._calculateIsVisible())}))})}};b.prototype.setVisibility=function(a){var g=this;this.services.forEach(function(g){return g.setVisibility(a)});this.slider&&this.slider.setVisibility(a);this.app.site.essentialsMap.mapServices.filter(function(a){return a.mapServiceFunction===d.essentials.MapServiceFunction.BASE}).forEach(function(a){g.hasMapService(a)||a.setVisibility(false)})};b.prototype.hasMapService=function(a){return!a?false:this._serviceIds.some(function(g){return g===
a.id})};b.prototype.onDestroy=function(){f.prototype.onDestroy.call(this);this._visibilityChangeHandles.forEach(function(a){return a.remove()});this.slider&&(this.slider.visible.unbind(this._sliderVisibilityBindToken),this.slider.destroy())};b.prototype._calculateIsVisible=function(){var a=this,g=this.app.site.essentialsMap.mapServices.filter(function(a){return a.mapServiceFunction===d.essentials.MapServiceFunction.BASE}).every(function(g){return!g.isVisible()||a.hasMapService(g)}),g=g&&this.services.every(function(a){return a.isVisible()});
this.slider&&(g=g&&this.slider.visible.get());return g};return b}(d.framework.ui.ViewModelBase);e.BasemapViewModel=f})(e.basemap||(e.basemap={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,g,h,b){d.call(this,a,b);this.services=[];this.selectedIndex=new Observable;this.allowTransition=true;this.selectedLabel=new Observable("");this.minLabel=new Observable("");this.maxLabel=new Observable("");this.visible=new Observable(false);this._settingSelection=false;this._visibilityChangeHandles=[];this._opacityChangeHandles=[];this.allowTransition=typeof h==="undefined"?true:h;this.setMapServices(g)}
__extends(b,d);b.prototype.setMapServices=function(a){var g=this;if(!a||a.length<2)throw Error("A base map slider must contain at least two map services.");this._visibilityChangeHandles.forEach(function(a){return a.remove()});this._opacityChangeHandles.forEach(function(a){return a.remove()});this._visibilityChangeHandles=[];this._opacityChangeHandles=[];this.services=a;this.selectedIndex.set(a.length-1);for(a=0;a<this.services.length;a++){var h=this.services[a];h.isVisible&&this.selectedIndex.set(a);
h.mapService.serviceLayer&&(this._visibilityChangeHandles.push(h.mapService.serviceLayer.on("visibility-change",function(){return g._onChildVisibilityChange()})),this._opacityChangeHandles.push(h.mapService.serviceLayer.on("opacity-change",function(){return g._onChildVisibilityChange()})))}this._onChildVisibilityChange();this._refreshSelectedLabel();this.minLabel.set(this.services[0].displayName());this.maxLabel.set(this.services[this.services.length-1].displayName())};b.prototype.setVisibility=function(a){if(a){var g=
this.selectedIndex.get();if(g<0||g>=this.services.length)g=this.services.length-1;this.setSelection(g)}else this.services.forEach(function(a){return a.setVisibility(false)});this.visible.set(a)};b.prototype.setSelection=function(a){var g=this.services[Math.floor(a)];if(!g)throw Error("Base map index out of range.");this.allowTransition||(a=Math.floor(a));this._settingSelection=true;this.selectedIndex.set(a);this._refreshSelectedLabel();var h=this.services[Math.floor(a)+1],b=a-Math.floor(a),d=b&&h;
this.services.forEach(function(a){a===g?(a.setVisibility(true),a.mapService.setOpacity(1)):d&&a===h?(a.setVisibility(true),a.mapService.setOpacity(b)):(a.setVisibility(false),a.mapService.setOpacity(1))});this._settingSelection=false};b.prototype.onDestroy=function(){d.prototype.onDestroy.call(this);this._visibilityChangeHandles.forEach(function(a){return a.remove()});this._opacityChangeHandles.forEach(function(a){return a.remove()})};b.prototype._onChildVisibilityChange=function(){if(!this._settingSelection){var a=
[];this.services.forEach(function(g,h){g.mapService.serviceLayer.visible&&a.push(h)});a.length===1&&this.services[a[0]].mapService.opacity===1?(this.selectedIndex.set(a[0]),this.visible.set(true)):a.length===2&&this.allowTransition&&a[1]-a[0]===1&&this.services[a[0]].mapService.opacity==1&&this.services[a[1]].mapService.opacity<1?(this.selectedIndex.set(a[0]+this.services[a[1]].mapService.opacity),this.visible.set(true)):this.visible.set(false);this._refreshSelectedLabel()}};b.prototype._refreshSelectedLabel=
function(){this.selectedLabel.set(this.services[this.selectedIndex.get()-Math.floor(this.selectedIndex.get())<=0.5?Math.floor(this.selectedIndex.get()):Math.floor(this.selectedIndex.get())+1].displayName())};return b}(d.framework.ui.ViewModelBase);e.BasemapSliderViewModel=f})(e.basemap||(e.basemap={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){function d(b,a){this.relatedLayerListItem=this.mapService=null;if(!b)throw Error("Map service is required.");this.mapService=b;this.relatedLayerListItem=a}d.prototype.isVisible=function(){return this.mapService.isVisible()};d.prototype.displayName=function(){return this.mapService.shortDisplayName||this.mapService.displayName};d.prototype.setVisibility=function(b){this.relatedLayerListItem?this.relatedLayerListItem.setVisibility(b,
true):this.mapService.setVisibility(b)};return d}();d.BasemapServiceViewModel=e})(d.basemap||(d.basemap={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,g){var h=this;d.call(this,a,g);this._visibilityChangeTokens=[];this.hideIfNoBasemapsAvailable=false;this.visibleBasemaps=[];this.backArrowVisible=new Observable(false);this.backArrowEnabled=new Observable(false);this.forwardArrowVisible=new Observable(false);this.forwardArrowEnabled=new Observable(true);this.topArrowVisible=new Observable(false);this.topArrowEnabled=new Observable(false);this.bottomArrowVisible=
new Observable(false);this.bottomArrowEnabled=new Observable(true);this.multipleRows=new Observable(false);this.isExpanded=new Observable(false);this.sliderMinLabel=new Observable;this.sliderMaxLabel=new Observable;this.sliderSelectedLabel=new Observable;this.sliderIsExpanded=new Observable(true);this.sliderTicks=new ObservableCollection;this.basemaps=new ObservableCollection;this.layerThemes=new ObservableCollection;this.selectedBasemap=new Observable;this.selectedBasemapIconUri=new Observable;this.selectedLayerTheme=
new Observable;this.buttonHeight=this.buttonWidth=0;this.hasHorizontalControls=new Observable(false);this.hasVerticalControls=new Observable(false);this._basemapsAutoCreated=false;this.headerLabel=new Observable(a.getResource(g,"language-basemap-switcher-basemaps"));this.selectedBasemapIconUri.set("Resources/Images/Icons/basemap-24.png");this.selectedBasemap.bind(this,this._updateBasemapSwitcherButton);this.selectedLayerTheme.bind(this,function(){h._populateBaseMaps();h.layerList&&h._orderBaseMaps();
h._updateVisibleBasemaps()});this.app.command("SelectBaseMap").register(this,this._executeSelectBaseMap)}__extends(b,d);b.prototype.initialize=function(){var a=this;this.app.event("SiteInitializedEvent").once(this,function(){a._populateBaseMaps();a._populateLayerThemes();a._updateVisibleBasemaps()});this.app.event("LayerListInitializedEvent").once(this,function(g){a.layerList=g;a._orderBaseMaps()})};b.prototype._layerListInitialized=function(){this._populateBaseMaps();this._populateLayerThemes();
this._updateVisibleBasemaps()};b.prototype._orderBaseMaps=function(){var a=this,g=[];this.layerList.children.get().forEach(function(a){return g.push.apply(g,a.getSelfAndDescendants())});g=g.filter(function(a){return a.type===1&&a.mapService.serviceLayerFunction==="Base"&&a.inActiveTheme.get()});g.forEach(function(g){a.basemaps.get().forEach(function(a){a.services.forEach(function(a){if(g.mapService.id==a.mapService.id)a.relatedLayerListItem=g});a.slider&&a.slider.services.forEach(function(a){if(g.mapService.id==
a.mapService.id)a.relatedLayerListItem=g})})});if(this._basemapsAutoCreated){var h=[];h.push.apply(h,g.map(function(a){return a.mapService.id}));h.push.apply(h,this.app.site.essentialsMap.mapServices.map(function(a){return a.id}));var b=this.basemaps.get().slice(),d=function(a){return h.indexOf((a.slider&&a.slider.services?a.slider.services[0]:a.services[0]).mapService.id)};b.sort(function(a,g){return d(a)-d(g)});this.basemaps.set(b)}};b.prototype._populateBaseMaps=function(){var a=this;this._visibilityChangeTokens.forEach(function(a){return a.remove()});
this._visibilityChangeTokens=[];this.basemaps.get().forEach(function(a){return a.destroy()});this.basemaps.clear();var g=this.app.site.essentialsMap.mapServicesFilteredView||[],g=g.filter(function(a){return a.mapServiceFunction==="Base"}),h=g.map(function(a){return new e.BasemapServiceViewModel(a)});if(this.app.site&&this.app.site.essentialsMap&&this.app.site.essentialsMap.baseMaps&&this.app.site.essentialsMap.baseMaps.length)this.app.site.essentialsMap.baseMaps.forEach(function(g){var b=[];g.services.forEach(function(a){var g=
h.filter(function(g){return g.mapService===a.mapService})[0];g&&b.push(g)});if(b.length){var o=new e.BasemapViewModel(a.app,a.libraryId,b);o.displayName.set(g.displayName);g.iconUri&&o.iconUri.set(g.iconUri);a.basemaps.addItem(o);o.visible.bind(a,function(){return a._updateVisibleBasemaps()})}});else{this._basemapsAutoCreated=true;var b={};h.forEach(function(g){var d=g.mapService.iconUri,f=g.displayName(),j=[g];if(g.mapService.baseMapGroup){var i=g.mapService.baseMapGroup;if(b[i])return;f=i;b[i]=
true;h.forEach(function(a){a!==g&&a.mapService.baseMapGroup===i&&(j.push(a),d=d||a.mapService.iconUri)})}var l=new e.BasemapViewModel(a.app,a.libraryId,j);l.displayName.set(f);l.iconUri.set(d);a.basemaps.addItem(l);l.visible.bind(a,function(){return a._updateVisibleBasemaps()})})}(g=this.basemaps.getLength()<=1&&this.hideIfNoBasemapsAvailable)?(this.isExpanded.set(!g),this.app.command("DeactivateView").execute("BasemapSwitcherButtonView")):this.app.command("ActivateView").execute("BasemapSwitcherButtonView")};
b.prototype._populateLayerThemes=function(){var a=this;if(this.app.site&&this.app.site.essentialsMap&&this.app.site.essentialsMap.layerThemesInfo){var g=this.app.site.essentialsMap.layerThemesInfo;this.layerThemes.addItems(g.themes);g.activeTheme&&this.selectedLayerTheme.set(g.activeTheme);dojo.connect(g,"layerThemeChangedEvent",function(g){g.currTheme&&g.currTheme.displayName&&a.selectedLayerTheme.get()!==g.currTheme&&a.selectedLayerTheme.set(g.currTheme)})}};b.prototype._updateVisibleBasemaps=function(){this.visibleBasemaps=
[];for(var a=0;a<this.basemaps.length();a++){var g=this.basemaps.getAt(a);g.visible.get()&&this.visibleBasemaps.push(g)}a=null;this.visibleBasemaps.length==1&&(a=this.visibleBasemaps[0]);a!=this.selectedBasemap.get()&&this.selectedBasemap.set(a)};b.prototype._updateBasemapSwitcherButton=function(a){if(a&&a.slider!=null){this.sliderMinLabel.sync(a.slider.minLabel);this.sliderMaxLabel.sync(a.slider.maxLabel);this.sliderSelectedLabel.sync(a.slider.selectedLabel);this.sliderTicks.clear();for(var g=100/
(a.slider.services.length-1),h=0;h<100;h+=g)this.sliderTicks.addItem({position:h+"%"})}else this.sliderMinLabel.removeSync(),this.sliderMinLabel.set(""),this.sliderMaxLabel.removeSync(),this.sliderMaxLabel.set(""),this.sliderSelectedLabel.removeSync(),this.sliderSelectedLabel.set("");a&&a.visible.get()?(this.headerLabel.set(a.displayName.get()),this.selectedBasemapIconUri.set(a?a.iconUri.get():"Resources/Images/Icons/basemap-24.png")):(this.headerLabel.set(this.app.getResource(this.libraryId,"language-basemap-switcher-basemaps")),
this.selectedBasemapIconUri.set("Resources/Images/Icons/basemap-24.png"))};b.prototype._executeSelectBaseMap=function(a){if(a){for(var a=a.toString().toLowerCase(),g,h=0;h<this.basemaps.getLength();h++){var b=this.basemaps.getAt(h);if(b&&b.displayName.get()&&b.displayName.get().toLowerCase()===a){g=b;break}}g&&(g.setVisibility(true),this.selectedBasemap.set(g),this.app.eventRegistry.event("BaseMapSelected").publish(a))}};b.prototype._getActiveLayerTheme=function(){return this.app.site.essentialsMap.layerThemesInfo?
this.app.site.essentialsMap.layerThemesInfo.activeTheme:null};return b}(d.framework.ui.ViewModelBase);e.BasemapSwitcherViewModel=f})(e.basemap||(e.basemap={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.basemapSlider=new Observable;this.sliderLabelElement=this.sliderElement=null}__extends(b,d);b.prototype.attach=function(a){d.prototype.attach.call(this,a);a.selectedBasemap.bind(this,this._onSwitcherBasemapChanged)};b.prototype.added=function(a){d.prototype.added.call(this,a);this._setupJQuerySlider()};b.prototype.toggleExpanded=function(){this.viewModel.sliderIsExpanded.set(!this.viewModel.sliderIsExpanded.get())};
b.prototype._onSwitcherBasemapChanged=function(a){var g=this;this.basemapSlider.get()&&this.basemapSlider.get().selectedIndex.unbind(this.selectedIndexBindingToken);a&&a.slider&&a.slider.services.length>1?(this.isActive||this.app.viewManager.activateView(this),this.basemapSlider.set(a.slider),this.selectedIndexBindingToken=this.basemapSlider.get().selectedIndex.bind(this,function(){return g._updateSlider()}),this._updateSlider(),this._updateSelection(this.basemapSlider.get().selectedIndex.get())):
(!this.isActive||this.app.viewManager.deactivateView(this),this.basemapSlider.set(null))};b.prototype._setupJQuerySlider=function(){var a=this;$(function(){$(a.sliderElement).slider({animate:false,min:0,max:1,step:0.1,orientation:"horizontal",value:0,slide:function(g,h){return a._handleSliderValueChanged(g,h)}});$(".ui-slider-handle",a.sliderElement).unbind("keydown");$(".ui-slider-handle",a.sliderElement).keydown(function(g){if(a.basemapSlider.get()){var h=a.basemapSlider.get().allowTransition?0.1:
1,b=a.basemapSlider.get().selectedIndex.get(),d=null;switch(g.which){case 38:case 39:d=Math.min(a.basemapSlider.get().services.length-1,b+h);break;case 37:case 40:d=Math.max(0,b-h);break;case 33:d=Math.min(a.basemapSlider.get().services.length-1,Math.floor(b+1));break;case 34:d=Math.max(0,Math.ceil(b-1));break;case 36:d=0;break;case 35:d=a.basemapSlider.get().services.length-1}d!=null&&(a._updateSelection(d),g.preventDefault(),g.stopPropagation())}})})};b.prototype._handleSliderValueChanged=function(a,
g){g&&g.value!=void 0&&this._updateSelection(g.value)};b.prototype._updateSlider=function(){if(this.basemapSlider.get()){var a=$(this.sliderElement);a.slider("option","max",this.basemapSlider.get().services.length-1);a.slider("option","step",this.basemapSlider.get().allowTransition?0.1:1);a.slider("value",this.basemapSlider.get().selectedIndex.get());a=$(".ui-slider-handle",this.sliderElement);a.attr("aria-label",this.basemapSlider.get().selectedLabel.get());a.attr("title",this.getResource("language-basemap-slider-tooltip"));
a.text(this.getResource("language-basemap-slider-handle"))}};b.prototype._updateSelection=function(a){this.basemapSlider.get().setSelection(a);var a=$(this.sliderLabelElement).width(),g=$(this.sliderElement).width(),h=$(".ui-slider-handle",this.sliderElement).position().left-0.5*a,h=Math.max(-parseFloat($(this.sliderElement).css("marginLeft")),h),h=Math.min(g-a+parseFloat($(this.sliderElement).css("marginRight")),h);this.sliderLabelElement.style.left=h+"px"};return b}(d.framework.ui.ViewBase);e.BasemapSliderView=
f})(e.basemap||(e.basemap={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(d){d[d.Vertical=0]="Vertical";d[d.Horizontal=1]="Horizontal";d[d.None=2]="None"})(e.ExpandDirection||(e.ExpandDirection={}));(function(d){d[d.Back=0]="Back";d[d.Forward=1]="Forward";d[d.Top=2]="Top";d[d.Bottom=3]="Bottom"})(e.ScrollDirection||(e.ScrollDirection={}));var f=function(d){function b(){d.apply(this,arguments);this._collapsibleAreaHeight=this._collapsibleAreaWidth=null;this._numberOfColumnsMaximumLimit=this._numberOfRowsMaximumLimit=
5;this._numberOfColumnsMinimumLimit=this._numberOfRowsMinimumLimit=2;this._numberOfColumns=3;this._numberOfRows=1;this._numberOfDrawerItems=this._numberOfElementsBeforeCurrentWindow=this._numberOfElementsAfterCurrentWindow=this._adjustedNumberOfColumns=this._adjustedNumberOfRows=0}__extends(b,d);b.prototype.resolveWidget=function(a,g){d.prototype.resolveWidget.call(this,a,g);if(!a||a!=="basemapsList"||!g)return null;var h=this.app.viewManager.createView({markup:"Mapping/modules/Basemap/BasemapSwitcherView.html",
type:"geocortex.essentialsHtmlViewer.mapping.modules.basemap.BasemapSwitcherView",visible:true,libraryId:this.libraryId,app:this.app});h.attach(g);return h};b.prototype.attach=function(a){var g=this;d.prototype.attach.call(this,a);if(this.configuration&&this.configuration.hasOwnProperty("grid")&&this.configuration.grid.hasOwnProperty("numberOfRows")&&this.configuration.grid.hasOwnProperty("numberOfColumns"))this._numberOfRows=this.configuration.grid.numberOfRows,this._numberOfColumns=this.configuration.grid.numberOfColumns;
if(this.app.site&&this.app.site.isInitialized)this._numberOfDrawerItems=this.viewModel.basemaps.getLength(),this.viewModel.isExpanded.get()&&this._sizeDrawer();else this.app.event("SiteInitializedEvent").once(this,function(){g._numberOfDrawerItems=g.viewModel.basemaps.getLength();g.viewModel.isExpanded.get()&&g._sizeDrawer()});this.viewModel.selectedLayerTheme.bind(this,function(){g._numberOfDrawerItems=g.viewModel.basemaps.getLength();g.viewModel.isExpanded.get()&&(g._sizeDrawer(true),g.viewModel.basemaps.getLength()===
0&&g.viewModel.isExpanded.set(false))});this.app.command("ToggleBasemapsDrawer").register(this,function(){g.viewModel.isExpanded.set(!g.viewModel.isExpanded.get());g.viewModel.isExpanded.get()||g.viewModel.selectedBasemap.pulse();g.viewModel.isExpanded.get()&&g.app.command("DeactivateView").execute("BasemapSliderView");g._sizeDrawer(g.viewModel.isExpanded.get())});this.app.eventRegistry.event("BaseMapSelected").subscribe(this,function(){g.viewModel.isExpanded.set(false);g.app.command("ShowMap").execute()});
this.viewModel.isExpanded.bind(this,this._handleIsExpandedChanged)};b.prototype._handleIsExpandedChanged=function(a){var g=this;a?(this.app.event("FlyoutActivated").publish(this),a={view:this,onOtherInteracted:function(a){return g._onOtherInteracted(a)}},this.app.command("TapToDismiss").execute(a)):this.app.event("FlyoutDeactivated").publish(this)};b.prototype._onOtherInteracted=function(a){$(a.target).closest(".BasemapSwitcherButtonView").length===0&&this.viewModel.isExpanded.set(false)};b.prototype._adjustDrawerGrid=
function(){this._adjustedNumberOfRows=this._numberOfRows;this._adjustedNumberOfColumns=this._numberOfColumns;if(this._numberOfRows<=0)this._adjustedNumberOfRows=1;if(this._numberOfColumns<=0)this._adjustedNumberOfColumns=1;if(this._numberOfDrawerItems>1&&this._numberOfColumns<this._numberOfColumnsMinimumLimit&&this._numberOfRows<this._numberOfRowsMinimumLimit)this._adjustedNumberOfColumns=this._numberOfColumnsMinimumLimit;if(this._adjustedNumberOfColumns>this._numberOfColumnsMaximumLimit)this._adjustedNumberOfColumns=
this._numberOfColumnsMaximumLimit;if(this._adjustedNumberOfRows>this._numberOfRowsMaximumLimit)this._adjustedNumberOfRows=this._numberOfRowsMaximumLimit;var a=this._adjustedNumberOfColumns*this._adjustedNumberOfRows;a-=this._numberOfDrawerItems;if(a>0)for(;a>0;){var a=(this._adjustedNumberOfColumns-1)*this._adjustedNumberOfRows-this._numberOfDrawerItems,g=this._adjustedNumberOfColumns*(this._adjustedNumberOfRows-1)-this._numberOfDrawerItems;if(a<0&&g<0)return;a>=0&&g>=0?a<g?this._adjustedNumberOfColumns-=
1:this._adjustedNumberOfRows-=1:a<0&&g>=0?this._adjustedNumberOfRows-=1:a>=0&&g<0&&(this._adjustedNumberOfColumns-=1);a=this._adjustedNumberOfColumns*this._adjustedNumberOfRows;a-=this._numberOfDrawerItems}this._adjustedNumberOfRows>1?this.viewModel.multipleRows.set(true):this.viewModel.multipleRows.set(false)};b.prototype._getExpandDirection=function(a,g,h){if(a>h*g){if(g===h)return 1;if(g>h)return 0;if(h>g)return 1}return 2};b.prototype._sizeDrawer=function(a){this._adjustDrawerGrid();var g=$(this.forwardArrowElement).outerWidth(),
h=$(this.bottomArrowElement).outerHeight(),b=this._getExpandDirection(this._numberOfDrawerItems,this._adjustedNumberOfRows,this._adjustedNumberOfColumns);if(this._numberOfElementsBeforeCurrentWindow===0||a)this._numberOfElementsBeforeCurrentWindow=0,this._numberOfElementsAfterCurrentWindow=Math.ceil(this._numberOfDrawerItems/(b===0?this._adjustedNumberOfColumns:this._adjustedNumberOfRows))-(b===0?this._adjustedNumberOfRows:this._adjustedNumberOfColumns);var d=Math.ceil(this.viewModel.buttonWidth*
this._adjustedNumberOfColumns);b===1&&(d+=g*2);g=Math.ceil(this.viewModel.buttonHeight)*this._adjustedNumberOfRows;b===0&&(g+=h*2);this._initializeControllerElements(b,a);this._collapsibleAreaWidth=d;this._collapsibleAreaHeight=g;this._sizeDrawerContent(b)};b.prototype._sizeDrawerContent=function(a){$(this.collapsibleAreaElement).width(this._collapsibleAreaWidth);$(this.collapsibleAreaElement).height(this._collapsibleAreaHeight);$(this.drawerElement).width(this._collapsibleAreaWidth);$(this.drawerElement).height(this._collapsibleAreaHeight);
this._numberOfDrawerItems>this._adjustedNumberOfColumns*this._adjustedNumberOfRows?a===1?($(this.drawerContentElement).width(Math.ceil(Math.ceil(this._numberOfDrawerItems/this._adjustedNumberOfRows)*this.viewModel.buttonWidth+$(this.forwardArrowElement).outerWidth())),$(this.drawerContentElement).height(this._collapsibleAreaHeight)):a===0&&($(this.drawerContentElement).height(Math.ceil(Math.ceil(this._numberOfDrawerItems/this._adjustedNumberOfColumns)*this.viewModel.buttonHeight+$(this.bottomArrowElement).outerHeight())),
$(this.drawerContentElement).width(this._collapsibleAreaWidth)):($(this.drawerContentElement).width(this._collapsibleAreaWidth),$(this.drawerContentElement).height(this._collapsibleAreaHeight))};b.prototype._initializeControllerElements=function(a,g){a===2&&(this.viewModel.hasHorizontalControls.set(false),this.viewModel.hasVerticalControls.set(false),this.viewModel.backArrowVisible.set(false),this.viewModel.forwardArrowVisible.set(false),this.viewModel.bottomArrowVisible.set(false),this.viewModel.topArrowVisible.set(false));
a===1&&(this.viewModel.hasHorizontalControls.set(true),this.viewModel.hasVerticalControls.set(false),this.viewModel.backArrowVisible.set(true),this.viewModel.forwardArrowVisible.set(true),g&&(this.viewModel.backArrowEnabled.set(false),this.viewModel.forwardArrowEnabled.set(true),$(this.drawerElement).scrollLeft(0)));a===0&&(this.viewModel.hasVerticalControls.set(true),this.viewModel.hasHorizontalControls.set(false),this.viewModel.topArrowVisible.set(true),this.viewModel.bottomArrowVisible.set(true),
g&&(this.viewModel.topArrowEnabled.set(false),this.viewModel.bottomArrowEnabled.set(true),$(this.drawerElement).scrollTop(0)))};b.prototype._enableDisableScrollArrows=function(a,g){if(a===1){g===1?(this._numberOfElementsAfterCurrentWindow-=this._adjustedNumberOfColumns,this._numberOfElementsBeforeCurrentWindow+=this._adjustedNumberOfColumns):(this._numberOfElementsAfterCurrentWindow+=this._adjustedNumberOfColumns,this._numberOfElementsBeforeCurrentWindow-=this._adjustedNumberOfColumns);if(this._numberOfElementsAfterCurrentWindow<
0)this._numberOfElementsBeforeCurrentWindow+=this._numberOfElementsAfterCurrentWindow,this._numberOfElementsAfterCurrentWindow=0;this._numberOfElementsBeforeCurrentWindow>0?this.viewModel.backArrowEnabled.set(true):this.viewModel.backArrowEnabled.set(false);this._numberOfElementsAfterCurrentWindow>0?this.viewModel.forwardArrowEnabled.set(true):this.viewModel.forwardArrowEnabled.set(false)}else g===3?(this._numberOfElementsAfterCurrentWindow-=this._adjustedNumberOfRows,this._numberOfElementsBeforeCurrentWindow+=
this._adjustedNumberOfRows):(this._numberOfElementsAfterCurrentWindow+=this._adjustedNumberOfRows,this._numberOfElementsBeforeCurrentWindow-=this._adjustedNumberOfRows),this._numberOfElementsBeforeCurrentWindow>0?this.viewModel.topArrowEnabled.set(true):this.viewModel.topArrowEnabled.set(false),this._numberOfElementsAfterCurrentWindow>0?this.viewModel.bottomArrowEnabled.set(true):this.viewModel.bottomArrowEnabled.set(false)};b.prototype.handleScrollForward=function(){var a=$(this.drawerElement);a.scrollLeft(a.scrollLeft()+
$(this.drawerElement).width()-$(this.backArrowElement).width()*2);this._enableDisableScrollArrows(1,1);$(this.forwardArrowElement).blur()};b.prototype.handleScrollBack=function(){var a=$(this.drawerElement);a.scrollLeft(a.scrollLeft()-$(this.drawerElement).width()+$(this.forwardArrowElement).width()*2);this._enableDisableScrollArrows(1,0);$(this.backArrowElement).blur()};b.prototype.handleScrollTop=function(){var a=$(this.drawerElement);a.scrollTop(a.scrollTop()-$(this.drawerElement).height()+$(this.bottomArrowElement).height()*
2);this._enableDisableScrollArrows(0,2);$(this.topArrowElement).blur()};b.prototype.handleScrollBottom=function(){var a=$(this.drawerElement);a.scrollTop(a.scrollTop()+$(this.drawerElement).height()-$(this.topArrowElement).height()*2);this._enableDisableScrollArrows(0,3);$(this.bottomArrowElement).blur()};return b}(d.framework.ui.ViewBase);e.BasemapSwitcherViewControllerView=f})(e.basemap||(e.basemap={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.framework.ui.ViewBase);e.BasemapView=f})(e.basemap||(e.basemap={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(f){function b(){f.apply(this,arguments);this.targetCommandSettings={};this._bufferWkid=-1;this._bufferSpatialReference=null;this._geodesic=true;this._extentExpansionFactor=1.25;this._statusMsgTimers={};this.DEFAULT_NUM_FEATURES_WARNING_THRESHOLD=250;this.BUFFERING_STATUS_DISPLAY_DELAY=300}__extends(b,f);b.prototype.initialize=function(a){f.prototype.initialize.call(this,a);this._bufferWkid=a&&a.bufferProjectionWkid&&a.bufferProjectionWkid!=
""?parseInt(a.bufferProjectionWkid,10):-1;this._geodesic=a.geodesic!=void 0?!!a.geodesic:this._bufferWkid===-1?true:false;if(this._bufferWkid!==-1)this._bufferSpatialReference=new esri.SpatialReference(this._bufferWkid);this._bufferLayerId=a.bufferLayerName?a.bufferLayerName:"Buffering";this._lineColor=a.lineColor?new esri.Color(a.lineColor):new esri.Color("#cf4c40");this._fillColor=a.fillColor?new esri.Color(a.fillColor):new esri.Color("#cf4c40");this._numFeaturesWarningThreshold=a.numFeaturesWarningThreshold!=
void 0?parseInt(a.numFeaturesWarningThreshold,10):this.DEFAULT_NUM_FEATURES_WARNING_THRESHOLD;if(this.app.map&&this.app.map.loaded)this.onMapLoaded();else this.app.event("MapLoadedEvent").once(this,this.onMapLoaded)};b.prototype.registerCommands=function(){this.app.command("ActivateBuffering").register(this,this.executeActivateBuffering);this.app.command("DeactivateBuffering").register(this,this.executeDeactivateBuffering);this.app.command("BufferGeometry").register(this,this.executeBufferGeometry,
this.canExecuteBufferGeometry);this.app.command("IdentifyBufferedGeometry").register(this,this.executeIdentifyBufferedGeometry,this.canExecuteIdentifyBufferedGeometry);this.app.command("IdentifyBufferedFeature").register(this,this.executeIdentifyBufferedFeature,this.canExecuteIdentifyBufferedFeature);this.app.command("IdentifyBufferedFeatureSet").register(this,this.executeIdentifyBufferedFeatureSet,this.canExecuteIdentifyBufferedFeatureSet);this.app.command("IdentifyBufferedFeatureSetCollection").register(this,
this.executeIdentifyBufferedFeatureSetCollection,this.canExecuteIdentifyBufferedFeatureSetCollection)};b.prototype.subscribeEvents=function(){this.app.event("BufferDistanceChangedEvent").subscribe(this,this.handleBufferDistanceChangedEvent)};b.prototype.onMapLoaded=function(){this.registerCommands();this.subscribeEvents();var a=this.app.map.spatialReference;this._geodesic=a.wkid!=void 0&&e.infrastructure.buffer.BufferUtils.isGeographicWkid(a.wkid)?true:this._geodesic;if(!this._bufferSpatialReference)this._bufferSpatialReference=
a};b.prototype.executeActivateBuffering=function(a){this._setCmdBufferStatusAndRaiseEvent(a,true)};b.prototype.executeDeactivateBuffering=function(a){this._setCmdBufferStatusAndRaiseEvent(a,false)};b.prototype.handleBufferDistanceChangedEvent=function(a){if(a&&a.targetCommands)for(var g=0;g<a.targetCommands.length;g++){var h=a.targetCommands[g],b=this.targetCommandSettings[h];b?(b.bufferDistance=a.distance,b.bufferUnit=a.unit.config):b=this._createEntryForTargetCommand(h,a.distance,a.unit.config);
this._updateTargetCommandToolStatusMessages(h,b)}};b.prototype.executeBufferGeometry=function(a){var g=this;if(this._performBufferOperation(a)){var h=a.bufferId==void 0?d.framework.utils.alphaNumericToken():a.bufferId;this._addBufferingStatusMsg(h);e.infrastructure.buffer.BufferUtils.bufferGeometry(this.app,a).then(function(b){g._processBufferResults(b,a);g._removeBufferingStatusMsg(h)},function(b){g._reportBufferingError(b,a.errback);g._removeBufferingStatusMsg(h)})}};b.prototype.executeBufferGeometries=
function(a){var g=this;if(this._performBufferOperation(a)){var h=function(){var h=a.bufferId==void 0?d.framework.utils.alphaNumericToken():a.bufferId;g._addBufferingStatusMsg(h);e.infrastructure.buffer.BufferUtils.bufferGeometries(g.app,a).then(function(b){g._processBufferResults(b,a);g._removeBufferingStatusMsg(h)},function(b){g._reportBufferingError(b,a.errback);g._removeBufferingStatusMsg(h)})};a.geometries.length>this._numFeaturesWarningThreshold?this.app.command("Confirm").execute(this.app.getResource(this.libraryId,
"language-buffer-excess-features-warning").format(a.geometries.length),null,function(a){a&&h()}):h()}};b.prototype.canExecuteBufferGeometry=function(a){return!!a.geometry&&e.infrastructure.GeometryUtils.isValidGeometry(a.geometry)&&(a.bufferUnit&&a.bufferDistance!=null&&!isNaN(Number(a.bufferDistance))||!!a.sourceCommand)};b.prototype.executeIdentifyBufferedGeometry=function(a){a&&this._showBufferOptionsAndExecuteBufferGeometry("IdentifyBufferedGeometry",a)};b.prototype.canExecuteIdentifyBufferedGeometry=
function(a){return!!a&&e.infrastructure.GeometryUtils.isValidGeometry(a)};b.prototype.executeIdentifyBufferedFeature=function(a){(a=a instanceof esri.Graphic?a.geometry:a&&a.esriFeature.get()?a.esriFeature.get().geometry:null)&&this._showBufferOptionsAndExecuteBufferGeometry("IdentifyBufferedFeature",a)};b.prototype.canExecuteIdentifyBufferedFeature=function(a){var g=null;if(a&&a instanceof esri.Graphic)g=a.geometry;else if(a&&a instanceof e.infrastructure.Feature&&a.esriFeature&&a.esriFeature.get())g=
a.esriFeature.get().geometry;return!!g&&e.infrastructure.GeometryUtils.isValidGeometry(g)};b.prototype.executeIdentifyBufferedFeatureSet=function(a){var g=null;typeof a==="string"&&(a=this.app.featureSetManager.getCollectionById(a));a instanceof e.infrastructure.FeatureSetCollection&&(g=a.featureSets.get().filter(function(a){return a.isSelectedInCollection.get()})[0]||a.featureSets.get()[0]||null);a instanceof e.infrastructure.FeatureSet&&(g=a);g?(a=this._retrieveGeometries(g),a.length&&this._showBufferOptionsAndExecuteBufferGeometries("IdentifyBufferedFeatureSet",
a)):this._reportBufferingError(this._generateErrorObjFromString(this.app.getResource(this.libraryId,"language-buffer-error-identify-buffered-feature-set"),"IdentifyBufferedFeatureSet"))};b.prototype.canExecuteIdentifyBufferedFeatureSet=function(a){return a&&typeof a==="string"?!!this.app.featureSetManager.getCollectionById(a):!!a};b.prototype.executeIdentifyBufferedFeatureSetCollection=function(a){(a=typeof a==="string"?this.app.featureSetManager.getCollectionById(a):a)?(a=this._retrieveGeometries(a),
a.length&&this._showBufferOptionsAndExecuteBufferGeometries("IdentifyBufferedFeatureSetCollection",a)):this._reportBufferingError(this._generateErrorObjFromString(this.app.getResource(this.libraryId,"language-buffer-error-identify-buffered-feature-set-collection"),"IdentifyBufferedFeatureSetCollection"))};b.prototype.canExecuteIdentifyBufferedFeatureSetCollection=function(a){return a&&typeof a==="string"?!!this.app.featureSetManager.getCollectionById(a):!!a};b.prototype._createEntryForTargetCommand=
function(a,g,h,b){if(a&&!this.targetCommandSettings[a]){var d={};d.isActive=!!b;d.bufferDistance=g||null;d.bufferUnit=h||null;return this.targetCommandSettings[a]=d}};b.prototype._performBufferOperation=function(a){if(this._processBufferArgs(a))return true;else{var g=this.targetCommandSettings[a.sourceCommand];if(!g||g&&!g.isActive)return g={},g.bufferId=a.bufferId,g.sourceCommand=a.sourceCommand,g.geometry=a.geometry,g.geometries=a.geometries,a.callback(g),false;this._reportBufferingError(this._generateErrorObjFromString(this.app.getResource(this.libraryId,
"language-buffer-error-process-args"),a.sourceCommand,a.bufferId),a.errback)}};b.prototype._processBufferArgs=function(a){a.bufferSpatialReference=a.bufferSpatialReference||this._bufferSpatialReference;a.outSpatialReference=this.app.map.spatialReference;a.geodesic=a.geodesic!=void 0?a.geodesic:this._geodesic;a.bufferId=a.bufferId==void 0?d.framework.utils.alphaNumericToken():a.bufferId;if((a.bufferDistance==void 0||a.bufferUnit==void 0)&&a.sourceCommand){var g=this.targetCommandSettings[a.sourceCommand];
if(g&&g.isActive&&g.bufferDistance!=void 0&&g.bufferUnit)a.bufferDistance=g.bufferDistance,a.bufferUnit=g.bufferUnit;if(g&&g.isActive&&(g.bufferDistance==void 0||g.bufferUnit==void 0))return false}return a.bufferDistance==void 0||a.bufferUnit==void 0?false:true};b.prototype._processBufferResults=function(a,g){var h=this,b=a.geometry||a.geometries,d=function(b){if(b.type!=="point"){var o=b.getExtent().expand(h._extentExpansionFactor);h.app.map.extent.contains(o)||h.app.command("ZoomToExtent").execute(o)}var d=
h._addGeometryMarkup(b);$(document.body).one("mouseup touchend keydown",function(){return h._removeGeometryMarkup(d)});g.callback&&dojo.isFunction(g.callback)&&g.callback(a);h.app.event("BufferingCompletedEvent").publish(a)};dojo.isArray(b)?b.length<1?this._reportBufferingError(this._generateErrorObjFromString(this.app.getResource(this.libraryId,"language-buffer-error-invalid-results"),g.sourceCommand,g.bufferId),g.errback):b.length===1?d(b[0]):e.infrastructure.GeometryUtils.unionGeometries(b).then(function(g){a.geometry=
g;d(g)},function(){h._reportBufferingError(h._generateErrorObjFromString(h.app.getResource(h.libraryId,"language-buffer-error-union-operation"),g.sourceCommand,g.bufferId),g.errback)}):d(b)};b.prototype._setCmdBufferStatusAndRaiseEvent=function(a,g){var h=this,b=function(a){var b=h.targetCommandSettings[a];b?b.isActive=g:b=h._createEntryForTargetCommand(a,null,null,true);h._updateTargetCommandToolStatusMessages(a,b)};if(typeof a==="string")b(a);else if(a.length)a.forEach(function(a){return b(a)});
else return;g?this.app.event("BufferingActivatedEvent").publish(a):this.app.event("BufferingDeactivatedEvent").publish(a)};b.prototype._retrieveGeometries=function(a){var g=[],h=[];a instanceof e.infrastructure.FeatureSet&&h.push(a);a instanceof e.infrastructure.FeatureSetCollection&&(h=a.featureSets.get());for(a=0;a<h.length;a++)for(var b=h[a],d=0;d<b.features.length();d++){var f=b.features.getAt(d);(f=f.esriFeature.get()?f.esriFeature.get().geometry:null)&&e.infrastructure.GeometryUtils.isValidGeometry(f)&&
g.push(f)}return g};b.prototype._showBufferOptionsAndExecuteBufferGeometry=function(a,g){this._showBufferOptionsAndExecuteBufferGeometries(a,[g])};b.prototype._showBufferOptionsAndExecuteBufferGeometries=function(a,g){var h=this,b={targetCommand:a,delegateFunction:function(){var b={};b.geometries=g;b.callback=function(a){return h._performIdentifyForGeometry(a,true)};b.sourceCommand=a;b.unionResults=true;h.executeActivateBuffering(a);h.executeBufferGeometries(b);h.app.command("DeactivateBufferingAndDismissOptions").execute(a)}};
this.app.command("DisplayBufferOptions").execute(b)};b.prototype._performIdentifyForGeometry=function(a,g){var h=this;g===void 0&&(g=false);var b=a.geometry||(a.geometries&&a.geometries.length===1?a.geometries[0]:null);if(b){var e={};e.geometry=b;e.source="Identify";e.layerRestriction=function(a){return a.identifiable};e.doNotBuffer=g;d.framework.ui.animation.runWhenIdle(function(){h.app.command("Identify").execute(e)})}};b.prototype._generateErrorObjFromString=function(a,g,h){var b={};b.sourceCommand=
g;b.error=Error(a);if(h!=void 0)b.bufferId=h;return b};b.prototype._reportBufferingError=function(a,g){this.app.event("BufferingErrorEvent").publish(a);g&&dojo.isFunction(g)&&g(a)};b.prototype._updateTargetCommandToolStatusMessages=function(a,g){var h=this,b=this._getToolsByCommand(a);if(b&&b.length){var d=function(a){a.isActive&&h.app.command("UpdateStatus").execute(a.statusText)},f=function(a){if(a.originalStatusText)a.statusText=a.originalStatusText,delete a.originalStatusText,d(a)};b.forEach(function(a){if(g.isActive)if(g.bufferDistance!=
null&&g.bufferUnit){if(!a.originalStatusText)a.originalStatusText=a.statusText;var b=e.infrastructure.buffer.BufferUtils.getUnitDescFromConfig(g.bufferUnit).displayName,b=h.app.getResource(h.libraryId,"language-buffer-active-tool-addon-message").format(g.bufferDistance,b);a.statusText="{0} {1}".format(a.originalStatusText,b);d(a)}else f(a);else f(a)})}};b.prototype._getToolsByCommand=function(a){var g=[],h=this.app.toolRegistry.tools,b;for(b in h){if(!h.hasOwnProperty(b))return;var d=h[b];d.command===
a&&g.push(d)}return g};b.prototype._addGeometryMarkup=function(a){var g=new esri.Graphic;g.setGeometry(a);g.geometry.type==="polygon"||g.geometry.type==="extent"?(a=e.infrastructure.SymbolUtils.defaultFillSymbol(),a.setColor(this._fillColor),a.color.a=0.3,a.outline.setColor(this._lineColor)):(a=g.geometry.type==="polyline"?e.infrastructure.SymbolUtils.defaultLineSymbol():e.infrastructure.SymbolUtils.defaultMarkerSymbol(),a.setColor(this._lineColor));g.setSymbol(a);e.infrastructure.GraphicUtils.addGraphicToLayer(g,
this._bufferLayerId,this.app);return g};b.prototype._removeGeometryMarkup=function(a){var g=this.app.map.getLayer(this._bufferLayerId);g&&a&&g.remove(a)};b.prototype._addBufferingStatusMsg=function(a){if(a){var g=setTimeout(dojo.hitch(this,function(){var g=this.app.getResource(this.libraryId,"language-buffer-status-msg"),g=new d.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs(g);g.id=a;g.showBusyIcon=true;g.timeoutMS=0;this.app.command("AddStatus").execute(g)}),this.BUFFERING_STATUS_DISPLAY_DELAY);
this._statusMsgTimers[a]=g}};b.prototype._removeBufferingStatusMsg=function(a){if(a){var g=this._statusMsgTimers[a];g&&(clearTimeout(g),this.app.command("RemoveStatus").execute(a),delete this._statusMsgTimers[a])}};return b}(d.framework.application.ModuleBase);f.BufferModule=i})(f.buffer||(f.buffer={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(d){function b(a,g){d.call(this,a,g);this.childViewModels=[];this.bufferUnits=new ObservableCollection([]);this._getSupportedBufferUnitLanguageResources()}__extends(b,d);b.prototype.initialize=function(a){d.prototype.initialize.call(this,a);this._setBufferUnits(a.bufferUnits);this._setDefaultBufferUnit(a.defaultBufferUnit);this.DEFAULT_BUFFER_DISTANCE=isNaN(parseInt(a.defaultBufferDistance,10))?0:parseInt(a.defaultBufferDistance,
10);!this.bufferUnits.length()||!this.DEFAULT_BUFFER_UNIT?this.app.trace.error(this.app.getResource(this.libraryId,"language-buffer-config-units-error")):this.subscribeEvents()};b.prototype.subscribeEvents=function(){this.app.event("BufferingErrorEvent").subscribe(this,this.handleBufferingErrorEvent)};b.prototype.registerView=function(a,g){if(!a||!g||!g.length)return false;if(this.childViewModels.filter(function(g){return g.viewId===a}).length)return false;var h={};h.viewId=a;h.bufferUnits=this.bufferUnits;
h.targetCommands=g.slice(0);h.bufferDistance=new Observable(this.DEFAULT_BUFFER_DISTANCE?this.DEFAULT_BUFFER_DISTANCE:null);h.selectedBufferUnit=new Observable(this.DEFAULT_BUFFER_UNIT.config);h.inputError=new Observable("");h.bufferingError=new Observable("");this.childViewModels.push(h)};b.prototype.validateAndProcessInput=function(a){var g=this.getViewModelForView(a);if(!g)return a=this.app.getResource(this.libraryId,"language-buffer-error-input-validation").format(a),this.app.trace.error(a),g.bufferingError.set(a),
false;a=typeof g.bufferDistance.get()==="number"?g.bufferDistance.get():g.bufferDistance.get()?Number(g.bufferDistance.get().trim()):null;if(!(a!==null&&!isNaN(a)&&a!==0))return g.inputError.set(this.app.getResource(this.libraryId,"language-buffer-invalid-distance")),false;g.inputError.set("");g.bufferingError.set("");g.bufferDistance.set(a);this._raiseChangedBufferDistanceEvent(g);return true};b.prototype.getViewModelForView=function(a){var g=this.childViewModels.filter(function(g){return g.viewId===
a});if(!g.length)return this.app.trace.error("BufferOptionsViewModel: Could not find child view model for view with id {0}".format(a)),null;g.length>1&&this.app.trace.warning("Multiple child view models registered for view with id {0}. Please check your configuration. Using first instance of view model.".format(a));return g[0]};b.prototype.getViewModelForCommand=function(a){var g=this.childViewModels.filter(function(g){return g.targetCommands.indexOf(a)>-1});return!g.length?null:g[0]};b.prototype.handleBufferingErrorEvent=
function(a){if(a&&a.sourceCommand){var g=this.getViewModelForCommand(a.sourceCommand);if(g){var h=a&&a.error?a.error.message||a.error.name:"";(a=a.error.details)&&a.length&&(h=h.concat(" ",a.join(" ")));h=h?this.app.getResource(this.libraryId,"language-buffer-operation-error").format(h):this.app.getResource(this.libraryId,"language-buffer-error-details-unavailable");g.bufferingError.set(h);this.app.viewManager.activateView(this.app.viewManager.getViewById(g.viewId))}}};b.prototype.generateBufferDistanceChangedEventArgs=
function(a,g){var h={};h.distance=a.bufferDistance.get();h.unit=e.infrastructure.buffer.BufferUtils.getUnitDescFromConfig(a.selectedBufferUnit.get());h.targetCommands=g&&g.length?g:a.targetCommands.slice(0);return h};b.prototype._raiseChangedBufferDistanceEvent=function(a){a=this.generateBufferDistanceChangedEventArgs(a);this.app.event("BufferDistanceChangedEvent").publish(a)};b.prototype._getSupportedBufferUnitLanguageResources=function(){for(var a in e.infrastructure.buffer.BufferUtils.SUPPORTED_BUFFER_UNITS)e.infrastructure.buffer.BufferUtils.SUPPORTED_BUFFER_UNITS.hasOwnProperty(a)&&
(e.infrastructure.buffer.BufferUtils.SUPPORTED_BUFFER_UNITS[a]={displayName:this.app.getResource(this.libraryId,"language-buffer-unit-"+a.toLowerCase()+"-display-name"),config:a})};b.prototype._setBufferUnits=function(a){var g=this;a&&a.length&&a.forEach(function(a){var b=e.infrastructure.buffer.BufferUtils.SUPPORTED_BUFFER_UNITS[a];b?g.bufferUnits.addItem(b):g.app.trace.warning(g.app.getResource(g.libraryId,"language-buffer-invalid-unit-warning").format(a))})};b.prototype._setDefaultBufferUnit=function(a){var g;
a&&(g=e.infrastructure.buffer.BufferUtils.SUPPORTED_BUFFER_UNITS[a]);if(!g)if(this.bufferUnits.length())g=this.bufferUnits.getAt(0);else{this.app.trace.warning(this.app.getResource(this.libraryId,"language-buffer-invalid-unit-warning").format(a));return}this.DEFAULT_BUFFER_UNIT=g};return b}(d.framework.ui.ViewModelBase);f.BufferOptionsViewModel=i})(f.buffer||(f.buffer={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||
(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this._currentTargetCommands=[]}__extends(b,d);b.prototype.attach=function(a){if(!this.configuration||!this.configuration.targetCommands||!this.configuration.targetCommands.length)this.app.trace.error(this.app.getResource(this.libraryId,"language-buffer-target-modules-error"));else if(this.masterViewModel=a,a.registerView(this.id,this.configuration.targetCommands),a=a.getViewModelForView(this.id))d.prototype.attach.call(this,
a),this.registerCommands()};b.prototype.registerCommands=function(){this.app.command("DisplayBufferOptions").register(this,this.executeDisplayBufferOptions,this.canExecuteDisplayBufferOptions);this.app.command("ActivateBufferingAndDisplayOptions").register(this,this.executeActivateBufferingAndDisplayOptions,this.canExecuteDisplayBufferOptions);this.app.command("DeactivateBufferingAndDismissOptions").register(this,this.executeDeactivateBufferingAndDismissOptions,this.canExecuteDisplayBufferOptions)};
b.prototype.executeDisplayBufferOptions=function(a){var g=typeof a==="string"?a:a.targetCommand;if((a=typeof a==="string"?null:a.delegateFunction)&&dojo.isFunction(a))this._oneTimeCommandDelegateParams={},this._oneTimeCommandDelegateParams.delegateFunction=a,this._oneTimeCommandDelegateParams.targetCommand=g;this._currentTargetCommands.push(g);this.app.viewManager.activateView(this)};b.prototype.executeActivateBufferingAndDisplayOptions=function(a){var g=typeof a==="string"?a:a.targetCommand;this.canExecuteDisplayBufferOptions(g)&&
(this.app.command("ActivateBuffering").execute(g),this.app.command("DisplayBufferOptions").execute(a))};b.prototype.executeDeactivateBufferingAndDismissOptions=function(a){a=typeof a==="string"?a:a.targetCommand;this.canExecuteDisplayBufferOptions(a)&&(this.app.command("DeactivateBuffering").execute(a),this.dismissBufferOptions(a))};b.prototype.canExecuteDisplayBufferOptions=function(a){if(!a)return false;a=typeof a==="string"?a:a.targetCommand;return!a?false:this.canDisplayOptionsForTargetCommand(a)};
b.prototype.canDisplayOptionsForTargetCommand=function(a){var g=this.viewModel.targetCommands;return!g||!g.length?false:g.indexOf(a)>-1};b.prototype.validateAndApplyInput=function(){this.masterViewModel.validateAndProcessInput(this.id)};b.prototype.handleContinueButtonClick=function(){this.masterViewModel.validateAndProcessInput(this.id)&&(this._executeOneTimeCommandDelegate(),this.dismissBufferOptions())};b.prototype.handleCancelButtonClick=function(){if(this._oneTimeCommandDelegateParams)this._oneTimeCommandDelegateParams=
null;var a=this._currentTargetCommands.length?this._currentTargetCommands[this._currentTargetCommands.length-1]:null;a&&this.app.command("DeactivateBufferingAndDismissOptions").execute(a)};b.prototype.handleClearButtonClick=function(){this.viewModel.bufferingError.set("");this.viewModel.bufferDistance.set(null);this.masterViewModel._raiseChangedBufferDistanceEvent(this.viewModel)};b.prototype.dismissBufferOptions=function(a){a&&(a=this._currentTargetCommands.indexOf(a),a>-1&&this._currentTargetCommands.splice(a,
1));this._currentTargetCommands.length===0&&this.isActive&&this.app.viewManager.deactivateView(this);if((a=this.viewModel.targetCommands)&&a.length)a=this.masterViewModel.generateBufferDistanceChangedEventArgs(this.viewModel),this.app.event("BufferOptionsDismissedEvent").publish(a)};b.prototype._executeOneTimeCommandDelegate=function(){if(this._oneTimeCommandDelegateParams&&dojo.isFunction(this._oneTimeCommandDelegateParams.delegateFunction))this._oneTimeCommandDelegateParams.delegateFunction(this.masterViewModel.generateBufferDistanceChangedEventArgs(this.viewModel,
[this._oneTimeCommandDelegateParams.targetCommand])),this._oneTimeCommandDelegateParams=null};return b}(d.framework.ui.ViewBase);e.BufferOptionsView=f})(e.buffer||(e.buffer={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(f){function b(){f.apply(this,arguments);this.clusterLayers=new ObservableCollection(null)}__extends(b,f);b.prototype.initialize=function(){var a=this;this.app.command("AddClusterLayer").register(this,this._addClusterLayer,this._canExecuteAddClusterLayer);this.app.command("RemoveClusterLayer").register(this,this._removeClusterLayer,this._canExecuteRemoveClusterLayer);if(this.app.map&&this.app.map.loaded)this._checkIfClustersAreEnabledByDefault(this.app.site);
else this.app.event("MapLoadedEvent").once(this,function(){a._checkIfClustersAreEnabledByDefault(a.app.site)})};b.prototype._addClusterLayer=function(a){a=this._returnGeocortexLayer(a);if(a.type!==d.essentials.LayerType.FEATURE_LAYER)this.app.trace.info("Can only create a cluster layer from a feature layer.");else{this.app.command("RemoveVisualization").execute({gcxLayer:a});var g=new e.infrastructure.ClusterLayer(a,this.app);a.mapService.featureClustering.enabled=true;this.app.map.addLayer(g);this.clusterLayers.addItem(g);
this.app.command("AddClusterLayer").raiseCanExecuteChanged();this.app.command("RemoveClusterLayer").raiseCanExecuteChanged();this.app.event("ClusterLayerAddedEvent").publish(g);this.app.event("LayerVisualizationChangedEvent").publish(a)}};b.prototype._canExecuteAddClusterLayer=function(a){return(a=this._returnGeocortexLayer(a))&&a.mapService&&a.mapService.featureClustering?!a.mapService.featureClustering.enabled:false};b.prototype._removeClusterLayer=function(a){for(var a=this._returnGeocortexLayer(a),
g=0;g<this.clusterLayers.getLength();g++){var h=this.clusterLayers.getAt(g);if(h.id===a.mapService.id+"-cluster")a.mapService.featureClustering.enabled=false,this.clusterLayers.removeItem(h),this.app.event("ClusterLayerRemovedEvent").publish(h),this.app.event("LayerVisualizationChangedEvent").publish(a)}this.app.command("AddClusterLayer").raiseCanExecuteChanged();this.app.command("RemoveClusterLayer").raiseCanExecuteChanged()};b.prototype._canExecuteRemoveClusterLayer=function(a){return(a=this._returnGeocortexLayer(a))&&
a.mapService&&a.mapService.featureClustering?a.mapService.featureClustering.enabled:false};b.prototype._canExecuteSetActiveClusterLayer=function(a){return!this._returnGeocortexLayer(a)||this.clusterLayers.getLength()<=0?false:true};b.prototype._checkIfClustersAreEnabledByDefault=function(a){for(var g=0;g<a.essentialsMap.mapServices.length;g++){var h=a.essentialsMap.mapServices[g];if(h.featureClustering&&h.featureClustering.enabled)for(var b=0;b<h.layers.length;b++)this._addClusterLayer({gcxLayer:h.layers[b]})}};
b.prototype._returnGeocortexLayer=function(a){return typeof a==="string"?!this.app.site||!this.app.site.essentialsMap?null:this.app.site.essentialsMap.allLayers().filter(function(g){return a===g.mapService.id})[0]:a.gcxLayer};return b}(d.framework.application.ModuleBase);f.ClusterLayerModule=i})(f.clusterLayers||(f.clusterLayers={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.framework.ui.ViewBase);e.ClusterLayerView=f})(e.clusterLayers||(e.clusterLayers={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.clusterLayers=new ObservableCollection(null);this.selectedClusterLayer=new Observable(null);this.selectedGeocortexLayer=new Observable(null)}__extends(b,d);b.prototype.initialize=function(a){var g=this;d.prototype.initialize.call(this,a);this.app.event("ClusterLayerAddedEvent").subscribe(this,function(a){g.clusterLayers.addItem(a)});this.app.event("ClusterLayerRemovedEvent").subscribe(this,
function(a){g.clusterLayers.removeItem(a);g.selectedClusterLayer.get()===a&&g.selectedClusterLayer.set(null)});this.app.event("VisualizationViewActivatedEvent").subscribe(this,function(a){g.selectedGeocortexLayer.set(a);var b=g.clusterLayers.get().filter(function(g){return g.gcxLayer===a});b.length>0&&g.selectedClusterLayer.set(b[0])});this.app.event("LayerVisualizationChangedEvent").subscribe(this,function(a){var b=g.clusterLayers.get().filter(function(g){return g.gcxLayer===a});b.length>0&&g.selectedClusterLayer.set(b[0])});
this.app.event("ClusterLayerOptionsChangedEvent").subscribe(this,function(){g.selectedClusterLayer.get().recluster()})};return b}(d.framework.ui.ViewModelBase);e.ClusterLayerViewModel=f})(e.clusterLayers||(e.clusterLayers={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){var i=function(d){function b(a,g){d.call(this,a,g);this.displayName=this.app.getResource(g,"language-clustering-name")}__extends(b,d);b.prototype.canSupport=function(a){return a&&a.mapService?a.mapService.featureClustering&&a.mapService.featureClustering.userCanToggle:false};b.prototype.handleCurrentLayerChanged=function(a){a.mapService&&a.mapService.featureClustering?(this.isEnabled.set(a.mapService.featureClustering.enabled),this.isSupported.set(a.mapService.featureClustering.userCanToggle),
this.app.event("LayerVisualizationChangedEvent").publish(a)):(this.isEnabled.set(false),this.isSupported.set(false))};b.prototype.handleActivate=function(){this.app.command("AddClusterLayer").execute({gcxLayer:this.currentLayer.get()})};b.prototype.handleApply=function(){this.app.event("ClusterLayerOptionsChangedEvent").publish()};return b}(d.infrastructure.visualization.VisualizationProviderBase);f.ClusterLayerVisualizationProvider=i})(f.clusterLayers||(f.clusterLayers={}))})(d.modules||(d.modules=
{}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.framework.application.ModuleBase);e.CoordinatesModule=f})(e.coordinates||(e.coordinates={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.activated=function(){var a=this;this.viewModel.isEnabled.get()!==false&&($(this.root).parent("[class*='top']").length&&(this.viewModel.isTop.set(true),$(this.root).find(".arrow-closed").text(this.getResource("language-feature-coordinates-down-arrow")),$(this.root).find(".arrow-opened").text(this.getResource("language-feature-coordinates-up-arrow"))),$(this.root).parent("[class*='left']").length&&
this.viewModel.isLeft.set(true),$(this.root).parent("[class*='right']").length&&this.viewModel.isRight.set(true),$(this.root).parent("[class*='bottom']").length&&$(this.root).parent("[class*='right']").length&&$(".esriControlsBR").addClass("coordinate-attribution-override"),$(this.root).parent("[class*='bottom']").length&&this.viewModel.isBottom.set(true),this.viewModel.coordinateSystemsLoaded.bind(this,function(g){return g?a.selectFirstInListOfCoordinateSystems():null}),this.app.command("ToggleMouseCoordinates").register(this,
function(){a.toggleCoordinatesActive()}),this.viewModel.coordinateSelectEnabled.bind(this,function(g){g?(a.app.event("FlyoutActivated").publish(a),g={view:a,onOtherInteracted:function(g){return a._onOtherInteracted(g)}},a.app.command("TapToDismiss").execute(g)):a.app.event("FlyoutDeactivated").publish(a)}))};b.prototype.toggleCoordinatesActive=function(){this.viewModel.isActive.get()==false?this.viewModel.startTracking():this.viewModel.stopTracking();this.viewModel.coordinateSelectEnabled.set(false)};
b.prototype.toggleSelectContainer=function(){this.viewModel.coordinateSelectEnabled.set(!this.viewModel.coordinateSelectEnabled.get());if(!this.viewModel.isTop.get()){var a=$(this.root).find(".coords-select-item")[0];$(a).height()}};b.prototype.changeCoordinateSystem=function(a,g){var h=$(g.parentElement).index();$(g.parentElement.parentElement).children().children().removeClass("coords-select-item-selected");$(g).addClass("coords-select-item-selected");this.viewModel.currentCoordinateSystem.set(this.viewModel.coordinateSystems.getAt(h));
this.viewModel.coordinateSelectEnabled.set(false)};b.prototype.selectFirstInListOfCoordinateSystems=function(){var a=$(this.root).find(".coords-select-item").get(0);$(a.firstElementChild).addClass("coords-select-item-selected")};b.prototype._onOtherInteracted=function(){this.viewModel.coordinateSelectEnabled.set(false)};return b}(d.framework.ui.ViewBase);e.CoordinatesView=f})(e.coordinates||(e.coordinates={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(d){function b(){var a=this;d.apply(this,arguments);this.isEnabled=new Observable(true);this.isActive=new Observable(false);this.coordinateSystems=new ObservableCollection([]);this.currentCoordinateSystem=new Observable(null);this.coordinateSelectEnabled=new Observable(false);this.coordinateSelectArrow=new Observable(null);this.locale=new Observable(null);this.localeOptions=new Observable(null);this.xValue=new Observable(null);
this.yValue=new Observable(null);this.xValueType=new Observable(null);this.yValueType=new Observable(null);this.numDigits=new Observable(5);this.coordinateSystemsLoaded=new Observable(false);this.webMercatorWKIDs=[900913,3785,3857,102113,102100,3785,3857];this.isTop=new Observable(false);this.isBottom=new Observable(false);this.isLeft=new Observable(false);this.isRight=new Observable(false);this.timer=this.mouseMoveEvent=this._previousY=this._previousX=null;this._handleMouseMoveEvent=function(g){var h=
esri.geometry;$.inArray(a.currentCoordinateSystem.get().wkid,a.webMercatorWKIDs)!=-1&&h.canProject(g.mapPoint,a.app.map)?(h=h.project(g.mapPoint,a.app.map),a._outputCoordinates(h,true)):a.app.isOffline.get()?a.app.command("NativeHasCapability").execute("project",function(h){h?a._handleMouseAsyncProjection(g):(a.xValue.set(a.getResource("language-feature-coordinates-no-connection-top")),a.yValue.set(a.getResource("language-feature-coordinates-no-connection-bottom")))}):a._handleMouseAsyncProjection(g)}}
__extends(b,d);b.prototype.initialize=function(a){var g=this;if(a.isEnabled==false)this.isEnabled.set(false);else{a.numDigits&&this.numDigits.set(a.numDigits);this.app.locale?this.locale.set(this.app.locale):this.locale.set("en-US");this.localeOptions.set({maximumFractionDigits:this.numDigits.get(),minimumFractionDigits:this.numDigits.get(),style:"decimal"});if(this.app.map&&this.app.map.loaded)this._loadConfigAfterMapLoaded(this.app.map,a);else this.app.event("MapLoadedEvent").once(this,function(h){g._loadConfigAfterMapLoaded(h,
a)});this.currentCoordinateSystem.bind(this,function(a){if(a.output==="xy")g.xValueType.set(g._getSharedCoordinateResource("x")),g.yValueType.set(g._getSharedCoordinateResource("y"));else if(a.output==="latLon"||a.output==="ddm"||a.output==="dms")g.xValueType.set(g._getSharedCoordinateResource("latitude-abbrev")),g.yValueType.set(g._getSharedCoordinateResource("longitude-abbrev"))});this.coordinateSelectArrow.syncTransform(this.coordinateSelectEnabled,function(a){return g.isTop.get()?a?g.getResource("language-feature-coordinates-up-arrow"):
g.getResource("language-feature-coordinates-down-arrow"):a?g.getResource("language-feature-coordinates-down-arrow"):g.getResource("language-feature-coordinates-up-arrow")})}};b.prototype._loadConfigAfterMapLoaded=function(a,g){if(g.useBasemapCoordinates&&a.spatialReference&&a.spatialReference.wkid)for(var h=["latLon","ddm","dms","xy"],b=0;b<h.length;b++){var d=null;switch(h[b]){case "latLon":d=this.getResource("language-feature-coordinates-lat-long");break;case "ddm":d=this.getResource("language-feature-coordinates-DDM");
break;case "dms":d=this.getResource("language-feature-coordinates-DMS");break;case "xy":d=this.getResource("language-feature-coordinates-XY")}this.coordinateSystems.addItem({displayName:this.getResource("language-feature-coordinates-map-default-coordinate-system")+" "+this.getResource("language-feature-coordinates-WKID")+": "+a.spatialReference.wkid+" "+d,wkid:a.spatialReference.wkid,output:h[b]})}else g.useBasemapCoordinates&&g.coordinateSystems.length===0&&a.spatialReference&&!a.spatialReference.wkid&&
this.app.trace.warning(this.app.getResource(this.libraryId,"language-feature-coordinates-unsupported"));if(g.coordinateSystems&&g.coordinateSystems.length>0)for(b=0;b<g.coordinateSystems.length;b++)h=g.coordinateSystems[b],!h.wkid&&!h.wkt||!h.displayName||!h.output||this.coordinateSystems.addItem({displayName:h.displayName,wkid:h.wkid,wkt:h.wkt,output:h.output});this.coordinateSystems.get().length<=0?this.isEnabled.set(false):(this.currentCoordinateSystem.set(this.coordinateSystems.getAt(0)),this.coordinateSystemsLoaded.set(true),
g.openByDefault&&this.startTracking())};b.prototype.startTracking=function(){this.isActive.set(true);this.mouseMoveEvent=this.app.map.on("mouse-move",this._handleMouseMoveEvent)};b.prototype.stopTracking=function(){this.isActive.set(false);this.mouseMoveEvent.remove()};b.prototype._handleMouseAsyncProjection=function(a){var g=this;a.pageX!=this._previousX&&a.pageY!=this._previousY&&(window.clearTimeout(this.timer),delete this.timer);this._previousX=a.pageX;this._previousY=a.pageY;if(this.timer==null)this.timer=
setTimeout(function(){g._reprojectCoordinates(a)},100)};b.prototype._reprojectCoordinates=function(a){var g=this,h=this.currentCoordinateSystem.get().wkid!==this.app.map.spatialReference.wkid,b=h?new esri.SpatialReference(this.currentCoordinateSystem.get().wkid||this.currentCoordinateSystem.get().wkt):new esri.SpatialReference(102100);e.infrastructure.GeometryUtils.projectGeometry(a.mapPoint,b,function(b){b.type=="point"&&g._outputCoordinates(b,!h,a.mapPoint)},function(a){g.app.trace.warning("Unable to project geometry for coordinate tracking: "+
a);g.xValue.set(g.getResource("language-feature-coordinates-invalid-value"));g.yValue.set(g.getResource("language-feature-coordinates-invalid-value"))},this.app)};b.prototype._outputCoordinates=function(a,g,h){h===void 0&&(h=a);var b=esri.geometry;g&&this.currentCoordinateSystem.get().output!="xy"&&(a=b.webMercatorToGeographic(a));h=g?h:a;b=g=null;this.currentCoordinateSystem.get().output=="xy"?(g=h.x.toLocaleString(this.locale.get(),this.localeOptions.get()),b=h.y.toLocaleString(this.locale.get(),
this.localeOptions.get())):(a=e.infrastructure.CoordinateUtils.formatLatLon(a.y,a.x,this.currentCoordinateSystem.get().output,this.app,this.numDigits.get()),g=a.latitude,b=a.longitude);this.xValue.set(g);this.yValue.set(b)};b.prototype._getSharedCoordinateResource=function(a){return this.app.getResource("Mapping.Infrastructure","language-coordinates-"+a)};return b}(d.framework.ui.ViewModelBase);f.CoordinatesViewModel=i})(f.coordinates||(f.coordinates={}))})(e.modules||(e.modules={}))})(f.mapping||
(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){function b(a,g){g===void 0&&(g={});if(!g.graphicsLayer)throw Error("Add Operation: Initialization failed. Graphics layer is not provided.");if(!g.addedGraphics)throw Error("Add Operation: Initialization failed. Added graphics are not provided.");this.state=g;this.displayName=a}b.prototype.performRedo=function(){var a=this;return Promise.resolve().then(function(){a.state.addedGraphics.map(function(g){a.state.graphicsLayer.add(g);
a.state.app.event("MarkupAddedEvent").publish(g)})})};b.prototype.performUndo=function(){var a=this;return Promise.resolve().then(function(){a.state.addedGraphics.map(function(g){a.state.graphicsLayer.remove(g);a.state.app.event("MarkupDeletedEvent").publish(g)})})};return b}();d.Add=e})(d.undoable||(d.undoable={}))})(d.editing||(d.editing={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){function b(a,g){var h=this;this._preUpdatedGraphicsGeometries=[];this._preUpdatedGraphicsAttributes=[];this._postUpdatedGraphicsGeometries=[];this._postUpdatedGraphicsAttributes=[];if(!g.graphicsLayer)throw Error("Add/Update Operation: Initialization failed. Graphics layer is not provided.");if(!g.addedGraphics)throw Error("Add/Update Operation: Initialization failed. Added graphics are not provided.");
if(!g.preUpdatedGraphics||!g.updatedGraphics)throw Error("Add/Update Operation: Initialization failed. Pre/Post updated graphics are not provided.");this.state=g;this.displayName=a;g.preUpdatedGraphics.map(function(a,g){h._preUpdatedGraphicsGeometries[g]=a.geometry.toJson();h._preUpdatedGraphicsAttributes[g]=JSON.stringify(a.attributes||{})});g.updatedGraphics.map(function(a,g){h._postUpdatedGraphicsGeometries[g]=a.geometry.toJson();h._postUpdatedGraphicsAttributes[g]=JSON.stringify(a.attributes||
{})})}b.prototype.performRedo=function(){var a=this;return Promise.resolve().then(function(){a.state.addedGraphics.map(function(g){a.state.graphicsLayer.add(g);a.state.app.event("MarkupAddedEvent").publish(g)});a.state.updatedGraphics.map(function(g,h){g.setGeometry(esri.geometry.fromJson(a._postUpdatedGraphicsGeometries[h]));g.setAttributes(JSON.parse(a._postUpdatedGraphicsAttributes[h]));a.state.app.event("MarkupUpdatedEvent").publish(g)})})};b.prototype.performUndo=function(){var a=this;return Promise.resolve().then(function(){a.state.addedGraphics.map(function(g){a.state.graphicsLayer.remove(g);
a.state.app.event("MarkupDeletedEvent").publish(g)});a.state.updatedGraphics.map(function(g,h){g.setGeometry(esri.geometry.fromJson(a._preUpdatedGraphicsGeometries[h]));g.setAttributes(JSON.parse(a._preUpdatedGraphicsAttributes[h]));a.state.app.event("MarkupUpdatedEvent").publish(g)})})};return b}();d.AddAndUpdate=e})(d.undoable||(d.undoable={}))})(d.editing||(d.editing={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||
(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){function b(a,g){g===void 0&&(g={});if(!g.graphicsLayer)throw Error("Delete Operation: Initialization failed. Graphics layer is not provided.");if(!g.deletedGraphics)throw Error("Delete Operation: Initialization failed. Deleted graphics are not provided.");this.state=g;this.displayName=a}b.prototype.performRedo=function(){var a=this;return Promise.resolve().then(function(){a.state.deletedGraphics.map(function(g){a.state.graphicsLayer.remove(g);a.state.app.event("MarkupDeletedEvent").publish(g)})})};
b.prototype.performUndo=function(){var a=this;return Promise.resolve().then(function(){a.state.deletedGraphics.map(function(g){a.state.graphicsLayer.add(g);a.state.app.event("MarkupAddedEvent").publish(g)})})};return b}();d.Delete=e})(d.undoable||(d.undoable={}))})(d.editing||(d.editing={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){function b(a,g){var h=this;this._preUpdatedGraphicsGeometries=[];this._preUpdatedGraphicsAttributes=[];this._postUpdatedGraphicsGeometries=[];this._postUpdatedGraphicsAttributes=[];if(!g.graphicsLayer)throw Error("Delete/Update Operation: Initialization failed. Graphics layer is not provided.");if(!g.deletedGraphics)throw Error("Delete/Update Operation: Initialization failed. Deleted graphics are not provided.");
if(!g.preUpdatedGraphics||!g.updatedGraphics)throw Error("Delete/Update Operation: Initialization failed. Pre/Post updated graphics are not provided.");this.state=g;this.displayName=a;g.preUpdatedGraphics.map(function(a,g){h._preUpdatedGraphicsGeometries[g]=a.geometry.toJson();h._preUpdatedGraphicsAttributes[g]=JSON.stringify(a.attributes||{})});g.updatedGraphics.map(function(a,g){h._postUpdatedGraphicsGeometries[g]=a.geometry.toJson();h._postUpdatedGraphicsAttributes[g]=JSON.stringify(a.attributes||
{})})}b.prototype.performRedo=function(){var a=this;return Promise.resolve().then(function(){a.state.deletedGraphics.map(function(g){a.state.graphicsLayer.remove(g);a.state.app.event("MarkupDeletedEvent").publish(g)});a.state.updatedGraphics.map(function(g,h){g.setGeometry(esri.geometry.fromJson(a._postUpdatedGraphicsGeometries[h]));g.setAttributes(JSON.parse(a._postUpdatedGraphicsAttributes[h]));a.state.app.event("MarkupUpdatedEvent").publish(g)})})};b.prototype.performUndo=function(){var a=this;
return Promise.resolve().then(function(){a.state.deletedGraphics.map(function(g){a.state.graphicsLayer.add(g);a.state.app.event("MarkupAddedEvent").publish(g)});a.state.updatedGraphics.map(function(g,h){g.setGeometry(esri.geometry.fromJson(a._preUpdatedGraphicsGeometries[h]));g.setAttributes(JSON.parse(a._preUpdatedGraphicsAttributes[h]));a.state.app.event("MarkupUpdatedEvent").publish(g)})})};return b}();d.DeleteAndUpdate=e})(d.undoable||(d.undoable={}))})(d.editing||(d.editing={}))})(d.modules||
(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){function b(a,g){var h=this;g===void 0&&(g={});this._preUpdatedGraphicsGeometries=[];this._preUpdatedGraphicsAttributes=[];this._postUpdatedGraphicsGeometries=[];this._postUpdatedGraphicsAttributes=[];if(!g.graphicsLayer)throw Error("Update Operation: Initialization failed. Graphics layer is not provided.");if(!g.preUpdatedGraphics||!g.updatedGraphics)throw Error("Update Operation: Initialization failed. Pre/Post updated graphics are not provided.");
this.state=g;this.displayName=a;g.preUpdatedGraphics.map(function(a,g){h._preUpdatedGraphicsGeometries[g]=a.geometry.toJson();h._preUpdatedGraphicsAttributes[g]=JSON.stringify(a.attributes||{})});g.updatedGraphics.map(function(a,g){h._postUpdatedGraphicsGeometries[g]=a.geometry.toJson();h._postUpdatedGraphicsAttributes[g]=JSON.stringify(a.attributes||{})})}b.prototype.performRedo=function(){var a=this;return Promise.resolve().then(function(){a.state.updatedGraphics.map(function(g,h){g.setGeometry(esri.geometry.fromJson(a._postUpdatedGraphicsGeometries[h]));
g.setAttributes(JSON.parse(a._postUpdatedGraphicsAttributes[h]));a.state.app.event("MarkupUpdatedEvent").publish(g)})})};b.prototype.performUndo=function(){var a=this;return Promise.resolve().then(function(){a.state.updatedGraphics.map(function(g,h){g.setGeometry(esri.geometry.fromJson(a._preUpdatedGraphicsGeometries[h]));g.setAttributes(JSON.parse(a._preUpdatedGraphicsAttributes[h]));a.state.app.event("MarkupUpdatedEvent").publish(g)})})};return b}();d.Update=e})(d.undoable||(d.undoable={}))})(d.editing||
(d.editing={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){function d(){}d.findFeatureInLayer=function(b,a){if(!b||!a)return null;var g=a.graphics;if(g.length<1)return null;var h=["__editingMeta","timestamp"];if(a.editFieldsInfo)for(var d in a.editFieldsInfo)a.editFieldsInfo.hasOwnProperty(d)&&h.push(a.editFieldsInfo[d]);var e=function(a){var g=0,b;for(b in a)!Array.contains(h,b)&&a.hasOwnProperty(b)&&++g;return g};d=g[0].attributes;if(e(d)!==e(b.attributes))return null;var e=
0,f=[],j=[],k;for(k in d){var i=Array.contains(h,k);if(!i&&(!d.hasOwnProperty(k)||!b.attributes.hasOwnProperty(k)))return null;i||(f.push(k),j.push(k),++e)}for(k=0;k<e;++k)if(f[k]!==j[k])return null;for(k=0;k<g.length;k++);return null};return d}();d.EditingUtils=e})(d.editing||(d.editing={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,g){var h=this;d.call(this,a,g);this.app.command("HideCreateEditView").register(this,function(){h.isActive&&h.app.viewManager.deactivateView(h)})}__extends(b,d);b.prototype.handleClickCreateNewFeature=function(){this.viewModel.initiateCreateNewFeature()};b.prototype.handleClickSelectExistingFeature=function(){this.viewModel.selectGeometry()};return b}(d.framework.ui.ViewBase);e.CreateOrEditView=f})(e.editing||
(e.editing={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(){return function(b,a){this.featureServiceId=b.featureServiceId;this.where="{0} = '{1}'".format(b.scanResultFieldName,a.replace("'","''"));this.template={};this.template[b.scanResultFieldName]=a}}();e.CreateOrEditFeatureDescriptor=f;var j=function(b){function a(a,h){b.call(this,a,h);this.geolocationEnabled=new Observable;this.searchRadius=new Observable(100)}__extends(a,b);a.prototype.initialize=function(a){a&&a.tools&&
this.app&&this.app.toolRegistry&&this.app.toolRegistry.createTools(a.tools,true);a&&a.searchRadiusMeters&&this.searchRadius.set(a.searchRadiusMeters);this.app.command("CreateOrEditFeatureFromBarcodeScan").register(this,this._executeCreateOrEditFeatureFromBarcodeScan);this.app.command("CreateOrEditFeature").register(this,this._executeCreateOrEditFeature);this.app.command("SelectFeatureForEditing").register(this,this._findExistingFeature);this.app.event("Internal.EditorFormSetupEvent").subscribe(this,
this._fillTemplateDataInForm);this.geolocationEnabled.set(navigator&&navigator.geolocation!==void 0)};a.prototype._executeCreateOrEditFeatureFromBarcodeScan=function(a){var h=this;this.app.command("LaunchBarcodeScannerWithCallback").execute(function(b){if(b.status=="Success")b=b.content,h.app.command("CreateOrEditFeature").execute([new f(a,b)])})};a.prototype._executeCreateOrEditFeature=function(a){var h=this;this.resultsFSC=new d.essentialsHtmlViewer.mapping.infrastructure.FeatureSetCollection;this.inputFeatureDescriptors=
a||[];this.currentFeatureServiceDescriptor=null;for(a=0;a<this.inputFeatureDescriptors.length;a++){var b=this.inputFeatureDescriptors[a],e=this.app.site.essentialsMap.findMapServiceById(b.featureServiceId);if(this.app.isOffline.get())this._manualFilterData(e,b,e.serviceLayer.graphics);else{var f=new esri.tasks.Query;f.outFields=["*"];f.where=b.where;e.queryFeatures(f,function(a,g){return function(b){h._collectSearchResults(a,g,b)}}(e,b),function(a){h.app.trace.error("Error querying for feature data: {0}".format(a.toString()))})}}};
a.prototype._fillTemplateDataInForm=function(a){if(this.currentFeatureServiceDescriptor){var a=a.get().fields.getItems(),h;for(h in a){var b=a[h],d;for(d in this.currentFeatureServiceDescriptor.template)b.name.get()===d&&b.value.set(this.currentFeatureServiceDescriptor.template[d])}this.currentFeatureServiceDescriptor=null}};a.prototype._manualFilterData=function(a,h,b){var d=new esri.tasks.FeatureSet;this.app.trace.debug("Input feature set count: {0}".format(b.length));for(var e in b){var f=b[e],
j=true,k;for(k in h.template)f.attributes[k]!==h.template[k]&&(j=false);j&&d.features.push(f)}this._collectSearchResults(a,h,d)};a.prototype._collectSearchResults=function(a,h,b){this.currentFeatureLayer=a.layers[0];a=new d.essentialsHtmlViewer.mapping.infrastructure.FeatureSet({esriFeatureSet:b,layer:this.currentFeatureLayer});this.resultsFSC.featureSets.addItem(a);if(this.resultsFSC.featureSets.length()==this.inputFeatureDescriptors.length)this.resultsFSC.countFeatures()==1?(this.app.trace.debug("Found one feature, start editing it."),
this._startEditingFeature(this.resultsFSC.firstFeature())):this.resultsFSC.countFeatures()>1?(this.app.trace.debug("Multiple features found, select one to edit."),this.app.command("ShowSelectionListOfFeaturesWithCallback").execute(a,this._startEditingFeature)):(this.app.trace.debug("Creating a new feature."),this.currentFeatureServiceDescriptor=h,this.app.command("ActivateView").execute("CreateOrEditView"))};a.prototype.initiateCreateNewFeature=function(){this.app.command("ShowFeatureTemplatePicker").execute(this.currentFeatureLayer)};
a.prototype.selectGeometry=function(){var a=this.app.toolRegistry.tool("SelectFeaturesForEditingTool");a&&a.setActive(true)};a.prototype._findExistingFeature=function(a,h){var b=new d.essentialsHtmlViewer.mapping.modules.identify.MapIdentifyTask(this.app.map,this.app);b.layerRestriction=dojo.hitch(this,function(a){return a===this.currentFeatureLayer});var e=false,f=dojo.hitch(this,function(a,g,h){if(g!==void 0&&g.length>0){e=true;var a=new esri.tasks.FeatureSet,b;for(b in g)a.features.push(g[b].feature);
g=new d.essentialsHtmlViewer.mapping.infrastructure.FeatureSet({esriFeatureSet:a,layer:h.layers[0]});this.app.command("ShowSelectionListOfFeaturesWithCallback").execute(g,this._startEditingFeature)}}),j=dojo.hitch(this,function(){e&&this._setSelectionToolActive(false)}),k=dojo.hitch(this,function(a,g){this.app.trace.warning("Failed to find features: {0}".format(g.message))});if(a.type==="point"){var i=new esri.SpatialReference({wkid:102100}),l=this.searchRadius.get(),i=d.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.createCircle(i,
a,h&&h>l?h:l,60);b.execute(i,f,j,k)}else b.execute(a,f,j,k)};a.prototype._startEditingFeature=function(a){this.app.command("HideCreateEditView").execute();this.app.command("HideMultiFeatureSelectorView").execute();this.app.command("ZoomToFeature").execute(a);this.app.command("StartEditingFeature").execute(a,false)};a.prototype._setSelectionToolActive=function(a){var h=this.app.toolRegistry.tool("SelectFeaturesForEditingTool");h&&(a!=void 0?h.setActive(a):h.setActive(true))};return a}(d.framework.ui.ViewModelBase);
e.CreateOrEditViewModel=j})(e.editing||(e.editing={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,g){var h=this;e.call(this,a,g);this.app.command("HideMultiFeatureSelectorView").register(this,function(){h.isActive&&h.app.viewManager.deactivateView(h)});this.app.event("ViewActivatedEvent").subscribe(this,this.setDisplayResultPickerListOffset)}__extends(b,e);b.prototype.setDisplayResultPickerListOffset=function(){this.topContainer&&this.viewModel.topOffset.set(this.topContainer.clientHeight);this.bottomContainer&&
this.viewModel.bottomOffset.set(this.bottomContainer.clientHeight)};b.prototype.handleClickButton=function(){this.viewModel.selectedFeatures.get().length>0?this.viewModel.submitResults():this.viewModel.showError()};b.prototype.handleClick=function(a,g,h){if(this._firstEvent&&this._cancelLongPress)this._firstEvent=null,this._cancelLongPress();a.target.tagName!=="A"&&this.viewModel.featureClicked(h);return true};b.prototype.handleClearTextBox=function(){this.viewModel.clearTextBox()};b.prototype.handleSelectAll=
function(){this.viewModel.selectAll()};b.prototype.handleSelectNone=function(){this.viewModel.selectNone()};b.prototype.resolveWidget=function(a,g){e.prototype.resolveWidget.call(this,a,g);var h;if(a==="GetDescription")return h=new d.essentialsHtmlViewer.mapping.infrastructure.FeatureDescriptionPresenterView(this.app,this.libraryId),h.app=this.app,h.libraryId=this.libraryId,h.root=dojo.create("div"),h.root.className="feature-description",g.hasRelationships&&g.hasRelationships.get()?h.descriptionApply(g,
h.root):h.root.innerHTML=h.descriptionGet(g),h.attach(g),h;if(a==="RenderComplexResultTemplate"&&this.viewModel.resultTemplateComplexity==="complex")return h=this.app.viewManager.createView({markupResource:"Mapping/modules/Workflow/Templates/DisplayResultPickerComplexResultTemplateView.html",type:"geocortex.essentialsHtmlViewer.mapping.modules.workflow.templates.DisplayResultPickerResultTemplateView"}),h.app=this.app,h.libraryId=this.libraryId,h.parentView=this,h.attach(g),h;if(a==="RenderSimpleResultTemplate"&&
this.viewModel.resultTemplateComplexity==="simple")return h=this.app.viewManager.createView({markupResource:"Mapping/modules/Workflow/Templates/DisplayResultPickerSimpleResultTemplateView.html",type:"geocortex.essentialsHtmlViewer.mapping.modules.workflow.templates.DisplayResultPickerResultTemplateView"}),h.app=this.app,h.libraryId=this.libraryId,h.parentView=this,h.attach(g),h};return b}(d.framework.ui.ViewBase);e.MultiFeatureSelectorView=f})(e.editing||(e.editing={}))})(e.modules||(e.modules={}))})(f.mapping||
(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){var i=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.infrastructure.Feature);f.DisplayResultPickerFeature=i;f.generateDisplayResultPickerFeaturefromFeature=function(d){d.isSelected=new Observable(false);d.cssClass=new Observable("");d.isFiltered=new Observable(false);d.showIcon=true;d.showCheckbox=true;return d}})(f.workflow||(f.workflow={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(){e.apply(this,arguments);this.buttons=null;this.filterSectionVisible=new Observable(true);this.showFilterTextBox=new Observable(false);this.isSingleSelectionMode=new Observable(true);this.filterText=new Observable("");this.disabledLinkCssClass=new Observable("");this.topOffset=new Observable("0px");this.bottomOffset=new Observable("0px");this.message=null}__extends(b,e);b.prototype.initialize=function(a){this.app.command("ShowSelectionListOfFeaturesWithCallback").register(this,
this._showSelectionListOfFeatures);this.featureSet=null;this.features=new ObservableCollection([]);this.selectedFeatures=new ObservableCollection([]);this.resultsList=new ObservableCollection([]);this.cssClass=new Observable("display-result-picker-list");a=a.displayResultPickerTemplateComplexity;this.resultTemplateComplexity=a===void 0||a!="complex"&&a!="simple"?"complex":a.toLowerCase();this.message=new Observable(this.app.getResource(this.libraryId,"language-feature-editing-multi-feature-selector-message"));
this.requiredValueErrorMessage=new Observable("");a=[];a.push(new d.forms.FormButton("Done","Done",true,true));this.buttons=Observable.makeBindableProxy(a)};b.prototype._showSelectionListOfFeatures=function(a,g){this.callback=g;this.featureSet=a;this.features.clear();for(var h=0;h<a.features.length();h++){var b=d.essentialsHtmlViewer.mapping.modules.workflow.generateDisplayResultPickerFeaturefromFeature(a.features.getAt(h));b.showCheckbox=false;this.features.addItem(b)}this.selectedFeatures.set([]);
this.resultsList.set(this.features.get());this.requiredValueErrorMessage.set("");this.cssClass.set("display-result-picker-list");this.app.command("ActivateView").execute("MultiFeatureSelectorView")};b.prototype.featureClicked=function(a){this.clearSelection();this.addFeatureToSelection(a,true)};b.prototype.featureChecked=function(a){this.clearSelection();this.addFeatureToSelection(a,true)};b.prototype.addFeatureToSelection=function(a){a.isFiltered.get()!=void 0&&!a.isFiltered.get()&&(a.isSelected.set(true),
a.cssClass.set("selected"),this.selectedFeatures.addItem(a),this.features.indexOf(a))};b.prototype.clearSelection=function(){if(this.selectedFeatures.length()){for(var a=0;a<this.selectedFeatures.length();a++)this.selectedFeatures.getAt(a).isSelected.set(false),this.selectedFeatures.getAt(a).cssClass.set("");this.selectedFeatures.clear()}};b.prototype.clearTextBox=function(){this.filterText.set("")};b.prototype.selectAll=function(){this.addFeatureToSelection(this.features.getAt(0),true);for(var a=
1;a<this.features.get().length;a++)this.addFeatureToSelection(this.features.getAt(a),false)};b.prototype.selectNone=function(){this.clearSelection()};b.prototype.submitResults=function(){this.callback&&this.callback(this.selectedFeatures.getAt(0))};b.prototype.showError=function(){this.requiredValueErrorMessage.set(this.app.getResource(this.libraryId,"language-feature-editing-multi-feature-selector-error-message"));this.cssClass.set("display-result-picker-list error")};return b}(d.framework.ui.ViewModelBase);
e.MultiFeatureSelectorViewModel=f})(e.editing||(e.editing={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.framework.application.ModuleBase);e.ExportMapModule=f})(e.exportMap||(e.exportMap={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,g){var h=this;d.call(this,a,g);this.app.command("ShowExportMapDialog").register(this,function(){h.app.viewManager.activateView(h);h.viewModel.exportComplete.set(false)},function(){return h.app.site&&!!h.app.site.essentialsMap&&!!h.app.site.essentialsMap.supportedExportFormats})}__extends(b,d);b.prototype.handleExportMapClick=function(){this.viewModel.exportMap()};b.prototype.handleViewImageClick=function(){window.open(this.viewModel.url.get());
this.viewModel.exportComplete.set(false)};return b}(d.framework.ui.ViewBase);e.ExportMapView=f})(e.exportMap||(e.exportMap={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,g){var h=this;e.call(this,a,g);this.formatSupportsIncludeGeoreferenceData=new Observable(false);this.isExporting=new Observable(false);this.exportComplete=new Observable(false);this.url=new Observable(null);this.outputFormats=new ObservableCollection;this.allowIncludeGeoreferenceData=new Observable(true);this.selectedFormat=new Observable(null);this.includeGeoreferenceData=new Observable(false);if(this.app.site&&
this.app.site.isInitialized)this.siteInitialized();else this.app.event("SiteInitializedEvent").once(this,this.siteInitialized);this.formatSupportsIncludeGeoreferenceData.syncTransform(this.selectedFormat,function(a){return a&&a!="GeoTIFF"&&a!="PDF"});this.includeGeoreferenceData.syncTransform(this.selectedFormat,function(a){return a&&a!="GeoTIFF"&&a!="PDF"&&h.includeGeoreferenceData.get()})}__extends(b,e);b.prototype.siteInitialized=function(){var a=this;this.app.site&&this.app.site.essentialsMap&&
this.app.site.essentialsMap.supportedExportFormats&&(this.outputFormats.set(this.app.site.essentialsMap.supportedExportFormats.filter(function(g){return!(a.app.site.getEssentialsVersion()<4.03&&g.toLowerCase()==="pdf")})),this.app.site.essentialsMap.exportMapImageOptions&&this.app.site.essentialsMap.exportMapImageOptions.defaultOutputFormat?this.selectedFormat.set(this.getFormatIgnoreCase(this.app.site.essentialsMap.exportMapImageOptions.defaultOutputFormat)):this.outputFormats.get().length>0?this.selectedFormat.set(this.outputFormats.getAt(0)):
this.selectedFormat.set(this.app.getResource(this.libraryId,"language-export-map-none")),this.app.site.essentialsMap.exportMapImageOptions&&this.allowIncludeGeoreferenceData.set(this.app.site.essentialsMap.exportMapImageOptions.allowIncludeGeoreferenceData));this.app.command("ShowExportMapDialog").raiseCanExecuteChanged()};b.prototype.getFormatIgnoreCase=function(a){var g=this.outputFormats.get();if(!g||g.length<=0)return null;if(a)for(var a=a.toUpperCase(),h=0;h<g.length;h++){var b=g[h];if(b&&b.toUpperCase()===
a)return g[h]}return g[0]};b.prototype.exportMap=function(){var a=this;this.isExporting.set(true);var g=this.app.site.essentialsMap;this.app.command("ScreenReaderNarrate").execute(this.app.getResource(this.libraryId,"language-export-map-is-exporting"));var h=new d.essentials.ReportParameters;h.outputFormat=this.selectedFormat.get();h.customExtent=this.app.map.extent;h.extentType=d.essentials.ReportParameters.CURRENT_EXTENT;if(this.allowIncludeGeoreferenceData)h.includeGeoreferenceData=this.includeGeoreferenceData.get();
this.app!=void 0&&this.app.map!=null&&h.populateMapGraphicsLayers(this.app.map);g.exportMap(h,function(g){a.app.command("ScreenReaderNarrate").execute(a.app.getResource(a.libraryId,"language-export-map-complete-description"));a.isExporting.set(false);a.url.set(g.href);a.exportComplete.set(true)},function(g){a.app.command("Alert").execute(a.app.getResource(a.libraryId,"language-export-map-error").format(g.message));a.app.command("ScreenReaderNarrate").execute(a.app.getResource(a.libraryId,"language-export-map-error").format(g.message));
a.isExporting.set(false)})};return b}(d.framework.ui.ViewModelBase);e.ExportMapViewModel=f})(e.exportMap||(e.exportMap={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));(function(d){d=d.essentialsHtmlViewer||(d.essentialsHtmlViewer={});d=d.mapping||(d.mapping={});d=d.modules||(d.modules={});(d.geolocate||(d.geolocate={})).GeolocateSpoofer=null})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.handleClickClose=function(a,g,h){this.app.viewManager.deactivateView(this);if(h&&h.onClose)h.onClose()};return b}(d.framework.ui.ViewBase);e.GeolocateStatusView=f})(e.geolocate||(e.geolocate={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(d){function b(){d.apply(this,arguments);this.status=new Observable("");this.showCoordinates=new Observable(false);this.xValueType=new Observable("");this.yValueType=new Observable("");this.xValue=new Observable("");this.yValue=new Observable("");this.imageUri=new Observable("");this.onClose=null}__extends(b,d);b.prototype.initialize=function(a){this.config=a;if(a.coordinateWkid)a.coordinateWkid=parseInt(a.coordinateWkid.toString())};
b.prototype.updateStatus=function(a,g){var h=this;a==="following"?(this.status.set(this.app.getResource(this.libraryId,"language-geolocate-follow-in-progress")),this.imageUri.set(this.config.busyIcon||"Resources/Images/loader-small.gif"),this.showCoordinates.set(this.config.showFollowingCoordinates)):a==="tracking"?(this.status.set(this.app.getResource(this.libraryId,"language-geolocate-track-in-progress")),this.imageUri.set(this.config.busyIcon||"Resources/Images/loader-small.gif"),this.showCoordinates.set(this.config.showTrackingCoordinates)):
(this.status.set(""),this.imageUri.set(this.config.geolocateIcon||"Resources/Images/Icons/geolocate-24.png"),this.showCoordinates.set(this.config.showGeolocateCoordinates));if(this.showCoordinates)if((this.config.coordinateFormat?this.config.coordinateFormat.toLowerCase():e.infrastructure.AngleFormat.DD)==="xy"){this.xValueType.set(this._getCoordinateResource("x"));this.yValueType.set(this._getCoordinateResource("y"));var b=this.config.coordinateWkid||this.app.map.spatialReference.wkid,d=new esri.SpatialReference({wkid:4326}),
d=new esri.geometry.Point(g.coords.longitude,g.coords.latitude,d);e.infrastructure.GeometryUtils.projectGeometry(d,new esri.SpatialReference(b),function(a){h.xValue.set(e.infrastructure.CoordinateUtils.formatXYCoordinate(a.x,h.app,h.config.coordinateFractionalDigits));h.yValue.set(e.infrastructure.CoordinateUtils.formatXYCoordinate(a.y,h.app,h.config.coordinateFractionalDigits))},function(a){h.app.trace.warning("Unable to project geometry for coordinate tracking: "+a);h.xValue.set(h.getResource("language-geolocate-error-cannot-convert-coordinate"));
h.yValue.set(h.getResource("language-geolocate-error-cannot-convert-coordinate"))},this.app)}else b=e.infrastructure.CoordinateUtils.formatLatLon(g.coords.latitude,g.coords.longitude,this.config.coordinateFormat,this.app,this.config.coordinateFractionalDigits),this.xValueType.set(this._getCoordinateResource("latitude-abbrev")),this.yValueType.set(this._getCoordinateResource("longitude-abbrev")),this.xValue.set(b.latitude),this.yValue.set(b.longitude)};b.prototype._getCoordinateResource=function(a){return this.app.getResource("Mapping.Infrastructure",
"language-coordinates-"+a)};return b}(d.framework.ui.ViewModelBase);f.GeolocateStatusViewModel=i})(f.geolocate||(f.geolocate={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,g,h){d.call(this,a,g,h);this._defaultLayerTabView=null;this._layerTabViews={};this._currFeatureProviderBindings=[];this.app.event("FeatureDetailsCurrentFeatureChanged").subscribe(this,this._handleFeatureChanged);this.app.event("Internal.FeatureProviderTargetRegionsChanged").subscribe(this,this._handleFeatureChanged)}__extends(b,d);b.prototype.initialize=function(a){d.prototype.initialize.call(this,a);if(a&&
a.hasOwnProperty("defaultTabViewForLayer")){var a=a.defaultTabViewForLayer,g;for(g in a)if(a.hasOwnProperty(g)){var h=a[g];if(dojo.isArray(h))for(var b=0;b<h.length;b++)this._addProperty(g,h[b]);else this._addProperty(g,h)}}};b.prototype.createDescriptorForView=function(a){a=new e.FeatureDetailsSwitcherViewDescriptor(a,this);this._processViewDescriptor(a);return a};b.prototype.checkIfSwitcherActive=function(){return dojo.filter(this.viewDescriptors.get(),function(a){return a.providerEnabled.get()}).length>
1};b.prototype._addProperty=function(a,g){this._layerTabViews[a]||(this._layerTabViews[a]=[]);a&&g==="default"?this._defaultLayerTabView=a:g.mapServiceId!=null&&g.layerId!=null?this._layerTabViews[a].push(g):this.app.trace.warning("Invalid configuration for default layer tab view. Syntax is - {PreferredViewId} : { {mapServiceId}, {layerId} }")};b.prototype._getPreferredViewDescriptor=function(a,g){if(!a||!g)return null;for(var h in this._layerTabViews)if(this._layerTabViews.hasOwnProperty(h))for(var b=
this._layerTabViews[h],d=0;d<b.length;d++)if(a===b[d].mapServiceId&&g===b[d].layerId){var e=this.getDescriptorForView(this.app.viewManager.getViewById(h));if(e)return e}};b.prototype._processViewDescriptor=function(a){var g=this,h=function(h){a.providerEnabled.bind(g,g.updateViewSwitcherState);a.providerEnabled.sync(h.providerEnabled)};a.view.viewModel?h(a.view.viewModel):dojo.aspect.after(a.view,"attach",dojo.hitch(this,h),true)};b.prototype._handleFeatureChanged=function(a){this._cancelBindingsIfApplicable();
a&&a.layer&&this._activateDefaultTabViewForLayer(a.layer.mapService?a.layer.mapService.id:null,a.layer.id)};b.prototype._activateDefaultTabViewForLayer=function(a,g){var h=this,b=null,d=false,e=null,f=function(){for(var a=0;a<h.viewDescriptors.length();a++)if(h.viewDescriptors.getAt(a).providerEnabled.get()&&h.viewDescriptors.getAt(a).view)return h.viewDescriptors.getAt(a);return null},j=function(a){var g=a.providerEnabled,b=a.providerEnabled.bind(h,function(g){if(g&&(g=e&&a.view.id===e.view.id,!d||
g))h.app.viewManager.activateView(a.view),g&&h._cancelBindingsIfApplicable()&&(e=null),d=true});h._currFeatureProviderBindings.push({currentFeatureProviderEnabledRef:g,currentFeatureProviderBindingToken:b})},b=this._getPreferredViewDescriptor(a,g);!b&&this._defaultLayerTabView&&(b=this.getDescriptorForView(this.app.viewManager.getViewById(this._defaultLayerTabView)));b&&!b.providerEnabled.get()&&(e=b,b=null);!b&&(b=f());b?(this.app.viewManager.activateView(b.view),d=true,e&&j(e)):this.viewDescriptors.get().forEach(function(a){return j(a)})};
b.prototype._cancelBindingsIfApplicable=function(){if(this._currFeatureProviderBindings.length)this._currFeatureProviderBindings.forEach(function(a){a.currentFeatureProviderEnabledRef.unbind(a.currentFeatureProviderBindingToken)}),this._currFeatureProviderBindings=[]};return b}(d.framework.ui.ViewSwitcher.ViewSwitcherViewModel);e.FeatureDetailsSwitcherViewModel=f})(e.FeatureDetails||(e.FeatureDetails={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,g){d.call(this,a,g);this._multiRegionCssBindingToken="";this.app.event("FeatureDetailsCurrentFeatureChanged").subscribe(this,this._handleFeatureChanged)}__extends(b,d);b.prototype.attach=function(a){d.prototype.attach.call(this,a);this.title.syncTransform(a.headerText,function(a){return String.unescapeHtml(a)});a.viewsToActivate.indexOf(this.id)===-1&&a.viewsToActivate.push(this.id)};b.prototype.resolveWidget=
function(a,g,h){d.prototype.resolveWidget.call(this,a,g,h);switch(a){case "FeatureDetailsRegionWidget":return(a=this.app.viewManager.createView({markupResource:"Framework.UI/geocortex/framework/ui/MultiRegion/MultiRegionView.html",libraryId:"Framework.UI",typeName:"geocortex.framework.ui.MultiRegion.MultiRegionView",isVisible:false}))&&a.attach(g),this._processView(a),a;case "FeatureActionsWidget":return this.app.menuRegistry.createMenuWidget(this,g,h)}};b.prototype.activated=function(){d.prototype.activated.call(this)};
b.prototype.deactivated=function(){d.prototype.deactivated.call(this);this.app.behavior("FeatureDetailsClosedBehavior").run()};b.prototype._handleFeatureChanged=function(){var a=this,g=this.app.command("ShowMap").postExecute.once(this,function(){setTimeout(function(){a.app.command("FocusOnFirstInputInView").execute(a)},0);g=null});this.app.event("ViewActivated").once(this,function(){g&&(a.app.command("ShowMap").postExecute.unsubscribe(g),setTimeout(function(){a.app.command("FocusOnFirstInputInView").execute(a)},
0))})};b.prototype._processView=function(a){var g=this,h=a.multiRegionViewElement,b="",a=function(){h.className=b+" "+g.viewModel.featureMultiRegionCss.get().trim()};if(this._multiRegionCssBindingToken)this.viewModel.featureMultiRegionCss.unbind(this._multiRegionCssBindingToken),this._multiRegionCssBindingToken="";if(h)b=h.className.trim(),a(),this._multiRegionCssBindingToken=this.viewModel.featureMultiRegionCss.bind(this,a)};return b}(d.framework.ui.ViewBase);e.FeatureDetailsView=f})(e.FeatureDetails||
(e.FeatureDetails={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.providerEnabled=new Observable(false)}__extends(b,d);return b}(d.framework.ui.ViewSwitcher.ViewSwitcherViewDescriptor);e.FeatureDetailsSwitcherViewDescriptor=f})(e.FeatureDetails||(e.FeatureDetails={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.initialize=function(a){d.prototype.initialize.call(this,a);a&&a.menus&&this.app.menuRegistry.loadMenus(a)};return b}(d.framework.application.ModuleBase);e.FooterModule=f})(e.footer||(e.footer={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.framework.ui.ViewBase);e.FooterView=f})(e.footer||(e.footer={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.backgroundColor=new Observable("White");this.height=new Observable(0)}__extends(b,d);b.prototype.initialize=function(a){d.prototype.initialize.call(this,a);a.hasOwnProperty("backgroundColor")&&this.backgroundColor.set(a.backgroundColor);a.hasOwnProperty("height")&&this.height.set(a.height)};return b}(d.framework.ui.ViewModelBase);e.FooterViewModel=f})(e.footer||(e.footer={}))})(e.modules||
(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){(function(d){d[d.OUTERMOST=0]="OUTERMOST";d[d.OUTER=1]="OUTER";d[d.INNER=2]="INNER";d[d.INNERMOST=3]="INNERMOST"})(f.GradientColorType||(f.GradientColorType={}));var i=function(d){function b(){d.apply(this,arguments);this._allowToggleForUserAddedLayers=true;this._defaultIntensity=30;this._defaultGradient=["#00FFFFFF","#FF0000FF","#FFFF0000","#FFFFFF00"]}__extends(b,d);b.prototype.initialize=function(a){var g=this;d.prototype.initialize.call(this,
a);if(Modernizr.canvas){if(a.allowToggleForUserAddedLayers!=null)this._allowToggleForUserAddedLayers=a.allowToggleForUserAddedLayers;if(a.intensity)this._defaultIntensity=a.intensity;if(a.gradientOptions){a=a.gradientOptions;if(a.outermostColor)this._defaultGradient[0]=a.outermostColor;if(a.outerColor)this._defaultGradient[1]=a.outerColor;if(a.innerColor)this._defaultGradient[2]=a.innerColor;if(a.innermostColor)this._defaultGradient[3]=a.innermostColor}if(this.app.map&&this.app.map.loaded)this._handleMapLoaded(this.app.map);
else this.app.event("MapLoadedEvent").once(this,function(a){g._handleMapLoaded(a)});this._registerCommandsAndEvents()}else this.app.trace.warning("The heat map module requires a Canvas enabled Browser. IE8 does not support Canvas.")};b.prototype._handleMapLoaded=function(){for(var a=this.app.site,g=0;g<a.essentialsMap.mapServices.length;g++){var h=a.essentialsMap.mapServices[g];if(h.heatMap&&h.heatMap.enabled)for(var b=0;b<h.layers.length;b++)this.app.command("AddHeatMap").execute({gcxLayer:h.layers[b],
onStartUp:true})}};b.prototype._registerCommandsAndEvents=function(){this.app.command("AddHeatMap").register(this,this._executeAddHeatMap,this._canExecuteAddHeatMap);this.app.command("RemoveHeatMap").register(this,this._executeRemoveHeatMap,this._canExecuteRemoveHeatMap);this.app.event("FeatureLayerOnlineEvent").subscribe(this,this._handleFeatureLayerOnlineEvent)};b.prototype._executeAddHeatMap=function(a){var g=this._getGeocortexLayer(a),h=e.infrastructure.VisualizationUtils.getFeatureHeatMap(g),
b=this._createHeatMapRenderer(h);if(b){var d=g.mapService.serviceLayer;if(!d||!(d instanceof esri.layers.GraphicsLayer))this.app.trace.warning("Could not add heat map for layer with ID '{0}'. Heat map requires a graphics layer".format(g.id));else{a.onStartUp||this.app.command("RemoveVisualization").execute({gcxLayer:g});h.enabled=true;if(!h.respectScaleRange)h.defaultMaxScale=d.maxScale?d.maxScale:0,h.defaultMinScale=d.minScale?d.minScale:0,d.setMaxScale(0),d.setMinScale(0);h.defaultRenderer=d.renderer;
d.setRenderer(b);this.app.command("AddHeatMap").raiseCanExecuteChanged();this.app.command("RemoveHeatMap").raiseCanExecuteChanged();this.app.event("HeatMapAddedEvent").publish(g);this.app.event("LayerVisualizationChangedEvent").publish(g)}}else this.app.trace.warning("Could not add heat map for layer with ID '{0}'. Invalid renderer configuration".format(g.id))};b.prototype._canExecuteAddHeatMap=function(a){return typeof a!=="string"&&a.onStartUp?true:(a=this._getGeocortexLayer(a))&&a.mapService&&
a.mapService.heatMap?!a.mapService.heatMap.enabled:false};b.prototype._executeRemoveHeatMap=function(a){var a=this._getGeocortexLayer(a),g=e.infrastructure.VisualizationUtils.getFeatureHeatMap(a),h=a.mapService.serviceLayer;if(!h||!(h instanceof esri.layers.GraphicsLayer))this.app.trace.warning("Could not remove heat map for layer with ID '{0}'. Heat map requires a graphics layer".format(a.id));else{g.enabled=false;var b=e.infrastructure.VisualizationUtils.getHeatMapRenderer(a);if(b)g.respectScaleRange||
(h.setMaxScale(g.defaultMaxScale),h.setMinScale(g.defaultMinScale)),g.intensity=b.blurRadius,g.field=b.field,h.setRenderer(g.defaultRenderer),g.defaultRenderer=null,g=b._canvas,g.parentNode.removeChild(g);this.app.command("AddHeatMap").raiseCanExecuteChanged();this.app.command("RemoveHeatMap").raiseCanExecuteChanged();this.app.event("HeatMapRemovedEvent").publish(a);this.app.event("LayerVisualizationChangedEvent").publish(a)}};b.prototype._canExecuteRemoveHeatMap=function(a){return typeof a!=="string"&&
a.onStartUp?true:(a=this._getGeocortexLayer(a))&&a.mapService&&a.mapService.heatMap?a.mapService.heatMap.enabled:false};b.prototype._handleFeatureLayerOnlineEvent=function(a){if(a.heatMap&&a.heatMap.enabled){var a=a.serviceLayer,g=a.renderer;a.setRenderer(null);a.setRenderer(g)}};b.prototype._getGeocortexLayer=function(a){return typeof a==="string"?!this.app.site||!this.app.site.essentialsMap?null:this.app.site.essentialsMap.allLayers().filter(function(g){return a===g.mapService.id})[0]:a.gcxLayer};
b.prototype._createHeatMapRenderer=function(a){if(a){var g=this._getHeatMapColors(a),h=new esri.renderer.HeatmapRenderer({colors:g,blurRadius:a.intensity?a.intensity:this._defaultIntensity,field:a.field?a.field:null});if(a.offset){for(var b=[],d=0;d<a.offset.length;d++)b[d]={ratio:a.offset[d],color:g[d]};h.setColorStops(b)}return h}};b.prototype._getHeatMapColors=function(a){var g=this;return a.gradient.length===0?this._defaultGradient.map(function(a){return e.infrastructure.ColorUtils.getStringFromHex(a)}):
a.gradient.map(function(a,b){return e.infrastructure.ColorUtils.getStringFromList(a)||e.infrastructure.ColorUtils.getStringFromHex(g._defaultGradient[b])})};return b}(d.framework.application.ModuleBase);f.HeatMapsModule=i})(f.heatMaps||(f.heatMaps={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.sliderElement=null;this.layerName=""}__extends(b,d);b.prototype.attach=function(a){d.prototype.attach.call(this,a);a.selectedLayer.bind(this,this._onSelectedLayerChanged)};b.prototype.added=function(a){d.prototype.added.call(this,a);this._setupJQuerySlider()};b.prototype._onSelectedLayerChanged=function(a){this.layerName=a.displayName;$(this.sliderElement).slider("value",this.viewModel.intensity.get())};
b.prototype._setupJQuerySlider=function(){var a=this;$(function(){var g={animate:false,min:b.SLIDER_MIN_VAL,max:b.SLIDER_MAX_VAL,step:b.SLIDER_STEP_INCREMENT,orientation:"horizontal",value:b.SLIDER_MIN_VAL,change:function(g,b){return a._handleSliderValueChanged(g,b)}};$(a.sliderElement).slider(g);g=$(a.sliderElement).children(".ui-slider-handle");g.attr("title",a.getResource("language-heat-maps-intensity-slider-tooltip"));g.text(a.getResource("language-heat-maps-intensity-slider-handle"))})};b.prototype._handleSliderValueChanged=
function(a,g){if(g&&g.value!=void 0){this.viewModel.intensity.set(g.value);var h="{0} {1}: {2} {3}".format(this.layerName,this.app.getResource(this.libraryId,"language-heat-maps-intensity-slider-intensity"),g.value,this.app.getResource(this.libraryId,"language-heat-maps-intensity-slider-pixels"));$(this.sliderElement).children("a").attr("aria-label",h)}};b.SLIDER_MIN_VAL=0;b.SLIDER_MAX_VAL=100;b.SLIDER_STEP_INCREMENT=1;return b}(d.framework.ui.ViewBase);e.HeatMapsView=f})(e.heatMaps||(e.heatMaps=
{}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(f){function b(a,g){var h=this;f.call(this,a,g);this._currentHeatMap=null;this.selectedLayer=new Observable(null);this.intensity=new Observable(null);this.fields=new ObservableCollection;this.selectedField=new Observable(null);this.disableFields=new Observable(false);this.selectedLayer.bind(this,function(a){h._currentHeatMap=e.infrastructure.VisualizationUtils.getFeatureHeatMap(a);h._currentHeatMap&&(h.fields.set(h._getNumericFields(a)),
h.selectedField.set(h._currentHeatMap.field?h._currentHeatMap.field:b.EMPTY_FIELD),h.intensity.set(h._currentHeatMap.intensity))});this.fields.bind(this,function(){h.disableFields.set(h.fields.get().length<2)});this.selectedField.bind(this,function(a){if(h._currentHeatMap&&h._currentHeatMap.field!==a)h._currentHeatMap.field=a});this.intensity.bind(this,function(a){if(h._currentHeatMap&&h._currentHeatMap.intensity!==a)h._currentHeatMap.intensity=a});this.app.event("VisualizationViewActivatedEvent").subscribe(this,
function(a){h.selectedLayer.set(a)})}__extends(b,f);b.prototype._getNumericFields=function(a){for(var a=a.fields,g=[{name:b.EMPTY_FIELD,displayName:this.app.getResource(this.libraryId,"language-heat-maps-none")}],h=0;h<a.length;h++){var d=a[h];this._isNumericFieldType(d.dataType)&&g.push({name:d.name,displayName:d.displayName})}if(g.length===1)g[h].displayName=this.app.getResource(this.libraryId,"language-heat-maps-no-fields");return g};b.prototype._isNumericFieldType=function(a){switch(a){case d.essentials.EssentialsFieldTypes.essentialsFieldTypeInteger:case d.essentials.EssentialsFieldTypes.essentialsFieldTypeSmallInteger:case d.essentials.EssentialsFieldTypes.essentialsFieldTypeSingle:case d.essentials.EssentialsFieldTypes.essentialsFieldTypeDouble:return true}return false};
b.EMPTY_FIELD="";return b}(d.framework.ui.ViewModelBase);f.HeatMapsViewModel=i})(f.heatMaps||(f.heatMaps={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){var i=function(f){function b(a,g){f.call(this,a,g);this.displayName=this.app.getResource(g,"language-heat-maps-name")}__extends(b,f);b.prototype.canSupport=function(a){return!Modernizr.canvas?false:a&&a.mapService?a.mapService.heatMap&&a.mapService.heatMap.userCanToggle:false};b.prototype.handleCurrentLayerChanged=function(a){Modernizr.canvas&&(a=d.infrastructure.VisualizationUtils.getFeatureHeatMap(a),this.isEnabled.set(a?a.enabled:
false),this.isSupported.set(a?a.userCanToggle:false))};b.prototype.handleActivate=function(){this.app.command("AddHeatMap").execute({gcxLayer:this.currentLayer.get()})};b.prototype.handleApply=function(){var a=this.currentLayer.get(),g=d.infrastructure.VisualizationUtils.getFeatureHeatMap(a),h=d.infrastructure.VisualizationUtils.getHeatMapRenderer(a);if(h){var b=false;h.blurRadius!==g.intensity&&(h.setBlurRadius(g.intensity),b=true);h.field!==g.field&&(h.setField(g.field),b=true);b&&a.mapService.serviceLayer.refresh()}};
return b}(d.infrastructure.visualization.VisualizationProviderBase);f.HeatMapVisualizationProvider=i})(f.heatMaps||(f.heatMaps={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,g){d.call(this,a,g)}__extends(b,d);b.prototype.attach=function(a){d.prototype.attach.call(this,a)};b.prototype.handleClickClose=function(){this.app.command("ClearActiveTool").execute()};b.prototype.handleToolbarItemClick=function(a,g,h){h.execute()};return b}(d.framework.ui.ViewBase);e.IdentifyOptionsView=f})(e.identify||(e.identify={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(f){function b(a,g){f.call(this,a,g);this.DEFAULT_BUFFER_ICON_URI="Resources/Images/Icons/Toolbar/buffer-identify-24.png";this.DEFAULT_SELECT_LAYERS_ICON_URI="Resources/Images/Icons/Toolbar/layers-filtered-24.png"}__extends(b,f);b.prototype.initialize=function(a){this.bufferOnIconUri=a.bufferOnIconUri||a.bufferIconUri||this.DEFAULT_BUFFER_ICON_URI;this.bufferOffIconUri=a.bufferOffIconUri||a.bufferIconUri||this.DEFAULT_BUFFER_ICON_URI;
this.selectLayersIconUri=a.selectLayersOnIconUri||a.selectLayersIconUri||this.DEFAULT_SELECT_LAYERS_ICON_URI;this.bufferToggleButton=new e.infrastructure.toolbarGroup.ToolbarToggleButton(this.app,this.libraryId,this._getBufferToggleButtonEntry());this.selectLayersButton=new e.infrastructure.toolbarGroup.ToolbarButton(this.app,this.libraryId,this._getSelectLayersButtonEntry())};b.prototype._getBufferToggleButtonEntry=function(){var a={};a.id=d.framework.utils.alphaNumericToken();a.type="toggleButton";
a.hideOnDisable=false;a.tooltip=this.app.getResource(this.libraryId,"language-toolbar-buffer-toggle-tooltip");a.toggleOn={};a.toggleOn.name=this.app.getResource(this.libraryId,"language-toolbar-toggle-buffer-on-name");a.toggleOn.iconUri=this.bufferOnIconUri;a.toggleOn.command="ActivateBufferingAndDisplayOptions";a.toggleOn.commandParameter="Identify";a.toggleOff={};a.toggleOff.name=this.app.getResource(this.libraryId,"language-toolbar-toggle-buffer-off-name");a.toggleOff.iconUri=this.bufferOffIconUri;
a.toggleOff.command="DeactivateBufferingAndDismissOptions";a.toggleOff.commandParameter="Identify";return a};b.prototype._getSelectLayersButtonEntry=function(){var a={};a.id=d.framework.utils.alphaNumericToken();a.type="button";a.tooltip=this.app.getResource(this.libraryId,"language-toolbar-select-layers-toggle-tooltip");a.name=this.app.getResource(this.libraryId,"language-toolbar-select-layers-toggle-on-name");a.command="ActivateSelectLayersForIdentify";a.commandParameter=null;a.hideOnDisable=false;
a.iconUri=this.selectLayersIconUri;return a};return b}(d.framework.ui.ViewModelBase);f.IdentifyOptionsViewModel=i})(f.identify||(f.identify={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){function d(b,a){this.app=b;this.identifyModule=a;if(this.app.site&&this.app.site.isInitialized)this.onSiteInitialized();else this.app.event("SiteInitializedEvent").once(this,this.onSiteInitialized)}d.prototype.onSiteInitialized=function(){this._loadMapServicesAndLayers();this.registerCommands();this.subscribeEvents()};d.prototype.registerCommands=function(){this.app.command("EnableAllLayersForIdentify").register(this,
this.executeEnableAllLayersForIdentify);this.app.command("DisableAllLayersForIdentify").register(this,this.executeDisableAllLayersForIdentify);this.app.command("EnableLayerForIdentify").register(this,this.executeEnableLayerForIdentify);this.app.command("DisableLayerForIdentify").register(this,this.executeDisableLayerForIdentify)};d.prototype.subscribeEvents=function(){this.app.event("MapServiceAddedEvent").subscribe(this,this._loadMapServicesAndLayers);this.app.event("MapServiceRemovedEvent").subscribe(this,
this._loadMapServicesAndLayers)};d.prototype.executeEnableAllLayersForIdentify=function(){for(var b=0;b<this.mapServiceLayersToIdentify.length;b++){var a=this.mapServiceLayersToIdentify[b],g=this.app.site.essentialsMap.findMapServiceById(a.mapServiceId);if(g){for(var h=[],d=0;d<g.layers.length;d++)g.layers[d].identifiable&&h.push(g.layers[d].id);a.layerIds=h;a.mapServiceIdentifiable=!!g.identifiable;this.app.event("AllLayersEnabledForIdentifyEvent").publish(this.mapServiceLayersToIdentify)}else this.app.trace.error("LayerSelectorForIdentify: Could not apply EnableAllLayersForIdentify to map service with id {0}. Map service not found.".format(a.mapServiceId))}};
d.prototype.executeDisableAllLayersForIdentify=function(){for(var b=0;b<this.mapServiceLayersToIdentify.length;b++){var a=this.mapServiceLayersToIdentify[b];a.mapServiceIdentifiable=false;a.layerIds=[]}this.app.event("AllLayersDisabledForIdentifyEvent").publish(this.mapServiceLayersToIdentify)};d.prototype.executeEnableLayerForIdentify=function(b){for(var a=0;a<this.mapServiceLayersToIdentify.length;a++){var g=this.mapServiceLayersToIdentify[a];if(g.mapServiceId===b.mapServiceId){var h=this.app.site.essentialsMap.findMapServiceById(b.mapServiceId),
d=b.layerId?h&&h.findLayerById(b.layerId):null;if(d&&d.identifiable||!d&&h&&h.identifiable){d?g.layerIds.push(b.layerId):g.mapServiceIdentifiable=true;this.app.event("LayerEnabledForIdentifyEvent").publish(b);break}}}};d.prototype.executeDisableLayerForIdentify=function(b){for(var a=0;a<this.mapServiceLayersToIdentify.length;a++){var g=this.mapServiceLayersToIdentify[a];if(g.mapServiceId===b.mapServiceId)if(b.layerId!=null)for(var h=g.layerIds.length-1;h>=0;h--){if(b.layerId!=null&&g.layerIds[h]===
b.layerId){g.layerIds.splice(h,1);this.app.event("LayerDisabledForIdentifyEvent").publish(b);break}}else if(g.mapServiceIdentifiable===true){g.mapServiceIdentifiable=false;this.app.event("LayerDisabledForIdentifyEvent").publish(b);break}}};d.prototype._loadMapServicesAndLayers=function(){this.mapServiceLayersToIdentify=[];for(var b=0;b<this.app.site.essentialsMap.mapServices.length;b++){for(var a=this.app.site.essentialsMap.mapServices[b],g=[],h=0;h<a.layers.length;h++)a.layers[h].identifiable&&g.push(a.layers[h].id);
this.mapServiceLayersToIdentify.push({mapServiceId:this.app.site.essentialsMap.mapServices[b].id,mapServiceIdentifiable:!!a.identifiable,layerIds:g})}this.app.event("AllLayersEnabledForIdentifyEvent").publish(this.mapServiceLayersToIdentify)};return d}();d.LayerSelectorForIdentify=e})(d.identify||(d.identify={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(){function f(b,a){this._identifyTaskErrorCount=this._identifyTaskCompletedCount=this._identifyTaskExecutedCount=0;this._isCancelled=this._taskExecutionComplete=false;this.mapServicesAndLayersToIdentify=this.delayedFSCOpen=this.tag=this.map=this.app=null;this.app=a||null;this.map=b}f.prototype.execute=function(b,a,g,h){var o=this,t=this.app.site.essentialsMap.mapServices.filter(function(a){if(a.mapServiceType===d.essentials.MapServiceType.IMAGE&&
a.isVisible()){var g=a.identifiable;if(o.mapServicesAndLayersToIdentify)for(var h in o.mapServicesAndLayersToIdentify)if(o.mapServicesAndLayersToIdentify.hasOwnProperty(h)&&o.mapServicesAndLayersToIdentify[h].mapServiceId===a.id)g=o.mapServicesAndLayersToIdentify[h].mapServiceIdentifiable;return g}return false});this.delayedFSCOpen&&t&&t.length>0&&this.delayedFSCOpen();this._identifyTaskErrorCount=this._identifyTaskCompletedCount=this._identifyTaskExecutedCount=0;this._taskExecutionComplete=false;
var f=new esri.tasks.ImageServiceIdentifyParameters,j=this._getIdentifyGeometry(b);f.geometry=j;f.returnGeometry=true;for(b=0;b<t.length;b++){var k=t[b],i=k.serviceLayer;f.returnCatalogItems=k.includeCatalogItems||k.includeMosaicDatasetValues;if(i.mosaicRule)f.mosaicRule=i.mosaicRule;if(i.renderingRule)f.renderingRule=i.renderingRule;this._identifyTaskExecutedCount++;var l=this;(new esri.tasks.ImageServiceIdentifyTask(e.infrastructure.taskUtils.getTokenizedUrl(k.serviceUrl,k))).execute(f,dojo.hitch(k,
function(h){if(!l._isCancelled)h.location=j,l._identifyTaskCompletedCount++,a(l,h,this),l._conditionallyInvokeCompleteCallback(l,g)}),dojo.hitch(k,function(a){l._isCancelled||(l._identifyTaskCompletedCount++,l._identifyTaskErrorCount++,h(l,a,this),l._conditionallyInvokeCompleteCallback(l,g))}))}this._taskExecutionComplete=true;this._conditionallyInvokeCompleteCallback(this,g)};f.prototype._getIdentifyGeometry=function(b){if(b instanceof esri.geometry.Point)return b;else if(b instanceof esri.geometry.Polygon)return b.getCentroid();
else if(b instanceof esri.geometry.Polyline)return e.infrastructure.GeometryUtils.getMiddle(b)};f.prototype._conditionallyInvokeCompleteCallback=function(b,a){b._taskExecutionComplete&&b._identifyTaskExecutedCount==b._identifyTaskCompletedCount&&a(b)};f.prototype.cancel=function(){this._isCancelled=true};return f}();f.RasterIdentifyTask=i})(f.identify||(f.identify={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex=
{}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this._identifyTask=null}__extends(b,d);b.prototype.initialize=function(a){d.prototype.initialize.call(this,a)};b.prototype.search=function(a,g){var h=this,b=null;if(!(g.restrictRasterIdentifyToPoint&&g.geometry.type!=="point")){if(g.delayFSCOpen)var d=a.id,f=false,b=function(){f||(f=true,h.app.featureSetManager.openCollection(d))};else this.app.featureSetManager.openCollection(a.id);this._identifyTask=
new e.RasterIdentifyTask(this.app.map,this.app);this._identifyTask.tag=a;if(g.identifiableLayerInfo)this._identifyTask.mapServicesAndLayersToIdentify=g.identifiableLayerInfo;if(b)this._identifyTask.delayedFSCOpen=b;setTimeout(function(){h._identifyTask.execute(g.geometry,function(a,g,b){h.identifyTaskProgress(a,g,b)},function(a){h.identifyTaskComplete(a)},function(a,g,b){h.identifyTaskError(a,g,b)})},0)}};b.prototype.identifyTaskProgress=function(a,g,h){var a=a.tag,b=new e.RasterIdentifyUtils(h,this.app,
this.libraryId);b.includeCatalogItems=h.includeCatalogItems;b.includeMosaicDatasetValues=h.includeMosaicDatasetValues;b.appendToFeatureSetCollection(g,a)};b.prototype.identifyTaskComplete=function(a){this.app.featureSetManager.tryCloseCollection(a.tag.id)};b.prototype.identifyTaskError=function(a,g,h){this.app.featureSetManager.tryCloseCollection(a.tag.id);a=this.getResource("language-identify-error-message",null).format(g.message,g.details);this.app.command("Alert").execute(a);h&&this.app.trace.error("Error performing identify operation on service {0}. Message: {1}. Error details: {2}.".format(h.serviceLayer.url,
g.message,g.details))};b.prototype.cancelSearch=function(){this._identifyTask&&this._identifyTask.cancel()};return b}(d.essentialsHtmlViewer.mapping.infrastructure.identify.IdentifyProviderBase);e.RasterIdentifyTaskIdentifyProvider=f})(e.identify||(e.identify={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(){function f(b,a,g){this.includeMosaicDatasetValues=this.includeCatalogItems=false;this._libraryId=g;this._mapService=b;this._app=a}f.prototype.appendToFeatureSetCollection=function(b,a){if(b){a==null&&(a=new e.infrastructure.FeatureSetCollection);if(b.value!=="NoData"){var g=this._mapService.serviceLayer.fields;if(b.location){var h=[],d=[],f=this._mapService.serviceLayer.bandCount;if((f&&f>0||!f)&&b.value){var k=[b.value];
this.includeMosaicDatasetValues&&b.properties&&b.properties.Values.length>0&&(k=k.concat(b.properties.Values));if(k&&k.length>0)for(var j=0;j<k.length;j++){var i=new esri.Graphic(b.location);i.attributes=[];var l;l=k[j].indexOf(",")!==-1?k[j].replace(/ /g,""):k[j].replace(/ /g,",");var q={};if(!f||f>1)q.value=l;for(var p=0;p<f;p++){var r=l.indexOf(","),r=r!==-1?r:0,u=r!=0?l.substring(0,r):l,w=f>1?"value"+(p+1).toString():"value";l=l.substring(r!==0?r+1:r,l.length);r=null;j===0?(r=this._getFieldTypeInformation(u),
d.push({name:w,alias:w,type:r})):r=d.filter(function(a){return a.name===w})[0].type;q[w]=this._parseAttributeValue(u,r)}i.setAttributes(q);h.push(i)}}this._createAndAddGcxFeatureSet("value",a,h,b.location.type,b.location.spatialReference,this._mapService.displayName+", {value}")}if(this.includeCatalogItems&&b.catalogItems&&b.catalogItems.features)h=b.catalogItems,h.displayFieldName=!h.displayFieldName?h.objectIdFieldName:g.length>0?g[0].name:h.displayFieldName,h.features=h.features.filter(function(a,
g){return b.catalogItems&&b.catalogItemVisibilities[g]===1?true:false}),g=this._app.getResource(this._libraryId,"language-rasterIdentify-catalogItem-labelFormat").format(this._mapService.displayName,"{"+h.displayFieldName+"}"),this._createAndAddGcxFeatureSetFromEsriFeatureSet(h,g,a)}return a}};f.prototype._parseAttributeValue=function(b,a){switch(a){case d.essentials.EsriFieldTypes.esriFieldTypeSingle:case d.essentials.EsriFieldTypes.esriFieldTypeDouble:return parseFloat(b);case d.essentials.EsriFieldTypes.esriFieldTypeSmallInteger:case d.essentials.EsriFieldTypes.esriFieldTypeInteger:return parseInt(b);
default:return null}};f.prototype._getFieldTypeInformation=function(b){if($.isNumeric(b))if(b=Number(b),Math.abs(b%1)!==0){if(b>=-3.4E38&&b<=1.2E38)return d.essentials.EsriFieldTypes.esriFieldTypeSingle;if(b>=-Infinity&&b<=Infinity)return d.essentials.EsriFieldTypes.esriFieldTypeDouble}else{if(b>=-32768&&b<=32767)return d.essentials.EsriFieldTypes.esriFieldTypeSmallInteger;if(b>=-2147483648&&b<=2147483647)return d.essentials.EsriFieldTypes.esriFieldTypeInteger}return d.essentials.EsriFieldTypes.esriFieldTypeString};
f.prototype._createAndAddGcxFeatureSet=function(b,a,g,h,d,e){b=new esri.tasks.FeatureSet({displayFieldName:b});b.geometryType=h;b.spatialReference=d;b.features=g;this._createAndAddGcxFeatureSetFromEsriFeatureSet(b,e,a)};f.prototype._createAndAddGcxFeatureSetFromEsriFeatureSet=function(b,a,g){var h=this,d=new e.infrastructure.FeatureSet({esriFeatureSet:b});d.displayName.set(this._mapService.displayName);d.iconUri.set(this._mapService.iconUri);d.features.get().forEach(function(g){g.labelFormat.set(a)});
if(d.features.get().filter(function(a){return e.infrastructure.GeometryUtils.needsProjection(a.esriFeature.get().geometry,h._app)}).length>0&&g){var b=d.features.get().map(function(a){return a.esriFeature.get().geometry}),f=new esri.tasks.ProjectParameters;f.geometries=b;f.outSR=this._app.map.extent.spatialReference;e.infrastructure.GeometryUtils.project(f,function(a){d.features.get().forEach(function(g,h){g.esriFeature.get().setGeometry(a[h])});g.featureSets.addItem(d)},function(){g.featureSets.addItem(d)},
this._app)}else g.featureSets.addItem(d)};f.prototype._convertEsriFeatureToGcxFeature=function(b,a,g,h,d){a=new e.infrastructure.Feature({graphic:a,layer:g,resolveLayerFields:!!h,allowUnsafeContent:!!d});a.labelFormat.set(b);return a};return f}();f.RasterIdentifyUtils=i})(f.identify||(f.identify={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(f){function b(a,g){f.call(this,a,g);this.VIEWER_TYPE_FOR_INSIGHT="Geocortex Viewer for HTML5";this.SECURITY_ISSUER_NAME="http://www.geocortex.net/security/claims/issuer-name";this.I_WANT_TO_MENU_ID="IWANTTO";this.TOOL_EVENT_SOURCE_IWTM="IWantToMenu";this.TOOL_EVENT_SOURCE_TOOLBAR="Toolbar";this._eventRelay=null;this._pendingEvents=[];this._datalinkResolutionTimes={};this._layerLoadTimes={};this._printTemplateTimes={};
this._reportTemplateTimes={};this._searchTimes={};this._webRequestTimes={};this._workflowTimes={}}__extends(b,f);b.prototype.initialize=function(a){var g=this;this._loggingEnabled=a&&a.enabled!=void 0?a.enabled:false;if(!(this._loggingEnabled===false||this.app.isOffline.get())){this._dataRelayIntervalInSeconds=a&&a.dataRelayIntervalInSeconds?a.dataRelayIntervalInSeconds:30;this._dataRelayUri=a&&a.dataRelayUri?a.dataRelayUri:"http://localhost/Geocortex/Insight/Insight/ClientRelay";if(this._requiresProxy(this._dataRelayUri))this._dataRelayUri=
this.app.configuration.proxyUri+this._dataRelayUri;this.app.site!=null&&this.app.site.isInitialized?this._onSiteInitialized():(this.app.event("SiteInitializingEvent").once(this,this._handleSiteInitializingStarted),this.app.event("SiteInitializedEvent").once(this,this._handleSiteInitializedCompleted),this.app.event("SiteInitializationFailedEvent").once(this,this._handleSiteInitializationFailed));if(this.app.map&&this.app.map.loaded)this._onMapInitialized();else this.app.event("MapLoadedEvent").once(this,
function(){g._onMapInitialized()});this._listenForUnhandledExceptions();this.app.event("AuthenticationSucceededEvent").once(this,function(a){return g._logAuthenticationEvent(a,true)});this.app.event("AuthenticationFailedEvent").once(this,function(a){return g._logAuthenticationEvent(a,false)});this.app.event("ActiveToolChangedEvent").subscribe(this,this._handleActiveToolChanged);this.app.event("DatalinkResolutionStartedEvent").subscribe(this,this._handleDatalinkResolutionStarted);this.app.event("DatalinkResolutionCompletedEvent").subscribe(this,
this._handleDatalinkResolutionCompleted);this.app.event("EsriWebRequestStartedEvent").subscribe(this,this._handleWebRequestStarted);this.app.event("EsriWebRequestCompletedEvent").subscribe(this,this._handleWebRequestCompleted);this.app.event("LayerVisibilityChangedEvent").subscribe(this,this._handleLayerVisibilityChanged);this.app.event("MenuItemInvokedEvent").subscribe(this,this._handleMenuItemInvoked);this.app.event("PrintTemplateStartedEvent").subscribe(this,this._handlePrintTemplateStarted);this.app.event("PrintTemplateCompletedEvent").subscribe(this,
this._handlePrintTemplateCompleted);this.app.event("ReportTemplateStartedEvent").subscribe(this,this._handleReportTemplateStarted);this.app.event("ReportTemplateCompletedEvent").subscribe(this,this._handleReportTemplateCompleted);this.app.event("SearchProgressEvent").subscribe(this,this._handleSearchProgressChanged);this.app.event("SiteLayerLoadingEvent").subscribe(this,this._handleSiteLayerLoading);this.app.event("SiteLayerLoadedEvent").subscribe(this,this._handleSiteLayerLoaded);this.app.event("ToolbarButtonClickedEvent").subscribe(this,
this._handleToolbarButtonClicked);this.app.event("TraceEvent").subscribe(this,this._handleTrace);this.app.event("WorkflowWebRequestStartedEvent").subscribe(this,this._handleWorkflowWebRequestStarted);this.app.event("WorkflowWebRequestCompletedEvent").subscribe(this,this._handleWorkflowWebRequestCompleted)}};b.prototype._onSiteInitialized=function(){this._eventRelay=new d.insight.EventRelay(this.VIEWER_TYPE_FOR_INSIGHT,this.app.configModel.viewerId,this.app.site.id,this.app.site.url,this.app.version,
this._dataRelayUri);this.app.map&&this.app.map.loaded&&this._eventRelay.setupMap(this.app.map);for(var a=0;a<this._pendingEvents.length;a++)this._eventRelay.logEvent(this._pendingEvents[a].eventName,this._pendingEvents[a].eventData);this._pendingEvents.length=0};b.prototype._onMapInitialized=function(){this._eventRelay!=null&&this._eventRelay.setupMap(this.app.map)};b.prototype._logEvent=function(a,g){this._loggingEnabled!==false&&(this._eventRelay!=null?this._eventRelay.logEvent(a,g):this._pendingEvents.push({eventName:a,
eventData:g}))};b.prototype._listenForUnhandledExceptions=function(){var a=this,g=window;typeof window.addEventListener!=="undefined"&&navigator.appVersion.indexOf("MSIE 9.")===-1?window.addEventListener("error",function(g){return a._onUnhandledException(g)}):typeof g.attachEvent!=="undefined"&&g.attachEvent("onerror",function(g){return a._onUnhandledException(g)});if(typeof Promise!=="undefined")Promise.onPossiblyUnhandledRejection(function(g){return a._onUnhandledException(g)})};b.prototype._logAuthenticationEvent=
function(a,g){var h=this,b=this.app.site.principal.identities[0].claims.filter(function(a){return a.type===h.SECURITY_ISSUER_NAME}),d={username:a.username,success:g};if(b.length>0)d.authority=b[0].value;this._logEvent("Authentication",d)};b.prototype._handleActiveToolChanged=function(a){if(a.tool){var g={name:a.tool.name,location:this.TOOL_EVENT_SOURCE_TOOLBAR};if(a.tool instanceof e.infrastructure.tools.MapTool)a=a.tool,g.command=a.command,g.drawMode=a.drawMode;this._logEvent("Tool",g)}};b.prototype._handleDatalinkResolutionStarted=
function(a){this._datalinkResolutionTimes[a]=new Date};b.prototype._handleDatalinkResolutionCompleted=function(a,g){var h=new Date,b=this._datalinkResolutionTimes[a];if(b!=null){var d=0;g.features.get().forEach(function(g){d+=g.dataLinkingResults.get().filter(function(g){return g.dataLink.get().id===a}).length});this._logEvent("Datalink",{datalinkID:a,featureResults:d,time:h.getTime()-b.getTime()})}};b.prototype._handleLayerVisibilityChanged=function(a){if(this.app.map.loaded!==false)for(var g=0;g<
a.length;g++){var h=a[g],b,e;switch(h.mapService.mapServiceType){case d.essentials.MapServiceType.DYNAMIC:b=h.mapService.serviceUrl+"/"+h.layer.id;e=h.mapService.serviceUrl;break;case d.essentials.MapServiceType.FEATURE:b=h.mapService.serviceUrl;e=/(.*)\/(MapServer|FeatureServer)\/(d*)/.exec(h.mapService.serviceUrl);e=e[1]+"/"+e[2];break;case d.essentials.MapServiceType.WMS:e=h.mapService.mapUrl;b=h.mapService.mapUrl+"layers="+h.layer.name;break;default:continue}this._logEvent("VisibleLayer",{layerURL:b,
mapServiceURL:e,visible:h.visibility})}};b.prototype._handleMenuItemInvoked=function(a){if(a.menuItem!=null&&a.menuItem.menuViewModel!=null&&a.menuItem.menuViewModel.menuId.toUpperCase()===this.I_WANT_TO_MENU_ID){var g={name:a.menuItem.menuItem.text,location:this.TOOL_EVENT_SOURCE_IWTM};g.command=a.menuItem.menuItem.command.name;g.commandParameter=a.menuItem.menuItem.commandParameter;this._logEvent("Tool",g)}};b.prototype._handlePrintTemplateStarted=function(a){this._printTemplateTimes[a.id]=new Date};
b.prototype._handlePrintTemplateCompleted=function(a){var g=new Date,h=this._printTemplateTimes[a.id];h!=null&&this._logEvent("Print",{templateID:a.id,time:g.getTime()-h.getTime()})};b.prototype._handleReportTemplateStarted=function(a){this._reportTemplateTimes[a]=new Date};b.prototype._handleReportTemplateCompleted=function(a,g,h){var b=new Date,d=this._reportTemplateTimes[a],e=this.app.site.essentialsMap.mapServices.filter(function(a){return a.id===g});if(e.length!==0){var f=e[0].layers.filter(function(a){return a.name===
h});f.length!==0&&d!=null&&this._logEvent("Report",{templateID:e[0].serviceUrl+"|"+f[0].id+"|"+a,time:b.getTime()-d.getTime()})}};b.prototype._handleSearchProgressChanged=function(a){if(!(a.searchType==null||a.searchType===""||a.searchType!=="ArcGIS"&&a.searchType!=="InstantSearch"&&a.searchType!=="InstantSearchHints"&&a.searchType!=="ArcGISGeocode"))if(a.status===e.infrastructure.search.Status.SEARCHING)this._searchTimes[a.searchType]==null&&(this._searchTimes[a.searchType]=new Date);else if(a.status===
e.infrastructure.search.Status.IDLE){var g=new Date,h=this._searchTimes[a.searchType];if(h!=null){var b=0;if(a.results!=null)for(var d=0;d<a.results.featureSets.getLength();d++){var f=a.results.featureSets.getAt(d);b+=f.features.getLength()}a.searchType==="ArcGISGeocode"?this._logEvent("Geocode",{mapServiceURL:a.endpointUrl,searchText:a.query,geocodeType:"Forward",resultCount:b,time:g.getTime()-h.getTime()}):this._logEvent("Search",{searchText:a.query,searchType:a.searchType,resultCount:b,time:g.getTime()-
h.getTime()})}this._searchTimes[a.searchType]=null}};b.prototype._handleSiteInitializingStarted=function(){this._siteInitializationStartTime=new Date};b.prototype._handleSiteInitializedCompleted=function(){var a=new Date,g=this._siteInitializationStartTime;g!=null&&this._logEvent("SiteInitialization",{time:a.getTime()-g.getTime()});this._onSiteInitialized()};b.prototype._handleSiteInitializationFailed=function(){this._loggingEnabled=false};b.prototype._handleSiteLayerLoading=function(a){this._layerLoadTimes[a.url]=
new Date};b.prototype._handleSiteLayerLoaded=function(a){var g=new Date,h=this._layerLoadTimes[a.url];if(h!=null){var b="",d="",d=/(.*)\/(MapServer|FeatureServer)\/(d*)/;d.test(a.url)?(b=d.exec(a.url),d=b[1]+"/"+b[2],b=a.url):d=a.url;this._logEvent("ServiceLayerInitialization",{layerURL:b,mapServiceURL:d,time:g.getTime()-h.getTime()})}};b.prototype._handleToolbarButtonClicked=function(a){this._logEvent("Tool",{name:a.id,location:this.TOOL_EVENT_SOURCE_TOOLBAR,command:a.commandName,commandParameter:a.commandParameter})};
b.prototype._handleTrace=function(a){a.level==="debug"||a.level==="trace"||a.level==="info"||this._logEvent("Log",{message:a.message,level:a.level,stackTrace:a.stack})};b.prototype._handleWebRequestStarted=function(a){/^(.*)\/GeometryServer\/(\w+)$/.test(a)&&(this._webRequestTimes[a]=new Date)};b.prototype._handleWebRequestCompleted=function(a){var g=/^(.*)\/GeometryServer\/(\w+)$/;if(g.test(a)){var h=new Date,b=this._webRequestTimes[a];b!=null&&(g=g.exec(a),this._logEvent("GeometryRequest",{mapServiceURL:g[1]+
"/GeometryServer",geometryCommand:g[2],time:h.getTime()-b.getTime()}));this._webRequestTimes[a]=null}};b.prototype._handleWorkflowWebRequestStarted=function(a,g){this._workflowTimes[g.id]=new Date};b.prototype._handleWorkflowWebRequestCompleted=function(a,g){var h=new Date,b=this._workflowTimes[g.id];b!=null&&this._logEvent("WorkflowRequest",{workflowID:g.id,workflowURL:a,time:h.getTime()-b.getTime()})};b.prototype._onUnhandledException=function(a){var g=a.error,a={message:typeof g!=="undefined"?
g.message:a};if(typeof g!=="undefined")a.stackTrace=g.stack;this._logEvent("UnhandledException",a)};b.prototype._requiresProxy=function(a){var a=new dojo._Url(a),g=window.location;return!a.scheme&&!a.host&&!a.port?false:g.protocol+"//"+g.hostname+(g.port?":"+g.port:"")===a.scheme+"://"+a.host+(a.port?":"+a.port:"")?false:true};return b}(d.framework.application.ModuleBase);f.InsightIntegrationModule=i})(f.insightIntegration||(f.insightIntegration={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping=
{}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(i){(function(k){var i=function(k){function b(){k.apply(this,arguments);this._connectedComponents=[];this._componentStates=[];this._eventSubscriptions=[];this._commandSubscriptions=[];this._previousScale=this._pitch=this._heading=0;this._componentIgnoreUpdates=this._ignoreUpdates=false;this._ignoreUpdateInterval=250}__extends(b,k);b.prototype.initialize=function(a){var g=this;this._incomingMessageTransport=new f.integration.PostMessageTransport(window,
null,"Viewer");this._incomingMessageTransport.allowOrigin("{0}//{1}".format(window.location.protocol,window.location.host));this._incomingMessageTransport.onMessage=function(a){return g._handleBridgeMessage(a)};a.allowedOrigins&&a.allowedOrigins.forEach(function(a){return g._incomingMessageTransport.allowOrigin(a)});this._registerCommandsAndEvents()};b.prototype._registerCommandsAndEvents=function(){this.app.command("ListenToExternalComponentFrame").register(this,this._executeListenToExternalComponentFrame);
this.app.command("ToggleExternalComponentSyncById").register(this,this._executeToggleExternalComponentSyncById);this.app.command("BroadcastCurrentViewpoint").register(this,this._executeBroadcastCurrentViewpoint);this.app.event("ComponentViewpointUpdatedEvent").subscribe(this,this._handleComponentViewpointUpdatedEvent);this.app.event("MapExtentChangedEvent").subscribe(this,this._handleMapExtentChangedEvent);this.app.event("ApplicationResizedEvent").subscribe(this,this._handleApplicationResizedEvent)};
b.prototype._handleComponentViewpointUpdatedEvent=function(a){var g=this,h=this._getComponent(this._commandOrEventSender);if(h){this._lastUpdaterName=h.id;if(h.sync&&a.heading)this._heading=a.heading;var b;b=a.extent?new esri.geometry.Extent(a.extent):new esri.geometry.Point(a.center);b.spatialReference=b.spatialReference||h.preferredSpatialReference;var d=new esri.tasks.ProjectParameters;d.geometries=[b];d.outSR=this.app.map.spatialReference;e.infrastructure.GeometryUtils.project(d,function(b){b=
b[0];if(b instanceof esri.geometry.Extent)h.sync&&!g._ignoreUpdates?(g.app.command("ZoomToExtent").execute(b),g._updateSyncedViewpointIndicator()):h.sync||g._updateViewpointIndicator(h.name,h.viewpointIndicatorUri,b.getCenter(),a.heading);else if(h.sync&&!g._ignoreUpdates){if(a.scale&&a.scale!==g._previousScale)g._previousScale=a.scale,g.app.command("ZoomToScale").execute(a.scale);g.app.command("PanToPoint").execute(b);g._updateSyncedViewpointIndicator()}else h.sync||g._updateViewpointIndicator(h.name,
h.viewpointIndicatorUri,b,a.heading)},function(a){g.app.trace.warning("An error occurred while attempting to project the current extent for third-party map components: "+a)},this.app)}else this.app.trace.warning("Received a viewpoint update from an unrecognized component.")};b.prototype._executeBroadcastCurrentViewpoint=function(a){if(a=this._getComponentByName(a)){var g=this._currentViewpoint;this._lastUpdaterName=null;g.updaterName=this._lastUpdaterName;this._updateViewpointIndicator(a.name,a.viewpointIndicatorUri,
g.extent.getCenter(),this._heading);this._broadcastViewpoint(g,a,true)}else this.app.trace.warning("Received a broadcast request from an unrecognized component.")};b.prototype._executeListenToExternalComponentFrame=function(a){var g=$(a.elementSelector,this.app.getHostElement())[0],h=g?g.contentWindow:a.contentWindow;if(h){var g=d.framework.utils.alphaNumericToken(32),b=a.name,h=new f.integration.PostMessageTransport(null,h,b);this._connectedComponents.push({id:g,name:b,transport:h,preferredSpatialReference:new esri.SpatialReference({wkid:4326}),
sync:false,viewpointIndicatorUri:a.viewpointIndicatorUri})}else this.app.trace.error("Could not listen to remote component. No element to listen to found for selector '{0}' and no context window provided.".format(a.elementSelector))};b.prototype._executeToggleExternalComponentSyncById=function(a){if(a=this._getComponentByName(a))if(a.sync=!a.sync,a.sync){this._removeViewpointIndicator(a.name);this._updateSyncedViewpointIndicator();var g=this._currentViewpoint;g.updaterName=null;this._broadcastViewpoint(g,
a)}else this._removeSyncedViewpointIndicator(),this._updateViewpointIndicator(a.name,a.viewpointIndicatorUri,this.app.map.extent.getCenter(),this._heading);else this.app.trace.warning("Received a sync update from an unrecognized component.")};b.prototype._handleHandshakeRequest=function(a){a.payload?(a=this._getComponentByName(a.payload))?(a.transport.send({messageName:d.essentialsHtmlViewer.integration.protocol.HandshakeResponse,componentId:a.id}),this._handleRemoteComponentInitialized(a)):this.app.trace.warning("Received a handshake request from an unrecognized component."):
this.app.trace.warning("Received a handshake request without a specified id.")};b.prototype._handleRemoteComponentDisconnect=function(a){var g=this._getComponent(a.componentId);g?(a.payload&&this._updateComponentState(a.payload),this._removeComponent(a.componentId),g.sync?this._removeSyncedViewpointIndicator():this._removeViewpointIndicator(g.name)):this.app.trace.warning("An unknown component broadcasted a disconnect message.")};b.prototype._updateComponentState=function(a){var g=d.framework.utils.ArrayUtils.firstOrDefault(this._componentStates,
function(g){return g.id===a.id});g&&d.framework.utils.ArrayUtils.removeItem(this._componentStates,g);this._componentStates.push(a)};b.prototype._removeComponent=function(a){a=this._getComponent(a);if(!a)return false;a=this._connectedComponents.indexOf(a);if(a<0)return false;this._connectedComponents.splice(a,1);return true};b.prototype._sendToAll=function(a,g){var h=this;this._connectedComponents.forEach(function(b){if(!(g&&b.id===g))try{b.transport.send(a)}catch(d){h.app.trace.warning("Could not send message '{0}' to component '{1}' (ID: '{2}'): {3}".format(a.messageName,
b.name,b.id,d))}})};b.prototype._sendTo=function(a,g){var h=this._getComponent(a);h&&h.transport.send(g)};b.prototype._getComponent=function(a){var g=this._connectedComponents.filter(function(g){return g.id===a})[0];return!g?(this.app.trace.warning("Could not find connected component with ID '{0}'.".format(a)),null):g};b.prototype._getComponentByName=function(a){var g=this._connectedComponents.filter(function(g){return g.name===a})[0];return!g?(this.app.trace.warning("Could not find connected component with name '{0}'.".format(a)),
null):g};b.prototype._handleBridgeMessage=function(a){var g=this;if(a.messageName===f.integration.protocol.HandshakeRequest)this._handleHandshakeRequest(a);else{var h=a.componentId,b=this._getComponent(h);if(!h||!b)this.app.trace.warning("Received a bridge message with missing or unknown component ID from sender. Discarding.");else switch(a.messageName){case f.integration.protocol.RemoteDisconnect:this._handleRemoteComponentDisconnect(a);break;case f.integration.protocol.RemotePublish:var d=a.commandOrEventName;
if(!d){this.app.trace.warning("Message from integration bridge was missing the 'commandOrEventName' field.");break}try{this._commandOrEventSender=a.componentId,d.endsWith("Event")?this.app.event(d).publish(a.payload):this.app.command(d).execute(a.payload)}finally{this._commandOrEventSender=null}break;case f.integration.protocol.RemoteSubscribe:d=a.commandOrEventName;if(!d){this.app.trace.warning("Message from integration bridge was missing the 'commandOrEventName' field.");break}if(d.endsWith("Event")){if(this._eventSubscriptions[d])break;
this._eventSubscriptions[d]=this.app.event(d).subscribe(this,function(a){g._sendToAll({messageName:f.integration.protocol.RemotePublish,commandOrEventName:d,payload:a})})}else{if(this._commandSubscriptions[d])break;this._eventSubscriptions[d]=this.app.command(d).register(this,function(a){g._sendToAll({messageName:f.integration.protocol.RemotePublish,commandOrEventName:d,payload:a})})}break;case f.integration.protocol.RemoteUnsubscribe:d=a.commandOrEventName,d.endsWith("Event")?(a=this._eventSubscriptions[d],
this.app.event(d).unsubscribe(a),delete this._eventSubscriptions[d]):(a=this._commandSubscriptions[d],this.app.command(d).unregister(a),delete this._commandSubscriptions[d])}}};b.prototype._handleMapExtentChangedEvent=function(a){this._updateViewpoint(a)};b.prototype._handleApplicationResizedEvent=function(){var a=this;this._componentIgnoreUpdates=true;this._ignoreUpdatesTimer=setTimeout(function(){a._componentIgnoreUpdates=false},this._ignoreUpdateInterval)};b.prototype._updateViewpoint=function(a){var g=
a.getCenter();this._currentViewpoint=a={timestamp:(new Date).getTime(),extent:a,position:{x:g.x,y:g.y},scale:this.app.map.getScale(),heading:this._heading,pitch:this._pitch,updaterName:this._lastUpdaterName};this._lastUpdaterName=null;this._updateSyncedViewpointIndicator(g);this._broadcastViewpoint(a)};b.prototype._updateSyncedViewpointIndicator=function(a){this._connectedComponents.some(function(a){return a.sync})&&(a=a||this.app.map.extent.getCenter(),this._updateViewpointIndicator("sync",b.DEFAULT_VIEWPOINT_INDICATOR_URI,
a,this._heading))};b.prototype._updateViewpointIndicator=function(a,g,h,b){var e=this;b===void 0&&(b=0);if(g){var f=this.app.site.getMap();if(f&&f.spatialReference){if(!this._indicatorLayer)this._indicatorLayer=new esri.layers.GraphicsLayer,this._indicatorLayer.on("mouse-down",function(a){e._onMouseDown(a)}),f.addLayer(this._indicatorLayer),Modernizr.touch&&this._indicatorLayer.getNode().addEventListener("touchstart",function(a){e._onTouchStart(a)});f=d.framework.utils.ArrayUtils.firstOrDefault(this._indicatorLayer.graphics,
function(g){return g.attributes.ID===a});f||(g=new esri.symbol.PictureMarkerSymbol(g,32,32),f=new esri.Graphic(h,g,{ID:a},null),this._indicatorLayer.add(f));f.symbol.setAngle((b+45)%360);f.setGeometry(h)}}};b.prototype._removeSyncedViewpointIndicator=function(){this._connectedComponents.some(function(a){return a.sync})||this._removeViewpointIndicator("sync")};b.prototype._removeViewpointIndicator=function(a){if(this._indicatorLayer){var g=d.framework.utils.ArrayUtils.firstOrDefault(this._indicatorLayer.graphics,
function(g){return g.attributes.ID==a});g&&this._indicatorLayer.remove(g)}};b.prototype._onMouseDown=function(a){var g=this;a.preventDefault();if(a.button===0){var h=a.graphic.attributes.ID;if(h!=="sync"){var b=this._getComponentByName(h);if(b){this.app.map.disableMapNavigation();this._ignoreUpdates=true;var d=null,e=null,f=null,k=a.graphic.symbol.angle-45,a=function(a){a.preventDefault();a.button!==0&&j(a);g._updateViewpointIndicatorComponent(b,a.mapPoint,k)},j=function(a){a.preventDefault();d.remove();
e.remove();f.remove();g._updateViewpointIndicatorComponent(b,a.mapPoint,k);g._ignoreUpdates=false;g.app.map.enableMapNavigation()},e=navigator.msPointerEnabled?this.app.map.on("mouse-move",a):this.app.map.on("mouse-drag",a),d=this.app.map.on("mouse-up",j),f=this.app.map.on("mouse-out",j)}else this.app.trace.warning("Viewpoint indicator is not associated with a remote component.")}}};b.prototype._onTouchStart=function(a){var g=this;a.preventDefault();var h=a.target.e_graphic.attributes.ID;if(h!=="sync"){var b=
this._getComponentByName(h);if(b){this.app.map.disableMapNavigation();this._ignoreUpdates=true;var d=a.target.e_graphic.symbol.angle-45,e=function(a){a.preventDefault();g._updateViewpointIndicatorComponent(b,a.mapPoint,d)},f=function(a){a.preventDefault();g.app.map.root.removeEventListener("touchmove",e);g.app.map.root.removeEventListener("touchend",f);g._updateViewpointIndicatorComponent(b,a.mapPoint,d);g._ignoreUpdates=false;g.app.map.enableMapNavigation()};this.app.map.root.addEventListener("touchmove",
e);this.app.map.root.addEventListener("touchend",f)}else this.app.trace.warning("Viewpoint indicator is not associated with a remote component.")}};b.prototype._updateViewpointIndicatorComponent=function(a,g,h){var b=this;h===void 0&&(h=0);if(a&&g)this._updateViewpointIndicator(a.name,a.viewpointIndicatorUri,g,h),h=new esri.tasks.ProjectParameters,h.geometries=[g],h.outSR=a.preferredSpatialReference,e.infrastructure.GeometryUtils.project(h,function(g){a.transport.send({messageName:f.integration.protocol.RemotePublish,
commandOrEventName:"ViewpointIndicatorUpdatedEvent",payload:g[0]})},function(a){b.app.trace.warning("An error occurred while attempting to project the current extent for third-party map components: "+a)},this.app)};b.prototype._broadcastViewpoint=function(a,g,h){var b=this;h===void 0&&(h=false);var d=g?[g]:this._connectedComponents;if(!this._componentIgnoreUpdates||h)for(var k=0;k<d.length;k++)if(g=d[k],g.sync||h){var j=new esri.tasks.ProjectParameters;j.geometries=[this.app.map.extent];j.outSR=g.preferredSpatialReference;
e.infrastructure.GeometryUtils.project(j,function(h){a.extent=h[0];a.position=a.extent.getCenter();b._ignoreUpdates=true;b._ignoreUpdatesTimer=setTimeout(function(){b._ignoreUpdates=false},b._ignoreUpdateInterval);g.transport.send({messageName:f.integration.protocol.RemotePublish,commandOrEventName:"ViewerPositionUpdatedEvent",payload:a})},function(a){b.app.trace.warning("An error occurred while attempting to project the current extent for third-party map components: "+a)},this.app)}};b.prototype._handleRemoteComponentInitialized=
function(a){var g=d.framework.utils.ArrayUtils.firstOrDefault(this._componentStates,function(g){return g.id===a.name});if(g)a.sync=g.sync;var h={viewpoint:null,sync:a.sync,hasPreviousState:g?true:false};if(g&&!g.sync)h.viewpoint={extent:g.viewpoint.extent,heading:g.viewpoint.heading,pitch:g.viewpoint.pitch,position:g.viewpoint.center,scale:g.viewpoint.scale,updaterName:null};a.transport.send({messageName:f.integration.protocol.RemotePublish,commandOrEventName:"ExternalComponentInitializedEvent",payload:h});
g?g.sync?(this._broadcastViewpoint(this._currentViewpoint,a,true),this._updateSyncedViewpointIndicator()):this._updateViewpointIndicator(a.name,a.viewpointIndicatorUri,this._currentViewpoint.extent.getCenter(),g.viewpoint.heading):(this._broadcastViewpoint(this._currentViewpoint,a,true),this._updateViewpointIndicator(a.name,a.viewpointIndicatorUri,this._currentViewpoint.extent.getCenter(),0))};b.DEFAULT_VIEWPOINT_INDICATOR_URI="Resources/Images/Icons/location-direction-blue-32.png";return b}(d.framework.application.ModuleBase);
k.IntegrationModule=i})(i.integration||(i.integration={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(e){function b(){e.apply(this,arguments)}__extends(b,e);b.prototype.attach=function(a){var g=this;e.prototype.attach.call(this,a);var h="iframe[data-frame-id='{0}']".format(a.frameId);d.framework.utils.addEventListener(this.frameElement,"load",function(){g.app.command("ListenToExternalComponentFrame").execute({elementSelector:h,name:g.viewModel.currentPaneItem.get().id,viewpointIndicatorUri:g.viewModel.currentPaneItem.get().viewpointIndicatorUri})})};
return b}(e.infrastructure.ui.components.MultiPane.PaneView);f.ExternalComponentPaneView=i})(f.integration||(f.integration={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(e){function b(){e.apply(this,arguments);this.uri=new Observable("")}__extends(b,e);b.prototype.initialize=function(a){e.prototype.initialize.call(this,a);this.frameId="frame-"+d.framework.utils.alphaNumericToken();a&&a.hasOwnProperty("uri")&&this.uri.set(a.uri)};return b}(e.infrastructure.ui.components.MultiPane.PaneViewModel);f.ExternalComponentPaneViewModel=i})(f.integration||(f.integration={}))})(e.modules||(e.modules=
{}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(e){function b(){e.apply(this,arguments);this.undockedPaneItems=new ObservableCollection;this.overlayIsVisible=new Observable(false);this.statusText=new Observable("")}__extends(b,e);b.prototype.initialize=function(a){e.prototype.initialize.call(this,a);a&&(a.hasOwnProperty("externalComponents")&&this.paneItems.addItems(a.externalComponents),a.hasOwnProperty("defaultComponents")&&this.setDefaultComponents(a.defaultComponents),
a.hasOwnProperty("statusText")&&this.statusText.set(a.statusText));this._registerCommandsAndEvents()};b.prototype.setDefaultComponents=function(a){if(this.paneItems.length()!=0){for(var g=0;g<a.length;g++)this.defaultPaneItems.addItem(d.framework.utils.ArrayUtils.firstOrDefault(this.paneItems.getItems(),function(h){return h.id===a[g]}));this.defaultPaneItems.getLength()==0&&this.defaultPaneItems.addItem(this.paneItems.getAt(0))}};b.prototype.findUndockedPaneItemById=function(a){return d.framework.utils.ArrayUtils.firstOrDefault(this.undockedPaneItems.getItems(),
function(g){return g.id&&g.id===a})};b.prototype.isUndockedPaneItem=function(a){return d.framework.utils.ArrayUtils.contains(this.undockedPaneItems.getItems(),a)};b.prototype.isDockedPaneItem=function(a){return d.framework.utils.ArrayUtils.contains(this.displayedPaneItems.getItems(),a)&&!d.framework.utils.ArrayUtils.contains(this.undockedPaneItems.getItems(),a)};b.prototype.haveDockedPanes=function(){return this.displayedPaneItems.length()>this.undockedPaneItems.length()};b.prototype._registerCommandsAndEvents=
function(){var a=this;this.app.event("MapMouseDownEvent").subscribe(this,function(){return a.overlayIsVisible.set(true)});this.app.event("MapMouseUpEvent").subscribe(this,function(){return a.overlayIsVisible.set(false)});this.app.event("PanelResizeStartEvent").subscribe(this,function(){return a.overlayIsVisible.set(true)});this.app.event("PanelResizeEndEvent").subscribe(this,function(){return a.overlayIsVisible.set(false)})};return b}(e.infrastructure.ui.components.MultiPane.MultiPaneViewModel);f.ExternalComponentViewModel=
i})(f.integration||(f.integration={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(j){function b(a,g){j.call(this,a,g);this._statusMessageViewId="externalComponentStatusMessageView";this._windowUnloadInterval=500;this._windowLoadInterval=250;this._isIE9=false;this._registerCommands();if(this.app.site&&this.app.site.isInitialized)this._siteInitialized();else this.app.event("SiteInitializedEvent").once(this,this._siteInitialized);this._isIE9=$(document.documentElement).hasClass("dj_ie9")}__extends(b,j);
b.prototype.deactivated=function(){j.prototype.deactivated.call(this);this.app.command("RemoveStatus").execute(this._statusMessageViewId)};b.prototype.resolveWidget=function(a,g){var h=this;return a==="Selector"?(this._selectorView=this.app.viewManager.createView({typeName:"geocortex.framework.ui.Selector.SelectorView",markup:"Framework.UI/geocortex/framework/ui/Selector/SelectorView.html",visible:true,app:this.app,libraryId:"Framework.UI"}),this.selector=new d.framework.ui.Selector.SelectorViewModel(this.app,
this.libraryId,false),this.selector.setCollection(this.viewModel.paneItems,"displayName",null),this.selector.selectorText.set(this.viewModel.selectorText.get()||this.app.getResource(this.libraryId,"language-integration-selector-text")),this.selector.noItemsText.set(this.app.getResource(this.libraryId,"language-integration-no-items")),this.selector.onSelectItem=function(a){return h.handleSelectPane(a.item)},this.selector.onUnselectItem=function(a){return h.handleUnSelectPane(a.item)},this._selectorView.attach(this.selector),
this._selectorView):j.prototype.resolveWidget.call(this,a,g,null)};b.prototype.handleUnSelectPane=function(a){this.destroyPaneItemById(a.id)};b.prototype.handleClickClose=function(){this.clearDockedPaneItems();this.deactivateContainer()};b.prototype.addPaneItem=function(a){if(!a||!this.canAddPaneItem(a))return null;this.viewModel.displayedPaneItems.addItem(a);this.app.command("ActivateView").execute(this.id);var g=new f.ExternalComponentPaneViewModel(this.app,this.libraryId);g.currentPaneItem.set(a);
g.initialize({uri:a.uri});var h=this.app.viewManager.createView({typeName:"geocortex.essentialsHtmlViewer.mapping.modules.integration.ExternalComponentPaneView",markupResource:"Mapping/modules/Integration/ExternalComponentPaneView.html",libraryId:this.libraryId||"Mapping",regionName:this.viewModel.regionName.get(),isVisible:true});this._panes.push(h);h.attach(g);this.selector.selectItem(a);this.handleApplicationResizedEvent();return h};b.prototype.destroyPaneItemById=function(a,g){g===void 0&&(g=
false);var h=this.viewModel.findUndockedPaneItemById(a);h?this.destroyUndockedPaneItem(h):g||(h=this.viewModel.findDisplayedPaneItemById(a),this.destroyPaneItem(h))};b.prototype.destroyPaneItem=function(a){a=j.prototype.destroyPaneItem.call(this,a);this.viewModel.haveDockedPanes()||this.app.command("DeactivateView").execute(this.id);return a};b.prototype.destroyUndockedPaneItem=function(a){if(a&&this.viewModel.isUndockedPaneItem(a)){if(a.window)a.window.close(),a.window=null;this.viewModel.undockedPaneItems.removeItem(a);
this.viewModel.displayedPaneItems.removeItem(a);this.selector.unselectItem(a)}};b.prototype.clearDockedPaneItems=function(){for(var a=this.viewModel.displayedPaneItems.getLength();a--;){var g=this.viewModel.displayedPaneItems.getAt(a);this.viewModel.isDockedPaneItem(g)&&this.destroyPaneItem(g)}};b.prototype.dockPaneItemById=function(a){var g=this,h=this.viewModel.findPaneItemById(a);this.viewModel.isUndockedPaneItem(h)&&this.destroyUndockedPaneItem(h);setTimeout(function(){g.addPaneItem(h)},this._windowUnloadInterval)};
b.prototype.undockPaneItemById=function(a){var g=this;if(this.app.shellName=="Tablet"||this._isIE9)this.app.trace.warning("Undocking an external component is not supported."),this.dockPaneItemById(a);else{var h=this.viewModel.findPaneItemById(a);if(h){var a=h.id.replace(/\W/g,""),b=window.open(h.uri,a);this.app.command("ListenToExternalComponentFrame").execute({elementSelector:null,name:h.id,contentWindow:b,viewpointIndicatorUri:h.viewpointIndicatorUri});setTimeout(function(){d.framework.utils.addEventListener(b,
"unload",function(){g.destroyPaneItemById(h.id,true)})},this._windowLoadInterval);this.viewModel.isDockedPaneItem(h)&&this.destroyPaneItem(h);this.viewModel.haveDockedPanes()||this.app.command("DeactivateView").execute(this.id);h.window=b;this.viewModel.undockedPaneItems.addItem(h);this.viewModel.displayedPaneItems.addItem(h);this.selector.selectItem(h)}}};b.prototype.handleApplicationResizedEvent=function(){j.prototype.handleApplicationResizedEvent.call(this);var a=this.scrollRegionElement,g=$(".view .pane .map-frame",
a);g.length!==0&&$(g).height(a.clientHeight)};b.prototype._registerCommands=function(){this.app.command("ShowExternalComponentView").register(this,this._executeShowExternalComponentView,this._canExecuteExternalComponentView);this.app.command("DisplayDockedExternalComponentById").register(this,this.dockPaneItemById);this.app.command("DisplayUndockedExternalComponentById").register(this,this.undockPaneItemById);this.app.command("RemoveExternalComponentById").register(this,this.destroyPaneItemById)};
b.prototype._siteInitialized=function(){var a=this;this.app.command("ShowExternalComponentView").raiseCanExecuteChanged();d.framework.utils.addEventListener(window,"unload",function(){a.viewModel.undockedPaneItems.getItems().forEach(function(a){a.window.close()})})};b.prototype._executeShowExternalComponentView=function(){this._executeShowMultiPaneView();var a=this.viewModel.statusText.get();if(a)a=new e.infrastructure.commandArgs.AddStatusArgs(a),a.id=this._statusMessageViewId,a.timeoutMS=0,this.app.command("AddStatus").execute(a)};
b.prototype._canExecuteExternalComponentView=function(){return this.viewModel&&this.viewModel.paneItems.getLength()>0};return b}(e.infrastructure.ui.components.MultiPane.MultiPaneView);f.ExternalComponentView=i})(f.integration||(f.integration={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){var i=function(f){function b(a,g){f.call(this,a,g);this._layerListItemType=d.infrastructure.layerList.LayerListItemType;this._rixits="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+/";this.name="layers";this.priority=1}__extends(b,f);b.prototype.initialize=function(a){var g=this;f.prototype.initialize.call(this,a);this.app.event("LayerListInitializedEvent").once(this,function(a){g.layerList=a})};b.prototype.apply=function(a){var g=
this;if(a)if(this.layerList)this._applyLayers(a,this.layerList);else this.app.event("LayerListInitializedEvent").once(this,function(h){g._applyLayers(a,h)})};b.prototype.generate=function(){var a=this;this.layerList.children.get();var g=[],h=function(g,b){for(var d=0;d<b.length;d++)a._getItemConfiguredVisiblity(b[d])!==b[d].isVisible.get()&&g.push(b[d].name.get()),b[d].children&&b[d].children.length()&&h(g,b[d].children.get())};h(g,this.layerList.children.get());for(var b="",d=0;d<g.length;d++){var e=
this._getHashValue(g[d]);b+=this._base10ToBase64(e)}return b};b.prototype._applyLayers=function(a){var g=this,h={},b=function(a,h){for(var d=0;d<h.length;d++){var e=g._getHashValue(h[d].name.get()).toString();a[e]=h[d];h[d].children&&h[d].children.length()&&b(a,h[d].children.get())}};b(h,this.layerList.children.get());for(var a=a.match(/.{1,6}/g),d=0;d<a.length;d++){var e=this._base64ToBase10(a[d]).toString();h.hasOwnProperty(e)&&(e=h[e],e.setItemVisibility(!this._getItemConfiguredVisiblity(e)))}};
b.prototype._getItemConfiguredVisiblity=function(a){switch(a.type){case 0:return a.configuredVisible;case 1:case 4:return a.mapService.gcxMapService.configuredVisible;case 2:case 3:return a.layer.gcxLayer.configuredVisible;default:return null}};b.prototype._getHashValue=function(a){a=String.quickHashCode(a);a<0&&(a>>>=0);return a};b.prototype._base10ToBase64=function(a){if(isNaN(Number(a))||a===null||a<0||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)return"";for(var g=Math.floor(a),
h="";;)if(a=g%64,h=this._rixits.charAt(a)+h,g=Math.floor(g/64),g==0)break;for(;h.length<6;)h=this._rixits.charAt(0)+h;return h};b.prototype._base64ToBase10=function(a){if(a.length!=6)return-1;for(var g=0,a=a.split(""),h=0;h<a.length;h++){var b=this._rixits.indexOf(a[h]);if(b<0)return-1;g=g*64+b}return g};return b}(d.infrastructure.sharing.SharingLinkProviderBase);f.LayersSharingLinkProvider=i})(f.layerList||(f.layerList={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(){e.apply(this,arguments)}__extends(b,e);b.prototype.attach=function(a){a&&(e.prototype.attach.call(this,a),this.registerCommands())};b.prototype.registerCommands=function(){this.app.command("ActivateSelectLayersForIdentify").register(this,this.executeActivateSelectLayersForIdentify);this.app.command("DeactivateSelectLayersForIdentify").register(this,this.executeDeactivateSelectLayersForIdentify)};b.prototype.executeActivateSelectLayersForIdentify=
function(){var a=this;d.framework.ui.animation.runWhenIdle(function(){a.app.viewManager.activateView(a);a.viewModel.activateSelectLayersForIdentify()})};b.prototype.executeDeactivateSelectLayersForIdentify=function(){this.app.viewManager.deactivateView(this);this.viewModel.deactivateSelectLayersForIdentify()};b.prototype.selectAllLayers=function(){this.viewModel.layerSelector.enableAllLayers()};b.prototype.clearAllLayers=function(){this.viewModel.layerSelector.disableAllLayers()};b.prototype.handleExpanderClick=
function(a,g,h){h.isExpanded.set(!h.isExpanded.get())};return b}(d.framework.ui.ViewBase);e.IdentifyLayerSelectorView=f})(e.layerSelector||(e.layerSelector={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(f){function b(a,g){f.call(this,a,g);this.selectAllButtonText=new Observable(this.app.getResource(g,"language-layer-selector-default-select-all-text"));this.clearAllButtonText=new Observable(this.app.getResource(g,"language-layer-selector-default-clear-all-text"));this.selectAllButtonTitle=new Observable(this.app.getResource(g,"language-layer-selector-default-select-all-tooltip"));this.clearAllButtonTitle=new Observable(this.app.getResource(g,
"language-layer-selector-default-clear-all-tooltip"));this.items=new ObservableCollection([])}__extends(b,f);b.prototype.initialize=function(a){f.prototype.initialize.call(this,a);if(this.app.map&&this.app.site.isInitialized)this._setupLayerSelector();else this.app.event("SiteInitializedEvent").once(this,this._setupLayerSelector)};b.prototype.onInitialized=function(){};b.prototype.filter=function(){return true};b.prototype.handleLayerStateChange=function(){};b.prototype.handleAllLayersEnabled=function(){};
b.prototype.handleAllLayersDisabled=function(){};b.prototype._setupLayerSelector=function(){var a=this;this.appInfo=d.essentialsHtmlViewer.mapping.infrastructure.gis.AppInfo.fromGeocortexApp(this.app);this.layerSelector=new e.infrastructure.layerSelector.LayerSelector(this.appInfo,{onInitializedHandler:function(g){return a.onInitialized(g)},layerFilter:function(g){return a.filter(g)},layerStateChangeHandler:function(g){return a.handleLayerStateChange(g)},enableAllLayersHandler:function(){return a.handleAllLayersEnabled()},
disableAllLayersHandler:function(){return a.handleAllLayersDisabled()}});this._subscribeEvents();this.items.sync(this.layerSelector.items);this.items.pulse()};b.prototype._subscribeEvents=function(){this.app.event("MapServiceAddedEvent").subscribe(this,this._handleMapServicesAdded);this.app.event("MapServiceRemovedEvent").subscribe(this,this._handleMapServiceRemoved)};b.prototype._handleMapServicesAdded=function(a){this.layerSelector.addUserAddedServiceLayer(a)};b.prototype._handleMapServiceRemoved=
function(a){this.layerSelector.removeServiceLayer(a)};return b}(d.framework.ui.ViewModelBase);f.LayerSelectorViewModelBase=i})(f.layerSelector||(f.layerSelector={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(d){function b(a,g){d.call(this,a,g);this.selectAllButtonTitle.set(this.app.getResource(g,"language-layer-selector-identify-select-all-tooltip"));this.clearAllButtonTitle.set(this.app.getResource(g,"language-layer-selector-identify-clear-all-tooltip"))}__extends(b,d);b.prototype.filter=function(a){return(a=a.itemType==="serviceLayer"?a.serviceLayer.gcxMapService:a.layer.gcxLayer)?a.identifiable:false};b.prototype.handleLayerStateChange=
function(a){this._setLayerStateForIdentify(a)};b.prototype.handleAllLayersEnabled=function(){this.app.command("EnableAllLayersForIdentify").execute()};b.prototype.handleAllLayersDisabled=function(){this.app.command("DisableAllLayersForIdentify").execute()};b.prototype.activateSelectLayersForIdentify=function(){var a=this,g=this.layerSelector.filteredLayerSelectorLayerItems.filter(function(a){return!a.isEnabled.get()});this.app.command("EnableAllLayersForIdentify").execute();g.length&&g.forEach(function(g){return a._setLayerStateForIdentify(g)});
this.app.event("SelectLayersForIdentifyActivatedEvent").publish(this.layerSelector.filteredLayerSelectorLayerItems.slice(0))};b.prototype.deactivateSelectLayersForIdentify=function(){this.app.command("EnableAllLayersForIdentify").execute();this.app.event("SelectLayersForIdentifyDeactivatedEvent").publish(this.layerSelector.filteredLayerSelectorLayerItems.slice(0))};b.prototype._setLayerStateForIdentify=function(a){var g=a.itemType==="serviceLayer"?a.serviceLayer.gcxMapService:a.layer.serviceLayerInfo.gcxMapService,
h=a.itemType==="layer"?a.layer.gcxLayer:null;if(g){var b={};b.mapServiceId=g.id;b.layerId=h?h.id:null;a.isEnabled.get()?this.app.command("EnableLayerForIdentify").execute(b):this.app.command("DisableLayerForIdentify").execute(b)}else this.app.trace.error("IdentifyLayerSelectorViewModel: Could not handle layer state change. MapService not defined.")};return b}(d.LayerSelectorViewModelBase);d.IdentifyLayerSelectorViewModel=e})(d.layerSelector||(d.layerSelector={}))})(d.modules||(d.modules={}))})(d.mapping||
(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.framework.application.ModuleBase);e.LayerSelectorModule=f})(e.layerSelector||(e.layerSelector={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.attach=function(a){a&&(d.prototype.attach.call(this,a),this.registerCommands())};b.prototype.registerCommands=function(){this.app.command("ActivateSelectLayersForSnapping").register(this,this.executeActivateSelectLayersForSnapping,this.canExecuteSnapping);this.app.command("DeactivateSelectLayersForSnapping").register(this,this.executeDeactivateSelectLayersForSnapping,
this.canExecuteSnapping)};b.prototype.executeActivateSelectLayersForSnapping=function(){this.app.viewManager.activateView(this);this.viewModel.activateSelectLayersForSnapping()};b.prototype.executeDeactivateSelectLayersForSnapping=function(){this.app.viewManager.deactivateView(this);this.viewModel.deactivateSelectLayersForSnapping()};b.prototype.canExecuteSnapping=function(){return this.app.command("ActivateSnapping").canExecute()};b.prototype.selectAllLayers=function(){this.viewModel.layerSelector.enableAllLayers()};
b.prototype.clearAllLayers=function(){this.viewModel.layerSelector.disableAllLayers()};b.prototype.handleExpanderClick=function(a,g,h){h.isExpanded.set(!h.isExpanded.get())};return b}(d.framework.ui.ViewBase);e.SnappingLayerSelectorView=f})(e.layerSelector||(e.layerSelector={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(d){function b(a,g){d.call(this,a,g);this.selectAllButtonTitle.set(this.app.getResource(g,"language-layer-selector-snapping-select-all-tooltip"));this.clearAllButtonTitle.set(this.app.getResource(g,"language-layer-selector-snapping-clear-all-tooltip"))}__extends(b,d);b.prototype.filter=function(a){if(a&&a.layer&&a.layer.gcxLayer)return(a=a.layer.gcxLayer)?a.snappable:false};b.prototype.handleLayerStateChange=function(a){this._setLayerStateForSnapping(a)};
b.prototype.handleAllLayersEnabled=function(){var a=this._getListedLayers();this.app.command("EnableAllLayersForSnapping").execute(a)};b.prototype.handleAllLayersDisabled=function(){var a=this._getListedLayers();this.app.command("DisableAllLayersForSnapping").execute(a)};b.prototype.onInitialized=function(a){this.app.event("SnappingProviderRegistered").once(this,function(){a.filteredLayerSelectorLayerItems.forEach(function(a){a&&a.layer&&a.layer.gcxLayer&&(a.layer.gcxLayer.snappingEnabled?a.isEnabled.set(true):
a.isEnabled.set(false))})})};b.prototype._getListedLayers=function(){var a=[];this.layerSelector.filteredLayerSelectorLayerItems.forEach(function(g){g&&g.layer&&g.layer.gcxLayer&&a.push(g.layer.gcxLayer)});return a};b.prototype.activateSelectLayersForSnapping=function(){this.app.event("SelectLayersForSnappingActivatedEvent").publish(this.layerSelector.filteredLayerSelectorLayerItems.slice(0))};b.prototype.deactivateSelectLayersForSnapping=function(){this.app.event("SelectLayersForSnappingDeactivatedEvent").publish(this.layerSelector.filteredLayerSelectorLayerItems.slice(0))};
b.prototype._setLayerStateForSnapping=function(a){if(a&&a.layer&&a.layer.gcxLayer){var g=a.layer.gcxLayer;g?a.isEnabled.get()?this.app.command("EnableLayerForSnapping").execute(g):this.app.command("DisableLayerForSnapping").execute(g):this.app.trace.error("SnappingLayerSelectorViewModel: Could not handle layer state change. Layer not defined.")}};return b}(d.LayerSelectorViewModelBase);d.SnappingLayerSelectorViewModel=e})(d.layerSelector||(d.layerSelector={}))})(d.modules||(d.modules={}))})(d.mapping||
(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){var i=function(d){function b(a,g){d.call(this,a,g);this.name="layerTheme";this.priority=0}__extends(b,d);b.prototype.generate=function(){var a=this.app.site.essentialsMap.layerThemesInfo;return a&&a.layerThemesConfigured?this.app.site.essentialsMap.layerThemesInfo.activeTheme.id:""};b.prototype.apply=function(a){var g=this;if(a)if(this.app.site&&this.app.site.serviceLayersLoaded)this._applyLayerTheme(a);else this.app.event("LayerListInitializedEvent").once(this,
function(){g._applyLayerTheme(a)})};b.prototype._applyLayerTheme=function(a){var g=this.app.site.essentialsMap.layerThemesInfo;g&&g.layerThemesConfigured?(g=g.getTheme(a,true))&&!g.isActive?g.applyToMap():this.app.trace.warning("Could not switch layer theme to {0}: Specified theme not found.".format(a)):this.app.trace.warning("Could not switch layer theme to {0}: No layer themes configured.".format(a))};return b}(d.infrastructure.sharing.SharingLinkProviderBase);f.LayerThemeSharingLinkProvider=i})(f.layerThemes||
(f.layerThemes={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(k){(function(k){var j=function(){function b(a,g,h){this.app=a;this.libraryId=g;this.useThrottledCollections=!!h}b.prototype.supportsOffline=function(){return true};b.prototype.provide=function(a){if(!(a instanceof d.infrastructure.ClusterLayer))return new d.infrastructure.legend.LegendItemProviderResponse(0,null);for(var g=this.app.site,h,b=0;b<g.essentialsMap.mapServices.length;b++){var f=g.essentialsMap.mapServices[b];if(f.serviceLayer===
a.featureLayer){h=f;break}}g=new d.infrastructure.legend.LegendItem(a,this.useThrottledCollections);g.label.set(h.displayName);for(b=0;b<h.layers.length;b++)h.layers[b].includeInLayerList&&this.populateItemForLayer(g,a,null);if(g&&g.children&&g.children.length()&&h.featureClustering.enabled)return new d.infrastructure.legend.LegendItemProviderResponse(2,g);else if(!h.featureClustering.enabled)return new d.infrastructure.legend.LegendItemProviderResponse(3,g)};b.prototype.populateItemForLayer=function(a,
g){var h=[];a.essLayer=g.gcxLayer;if(g&&g.renderer){(new f.legend.providers.FeatureLayerLegendProvider(this.app,this.libraryId,true)).populateItemForLayer(a,g.gcxLayer,g.singleFeatureLayer,g.gcxLayer.mapService.serviceUrl);for(var b=g.renderer.infos,t=0;t<b.length;t++){var k=b[t],j=new d.infrastructure.legend.LegendItem(g.featureLayer,this.useThrottledCollections);j.isCluster=true;j.essLayer=g.gcxLayer;j.isVisible.sync(g.rendererInformation[t].isVisible);j.label.sync(g.rendererInformation[t].rangeString);
j.swatchElement="<div class='simple-swatch circle' style='background-color: {0}; width: {1}px; height: {2}px; border-radius: 50%; background-clip: padding-box; border: 4px solid rgba({3}, {4}, {5}, 0.25);'></div>".format(k.symbol.color.toHex(),k.symbol.size,k.symbol.size,k.symbol.color.toRgb()[0],k.symbol.color.toRgb()[1],k.symbol.color.toRgb()[2]);h.push(j)}}a.children.addItems(h);if(a.children.getLength()>0)a.templateType="group"};return b}();k.ClusterLayerLegendProvider=j})(k.providers||(k.providers=
{}))})(f.legend||(f.legend={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){(function(f){var k=function(){function b(a,g,h){this.app=a;this.libraryId=g;this.useThrottledCollections=!!h}b.prototype.supportsOffline=function(){return true};b.prototype.provide=function(a){if(!(a instanceof esri.layers.FeatureLayer)||!Modernizr.canvas)return new d.infrastructure.legend.LegendItemProviderResponse(0,null);for(var g=this.app.site,h,b=0;b<g.essentialsMap.mapServices.length;b++){var f=g.essentialsMap.mapServices[b];if(f.serviceLayer===
a){h=f;break}}if(!h||!h.heatMap||!h.heatMap.enabled)return new d.infrastructure.legend.LegendItemProviderResponse(0,null);g=new d.infrastructure.legend.LegendItem(a,this.useThrottledCollections);g.label.set(h.displayName);for(b=0;b<h.layers.length;b++)f=h.layers[b],f.includeInLayerList&&this.populateItemForLayer(g,f,a,null);return g&&g.children&&g.children.length()?new d.infrastructure.legend.LegendItemProviderResponse(2,g):new d.infrastructure.legend.LegendItemProviderResponse(3,g)};b.prototype.populateItemForLayer=
function(a,g,h){var b=[];a.essLayer=g;if(h.renderer&&h.renderer instanceof esri.renderer.HeatmapRenderer)for(var f=h.renderer.colors.filter(function(a){return!a.match(/rgba.*,(?= 0\))/g)}),k=f.length-1;k>=0;k--){var j=f[k],i=new d.infrastructure.legend.LegendItem(h,this.useThrottledCollections);i.essLayer=g;var l="";k===0?l=this.app.getResource(this.libraryId,"language-legend-heat-maps-low"):k===f.length-1&&(l=this.app.getResource(this.libraryId,"language-legend-heat-maps-high"));i.label.set(l);i.swatchElement=
"<div class='simple-swatch square' style='background-color: {0}; border-color: {1};'></div>".format(j,j);b.push(i)}a.children.addItems(b);if(a.children.getLength()>0)a.templateType="group"};return b}();f.HeatMapLayerLegendProvider=k})(f.providers||(f.providers={}))})(f.legend||(f.legend={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){(function(f){var k=function(){function b(a,g,h){this.app=a;this.libraryId=g;this._featureLayerProvider=new f.FeatureLayerLegendProvider(this.app,this.libraryId);this.useThrottledCollections=!!h}b.prototype.supportsOffline=function(){return true};b.prototype.provide=function(a){if(!(a instanceof esri.layers.KMLLayer))return new d.infrastructure.legend.LegendItemProviderResponse(0,null);for(var g=this.app.site,h,b=0;b<g.essentialsMap.mapServices.length;b++){var f=
g.essentialsMap.mapServices[b];f.serviceLayer===a&&(h=f)}a=new d.infrastructure.legend.LegendItem(a,this.useThrottledCollections);h?a.label.set(h.displayName):a.label.set(this.app.getResource(this.libraryId,"language-legend-kml-default-title"));h=h.serviceLayer.getLayers();for(b=0;b<h.length;b++)h[b]instanceof esri.layers.FeatureLayer&&this._featureLayerProvider.populateItemForLayer(a,null,h[b],null);return a&&a.children&&a.children.length()?new d.infrastructure.legend.LegendItemProviderResponse(2,
a):new d.infrastructure.legend.LegendItemProviderResponse(3,a)};return b}();f.KMLLayerLegendProvider=k})(f.providers||(f.providers={}))})(f.legend||(f.legend={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){var i=function(f){function b(a,g){f.call(this,a,g);this._separator=",";this.name="center";this.priority=1}__extends(b,f);b.prototype.generate=function(){if(!this.app.map.extent)return"";var a=this.app.map.extent.getCenter();return"{1}{0}{2}".format(this._separator,a.x,a.y)};b.prototype.apply=function(a){var g=this;if(a){var h=a.split(this._separator);if(h.length>=2)if(this.app.site&&this.app.site.serviceLayersLoaded)this._applyCenter(h);
else this.app.event("SiteServiceLayersLoadedEvent").once(this,function(){g._applyCenter(h)});else this.app.trace.warning("Unable to parse the center parameter {0}: expected two comma separated number values.".format(a))}};b.prototype._applyCenter=function(a){for(var g=0;g<a.length;g++)if(isNaN(parseFloat(a[g]))){this.app.trace.warning("Unable to parse the center parameter value '{0}': invalid number value.".format(a[g]));return}g=new esri.geometry.Point(parseFloat(a[0]),parseFloat(a[1]));if(a.length>=
3&&!isNaN(parseInt(a[2])))g.spatialReference=new esri.SpatialReference(parseInt(a[2]));else if(this.app.map&&this.app.map.spatialReference)g.spatialReference=this.app.map.spatialReference;d.infrastructure.MapUtils.panToPointWithPriority(this.app,g,7,true)};return b}(d.infrastructure.sharing.SharingLinkProviderBase);f.CenterSharingLinkProvider=i})(f.map||(f.map={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex=
{}));
(function(d){(function(d){(function(d){(function(f){(function(f){var i=function(f){function b(a,g){f.call(this,a,g);this._separator=",";this.name="extent";this.priority=2}__extends(b,f);b.prototype.generate=function(){if(!this.app.map.extent)return"";var a=this.app.map.extent;return"{1}{0}{2}{0}{3}{0}{4}".format(this._separator,a.xmin,a.ymin,a.xmax,a.ymax)};b.prototype.apply=function(a){var g=this;if(a){var h=a.split(this._separator);if(h.length>=4)if(this.app.site&&this.app.site.serviceLayersLoaded)this._applyExtent(h);else this.app.event("SiteServiceLayersLoadedEvent").once(this,
function(){g._applyExtent(h)});else this.app.trace.warning("Unable to parse the extent parameter '{0}': expected four comma separated number values.".format(a))}};b.prototype._applyExtent=function(a){for(var g=0;g<a.length;g++)if(isNaN(parseFloat(a[g]))){this.app.trace.warning("Unable to parse the extent parameter value '{0}': invalid number value.".format(a[g]));return}g=new esri.geometry.Extent(parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),new esri.SpatialReference(4326));
a.length>=5&&!isNaN(parseInt(a[4]))?g.setSpatialReference(new esri.SpatialReference(parseInt(a[4]))):this.app.map&&this.app.map.spatialReference&&g.setSpatialReference(this.app.map.spatialReference);d.infrastructure.MapUtils.zoomToExtentWithPriority(this.app,g,7,true)};return b}(d.infrastructure.sharing.SharingLinkProviderBase);f.ExtentSharingLinkProvider=i})(f.map||(f.map={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||
(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){var i=function(d){function b(a,g){d.call(this,a,g);this.name="scale";this.priority=0}__extends(b,d);b.prototype.generate=function(){return!this.app.map.extent?"":this.app.map.getScale().toString()};b.prototype.apply=function(a){var g=this;if(a){var h=parseFloat(a);if(isNaN(h))this.app.trace.warning("Unable to parse the scale parameter {0}: expected a single number value.".format(a));else if(this.app.site&&this.app.site.serviceLayersLoaded)this.app.site.essentialsMap.extentManager.setScaleWithPriority(h,7);
else this.app.event("SiteServiceLayersLoadedEvent").once(this,function(){g.app.site.essentialsMap.extentManager.setScaleWithPriority(h,7)})}};return b}(d.infrastructure.sharing.SharingLinkProviderBase);f.ScaleSharingLinkProvider=i})(f.map||(f.map={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(f){function b(a,g){var h=this;f.call(this,a,g);this._markersLayer=null;this._markerConfigurations=[];this._activeMarkers=[];this._moveable=this._selectedMarker=null;if(this.app.map)this._map=this.app.map;else this.app.eventRegistry.event("MapLoadedEvent").once(this,function(){h._map=h.app.map});this._registerCommandsAndEvents()}__extends(b,f);b.prototype.initialize=function(a){f.prototype.initialize.call(this,a);if(a.markers)this._markerConfigurations=
a.markers};b.prototype._registerCommandsAndEvents=function(){this.app.command("ShowMarkers").register(this,this._executeShowMarkers);this.app.command("HideMarkers").register(this,this._executeHideMarkers);this.app.command("AddMarker").register(this,this._executeAddMarker);this.app.command("UpdateMarker").register(this,this._executeUpdateMarker);this.app.command("RemoveMarker").register(this,this._executeRemoveMarker)};b.prototype._executeShowMarkers=function(){this._setMarkersVisibility(true)};b.prototype._executeHideMarkers=
function(){this._setMarkersVisibility(false)};b.prototype._executeAddMarker=function(a){if(typeof a==="string"){var g=d.framework.utils.ArrayUtils.firstOrDefault(this._markerConfigurations,function(g){return g.id===a});g?this._addMarker(g):this.app.trace.warning("Could not find marker with ID '{0}'.".format(a))}else this._addMarker(a)};b.prototype._executeUpdateMarker=function(a){var g=this._getMarkerById(a.id);if(g){if(a.iconUri){if(!a.iconWidth||!a.iconHeight){this.app.trace.warning("Could not update the marker symbol because the required 'iconWidth' and 'iconHeight' was not supplied.");
return}var h=new esri.symbol.PictureMarkerSymbol(a.iconUri,a.iconWidth,a.iconHeight);if(!h){this.app.trace.warning("Could not update the marker symbol. Invalid icon configuration.");return}g.graphic.setSymbol(h)}if(a.symbolJson){h=esri.symbol.fromJson(a.symbolJson);if(!h){this.app.trace.warning("Could not update the marker symbol. Invalid json object.");return}g.graphic.setSymbol(h)}a.center&&this._updateGraphicCenter(g.graphic,a.center);a.geometry&&g.graphic.setGeometry(a.geometry);a.angle&&g.graphic.symbol.setAngle(a.angle);
if(a.visible!=null)g.graphic.visible=a.visible;if(a.draggable!=null)g.draggable=a.draggable;this.app.event("MarkerUpdatedEvent").publish(g.graphic)}else this.app.trace.warning("Could not find marker with ID '{0}'.".format(a.id))};b.prototype._executeRemoveMarker=function(a){var g=this._getMarkerById(a);g?(a=this._getMarkersLayer(),g.graphic&&a.remove(g.graphic),g=this._activeMarkers.indexOf(g),g<0||this._activeMarkers.splice(g,1)):this.app.trace.warning("Could not find marker with ID '{0}'.".format(a))};
b.prototype._setMarkersVisibility=function(a){this._getMarkersLayer().setVisibility(a)};b.prototype._addMarker=function(a){this._activeMarkers.filter(function(g){return g.id===a.id}).length>0&&(this.app.trace.warning("Removing previous marker with ID '{0}'. ".format(a.id)),this._executeRemoveMarker(a.id));var g;if(a.symbolJson)g=esri.symbol.fromJson(a.symbolJson);else if(a.iconUri){if(!a.iconWidth||!a.iconHeight){this.app.trace.warning("Could not create the marker symbol because the required 'iconWidth' and 'iconHeight' was not supplied.");
return}g=new esri.symbol.PictureMarkerSymbol(a.iconUri,a.iconWidth,a.iconHeight)}if(g){var h=a.geometry||a.center;h&&!(h instanceof esri.geometry.Geometry)&&(h=esri.geometry.fromJson(h));h||(h=this._map.extent.getCenter());var d={};d[b.MARKER_ATTRIBUTE_ID]=a.id;g=new esri.Graphic(h,g,d);this._getMarkersLayer().add(g);this._activeMarkers.push({id:a.id,draggable:a.draggable===false?false:true,graphic:g})}else this.app.trace.warning("Could not create the marker symbol.")};b.prototype._getGraphicCenter=
function(a){return e.infrastructure.GeometryUtils.getMiddle(a.geometry)};b.prototype._updateGraphicCenter=function(a,g){var h=this._map.toScreen(this._getGraphicCenter(a)),b=this._map.toScreen(g);this._updateGraphicPosition(a,b.x-h.x,b.y-h.y)};b.prototype._updateGraphicPosition=function(a,g,h){if(a)switch(a.geometry.type){case "point":var b=a.geometry,b=this._offsetPoint(b,g,h);a.setGeometry(b);break;case "multipoint":for(var b=a.geometry,d=0;d<b.points.length;d++){var f=b.getPoint(d),f=this._offsetPoint(f,
g,h);b.setPoint(d,f)}a.setGeometry(b);break;case "polyline":case "polygon":g=e.infrastructure.MatrixUtils.translate(a.geometry,this._map,g,h);a.setGeometry(g.geometry);break;case "extent":b=a.geometry,d=b.getCenter(),h=this._offsetPoint(d,g,h),g=h.x-d.x,h=h.y-d.y,b.xmin+=g,b.ymin+=h,b.xmax+=g,b.ymax+=h,a.setGeometry(b)}};b.prototype._offsetPoint=function(a,g,h){return this._map.toMap(this._map.toScreen(a).offset(g,h))};b.prototype._getMarkersLayer=function(){if(!this._markersLayer)this._markersLayer=
new esri.layers.GraphicsLayer,this._map.addLayer(this._markersLayer),this._attachEventHandlers(this._markersLayer);return this._markersLayer};b.prototype._attachEventHandlers=function(a){var g=this;dojo.on(a,"click",function(a){g.app.event("MarkerClickedEvent").publish(g._getPointerEventFromAGSMouseEvent(a));typeof a.preventDefault==="function"&&typeof a.stopPropagation==="function"&&(a.preventDefault(),a.stopPropagation())});dojo.on(a,"mouse-down",function(a){var b=g._getPointerEventFromAGSMouseEvent(a);
g.app.event("MarkerPointerDownEvent").publish(b);b=g._getMarkerById(b.id);b.draggable&&g._handleMarkerDragStart(b,a)});dojo.on(a,"mouse-up",function(a){g.app.event("MarkerPointerUpEvent").publish(g._getPointerEventFromAGSMouseEvent(a))})};b.prototype._getPointerEventFromAGSMouseEvent=function(a){var g=a.graphic.attributes[b.MARKER_ATTRIBUTE_ID],h=this._getMarkerById(g);return{id:g,graphic:h.graphic,mapPoint:a.mapPoint,screenPoint:a.screenPoint,button:a.button}};b.prototype._handleMarkerDragStart=
function(a,g){var h=this;if(a.draggable){var b=a.graphic.getShape();this._moveable=new dojox.gfx.Moveable(b);this._selectedMarker=a;this._map.disableMapNavigation();this._moveable.mover=new dojox.gfx.Mover(this._moveable.shape,g,this._moveable);this._moveable.onMoved=function(a){h._onMoveableMoved(a)};this._moveable.onMoveStop=function(a){h._onMoveableMoveStop(a)};this.app.event("MarkerDragStartEvent").publish({id:a.id,centerPoint:this._getGraphicCenter(a.graphic),mapPoint:g.mapPoint,screenPoint:g.screenPoint})}};
b.prototype._onMoveableMoved=function(a){this.app.event("MarkerDragEvent").publish(this._getDragEventFromMover(a))};b.prototype._onMoveableMoveStop=function(a){this.app.event("MarkerDragEndEvent").publish(this._getDragEventFromMover(a));this._updateGraphicPositionFromMover(this._selectedMarker.graphic,a);this._map.enableMapNavigation();this._selectedMarker=null;this._moveable.destroy();this._moveable=null};b.prototype._getDragEventFromMover=function(a){var g=this._getGraphicCenter(this._selectedMarker.graphic),
a=new esri.geometry.ScreenPoint(a.lastX,a.lastY),h=this._map.toMap(a);return{id:this._selectedMarker.id,centerPoint:g,mapPoint:h,screenPoint:a}};b.prototype._updateGraphicPositionFromMover=function(a,g){var h=g.shape,b=h.getTransform();h.setTransform(null);this._updateGraphicPosition(a,b.dx,b.dy)};b.prototype._getMarkerById=function(a){var g=d.framework.utils.ArrayUtils.firstOrDefault(this._activeMarkers,function(g){return g.id===a});return!g?(this.app.trace.warning("Could not find marker with ID '{0}'.".format(a)),
null):g};b.MARKER_ATTRIBUTE_ID="id";return b}(d.framework.application.ModuleBase);f.MarkersModule=i})(f.markers||(f.markers={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){d[d.LINE_SEGMENT=0]="LINE_SEGMENT";d[d.POLYLINE=1]="POLYLINE";d[d.POLYGON=2]="POLYGON"})(d.DescriptorType||(d.DescriptorType={}));var e=function(){function e(b,a,g){this.id="";this.graphicSymbol=this.graphic=this.spatialReference=this.labelStr=this.unitStr=this.lengthUnit=this.length=this.type=this.geometry=null;this.isActive=true;this.feature=null;this.app=g;this.type=b;this.spatialReference=a}e.prototype.addSegment=function(){};
e.prototype.setMeasurementUnit=function(){};e.prototype.setGeometry=function(){};e.prototype.addToMap=function(b,a){var g=null;if(this.isActive){if(!a&&!this.graphic)this.graphic=new esri.Graphic,this.graphic.geometry=this.geometry,this.graphic.symbol=this.graphicSymbol;g=a?a:this.graphic;g.measurementId=this.id;g=d.MeasurementUtils.addGraphicToLayer(g,b,this.app)?g:null}return g};e.prototype.updateFeature=function(){if(!this.feature)this.feature=new esri.Graphic,this.feature.geometry=this._polygonToPolyLine(this.geometry),
this.feature.symbol=this.graphicSymbol;this.feature.setAttributes(this._createAttributes())};e.prototype._createAttributes=function(){throw Error("DescriptorBase._createAttributes is abstract and must be overridden in derived classes.");};e.prototype._getResource=function(b){return this.app.getResource(d.measurementMarkupManager.libraryId,b)};e.prototype._formatMeasurement=function(b,a){return b==null||typeof b!=="number"?"":b.toLocaleString(this.app.locale,{maximumFractionDigits:a,minimumFractionDigits:0,
style:"decimal"})};e.prototype._polygonToPolyLine=function(b){if(!b||b.type!=="polygon")return b;var a=new esri.geometry.Polyline(b.rings);a.setSpatialReference(b.spatialReference);return a};return e}();d.DescriptorBase=e})(d.measurement||(d.measurement={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){function b(){}b.getIdNumber=function(a){a=a||window.event;a=a.currentTarget?a.currentTarget.id:this.getId(a.target||a.srcElement);return parseInt(a.replace(/^\D+/g,""))};b.getId=function(a){return a==null?"":a.tagName=="BUTTON"&&a.id?a.id:this.getId(a.parentNode)};return b}();d.StyleSelectorUtils=e})(d.styleSelector||(d.styleSelector={}))})(d.markup||(d.markup={}))})(d.modules||(d.modules={}))})(d.mapping||
(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){(function(f){var k=function(){function b(a,g,h,b,d){this.app=a;this.libraryId=g;this.layerType=h?h:"";this.offlineSupported=b?b:false;this.useThrottledCollections=d?d:false}b.prototype.supportsOffline=function(){return this.offlineSupported};b.prototype.provide=function(a){var g=this;if((a.declaredClass!=null?a.declaredClass:null)!==this.layerType)return new d.infrastructure.legend.LegendItemProviderResponse(0,null);if(Number(a.version)<
10.01)return new d.infrastructure.legend.LegendItemProviderResponse(0,null);if(a.url&&a.url.indexOf("/ImageServer")>=0)return new d.infrastructure.legend.LegendItemProviderResponse(0,null);for(var h=this.app.site,b="",f=null,k=0;k<h.essentialsMap.mapServices.length;++k){var j=h.essentialsMap.mapServices[k];if(j.serviceLayer===a){f=j;break}}h=null;f&&(h=this._getLegendUrl(f));h==null&&(h=a.url.replace("/MapServer","/MapServer/legend"));var i=new d.infrastructure.legend.LegendItem(a,this.useThrottledCollections),
h=esri.request({url:h,content:{f:"json"},handleAs:"json",callbackParamName:"callBack"}),l=new d.infrastructure.legend.LegendItemProviderResponse(4,i);h.then(function(h){g._handleLegendResponse(h,l,i,a,f)},function(a){g._handleLegendError(i,a)});f?b=j.displayName:(j=a.url.lastIndexOf("/"),j>-1&&(b=a.url.substr(j)));i.label.set(b);i.templateType="group";return l};b.prototype._handleLegendResponse=function(a,g,h,b,d){this._populateItemForLayer(a,g,h,b,d)};b.prototype._findGcxLayerForEsriLayer=function(a,
g){return a.findLayerById(g.layerId)};b.prototype._populateItemForLayer=function(a,g,h,b,f){if(a){h.isVisible.set(true);for(var k=0;k<a.layers.length;++k){var j=a.layers[k],i=null,l=null;if(f)if(i=this._findGcxLayerForEsriLayer(f,j)){if(!i.includeInLegend)continue;l=i.displayName}else continue;var q=new d.infrastructure.legend.LegendItem(b,this.useThrottledCollections);q.label.set(l||j.layerName);q.essLayer=i;for(l=0;l<j.legend.length;++l){var p=j.legend[l],r=new d.infrastructure.legend.LegendItem(b,
this.useThrottledCollections),u="data:{0};base64,{1}".format(p.contentType,p.imageData);r.swatchElement="<img src='{0}' />".format(u);r.label.set(!p.label?j.layerName:p.label);r.sublayerId=j.layerId;r.essLayer=i;q.children.addItem(r)}if(q.children.getLength()===1)j=q.children.getAt(0),j.templateType="single-item",j.label.set(q.label.get()),h.children.addItem(j);else if(q.children.getLength()>1)q.templateType="group",h.children.addItem(q)}if(h.children.getLength()>0)h.templateType="group";g.code.set(2)}else this.app.trace.warning("Could not fetch legend entry for '{0}'".format(b.url))};
b.prototype._handleLegendError=function(a,g){this.app.trace.warning("Error fetching legend information: "+g.toString());a.isVisible.set(false)};b.prototype._getLegendUrl=function(a){var g=null;a&&a.serviceLayer&&a.serviceLayer.url&&(g=a.serviceLayer.url.replace("/MapServer","/MapServer/legend"));g&&a.serviceToken&&!/.*token=.*/.test(g)&&(g+=g.indexOf("?")>-1?"&token=":"?token=",g+=encodeURIComponent(a.serviceToken));return g};return b}();f.ArcGISMapServiceLegendProvider=k})(f.providers||(f.providers=
{}))})(f.legend||(f.legend={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(b){function a(a,h,d){b.call(this,a,h,"esri.layers.ArcGISTiledMapServiceLayer",false,!!d)}__extends(a,b);return a}(d.ArcGISMapServiceLegendProvider);d.ArcGISTiledMapServiceLegendProvider=e})(d.providers||(d.providers={}))})(d.legend||(d.legend={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(j){function b(){j.apply(this,arguments);this._calloutMap={};this._calloutViewMap={};this._count=0;this._mapTipHeaderView=this._mapTipContentView=null;this._allowMultiple=false;this._lockWidth=true;this._contentField=null;this._isZooming=this._isPanning=false;this._pendingCommands=[];this._mapTipSuspended=false;this._mapTipEnabled=true}__extends(b,j);b.prototype.initialize=function(a){j.prototype.initialize.call(this,a);
if(a){if(a.lockWidth===false)this._lockWidth=a.lockWidth;if(a.allowMultiple)this._allowMultiple=!!a.allowMultiple;if(a.contentField)this._contentField=a.contentField;a.customSearchSuggestions&&this.app.featureSetManager.addSearchSuggestions(a.customSearchSuggestions)}this.registerCommands();this.subscribeEvents()};b.prototype._canExecuteMapTips=function(){return this._mapTipEnabled&&!this._mapTipSuspended};b.prototype.subscribeEvents=function(){var a=this;this.app.event("MapPanStartedEvent").subscribe(this,
function(){a._isPanning=true});this.app.event("MapPanEndedEvent").subscribe(this,function(){a._isPanning=false;a._isZooming||a.flushPendingCommands()});this.app.event("MapZoomStartedEvent").subscribe(this,function(){a._isZooming=true});this.app.event("MapZoomEndedEvent").subscribe(this,function(){a._isZooming=false;a._isPanning||a.flushPendingCommands()});this.app.event("MapTipClosedEvent").subscribe(this,function(){a._clearCurrentMapTipFeature()});this.app.event("ViewDimensionsChangedEvent").subscribe(this,
this._onViewDimensionsChangedEvent);this.app.event("FeatureDeletedEvent").subscribe(this,function(g){a._currentMapTipFeature&&g&&e.infrastructure.MapUtils.esriFeaturesEqual(a._currentMapTipFeature.esriFeature.get(),g)&&a.app.command("DeactivateView").execute("MapTipView")})};b.prototype.presentFeature=function(a){if(a&&this.configuration&&this.configuration.webMapFeaturePresenter)if(this.app.allLibrariesLoaded){var g=this.configuration.webMapFeaturePresenter;if(g.view&&g.viewModel){var h=g.view,b=
g.viewModel,f=a instanceof e.infrastructure.Feature?a:new d.essentialsHtmlViewer.mapping.infrastructure.Feature(a),k=this.app.viewManager.createView({type:h.type,markup:h.markup,visible:true,libraryId:h.libraryId});if(typeof h.configuration=="object")k.configuration=h.configuration;h=this.app.instantiateFrameworkObject(b.type,b.libraryId);h.id=b.viewModelId||d.framework.utils.alphaNumericToken();h.initialize(b.configuration||{});g=g.featurePropertyName||"currentFeature";if(h[g])h[g].set(f),k.attach(h),
k.title.sync(h.title),g=this.getMapTipCalloutId(),this._allowMultiple&&(g+=f.layer.id),a=a.mapPoint,!a&&f.esriFeature.get()&&(a=d.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.getMiddle(f.esriFeature.get().geometry)),f=new e.infrastructure.commandArgs.ShowMapElementArgs(g,a,k),f.destroyContentView=true,this.app.command("ShowMapCallout").execute(f)}}else this.app.trace.warning("Aborting map tip because not all libraries are loaded.")};b.prototype.flushPendingCommands=function(){for(var a=
0;a<this._pendingCommands.length;a++){var g=this._pendingCommands[a];this.app.command(g.commandName).execute(g.commandArgs)}this._pendingCommands.length=0};b.prototype.registerCommands=function(){var a=this;this.app.command("SuspendMapTips").register(this,function(){a._mapTipSuspended=true});this.app.command("ResumeMapTips").register(this,function(){a._mapTipSuspended=false});this.app.command("InvokeMapTip").register(this,this._onInvokeMapTip,this._canExecuteMapTips);this.app.command("ShowMapTip").register(this,
this._onShowMapTip,this._canExecuteMapTips);this.app.command("ShowMapTipInCallout").register(this,this._onShowMapTipInCallout,this._canExecuteMapTips);this.app.command("ShowMapTipResults").register(this,this._onShowMapTipResults,this._canExecuteMapTips);this.app.command("ShowMapTipResultsInCallout").register(this,this._onShowMapTipResultsInCallout,this._canExecuteMapTips);this.app.command("ShowMapCallout").register(this,this._onShowMapCallout);this.app.command("ShowMapElement").register(this,this._onShowMapElement);
this.app.command("HideMapElement").register(this,this._onHideMapElement);this.app.command("FixMapElementPosition").register(this,this._onFixMapElementPosition);this.app.command("DisableMapTips").register(this,this._executeDisableMapTips);this.app.command("EnableMapTips").register(this,this._executeEnableMapTips);this.app.command("HideAllMapTips").register(this,this._executeHideAllMapTips);this.app.command("RestoreAllMapTips").register(this,this._executeRestoreAllMapTips);this.app.command("HideMapTips").register(this,
this._executeHideMapTips);this.app.command("ShowMapTips").register(this,this._executeShowMapTips)};b.prototype._onInvokeMapTip=function(a){this.app.command("Identify").execute({geometry:a,source:"MapTip",delayFSCOpen:true,layerRestriction:function(a){return a.showMapTips}})};b.prototype._onShowMapTip=function(a){this._showMapTip(a,"ShowMapTip")};b.prototype._onShowMapTipInCallout=function(a){this._showMapTip(a,"ShowMapTipInCallout")};b.prototype._showMapTip=function(a,g){if(a&&(this.configuration.webMapFeaturePresenter&&
this.configuration.webMapFeaturePresenter.force||a.useFeaturePresenter))this.presentFeature(a);else if(typeof a==="string")g==="ShowMapTipInCallout"?this.app.command("ShowMapTipResultsInCallout").execute(a):this.app.command("ShowMapTipResults").execute(a);else if(!this.tryQueueCommand(g,a)){a.length&&a.length>0&&a[0]&&(a=a[0]);var h=d.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.getMiddle(a.esriFeature.get().geometry);h==null?this.app.trace.warning("Error ShowMapTip: {0}".format(this.app.getResource(this.libraryId,
"language-identify-no-geometry-for-map-tip-results"))):g==="ShowMapTipInCallout"?this._showMapTipInCallout(a,h):this._showMapTipInFixedView(a,h)}};b.prototype._showMapTipInCallout=function(a,g){(this._mapTipContentView==null||this._allowMultiple)&&this.createMapTipViews();this._mapTipContentView.viewModel.currentFeature.set(a);this.showMapTipInCallout(this.getMapTipCalloutId(),g,0)};b.prototype._showMapTipInFixedView=function(a){var g=this.app.viewManager.getViewById("MapTipView");if(g&&(this.app.viewManager.activateView(g),
a!=this._currentMapTipFeature)){g.viewModel.contentField=this._contentField;g.viewModel.currentFeature.set(a);for(var h=false,b=0;b<g.viewModel.features.length();b++)if(g.viewModel.features.getAt(b)===a){h=true;break}h||(g.viewModel.features.clear(),this._currentMapTipFeatureBindingToken&&g.viewModel.currentFeature.unbind(this._currentMapTipFeatureBindingToken),this._setCurrentMapTipFeature(a))}};b.prototype._onShowMapTipResults=function(a){this._showMapTipResults(a,"ShowMapTipResults")};b.prototype._onShowMapTipResultsInCallout=
function(a){this._showMapTipResults(a,"ShowMapTipResultsInCallout")};b.prototype._showMapTipResults=function(a,g){if(typeof a==="object"&&a instanceof e.infrastructure.Feature)this.app.command("ShowMapTip").execute(a);else if(!this.tryQueueCommand(g,a)){var h=this.app.featureSetManager.getCollectionById(a),b=d.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.getMiddle(h.tag);if(b==null)if(b=h.firstFeature(),b==null){var f;f=h.featureSets.bind(this,function(a){this.tryRerunShowMapTipResults(a,
h,f)});return}else if(b=d.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.getMiddle(b.esriFeature.get().geometry),b==null){b=this.app.getResource(this.libraryId,"language-identify-no-geometry-for-map-tip-results");this.app.command("Alert").execute(b);this.app.trace.error(b);return}g==="ShowMapTipResultsInCallout"?this._showMapTipResultsInCallout(h,b):this._showMapTipResultsInFixedView(h,b)}};b.prototype._showMapTipResultsInFixedView=function(a){var g=this,h=this.app.viewManager.getViewById("MapTipView");
if(h)this.app.viewManager.activateView(h),this.app.command("RemovePushpins").execute(),h.viewModel.contentField=this._contentField,h.viewModel.setFeatureSetCollection(a),this._currentMapTipFeatureBindingToken&&h.viewModel.currentFeature.unbind(this._currentMapTipFeatureBindingToken),this._currentMapTipFeatureBindingToken=h.viewModel.currentFeature.bind(this,function(a){g._currentMapTipFeature!==a&&g._setCurrentMapTipFeature(a)})};b.prototype._showMapTipResultsInCallout=function(a,g){(this._mapTipContentView==
null||this._allowMultiple)&&this.createMapTipViews();this._mapTipContentView.setFeatureSetCollection(a);this.showMapTipInCallout(this.getMapTipCalloutId(),g,1E3)};b.prototype._onShowMapCallout=function(a){var g=this;if(!this.tryQueueCommand("ShowMapCallout",a)){var h;this._calloutViewMap.hasOwnProperty(a.elementID)?h=this._calloutViewMap[a.elementID]:(h=this.createView("MapCalloutView"),this._calloutViewMap[a.elementID]=h,dojo.addClass(h.root,"map-callout-wrapper"));a.title?h.titleContent.set(a.getTitleNode()):
a.contentIsView()&&a.content.title?h.titleContent.syncTransform(a.content.title,function(a){return g._toHtmlElement(a)}):h.titleContent=new Observable(null);h.innerContent.set(a.getNode());h.titleView=a.titleIsView()?a.title:null;h.innerContentView=a.contentIsView()?a.content:null;h.buildTree();h.pulseAll();var b=new e.infrastructure.commandArgs.ShowMapElementArgs(a.elementID,a.mapPoint,h);b.delay=a.delay;h.destroyContentView=a.destroyContentView;this.app.command("ShowMapElement").execute(b)}};b.prototype._onShowMapElement=
function(a){if(!this.tryQueueCommand("ShowMapElement",a)){var g;this._calloutMap[a.elementID]?(g=this._calloutMap[a.elementID],g.getNode()==a.getNode()?g.show(a.mapPoint,a.delay):a.getNode()!=null?(g.attachToMap(a.elementID,a.getNode(),this.app.map,a.mapPoint,a.delay,a.contentIsView()?a.content:null),this._calloutMap[a.elementID]=g):g.doDelayedShow()):(g=new d.essentialsHtmlViewer.mapping.modules.maptips.MapCallout,g.lockWidth=this._lockWidth,g.attachToMap(a.elementID,a.getNode(),this.app.map,a.mapPoint,
a.delay,a.contentIsView()?a.content:null),this._calloutMap[a.elementID]=g);if(a.contentIsView())a.content.attached_calloutID=g.id}};b.prototype._onHideMapElement=function(a){this.tryQueueCommand("HideMapElement",a)||(this._calloutMap[a]&&(this._calloutMap[a].destroy(),delete this._calloutMap[a]),this._calloutViewMap[a]&&(this.app.viewManager.destroyView(this._calloutViewMap[a]),delete this._calloutViewMap[a]))};b.prototype._onFixMapElementPosition=function(a){!this.tryQueueCommand("FixMapElementPosition",
a)&&this._calloutMap[a]&&(this._calloutMap[a].notifyContentChanged(),this._calloutMap[a].fixPosition())};b.prototype._onViewDimensionsChangedEvent=function(a){if((a=a.view.attached_calloutID)&&this._calloutMap[a])this.app.command("FixMapElementPosition").execute(a),a=new e.infrastructure.commandArgs.ShowMapElementArgs(a),this.app.command("ShowMapElement").execute(a)};b.prototype._executeDisableMapTips=function(){this._destroyAll();this._mapTipEnabled=false};b.prototype._executeEnableMapTips=function(){this._mapTipEnabled=
true;this._mapTipSuspended=false};b.prototype._executeHideAllMapTips=function(){this._hideAll()};b.prototype._executeRestoreAllMapTips=function(){this._showAll()};b.prototype._executeHideMapTips=function(){this._hideAll();this.app.command("SuspendMapTips").execute()};b.prototype._executeShowMapTips=function(){this._showAll();this.app.command("ResumeMapTips").execute()};b.prototype._hideAll=function(){for(var a in this._calloutMap)a&&this._calloutMap.hasOwnProperty(a)&&this._calloutMap[a]&&this._calloutMap[a].hide();
this.app.command("DeactivateView").execute("MapTipView")};b.prototype._showAll=function(){for(var a in this._calloutMap)if(a&&this._calloutMap.hasOwnProperty(a)&&this._calloutMap[a]){var g=this._calloutMap[a];g.show(g.getMapPoint())}this.app.command("ActivateView").execute("MapTipView")};b.prototype._destroyAll=function(){var a=this,g=[],h;for(h in this._calloutMap)h&&this._calloutMap.hasOwnProperty(h)&&g.push(h);dojo.forEach(g,function(g){a.app.command("HideMapElement").execute(g)})};b.prototype._toHtmlElement=
function(a){if(a)if(a instanceof d.framework.ui.ViewBase)return a.root;else if(a.nodeName)return a;else{a=a.toString();this.app.configuration.allowUnsafeContent||(a=String.escapeHtmlEncode(a));var g=dojo.create("div");$(g).html(a);return g}else return null};b.prototype._clearCurrentMapTipFeature=function(){this._currentMapTipFeature&&(this._currentMapTipFeature.esriFeature.get().geometry.type=="point"?this.app.command("RemovePushpin").execute(this._currentMapTipFeature):this.app.command("ClearHighlights").execute())};
b.prototype._setCurrentMapTipFeature=function(a){if(a!=this._currentMapTipFeature){this._clearCurrentMapTipFeature();if(this._currentMapTipFeature=a)a.esriFeature.get().geometry.type=="point"?(this.app.command("EnablePushpins").execute(),this.app.command("ShowPushpins").execute(),this.app.command("AddPushpin").execute(a)):this.app.command("HighlightFeature").execute(a);this.app.behavior("MapTipFeatureChangedBehavior").run(a)}};b.prototype.createMapTipViews=function(){this._mapTipContentView=this.createView("MapTipContent");
this._mapTipHeaderView=this.createView("MapTipHeaderView");var a=new f.MapTipContentViewModel(this.app,this.libraryId);a.initialize({});a.contentField=this._contentField;this._mapTipContentView.attach(a);this._mapTipHeaderView.attach(a)};b.prototype.getMapTipCalloutId=function(){var a="MapTipResultsCallout";this._allowMultiple?a+=this._count++:this.app.command("HideMapElement").execute(a);return a};b.prototype.showMapTipInCallout=function(a,g,h){g=new e.infrastructure.commandArgs.ShowMapElementArgs(a,
g,this._mapTipContentView,this._mapTipHeaderView);g.delay=h;this.app.command("ShowMapCallout").execute(g);this._mapTipContentView.viewModel.containerView=this._calloutViewMap[a];this._mapTipContentView.viewModel.calloutID=a};b.prototype.tryQueueCommand=function(a,g){return this._isPanning||this._isZooming?(this._pendingCommands.push({commandName:a,commandArgs:g}),true):false};b.prototype.tryRerunShowMapTipResults=function(a,g,h){g.featureSets.unbind(h);this.app.command("ShowMapTipResults").execute(g.id)};
b.prototype.createView=function(a,g){return this.app.viewManager.createView({id:g,type:"geocortex.essentialsHtmlViewer.mapping.modules.maptips."+a,markup:this.libraryId+"/modules/MapTips/"+a+".html",visible:true,libraryId:this.libraryId})};return b}(d.framework.application.ModuleBase);f.MapTipsModule=i})(f.maptips||(f.maptips={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(d){function b(){d.apply(this,arguments);this._descriptionChangedToken=this._currentFeatureChangedToken=this._view=this._featureChangedSubscriptionToken=null}__extends(b,d);b.prototype.attach=function(a){var g=this;d.prototype.attach.call(this,a);this._featureChangedSubscriptionToken&&this.app.event("FeatureChangedEvent").unsubscribe(this._featureChangedSubscriptionToken);this._featureChangedSubscriptionToken=this.app.event("FeatureChangedEvent").subscribe(this,
this.handleFeatureChanged);this._currentFeatureChangedToken&&a.currentFeature.unbind(this._currentFeatureChangedToken);this._currentFeatureChangedToken=a.currentFeature.bind(this,function(a){g._currentFeature&&g._descriptionChangedToken&&g._currentFeature.description.unbind(g._descriptionChangedToken);if(g._currentFeature=a)g.handleFeatureChanged(a),g._descriptionChangedToken=a.description.bind(g,function(){g.handleFeatureChanged(a)})});this.viewModel.currentFeature.pulse()};b.prototype.destroy=function(){d.prototype.destroy.call(this);
if(this._featureChangedSubscriptionToken)this.app.event("FeatureChangedEvent").unsubscribe(this._featureChangedSubscriptionToken),this._featureChangedSubscriptionToken=null;this._currentFeature&&this._descriptionChangedToken&&this._currentFeature.description.unbind(this._descriptionChangedToken);this.viewModel&&this._currentFeatureChangedToken&&this.viewModel.currentFeature.unbind(this._currentFeatureChangedToken)};b.prototype.resolveWidget=function(a,g,h){d.prototype.resolveWidget.call(this,a,g);
if(g)switch(a){case "GetDescription":if(a=new e.infrastructure.FeatureDescriptionPresenterView(this.app,this.libraryId))return a.app=this.app,a.libraryId=this.libraryId,a.contentField=this.viewModel.contentField,a.root=dojo.create("div"),a.root.className="feature-description",a.root.setAttribute("tabindex","0"),g.hasRelationships&&g.hasRelationships.get()?a.descriptionApply(g,a.root):(h=a.descriptionGet(g),a.root.innerHTML=h),a.attach(g),this.viewModel.showNoResults.set(false),this.viewModel.showLoading.set(false),
this._view=a;break;case "MapTipActionsWidget":return this.app.menuRegistry.createMenuWidget(this,g,h);default:return null}};b.prototype.setFeatureSetCollection=function(a){this.viewModel&&this.viewModel.setFeatureSetCollection(a)};b.prototype.handleFeatureChanged=function(a){if(a&&this.viewModel.currentFeature.get()&&this.viewModel.currentFeature.get().token===a.token){var g=this._view;g.destroyBindings();if(a.hasRelationships&&a.hasRelationships.get())g.descriptionApply(a,g.root);else{var h=g.descriptionGet(a);
g.root.innerHTML=h}g.attach(a)}};return b}(d.framework.ui.ViewBase);f.MapTipContent=i})(f.maptips||(f.maptips={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.innerContent=new Observable(null);this.titleContent=new Observable(null);this.destroyContentView=false}__extends(b,d);b.prototype.activated=function(){if(this.innerContentView)this.innerContentView.isActive=true,this.innerContentView.activated();if(this.titleView)this.titleView.isActive=true,this.titleView.activated()};b.prototype.deactivated=function(){if(this.innerContentView)this.innerContentView.isActive=
false,this.innerContentView.deactivated();if(this.titleView)this.titleView.isActive=false,this.titleView.deactivated()};b.prototype.destroy=function(){d.prototype.destroy.call(this);this.innerContentView&&this.destroyContentView&&this.innerContentView.destroy();this.titleView&&this.destroyContentView&&this.titleView.destroy()};b.prototype.handleClose=function(){dojo.style(this.root,"display","none");var a=this.attached_calloutID;a&&this.app.command("HideMapElement").execute(a);this.app.event("MapCalloutClosedEvent").publish(a)};
return b}(d.framework.ui.ViewBase);e.MapCalloutView=f})(e.maptips||(e.maptips={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){function d(){this.position=this.id=null;this.lockWidth=true;this._startTop=this._startLeft=0;this._mapPoint=this._map=this._node=null;this._isVisible=false;this._connections=[];this._lastUpdateTime=null;this._makeVisibleAfterDelay=false}d.prototype.attachToMap=function(b,a,g,h,d,e){e===void 0&&(e=null);this.destroy();this.id=b;this._map=g;this._node=a;this._nodeView=e;this._mapPoint=h;this._isVisible=false;dojo.style(a,
{position:"absolute",left:"0px",top:"0px",display:"none"});dojo.place(a,dojo.byId("map_root"));this.show(h,d)};d.prototype.show=function(b,a){a||(a=0);this._mapPoint=b;this._isVisible=true;if(a>0)this._makeVisibleAfterDelay=true,setTimeout(dojo.hitch(this,this.doDelayedShow),a);else if(dojo.style(this._node,"width","auto"),this._mapPoint=b,this._makeVisibleAfterDelay=false,this._doResetPosition(),this._disconnectEventHandlers(),this._subscribeToMapEvent("onPanStart",this._onPanStart),this._subscribeToMapEvent("onPanEnd",
this._onPanEnd),this._subscribeToMapEvent("onPan",this._onPan),this._subscribeToMapEvent("onZoomStart",this._onZoomStart),this._subscribeToMapEvent("onZoomEnd",this._onZoomEnd),this.notifyContentChanged(),this._nodeView)this._nodeView.isActive=true,this._nodeView.activated()};d.prototype.doDelayedShow=function(){this._makeVisibleAfterDelay&&this.show(this._mapPoint)};d.prototype.hide=function(){this._makeNotVisible();this._disconnectEventHandlers();this._makeVisibleAfterDelay=this._isVisible=false;
if(this._nodeView)this._nodeView.isActive=false,this._nodeView.deactivated()};d.prototype._disconnectEventHandlers=function(){for(var b=0;b<this._connections.length;b++)dojo.disconnect(this._connections[b]);this._connections.length=0};d.prototype._makeNotVisible=function(){this._node!=null&&dojo.style(this._node,"display","none")};d.prototype._makeVisible=function(){this._node!=null&&dojo.style(this._node,"display","block")};d.prototype.destroy=function(){this.hide();this._node&&this._node.parentNode&&
this._node.parentNode.removeChild(this._node)};d.prototype.getNode=function(){return this._node};d.prototype.getMapPoint=function(){return this._mapPoint};d.prototype._subscribeToMapEvent=function(b,a){this._connections.push(dojo.connect(this._map,b,this,a))};d.prototype._onPanStart=function(){var b=this._setPositionByMapPoint(this._mapPoint);this._startLeft=b.x;this._startTop=b.y;this._lastUpdateTime=(new Date).getTime()};d.prototype._onPan=function(b,a){if(this._getEllapsedMilliseconds()>=0)this._node.style.WebkitTransform===
void 0?this._setPositionByScreenPoint(this._startLeft+a.x,this._startTop+a.y):this._node.style.WebkitTransform="translate({0}px, {1}px)".format(a.x,a.y),this._lastUpdateTime=(new Date).getTime()};d.prototype._onPanEnd=function(b){if(this._map.wrapAround180&&b.spatialReference._isWrappable()){if(b.spatialReference._isWebMercator()){for(;this._mapPoint.x*111319.4917+111319.4917<b.xmin;)this._mapPoint.x+=360;for(;this._mapPoint.x*111319.4917-111319.4917>b.xmax;)this._mapPoint.x-=360}else if(b.spatialReference.wkid==
4326){for(;this._mapPoint.x<b.xmin;)this._mapPoint.x+=360;for(;this._mapPoint.x>b.xmax;)this._mapPoint.x-=360}this._setPositionByMapPoint(this._mapPoint)}};d.prototype._getEllapsedMilliseconds=function(){if(this._lastUpdateTime==null)this._lastUpdateTime=(new Date).getTime();return(new Date).getTime()-this._lastUpdateTime};d.prototype.fixPosition=function(){this._isVisible&&this._doResetPosition()};d.prototype.notifyContentChanged=function(){var b=this;$(this._node).find("img").each(function(){if(!this.complete&&
!this.naturalWidth)this.attached_calloutConnection&&(dojo.disconnect(this.attached_calloutConnection),delete this.attached_calloutConnection),Object.prototype.hasOwnProperty.call(this,"attached_originalDisplayValue")||(this.attached_originalDisplayValue=dojo.style(this,"display")),dojo.style(this,"display","none"),this.attached_calloutConnection=dojo.connect(this,"load",b,function(a){this._contentLoaded(a)})})};d.prototype._contentLoaded=function(b){if(this._isVisible)b=b.target,dojo.style(b,"display",
b.attached_originalDisplayValue),b.attached_calloutConnection&&(dojo.disconnect(b.attached_calloutConnection),delete b.attached_calloutConnection),this._doResetPosition()};d.prototype._doResetPosition=function(){var b=dojo.style(this._node,"opacity");dojo.style(this._node,"opacity",0);this._makeVisible();dojo.position(this._node).w<=0||(dojo.style(this._node,"width","auto"),this._setPositionByMapPoint(this._mapPoint,this.lockWidth));dojo.style(this._node,"opacity",b)};d.prototype._setPositionByMapPoint=
function(b,a){var g=null,h=this._map.toScreen(b);if((g=dojo.position(this._node))&&h){var d;this.position&&g.w===0&&g.h===0?(d=h.x-this.position.w/2,h=h.y-this.position.h):(d=h.x-g.w/2,h=h.y-g.h,this.position=g);a&&dojo.style(this._node,"width",g.w+3+"px");this._setPositionByScreenPoint(d,h);return g=new esri.geometry.Point({x:d,y:h})}};d.prototype._setPositionByScreenPoint=function(b,a){if(this._node.style.WebkitTransform!==void 0)this._node.style.WebkitTransform="translate(0px, 0px)";dojo.style(this._node,
{left:b+"px",top:a+"px"})};d.prototype._onZoomStart=function(){this._makeNotVisible()};d.prototype._onZoomEnd=function(){this._isVisible&&(this._makeVisible(),this._setPositionByMapPoint(this._mapPoint))};return d}();d.MapCallout=e})(d.maptips||(d.maptips={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.attach=function(){this.app.event("ViewActivatedEvent").subscribe(this,this._activateMapHost);this.app.event("ViewDeactivatedEvent").subscribe(this,this._deactivateMapHost)};b.prototype._activateMapHost=function(a){a.id=="MapView"&&(this.app.command("ActivateView").execute(this.id),this.app.command("MapResize").execute())};b.prototype._deactivateMapHost=
function(a){a.id=="MapView"&&this.app.command("DeactivateView").execute(this.id)};return b}(d.framework.ui.ViewBase);e.MapHostView=f})(e.map||(e.map={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(f){function b(a,g){f.call(this,a,g);this._subscribedToMapEvents=false;this._config=null;this._isAndroid3plus=this._isAndroid=false;this._shownProjectError=null;this._showMapOnZoom=true;this._showMapOnPan=false;this._mapExtentLog=null;this._maxLogEntries=100;this._executeMapClickCommands=true;this._mapClickTimerHandles=[];this.registerCommands();this._shownProjectError=false;this.app.event("SiteInitializedEvent").subscribe(this,
this._handleSiteInitialized);this.app.event("LayerUpdateStartedEvent").subscribe(this,this._handleLayerUpdateStart);this.app.event("LayerUpdateEndedEvent").subscribe(this,this._handleLayerUpdateEnd);this.app.event("LayerAddedEvent").subscribe(this,this._handleLayerAdded);this.app.event("LayerRemovedEvent").subscribe(this,this._handleLayerRemoved);this._isAndroid3plus=this._androidSieve(navigator.userAgent,3);this._isAndroid=$(document.documentElement).hasClass("dj_android")}__extends(b,f);b.prototype.initialize=
function(a){f.prototype.initialize.call(this,a);a||(a={});if(!a.hasOwnProperty("showLoadingStatus"))a.showLoadingStatus=true;if(!a.hasOwnProperty("loadingMessageTiming")||!a.loadingMessageTiming.length)a.loadingMessageTiming=[1E3,3E3,3E3];if(!a.hasOwnProperty("defaultPointFeatureZoomScales")||!a.defaultPointFeatureZoomScales.length)a.defaultPointFeatureZoomScales=[];if(a.hasOwnProperty("panDuration")){var g=parseInt(a.panDuration);if(!isNaN(g))esri.config.defaults.map.panDuration=g}if(a.hasOwnProperty("panRate")&&
(g=parseInt(a.panRate),!isNaN(g)))esri.config.defaults.map.panRate=g;if(a.hasOwnProperty("zoomDuration")&&(g=parseInt(a.zoomDuration),!isNaN(g)))esri.config.defaults.map.zoomDuration=g;if(a.hasOwnProperty("zoomRate")&&(g=parseInt(a.zoomRate),!isNaN(g)))esri.config.defaults.map.zoomRate=g;a.tools&&this.app&&this.app.toolRegistry&&this.app.toolRegistry.createTools(a.tools,true);if(a.hasOwnProperty("showMapOnZoom"))this._showMapOnZoom=a.showMapOnZoom;if(a.hasOwnProperty("showMapOnPan"))this._showMapOnPan=
a.showMapOnPan;if(a.hasOwnProperty("maxExtentLogSize"))this._maxLogEntries=!isNaN(parseInt(a.maxExtentLogSize,10))?parseInt(a.maxExtentLogSize,10):this._maxLogEntries;this._config=a;this._mapExtentLog=new d.essentialsHtmlViewer.mapping.modules.map.MapExtentLog(this.app,this.libraryId,this._maxLogEntries);this.app.event("MapLoadedEvent").subscribe(this,this.subscribeToMapEvents);dojo.subscribe("FeatureClickedEvent",this,this.featureClickHandler)};b.prototype.registerCommands=function(){this.app.command("ZoomToLayerVisibleScale").register(this,
this._executeZoomToVisibleScale);this.app.command("ZoomToLayerExtent").register(this,this._executeZoomToLayerExtent);this.app.command("PanToAllFeatures").register(this,this._executePanToAllFeatures);this.app.command("PanToFeature").register(this,this._executePanToFeature,function(a){return a&&a.esriFeature&&a.esriFeature.get()&&a.esriFeature.get().geometry});this.app.command("PanToFeatureIfOutsideMapExtent").register(this,this._executePanToFeatureIfOutsideMapExtent,function(a){return a&&a.esriFeature&&
a.esriFeature.get()&&a.esriFeature.get().geometry});this.app.command("PanToPoint").register(this,this._executePanToPoint);this.app.command("Project").register(this,this._executeProject);this.app.command("RecenterMapOnNextMapResize").register(this,this._executeRecenterMapOnNextMapResize);this.app.command("ZoomOutToExtent").register(this,this._executeZoomOutToExtent);this.app.command("ZoomToFeatures").register(this,this._executeZoomToFeatures);this.app.command("ZoomToAllFeatures").register(this,this._executeZoomToAllFeatures);
this.app.command("ZoomToExtent").register(this,this._executeZoomToExtent);this.app.command("ZoomToFeature").register(this,this._executeZoomToFeature,this._canExecuteZoomToFeature);this.app.command("ZoomToFeatureIfOutsideMapExtent").register(this,this._executeZoomToFeatureIfOutsideMapExtent,this._canExecuteZoomToFeature);this.app.command("ZoomToScale").register(this,this._executeZoomToScale);this.app.command("ZoomToNamedExtent").register(this,this._executeZoomToNamedExtent);this.app.command("PanUp").register(this,
this._executePanUp);this.app.command("PanDown").register(this,this._executePanDown);this.app.command("PanLeft").register(this,this._executePanLeft);this.app.command("PanRight").register(this,this._executePanRight);this.app.command("SetTimeExtent").register(this,this._executeSetTimeExtent);this.app.command("EnableMapClick").register(this,this._executeEnableMapClick);this.app.command("DisableMapClick").register(this,this._executeDisableMapClick);this.app.command("EnableMapOnNextClick").register(this,
this._enableMapNextClick)};b.prototype._androidSieve=function(a,g){var h=a.match(/Android (\d+(?:\.\d+)+)/);return h!==null&&parseFloat(h[1])>=g?true:false};b.prototype._executeEnableMapClick=function(){this._executeMapClickCommands=true};b.prototype._executeDisableMapClick=function(){this._executeMapClickCommands=false;$(document.body).off("mousedown.nextClick touchstart.nextClick")};b.prototype._enableMapNextClick=function(){var a=this;$(document.body).off("mousedown.nextClick touchstart.nextClick");
if(this._isAndroid)setTimeout(function(){$(document.body).one("mousedown.nextClick touchstart.nextClick",function(){return a.app.command("EnableMapClick").execute()})},100);else $(document.body).one("mousedown.nextClick touchstart.nextClick",function(){return a.app.command("EnableMapClick").execute()})};b.prototype._executeRecenterMapOnNextMapResize=function(){if(this.app.map&&this.app.map.extent)var a=this,g=this.app.map.extent.getCenter(),h=dojo.connect(this.app.map,"onResize",function(){dojo.disconnect(h);
dojo.disconnect(b);dojo.disconnect(d);dojo.disconnect(e);g&&setTimeout(function(){var h=esri.config.defaults.map.panDuration;a.app.site.essentialsMap.extentManager.centerAtWithPriority(g,4);esri.config.defaults.map.panDuration=h},0)}),b=dojo.connect(this.app.map,"onExtentChange",function(a){g=a.getCenter()}),d=dojo.connect(this.app.map,"onPanStart",function(){g=null}),e=dojo.connect(this.app.map,"onPanEnd",function(a){g=a.getCenter()})};b.prototype._executeZoomOutToExtent=function(a){var g=this,h=
function(a){var h=null;if(a&&a.length>0){h=a[0];g.app.command("ShowMap").execute();var b=2,a=2;h.getWidth()>0&&(b=g.app.map.extent.getWidth()/h.getWidth());h.getHeight()>0&&(a=g.app.map.extent.getHeight()/h.getHeight());b*=g.app.map.extent.getWidth();a*=g.app.map.extent.getHeight();h=new esri.geometry.Extent(h.getCenter().x-b/2,h.getCenter().y-a/2,h.getCenter().x+b/2,h.getCenter().y+a/2,h.spatialReference);g.app.site.essentialsMap.extentManager.setExtentWithPriority(h,5)}};if(a&&a.isInstanceOf(esri.geometry.Extent))!a.spatialReference&&
this.app.map.spatialReference?(a.spatialReference=this.app.map.spatialReference,h([a])):(a=new d.essentialsHtmlViewer.mapping.infrastructure.commandArgs.ProjectArgs([a],h,function(a){g.app.trace.warning("ZoomOutToExtent: "+a.message)}),this.app.command("Project").execute(a))};b.prototype._executeZoomToExtent=function(a){d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtentWithPriority(this.app,a,10,this._showMapOnZoom)};b.prototype._executePanToPoint=function(a){d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.panToPointWithPriority(this.app,
a,9,this._showMapOnPan)};b.prototype._executeProject=function(a){var g=this;if(a&&a instanceof d.essentialsHtmlViewer.mapping.infrastructure.commandArgs.ProjectArgs)if(a.geometries.length>0&&!d.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.needsProjection(a.geometries[0],this.app)){var h=a.callback,b=a.errback;!a.callback||!dojo.isFunction(h)?b&&dojo.isFunction(b)&&b(Error("callback function required.")):h(a.geometries)}else{var b=function(h){if(g.app.isOffline.get()){if(!g._shownProjectError)g._shownProjectError=
true,g.app.command("Alert").execute(g.app.getResource(g.libraryId,"language-map-operation-unavailable-offline"))}else g.app.command("Alert").execute(g.app.getResource(g.libraryId,"language-map-operation-project-failed"));g.app.trace.warning(h);a.errback&&a.errback(h)},h=esri.tasks.ProjectParameters!==void 0?new esri.tasks.ProjectParameters:{};h.geometries=a.geometries;h.outSR=a.outputSpatialReference?a.outputSpatialReference:this.app.map.spatialReference;h.transformation=a.transformation;d.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.project(h,
a.callback,b,this.app)}};b.prototype._executeZoomToVisibleScale=function(a){if(a){var g=1,h=null,b=this.app.map;if(this.app.site.essentialsMap){var e=this.app.site.essentialsMap.calculateScale();e&&!(e<=0)&&(a.withinScaleRange(e)?h=null:e<a.maxScale?h=this._getClosestLODScale("greaterThan",a.maxScale)+1:e>a.minScale&&(h=this._getClosestLODScale("lessThan",a.minScale)-1),h&&(g=h/e),g===1?this.app.command("ShowMap").execute():(a=b.extent.getCenter(),d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtentWithPriority(this.app,
b.extent.expand(g).centerAt(a),8,this._showMapOnZoom)))}}};b.prototype._getClosestLODScale=function(a,g){var h=this.app.map,h=h.__tileInfo&&h.__tileInfo.lods;if(!h||!h.length)return g;for(var b=0,d=0;d<h.length;d++){if(h[d].scale===g)return g;if(a==="lessThan"){if(g<h[d].scale)continue}else if(h[d].scale>g){b=h[d].scale;continue}return a==="lessThan"?h[d].scale:b}};b.prototype._executeZoomToLayerExtent=function(a){a&&a.fullExtent&&d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtentWithPriority(this.app,
a.fullExtent,8,this._showMapOnZoom)};b.prototype._executeZoomToNamedExtent=function(a){var g=this;a?this.app.doWhenMapInitialized(function(){var h=g.app.site.namedExtents.filter(function(g){return g.displayName.toLowerCase().trim()===a.toLowerCase().trim()});(h=h.length?h[0]:null)?d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtentWithPriority(g.app,h.extent,8,g._showMapOnZoom):g.app.trace.error("Error ZoomToNamedExtent: could not find extent '{0}'.".format(a))}):this.app.trace.error("Error ZoomToNamedExtent: extent name was null.")};
b.prototype._executePanToFeature=function(a){!a||!(a instanceof d.essentialsHtmlViewer.mapping.infrastructure.Feature)?this.app.trace.error("Error PanToFeature: not a feature."):(a=a.esriFeature.get())&&a.geometry?this.app.command("PanToPoint").execute(a.geometry):this.app.trace.warning("Error PanToFeature: No geometry.")};b.prototype._executePanToFeatureIfOutsideMapExtent=function(a){if(!a||!(a instanceof d.essentialsHtmlViewer.mapping.infrastructure.Feature))this.app.trace.error("Error PanToFeatureIfOutsideMapExtent: not a feature.");
else{var g=a.esriFeature.get();!g||!g.geometry?this.app.trace.warning("Error PanToFeatureIfOutsideMapExtent: No geometry."):!this.app||!this.app.map?this.app.trace.error("Error ZoomToFeature: No access to the Esri map."):(!this.app.map.extent.intersects(g.geometry)||this._isObscuredByMapTipView(g.geometry))&&this.app.command("PanToFeature").execute(a)}};b.prototype._executePanToAllFeatures=function(a){if(a&&dojo.isArray(a))if(a.length==1)this.app.command("PanToFeature").execute(a[0]);else{for(var g=
null,h=0;h<a.length;h++){var b=a[h];if(b&&b instanceof d.essentialsHtmlViewer.mapping.infrastructure.Feature&&(b=b.esriFeature.get())&&b.geometry)b=d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.getExtent(b.geometry),g=g==null?b:g.union(b)}g&&d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.panToPointWithPriority(this.app,g,8,this._showMapOnPan)}};b.prototype._executeZoomToFeatures=function(a){a&&a instanceof d.essentialsHtmlViewer.mapping.infrastructure.FeatureSet&&this._executeZoomToAllFeatures(a.features.getItems())};
b.prototype._executeZoomToAllFeatures=function(a){if(a&&dojo.isArray(a))if(a.length==1)this._executeZoomToFeature(a[0]);else{for(var g=null,h=0;h<a.length;h++){var b=a[h];if(b&&b instanceof d.essentialsHtmlViewer.mapping.infrastructure.Feature&&(b=b.esriFeature.get())&&b.geometry)b=d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.getExtent(b.geometry),g=g==null?b:g.union(b)}g&&(g.getWidth()==0&&g.getHeight()==0?d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.panToPointWithPriority(this.app,
g.getCenter(),8,this._showMapOnPan):(g=g.expand(1.5),d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtentWithPriority(this.app,g,8,this._showMapOnZoom)))}};b.prototype._executeZoomToFeature=function(a){var g=this;if(!a||!(a instanceof d.essentialsHtmlViewer.mapping.infrastructure.Feature))this.app.trace.error("Error ZoomToFeature: No feature provided.");else if(!this.app||!this.app.map)this.app.trace.error("Error ZoomToFeature: No access to the Esri map.");else{var h;if(a.zoomExtent.get())d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtentWithPriority(this.app,
a.zoomExtent.get(),8,this._showMapOnZoom);else if(a.esriFeature.get()&&a.esriFeature.get().geometry){var b=a.esriFeature.get().geometry;if(h=a.zoomScale.get()){var e=null;e=b.type=="point"?b:(b=b.getExtent())?b.getCenter():null;var b=this.app.map.spatialReference.wkid?esri.geometry.getScale(this.app.map.extent,this.app.map.width,this.app.map.spatialReference.wkid):esri.geometry.getScale(this.app.map.extent,this.app.map.width,this.app.map.spatialReference.wkt),f=h/b;h=new d.essentialsHtmlViewer.mapping.infrastructure.commandArgs.ProjectArgs([e],
function(a){var h=null;a&&a.length>0&&(h=a[0]);h&&d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtentWithPriority(g.app,g.app.map.extent.centerAt(h).expand(f),8,g._showMapOnZoom)},function(){})}else b.type=="point"?h=new d.essentialsHtmlViewer.mapping.infrastructure.commandArgs.ProjectArgs([b],function(h){var b=null;h&&h.length>0&&(b=h[0]);b&&(h=g.app.map.extent.centerAt(b),b=g._pickDefaultZoomScaleForPointFeature(a),isNaN(b)&&(b=g.app.map.spatialReference.wkid?esri.geometry.getScale(h,
g.app.map.width,g.app.map.spatialReference.wkid):esri.geometry.getScale(h,g.app.map.width,g.app.map.spatialReference.wkt)),h=esri.geometry.getExtentForScale(g.app.map,a.calculateScaleToMakeVisible(b)).centerAt(h.getCenter()),d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtentWithPriority(g.app,h,8,g._showMapOnZoom))},function(){}):((h=a.zoomFactor.get())||(h=1.5),(b=b.getExtent())&&(b=d.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.fixAspectRatio(b.expand(h),this.app.map.extent)),
h=new d.essentialsHtmlViewer.mapping.infrastructure.commandArgs.ProjectArgs([b],function(h){var b=null;h&&h.length>0&&(b=h[0]);b&&(h=g.app.map.spatialReference.wkid?esri.geometry.getScale(b,g.app.map.width,g.app.map.spatialReference.wkid):esri.geometry.getScale(b,g.app.map.width,g.app.map.spatialReference.wkt),a.withinScaleRange(h)||(h=a.calculateScaleToMakeVisible(h),b=esri.geometry.getExtentForScale(g.app.map,h).centerAt(b.getCenter())),d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtentWithPriority(g.app,
b,8,g._showMapOnZoom))},function(){}));this.app.command("Project").execute(h)}else this.app.trace.warning("Error ZoomToFeature: No geometry.")}};b.prototype._executeZoomToFeatureIfOutsideMapExtent=function(a){if(!a||!(a instanceof d.essentialsHtmlViewer.mapping.infrastructure.Feature))this.app.trace.error("Error ZoomToFeatureIfOutsideMapExtent: No feature provided.");else if(!this.app||!this.app.map)this.app.trace.error("Error ZoomToFeature: No access to the Esri map.");else{if(this.app.map.extent){var g;
if(a.zoomExtent.get())g=a.zoomExtent.get();else if(a.esriFeature.get()&&a.esriFeature.get().geometry)g=a.esriFeature.get().geometry;else{this.app.trace.warning("Error ZoomToFeatureIfOutsideMapExtent: No geometry.");return}if(this.app.map.extent.intersects(g)&&!this._isObscuredByMapTipView(g))return}this.app.command("ZoomToFeature").execute(a)}};b.prototype._canExecuteZoomToFeature=function(a){if(a&&a.esriFeature&&a.esriFeature.get()&&a.esriFeature.get().geometry)if(this.app.isOffline.get()){var g=
this.app.map.spatialReference,a=a.esriFeature.get().geometry.spatialReference;return g.equals(a)||g.isWebMercator()&&a.wkid===4326||a.isWebMercator()&&g.wkid===4326}else return true;return false};b.prototype._isObscuredByMapTipView=function(a){if(!a)return false;var g=this.app.viewManager.getViewById("MapTipView");if(!g||!g.root)return false;var h=g.root.getBoundingClientRect(),g=this.app.map.toMap(new esri.geometry.ScreenPoint(h.left-this.app.map.position.x,h.bottom-this.app.map.position.y)),h=this.app.map.toMap(new esri.geometry.ScreenPoint(h.right-
this.app.map.position.x,h.top-this.app.map.position.y));return(new esri.geometry.Extent(g.x,g.y,h.x,h.y,this.app.map.spatialReference)).contains(e.infrastructure.MapUtils.getExtent(a))};b.prototype.calculateScaleToMakeVisible=function(){return null};b.prototype._executeZoomToScale=function(a){a&&this.app&&this.app.site&&this.app.site.essentialsMap&&this.app.site.essentialsMap.extentManager.setScaleWithPriority(a,6)};b.prototype._executePanUp=function(a){if(a){var g=this.app.map.extent,a=this._calculateVerticalPanAmount(a);
this.app.site.essentialsMap.extentManager.setExtentWithPriority(new esri.geometry.Extent(g.xmin,g.ymin+a,g.xmax,g.ymax+a,g.spatialReference),b.extentChangePriority)}else this.app.site.essentialsMap.extentManager.changeExtentWithPriority(function(a){return a.panUp()},b.extentChangePriority)};b.prototype._executePanDown=function(a){if(a){var g=this.app.map.extent,a=this._calculateVerticalPanAmount(a);this.app.site.essentialsMap.extentManager.setExtentWithPriority(new esri.geometry.Extent(g.xmin,g.ymin-
a,g.xmax,g.ymax-a,g.spatialReference),b.extentChangePriority)}else this.app.site.essentialsMap.extentManager.changeExtentWithPriority(function(a){return a.panDown()},b.extentChangePriority)};b.prototype._executePanLeft=function(a){if(a){var g=this.app.map.extent,a=this._calculateHorizontalPanAmount(a);this.app.site.essentialsMap.extentManager.setExtentWithPriority(new esri.geometry.Extent(g.xmin-a,g.ymin,g.xmax-a,g.ymax,g.spatialReference),b.extentChangePriority)}else this.app.site.essentialsMap.extentManager.changeExtentWithPriority(function(a){return a.panLeft()},
b.extentChangePriority)};b.prototype._executePanRight=function(a){if(a){var g=this.app.map.extent,a=this._calculateHorizontalPanAmount(a);this.app.site.essentialsMap.extentManager.setExtentWithPriority(new esri.geometry.Extent(g.xmin+a,g.ymin,g.xmax+a,g.ymax,g.spatialReference),b.extentChangePriority)}else this.app.site.essentialsMap.extentManager.changeExtentWithPriority(function(a){return a.panRight()},b.extentChangePriority)};b.prototype._calculateHorizontalPanAmount=function(a){return this.app.map&&
this.app.map.extent?this.app.map.extent.getWidth()*a:0};b.prototype._calculateVerticalPanAmount=function(a){return this.app.map&&this.app.map.extent?this.app.map.extent.getHeight()*a:0};b.prototype._executeSetTimeExtent=function(a){this.app.map&&this.app.map.setTimeExtent(a)};b.prototype._pickDefaultZoomScaleForPointFeature=function(a){if(a=a.layer)for(var g=0;g<this._config.defaultPointFeatureZoomScales.length;g++){var h=this._config.defaultPointFeatureZoomScales[g];if(a.withinScaleRange(h))return h}else if(this._config.defaultPointFeatureZoomScales.length>
0)return this._config.defaultPointFeatureZoomScales[0];return NaN};b.prototype._pointToExtent=function(a){var g=5*(this.app.map.extent.getWidth()/this.app.map.width);return new esri.geometry.Extent(a.x-g,a.y-g,a.x+g,a.y+g,this.app.map.spatialReference)};b.prototype.featureClickHandler=function(a){a&&this.app.behavior("MapOnFeatureClickBehavior").run(a)};b.prototype.subscribeToMapEvents=function(){var a=this,g=this,h=false,b=0,d=null,e=null,f=function(g){if(h)return h=false;if(!a._executeMapClickCommands)return false;
var f=(new Date).getTime();a._isAndroid3plus?f-b<=300&&d&&Math.abs(d.x-g.screenPoint.x)<50&&Math.abs(d.y-g.screenPoint.y)<50?clearTimeout(e):e=setTimeout(function(){a._executeMapClickCommands&&a.app.behavior("MapOnClickBehavior").run(g.mapPoint)},300):a.app.behavior("MapOnClickBehavior").run(g.mapPoint);b=f;d=g.screenPoint},k=null,j=function(g){h=false;k=setTimeout(function(){k=null;h=true;esri.MapNavigationManager?esri.MapNavigationManager.prototype._panEnd?a.app.map.navigationManager?a.app.map.navigationManager._panHandle&&
esri.MapNavigationManager.prototype._panEnd.call(a.app.map.navigationManager):a.app.trace.warning("Can't prevent panning: missing map.navigationManager."):a.app.trace.warning("Can't prevent panning: missing esri.MapNavigationManager._panEnd"):a.app.trace.warning("Can't prevent panning: missing esri.MapNavigationManager.");var b=g.mapPoint;if(!b&&g.touches&&g.touches.length>0)var b=g.touches[0],d=$(a.app.map.root).offset(),b=new esri.geometry.ScreenPoint(b.screenX-d.left,b.screenY-d.top),b=esri.geometry.toMapPoint(a.app.map.extent,
a.app.map.width,a.app.map.height,b);a._executeMapClickCommands&&a.app.behavior("MapOnLongClickBehavior").run(b)},a._config.longClickMilliseconds||500)},i=function(){k!=null&&(clearTimeout(k),k=null)},l=[],r=function(){dojo.forEach(l,dojo.disconnect);l.length=0;Modernizr.touch&&(a.app.map.root.removeEventListener("touchstart",j,false),a.app.map.root.removeEventListener("touchend",i,false),a.app.map.root.removeEventListener("touchcancel",i,false),a.app.map.root.removeEventListener("touchleave",i,false),
a.app.map.root.removeEventListener("touchmove",i,false))},u=function(){r();l.push(dojo.connect(a.app.map,"onClick",f));dojo.isArray(a._config.onLongClick)&&a._config.onLongClick.length>0&&(l.push(dojo.connect(a.app.map,"onMouseDown",j)),l.push(dojo.connect(a.app.map,"onMouseUp",i)),l.push(dojo.connect(a.app.map,"onMouseDrag",i)),l.push(dojo.connect(a.app.map,"onPanStart",i)),l.push(dojo.connect(a.app.map,"onZoomStart",i)),Modernizr.touch&&(a.app.map.root.addEventListener("touchstart",j,false),a.app.map.root.addEventListener("touchend",
i,false),a.app.map.root.addEventListener("touchcancel",i,false),a.app.map.root.addEventListener("touchleave",i,false),a.app.map.root.addEventListener("touchmove",i,false)))};u();this.app.event("GraphicDrawActivatedEvent").subscribe(this,function(){if(a._mapClickTimerHandles.length!==0)a._mapClickTimerHandles.forEach(function(a){clearTimeout(a)}),a._mapClickTimerHandles=[];r()});this.app.event("GraphicDrawDeactivatedEvent").subscribe(this,function(){a._isAndroid?a._mapClickTimerHandles.push(setTimeout(u,
950)):u()});var w=esri.toolbars.Draw.prototype.activate;esri.toolbars.Draw.prototype.activate=function(){if(!this.__attached_isActive)if(w.apply(this,arguments),this.__attached_isActive=true,this.__attached_stopEvent)delete this.__attached_stopEvent;else{var a=arguments[0];g.app.event("GraphicDrawActivatedEvent").publish({sender:this,geometryType:a})}};var x=esri.toolbars.Draw.prototype.deactivate;esri.toolbars.Draw.prototype.deactivate=function(){if(this.__attached_isActive)this.__attached_stopEvent?
delete this.__attached_stopEvent:g.app.event("GraphicDrawDeactivatedEvent").publish({sender:this,geometryType:null}),x.apply(this,arguments),this.__attached_isActive=false};this.app.event("GraphicEditActivatedEvent").subscribe(this,r);this.app.event("GraphicEditDeactivatedEvent").subscribe(this,u);if(typeof esri.toolbars.Edit!=="undefined"){var y=0,z=null,A=esri.toolbars.Edit.prototype.activate;esri.toolbars.Edit.prototype.activate=function(){if(!this.__attached_isActive)if(A.apply(this,arguments),
this.__attached_isActive=true,this.__attached_stopEvent)delete this.__attached_stopEvent;else{y=arguments[0];z=arguments[1];var a={tool:y,graphic:z,sender:this};g.app.event("GraphicEditActivatedEvent").publish(a)}};var B=esri.toolbars.Edit.prototype.deactivate;esri.toolbars.Edit.prototype.deactivate=function(){if(this.__attached_isActive){if(this.__attached_stopEvent)delete this.__attached_stopEvent;else{var a={tool:y,graphic:z,sender:this};y=0;z=null;g.app.event("GraphicEditDeactivatedEvent").publish(a)}B.apply(this,
arguments);this.__attached_isActive=false}}}};b.prototype._onGeoRssLayerLoaded=function(a){a&&a.esriLayer&&dojo.connect(a.esriLayer,"onClick",this,function(a){dojo.stopEvent(a);a=new d.essentialsHtmlViewer.mapping.infrastructure.Feature({graphic:a.graphic,allowUnsafeContent:this.app.configuration.allowUnsafeContent});a.descriptionFormat.set("{content}");a.labelFormat.set("{title}");this.app.command("ShowMapTip").execute(a)})};b.prototype._handleSiteInitialized=function(a){!a||!a.isInitialized?this.app.trace.error("Error processing MapModule._handleSiteInitialized. - site was not initialized."):
dojo.subscribe("geoRssLayerLoaded",this,this._onGeoRssLayerLoaded)};b.prototype._handleLayerUpdateStart=function(a,g){if(g){g.attached_isLoading=true;if(!g.attached_timers)g.attached_timers=[];var h=setTimeout(dojo.hitch(this,function(){if(!(this._config.loadingMessageTiming.length<1)&&this._config.showLoadingStatus&&g.attached_isLoading){var h=this.app.getResource(this.libraryId,"language-map-loading-stage1").format(g.displayName),b=new d.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs(h);
b.id=a.id+"LoadingStatus";b.showBusyIcon=true;this.app.command("AddStatus").execute(b);this._config.loadingMessageTiming.length<2||(h=setTimeout(dojo.hitch(this,function(){if(g.attached_isLoading){var a=this.app.viewManager.getViewById(b.id);a&&a.viewModel&&a.viewModel.text.set(this.app.getResource(this.libraryId,"language-map-loading-stage2").format(g.displayName));this._config.loadingMessageTiming.length<3||(a=setTimeout(dojo.hitch(this,function(){if(g.attached_isLoading){var a=this.app.viewManager.getViewById(b.id);
a&&a.viewModel&&a.viewModel.text.set(this.app.getResource(this.libraryId,"language-map-loading-stage3").format(g.displayName))}}),this._config.loadingMessageTiming[2]),g.attached_timers.push(a))}}),this._config.loadingMessageTiming[1]),g.attached_timers.push(h))}}),this._config.loadingMessageTiming[0]);g.attached_timers.push(h)}};b.prototype._handleLayerUpdateEnd=function(a,g){if(g){if(g.attached_timers){for(var h=0;h<g.attached_timers.length;h++)clearTimeout(g.attached_timers[h]);g.attached_timers.length=
0}g.attached_isLoading=false;h=a.id+"LoadingStatus";this.app.command("RemoveStatus").execute(h)}};b.prototype._handleLayerAdded=function(){};b.prototype._handleLayerRemoved=function(a){a=a.id+"LoadingStatus";this.app.command("RemoveStatus").execute(a)};b.extentChangePriority=6;return b}(d.framework.application.ModuleBase);f.MapModule=i})(f.map||(f.map={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,g){e.call(this,a,g);this._zoomedExtent=null;this.showMap=new Observable(true);this.showError=new Observable(false);this.showAuthError=new Observable(false);this.showCriticalServicesError=new Observable(false);this.siteFailed=new Observable(false);this.temporaryMarkupSymbol=this.temporaryGraphicsLayer=null;this.stepZoomFactor=0.5;this.registerCommands()}__extends(b,e);b.prototype.initialize=function(a){e.prototype.initialize.call(this,
a);if(a&&a.hasOwnProperty("stepZoomFactor"))a=parseFloat(a.stepZoomFactor),this.stepZoomFactor=!isNaN(a)&&a>0?a:0.5;this.temporaryMarkupSymbol=new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_DIAMOND,20,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color([0,0,0]),1),new esri.Color([255,255,0,0.5]));this.app.event("SiteInitializationFailedEvent").subscribe(this,function(){this.showMap.set(false);this.showError.set(true)});this.app.event("SiteAuthorizationFailedEvent").subscribe(this,
function(){this.showMap.set(false);this.showAuthError.set(true)});this.app.event("SiteServiceLayersFailedEvent").subscribe(this,function(a){dojo.some(a,function(a){return a.failureAction===d.essentials.FailureAction.ERROR})&&(this.showMap.set(false),this.showCriticalServicesError.set(true))});this.app.event("UserSignInCancelledEvent").subscribe(this,function(){this.showMap.set(false);this.showAuthError.set(true)});this.app.event("MapLoadedEvent").subscribe(this,this._subscribeToMapEvents)};b.prototype.registerCommands=
function(){var a=this;this.app.command("AddTemporaryMarkupGeometry").register(this,function(a){if(!this.temporaryGraphicsLayer)this.temporaryGraphicsLayer=new esri.layers.GraphicsLayer({id:"TemporaryMarkup"}),this.app.map.addLayer(this.temporaryGraphicsLayer);if(a){var h=null;switch(a.type){case "polygon":case "extent":h=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color([255,51,51,0.8]),
2),new esri.Color([255,51,51,0.5]));break;case "polyline":h=new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color([204,51,51,0.8]),2);break;default:h=new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,14,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color([0,0,0]),1),new esri.Color([204,51,51]))}this.temporaryGraphicsLayer.add(new esri.Graphic(a,h))}});this.app.command("ClearTemporaryMarkup").register(this,
function(){a.temporaryGraphicsLayer&&a.temporaryGraphicsLayer.clear()});this.app.command("ZoomToInitialExtent").register(this,function(){setTimeout(function(){a.app.map!=null&&(a.app.site===null||!a.app.site.isInitialized||a.app.site.essentialsMap===null?a.app.trace.warning("Could not zoom to initial extent - Site was null or uninitialized."):!a.app.site.essentialsMap.isInitialized||a.app.site.essentialsMap.initialExtent===null?a.app.trace.warning("Could not zoom to initial extent - Map was not initialized or has no initial extent."):
a.app.site.essentialsMap.extentManager.setExtentWithPriority(a.app.site.essentialsMap.initialExtent,8))},1)});this.app.command("ZoomToFullExtent").register(this,function(){setTimeout(function(){a.app.map!=null&&(a.app.site===null||!a.app.site.isInitialized||a.app.site.essentialsMap===null?a.app.trace.warning("Could not zoom to full extent - Site was null or uninitialized."):!a.app.site.essentialsMap.isInitialized||a.app.site.essentialsMap.fullExtent===null?a.app.trace.warning("Could not zoom to full extent - Map was not initialized or has no full extent."):
a.app.site.essentialsMap.extentManager.setExtentWithPriority(a.app.site.essentialsMap.fullExtent,8))},1)});this.app.command("StepZoomIn").register(this,this._executeStepZoomIn);this.app.command("StepZoomOut").register(this,this._executeStepZoomOut)};b.prototype._executeStepZoomOut=function(){this.app.command("ShowMap").execute();this._zoomedExtent=d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.stepZoomWithPriority(this.app.site,this.stepZoomFactor,this._zoomedExtent,5)};b.prototype._executeStepZoomIn=
function(){this.app.command("ShowMap").execute();this._zoomedExtent=d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.stepZoomWithPriority(this.app.site,1/this.stepZoomFactor,this._zoomedExtent,5)};b.prototype._subscribeToMapEvents=function(){dojo.connect(this.app.map,"onPanEnd",this,function(){this._zoomedExtent=null});dojo.connect(this.app.map,"onZoomEnd",this,function(){this._zoomedExtent=null})};return b}(d.framework.ui.ViewModelBase);e.MapViewModel=f})(e.map||(e.map={}))})(e.modules||(e.modules=
{}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(f){function b(a,g){f.call(this,a,g);this.resizeTimer=this.hoverTimer=this.active=null;this.initialized=this.firstResize=false;this.maxScale=this.minScale=this.extentBroadcastFrequency=this.extentEpoch=null;this._layerEventsLookup={};this._mapHoverSubscriberCount=0;this._mapHoverTimeout=500;this._enableMapClickEvent=true;this.app.event("ApplicationOfflineEvent").subscribe(this,this._handleConnectivityChange);this.app.event("ApplicationOnlineEvent").subscribe(this,
this._handleConnectivityChange);this.app.event("ViewActivatedEvent").subscribe(this,this._updateBingLogoPosition);this.app.event("ViewDeactivatedEvent").subscribe(this,this._updateBingLogoPosition);this.app.event("RegionActivatedEvent").subscribe(this,this._updateBingLogoPosition);this.app.event("RegionDeactivatedEvent").subscribe(this,this._updateBingLogoPosition)}__extends(b,f);b.prototype.removed=function(){this.app.map!=null&&this.app.map.destroy()};b.prototype.activated=function(){var a=this;
f.prototype.activated.call(this);this.initialized||this.initialize();this.active=true;setTimeout(function(){return e.infrastructure.FocusUtils.focusOnMap(a.app.map)},0);this.resize()};b.prototype.deactivated=function(){f.prototype.deactivated.call(this);this.active=false;clearTimeout(this.resizeTimer);clearTimeout(this.hoverTimer)};b.prototype.attach=function(a){f.prototype.attach.call(this,a);this.viewModel&&(this.initialized||this.initialize(),this._addBrokenPanDetection())};b.prototype._addBrokenPanDetection=
function(){if(/.*Trident\/([0-9]+)\..*/.test(navigator.userAgent)){var a,g;if(navigator.msPointerEnabled)a="MSPointerMove",g="MSPointerUp";else if(navigator.pointerEnabled)a="pointermove",g="pointerup";else return;var h=this.mapDiv.childNodes[0].childNodes[0],b=this.app.map;if(b.__panning===void 0)throw Error("Missing __panning property on esri.Map");this._addEventListener(h,a,function(a){a=a||window.event;if(b.__panning&&a.buttons===0&&(a.pointerType===void 0||a.pointerType==="mouse"||a.pointerType===
4)){var d=document.createEvent("HTMLEvents");d.initEvent(g,false,true);dojo.mixin(d,a);d.type=g;d.button=0;d.buttons=0;d.which=0;h.dispatchEvent(d)}})}};b.prototype._handleConnectivityChange=function(){if(this.app.map&&this.app.site)for(var a=0;a<this.app.site.essentialsMap.mapServices.length;a++){var g=this.app.site.essentialsMap.mapServices[a];g.serviceLayer instanceof esri.layers.TiledMapServiceLayer&&g.serviceLayer.refresh()}};b.prototype.resize=function(){var a=this,g=this.app.map,h=this.mapDiv;
if(g!=null&&g.extent!=null){if(this.resizeTimer)clearTimeout(this.resizeTimer),this.resizeTimer=null;this.resizeTimer=setTimeout(function(){try{if(h){var b=dojo.coords(h);if(a.isActive===true&&b.w>2&&b.h>2&&g.width&&g.height){g.resizeDelay=0;var d=false;a.app.shellName=="Handheld"&&(d=true);a.app.site.essentialsMap.extentManager.blockForResize(b.w,b.h,d);a.app.site.essentialsMap.extentManager.blockForReposition()}}}catch(e){}},200)}};b.prototype.initialize=function(){var a=this;if(!this.initialized&&
this.viewModel&&this.root){var g=false,h=!!Modernizr.csstransforms3d,b=true,d=false;if(this.configuration&&this.configuration.hasOwnProperty("wrapAround180"))g=this.configuration.wrapAround180;if(this.configuration&&this.configuration.hasOwnProperty("force3DTransforms"))h=this.configuration.force3DTransforms;this.configuration&&this.configuration.hasOwnProperty("showAttribution")&&(b=!!this.configuration.showAttribution);this.configuration&&this.configuration.hasOwnProperty("fitTiledMapsToExtent")&&
(d=!!this.configuration.fitTiledMapsToExtent);g={slider:false,logo:false,showAttribution:b,wrapAround180:g,force3DTransforms:h,autoResize:false,fitExtent:d,showInfoWindowOnClick:false};if(this.configuration&&this.configuration.hasOwnProperty("minScale")&&(h=parseFloat(this.configuration.minScale),!isNaN(h)))this.minScale=h,g.minScale=h;if(this.configuration&&this.configuration.hasOwnProperty("maxScale")&&(h=parseFloat(this.configuration.maxScale),!isNaN(h)))this.maxScale=h,g.maxScale=h;this.app.map=
new esri.Map("map",g);this.app.map._fitTiledMapsToExtent=d;this.app.map.hideZoomSlider();this.extentBroadcastFrequency=this.configuration.extentBroadcastFrequency||0;this.app.command("InitializeSite").execute(this.app.map);this.app.command("ZoomToInitialExtent").register(this,function(){a.app.command("ActivateView").execute(a.id)});this.app.command("ZoomToFullExtent").register(this,function(){a.app.command("ActivateView").execute(a.id)});this.app.event("ApplicationResizedEvent").subscribe(this,function(){this.resize()});
this.app.command("MapResize").register(this,function(){this.resize()});this.app.command("ShowMap").register(this,function(){this.app.command("ActivateView").execute(this.id)});this.app.command("EnableMapClick").register(this,function(){return a._enableMapClickEvent=true});this.app.command("DisableMapClick").register(this,function(){return a._enableMapClickEvent=false});this.app.event("ViewActivatedEvent").subscribe(this,function(){this.resize()});this.app.event("ViewDeactivatedEvent").subscribe(this,
function(){this.resize()});this.app.event("ActiveToolChangedEvent").subscribe(this,this._toolChanged);dojo.connect(this.app.map,"onExtentChange",function(g,h,b,d){!d&&a.app.site.essentialsMap&&(d=a._getLevelOfDetails(g));a.app.event("MapExtentChangeEvent").publish(g,h,b,d);a._publishWithMapExtent("MapExtentChangedEvent",g,d)});dojo.connect(this.app.map,"onLayerAdd",this,this._layerAdd);dojo.connect(this.app.map,"onLayerAddResult",this,function(g,h){a.app.event("LayerAddResultEvent").publish(g,h);
a.app.event("LayerAddedWithResultEvent").publish(g,h);a._updateBingLogoPosition()});dojo.connect(this.app.map,"onLayerRemove",this,function(g){if(g){var h=a._layerEventsLookup[g.id];if(h){for(var b=0;b<h.length;b++)dojo.disconnect(h[b]);delete a._layerEventsLookup[g.id]}a.app.event("LayerRemovedEvent").publish(g);a._updateBingLogoPosition()}});dojo.connect(this.app.map,"onLayersAddResult",this,function(g){a.app.event("LayersAddedWithResultEvent").publish(g||[]);a._updateBingLogoPosition()});dojo.connect(this.app.map,
"onPanStart",function(g,h){a.app.event("MapPanStartEvent").publish(g,h);a.app.event("MapPanStartedEvent").publish(g,h)});dojo.connect(this.app.map,"onPan",function(g,h){a.app.event("MapPanEvent").publish(g,h);a._broadcastExtent(g)});dojo.connect(this.app.map,"onPanEnd",function(g,h){a.app.event("MapPanEndEvent").publish(g,h);a.app.event("MapPanEndedEvent").publish(g,h)});dojo.connect(this.app.map,"onZoomStart",function(g,h,b,d){a.app.event("MapZoomStartEvent").publish(g,h,b,d);a.app.event("MapZoomStartedEvent").publish(g,
h,b,d)});dojo.connect(this.app.map,"onZoom",function(g,h,b){a.app.event("MapZoomEvent").publish(g,h,b);a._broadcastExtent(g)});dojo.connect(this.app.map,"onZoomEnd",function(g,h,b,d){a.app.event("MapZoomEndEvent").publish(g,h,b,d);a.app.event("MapZoomEndedEvent").publish(g,h,b,d)});dojo.connect(this.app.map,"onLoad",function(g){if(a.minScale||a.maxScale){var h=a.app.map._params,b=h.lods;if(b&&b.length){var d=a.app.map.__tileInfo.lods;if(a.minScale){for(;b[0].scale<a.minScale;){var o=Math.min(a.minScale,
b[0].scale*2),e=new esri.layers.LOD;e.level=0;e.scale=o;e.resolution=b[0].resolution*o/b[0].scale;b.splice(0,0,e);d.splice(0,0,e);h.hasOwnProperty("maxZoom")&&h.maxZoom++}for(o=0;o<b.length;o++)b[o].level=o,d[o].level=o}if(a.maxScale)for(var f=b.length-1;b[f].scale>a.maxScale;)o=Math.max(a.maxScale,b[f].scale*0.5),e=new esri.layers.LOD,e.level=b[f].level+1,e.scale=o,e.resolution=b[f].resolution*o/b[f].scale,b.push(e),d.push(e),h.maxZoom=e.level,f++}}a.resize();a.app.event("MapLoadedEvent").publish(g)});
dojo.connect(this.app.map,"onClick",function(g){a._enableMapClickEvent&&(a.app.event("MapClickEvent").publish(g),a.app.event("MapClickedEvent").publish(g))});dojo.connect(this.app.map,"onMouseDown",function(g){a.app.event("MapMouseDownEvent").publish(g)});dojo.connect(this.app.map,"onMouseUp",function(g){a.app.event("MapMouseUpEvent").publish(g)});dojo.subscribe("LayerVisibilityChange",function(g){var h=[];if(g&&g.length>0)for(var b=0;b<g.length;b++){var d=g[b];if(!d||!d.mapServiceId||!d.layerId)a.app.trace.error(a.id+
" can't find map service for layer. Either mapServiceId or layerId are not available.");else{var o=a.app.site.essentialsMap.findMapServiceById(d.mapServiceId);if(o){var e=o.findLayerById(d.layerId);e&&h.push({layer:e,mapService:o,visibility:d.visibility})}}}a.app.event("LayerVisibilityChangedEvent").publish(h)});dojo.subscribe("ServiceLayerInitializedEvent",function(g){a.app.event("SiteLayerLoadingEvent").publish(g)});dojo.subscribe("MapServiceVisibilityChangedEvent",function(g){g&&(a.app.event("MapServiceVisibilityChangedEvent").publish(g.serviceLayer,
g),a._updateBingLogoPosition())});dojo.subscribe("MapServiceAddedEvent",function(g){g&&a.app.event("MapServiceAddedEvent").publish(g)});dojo.subscribe("MapServiceRemovedEvent",function(g){g&&a.app.event("MapServiceRemovedEvent").publish(g)});this._attachMouseHoverHandlers();this._updateBingLogoPosition();this.initialized=true}};b.prototype._addEventListener=function(a,g,h){a.addEventListener?a.addEventListener(g,h,false):a.attachEvent&&a.attachEvent("on"+g,h)};b.prototype._removeEventListener=function(a,
g,h){a.removeEventListener?a.removeEventListener(g,h,false):a.detachEvent&&a.detachEvent("on"+g,h)};b.prototype._attachMouseHoverHandlers=function(){var a=this,g=function(g){clearTimeout(a.hoverTimer);var h={clientX:g.clientX,clientY:g.clientY};a.hoverTimer=setTimeout(function(){a.app.event("MapMouseHoverEvent").publish(h)},a._mapHoverTimeout)},h=function(g){g.explicitOriginalTarget&&g.explicitOriginalTarget.localName=="path"||clearTimeout(a.hoverTimer)};dojo.require("dojo.aspect");dojo.aspect.after(this.app.event("MapMouseHoverEvent"),
"subscribe",function(b){a._mapHoverSubscriberCount++<=0&&(a._addEventListener(a.app.map.root,"mousemove",g),a._addEventListener(a.app.map.root,"mouseout",h));return b});dojo.aspect.after(this.app.event("MapMouseHoverEvent"),"unsubscribe",function(){--a._mapHoverSubscriberCount<=0&&(a._removeEventListener(a.app.map.root,"mousemove",g),a._removeEventListener(a.app.map.root,"mouseout",h))})};b.prototype._updateBingLogoPosition=function(){for(var a=0;this.app.map&&a<this.app.map.layerIds.length;a++){var g=
this.app.map.getLayer(this.app.map.layerIds[a]);if(g.isInstanceOf(esri.virtualearth.VETiledLayer)&&g.visible){if(a=this.app.viewManager.getExistingRegionByName("BottomLeftMapRegion"))if((a=a.activeViews)&&a.length>0){for(var h=g=0;h<a.length;h++)if(a[h].root.clientHeight>g)g=a[h].root.clientHeight;$(".bingLogo-lg").css("bottom",g)}break}}};b.prototype._broadcastExtent=function(a){var g=null,h=null;if(!this.extentEpoch)this.extentEpoch=+new Date;g=+new Date;if(g-this.extentEpoch>this.extentBroadcastFrequency)this.app.site.essentialsMap&&
(h=this._getLevelOfDetails(a)),this._publishWithMapLod("MapExtentChangingEvent",h),this.extentEpoch=g};b.prototype._layerAdd=function(a){var g=this,h=this.app.site.essentialsMap.mapServices.filter(function(g){return g.serviceLayer===a});if(h.length!=0){var b=h[0];this.app.event("LayerAddEvent").publish(a,b);this.app.event("LayerAddedEvent").publish(a,b);h=[];this._layerEventsLookup[a.id]=h;h.push(dojo.connect(a,"onUpdateStart",this,function(){g.app.event("LayerUpdateStartEvent").publish(a,b);g.app.event("LayerUpdateStartedEvent").publish(a,
b)}));h.push(dojo.connect(a,"onUpdateEnd",this,function(){g.app.event("LayerUpdateEndEvent").publish(a,b);g.app.event("LayerUpdateEndedEvent").publish(a,b)}));h.push(dojo.connect(a,"onVisibilityChange",this,function(){g.app.event("MapServiceVisibilityChangedEvent").publish(a,b);g._updateBingLogoPosition()}));this._updateBingLogoPosition()}};b.prototype._getLevelOfDetails=function(a){var g={scale:this.app.site.essentialsMap.calculateScale()};if(a&&this.app.map&&this.app.map.width>0)g.resolution=a.getWidth()/
this.app.map.width;return g};b.prototype._publishWithMapLod=function(a,g){var h=null;if(g)h=new d.essentialsHtmlViewer.mapping.infrastructure.eventArgs.MapExtentEventArgs,h.currentScale=g.scale,h.currentResolution=g.resolution;this.app.event(a).publish(h)};b.prototype._publishWithMapExtent=function(a,g,h){var b=null;if(h)b=new d.essentialsHtmlViewer.mapping.infrastructure.eventArgs.MapExtentEventArgs,b.currentScale=h.scale,b.currentResolution=h.resolution;this.app.event(a).publish(g,b)};b.prototype._toolChanged=
function(a){a.tool&&this.app.command("ActivateView").execute(this.id)};return b}(d.framework.ui.ViewBase);f.MapView=i})(f.map||(f.map={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(){function e(b,a,g){this._mapLoadedEventToken=null;this._previousExtentArray=[];this._nextExtentArray=[];this._currentExtent=null;this._prevNextExtentCommandInProgress=this._pauseRecordExtentChange=false;this._disableExtentChangeTimeoutId=null;this._maxLogEntries=100;this._extentChangeRecordDelayMs=500;this.app=b;this.libraryId=a;if(this._maxLogEntries=g!=void 0?g:this._maxLogEntries)this._mapLoadedEventToken=this.app.event("MapLoadedEvent").subscribe(this,
this._onMapLoaded)}e.prototype._onMapLoaded=function(){this.app.event("MapLoadedEvent").unsubscribe(this._mapLoadedEventToken);this.app.map.on("extent-change",dojo.hitch(this,this._recordExtentChange));this.app.map.on("resize",dojo.hitch(this,this._onMapResized));this._registerCommands()};e.prototype._onMapResized=function(){this._pauseRecordExtentChangeOperation()};e.prototype._registerCommands=function(){this.app.command("ZoomToPreviousExtent").register(this,this._executeZoomToPreviousExtent,this._canExecuteZoomToPreviousExtent);
this.app.command("ZoomToNextExtent").register(this,this._executeZoomToNextExtent,this._canExecuteZoomToNextExtent)};e.prototype._canExecuteZoomToPreviousExtent=function(){return!this._prevNextExtentCommandInProgress&&this._previousExtentArray.length!==0};e.prototype._canExecuteZoomToNextExtent=function(){return!this._prevNextExtentCommandInProgress&&this._nextExtentArray.length!==0};e.prototype._executeZoomToPreviousExtent=function(){if(this._previousExtentArray.length){var b=this._previousExtentArray.pop();
this._prevNextExtentCommandInProgress=true;this._addExtentConditionally(this._nextExtentArray,this._currentExtent);this._currentExtent=b;d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtent(this.app,this._currentExtent,true);this._zoomToPrevNextExtentCanExecuteChanged()}};e.prototype._executeZoomToNextExtent=function(){if(this._nextExtentArray.length){var b=this._nextExtentArray.pop();this._prevNextExtentCommandInProgress=true;this._addExtentConditionally(this._previousExtentArray,
this._currentExtent);this._currentExtent=b;d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtent(this.app,this._currentExtent,true);this._zoomToPrevNextExtentCanExecuteChanged()}};e.prototype._recordExtentChange=function(b){if(!this._pauseRecordExtentChange&&!this._prevNextExtentCommandInProgress)this._currentExtent&&this._addExtentConditionally(this._previousExtentArray,this._currentExtent),this._nextExtentArray=[];this._currentExtent=b.extent;this._pauseRecordExtentChangeOperation(this._extentChangeRecordDelayMs);
this._prevNextExtentCommandInProgress=false;this._zoomToPrevNextExtentCanExecuteChanged()};e.prototype._numLogEntries=function(){return this._previousExtentArray.length+this._nextExtentArray.length};e.prototype._addExtentConditionally=function(b,a){var g=this._numLogEntries();this._isValidExtentObject(a)?(g>=this._maxLogEntries&&b.length&&b.shift(),(!b.length||b.length&&!this._extentsEqual(b[b.length-1],a))&&b.push(new esri.geometry.Extent(a.toJson()))):this.app.trace.error("MapExtentLog: Invalid extent specified. Could not add to extent log")};
e.prototype._pauseRecordExtentChangeOperation=function(b){var a=this;if(this._disableExtentChangeTimeoutId)clearTimeout(this._disableExtentChangeTimeoutId),this._disableExtentChangeTimeoutId=null;this._pauseRecordExtentChange=true;if(b!=void 0)this._disableExtentChangeTimeoutId=setTimeout(function(){a._pauseRecordExtentChange=false},b)};e.prototype._extentsEqual=function(b,a){return b&&a&&b.spatialReference&&a.spatialReference&&b.xmin===a.xmin&&b.xmax===a.xmax&&b.ymin===a.ymin&&b.ymax===a.ymax&&d.essentials.GeometryUtilities.spatialRefsAreEqual(b.spatialReference,
a.spatialReference,false)};e.prototype._isValidExtentObject=function(b){return b&&b instanceof esri.geometry.Extent?true:b&&typeof parseFloat(b.xmin)==="number"&&typeof parseFloat(b.xmax)==="number"&&typeof parseFloat(b.ymin)==="number"&&typeof parseFloat(b.ymax)==="number"&&b.spatialReference&&(b.spatialReference.wkid&&typeof parseInt(b.spatialReference.wkid,10)==="number"||b.spatialReference.wkt)};e.prototype._zoomToPrevNextExtentCanExecuteChanged=function(){this.app.command("ZoomToPreviousExtent").raiseCanExecuteChanged();
this.app.command("ZoomToNextExtent").raiseCanExecuteChanged()};return e}();e.MapExtentLog=f})(e.map||(e.map={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(){e.apply(this,arguments);this._additionalLayers=null;this._defaultHighlightLayerName="defaultHighlightLayer";this._isInitialized=false}__extends(b,e);b.prototype.initialize=function(a){e.prototype.initialize.call(this,a);a.borderColor&&this.app.highlightManager.setHighlightBorderColor(a.borderColor);a.fillColor&&this.app.highlightManager.setHighlightFillColor(a.fillColor);if(a.additionalLayers)this._additionalLayers=
a.additionalLayers;this.app.command("CreateHighlightLayer").register(this,this._createHighlightLayer,this._canCreateHighlightLayer);this.app.command("SetActiveHighlightLayer").register(this,this._setActiveHighlightLayer,this._canSetActiveHighlightLayer);this.app.command("SetActiveHighlightLayerDefault").register(this,this._setActiveHighlightLayerDefault,this._canSetActiveHighlightLayerDefault);this.app.command("HighlightEsriFeatureSet").register(this,this._highlightEsriFeatureSet,this._canHighlightEsriFeatureSet);
this.app.command("SetHighlightBorderColor").register(this,this._setHighlightBorderColor);this.app.command("SetHighlightFillColor").register(this,this._setHighlightFillColor);this.app.command("RemoveHighlightLayer").register(this,this._removeHighlightLayer,this._canRemoveHighlightLayer);this.app.command("ClearHighlights").register(this,this._clearHighlights,this._canClearHighlights);this.app.command("HighlightFeatureSet").register(this,this._highlightFeatureSet,this._canHighlightFeatureSet);this.app.command("HighlightFeature").register(this,
this._highlightFeature,this._canHighlightFeature);this.app.command("HighlightFeatureDefault").register(this,this._highlightFeatureDefault,this._canHighlightFeatureDefault);this.app.command("ClearDefaultHighlights").register(this,this._clearHighlightsDefault);this.app.command("HighlightFeatureSetTestHarness").register(this,function(a){a=this.app.featureSetManager.getCollectionById(a).featureSets;a.bind(this,function(a){if(a.type==="append")for(var g=a.rangeStart;g<a.rangeEnd+1;g++)this.app.command("HighlightFeatureSet").execute(a.sender.getAt(g))});
for(var h=0;h<a.length;h++)this.app.command("HighlightFeatureSet").execute(a[h])});this.app.command("HighlightFeatureTestHarness").register(this,function(a){var h=this.app.featureSetManager.getCollectionById(a);if(a=h.firstFeature())this.app.command("HighlightFeature").execute(a);else var b=h.featureSets.bind(this,function(){var a=h.firstFeature();a&&(h.featureSets.unbind(b),this.app.command("HighlightFeature").execute(a))})});this._layersReady()?this._initializeDefaultHighlights():this.app.event("SiteServiceLayersLoaded").subscribe(this,
this._initializeDefaultHighlights)};b.prototype._layersReady=function(){if(this.app.site&&this.app.site.essentialsMap&&this.app.site.essentialsMap.mapServices){for(var a=this.app.site.essentialsMap.mapServices,g=0;g<a.length;g++)if(!a[g].serviceLayer.loaded)return false;return true}return false};b.prototype._initializeDefaultHighlights=function(){this.app.highlightManager._defaultHighlightLayerName=this._defaultHighlightLayerName;this.app.highlightManager.createHighlightLayer(this._defaultHighlightLayerName);
if(this._additionalLayers)for(var a=0;a<this._additionalLayers.length;a++){var g=this._additionalLayers[a];this.app.highlightManager.createHighlightLayer(g.name,g.hasOwnProperty("fillColor")?g.fillColor:void 0,g.hasOwnProperty("borderColor")?g.borderColor:void 0)}this._setActiveHighlightLayerDefault();this._isInitialized=true;g="CreateHighlightLayer,SetActiveHighlightLayer,SetActiveHighlightLayerDefault,HighlightEsriFeatureSet,RemoveHighlightLayer,ClearHighlights,HighlightFeatureSet,HighlightFeature".split(",");
for(a=0;a<g.length;a++)this.app.command(g[a]).raiseCanExecuteChanged()};b.prototype._canCreateHighlightLayer=function(a){return this._isInitialized&&!this.app.highlightManager.getHighlightLayer(a)};b.prototype._createHighlightLayer=function(a,g,h){this.app.highlightManager.createHighlightLayer(a,g,h)};b.prototype._canSetActiveHighlightLayer=function(a){return this._isInitialized&&!!this.app.highlightManager.getHighlightLayer(a)};b.prototype._setActiveHighlightLayer=function(a){this.app.highlightManager.setActiveHighlightLayer(a)};
b.prototype._canSetActiveHighlightLayerDefault=function(){return this._isInitialized&&!!this.app.highlightManager.getHighlightLayer(this.app.highlightManager._defaultHighlightLayerName)};b.prototype._setActiveHighlightLayerDefault=function(){this.app.highlightManager.setActiveHighlightLayer(this.app.highlightManager._defaultHighlightLayerName)};b.prototype._canHighlightEsriFeatureSet=function(a){return this._isInitialized&&a&&a instanceof esri.tasks.FeatureSet?true:false};b.prototype._highlightEsriFeatureSet=
function(a){this.app.highlightManager.highlightEsriFeatureSet(a)};b.prototype._setHighlightBorderColor=function(a){this.app.highlightManager.setHighlightBorderColor(a)};b.prototype._setHighlightFillColor=function(a){this.app.highlightManager.setHighlightFillColor(a)};b.prototype._canRemoveHighlightLayer=function(a){return this._isInitialized&&!!this.app.highlightManager.getHighlightLayer(a)};b.prototype._removeHighlightLayer=function(a){this.app.highlightManager.removeHighlightLayer(a)};b.prototype._clearHighlights=
function(){this.app.highlightManager.clearHighlights()};b.prototype._canClearHighlights=function(){return this._isInitialized};b.prototype._clearHighlightsDefault=function(){this.app.highlightManager.clearHighlights(this._defaultHighlightLayerName)};b.prototype._canHighlightFeatureSet=function(a){return this._isInitialized&&a&&a.features.getLength()>0};b.prototype._highlightFeatureSet=function(a){this.app.highlightManager.highlightFeatures(a.features.get())};b.prototype._featureInHighlights=function(a,
g){if(a&&a.esriFeature&&a.esriFeature.get()&&a.esriFeature.get().geometry){var a=new d.essentialsHtmlViewer.mapping.infrastructure.Feature({graphic:a.esriFeature.get()}),h=g.apply(this.app.highlightManager);if(h)for(var b=0;b<h.length;b++){var e=new d.essentialsHtmlViewer.mapping.infrastructure.Feature({graphic:h[b]});if(a.equals(e))return false}return true}return false};b.prototype._canHighlightFeature=function(a){return this._isInitialized&&this._featureInHighlights(a,this.app.highlightManager.activeHighlightLayerGraphics)};
b.prototype._canHighlightFeatureDefault=function(a){return this._isInitialized&&this._featureInHighlights(a,this.app.highlightManager.defaultHighlightLayerGraphics)};b.prototype._highlightFeature=function(a){this.app.highlightManager.highlightFeatures([a])};b.prototype._highlightFeatureDefault=function(a){this._clearHighlightsDefault();this.app.highlightManager.highlightFeatures([a],this.app.highlightManager._defaultHighlightLayerName)};return b}(d.framework.application.ModuleBase);e.HighlightModule=
f})(e.Highlight||(e.Highlight={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(f){function b(){f.apply(this,arguments);this._identifyTask=null;this.defaultPixelTolerance=5;this.defaultPolygonPixelTolerance=2;this._layersInVisibleScaleRangeOnly=this._visibleLayersOnly=this._returnGeometry=this._topMostLayerOnly=this._polygonPixelTolerance=this._pixelTolerance=null}__extends(b,f);b.prototype.initialize=function(a){f.prototype.initialize.call(this,a);if(a.pixelTolerance!=null)this._pixelTolerance=a.pixelTolerance;
if(a.polygonPixelTolerance!=null)this._polygonPixelTolerance=a.polygonPixelTolerance;if(a.visibleLayersOnly!=null)this._visibleLayersOnly=!!a.visibleLayersOnly;if(a.layersInVisibleScaleRangeOnly!=null)this._layersInVisibleScaleRangeOnly=!!a.layersInVisibleScaleRangeOnly;if(a.topMostLayerOnly!=null)this._topMostLayerOnly=!!a.topMostLayerOnly;if(a.returnGeometry!=null)this._returnGeometry=!!a.returnGeometry};b.prototype.search=function(a,g){var h=this,b=null;if(g.delayFSCOpen)var d=a.id,f=false,b=function(){f||
(f=true,h.app.featureSetManager.openCollection(d))};else this.app.featureSetManager.openCollection(a.id);this._identifyTask=new e.MapIdentifyTask(this.app.map,this.app);this._identifyTask.tag=a;this._identifyTask.pixelTolerance=this._pixelTolerance!=null?this._pixelTolerance:g.pixelTolerance;this._identifyTask.polygonPixelTolerance=this._polygonPixelTolerance!=null?this._polygonPixelTolerance:g.polygonPixelTolerance;this._identifyTask.topMostLayerOnly=this._topMostLayerOnly!=null?this._topMostLayerOnly:
!!g.topMostLayerOnly;this._identifyTask.returnGeometry=this._returnGeometry!=null?this._returnGeometry:!!g.returnGeometry;this._identifyTask.layersInVisibleScaleRangeOnly=this._layersInVisibleScaleRangeOnly!=null?this._layersInVisibleScaleRangeOnly:!!g.layersInVisibleScaleRangeOnly;this._identifyTask.restrictRasterIdentifyToPoint=!!g.restrictRasterIdentifyToPoint;if(g.identifiableLayerInfo)this._identifyTask.mapServicesAndLayersToIdentify=g.identifiableLayerInfo;if(isNaN(this._identifyTask.pixelTolerance))this._identifyTask.pixelTolerance=
this.defaultPixelTolerance;if(isNaN(this._identifyTask.polygonPixelTolerance))this._identifyTask.polygonPixelTolerance=this.defaultPolygonPixelTolerance;if(g.extent)this._identifyTask.extent=g.extent;if(g.width)this._identifyTask.width=g.width;if(g.height)this._identifyTask.height=g.height;if(g.visibleLayersOnly!==null)this._identifyTask.visibleLayersOnly=g.visibleLayersOnly;if(g.visibleMapServicesOnly!==null)this._identifyTask.visibleMapServicesOnly=g.visibleMapServicesOnly;if(g.layerRestriction)this._identifyTask.layerRestriction=
g.layerRestriction;if(b)this._identifyTask.delayedFSCOpen=b;setTimeout(function(){h._identifyTask.execute(g.geometry,function(a,g,b){h.identifyTaskProgress(a,g,b)},function(a){h.identifyTaskComplete(a)},function(a,g,b){h.identifyTaskError(a,g,b)})},0)};b.prototype.identifyTaskProgress=function(a,g,h){d.essentialsHtmlViewer.mapping.modules.identify.IdentifyUtils.appendToFeatureSetCollection(g,a.tag,h,this.app)};b.prototype.identifyTaskComplete=function(a){this.app.featureSetManager.tryCloseCollection(a.tag.id)};
b.prototype.identifyTaskError=function(a,g,h){this.app.featureSetManager.tryCloseCollection(a.tag.id);a=this.getResource("language-identify-error-message",null).format(g.message,g.details);this.app.command("Alert").execute(a);h&&this.app.trace.error("Error performing identify operation on service {0}. Message: {1}. Error details: {2}.".format(h.serviceLayer.url,g.message,g.details))};b.prototype.cancelSearch=function(){this._identifyTask&&this._identifyTask.cancel()};return b}(d.essentialsHtmlViewer.mapping.infrastructure.identify.IdentifyProviderBase);
e.MapIdentifyTaskIdentifyProvider=f})(e.identify||(e.identify={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.userInitiatedDA=false}__extends(b,d);b.prototype.attach=function(a){d.prototype.attach.call(this,a);this.title.set(a.alertTitle);if(this.okButtonElement)try{this.okButtonElement.focus()}catch(g){}if(!this.viewContainerViewClosedEventToken)this.viewContainerViewClosedEventToken=this.app.event("ViewContainerViewClosedEvent").subscribe(this,function(a){a&&a.viewId==this.id&&this._deactivateForUser()})};
b.prototype.destroyBindings=function(){d.prototype.destroyBindings.call(this);if(this.viewContainerViewClosedEventToken)this.app.event("ViewContainerViewClosedEvent").unsubscribe(this.viewContainerViewClosedEventToken),this.viewContainerViewClosedEventToken=null};b.prototype.handleClickOk=function(){this._deactivateForUser();return false};b.prototype._deactivateForUser=function(){this.userInitiatedDA=true;this.app.viewManager.deactivateView(this);this.app.viewManager.destroyView(this);this.viewModel.callback&&
this.userInitiatedDA&&this.viewModel.callback()};return b}(d.framework.ui.ViewBase);e.AlertView=f})(e.alert||(e.alert={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.alertRegion="ModalWindowRegion";this.overrideNativeAlert=true;this.nativeImplementation=null}__extends(b,d);b.prototype.initialize=function(a){var g=this;d.prototype.initialize.call(this,a);this.nativeImplementation=window.alert;this.alertRegion=a.alertRegion;this.overrideNativeAlert=a.overrideNativeAlert;var h=function(a,h,b){if(b)try{var d=g.app.viewManager.createView({type:"geocortex.essentialsHtmlViewer.mapping.modules.alert.AlertView",
markup:"Mapping/modules/Alert/AlertView.html",visible:true,region:g.alertRegion,libraryId:g.libraryId});h||(h=g.app.getResource(g.libraryId,"language-alert-default-title"));b={alertTitle:h,alertBody:a,callback:b,isOpen:true,pending:[]};d.title.set(h);d.attach(b);g.app.viewManager.activateView(d);g.app.command("ScreenReaderNarrate").execute(a)}catch(e){g.app.trace.error("Error: Could not display alert: "+e)}else try{g.nativeImplementation.apply(window,[a])}catch(f){g.nativeImplementation(a)}};if(this.overrideNativeAlert)window.alert=
h;this.app.command("Alert").register(this,function(a,g,b){b||(b=function(){});h(a,g,b)})};return b}(d.framework.application.ModuleBase);e.AlertModule=f})(e.alert||(e.alert={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.userCanceled=this.userHasClicked=false}__extends(b,d);b.prototype.attach=function(a){d.prototype.attach.call(this,a);this.title.set(a.title);if(this.cancelButtonElement)try{this.cancelButtonElement.focus()}catch(g){}if(!this.viewContainerViewClosedEventToken)this.viewContainerViewClosedEventToken=this.app.event("ViewContainerViewClosedEvent").subscribe(this,function(a){a&&a.viewId===
this.id&&this._deactivateForUser(true)})};b.prototype.destroyBindings=function(){d.prototype.destroyBindings.call(this);if(this.viewContainerViewClosedEventToken)this.app.event("ViewContainerViewClosedEvent").unsubscribe(this.viewContainerViewClosedEventToken),this.viewContainerViewClosedEventToken=null};b.prototype.handleClickOk=function(){this._deactivateForUser(false);return false};b.prototype.handleClickCancel=function(){this._deactivateForUser(true);return false};b.prototype._deactivateForUser=
function(a){this.userCanceled=a;this.userHasClicked=true;this.app.viewManager.deactivateView(this);this.app.viewManager.destroyView(this);this.userHasClicked&&this.viewModel&&this.viewModel.callback&&this.viewModel.callback(!this.userCanceled)};return b}(d.framework.ui.ViewBase);e.ConfirmView=f})(e.confirm||(e.confirm={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.confirmRegion="ModalWindowRegion";this.nativeImplementation=null;this.overrideNativeConfirm=false}__extends(b,d);b.prototype.initialize=function(a){var g=this;d.prototype.initialize.call(this,a);this.nativeImplementation=window.confirm;this.confirmRegion=a.confirmRegion;this.overrideNativeConfirm=a.overrideNativeConfirm;var h=function(a,h,b){if(!b)return g.nativeImplementation.apply(window,
[a]);try{var d=g.app.viewManager.createView({type:"geocortex.essentialsHtmlViewer.mapping.modules.confirm.ConfirmView",markup:"Mapping/modules/Confirm/ConfirmView.html",visible:true,region:g.confirmRegion,libraryId:g.libraryId});h||(h=g.app.getResource(g.libraryId,"language-confirm-default-title"));a={title:h,confirmBody:a,callback:b,isOpen:true,pending:[]};d.title.set(h);d.attach(a);g.app.viewManager.activateView(d)}catch(e){g.app.trace.error("Error: Could not display confirm: "+e)}};if(this.overrideNativeConfirm)window.confirm=
h;this.app.command("Confirm").register(this,function(a,g,b){g||(g=this.app.getResource(this.libraryId,"language-confirm-default-title"));b||(b=function(){});h(a,g,b)})};return b}(d.framework.application.ModuleBase);e.ConfirmModule=f})(e.confirm||(e.confirm={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.framework.application.ModuleBase);e.LogModule=f})(e.log||(e.log={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.logEntries=new ObservableCollection;this.isVisible=new Observable(false);this.logToConsole=true}__extends(b,d);b.prototype.initialize=function(a){this.logToConsole=a.logToConsole||true;this.app.event("TraceEvent").subscribe(this,this._onTraceEvent);this.app.trace.info("Version {0}. {1}".format(dojo.getObject(a.version||"geocortex.essentialsHtmlViewer.version"),this.app.locale));
this.app.trace.info("Esri JavaScript API version {0}.".format(esri.version))};b.prototype._onTraceEvent=function(a){var g=a.timestamp,g="{0}:{1}:{2}.{3}".format(this._padDigits(g.getHours(),2),this._padDigits(g.getMinutes(),2),this._padDigits(g.getSeconds(),2),this._padDigits(g.getMilliseconds(),3));a.timestamp=g;a.cssClass="trace "+a.level;this.logEntries.addItem(a)};b.prototype._padDigits=function(a,g,h){h==null&&(h=true);var a=a.toString(),b="";if(g>a.length)for(var d=0;d<g-a.length;d++)b+="0";
return h?b.toString()+a:a+b.toString()};return b}(d.framework.ui.ViewModelBase);e.LogViewModel=f})(e.log||(e.log={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,g){var h=this;d.call(this,a,g);this.isActive=false;this.app.command("ToggleLogView").register(this,function(){h.isActive?h.app.command("DeactivateView").execute(h.id):h.app.command("ActivateView").execute(h.id)});this.app.command("ShowLog").register(this,function(a){a?h.app.command("ActivateView").execute(h.id):h.app.command("DeactivateView").execute(h.id)});this.app.command("HideLog").register(this,function(){h.app.command("DeactivateView").execute(h.id)})}
__extends(b,d);b.prototype.handleClickClear=function(){this.viewModel.logEntries.clear();this._deactivateView()};b.prototype.handleClickHide=function(){this._deactivateView()};b.prototype._deactivateView=function(){this.app.command("DeactivateView").execute(this.id);this.app.event("ToolbarViewTilePressedEvent").publish("IWantToMenuView")};return b}(d.framework.ui.ViewBase);e.LogView=f})(e.log||(e.log={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.handleClick=function(){this.app.command("ToggleLogView").execute()};return b}(d.framework.ui.ViewBase);e.LogStatusView=f})(e.log||(e.log={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,g){e.call(this,a,g)}__extends(b,e);b.prototype.initialize=function(a){var g=this;this.enableLayerListLegendIntegration=a.enableLegendIntegration!=void 0?a.enableLegendIntegration:false;this.onlyShowSwatchesOnVisibleLayers=a.onlyShowSwatchesOnVisibleLayers!=void 0?a.onlyShowSwatchesOnVisibleLayers:false;this.autoActivateAncestorVisibilities=a.autoActivateAncestorVisibilities!=void 0?a.autoActivateAncestorVisibilities:
false;this.groupByOperationalAndBase=a.groupByOperationalAndBase!=void 0?a.groupByOperationalAndBase:true;this.enableLayerIcons=a.enableLayerIcons!=void 0?a.enableLayerIcons:false;this.enableLayerListLegendIntegration||this.app.trace.debug("Inline legend integration not enabled for the Configurable LayerList module");this.onlyShowSwatchesOnVisibleLayers||this.app.trace.debug("The option to only show legend swatches for visible layers is not enabled for the Configurable LayerList module.");if(this.app.isArcGisWebApp)this.appInfo=
d.essentialsHtmlViewer.mapping.infrastructure.gis.AppInfo.fromGeocortexApp(this.app),this._setupLayerList();else if(this.app.site&&this.app.site.isInitialized)this._setupLayerList();else this.app.event("SiteInitializedEvent").once(this,function(){g.appInfo=d.essentialsHtmlViewer.mapping.infrastructure.gis.AppInfo.fromGeocortexApp(g.app);g._setupLayerList()});this.registerActivityHandlers()};b.prototype.registerActivityHandlers=function(){var a=this;this.app.registerActivityTypeHandler("Geocortex.Workflow.Activities.GetLayerListItemInfo",
function(g){d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleGetLayerListItemInfo(a,g)});this.app.registerActivityTypeHandler("Geocortex.Workflow.Activities.SetLayerListItemInfo",function(g){d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleSetLayerListItemInfo(a,g)});this.app.registerActivityIdHandler("__GetLayerListItemInfo",function(g){d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleGetLayerListItemInfo(a,g)});this.app.registerActivityIdHandler("__SetLayerListItemInfo",
function(g){d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleSetLayerListItemInfo(a,g)})};b.prototype.subscribeEvents=function(){this.app.event("MapServiceAddedEvent").subscribe(this,this._handleMapServicesAdded);this.app.event("MapServiceRemovedEvent").subscribe(this,this._handleMapServiceRemoved);this.app.event("MapServiceLayersChangedEvent").subscribe(this,this._updateMapService);this.app.event("MapServicePropertyChangedEvent").subscribe(this,this._updateMapService);this.app.event("LayerVisualizationChangedEvent").subscribe(this,
this._handleLayerVisualizationChanged)};b.prototype.doWhenLayerListInitialized=function(a){var g=this;if(this.layerList&&this.layerList.layerListInitialized)a();else var h=this.app.event("LayerListInitializedEvent").subscribe(this,function(){g.app.event("LayerListInitializedEvent").unsubscribe(h);a()})};b.prototype._setupLayerList=function(){var a=this,g=this.app&&this.app.site&&this.app.site.layerListRestEndpoint?this.app.site.layerListRestEndpoint:null;if(!this.app.isArcGisWebApp)this.layerListRestUrl=
this.app.site.url+"/map/layerlist";var h=0,o={enableLegendIntegration:this.enableLayerListLegendIntegration,onlyShowSwatchesOnVisibleLayers:this.onlyShowSwatchesOnVisibleLayers,autoActivateAncestorVisibilities:this.autoActivateAncestorVisibilities,serviceLoadFailureIconUri:"Resources/Images/Icons/Toolbar/error-24.png",serviceLoadFailureIconTooltip:this.appInfo.gcxApp.getResource(this.libraryId,"language-layerlist-service-unavailable"),singleLegendIconTooltip:this.appInfo.gcxApp.getResource(this.libraryId,
"language-layerlist-single-legend-icon-tooltip"),multiLegendIconTooltip:this.appInfo.gcxApp.getResource(this.libraryId,"language-layerlist-multiple-legend-icon-tooltip"),multiLegendSwatchElement:"<img src='{0}'  alt=' '/>".format(b.MULTI_LEGEND_SWATCH_URI),groupByOperationalAndBase:this.groupByOperationalAndBase,enableLayerIcons:this.enableLayerIcons};this.layerList=new d.essentialsHtmlViewer.mapping.infrastructure.layerList.LayerList(this.appInfo,this.layerListRestUrl,g,o);dojo.connect(this.layerList,
"onLayerListInitialized",function(g){h=(new Date).getTime()-h;a.app.trace.debug("Layer List initialization took {0}ms ({1}s)".format(h,h/1E3));a.subscribeEvents();a.app.event("LayerListInitializedEvent").publish(g)});dojo.connect(this.layerList,"onLayerListInitializationFailed",function(g){a.app.command("Alert").execute("Layer List initialization failed with error: ".concat(g.message))});h=(new Date).getTime();this.layerList.initialize()};b.prototype._handleMapServicesAdded=function(a){this.layerList&&
this.layerList.addUserAddedServiceLayer(a)};b.prototype._handleMapServiceRemoved=function(a){this.layerList&&this.layerList.removeServiceLayer(a)};b.prototype._updateMapService=function(a){this.layerList&&(this.layerList.removeServiceLayer(a),this.layerList.addUserAddedServiceLayer(a))};b.prototype._handleLayerVisualizationChanged=function(a){var g=this;this.layerList&&a&&a.mapService&&setTimeout(function(){g.layerList.updateServiceLayerLegendSwatch(a.mapService)},500)};b.MULTI_LEGEND_SWATCH_URI=
"Resources/Images/Icons/legend-16.png";return b}(d.framework.application.ModuleBase);e.LayerListModule=f})(e.layerList||(e.layerList={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this._longPressTimer=null;this._pressLengthMs=1500}__extends(b,d);b.prototype.activated=function(){d.prototype.activated.call(this)};b.prototype.attach=function(a){a&&(d.prototype.attach.call(this,a),this.initialize())};b.prototype.initialize=function(){this.viewModel&&!this.viewModel.viewInitialized.get()&&this.root&&(this.title.set(this.app.getResource(this.libraryId,"language-layerlist-title")),
this.app.viewManager.notifyDimensionsChanged(this),this.registerCommands(),this.viewModel.viewInitialized.set(true))};b.prototype.registerCommands=function(){var a=this,g=function(){a.app.command("ActivateView").execute(a.id)};this.app.command("ShowLayerList").register(this,g);this.app.command("SwitchToLayerView").register(this,g)};b.prototype.resolveWidget=function(a,g,h){d.prototype.resolveWidget.call(this,a,g);switch(a){case "TransparencySlider":if(!g||!g.opacity)return null;a=this.app.viewManager.createView({markup:"Mapping/modules/LayerList/Widgets/TransparencySliderView.html",
type:"geocortex.essentialsHtmlViewer.mapping.modules.layerList.TransparencySliderView",visible:true,libraryId:this.libraryId,app:this.app});a.attach(g);return a;case "LayerListActionsWidget":return this.app.menuRegistry.createMenuWidget(this,g,h);default:return this.app.trace.warning("LayerListView: Unknown Widget"),null}};b.prototype.handleExpanderClick=function(a,g,h){h.isExpanded.set(!h.isExpanded.get())};b.prototype.handleLegendExpanderClick=function(a,g,h){return h.legendItems&&h.legendItems.length()>
1?(h.expandLegend.set(!h.expandLegend.get()),false):true};b.prototype.setItemVisibility=function(a,g,h){if(!h)return false;h.setItemVisibility(g.checked!=void 0?g.checked:g.status);if(h.type===0)this.app.event("FolderClickedEvent").publish(h);else if(h.type===1)this.app.event("MapServiceClickedEvent").publish(h);else if(h.type===2||h.type===3)this.app.event("LayerClickedEvent").publish(h),this.app.event("LayerPressedEvent").publish(h);return true};b.prototype.setItemVisibilityExclusive=function(a,
g,h){if(!h)return false;h.setItemVisibility(true);a=h.getSiblings(false);for(g=0;g<a.length;g++){var b=a[g];b.radioGroup.get()===h.radioGroup.get()&&b.isVisible.set(false)}if(h.type===0)this.app.eventRegistry.event("FolderClickedEvent").publish(h);else if(h.type===1)this.app.eventRegistry.event("MapServiceClickedEvent").publish(h);else if(h.type===2||h.type===3)this.app.eventRegistry.event("LayerClickedEvent").publish(h),this.app.eventRegistry.event("LayerPressedEvent").publish(h);return true};b.prototype.handleClickShowLegend=
function(){this.app.command("SwitchToLegendView").execute()};b.prototype.handleOpacityChanged=function(a,g,h){h.opacity.set(parseFloat(g.value))};b.prototype.handleLayerActions=function(a,g,h){if(h){var b;switch(h.type){case 2:case 3:b=h.layer.gcxLayer}b&&this.app.command("ShowLayerActions").execute(b)}};b.prototype.handleTouchStart=function(a,g,h){this._beginLongPress(h);return true};b.prototype.handleMouseDown=function(a,g,h){this._beginLongPress(h);return true};b.prototype.handleTouchEnd=function(){this._cancelLongPress();
return true};b.prototype.handleMouseUp=function(){this._cancelLongPress();return true};b.prototype._beginLongPress=function(a){var g=this;this._longPressTimer&&clearTimeout(this._longPressTimer);this._longPressTimer=setTimeout(function(){g.app.event("LayerLongPressedEvent").publish(a)},this._pressLengthMs)};b.prototype._cancelLongPress=function(){if(this._longPressTimer)clearTimeout(this._longPressTimer),this._longPressTimer=null};return b}(d.framework.ui.ViewBase);e.LayerListView=f})(e.layerList||
(e.layerList={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(){e.apply(this,arguments);this.providerViewModelList=[];this.providerViewList=[];this._defaultViewMode=this._currentFeature=this._providerConfig=null;this._viewModes={}}__extends(b,e);b.prototype.initialize=function(a){e.prototype.initialize.call(this,a);this._processConfig(a);this.registerCommands()};b.prototype._processConfig=function(a){if(a){if(a.viewModes)for(var g in a.viewModes)if(a.viewModes.hasOwnProperty(g))if(a.viewModes[g].viewId&&
a.viewModes[g].defaultProviderTargetRegion){if(!a.defaultViewMode)a.defaultViewMode=g.toLowerCase();this._viewModes[g.toLowerCase()]=a.viewModes[g]}else this.app.trace.warning("FeatureDetailsModule: Error loading view mode - viewId or defaultProviderTargetRegion not specified. Please check your configuration");if(this._defaultViewMode=a.defaultViewMode){if(a.providers)this._providerConfig=a.providers}else this.app.trace.error("FeatureDetailsModule: Could not compute default view mode. Please check your configuration settings")}};
b.prototype.registerCommands=function(){var a=this;this.app.command("ShowFeatureDetails").register(this,function(g){if(!g&&a._currentFeature)g=a._currentFeature;g?(a.app.command("_updateFeatureDetailViewModels").execute(g),a._processFeatureDetails(g)):a.app.trace.error("ShowFeatureDetails: Could not execute command. No feature found.")});this.app.command("GetFeatureDetailsProviders").register(this,this._processFeatureDetails);this.app.command("ShowFeatureDetailsCompact").register(this,function(g){a._executeSetFeatureDetailsMode({viewMode:"compact",
feature:g});a.app.command("ShowFeatureDetailsExpanded").raiseCanExecuteChanged()},function(g){return a._canExecuteSetFeatureDetailsMode({viewMode:"compact",feature:g})});this.app.command("ShowFeatureDetailsExpanded").register(this,function(g){a._executeSetFeatureDetailsMode({viewMode:"expanded",feature:g});a.app.command("ShowFeatureDetailsCompact").raiseCanExecuteChanged()},function(g){return a._canExecuteSetFeatureDetailsMode({viewMode:"expanded",feature:g})});this.app.command("SetFeatureDetailsMode").register(this,
this._executeSetFeatureDetailsMode,this._canExecuteSetFeatureDetailsMode)};b.prototype._executeSetFeatureDetailsMode=function(a){this._defaultViewMode=typeof a==="string"?a:a.viewMode;this._getViewModeConfigParams(this._defaultViewMode);typeof a!=="string"&&a.feature&&a.feature!==this._currentFeature&&(this.app.command("_updateFeatureDetailViewModels").execute(a),this._processFeatureDetails(a.feature));this._activateFeatureDetailsView(this._currentFeature)};b.prototype._canExecuteSetFeatureDetailsMode=
function(a){var g=this._getViewModeConfigParams(typeof a==="string"?a:a.viewMode);if(g)var h=this.app.viewManager.getViewById(g.viewId);return!!g.defaultProviderTargetRegion&&!!h&&!h.isActive&&!(!a.feature&&!this._currentFeature)};b.prototype.updateFeature=function(a){if(a&&a!==this._currentFeature)this._currentFeature=a,this.providerViewModelList.forEach(function(g){return g.currentFeature.set(a)}),this.app.event("FeatureDetailsCurrentFeatureChanged").publish(a)};b.prototype._processFeatureDetails=
function(a){var g=this,h=function(){g._loadProviders(g._providerConfig);g.updateFeature(a);g._activateFeatureDetailsView(a)};if(this.app.allLibrariesLoaded)h();else this.app.event("ViewerLibrariesDownloadedEvent").once(this,h)};b.prototype._activateFeatureDetailsView=function(a){if(a){for(var g in this._viewModes)if(this._viewModes.hasOwnProperty(g))if(a=this._viewModes[g].viewId,g===this._defaultViewMode)this.app.command("ActivateView").execute(a);else{var h=this.app.viewManager.getViewById(a);h&&
h.isActive&&this.app.command("DeactivateView").execute(a)}this._setProviderTargetRegions(this._defaultViewMode)}};b.prototype._loadProviders=function(a){var g=this;if(!(this.providerViewModelList.length>0)){var h=function(a,h){h.forEach(function(a){g._wireUpViewBindings(a);g.providerViewList.push(a)});g._setProviderTargetRegions(g._defaultViewMode)};a.forEach(function(a){if(a.enabled!==false){var b=dojo.getObject(a.type);if(b){var d=new b(g.app,a.libraryId||g.libraryId),b=g._getProviderViewModeRegionConfig(a);
d.app=g.app;d.libraryId=a.libraryId||g.libraryId;d.initialize(a.config);d.createAttachedViews(a,b,function(a){return h(d,a)});g.providerViewModelList.push(d)}else g.app.trace.warning("Cannot find FeatureDetailsProvider '{0}'.".format(a.type))}})}};b.prototype._getProviderConfigByView=function(a){if(this._providerConfig)for(var g=0;g<this._providerConfig.length;g++){var h=this._providerConfig[g].markup;if(h&&typeof h==="string"){if(h===a.markupResource)return this._providerConfig[g]}else for(var b in h)if(h.hasOwnProperty(b)&&
h[b]===a.markupResource)return this._providerConfig[g]}return null};b.prototype._getProviderTargetRegionForMode=function(a,g){var h=null;if(a.targetRegion&&a.targetRegion[g])h=a.targetRegion[g];else{var b=this._getViewModeConfigParams(g);if(b)h=b.defaultProviderTargetRegion}return h};b.prototype._getViewModeConfigParams=function(a){for(var g in this._viewModes)if(this._viewModes.hasOwnProperty(g)&&g===a)return this._viewModes[a];return null};b.prototype._getProviderViewModeRegionConfig=function(a){var g=
{};if(typeof a.markup==="string")g["default"]=this._getProviderTargetRegionForMode(a,this._defaultViewMode);else for(var h in a.markup)a.markup.hasOwnProperty(h)&&(g[h]=this._getProviderTargetRegionForMode(a,h));return g};b.prototype._setProviderTargetRegions=function(a){var g=this;a&&(this.providerViewList.forEach(function(h){var b=g._getProviderConfigByView(h),d=g._getProviderTargetRegionForMode(b,a),b=typeof b.markup==="string"||b.markup[a]&&b.markup[a]===h.markupResource||b.markup[a]===void 0;
g.app.viewManager.deactivateView(h);if(b){b=null;if(d){var e=g.app.viewManager.getRegionForViewId(h.id);if(e)b=h.removed,h.removed=function(){},e.unhostView(h),h.regionName=d}g.app.viewManager.activateView(h);if(b)h.removed=b;h.viewModel.providerEnabled!=void 0&&h.viewModel.providerEnabled.pulse()}}),this.app.event("Internal.FeatureProviderTargetRegionsChanged").publish(this._currentFeature))};b.prototype._wireUpViewBindings=function(a){var g=this,h=function(h){h?(h=g.app.viewManager.getExistingRegionByName(a.regionName))&&
(!(h instanceof d.framework.ui.MultiViewRegionAdapter)||h.views.length===1)&&g.app.viewManager.activateView(a):g.app.viewManager.deactivateView(a)};if(a.viewModel&&a.viewModel.providerEnabled&&a.viewModel.providerEnabled.isObservable){h(a.viewModel.providerEnabled.get());var b=a.viewModel.providerEnabled.bind(this,h),e=a.onDestroy;a.onDestroy=function(){a.viewModel.providerEnabled.unbind(b);for(var h=g.providerViewList.length-1;h>=0;h--)g.providerViewList[h]===a&&g.providerViewList.splice(h,1);typeof e===
"function"&&e()}}};return b}(d.framework.application.ModuleBase);e.FeatureDetailsModule=f})(e.FeatureDetails||(e.FeatureDetails={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){var f=function(b){function a(){b.apply(this,arguments)}__extends(a,b);return a}(d.framework.ui.ViewBase);e.AttachmentsView=f})(e.FeatureDetailsProviders||(e.FeatureDetailsProviders={}))})(e.FeatureDetails||(e.FeatureDetails={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.FeatureProviderBase=geocortex.essentialsHtmlViewer.mapping.infrastructure.featureDetails.FeatureProviderBase;
(function(d){(function(d){(function(d){(function(f){(function(f){(function(f){var k=function(b){function a(a,h){b.call(this,a,h);this.hasAttachments=new Observable(false);this.attachmentInfos=new ObservableCollection;this.isAttachmentInfosInitialized=new Observable(false);this.noAttachments=new Observable(false);this.isOffline=new Observable(false);this.bindToken=null;this.app.event("FeatureAttachmentAddedEvent").subscribe(this,this.handleCurrentFeatureChanged)}__extends(a,b);a.prototype.handleCurrentFeatureChanged=
function(a){var h=this;this.hasAttachments.set(false);this.noAttachments.set(false);this.isOffline.set(false);this.isAttachmentInfosInitialized.set(false);this._setAttachmentInfos(null);if(a){if(this.hasAttachments.set(a.hasAttachments.get()),this.hasAttachments.get())a.attachmentInfosInitialized.get()?(this._setAttachmentInfos(a.attachmentInfos),this.attachmentInfos.length()==0&&(this.isOffline.set(this.app.isOffline.get()),this.noAttachments.set(!this.app.isOffline.get())),this.isAttachmentInfosInitialized.set(true)):
this.bindToken=a.attachmentInfosInitialized.bind(this,function(b){b&&(h.isAttachmentInfosInitialized.set(true),h._setAttachmentInfos(a.attachmentInfos),h.attachmentInfos.length()==0&&(h.isOffline.set(h.app.isOffline.get()),h.noAttachments.set(!h.app.isOffline.get())),a.attachmentInfosInitialized.unbind(h.bindToken))}),a.attachmentInfos.get()}else throw Error("Feature cannot be null for the attachment infos view model");};a.prototype._setAttachmentInfos=function(a){this.attachmentInfos.clear();if(a)for(var h=
a.getLength(),b=0;b<h;b++){var d=a.getAt(b);this.attachmentInfos.addItem({name:d.name,url:d.url,size:this.formatSize(d.size.get())})}this.updateProviderState(!!this.attachmentInfos.length())};a.prototype.formatSize=function(a){for(var h=0;a>1E3;h++)a=Math.round(a/1E3);return a+" "+"B,KB,MB,GB,TB,PB".split(",")[h]};return a}(d.infrastructure.featureDetails.FeatureProviderBase);f.AttachmentsViewModel=k})(f.FeatureDetailsProviders||(f.FeatureDetailsProviders={}))})(f.FeatureDetails||(f.FeatureDetails=
{}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){var f=function(b){function a(){b.apply(this,arguments)}__extends(a,b);return a}(d.framework.ui.ViewBase);e.AttributesView=f})(e.FeatureDetailsProviders||(e.FeatureDetailsProviders={}))})(e.FeatureDetails||(e.FeatureDetails={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){(function(f){var k=function(b){function a(a,h){b.call(this,a,h);this.attributeTypes={};this.MAX_COLUMNS=3;this.COLUMN_THRESHOLD=5;this._attributesChangedSubscriptionToken=null;this.attributes=new ObservableCollection([]);this.multiColumnAttributeContainer=new ObservableCollection([])}__extends(a,b);a.prototype.initialize=function(a){b.prototype.initialize.call(this,a);if(a)this.MAX_COLUMNS=!isNaN(parseInt(a.maxColumns,10))?parseInt(a.maxColumns,
10):this.MAX_COLUMNS,this.COLUMN_THRESHOLD=!isNaN(parseInt(a.columnThreshold,10))?parseInt(a.columnThreshold,10):this.COLUMN_THRESHOLD};a.prototype.handleCurrentFeatureChanged=function(a){if(a){this._getAttributeTypes(this.currentFeature.get());var h=a.getAttributes();if(a.featureLayer&&a.featureLayer.type=="Table")for(var b in h){var d=h[b];if(d.alias)d.displayName=d.alias}this._attributesChangedSubscriptionToken&&this._prevFeatureLinkedAttributes&&this._prevFeatureLinkedAttributes.unbind(this._attributesChangedSubscriptionToken);
this._attributesChangedSubscriptionToken=this._prevFeatureLinkedAttributes=null;this._prevFeatureLinkedAttributes=a.linkedAttributes;this._attributesChangedSubscriptionToken=a.linkedAttributes.bind(this,this._handleAttributesChanged);this.processAttributes(h);this._setAttributes(h)}else this._setAttributes(null)};a.prototype._getAttributeTypes=function(a){this.attributeTypes={};if(a.layer&&a.layer.fields)for(var h=0;h<a.layer.fields.length;h++){var b=a.layer.fields[h];if(a.layer instanceof esri.layers.FeatureLayer)b.dataType=
d.essentials.Field.convertFromEsriType(b.type);this.attributeTypes[b.name]=b.dataType}};a.prototype._handleAttributesChanged=function(){var a=this.currentFeature.get().getAttributes();this.processAttributes(a);this._setAttributes(a)};a.prototype._setAttributes=function(a){this.attributes.clear();a&&this.attributes.set(a);this._populateMultiColumnAttributeContainer();this.updateProviderState(!!this.attributes.length())};a.prototype._populateMultiColumnAttributeContainer=function(){this.multiColumnAttributeContainer.clear();
for(var a=dojo.filter(this.attributes.get(),function(a){return a.visible.get()}),h=a.length>this.COLUMN_THRESHOLD?Math.ceil(a.length/this.COLUMN_THRESHOLD):1,h=h>this.MAX_COLUMNS?this.MAX_COLUMNS:h,b=Math.ceil(a.length/h),d=0;d<h;d++)this.multiColumnAttributeContainer.addItem(new ObservableCollection(a.slice(d*b,(d+1)*b)))};a.prototype.processAttributes=function(a){for(var h=0;h<a.length;h++){var b=a[h].name.get(),e=a[h].value.get();a[h].displayAsUrl=d.framework.utils.isUrl(e);this.attributeTypes[b]==
"DateTime"?e instanceof Date&&a[h].presentableValue.set(this._formatDate(e)):e===0?a[h].presentableValue.set("0"):e===false&&a[h].presentableValue.set("false")}};a.prototype._formatDate=function(a){var h=new Date(a),b=this.getResource("language-feature-date-format")||"EEE MMM dd";try{a=dojo.date.locale.format(h,{datePattern:b,selector:"date"})}catch(d){this.app.trace.warning("Unable to format date: "+d.message)}return a};return a}(e.infrastructure.featureDetails.FeatureProviderBase);f.AttributesViewModel=
k})(f.FeatureDetailsProviders||(f.FeatureDetailsProviders={}))})(f.FeatureDetails||(f.FeatureDetails={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){var f=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.attach=function(a){this.masterViewModel=a.masterViewModel;b.prototype.attach.call(this,a)};a.prototype.handleViewClick=function(a,h,b){for(a=0;a<this.viewModel.dataLinks.length();a++)if(h=this.viewModel.dataLinks.getAt(a),h===b){this.masterViewModel.currentDataLink.set(h);break}this.masterViewModel.activateDataLinkDetailsView()};a.prototype.resolveWidget=
function(a,h){b.prototype.resolveWidget.call(this,a,h);if(a==="DataLinksTableViewWidget"){var e=this.app.viewManager.createView({type:"geocortex.essentialsHtmlViewer.mapping.infrastructure.ui.components.Table.TableView",markup:"Mapping/infrastructure/ui/components/Table/TableView.html",libraryId:"Mapping.Infrastructure",visible:true});if(e){var f=new d.essentialsHtmlViewer.mapping.infrastructure.ui.components.Table.TableViewModel(this.app,this.libraryId);f.addRecordClickEvents(this.masterViewModel.DATALINK_TABLE_ITEM_CLICKED_EVENT);
f.addRecordLongPressEvents(this.masterViewModel.DATALINK_TABLE_ITEM_PRESSED_EVENT);f.columnHeaders=h.columnHeaders;f.attachToPresentableCollection(h.presentableResults);e.attach(f)}return e}};return a}(d.framework.ui.ViewBase);e.DataLinksView=f})(e.FeatureDetailsProviders||(e.FeatureDetailsProviders={}))})(e.FeatureDetails||(e.FeatureDetails={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){(function(f){var k=function(b){function a(a,h){b.call(this,a,h);this.hasDataLinks=new Observable(false);this.dataLinksList=new ObservableCollection([]);this.currentDataLink=new Observable(null);this.targetDataLinkDetailsRegion=null;this.DEFAULT_VIEW_ID="FeatureDataLinksProviderView";this.DEFAULT_PAGED=true;this.DEFAULT_PAGE_SIZE=50;this.DATALINK_TABLE_ITEM_CLICKED_EVENT="DataLinkTableItemClickedEvent";this.DATALINK_TABLE_ITEM_PRESSED_EVENT=
"DataLinkTableItemPressedEvent";this._featureDataLinkBindingToken=null;this._datalinkViews=[];this._addedDataLinks=[];this._dataLinkListBindingTokens=[];this._onViewsCreated=this._viewModeRegionConfig=this._config=null}__extends(a,b);a.prototype.initialize=function(a){b.prototype.initialize.call(this,a);if(a&&(a.dataLinkView||a.dataLinkDetailsView))this.targetDataLinkDetailsRegion=a.dataLinkView||a.dataLinkDetailsView;this.hasDataLinks.bind(this,this.updateProviderState)};a.prototype.handleCurrentFeatureChanged=
function(a){this.hasDataLinks.set(false);this._destroyAttachedViews();this.dataLinksList.clear();this._featureDataLinkBindingToken&&this._prevFeatureDataLinkingResults&&this._prevFeatureDataLinkingResults.unbind(this._featureDataLinkBindingToken);this._prevFeatureDataLinkingResults=this._featureDataLinkBindingToken=null;this._prevFeatureDataLinkingResults=a.dataLinkingResults;this._featureDataLinkBindingToken=a.dataLinkingResults.bind(this,this.handleCollectionChanged);this._handleDataLinks(a.dataLinkingResults.get());
this._createAttachedViews()};a.prototype.activateDataLinkDetailsView=function(){if(this.targetDataLinkDetailsRegion){if(!this.currentDataLink.get())throw Error("Cannot display data link details. Current datalink not set.");if(!this.dataLinkView)this.dataLinkView=this.app.viewManager.createView({markup:"Mapping/modules/FeatureDetails/FeatureDetailsProviders/DataLinkView.html",type:"geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.DataLinkView",iconUri:"Resources/Images/Icons/Toolbar/file-multi-24.png",
regionName:this.targetDataLinkDetailsRegion,visible:false,libraryId:this.libraryId}),this.dataLinkView.attach(this);this.dataLinkView.title.set(this.currentDataLink.get().displayName);this.app.viewManager.activateView(this.dataLinkView);this.app.command("FocusOnFirstInputInView").execute(this.dataLinkView)}};a.prototype.createAttachedViews=function(a,h,b){this._config=a;this._viewModeRegionConfig=h;this._onViewsCreated=b};a.prototype._createAttachedViews=function(a,h,d){var e=this,a=a||this._config,
h=h||this._viewModeRegionConfig,d=d||this._onViewsCreated;if(a){var f=function(){e.dataLinksList.get().forEach(function(f){if(e._addedDataLinks.indexOf(f.displayName)===-1){var k=dojo.clone(a);k.title=f.displayName;k.viewId=e._generateDataLinksViewIdFromConfigViewId(k.viewId,k.title);b.prototype.createAttachedViews.call(e,k,h,function(a){e._datalinkViews=e._datalinkViews.concat(a);d&&d(a)},f);e._addedDataLinks.push(f.displayName)}})};f();this._dataLinkListBindingTokens.push(this.dataLinksList.bind(this,
function(){return f()}))}};a.prototype.handleCollectionChanged=function(a){a.type==="append"&&this._handleDataLinks(a.sender.value.slice(a.rangeStart,a.rangeStart+1))};a.prototype._generateDataLinksViewIdFromConfigViewId=function(a,h){var b=d.framework.utils.alphaNumericToken();return"{0} datalink-{1}".format(a||this.DEFAULT_VIEW_ID,h?h+b:b)};a.prototype._createConfiguredPresentableResultCollection=function(a){a=new d.framework.ui.PresentableCollection(a);a.pageSize.set(this.DEFAULT_PAGE_SIZE);this.DEFAULT_PAGED!=
a.isPaginated.get()&&a.isPaginated.set(this.DEFAULT_PAGED);a.sortingPredicate=null;return a};a.prototype._destroyAttachedViews=function(){var a=this;this._datalinkViews.forEach(function(h){a.app.viewManager.destroyView(h);delete h.viewModel});this._dataLinkListBindingTokens.forEach(function(h){return a.dataLinksList.unbind(h)});this._datalinkViews=[];this._addedDataLinks=[];this._dataLinkListBindingTokens=[]};a.prototype._handleDataLinks=function(a){for(var h=0;h<a.length;h++){var b=a[h];if(b.dataLink&&
b.dataLink.get()&&!b.dataLink.get().isOneToOne){var d=new ObservableCollection(this._buildLinkRecords(b)),e=this._createConfiguredPresentableResultCollection(new ObservableCollection(this._buildTableRows(b))),f=this._createColumnHeaderCollection(e),k=new Observable(this.providerEnabled.get());k.sync(this.providerEnabled);this.dataLinksList.addItem({displayName:b.dataLink.get().displayName,dataLinks:d,presentableResults:e,columnHeaders:f,providerEnabled:k,masterViewModel:this});this.hasDataLinks.get()||
this.hasDataLinks.set(true)}}};a.prototype._buildTableRows=function(a){for(var h=[],a=a.table.get(),b=0;b<a.rows.length;b++){var d=this._buildTableColumns(a.columns,a.rows[b].row);h.push({attributes:new ObservableCollection(d)})}return h};a.prototype._buildTableColumns=function(a,h){for(var b=[],e=0;e<a.length;e++)b.push({visible:new Observable(true),value:new Observable(h[e]),presentableValue:new Observable(h[e]),displayAsUrl:d.framework.utils.isUrl(h[e]),columnHeader:a[e]});return b};a.prototype._createColumnHeaderCollection=
function(a){var h=new ObservableCollection([]),b=new d.essentialsHtmlViewer.mapping.infrastructure.ui.components.Table.TableColumnHeaderViewModel.SharedState(a,"sort","sort-up","sort-down"),a=a.items.get();if(a.length)for(var a=a[0].attributes.get(),f=0;f<a.length;f++)h.addItem(new e.infrastructure.ui.components.Table.TableColumnHeaderViewModel(this.app,this.libraryId,b,a[f].columnHeader,"string",f));return h};a.prototype._buildLinkRecords=function(a){for(var a=a.table.get(),h=[],b=0;b<a.rows.length;b++){var d=
a.rows[b].row;h.push({displayName:d[0],attributes:new ObservableCollection(this.toDict(a.columns,d))})}return h};a.prototype.toDict=function(a,h){for(var b=[],e=0;e<a.length;e++)b.push({name:a[e],value:h[e],displayAsUrl:d.framework.utils.isUrl(h[e])});return b};return a}(e.infrastructure.featureDetails.FeatureProviderBase);f.DataLinksViewModel=k})(f.FeatureDetailsProviders||(f.FeatureDetailsProviders={}))})(f.FeatureDetails||(f.FeatureDetails={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping=
{}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){var f=function(b){function a(){b.apply(this,arguments)}__extends(a,b);return a}(d.framework.ui.ViewBase);e.DataLinkView=f})(e.FeatureDetailsProviders||(e.FeatureDetailsProviders={}))})(e.FeatureDetails||(e.FeatureDetails={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){var f=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.attach=function(a){var h=this;b.prototype.attach.call(this,a);this.viewModel.menuContext.sync(a.currentFeature);this.viewModel.visibleMenuItems.bind(this,function(b){var d=h.viewModel.visibleMenuItems.length();if(b.type==="clear")d=0;else if(b.type==="remove")d=b.sender.get().slice(0),d.splice(b.rangeStart,b.rangeEnd-b.rangeStart+1),d=d.length;
a.updateProviderState(!!d)})};return a}(d.essentialsHtmlViewer.mapping.infrastructure.menus.MenuView);e.FeatureActionsView=f})(e.FeatureDetailsProviders||(e.FeatureDetailsProviders={}))})(e.FeatureDetails||(e.FeatureDetails={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){(function(f){var k=function(b){function a(){b.apply(this,arguments)}__extends(a,b);return a}(d.infrastructure.featureDetails.FeatureProviderBase);f.FeatureActionsViewModel=k})(f.FeatureDetailsProviders||(f.FeatureDetailsProviders={}))})(f.FeatureDetails||(f.FeatureDetails={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){return function(b,a){this.toolTip=this.target=this.iconUri=this.uri=this.text=null;this.isBroken=false;if(a&&(this.currentFeature=a,b)){if(b.text)this.text=this.currentFeature.formatTemplateString(b.text);else if(b.uri)this.text=this.currentFeature.formatTemplateString(b.uri);else return;if(b.uri)this.uri=this.currentFeature.formatTemplateString(b.uri);if(b.iconUri)this.iconUri=b.iconUri;if(b.target)this.target=
b.target;if(b.toolTip)this.toolTip=this.currentFeature.formatTemplateString(b.toolTip)}}}();d.Hyperlink=e})(d.FeatureDetailsProviders||(d.FeatureDetailsProviders={}))})(d.FeatureDetails||(d.FeatureDetails={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){var f=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.handleClickHyperlink=function(a,h,b){return!b.isBroken};return a}(d.framework.ui.ViewBase);e.HyperlinksView=f})(e.FeatureDetailsProviders||(e.FeatureDetailsProviders={}))})(e.FeatureDetails||(e.FeatureDetails={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex=
{}));
(function(d){(function(d){(function(d){(function(f){(function(f){(function(f){var k=function(b){function a(a,h){b.call(this,a,h);this._numHyperlinksTotal=this._numHyperlinksChecked=0;this.hyperlinks=new ObservableCollection;this.hyperlinks.bind(this,this._updateProviderState)}__extends(a,b);a.prototype.handleCurrentFeatureChanged=function(a){this.hyperlinks.set(null);if(a&&a.hyperlinks){var h=dojo.getObject("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.Hyperlink");if(h){var b=
[];this._numHyperlinksChecked=0;this._numHyperlinksTotal=a.hyperlinks.getLength();for(var d=0;d<this._numHyperlinksTotal;d++){var e=new h(a.hyperlinks.getAt(d),a);b.push(e);a.layer&&a.layer.showFeatureHyperlinks!=="ShowAll"&&this._testHyperlink(e,b,"HEAD")}a.layer&&a.layer.showFeatureHyperlinks==="ShowAll"&&this._showHyperlinks(b)}else this.hyperlinks.addItems(a.hyperlinks.get())}};a.prototype._testHyperlink=function(a,h,b){var d=this,e={type:b,cache:true,url:a.uri};if(b==="GET")e.headers={"If-Match":"LatitudeGeographics"};
e.success=function(){d._numHyperlinksChecked++;d._numHyperlinksChecked===d._numHyperlinksTotal&&d._showHyperlinks(h)};e.error=function(e){e=e.status;b==="HEAD"&&(e===405||e===0)?d._testHyperlink(a,h,"GET"):(a.isBroken=e>=400&&e!==412,d._numHyperlinksChecked++,d._numHyperlinksChecked==d._numHyperlinksTotal&&d._showHyperlinks(h))};$.ajax(e)};a.prototype._showHyperlinks=function(a){for(var h=this.currentFeature.get(),h=h&&h.layer?h.layer.showFeatureHyperlinks:null,b=0;b<a.length;b++){var d=a[b];d.uri!=
null&&d.uri!==""&&(!h||!(h==="HideBrokenLinks"&&d.isBroken))&&this.hyperlinks.addItem(d)}};a.prototype._updateProviderState=function(a){var h=this.hyperlinks.length();if(a.type==="clear")h=0;else if(a.type==="remove")h=a.sender.get().slice(0),h.splice(a.rangeStart,a.rangeEnd-a.rangeStart+1),h=h.length;this.updateProviderState(!!h)};return a}(d.infrastructure.featureDetails.FeatureProviderBase);f.HyperlinksViewModel=k})(f.FeatureDetailsProviders||(f.FeatureDetailsProviders={}))})(f.FeatureDetails||
(f.FeatureDetails={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){var f=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.attach=function(a){this.masterViewModel=a.masterViewModel;b.prototype.attach.call(this,a);if(!this.masterViewModel._viewContainerViewClosedEventBindingToken)this.masterViewModel._viewContainerViewClosedEventBindingToken=this.app.event("ViewContainerViewClosedEvent").subscribe(this,this._checkIfEventIsRelevant)};a.prototype.destroy=function(){if(this.masterViewModel._viewContainerViewClosedEventBindingToken&&
this.masterViewModel.relatedFeatureViews.length===0)this.app.event("ViewContainerViewClosedEvent").unsubscribe(this.masterViewModel._viewContainerViewClosedEventBindingToken),this.masterViewModel._viewContainerViewClosedEventBindingToken=null};a.prototype.resolveWidget=function(a,h){b.prototype.resolveWidget.call(this,a,h);if(a==="RelatedFeaturesTableViewWidget"){var e=this.app.viewManager.createView({type:"geocortex.essentialsHtmlViewer.mapping.infrastructure.ui.components.Table.TableView",markup:"Mapping/infrastructure/ui/components/Table/TableView.html",
libraryId:"Mapping.Infrastructure",visible:true});if(e){var f=new d.essentialsHtmlViewer.mapping.infrastructure.ui.components.Table.TableViewModel(this.app,this.libraryId);f.addRecordClickEvents(this.masterViewModel.REL_FEATURES_TABLE_ITEM_CLICKED_EVENT);f.addRecordLongPressEvents(this.masterViewModel.REL_FEATURES_TABLE_ITEM_PRESSED_EVENT);f.columnHeaders=h.columnHeaders;f.attachToPresentableCollection(h.presentableResults);e.attach(f)}return e}};a.prototype.handleViewClick=function(a,h,b){if(b&&
b.attributes&&b.attributes.getLength()>0){a=b.attributes.get();for(h=0;h<a.length;h++){var e=a[h].value.get();a[h].displayAsUrl=d.framework.utils.isUrl(e)}}this.isBusy.set(true);this.masterViewModel.activateRelatedFeatureView(b)};a.prototype.handleClickAddRelatedRecord=function(a,h,b){var d=this;if(!b)return false;if(b.editable&&!b.editable.get())return false;this.masterViewModel.generateRelatedLayerObject(b,function(a){d.app.command("StartEditingNewRelatedRecord").execute(a,true)})};a.prototype._checkIfEventIsRelevant=
function(a){(a.backButtonClicked||a.xButtonClicked)&&this.masterViewModel.showParentView()};return a}(d.framework.ui.ViewBase);e.RelatedFeaturesView=f})(e.FeatureDetailsProviders||(e.FeatureDetailsProviders={}))})(e.FeatureDetails||(e.FeatureDetails={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){(function(f){var k=function(b){function a(a,h){var d=this;b.call(this,a,h);this.hasRelationships=new Observable(false);this.relationList=new ObservableCollection([]);this.parentFeature=new Observable(null);this.relatedFeatures=new ObservableCollection;this.relatedFeatureViews=[];this.relatedLayers=new ObservableCollection([]);this.DEFAULT_VIEW_ID="FeatureRelationsProviderView";this.DEFAULT_PAGED=true;this.DEFAULT_PAGE_SIZE=50;this.REL_FEATURES_TABLE_ITEM_CLICKED_EVENT=
"RelatedFeatureTableItemClickedEvent";this.REL_FEATURES_TABLE_ITEM_PRESSED_EVENT="RelatedFeatureTableItemPressedEvent";this._config=this._viewContainerViewClosedEventBindingToken=null;this._allRelatedFeatureInfo=[];this._onViewsCreated=this._viewModeRegionConfig=null;this._addedRelatedFeatures=[];this._relatedFeatureListBindingTokens=[];this._relatedLayerPromises=null;this.app.event("RelatedRecordCreatedEvent").subscribe(this,this._relatedRecordCreated);this.app.event("RelatedRecordEditedEvent").subscribe(this,
this._relatedRecordEdited);this.app.event(this.REL_FEATURES_TABLE_ITEM_CLICKED_EVENT).subscribe(this,function(a){return d.activateRelatedFeatureView(d._getFeatureInfoFromFeature(a))});this.app.command("ShowFeatureParentDetails").register(this,this.showParentView);this.app.command("ClearFeatureInformation").register(this,this._cleanup)}__extends(a,b);a.prototype.createAttachedViews=function(a,h,b){this._config=a;this._viewModeRegionConfig=h;this._onViewsCreated=b};a.prototype._createAttachedViews=
function(a,h,d){var e=this,a=a||this._config,d=d||this._onViewsCreated,h=h||this._viewModeRegionConfig;if(a){var f=function(){e.relationList.get().forEach(function(f){if(e._addedRelatedFeatures.indexOf(f.displayName.get())===-1){var k=dojo.clone(a);k.title="{0} {1}".format(e.app.getResource(e.libraryId,"language-feature-related-features"),f.displayName.get());k.viewId=e._generateRelatedFeaturesViewIdFromConfigViewId(k.viewId,f.displayName.get());b.prototype.createAttachedViews.call(e,k,h,function(a){e.relatedFeatureViews=
e.relatedFeatureViews.concat(a);d&&d(a)},f);e._addedRelatedFeatures.push(f.displayName.get())}})};f();this._relatedFeatureListBindingTokens.push(this.relationList.bind(this,function(){return f()}))}};a.prototype._generateRelatedFeaturesViewIdFromConfigViewId=function(a,h){h=h||d.framework.utils.alphaNumericToken();return"{0} relatedfeatures-{1}".format(a||this.DEFAULT_VIEW_ID,h.toLowerCase().replace(/[^a-zA-Z0-9]/g,"").trim())};a.prototype._destroyAttachedViews=function(){for(var a=this,h=this.relatedFeatureViews.length-
1;h>=0;h--){var b=this.relatedFeatureViews[h];this.relatedFeatureViews.splice(h,1);this.app.viewManager.destroyView(b);delete b.viewModel}this._relatedFeatureListBindingTokens.forEach(function(h){return a.relationList.unbind(h)});this._addedRelatedFeatures=[];this._relatedFeatureListBindingTokens=[]};a.prototype._createConfiguredPresentableResultCollection=function(a){a=new d.framework.ui.PresentableCollection(a);a.pageSize.set(this.DEFAULT_PAGE_SIZE);this.DEFAULT_PAGED!=a.isPaginated.get()&&a.isPaginated.set(this.DEFAULT_PAGED);
a.sortingPredicate=null;return a};a.prototype._createColumnHeaderItems=function(a){var h=[],b=new d.essentialsHtmlViewer.mapping.infrastructure.ui.components.Table.TableColumnHeaderViewModel.SharedState(a,"sort","sort-up","sort-down"),a=a.items.get();if(a.length)for(var a=a[0].attributes.get(),f=0;f<a.length;f++)h.push(new e.infrastructure.ui.components.Table.TableColumnHeaderViewModel(this.app,this.libraryId,b,a[f].displayName.get(),a[f].type.get(),f));return h};a.prototype._getRelationshipObjectFromFeatureInfo=
function(a){for(var h=null,b=0;b<this.relationList.length();b++)for(var h=this.relationList.getAt(b),d=0;d<h.relatedEsriFeatureInfo.length();d++)if(a===h.relatedEsriFeatureInfo.getAt(d))return h;return h};a.prototype._getFeatureInfoFromFeature=function(a){for(var h=0;h<this._allRelatedFeatureInfo.length;h++)if(this._allRelatedFeatureInfo[h].gcxFeature===a)return this._allRelatedFeatureInfo[h].featureInfo;return null};a.prototype._processGeneratedGCXFeature=function(a){this._allRelatedFeatureInfo.push(a);
var h=this._getRelationshipObjectFromFeatureInfo(a.featureInfo);h&&(h.relatedGcxFeatures.addItem(a.gcxFeature),h.columnHeaders.length()||h.columnHeaders.addItems(this._createColumnHeaderItems(h.presentableResults)))};a.prototype.showParentView=function(){this.relatedFeatures.getLength()<1?this.parentFeature.get()&&this.parentFeature.set(null):(this.relatedFeatures.removeItem(this.currentFeature.get()),this.relatedFeatures.getLength()==0?this.app.command("ShowFeatureDetails").execute(this.parentFeature.get()):
this.app.command("ShowFeatureDetails").execute(this.relatedFeatures.getAt(this.relatedFeatures.length()-1)))};a.prototype.handleCurrentFeatureChanged=function(a){var h=this;if(a){this._destroyAttachedViews();this.hasRelationships.set(false);this.relationList.clear();this._allRelatedFeatureInfo=[];this.relatedLayers=new ObservableCollection([]);if(this._relatedLayerPromises)this._relatedLayerPromises.cancel(),this._relatedLayerPromises=null;var b=[],e=this.currentFeature.get().layer||this.currentFeature.get().featureLayer;
if(e&&e.relationships){for(var f=0;f<e.relationships.length;f++){var k=e.relationships[f];e instanceof d.essentials.Layer&&b.push(new Promise(function(a,g){return e.getRelatedFeatureLayer(k.id,a,g)}))}this._relatedLayerPromises=Promise.all(b);this._relatedLayerPromises.then(function(b){h._relatedLayerPromises=null;h.relatedLayers.addItems(b);if(a.hasVisibleRelationships.get()&&e&&e.relationships&&h.app.site.getFeatureServices()){h.hasRelationships.set(true);for(var d=0;d<e.relationships.length;d++)e.relationships[d].visible&&
function(){var a=new Observable(h.providerEnabled.get()),g=new ObservableCollection([]);a.sync(h.providerEnabled);a={displayName:new Observable(e.relationships[d].displayName||e.relationships[d].name),id:new Observable(e.relationships[d].id),relatedTableId:new Observable(e.relationships[d].relatedTableId),visible:new Observable(e.relationships[d].visible),relatedEsriFeatureInfo:new ObservableCollection([]),relatedGcxFeatures:g,hasRetrievedData:new Observable(false),noRelatedFeatures:new Observable(false),
canAdd:new Observable(true),validCardinality:new Observable(true),errorFetchingRelatedFeatures:new Observable(false),presentableResults:h._createConfiguredPresentableResultCollection(g),columnHeaders:new ObservableCollection([]),providerEnabled:a,masterViewModel:h};a.relatedEsriFeatureInfo.bind(h,function(a){h._generateGCXFeaturesFromRelatedFeatureInfos(a.sender.getRange(a.rangeStart,a.rangeEnd))});h.relationList.addItem(a)}();h._fetchRelatedFeatures()}h._createAttachedViews();h._updateProviderState();
h.parentFeature.get()==null&&h.parentFeature.set(h.currentFeature.get())})}}else throw Error("Feature cannot be null for the related features view model");};a.prototype.activateRelatedFeatureView=function(a){for(var h=0;h<this._allRelatedFeatureInfo.length;h++){var b=this._allRelatedFeatureInfo[h].featureInfo;if(a.id.get()===b.id.get()){this._displayGeocortexFeatureDetails(this._allRelatedFeatureInfo[h].gcxFeature);break}}};a.prototype._generateGCXFeaturesFromRelatedFeatureInfos=function(a){for(var h=
0;h<a.length;h++)this._generateRelatedGCXFeature(a[h])};a.prototype._generateRelatedGCXFeature=function(a){var h={featureInfo:a,esriFeature:null,gcxFeature:null,layer:null},b={};a.attributes.get().forEach(function(a){var g=a.name.get(),a=a.value.get();b[g]=a});var d=new esri.Graphic;d.setAttributes(b);var e=null;(this.currentFeature.get().layer||this.currentFeature.get().featureLayer).relationships.forEach(function(h){if((h.name?h.name:h.displayName)==a.relationName.get())e=h.relatedTableId});for(var f=
null,k=0;k<this.relatedLayers.getLength();k++){var j=this.relatedLayers.getAt(k);j.layerId===e&&(f=j)}if(f){if(e!=null)f.add(d),h.layer=f,h.esriFeature=d,this._checkRelatedFeature(h)}else{for(var j=a.featureUrl.replace(/\/[^/]*.$/,""),i=this.app.site.getFeatureServices(),k=0;k<i.length;k++){var l=i[k],r=this._getProperMapServiceUrlForComparison(l,j);if(j==r)f=l.serviceLayer,this.app.isOffline.get()&&f.add(d)}h.layer=f;h.esriFeature=d;this._checkRelatedFeature(h)}};a.prototype._checkRelatedFeature=
function(a){var h=this;if(a){var b=a.layer,f=a.esriFeature,k=null;if(b&&b.type!=="Table"&&(k=this._findGeocortexLayer(b),!k)){this.app.trace.debug("Could not find related layer in site. Related features will not be editable/viewable.");a.gcxFeature=new e.infrastructure.Feature({graphic:f,featureLayer:b});this._processGeneratedGCXFeature(a);return}if(!this.app.isOffline.get()&&!f.geometry&&k&&k.mapService&&k.mapService.serviceLayer instanceof esri.layers.FeatureLayer){var b=null,j=k.mapService.serviceLayer;
j.objectIdField&&(b=d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.findFeatureInMap(f,this.app.site,j));b?(a.gcxFeature=this._generateGeocortexFeature(b,k,j),this._processGeneratedGCXFeature(a)):(b=new esri.tasks.Query,b.objectIds=[f.attributes[k.getObjectIdFieldName()]],b.outFields=["*"],b.returnGeometry=true,j.queryFeatures?j.queryFeatures(b,function(b){if(b.features)f=b.features[0],a.gcxFeature=h._generateGeocortexFeature(f,k,j),h._processGeneratedGCXFeature(a)},function(a){h.app.trace.error("There was an error in retreiving the related feature: "+
a)}):(k.mapService.serviceUrl.split("?"),(new esri.tasks.QueryTask(e.infrastructure.taskUtils.getQueryTaskUrl(k))).execute(b,function(b){if(b.features)f=b.features[0],a.gcxFeature=h._generateGeocortexFeature(f,k,j),h._processGeneratedGCXFeature(a)},function(a){h.app.trace.error("There was an error in retreiving the related feature: "+a)})))}else a.gcxFeature=this._generateGeocortexFeature(f,k,b),this._processGeneratedGCXFeature(a)}};a.prototype._generateGeocortexFeature=function(a,h,b){a=new e.infrastructure.Feature({graphic:a,
layer:h,featureLayer:b});a.loadAttributes(true);if(b&&b.type==="Table"&&b.relationships.length>0&&this.app.site.getFeatureServices().length>0){a.hasVisibleRelationships.set(true);for(h=0;h<b.relationships.length;h++){var d=b.relationships[h];if(!d.visible)d.visible=true}}return a};a.prototype._displayGeocortexFeatureDetails=function(a){a!=this.relatedFeatures.getAt(this.relatedFeatures.getLength())&&this.relatedFeatures.addItem(a);this.app.command("ShowFeatureDetails").execute(a)};a.prototype.generateRelatedLayerObject=
function(a,h){var b=this,d=null,e=null;try{this._getFeatureLayerForCurrentFeature(a,function(f){f.relationships.forEach(function(h){h.id==a.id.get()&&h.relatedTableId==a.relatedTableId.get()&&(e=h)});d={id:a.id.get(),text:"New "+a.displayName.get(),relatedFeature:b.currentFeature.get().esriFeature.get(),essentialsRelatedFeature:b.currentFeature.get(),feature:null,editable:true,relationship:e};h(d)})}catch(f){this.app.trace.error("Error in generating related layer object for creation: "+f)}};a.prototype._getFeatureLayerForCurrentFeature=
function(a,h){var b=this.currentFeature.get().esriFeature.get().getLayer();if(b)h(b);else if(!b&&this.currentFeature.get().layer.type!="Table")this.app.command("GetFeatureDetailsProviders").execute(this.currentFeature.get()),(b=this.currentFeature.get().esriFeature.get().getLayer())||(b=this.currentFeature.get().layer.mapService.layers[0]),h(b);else if(!b)for(var d=this.app.site.getFeatureServices(),e=0;e<d.length;e++)for(var f=d[e],k=0;k<f.layers.length;k++)f.layers[k].id==a.relatedTableId.get()&&
this.app.featureLayerModule._getRelatedFeatureLayer(f,a.id.get(),function(a){b=a;h(b)})};a.prototype._relatedRecordCreated=function(){this.handleCurrentFeatureChanged(this.currentFeature.get())};a.prototype._relatedRecordEdited=function(a){if(a.attributes.Date)a.attributes.Date=this._formatDate(a.attributes.Date);var h=this.currentFeature.get().esriFeature.get().attributes,b;for(b in h)a.attributes[b]&&(h[b]=a.attributes[b]);this.currentFeature.get().loadAttributes(true)};a.prototype._fetchRelatedFeatures=
function(){var a=this,h=this.currentFeature.get(),b=this.currentFeature.get().layer||this.currentFeature.get().featureLayer;if(h&&b&&this.relationList&&this.relationList.length()>0){var f=h.layer?h.layer:h.featureLayer;if(f)for(b=0;b<this.relationList.length();b++){var k=function(b){var d=b.id.get(),o=new esri.tasks.RelationshipQuery;o.outFields=["*"];o.relationshipId=b.id.get();o.objectIds=h.getPrimaryKeyValue()!=null?[h.getPrimaryKeyValue()]:[h.esriFeature.get().attributes.OBJECTID];(new esri.tasks.QueryTask(e.infrastructure.taskUtils.getQueryTaskUrl(f))).executeRelationshipQuery(o).then(function(h){var e=
false,o;for(o in h)if(h.hasOwnProperty(o)){e=true;break}if(e){var k=null,e=null;if(f.getRelatedFeatureLayer)k=f.getRelatedFeatureLayer(d);else{var j=a.app.site.getFeatureServices(),i=f.url.match(/.*\//g);for(o=0;o<j.length;o++){var v=j[o],l=v.serviceLayer;if(v.serviceUrl.match(/.*\//g)[0]===i[0]){for(var n=0;n<l.relationships.length;n++){var q=l.relationships[n];if(q.relatedTableId==b.relatedTableId.get()){k=v.getRelatedFeatureLayer(q.id,null,null);break}}if(l.layerId==b.relatedTableId.get()){e=v.serviceLayer;
break}if(k)break}}}if(k)k.then(function(d){if(d.message)a._setCanAddNewFeature(f,b),b.noRelatedFeatures.set(true);else{for(var e in h)if(h.hasOwnProperty(e))for(var o=0;o<h[e].features.length;o++){var k=a._processRelatedFeature(d,h[e].features[o],b);b.relatedEsriFeatureInfo.addItem(k);d.hasAttachments&&setTimeout(function(a,g){return function(){g._loadAttachments(a)}}(k,a),100)}a._setCanAddNewFeature(f,b)}b.hasRetrievedData.set(true)},function(h){b.errorFetchingRelatedFeatures.set(true);b.hasRetrievedData.set(true);
a.app.trace.error("Error getting related record for layer {0}: {1}.".format(f.displayName,h.message))});else{for(var C in h)if(h.hasOwnProperty(C))for(o=0;o<h[C].features.length;o++)k=a._processRelatedFeature(e,h[C].features[o],b),b.relatedEsriFeatureInfo.addItem(k),e.hasAttachments&&setTimeout(function(a,g){return function(){g._loadAttachments(a)}}(k,a),100);a._setCanAddNewFeature(f,b);b.hasRetrievedData.set(true)}}else a._setCanAddNewFeature(f,b),b.noRelatedFeatures.set(true),b.hasRetrievedData.set(true)},
function(h){b.errorFetchingRelatedFeatures.set(true);b.hasRetrievedData.set(true);a.app.trace.error("Error getting related record for layer {0}: {1}.".format(f.displayName,h.message))})},j=function(b){var e=parseInt(b.id.get());a._setCanAddNewFeature(f,b);f.mapService&&(f.mapService.mapServiceType===d.essentials.MapServiceType.FEATURE||f.mapService.mapServiceType===d.essentials.MapServiceType.DYNAMIC)&&a.app.featureLayerModule?a.app.featureLayerModule._getRelatedFeatures(f.mapService,e,h.getPrimaryKeyValue(),
null,function(h){h?a.app.featureLayerModule._getRelatedFeatureLayer(f.mapService,e,function(d){for(var e=0;e<h.length;e++){var o=a._processRelatedFeature(d,h[e],b);b.relatedEsriFeatureInfo.addItem(o)}a._getRelationshipsForOffline(f,b);a._setCanAddNewFeature(f,b);b.hasRetrievedData.set(true)},function(h){b.errorFetchingRelatedFeatures.set(true);b.hasRetrievedData.set(true);a.app.trace.error("Error getting related record for layer {0}: {1}.".format(f.displayName,h.message))}):(b.noRelatedFeatures.set(true),
a._setCanAddNewFeature(f,b),b.hasRetrievedData.set(true))},function(h){b.errorFetchingRelatedFeatures.set(true);b.hasRetrievedData.set(true);a.app.trace.error("Error getting related record for layer {0}: {1}.".format(f.displayName,h.message))}):a._getRelationshipsForOffline(f,b)};this.app.isOffline.get()?j(this.relationList.getAt(b)):k(this.relationList.getAt(b))}}};a.prototype._setCanAddNewFeature=function(a,h){var b=null,e=null;h.canAdd.set(true);h.validCardinality.set(true);if(a instanceof d.essentials.Layer){if(b=
a,b.mapService.serviceLayer instanceof esri.layers.FeatureLayer)e=b.mapService.serviceLayer}else a instanceof esri.layers.FeatureLayer&&(e=a);if(e){if(e){var e=e.relationships,f=null;if(e&&e.length)for(b=0;b<e.length;b++){var k=e[b];k.id===h.id.get()&&(f=k)}if(f){(f.cardinality==="esriRelCardinalityOneToOne"||f.cardinality==="esriRelCardinalityOneToMany"&&f.role==="esriRelRoleDestination")&&h.relatedEsriFeatureInfo.get().length>0&&h.validCardinality.set(false);e=this.app.site.essentialsMap.mapServices;
for(b=0;b<e.length;b++)f=e[b].serviceLayer,f instanceof esri.layers.FeatureLayer&&f.layerId===h.relatedTableId.get()&&f.getEditCapabilities().canCreate===false&&h.canAdd.set(false)}}}else this.app.trace.debug("Attempted to see if related feature could be created but layer is not a Essentials Layer or Esri FeatureLayer."),h.canAdd.set(false),h.validCardinality.set(false)};a.prototype._getRelationshipsForOffline=function(a,h){for(var b=this,e=this.app.site.getFeatureServices(),f=h.relatedTableId.get(),
k=h.id.get(),j=function(){h.hasRetrievedData.set(true);h.relatedEsriFeatureInfo.length()==0?h.noRelatedFeatures.set(true):h.noRelatedFeatures.set(false);b._removeDuplicateRelatedFeaturesFromRelation(h)},i=0;i<e.length;i++)for(var l=e[i],p=0;p<l.serviceLayer.relationships.length;p++){var r=null;if(f==l.serviceLayer.layerId)l.serviceLayer.url=l.serviceUrl,r=l.serviceLayer.relationships[p];r?this.app.featureLayerModule._getRelatedFeatures(l,k,-1,this.currentFeature.get(),function(e){if(e.length>0)if(a.mapService)b.app.featureLayerModule._getRelatedFeatureLayer(a.mapService,
k).then(function(d){for(var f=0;f<e.length;f++)d.relationships.forEach(function(a){var g=e[f];g&&g.attributes[a.keyField]&&(a=b._processRelatedFeature(d,g,h),h.relatedEsriFeatureInfo.addItem(a))}),b._setCanAddNewFeature(a,h),j()});else{for(var f=0;f<e.length;f++){var t=e[f];try{if(t.getLayer&&t.getLayer())var i=b._processRelatedFeature(t.getLayer(),t,h);else var v=d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.findFeatureInMap(t,b.app.site),i=b._processRelatedFeature(v.getLayer(),t,h);h.relatedEsriFeatureInfo.addItem(i);
h.hasRetrievedData.set(true)}catch(l){b.app.trace.error("Error in processing related feature: "+l)}}b._setCanAddNewFeature(a,h);j()}else b._setCanAddNewFeature(a,h),j()}):(this._setCanAddNewFeature(a,h),j())}};a.prototype._removeDuplicateRelatedFeaturesFromRelation=function(a){var h=a.relatedEsriFeatureInfo.get(),b;for(b in h)for(var d=h[b],e=false,f=a.relatedEsriFeatureInfo.get().length-1;f>=0;f--)a.relatedEsriFeatureInfo.get()[f].id.get()==d.id.get()&&(e?a.relatedEsriFeatureInfo.removeAt(f):e=true)};
a.prototype._makeAttributesObservable=function(a,h){var b=new ObservableCollection,d=this._getAttributeTypes(h);if(a)for(var e in a)if(a.hasOwnProperty(e)){var f=a[e];d[e]&&d[e]==="esriFieldTypeDate"&&f&&(f=this._formatDate(f));b.addItem({name:new Observable(e),value:new Observable(f)})}return b};a.prototype._processRelatedFeature=function(a,h,b){var d=new ObservableCollection,f=h.attributes[a.displayField];if(a.getField){var k=e.infrastructure.gis.FieldInfo.fromEsriField(a.getField(a.displayField),
a);k.isCodedValueDomain()||k.hasSubtypeCodedValueDomains()?f=k.resolveCodedDomainValue(f,h.attributes[a.typeIdField]):k.type==="esriFieldTypeDate"&&(f=this._formatDate(f))}f||(f=h.attributes[a.objectIdField]);return{id:new Observable(h.attributes[a.objectIdField]),displayName:new Observable(f),relationName:new Observable(b.displayName.get()),layer:a,featureUrl:a.url+"/"+h.attributes[a.objectIdField],attributes:this._makeAttributesObservable(h.attributes,a),geometry:new Observable(h.geometry),hasAttachments:new Observable(false),
attachmentInfos:d}};a.prototype._loadAttachments=function(a){var h=this,b=a.featureUrl+"/attachments",e=null,e={url:b+"?f=json&ts="+(new Date).getTime(),handleAs:"json"},e=a.layer instanceof esri.layers.FeatureLayer&&a.layer.url?a.layer.queryAttachmentInfos(parseInt(a.id.get())):esri.request(e);e.then(function(h){if(h.length>0&&!h.attachmentInfos&&h instanceof Array){h.attachmentInfos=[];for(var e=0;e<h.length;e++)h.attachmentInfos[e]=h[e]}if(h&&h.attachmentInfos&&h.attachmentInfos.length>0){for(e=
0;e<h.attachmentInfos.length;e++){var f=h.attachmentInfos[e],k=new d.essentialsHtmlViewer.mapping.infrastructure.AttachmentInfo;k.id.set(f.id);k.contentType.set(f.contentType);k.size.set(f.size);k.name.set(f.name);k.url.set(b+"/"+f.id);a.attachmentInfos.addItem(k)}a.hasAttachments.set(true)}},function(b){h.app.trace.error("Unable to retrieve attachment information for related feature '"+a.featureUrl+"': "+b.message)})};a.prototype._getAttributeTypes=function(a){var h={};a&&a.fields&&dojo.forEach(a.fields,
function(a){h[a.name]=a.type});return h};a.prototype._formatDate=function(a){var a=new Date(a),h=this.getResource("language-feature-date-format")||"EEE MMM dd";try{return dojo.date.locale.format(a,{datePattern:h,selector:"date"})}catch(b){this.app.trace.warning("Unable to format date: "+b.message)}return null};a.prototype._cleanup=function(){this.parentFeature.set(null);this.relatedFeatures.clear()};a.prototype._findGeocortexLayer=function(a){if(a){for(var h=this.app.site,b=0;b<h.essentialsMap.mapServices.length;b++){var d=
h.essentialsMap.mapServices[b];if(d.serviceLayer instanceof esri.layers.FeatureLayer){var e=d.serviceLayer;if(e.layerId==a.layerId&&e.name==a.name&&d.layers.length>0)return d.layers[0]}}for(var f=a.url.match(/.[^?]*/g)[0],b=0;b<h.essentialsMap.mapServices.length;b++)if(d=h.essentialsMap.mapServices[b],a=this._getProperMapServiceUrlForComparison(d,f),a===f&&d.layers.length>0)return d.layers[0];e=Number(f.match(/[^/]*.$/));f=f.replace(/\/[^/]*.$/,"");for(b=0;b<h.essentialsMap.mapServices.length;b++)if(d=
h.essentialsMap.mapServices[b],a=this._getProperMapServiceUrlForComparison(d,f),a===f&&d.layers.length>=e)return d.layers[e];return null}};a.prototype._getProperMapServiceUrlForComparison=function(a,h){var b=a.serviceUrl;a.serviceToken&&h.search(/token=.[^&]*/g)>0&&(b+="?token="+a.serviceToken);return b};a.prototype._updateProviderState=function(){var a=this,h=false;this.updateProviderState(h);var b=function(b){if(b.canAdd.get()||!b.errorFetchingRelatedFeatures.get()&&b.relatedEsriFeatureInfo.length())h=
true;a.updateProviderState(h)};if(this.relationList.length())for(var d=0;d<this.relationList.length();d++){if(h)break;var e=this.relationList.getAt(d);if(e.hasRetrievedData.get())b(e);else e.hasRetrievedData.once(this,function(){return b(e)})}};return a}(e.infrastructure.featureDetails.FeatureProviderBase);f.RelatedFeaturesViewModel=k})(f.FeatureDetailsProviders||(f.FeatureDetailsProviders={}))})(f.FeatureDetails||(f.FeatureDetails={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.initialize=function(a){var g=this;d.prototype.initialize.call(this,a);if(a&&typeof a.title=="string")if(a.titleLibraryId&&a.title.startsWith("@"))if(this.app.allLibrariesLoaded)document.title=this.app.getResource(a.titleLibraryId,a.title.substring(1));else var h=this.app.event("ViewerLibrariesDownloadedEvent").subscribe(this,function(){g.app.event("ViewerLibrariesDownloadedEvent").unsubscribe(h);
document.title=g.app.getResource(a.titleLibraryId,a.title.substring(1))});else document.title=a.title};return b}(d.framework.application.ModuleBase);e.BrowserModule=f})(e.browser||(e.browser={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(j){function b(a,g){var h=this;j.call(this,a,g);this.headerText=new Observable("");this.currentFeature=new Observable(null);this.currentFeatureSet=this.currentEsriFeatureClone=null;this.viewsToActivate=[];this.featureMultiRegionCss=new Observable("");this.currentFeature.bind(this,function(){return h._handleCurrentFeatureChanged()});this.regionViewSwitcherWidgetMarkup="Mapping/modules/FeatureDetails/FeatureDetailsSwitcherView.html";
this.regionViewSwitcherLibraryId=this.libraryId;this._registerCommands();this._subscribeEvents()}__extends(b,j);b.prototype.initialize=function(a){if(a)this._config=a,this._config.autoInsertViewSwitcher=true;j.prototype.initialize.call(this,a)};b.prototype.createViewSwitcherViewModel=function(a){a=new f.FeatureDetailsSwitcherViewModel(this.app,this.libraryId,a);a.initialize(this._config);return a};b.prototype.processRegion=function(a){var g=this;j.prototype.processRegion.call(this,a);a.regionActive.bind(this,
function(h){return g._updateMultiRegionViewCss(a,h)})};b.prototype._updateMultiRegionViewCss=function(){var a="";this.regionDescriptors.get().forEach(function(g){return a=a.concat(" {0}-{1}".format(g.regionName,g.regionActive.get()?"active":"inactive"))});this.featureMultiRegionCss.set(a.trim())};b.prototype._registerCommands=function(){var a=this;this.app.command("_updateFeatureDetailViewModels").register(this,function(g){if(g&&g instanceof e.infrastructure.Feature)a._setCurrentFeature(g),a.currentFeatureSet=
a.currentFeature.get()?a.currentFeature.get().featureSet:null})};b.prototype._subscribeEvents=function(){this.app.event("FeatureEditedEvent").subscribe(this,this._handleEditedFeature);this.app.event("FeatureDeletedEvent").subscribe(this,this._handleDeletedFeature);this.app.event("FSMCollectionRemovedEvent").subscribe(this,this._onFeatureSetCollectionRemoved)};b.prototype._handleDeletedFeature=function(a){if((a=a.originalFeature||a instanceof esri.Graphic?a:null)&&this.currentEsriFeatureClone&&e.infrastructure.MapUtils.esriFeaturesEqual(this.currentEsriFeatureClone,
a))this.currentEsriFeatureClone=null,this._deactivateViews()};b.prototype._handleEditedFeature=function(a){if(!a.originalFeature||!a.editedFeature)this.app.trace.warning("FeatureDetailsViewModel: Could not handle FeatureEditedEvent. Original or Edited feature not provided.");else if(this.currentEsriFeatureClone&&e.infrastructure.MapUtils.esriFeaturesEqual(a.originalFeature,this.currentEsriFeatureClone))this.currentFeature.get().esriFeature.set(a.editedFeature),this._processCurrentFeature(),this.currentEsriFeatureClone=
a.editedFeature};b.prototype._onFeatureSetCollectionRemoved=function(a){var g=a.featureSetCollection;if(g&&(a=this.currentFeature.get())&&a.featureSet)if((g=g.getFeatureSetById(a.featureSet.id))&&g.uniqueId==a.featureSet.uniqueId)this.currentFeature.set(null),this._deactivateViews()};b.prototype._setCurrentFeature=function(a){if(typeof a=="string"){var g=this.app.featureSetManager.getCollectionById(a);g?(a=g.firstFeature())?this.currentFeature.set(a):this.app.trace.error("No feature in feature set collection"):
this.app.trace.error("No feature set collection found matching id: "+a)}else if(a&&a instanceof d.essentialsHtmlViewer.mapping.infrastructure.Feature){if(a.featureSet==null)g=new e.infrastructure.FeatureSet({app:this.app}),g.addFeature(a),a.featureSet=g;this.currentFeature.set(a)}this._processCurrentFeature()};b.prototype._handleCurrentFeatureChanged=function(){var a=this.currentFeature.get();this.currentEsriFeatureClone=a?d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.cloneEsriFeature(a._graphic):
null};b.prototype._processCurrentFeature=function(){var a=this.currentFeature.get();this.headerText.removeSync();a&&this.headerText.sync(a.plainLabel)};b.prototype._deactivateViews=function(){for(var a=0;a<this.viewsToActivate.length;a++){var g=this.viewsToActivate[a];this.app.command("DeactivateView").execute(g)}};return b}(d.framework.ui.MultiRegion.MultiRegionViewModel);f.FeatureDetailsViewModel=i})(f.FeatureDetails||(f.FeatureDetails={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){(function(f){var k=function(b){function a(){b.apply(this,arguments);this.showLongDescription=false}__extends(a,b);a.prototype.initialize=function(a){b.prototype.initialize.call(this,a);if(a&&a.longDescription)this.showLongDescription=true};a.prototype.handleCurrentFeatureChanged=function(a){this.updateProviderState(!!(this.showLongDescription?a.longDescription.get():a.description.get()))};return a}(d.infrastructure.featureDetails.FeatureProviderBase);
f.DescriptionViewModel=k})(f.FeatureDetailsProviders||(f.FeatureDetailsProviders={}))})(f.FeatureDetails||(f.FeatureDetails={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){var f=function(b){function a(){b.apply(this,arguments);this._presenterView=this._relatedRecordEditedToken=this._featureEditedToken=this._featureChangedToken=null}__extends(a,b);a.prototype.attach=function(a){b.prototype.attach.call(this,a);if(this._featureChangedToken)this.app.event("FeatureChangedEvent").unsubscribe(this._featureChangedToken),this._featureChangedToken=null;if(this._featureEditedToken)this.app.event("FeatureEditedEvent").unsubscribe(this._featureEditedToken),
this._featureEditedToken=null;this._featureChangedToken=this.app.event("FeatureChangedEvent").subscribe(this,this._handleFeatureChangedEvent);this._featureEditedToken=this.app.event("FeatureEditedEvent").subscribe(this,this._updateDescription);this._relatedRecordEditedToken=this.app.event("RelatedRecordEditedEvent").subscribe(this,this._handleRelatedRecordsEdited)};a.prototype.destroy=function(){b.prototype.destroy.call(this);if(this._featureChangedToken)this.app.event("FeatureChangedEvent").unsubscribe(this._featureChangedToken),
this._featureChangedToken=null;if(this._featureEditedToken)this.app.event("FeatureEditedEvent").unsubscribe(this._featureEditedToken),this._featureEditedToken=null;if(this._relatedRecordEditedToken)this.app.event("RelatedRecordEditedEvent").unsubscribe(this._relatedRecordEditedToken),this._relatedRecordEditedToken=null;if(this._presenterView)this._presenterView.destroy(),this._presenterView=null};a.prototype.resolveWidget=function(a,h,e){if(h&&a==="GetDescription"){var f=new d.essentialsHtmlViewer.mapping.infrastructure.FeatureDescriptionPresenterView(this.app,
this.libraryId);if(f)return f.contentField=this.viewModel.showLongDescription?"longDescription":"description",f.root=dojo.create("div"),f.root.className="feature-description",h.hasRelationships&&h.hasRelationships.get()?f.descriptionApply(h,f.root):f.root.innerHTML=f.descriptionGet(h),f.attach(h),this._presenterView=f}return b.prototype.resolveWidget.call(this,a,h,e)};a.prototype._handleFeatureChangedEvent=function(a){this._presenterView&&a&&this.viewModel.currentFeature.get()&&this.viewModel.currentFeature.get().token===
a.token&&this._updateDescription()};a.prototype._handleRelatedRecordsEdited=function(a){var h=this.viewModel.currentFeature.get(),b=h&&h.esriFeature.get(),d=b&&b.getLayer();h&&d&&b.attributes[d.objectIdField]===a.attributes[d.objectIdField]&&(dojo.mixin(b.attributes,a.attributes),h.esriFeature.pulse())};a.prototype._updateDescription=function(){var a=this.viewModel.currentFeature.get();if(a)this._presenterView.destroyBindings(),a.hasRelationships&&a.hasRelationships.get()?this._presenterView.descriptionApply(a,
this._presenterView.root):this._presenterView.root.innerHTML=this._presenterView.descriptionGet(a),this._presenterView.attach(a)};return a}(d.framework.ui.ViewBase);e.DescriptionView=f})(e.FeatureDetailsProviders||(e.FeatureDetailsProviders={}))})(e.FeatureDetails||(e.FeatureDetails={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.framework.application.ModuleBase);e.GeolocateModule=f})(e.geolocate||(e.geolocate={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.deactivateGeolocateMenuView=function(){this.app.event("FlyoutDeactivated").publish(this);this.app.command("DeactivateView").execute("GeolocateView")};b.prototype.handleClickGeolocate=function(){var a=this;if(this.viewModel.isTracking.get()||this.viewModel.isFollowing.get())return this.app.command("GeolocateStop").execute(),false;if(this.viewModel.optionsCount.get()===
1)if(this.viewModel.geolocateEnabled.get())return this.app.command("Geolocate").execute(),false;else if(this.viewModel.trackingEnabled.get())return this.app.command("GeolocateTrack").execute(),false;else{if(this.viewModel.followingEnabled.get())return this.app.command("GeolocateFollow").execute(),false}else if(this.app.event("FlyoutActivated").publish(this),this.app.configuration.mobileMode)this.app.command("ActivateView").execute("GeolocateView");else{var g={view:this,onOtherInteracted:function(g){return a._onOtherInteracted(g)}};
this.app.command("TapToDismiss").execute(g);this.app.command("ToggleView").execute("GeolocateView")}};b.prototype.handleClickMenuFind=function(){this.app.command("Geolocate").execute();this.deactivateGeolocateMenuView();return false};b.prototype.handleClickMenuTrack=function(){this.app.command("GeolocateTrack").execute();this.deactivateGeolocateMenuView();return false};b.prototype.handleClickMenuFollow=function(){this.app.command("GeolocateFollow").execute();this.deactivateGeolocateMenuView();return false};
b.prototype._onOtherInteracted=function(a){a=$(a.target||a.srcElement);a.hasClass("geolocate-base")&&a.hasClass("toggle-btn")||this.deactivateGeolocateMenuView()};return b}(d.framework.ui.ViewBase);e.GeolocateView=f})(e.geolocate||(e.geolocate={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(f){function b(){f.apply(this,arguments);this.visible=new Observable(true);this.geolocateEnabled=new Observable(false);this.geolocateWatchId=new Observable(null);this.geolocateOptions={};this.trackingEnabled=new Observable(false);this.followingEnabled=new Observable(false);this.adjustExtentZoomOnGeolocate=new Observable(true);this.geolocateExtentZoomLevel=new Observable(null);this.geolocateAccuracyCircleEnabled=new Observable(true);
this.optionsCount=new Observable(0);this.isSingle=new Observable(false);this.isTracking=new Observable(false);this.isFollowing=new Observable(false);this.geolocationLayer=new esri.layers.GraphicsLayer;this.accuracyCircle=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color([42,84,155,0.65]),2),new esri.Color([42,84,155,0.35]));this.indicatorIcon=null;this.mapZoomEndEventId=new Observable(null);
this.activeToolChangedEventId=new Observable(null);this.lastProjectedPoint=null;this.singleGeolocationProfiles={};this.singleGeolocationFallbackProfile={accuracyThreshold:10,timeLimit:3E4}}__extends(b,f);b.prototype.initialize=function(a){this._registerCommands();if(a&&(this.geolocateEnabled.set(a.geolocateEnabled||false),this.trackingEnabled.set(a.trackingEnabled||false),this.followingEnabled.set(a.followingEnabled||false),this.geolocateOptions.enableHighAccuracy=a.hasOwnProperty("enableHighAccuracy")?
a.enableHighAccuracy:true,this.geolocateOptions.timeout=a.hasOwnProperty("timeout")?a.timeout:Infinity,this.geolocateOptions.maximumAge=a.maximumAge||0,a.hasOwnProperty("singleGeolocationProfiles")))for(var g in a.singleGeolocationProfiles)this.singleGeolocationProfiles[g]=a.singleGeolocationProfiles[g];!this.geolocateEnabled.get()&&!this.trackingEnabled.get()&&!this.followingEnabled.get()&&this.visible.set(false);if(navigator.geolocation){typeof a.adjustExtentZoomOnGeolocate!=="undefined"?this.adjustExtentZoomOnGeolocate.set(a.adjustExtentZoomOnGeolocate):
this.adjustExtentZoomOnGeolocate.set(true);typeof a.geolocateExtentZoomLevel!=="undefined"?this.geolocateExtentZoomLevel.set(a.geolocateExtentZoomLevel):this.geolocateExtentZoomLevel.set(5E4);typeof a.geolocateAccuracyCircleEnabled!=="undefined"?this.geolocateAccuracyCircleEnabled.set(a.geolocateAccuracyCircleEnabled):this.geolocateAccuracyCircleEnabled.set(true);if(typeof a.geolocationIndicator!=="undefined"&&(this.indicatorIcon=new esri.symbol.PictureMarkerSymbol({angle:0,xoffset:0,yoffset:0,type:"esriPMS",
url:a.geolocationIndicator,contentType:"image/png",width:24,height:24}),this.indicatorIcon==null))this.indicatorIcon=new esri.symbol.PictureMarkerSymbol({angle:0,xoffset:0,yoffset:0,type:"esriPMS",url:"Resources/Images/Icons/geolocate-position-32.png",contentType:"image/png",width:24,height:24});navigator.geolocation?(this.app.event("SiteInitializedEvent").once(this,this._handleGeolocateStateChanged),this.app.event("ApplicationOnlineEvent").subscribe(this,this._handleGeolocateStateChanged),this.app.event("ApplicationOfflineEvent").subscribe(this,
this._handleGeolocateStateChanged),this.app.event("NativeApplicationReady").subscribe(this,this._handleGeolocateStateChanged)):this.visible.set(false);this.optionsCount.set(this.geolocateEnabled.get()?this.optionsCount.get()+1:this.optionsCount.get());this.optionsCount.set(this.followingEnabled.get()?this.optionsCount.get()+1:this.optionsCount.get());this.optionsCount.set(this.trackingEnabled.get()?this.optionsCount.get()+1:this.optionsCount.get())}else this.visible.set(false)};b.prototype._registerCommands=
function(){var a=this;this.app.command("ShowGeolocateMenu").register(this,function(){a.app.command("ActivateView").execute("GeolocateView")},function(){return a.visible.get()});this.app.command("Geolocate").register(this,this._geolocate);this.app.command("GeolocateTrack").register(this,this._geolocateTrack);this.app.command("GeolocateFollow").register(this,this._geolocateFollow);this.app.command("GeolocateStop").register(this,this._stopGeolocation);this.app.command("GeolocateShowBuffer").register(this,
this._showBuffer);this.app.command("GeolocateHideBuffer").register(this,this._hideBuffer)};b.prototype._handleGeolocateStateChanged=function(){var a=this,g=this.app.map,h=this.app.isOffline.get();if(this._geolocateIsEnabled())if(this.app.isNative.get())this._setVisibilityForNativeApp(g);else if(h)if(g.loaded)this._checkSpatialReferencesAndSetVisibility(g);else{if(!g.loaded)this.app.event("MapLoadedEvent").once(this,function(g){return a._checkSpatialReferencesAndSetVisibility(g)})}else this.visible.set(true);
else this.visible.set(false)};b.prototype._checkSpatialReferencesAndSetVisibility=function(){this._geolocateIsEnabled();this.visible.set(false)};b.prototype._setVisibilityForNativeApp=function(a){var g=this;if(this._geolocateIsEnabled()){var h=function(a){a.spatialReference&&(a.spatialReference.wkid===102100||a.spatialReference.wkid===4326)?g.visible.set(true):a.spatialReference?g.app.command("NativeHasCapability").execute("project",function(a){return g.visible.set(a)}):g.visible.set(false)};if(a.loaded)h(a);
else this.app.event("MapLoadedEvent").once(this,function(a){return h(a)})}else this.visible.set(false)};b.prototype._geolocateIsEnabled=function(){return this.geolocateEnabled.get()||this.trackingEnabled.get()||this.followingEnabled.get()};b.prototype._geolocate=function(a){this._stopGeolocation();a&&"toolFriendly"in a&&a.toolFriendly||this.app.command("ClearActiveTool").execute();this.singleGeolocationAccuracyThreshold=this.singleGeolocationFallbackProfile.accuracyThreshold;this.singleGeolocationTimeLimit=
this.singleGeolocationFallbackProfile.timeLimit;var g=a&&a.profile?a.profile:"default";if(g in this.singleGeolocationProfiles){if("accuracyThreshold"in this.singleGeolocationProfiles[g])this.singleGeolocationAccuracyThreshold=this.singleGeolocationProfiles[g].accuracyThreshold;if("timeLimit"in this.singleGeolocationProfiles[g])this.singleGeolocationTimeLimit=this.singleGeolocationProfiles[g].timeLimit}else console.error("Single geolocation profile named '"+g+"' was not found. Fallback values will be used");
if(a&&"accuracyThreshold"in a)this.singleGeolocationAccuracyThreshold=a.accuracyThreshold;if(a&&"timeLimit"in a)this.singleGeolocationTimeLimit=a.timeLimit;this.isSingle.set(true);this._initializeGeolocation()};b.prototype._geolocateTrack=function(){this.app.command("ClearActiveTool").execute();this._stopGeolocation();this.isTracking.set(true);this._initializeGeolocation()};b.prototype._geolocateFollow=function(){var a=this;this.app.command("ClearActiveTool").execute();this._stopGeolocation();this.isFollowing.set(true);
this.app.map.disablePan();this.mapZoomEndEventId.set(this.app.event("MapZoomEndEvent").subscribe(this,function(){a.app.map.enablePan();a.lastProjectedPoint&&a.app.command("PanToPoint").execute(a.lastProjectedPoint);a.isFollowing.get()&&a.app.map.disablePan()}));this._initializeGeolocation()};b.prototype._initializeGeolocation=function(){var a=this,g=d.essentialsHtmlViewer.mapping.modules.geolocate.GeolocateSpoofer||navigator.geolocation;if(!navigator||!g){var g=this.app.getResource(this.libraryId,
"language-geolocate-error"),h=this.app.getResource(this.libraryId,"language-geolocate-error-browser");this.app.command("Alert").execute(h,g)}else{this.geolocateWatchId.get()&&g&&(g.clearWatch(this.geolocateWatchId.get()),this.geolocateWatchId.set(null));this.activeToolChangedEventId.set(this.app.event("ActiveToolChanged").subscribe(this,function(){a._stopGeolocation(true)}));if(this.isSingle.get()){this.singleGeolocationBestEventPayload=null;this.singleGeolocatedEventAlreadyPublished=false;if(this.singleGeolocationTimeoutId)clearTimeout(this.singleGeolocationTimeoutId),
this.singleGeolocationTimeoutId=null;this.singleGeolocationTimeoutId=setTimeout(function(){a._haltSingleGeolocation(true)},this.singleGeolocationTimeLimit)}this.app.map.removeLayer(this.geolocationLayer);this._showBusyLocating(true);g=d.essentialsHtmlViewer.mapping.modules.geolocate.GeolocateSpoofer||navigator.geolocation;this.geolocateWatchId.set(g.watchPosition(function(g){return a._handleGeolocationResult(g)},function(g){return a._handleGeolocationError(g)},this.geolocateOptions))}};b.prototype._showBusyLocating=
function(a){var g=this;a?(a=this.app.getResource(this.libraryId,"language-geolocate-in-progress"),a=new d.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs(a,null,this.isSingle.get()?function(){g._haltSingleGeolocation()}:function(){g._stopGeolocation()}),a.showBusyIcon=true,a.timeoutMS=0,this.app.command("AddStatus").execute(a)):this.app.command("RemoveStatus").execute("")};b.prototype._hideBuffer=function(){this.accuracyGraphic&&this.geolocationLayer.remove(this.accuracyGraphic);
this.indicatorGraphic&&this.geolocationLayer.remove(this.indicatorGraphic)};b.prototype._showBuffer=function(){this.accuracyGraphic&&this.geolocationLayer.add(this.accuracyGraphic);this.indicatorGraphic&&this.geolocationLayer.add(this.indicatorGraphic)};b.prototype._handleGeolocationResult=function(a){var g=this;if(a&&a.coords){var h=new esri.SpatialReference({wkid:4326}),b=new esri.SpatialReference({wkid:102100}),h=new esri.geometry.Point(a.coords.longitude,a.coords.latitude,h),f=esri.geometry.geographicToWebMercator(h),
b=d.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.createCircle(b,f,a.coords.accuracy,60),h=new esri.tasks.ProjectParameters;h.geometries=[b];h.outSR=this.app.map.spatialReference;var k=function(a){g._showBusyLocating(false);g._stopGeolocation();var h;h=g.app.isOffline.get()?g.getResource("language-geolocate-error-offline"):g.getResource("language-geolocate-error-projection").format(a.message);g.app.trace.warning(a.toString());g.app.command("Alert").execute(h)};e.infrastructure.GeometryUtils.project(h,
function(h){var b=(h=h&&h.length>0?h[0]:null)?h.getExtent():null,b=b?b.getCenter():null,e=new d.essentialsHtmlViewer.mapping.infrastructure.eventArgs.GeolocationEventArgs;e.mapPoint=f;e.projectedMapPoint=b;e.location=a;e.accuracyThreshold=g.singleGeolocationAccuracyThreshold;e.typeOfGeolocation=g.isFollowing.get()?"following":g.isTracking.get()?"tracking":"single";(g.isFollowing.get()||g.isTracking.get())&&g.app.event("GeolocatedEvent").publish(e);if(g.isSingle.get()){if(!g.singleGeolocationBestEventPayload||
e.location.coords.accuracy<=g.singleGeolocationBestEventPayload.location.coords.accuracy)g.singleGeolocationBestEventPayload=e;e=g.singleGeolocationBestEventPayload;if(e.location.coords.accuracy<=g.singleGeolocationAccuracyThreshold)clearTimeout(g.singleGeolocationTimeoutId),g.singleGeolocationTimeoutId=null,g._showBusyLocating(false),g._updateStatus(e.location),g.geolocateWatchId.get()&&((d.essentialsHtmlViewer.mapping.modules.geolocate.GeolocateSpoofer||navigator.geolocation).clearWatch(g.geolocateWatchId.get()),
g.geolocateWatchId.set(null)),g.app.event("GeolocatedEvent").publish(e),g.singleGeolocatedEventAlreadyPublished=true}!g.isTracking.get()&&g.geolocationLayer.getMap()==null&&g.adjustExtentZoomOnGeolocate.get()&&g.app.map.setScale(g.geolocateExtentZoomLevel.get());if(!h||!b)k(Error("Cannot add the indicators and status message to the map without a proper geometry."));else{g.lastProjectedPoint=b;g.isTracking.get()||(g.app.map.enablePan(),g.app.command("PanToPoint").execute(b),g.isFollowing.get()&&g.app.map.disablePan());
if(g.geolocationLayer.getMap()==null){(g.isFollowing.get()||g.isTracking.get())&&g._showBusyLocating(false);if(typeof g.indicatorGraphic=="undefined")g.indicatorGraphic=new esri.Graphic(b,g.indicatorIcon),g.accuracyGraphic=new esri.Graphic(h,g.accuracyCircle);g.geolocationLayer.add(g.indicatorGraphic);g.geolocateAccuracyCircleEnabled.get()?(g.accuracyGraphic.setGeometry(h),g.geolocationLayer.add(g.accuracyGraphic)):g.geolocationLayer.remove(g.accuracyGraphic);g.app.map.addLayer(g.geolocationLayer)}else g.indicatorGraphic.setGeometry(b),
g.geolocateAccuracyCircleEnabled.get()&&g.accuracyGraphic.setGeometry(h);(g.isFollowing.get()||g.isTracking.get())&&g._updateStatus(a);g.app.map.on("click",function(a){if(g.accuracyGraphic===a.graphic||g.indicatorGraphic==a.graphic)g.geolocationLayer.remove(g.accuracyGraphic),!g.isFollowing.get()&&!g.isTracking.get()&&g._stopGeolocation()})}},k,this.app)}};b.prototype._handleGeolocationError=function(a){this._showBusyLocating(false);this._stopGeolocation();var g;switch(a.code){case a.PERMISSION_DENIED:g=
"language-geolocate-error-permission";break;case a.POSITION_UNAVAILABLE:g="language-geolocate-error-position-unavailable";break;case a.TIMEOUT:g="language-geolocate-error-timeout";break;default:g="language-geolocate-error-unknown"}this.app.event("GeolocationFailedEvent").publish({error:a,isFollowing:this.isFollowing.get(),isTracking:this.isTracking.get()});g=this.getResource("language-geolocate-error")+this.getResource(g);this.app.trace.warning(g+": "+a.message);this.app.command("Alert").execute(g)};
b.prototype._haltSingleGeolocation=function(a){a===void 0&&(a=false);var g=this.geolocateWatchId.get(),h=d.essentialsHtmlViewer.mapping.modules.geolocate.GeolocateSpoofer||navigator.geolocation;g&&h&&(h.clearWatch(g),this.geolocateWatchId.set(null));if(this.singleGeolocationTimeoutId)clearTimeout(this.singleGeolocationTimeoutId),this.singleGeolocationTimeoutId=null;if(this.singleGeolocationBestEventPayload){if(this._showBusyLocating(false),this._updateStatus(this.singleGeolocationBestEventPayload.location),
!this.singleGeolocatedEventAlreadyPublished)g=this.singleGeolocationBestEventPayload,g.timedOut=a,this.app.event("GeolocatedEvent").publish(g),this.singleGeolocatedEventAlreadyPublished=true}else this._stopGeolocation(),this.app.command("Alert").execute(this.app.getResource(this.libraryId,"language-geolocate-error-no-results"),this.app.getResource(this.libraryId,"language-geolocate-title"))};b.prototype._stopGeolocation=function(a){a==void 0&&(a=false);var g=d.essentialsHtmlViewer.mapping.modules.geolocate.GeolocateSpoofer||
navigator.geolocation;this.geolocateWatchId.get()&&g&&(g.clearWatch(this.geolocateWatchId.get()),this.geolocateWatchId.set(null));if(this.singleGeolocationTimeoutId)clearTimeout(this.singleGeolocationTimeoutId),this.singleGeolocationTimeoutId=null;this.lastProjectedPoint=null;this.app.event("MapZoomEndEvent").unsubscribe(this.mapZoomEndEventId.get());this.app.event("ActiveToolChanged").unsubscribe(this.activeToolChangedEventId.get());this.app.map.removeLayer(this.geolocationLayer);this.isSingle.set(false);
this.isTracking.set(false);this.isFollowing.set(false);this.app.command("RemoveStatus").execute("");a||this.app.map.enableMapNavigation();this.app.command("DeactivateView").execute("GeolocateStatusView")};b.prototype._updateStatus=function(a){var g=this,h=this.app.viewManager.getViewById("GeolocateStatusView");if(h){h.viewModel.onClose=function(){g._stopGeolocation()};var b;this.isSingle.get()?b="single":this.isTracking.get()?b="tracking":this.isFollowing.get()&&(b="following");h.viewModel.updateStatus(b,
a);h.viewModel.status.get()||h.viewModel.showCoordinates.get()?this.app.viewManager.activateView(h):this.app.viewManager.deactivateView(h)}};return b}(d.framework.ui.ViewModelBase);f.GeolocateViewModel=i})(f.geolocate||(f.geolocate={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,g){d.call(this,a,g)}__extends(b,d);b.prototype.attach=function(a){if(a)a.layerActionsView=this,d.prototype.attach.call(this,a)};return b}(d.essentialsHtmlViewer.mapping.infrastructure.menus.MenuView);e.LayerActionsView=f})(e.layerList||(e.layerList={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,g){d.call(this,a,g);this.registerCommands()}__extends(b,d);b.prototype.registerCommands=function(){var a=this;this.app.command("ShowLayerActions").register(this,function(g){g&&a.layerActionsView&&(a.layerActionsView.viewModel.menuContext.set(g),a.layerActionsView.title.set(g.displayName),a.app.command("ActivateView").execute(a.layerActionsView.id))})};return b}(d.essentialsHtmlViewer.mapping.infrastructure.menus.MenuViewModel);
e.LayerActionsViewModel=f})(e.layerList||(e.layerList={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,g){d.call(this,a,g);this.layerListItems=new ObservableCollection([]);this.layerThemes=new ObservableCollection;this.activeLayerTheme=new Observable(null);this.viewInitialized=new Observable(false);this.activeLayerTheme.bind(this,dojo.hitch(this,this._setActiveLayerTheme))}__extends(b,d);b.prototype.initialize=function(a){var g=this;d.prototype.initialize.call(this,a);this.showTransparencySlider=a.showTransparencySlider||
false;this.autoExpandLegendSwatches=a.autoExpandLegendSwatches||false;this.showTransparencySlider||this.app.trace.info("Transparency sliders not enabled for map services in the Configurable LayerList module");this.app.event("LayerListInitializedEvent").subscribe(this,function(a){var b=a.children.get(),d=function(){g.layerListItems.clear();g.setupListItems(b);g.layerListItems.addItems(b)};d();a.children.once(g,d);if(a.mapInfo&&a.mapInfo.gcxMap&&a.mapInfo.gcxMap.layerThemesInfo)a=a.mapInfo.gcxMap.layerThemesInfo,
g.layerThemes.addItems(a.themes),a.activeTheme&&g.activeLayerTheme.set(a.activeTheme),dojo.connect(a,"layerThemeChangedEvent",function(a){a.currTheme&&g.activeLayerTheme.get()&&g.activeLayerTheme.get()!==a.currTheme&&g.activeLayerTheme.set(a.currTheme)})})};b.prototype.setupListItems=function(a){var g=this,h=function(a){for(var b=0;b<a.length;b++)g._processListItem(a[b]),a[b].children&&a[b].children.length()&&h(a[b].children.get())};h(a)};b.prototype._processListItem=function(a){a.canAdjustOpacity.get()&&
!this.showTransparencySlider&&a.canAdjustOpacity.set(false);if(a.layerList.enableLegendIntegration&&this.autoExpandLegendSwatches&&(a.type===2||a.type===3)){var g=function(){a.expandLegend.set(a.legendItems&&a.legendItems.length()>1)};if(a.legendItems&&!a.legendItems.length())a.legendItems.once(this,g);else g()}};b.prototype._setActiveLayerTheme=function(a){a&&!a.isActive&&a.applyToMap()};return b}(d.framework.ui.ViewModelBase);e.LayerListViewModel=f})(e.layerList||(e.layerList={}))})(e.modules||
(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.tSliderElement=null;this.initialOpacity=1;this.layerName=this.descriptionText="";this.SLIDER_MIN_VAL=0;this.SLIDER_MAX_VAL=1;this.SLIDER_STEP_INCREMENT=0.01}__extends(b,d);b.prototype.attach=function(a){d.prototype.attach.call(this,a);if(this.viewModel.opacity){this.initialOpacity=this.viewModel.opacity.get();var g=$(this.tSliderElement);this.viewModel.opacity.bind(this,function(a){return g.slider("value",
a)})}this.layerName=a.name.get();this.descriptionText="{0} {1}: {2} {3}".format(this.layerName,this.app.getResource(this.libraryId,"language-layerlist-opacity-slider-description"),(a.opacity.get()*100).toFixed(0),this.app.getResource(this.libraryId,"language-layerlist-opacity-slider-percent"))};b.prototype.added=function(a){d.prototype.added.call(this,a);this._setupJQuerySlider()};b.prototype._setupJQuerySlider=function(){var a=this;$(function(){var g={animate:true,min:a.SLIDER_MIN_VAL,max:a.SLIDER_MAX_VAL,
step:a.SLIDER_STEP_INCREMENT,orientation:"horizontal",value:a.initialOpacity,slide:function(g,h){return a._handleSliderValueChanged(g,h)}},h=$(a.tSliderElement);h.slider(g);g=h.children(".ui-slider-handle");g.attr("aria-label",a.descriptionText);g.attr("title",a.getResource("language-layerlist-opacity"));g.text(a.getResource("language-layerlist-opacity-slider-handle"))})};b.prototype._handleSliderValueChanged=function(a,g){if(g&&g.value!=void 0&&this.viewModel.opacity)this.viewModel.opacity.set(g.value),
this.descriptionText="{0} {1}: {2} {3}".format(this.layerName,this.app.getResource(this.libraryId,"language-layerlist-opacity-slider-description"),(g.value*100).toFixed(0),this.app.getResource(this.libraryId,"language-layerlist-opacity-slider-percent")),$(this.tSliderElement).children("a").attr("aria-label",this.descriptionText)};b.prototype.handleTransparencySliderClick=function(){return false};return b}(d.framework.ui.ViewBase);e.TransparencySliderView=f})(e.layerList||(e.layerList={}))})(e.modules||
(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,g){e.call(this,a,g)}__extends(b,e);b.prototype.initialize=function(){var a=this,g=function(){if(a.app.site.essentialsMap&&a.app.site.essentialsMap.layerThemesInfo&&a.app.site.essentialsMap.layerThemesInfo.layerThemesConfigured){a.layerThemesInfo=a.app.site.essentialsMap.layerThemesInfo;if(a.app.site.hasNamedExtents)a.namedExtents=a.app.site.namedExtents;a.layerThemesInfo.activeTheme&&a._handleConfiguredThemeProperties({currTheme:a.layerThemesInfo.activeTheme,
prevTheme:a.layerThemesInfo.previousTheme});a._registerEvents()}a._registerCommands()};if(this.app.site&&this.app.site.isInitialized)g();else this.app.event("SiteInitializedEvent").once(this,g)};b.prototype._registerCommands=function(){this.app.command("SwitchToLayerTheme").register(this,this._switchToLayerThemeImpl)};b.prototype._registerEvents=function(){var a=this;this.layerThemesInfo&&(dojo.connect(this.layerThemesInfo,"layerThemeChangingEvent",function(g){a.app.event("LayerThemeChangingEvent").publish(g)}),
dojo.connect(this.layerThemesInfo,"layerThemeChangedEvent",function(g){a._handleConfiguredThemeProperties(g);a.app.event("LayerThemeChangedEvent").publish(g)}))};b.prototype._switchToLayerThemeImpl=function(a){if(this.layerThemesInfo&&this.layerThemesInfo.layerThemesConfigured){var g=this.layerThemesInfo.getTheme(a,true);g?g.applyToMap():this.app.trace.warning("LayerThemeModule: Could not switch layer theme to: {0}. Specified theme not found.".format(a))}else this.app.trace.warning("LayerThemeModule: Could not switch layer theme to: {0}. No layer themes configured.".format(a))};
b.prototype._handleConfiguredThemeProperties=function(a){var g=this;if(a.currTheme&&a.currTheme.properties&&a.currTheme.properties.length)for(var h=0;h<a.currTheme.properties.length;h++){var b=a.currTheme.properties[h];switch(b.name){case "LayerThemeNamedExtent":case "layerThemeNamedExtent":case "layerthemenamedextent":case "LAYERTHEMENAMEDEXTENT":if(this.namedExtents)for(var e=0;e<this.namedExtents.length;e++)if(this.app.map&&(this.namedExtents[e].id===b.value||this.namedExtents[e].displayName===
b.value)){if(this.app.map.loaded)d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtentWithPriority(this.app,this.namedExtents[e].extent,10,true);else var f=this.app.map.on("load",function(){f.remove();d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtentWithPriority(g.app,g.namedExtents[e].extent,10,true)});break}break;default:this.app.trace.info("LayerThemesModule: Property {0} not supported by the Geocortex Viewer for HTML".format(b.name))}}};return b}(d.framework.application.ModuleBase);
e.LayerThemesModule=f})(e.layerThemes||(e.layerThemes={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,g){d.call(this,a,g)}__extends(b,d);b.prototype.handleClose=function(){this.app.viewManager.deactivateView(this);this.app.event("MapTipClosedEvent").publish()};return b}(d.framework.ui.ViewBase);e.MapTipView=f})(e.maptips||(e.maptips={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,g){e.call(this,a,g);this.fsc=null;this.currentFeature=new Observable(null);this.searchSuggestion=this.title=null;this.showNoResults=new Observable(false);this.showLoading=new Observable(true);this.containerView=this.contentField=this.calloutID=null;this.features=new ObservableCollection;this.presentableFeatures=new d.framework.ui.PresentableCollection(this.features);this.hasMultipleFeatures=new Observable(false);
this._esriFeatureBindToken=this._boundEsriFeature=this._fscBindHandle=null;this.currentFeature.bind(this,this.currentFeatureChanged);this.title=new Observable(this.app.getResource(this.libraryId,"language-common-results"));this.app.event("FSMCollectionClosedEvent").subscribe(this,this.fsmCollectionClosed);this.hasMultipleFeatures.syncTransform(this.presentableFeatures.numberOfItems,function(a){return a>1});this.searchSuggestion=new Observable(this.app.getResource(this.libraryId,"language-common-no-results-short"))}
__extends(b,e);b.prototype.setFeatureSetCollection=function(a){if(this.fsc&&this._fscBindHandle)this.fsc.featureSets.bindingEvent.unsubscribe(this._fscBindHandle),this._fscBindHandle=null;this.fsc=a;this.updateFeatures();this.updateCurrentFeature();var g=this.app.featureSetManager.getSearchSuggestion(a.sourceName);this.searchSuggestion.set(g?g:this.app.getResource(this.libraryId,"language-common-no-results-short"));if(a)this._fscBindHandle=a.featureSets.bindingEvent.subscribe(this,function(a){this.updateFeatures();
a.type==="clear"?this.clearCurrentFeature():this.updateCurrentFeature()})};b.prototype.updateCurrentFeature=function(){this.fsc.featureSets&&this.fsc.featureSets.length()>0&&this.fsc.featureSets.getAt(0).features.length()>0?this.currentFeature.set(this.fsc.featureSets.getAt(0).features.getAt(0)):this.currentFeature.set(null)};b.prototype.updateFeatures=function(){var a=[];if(this.fsc&&this.fsc.featureSets)for(var g=0;g<this.fsc.featureSets.length();g++){var h=this.fsc.featureSets.getAt(g);if(h.features)for(var b=
0;b<h.features.length();b++)a.push(h.features.getAt(b))}else this.currentFeature.get()&&(a=[this.currentFeature.get()]);this.features.set(a)};b.prototype.clearCurrentFeature=function(){this.title.removeSync();this.title.set(this.app.getResource(this.libraryId,"language-common-results"));this.isFscOpen()?(this.showNoResults.set(false),this.showLoading.set(true)):(this.showNoResults.set(true),this.showLoading.set(false))};b.prototype.currentFeatureChanged=function(a){var g=this;if(a){if(this._esriFeatureBindToken&&
this._boundEsriFeature)this._boundEsriFeature.unbind(this._esriFeatureBindToken),this._esriFeatureBindToken=this._boundEsriFeature=null;this._boundEsriFeature=a.esriFeature;this._esriFeatureBindToken=this._boundEsriFeature.bind(this,function(){return g.currentFeature.pulse()});for(var h=0;h<this.features.length();h++)if(this.features.getAt(h)===this.currentFeature.get()){this.presentableFeatures.currIndexStart.set(h);this.presentableFeatures.currIndexEnd.set(h);break}this.title.sync(a.label);this.showNoResults.set(false);
this.showLoading.set(false)}else this.clearCurrentFeature();this.calloutID&&this.app.viewManager.notifyDimensionsChanged(this.containerView)};b.prototype.isFscOpen=function(){return this.fsc?this.app.featureSetManager.isCollectionOpen(this.fsc.id):false};b.prototype.fsmCollectionClosed=function(a){this.fsc&&a.featureSetCollectionId==this.fsc.id&&this.updateCurrentFeature()};return b}(d.framework.ui.ViewModelBase);e.MapTipContentViewModel=f})(e.maptips||(e.maptips={}))})(e.modules||(e.modules={}))})(f.mapping||
(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.handleMoveNext=function(){var a=this.viewModel.presentableFeatures.currIndexStart.get(),g=this.viewModel.presentableFeatures;a<g.numberOfItems.get()-1?this.selectFeature(g.getAt(a+1)):g.numberOfItems.get()&&this.selectFeature(g.getAt(0))};b.prototype.handleMovePrev=function(){var a=this.viewModel.presentableFeatures.currIndexStart.get(),g=this.viewModel.presentableFeatures;
a>0?this.selectFeature(g.getAt(a-1)):g.numberOfItems.get()&&this.selectFeature(g.getAt(g.numberOfItems.get()-1))};b.prototype.handleSelect=function(){this.viewModel.calloutID&&this.app.viewManager.notifyDimensionsChanged(this.viewModel.containerView)};b.prototype.selectFeature=function(a){this.viewModel.currentFeature.set(a);this.viewModel.calloutID&&this.app.viewManager.notifyDimensionsChanged(this.viewModel.containerView)};return b}(d.framework.ui.ViewBase);e.MapTipHeaderView=f})(e.maptips||(e.maptips=
{}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,g){d.call(this,a,g);this.measurementSwitcherView=null}__extends(b,d);b.prototype.attach=function(a){d.prototype.attach.call(this,a);this.measurementSwitcherView=this.app.viewManager.getViewById("MeasurementUnitSwitcherView")};b.prototype.activateUnitSwitcherView=function(){this.measurementSwitcherView&&!this.measurementSwitcherView.isActive&&this.app.command("ActivateView").execute("MeasurementUnitSwitcherView")};
b.prototype.deactivateUnitSwitcherView=function(){this.measurementSwitcherView&&this.measurementSwitcherView.isActive&&this.app.command("DeactivateView").execute("MeasurementUnitSwitcherView")};b.prototype.handleClickClose=function(){this.deactivateUnitSwitcherView();this.app.command("ClearActiveTool").execute()};b.prototype.handleShowLengthSwitcher=function(){this.viewModel.measurementInProgress.get()||(this.viewModel.lengthSwitcherSelected.set(true),this.activateUnitSwitcherView())};b.prototype.handleShowAreaSwitcher=
function(){this.viewModel.measurementInProgress.get()||(this.viewModel.lengthSwitcherSelected.set(false),this.activateUnitSwitcherView())};b.prototype.handleSetLengthUnits=function(a,g,h){this.viewModel.selectedLengthUnits.set(h);this.deactivateUnitSwitcherView()};b.prototype.handleSetAreaUnits=function(a,g,h){this.viewModel.selectedAreaUnits.set(h);this.deactivateUnitSwitcherView()};return b}(d.framework.ui.ViewBase);e.MeasurementView=f})(e.measurement||(e.measurement={}))})(e.modules||(e.modules=
{}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){var i=function(){function j(b,a,g){this.GCX_UNIT_YARDS=12345;this.GCX_UNIT_SQ_NAUTICAL_MILES="gcXSqNauticalMileConstant";this.geometryIdCounter=1;this.descriptorContainer=[];this.measurementLayerId=this.markupLayerId=null;this.unit={feet:null,yard:null,meter:null,kilometer:null,mile:null,nauticalMile:null,sqFeet:null,sqYard:null,sqMeter:null,sqKilometer:null,sqMile:null,sqNauticalMile:null,acre:null,hectare:null};this.measurementResultTypes=
[];this.coordinateFractionalDigits=4;this.degreeFormat=d.infrastructure.AngleFormat.DD;this.angleDirectionSystem=d.infrastructure.AngleDirectionSystem.POLAR;this._measurementLayersCreated=this._currentGeometryInProcess=this._currentLineSegmentInProcess=this._areaUnitString=this._lengthUnitString=this._areaUnit=this._lengthUnit=this._predictiveMeasurementCount=this._measurementModule=this._predictiveMeasurementsGraphic=this._mapOutToken=this._delayedExecuteToken=this._predictiveMeasurementToken=this._zoomEndToken=
null;this._toolActive=false;this.app=a;this.libraryId=g;this._measurementModule=b;this._predictiveMeasurementCount=0;this._measurementLayersCreated=false;this.measurementInProgress=new Observable(false);this.descriptorContainerEmpty=new Observable(true);this._getUnitLanguageResources();this._subscribeEvents()}j.prototype._subscribeEvents=function(){this.app.event("MarkupEditingStartedEvent").subscribe(this,this._processMarkupEditingStarted);this.app.event("MarkupEditingStoppedEvent").subscribe(this,
this._processMarkupEditingStopped);this.app.event("MarkupDeletedEvent").subscribe(this,this._processMarkupDeleted);this.app.event("MarkupClearedEvent").subscribe(this,this.destroyAllDescriptors)};j.prototype.createDescriptor=function(b,a){var g=null;switch(b){case 0:this._currentLineSegmentInProcess=g=new f.LineSegmentDescriptor(a,this.app);break;case 1:case 2:g=new f.GeometryDescriptor(this.geometryIdCounter.toString(),b,a,this.app);this.descriptorContainer.push(g);this.geometryIdCounter++;this._currentGeometryInProcess=
g;break;default:this._reportStatus("MeasurementMarkupManager: Invalid Descriptor type","error",false)}if(!this._zoomEndToken)this._zoomEndToken=this.app.map.on("zoom-end",dojo.hitch(this,this.refreshLabels)),this.descriptorContainerEmpty.set(false);return g};j.prototype.destroyDescriptor=function(b,a,g){a===void 0&&(a=false);g===void 0&&(g=true);for(var h=0;h<this.descriptorContainer.length;h++)if(a||this.descriptorContainer[h].id===b){var d=this.descriptorContainer[h];d.setInactive();for(var e=0;e<
d._lineSegments.length;e++){var f=d._lineSegments[e];this._removeGraphicFromLayer(f.graphic);this._removeGraphicFromLayer(f.labelGraphic)}(a||!a&&g)&&this._removeGraphicFromLayer(d.graphic);d.highlightedLabelGraphic&&(this._removeGraphicFromLayer(d.highlightedLabelGraphic.highlightGraphic),this._removeGraphicFromLayer(d.highlightedLabelGraphic.textGraphic));d.measurementData&&(e=this.app.featureSetManager.getCollectionById("Measurement"))&&e.featureSets.removeItem(d.measurementData);if(this._currentGeometryInProcess&&
this._currentGeometryInProcess.id===d.id)this._currentGeometryInProcess=null;this.app.event("MeasurementMarkupDeleted").publish({graphic:d.graphic,measurementDescriptor:d});if(a){if(h===this.descriptorContainer.length-1)this.descriptorContainer=[]}else{this.descriptorContainer.splice(h,1);break}}if(this.descriptorContainer.length===0&&this._zoomEndToken)this._zoomEndToken.remove(),this._zoomEndToken=null,this.descriptorContainerEmpty.set(true),this.app.command("ClearMarkup").raiseCanExecuteChanged()};
j.prototype.getGeometryDescriptorById=function(b){for(var a=0;a<this.descriptorContainer.length;a++)if(this.descriptorContainer[a].id===b)return this.descriptorContainer[a];return null};j.prototype.getGeometryDescriptorByGeometry=function(b){for(var a=0;a<this.descriptorContainer.length;a++)if(b.declaredClass===this.descriptorContainer[a].geometry.declaredClass){var g=this.descriptorContainer[a].geometry;if(b!==g){var h=b.paths?b.paths.length:b.rings?b.rings.length:0;if(h===(g.paths?g.paths.length:
g.rings.length))for(;0<h;){h=b.paths?b.paths[0].length:b.rings[0].length;if(h===(g.paths?g.paths[0].length:g.rings[0].length))for(var d=0;d<h;d++){var e=b.getPoint(0,d),f=g.getPoint(0,d);if(e.x!==f.x||e.y!==f.y)break;if(d===h-1)return this.descriptorContainer[a]}break}}else return this.descriptorContainer[a]}return null};j.prototype.getMeasurementResultsCollection=function(){var b=this.app.featureSetManager.getCollectionById("Measurement");if(!b)b=new d.infrastructure.FeatureSetCollection,b.id="Measurement",
b.sourceName="Measurement",b.displayName.set(this.app.getResource(f.measurementMarkupManager.libraryId,"language-measurement-results-collection-name")),this.app.featureSetManager.addCollection(b);return b};j.prototype.destroyAllDescriptors=function(){this.destroyDescriptor("",true)};j.prototype.refreshLabels=function(){for(var b=0;b<this.descriptorContainer.length;b++)this.descriptorContainer[b].refreshLabelVisibilities()};j.prototype.activatePredictiveMeasurements=function(){if(this._measurementModule._enablePrediction){var b=
this,a=true,g=0,h=0;this._predictiveMeasurementToken=this.app.map.on("mouse-move",function(d){if(!(g===d.mapPoint.x&&h===d.mapPoint.y)){g=d.mapPoint.x;h=d.mapPoint.y;var e=function(){b._predictiveMeasurementCount++;b._executePredictiveMeasurements(d.mapPoint,b._predictiveMeasurementCount)};switch(a){case false:b._predictiveMeasurementsGraphic&&(b._predictiveMeasurementsGraphic.highlightGraphic.hide(),b._predictiveMeasurementsGraphic.textGraphic.hide());if(b._delayedExecuteToken)clearTimeout(b._delayedExecuteToken),
b._delayedExecuteToken=null;a=true;case true:b._delayedExecuteToken=setTimeout(e,1E3),a=false}}})}};j.prototype.deactivatePredictiveMeasurements=function(){if(this._measurementModule._enablePrediction){if(this._delayedExecuteToken)clearTimeout(this._delayedExecuteToken),this._delayedExecuteToken=null;if(this._predictiveMeasurementToken)this._predictiveMeasurementToken.remove(),this._predictiveMeasurementToken=null;this._predictiveMeasurementCount=0;this._predictiveMeasurementsGraphic&&(this._predictiveMeasurementsGraphic.highlightGraphic.hide(),
this._predictiveMeasurementsGraphic.textGraphic.hide())}};j.prototype._setLayerIds=function(b,a){this.markupLayerId=b?b:this.markupLayerId;this.measurementLayerId=a?a:this.measurementLayerId};j.prototype._executePredictiveMeasurements=function(b,a){if(this._currentGeometryInProcess&&this._currentLineSegmentInProcess&&this._currentLineSegmentInProcess.mapPointStart){if(!this._measurementLayersCreated){var g=f.MeasurementUtils.getGraphicsLayer(this.markupLayerId,true,this.app),h=f.MeasurementUtils.getGraphicsLayer(this.measurementLayerId,
true,this.app);if(g&&h)this._measurementLayersCreated=true}var d=this,e=0,j=this._currentGeometryInProcess._lineSegments.length===0?this._currentLineSegmentInProcess.mapPointStart:this._currentGeometryInProcess._lineSegments[this._currentGeometryInProcess._lineSegments.length-1].mapPointEnd,i="";if(!(b.x===j.x&&b.y===j.y))switch(this._currentGeometryInProcess.type){case 1:g=new esri.geometry.Polyline(j.spatialReference);g.addPath([j,b]);this._measurementModule._processLineSegment(g,function(g){e=
d._currentGeometryInProcess.length?g.length+d._currentGeometryInProcess.length:g.length;i=d.app.getResource(f.measurementMarkupManager.libraryId,"language-measurement-polyline-predictive-markup-label").format(g.length.toFixed(2),d._lengthUnitString,e.toFixed(2),d._lengthUnitString);if(a===d._predictiveMeasurementCount)d._predictiveMeasurementsGraphic=f.MeasurementUtils.addHighlightedLabelToMap(i,b,null,d.measurementLayerId,d.app,true,15,0)});break;case 2:for(var g=new esri.geometry.Polygon(j.spatialReference),
h=[],l=0;l<this._currentGeometryInProcess._lineSegments.length;l++)h.push(this._currentGeometryInProcess._lineSegments[l].mapPointStart),h.push(this._currentGeometryInProcess._lineSegments[l].mapPointEnd);h.length===0&&h.push(j,b);h.push(b);h.push(h[0]);g.addRing(h);this._measurementModule._processPolygon(g,function(g){var h=new esri.geometry.Polyline(j.spatialReference);h.addPath([j,b]);d._measurementModule._processLineSegment(h,function(h){var e=g.perimeter===0?h.length*2:g.perimeter;i=d.app.getResource(f.measurementMarkupManager.libraryId,
"language-measurement-polygon-predictive-markup-label").format(h.length.toFixed(2),d._lengthUnitString,g.area.toFixed(2),d._areaUnitString,e.toFixed(2),d._lengthUnitString);if(a===d._predictiveMeasurementCount)d._predictiveMeasurementsGraphic=f.MeasurementUtils.addHighlightedLabelToMap(i,b,null,d.measurementLayerId,d.app,true,15,0)})})}}};j.prototype._createMeasurementMarkupFromGeometry=function(b){if(b&&(b instanceof esri.geometry.Polyline||b instanceof esri.geometry.Polygon)){this.app.command("_clearMeasurementMarkup").execute("temporary",
true);var a=this.getGeometryDescriptorByGeometry(b),g=true;a||(g=null,a=this.createDescriptor(b instanceof esri.geometry.Polyline?1:2,b.spatialReference),g=b instanceof esri.geometry.Polyline?new esri.geometry.Polyline(b.toJson()):new esri.geometry.Polygon(b.toJson()),a.setGeometry(g),g=false,this.app.command("_addGeometryMarkup").execute(a));this._recreateMeasurementMarkup(a.graphic,g,false)}else this._reportStatus("CreateMeasurementMarkup: Invalid geometry type. Measurement information can only be generated for Polyline or Polygon geometry types.",
"error",false)};j.prototype._recreateMeasurementMarkup=function(b,a,g){a===void 0&&(a=true);g===void 0&&(g=true);var h=this,o=function(a){h.app.command(q).execute(a,function(){h.measurementInProgress.set(false);a.refreshMeasurementData();h._reportStatus("Successfully computed measurement information for specified geometry/graphic.","info",false)},t)},t=function(a){h.measurementInProgress.set(false);f.measurementMarkupManager._reportStatus("Error recreating measurement markup: {0}","error",false,[a])};
if(b&&b.geometry&&b.measurementId!=void 0){var j=b.measurementId,i=b.geometry,l=0,m=0;new Observable(0);if(i.paths)l=i.paths.length;else if(i.rings)l=i.rings.length;if(b&&i instanceof esri.geometry.Polyline||i instanceof esri.geometry.Polygon){var q=i instanceof esri.geometry.Polyline?"MeasureDistance":"MeasureArea",p=i instanceof esri.geometry.Polyline?1:2,r=this.getGeometryDescriptorById(j);if(!r||r&&a){a=null;if(r)a=r.originalZoomLevel,this.destroyDescriptor(j,false,g);r=this.createDescriptor(p,
i.spatialReference);r.originalZoomLevel=a===null?r.originalZoomLevel:a;r.drawMode=i.type==="polyline"?d.infrastructure.tools.DrawMode.POLYLINE:d.infrastructure.tools.DrawMode.POLYGON;b.measurementId=r.id}r.setGeometry(i);r.graphic=b;for(var u=[],b=[],g=0;g<l;g++){j=i.paths?i.paths[g].length:i.rings[g].length;for(p=1;p<j;p++){var a=i.getPoint(g,p-1),w=i.getPoint(g,p);if(a&&w){var x=this.createDescriptor(0,i.spatialReference);x.id=r.id;x.setStartPt(a);x.setEndPt(w);x.mapPointStart.x===x.mapPointEnd.x&&
x.mapPointStart.y===x.mapPointEnd.y||(u.push(x),b.push(x.geometry),m++)}}}this.measurementInProgress.set(true);this._measurementModule._processLineSegment(b,function(a){for(var g=a.serverResponse.lengths.length,a=a.serverResponse.lengths,b=0;b<g;b++)u[b].setMeasurementUnit(h._lengthUnit),u[b].length=a[b],h.app.command("_addLineSegmentMeasurementMarkup").execute(u[b],function(a){a.isActive=r.isActive;r.addSegment(a);b===g-1&&o(r)},t)},t)}else this._reportStatus("Could not recreate measurement markup. Incompatible geometry. Only Polyline and Polygon geometry are supported.",
"warning",false)}};j.prototype._hideMeasurementMarkup=function(b,a){a===void 0&&(a=false);for(var g=0;g<this.descriptorContainer.length;g++)if(this.descriptorContainer[g].id===b.measurementId){this.app.command("ClearDefaultHighlights").execute();for(var h=0;h<this.descriptorContainer[g]._lineSegments.length;h++){var d=this.descriptorContainer[g]._lineSegments[h];d.graphic&&d.graphic.hide();d.labelGraphic&&d.labelGraphic.hide()}g=this.descriptorContainer[g];a&&g.graphic&&g.graphic.hide();g.highlightedLabelGraphic&&
(g.highlightedLabelGraphic.highlightGraphic&&g.highlightedLabelGraphic.highlightGraphic.hide(),g.highlightedLabelGraphic.textGraphic&&g.highlightedLabelGraphic.textGraphic.hide());break}};j.prototype._updateMeasurementUnits=function(b,a){for(var g=0;g<this.descriptorContainer.length;g++)this.descriptorContainer[g].setMeasurementUnit(b,a);this._lengthUnit=b;this._areaUnit=a;this._lengthUnitString=f.MeasurementUtils.getUnitString(b);this._areaUnitString=f.MeasurementUtils.getUnitString(a)};j.prototype._removeGraphicFromLayer=
function(b){if(b){var a=b.getLayer();a&&a.remove(b)}};j.prototype._canExecuteMarkupIntegration=function(b){return b&&b.measurementId!=void 0?true:false};j.prototype._processMarkupEditingStarted=function(b){if(this._canExecuteMarkupIntegration(b)){var a=this.getGeometryDescriptorById(b.measurementId);if(a)this._hideMeasurementMarkup(b),a.editingInProgress=true}};j.prototype._processMarkupEditingStopped=function(b){if(this._canExecuteMarkupIntegration(b)){var a=this.getGeometryDescriptorById(b.measurementId);
if(a)this._recreateMeasurementMarkup(b,true,false),a.editingInProgress=false}};j.prototype._processMarkupDeleted=function(b){this._canExecuteMarkupIntegration(b)&&this.destroyDescriptor(b.measurementId)};j.prototype._getUnitLanguageResources=function(){for(var b in this.unit)this.unit.hasOwnProperty(b)&&(this.unit[b]={shortName:this.app.getResource(this.libraryId,"language-measurement-unit-"+b.toLowerCase()+"-short"),longName:this.app.getResource(this.libraryId,"language-measurement-unit-"+b.toLowerCase()),
config:b})};j.prototype._reportStatus=function(b,a,g,h){var d=this;g===void 0&&(g=false);h===void 0&&(h=null);b=b.substring(0,21)==="language-measurement-"?this.app.getResource(this.libraryId,b):b;h&&(b=b.format.apply(b,h));var e=function(){g&&d.app.command("ClearActiveTool").execute()};switch(a.toLowerCase()){case "alert":this.app.command("Alert").execute(b,this.app.getResource(this.libraryId,"language-measurement-alert-title"),function(){e()});return;case "info":this.app.trace.info(b);break;case "warning":this.app.trace.warning(b);
break;case "error":this.app.trace.error(b)}e()};return j}();f.MeasurementMarkupManager=i})(f.measurement||(f.measurement={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){function e(b){this.pointIndex=0;this._tool=this._prevSegEndPt=this._currentLineSegment=this._currentGeometry=null;this._tool=b;this._lineSegmentCommandCallbackCompleted=new Observable(0);this._drawEndInvoked=false;this._totalSegmentCount=0}e.prototype.setStartPt=function(b){this._tool.app.command("ClearDefaultHighlights").execute();this._tool.app.command("_clearMeasurementMarkup").execute("temporary",true);this._currentGeometry=
this._tool.drawMode==="POLYLINE"?d.measurementMarkupManager.createDescriptor(1,b.mapPoint.spatialReference):d.measurementMarkupManager.createDescriptor(2,b.mapPoint.spatialReference);this._currentLineSegment=d.measurementMarkupManager.createDescriptor(0,b.mapPoint.spatialReference);this._currentLineSegment.id=this._currentGeometry.id;this._currentLineSegment.setStartPt(b.mapPoint);d.measurementMarkupManager.activatePredictiveMeasurements();this.pointIndex=1};e.prototype.setEndPt=function(b){var a=
this;if(!(this._currentLineSegment.mapPointStart.x===b.mapPoint.x&&this._currentLineSegment.mapPointStart.y===b.mapPoint.y)){if(this._prevSegEndPt){if(this._prevSegEndPt.x===b.mapPoint.x&&this._prevSegEndPt.y===b.mapPoint.y)return;this._currentLineSegment=d.measurementMarkupManager.createDescriptor(0,this._prevSegEndPt.spatialReference);this._currentLineSegment.id=this._currentGeometry.id;this._currentLineSegment.setStartPt(this._prevSegEndPt);this._prevSegEndPt=null}this._currentLineSegment.setEndPt(b.mapPoint);
this._prevSegEndPt=this._currentLineSegment.mapPointEnd;this._totalSegmentCount++;this._tool.executeToolCommand(this._currentLineSegment,function(g){a._currentGeometry.addSegment(g);a._lineSegmentCommandCallbackCompleted.set(a._lineSegmentCommandCallbackCompleted.get()+1)})}};e.prototype.plotPoint=function(b){this.pointIndex===0?this.setStartPt(b):this.setEndPt(b)};e.prototype.executeDrawEnd=function(b){var a=this;d.measurementMarkupManager.deactivatePredictiveMeasurements();if(this._totalSegmentCount===
0)d.measurementMarkupManager._reportStatus("No geometry drawn. Cannot compute measurements","info",false),d.measurementMarkupManager.destroyDescriptor(this._currentGeometry.id);else{var g=function(){d.measurementMarkupManager.measurementInProgress.get()&&d.measurementMarkupManager.measurementInProgress.set(false)},h=function(){a._tool.isSticky||a._tool.setActive(false)},e=function(b){a._tool.onDrawCompleted(b,a._currentGeometry,function(a){g();h();a.refreshMeasurementData()},function(b){g();h();a._tool._onDrawCompletedError(b)})};
this._drawEndInvoked=true;this._currentGeometry.setGeometry(b);this._tool.app.command("_addGeometryMarkup").execute(a._currentGeometry);if(this._lineSegmentCommandCallbackCompleted.get()===this._totalSegmentCount)e(b);else var f=this._lineSegmentCommandCallbackCompleted.bind(this,function(g){g===a._totalSegmentCount&&(a._lineSegmentCommandCallbackCompleted.unbind(f),e(b))})}};return e}();d.MeasurementOperation=e})(d.measurement||(d.measurement={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping=
{}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.initialize=function(){};return b}(d.framework.application.ModuleBase);e.BasemapModule=f})(e.basemap||(e.basemap={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.attach=function(a){d.prototype.attach.call(this,a);if(this.configuration&&this.configuration.hasOwnProperty("hideIfNoBasemapsAvailable"))this.viewModel.hideIfNoBasemapsAvailable=this.configuration.hideIfNoBasemapsAvailable};b.prototype.handleDrawerButtonClicked=function(){this.viewModel.basemaps.getLength()>0&&(this.app.viewManager.getViewById("BasemapSwitcherView")&&
this.app.command("ToggleView").execute("BasemapSwitcherView"),this.app.command("ToggleBasemapsDrawer").execute())};return b}(d.framework.ui.ViewBase);e.BasemapSwitcherButtonView=f})(e.basemap||(e.basemap={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.attach=function(a){d.prototype.attach.call(this,a);this.viewModel.isExpanded.bind(this,this._setButtonSize);this.viewModel.selectedBasemap.get()instanceof e.BasemapSliderViewModel&&this.viewModel.sliderIsExpanded.set(true)};b.prototype._setButtonSize=function(){var a=$(this.drawerContentParent).children().eq(0);this.viewModel.buttonWidth=$(a).outerWidth(true);
this.viewModel.buttonHeight=$(a).outerHeight(true)};b.prototype.handleBasemapClick=function(a,g,h){this.app.command("SelectBaseMap").execute(h.displayName.get())};return b}(d.framework.ui.ViewBase);e.BasemapSwitcherView=f})(e.basemap||(e.basemap={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){function d(b,a,g){this.defaultBookmarkName="Unspecified Bookmark Label";this.extent=null;if(!g)return null;this.displayName=g.displayName||this.defaultBookmarkName;this.deleteBookmarkString=b.getResource(a,"language-bookmarks-delete")+" "+this.displayName;this.isUserDefined=g.isUserDefined||false;this.setExtent(g.extent);if(!this.extent)return null}d.prototype.setExtent=function(b){if(b&&b.spatialReference&&b.xmin&&
b.ymin&&b.xmax&&b.ymax&&!(!b.spatialReference.wkid&&!b.spatialReference.wkt||b.spatialReference.wkid&&isNaN(parseInt(b.spatialReference.wkid,10))))if(b instanceof esri.geometry.Extent)this.extent=b;else{var a=b.spatialReference.wkid?new esri.SpatialReference(parseInt(b.spatialReference.wkid,10)):new esri.SpatialReference(b.spatialReference.wkt);this.extent=new esri.geometry.Extent(b.xmin,b.ymin,b.xmax,b.ymax,a)}};return d}();d.Bookmark=e})(d.bookmarks||(d.bookmarks={}))})(d.modules||(d.modules={}))})(d.mapping||
(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){e.storageKey="bookmarks";var f=function(d){function b(a,g){d.call(this,a,g);this._registerCommands()}__extends(b,d);b.prototype._registerCommands=function(){var a=this;this.app.command("AddBookmark").register(this,function(g){if(a.isValidBookmarkName(g))a._addBookmarkWithGivenName(g);else throw Error(a.app.getResource(a.libraryId,"language-bookmarks-name-required"));});this.app.command("RemoveBookmark").register(this,function(g){a._deleteBookmark(g)})};
b.prototype._deleteBookmark=function(a){var g=this;a&&this.app.store.get(e.storageKey,function(h){if((h=g.getUserDefinedBookmarks(h))&&h!==null){for(var b=0;b<h.length;b++)if(h[b].displayName===a){delete h[b];h.splice(b,1);break}g.saveUserDefinedBookmarks(JSON.stringify(h))}},function(a){g.app.trace.error("Error occurred while deleting bookmark: {0}".format(a));return null})};b.prototype._addBookmarkWithGivenName=function(a,g,h){var b=new e.Bookmark(this.app,this.libraryId);if(!g)g=this.app.map.extent;
b.setExtent(g);b.displayName=a.trim();b.isUserDefined=h||true;this._addBookmark(b)};b.prototype._addBookmark=function(a){var g=this;a&&this.app.store.get(e.storageKey,function(h){h=g.getUserDefinedBookmarks(h);!h&&h===null&&(h=[]);h[h.length]=a;g.saveUserDefinedBookmarks(JSON.stringify(h))},function(a){g.app.trace.error("Error occurred while adding bookmark: {0}".format(a));return null})};b.prototype.getUserDefinedBookmarks=function(a){var g=[];if(a)for(var a=JSON.parse(a),h=0;h<a.length;h++){var b=
new e.Bookmark(this.app,this.libraryId,a[h]);g[h]=b}return g};b.prototype.saveUserDefinedBookmarks=function(a){var g=this;this.app.store.set(e.storageKey,a,function(){g.app.event("BookmarksModifiedEvent").publish(a)},function(a){g.app.trace.error("Found error while storing the value to the local storage: {0}".format(a))})};b.prototype.isValidBookmarkName=function(a){return typeof a!=="string"||a===null||a.trim()===""?false:true};return b}(d.framework.application.ModuleBase);e.BookmarksModule=f})(e.bookmarks||
(e.bookmarks={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,g){d.call(this,a,g);this.bookmarks=new ObservableCollection;this.textErrorMessage=new Observable;this.bookmarksEnabled=new Observable(false);this.showBookmarksButton=new Observable(false);this.newBookmarkName=new Observable;this.active=new Observable(false);this._buttonEnabled=false;this.app=a;this.libraryId=g;this._registerCommand();this._subscribeEvents()}__extends(b,d);b.prototype.initialize=function(a){var g=
this;if(a&&(this.bookmarksEnabled.set(!!a.bookmarksEnabled),this._buttonEnabled=!!a.showBookmarksButton))this.app.configuration.mobileMode?this.bookmarks.bind(this,function(a){g.showBookmarksButton.set(a.type!=="clear"&&g.bookmarks.length()>0)}):(this.bookmarks.bind(this,function(a){g.active.get()||g.showBookmarksButton.set(a.type!=="clear"&&g.bookmarks.length()>0)}),this.active.bind(this,function(a){a||g.showBookmarksButton.set(g.bookmarks.length()>0)}));this.app.command("ShowBookmarks").raiseCanExecuteChanged();
this.app.command("ShowAddBookmark").raiseCanExecuteChanged();if(this.bookmarksEnabled.get())if((a=this.app.site)&&a.serviceLayersLoaded)this._initializeBookmarks();else var h=this.app.event("SiteServiceLayersLoadedEvent").subscribe(this,function(){g.app.event("SiteServiceLayersLoadedEvent").unsubscribe(h);g._initializeBookmarks()})};b.prototype._registerCommand=function(){var a=this;this.app.command("ShowBookmarks").register(this,function(){a.app.command("ActivateView").execute("BookmarksView");a._buttonEnabled&&
(a.showBookmarksButton.set(true),a.active.set(true))},function(){return a.bookmarksEnabled.get()});this.app.command("ShowAddBookmark").register(this,function(){var g=a.app.viewManager.getViewById("BookmarksView");g&&g.showAddBookmarkDialog()},function(){return a.bookmarksEnabled.get()&&a._buttonEnabled})};b.prototype._subscribeEvents=function(){var a=this;this.app.event("BookmarksModifiedEvent").subscribe(this,function(){a._initializeBookmarks()})};b.prototype._initializeBookmarks=function(){this.bookmarks.clear();
if(this.app.site.hasNamedExtents)var a=this.app.site.namedExtents;var g;if(a&&a.length)for(var h=0;h<a.length;h++)g=new e.Bookmark(this.app,this.libraryId,a[h]),this.bookmarks.addItem(g);var b=this;this.app.store.get(e.storageKey,function(a){if(a&&a!=="undefined"&&a!==null)for(var a=JSON.parse(a),g=0;g<a.length;g++){var h=new e.Bookmark(b.app,b.libraryId,a[g]);b.bookmarks.addItem(h)}},function(a){b.app.trace.error("Error occurred while retrieving the bookmark values: {0}".format(a))})};b.prototype.existsBookmarkWithName=
function(a){if(a){for(var g=0;g<this.bookmarks.getLength();g++)if(this.bookmarks.getAt(g).displayName===a.trim())return true;return false}};return b}(d.framework.ui.ViewModelBase);e.BookmarksViewModel=f})(e.bookmarks||(e.bookmarks={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.subscriptionToken=null}__extends(b,d);b.prototype.attach=function(a){d.prototype.attach.call(this,a);this.subscriptionToken=this.app.event("ViewContainerViewClosedEvent").subscribe(this,function(a){a&&a.viewId===this.id&&this.destroyAddBookmarkView()})};b.prototype.activated=function(){this.viewModel.newBookmarkName.set(null);this.viewModel.textErrorMessage.set(null)};b.prototype.destroyAddBookmarkView=
function(){this.app.viewManager.destroyView(this);this.subscriptionToken&&this.app.event("ViewContainerViewClosedEvent").unsubscribe(this.subscriptionToken)};b.prototype.handleSubmit=function(){if(this.viewModel.existsBookmarkWithName(this.viewModel.newBookmarkName.get()))return this.viewModel.textErrorMessage.set(this.app.getResource(this.libraryId,"language-bookmarks-name-exists")),false;try{this.app.command("AddBookmark").execute(this.viewModel.newBookmarkName.get())}catch(a){return this.viewModel.textErrorMessage.set(a.message),
false}this.destroyAddBookmarkView()};b.prototype.handleCancelClick=function(){this.destroyAddBookmarkView()};b.prototype.handleTextBoxClick=function(){};return b}(d.framework.ui.ViewBase);e.AddBookmarkView=f})(e.bookmarks||(e.bookmarks={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.addBookMarksView=null;this.addBookmarksViewActive=false}__extends(b,d);b.prototype.activated=function(){var a=this;if(this.id==="BookmarksView"&&this.viewModel.showBookmarksButton.get()&&(this.viewModel.active.set(true),!this.app.configuration.mobileMode)){this.app.event("FlyoutActivated").publish(this);var g={view:this,onOtherInteracted:function(g){return a._onOtherInteracted(g)}};
this.app.command("TapToDismiss").execute(g)}};b.prototype.deactivated=function(){if(this.regionName!=="ModalWindowRegion"&&(this.addBookmarksViewActive||this.addBookMarksView)){if(this.addBookMarksView)this.app.viewManager.destroyView(this.addBookMarksView),this.addBookMarksView=null;this.addBookmarksViewActive=false}this.viewModel.showBookmarksButton.get()&&this.viewModel.active.set(false)};b.prototype.deactivateBookmarksView=function(){this.app.command("DeactivateView").execute("BookmarksView");
this.app.configuration.mobileMode||this.app.event("FlyoutDeactivated").publish(this)};b.prototype.handleBookmarkSelectionChanged=function(a,g,b){if(this.app.map!==null){if(this.app.site===null||!this.app.site.isInitialized||this.app.site.essentialsMap===null)return;if(!this.app.site.essentialsMap.isInitialized||this.app.site.essentialsMap.initialExtent===null)return;this.app.map.setExtent(b.extent,!!this.app.map._fitTiledMapsToExtent)}this.deactivateBookmarksView();this.app.command("ShowMap").execute();
this.app.command("LogOptimizerEvent").execute("SelectBookmark",b.displayName)};b.prototype.handleClickToggleBookmark=function(){this.app.configuration.mobileMode?this.app.command("ActivateView").execute("BookmarksView"):this.app.command("ToggleView").execute("BookmarksView")};b.prototype.handleHideBookmarks=function(){this.deactivateBookmarksView()};b.prototype.handleDeleteBookmark=function(a,g,b){this.app.command("RemoveBookmark").execute(b.displayName)};b.prototype.handleAddBookmark=function(){this.showAddBookmarkDialog()};
b.prototype.showAddBookmarkDialog=function(){var a=this;this.addBookMarksView=this.app.viewManager.createView({markupResource:"Mapping/modules/Bookmarks/AddBookmarkView.html",region:"ModalWindowRegion",type:"geocortex.essentialsHtmlViewer.mapping.modules.bookmarks.AddBookmarkView",title:this.app.getResource(this.libraryId,"language-bookmarks-add"),libraryId:this.libraryId});this.addBookMarksView.app=this.app;this.addBookMarksView.attach(this.viewModel);this.app.viewManager.activateView(this.addBookMarksView);
this.addBookmarksViewActive=true;this.addBookMarksView&&dojo.connect(this.addBookMarksView,"destroy",function(){a.addBookmarksViewActive=false;a.addBookMarksView=null;var g={view:a,onOtherInteracted:function(g){return a._onOtherInteracted(g)}};a.app.command("TapToDismiss").execute(g)})};b.prototype._onOtherInteracted=function(a){!this.addBookmarksViewActive&&this.isActive&&(a=$(a.target||a.srcElement),a.hasClass("bookmark")&&a.hasClass("toggle-btn")||this.deactivateBookmarksView())};return b}(d.framework.ui.ViewBase);
e.BookmarksView=f})(e.bookmarks||(e.bookmarks={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){d[d.esriFieldTypeSmallInteger=0]="esriFieldTypeSmallInteger";d[d.esriFieldTypeInteger=1]="esriFieldTypeInteger";d[d.esriFieldTypeSingle=2]="esriFieldTypeSingle";d[d.esriFieldTypeDouble=3]="esriFieldTypeDouble";d[d.esriFieldTypeString=4]="esriFieldTypeString";d[d.esriFieldTypeDate=5]="esriFieldTypeDate";d[d.esriFieldTypeOID=6]="esriFieldTypeOID";d[d.esriFieldTypeGeometry=7]="esriFieldTypeGeometry";d[d.esriFieldTypeBlob=8]=
"esriFieldTypeBlob";d[d.esriFieldTypeRaster=9]="esriFieldTypeRaster";d[d.esriFieldTypeGUID=10]="esriFieldTypeGUID";d[d.esriFieldTypeGlobalID=11]="esriFieldTypeGlobalID";d[d.esriFieldTypeXML=12]="esriFieldTypeXML";d[d.other=13]="other"})(d.esriFieldTypeEnum||(d.esriFieldTypeEnum={}));var e=function(){return function(){this.type=4;this.name=new Observable;this.displayName=new Observable;this.editable=new Observable(true);this.readOnly=new Observable(false);this.required=new Observable(false);this.nullable=
new Observable(false);this.cssClass=new Observable;this.showIndicator=new Observable(false);this.value=new Observable(null)}}();d.EditingFormField=e})(d.editing||(d.editing={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){function e(){}e.createValidationFunction=function(b,a,g){var h=d.esriFieldTypeEnum[g.type],f=function(g){return g.editable.get()!==false&&(g.nullable.get()===false||g.required.get()===true)?b.getResource(a,"language-feature-editing-requires-value").format(g.displayName.get()):null};if(g.domain){var t=function(h,d,k,t){d=b.getResource(a,"language-feature-editing-invalid-number").format(d,k,t);return!h?f(g):!e.isValidNumber(g,
h)?d:h<k||h>t?d:null};if(g.domain.type==="codedValue")return function(h){return g.required.get()&&(h===null||h===void 0)?b.getResource(a,"language-feature-editing-requires-value").format(g.displayName.get()):null};else if(g.domain.type==="range"){var i=g.domain;return g.domain.hasOwnProperty("range")?(typeof i.replace==="Function"&&(i=i.replace("[","").replace("]","").split(",")),function(a){return t(a,g.displayName.get(),i[0],i[1])}):function(a){return t(a,g.displayName.get(),i.minValue,i.maxValue)}}else return function(){return null}}else switch(h){case "esriFieldTypeDate":return function(a){return!a?
f(g):null};case "esriFieldTypeString":case "esriFieldTypeGUID":return function(h){return!h?f(g):g.length&&h.toString().length>g.length?b.getResource(a,"language-feature-editing-value-too-long").format(g.displayName.get(),g.length):null};case "esriFieldTypeSingle":case "esriFieldTypeDouble":return function(h){return!h&&h!==0?f(g):!e.isValidNumber(g,h)?b.getResource(a,"language-feature-editing-invalid-decimal").format(g.displayName.get()):!e.isWithinNumericTypeRange(g,h)?b.getResource(a,"language-feature-editing-invalid-numeric-range").format(g.displayName.get()):
null};case "esriFieldTypeSmallInteger":case "esriFieldTypeInteger":return function(h){return!h&&h!==0?f(g):!e.isValidNumber(g,h)?b.getResource(a,"language-feature-editing-invalid-integer").format(g.displayName.get()):!e.isWithinNumericTypeRange(g,h)?b.getResource(a,"language-feature-editing-invalid-numeric-range").format(g.displayName.get()):null};default:return function(){return null}}};e.isWithinNumericTypeRange=function(b,a){if(Number(a)===NaN)return false;var g=Number(a.toString()),h=true;b.type===
2?(h=3.402823*Math.pow(10,38),h=g>=-h&&g<=h):b.type===0?h=g>=-32768&&g<=32767:b.type===1&&(h=g>=-2147483648&&g<=2147483647);return h};e.isValidNumber=function(b,a){if(!b)return false;var g=null;switch(b.type){case 2:case 3:g=/^[+-]?\d+.?\d*$/;break;case 0:case 1:g=/^\s*(\+|-)?\d+\s*$/}return!g.test(String(a.toString()))?false:true};return e}();d.ValidationFunctionFactory=e})(d.editing||(d.editing={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(f){function b(a,g,h,b,d){f.call(this,a,g);this.textareaThreshold=80;this.id="EditingFormViewModel";this.fields=new ObservableCollection;this.validationMessages=new ObservableCollection;this.buttons=new ObservableCollection;this.currentFeature=new Observable;this.featureIsNew=new Observable(false);if(d&&d.textareaThreshold)this.textareaThreshold=d.textareaThreshold;h&&this.setup(h,b?b:null)}__extends(b,f);b.prototype.addValidationMessage=
function(a){this.validationMessages.addItem(a)};b.prototype.clearValidationMessages=function(){this.validationMessages.clear()};b.prototype._fieldHasSubTypeDomainValues=function(a,g){for(var h=0;h<g.types.length;++h){var b=g.types[h];if(b.domains&&a.name in b.domains)return true}return false};b.prototype.setup=function(a,g){this.clear();var h=[];if(!g)throw Error("Attempted to edit a feature with no layer attached!");for(var b=null,f=this.app.site.getFeatureServices(),j=null,i=0;i<f.length;++i){var l=
f[i];if(l.serviceLayer===g||this.app.isOffline.get()&&l.serviceLayer.name===g.name){j=l.layers[0];break}}f=function(a){if(!j)return null;for(var g=0;g<j.fields.length;++g){var b=j.fields[g];if(b.name===a)return b}return null};i=[];if((l=g._outFields)&&l.length>0)for(var m=0;m<l.length;++m){var q=l[m];if(m===0&&q==="*"){i=g.fields;break}for(var p=0;p<g.fields.length;++p){var r=g.fields[p];if(r.name===q){i.push(r);break}}}else i=g.fields;l=function(a,g){for(var b=0;b<g.length;b++){var h=g[b].prototype.attributes;
if(a.name&&h.hasOwnProperty(a.name))return a.nullable=h[a.name]===null,true}return false};for(m=0;m<i.length;++m)if(p=i[m],p.editable){var u=f(p.name);if(!u||u.visible){if(p.nullable===void 0||p.nullable===null)if(g&&g.templates&&g.templates.length)l(p,g.templates);else if(g&&g.types&&g.types.length)for(q=0;q<g.types.length;q++)if(g.types[q].templates&&g.types[q].templates.length&&l(p,g.types[q].templates))break;var w=p.nullable===true,x=p.editable===false,r=w===false&&!x,y=null;if(!this.featureIsNew.get()||
p.name===g.typeIdField)a.attributes&&(y=a.attributes[p.name]);q=new e.EditingFormField;q.name.set(p.name);q.readOnly.set(x);q.nullable.set(w);q.required.set(r);q.showIndicator.set(q.required.get());q.type=e.esriFieldTypeEnum[p.type];q.renderType=p.type;q.value=new Observable(a.attributes[p.name]);q.length=p.length;q.editable.set(p.editable);u?q.displayName.set(u.displayName):q.displayName.set(p.alias!=null?p.alias:p.name);if(p.type==="esriFieldTypeDate")r=new d.forms.items.DatePickerFormItem(null,
null),r.timePickerItem=new d.forms.items.TimePickerFormItem(null,null),p=a&&a.attributes[p.name]?new Date(a.attributes[p.name]):q.nullable.get()?null:new Date,r.includeTimePicker.set(true),r.initialDate.set(p),r.date.set(p),r.isRequired.set(q.required.get()),r.nullable.set(q.nullable.get()),q.value.sync(r.date),q.datePickerViewModel=r;else if(p.name===g.typeIdField)b={viewModel:q,valueCollection:g.types,nullable:!r,nullOption:{name:"",code:null}},q.renderType="typeField",this._applyFieldConfiguration(b,
q),b=y;else if(p.domain||this._fieldHasSubTypeDomainValues(p,g)){if(u=p.domain)q.domain=u;else for(u=0;u<g.types.length;++u)if(y=g.types[u],y.domains&&p.name in y.domains){q.domain=y.domains[p.name];break}if(q.domain.type==="codedValue")p={viewModel:q,collectionName:"codedDomainValues",valueCollection:q.domain.codedValues,nullable:!r,nullOption:{name:"",code:null}},q.renderType="codedDomainValue",this._applyFieldConfiguration(p,q)}else q.renderType=q.type===4&&q.length>this.textareaThreshold?"textArea":
this._getRenderTypeForField(q);q.validationFunc=this.app.urlParameters.hasOwnProperty("noval")?function(){return null}:e.ValidationFunctionFactory.createValidationFunction(this.app,this.libraryId,q,this);h.push(q)}}this.fields.addItems(h);if(b!==null)for(u=0;u<g.types.length;u++)h=g.types[u],h.id.toString()===b.toString()&&this._applyCodedDomains(h.domains)};b.prototype.getRawFieldValue=function(a){for(var g=0;g<this.fields.getLength();++g){var b=this.fields.getAt(g);if(b.name.get()===a)return b.value.get()}return null};
b.prototype.getAttributeValues=function(){for(var a={},g=0;g<this.fields.getLength();++g){var b=this.fields.getAt(g),d=b.value.get(),e=null;b.type===5?(d=b.value.get(),e=d===null?null:(new Date(d)).getTime()):e=b.type===3||b.type===1||b.type===6||b.type===2||b.type===0?d===null||d.toString&&d.toString().trim()===""?null:Number(d):d;d===""&&b.type!==4&&(e=null);a[b.name.get()]=e}return a};b.prototype._getRenderTypeForField=function(){return"text"};b.prototype._applyCodedDomains=function(a){if(a)for(var g in a)if(a.hasOwnProperty(g)&&
a[g].type==="codedValue")for(var b=0;b<this.fields.getLength();b++){var d=this.fields.getAt(b);if(d.name.get()===g){b={field:d,collectionName:"codedDomainValues",valueCollection:a[g].codedValues,nullable:d.nullable.get(),nullOption:{name:"",code:null}};d.renderType="codedDomainValue";this._applyFieldConfiguration(b,d);break}}};b.prototype._applyFieldConfiguration=function(a,g){g.valueOptions?g.valueOptions.clear():g.valueOptions=new ObservableCollection([]);g.valueOptions.addItems(a.valueCollection);
a.nullable&&g.valueOptions.insertItem(0,a.nullOption);for(var b=0;b<g.valueOptions.getLength();++b){var d=g.valueOptions.getAt(b);typeof d.code==="undefined"&&d.hasOwnProperty("id")&&(d.code=d.id)}};b.prototype.clear=function(){this.fields.clear();this.clearValidationMessages()};return b}(d.framework.ui.ViewModelBase);e.EditingFormViewModel=f})(e.editing||(e.editing={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex=
{}));
(function(d){(function(f){(function(e){(function(f){(function(f){(function(d){d[d.Idle=0]="Idle";d[d.Paused=1]="Paused";d[d.CantEdit=2]="CantEdit";d[d.EditingAttributes=3]="EditingAttributes";d[d.EditingGeometry=4]="EditingGeometry";d[d.Saving=5]="Saving"})(f.EditorState||(f.EditorState={}));var i=function(j){function b(a,g){j.call(this,a,g);this.state=0;this.isBusy=new Observable(false);this.title=new Observable("");this.headerText=new Observable("");this.form=new Observable;this.isEditingGeometry=new Observable(false);
this.isEditingNewFeature=new Observable(false);this.isEditingLogEntry=new Observable(false);this.isEditingRelatedFeature=new Observable(false);this.isEditingRelatedFeatureNotInSite=new Observable(false);this.currentFeatureRelationships=new ObservableCollection;this.hasRelatedLayers=new Observable(false);this.showRelatedLayers=new Observable(false);this.canDeleteFeature=new Observable(true);this.canEditGeometry=new Observable(false);this.showEditGeometryButton=new Observable(false);this.showStopEditingGeometryButton=
new Observable(false);this.geometryHasBeenEdited=new Observable(false);this.validateGeometry=false;this.configAllowsEditGeometry=true;this.layerUpdateEndToken=null;this.textareaThreshold=80;this._registerCommands();this._subscribeToEvents();this.isEditingNewFeature.bind(this,this._calculateCanDeleteFeature);this.auto(this.hasRelatedLayers,this,this._hideOrShowRelateds);this.auto(this.isEditingRelatedFeatureNotInSite,this,this._hideOrShowRelateds)}__extends(b,j);b.prototype.initialize=function(a){if(a)a.tools&&
this.app&&this.app.toolRegistry&&this.app.toolRegistry.createTools(a.tools,true),this.validateGeometry=!!a.validateGeometry,this.configAllowsEditGeometry=a.editGeometry!==void 0?!!a.editGeometry:this.configAllowsEditGeometry,this.textareaThreshold=a.textareaThreshold!==void 0?parseInt(a.textareaThreshold):this.textareaThreshold};b.prototype._registerCommands=function(){this.app.command("StartEditingFeature").register(this,this._executeStartEditingFeature,this._canExecuteStartEditingFeature);this.app.command("StartEditingNewFeature").register(this,
this._executeStartEditingNewFeature,this._canExecuteStartEditingNewFeature);this.app.command("StartEditingEditLogEntry").register(this,this._executeStartEditingEditLogEntry,this._canExecuteStartEditingEditLogEntry);this.app.command("StartEditingNewRelatedRecord").register(this,this._executeStartEditingRelatedRecord);this.app.command("FeatureLayerModuleStartSync").register(this,this.cancelEditing);this.app.command("StartEditingGraphicGeometry").postExecute.subscribe(this,this._onStartEditingGraphicGeometry);
this.app.event("GeometryEditCompletedEvent").subscribe(this,this._onGeometryEditCompletedEvent);this.app.command("StartAddingFeatureGeometry").register(this,this._executeStartAddingFeatureGeometry,this._canExecuteStartEditingNewFeature)};b.prototype._executeStartAddingFeatureGeometry=function(a,g){this.app.command("StartEditingNewFeature").execute(a,g)};b.prototype._subscribeToEvents=function(){this.app.event("GeometryEditInvokedEvent").subscribe(this,this._handleGeometryEditInvokedEvent);this.app.event("GeometryEditCompletedEvent").subscribe(this,
this._handleGeometryEditCompletedEvent);this.app.event("GeolocatedEvent").subscribe(this,this._handleGeolocation)};b.prototype.performValidation=function(){var a=true;this.form.get().clearValidationMessages();a=this.performFormValidation()&&a;this.validateGeometry&&(a=this.performGeometryValidation()&&a);return a};b.prototype.performFormValidation=function(){for(var a=true,g=this.form.get(),b=0;b<g.fields.getLength();++b){var d=g.fields.getAt(b);try{if(d.validationFunc){var e=d.validationFunc(d.value.get(),
d,g);e&&(a=false,g.addValidationMessage(e))}}catch(f){this.app.trace.warning("Error validating field {0}: {1}".format(d.displayName,f))}}return a};b.prototype.performGeometryValidation=function(){var a=true,g=this.form.get(),b=this.currentFeatureEsriClone;b.geometry&&b.geometry.type==="polygon"&&d.essentials.GeometryUtilities.isSelfIntersectingPolygon(b.geometry)&&(g.addValidationMessage(this.app.getResource(this.libraryId,"language-feature-editing-self-intersecting-polygon-need-fixing")),a=false);
return a};b.prototype.confirmDelete=function(){var a=this;this.app.command("Confirm").execute(this.app.getResource(this.libraryId,"language-feature-editing-delete-confirmation"),this.app.getResource(this.libraryId,"language-feature-editing-module-title"),function(g){if(g){var b=false;a._preventDeleteForRelOrigin(a.currentFeatureRelationships,function(){a.app.command("Alert").execute(a.app.getResource(a.libraryId,"language-feature-editing-delete-with-relation-forbidden"),a.app.getResource(a.libraryId,
"language-feature-editing-module-title"));b=true},function(){b||a.deleteCurrentFeature()})}})};b.prototype.deleteCurrentFeature=function(a,g){var b=this,d=this.currentFeatureEsri,e=d.getLayer()||this._sourceLayer,f=this._getMapServiceByLayer(e);f?(f={mapService:f,layer:e,feature:d,successCallback:function(){b._deleteFeatureSuccessCallback(d,e,a)},errorCallback:function(a){b._deleteFeatureErrorCallback(a,e,g)}},this.isBusy.set(true),this._deleteCompositeRelationshipsInOfflineMode(a,g),this.app.command("DeleteFeature").execute(f)):
(f={mapService:this.currentMapService,layer:e,feature:d,relatedFeature:this._relatedFeature,relationshipOrigin:this._editingRelationshipOrigin,relationshipDestination:this._editingRelationshipDestination,successCallback:function(){b._deleteFeatureSuccessCallback(d,e,a)},errorCallback:function(a){b._deleteFeatureErrorCallback(a,e,g)}},this.isBusy.set(true),this.app.command("DeleteRelatedRecord").execute(f),this.app.event("RelatedRecordDeletedEvent").publish())};b.prototype._deleteCompositeRelationshipsInOfflineMode=
function(){var a=this;if(this.app.isOffline.get()){var g=this.currentFeatureRelationships.get(),b;for(b in g){var e=g[b];if(e.relationship.composite){var f=e.relatedFeature,k=f.getLayer(),j=this._getMapServiceByLayer(k),i=k.objectIdField,l=d.essentialsHtmlViewer.mapping.modules;if(!j)j=this.currentMapService;this.app.featureLayerModule._getRelatedFeatures(j,e.relationship.id,f.attributes[i],null,function(g){a.app.featureLayerModule._getRelatedFeatureLayer(j,e.relationship.id,function(b){a.app.command("GetEditLog").execute(function(h){if(g.length!=
0){for(var d in g){for(var w=g[d],x=h.entries.length-1;x>=0;x--){var y=h.entries[x];y.feature.attributes[y.keyField]==w.attributes[i]&&h.removeEntry(y)}if(b.type=="Table"){x=null;for(d in k.relationships)y=k.relationships[d],y.relatedTableId==k.layerId&&(x=y);if(f&&(y=f.__editingMeta)&&y.isNew){var z=a.app.featureLayerModule.createNewFeatureMetaData(w,b);z.isRelated=true;z.relationshipOrigin=e.relationship;z.relationshipDestination=x;z.dependencies={};z.dependencies[y.GCXOBJECTID]=[{from:e.relationship.keyField,
to:x.keyField}];w.__editingMeta=z}y=w;w.toJson&&(y=w.toJson());w=new l.featureLayer.EditLogEntry(j.url,b.url,b.objectIdField,"relatedRecordDeletion",y);w.setRelatedData(b.url,e.relationship.keyField,x.keyField)}else y=w,w.toJson&&(y=w.toJson()),w=new l.featureLayer.EditLogEntry(j.url,b.url,b.objectIdField,"deletion",y);h.addEntry(w)}var A=JSON.stringify(h);a.app.store.set("__edits",A,function(){a.app.event("FeatureLayerEditLogUpdatedEvent").publish(h,A)},function(g){a.app.trace.error("Error: There was an error in committing composite deletions to the edit log: "+
g)})}})},function(g){a.app.trace.error("There was an error in retreiving the feature layer for deletion of composite relationships: "+g)})},function(g){a.app.trace.error("There was an error in retrieving related features for deletion of composite relationships: "+g)})}}}};b.prototype._deleteFeatureErrorCallback=function(a){var a=this.app.getResource(this.libraryId,"language-feature-layer-error-feature-edits").format(a),g=this.app.getResource(this.libraryId,"language-feature-layer-error-title");this.app.command("Alert").execute(a,
g);this.app.trace.error(a);this.isBusy.set(false)};b.prototype._deleteFeatureSuccessCallback=function(a,g,b){this._handleDeletedFeature(a);this.app.event("FeatureDeletedEvent").publish(a);g&&g.remove&&g.remove(a);this.app.command("ShowMap").execute();this.currentFeatureEsriClone.hide();this._destroyEditingLayer();this._sourceLayer.refresh&&this._sourceLayer.refresh();this.app.command("ShowFeatureParentDetails").execute();b&&b();this.isBusy.set(false)};b.prototype._buildFeatureRelationships=function(){this.currentFeatureRelationships.clear();
for(var a=this.currentFeatureEsri,g=this._sourceLayer,b=this.currentMapService,d=0;d<g.relationships.length;++d){var e=g.relationships[d];if(b){var f=b._getRelation(e.id);if(f&&!f.visible)continue}var k=true;if(e.role){if(e.role!=="esriRelRoleOrigin")continue}else k=false;var j=e.name;if(typeof f!=="undefined")j=f.displayName;j=this.app.getResource(this.libraryId,"language-feature-editing-create-related-feature").format(j);this.currentFeatureRelationships.addItem({id:e.id,text:j,editable:k,relatedFeature:a,
relationship:e})}this.hasRelatedLayers.set(this.currentFeatureRelationships.getLength()>0)};b.prototype._preventDeleteForRelOrigin=function(a,g,b){var d=this,f=this.currentFeatureEsri,k=this._sourceLayer,j=null,i=false;if(f&&k&&a&&a.length()>0&&(j=a.length(),k))for(var l=0;l<a.length();l++){var q=function(){j--;j<=0&&b&&b()},p=function(a){var b=parseInt(a.id),h=a.relatedTableId?a.relatedTableId.get():a.relationship.relatedTableId,j=k.url||k._essentialsMetadata.serviceUrl,l=d._getMapServiceByLayer(k),
a=new esri.tasks.RelationshipQuery;a.objectIds=[f.attributes[k.objectIdField]];a.outFields=["*"];a.relationshipId=b;var l=new esri.tasks.QueryTask(e.infrastructure.taskUtils.getQueryTaskUrl(k,l)),n=null,n=d.app.isOffline.get()===false?l.executeRelationshipQuery(a):d.app.featureLayerModule._getRelatedFeatures(d._getMapServiceByLayer(k),b,a.objectIds[0]);n.then(function(a){var b=false,e;for(e in a)if(a.hasOwnProperty(e)){b=true;break}b?d._getRelatedFeatureLayer(h,j,function(){if(!i){var b=[],h;for(h in a)if(a.hasOwnProperty(h)){var d=
a[h].features||a[h];if(d)if(d.length)for(var e=0;e<d.length;e++)b.push(d[e]);else b.push(d)}b.length>0&&g&&(g(b),i=true);q()}},function(){q()}):q()},function(){q()})},r=a.getAt(l);r.relationship&&r.relationship.role==="esriRelRoleOrigin"&&r.relationship.composite==false?p(r):r.relationship.composite&&q()}(!j||j<=0)&&b&&b()};b.prototype._getMapServiceByLayer=function(a){a=a.url||a._essentialsMetadata&&a._essentialsMetadata.serviceUrl;if(!a)return null;var g=a.indexOf("?token=");g!=-1&&(a=a.substring(0,
g));for(g=0;g<this.app.site.essentialsMap.mapServices.length;++g){var b=this.app.site.essentialsMap.mapServices[g];if(b.serviceUrl===a)return b}return null};b.prototype._getRelatedFeatureLayer=function(a,g,b,e){var f=new dojo.Deferred,k=g.match(/token=.[^&]*/g),a=g.substring(0,g.lastIndexOf("/")+1)+a;k&&(a+="?"+k);k=new esri.layers.FeatureLayer(a,{mode:esri.layers.FeatureLayer.MODE_SELECTION,outFields:["*"]});dojo.connect(k,"onLoad",dojo.hitch(this,function(a){d.deferredResolve(f,a);typeof b=="function"&&
b(a)}));dojo.connect(k,"onError",dojo.hitch(this,function(a){d.deferredReject(f,a);typeof e==="function"&&e(a)}));return f};b.prototype._getMapServiceForRelatedRecord=function(a){for(var g=this.app.site.getFeatureServices(),b=0;b<g.length;b++){for(var d=g[b].serviceLayer,e=0;e<d.relationships.length;e++)if(d.relationships[e]==a.relationship){this._sourceLayer=d;this._calculateCanDeleteFeature();return}if(d.layerId==a.relationship.relatedTableId)for(b=0;b<d.fields.length;b++)if(d.fields[b].name==a.relationship.keyField)this._sourceLayer=
d}this._sourceLayer||this.app.trace.warning("Could not find a proper source layer.");(a=this._getMapServiceByLayer(this._sourceLayer))||this.app.trace.warning("Could not edit related feature. No map service for layer '{0}' was found.".format(this._sourceLayer.url));return a};b.prototype._getRelatedKeyFieldForRelatedRecords=function(a,g){if(a.relationship.keyField){for(var b=null,d=0;d<g.relationships.length;++d){var e=g.relationships[d];if(e.id===a.relationship.id){this._editingRelationshipDestination=
e;b=e.keyField;break}}if(b)return b;else this.app.trace.error(this.app.getResource(this.libraryId,"language-feature-editing-relationships-key-field-missing"))}else this.app.trace.error(this.app.getResource(this.libraryId,"language-feature-editing-relationships-require-arcgis-version"))};b.prototype._setupViewForRelatedRecordCreationAndEditing=function(a,g,b){this._editingRelationshipOrigin=a.relationship;this.canEditGeometry.set(this.configAllowsEditGeometry&&!!g.geometryType);this.showEditGeometryButton.set(this.canEditGeometry.get());
this.showStopEditingGeometryButton.set(false);this.currentFeatureEsri=b;this.currentFeatureEsriClone=this._cloneEsriFeature(this.currentFeatureEsri);this.originalFeatureClone=null;this.form.set(new f.EditingFormViewModel(this.app,this.libraryId,b,g,{textareaThreshold:this.textareaThreshold}));this.app.event("Internal.EditorFormSetupForRelatedFeatureEvent").publish(this.form,b)};b.prototype._renderRelatedRecordEditingTable=function(a,g,b){for(var d=false,e=0;e<this.form.get().fields.getLength();++e){var f=
this.form.get().fields.getAt(e);if(f.name.get()===g)if(g.toLowerCase()==="objectid"||g.toLowerCase()==="globalid")f.editable.set(false);else{a.feature?(f.value.set(a.feature.attributes[g]),a.relationship.keyField in b.attributes&&(b.attributes[a.relationship.keyField]=a.feature.attributes[a.relationship.keyField]||a.feature.attributes[g])):a.relatedFeature&&(f.value.set(a.relatedFeature.attributes[a.relationship.keyField]),a.relationship.keyField in b.attributes&&(b.attributes[a.relationship.keyField]=
a.relatedFeature.attributes[a.relationship.keyField]||a.relatedFeature.attributes[g]));continue}f.editable.get()&&a.feature&&a.feature.attributes[f.name.get()]&&f.value.set(a.feature.attributes[f.name.get()])}if(this.isEditingNewFeature.get()===true&&(g in b.attributes&&(b.attributes[g]=a.relatedFeature.attributes[a.relationship.keyField]||a.relatedFeature.attributes[g],d=true),this.form.get().fields.getLength()===0||d==false))b.attributes[g]=a.relatedFeature.attributes[a.relationship.keyField]||
a.relatedFeature.attributes[g]};b.prototype._executeStartEditingRelatedRecord=function(a,g){var b=this;this.isEditingNewFeature.set(g);this.isEditingRelatedFeature.set(true);this._relatedFeature=a.relatedFeature;var d=null;this.app.map.getLayersVisibleAtScale().forEach(function(g){g.layerId&&g.layerId==a.relationship.relatedTableId&&g.fields[a.relationship.keyField]&&(d=g)});if(d)this.isEditingRelatedFeatureNotInSite.set(false),this.currentMapService=this._getMapServiceByLayer(d);else{this.isEditingRelatedFeatureNotInSite.set(true);
if(a.essentialsRelatedFeature){if(a.essentialsRelatedFeature.layer.getRelatedFeatureLayer)a.essentialsRelatedFeature.layer.getRelatedFeatureLayer(a.relationship.id,function(g){b._refreshRelatedRecord(a,g)},function(a){b.app.trace.error("Error in getting related feature layer: "+a)});else{var e=this._getMapServiceForRelatedRecord(a);this.currentMapService=e;this._refreshRelatedRecord(a,e.serviceLayer)}return}d=this.currentFeatureGeocortex.featureLayer;this.currentMapService=null}this._refreshRelatedRecord(a,
d)};b.prototype._refreshRelatedRecord=function(a,g){var b=this;!this.app.isOffline.get()&&a.feature?this._refreshEsriGraphic(a.feature,g).then(function(d){d!=null&&d.features&&d.features.length>0?a.feature=d.features[0]:b.app.trace.info("Error retreiving most recent version of related record. Falling back to currently loaded version.");b._displayEditorForRelatedFeatures(a,g)}).caught(function(){b.app.trace.info("Error retreiving most recent version of related record. Falling back to currently loaded version.");
b._displayEditorForRelatedFeatures(a,g)}):this._displayEditorForRelatedFeatures(a,g)};b.prototype._displayEditorForRelatedFeatures=function(a,g){a.text?this.headerText.set(a.text):this.headerText.set(this.app.getResource(this.libraryId,"language-feature-editing-new-related-feature-default"));this.state!==0&&this.cancelEditing();this._sourceLayer=g;this._calculateCanDeleteFeature();var b={};g.fields.forEach(function(a){b[a.name]=null});var d=null;this.isEditingNewFeature.get()?(d=this._createNewEsriFeature(null,
b,null,null),d.setGeometry(null)):d=a.feature;this._setupViewForRelatedRecordCreationAndEditing(a,g,d);var e=this._getRelatedKeyFieldForRelatedRecords(a,g);this._renderRelatedRecordEditingTable(a,e,d);if(this.isEditingNewFeature.get()&&this._sourceLayer.type!="Table"){for(var e=this.app.site.getFeatureServices(),f=void 0,k=0;k<e.length;k++)for(var j=e[k],i=0;i<j.layers.length;i++){var l=j.layers[i];l.id==a.relationship.relatedTableId&&l.name==a.relationship.name&&(f=l)}this.app.command("ShowFeatureTemplatePicker").execute(f,
d)}else this._activateEditingView()};b.prototype.startEditingGeometry=function(){if(!this.currentFeatureEsri)throw Error("Could not edit geometry - no feature selected.");this.app.command("StartEditingGraphicGeometry").execute(this.currentFeatureEsriClone,this._sourceLayer)};b.prototype.stopEditingGeometry=function(){this.app.command("StopEditingGraphicGeometry").execute()};b.prototype._onStartEditingGraphicGeometry=function(a){this.state!=0&&a&&(a===this.currentFeatureEsri||a===this.currentFeatureEsriClone)&&
this.currentFeatureEsriClone.hide();a=this.app.toolRegistry.getActiveTool();a instanceof e.infrastructure.tools.MapTool&&a.name==="EditingPointTool"&&(this.app.event("GeometryEditPointActivatedEvent").publish(),this.app.command("OpenToolbar").execute())};b.prototype._onGeometryEditCompletedEvent=function(a){if(this.state!=0&&this.currentFeatureEsriClone&&(this.currentFeatureEsri===a.originalGraphic||this.currentFeatureEsriClone===a.originalGraphic))!a.cancelled&&this.currentFeatureEsri===a.originalGraphic&&
this.currentFeatureEsriClone.setGeometry(a.editedGraphic.geometry),this.app.command("HideFeatureTemplatePicker").execute(),this.app.command("HideCreateEditView").execute(),this.app.command("ShowFeatureAttributeEditor").execute(),this.currentFeatureEsriClone.show(),a=new e.infrastructure.Feature({graphic:this.currentFeatureEsriClone}),this.app.behavior("EditorFeatureSelectedBehavior").run(a)};b.prototype._handleGeolocation=function(a){var g=this,b=function(){g.currentFeatureEsriClone.setGeometry(a.projectedMapPoint);
g.app.event("GeometryEditCompletedEvent").publish({editedGraphic:g.currentFeatureEsriClone,originalGraphic:g.currentFeatureEsri,cancelled:false});setTimeout(function(){return g.app.command("GeolocateStop").execute()},0);g.app.command("StopEditingGraphicGeometry").execute();var b=new e.infrastructure.Feature({graphic:g.currentFeatureEsriClone});g.app.behavior("EditorFeatureSelectedBehavior").run(b)},d=this.app.toolRegistry.getActiveTool(),d=this.isEditingNewFeature.get()&&this._sourceLayer.geometryType===
"esriGeometryPoint"&&d&&d.name==="EditingPointTool",f=a&&a.typeOfGeolocation==="single"&&a.location;d&&f&&(a.location.coords.accuracy<=a.accuracyThreshold?b():this.app.command("Confirm").execute(this.app.getResource(this.libraryId,"language-feature-editing-confirm-low-accuracy-geolocation").format(a.location.coords.accuracy.toFixed(0),this.getResource("language-common-ok")||"'OK'",this.getResource("language-common-cancel")||"'Cancel'"),this.app.getResource(this.libraryId,"language-feature-editing-confirm-low-accuracy-geolocation-title"),
function(a){a?b():setTimeout(function(){return g.app.command("GeolocateStop").execute()},0)}))};b.prototype._createEditingLayer=function(){this._destroyEditingLayer();this._editingLayer=new esri.layers.GraphicsLayer;this._sourceLayer&&this._editingLayer.setRenderer(this._sourceLayer.renderer);this.app.map.addLayer(this._editingLayer);return this._editingLayer};b.prototype._destroyEditingLayer=function(){this.currentFeatureEsriClone&&(this.currentFeatureEsriClone.hide(),this._editingLayer&&this._editingLayer.remove(this.currentFeatureEsriClone));
if(this._editingLayer)this._editingLayer.clear(),this.app.map.removeLayer(this._editingLayer),this._editingLayer=null};b.prototype._createNewEsriFeature=function(a,g,b,d){var e=new esri.Graphic(null);e.attributes=g||{};e.geometry=a||new esri.geometry.Point(NaN,NaN);e.symbol=b||null;e.infoTemplate=d||null;return e};b.prototype.save=function(a,g){var b=this;this.stopEditingGeometry();var d=this.performValidation();this.isBusy.set(false);if(d){this.state=5;this.isBusy.set(true);var e;e=this.currentFeatureEsri?
this._cloneEsriFeature(this.currentFeatureEsri):new esri.Graphic(null);var f={__editingMeta:{}};this.isEditingRelatedFeatureNotInSite.get()||!this.isEditingNewFeature.get()&&this.currentFeatureEsri&&this.currentFeatureEsri.hasOwnProperty("__editingMeta")&&dojo.mixin(e,this.currentFeatureEsri);for(var k in e.attributes)e.attributes.hasOwnProperty(k)&&(k||delete e.attributes[k]);var d=this.currentFeatureEsri,j=this._sourceLayer;try{var i=this.form.get().getAttributeValues(),l=null,p;if(this.isEditingNewFeature.get())for(p in l=
i,d.attributes)d.attributes.hasOwnProperty(p)&&!l.hasOwnProperty(p)&&d.attributes[p]!=null&&(l[p]=d.attributes[p]);else{l={};for(p in i)i.hasOwnProperty(p)&&d.attributes[p]!==i[p]&&(l[p]=i[p]);var r=j.objectIdField,u=j.globalIdField;d.attributes.hasOwnProperty(r)&&(l[r]=d.attributes[r]);d.attributes.hasOwnProperty(u)&&(l[u]=d.attributes[u])}var w=true;if(j.relationships){var x=[],y=[];for(p=0;p<j.relationships.length;p++){var z=j.relationships[p];x[p]={key:z.keyField,value:i[z.keyField]};if(z.cardinality===
"esriRelCardinalityOneToOne"||z.cardinality==="esriRelCardinalityOneToMany"&&z.role==="esriRelRoleOrigin"){r=null;if(!this.app.isOffline.get()&&!this.app.isOffline.get()){var A=new esri.tasks.Query;if(!i.hasOwnProperty(z.keyField)||i[z.keyField]===null)continue;A.where=z.keyField+" = '"+i[z.keyField]+"'";r=Promise.resolve(j.queryFeatures(A,function(a){a.features&&(b.isEditingNewFeature.get()&&a.features.length>=1?w=false:!b.isEditingNewFeature.get()&&a.features.length>1&&(w=false))},function(a){b.app.trace.warning("Unable to query layer for cardinality check: "+
a)}))}y.push(r)}}}Promise.all(y).then(function(a){if(w===false){for(var g="",d="",e=0;e<x.length;e++){var f=x[e];$.each(a,function(b){b=a[b];if(b.features&&b.features.length>0&&b.features[0].attributes[f.key]===f.value)g=f.key,d=f.value})}b.app.command("Alert").execute(b.app.getResource(b.libraryId,"language-feature-editing-cardinality-violation").format(d,g),b.app.getResource(b.libraryId,"language-feature-editing-error-dialogue"));b.state=0;b.isBusy.set(false)}}).lastly(function(){if(w!==false){var d=
new esri.Graphic(b.currentFeatureEsriClone.toJson());d.attributes=l;b.geometryHasBeenEdited.get();if(!b.isEditingNewFeature.get()&&typeof b.currentFeatureEsri.__editingMeta!=="undefined"){var o=dojo.clone(b.currentFeatureEsri.__editingMeta);o.dependencies[b.currentFeatureEsri.attributes[o.objectIdField]]=[];o.dependencies[b.currentFeatureEsri.attributes[o.objectIdField]].push({from:o.objectIdField,to:o.objectIdField});d.__editingMeta=f}var o=null,k=j.url||j._essentialsMetadata.serviceUrl;if(!b.isEditingRelatedFeatureNotInSite.get()&&
(o=b._getMapServiceByLayer(j),!o))throw Error("Could not find map service for feature layer while saving.");j.url=k;d.__editingMeta=e.__editingMeta;b.isBusy.set(true);o={mapService:o,layer:j,feature:d,successCallback:function(){b.isBusy.set(false);b._handleSaveSuccess(d,j,a,g)},errorCallback:function(a){b.isBusy.set(false);b._handleSaveError(a,g)}};try{b.app.event("Internal.EditorFormPreSaveEvent").publish(b.form,o)}catch(i){return}b.editLogEntry!=null?(o.oldEditLogEntry=b.editLogEntry,o.successCallback=
function(){b.app.command("RefreshOfflineLayers").execute();a()},b.app.command("ChangeEditLogEntry").execute(o)):b.isEditingRelatedFeature.get()?(o.relatedFeature=b._relatedFeature,o.relationshipOrigin=b._editingRelationshipOrigin,o.relationshipDestination=b._editingRelationshipDestination,b.isEditingNewFeature.get()?(o.successCallback=function(){b.app.event("RelatedRecordCreatedEvent").publish(d);b.isBusy.set(false);a()},b.app.command("CreateRelatedRecord").execute(o)):(o.successCallback=function(){b.app.event("RelatedRecordEditedEvent").publish(d);
b.isBusy.set(false);a()},b.app.command("UpdateRelatedRecord").execute(o))):b.isEditingNewFeature.get()?(b.app.event("EditorPreCreateFeatureEvent").publish(d),b.app.command("CreateFeature").execute(o)):(b.app.event("EditorPreUpdateFeatureEvent").publish(d),b.app.command("UpdateFeature").execute(o));b.state=5}})}catch(B){this.state=0,this.isBusy.set(false),this.app.trace.error("Error applying edits: {0}".format(B))}}};b.prototype._handleSaveError=function(a,g){this.isBusy.set(false);this.state=0;var b=
this.app.getResource(this.libraryId,"language-feature-layer-error-feature-edits").format(a),d=this.app.getResource(this.libraryId,"language-feature-layer-error-title");this.app.command("Alert").execute(b,d);this.app.trace.error(b);g&&g(a)};b.prototype._handleSaveSuccess=function(a,g,b){if(this.layerUpdateEndToken)dojo.disconnect(this.layerUpdateEndToken),this.layerUpdateEndToken=null;var e=d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.findFeatureInMap(this.currentFeatureEsri,this.app.site,
this._sourceLayer);if(e){var f=a.attributes;a.attributes=null;e.attributes={};dojo.mixin(e.attributes,this.originalFeatureClone.attributes);dojo.mixin(e.attributes,f);e.show()}this._destroyEditingLayer();this.originalFeatureClone&&e?(e={originalFeature:this.originalFeatureClone,editedFeature:e},this._handleEditedFeature(e),this.app.event("FeatureEditedEvent").publish(e)):this.originalFeatureClone&&this.isEditingNewFeature.get()&&this.app.event("FeatureCreatedEvent").publish(a);this.isEditingNewFeature.set(false);
this.state=0;this.editLogEntry?this.editLogEntry.setFeature(a):g&&g.refresh();!this.editLogEntry&&this.isEditingRelatedFeatureNotInSite.get()&&(g=this.findGeocortexLayerForUrl(g.url),this.headerText.set((new d.essentialsHtmlViewer.mapping.infrastructure.Feature({graphic:a,layer:g})).plainLabel.get()));this.cancelEditing();b&&b()};b.prototype._cloneEsriFeature=function(a){return new esri.Graphic(a.geometry,a.symbol,a.attributes,a.infoTemplate)};b.prototype._handleGeometryEditInvokedEvent=function(){this.isEditingGeometry.set(true);
this.showEditGeometryButton.set(false);this.showStopEditingGeometryButton.set(this.canEditGeometry.get());this.geometryHasBeenEdited.set(true)};b.prototype._handleGeometryEditCompletedEvent=function(a){this.isEditingGeometry.set(false);this.showEditGeometryButton.set(this.canEditGeometry.get());this.showStopEditingGeometryButton.set(false);this.currentFeatureEsriClone&&this.currentFeatureEsriClone===a.originalGraphic&&(this.currentFeatureEsriClone.setGeometry(a.editedGraphic.geometry),this.currentFeatureEsriClone.show(),
this._swapOriginalFeatureForClone());this.isEditingNewFeature.get()&&this.isEditingRelatedFeature.get()&&this._activateEditingView()};b.prototype._handleLayerUpdateEnd=function(){this._swapOriginalFeatureForClone()};b.prototype._handleDeletedFeature=function(a){a={originalFeature:a instanceof esri.Graphic?a:a.originalFeature,action:"delete"};!a.originalFeature||!(a.originalFeature instanceof esri.Graphic)?this.app.trace.warning("EditorViewModel: Could not update feature set collections on feature deletion. Original feature not provided."):
this._handleEditedFeature(a)};b.prototype._handleEditedFeature=function(a){var g=this;if(!a.originalFeature||!a.editedFeature&&a.action!=="delete")this.app.trace.warning("EditorViewModel: Could not update feature set collections on feature edit. Original or edited feature not provided.");else{var b=this.app.featureSetManager.findFeaturesByEsriFeature(a.editedFeature||a.originalFeature);if(!b||!b.length)a.editedFeature&&a.originalFeature&&a.editedFeature!==a.originalFeature&&(b=this.app.featureSetManager.findFeaturesByEsriFeature(a.originalFeature));
b&&b.length&&(!a.editedFeature&&a.action==="delete"?b.forEach(function(a){var b=a.featureSet;b&&b.features.removeItem(a);b.features.length()===0&&g.app.featureSetManager.featureSetCollections.get().forEach(function(a){var g=a.getFeatureSetById(b.id);g&&a.featureSets.removeItem(g)})}):b.forEach(function(g){return g.esriFeature.set(a.editedFeature)}))}};b.prototype._swapOriginalFeatureForClone=function(){if(this.currentFeatureEsri){var a=d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.findFeatureInMap(this.currentFeatureEsri,
this.app.site,this._sourceLayer);a&&(a.hide(),!this.isEditingGeometry.get()&&this.currentFeatureEsriClone.getLayer()&&this.currentFeatureEsriClone.show())}};b.prototype._restoreOriginalFeature=function(){if(this.currentFeatureEsri){var a=null;(a=this.currentFeatureGeocortex&&this.currentFeatureGeocortex.featureLayer&&this.currentFeatureGeocortex.featureLayer.type=="Table"?d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.findFeatureInLayer(this.currentFeatureEsri,this._sourceLayer):d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.findFeatureInMap(this.currentFeatureEsri,
this.app.site,this._sourceLayer))&&a.show()}};b.prototype.cancelEditing=function(){this.stopEditingGeometry();this.geometryHasBeenEdited.set(false);this._restoreOriginalFeature();this._destroyEditingLayer();this.form.get()&&this.form.get().clear();this.isEditingGeometry.set(false);this.isEditingLogEntry.set(false);this.isEditingNewFeature.set(false);this.isEditingRelatedFeature.set(false);this.isEditingRelatedFeatureNotInSite.set(false);this.layerUpdateEndToken&&dojo.disconnect(this.layerUpdateEndToken);
this.app.behavior("EditorRemoveFeatureSelectedBehavior").run();this.app.event("EditorClosedEvent").publish();this.state=0};b.prototype._canExecuteStartEditingFeature=function(a){if(!a)return false;if(a.layer){var g=a.layer;if(g.mapService&&g.mapService.serviceLayer)if(g.mapService.serviceLayer.isEditable){if(!g.mapService.serviceLayer.isEditable())return false}else return false;if(a=a.esriFeature.get())if(a.getLayer())return true;else{if(g.mapService&&g.mapService.serviceLayer)a._graphicsLayer=a._layer=
g.mapService.serviceLayer;return!!d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.findFeatureInMap(a,this.app.site)}}else if(a.featureLayer)return a.featureLayer.isEditable();return false};b.prototype._executeStartEditingFeature=function(a,g){var b=this;g===void 0&&(g=false);var e=true;this.isEditingNewFeature.set(g);this.geometryHasBeenEdited.set(false);var f;try{if(a&&a instanceof d.essentialsHtmlViewer.mapping.infrastructure.Feature){if(a.layer&&a.layer.mapService)this.currentMapService=
a.layer.mapService;a.featureLayer&&a.featureLayer.type=="Table"&&(e=false);this.currentFeatureGeocortex=a;this.headerText.set(a.plainLabel.get());f=a.esriFeature.get()}else f=a;if(!this.app.map||!this.app.site||!this.app.site.isInitialized)this.app.event("SiteInitializedEvent").once(this,function(){return b._executeStartEditingFeatureImpl(f,g,e)});else this.isEditingNewFeature.get()||this.app.isOffline.get()?this._executeStartEditingFeatureImpl(f,g,e):this._refreshEsriGraphic(f).then(function(a){a!=
null&&a.features&&a.features.length>0&&a.features[0].attributes?(f.attributes={},dojo.mixin(f.attributes,a.features[0].attributes)):b.app.trace.info("Error retreiving most recent version of related record. Falling back to currently loaded version.");b._executeStartEditingFeatureImpl(f,g,e)}).caught(function(){b.app.trace.info("Error retreiving most recent version of feature for editing. Falling back to currently loaded version.");b._executeStartEditingFeatureImpl(f,g,e)})}catch(k){this.app.trace.error("Could not start editing: {0}".format(k)),
this.cancelEditing()}};b.prototype._refreshEsriGraphic=function(a,g){var b=null;g||(g=a.getLayer());var b=this._getMapServiceByLayer(g),d=g.objectIdField;if(!d&&b.serviceLayer instanceof esri.layers.FeatureLayer)d=b.serviceLayer.objectIdField;var f=new esri.tasks.Query;f.objectIds=[a.attributes[d]];f.returnGeometry=true;f.outFields=["*"];var k=new esri.tasks.QueryTask(e.infrastructure.taskUtils.getQueryTaskUrl(g,b));return new Promise(function(a,b){k.execute(f,function(b){if(b&&b.features&&b.features.length)b.features[0]._layer=
g;a(b)},b)})};b.prototype._executeStartEditingFeatureImpl=function(a,g,b){g===void 0&&(g=false);this.state!==0&&(this.cancelEditing(),this.isEditingNewFeature.set(g));var e=null;if(b)if(b=g?a:d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.findFeatureInMap(a,this.app.site),this.originalFeatureClone=this._cloneEsriFeature(b),e=g?this._sourceLayer:b.getLayer()){if(e instanceof esri.layers.GraphicsLayer){var j=e,i=this.app.map.getLayer(j.id.replace("-explodedClusterLayer",""));i instanceof esri.layers.FeatureLayer&&
(e=i);j.renderer&&a.setSymbol(j.renderer.getSymbol(a))}g&&(e.objectIdField&&(a.attributes[e.objectIdField]=0),e.globalIdField&&(a.attributes[e.globalIdField]=""));this._sourceLayer=e;this._calculateCanDeleteFeature();this.layerUpdateEndToken=dojo.connect(e,"onUpdateEnd",dojo.hitch(this,this._handleLayerUpdateEnd));this.state=3;this.isEditingRelatedFeatureNotInSite.set(false);this.canEditGeometry.set(this.configAllowsEditGeometry&&!!e.geometryType&&e.allowGeometryUpdates);this.showStopEditingGeometryButton.set(false);
this.showEditGeometryButton.set(this.canEditGeometry.get());this.currentFeatureEsri=b;this.currentFeatureEsriClone=this._cloneEsriFeature(b);b.hasOwnProperty("_drawType")&&(this.currentFeatureEsriClone._drawType=b._drawType);this._createEditingLayer();this._editingLayer.add(this.currentFeatureEsriClone);this.form.set(new f.EditingFormViewModel(this.app,this.libraryId,a,e,{textareaThreshold:this.textareaThreshold}));this.app.event("Internal.EditorFormSetupEvent").publish(this.form,b);if(this._sourceLayer.typeIdField!=
null){a=this.form.get();for(e=0;e<a.fields.getLength();e++)if(b=a.fields.getAt(e),b.name.get()===this._sourceLayer.typeIdField){this.handleTypeFieldSelected(b);break}}try{this._buildFeatureRelationships()}catch(l){this.app.trace.warning("Could not set up related records for editing.")}this.isBusy.set(false);g||this._activateEditingView()}else this.app.trace.error("Error - could not find layer for feature.");else this._editAsTable(a)};b.prototype._canExecuteStartEditingNewFeature=function(){return true};
b.prototype._editAsTable=function(a){for(var g=this,b=this.app.site.getFeatureServices(),d=null,e=null,f=0;f<b.length;f++)b[f].serviceLayer.relationships.forEach(function(b){var h=g.currentFeatureGeocortex.featureLayer;b.relatedTableId==h.layerId&&(e=h,d=b,b={id:e.layerId,text:"Editing "+a.attributes.OBJECTID,relatedFeature:null,essentialsRelatedFeature:null,feature:a,editable:e.isEditable(),relationship:d},g._executeStartEditingRelatedRecord(b,false))})};b.prototype._executeStartEditingNewFeature=
function(a,g,b){b===void 0&&(b=true);this.currentFeatureEsri=a;this._sourceLayer=g;this._calculateCanDeleteFeature();this.headerText.set(this.app.getResource(this.libraryId,"language-common-feature-editing"));this._executeStartEditingFeature(a,true);b?g.geometryType&&g.allowGeometryUpdates?this.startEditingGeometry():this._activateEditingView():(this._activateEditingView(),this.currentFeatureEsriClone.show())};b.prototype._canExecuteStartEditingEditLogEntry=function(){return true};b.prototype._executeStartEditingEditLogEntry=
function(){return true};b.prototype.handleTypeFieldSelected=function(a){if(a){var g=a.value.get();if(g!=null)for(var b=0;b<a.valueOptions.getLength();b++){var d=a.valueOptions.getAt(b);if(d.id!=null&&d.id.toString()===g.toString()){this._loadCodedDomainsForType(d.domains,a.name.get());break}}}};b.prototype._loadCodedDomainsForType=function(a,g){if(a){var b=this.form.get(),d;for(d in a)if(d!==g&&a.hasOwnProperty(d)&&a[d].type)for(var e=0;e<b.fields.getLength();e++){var f=b.fields.getAt(e);if(f.name.get()===
d){var k=[];if(a[d].type!=="inherited")k=a[d].codedValues;else for(var j=0;j<this._sourceLayer.fields.length;++j){var i=this._sourceLayer.fields[j];if(i.name===f.name.get()&&(i=i.domain)&&i.codedValues){k=i.codedValues;break}}this._addValueCollection({viewModel:f,typeName:"codedDomainValue",collectionName:"codedDomainValues",valueCollection:k,nullable:f.nullable.get(),nullOption:{name:"",code:null}});f.value.pulse()}}}};b.prototype._addValueCollection=function(a){function g(a){return a===null||a===
void 0?"":a.toString()}if(a){var b=a.viewModel.valueOptions;if(!b)b=a.viewModel.valueOptions=new ObservableCollection([]);b.clear();b.addItems(a.valueCollection);a.nullable&&b.insertItem(0,a.nullOption);var d=g(a.viewModel.value.get());b.get().some(function(a){return g(a.code)===d})||(b=b.get().filter(function(g){return g!==a.nullOption})[0],a.viewModel.value.set(b?b.code:a.nullOption.code))}};b.prototype._activateEditingView=function(){this.app.command("HideFeatureTemplatePicker").execute();this.app.command("ActivateView").execute("EditorView");
var a=new e.infrastructure.Feature({graphic:this.currentFeatureEsriClone});this.app.behavior("EditorFeatureSelectedBehavior").run(a)};b.prototype._getEditingToolMessage=function(a){switch(a){case esri.toolbars.Draw.POINT:return this.app.getResource(this.libraryId,"language-feature-editing-geometry-point");case esri.toolbars.Draw.MULTI_POINT:return this.app.getResource(this.libraryId,"language-feature-editing-geometry-multi-point");case esri.toolbars.Draw.POLYLINE:case esri.toolbars.Draw.FREEHAND_POLYLINE:return this.app.getResource(this.libraryId,
"language-feature-editing-geometry-polyline");case esri.toolbars.Draw.POLYGON:case esri.toolbars.Draw.FREEHAND_POLYGON:return this.app.getResource(this.libraryId,"language-feature-editing-geometry-polygon");case esri.toolbars.Draw.EXTENT:return this.app.getResource(this.libraryId,"language-feature-editing-geometry-rectangle")}return this.app.getResource(this.libraryId,"language-feature-editing-geometry-default")};b.prototype.findGeocortexLayerForUrl=function(a){for(var g=this.app.site,b=0;b<g.essentialsMap.mapServices.length;b++){var d=
g.essentialsMap.mapServices[b];if(d.serviceUrl===a&&d.layers.length>0)return d.layers[0]}return null};b.prototype._findServiceLayerForUrl=function(a){for(var g=this.app.site,b=0;b<g.essentialsMap.mapServices.length;b++){var d=g.essentialsMap.mapServices[b];if(d.url===a)return d.serviceLayer}return null};b.prototype._hideOrShowRelateds=function(){this.showRelatedLayers.set(this.hasRelatedLayers.get()&&!this.isEditingRelatedFeatureNotInSite.get()&&!this.isEditingNewFeature.get())};b.prototype._calculateCanDeleteFeature=
function(){this.canDeleteFeature.set(!this.isEditingNewFeature.get()&&this._sourceLayer&&/Delete/.test(this._sourceLayer.capabilities))};return b}(d.framework.ui.ViewModelBase);f.EditorViewModel=i})(f.editing||(f.editing={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){(function(d){d[d.Create=0]="Create";d[d.Update=1]="Update";d[d.Delete=2]="Delete";d[d.Cut=3]="Cut";d[d.Explode=4]="Explode";d[d.Union=5]="Union"})(f.EditGraphicType||(f.EditGraphicType={}));var i=function(j){function b(){j.apply(this,arguments);this._hasGeometry=false;this._editorDeactivatedHandle=null;this._isEditingGeometry=false}__extends(b,j);b.prototype.initialize=function(a){j.prototype.initialize.call(this,a);this._registerCommands();
this._registerEvents()};b.prototype._registerCommands=function(){this.app.command("SetEditorFeatureGeometry").register(this,this._executeSetEditorFeatureGeometry,this._canExecuteSetEditorFeatureGeometry);this.app.command("StartEditingGraphicGeometry").register(this,this._executeStartEditingGeometry,this._canExecuteStartEditingGeometry);this.app.command("StopEditingGraphicGeometry").register(this,this._executeStopEditingGeometry,this._canExecuteStopEditingGeometry);this.app.command("StopFeaturePlacementState").register(this,
this._executeStopFeaturePlacementState,this._canExecuteStopFeaturePlacementState);this.app.command("CreateGraphicsInMemory").register(this,this._executeCreateGraphicsInMemory);this.app.command("UpdateGraphicsInMemory").register(this,this._executeUpdateGraphicsInMemory);this.app.command("DeleteGraphicsInMemory").register(this,this._executeDeleteGraphicsInMemory);this.app.command("CutGraphicsInMemory").register(this,this._executeCutGraphicsInMemory);this.app.command("ExplodeGraphicsInMemory").register(this,
this._executeExplodeGraphicsInMemory);this.app.command("UnionGraphicsInMemory").register(this,this._executeUnionGraphicsInMemory)};b.prototype._registerEvents=function(){var a=this,g=null;this.app.event("StartFeaturePlacementEvent").subscribe(this,function(){g=a.app.event("ViewDeactivatedEvent").subscribe(a,function(g){g.id==="TemplatePickerView"&&a.app.event("StopFeaturePlacementEvent").publish()})});this.app.event("StopFeaturePlacementEvent").subscribe(this,function(){a.app.event("ViewDeactivatedEvent").unsubscribe(g);
a.app.command("ClearActiveTool").execute();var b=a.app.viewManager.getViewById("TemplatePickerView");b&&b.isActive&&a.app.command("DeactivateView").execute("TemplatePickerView")})};b.prototype._executeStopFeaturePlacementState=function(){this.app.event("StopFeaturePlacementEvent").publish()};b.prototype._canExecuteStopFeaturePlacementState=function(){return true};b.prototype._canExecuteSetEditorFeatureGeometry=function(){return true};b.prototype._executeSetEditorFeatureGeometry=function(a){this._executeStopEditingGeometry();
var g=this._feature;if(g)a.type==="extent"&&(a=d.essentials.GeometryUtilities.envelopeToPolygon(a)),this._geometry=a,this._hasGeometry=!!a,this._graphic.setGeometry(a),this.app.event("GeometryEditCompletedEvent").publish({originalGraphic:this._feature,editedGraphic:this._graphic,cancelled:false}),this._destroyEditingLayer(),this.app.event("FeatureGeometryEditedEvent").publish(g)};b.prototype._canExecuteStartAddingFeatureGeometry=function(){return true};b.prototype._executeStartAddingFeatureGeometry=
function(){};b.prototype._canExecuteStartEditingGeometry=function(){return true};b.prototype._executeStartEditingGeometry=function(a,g){var b=this;this._isEditingGeometry=true;this._editObject&&this._editObject.deactivate();this._feature=a;!a.symbol&&!g.renderer&&a.setSymbol(this._getMoveSymbol(a,g));this._graphic=new esri.Graphic(a.geometry,a.symbol,a.attributes,a.infoTemplate);this._hasGeometry=!!this._graphic.geometry;var d=g?g:this._feature.getLayer();this._featureLayer=d;this._createEditingLayer();
this._hideOriginalFeature();this._graphic.symbol=this._getMoveSymbol(a,d);this._editingLayer.add(this._graphic);this._layerUpdateEndToken&&dojo.disconnect(this._layerUpdateEndToken);this._layerUpdateEndToken=dojo.connect(this._graphic._graphicsLayer,"onUpdateEnd",dojo.hitch(this,this._handleLayerUpdateEnd));if(this._hasGeometry){d=null;if(a===null)throw Error("Can't edit geometry of null feature");if(esri.toolbars.Edit){var d=this._getConfiguredEditMode(),e={allowAddVertices:true,allowDeleteVertices:true};
this._editObject=this.app.accessibilityManager.createComponent("geocortex.accessibility.edit",this.app.map,e);var f=dojo.aspect.after(this._editObject,"onGraphicFirstMove",function(){b.app.map.disableMapNavigation()},true),k=dojo.aspect.after(this._editObject,"onGraphicMoveStop",function(){b.app.map.enableMapNavigation()},true);if(this._editorDeactivatedHandle)this._editorDeactivatedHandle.remove(),this._editorDeactivatedHandle=null;this._editorDeactivatedHandle=dojo.aspect.after(this._editObject,
"onDeactivate",function(){f&&(f.remove(),f=null);k&&(k.remove(),k=null);if(b._editingGeometryMapClickHandle!=null)dojo.disconnect(b._editingGeometryMapClickHandle),b._editingGeometryMapClickHandle=null;if(b._layerUpdateEndToken)dojo.disconnect(b._layerUpdateEndToken),b._layerUpdateEndToken=null;if(b._editorDeactivatedHandle)b._editorDeactivatedHandle.remove(),b._editorDeactivatedHandle=null;if(b._editObject)b._editObject=null;b._destroyEditingLayer();b._indicateGeometryEditing(false);b.app.event("GeometryEditCompletedEvent").publish({originalGraphic:b._feature,
editedGraphic:b._graphic,cancelled:false})},true);this._editingGeometryMapClickHandle=dojo.connect(this.app.map,"onClick",function(){b._executeStopEditingGeometry(true)});this._indicateGeometryEditing(true);this._editObject.activate(d,this._graphic,e);this.app.event("GeometryEditInvokedEvent").publish(this._feature)}else d=this.app.getResource(this.libraryId,"language-feature-editing-package-required"),e=this.app.getResource(this.libraryId,"language-feature-layer-error-title"),this.app.command("Alert").execute(d,
e)}else this._currentToolName=this._getToolNameByGeometryType(d.geometryType),this.app.command("SetActiveTool").execute(this._currentToolName),this._indicateGeometryEditing(true)};b.prototype._createEditingLayer=function(){this._editingLayer=new esri.layers.GraphicsLayer;this._editingLayer.id="editing_layer";this.app.map.addLayer(this._editingLayer)};b.prototype._destroyEditingLayer=function(){if(this._editingLayer)this._editingLayer.clear(),this.app.map.removeLayer(this._editingLayer),this._editingLayer=
null};b.prototype._handleLayerUpdateEnd=function(){this._hideOriginalFeature()};b.prototype._hideOriginalFeature=function(){if(this._feature){var a=d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.findFeatureInMap(this._feature,this.app.site);a&&a.hide()}};b.prototype._getMoveSymbol=function(a,g){function b(a){f||(d=new a(d.toJson()),f=true);return d}var d=null;if(g.renderer)d=a.symbol?a.symbol:g.renderer.getSymbol(a);else{var e=this.app.map.graphicsLayerIds.filter(function(a){return a===g.id+
"-cluster"});e.length>0&&(d=this.app.map.getLayer(e[0]).featureLayerRenderer.getSymbol(a))}var f=false;if(d instanceof esri.symbol.SimpleMarkerSymbol&&(e=d,e.size<10&&b(esri.symbol.SimpleMarkerSymbol).setSize(10),e.color.a<0.5&&(!e.outline||e.outline.color.a<0.5)))b(esri.symbol.SimpleMarkerSymbol).color.a=0.5;return d};b.prototype._canExecuteStopEditingGeometry=function(){return true};b.prototype._executeStopEditingGeometry=function(){if(this._isEditingGeometry){this.app.command("ClearActiveTool").execute();
if(this._editObject)this._editObject.deactivate(),this._editObject=null;if(this._editingGeometryMapClickHandle!=null)dojo.disconnect(this._editingGeometryMapClickHandle),this._editingGeometryMapClickHandle=null;if(this._layerUpdateEndToken)dojo.disconnect(this._layerUpdateEndToken),this._layerUpdateEndToken=null;if(this._editorDeactivatedHandle)this._editorDeactivatedHandle.remove(),this._editorDeactivatedHandle=null;this._indicateGeometryEditing(false)}};b.prototype._indicateGeometryEditing=function(a){var g=
this;if(this._feature&&this._feature.geometry)if(a){var a=this._feature.geometry.type,b=this.getEditingGeometryStatusMessage(this.app,this.libraryId,d.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.getEsriGeometryType(a,esri.toolbars.Draw.POINT)),a=new d.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs(b,null,function(){g._executeStopEditingGeometry(true)},"geometry-type-"+a.toLowerCase(),"geometryEditingStatus");this.app.command("AddStatus").execute(a);this.app.command("ShowMap").execute()}else this.app.command("RemoveStatus").execute("geometryEditingStatus")};
b.prototype.getEditingGeometryStatusMessage=function(a,g,b){switch(b){case esri.toolbars.Draw.POINT:return a.getResource(g,"language-feature-editing-geometry-point");case esri.toolbars.Draw.POLYLINE:case esri.toolbars.Draw.FREEHAND_POLYLINE:return a.getResource(g,"language-feature-editing-geometry-polyline");case esri.toolbars.Draw.CIRCLE:case esri.toolbars.Draw.ELLIPSE:case esri.toolbars.Draw.POLYGON:case esri.toolbars.Draw.FREEHAND_POLYGON:return a.getResource(g,"language-feature-editing-geometry-polygon");
case esri.toolbars.Draw.EXTENT:return a.getResource(g,"language-feature-editing-geometry-rectangle")}return a.getResource(g,"language-feature-editing-geometry-default")};b.prototype._getToolNameByDrawType=function(a){a||(a="Polygon");return"Editing{0}Tool".format(a)};b.prototype._getToolNameByGeometryType=function(a){return"Editing{0}Tool".format(a.slice(12))};b.prototype._getConfiguredEditMode=function(){var a=this,g=0,b=this.app.site.essentialsMap.mapServices.filter(function(g){return g.id===a._featureLayer.id});
b.length==0?g=esri.toolbars.Edit.MOVE|esri.toolbars.Edit.EDIT_VERTICES|esri.toolbars.Edit.SCALE|esri.toolbars.Edit.ROTATE:(b=b[0],b.rotateEnabled&&(g|=esri.toolbars.Edit.ROTATE),b.scaleEnabled&&(g|=esri.toolbars.Edit.SCALE),b.moveEnabled&&(g|=esri.toolbars.Edit.MOVE),b.editVerticesEnabled&&(g|=esri.toolbars.Edit.EDIT_VERTICES));return g};b.prototype._executeCreateGraphicsInMemory=function(a){var g=this;this._validateEditInMemoryArgs(a,0)&&(a.graphics.map(function(b){a.graphicsLayer.add(b);g.app.event("MarkupAddedEvent").publish(b)}),
a.successCallback(a.graphics,[],[]).then(function(){var b=g.app.getResource(g.libraryId,"language-feature-editing-undoable-add");g.app.undoManager.add(new f.undoable.Add(b,{app:g.app,addedGraphics:a.graphics,graphicsLayer:a.graphicsLayer}))}))};b.prototype._executeUpdateGraphicsInMemory=function(a){var g=this;if(this._validateEditInMemoryArgs(a,1))if(!a.geometries||a.geometries.length!==a.graphics.length)a.errorCallback(Error("Could not update graphics: the graphic count does not match the updated geometry count."));
else{for(var b=[],d=0;d<a.graphics.length;d++)b[d]=new esri.Graphic(a.graphics[d].toJson()),a.graphics[d].setGeometry(a.geometries[d]),this.app.event("MarkupUpdatedEvent").publish(a.graphics[d]);a.successCallback([],a.graphics,[]).then(function(){var d=g.app.getResource(g.libraryId,"language-feature-editing-undoable-update");g.app.undoManager.add(new f.undoable.Update(d,{app:g.app,preUpdatedGraphics:b,updatedGraphics:a.graphics,graphicsLayer:a.graphicsLayer}))})}};b.prototype._executeDeleteGraphicsInMemory=
function(a){var g=this;if(this._validateEditInMemoryArgs(a,2)){for(var b=[],d=0;d<a.graphics.length;d++)a.graphicsLayer.remove(a.graphics[d])&&(b.push(a.graphics[d]),this.app.event("MarkupDeletedEvent").publish(a.graphics[d]));b.length===0&&a.errorCallback(Error("Could not delete graphics: the provided graphics are not on the graphics layer."));a.successCallback([],[],b).then(function(){var d=g.app.getResource(g.libraryId,"language-feature-editing-undoable-delete");g.app.undoManager.add(new f.undoable.Delete(d,
{app:g.app,deletedGraphics:b,graphicsLayer:a.graphicsLayer}))})}};b.prototype._executeCutGraphicsInMemory=function(a){var g=this;if(this._validateEditInMemoryArgs(a,3))if(a.polyline){var b=a.graphics.map(function(a){return a.geometry});e.infrastructure.GeometryUtils.cutGeometries(b,a.polyline,this.app).then(function(b){for(var h=0;h<b.length;h++)if(b[h].length<2){a.errorCallback(Error("Could not cut graphics: the provided polyline does not cut a graphic."));return}var d=a.graphics.map(function(a){return new esri.Graphic(a.toJson())}),
e=a.graphics,j=g._splitGraphics(e,b);e.map(function(a){return g.app.event("MarkupUpdatedEvent").publish(a)});j.map(function(b){a.graphicsLayer.add(b);g.app.event("MarkupAddedEvent").publish(b)});a.successCallback(j,e,[]).then(function(){var b=g.app.getResource(g.libraryId,"language-feature-editing-undoable-cut");g.app.undoManager.add(new f.undoable.AddAndUpdate(b,{app:g.app,addedGraphics:j,preUpdatedGraphics:d,updatedGraphics:e,graphicsLayer:a.graphicsLayer}))})},function(g){a.errorCallback(g)})}else a.errorCallback(Error("Could not cut graphics: required polyline was not supplied."))};
b.prototype._executeExplodeGraphicsInMemory=function(a){var g=this;if(this._validateEditInMemoryArgs(a,4)){for(var b=a.graphics,d=[],j=0;j<b.length;j++)if(d[j]=e.infrastructure.GeometryUtils.explodeGeometry(b[j].geometry),!d[j]){a.errorCallback(Error("Could not explode graphics: invalid geometry."));return}var i=b.map(function(a){return new esri.Graphic(a.toJson())}),l=this._splitGraphics(b,d);b.map(function(a){return g.app.event("MarkupUpdatedEvent").publish(a)});l.map(function(b){a.graphicsLayer.add(b);
g.app.event("MarkupAddedEvent").publish(b)});a.successCallback(l,b,[]).then(function(){var d=g.app.getResource(g.libraryId,"language-feature-editing-undoable-explode");g.app.undoManager.add(new f.undoable.AddAndUpdate(d,{app:g.app,addedGraphics:l,preUpdatedGraphics:i,updatedGraphics:b,graphicsLayer:a.graphicsLayer}))})}};b.prototype._executeUnionGraphicsInMemory=function(a){var g=this;if(this._validateEditInMemoryArgs(a,5)){var b=a.graphics[0],d=a.graphics.map(function(a){return a.geometry});e.infrastructure.GeometryUtils.unionGeometries(d).then(function(d){var e=
new esri.Graphic(b.toJson());b.setGeometry(d);g.app.event("MarkupUpdatedEvent").publish(b);for(var o=a.graphics.slice(1),d=0;d<o.length;d++)a.graphicsLayer.remove(o[d]),g.app.event("MarkupDeletedEvent").publish(o[d]);a.successCallback([],[b],o).then(function(){var d=g.app.getResource(g.libraryId,"language-feature-editing-undoable-union");g.app.undoManager.add(new f.undoable.DeleteAndUpdate(d,{app:g.app,deletedGraphics:o,preUpdatedGraphics:[e],updatedGraphics:[b],graphicsLayer:a.graphicsLayer}))})},
function(g){a.errorCallback(g)})}};b.prototype._validateEditInMemoryArgs=function(a,g){a.successCallback=a.successCallback||function(){return Promise.resolve()};a.errorCallback=a.errorCallback||function(){};if(!a.graphicsLayer||!(a.graphicsLayer instanceof esri.layers.GraphicsLayer))return a.errorCallback(Error("Could not edit graphics: required graphics layer was not supplied.")),false;if(!a.graphics||a.graphics.length===0)return a.errorCallback(Error("Could not edit graphics: required graphics were not supplied.")),
false;if(g===3||g===4||g===5)for(var b=0;b<a.graphics.length;b++){var d=a.graphics[b];if(d.getLayer().id!==a.graphicsLayer.id)return a.errorCallback(Error("Could not edit graphics: graphic is not on the supplied graphics layer.")),false;if(g===5){if(d.geometry.type!==a.graphics[0].geometry.type)return a.errorCallback(Error("Could not edit graphics: graphics are not of the same type.")),false;if(!d.geometry.spatialReference.equals(a.graphics[0].geometry.spatialReference))return a.errorCallback(Error("Could not edit graphics: graphics are not of the same spatial reference.")),
false}}return true};b.prototype._splitGraphics=function(a,g){for(var b=[],d=0;d<g.length;d++){var e=a[d];e.setGeometry(g[d][0]);for(var f=1;f<g[d].length;f++)b.push(new esri.Graphic(g[d][f],e.symbol,e.attributes,e.infoTemplate))}return b};return b}(d.framework.application.ModuleBase);f.EditingModule=i})(f.editing||(f.editing={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.attach=function(a){var g=this;d.prototype.attach.call(this,a);this.isBusy.sync(a.isBusy);this.title.syncTransform(a.headerText,function(a){return String.unescapeHtml(a)});this.app.event("ApplicationOfflineEvent").subscribe(this,this.cancelEditing);this.app.event("ApplicationOnlineEvent").subscribe(this,this.cancelEditing);this.app.event("FeatureDeletedEvent").subscribe(this,
this._onFeatureDeletedEvent);this.app.event("RelatedRecordDeletedEvent").subscribe(this,this._onRelatedRecordDeletedEvent);this.app.event("GeometryEditCompletedEvent").subscribe(this,this._onGeometryEditCompletedEvent);this.app.command("ShowFeatureAttributeEditor").register(this,function(){g._activateView()});this.app.command("HideFeatureAttributeEditor").register(this,function(){g.isActive&&g._deactivateView();return false})};b.prototype.deactivated=function(){d.prototype.deactivated.call(this);
this.viewModel.cancelEditing()};b.prototype.handleTypeFieldChange=function(a,g,b){this.viewModel.handleTypeFieldSelected(b)};b.prototype.handleClickEditGeometry=function(){if(this.viewModel.isEditingGeometry.get()){this.viewModel.stopEditingGeometry();var a=new e.infrastructure.Feature({graphic:this.viewModel.currentFeatureEsriClone});this.app.behavior("EditorFeatureSelectedBehavior").run(a)}else this.viewModel.startEditingGeometry(),this.app.behavior("EditorRemoveFeatureSelectedBehavior").run();
return false};b.prototype.handleClickDeleteFeature=function(){this.viewModel.state===4&&this.viewModel.stopEditingGeometry();this.viewModel.confirmDelete();return false};b.prototype.handleClickSave=function(){var a=this;this.viewModel.state===4&&this.viewModel.stopEditingGeometry();this.isBusy.set(true);this.viewModel.save(function(){return a.saveSuccessCallback()},function(g){return a.saveErrorCallback(g)});return false};b.prototype.saveSuccessCallback=function(){this._deactivateView()};b.prototype.saveErrorCallback=
function(){};b.prototype.cancelEditing=function(){this.viewModel.cancelEditing();this.isActive&&this._deactivateView()};b.prototype._activateView=function(){this.app.command("ActivateView").execute(this.id)};b.prototype._deactivateView=function(a){a===void 0&&(a=true);this.app.command("DeactivateView").execute(this.id);a&&this.app.event("_internalEvent.EditorViewDeactivated").publish(this.viewModel.currentFeatureEsri)};b.prototype._onFeatureDeletedEvent=function(a){this.viewModel&&this.viewModel.currentFeatureEsri&&
this.viewModel.currentFeatureEsri===a&&(this._deactivateView(false),this.viewModel.currentFeatureEsriClone.hide())};b.prototype._onRelatedRecordDeletedEvent=function(){this._deactivateView()};b.prototype._onGeometryEditCompletedEvent=function(a){var g=null,g=a.cancelled?new e.infrastructure.Feature({graphic:a.editedGraphic}):new e.infrastructure.Feature({graphic:a.originalGraphic});this.app.behavior("EditorFeatureSelectedBehavior").run(g)};b.prototype.handleClickCancel=function(){this.cancelEditing();
return false};return b}(d.framework.ui.ViewBase);f.EditorView=i})(f.editing||(f.editing={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,g){var b=this;e.call(this,a,g);this.app.command("ShowFeatureTemplatePicker").register(this,this._onShowFeatureTemplatePicker,this._canShowFeatureTemplatePicker);this.app.command("HideFeatureTemplatePicker").register(this,function(){b.isActive&&b.app.viewManager.deactivateView(b)})}__extends(b,e);b.prototype._onShowFeatureTemplatePicker=function(a,g){var b=this;this.app.command("ActivateView").execute(this.id);
if(this.viewModel)if(this.app.isOffline.get()===true){var d=this;this.app.store.get("__featureLayerModuleIndex",function(b){if(b&&(b=JSON.parse(b))){d.viewModel.filteredLayers=[];for(var h in b.featureLayers){if(!b.featureLayers.hasOwnProperty(h))break;d.viewModel.filteredLayers.push(b.featureLayers[h].serviceId)}}d._loadTemplate(a,g)},function(a){b.app.trace.error("Error fetching __featureLayerModuleIndex "+a.toString())})}else{if(this.viewModel.filteredLayers)this.viewModel.filteredLayers.length=
0,this.viewModel.filteredLayers=null;this._loadTemplate(a,g)}};b.prototype._canShowFeatureTemplatePicker=function(a){return a===void 0?true:typeof a==="object"&&a instanceof d.essentials.Layer&&a.mapService&&a.mapService.serviceLayer&&a.mapService.serviceLayer.isEditable&&/Create/.test(a.mapService.serviceLayer.capabilities)?a.mapService.serviceLayer.isEditable():false};b.prototype._loadTemplate=function(a,g){a?this.viewModel.loadTemplatesForCurrentLayer(a,g):this.viewModel.loadLayerTemplates(g)};
b.prototype.handleFeatureTemplateClick=function(a,g,b){var d=this,e;if(b.proto&&b.proto.toJson&&!b.relatedFeature)e=new esri.Graphic(b.proto.toJson());else if(b.relatedFeature){if(b.proto&&b.proto.toJson){e=b.relatedFeature;for(var f in b.proto.attributes)a=b.proto.attributes[f],a!=null&&(e.attributes[f]=a)}}else if(e=new esri.Graphic(null),b.proto&&b.proto.attributes)e.attributes=b.proto.attributes;f=null;if(b.drawingTool&&b.drawingTool.get())switch(b.drawingTool.get()){case "esriFeatureEditToolPoint":f=
"MapPoint";break;case "esriFeatureEditToolLine":f="Polyline";break;case "esriFeatureEditToolFreehand":b.layer.geometryType==="esriGeometryPolyline"?f="FreehandPolyline":b.layer.geometryType==="esriGeometryPolygon"&&(f="FreehandPolygon");break;case "esriFeatureEditToolAutoCompletePolygon":case "esriFeatureEditToolPolygon":f="Polygon";break;case "esriFeatureEditToolEllipse":f="Ellipse";break;case "esriFeatureEditToolCircle":f="Circle";break;case "esriFeatureEditToolRectangle":f="Rectangle";break;default:f=
"Polygon"}if(!f)switch(b.layer.geometryType){case "esriGeometryPoint":f="MapPoint";break;default:f=b.layer.geometryType.replace("esriGeometry","")}e._drawType=f;this.app.configuration.mobileMode?(this.app.command("DisableMapClick").execute(),this.app.command("ShowMap").execute(),this.app.command("CloseDataFrame").execute(),this.app.event("DataFrameClosedEvent").once(this,function(){setTimeout(function(){d.app.command("EnableMapClick").execute();d.app.event("StartFeaturePlacementEvent").publish();
d.app.command("StartEditingNewFeature").execute(e,b.layer)},225)})):(this.app.command("ShowMap").execute(),this.app.event("StartFeaturePlacementEvent").publish(),this.app.command("StartEditingNewFeature").execute(e,b.layer))};return b}(d.framework.ui.ViewBase);e.TemplatePickerView=f})(e.editing||(e.editing={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){return function(){this.name=new Observable("");this.description=new Observable;this.proto={};this.drawingTool=new Observable;this.symbolUri=new Observable;this.symbolStyle=new Observable("");this.swatchElement=null}}();d.FeatureTemplate=e})(d.editing||(d.editing={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.layerIsEditable=new Observable(false);this.layerTemplates=new ObservableCollection}__extends(b,d);b.prototype.initialize=function(){var a=this;this.app.event("SiteServiceLayersLoadedEvent").subscribe(this,function(){return a.loadLayerTemplates()})};b.prototype._layerIsValidForEditing=function(a){if(!a)return false;var g=true;if(this.filteredLayers)for(var g=false,b=0;b<this.filteredLayers.length;b++)if(this.filteredLayers[b]===
a){g=true;break}return g};b.prototype.loadTemplatesForCurrentLayer=function(a,g){if(a&&a.mapService){this.layerTemplates.clear();var b=this._getFeatureLayerModel(a.mapService,g);b&&this.layerTemplates.addItem(b)}};b.prototype.loadLayerTemplates=function(a){var g=this.app.site;if(g&&g.essentialsMap&&g.isInitialized){g=g.getFeatureServices();this.layerTemplates.clear();for(var b=[],d=0;d<g.length;d++){var e=this._getFeatureLayerModel(g[d],a);e&&b.push(e)}this.layerTemplates.addItems(b)}};b.prototype._getFeatureLayerModel=
function(a,g){var b=a.serviceLayer;if(!this._layerIsValidForEditing(a.id))return null;if(!b.isEditable)return null;if(!b.isEditable())return null;b=a.displayName;if(a&&a.layers&&a.layers.length>0)b=a.layers[0].displayName;var d=new ObservableCollection,e=this._loadFeatureTemplates(a.serviceLayer,g);e&&e.length>0&&d.addItems(e);return{displayName:new Observable(b),mapServiceId:new Observable(a.id),layer:a.serviceLayer,templates:d,proto:null}};b.prototype.createTemplate=function(a,g,b){var d=new e.FeatureTemplate,
f=null;if(!a.renderer){var j=this.app.map.graphicsLayerIds.filter(function(g){return g===a.id+"-cluster"});j.length>0&&(f=this.app.map.getLayer(j[0]))}if(g){d.name.set(g.name);d.description.set(g.description);d.drawingTool.set(g.drawingTool);d.proto=g.prototype;if(b&&b.attributes)d.relatedFeature=b;if(a.renderer||f){b=a.renderer||f.featureLayerRenderer;if(b instanceof esri.renderer.HeatmapRenderer&&(f=this.app.site.essentialsMap.mapServices.filter(function(g){return g.serviceLayer.id===a.id})[0],
f.heatMap&&f.heatMap.defaultRenderer))b=f.heatMap.defaultRenderer;if(g=this._getTemplateSymbol(g,b))switch(g.type){case "picturemarkersymbol":d.symbolUri.set(g.url);d.swatchElement=null;break;default:d.swatchElement="<div class='simple-swatch square' style='background-color: {0}'></div>".format(g.color.toCss())}}}d.layer=a;return d};b.prototype._consumeTemplate=function(a,g,b){return this.createTemplate(a,g,b)};b.prototype._getTemplateSymbol=function(a,g){var b=new esri.Graphic(null);b.attributes=
{};a.prototype.attributes&&dojo.mixin(b.attributes,a.prototype.attributes);return g.getSymbol(b)||g.defaultSymbol};b.prototype._loadFeatureTemplates=function(a,g){if(!a||!a.templates)return null;var b=[];if(a.templates.length>0)for(var d=0;d<a.templates.length;++d)b.push(this._consumeTemplate(a,a.templates[d],g));else if(a.types&&a.types.length>0)for(d=0;d<a.types.length;++d){var e=a.types[d];if(e.templates)for(var f=0;f<e.templates.length;++f)b.push(this._consumeTemplate(a,e.templates[f],g))}return b};
return b}(d.framework.ui.ViewModelBase);e.TemplatePickerViewModel=f})(e.editing||(e.editing={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){(function(f){var k=function(a){function g(g,b,d){a.call(this,g,b,"esri.layers.ArcGISDynamicMapServiceLayer",false,!!d)}__extends(g,a);g.prototype.provide=function(a){var g=this;if((a.declaredClass!=null?a.declaredClass:null)!==this.layerType)return new d.infrastructure.legend.LegendItemProviderResponse(0,null);if(Number(a.version)<10.01)return new d.infrastructure.legend.LegendItemProviderResponse(0,null);for(var b=this.app.site,f="",
k=null,j=0;j<b.essentialsMap.mapServices.length;++j){var i=b.essentialsMap.mapServices[j];if(i.serviceLayer===a){k=i;break}}b=null;k&&(b=this._getLegendUrl(k));b==null&&(b=a.url.replace("/MapServer","/MapServer/legend"));var l=new d.infrastructure.legend.LegendItem(a,this.useThrottledCollections),j={};if(k){if(k.layers.length===0)return new d.infrastructure.legend.LegendItemProviderResponse(0,null);if(k.supportsDynamicLayers&&a.dynamicLayerInfos&&a.dynamicLayerInfos.length>0)j.dynamicLayers=this.getDynamicLayersParameterJSON(a);
f=k.displayName}else i=a.url.lastIndexOf("/"),i>-1&&(f=a.url.substr(i));l.label.set(f);l.templateType="group";j.f="json";var f=esri.request({url:b,content:j,handleAs:"json",callbackParamName:"callBack"}),p=new d.infrastructure.legend.LegendItemProviderResponse(4,l);f.then(function(b){g._handleLegendResponse(b,p,l,a,k)},function(a){g._handleLegendError(l,a)});return p};g.prototype.getDynamicLayersParameterJSON=function(a){var g=[];if(a.dynamicLayerInfos)for(var d=a.dynamicLayerInfos,e=0;e<d.length;e++)if(d[e]){var f=
new b;f.source=d[e].source.toJson();f.id=d[e].id;if(a.layerDrawingOptions&&a.layerDrawingOptions[d[e].id])f.drawingInfo=a.layerDrawingOptions[d[e].id].toJson();g.push(f)}return JSON.stringify(g)};return g}(f.ArcGISMapServiceLegendProvider);f.ArcGISDynamicMapServiceLegendProvider=k;var b=function(){return function(){}}()})(f.providers||(f.providers={}))})(f.legend||(f.legend={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||
(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){(function(f){var k=function(){function b(a,g,b){this.app=a;this.libraryId=g;this.mapServiceLegends={};this.useThrottledCollections=!!b}b.prototype.supportsOffline=function(){return true};b.prototype.provide=function(a){if((a.declaredClass!=null?a.declaredClass:null)!=="esri.layers.FeatureLayer")return new d.infrastructure.legend.LegendItemProviderResponse(0,null);for(var g=this.app.site,b=0;b<g.essentialsMap.mapServices.length;b++){var f=g.essentialsMap.mapServices[b];
if(f.serviceLayer instanceof esri.layers.KMLLayer)for(var f=f.serviceLayer.getLayers(),k=0;k<f.length;k++){if(f[k]===a)return new d.infrastructure.legend.LegendItemProviderResponse(0,null)}else if(f.serviceLayer===a)if(f.heatMap&&f.heatMap.enabled&&Modernizr.canvas)return new d.infrastructure.legend.LegendItemProviderResponse(0,null);else if(f.featureClustering&&f.featureClustering.enabled)return new d.infrastructure.legend.LegendItemProviderResponse(0,null)}f=new d.infrastructure.legend.LegendItem(a,
this.useThrottledCollections);g=g.getFeatureServices();k=null;for(b=0;b<g.length;++b){var j=g[b];if(j.serviceLayer===a){k=j;break}}if(k){f.label.set(k.displayName);for(b=0;b<k.layers.length;++b){var i=k.layers[b];i.includeInLegend&&this.populateItemForLayer(f,i,a,null)}}else f.label.set(a.name),this.populateItemForLayer(f,i,a,null);return f&&f.children&&f.children.length()?new d.infrastructure.legend.LegendItemProviderResponse(2,f):new d.infrastructure.legend.LegendItemProviderResponse(3,f)};b.prototype._buildLegendItemForTemplate=
function(a,g,b){var f;f=new d.infrastructure.legend.LegendItem(g,this.useThrottledCollections);f.essLayer=a;f.label.set(b.name);g.renderer&&(a=this._getTemplateSymbol(b,g.renderer))&&this._populateSwatchElement(f,a);return f};b.prototype._buildLegendItemFromSimpleRenderer=function(a,g,b){var f;f=new d.infrastructure.legend.LegendItem(g,this.useThrottledCollections);f.essLayer=a;f.label.set(a&&a.displayName?a.displayName:g.name);b.symbol&&this._populateSwatchElement(f,b.symbol);return f};b.prototype._buildLegendItemFromRendererInfo=
function(a,g,b){g=new d.infrastructure.legend.LegendItem(g,this.useThrottledCollections);g.essLayer=a;g.label.set(b.label);b.symbol&&this._populateSwatchElement(g,b.symbol);return g};b.prototype._populateSwatchElement=function(a,g){if(g&&g.type&&a){var b=g.color&&(!g.color.hasOwnProperty("a")||g.color.hasOwnProperty("a")&&g.color.a!==0)?g.color.toCss():"rgb(255,255,255)";switch(g.type){case "picturefillsymbol":case "picturemarkersymbol":a.swatchElement="<img src='{0}' alt='' />".format(g.url);break;
case "simplefillsymbol":case "simplemarkersymbol":var d="rgb(255,255,255)";if(g.type==="simplemarkersymbol"||g.style===esri.symbol.SimpleFillSymbol.STYLE_SOLID)d=b;b=g.outline&&g.outline.color?g.outline.color.toCss():d;a.swatchElement="<div class='simple-swatch square' style='background-color: {0}; border-color: {1};'></div>".format(d,b);break;case "simplelinesymbol":a.swatchElement="<div class='simple-swatch line' style='color: {0};'></div>".format(b);break;default:a.swatchElement="<div class='simple-swatch square' style='background-color: {0}; border-color: {1};'></div>".format(b,
b)}}};b.prototype._getTemplateSymbol=function(a,g){var b=new esri.Graphic(null);b.attributes={};a.prototype.attributes&&dojo.mixin(b.attributes,a.prototype.attributes);return g.getSymbol(b)};b.prototype.populateItemForLayer=function(a,g,b){var d=[];a.essLayer=g;if(b.renderer&&b.renderer instanceof esri.renderer.UniqueValueRenderer&&b.renderer.infos&&b.renderer.infos.length)for(var e=0;e<b.renderer.infos.length;++e)d.push(this._buildLegendItemFromRendererInfo(g,b,b.renderer.infos[e]));else if(b.templates&&
b.templates.length>0)for(e=0;e<b.templates.length;++e)d.push(this._buildLegendItemForTemplate(g,b,b.templates[e]));else if(b.types&&b.types.length>0)for(e=0;e<b.types.length;++e){var f=b.types[e];if(f.templates)for(var k=0;k<f.templates.length;++k)d.push(this._buildLegendItemForTemplate(g,b,f.templates[k]))}else b.renderer&&b.renderer instanceof esri.renderer.SimpleRenderer&&b.renderer.symbol&&d.push(this._buildLegendItemFromSimpleRenderer(g,b,b.renderer));a.children.addItems(d);if(a.children.getLength()>
0)a.templateType="group"};b.prototype._handleLegendError=function(a,g){this.app.trace.warning("Error fetching legend information: "+g.toString())};return b}();f.FeatureLayerLegendProvider=k})(f.providers||(f.providers={}))})(f.legend||(f.legend={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){(function(f){var k=function(){function b(a,g,b){this.app=a;this.libraryId=g;this.useThrottledCollections=!!b}b.prototype.supportsOffline=function(){return false};b.prototype.provide=function(a){if((a.declaredClass!=null?a.declaredClass:null)!=="esri.layers.WMSLayer")return new d.infrastructure.legend.LegendItemProviderResponse(0,null);for(var g=new d.infrastructure.legend.LegendItem(a,this.useThrottledCollections),b=this.app.site,f=
"",k=null,j=0;j<b.essentialsMap.mapServices.length;++j)if(f=b.essentialsMap.mapServices[j],f.serviceLayer===a){k=f;break}if(k){f=k.displayName;b=[];for(j=0;j<k.layers.length;++j){var i=k.layers[j];if(i.includeInLegend&&i.legendUrl){var l=new d.infrastructure.legend.LegendItem(a,this.useThrottledCollections);l.essLayer=i;l.swatchElement="<img src='{0}' alt='' class='wms-legend-swatch'/>".format(i.legendUrl);var m=new d.infrastructure.legend.LegendItem(a,this.useThrottledCollections);m.label.set(i.displayName);
m.templateType="group";m.children.addItem(l);b.push(m)}}if(b.length>0)g.children.addItems(b);else return new d.infrastructure.legend.LegendItemProviderResponse(3,g)}else return new d.infrastructure.legend.LegendItemProviderResponse(0,null);g.label.set(f);if(g.children.getLength()>0)g.templateType="group";return new d.infrastructure.legend.LegendItemProviderResponse(2,g)};return b}();f.WMSLayerLegendProvider=k})(f.providers||(f.providers={}))})(f.legend||(f.legend={}))})(d.modules||(d.modules={}))})(d.mapping||
(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(){return function(){}}();f.LegendItemViewModel=i;i=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.initialize=function(a){this.enableThrottling=a&&a.enableThrottling!=void 0?a.enableThrottling:true;e.infrastructure.legend.LegendItemProviderFactory.registerLegendItemProvider(new f.providers.ArcGISDynamicMapServiceLegendProvider(this.app,this.libraryId,this.enableThrottling));e.infrastructure.legend.LegendItemProviderFactory.registerLegendItemProvider(new f.providers.ArcGISTiledMapServiceLegendProvider(this.app,
this.libraryId,this.enableThrottling));e.infrastructure.legend.LegendItemProviderFactory.registerLegendItemProvider(new f.providers.FeatureLayerLegendProvider(this.app,this.libraryId,this.enableThrottling));e.infrastructure.legend.LegendItemProviderFactory.registerLegendItemProvider(new f.providers.KMLLayerLegendProvider(this.app,this.libraryId,this.enableThrottling));e.infrastructure.legend.LegendItemProviderFactory.registerLegendItemProvider(new f.providers.WMSLayerLegendProvider(this.app,this.libraryId,
this.enableThrottling));e.infrastructure.legend.LegendItemProviderFactory.registerLegendItemProvider(new f.providers.HeatMapLayerLegendProvider(this.app,this.libraryId,this.enableThrottling));e.infrastructure.legend.LegendItemProviderFactory.registerLegendItemProvider(new f.providers.ClusterLayerLegendProvider(this.app,this.libraryId,this.enableThrottling))};return b}(d.framework.application.ModuleBase);f.LegendModule=i})(f.legend||(f.legend={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping=
{}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,g){d.call(this,a,g);this.registerCommands()}__extends(b,d);b.prototype.registerCommands=function(){var a=this;this.app.command("SwitchToLegendView").register(this,function(){a.app.command("ActivateView").execute(a.id)})};b.prototype.resolveWidget=function(a,g,b){d.prototype.resolveWidget.call(this,a,g);switch(a){case "LegendActionsWidget":return this.app.menuRegistry.createMenuWidget(this,g,b);default:return this.app.trace.warning("LegendView: Unknown Widget"),
null}};b.prototype.activated=function(){this.viewModel.viewActive.set(true)};b.prototype.deactivated=function(){this.viewModel.viewActive.set(false)};b.prototype.handleSlideToggleClick=function(a,g,b){b.expanded.set(!b.expanded.get())};b.prototype.handleClickShowLayerList=function(){this.app.command("SwitchToLayerView").execute()};return b}(d.framework.ui.ViewBase);e.LegendView=f})(e.legend||(e.legend={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(d){function b(){d.apply(this,arguments);this.viewActive=new Observable(false);this.extentChangedBindingToken=null;this._namePositionDictionary={}}__extends(b,d);b.prototype.initialize=function(){var a=this;this.rootNode=new e.infrastructure.legend.LegendItem(null);this._topLevelItems=[];this.hasVisibleItems=new Observable(false);if(this.app.site&&this.app.site.isInitialized)this._handleInitializedSite(this.app.isOffline.get());else this.app.event("SiteInitializedEvent").once(this,
function(){return a._handleInitializedSite(a.app.isOffline.get())});this.app.event("MapServiceAddedEvent").subscribe(this,this._handleMapServiceAddedEvent);this.app.event("MapServicePropertyChangedEvent").subscribe(this,this._handleMapServiceAddedEvent);this.app.event("MapServiceLayersChangedEvent").subscribe(this,this._handleMapServiceAddedEvent);this.app.event("MapServiceRemovedEvent").subscribe(this,this._handleMapServiceRemovedEvent);this.app.event("MapExtentChangedEvent").subscribe(this,this._handleMapExtentChangedEvent);
this.app.event("LayerVisualizationChangedEvent").subscribe(this,this._handleLayerVisualizationChanged);this.app.isOffline.bind(this,function(g){try{a._clear(),a._handleInitializedSite(g),setTimeout(function(){a._handleMapExtentChangedEvent()},100)}catch(b){a.app.trace.warning("Legend error while transitioning between online/offline modes: "+b)}})};b.prototype._handleLayerVisualizationChanged=function(a){var g=this;setTimeout(function(){g._handleMapServiceAddedEvent(a.mapService);g._removeClusteredLegendItems()},
500)};b.prototype._handleMapServiceAddedEvent=function(a){if(a){a=a.serviceLayer;try{this._handleLayerAddition(a,this.app.isOffline.get())}catch(g){this.app.trace.warning("Error loading legend items for layer '{0}': {1}".format(a.url,g.toString()))}}};b.prototype._handleMapServiceRemovedEvent=function(a){if(a)for(var a=a.serviceLayer,g=0;g<this.rootNode.children.get().length;g++)a===this.rootNode.children.get()[g].esriLayer&&(this.rootNode.children.removeAt(g),this._topLevelItems.splice(g,1))};b.prototype._clear=
function(){this._onLayerAddConnectHandle&&this._onLayerAddConnectHandle.remove();this._onLayerRemoveHandle&&this._onLayerRemoveHandle.remove();this._onLayerVisibilityChangeOnHandle&&this._onLayerVisibilityChangeOnHandle.remove();this._layerVisEventSubscribeHandle&&this.app.event("LayerVisibilityChangedEvent").unsubscribe(this._layerVisEventSubscribeHandle);this._topLevelItems=[];this.hasVisibleItems.set(false)};b.prototype._handleInitializedSite=function(a){var g=this;this._map=this.app.map;for(var b=
{},d=0;d<this._map.layerIds.length;++d){var e=this._map.getLayer(this._map.layerIds[d]);if(e){b[e.url]=e;try{this._handleLayerAddition(e,a)}catch(f){this.app.trace.warning("Error loading legend items for layer '{0}': {1}".format(e.url,f.toString()))}}}this._onLayerAddConnectHandle=this._map.on("layer-add",function(d){g._onLayerVisibilityChangeOnHandle=d.layer.on("visibility-change",dojo.hitch(g,g._handleMapExtentChangedEvent));if(!b[d.layer.url])try{g._handleLayerAddition(d.layer,a)}catch(e){g.app.trace.warning("Error loading legend items for layer '{0}': {1}".format(d.layer.url,
e.toString()))}});this._onLayerRemoveHandle=this._map.on("layer-remove",function(b){g._handleLayerRemoval(b.layer,a)});this._layerVisEventSubscribeHandle=this.app.event("LayerVisibilityChangedEvent").subscribe(this,this._handleMapExtentChangedEvent)};b.prototype._handleMapExtentChangedEvent=function(){var a=this;if(this.viewActive.get())try{this._handleMapExtentChangedEventImpl()}catch(g){}else if(!this.extentChangedBindingToken)this.extentChangedBindingToken=this.viewActive.bind(this,function(){a.viewActive.unbind(a.extentChangedBindingToken);
a.extentChangedBindingToken=null;a._handleMapExtentChangedEventImpl()})};b.prototype._handleMapExtentChangedEventImpl=function(){for(var a=this.app.map.getScale(),g=0,b=false,d=0;d<this._topLevelItems.length;++d){var e=this._topLevelItems[d];if(e&&(g+=this._walkLegendTree(a,e),e.isVisible.get()&&(e.templateType!=="group"||e.templateType==="group"&&e.children.length())))b=true}this._removeClusteredLegendItems();b!==this.hasVisibleItems.get()&&this.hasVisibleItems.set(b)};b.prototype._isVisibleInTree=
function(a){if(a&&!a.isVisible())return true;else if(a){if(a.parentLayerId==null)return false;if(a=a.mapService.findLayerById(a.parentLayerId))return this._isVisibleInTree(a)}return false};b.prototype._walkLegendTree=function(a,g){if(g.essLayer&&this._isVisibleInTree(g.essLayer))return this._hideLegendItem(g),0;else if(!g.essLayer&&!g.esriLayer.visible)return this._hideLegendItem(g),0;else if(g.isCluster)return 1;for(var b=0,d=g.children.getLength()>0,e=0;e<g.children.getLength();++e)b+=this._walkLegendTree(a,
g.children.getAt(e));var e=Number.POSITIVE_INFINITY,f=0,e=g.essLayer?g.essLayer.minScale:g.esriLayer.minScale,f=g.essLayer?g.essLayer.maxScale:g.esriLayer.maxScale,k=false;e===0&&f===0?k=true:a>=f&&a<=e&&(k=true);(k=k&&(g.essLayer?g.essLayer.isVisible():g.esriLayer.visible))?d&&b===0?this._hideLegendItem(g):this._showLegendItem(g):this._hideLegendItem(g);return!k||b===0&&g.children.getLength()>0?0:b+(d?0:1)};b.prototype._hideLegendItem=function(a){a.isVisible.get()===true&&a.isVisible.set(false)};
b.prototype._showLegendItem=function(a){a.isVisible.get()===false&&a.isVisible.set(true)};b.prototype._handleLayerAddition=function(a,g){var b=this._getProvider(a,g);if(b){var d=b.item;if(b.code.get()===2||b.code.get()===4)this._replaceDuplicate(d)||this._addTopLevelItem(d);else if(b.code.get()===3){for(b=0;b<this.rootNode.children.length();b++)if(this.rootNode.children.getAt(b).esriLayer===d.esriLayer){this.rootNode.children.removeAt(b);break}for(b=0;b<this._topLevelItems.length;b++)if(this._topLevelItems[b]&&
this._topLevelItems[b].esriLayer===d.esriLayer){this._topLevelItems.splice(b,1);break}}}};b.prototype._handleLayerRemoval=function(a,g){var b=this._getProvider(a,g);if(b){for(var b=b.item,d=0;d<this.rootNode.children.length();d++)if(this.rootNode.children.getAt(d).esriLayer===b.esriLayer){if(b.esriLayer instanceof esri.layers.FeatureLayer){var e=b.esriLayer.name;if(!this._namePositionDictionary.hasOwnProperty(e)||this._namePositionDictionary[e]>d)this._namePositionDictionary[e]=d}this.rootNode.children.removeAt(d);
break}for(d=0;d<this._topLevelItems.length;d++)if(this._topLevelItems[d]&&this._topLevelItems[d].esriLayer===b.esriLayer){this._topLevelItems.splice(d,1);break}}};b.prototype._getProvider=function(a,g){for(var b=e.infrastructure.legend.LegendItemProviderFactory.getProviders(),d=0;d<b.length;++d){var f=b[d];if(!g||f.supportsOffline()){var k;try{k=f.provide(a)}catch(j){this.app.trace.warning("Error building legend: "+j);continue}if(k&&k.code.get()!==0)return k}}return null};b.prototype._replaceDuplicate=
function(a){for(var g=0;g<this.rootNode.children.get().length;g++)if(a.esriLayer===this.rootNode.children.get()[g].esriLayer)return this.rootNode.children.removeAt(g),this.rootNode.children.insertItem(g,a),this._topLevelItems[g]=a,true;return false};b.prototype._addTopLevelItem=function(a){var g=0;if(a.esriLayer instanceof esri.layers.FeatureLayer){var b=a.esriLayer.name;b&&this._namePositionDictionary.hasOwnProperty(b)&&(g=this._namePositionDictionary[b])}this.rootNode.children.insertItem(g,a);this._topLevelItems.unshift(a)};
b.prototype._removeClusteredLegendItems=function(){for(var a=0;a<this._topLevelItems.length;++a){var g=this._topLevelItems[a];g&&g.esriLayer instanceof esri.layers.FeatureLayer&&g.esriLayer.renderer===null&&g.isVisible.set(false)}};return b}(d.framework.ui.ViewModelBase);f.LegendViewModel=i})(f.legend||(f.legend={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.POINT="point";b.MULTIPOINT="multipoint";b.POLYLINE="polyline";b.POLYGON="polygon";b.POLYGON_FILL="polygonFill";b.POLYGON_BORDER="polygonBorder";b.TEXT="text";b.TEXT_WEIGHT="textWeight";return b}(d.framework.application.ModuleBase);e.MarkupModule=f})(e.markup||(e.markup={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){(function(f){var k=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.attach=function(a){b.prototype.attach.call(this,a);this.title.set(this.app.getResource(this.libraryId,"language-toolbar-markup-change-styles-dialog-title"));this.app.command("InitializePolylineSwatches").register(this,this.createLineSwatches);this.app.event("InitializeMarkupSwatches").publish("polyline");$(this.root).find("svg").attr("focusable","false")};
a.prototype.createLineSwatches=function(a){for(var b=$(".markup-swatch",this.root),d=0;d<b.length;d++){b[d].id="polyline"+d.toString();b[d].onclick=dojo.hitch(this,this.handleClickStyle);var e=null;switch(a[d].style){case "Solid":e={style:"Solid",width:a[d].width,cap:"round",color:a[d].color};break;case "Dash":e={style:"Dash",width:a[d].width,cap:"round",color:a[d].color};break;case "Dash Dot":e={style:"DashDot",width:a[d].width,cap:"round",color:a[d].color};break;case "Dash Dot Dot":e={style:"LongDashDotDot",
width:a[d].width,cap:"round",color:a[d].color};break;case "Dot":e={style:"Dot",width:a[d].width,cap:"round",color:a[d].color}}dojox.gfx.createSurface(b[d],30,30).createPolyline([{x:0,y:15},{x:30,y:15}]).setStroke(e)}};a.prototype.handleClickStyle=function(a){a=f.StyleSelectorUtils.getIdNumber(a||window.event);this.app.command("ChangeMarkupStyleFromId").execute("polyline",a);this.app.command("DeactivateView").execute(this.id);e.infrastructure.FocusUtils.focusOnMap(this.app.map)};a.prototype.handleClickCancel=
function(){this.app.command("DeactivateView").execute(this.id)};return a}(d.framework.ui.ViewBase);f.StyleSelectorLineView=k})(f.styleSelector||(f.styleSelector={}))})(f.markup||(f.markup={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){(function(f){var k=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.attach=function(a){b.prototype.attach.call(this,a);this.title.set(this.app.getResource(this.libraryId,"language-toolbar-markup-change-styles-dialog-title"));this.app.command("InitializePointSwatches").register(this,this.createPointSwatches);this.app.event("InitializeMarkupSwatches").publish("point");$(this.root).find("svg").attr("focusable",
"false")};a.prototype.createPointSwatches=function(a){for(var b=$(".markup-swatch",this.root),d=0;d<b.length;d++)switch(b[d].id="point"+d.toString(),b[d].onclick=dojo.hitch(this,this.handleClickStyle),a[d].style){case "Circle":var e=dojox.gfx.createSurface(b[d],a[d].size*1.2,a[d].size*1.2);e.createCircle({cx:a[d].size/2,cy:a[d].size/2,r:a[d].size/2}).setFill(a[d].color);break;case "Diamond":var f=a[d].size;f/=Math.sqrt(2);e=dojox.gfx.createSurface(b[d],f*Math.sqrt(2),f*Math.sqrt(2));e.createRect({x:f*
Math.sqrt(2)/2-f/2,y:f*Math.sqrt(2)/2-f/2,width:f,height:f}).setFill(a[d].color).setTransform([dojox.gfx.matrix.rotategAt(45,f*Math.sqrt(2)/2,f*Math.sqrt(2)/2)]);break;case "Square":e=dojox.gfx.createSurface(b[d],a[d].size,a[d].size),e.createRect({x:0,y:0,width:a[d].size,height:a[d].size}).setFill(a[d].color)}};a.prototype.handleClickStyle=function(a){a=f.StyleSelectorUtils.getIdNumber(a||window.event);this.app.command("ChangeMarkupStyleFromId").execute("point",a);this.app.command("DeactivateView").execute(this.id);
e.infrastructure.FocusUtils.focusOnMap(this.app.map)};a.prototype.handleClickCancel=function(){this.app.command("DeactivateView").execute(this.id)};return a}(d.framework.ui.ViewBase);f.StyleSelectorPointView=k})(f.styleSelector||(f.styleSelector={}))})(f.markup||(f.markup={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){(function(f){var k=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.attach=function(a){b.prototype.attach.call(this,a);this.title.set(this.app.getResource(this.libraryId,"language-toolbar-markup-change-styles-dialog-title"));this.app.command("InitializePolygonSwatches").register(this,this.createPolygonSwatches);this.app.event("InitializeMarkupSwatches").publish("polygon");$(this.root).find("svg").attr("focusable",
"false")};a.prototype.createPolygonSwatches=function(a){for(var b=$(".markup-swatch",this.root),d=0;d<b.length;d++){b[d].id="polygon"+d.toString();b[d].onclick=dojo.hitch(this,this.handleClickStyle);var e=null;switch(a[d].borderStyle){case "Solid":e={style:"Solid",width:a[d].borderWidth,cap:"round",color:a[d].borderColor};break;case "Dash":e={style:"Dash",width:a[d].borderWidth,cap:"round",color:a[d].borderColor};break;case "Dash Dot":e={style:"DashDot",width:a[d].borderWidth,cap:"round",color:a[d].borderColor};
break;case "Dash Dot Dot":e={style:"LongDashDotDot",width:a[d].borderWidth,cap:"round",color:a[d].borderColor};break;case "Dot":e={style:"Dot",width:a[d].borderWidth,cap:"round",color:a[d].borderColor}}var f=null;switch(a[d].fillStyle){case "Solid":f=a[d].fillColor;break;case "Cross":f={type:"pattern",height:24,width:24,src:"Resources/Images/Markup/cross-24.png"};break;case "Diagonal Cross":f={type:"pattern",height:24,width:24,src:"Resources/Images/Markup/diagonal-cross-24.png"};break;case "Vertical":f=
{type:"pattern",height:24,width:24,src:"Resources/Images/Markup/vertical-24.png"};break;case "Horizontal":f={type:"pattern",height:24,width:24,src:"Resources/Images/Markup/horizontal-24.png"};break;case "Forward Diagonal":f={type:"pattern",height:12,width:12,src:"Resources/Images/Markup/forward-diagonal-12.png"};break;case "Backward Diagonal":f={type:"pattern",height:12,width:12,src:"Resources/Images/Markup/backward-diagonal-12.png"}}dojox.gfx.createSurface(b[d],30,30).createPolyline([{x:0,y:0},{x:30,
y:15},{x:30,y:30},{x:0,y:30},{x:0,y:0}]).setFill(f).setStroke(e)}};a.prototype.handleClickStyle=function(a){a=f.StyleSelectorUtils.getIdNumber(a||window.event);this.app.command("ChangeMarkupStyleFromId").execute("polygon",a);this.app.command("DeactivateView").execute(this.id);e.infrastructure.FocusUtils.focusOnMap(this.app.map)};a.prototype.handleClickCancel=function(){this.app.command("DeactivateView").execute(this.id)};return a}(d.framework.ui.ViewBase);f.StyleSelectorPolygonView=k})(f.styleSelector||
(f.styleSelector={}))})(f.markup||(f.markup={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){(function(f){var k=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.attach=function(a){b.prototype.attach.call(this,a);this.title.set(this.app.getResource(this.libraryId,"language-toolbar-markup-change-styles-dialog-title"));this.app.command("InitializeTextSwatches").register(this,this.createTextSwatches);this.app.event("InitializeMarkupSwatches").publish("text");$(this.root).find("svg").attr("focusable","false")};
a.prototype.createTextSwatches=function(a){for(var b=$(".markup-swatch",this.root),d=0;d<b.length;d++){b[d].id="text"+d.toString();b[d].onclick=dojo.hitch(this,this.handleClickStyle);var e={family:a[d].textFamily,style:a[d].style,weight:a[d].weight,size:a[d].size},f=a[d].color,k=parseInt(a[d].size.replace(/[^\d.]/g,""));dojox.gfx.createSurface(b[d],3*k,k*1.2).createText({x:0,y:k,text:"ABC",style:"italic",align:"start"}).setFont(e).setFill(f)}};a.prototype.handleClickStyle=function(a){a=f.StyleSelectorUtils.getIdNumber(a||
window.event);this.app.command("ChangeMarkupStyleFromId").execute("text",a);this.app.command("DeactivateView").execute(this.id);e.infrastructure.FocusUtils.focusOnMap(this.app.map)};a.prototype.handleClickCancel=function(){this.app.command("DeactivateView").execute(this.id)};return a}(d.framework.ui.ViewBase);f.StyleSelectorTextView=k})(f.styleSelector||(f.styleSelector={}))})(f.markup||(f.markup={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){(function(i){var j=function(b){function a(a,d){b.call(this,a,d);this.defaultPointStyles=[["point","#FF4CA0D8","Circle",16],["point","#FF2DB459","Circle",16],["point","#FF9B82BC","Circle",16],["point","#FFDB5A5A","Circle",16],["point","#FFF37521","Circle",16],["point","#FFFDF068","Circle",16],["point","#FF4CA0D8","Square",16],["point","#FF2DB459","Square",16],["point","#FF9B82BC","Square",16],["point","#FFDB5A5A","Square",16],["point",
"#FFF37521","Square",16],["point","#FFFDF068","Square",16],["point","#FF4CA0D8","Diamond",16],["point","#FF2DB459","Diamond",16],["point","#FF9B82BC","Diamond",16],["point","#FFDB5A5A","Diamond",16],["point","#FFF37521","Diamond",16],["point","#FFFDF068","Diamond",16]];this.defaultLineStyles=[["polyline","#FF4CA0D8","Dash",3],["polyline","#FF2DB459","Dash",3],["polyline","#FF9B82BC","Dash",3],["polyline","#FFDB5A5A","Dash",3],["polyline","#FFF37521","Dash",3],["polyline","#FFFDF068","Dash",3],["polyline",
"#FF4CA0D8","Solid",3],["polyline","#FF2DB459","Solid",3],["polyline","#FF9B82BC","Solid",3],["polyline","#FFDB5A5A","Solid",3],["polyline","#FFF37521","Solid",3],["polyline","#FFFDF068","Solid",3],["polyline","#FF4CA0D8","Dot",3],["polyline","#FF2DB459","Dot",3],["polyline","#FF9B82BC","Dot",3],["polyline","#FFDB5A5A","Dot",3],["polyline","#FFF37521","Dot",3],["polyline","#FFFDF068","Dot",3]];this.defaultPolygonStyles=[["polygon","#FF4CA0D8","#4D4CA0D8","Solid","Solid",3],["polygon","#FF2DB459",
"#4D2DB459","Solid","Solid",3],["polygon","#FF9B82BC","#4D9B82BC","Solid","Solid",3],["polygon","#FFDB5A5A","#4DDB5A5A","Solid","Solid",3],["polygon","#FFF37521","#4DF37521","Solid","Solid",3],["polygon","#FFFDF068","#4DFDF068","Solid","Solid",3],["polygon","#FF4CA0D8","#4D4CA0D8","Dash Dot","Solid",3],["polygon","#FF2DB459","#4D2DB459","Dash Dot","Solid",3],["polygon","#FF9B82BC","#4D9B82BC","Dash Dot","Solid",3],["polygon","#FFDB5A5A","#4DDB5A5A","Dash Dot","Solid",3],["polygon","#FFF37521","#4DF37521",
"Dash Dot","Solid",3],["polygon","#FFFDF068","#4DFDF068","Dash Dot","Solid",3],["polygon","#FF4CA0D8","#4D4CA0D8","Dot","Solid",3],["polygon","#FF2DB459","#4D2DB459","Dot","Solid",3],["polygon","#FF9B82BC","#4D9B82BC","Dot","Solid",3],["polygon","#FFDB5A5A","#4DDB5A5A","Dot","Solid",3],["polygon","#FFF37521","#4DF37521","Dot","Solid",3],["polygon","#FFFDF068","#4DFDF068","Dot","Solid",3]];this.defaultTextStyles=["text,#FF000000,Normal,Normal,12pt,Arial".split(","),"text,#FF000000,Normal,Normal,14pt,Arial".split(","),
"text,#FF000000,Normal,Normal,18pt,Arial".split(","),"text,#FFCCCCCC,Normal,Normal,12pt,Arial".split(","),"text,#FFCCCCCC,Normal,Normal,14pt,Arial".split(","),"text,#FFCCCCCC,Normal,Normal,18pt,Arial".split(",")];this.pointStyles=new ObservableCollection;this.lineStyles=new ObservableCollection;this.polygonStyles=new ObservableCollection;this.textStyles=new ObservableCollection;this.app.event("InitializeMarkupSwatches").subscribe(this,this.handleInitializeMarkupSwatches);this.app.command("ChangeMarkupStyleFromId").register(this,
this.executeChangeMarkupFromId)}__extends(a,b);a.prototype.initialize=function(a){a.customPointStyles.length>0?this.initializePointStyles(a.customPointStyles):this.initializePointStyles(this.defaultPointStyles);a.customLineStyles.length>0?this.initializeLineStyles(a.customLineStyles):this.initializeLineStyles(this.defaultLineStyles);a.customPolygonStyles.length>0?this.initializePolygonStyles(a.customPolygonStyles):this.initializePolygonStyles(this.defaultPolygonStyles);a.customTextStyles.length>0?
this.initializeTextStyles(a.customTextStyles):this.initializeTextStyles(this.defaultTextStyles)};a.prototype.handleInitializeMarkupSwatches=function(a){switch(a){case f.MarkupModule.POLYGON:this.app.command("InitializePolygonSwatches").execute(this.polygonStyles.get());break;case f.MarkupModule.POLYLINE:this.app.command("InitializePolylineSwatches").execute(this.lineStyles.get());break;case f.MarkupModule.POINT:this.app.command("InitializePointSwatches").execute(this.pointStyles.get());break;case f.MarkupModule.TEXT:this.app.command("InitializeTextSwatches").execute(this.textStyles.get())}};
a.prototype.initializePointStyles=function(a){for(var b=0;b<a.length;b++)a[b].length!=4?this.app.trace.warning("Point Style "+(b+1)+" in the style selector has an incorrect number of elements."):this.pointStyles.addItem({type:a[b][0],color:e.infrastructure.ColorUtils.getColorFromString(a[b][1]).toRgba(),style:a[b][2],size:a[b][3]})};a.prototype.initializeLineStyles=function(a){for(var b=0;b<a.length;b++)a[b].length!=4?this.app.trace.warning("Line Style "+(b+1)+" in the style selector has an incorrect number of elements."):
this.lineStyles.addItem({type:a[b][0],color:e.infrastructure.ColorUtils.getColorFromString(a[b][1]).toRgba(),style:a[b][2],width:a[b][3]})};a.prototype.initializePolygonStyles=function(a){for(var b=0;b<a.length;b++)a[b].length!=6?this.app.trace.warning("Polygon Style "+(b+1)+" in the style selector has an incorrect number of elements."):this.polygonStyles.addItem({type:a[b][0],borderColor:e.infrastructure.ColorUtils.getColorFromString(a[b][1]).toRgba(),fillColor:e.infrastructure.ColorUtils.getColorFromString(a[b][2]).toRgba(),
borderStyle:a[b][3],fillStyle:a[b][4],borderWidth:a[b][5]})};a.prototype.initializeTextStyles=function(a){for(var b=0;b<a.length;b++)a[b].length!=6?this.app.trace.warning("Text Style "+(b+1)+" in the style selector has an incorrect number of elements."):this.textStyles.addItem({type:a[b][0],color:e.infrastructure.ColorUtils.getColorFromString(a[b][1]).toRgba(),style:a[b][2],weight:a[b][3],size:a[b][4],textFamily:a[b][5]})};a.prototype.executeChangeMarkupFromId=function(a,b){var d=null;switch(a){case f.MarkupModule.POINT:d=
this.pointStyles.getAt(b);d={type:d.type,style:d.style,size:d.size,color:d.color};this.app.command("ChangeMarkupStyle").execute(d);break;case f.MarkupModule.POLYLINE:d=this.lineStyles.getAt(b);d={type:d.type,style:d.style,width:d.width,color:d.color};this.app.command("ChangeMarkupStyle").execute(d);break;case f.MarkupModule.POLYGON:d=this.polygonStyles.getAt(b);d={type:d.type,borderStyle:d.borderStyle,fillStyle:d.fillStyle,borderWidth:d.borderWidth,borderColor:d.borderColor,fillColor:d.fillColor};
this.app.command("ChangeMarkupStyle").execute(d);break;case f.MarkupModule.TEXT:d=this.textStyles.getAt(b),d={type:d.type,textFamily:d.textFamily,style:d.style,weight:d.weight,size:d.size,color:d.color},this.app.command("ChangeMarkupStyle").execute(d)}};return a}(d.framework.ui.ViewModelBase);i.StyleSelectorViewModel=j})(f.styleSelector||(f.styleSelector={}))})(f.markup||(f.markup={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||
(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(j){function b(){j.apply(this,arguments);this.markupLayerId="Drawings";this.markupTools={point:[],polyline:[],polygon:[],text:[]};this.editToolbar=null;this.editToolbarTool=esri.toolbars.Edit.MOVE|esri.toolbars.Edit.EDIT_VERTICES|esri.toolbars.Edit.SCALE|esri.toolbars.Edit.ROTATE;this._editToolbarInputMethodChangeHandle=this.editToolbarDeactivatedHandle=this.editToolbarMoveStoppedHandle=this.editToolbarMoveStartedHandle=this.modifiedGraphic=
this.originalGraphic=null;this._markerSymbol=d.essentialsHtmlViewer.mapping.infrastructure.SymbolUtils.defaultMarkerSymbol();this._lineSymbol=d.essentialsHtmlViewer.mapping.infrastructure.SymbolUtils.defaultLineSymbol();this._polyFillSymbol=d.essentialsHtmlViewer.mapping.infrastructure.SymbolUtils.defaultFillSymbol();this._polyBorderSymbol=d.essentialsHtmlViewer.mapping.infrastructure.SymbolUtils.defaultLineSymbol();this._textSymbol=d.essentialsHtmlViewer.mapping.infrastructure.SymbolUtils.defaultTextSymbol();
this._fontSymbol=this._textSymbol.font;this.textStyleViewCreated=this.polygonStyleViewCreated=this.lineStyleViewCreated=this.pointStyleViewCreated=false;this.pointSize=new Observable(15);this.lineWidth=new Observable(2);this.polyBorderWidth=new Observable(2);this.textSize=new Observable("12pt");this.pointColor=new Observable(e.infrastructure.ColorUtils.getColorFromString("#cc3333FF"));this.lineColor=new Observable(e.infrastructure.ColorUtils.getColorFromString("#cc3333FF"));this.polygonFillColor=
new Observable(e.infrastructure.ColorUtils.getColorFromString("#cc333380"));this.polygonBorderColor=new Observable(e.infrastructure.ColorUtils.getColorFromString("#cc3333FF"));this.textColor=new Observable(e.infrastructure.ColorUtils.getColorFromString("#000000FF"));this.pointStyleObsv=new ObservableCollection(["Circle","Diamond","Square"]);this.lineStyleObsv=new ObservableCollection(["Dash","Dash Dot","Dash Dot Dot","Dot","Solid"]);this.polyBorderStyleObsv=new ObservableCollection(["Dash","Dash Dot",
"Dash Dot Dot","Dot","Solid"]);this.polyFillStyleObsv=new ObservableCollection("Solid,Forward Diagonal,Backward Diagonal,Cross,Diagonal Cross,Horizontal,Vertical".split(","));this.textStyleObsv=new ObservableCollection(["Italic","Normal","Oblique"]);this.textStyleWeightObsv=new ObservableCollection(["Bold","Bolder","Lighter","Normal"]);this.selectedPointStyleObsv=new Observable("Circle");this.selectedLineStyleObsv=new Observable("Dash");this.selectedPolyBorderStyleObsv=new Observable("Dash");this.selectedPolyFillStyleObsv=
new Observable("Solid");this.selectedTextStyleObsv=new Observable("Italic");this.selectedTextStyleWeightObsv=new Observable("Bold");this.selectedTextFamily=new Observable("times");this.pointStyle=[esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,esri.symbol.SimpleMarkerSymbol.STYLE_DIAMOND,esri.symbol.SimpleMarkerSymbol.STYLE_SQUARE];this.lineStyle=[esri.symbol.SimpleLineSymbol.STYLE_DASH,esri.symbol.SimpleLineSymbol.STYLE_DASHDOT,esri.symbol.SimpleLineSymbol.STYLE_DASHDOTDOT,esri.symbol.SimpleLineSymbol.STYLE_DOT,
esri.symbol.SimpleLineSymbol.STYLE_SOLID];this.polyBorderStyle=[esri.symbol.SimpleLineSymbol.STYLE_DASH,esri.symbol.SimpleLineSymbol.STYLE_DASHDOT,esri.symbol.SimpleLineSymbol.STYLE_DASHDOTDOT,esri.symbol.SimpleLineSymbol.STYLE_DOT,esri.symbol.SimpleLineSymbol.STYLE_SOLID];this.polyFillStyle=[esri.symbol.SimpleFillSymbol.STYLE_SOLID,esri.symbol.SimpleFillSymbol.STYLE_FORWARD_DIAGONAL,esri.symbol.SimpleFillSymbol.STYLE_BACKWARD_DIAGONAL,esri.symbol.SimpleFillSymbol.STYLE_CROSS,esri.symbol.SimpleFillSymbol.STYLE_DIAGONAL_CROSS,
esri.symbol.SimpleFillSymbol.STYLE_HORIZONTAL,esri.symbol.SimpleFillSymbol.STYLE_VERTICAL];this.textStyle=[esri.symbol.Font.STYLE_ITALIC,esri.symbol.Font.STYLE_NORMAL,esri.symbol.Font.STYLE_OBLIQUE];this.textStyleWeight=[esri.symbol.Font.WEIGHT_BOLD,esri.symbol.Font.WEIGHT_BOLDER,esri.symbol.Font.WEIGHT_LIGHTER,esri.symbol.Font.STYLE_NORMAL]}__extends(b,j);b.prototype.initialize=function(a){if(a.markupLayerName)this.markupLayerId=a.markupLayerName;a.defaultPointMarkup&&(a.defaultPointMarkup.pointStyle&&
this.selectedPointStyleObsv.set(a.defaultPointMarkup.pointStyle),a.defaultPointMarkup.pointSize&&this.pointSize.set(a.defaultPointMarkup.pointSize),a.defaultPointMarkup.pointColor&&this.pointColor.set(e.infrastructure.ColorUtils.getColorFromString(a.defaultPointMarkup.pointColor)));this.pointMarkupStyleChanged();a.defaultLineMarkup&&(a.defaultLineMarkup.lineStyle&&this.selectedLineStyleObsv.set(a.defaultLineMarkup.lineStyle),a.defaultLineMarkup.lineWidth&&this.lineWidth.set(a.defaultLineMarkup.lineWidth),
a.defaultLineMarkup.lineColor&&this.lineColor.set(e.infrastructure.ColorUtils.getColorFromString(a.defaultLineMarkup.lineColor)));this.polylineMarkupStyleChanged();a.defaultPolygonMarkup&&(a.defaultPolygonMarkup.polygonBorderStyle&&this.selectedPolyBorderStyleObsv.set(a.defaultPolygonMarkup.polygonBorderStyle),a.defaultPolygonMarkup.polygonFillStyle&&this.selectedPolyFillStyleObsv.set(a.defaultPolygonMarkup.polygonFillStyle),a.defaultPolygonMarkup.polygonBorderWidth&&this.polyBorderWidth.set(a.defaultPolygonMarkup.polygonBorderWidth),
a.defaultPolygonMarkup.polygonFillColor&&this.polygonFillColor.set(e.infrastructure.ColorUtils.getColorFromString(a.defaultPolygonMarkup.polygonFillColor)),a.defaultPolygonMarkup.polygonBorderColor&&this.polygonBorderColor.set(e.infrastructure.ColorUtils.getColorFromString(a.defaultPolygonMarkup.polygonBorderColor)));this.polygonMarkupStyleChanged();a.defaultTextMarkup&&(a.defaultTextMarkup.textStyle&&this.selectedTextStyleObsv.set(a.defaultTextMarkup.textStyle),a.defaultTextMarkup.textWeight&&this.selectedTextStyleWeightObsv.set(a.defaultTextMarkup.textWeight),
a.defaultTextMarkup.textSize&&this.textSize.set(a.defaultTextMarkup.textSize),a.defaultTextMarkup.textColor&&this.textColor.set(e.infrastructure.ColorUtils.getColorFromString(a.defaultTextMarkup.textColor)),a.defaultTextMarkup.textFamily&&this.selectedTextFamily.set(a.defaultTextMarkup.textFamily));this.app.toolRegistry.registerToolTypeForCommand("EditMarkup","geocortex.essentialsHtmlViewer.mapping.infrastructure.tools.DisablingMapTool");this.app.toolRegistry.registerToolTypeForCommand("DeleteMarkup",
"geocortex.essentialsHtmlViewer.mapping.infrastructure.tools.DisablingMapTool");this.textMarkupStyleChanged();this.markupTools.point=this.markupTools.point.concat(a.customMarkupTools.point);this.markupTools.polyline=this.markupTools.polyline.concat(a.customMarkupTools.polyline);this.markupTools.polygon=this.markupTools.polygon.concat(a.customMarkupTools.polygon);this.markupTools.text=this.markupTools.text.concat(a.customMarkupTools.text);this.initializeCommands();this.initializeEvents()};b.prototype.initializeCommands=
function(){this.app.command("AddMarkup").register(this,this.executeAddMarkupCommand,this.canExecuteAddMarkupCommand);this.app.command("AddMarkupGeometry").register(this,this.executeAddMarkupCommand,this.canExecuteAddMarkupCommand);this.app.command("AddTextMarkup").register(this,this.executeAddTextMarkupCommand,this.canExecuteAddTextMarkupCommand);this.app.command("ClearMarkup").register(this,this.executeClearMarkupCommand,this.canExecuteClearMarkupCommand);this.app.command("ClearMarkupQuiet").register(this,
this.executeClearMarkupQuietCommand,this.canExecuteClearMarkupQuietCommand);this.app.command("EditMarkup").register(this,this.executeEditMarkupCommand,this.canExecuteEditMarkupCommand);this.app.command("DeleteMarkup").register(this,this.executeDeleteMarkupCommand,this.canExecuteDeleteMarkupCommand);this.app.command("ChangeMarkupStyle").register(this,this.executeChangeMarkupStyleCommand,this.canExecuteChangeMarkupStyleCommand);this.app.command("CreateMarkupStyleView").register(this,this.executeCreateStyleViewCommand,
this.canExecuteCreateStyleViewCommand);this.app.command("StopEditingMarkup").register(this,this.executeStopEditingCommand,this.canExecuteStopEditingCommand)};b.prototype.initializeEvents=function(){var a=this;this.app.event("ActiveToolChangedEvent").subscribe(this,function(){a.app.command("CreateMarkupStyleView").raiseCanExecuteChanged()})};b.prototype.canExecuteAddMarkupCommand=function(a){return!!a};b.prototype.executeAddMarkupCommand=function(a){this.addMarkup(a)};b.prototype.canExecuteClearMarkupCommand=
function(){return this._markupExists()};b.prototype.executeClearMarkupCommand=function(){this.clearMarkup()};b.prototype.canExecuteClearMarkupQuietCommand=function(){return this._markupExists()};b.prototype.executeClearMarkupQuietCommand=function(){this.clearMarkupQuiet()};b.prototype.canExecuteAddTextMarkupCommand=function(a){return!!a};b.prototype.executeAddTextMarkupCommand=function(a){this.addTextMarkup(a)};b.prototype.canExecuteDeleteMarkupCommand=function(){return this._markupExists()};b.prototype.executeDeleteMarkupCommand=
function(a){this.deleteMarkup(a)};b.prototype.canExecuteEditMarkupCommand=function(){return this._markupExists()};b.prototype.executeEditMarkupCommand=function(a){this.editMarkup(a)};b.prototype.canExecuteChangeMarkupStyleCommand=function(){return true};b.prototype.executeChangeMarkupStyleCommand=function(a){this.changeMarkupStyle(a)};b.prototype.canExecuteCreateStyleViewCommand=function(){var a=this.app.toolRegistry.getActiveTool();if(this.editToolbar)return true;if(!a)return false;var g=["AddMarkup",
"AddMarkupGeometry","AddTextMarkup"];return a instanceof e.infrastructure.tools.MapTool&&g.indexOf(a.command)!=-1?true:$.inArray(a.name,this.markupTools.point)!=-1?true:$.inArray(a.name,this.markupTools.polyline)!=-1?true:$.inArray(a.name,this.markupTools.polygon)!=-1?true:$.inArray(a.name,this.markupTools.text)!=-1?true:false};b.prototype.executeCreateStyleViewCommand=function(){var a=this.app.toolRegistry.getActiveTool();if(a||this.editToolbar){this.editToolbar&&this._createStylePickerView(null);
var g=null,b=["AddMarkup","AddMarkupGeometry","AddTextMarkup"];if(a instanceof e.infrastructure.tools.MapTool&&b.indexOf(a.command)!=-1){switch(a.drawMode){case e.infrastructure.tools.DrawMode.POINT:g=a.command=="AddTextMarkup"?f.MarkupModule.TEXT:f.MarkupModule.POINT;break;case e.infrastructure.tools.DrawMode.MULTI_POINT:g=f.MarkupModule.POINT;break;case e.infrastructure.tools.DrawMode.LINE:case e.infrastructure.tools.DrawMode.POLYLINE:case e.infrastructure.tools.DrawMode.FREEHAND_POLYLINE:g=f.MarkupModule.POLYLINE;
break;case e.infrastructure.tools.DrawMode.POLYGON:case e.infrastructure.tools.DrawMode.FREEHAND_POLYGON:case e.infrastructure.tools.DrawMode.EXTENT:case e.infrastructure.tools.DrawMode.ARROW:case e.infrastructure.tools.DrawMode.LEFT_ARROW:case e.infrastructure.tools.DrawMode.RIGHT_ARROW:case e.infrastructure.tools.DrawMode.UP_ARROW:case e.infrastructure.tools.DrawMode.DOWN_ARROW:case e.infrastructure.tools.DrawMode.TRIANGLE:case e.infrastructure.tools.DrawMode.CIRCLE:case e.infrastructure.tools.DrawMode.ELLIPSE:case e.infrastructure.tools.DrawMode.RECTANGLE:g=
f.MarkupModule.POLYGON}this._createStylePickerView(g)}else $.inArray(a.name,this.markupTools.point)!=-1?this._createStylePickerView(f.MarkupModule.POINT):$.inArray(a.name,this.markupTools.polyline)!=-1?this._createStylePickerView(f.MarkupModule.POLYLINE):$.inArray(a.name,this.markupTools.polygon)!=-1?this._createStylePickerView(f.MarkupModule.POLYGON):$.inArray(a.name,this.markupTools.text)!=-1?this._createStylePickerView(f.MarkupModule.TEXT):a.name=="EditMarkupTool"&&this._createStylePickerView(null)}};
b.prototype.canExecuteStopEditingCommand=function(){return!!this.editToolbar};b.prototype.executeStopEditingCommand=function(a){if(this.editToolbar){var g=this.editToolbar.getCurrentState().graphic||this.modifiedGraphic;this.removeMarkupHighlight(g);this.app.event("MarkupEditingStoppedEvent").publish(g);this._deactivateToolbar();this.originalGraphic=this.modifiedGraphic=null;this.app.toolRegistry.getActiveTool()&&a&&this.app.toolRegistry.getActiveTool().name=="EditMarkupTool"&&this.app.command("ClearActiveTool").execute();
this.app.command("CreateMarkupStyleView").raiseCanExecuteChanged()}};b.prototype._deactivateToolbar=function(){if(this.editToolbarMoveStartedHandle)this.editToolbarMoveStartedHandle.remove(),this.editToolbarMoveStartedHandle=null;if(this.editToolbarMoveStoppedHandle)this.editToolbarMoveStoppedHandle.remove(),this.editToolbarMoveStoppedHandle=null;if(this.editToolbarDeactivatedHandle)this.editToolbarDeactivatedHandle.remove(),this.editToolbarDeactivatedHandle=null;if(this._editToolbarInputMethodChangeHandle)this._editToolbarInputMethodChangeHandle.remove(),
this._editToolbarInputMethodChangeHandle=null;if(this.editToolbar)this.editToolbar.deactivate(),this.editToolbar=null};b.prototype.pointMarkupStyleChanged=function(){this._markerSymbol.setStyle(this.getEsriStyle(f.MarkupModule.POINT,this.selectedPointStyleObsv.get()));this._markerSymbol.setSize(this.pointSize.get());this._markerSymbol.setColor(this.pointColor.get())};b.prototype.polylineMarkupStyleChanged=function(){this._lineSymbol.setStyle(this.getEsriStyle(f.MarkupModule.POLYLINE,this.selectedLineStyleObsv.get()));
this._lineSymbol.setWidth(this.lineWidth.get());this._lineSymbol.setColor(this.lineColor.get())};b.prototype.polygonMarkupStyleChanged=function(){this._polyBorderSymbol.setStyle(this.getEsriStyle(f.MarkupModule.POLYGON_BORDER,this.selectedPolyBorderStyleObsv.get()));this._polyBorderSymbol.setWidth(this.polyBorderWidth.get());this._polyBorderSymbol.setColor(this.polygonBorderColor.get());this._polyFillSymbol.setStyle(this.getEsriStyle(f.MarkupModule.POLYGON_FILL,this.selectedPolyFillStyleObsv.get()));
this._polyFillSymbol.setColor(this.polygonFillColor.get());this._polyFillSymbol.setOutline(this._polyBorderSymbol)};b.prototype.textMarkupStyleChanged=function(){this._fontSymbol.setSize(this.textSize.get());this._fontSymbol.setStyle(this.getEsriStyle(f.MarkupModule.TEXT,this.selectedTextStyleObsv.get()));this._fontSymbol.setWeight(this.getEsriStyle(f.MarkupModule.TEXT_WEIGHT,this.selectedTextStyleWeightObsv.get()));this._fontSymbol.setFamily(this.selectedTextFamily.get());this._textSymbol.setColor(this.textColor.get())};
b.prototype.clearMarkup=function(){var a=this;this.editToolbar&&this.app.command("StopEditingMarkup").execute();if(this._markupExists()){var g=this.app.getResource(this.libraryId,"language-markup-clear-all-prompt"),b=this.app.getResource(this.libraryId,"language-markup-clear-all-prompt-title");this.app.command("Confirm").execute(g,b,function(g){g&&a.clearMarkupQuiet()})}};b.prototype.clearMarkupQuiet=function(){var a=this;this.editToolbar&&setTimeout(function(){a.app.command("StopEditingMarkup").execute()},
0);if(this._markupExists()){var g=this._getGraphicsLayer(false,this.markupLayerId);if(!g)return;for(var b=g.graphics.length,d=0;d<b;d++)g.graphics[0].measurementId?this.app.event("MarkupDeletedEvent").publish(g.graphics[0]):(this.app.event("MarkupDeletedEvent").publish(g.graphics[0]),g.remove(g.graphics[0]));this._deactivateActiveToolIfNoMarkupExists();this.app.command("ClearMarkup").raiseCanExecuteChanged();this.app.command("EditMarkup").raiseCanExecuteChanged();this.app.command("DeleteMarkup").raiseCanExecuteChanged();
this.app.event("MarkupClearedEvent").publish()}this.app.command("LogOptimizerEvent").execute("ClearMarkupTool","ClearAllMarkup")};b.prototype.deleteMarkup=function(a){var g=this;d.essentialsHtmlViewer.mapping.infrastructure.GraphicUtils.deleteMarkup(a,[this.markupLayerId,this.markupLayerId+"_measurement"],this.app,function(a){if(a&&a.length){for(var b=0;b<a.length;b++)g.app.event("MarkupDeletedEvent").publish(a[b]);g._deactivateActiveToolIfNoMarkupExists();g.app.command("ClearMarkup").raiseCanExecuteChanged();
g.app.command("EditMarkup").raiseCanExecuteChanged();g.app.command("DeleteMarkup").raiseCanExecuteChanged()}g.app.command("ShowMap").execute()},false,"language-markup-delete-multiple-prompt","language-markup-delete-multiple-prompt-title",this.libraryId)};b.prototype._deactivateActiveToolIfNoMarkupExists=function(){if(!this._markupExists()&&this.app.toolRegistry.getActiveTool()instanceof e.infrastructure.tools.MapTool){var a=this.app.toolRegistry.getActiveTool();(a.command==="EditMarkup"||a.command===
"DeleteMarkup")&&this.app.command("ClearActiveTool").execute()}};b.prototype.addMarkup=function(a){if(!a)throw Error("geometry is null");a.type==="extent"&&(a=d.essentials.GeometryUtilities.envelopeToPolygon(a));var g=null;switch(a.type){case "point":case "multipoint":g=this._copySymbol(this._markerSymbol);break;case "polyline":g=this._copySymbol(this._lineSymbol);break;case "polygon":case "extent":g=this._copySymbol(this._polyFillSymbol)}if(g){var b=new esri.Graphic;b.setGeometry(a);b.setSymbol(g);
this._addGraphic(b,this.markupLayerId);this.app.event("MarkupAddedEvent").publish(b)}this.app.command("ClearMarkup").raiseCanExecuteChanged();this.app.command("EditMarkup").raiseCanExecuteChanged();this.app.command("DeleteMarkup").raiseCanExecuteChanged()};b.prototype.addTextMarkup=function(a){var g=this;if(a){var b=this.app.getResource(this.libraryId,"language-markup-add-text-title"),d=this.app.getResource(this.libraryId,"language-markup-add-text");this.app.command("Prompt").execute(b,d,"",function(b){b&&
g._addTextMarkup(b,a);g.app.command("ShowMap").execute()})}};b.prototype.editMarkup=function(a){var g=this;this.editToolbar&&this.app.command("StopEditingMarkup").execute(false);var b=this._getGraphicsLayer(false,this.markupLayerId),e=null;b&&(e=d.essentialsHtmlViewer.mapping.infrastructure.GraphicUtils.getMarkupFromGeometry(a,b,this.app));if(e&&e[e.length-1]){this.originalGraphic=e[e.length-1];this.app.event("MarkupEditingStartedEvent").publish(this.originalGraphic);this.originalGraphic.hasOwnProperty("measurementId")&&
this.app.event("MeasurementEditingStartedEvent").publish({graphic:this.originalGraphic});this.originalGraphic.symbol instanceof esri.symbol.TextSymbol&&(this.setMarkupHighlight(this.originalGraphic),a=this.app.getResource(this.libraryId,"language-markup-change-text-text-title"),b=this.app.getResource(this.libraryId,"language-markup-change-text-text"),this.app.command("Prompt").execute(a,b,this.originalGraphic.symbol.text,function(a){if(a!=""&&a!=null)g.originalGraphic.symbol.setText(a),g.originalGraphic.draw(),
g.app.command("ShowMap").execute();else if(a==="")g.app.event("MarkupDeleteEvent").publish(g.originalGraphic),g._getGraphicsLayer(false,g.markupLayerId).remove(g.originalGraphic),g._deactivateActiveToolIfNoMarkupExists(),g.app.command("ClearMarkup").raiseCanExecuteChanged(),g.app.command("EditMarkup").raiseCanExecuteChanged(),g.app.command("DeleteMarkup").raiseCanExecuteChanged(),g.editToolbar.deactivate(),g.editToolbar=null,g.app.command("CreateMarkupStyleView").raiseCanExecuteChanged()}));this.editToolbar=
this.app.accessibilityManager.createComponent("geocortex.accessibility.edit",this.app.map);this.editToolbarMoveStartedHandle=dojo.aspect.after(this.editToolbar,"onGraphicFirstMove",function(){g.app.map.disableMapNavigation()},true);this.editToolbarMoveStoppedHandle=dojo.aspect.after(this.editToolbar,"onGraphicMoveStop",function(){g.app.map.enableMapNavigation()},true);this.editToolbarDeactivatedHandle=dojo.aspect.after(this.editToolbar,"onDeactivate",function(a,b){var d=g.editToolbar;d&&d.__attached_markupStyleChanged?
delete d.__attached_markupStyleChanged:(g.modifiedGraphic=b,g.app.command("StopEditingMarkup").execute(false))},true);if(this.editToolbar instanceof d.essentialsHtmlViewer.mapping.infrastructure.accessibility.Edit)this._editToolbarInputMethodChangeHandle=dojo.aspect.after(this.editToolbar,"onInputMethodChange",function(a){var b=g.app.toolRegistry.getActiveTool();b&&b.name==="EditMarkupTool"&&(a={tool:b,previousMethod:a?a.previousMethod:null,newMethod:a?a.newMethod:null},g.app.event("ToolInputMethodChangedEvent").publish(a))},
true);this.editToolbar.activate(this.editToolbarTool,this.originalGraphic);this.app.command("CreateMarkupStyleView").raiseCanExecuteChanged();var f=this.app.event("ActiveToolChangedEvent").subscribe(this,function(a){if(a.previousTool&&a.previousTool.name=="EditMarkupTool"&&a.previousTool.isSticky==true)g.app.command("StopEditingMarkup").execute(false),g.app.event("ActiveToolChangedEvent").unsubscribe(f);else g.app.map.on("click",function(){g.app.command("StopEditingMarkup").execute(false);g.app.event("ActiveToolChangedEvent").unsubscribe(f)});
a.tool&&g.editToolbar&&(g.app.command("false").execute(),g.app.event("ActiveToolChangedEvent").unsubscribe(f))})}};b.prototype.changeMarkupStyle=function(a){if(this.editToolbar){var g=this.editToolbar.getCurrentState().graphic,b=null;if(g.measurementId)b=g.measurementId}switch(a.type){case f.MarkupModule.POINT:case f.MarkupModule.MULTIPOINT:a.style&&this.selectedPointStyleObsv.set(a.style);a.size&&this.pointSize.set(a.size);a.color&&this.pointColor.set(new esri.Color(a.color));this.pointMarkupStyleChanged();
if(this.editToolbar){a=g.geometry;this.editToolbar.__attached_markupStyleChanged=true;this.editToolbar.deactivate();this._getGraphicsLayer(false,this.markupLayerId).remove(g);var g=this._copySymbol(this._markerSymbol),d=new esri.Graphic;d.geometry=a;d.symbol=g;if(b)d.measurementId=b;this._addGraphic(d,this.markupLayerId);this.editToolbar.activate(this.editToolbarTool,d)}break;case f.MarkupModule.POLYLINE:a.style&&this.selectedLineStyleObsv.set(a.style);a.color&&this.lineColor.set(new esri.Color(a.color));
a.width&&this.lineWidth.set(a.width);this.polylineMarkupStyleChanged();if(this.editToolbar){a=g.geometry;this.editToolbar.__attached_markupStyleChanged=true;this.editToolbar.deactivate();this._getGraphicsLayer(false,this.markupLayerId).remove(g);g=this._copySymbol(this._lineSymbol);d=new esri.Graphic;d.geometry=a;d.symbol=g;if(b)d.measurementId=b;this._addGraphic(d,this.markupLayerId);this.editToolbar.activate(this.editToolbarTool,d)}break;case f.MarkupModule.POLYGON:a.borderStyle&&this.selectedPolyBorderStyleObsv.set(a.borderStyle);
a.borderWidth&&this.polyBorderWidth.set(a.borderWidth);a.fillStyle&&this.selectedPolyFillStyleObsv.set(a.fillStyle);a.borderColor&&this.polygonBorderColor.set(new esri.Color(a.borderColor));a.fillColor&&this.polygonFillColor.set(new esri.Color(a.fillColor));this.polygonMarkupStyleChanged();if(this.editToolbar){a=g.geometry;this.editToolbar.__attached_markupStyleChanged=true;this.editToolbar.deactivate();this._getGraphicsLayer(false,this.markupLayerId).remove(g);g=this._copySymbol(this._polyFillSymbol);
d=new esri.Graphic;d.geometry=a;d.symbol=g;if(b)d.measurementId=b;this._addGraphic(d,this.markupLayerId);this.editToolbar.activate(this.editToolbarTool,d)}break;case f.MarkupModule.TEXT:if(a.textFamily&&this.selectedTextFamily.set(a.textFamily),a.style&&this.selectedTextStyleObsv.set(a.style),a.weight&&this.selectedTextStyleWeightObsv.set(a.weight),a.size&&this.textSize.set(a.size),a.color&&this.textColor.set(new esri.Color(a.color)),this.textMarkupStyleChanged(),this.editToolbar){a=g.geometry;d=
g.symbol.text;this.editToolbar.__attached_markupStyleChanged=true;this.editToolbar.deactivate();this._getGraphicsLayer(false,this.markupLayerId).remove(g);g=this._copySymbol(this._textSymbol);g.text=d;d=new esri.Graphic;d.geometry=a;d.symbol=g;if(b)d.measurementId=b;this._addGraphic(d,this.markupLayerId);this.editToolbar.activate(this.editToolbarTool,d);this.setMarkupHighlight(d)}}};b.prototype.setMarkupHighlight=function(a){a&&a.symbol instanceof esri.symbol.TextSymbol&&(a.symbol.setDecoration(esri.symbol.TextSymbol.DECORATION_UNDERLINE),
a.draw())};b.prototype.removeMarkupHighlight=function(a){a&&a.symbol instanceof esri.symbol.TextSymbol&&(a.symbol.setDecoration(esri.symbol.TextSymbol.DECORATION_NONE),a.draw())};b.prototype.getEsriStyle=function(a,g){var b=null;switch(a){case f.MarkupModule.POINT:return b=this.pointStyleObsv.indexOf(g),this.pointStyle[b];case f.MarkupModule.POLYLINE:return b=this.lineStyleObsv.indexOf(g),this.lineStyle[b];case f.MarkupModule.POLYGON_BORDER:return b=this.polyBorderStyleObsv.indexOf(g),this.polyBorderStyle[b];
case f.MarkupModule.POLYGON_FILL:return b=this.polyFillStyleObsv.indexOf(g),this.polyFillStyle[b];case f.MarkupModule.TEXT:return b=this.textStyleObsv.indexOf(g),this.textStyle[b];case f.MarkupModule.TEXT_WEIGHT:return b=this.textStyleWeightObsv.indexOf(g),this.textStyleWeight[b];default:throw Error("Illegal style type.");}};b.prototype._addTextMarkup=function(a,g){if(g.getExtent){var b=g.getExtent();b&&(g=b.getCenter())}b=this._copySymbol(this._textSymbol);b.setText(a);var d=new esri.Graphic;d.geometry=
g;d.symbol=b;this._addGraphic(d,this.markupLayerId);this.app.event("MarkupAddedEvent").publish(d);this.app.command("ClearMarkup").raiseCanExecuteChanged();this.app.command("EditMarkup").raiseCanExecuteChanged();this.app.command("DeleteMarkup").raiseCanExecuteChanged()};b.prototype._addGraphic=function(a,g){if(a){var b=this._getGraphicsLayer(true,g);b.add(a);b.visible||b.setVisibility(true)}};b.prototype._getGraphicsLayer=function(a,g){var b=this.app.map.getLayer(g);if(!b&&a)b=new esri.layers.GraphicsLayer,
b.id=g,this.app.map.addLayer(b),this.app.markupLayer.set(b);return b};b.prototype._copySymbol=function(a){var g=null,b=null;a&&a.isInstanceOf&&(a.isInstanceOf(esri.symbol.SimpleMarkerSymbol)?(b=this._copySymbol(a.outline),g=new esri.symbol.SimpleMarkerSymbol(a.style,a.size,b,a.color)):a.isInstanceOf(esri.symbol.SimpleLineSymbol)?g=new esri.symbol.SimpleLineSymbol(a.style,a.color,a.width):a.isInstanceOf(esri.symbol.SimpleFillSymbol)?(b=this._copySymbol(a.outline),g=new esri.symbol.SimpleFillSymbol(a.style,
b,a.color)):a.isInstanceOf(esri.symbol.TextSymbol)&&(g=new esri.symbol.TextSymbol(a.text),g.setFont(new esri.symbol.Font(a.font.size,a.font.style,a.font.variant,a.font.weight,a.font.family)),g.setColor(a.color),g.setAlign(a.align)));return g};b.prototype._markupExists=function(){var a=false;if(this.app.map){var g=this._getGraphicsLayer(false,this.markupLayerId);g&&g.graphics&&g.graphics.length>0&&(a=true)}return a};b.prototype._createStylePickerView=function(a){if(a==null)if(this.editToolbar==null)return;
else switch(this.editToolbar.getCurrentState().graphic.geometry.type){case "point":a=this.editToolbar.getCurrentState().graphic.symbol instanceof esri.symbol.SimpleMarkerSymbol?f.MarkupModule.POINT:f.MarkupModule.TEXT;break;case "polyline":a=f.MarkupModule.POLYLINE;break;case "polygon":a=f.MarkupModule.POLYGON;break;case "multipoint":a=f.MarkupModule.MULTIPOINT}switch(a){case f.MarkupModule.POINT:case f.MarkupModule.MULTIPOINT:this.pointStyleViewCreated?this.app.command("ActivateView").execute("PointStyleView"):
(g=this.app.viewManager.createView({viewId:"PointStyleView",markup:"Mapping/modules/Markup/StyleSelector/StyleSelectorPoint.html",type:"geocortex.essentialsHtmlViewer.mapping.modules.markup.styleSelector.StyleSelectorPointView",regionName:"ModalWindowRegion",visible:true,libraryId:this.libraryId}),a=this.app.getFrameworkObjectById("StyleSelectorViewModel"),g.attach(a),this.pointStyleViewCreated=true);break;case f.MarkupModule.POLYLINE:if(this.lineStyleViewCreated)this.app.command("ActivateView").execute("LineStyleView");
else{var g=this.app.viewManager.createView({viewId:"LineStyleView",markup:"Mapping/modules/Markup/StyleSelector/StyleSelectorLine.html",type:"geocortex.essentialsHtmlViewer.mapping.modules.markup.styleSelector.StyleSelectorLineView",regionName:"ModalWindowRegion",visible:true,libraryId:this.libraryId}),a=this.app.getFrameworkObjectById("StyleSelectorViewModel");g.attach(a);this.lineStyleViewCreated=true}break;case f.MarkupModule.POLYGON:this.polygonStyleViewCreated?this.app.command("ActivateView").execute("PolygonStyleView"):
(g=this.app.viewManager.createView({viewId:"PolygonStyleView",markup:"Mapping/modules/Markup/StyleSelector/StyleSelectorPolygon.html",type:"geocortex.essentialsHtmlViewer.mapping.modules.markup.styleSelector.StyleSelectorPolygonView",regionName:"ModalWindowRegion",visible:true,libraryId:this.libraryId}),a=this.app.getFrameworkObjectById("StyleSelectorViewModel"),g.attach(a),this.polygonStyleViewCreated=true);break;case f.MarkupModule.TEXT:this.textStyleViewCreated?this.app.command("ActivateView").execute("TextStyleView"):
(g=this.app.viewManager.createView({viewId:"TextStyleView",markup:"Mapping/modules/Markup/StyleSelector/StyleSelectorText.html",type:"geocortex.essentialsHtmlViewer.mapping.modules.markup.styleSelector.StyleSelectorTextView",regionName:"ModalWindowRegion",visible:true,libraryId:this.libraryId}),a=this.app.getFrameworkObjectById("StyleSelectorViewModel"),g.attach(a),this.textStyleViewCreated=true)}};return b}(d.framework.ui.ViewModelBase);f.MarkupViewModel=i})(f.markup||(f.markup={}))})(e.modules||
(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(f){var j=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.handleClickDone=function(){this.viewModel.editToggled.set(false);this.viewModel.deleteToggled.set(false);this.app.command("StopEditingMarkup").execute();this.app.command("ClearActiveTool").execute()};a.prototype.handleClickEdit=function(){var a=this;this.viewModel.deleteToggled.get()&&this.viewModel.deleteToggled.set(false);if(this.viewModel.editToggled.get())this.app.command("ClearActiveTool").execute();
else{this.app.command("SetActiveTool").execute("EditMarkupTool");this.viewModel.editToggled.set(true);var b=this.app.event("ActiveToolChangedEvent").subscribe(this,function(){a.viewModel.editToggled.set(false);a.app.event("ActiveToolChangedEvent").unsubscribe(b)})}};a.prototype.handleClickDelete=function(){var a=this;if(!this.viewModel.clearDisabled.get())if(this.viewModel.editToggled.get()&&this.viewModel.editToggled.set(false),this.viewModel.deleteToggled.get())this.app.command("ClearActiveTool").execute();
else{this.app.command("SetActiveTool").execute("DeleteMarkupTool");this.viewModel.deleteToggled.set(true);var b=this.app.event("ActiveToolChangedEvent").subscribe(this,function(){a.viewModel.deleteToggled.set(false);a.app.event("ActiveToolChangedEvent").unsubscribe(b)})}};a.prototype.handleClickChangeStyle=function(){var a=null;if(this.app.toolRegistry.getActiveTool())a=this.app.toolRegistry.getActiveTool().name;var b=this.app.getFrameworkObjectById("MarkupViewModel").markupTools;$.inArray(a,b.point)!=
-1?this.app.command("CreateMarkupStyleView").execute(e.MarkupModule.POINT):$.inArray(a,b.polyline)!=-1?this.app.command("CreateMarkupStyleView").execute(e.MarkupModule.POLYLINE):$.inArray(a,b.polygon)!=-1?this.app.command("CreateMarkupStyleView").execute(e.MarkupModule.POLYGON):$.inArray(a,b.text)!=-1?this.app.command("CreateMarkupStyleView").execute(e.MarkupModule.TEXT):a=="EditMarkupTool"&&this.app.command("CreateMarkupStyleView").execute()};a.prototype.handleClickClear=function(){this.app.command("StopEditingMarkup").execute();
this.app.command("ClearMarkup").execute()};return a}(d.framework.ui.ViewBase);f.TransientMarkupPaletteView=j})(e.toolPalettes||(e.toolPalettes={}))})(e.markup||(e.markup={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(j){function b(a,g){j.call(this,a,g);this._measurementWkid=-1;this._currentSpatialReference=this._measurementSpatialReference=null;f.measurementMarkupManager=new f.MeasurementMarkupManager(this,a,g);this.app.toolRegistry.registerToolTypeForCommand("MeasureArea","geocortex.essentialsHtmlViewer.mapping.modules.measurement.MeasurementTool");this.app.toolRegistry.registerToolTypeForCommand("MeasureDistance","geocortex.essentialsHtmlViewer.mapping.modules.measurement.MeasurementTool")}
__extends(b,j);b.prototype.initialize=function(a){this._registerCommands();this._measurementWkid=a&&a.measurementProjectionWkid&&a.measurementProjectionWkid!=""?parseInt(a.measurementProjectionWkid,10):-1;var g=this._measurementWkid===-1?"geodesic":"planar";this._calculationType=a&&a.calculationType?a.calculationType==="planar"||a.calculationType==="geodesic"||a.calculationType==="preserveShape"?a.calculationType:g:g;this._enablePrediction=a&&a.enablePrediction!=void 0?a.enablePrediction:true;this._measurementLengthUnits=
f.MeasurementUtils.getGeometryServiceUnitConstant(a.measurementLengthUnits||"feet");this._measurementAreaUnits=f.MeasurementUtils.getGeometryServiceUnitConstant(a.measurementAreaUnits||"squarefeet");this._segmentWarningThreshold=a.numSegmentsWarningThreshold!=void 0?parseInt(a.numSegmentsWarningThreshold,10):1E3;a&&a.tools&&this.app&&this.app.toolRegistry&&this.app.toolRegistry.createTools(a.tools,true);f.measurementMarkupManager._updateMeasurementUnits(this._measurementLengthUnits,this._measurementAreaUnits);
if(a&&a.measurementResultTypes)f.measurementMarkupManager.measurementResultTypes=a.measurementResultTypes;if(a&&a.coordinateFractionalDigits)f.measurementMarkupManager.coordinateFractionalDigits=a.coordinateFractionalDigits;if(a&&a.degreeFormat)f.measurementMarkupManager.degreeFormat=a.degreeFormat.toLowerCase();if(a&&a.angleDirectionSystem)f.measurementMarkupManager.angleDirectionSystem=a.angleDirectionSystem.toLowerCase();if(this._measurementWkid!==-1)this._measurementSpatialReference=new esri.SpatialReference(this._measurementWkid);
this.app.map&&this.app.map.loaded?this._onMapLoaded():this.app.event("MapLoadedEvent").subscribe(this,this._onMapLoaded)};b.prototype._onMapLoaded=function(){this._currentSpatialReference=this.app.map.spatialReference;if(!this._measurementSpatialReference)this._measurementSpatialReference=this._currentSpatialReference};b.prototype._registerCommands=function(){this.app.command("MeasureDistance").register(this,this._executeMeasurementCommand,this._canExecuteMeasureDistance);this.app.command("MeasureArea").register(this,
this._executeMeasurementCommand,this._canExecuteMeasureArea);this.app.command("SetMeasurementUnits").register(this,this._setMeasurementUnits)};b.prototype._canExecuteMeasureArea=function(a){if(a instanceof e.infrastructure.Feature&&a.featureSet.isMeasurement)return false;var g=this._retrieveGeometry(a),b=e.infrastructure.GeometryUtils.getGeometryService(this.app),a=a instanceof f.LineSegmentDescriptor;return g?!(!g||!b||!(a||g instanceof esri.geometry.Polygon)):false};b.prototype._canExecuteMeasureDistance=
function(a){if(a instanceof e.infrastructure.Feature&&a.featureSet.isMeasurement)return false;var g=this._retrieveGeometry(a),b=e.infrastructure.GeometryUtils.getGeometryService(this.app),a=a instanceof f.LineSegmentDescriptor;return g?!(!g||!b||!(a||g instanceof esri.geometry.Polyline)):false};b.prototype._executeMeasurementCommand=function(a,g,b){var d=this,e=function(a){for(var g=0,a=a.hasOwnProperty("rings")?a.rings:a.paths,b=0;b<a.length;b++)g+=a[b].length-1;return g},j=function(a){d.app.command("ClearDefaultHighlights").execute();
f.measurementMarkupManager._createMeasurementMarkupFromGeometry(a)};if(a instanceof f.DescriptorBase)this._executeMeasurement(a,g,b);else{var i=this._retrieveGeometry(a);i&&(a=e(i),a>this._segmentWarningThreshold?this.app.command("Confirm").execute(this.app.getResource(this.libraryId,"language-measurement-high-line-segments-warning").format(a),null,function(a){a&&j(i)}):j(i))}};b.prototype._retrieveGeometry=function(a){var g=null;if(a)if(a instanceof f.DescriptorBase||a instanceof esri.Graphic)g=
a.geometry;else if(a instanceof esri.geometry.Geometry)g=a;else if(a instanceof d.essentialsHtmlViewer.mapping.infrastructure.Feature&&a.esriFeature&&(a=a.esriFeature.get()))g=a.geometry;return g};b.prototype._executeMeasurement=function(a,g,b){var d=this;f.measurementMarkupManager.measurementInProgress.get()||f.measurementMarkupManager.measurementInProgress.set(true);switch(a.type){case 0:this._processLineSegment(a,function(a){var e=f.measurementMarkupManager.getGeometryDescriptorById(a.id);a.isActive=
e?e.isActive:false;d.app.command("_addLineSegmentMeasurementMarkup").execute(a,g,function(a){d._tryErrorCallback(b,a)})},function(a){d._tryErrorCallback(b,a)});break;case 1:this.app.command("_addCompletedGeometryMeasurementMarkup").execute(a,g,function(a){d._tryErrorCallback(b,a)});break;case 2:d._processPolygon(a,function(a){d.app.command("_addCompletedGeometryMeasurementMarkup").execute(a,g,b)},function(a){d._tryErrorCallback(b,a)});break;default:d._tryErrorCallback(b,Error("Invalid Descriptor Type"))}};
b.prototype._processLineSegment=function(a,g,b){var d=this,e=a instanceof f.LineSegmentDescriptor?a.geometry:a,e=e instanceof Array?e:[e];this._tryProject(e,d._measurementSpatialReference,function(e){d._measurePolylineLengths(e,d._measurementLengthUnits,function(b){b={length:b.lengths[0],serverResponse:b};a instanceof f.LineSegmentDescriptor?(a.setMeasurementUnit(d._measurementLengthUnits),a.length=b.length,g(a)):g(b)},function(a){d._tryErrorCallback(b,a)})},function(a){d._projectionError(a);d._tryErrorCallback(b,
a)})};b.prototype._processPolygon=function(a,g,b){var d=this,j=function(b,h){a.area=b;a.simplifiedGeometry=h;a.unit||a.setMeasurementUnit(d._measurementLengthUnits,d._measurementAreaUnits);g(a)};if(a instanceof f.GeometryDescriptor&&a._lineSegments.length===2)j(0,null);else{var i=a instanceof f.GeometryDescriptor?a.geometry:a,i=i instanceof Array?i:[i];e.infrastructure.GeometryUtils.getGeometryService(this.app).simplify(i,function(e){d._tryProject(e,d._measurementSpatialReference,function(i){d._measurePolygonAreaAndPerimeter(i,
d._measurementLengthUnits,d._measurementAreaUnits,function(b){b={area:b.areas[0],perimeter:b.lengths[0],serverResponse:b};a instanceof f.GeometryDescriptor?j(b.area,e[0]):g(b)},function(a){d._tryErrorCallback(b,a)})},function(a){d._projectionError(a);d._tryErrorCallback(b,a)})},function(a){d._tryErrorCallback(b,a)})}};b.prototype._tryProject=function(a,g,b,e){if(d.essentials.GeometryUtilities.spatialRefsAreEqual(this._currentSpatialReference,g,false))b(a);else{var f=new esri.tasks.ProjectParameters;
f.geometries=a;f.outSR=g;this._calculationType="planar";var k=this;d.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.project(f,b,function(a){k._tryErrorCallback(e,a)},this.app)}};b.prototype._measurePolylineLengths=function(a,g,b,d){var j=this,i=false;if(g===f.measurementMarkupManager.GCX_UNIT_YARDS)g=esri.tasks.GeometryService.UNIT_FOOT,i=true;var l=new esri.tasks.LengthsParameters;l.calculationType=this._calculationType;if(this._calculationType!="preserveShape")l.geodesic=this._calculationType!=
"planar";l.lengthUnit=g;l.polylines=a;e.infrastructure.GeometryUtils.getGeometryService(this.app).lengths(l,function(a){if(i)for(var g=0;g<a.lengths.length;g++)a.lengths[g]=f.MeasurementUtils.convertLength(a.lengths[g],esri.tasks.GeometryService.UNIT_FOOT,f.measurementMarkupManager.GCX_UNIT_YARDS);b(a)},function(a){j._tryErrorCallback(d,a)})};b.prototype._measurePolygonAreaAndPerimeter=function(a,g,b,d,j){var i=this,l=false;if(g===f.measurementMarkupManager.GCX_UNIT_YARDS)g=esri.tasks.GeometryService.UNIT_FOOT,
l=true;var s=false;if(b===f.measurementMarkupManager.GCX_UNIT_SQ_NAUTICAL_MILES)b=esri.tasks.GeometryService.UNIT_SQUARE_MILES,s=true;var m=new esri.tasks.AreasAndLengthsParameters;m.lengthUnit=g;m.areaUnit=b;m.calculationType=this._calculationType;m.polygons=a;e.infrastructure.GeometryUtils.getGeometryService(this.app).areasAndLengths(m,function(a){if(l)for(var g=0;g<a.lengths.length;g++)a.lengths[g]=f.MeasurementUtils.convertLength(a.lengths[g],esri.tasks.GeometryService.UNIT_FOOT,f.measurementMarkupManager.GCX_UNIT_YARDS);
if(s)for(g=0;g<a.areas.length;g++)a.areas[g]=f.MeasurementUtils.convertArea(a.areas[g],esri.tasks.GeometryService.UNIT_SQUARE_MILES,f.measurementMarkupManager.GCX_UNIT_SQ_NAUTICAL_MILES);d(a)},function(a){i._tryErrorCallback(j,a)})};b.prototype._setMeasurementUnits=function(a,g){this._measurementLengthUnits=f.MeasurementUtils.getGeometryServiceUnitConstant(a);this._measurementAreaUnits=f.MeasurementUtils.getGeometryServiceUnitConstant(g);f.measurementMarkupManager._updateMeasurementUnits(this._measurementLengthUnits,
this._measurementAreaUnits)};b.prototype._projectionError=function(a){f.measurementMarkupManager._reportStatus("language-measurement-projection-error","alert",true,[this._measurementWkid,a])};b.prototype._tryErrorCallback=function(a,g){a&&a(g)};return b}(d.framework.application.ModuleBase);f.MeasurementModule=i})(f.measurement||(f.measurement={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(j){function b(a,g,b,f){j.call(this,g,b,f);this._lineSegments=[];this.showHighlightedLabel=true;this.highlightedLabelGraphic=null;this.editingInProgress=false;this.originalZoomLevel=0;this.id=a;this.length=0;this.originalZoomLevel=f.map.getZoom();g===2?(this.graphicSymbol=d.essentialsHtmlViewer.mapping.infrastructure.SymbolUtils.defaultFillSymbol(),this.area=0,this.simplifiedGeometry=this.areaUnitStr=this.areaUnit=null):
this.graphicSymbol=d.essentialsHtmlViewer.mapping.infrastructure.SymbolUtils.defaultLineSymbol();if((a=this.app.toolRegistry.getActiveTool())&&a instanceof e.infrastructure.tools.MapTool)this.drawMode=a.drawMode}__extends(b,j);b.prototype.addSegment=function(a){a.id=this.id;a.isActive=this.isActive;if(this.lengthUnit==null&&a.lengthUnit!=null)a.unitStr?(this.lengthUnit=a.lengthUnit,this.unitStr=a.unitStr):(this.setMeasurementUnit(a.lengthUnit),a.unitStr=this.unitStr);this.lengthUnit!=null&&a.lengthUnit!=
null&&this.lengthUnit!=a.lengthUnit&&f.measurementMarkupManager._reportStatus("GeometryDescriptor: Added line segment unit differs from geometry.","error",true);a.length?this.length=this.length?this.length+a.length:a.length:f.measurementMarkupManager._reportStatus("GeometryDescriptor: Line Segment added without computing length or length 0. Total geometry length not updated.","warning",false);if(a.graphicSymbol&&!this.graphicSymbol&&this.type===1)this.graphicSymbol=new esri.symbol.SimpleLineSymbol(a.graphicSymbol.toJson());
this._lineSegments.push(a)};b.prototype.setMeasurementUnit=function(a,g){var b=false;if(this.areaUnit!=null&&this.areaUnit!=g||this.areaUnit==null&&g&&this.type===2){if(this.area&&this.areaUnit!=null)this.area=f.MeasurementUtils.convertArea(this.area,this.areaUnit,g);this.areaUnit=g;this.areaUnitStr=f.MeasurementUtils.getUnitString(this.areaUnit);b=true}if(this.lengthUnit!=null&&this.lengthUnit!=a||this.lengthUnit==null&&a!=null){for(b=this.length=0;b<this._lineSegments.length;b++)this._lineSegments[b].setMeasurementUnit(a),
this.length+=this._lineSegments[b].length;this.unitStr=f.MeasurementUtils.getUnitString(a);this.lengthUnit=a;b=true}if(b&&(this.labelStr=this.type===1?this._getResource("language-measurement-polyline-final-markup-label").format(this.length.toFixed(2),this.unitStr):this._getResource("language-measurement-polygon-final-markup-label").format(this.area.toFixed(2),this.areaUnitStr,this.length.toFixed(2),this.unitStr),this.highlightedLabelGraphic&&(f.MeasurementUtils.refreshHighlightSymbolSize(this.labelStr,
this.highlightedLabelGraphic.highlightSymbol,this.highlightedLabelGraphic.textSymbol.font.family||"Arial",this.highlightedLabelGraphic.textSymbol.font.size||"12px"),this.highlightedLabelGraphic.highlightGraphic.setSymbol(this.highlightedLabelGraphic.highlightSymbol),this.highlightedLabelGraphic.textSymbol.setText(this.labelStr),this.highlightedLabelGraphic.textGraphic.setSymbol(this.highlightedLabelGraphic.textSymbol)),this.measurementData)){this.updateFeature();this.measurementData.features.getAt(0).loadAttributes(false);
for(b=1;b<this.measurementData.features.length();b++)this._lineSegments[b-1].updateFeature(),this._lineSegments[b-1].feature.attributes.Segment=b.toString(),this.measurementData.features.getAt(b).loadAttributes(false);this._formatMeasurementData();for(b=0;b<this.measurementData.features.length();b++)this.app.event("FeatureChangedEvent").publish(this.measurementData.features.getAt(b))}};b.prototype.setGeometry=function(a){d.essentials.GeometryUtilities.spatialRefsAreEqual(a.spatialReference,this.spatialReference,
false)?this.geometry=a:f.measurementMarkupManager._reportStatus("GeometryDescriptor: setGeometry error: Invalid Spatial Reference","error",true)};b.prototype.addLabelsToMap=function(a){for(var g=[],b=0;b<this._lineSegments.length;b++)this._lineSegments[b].showLabel&&g.push(this._lineSegments[b].addLabelToMap(a));return g};b.prototype.refreshLabelVisibilities=function(){if(!this.editingInProgress){this.showHighlightedLabel=false;for(var a=this.app.map.getZoom()>=this.originalZoomLevel,g=0;g<this._lineSegments.length;g++)this._lineSegments[g].refreshLabelVisibility(),
this.showHighlightedLabel=this.showHighlightedLabel||a||this._lineSegments[g].showLabel;this.showHighlightedLabel?this.highlightedLabelGraphic&&this.highlightedLabelGraphic.highlightGraphic&&this.highlightedLabelGraphic.textGraphic&&(this.highlightedLabelGraphic.highlightGraphic.show(),this.highlightedLabelGraphic.textGraphic.show()):this.highlightedLabelGraphic&&this.highlightedLabelGraphic.highlightGraphic&&this.highlightedLabelGraphic.textGraphic&&(this.highlightedLabelGraphic.highlightGraphic.hide(),
this.highlightedLabelGraphic.textGraphic.hide())}};b.prototype.refreshMeasurementData=function(){var a=this.drawMode||e.infrastructure.tools.DrawMode.POLYGON,g=new esri.tasks.FeatureSet;this.updateFeature();g.features.push(this.feature);if([e.infrastructure.tools.DrawMode.CIRCLE,e.infrastructure.tools.DrawMode.ELLIPSE,e.infrastructure.tools.DrawMode.FREEHAND_POLYGON,e.infrastructure.tools.DrawMode.FREEHAND_POLYLINE].indexOf(this.drawMode)<0)for(var b=0;b<this._lineSegments.length;b++)this._lineSegments[b].updateFeature(),
this._lineSegments[b].feature.attributes.Segment=(b+1).toString(),g.features.push(this._lineSegments[b].feature);this.measurementData?(this.measurementData.esriFeatureSet=g,this.measurementData.loadFeatures()):(this.measurementData=new e.infrastructure.FeatureSet({esriFeatureSet:g}),this.measurementData.displayName.set(this._getDisplayName()),this.measurementData.isSelectedInCollection.set(true),this.measurementData.isMeasurement=true,this._setAttributeMetadata(this.measurementData.attributes));this._formatMeasurementData();
f.measurementMarkupManager.measurementResultTypes.indexOf(a)>=0&&(a=f.measurementMarkupManager.getMeasurementResultsCollection(),a.featureSets.addItem(this.measurementData),this.app.featureSetManager.openCollection(a.id),this.app.featureSetManager.closeCollection(a.id))};b.prototype.setInactive=function(){this.isActive=false;for(var a=0;a<this._lineSegments.length;a++)this._lineSegments[a].isActive=false};b.prototype._createAttributes=function(){var a={};a.Segment=this._getResource("language-measurement-results-total");
a.X=this._lineSegments[0].mapPointStart.x;a.Y=this._lineSegments[0].mapPointStart.y;a.Length=this.length;a.Units=this.unitStr;a.Area=this.area;a["Area Units"]=this.areaUnitStr;a.Angle=0;a.Bearing="";return a};b.prototype._formatMeasurementData=function(){for(var a=0;a<this.measurementData.features.length();a++){var g=this.measurementData.features.getAt(a);a==0?(g.labelFormat.set(this._getResource("language-measurement-results-feature-label-total").format(this.measurementData.displayName.get())),g.descriptionFormat.set(this._getResource("language-measurement-results-feature-description-"+
this.geometry.type))):(g.labelFormat.set(this._getResource("language-measurement-results-feature-label-segment").format(this.measurementData.displayName.get(),a)),g.descriptionFormat.set(this._getResource("language-measurement-results-feature-description-segment")));for(var b=0;b<g.attributes.length();b++){var d=g.attributes.getAt(b),j=d.name.get(),i=d.value.get();a==0&&(j=="X"||j=="Y"||j=="Angle")?d.presentableValue.set(""):(a>0||this.geometry.type==="polyline")&&j==="Area"?d.presentableValue.set(""):
j==="X"||j=="Y"?d.presentableValue.set(this._formatMeasurement(i,f.measurementMarkupManager.coordinateFractionalDigits)):j==="Length"||j==="Area"?d.presentableValue.set(this._formatMeasurement(i,2)):j==="Angle"&&d.presentableValue.set(e.infrastructure.CoordinateUtils.formatAngle(i,f.measurementMarkupManager.degreeFormat,this.app,f.measurementMarkupManager.coordinateFractionalDigits))}this._setAttributeMetadata(g.attributes)}};b.prototype._setAttributeMetadata=function(a){for(var g=0;g<a.length();g++){var b=
a.getAt(g);switch(b.name.get()){case "Segment":b.displayName.set(this._getResource("language-measurement-results-field-segment"));b.type.set(d.essentials.EssentialsFieldTypes.essentialsFieldTypeString);break;case "X":b.displayName.set(this._getResource("language-measurement-results-field-x"));b.type.set(d.essentials.EssentialsFieldTypes.essentialsFieldTypeDouble);break;case "Y":b.displayName.set(this._getResource("language-measurement-results-field-y"));b.type.set(d.essentials.EssentialsFieldTypes.essentialsFieldTypeDouble);
break;case "Length":b.displayName.set(this._getResource("language-measurement-results-field-length"));b.type.set(d.essentials.EssentialsFieldTypes.essentialsFieldTypeDouble);break;case "Units":b.displayName.set(this._getResource("language-measurement-results-field-units"));b.type.set(d.essentials.EssentialsFieldTypes.essentialsFieldTypeString);break;case "Area":b.displayName.set(this._getResource("language-measurement-results-field-area"));b.type.set(d.essentials.EssentialsFieldTypes.essentialsFieldTypeDouble);
break;case "Area Units":b.displayName.set(this._getResource("language-measurement-results-field-area-units"));b.type.set(d.essentials.EssentialsFieldTypes.essentialsFieldTypeString);break;case "Angle":b.displayName.set(this._getResource("language-measurement-results-field-angle"));b.type.set(d.essentials.EssentialsFieldTypes.essentialsFieldTypeDouble);break;case "Bearing":b.displayName.set(this._getResource("language-measurement-results-field-bearing")),b.type.set(d.essentials.EssentialsFieldTypes.essentialsFieldTypeString)}}};
b.prototype._getDisplayName=function(){for(var a=1,g=this.drawMode||e.infrastructure.tools.DrawMode.POLYGON,b=0;b<f.measurementMarkupManager.descriptorContainer.length;b++)(f.measurementMarkupManager.descriptorContainer[b].drawMode||e.infrastructure.tools.DrawMode.POLYGON)===g&&f.measurementMarkupManager.descriptorContainer[b].id!==this.id&&a++;g=this._getResource("language-measurement-drawmode-"+g.toLowerCase().replace("_","-"));return this._getResource("language-measurement-results-feature-set-name").format(g,
a)};return b}(f.DescriptorBase);f.GeometryDescriptor=i})(f.measurement||(f.measurement={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){var i=function(j){function b(a,g){j.call(this,0,a,g);this.textSymbol=this.mapPointEnd=this.mapPointStart=null;this.showLabel=false;this.labelGraphic=null;this.geometry=new esri.geometry.Polyline(a);this.length=0;this.labelLocation={mapPoint:null,angle:null,xOffset:null,yOffset:null,xOffsetMirrored:null,yOffsetMirrored:null};this.labelSize={width:null,height:null,sizeAdjustmentFactor:1}}__extends(b,j);b.prototype.setStartPt=function(a){a?
(this.mapPointStart=new esri.geometry.Point(a.toJson()),this.geometry.paths.length===0?this.geometry.addPath([this.mapPointStart]):this.geometry.insertPoint(0,0,this.mapPointStart)):f.measurementMarkupManager._reportStatus("LineSegmentDescriptor: setStartPt - Start point not specified","error",false)};b.prototype.setEndPt=function(a){a?(this.mapPointEnd=new esri.geometry.Point(a.toJson()),this.geometry.paths.length===1?this.geometry.insertPoint(0,1,this.mapPointEnd):f.measurementMarkupManager._reportStatus("LineSegmentDescroptor: setEndPt - Please set startPt of segment before setting endPt",
"error",false)):f.measurementMarkupManager._reportStatus("LineSegmentDescriptor: setEndPt - End point not specified","error",false)};b.prototype.setMeasurementUnit=function(a,g){if(this.lengthUnit!=null&&this.lengthUnit!=a||this.lengthUnit==null&&a!=null){if(this.length&&this.lengthUnit!=null)this.length=f.MeasurementUtils.convertLength(this.length,this.lengthUnit,a);this.lengthUnit=a;this.unitStr=g?g:f.MeasurementUtils.getUnitString(this.lengthUnit);this.labelGraphic&&this.textSymbol&&(this.textSymbol.setText(this.length.toFixed(2)+
" "+this.unitStr),this.labelGraphic.setSymbol(this.textSymbol))}};b.prototype.addLabelToMap=function(a){if(!this.labelGraphic&&(this.labelGraphic=new esri.Graphic,this.labelLocation))this.labelGraphic.geometry=this.labelLocation.mapPoint,this.labelGraphic.symbol=this.textSymbol;this.labelGraphic.measurementId=this.id;a=j.prototype.addToMap.call(this,a,this.labelGraphic);this.showLabel||a.hide();return a};b.prototype.refreshLabelVisibility=function(){if(this.labelGraphic&&this.labelSize)(this.showLabel=
this.labelSize.width*this.labelSize.sizeAdjustmentFactor<f.MeasurementUtils.getRenderedLineSegmentLength(this)?true:false)?this.labelGraphic.show():this.labelGraphic.hide()};b.prototype._createAttributes=function(){var a={};a.Segment=this.id;a.X=this.mapPointStart.x;a.Y=this.mapPointStart.y;a.Length=this.length;a.Units=this.unitStr;a.Area=0;a["Area Units"]="";a.Angle=this.getAngle();a.Bearing=this.getQuadrantBearing();return a};b.prototype.getAngle=function(){return f.measurementMarkupManager.angleDirectionSystem===
d.infrastructure.AngleDirectionSystem.NORTH_AZIMUTH?this.getNorthAzimuth():f.measurementMarkupManager.angleDirectionSystem===d.infrastructure.AngleDirectionSystem.SOUTH_AZIMUTH?this.getSouthAzimuth():this.getPolarAngle()};b.prototype.getPolarAngle=function(){return(Math.atan2(this.mapPointEnd.y-this.mapPointStart.y,this.mapPointEnd.x-this.mapPointStart.x)*180/Math.PI+360)%360};b.prototype.getNorthAzimuth=function(){return(360-this.getPolarAngle()+90)%360};b.prototype.getSouthAzimuth=function(){return(360-
this.getPolarAngle()+270)%360};b.prototype.getQuadrantBearing=function(){return d.infrastructure.CoordinateUtils.formatBearing(this.getNorthAzimuth(),f.measurementMarkupManager.degreeFormat,this.app,f.measurementMarkupManager.coordinateFractionalDigits)};return b}(f.DescriptorBase);f.LineSegmentDescriptor=i})(f.measurement||(f.measurement={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(f){var j=null,b=null,a={};f.getUnitString=function(a,b){b===void 0&&(b=false);var d="";if(!a)return d;switch(a){case esri.Units.FEET:case esri.tasks.GeometryService.UNIT_FOOT:case e.measurementMarkupManager.unit.feet.shortName:case e.measurementMarkupManager.unit.feet.longName:case e.measurementMarkupManager.unit.feet.config:d=b?e.measurementMarkupManager.unit.feet.longName:e.measurementMarkupManager.unit.feet.shortName;break;
case esri.Units.YARDS:case e.measurementMarkupManager.GCX_UNIT_YARDS:case e.measurementMarkupManager.unit.yard.shortName:case e.measurementMarkupManager.unit.yard.longName:case e.measurementMarkupManager.unit.yard.config:d=b?e.measurementMarkupManager.unit.yard.longName:e.measurementMarkupManager.unit.yard.shortName;break;case esri.Units.METERS:case esri.tasks.GeometryService.UNIT_METER:case e.measurementMarkupManager.unit.meter.shortName:case e.measurementMarkupManager.unit.meter.longName:case e.measurementMarkupManager.unit.meter.config:d=
b?e.measurementMarkupManager.unit.meter.longName:e.measurementMarkupManager.unit.meter.shortName;break;case esri.Units.KILOMETERS:case esri.tasks.GeometryService.UNIT_KILOMETER:case e.measurementMarkupManager.unit.kilometer.shortName:case e.measurementMarkupManager.unit.kilometer.longName:case e.measurementMarkupManager.unit.kilometer.config:d=b?e.measurementMarkupManager.unit.kilometer.longName:e.measurementMarkupManager.unit.kilometer.shortName;break;case esri.Units.MILES:case esri.tasks.GeometryService.UNIT_STATUTE_MILE:case e.measurementMarkupManager.unit.mile.shortName:case e.measurementMarkupManager.unit.mile.longName:case e.measurementMarkupManager.unit.mile.config:d=
b?e.measurementMarkupManager.unit.mile.longName:e.measurementMarkupManager.unit.mile.shortName;break;case esri.Units.NAUTICAL_MILES:case esri.tasks.GeometryService.UNIT_NAUTICAL_MILE:case e.measurementMarkupManager.unit.nauticalMile.shortName:case e.measurementMarkupManager.unit.nauticalMile.longName:case e.measurementMarkupManager.unit.nauticalMile.config:d=b?e.measurementMarkupManager.unit.nauticalMile.longName:e.measurementMarkupManager.unit.nauticalMile.shortName;break;case esri.tasks.GeometryService.UNIT_SQUARE_FEET:case esri.Units.SQUARE_FEET:case e.measurementMarkupManager.unit.sqFeet.shortName:case e.measurementMarkupManager.unit.sqFeet.longName:case e.measurementMarkupManager.unit.sqFeet.config:d=
b?e.measurementMarkupManager.unit.sqFeet.longName:e.measurementMarkupManager.unit.sqFeet.shortName;break;case esri.tasks.GeometryService.UNIT_SQUARE_METERS:case esri.Units.SQUARE_METERS:case e.measurementMarkupManager.unit.sqMeter.shortName:case e.measurementMarkupManager.unit.sqMeter.longName:case e.measurementMarkupManager.unit.sqMeter.config:d=b?e.measurementMarkupManager.unit.sqMeter.longName:e.measurementMarkupManager.unit.sqMeter.shortName;break;case esri.tasks.GeometryService.UNIT_SQUARE_KILOMETERS:case esri.Units.SQUARE_KILOMETERS:case e.measurementMarkupManager.unit.sqKilometer.shortName:case e.measurementMarkupManager.unit.sqKilometer.longName:case e.measurementMarkupManager.unit.sqKilometer.config:d=
b?e.measurementMarkupManager.unit.sqKilometer.longName:e.measurementMarkupManager.unit.sqKilometer.shortName;break;case esri.tasks.GeometryService.UNIT_SQUARE_MILES:case esri.Units.SQUARE_MILES:case e.measurementMarkupManager.unit.sqMile.shortName:case e.measurementMarkupManager.unit.sqMile.longName:case e.measurementMarkupManager.unit.sqMile.config:d=b?e.measurementMarkupManager.unit.sqMile.longName:e.measurementMarkupManager.unit.sqMile.shortName;break;case esri.tasks.GeometryService.UNIT_SQUARE_YARDS:case esri.Units.SQUARE_YARDS:case e.measurementMarkupManager.unit.sqYard.shortName:case e.measurementMarkupManager.unit.sqYard.longName:case e.measurementMarkupManager.unit.sqYard.config:d=
b?e.measurementMarkupManager.unit.sqYard.longName:e.measurementMarkupManager.unit.sqYard.shortName;break;case e.measurementMarkupManager.GCX_UNIT_SQ_NAUTICAL_MILES:case e.measurementMarkupManager.unit.sqNauticalMile.shortName:case e.measurementMarkupManager.unit.sqNauticalMile.longName:case e.measurementMarkupManager.unit.sqNauticalMile.config:d=b?e.measurementMarkupManager.unit.sqNauticalMile.longName:e.measurementMarkupManager.unit.sqNauticalMile.shortName;break;case esri.tasks.GeometryService.UNIT_ACRES:case esri.Units.ACRES:case e.measurementMarkupManager.unit.acre.shortName:case e.measurementMarkupManager.unit.acre.longName:case e.measurementMarkupManager.unit.acre.config:d=
b?e.measurementMarkupManager.unit.acre.longName:e.measurementMarkupManager.unit.acre.shortName;break;case esri.tasks.GeometryService.UNIT_HECTARES:case esri.Units.HECTARES:case e.measurementMarkupManager.unit.hectare.shortName:case e.measurementMarkupManager.unit.hectare.longName:case e.measurementMarkupManager.unit.hectare.config:d=b?e.measurementMarkupManager.unit.hectare.longName:e.measurementMarkupManager.unit.hectare.shortName}return d};f.getGeometryServiceUnitConstant=function(a,b){if(!a)return null;
var f=null;switch(a){case esri.Units.ACRES:case e.measurementMarkupManager.unit.acre.longName:case e.measurementMarkupManager.unit.acre.shortName:case e.measurementMarkupManager.unit.acre.config:case esri.tasks.GeometryService.UNIT_ACRES.toString():f=esri.tasks.GeometryService.UNIT_ACRES;break;case esri.Units.ARES:case esri.tasks.GeometryService.UNIT_ARES.toString():f=esri.tasks.GeometryService.UNIT_ARES;break;case e.measurementMarkupManager.unit.feet.longName:case e.measurementMarkupManager.unit.feet.shortName:case e.measurementMarkupManager.unit.feet.config:case d.essentials.DistanceUnitType.FEET:case esri.tasks.GeometryService.UNIT_FOOT.toString():case esri.Units.FEET:f=
esri.tasks.GeometryService.UNIT_FOOT;break;case esri.Units.HECTARES:case e.measurementMarkupManager.unit.hectare.longName:case e.measurementMarkupManager.unit.hectare.shortName:case e.measurementMarkupManager.unit.hectare.config:case esri.tasks.GeometryService.UNIT_HECTARES.toString():f=esri.tasks.GeometryService.UNIT_HECTARES;break;case e.measurementMarkupManager.unit.kilometer.longName:case e.measurementMarkupManager.unit.kilometer.shortName:case e.measurementMarkupManager.unit.kilometer.config:case d.essentials.DistanceUnitType.KILOMETERS:case esri.tasks.GeometryService.UNIT_KILOMETER.toString():case esri.Units.KILOMETERS:f=
esri.tasks.GeometryService.UNIT_KILOMETER;break;case e.measurementMarkupManager.unit.meter.longName:case e.measurementMarkupManager.unit.meter.shortName:case e.measurementMarkupManager.unit.meter.config:case d.essentials.DistanceUnitType.METERS:case esri.tasks.GeometryService.UNIT_METER.toString():case esri.Units.METERS:f=esri.tasks.GeometryService.UNIT_METER;break;case e.measurementMarkupManager.unit.mile.longName:case e.measurementMarkupManager.unit.mile.shortName:case e.measurementMarkupManager.unit.mile.config:case d.essentials.DistanceUnitType.MILES:case esri.tasks.GeometryService.UNIT_STATUTE_MILE.toString():case esri.Units.MILES:f=
esri.tasks.GeometryService.UNIT_STATUTE_MILE;break;case e.measurementMarkupManager.unit.nauticalMile.longName:case e.measurementMarkupManager.unit.nauticalMile.shortName:case e.measurementMarkupManager.unit.nauticalMile.config:case d.essentials.DistanceUnitType.NAUTICAL_MILES:case esri.tasks.GeometryService.UNIT_NAUTICAL_MILE.toString():case esri.Units.NAUTICAL_MILES:f=esri.tasks.GeometryService.UNIT_NAUTICAL_MILE;break;case e.measurementMarkupManager.unit.yard.longName:case e.measurementMarkupManager.unit.yard.shortName:case e.measurementMarkupManager.unit.yard.config:case d.essentials.DistanceUnitType.YARDS:case esri.Units.YARDS:f=
e.measurementMarkupManager.GCX_UNIT_YARDS;break;case esri.Units.SQUARE_CENTIMETERS:case esri.tasks.GeometryService.UNIT_SQUARE_CENTIMETERS.toString():f=esri.tasks.GeometryService.UNIT_SQUARE_CENTIMETERS;break;case esri.Units.SQUARE_DECIMETERS:case esri.tasks.GeometryService.UNIT_SQUARE_DECIMETERS.toString():f=esri.tasks.GeometryService.UNIT_SQUARE_DECIMETERS;break;case e.measurementMarkupManager.unit.sqFeet.longName:case e.measurementMarkupManager.unit.sqFeet.shortName:case e.measurementMarkupManager.unit.sqFeet.config:case esri.tasks.GeometryService.UNIT_SQUARE_FEET.toString():case esri.Units.SQUARE_FEET:f=
esri.tasks.GeometryService.UNIT_SQUARE_FEET;break;case esri.Units.SQUARE_INCHES:case esri.tasks.GeometryService.UNIT_SQUARE_INCHES.toString():f=esri.tasks.GeometryService.UNIT_SQUARE_INCHES;break;case e.measurementMarkupManager.unit.sqKilometer.longName:case e.measurementMarkupManager.unit.sqKilometer.shortName:case e.measurementMarkupManager.unit.sqKilometer.config:case esri.tasks.GeometryService.UNIT_SQUARE_KILOMETERS.toString():case esri.Units.SQUARE_KILOMETERS:f=esri.tasks.GeometryService.UNIT_SQUARE_KILOMETERS;
break;case e.measurementMarkupManager.unit.sqMeter.longName:case e.measurementMarkupManager.unit.sqMeter.shortName:case e.measurementMarkupManager.unit.sqMeter.config:case esri.tasks.GeometryService.UNIT_SQUARE_METERS.toString():case esri.Units.SQUARE_METERS:f=esri.tasks.GeometryService.UNIT_SQUARE_METERS;break;case e.measurementMarkupManager.unit.sqMile.longName:case e.measurementMarkupManager.unit.sqMile.shortName:case e.measurementMarkupManager.unit.sqMile.config:case esri.tasks.GeometryService.UNIT_SQUARE_MILES.toString():case esri.Units.SQUARE_MILES:f=
esri.tasks.GeometryService.UNIT_SQUARE_MILES;break;case e.measurementMarkupManager.unit.sqNauticalMile.longName:case e.measurementMarkupManager.unit.sqNauticalMile.shortName:case e.measurementMarkupManager.unit.sqNauticalMile.config:f=e.measurementMarkupManager.GCX_UNIT_SQ_NAUTICAL_MILES;break;case esri.Units.SQUARE_MILLIMETERS:case esri.tasks.GeometryService.UNIT_SQUARE_MILLIMETERS.toString():f=esri.tasks.GeometryService.UNIT_SQUARE_MILLIMETERS;break;case e.measurementMarkupManager.unit.sqYard.longName:case e.measurementMarkupManager.unit.sqYard.shortName:case e.measurementMarkupManager.unit.sqYard.config:case esri.tasks.GeometryService.UNIT_SQUARE_YARDS.toString():case esri.Units.SQUARE_YARDS:f=
esri.tasks.GeometryService.UNIT_SQUARE_YARDS;break;default:f=b||a}return f};f.addGraphicToLayer=function(a,b,d){return a?(b=this.getGraphicsLayer(b,true,d),b.add(a),b.visible||b.setVisibility(true),true):false};f.getGraphicsLayer=function(a,b,d){var e=d.map.getLayer(a);if(!e&&b)e=new esri.layers.GraphicsLayer,e.id=a,d.map.addLayer(e);return e};f.getLabelSize=function(g,d,e){for(var f=true,j=null,k=null,i=null,e=e!=void 0&&typeof e==="number"?e+"px":e,l=g.length,q=0,p=0;p<l;p++){var r=g.charAt(p),
r=r===" "?".":r;if(!a.hasOwnProperty(r)){if(f){var j=document.body,k=document.createElement("div"),i=document.createTextNode(r),f={fontFamily:d,fontSize:e,padding:"0",position:"absolute",lineHeight:"1",visibility:"hidden"},u=void 0;for(u in f)f.hasOwnProperty(u)&&(k.style[u]=f[u]);k.appendChild(i);j.appendChild(k);f=false}else i.nodeValue=r;b=b===null?k.clientHeight:b;a[r]=k.clientWidth}r=a[r];q+=r}j&&k&&j.removeChild(k);return{width:q,height:b}};f.getRenderedLineSegmentLength=function(a){if(!a||
!a.mapPointStart||!a.mapPointEnd)return null;var b=e.measurementMarkupManager.app.map.toScreen(a.mapPointStart),d=e.measurementMarkupManager.app.map.toScreen(a.mapPointEnd),a=Math.abs(d.x-b.x),b=Math.abs(d.y-b.y);return Math.sqrt(a*a+b*b)};f.plotPointOnMap=function(a,b,e,f){var j=new esri.Graphic;new dojo.Color(b);j.geometry=a;j.symbol=d.essentialsHtmlViewer.mapping.infrastructure.SymbolUtils.defaultMarkerSymbol();j.symbol.setColor(new esri.Color(b));this.addGraphicToLayer(j,e,f)};f.addHighlightedLabelToMap=
function(a,b,d,e,f,k,i,l,q,p,r,u){k===void 0&&(k=false);i===void 0&&(i=0);l===void 0&&(l=0);q===void 0&&(q="Arial");p===void 0&&(p="12px");r===void 0&&(r=new esri.Color("white"));u===void 0&&(u=new esri.Color("black"));var w=this.getLabelSize(a,q,p),x=w.height*0.5,y=w.width+x,z=w.height+x,i=k?y/2+i:i;l+=x;x=false;j?(j.textGraphic.getLayer()&&j.highlightGraphic.getLayer()&&(x=true),j.highlightGraphic.hide(),j.textGraphic.hide()):k&&(j={highlightGraphic:new esri.Graphic,highlightSymbol:new esri.symbol.SimpleMarkerSymbol,
textGraphic:new esri.Graphic,textSymbol:new esri.symbol.TextSymbol("")});var A=!k?new esri.Graphic:j.highlightGraphic,B=!k?new esri.symbol.SimpleMarkerSymbol:j.highlightSymbol,D=!k?new esri.Graphic:j.textGraphic,C=!k?new esri.symbol.TextSymbol(""):j.textSymbol;if(!k&&d)A.measurementId=d,D.measurementId=d;A.setGeometry(b);B.setStyle("STYLE_PATH");B.setPath("M0,0h"+y+"v"+z+"h-"+y+"z");B.setColor(u);B.setOutline(null);B.setSize(p);B.setOffset(i,w.height/4+l);A.setSymbol(B);(!k||k&&!x)&&this.addGraphicToLayer(A,
e,f);A.visible||A.show();D.setGeometry(b);b=new esri.symbol.Font;b.setSize(p);b.setFamily(q);C.setText(a);C.setFont(b);C.setColor(r);C.setAlign(esri.symbol.TextSymbol.ALIGN_MIDDLE);C.setOffset(i,l);D.setSymbol(C);(!k||k&&!x)&&this.addGraphicToLayer(D,e,f);D.visible||D.show();D.highlightedTextLabel=true;return{highlightGraphic:A,highlightSymbol:B,textGraphic:D,textSymbol:C}};f.refreshHighlightSymbolSize=function(a,b,d,e){d===void 0&&(d="Arial");e===void 0&&(e="12px");d=this.getLabelSize(a,d,e);e=d.height*
0.5;a=d.width+e;d=d.height+e;b&&(b.setStyle("STYLE_PATH"),b.setPath("M0,0h"+a+"v"+d+"h-"+a+"z"));return b};f.isLeftOfLine=function(a,b){var d=a.mapPointStart,e=a.mapPointEnd;return(e.x-d.x)*(b.y-d.y)>(e.y-d.y)*(b.x-d.x)};f.convertLength=function(a,b,d){var f=0;switch(b){case esri.tasks.GeometryService.UNIT_METER:f=a*3.280839895013;break;case esri.tasks.GeometryService.UNIT_KILOMETER:f=a*3280.839895013123;break;case esri.tasks.GeometryService.UNIT_STATUTE_MILE:f=a*5280;break;case esri.tasks.GeometryService.UNIT_NAUTICAL_MILE:f=
a*6076.12;break;case e.measurementMarkupManager.GCX_UNIT_YARDS:f=a*3;break;default:f=a}switch(d){case esri.tasks.GeometryService.UNIT_METER:return f/3.280839895013;case esri.tasks.GeometryService.UNIT_KILOMETER:return f/3280.839895013123;case esri.tasks.GeometryService.UNIT_STATUTE_MILE:return f/5280;case esri.tasks.GeometryService.UNIT_NAUTICAL_MILE:return f/6076.12;case e.measurementMarkupManager.GCX_UNIT_YARDS:return f/3;default:return f}};f.convertArea=function(a,b,d){var f=0;switch(b){case esri.tasks.GeometryService.UNIT_SQUARE_METERS:f=
a*10.76391041670891;break;case esri.tasks.GeometryService.UNIT_SQUARE_KILOMETERS:f=a*1.076391041670972E7;break;case esri.tasks.GeometryService.UNIT_SQUARE_MILES:f=a*27878400;break;case esri.tasks.GeometryService.UNIT_SQUARE_YARDS:f=a*9;break;case esri.tasks.GeometryService.UNIT_ACRES:f=a*43560;break;case esri.tasks.GeometryService.UNIT_HECTARES:f=a*107639;break;case e.measurementMarkupManager.GCX_UNIT_SQ_NAUTICAL_MILES:f=a*3.69192342544E7;break;default:f=a}switch(d){case esri.tasks.GeometryService.UNIT_SQUARE_METERS:return f/
10.76391041670891;case esri.tasks.GeometryService.UNIT_SQUARE_KILOMETERS:return f/1.076391041670972E7;case esri.tasks.GeometryService.UNIT_SQUARE_MILES:return f/27878400;case e.measurementMarkupManager.GCX_UNIT_SQ_NAUTICAL_MILES:return f/3.69192342544E7;case esri.tasks.GeometryService.UNIT_SQUARE_YARDS:return f/9;case esri.tasks.GeometryService.UNIT_ACRES:return f/43560;case esri.tasks.GeometryService.UNIT_HECTARES:return f/107639;default:return f}}})(e.MeasurementUtils||(e.MeasurementUtils={}))})(e.measurement||
(e.measurement={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(j){function b(a,g){var b=this;j.call(this,a,g);this.mapMouseHoverToken=this.keyDownHandlerToken=this.drawEndHandlerToken=this.clickHandlerToken=null;this._toolSuspended=false;this.app.command("_suspendMeasurementToolIfActive").register(this,function(){if(f.measurementMarkupManager._toolActive){if(b._drawIsActive&&b._drawObject)b._toolSuspended=true,b._drawObject.deactivate()}else b.app.command("ClearActiveTool").execute()});
this.app.command("_resumeMeasurementToolIfSuspended").register(this,function(){if(b._toolSuspended&&b._drawObject)b._toolSuspended=false,b._drawObject.activate(esri.toolbars.Draw[b.drawMode])})}__extends(b,j);b.prototype.onActivated=function(){var a=this;if(!(this.drawMode===e.infrastructure.tools.DrawMode.POLYLINE||this.drawMode===e.infrastructure.tools.DrawMode.POLYGON))return j.prototype.onActivated.call(this);if(!this._drawObject){this._drawObject=this.app.accessibilityManager.createComponent("geocortex.accessibility.draw",
this.app.map,{enableEditing:false});this._drawObject.setFillSymbol(new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color([0,0,0,0.8]),2),new esri.Color([0,0,0,0.25])));this._drawObject.setLineSymbol(new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color([0,0,0,0.8]),2));this._drawObject.setRespectDrawingVertexOrder(true);var g=null,b=function(a){g.executeDrawEnd(a);
g=null},o=function(g){if(g.which===27||g.keyCode===27)a.isSticky?(a.onDeactivated(),a.onActivated()):a.setActive(false)};if(!this.clickHandlerToken||!this.drawEndHandlerToken)this.clickHandlerToken=this.app.event("GraphicVertexAddedEvent").subscribe(this,function(b){if(b&&b.sender===a._drawObject){if(!g||g._drawEndInvoked)g=new f.MeasurementOperation(a);g.plotPoint(b)}}),this.drawEndHandlerToken=dojo.aspect.after(this._drawObject,"onDrawEnd",b,true);if(!this.keyDownHandlerToken)this.keyDownHandlerToken=
this.app.map.on("key-down",o);if(this._drawObject instanceof d.essentialsHtmlViewer.mapping.infrastructure.accessibility.Draw&&!this._inputMethodChangeHandle)this._inputMethodChangeHandle=dojo.aspect.after(this._drawObject,"onInputMethodChange",dojo.hitch(this,"onInputMethodChange"),true)}if(this._drawIsActive)this._drawObject.deactivate(),this._drawIsActive=false;if(!this.app.map.graphics)return setTimeout(function(){f.measurementMarkupManager._reportStatus("language-measurement-null-graphics-error",
"alert",true)},0),false;this.mapMouseHoverToken=this.app.event("MapMouseHoverEvent").subscribe(this,this.onMapMouseHover);this._drawObject.activate(esri.toolbars.Draw[this.drawMode]);this._drawIsActive=true;return f.measurementMarkupManager._toolActive=true};b.prototype.onDeactivated=function(){j.prototype.onDeactivated.call(this);if(this.clickHandlerToken)this.app.event("GraphicVertexAddedEvent").unsubscribe(this.clickHandlerToken),this.clickHandlerToken=null;if(this.drawEndHandlerToken)this.drawEndHandlerToken.remove(),
this.drawEndHandlerToken=null;if(this.keyDownHandlerToken)this.keyDownHandlerToken.remove(),this.keyDownHandlerToken=null;if(this._inputMethodChangeHandle)this._inputMethodChangeHandle.remove(),this._inputMethodChangeHandle=null;if(this.mapMouseHoverToken)this.app.event("MapMouseHoverEvent").unsubscribe(this.mapMouseHoverToken),this.mapMouseHoverToken=null;f.measurementMarkupManager.deactivatePredictiveMeasurements();f.measurementMarkupManager.measurementInProgress.get()&&f.measurementMarkupManager.measurementInProgress.set(false);
this.isSticky?this.app.command("_clearMeasurementMarkup").execute("temporary",true):f.measurementMarkupManager._currentGeometryInProcess&&!f.measurementMarkupManager._currentGeometryInProcess.graphic&&f.measurementMarkupManager.destroyDescriptor(f.measurementMarkupManager._currentGeometryInProcess.id);this._drawObject&&delete this._drawObject;f.measurementMarkupManager._toolActive=false};b.prototype.executeToolCommand=function(a,g,b){if(this.command){var d=this.app.command(this.command);d.canExecute(a)?
d.execute(a,function(a){g&&g(a)},function(a){f.measurementMarkupManager._reportStatus("Execute Tool Command Error - Measurement Tools: {0}","error",false,[a]);b&&b(a)}):f.measurementMarkupManager._reportStatus("Could not invoke command '{0}' for tool '{1}'.","error",true,[this.name,this.command])}};b.prototype._onDrawCompletedError=function(a){f.measurementMarkupManager._reportStatus("Measurement Tool - Error on Draw Complete: {0}","error",true,[a])};b.prototype.onDrawCompleted=function(a,g,b,d){var e=
this,j=function(a){b&&b(a)},i=function(a,g){d&&(g?d(Error(g)):d(a))};if(a instanceof esri.geometry.Polygon)if(g.type===2){var l=g._lineSegments,m=l[l.length-1].mapPointEnd,l=l[0].mapPointStart;m.x!==l.x||m.y!==l.y?(a=f.measurementMarkupManager.createDescriptor(0,a.spatialReference),a.id=g.id,a.setStartPt(m),a.setEndPt(l),this.executeToolCommand(a,function(a){g.addSegment(a);e.executeToolCommand(g,j,i)},i)):this.executeToolCommand(g,j,i)}else i(null,"Measurement Tools: onDrawCompleted - Descriptor type mismatch");
else a instanceof esri.geometry.Polyline?g.type===1?this.executeToolCommand(g,j,i):i(null,"Measurement Tools: onDrawCompleted - Descriptor type mismatch"):i(null,"Only Polygon and Polyline geometries supported")};return b}(d.essentialsHtmlViewer.mapping.infrastructure.tools.MapTool);f.MeasurementTool=i})(f.measurement||(f.measurement={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(f){function b(a,g){f.call(this,a,g);this.measurementMarkupLayerId=this.markupLayerId=null;this.measurementGraphicId=0;this.addedGraphics=[];this._textOffset=this._textSize=this._textColor=this._fillColor=this._lineColor=null;this._count=-1;this._measurementLayer=this._markupLayer=null;this._currentMarkupSegmentGraphics=[];this._temporaryMarkupSegmentGraphics=[];this._labelSizeAdjustmentFactor=1.25;this._defaultTextOffset=
4;this._flipLabelThreshold=1E3}__extends(b,f);b.prototype.initialize=function(a){var g=this;this.markupLayerId=a.markupLayerName?a.markupLayerName:"Drawings";this._lineColor=a.lineColor?new esri.Color(a.lineColor):null;this._fillColor=a.fillColor?new esri.Color(a.fillColor):null;this._textColor=a.textColor?new esri.Color(a.textColor):null;this._textSize=a.textSize?a.textSize:"12px";this._textOffset=a.textOffset!=void 0?parseInt(a.textOffset):this._defaultTextOffset;this._textAboveMarkup=a.textAboveMarkup!=
void 0?a.textBelowMarkup:false;this._flipLabelThreshold=a.disablePolygonLabelFlipThreshold!=void 0?parseInt(a.disablePolygonLabelFlipThreshold):1E3;this.addMarkupToMap=new Observable(a.addMarkupToMapByDefault||false);this.measurementMarkupLayerId=this.markupLayerId+"_measurement";e.measurementMarkupManager._setLayerIds(this.markupLayerId,this.measurementMarkupLayerId);this._textFont=new esri.symbol.Font;this._textFont.setSize(this._textSize);this._textFont.setFamily("Arial");this.lengthUnits=new ObservableCollection([e.measurementMarkupManager.unit.feet.longName,
e.measurementMarkupManager.unit.yard.longName,e.measurementMarkupManager.unit.meter.longName,e.measurementMarkupManager.unit.kilometer.longName,e.measurementMarkupManager.unit.mile.longName,e.measurementMarkupManager.unit.nauticalMile.longName]);this.areaUnits=new ObservableCollection([e.measurementMarkupManager.unit.sqFeet.longName,e.measurementMarkupManager.unit.sqYard.longName,e.measurementMarkupManager.unit.sqMeter.longName,e.measurementMarkupManager.unit.sqKilometer.longName,e.measurementMarkupManager.unit.sqMile.longName,
e.measurementMarkupManager.unit.sqNauticalMile.longName,e.measurementMarkupManager.unit.acre.longName,e.measurementMarkupManager.unit.hectare.longName]);this.selectedAreaUnits=new Observable(e.MeasurementUtils.getUnitString(e.measurementMarkupManager._areaUnitString,true));this.selectedAreaUnitShort=new Observable(e.MeasurementUtils.getUnitString(e.measurementMarkupManager._areaUnitString));this.selectedLengthUnits=new Observable(e.MeasurementUtils.getUnitString(e.measurementMarkupManager._lengthUnitString,
true));this.selectedLengthUnitShort=new Observable(e.MeasurementUtils.getUnitString(e.measurementMarkupManager._lengthUnitString));this.measurementInProgress=new Observable(false);this.descriptorContainerEmpty=new Observable(true);this.lengthSwitcherSelected=new Observable(true);this.eraseActive=new Observable(false);this.measurementInProgress.sync(e.measurementMarkupManager.measurementInProgress);this.descriptorContainerEmpty.sync(e.measurementMarkupManager.descriptorContainerEmpty);this.selectedAreaUnits.bind(this,
function(a){g.app.command("SetMeasurementUnits").execute(g.selectedLengthUnits.get(),a);g.selectedAreaUnitShort.set(e.MeasurementUtils.getUnitString(e.measurementMarkupManager._areaUnitString))});this.selectedLengthUnits.bind(this,function(a){g.app.command("SetMeasurementUnits").execute(a,g.selectedAreaUnits.get());g.selectedLengthUnitShort.set(e.MeasurementUtils.getUnitString(e.measurementMarkupManager._lengthUnitString))});this.addMarkupToMap.bind(this,function(a){a?(g._currentMarkupSegmentGraphics=
g._temporaryMarkupSegmentGraphics.slice(0),g._temporaryMarkupSegmentGraphics=[]):(g._temporaryMarkupSegmentGraphics=g._currentMarkupSegmentGraphics.slice(0),g._currentMarkupSegmentGraphics=[])});this._registerCommands()};b.prototype._registerCommands=function(){this.app.command("DeleteMeasurement").register(this,this._executeDeleteMeasurementCommand,this._canExecuteDeleteMeasurementCommand);this.app.command("_addLineSegmentMeasurementMarkup").register(this,this._executeAddLineSegmentMeasurementMarkup,
this._canExecuteAddMarkup);this.app.command("_addCompletedGeometryMeasurementMarkup").register(this,this._executeAddCompletedGeometryMeasurementMarkup,this._canExecuteAddMarkup);this.app.command("_addGeometryMarkup").register(this,this._executeAddGeometryMarkup,this._canExecuteAddMarkup);this.app.command("_clearMeasurementMarkup").register(this,this._executeClearMeasurementMarkup)};b.prototype._canExecuteAddMarkup=function(a){if(!this._markupLayer||!this._measurementLayer)if(this._markupLayer=e.MeasurementUtils.getGraphicsLayer(this.markupLayerId,
true,this.app),this._measurementLayer=e.MeasurementUtils.getGraphicsLayer(this.measurementMarkupLayerId,true,this.app),this._markupLayer&&this._measurementLayer)e.measurementMarkupManager._measurementLayersCreated=true;return!(!a||!a.geometry||!this._markupLayer||!this._measurementLayer)};b.prototype._canExecuteDeleteMeasurementCommand=function(a){return!!a};b.prototype._executeAddGeometryMarkup=function(a){if(a.type===2){if(this._fillColor)a.graphicSymbol.setColor(this._fillColor),a.graphicSymbol.color.a=
0.4;this._lineColor&&a.graphicSymbol.outline.setColor(this._lineColor)}else this._lineColor&&a.graphicSymbol.setColor(this._lineColor);var g=a.addToMap(this.markupLayerId);this.app.command("EditMarkup").raiseCanExecuteChanged();this.app.command("DeleteMarkup").raiseCanExecuteChanged();this.app.command("ClearMarkup").raiseCanExecuteChanged();a.type===0?this._temporaryMarkupSegmentGraphics.push(g):this.addMarkupToMap.get()?this._currentMarkupSegmentGraphics.push(g):this._temporaryMarkupSegmentGraphics.push(g)};
b.prototype._executeAddLineSegmentMeasurementMarkup=function(a,g,b){if(!a||!a.geometry)this._tryErrorCallback(b,Error("LineSegment or geometry not defined"));else if(a.isActive&&(this.addMarkupToMap.get()||e.measurementMarkupManager._currentGeometryInProcess&&e.measurementMarkupManager._currentGeometryInProcess.id===a.id)){a.labelStr=a.length.toFixed(2)+" "+a.unitStr;this._setLabelLocationAndVisibilityParams(a);this._setLineSegmentSymbols(a);b=a.addLabelToMap(this.measurementMarkupLayerId);if(this._textOffset!==
this._defaultTextOffset)b.measurementOffset=this._textOffset;g&&g(a)}};b.prototype._executeAddCompletedGeometryMeasurementMarkup=function(a,g,b){var d=null;if(a&&a.isActive&&(this.addMarkupToMap.get()||e.measurementMarkupManager._currentGeometryInProcess&&e.measurementMarkupManager._currentGeometryInProcess.id===a.id)){switch(a.type){case 2:d=a.geometry;b=a._lineSegments.length;if(b<this._flipLabelThreshold)for(var f=d.isSelfIntersecting(),j=d.isClockwise(d.rings[0]),i=0;i<b;i++){var l=a._lineSegments[i],
m=this.app.map.toScreen(l.labelLocation.mapPoint);m.x+=l.labelLocation.xOffset;m.y-=l.labelLocation.yOffset;m=this.app.map.toMap(m);f?m=d.contains(m):(m=e.MeasurementUtils.isLeftOfLine(l,m),m=j?m?false:true:m?true:false);if(m)l.textSymbol.setOffset(l.labelLocation.xOffsetMirrored,l.labelLocation.yOffsetMirrored),l.labelGraphic.setSymbol(l.textSymbol),l.labelGraphic.measurementLabelFlipped=true}else e.measurementMarkupManager._reportStatus("Auto label flipping for completed polygon geometry disabled - Exceeds configured threshold.",
"info",false);b=a.geometry;d=(d=b.getExtent())?d.getCenter():null;!b.contains(d)&&a.simplifiedGeometry&&(d=a.simplifiedGeometry.getCentroid()||d);a.labelStr=this.app.getResource(e.measurementMarkupManager.libraryId,"language-measurement-polygon-final-markup-label").format(a.area.toFixed(2),a.areaUnitStr,a.length.toFixed(2),a.unitStr);this.app.command("LogOptimizerEvent").execute("MeasureAreaTool","MeasureArea");break;case 1:a.labelStr=this.app.getResource(e.measurementMarkupManager.libraryId,"language-measurement-polyline-final-markup-label").format(a.length.toFixed(2),
a.unitStr);d=a._lineSegments[a._lineSegments.length-1].mapPointEnd;this.app.command("LogOptimizerEvent").execute("MeasureDistanceTool","MeasureDistance");break;default:this._tryErrorCallback(b,Error("Invalid Geometry Descriptor"))}a.highlightedLabelGraphic=e.MeasurementUtils.addHighlightedLabelToMap(a.labelStr,d,a.id,this.measurementMarkupLayerId,this.app,false,0,a.type===1?this._textOffset:0,"Arial",this._textSize);a.setInactive();this.app.event("MeasurementMarkupAdded").publish({graphic:a.graphic,
measurementDescriptor:a});g&&g(a)}};b.prototype._executeDeleteMeasurementCommand=function(a){var g=this;d.essentialsHtmlViewer.mapping.infrastructure.GraphicUtils.deleteMarkup(a,[this.markupLayerId,this.measurementMarkupLayerId],this.app,function(a){if(a&&a.length)for(var b=0;b<a.length;b++)a[b].hasOwnProperty("measurementId")&&e.measurementMarkupManager.destroyDescriptor(a[b].measurementId);a=g.app.toolRegistry.getActiveTool();e.measurementMarkupManager.descriptorContainerEmpty.get()&&a&&a.name===
"DeleteMeasurementTool"&&g.app.command("ClearActiveTool").execute()},true,"language-measurement-erase-multiple-prompt","language-measurement-erase-multiple-prompt-title",this.libraryId);this.app.command("LogOptimizerEvent").execute("DeleteMeasurementTool","DeleteMeasurement")};b.prototype._executeClearMeasurementMarkup=function(a,g){var b=this;if(a==="all"){var d=this.app.getResource(this.libraryId,"language-measurement-clear-all-prompt"),e=this.app.getResource(this.libraryId,"language-measurement-clear-all-prompt-title");
this.app.command("StopEditingMarkup").execute();this.app.command("Confirm").execute(d,e,function(d){d&&b._clearMarkup(a,g)})}else this._clearMarkup(a,g)};b.prototype._clearMarkup=function(a,g){a===void 0&&(a="all");g===void 0&&(g=false);switch(a){case "all":e.measurementMarkupManager.destroyAllDescriptors();this.app.command("LogOptimizerEvent").execute("ClearMeasurementTool","ClearAllMeasurements");break;case "temporary":for(var b=0;b<this._temporaryMarkupSegmentGraphics.length;b++){var d=this._temporaryMarkupSegmentGraphics[b];
d&&d.measurementId&&e.measurementMarkupManager.destroyDescriptor(d.measurementId)}break;case "current":for(b=0;b<this._currentMarkupSegmentGraphics.length;b++)(d=this._currentMarkupSegmentGraphics[b])&&d.measurementId&&e.measurementMarkupManager.destroyDescriptor(d.measurementId)}e.measurementMarkupManager._currentGeometryInProcess&&!e.measurementMarkupManager._currentGeometryInProcess.graphic&&e.measurementMarkupManager.destroyDescriptor(e.measurementMarkupManager._currentGeometryInProcess.id);if(a===
"temporary"||a==="all"||g)this._temporaryMarkupSegmentGraphics=[];if(a==="current"||a==="all"||g)this._currentMarkupSegmentGraphics=[]};b.prototype._setLineSegmentSymbols=function(a){if(!a.graphicSymbol)a.graphicSymbol=d.essentialsHtmlViewer.mapping.infrastructure.SymbolUtils.defaultLineSymbol(),this._lineColor&&a.graphicSymbol.setColor(this._lineColor);a.textSymbol=new esri.symbol.TextSymbol(a.labelStr);a.textSymbol.setFont(this._textFont);this._textColor&&a.textSymbol.setColor(this._textColor);
a.textSymbol.setAlign(esri.symbol.TextSymbol.ALIGN_MIDDLE);a.textSymbol.setOffset(a.labelLocation.xOffset,a.labelLocation.yOffset);a.textSymbol.setAngle(a.labelLocation.angle)};b.prototype._setLabelLocationAndVisibilityParams=function(a){a.labelLocation.mapPoint=new esri.geometry.Point((a.mapPointStart.x+a.mapPointEnd.x)/2,(a.mapPointStart.y+a.mapPointEnd.y)/2,a.spatialReference);var g=Math.atan2(a.mapPointStart.y-a.mapPointEnd.y,a.mapPointEnd.x-a.mapPointStart.x)*(180/Math.PI),g=g<0?360+g:g,b=Math.abs(a.mapPointEnd.x-
a.mapPointStart.x),d=Math.abs(a.mapPointEnd.y-a.mapPointStart.y),f=Math.sqrt(b*b+d*d);b/=f;d/=f;this._setLabelSize(a,"Arial",this._textSize);a.labelLocation.xOffset=this._textAboveMarkup?this._textOffset*d:(this._textOffset+a.labelSize.height)*d;a.labelLocation.yOffset=this._textAboveMarkup?this._textOffset*b:(this._textOffset+a.labelSize.height)*b;a.labelLocation.xOffsetMirrored=!this._textAboveMarkup?this._textOffset*d:(this._textOffset+a.labelSize.height)*d;a.labelLocation.yOffsetMirrored=!this._textAboveMarkup?
this._textOffset*b:(this._textOffset+a.labelSize.height)*b;g>=0&&g<=180?(a.labelLocation.angle=g>90?180+g:g,a.labelLocation.xOffset=g>90?a.labelLocation.xOffset*-1:a.labelLocation.xOffset,a.labelLocation.xOffsetMirrored=g>90?a.labelLocation.xOffsetMirrored*-1:a.labelLocation.xOffsetMirrored):(a.labelLocation.angle=g<270?g-180:g,a.labelLocation.xOffset=g>=270?a.labelLocation.xOffset*-1:a.labelLocation.xOffset,a.labelLocation.xOffsetMirrored=g>=270?a.labelLocation.xOffsetMirrored*-1:a.labelLocation.xOffsetMirrored);
a.labelLocation.xOffset=this._textAboveMarkup?a.labelLocation.xOffset:a.labelLocation.xOffset*-1;a.labelLocation.yOffset=this._textAboveMarkup?a.labelLocation.yOffset:a.labelLocation.yOffset*-1;a.labelLocation.xOffsetMirrored=!this._textAboveMarkup?a.labelLocation.xOffsetMirrored:a.labelLocation.xOffsetMirrored*-1;a.labelLocation.yOffsetMirrored=!this._textAboveMarkup?a.labelLocation.yOffsetMirrored:a.labelLocation.yOffsetMirrored*-1;a.showLabel=a.labelSize.width*this._labelSizeAdjustmentFactor<e.MeasurementUtils.getRenderedLineSegmentLength(a)?
true:false};b.prototype._setLabelSize=function(a,g,b){g=e.MeasurementUtils.getLabelSize(a.labelStr,g,b);a.labelSize.width=g.width;a.labelSize.height=g.height;a.labelSize.sizeAdjustmentFactor=this._labelSizeAdjustmentFactor};b.prototype._tryErrorCallback=function(a,g){a&&a(g)};return b}(d.framework.ui.ViewModelBase);e.MeasurementViewModel=f})(e.measurement||(e.measurement={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||
(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){var f=function(b){function a(){b.apply(this,arguments);this.clearDisabled=new Observable(true);this.changeStyleDisabled=new Observable(true);this.markupCounter=new Observable(0);this.deleteToggled=new Observable(false);this.editToggled=new Observable(false);this.previousTool=null}__extends(a,b);a.prototype.initialize=function(a){b.prototype.initialize.call(this,a);this.markupCounter.bind(this,this.evaluateMarkupCounter);this.registerEventsClearDisabled();
this.registerEventsChangeStyleDisabled()};a.prototype.registerEventsChangeStyleDisabled=function(){var a=this;this.app.event("ActiveToolChangedEvent").subscribe(this,function(b){var d=null,e=null;if(b.tool)d=b.tool.name;if(b.previousTool)e=b.previousTool.name;a.isMarkupTool(e)&&a.changeStyleDisabled.set(true);a.isMarkupTool(d)&&a.changeStyleDisabled.set(false)});this.app.event("MarkupEditingStartedEvent").subscribe(this,function(){a.changeStyleDisabled.set(false)});this.app.event("MarkupEditingStoppedEvent").subscribe(this,
function(){a.changeStyleDisabled.set(true)})};a.prototype.registerEventsClearDisabled=function(){var a=this;this.app.event("MarkupAddedEvent").subscribe(this,function(){a.markupCounter.set(a.markupCounter.get()+1)});this.app.event("MeasurementMarkupAdded").subscribe(this,function(){a.markupCounter.set(a.markupCounter.get()+1)});this.app.event("MarkupDeletedEvent").subscribe(this,function(b){b.measurementId||a.markupCounter.set(a.markupCounter.get()-1)});this.app.event("MeasurementMarkupDeleted").subscribe(this,
function(b){b.graphic&&b.graphic.measurementId&&a.markupCounter.set(a.markupCounter.get()-1)});this.app.event("MarkupClearedEvent").subscribe(this,function(){a.markupCounter.set(0)})};a.prototype.evaluateMarkupCounter=function(){if(this.markupCounter.get()>0)this.clearDisabled.set(false);else{var a=this.app.toolRegistry.getActiveTool();a&&a.name==="DeleteMarkupTool"&&this.app.command("ClearActiveTool").execute();this.clearDisabled.set(true)}};a.prototype.isMarkupTool=function(a){var b=this.app.getFrameworkObjectById("MarkupViewModel").markupTools;
return $.inArray(a,b.point)!=-1?true:$.inArray(a,b.polyline)!=-1?true:$.inArray(a,b.polygon)!=-1?true:$.inArray(a,b.text)!=-1?true:false};return a}(d.framework.ui.ViewModelBase);e.TransientMarkupPaletteViewModel=f})(e.toolPalettes||(e.toolPalettes={}))})(e.markup||(e.markup={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.initialize=function(a){d.prototype.initialize.call(this,a);this.app.menuRegistry.loadMenus(a)};return b}(d.framework.application.ModuleBase);e.MenuModule=f})(e.Menu||(e.Menu={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.handleTakeNativePhotoCamera=function(){this.viewModel._handlePhotoFromNativeApp(true)};b.prototype.handleTakeNativePhotoGallery=function(){this.viewModel._handlePhotoFromNativeApp(false)};b.prototype.handleSelectedFileInput=function(a){this.viewModel._handleFileFromBrowser(a.currentTarget.files[0])};b.prototype.clearFileInputField=function(){this.uploadFormElement.reset()};
return b}(d.framework.ui.ViewBase);e.AttachFileView=f})(e.nativeIntegration||(e.nativeIntegration={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,b){e.call(this,a,b);this.feature=new Observable(null);this.esriFeature=new Observable(null);this.esriFeatureLayer=new Observable(null);this.isUploading=new Observable(false);this._attachFileViewId=null;this.browserFileAPISupported=new Observable(this._fileApiSupported());this.deviceCordovaSupported=new Observable(this._cordovaSupported());this.app.command("AttachFileToFeature").register(this,this._executeAttachFile,
this._canExecuteAttachFile)}__extends(b,e);b.prototype.initialize=function(a){e.prototype.initialize.call(this,a);this._attachFileViewId=a.attachFileViewId};b.prototype._fileApiSupported=function(){return this._isFileInputSupported()&&window.File&&window.FileReader};b.prototype._cordovaSupported=function(){return navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)&&navigator.camera&&typeof navigator.camera.getPicture!=="undefined"?true:false};b.prototype._handleFileFromBrowser=function(a){var b=
this;this.app.isOffline.get()===false&&this.isUploading.set(true);var d=new FileReader;d.onload=function(d){d={data:decodeURIComponent(d.target.result.substring(d.target.result.indexOf("base64,")+7)),fileName:a.name,fileType:a.type};b._handleReceiveFileData(d,function(a){b._handleCallback.call(b,a)})};d.readAsDataURL(a)};b.prototype._handlePhotoFromNativeApp=function(a){var b=this;navigator.camera?navigator.camera.getPicture(function(a){setTimeout(function(){b._handleReceiveFileData({data:a},function(a){b._handleCallback.call(b,
a)})},0)},function(){},{quality:60,sourceType:a?window.Camera.PictureSourceType.CAMERA:window.Camera.PictureSourceType.PHOTOLIBRARY,destinationType:typeof window.Camera!=="undefined"&&window.Camera.DestinationType?window.Camera.DestinationType.DATA_URL:1,correctOrientation:true}):this._reportStatus("language-native-no-photo-no-camera-detected")};b.prototype._handleReceiveFileData=function(a,b){(!this.feature.get()||!this.feature.get().esriFeature.get()||!this.feature.get().esriFeature.get().getLayer()||
!(this.feature.get().esriFeature.get().getLayer()instanceof esri.layers.FeatureLayer&&this.feature.get().esriFeature.get().getLayer().isEditable()&&this.feature.get().esriFeature.get().getLayer().hasAttachments))&&this._resolveFeature(this.feature.get());var d=this.esriFeature.get(),e=this.esriFeatureLayer.get();if(!this.esriFeature.get()||!this.esriFeatureLayer.get())this._reportStatus("language-native-feature-no-layer");else{var f=null;if(e&&e.url)f=e.url;else if(e._essentialsMetadata)f=e._essentialsMetadata.serviceUrl;
f?(d={feature:d,layer:e,featureUrl:f,filename:this._formatAttachmentName(a.fileName),contentType:a.fileType||"image/jpeg",payload:a.data,callback:b},this.app.command("CreateAttachment").execute(d)):this._reportStatus("language-native-feature-no-layer-url")}};b.prototype._formatAttachmentName=function(a){var b=new Date,d=a?a.substr(0,a.lastIndexOf(".")):"image",a=a?a.substr(a.lastIndexOf(".")+1):"jpg";return"{0}-{1}.{2}.{3}-{4}-{5}-{6}.{7}".format(d,b.getHours(),b.getMinutes(),b.getSeconds(),b.getDate(),
b.getMonth()+1,b.getFullYear(),a)};b.prototype._handleCallback=function(a){var b={};if(this.app.isOffline.get()===true)this._reportStatus(!a?"language-native-offline-file-upload":"language-native-offline-file-upload-error");else{try{b=JSON.parse(a.currentTarget.response).error}catch(d){b.message=a.currentTarget&&a.currentTarget.statusText?a.currentTarget.statusText:this.app.getResource(this.libraryId,"language-native-internal-server-error")}b&&b.message?this._reportStatus("language-native-file-upload-failed",
b.message):(this._reportStatus("language-native-file-upload-success"),this.app.event("FeatureAttachmentAddedEvent").publish(this.feature.get()))}};b.prototype._executeAttachFile=function(a){this._resolveFeature(a);this.app.command("HideFeatureTemplatePicker").execute();!this.esriFeature.get()||!this.esriFeatureLayer.get()?this._reportStatus("language-native-feature-no-layer"):this.app.command("ActivateView").execute(this._attachFileViewId)};b.prototype._canExecuteAttachFile=function(a){return a&&
(this._resolveFeature(a,false),this.esriFeature.get()&&this.esriFeatureLayer.get()&&(a=this.esriFeatureLayer.get())&&a.isEditable()&&a.hasAttachments&&(this.browserFileAPISupported.get()||this.deviceCordovaSupported.get()))?true:false};b.prototype._resolveFeature=function(a,b){b===void 0&&(b=true);var h=null;if(a.esriFeature){h=a.esriFeature.get();if(!h.getLayer()&&a.layer&&a.layer.mapService&&a.layer.mapService.serviceLayer)h._graphicsLayer=a.layer.mapService.serviceLayer;h=a.layer||a.featureLayer&&
a.featureLayer.type!="Table"?d.essentialsHtmlViewer.mapping.infrastructure.MapUtils.findFeatureInMap(h,this.app.site):a.esriFeature.get()}h?(b&&a.esriFeature.set(h),this.feature.set(a),this.esriFeature.set(h),h=h.getLayer(),!h||!h.isEditable||!h.isEditable()?this.esriFeatureLayer.set(null):(h.id&&h.id.indexOf("-explodedClusterLayer")!==-1&&(h=this.app.map.getLayer(h.id.replace("-explodedClusterLayer",""))),this.esriFeatureLayer.set(h))):(this.feature.set(null),this.esriFeature.set(null),this.esriFeatureLayer.set(null))};
b.prototype._reportStatus=function(a,b){var d=this;this.isUploading.set(false);var e=this.app.getResource(this.libraryId,a);this.app.command("Alert").execute(b?e+b:e,null,function(){var a=d.app.viewManager.getViewById(d._attachFileViewId);a&&a.isActive&&(a.clearFileInputField(),d.app.command("DeactivateView").execute(d._attachFileViewId))})};b.prototype._isFileInputSupported=function(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/))return false;
var a=document.createElement("input");a.type="file";return!a.disabled};return b}(d.framework.ui.ViewModelBase);e.AttachFileViewModel=f})(e.nativeIntegration||(e.nativeIntegration={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.framework.application.ModuleBase);e.NavigationModule=f})(e.navigation||(e.navigation={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(){e.apply(this,arguments);this.nativeInitialized=false}__extends(b,e);b.prototype.initialize=function(){var a=this,b=null;(function(a){if(typeof gcxNativeReady!=="undefined")a&&a();else{var b=window.gcxNativeReadyCallback;window.gcxNativeReadyCallback=function(){b&&b();a&&a()}}})(function(){a.nativeInitialized=true;a.app.isNative.set(true);d.GeocortexNativeApp.registerNativeEventListener(dojo.hitch(a,a.handleNativeEvent));
a.app.command("NativeHasCapability").register(a,function(a,e){var f=this;b===null?this.app.isNative.get()?d.GeocortexNativeApp.capabilities(function(d){b=d;e.apply(f,[b.indexOf(a)>-1])},function(){e.apply(this,[false])}):e.apply(this,[false]):e.apply(this,[b.indexOf(a)>-1])});a.app.command("SetNativeTitle").register(a,function(a){d.GeocortexNativeApp.setNativeTitle(a)})});this.app.event("NativeMessageEvent").subscribe(this,this._onNativeMessageEvent)};b.prototype._onNativeMessageEvent=function(a){if(a.type===
"native ready")this.app.localServerAddress=a.parameters.localServerAddress,this.app.trace.info("Native initialization complete.  Geocortex Mobile Application Framework version: {0}  Local Server Address: {1}  Locale: {2}".format(a.parameters.version,a.parameters.localServerAddress,a.parameters.locale));else if(a.type==="download"){var b=a.parameters,a=new d.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs(null);a.timeoutMS=1E4;a.id="native-download-status";if(b.state==="Downloading")a.text=
this.getResource("language-native-download-downloading").format(b.filename,b.progress),this.app.command("AddStatus").execute(a);else if(b.state==="Completed")a.text=this.getResource("language-native-download-complete").format(b.filename),this.app.command("AddStatus").execute(a);else if(b.state==="Failed")a.text=this.getResource("language-native-download-failed").format(b.filename),this.app.command("AddStatus").execute(a);this.app.command("ActivateView").execute(a.id)}else if(a.type==="low memory")a=
new d.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs(this.getResource("language-native-low-memory")),a.timeoutMS=3E4,a.id="native-low-memory-status",this.app.command("AddStatus").execute(a),this.app.command("ActivateView").execute(a.id)};b.prototype.handleNativeEvent=function(a){this.app.event("NativeMessageEvent").publish(a)};return b}(d.framework.application.ModuleBase);e.NativeIntegrationModule=f})(e.nativeIntegration||(e.nativeIntegration={}))})(e.modules||(e.modules={}))})(f.mapping||
(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){function f(a,b){b.resources.push(i("__error_offline_no_endpoint",{error:{code:400,message:"This resource is not available offline.",details:[]}}));b.resources.push(i("__no_features",{objectIdFieldName:"OBJECTID",globalIdFieldName:"GlobalID",features:[]}));b.resources.push(i("__no_search_results",{count:0,features:[],ResponseStatus:{}}));b.resources.push(i("__empty_attribution_response",""));return null}function j(a,b){return new Promise(function(g,
h){var e=s(a,a.app.site.url+"/map/layerlist");d.request({url:e,content:{f:"json"},load:function(a){b.resources.push(i("__layerlist_",a));g(null)},error:function(b){a.app.trace.error("Error fetching '"+e+"': "+b.message);h(b)},callbackParamName:"Callback"})})}function b(a,b){return new Promise(function(g,h){var e=s(a,a.app.site.url);d.request({url:e,content:{f:"json",deep:a.app.site.deepInitialize},load:function(a){b.resources.push(i("__site_",a));g(null)},error:function(b){a.app.trace.error("Error fetching '"+
e+"': "+b.message);h(b)},callbackParamName:"Callback"})})}function a(a,b){var e=[],f=a.app.site.essentialsMap.mapServices;a.app.site.overviewMap&&(f=f.concat(a.app.site.overviewMap.mapServices));f=f.map(function(f){if(e.indexOf(f.url)!=-1)return null;e.push(f.url);switch(f.mapServiceType){case d.essentials.MapServiceType.BING:case d.essentials.MapServiceType.WMS:case d.essentials.MapServiceType.WEBTILED:return null;case d.essentials.MapServiceType.GEORSS:case d.essentials.MapServiceType.KML:return o(a,
b,f);case d.essentials.MapServiceType.FEATURE:return g(a,b,f);default:return h(a,b,f)}});return Promise.all(f)}function g(a,b,g){var d=[],e=/^(.*)(\/[0-9]+\/?)$/.exec(g.serviceUrl)[1];g.serviceLayer&&g.serviceLayer.relationships&&(d=d.concat(g.serviceLayer.relationships.map(function(d){return new Promise(function(h,f){var o=e+"/"+d.relatedTableId,j={f:"json"},k=g.findServiceToken();if(k)j.token=k;esri.request({url:o,handleAs:"json",content:j,callbackParamName:"Callback"}).then(function(a){b.resources.push(i(m(o),
a));h(null)},function(b){a.app.trace.error("Error fetching '"+o+"': "+b.message);f(b)})})})));d.push(h(a,b,g));return Promise.all(d)}function h(a,b,g){return new Promise(function(d,h){var e=n(a,g),f={f:"json"},o=g.findServiceToken();if(o)f.token=o;esri.request({url:e,handleAs:"json",content:f,callbackParamName:"Callback"}).then(function(a){b.resources.push(i(m(e),a));d(null)},function(b){a.app.trace.error("Error fetching '"+e+"': "+b.message);h(b)})})}function o(a,b,g){return new Promise(function(d,
h){var e=n(a,g);esri.request({url:e,handleAs:"xml",content:{},callbackParamName:"Callback"}).then(function(a){b.resources.push(v(m(e),(new XMLSerializer).serializeToString(a)));d(null)},function(b){a.app.trace.error("Error fetching '"+e+"': "+b.message);h(b)})})}function i(a,b,g){g===void 0&&(g=false);return v(a,JSON.stringify(b),g)}function v(a,b,g){g===void 0&&(g=false);return{isEncoded:g,isJson:true,isShared:false,key:a,value:g?d.framework.utils.base64Encode(b):b}}function n(a,b){var g=b.serviceUrl;
if(!g&&b.serviceLayer)g=b.serviceLayer.url;g&&(g=s(a,g));return g}function s(a,b){var b=a.app.makeAbsolute(b),g=document.createElement("a");g.href=b;var g=g.href,d=g.charAt(g.length-1);if(d==="/"||d==="\\")g=g.substr(0,g.length-1);return g}function m(a){var b=/^[a-z]+:\/\/(.*)/.exec(a);b&&(a=b[1]);(b=/^(services|server)\.arcgisonline\.(.*)/.exec(a))&&(a="(services|server).arcgisonline."+b[2]);/^[^/]*virtualearth.net\//.exec(a)&&(a="[^/]*virtualearth.net/");(b=/^([a-zA-Z.]+):(80|443)(.*)/.exec(a))&&
(a=b[1]+b[3]);return a=a.replace(/\//g,"/+").replace(/\./g,"\\.")}e.buildBundle=function(g){var d={id:"bundle0",resources:[]};d.resources.push({isEncoded:false,isJson:true,isShared:false,key:"__routing",value:e.buildRoutingRules(g)});g=[null,f(g,d),b(g,d),j(g,d),a(g,d)];return Promise.all(g).then(function(){return d})};e.cleanUpMapServiceUrl=n;e.cleanUpRestUrl=s;e.urlToPattern=m})(e.offline||(e.offline={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.handleClickClear=function(){if(this.viewModel.option.get()){var a=this.viewModel.option.get();this.app.command(a).canExecute(true)?this.app.command(a).execute(true):(this.app.command("Alert").execute(this.getResource("language-offline-data-cant-clear")),this.app.viewManager.deactivateView(this))}};b.prototype.handleClickCancel=function(){this.app.viewManager.deactivateView(this)};
return b}(d.framework.ui.ViewBase);e.ClearDataView=f})(e.offline||(e.offline={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.initialize=function(){this.options=new ObservableCollection([{text:this.getResource("language-clear-storage-view-this-viewer"),command:"ClearStorageForApplication"},{text:this.getResource("language-clear-storage-view-entire-domain"),command:"ClearStorageForDomain"}]);this.option=new Observable(this.options.getAt(0).command)};return b}(d.framework.ui.ViewModelBase);
e.ClearDataViewModel=f})(e.offline||(e.offline={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){var f=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.attach=function(a){var d=this;if(!a)throw Error("Expected viewModel");this.auto(a.canSwitchState,this,function(a){a?d.app.viewManager.activateView(d):d.app.viewManager.deactivateView(d)});b.prototype.attach.call(this,a);a.canSwitchState.pulse()};a.prototype.handleClickToggleConnectivity=function(){this.app.command("ToggleConnectivity").execute()};
return a}(d.framework.ui.ViewBase);e.ConnectionStatusIndicatorView=f})(e.indicator||(e.indicator={}))})(e.offline||(e.offline={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){var f=function(b){function a(){b.apply(this,arguments);this.isOffline=new Observable(false);this.canSwitchState=new Observable(false);this.displayButton=new Observable(false)}__extends(a,b);a.prototype.initialize=function(a){b.prototype.initialize.call(this,a);this.isOffline.sync(this.app.isOffline);this.app.command("TakeApplicationOnline").canExecuteChanged.subscribe(this,this._handleCanExecuteMaybeChanged);this.app.command("TakeApplicationOffline").canExecuteChanged.subscribe(this,
this._handleCanExecuteMaybeChanged);a||(a={});this.displayButton.set(!!a.enabled);this._handleCanExecuteMaybeChanged()};a.prototype._handleCanExecuteMaybeChanged=function(){this.canSwitchState.set(this.isOffline.get()?this.app.command("TakeApplicationOnline").canExecute():this.app.command("TakeApplicationOffline").canExecute())};return a}(d.framework.ui.ViewModelBase);e.ConnectionStatusIndicatorViewModel=f})(e.indicator||(e.indicator={}))})(e.offline||(e.offline={}))})(e.modules||(e.modules={}))})(f.mapping||
(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(j){function b(){j.apply(this,arguments);this._isOnline=new Observable(true);this._isReady=new Observable(false);this._isActiveCaching=new Observable(false);this._index=null;this._isLoadingResourceIndex=false;this._handlers={};this._rules=[];this._rewriteRules=[];this._servicesToSave=0;this._nativeAppHasBeenNotified=false;this._catalogTimestamps={};this._geocortexSessionExpiryArgs=null;this._temporaryDevelopmentFlag_alwaysCreateNewIndex=
this._tokenRefreshSuspended=false;this._temporaryDevelopmentFlag_alwaysOverrideResources=true}__extends(b,j);b.prototype.initialize=function(a){var b=this;j.prototype.initialize.call(this,a);this._isOnline.get=function(){return!b.app.isOffline.get()};this._isActiveCaching.set(false);this._loadResourceIndex(function(){b._loadConfiguredRoutingRules();b._loadRoutingRules();b._registerOfflineCommands();b.app.isNative&&b._displayGmafConnectivityButton()});this._registerOfflineHandlers();esri.request?(this._setupEsriRequestHooks(),
this._extendEsriLayers(),this._attachTokenRefreshHooks(),this.app.isOffline.bind(this,this._handleOfflineStatusChange),this.app.event("NativeMessageEvent").subscribe(this,this._onNativeMessageEvent)):this.app.trace.warning("Offline module could not hook into ESRI API.")};b.prototype._onNativeMessageEvent=function(a){a.type==="offline"||a.type==="online"?this.app.command("ToggleConnectivity").execute():!this._nativeAppHasBeenNotified&&a.type==="native ready"&&this._displayGmafConnectivityButton()};
b.prototype._attachTokenRefreshHooks=function(){var a=this;dojo.subscribe("geocortex_sessionExpiring",function(b){a._geocortexSessionExpiryArgs=b;b.handled=true;if(a.app.isOffline.get()){if(b.suspendRefresh())a._tokenRefreshSuspended=true}else if(b.resumeRefresh())a._tokenRefreshSuspended=false})};b.prototype._handleOfflineStatusChange=function(a){if(this._geocortexSessionExpiryArgs)if(a){if(!this._tokenRefreshSuspended)this._geocortexSessionExpiryArgs.suspendRefresh(),this._tokenRefreshSuspended=
true}else if(this._tokenRefreshSuspended)this._geocortexSessionExpiryArgs.resumeRefresh(),this._tokenRefreshSuspended=false};b.prototype._registerOfflineCommands=function(){this.app.command("DownloadOfflineResources").register(this,this._downloadOfflineResourcesImpl);this.app.command("TakeApplicationOffline").register(this,this._takeApplicationOfflineImpl,this._canTakeApplicationOffline);this.app.command("TakeApplicationOnline").register(this,this._takeApplicationOnlineImpl,this._canTakeApplicationOnline);
this.app.command("ClearStorageForApplication").register(this,this._clearStorageForApplicationImpl);this.app.command("ClearStorageForDomain").register(this,this._clearStorageForDomainImpl);this.app.command("SetGMAFOfflineButtonState").register(this,this._setGmafOfflineButtonStateImpl);this.app.command("ToggleConnectivity").register(this,this._toggleConnectivityImpl);this.app.command("_autoDownloadOfflineResources").register(this,this._autoDownloadOfflineResourcesImpl);this.app.command("_getOfflineBundleIndex").register(this,
this._getOfflineBundleIndexImpl)};b.prototype._displayGmafConnectivityButton=function(){var a=this._offlineDataAvailable();this.app.isOffline.get()?this.app.command("SetGMAFOfflineButtonState").execute("show-online"):!this.app.isOffline.get()&&a?this.app.command("SetGMAFOfflineButtonState").execute("show-offline"):this.app.command("SetGMAFOfflineButtonState").execute("show-none")};b.prototype._offlineDataAvailable=function(){return this.app.isOffline.get()?this.app.command("TakeApplicationOnline").canExecute():
this.app.command("TakeApplicationOffline").canExecute()};b.prototype._registerOfflineHandlers=function(){var a=this;this.registerHandler("ServeSharedResource",function(b,d,e){a._serveNonSharedResource(b,d,e);a._hookDeferredCallbacks(b);return true});this.registerHandler("ServeNonSharedResource",function(b,d,e){a._serveNonSharedResource(b,d,e);a._hookDeferredCallbacks(b);return true});this.registerHandler("Fail",function(b,d,e){a._failRequest(b,d,e);a._hookDeferredCallbacks(b);return true});this.registerHandler("Rewrite",
function(b,d,e){b.url=a._rewriteRequest(b,d,e);!require.has("esri-cors")&&Modernizr.cors&&(delete require.has.cache["esri-cors"],require.has.add("esri-cors",function(){return true}));a._hooked_esri_request(b,b.options).then(function(a){b.dfd.resolve(a)},function(a){b.dfd.errback(a)});return true})};b.prototype._setupEsriRequestHooks=function(){var a=this;this._hooked_esri_request=esri.request;esri.request=function(b,d){return a._isOnline.get()?a._hooked_esri_request.apply(esri,[b,d]):a._handleOfflineRequest(b,
d)};esri.request.setRequestPreCallback=function(){a.app.trace.warning("setRequestPreCallback not supported")};this._hooked_esri_getTileUrl=esri.layers.ArcGISTiledMapServiceLayer._meta.hidden.getTileUrl;this._hooked_ogc_getWMTSTileUrl=esri.layers.WMTSLayer._meta.hidden.getTileUrl;this._ogc__tileLoadHandler=esri.layers.WMTSLayer.superclass._tileLoadHandler;this._hooked_BingMaps_getTileUrl=esri.virtualearth.VETiledLayer._meta.hidden.getTileUrl;this._bingMaps__tileLoadHandler=esri.virtualearth.VETiledLayer.superclass._tileLoadHandler;
this._hooked_WebTiledLayer_getTileUrl=esri.layers.WebTiledLayer._meta.hidden.getTileUrl;this._webTiledLayer__tileLoadHandler=esri.layers.WebTiledLayer.superclass._tileLoadHandler;this._hooked_esri_getImageUrl=esri.layers.ArcGISDynamicMapServiceLayer._meta.hidden.getImageUrl;this._hooked_ogc_getImageUrl=esri.layers.WMSLayer._meta.hidden.getImageUrl};b.prototype._extendEsriLayers=function(){var a=this;esri.virtualearth.VETiledLayer.extend({getTileUrl:function(b,d,e){b=a._hooked_BingMaps_getTileUrl.apply(this,
[b,d,e]);if(a._isOnline.get())return b;b=a._stripOutProxy(b);return(d=a._matchAndRewrite(b))?d:b},_tileLoadHandler:function(b){a._bingMaps__tileLoadHandler.apply(this,[b])}});esri.layers.WMTSLayer.extend({getTileUrl:function(b,d,e){b=a._hooked_ogc_getWMTSTileUrl.apply(this,[b,d,e]);if(a._isOnline.get())return b;b=a._stripOutProxy(b);return(d=a._matchAndRewrite(b))?d:b},_tileLoadHandler:function(b){a._ogc__tileLoadHandler.apply(this,[b])}});esri.layers.WebTiledLayer.extend({getTileUrl:function(b,d,
e){b=a._hooked_WebTiledLayer_getTileUrl.apply(this,[b,d,e]);if(a._isOnline.get())return b;b=a._stripOutProxy(b);return(d=a._matchAndRewrite(b))?d:b},_tileLoadHandler:function(b){a._webTiledLayer__tileLoadHandler.apply(this,[b])}});esri.layers.ArcGISTiledMapServiceLayer.extend({getTileUrl:function(b,d,e){b=a._hooked_esri_getTileUrl.apply(this,[b,d,e]);if(a._isOnline.get())return b;d=a._stripOutProxy(b);return(d=a._matchAndRewrite(d))?d:b}});esri.layers.WMSLayer.extend({getImageUrl:function(b,d,e,f){a._isOnline.get()?
((!d||!e)&&a.app.trace.debug("Invalid dimensions on requested map image. This is usually due to an invalid map resize event."),a._hooked_ogc_getImageUrl.apply(this,arguments)):a._hooked_ogc_getImageUrl.apply(this,[b,d,e,function(b){var g=a._matchAndRewrite(b);f&&f(g?g:b)}])}});esri.layers.ArcGISDynamicMapServiceLayer.extend({getImageUrl:function(b,d,e,f){a._isOnline.get()?((!d||!e)&&a.app.trace.error("Invalid dimensions on requested map image. This is usually due to an invalid map resize event."),
a._hooked_esri_getImageUrl.apply(this,arguments)):a._hooked_esri_getImageUrl.apply(this,[b,d,e,function(b){var g=a._matchAndRewrite(b);f&&f(g?g:b)}])}})};b.prototype._matchAndRewrite=function(a){for(var b=0;b<this._rewriteRules.length;++b){var d=this._rewriteRules[b],e=RegExp(d.pattern).exec(a);if(e&&e.length&&e.length>0)return this._rewriteRequest(null,d,e)}return null};b.prototype.registerHandler=function(a,b){this._handlers[a]=b};b.prototype._hookDeferredCallbacks=function(a){var b=a.dfd,d=a.load;
d&&b.addCallback(function(a){var e=b._pendingDfd,e=e&&e.ioArgs;return d.call(e&&e.args,a,e)});var e=a.error;e&&b.addErrback(function(a){var d=b._pendingDfd,d=d&&d.ioArgs;return e.call(d&&d.args,a,d)})};b.prototype._canTakeApplicationOffline=function(){return!this._index||!this._index.entries?(this._loadResourceIndex(),false):this._index.isEmpty()?false:!this.app.isOffline.get()};b.prototype._canTakeApplicationOnline=function(){return!this._index||!this._index.entries?(this._loadResourceIndex(),false):
this.app.isOffline.get()};b.prototype._downloadOfflineResourcesImpl=function(){if(this.app.isOffline.get()){var a=this.getResource("language-offline-viewer-provision-online-only"),b=this.getResource("language-offline-viewer-provision-online-only-title");this._reportStatus(a,b,false)}else this._provision(false,null,null)};b.prototype._takeApplicationOfflineImpl=function(){this.app.isOffline.set(true);this._raiseCanExecuteChanged()};b.prototype._takeApplicationOnlineImpl=function(){this.app.isOffline.set(false);
this._raiseCanExecuteChanged()};b.prototype._clearStorageForApplicationImpl=function(a){var b=this,d=function(){b.app.store.clear(function(){b.app.trace.info("Offline data for this application cleared.");b.app.event("ApplicationStorageClearedEvent").publish();b._loadResourceIndex();var a=b.getResource("language-offline-data-cleared"),d=b.getResource("language-offline-data-cleared-title");b.app.command("Alert").execute(a,d);b.app.isNative&&!b.app.isOffline.get()&&b.app.command("SetGMAFOfflineButtonState").execute("show-none")},
function(a){b.app.trace.info("There was an error clearing offline data.");var d=b.getResource("language-offline-error-clearing-data");b.app.command("Alert").execute(d.format(a))})};a?this.app.command("Confirm").execute(this.getResource("language-clear-storage-confirm"),this.getResource("language-clear-storage"),function(a){a&&d()}):d()};b.prototype._clearStorageForDomainImpl=function(a){var b=this,d=function(){b.app.store.clearAllData(function(){b.app.trace.info("Offline data for this domain cleared.");
b.app.event("DomainStorageClearedEvent").publish();b._loadResourceIndex();var a=b.getResource("language-offline-data-cleared"),d=b.getResource("language-offline-data-cleared-title");b.app.command("Alert").execute(a,d);b.app.isNative&&!b.app.isOffline.get()&&b.app.command("SetGMAFOfflineButtonState").execute("show-none")},function(a){b.app.trace.info("There was an error clearing offline data.");var d=b.getResource("language-offline-error-clearing-data");b.app.command("Alert").execute(d.format(a))})};
a?this.app.command("Confirm").execute(this.getResource("language-clear-storage-domain-confirm"),this.getResource("language-clear-storage-domain"),function(a){a&&d()}):d()};b.prototype._setGmafOfflineButtonStateImpl=function(a){var b=this;if(this.app.localServerAddress!=null&&this.app.localServerAddress!=""){var d=this.app.localServerAddress+"/toggleconnectivity/"+a;require(["dojo/request/xhr"],function(a){a(d,{handleAs:"text"}).then(function(){},function(a){b.app.trace.error("There was an error with the request {0} : {1}".format(d,
a))})});this._nativeAppHasBeenNotified=true}};b.prototype._toggleConnectivityImpl=function(){if(this._statusHandle)this.app.command("RemoveStatus").execute(this._statusHandle),this._statusHandle=null;var a=this.app.isOffline.get();this.app.isOffline.set(!a);this.app.command("TakeApplicationOffline").raiseCanExecuteChanged();this.app.command("TakeApplicationOnline").raiseCanExecuteChanged();var b=new e.infrastructure.commandArgs.AddStatusArgs(this.getResource(a?"language-app-gone-online":"language-app-gone-offline"));
this.app.command("AddStatus").execute(b);this._statusHandle=b.id;this.app.isNative&&(a?this._offlineDataAvailable()?this.app.command("SetGMAFOfflineButtonState").execute("show-offline"):this.app.command("SetGMAFOfflineButtonState").execute("show-none"):this.app.command("SetGMAFOfflineButtonState").execute("show-online"))};b.prototype._autoDownloadOfflineResourcesImpl=function(a,b){this.app.isOffline.get()?this._reportStatus(this.getResource("language-offline-viewer-provision-online-only"),null,true,
"error",null,b):(this._reportStatus(this.getResource("language-offline-automatic-provisioning-started"),null,true),this._provision(true,a,b))};b.prototype._getOfflineBundleIndexImpl=function(a){var b=this;a&&this._loadResourceIndex(function(){a(b._index)})};b.prototype._raiseCanExecuteChanged=function(){this.app.command("TakeApplicationOffline").raiseCanExecuteChanged();this.app.command("TakeApplicationOnline").raiseCanExecuteChanged()};b.prototype._startUpdatingResources=function(a,b,d,e){var j=
this;this._index=null;if(!a||!a.id){var i=this.getResource("language-offline-provisioning-failed-invalid-bundle");this.app.trace.error(i);this._reportStatus(i,null,b,"error",null,e)}else this.app.store.get("__index",function(i){j._temporaryDevelopmentFlag_alwaysCreateNewIndex&&(i=null);var l;if(i)try{l=new f.OfflineResourceIndex(JSON.parse(i))}catch(v){i="Could not load offline resource index, an error occurred while parsing the resource index: {0}".format(v);j.app.trace.error(i);j._index=new f.OfflineResourceIndex;
j._reportStatus(i,null,b,"error",null,e);return}else l=new f.OfflineResourceIndex;l.bundleId=a.id;l.generated=j._catalogTimestamps[a.id];j._index=l;j._indexBundleContents(a,b,d,e)},function(a){a=!j._isOnline.get()?"Offline storage failed while trying to start the application in an offline state: {0}".format(a):j.getResource("language-offline-provisioning-failed-index-get");j.app.trace.error(a);j._reportStatus(a,null,b,"error",null,e)})};b.prototype._indexBundleContents=function(a,b,d,e){var j=this;
if(!this._index||!a)this._reportStatus(this.getResource("language-offline-bundle-index-error"),null,b,"error",null,e);else{this._resourcesToAdd={};for(var i in a.resources)if(a.resources.hasOwnProperty(i)){var l=a.resources[i];this._resourcesToAdd[l.key]=new f.OfflineResourceEntry(l);this._index.entries[l.key]=new f.OfflineResourceEntry(l);delete this._index.entries[l.key].value}this.app.store.set("__index",JSON.stringify(this._index),function(){j.app.trace.debug("Created and saved offline storage index for viewer '{0}'.".format(j.app.id));
j._addBundleResources(a,b,d,e)},function(a){j.app.trace.error("Could not save offline storage index for viewer '{0}': {1}".format(j.app.id,a));a=j.getResource("language-offline-bundle-index-error");j._reportStatus(a,null,b,"error",null,e)})}};b.prototype._addBundleResources=function(a,b,d,e){var f=this,j=0,i=true,k={},a=function(a){f.app.trace.trace("Offline resource '{0}' saved.".format(a));q()},l=function(a,b){b&&a.code&&!k.hasOwnProperty(a.code)&&(f.app.trace.warning("Failed to save offline resource '{0}': {1}.".format(b,
a)),k[a.code]=true,a.code==22&&window.localStorage&&window.localStorage.remainingSpace&&f.app.trace.warning("Local storage has {0} bytes remaining.".format(window.localStorage.remainingSpace)));i=false;f._index&&f._index.entries&&f._index.entries.hasOwnProperty(b)&&delete f._index.entries[b];q()},q=function(){--j;if(j<=0){f._resourcesToAdd={};var a,l;i?(a=b?f.getResource("language-offline-automatic-provisioning-succeeded").format((new Date(f._index.generated)).toLocaleString()):f.getResource("language-offline-provisioning-succeeded"),
l=f.getResource("language-offline-provisioning-succeeded-title"),f.app.isNative&&(f.app.isOffline?f.app.command("SetGMAFOfflineButtonState").execute("show-offline"):f.app.command("SetGMAFOfflineButtonState").execute("show-online")),f._reportStatus(a,l,b,null,d,null)):(l=f.getResource("language-offline-provisioning-failed-title"),a=k.hasOwnProperty("22")?f.getResource("language-offline-provisioning-failed-code22"):f.getResource("language-offline-provisioning-failed"),f._reportStatus(a,l,b,"error",
null,e),f.app.store.clear());f._loadResourceIndex();f._loadRoutingRules()}},p;for(p in this._resourcesToAdd)if(this._resourcesToAdd.hasOwnProperty(p)){j+=1;var r=this._resourcesToAdd[p],u=r.value;typeof u==="object"&&(u=JSON.stringify(u));this.app.store.set(r.key.replace("://","___PROTO___").replace(/\/\//g,"/").replace("___PROTO___","://"),u,a,l,r.isShared)}};b.prototype._provision=function(a,b,d){var e=this;f.buildBundle({app:this.app,configuration:this.configuration}).then(function(f){e._catalogTimestamps[f.id]=
(new Date).getTime();e._startUpdatingResources(f,a,b,d)},function(b){e.app.trace.error(b.message);e._reportStatus(b.message,null,a,"error",null,d)})};b.prototype._loadResourceIndex=function(a){var b=this;if(!this._isLoadingResourceIndex)this._isLoadingResourceIndex=true,this.app.store.get("__index",function(d){var e=true;if(d)try{if(b._index=new f.OfflineResourceIndex(JSON.parse(d)),b._index.bundleId&&b._index.generated)b._catalogTimestamps[b._index.bundleId]=b._index.generated}catch(j){b.app.trace.error("Could not load offline resource index, an error occurred while parsing the resource index: {0}".format(j)),
b._index=new f.OfflineResourceIndex,e=false}else b._index=new f.OfflineResourceIndex;b._raiseCanExecuteChanged();b._isLoadingResourceIndex=false;a&&a(e)},function(d){b._isOnline.get()||(b.app.trace.warning("An error occurred while attempting to fetch offline request routing rules: {0}".format(d)),b._raiseCanExecuteChanged());b._isLoadingResourceIndex=false;a&&a(false)})};b.prototype._loadConfiguredRoutingRules=function(){if(this.configuration.hasOwnProperty("rules"))for(var a=0;a<this.configuration.rules.length;++a){var b=
new f.RoutingRule(this.configuration.rules[a]);this._rules.push(b);b.handlerName==="Rewrite"&&this._rewriteRules.push(b)}};b.prototype._loadRoutingRules=function(){var a=this;this.app.store.get("__routing",function(b){if(b){for(var b=JSON.parse(b),d=0;d<b.length;++d)a._rules.push(b[d]),b[d].handlerName==="Rewrite"&&a._rewriteRules.push(b[d]);a._isReady.set(true)}else a.app.trace.debug("No offline request routing table was found.")},function(b){a._isOnline.get()||a.app.trace.warning("An error occurred while attempting to fetch offline request routing rules: {0}".format(b))})};
b.prototype._stripOutProxy=function(a){if(!a)return null;var b=this.app.configuration.proxyUri;if(a.indexOf(b)>=0){if(a.replace)return a.replace(b,"")}else return a;return null};b.prototype._handleOfflineRequest=function(a,b){var d=this,e=new dojo.Deferred,j=function(){for(var j=new f.RequestContext(a,e,b),i=d._stripOutProxy(j.url),t=false,l=0;l<d._rules.length;++l){var q=d._rules[l],p=RegExp(q.pattern).exec(i);if(p&&p.length&&p.length>0){var r=d._handlers[q.handlerName];if(r){t=true;try{if(r(j,q,
p)===false)t=false;else break}catch(u){d.app.trace.warning("Offline request failed for resource '{0}': {1}".format(a.url,u));e.errback(Error("Offline request failed"));break}}else d.app.trace.warning("Offline request failed for resource '{0}': matching rule found without handler".format(a.url))}}if(!t)if(d._isOnline.get())return d._hooked_esri_request(a,b);else d.app.trace.warning("Offline request failed for resource '{0}': no handling rule was found.".format(a.url)),e.errback(Error("Offline request failed."))};
if(this._isReady.get())setTimeout(function(){j()},1);else this._isReady.once(this,j);return e};b.prototype._failRequest=function(a){a.dfd.reject()};b.prototype._rewriteRequest=function(a,b,d){a=b.parameters.newUrl||b.parameters[0].value;a=a.format.apply(a,d);return a=a.replace("{localserver}",this.app.localServerAddress)};b.prototype._serveNonSharedResource=function(a,b,d){return this._serveResourceImpl(a,b,d,false)};b.prototype._serveSharedResource=function(a,b,d){return this._serveResourceImpl(a,
b,d,true)};b.prototype._serveResourceImpl=function(a,b,h,e){var f=this;if(!b.parameters)return false;var j=b.parameters.key||b.parameters[0].value;if(!j)return false;j=j.format.apply(j,h);this.app.store.get(j,function(b){if(b){var g=f._index.entries[j];g?(g.isEncoded===true&&(b=d.framework.utils.base64Decode(b)),g.isJson===true&&(b=JSON.parse(b)),setTimeout(function(){a.dfd.resolve.apply(a.dfd,[b])},10)):(f.app.trace.warning("Missing metadata for offline resource '{0}'.".format(j)),a.dfd.reject.apply(a.dfd,
["Missing offline resource '{0}'.".format(j)]))}else f.app.trace.warning("Missing offline resource '{0}'.".format(j)),a.dfd.reject.apply(a.dfd,["Missing offline resource '{0}'.".format(j)])},function(a){f.app.trace.error("Error occurred fetching offline resource: {0}".format(a))},e);return true};b.prototype._reportStatus=function(a,b,d,e,f,j){a&&(d?this.app.command("UpdateFeatureLayerModalMessage").execute(a,e):this.app.command("Alert").execute(a,b));f?f(a):j&&j(a)};return b}(d.framework.application.ModuleBase);
f.OfflineModule=i})(f.offline||(f.offline={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){return function(d){d?dojo.safeMixin(this,d):this.key=""}}();d.OfflineResourceEntry=e})(d.offline||(d.offline={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){function d(b){b?dojo.mixin(this,b):this.entries={}}d.prototype.isEmpty=function(){if(!this.entries)return false;for(var b in this.entries)if(this.entries.hasOwnProperty(b))return false;return true};return d}();d.OfflineResourceIndex=e})(d.offline||(d.offline={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){return function(d,b,a){this.url=this.timeOut=this.handleAs=this.content=this.options=null;d&&dojo.mixin(this,d);this.dfd=b||new dojo.Deferred;this.options=a||null}}();d.RequestContext=e})(d.offline||(d.offline={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){return function(d){d&&dojo.mixin(this,d)}}();d.RoutingRule=e})(d.offline||(d.offline={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){function f(a){return[{handlerName:"Rewrite",pattern:a,parameters:[{name:"newUrl",value:"Resources/Images/blank-tile.png"}]}]}function j(a){a=decodeURI(a).replace(/%24/g,"$");return[{handlerName:"Rewrite",pattern:a.replace(/\$?{subDomain}/ig,"(?:.*)").replace(/\$?{level}/ig,"[0-9]*").replace(/\$?{row}/ig,"[0-9]*").replace(/\$?{col}/ig,"[0-9]*"),parameters:[{name:"newUrl",value:"Resources/Images/blank-tile.png"}]}]}function b(a,b){var d=
[],h=/^(.*)(\/\+?[0-9]+\/?\+?)$/.exec(a)[1];d.push({handlerName:"ServeSharedResource",pattern:h+"/$",parameters:[{name:"key",value:h}]});d=d.concat(g(h,b));b.serviceLayer&&b.serviceLayer.relationships&&b.serviceLayer.relationships.forEach(function(a){a=h+"/+"+a.relatedTableId;d=d.concat(g(a,b));d.push({handlerName:"ServeSharedResource",pattern:a,parameters:[{name:"key",value:a}]})});return d}function a(a,b,g){var d=null;g.configuration.basemaps&&(g=g.configuration.basemaps.filter(function(a){return a.url===
b.url||a.url===b.serviceUrl}),g.length>0&&(d=g[0]));return d?(g=h(a),[{handlerName:"Rewrite",pattern:a+"/+tile/+([0-9]*)/+([0-9]*)/+([0-9]*)",parameters:[{name:"newUrl",value:"{localserver}/tile/"+d.fileName.replace(" ","_")+"/{{{0}}}/{{{1}}}/{{{2}}}".format(g+1,g+2,g+3)}]},{handlerName:"Rewrite",pattern:a+"/+tilemap/+([0-9]*)/+([0-9]*)/+([0-9]*)/+([0-9]*)/+([0-9]*)",parameters:[{name:"newUrl",value:"{localserver}/tilemap/"+d.fileName.replace(" ","_")+"/{{{0}}}/{{{1}}}/{{{2}}}/{{{3}}}/{{{4}}}".format(g+
1,g+2,g+3,g+4,g+5)}]}]):f(a+"/(tile|tilemap|export)")}function g(a){return[{handlerName:"ServeSharedResource",pattern:a+"/+(query|queryRelatedRecords|identify|find)",parameters:[{name:"key",value:"__no_features"}]}]}function h(a){a instanceof RegExp?(a=a.toString(),a=a.substring(1,a.length-2),a=RegExp(a+"|")):a=RegExp(a.toString()+"|");return a.exec("").length-1}e.buildRoutingRules=function(h){var i=[];i.push({handlerName:"Rewrite",pattern:"/arcgis/+rest/+services/+Utilities/+Geometry/+GeometryServer/+(.*)",
parameters:[{name:"newUrl",value:"{localserver}/GeometryServer/{1}"}]});i.push({handlerName:"ServeNonSharedResource",pattern:"/map/+layerlist$",parameters:[{name:"key",value:"__layerlist_"}]});i.push({handlerName:"ServeSharedResource",pattern:"/search$",parameters:[{name:"key",value:"__no_search_results"}]});i.push({handlerName:"ServeNonSharedResource",pattern:e.urlToPattern(h.app.site.originalUrl)+"/*$",parameters:[{name:"key",value:"__site_"}]});var v=[],n=h.app.site.essentialsMap.mapServices;h.app.site.overviewMap&&
(n=n.concat(h.app.site.overviewMap.mapServices));n.forEach(function(n){if(v.indexOf(n.url)===-1){v.push(n.url);var m=n.serviceLayer&&n.serviceLayer.attributionDataUrl||n.attributionDataUrl;m&&i.push({handlerName:"ServeSharedResource",pattern:e.urlToPattern(m),parameters:[{name:"key",value:"__empty_attribution_response"}]});m=e.urlToPattern(e.cleanUpMapServiceUrl(h,n));n.mapServiceType===d.essentials.MapServiceType.BING||n.mapServiceType===d.essentials.MapServiceType.WMS?i=i.concat(f(m)):n.mapServiceType===
d.essentials.MapServiceType.WMTS||n.mapServiceType===d.essentials.MapServiceType.WEBTILED?i=i.concat(j(m)):(n.mapServiceType===d.essentials.MapServiceType.FEATURE&&(i=i.concat(b(m,n))),n.mapServiceType!==d.essentials.MapServiceType.FEATURE&&(i=i.concat(a(m,n,h))),n.mapServiceFunction!==d.essentials.MapServiceFunction.BASE&&(i=i.concat(g(m,n))),i.push({handlerName:"ServeSharedResource",pattern:m,parameters:[{name:"key",value:m}]}))}});return i}})(e.offline||(e.offline={}))})(e.modules||(e.modules=
{}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,b){e.call(this,a,b);this._userName=new Observable;this._eventRelay=null}__extends(b,e);b.prototype.initialize=function(a){var b=this;this.app.command("LogOptimizerEvent").register(this,this._executeLogOptimizerEvent,this._canExecuteLogOptimizerEvent);this._loggingEnabled=a&&a.enabled!=void 0?a.enabled:false;this._userName.set(a&&a.userName&&a.userName!=""?a.userName:"DefaultUser");this._dataRelayUri=a&&
a.dataRelayUri&&a.dataRelayUri!=""?a.dataRelayUri:"http://localhost/Geocortex/Optimizer/Rest/DataRelay/LogData.ashx?f=json";if(!(this._loggingEnabled===false||this.app.isOffline.get()===true)){this._dataRelayUri.endsWith(".ashx")&&(this._dataRelayUri+="?f=json");if(this._requiresProxy(this._dataRelayUri))this._dataRelayUri=this.app.configuration.proxyUri+this._dataRelayUri;var d=this._userName.bind(this,function(){if(b._eventRelay!=null)b._eventRelay.userName=b._userName.get();b._userName.unbind(d)});
this._authenticationSucceededToken=this.app.event("AuthenticationSucceededEvent").subscribe(this,this._handleAuthenticationSucceeded);this._authenticationFailedToken=this.app.event("AuthenticationFailedEvent").subscribe(this,this._handleAuthenticationFailed);if(this.app.map&&this.app.map.loaded)this._onMapLoaded();else var e=this.app.event("MapLoadedEvent").subscribe(this,function(){b.app.event("MapLoadedEvent").unsubscribe(e);b._onMapLoaded()})}};b.prototype._onMapLoaded=function(){this._eventRelay=
new d.optimizer.EventRelay(this.app.map,this.app.site.id,this._dataRelayUri,this._userName.get());this._executeLogOptimizerEvent("ViewerShell",this.app.shellName)};b.prototype._canExecuteLogOptimizerEvent=function(){return this._loggingEnabled&&this._eventRelay!=null};b.prototype._executeLogOptimizerEvent=function(a,b){this._eventRelay.logToolUsage(a,b)};b.prototype._handleAuthenticationSucceeded=function(a){a.result===true&&this._userName.set(a.username);this._eventRelay!=null&&this._executeLogOptimizerEvent("AuthenticationSucceededEvent",
a.username);this._unsubscribeFromAuthenticationEvents()};b.prototype._handleAuthenticationFailed=function(a){this._eventRelay!=null&&this._executeLogOptimizerEvent("AuthenticationFailedEvent",a.username)};b.prototype._unsubscribeFromAuthenticationEvents=function(){this.app.event("AuthenticationSucceededEvent").unsubscribe(this._authenticationSucceededToken);this.app.event("AuthenticationFailedEvent").unsubscribe(this._authenticationSucceededToken)};b.prototype._requiresProxy=function(a){var a=new dojo._Url(a),
b=window.location;return!a.scheme&&!a.host&&!a.port?false:b.protocol+"//"+b.hostname+(b.port?":"+b.port:"")===a.scheme+"://"+a.host+(a.port?":"+a.port:"")?false:true};return b}(d.framework.application.ModuleBase);e.OptimizerIntegrationModule=f})(e.optimizerIntegration||(e.optimizerIntegration={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.framework.application.ModuleBase);e.OverviewMapModule=f})(e.overviewMap||(e.overviewMap={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.activated=function(){var a=this;$(this.root).parent("[class*='bottom']").length&&this.viewModel.isBottom.set(true);$(this.root).parent("[class*='right']").length&&this.viewModel.isRight.set(true);$(this.root).parent("[class*='bottom']").length&&$(this.root).parent("[class*='right']").length&&$(".esriControlsBR").addClass("overview-map-attribution-override");
$(this.root).parent("[class*='left']").length&&this.viewModel.isLeft.set(true);$(this.root).parent("[class*='top']").length&&this.viewModel.isTop.set(true);this.app.command("OpenOverviewMap").register(this,this._loadOverviewMap);this.app.command("CloseOverviewMap").register(this,function(){return a.viewModel.isActive.set(false)})};b.prototype._loadOverviewMap=function(){var a=this;this.viewModel.isActive.set(true);this.viewModel.overviewMapDijit==null?setTimeout(function(){a.loadOverviewMapDijit();
a.app.command("FocusOnFirstInputInView").execute(a)},250):this.app.command("FocusOnFirstInputInView").execute(this)};b.prototype.toggleMap=function(){this.viewModel.isActive.get()===false?this.app.command("OpenOverviewMap").execute():this.app.command("CloseOverviewMap").execute()};b.prototype.loadOverviewMapDijit=function(){if(this.viewModel.isEnabled.get()!=false&&!(this.viewModel.overviewMapDijit!=null&&this.viewModel.isEnabled.get())){var a=this.app.site.overviewMap,b="#00FFFF";this.viewModel.visibleExtentColour.get()&&
(b=this.viewModel.visibleExtentColour.get());this.viewModel.overviewMapDijit=new esri.dijit.OverviewMap({map:this.app.map,baseLayer:null,visible:true,width:205,height:180,color:b,expandFactor:this.viewModel.extentScaleFactor.get(),maximizeButton:false},this.viewModel.overviewMapId.get());try{this.viewModel.overviewMapDijit.startup()}catch(d){this.app.trace.alert("Error encountered loading overview map: "+d);this.viewModel.overviewMapDijit.hide();this.viewModel.overviewMapDijit.destroy();return}var e=
this.viewModel.overviewMapDijit,b=e.map,b=e.overviewMap;b.removeAllLayers();for(e=a.mapServices.length-1;e>=0;e--){var f=a.mapServices[e];f&&b.addLayer(f.serviceLayer)}b.layerIds.length===0&&(this.app.trace.info("No supported layers available for overview map. Disabling overview map."),this.viewModel.isEnabled.set(false));(a=$(this.root).find(".ovwHighlight")[0])?a.setAttribute("tabindex","0"):this.app.trace.warning("Unable for find overview map highlight area!")}};return b}(d.framework.ui.ViewBase);
e.OverviewMapView=f})(e.overviewMap||(e.overviewMap={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(f){function b(){f.apply(this,arguments);this.isEnabled=new Observable(false);this.isActive=new Observable(false);this.altText=new Observable(null);this.extentScaleFactor=new Observable(null);this.visibleExtentColour=new Observable(null);this.overviewMapDijit=null;this.overviewMapId=new Observable(null);this.isLeft=new Observable(false);this.isRight=new Observable(false);this.isTop=new Observable(false);this.isBottom=new Observable(false);
this.bottomAndActive=new Observable(false)}__extends(b,f);b.prototype.initialize=function(a){var b=this;if(this.app.map&&this.app.map.loaded)this._loadConfig(a);else this.app.event("MapLoadedEvent").once(this,function(){return b._loadConfig(a)});this.overviewMapId.set(d.framework.utils.alphaNumericToken())};b.prototype._loadConfig=function(a){var b=this;if(this.app.site.hasOverviewMap){a&&(a.isEnabled&&this.isEnabled.set(true),a.openByDefault===true&&(this.isActive.set(true),this.app.command("OpenOverviewMap").execute()),
a.extentScaleFactor&&this.extentScaleFactor.set(a.extentScaleFactor),a.visibleExtentColour&&this.visibleExtentColour.set(a.visibleExtentColour));this.altText.set(this.getResource("language-feature-overview-map-toggle"));this.isActive.bind(this,function(a){a==true&&b.isBottom.get()==true?b.bottomAndActive.set(true):b.bottomAndActive.set(false)});for(var a=this.app.site.overviewMap,d=[],f=a.mapServices.length-1;f>=0;f--){var j=a.mapServices[f];j&&(e.infrastructure.GeometryUtils.needsProjection(new esri.geometry.Point(1,
1,j.serviceLayer.spatialReference),this.app)&&this.app.trace.warning("Overview Map Layer WKID/WKT differs from basemap. There may be rendering errors in the overview map. Layer: "+j.serviceUrl),d.push(j))}d.length==0&&(this.app.trace.info(this.app.getResource(this.libraryId,"language-feature-overview-map-error-no-base-layer")),$(".esriControlsBR").removeClass("attributionOverride"),this.isEnabled.set(false))}else $(".esriControlsBR").removeClass("attributionOverride")};return b}(d.framework.ui.ViewModelBase);
f.OverviewMapViewModel=i})(f.overviewMap||(f.overviewMap={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.framework.application.ModuleBase);e.PrintingModule=f})(e.printing||(e.printing={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(d){function b(a,g){d.call(this,a,g);this._activeViewId=this._pushpinsLayer=this._defaultPushpinSymbol=this._cachedSymbol=this._handles=null;this._imageUrlErrors={};this.initialized=false;this.enabled=true;this.pushpinMarkerUri=b.DEFAULT_PUSHPIN_MARKER_URI;this.pushpinMarkerHeight=this.pushpinMarkerWidth=32;this.offsetX=0;this.offsetY=16;this._handles={appEvents:null,mapEvents:null,fsEvents:[]};this.featureSetCollection=
new Observable;this.featureSetCollection.bind(this,this._handleCollectionChanged);this._defaultPushpinSymbol=new esri.symbol.PictureMarkerSymbol(b.DEFAULT_PUSHPIN_MARKER_URI,32,32);this._defaultPushpinSymbol.setOffset(0,16);this._registerCommands()}__extends(b,d);b.prototype.initialize=function(a){var b=this;d.prototype.initialize.call(this,a);if(a){if(a.hasOwnProperty("pushpinsEnabled"))this.enabled=!!a.pushpinsEnabled;if(a.hasOwnProperty("pushpinMarkerUri"))this.pushpinMarkerUri=a.pushpinMarkerUri;
if(a.hasOwnProperty("pushpinMarkerWidth"))this.pushpinMarkerWidth=parseInt(a.pushpinMarkerWidth);if(a.hasOwnProperty("pushpinMarkerHeight"))this.pushpinMarkerHeight=parseInt(a.pushpinMarkerHeight);if(a.hasOwnProperty("offsetX"))this.offsetX=parseInt(a.offsetX);if(a.hasOwnProperty("offsetY"))this.offsetY=parseInt(a.offsetY);if(a.hasOwnProperty("eventMappings"))this.eventMappings=a.eventMappings||{}}this._getPushpinSymbolAsync(this.pushpinMarkerUri,this.pushpinMarkerWidth,this.pushpinMarkerHeight,this.offsetX,
this.offsetY).then(function(a){b._cachedSymbol=a||b._defaultPushpinSymbol;b.initialized=true;b.app.command("AddPushpin").raiseCanExecuteChanged();b.app.command("AddPushpins").raiseCanExecuteChanged();b.app.command("RemovePushpin").raiseCanExecuteChanged();b.app.command("RemovePushpins").raiseCanExecuteChanged()});this.app.command("ShowPushpins").raiseCanExecuteChanged();this.app.command("HidePushpins").raiseCanExecuteChanged();this.app.command("AddPushpin").raiseCanExecuteChanged();this.app.command("AddPushpins").raiseCanExecuteChanged();
this.app.command("RemovePushpin").raiseCanExecuteChanged();this.app.command("RemovePushpins").raiseCanExecuteChanged();this.enabled?this.app.command("EnablePushpins").execute():this.app.command("DisablePushpins").execute()};b.prototype.isReady=function(){return this.enabled&&this.initialized};b.prototype._registerCommands=function(){this.app.command("EnablePushpins").register(this,this._executeEnablePushpins);this.app.command("DisablePushpins").register(this,this._executeDisablePushpins);this.app.command("ShowPushpins").register(this,
this._executeShowPushpins,this.isReady);this.app.command("HidePushpins").register(this,this._executeHidePushpins,this.isReady);this.app.command("AddPushpin").register(this,this._addPushpin,this.isReady);this.app.command("AddPushpins").register(this,this._executeAddPushpins,this.isReady);this.app.command("RemovePushpin").register(this,this._executeRemovePushpin,this.isReady);this.app.command("RemovePushpins").register(this,this._executeRemovePushpins,this.isReady)};b.prototype._subscribeAll=function(){var a=
this;this._unsubscribeAll();this._handles.appEvents=[];this._connectAppEvent("ResultsPageChangedEvent",this._resultsPageChangedEventHandler);this._connectAppEvent("FSMCollectionRemovedEvent",this._fsmCollectionRemovedEventHandler);this._connectAppEvent("ResultsViewOpenedEvent",function(b){a._trackView(b);a.app.command("ShowPushpins").execute()});this._connectAppEvent("ResultsViewCollapsedEvent",function(b){b&&b.id===a._activeViewId&&a.app.command("HidePushpins").execute()});if(this.eventMappings)for(var b in this.eventMappings)if(this.eventMappings.hasOwnProperty(b)){var d=
this._wireUpConfiguredEventHandler(b,this.eventMappings[b]);this._handles.appEvents.push({eventName:b,token:d})}if(this.app.site&&this.app.site.isInitialized)this._connectMapEvents(this.app.map);else this.app.event("SiteInitializedEvent").once(this,function(){return a._connectMapEvents(a.app.map)});this._connectAppEvent("FeatureDeletedEvent",function(b){b&&a._executeRemovePushpin(b)})};b.prototype._unsubscribeAll=function(){this._disconnectMapEvents();this._disconnectFeatureSetChanges();this._disconnectAppEvents()};
b.prototype._trackView=function(a){if(a)this._activeViewId=a.id};b.prototype._executeEnablePushpins=function(){this.enabled=true;this._subscribeAll();this.app.command("ShowPushpins").raiseCanExecuteChanged();this.app.command("HidePushpins").raiseCanExecuteChanged();this.app.command("AddPushpin").raiseCanExecuteChanged();this.app.command("AddPushpins").raiseCanExecuteChanged();this.app.command("RemovePushpin").raiseCanExecuteChanged();this.app.command("RemovePushpins").raiseCanExecuteChanged()};b.prototype._executeDisablePushpins=
function(){this.enabled=false;this._unsubscribeAll();var a=this._getPushpinsLayer();a.clear();a.hide();this.app.command("ShowPushpins").raiseCanExecuteChanged();this.app.command("HidePushpins").raiseCanExecuteChanged();this.app.command("AddPushpin").raiseCanExecuteChanged();this.app.command("AddPushpins").raiseCanExecuteChanged();this.app.command("RemovePushpin").raiseCanExecuteChanged();this.app.command("RemovePushpins").raiseCanExecuteChanged()};b.prototype._executeShowPushpins=function(){this._setPushpinsVisibility(true)};
b.prototype._executeHidePushpins=function(){this._setPushpinsVisibility(false)};b.prototype._executeAddPushpins=function(a){this.featureSetCollection.set(this.app.featureSetManager.getCollectionById(a))};b.prototype._executeRemovePushpins=function(){this.featureSetCollection.set(null)};b.prototype._setPushpinsVisibility=function(a){this._getPushpinsLayer().setVisibility(a);this.app.command("ShowPushpins").raiseCanExecuteChanged();this.app.command("HidePushpins").raiseCanExecuteChanged()};b.prototype._connectAppEvent=
function(a,b){var d=this.app.event(a).subscribe(this,b);this._handles.appEvents.push({eventName:a,token:d})};b.prototype._disconnectAppEvents=function(){if(this._handles.appEvents)for(var a=0;a<this._handles.appEvents.length;a++){var b=this._handles.appEvents[a];this.app.event(b.eventName).unsubscribe(b.token)}this._handles.appEvents=null};b.prototype._connectMapEvents=function(a){var b=this;this._handles.mapEvents=[a.on("layer-add-result",function(a){b.initialized&&b.enabled&&a.layer&&b._pushpinsLayer&&
a.layer.id!==b._pushpinsLayer.id&&b._movePushpinsToFront()}),a.on("layer-remove",function(a){b.initialized&&b.enabled&&a.layer&&b._pushpinsLayer&&a.layer.id!==b._pushpinsLayer.id&&b._movePushpinsToFront()}),a.on("layers-reordered",function(){b.initialized&&b.enabled&&b._movePushpinsToFront()})]};b.prototype._disconnectMapEvents=function(){this._handles.mapEvents&&dojo.forEach(this._handles.mapEvents,function(a){a.remove()});this._handles.mapEvents=null};b.prototype._connectFeatureSetChanges=function(a){for(var b=
this,d=0;d<a.featureSets.getLength();d++){var e=a.featureSets.getAt(d);if(!this._handles.fsEvents.some(function(a){return a.collection===e.features})){var f=e.features.bind(this,function(d){return b._featureSetChanged(a.id,d)});this._handles.fsEvents.push({collection:e.features,token:f})}}};b.prototype._disconnectFeatureSetChanges=function(a){for(var a=a?a.featureSets.getRange(0):null,b=0;b<this._handles.fsEvents.length;b++){var d=this._handles.fsEvents[b];if(d.collection&&(!a||!a.some(function(a){return a.features===
d.collection})))d.collection.unbind(d.token),this._handles.fsEvents.splice(b,1),b--}};b.prototype._movePushpinsToFront=function(){if(this._pushpinsLayer){var a=this.app.map.graphicsLayerIds.length-1;this.app.map.getLayer(this._pushpinsLayer.id)!=null&&this.app.map.graphicsLayerIds[a]!==this._pushpinsLayer.id&&(this._disconnectMapEvents(),this.app.map.reorderLayer(this._pushpinsLayer,a),this._connectMapEvents(this.app.map))}};b.prototype._wireUpConfiguredEventHandler=function(a,b){var d=this;return this.app.event(a).subscribe(this,
function(a){var f=null;a&&(a instanceof esri.Graphic?f=d._getBackingFeature(a):a instanceof e.infrastructure.Feature&&(f=a));d._executeMappedCommands(b,f)})};b.prototype._executeMappedCommands=function(a,b){if(typeof a==="string")this.app.command(a).execute(b);else if(a instanceof Array)for(var d=0;d<a.length;d++)this.app.command(a[d]).execute(b)};b.prototype._getPushpinsLayer=function(){if(!this._pushpinsLayer)this._pushpinsLayer=new esri.layers.GraphicsLayer({id:b.DEFAULT_PUSHPINS_LAYER_NAME}),
this.app.map.addLayer(this._pushpinsLayer),this._attachMouseEventHandlers(this._pushpinsLayer),this._pushpinsLayer.hide();return this._pushpinsLayer};b.prototype._attachMouseEventHandlers=function(a){var b=this,a=a.getNode();$(a).on("click",function(a){b._getGraphicFromJQueryEvent(a,function(d){b.app.event("PushpinClickedEvent").publish(d);typeof a.preventDefault==="function"&&typeof a.stopPropagation==="function"&&(a.preventDefault(),a.stopPropagation())})});$(a).on("mousedown",function(a){b._getGraphicFromJQueryEvent(a,
function(d){a.button==0?b.app.event("PushpinMouseLeftButtonDownEvent").publish(d):a.button==2&&b.app.event("PushpinMouseRightButtonDownEvent").publish(d)})});$(a).on("mouseup",function(a){b._getGraphicFromJQueryEvent(a,function(d){a.button==0?b.app.event("PushpinMouseLeftButtonUpEvent").publish(d):a.button==2&&b.app.event("PushpinMouseRightButtonUpEvent").publish(d)})});$(a).on("mouseenter",function(a){b._getGraphicFromJQueryEvent(a,function(a){b.app.event("PushpinMouseEnterEvent").publish(a)})});
$(a).on("mouseleave",function(a){b._getGraphicFromJQueryEvent(a,function(a){b.app.event("PushpinMouseLeaveEvent").publish(a)})});this._linkBehaviorsToEvents()};b.prototype._linkBehaviorsToEvents=function(){var a=this;this.app.event("PushpinClickedEvent").subscribe(this,function(b){a.app.behavior("PushpinClickedBehavior").run(b.attributes.Feature)});this.app.event("PushpinMouseLeftButtonDownEvent").subscribe(this,function(b){a.app.behavior("PushpinMouseLeftButtonDownBehavior").run(b.attributes.Feature)});
this.app.event("PushpinMouseRightButtonDownEvent").subscribe(this,function(b){a.app.behavior("PushpinMouseRightButtonDownBehavior").run(b.attributes.Feature)});this.app.event("PushpinMouseLeftButtonUpEvent").subscribe(this,function(b){a.app.behavior("PushpinMouseLeftButtonUpBehavior").run(b.attributes.Feature)});this.app.event("PushpinMouseRightButtonUpEvent").subscribe(this,function(b){a.app.behavior("PushpinMouseRightButtonUpBehavior").run(b.attributes.Feature)});this.app.event("PushpinMouseEnterEvent").subscribe(this,
function(b){a.app.behavior("PushpinMouseEnterBehavior").run(b.attributes.Feature)});this.app.event("PushpinMouseLeaveEvent").subscribe(this,function(b){a.app.behavior("PushpinMouseLeaveBehavior").run(b.attributes.Feature)})};b.prototype._getGraphicFromJQueryEvent=function(a,b){if(a.originalEvent){var d=a.originalEvent.graphic;if((d===null||typeof d==="undefined")&&a.originalEvent.srcElement)d=a.originalEvent.srcElement.e_graphic;$.inArray(d,this._pushpinsLayer.graphics)!=-1&&b(d)}};b.prototype._handleCollectionChanged=
function(a){this._getPushpinsLayer().clear();this._disconnectFeatureSetChanges(a);if(a&&a.featureSets.getLength()>0&&a.getExtendedPropertyByName("ShowPushpins")!==false){for(var b=0;b<a.featureSets.getLength();b++)this._addPushpinsForFS(a.featureSets.getAt(b));this._orderPushpinCollection();this._connectFeatureSetChanges(a)}};b.prototype._resultsPageChangedEventHandler=function(a){if(this.featureSetCollection.get()&&a&&a.featureSetCollection&&a.featureSetCollection.id==this.featureSetCollection.get().id&&
(this._getPushpinsLayer().clear(),this._disconnectFeatureSetChanges(a.featureSetCollection),a.featureSetCollection.getExtendedPropertyByName("ShowPushpins")!==false)){for(var b=0;b<a.newValue.getLength();b++)this._addPushpin(a.newValue.getAt(b));this._orderPushpinCollection();this._connectFeatureSetChanges(a.featureSetCollection)}};b.prototype._featureSetChanged=function(a,b){var d=this;if(this.isReady()&&this.featureSetCollection.get()&&a&&a==this.featureSetCollection.get().id)if(b.type==="append"||
b.type==="insert"){for(var e=b.rangeStart;e<=b.rangeEnd;e++)this._addPushpin(b.sender.getAt(e));this._orderPushpinCollection()}else(b.type==="remove"||b.type==="clear")&&setTimeout(function(){d.featureSetCollection.get().featureSets.pulse()},0)};b.prototype._fsmCollectionRemovedEventHandler=function(a){this.featureSetCollection.get()&&a&&a.featureSetCollectionId&&a.featureSetCollectionId==this.featureSetCollection.get().id&&(this._disconnectFeatureSetChanges(),this._getPushpinsLayer().clear(),this.featureSetCollection.set(null))};
b.prototype._addPushpinsForFS=function(a){if(a&&a.features)for(var b=0;b<a.features.getLength();b++)this._addPushpin(a.features.getAt(b))};b.prototype._addPushpin=function(a){if(this.isReady()&&a&&a.esriFeature.get()&&a.hasValidGeometry.get()){var b=e.infrastructure.GeometryUtils.getMiddle(a.esriFeature.get().geometry);b&&(a=new esri.Graphic(b,this._cachedSymbol,{Feature:a},null),this._getPushpinsLayer().add(a))}};b.prototype._executeRemovePushpin=function(a){if(a){var b=a instanceof e.infrastructure.Feature?
a.esriFeature.get():a;if(this.isReady()&&b)for(var d=this._getPushpinsLayer(),f=0;f<d.graphics.length;f++){var j=d.graphics[f],i=j.attributes.Feature;if(i===a||i&&e.infrastructure.MapUtils.esriFeaturesEqual(b,i.esriFeature.get())){d.remove(j);break}}}};b.prototype._getBackingFeature=function(a){return a&&a.getLayer()&&a.getLayer().id===b.DEFAULT_PUSHPINS_LAYER_NAME&&a.attributes&&a.attributes.hasOwnProperty("Feature")?a.attributes.Feature:null};b.prototype._orderPushpinCollection=function(){var a=
this._getPushpinsLayer().graphics.slice(0);a&&a.length>0&&(a.sort(function(a,b){var d=a.geometry,e=b.geometry;if(d==null&&e==null)return 0;else if(d==null)return e.y-0||0-e.x;else if(e==null)return 0-d.y||d.x-0;return e.y-d.y||d.x-e.x}),dojo.forEach(a,function(a){(a=a?a.getShape():null)&&typeof a.moveToFront==="function"&&a.moveToFront()}))};b.prototype._getPushpinSymbolAsync=function(a,b,d,e,f){var j=this,i=new dojo.Deferred;this._cachedSymbol&&this._cachedSymbol.url===a&&this._cachedSymbol.width===
b&&this._cachedSymbol.height===d&&this._cachedSymbol.xoffset===e&&this._cachedSymbol.yoffset===f?i.resolve(this._cachedSymbol):this._checkImageExists(a).then(function(k){var l=null;k&&k.exists?(l=new esri.symbol.PictureMarkerSymbol(k.url,b||j.pushpinMarkerWidth,d||j.pushpinMarkerHeight),l.setOffset(e||j.offsetX,f||j.offsetY)):(j.app.trace.warning("Could not load pushpin image at {0}. The default marker image will be used.".format(a)),l=j._defaultPushpinSymbol);i.resolve(l)},function(){j.app.trace.warning("Could not load pushpin image at {0}. The default marker image will be used.".format(a));
i.resolve(j._defaultPushpinSymbol)});return i};b.prototype._checkImageExists=function(a){var b=this,d=new dojo.Deferred;if(!a||this._imageUrlErrors[a])d.resolve({url:a,exists:false});else{var e=new Image;e.onload=function(){d.resolve({url:a,exists:true})};e.onerror=function(){b._imageUrlErrors[a]=true;d.resolve({url:a,exists:false})};e.src=a;if(e.complete)e.onload=null,d.resolve({url:a,exists:true})}return d};b.DEFAULT_PUSHPIN_MARKER_URI="Resources/Images/Pushpins/map-marker-red-32.png";b.DEFAULT_PUSHPINS_LAYER_NAME=
"DefaultPushpinsLayer";return b}(d.framework.application.ModuleBase);f.PushpinsModule=i})(f.pushpins||(f.pushpins={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(f){function b(){f.apply(this,arguments)}__extends(b,f);b.prototype.initialize=function(a){this._config=a;this.app.command("LaunchBarcodeScannerWithCallback").register(this,this._executeLaunchBarcodeScanner);this.app.event("NativeMessageEvent").subscribe(this,this._handleNativeMessageEvent);this.app.event("_HtmlBarcodeScannerResult").subscribe(this,this._handleHtmlBarcodeScanner)};b.prototype._executeLaunchBarcodeScanner=
function(a){this.lastCallback=a;this._config.allowHtmlScanner!==false&&Modernizr.getusermedia&&Modernizr.webworkers?this.app.command("ActivateView").execute(this._config.htmlScannerView):this._config.allowNativeScanner!==false&&d.GeocortexNativeApp&&d.GeocortexNativeApp.launchBarcodeScanner?d.GeocortexNativeApp.launchBarcodeScanner():(this.app.trace.warning("Could not launch a QR scanner."),this.app.command("AddStatus").execute(new e.infrastructure.commandArgs.AddStatusArgs(this.getResource("language-barcode-scanner-unavailable"))))};
b.prototype._handleNativeMessageEvent=function(a){if(a.type==="BarcodeScanResult"&&this.lastCallback)this.lastCallback(a.parameters),this.lastCallback=null};b.prototype._handleHtmlBarcodeScanner=function(a){if(this.lastCallback)this.lastCallback({status:"Success",content:a.value}),this.lastCallback=null};return b}(d.framework.application.ModuleBase);f.BarcodeScannerModule=i})(f.barcodescanner||(f.barcodescanner={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.framework.application.ModuleBase);e.QueryBuilderModule=f})(e.queryBuilder||(e.queryBuilder={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,b){var h=this;d.call(this,a,b);this.app.command("PrintMap").register(this,function(){h.app.viewManager.activateView(h);h.viewModel.printComplete.set(false)},function(){return h.app.site&&h.app.site.hasPrintTemplates?true:false})}__extends(b,d);b.prototype.handleTemplateSelectionChanged=function(){this.viewModel.updatePrintTemplate()};b.prototype.handlePrintClick=function(){this.viewModel.performPrint()};
b.prototype.handleOpenFileClick=function(){window.open(this.viewModel.url.get());this.viewModel.printComplete.set(false)};return b}(d.framework.ui.ViewBase);e.PrintingView=f})(e.printing||(e.printing={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,b){var d=this;e.call(this,a,b);this.printTemplates=new ObservableCollection;this.outputFormats=new ObservableCollection;this.resolutions=new ObservableCollection;this.scales=new ObservableCollection;this.grids=new ObservableCollection;this.textFields=new ObservableCollection;this.textFied=new Observable(null);this.selectedTemplate=new Observable(null);this.selectedScale=new Observable(null);this.selectedResolution=
new Observable(null);this.selectedFormat=new Observable(null);this.selectedGrid=new Observable(null);this.supportsEmailNotification=new Observable(false);this.validEmailAddressSupplied=new Observable(false);this.emailAddress=new Observable(null);this.isPrinting=new Observable(false);this.printComplete=new Observable(false);this.isMapLoaded=new Observable(false);this.url=new Observable(null);if(this.app.site&&this.app.site.isInitialized)this.siteInitialized();else this.app.event("SiteInitializedEvent").once(this,
this.siteInitialized);this.app.event("MapExtentChangedEvent").subscribe(this,function(){var a=d.selectedTemplate.get();a&&d.setScales(a)})}__extends(b,e);b.prototype.siteInitialized=function(){if(this.app.site&&this.app.site.hasPrintTemplates){this.printTemplates.addItems(this.app.site.printTemplates);for(var a=this.printTemplates.getLength()-1;a>=0;a--)this.printTemplates.getAt(a).visible===false?this.printTemplates.removeAt(a):this.printTemplates.getAt(a).isDefault===true&&this.selectedTemplate.set(this.printTemplates.getAt(a));
this.selectedTemplate.get()===null&&this.selectedTemplate.set(this.printTemplates.getAt(0));this.updatePrintTemplate()}this.isMapLoaded.set(true);this.app.command("PrintMap").raiseCanExecuteChanged()};b.prototype.performPrint=function(){var a=this;this.isPrinting.set(true);var b=this.selectedTemplate.get();this.app.command("ScreenReaderNarrate").execute(this.app.getResource(this.libraryId,"language-is-printing"));var h=new d.essentials.ReportParameters;h.outputFormat=this.selectedFormat.get();h.resolution=
this.selectedResolution.get();h.grid=this.selectedGrid.get();h.fields=b.textFields;h.scale=this.selectedScale.get();if(h.scale.scale){var e=parseInt(h.scale.scale);h.scale.scale=e.toFixed(6)}if(h.scale.scale==="")h.customExtent=this.app.map.extent,h.extentType=d.essentials.ReportParameters.CURRENT_EXTENT;if(this.supportsEmailNotification.get())String.isNullOrEmpty(this.emailAddress.get())?this.validEmailAddressSupplied.set(false):(h.notificationEmailAddress=this.emailAddress.get(),this.validEmailAddressSupplied.set(true));
this.app.event("PrintTemplateStartedEvent").publish(b);e=new d.essentials.exportMap.ExportMapParameters;e.reportParameters=h;(new d.essentials.exportMap.ExportMapTask(b)).generateMapImageUrl(e).then(function(b){return a._printSuccess(b)},function(b){return a._printError(b)})};b.prototype._printError=function(a){this.app.command("Alert").execute("Print error: "+a.message);this.app.command("ScreenReaderNarrate").execute("Print error: "+a.message);this.isPrinting.set(false)};b.prototype._printSuccess=
function(a){this.isPrinting.set(false);this.url.set(a.href);this.printComplete.set(true);this.app.command("ScreenReaderNarrate").execute(this.app.getResource(this.libraryId,"language-print-complete-description"));this.app.command("LogOptimizerEvent").execute("PrintMap",this.selectedTemplate.get().displayName);this.app.event("PrintTemplateCompletedEvent").publish(this.selectedTemplate.get())};b.prototype.updatePrintTemplate=function(){var a=this.selectedTemplate.get();a&&(this.setOutputFormats(a),
this.setResolutions(a),this.setGrids(a),this.setScales(a),this.setTextFields(a),this.setEmailNotification(a))};b.prototype.setOutputFormats=function(a){this.outputFormats.clear();a.supportedOutputFormats&&(this.outputFormats.addItems(a.supportedOutputFormats),a.defaultOutputFormat?this.selectedFormat.set(a.defaultOutputFormat):this.selectedFormat.set(this.outputFormats.getAt(0)))};b.prototype.setResolutions=function(a){this.resolutions.clear();a.supportedResolutions&&(this.resolutions.addItems(a.supportedResolutions),
a.defaultResolution?this.selectedResolution.set(a.defaultResolution):this.selectedResolution.set(this.resolutions.getAt(0)))};b.prototype.setGrids=function(a){this.grids.clear();a.grids&&a.grids.length&&(this.grids.addItem({id:null,displayName:this.app.getResource(this.libraryId,"language-printing-none")}),this.grids.addItems(a.grids),a.defaultGrid?this.selectedGrid.set(a.defaultGrid):this.selectedGrid.set(this.grids.getAt(0)))};b.prototype.setScales=function(a){this.scales.clear();var b=this.app.getResource(this.libraryId,
"language-printing-current-scale"),d=esri.geometry.getScale(this.app.map);this.scales.addItem({displayName:b+" - 1: "+Math.round(d),scale:d.toString()});this.scales.addItem({displayName:this.app.getResource(this.libraryId,"language-printing-current-extent"),scale:""});a.supportedMapScales&&a.supportedMapScales.length&&this.scales.addItems(a.supportedMapScales);a.defaultMapScale?this.selectedScale.set(a.defaultMapScale):this.selectedScale.set(this.scales.getAt(0))};b.prototype.setTextFields=function(a){this.textFields.clear();
if(a.textFields&&a.textFields.length>0){for(var b=[],d=0;d<a.textFields.length;d++){var e=a.textFields[d],f={},j;for(j in e)if(e.hasOwnProperty(j)){var i=this._setupObservablePrimitive(i,j,e);f[j]=i}b.push(new Observable(f))}this.textFields.addItems(b)}};b.prototype._setupObservablePrimitive=function(a,b,d){a=new Observable(d[b]);a.set=function(e){d[b]=e;a.value=e;a.bindingEvent.publish(e)};a.get=function(){return d[b]};return a};b.prototype.setEmailNotification=function(a){this.supportsEmailNotification.set(a.supportsEmailNotification)};
return b}(d.framework.ui.ViewModelBase);e.PrintingViewModel=f})(e.printing||(e.printing={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.promptRegion="ModalWindowRegion";this.oldPrompt=null;this.overrideNativePrompt=true}__extends(b,d);b.prototype.initialize=function(a){var b=this;d.prototype.initialize.call(this,a);this.promptRegion=a.promptRegion;this.oldPrompt=window.prompt;this.overrideNativePrompt=a.overrideNativePrompt;var h=function(a,d,h,e){if(!e)return b.oldPrompt(a,h);try{var f=b.app.viewManager.createView({type:"geocortex.essentialsHtmlViewer.mapping.modules.prompt.PromptView",
markup:"Mapping/modules/Prompt/PromptView.html",visible:false,region:b.promptRegion,libraryId:b.libraryId}),j={title:a,description:d,defaultText:h,callback:e,promptText:new Observable(h)};f.attach(j);f.title.set(a);b.app.viewManager.activateView(f)}catch(i){b.app.trace.error("Error: Could not display prompt: "+i)}};if(this.overrideNativePrompt)window.prompt=h;this.app.command("Prompt").register(this,function(a,d,e,f){a||(a=b.app.getResource(b.libraryId,"language-prompt-default-title"));f||(f=function(){});
h(a,d,e,f)})};return b}(d.framework.application.ModuleBase);e.PromptModule=f})(e.prompt||(e.prompt={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.promptResult=null}__extends(b,d);b.prototype.attach=function(a){d.prototype.attach.call(this,a);this.promptResult=null;this.title.set(a.promptTitle);if(this.okButtonElement)try{this.okButtonElement.focus()}catch(b){}if(!this.viewContainerViewClosedEventToken)this.viewContainerViewClosedEventToken=this.app.event("ViewContainerViewClosedEvent").subscribe(this,function(a){a&&a.viewId===
this.id&&this._deactivateForUser()})};b.prototype.destroyBindings=function(){d.prototype.destroyBindings.call(this);if(this.viewContainerViewClosedEventToken)this.app.event("ViewContainerViewClosedEvent").unsubscribe(this.viewContainerViewClosedEventToken),this.viewContainerViewClosedEventToken=null};b.prototype.handleClickOk=function(){if(this.viewModel)this.promptResult=this.viewModel.promptText.get();this._deactivateForUser();return false};b.prototype.handleClickCancel=function(){this.promptResult=
null;this._deactivateForUser();return false};b.prototype._deactivateForUser=function(){this.app.viewManager.deactivateView(this);this.app.viewManager.destroyView(this);this.viewModel&&this.viewModel.callback&&this.viewModel.callback(this.promptResult)};return b}(d.framework.ui.ViewBase);e.PromptView=f})(e.prompt||(e.prompt={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,b){d.call(this,a,b)}__extends(b,d);b.prototype.activated=function(){d.prototype.activated.call(this)};b.prototype.attach=function(a){var b=this,h=this;d.prototype.attach.call(this,a);$(this.autoCompleteInput).autocomplete({minLength:0,source:function(a,d){b.getSuggestions(a,d)},appendTo:a.appendTo,position:{my:"right top",at:"right bottom",using:function(a){var b=$(this);b.css("top",a.top);b.css("right",
b.offsetParent().innerWidth()-(a.left+b.outerWidth()));b.css("left","auto")}}}).on("autocompleteselect",function(a,b){h.viewModel.value.set(b.item.value);return true});$(this.autoCompleteInput).data("autocomplete")._resizeMenu=function(){var a=this.menu.element;this.options&&this.options.appendTo?(a.css("max-width",$(this.options.appendTo).width()),a.css("min-width",this.element.outerWidth()-6)):a.outerWidth(this.element.outerWidth())}};b.prototype.getSuggestions=function(a,b){var d=this,f=this.viewModel.queryClause.format(8);
this.viewModel.queryClause.queryBuilderViewModel.getGeometryFilter().then(function(a){e.Query.getSuggestions(d.viewModel.queryClause.layer,d.viewModel.queryClause.selectedField,f,a).then(function(a){b(a)})})};b.prototype.dispose=function(){$(this.autoCompleteInput).remove()};b.prototype.autoComplete_focus=function(a,b){$(b).val()||$(b).autocomplete("search","")};b.prototype.autoComplete_blur=function(a,b){$(b).autocomplete("widget").hide()};return b}(d.framework.ui.ViewBase);e.AutoCompleteView=f})(e.queryBuilder||
(e.queryBuilder={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.value=new Observable}__extends(b,d);return b}(d.framework.ui.ViewModelBase);e.AutoCompleteViewModel=f})(e.queryBuilder||(e.queryBuilder={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){function d(a){this.settings={};this.settings=a}d.prototype.getFormatter=function(d){return d.dataProvider.search(/^Db2$/i)>=0?new b(this.settings):d.dataProvider.search(/^FileGdb$/i)>=0?new a(this.settings):d.dataProvider.search(/^Informix$/i)>=0?new g(this.settings):d.dataProvider.search(/^MsAccess$/i)>=0?new h(this.settings):d.dataProvider.search(/^Oracle$/i)>=0?new i(this.settings):d.dataProvider.search(/^PostgreSql/i)>=
0?new t(this.settings):d.dataProvider.search(/^Shapefile/i)>=0?new v(this.settings):d.dataProvider.search(/^SqlServer/i)>=0?new n(this.settings):d.serviceLayerInfo.serviceType=="WMS"?new s(this.settings):new f(this.settings)};return d}();d.QueryFormatterFactory=e;var f=function(){function a(b){this._settings=b||{}}a.prototype.wildcard=function(){return this._settings.wildcard||"%"};a.prototype.dateQueryFormat=function(){return this._settings.dateQueryFormat||"DATE '{0:yyyy-MM-dd}'"};a.prototype.textComparisonQueryFormat=
function(){return this._settings.textComparisonQueryFormat||"LOWER({0}) LIKE LOWER({1})"};a.prototype.numberToTextComparisonQueryFormat=function(){return this._settings.numberToTextComparisonQueryFormat||"CAST({0} AS VARCHAR(50)) LIKE '{1}'"};a.prototype.doesNotContainQueryFormat=function(){return this._settings.doesNotContainQueryFormat||"LOWER({0}) NOT LIKE LOWER({1})"};a.prototype.supportsTimeOfDay=function(){return this._settings.queryProviderSupportsTimeOfDay!=void 0?this._settings.queryProviderSupportsTimeOfDay:
false};a.prototype.format=function(a,b,g){if(dojo.indexOf([0,1,4,5,2,3],b)>=0)return this.formatComparison(a,b,g);if(dojo.indexOf([6,7,8,9],b)>=0)return this.formatPatternMatch(a,b,g);if(dojo.indexOf([10,11],b)>=0)return this.formatNull(a,b)};a.prototype.formatComparison=function(a,b,g){var d=this.formatField(a),b=this.formatComparisonOperator(b),a=this.formatValue(a,g);return"{0} {1} {2}".format(d,b,a)};a.prototype.formatPatternMatch=function(a,b,g){g=this.formatPattern(b,g);return b==7?this.doesNotContainQueryFormat().format(this.formatField(a),
this.formatValue(a,g)):a.isNumeric()?this.numberToTextComparisonQueryFormat().format(this.formatField(a),this.formatValue(a,g)):this.textComparisonQueryFormat().format(this.formatField(a),this.formatValue(a,g))};a.prototype.formatPattern=function(a,b){var g;switch(a){case 6:g="{0}{1}{0}";break;case 7:g="{0}{1}{0}";break;case 8:g="{1}{0}";break;case 9:g="{0}{1}";break;default:throw Error("Invalid pattern matching operator.");}return g.format(this.wildcard(),b)};a.prototype.formatNull=function(a,b){if(b==
10)return"{0} IS NULL".format(this.formatField(a));else if(b==11)return"{0} IS NOT NULL".format(this.formatField(a));throw Error("Invalid operator.");};a.prototype.formatField=function(a){return a.name};a.prototype.formatComparisonOperator=function(a){switch(a){case 0:return"=";case 1:return"<>";case 4:return"<";case 5:return"<=";case 2:return">";case 3:return">=";default:throw Error("Invalid binary comparison operator.");}};a.prototype.formatValue=function(a,b){return a.isNumeric()?this.formatNumericValue(b):
a.isDate()?this.formatDateValue(b):this.formatTextValue(b)};a.prototype.formatNumericValue=function(a){var b=a||"";(a=dojo.number.parse(a))&&(b=a.toString());return b};a.prototype.formatDateValue=function(b){var b=b||"",g=a.parseJsonDate(b);g&&(b=this.dateQueryFormat().format(g));return b.trim()};a.parseJsonDate=function(a){return(a=/\/Date\((\-?[0-9]*)\)\//g.exec(a))&&a.length>1?(a=parseInt(a[1]),new Date(a)):null};a.prototype.formatTextValue=function(a){a=(a||"").replace("'","''");return"'{0}'".format(a.trim())};
return a}();d.QueryFormatter=f;var b=function(a){function b(g){a.call(this,g)}__extends(b,a);b.prototype.supportsTimeOfDay=function(){return true};b.prototype.dateQueryFormat=function(){return"TO_DATE('{0:yyyy-MM-dd HH:mm:ss}','YYYY-MM-DD HH24:MI:SS')"};return b}(f);d.Db2QueryFormatter=b;var a=function(a){function b(g){a.call(this,g)}__extends(b,a);b.prototype.supportsTimeOfDay=function(){return true};b.prototype.dateQueryFormat=function(){return"DATE '{0:yyyy-MM-dd HH:mm:ss}'"};return b}(f);d.FileGdbQueryFormatter=
a;var g=function(a){function b(g){a.call(this,g)}__extends(b,a);b.prototype.supportsTimeOfDay=function(){return true};b.prototype.dateQueryFormat=function(){return"'{0:yyyy-MM-dd HH:mm:ss}'"};return b}(f);d.InformixQueryFormatter=g;var h=function(a){function b(g){a.call(this,g)}__extends(b,a);b.prototype.supportsTimeOfDay=function(){return true};b.prototype.dateQueryFormat=function(){return"#{0:MM-dd-yyyy HH:mm:ss}#"};b.prototype.wildcard=function(){return"*"};return b}(f);d.MsAccessQueryFormatter=
h;var i=function(a){function b(g){a.call(this,g)}__extends(b,a);b.prototype.supportsTimeOfDay=function(){return true};b.prototype.dateQueryFormat=function(){return"TO_DATE('{0:yyyy-MM-dd HH:mm:ss}','YYYY-MM-DD HH24:MI:SS')"};return b}(f);d.OracleQueryFormatter=i;var t=function(a){function b(g){a.call(this,g)}__extends(b,a);b.prototype.supportsTimeOfDay=function(){return true};b.prototype.dateQueryFormat=function(){return"TIMESTAMP '{0:yyyy-MM-dd HH:mm:ss}'"};return b}(f);d.PostgreSqlQueryFormatter=
t;var v=function(a){function b(g){a.call(this,g)}__extends(b,a);b.prototype.supportsTimeOfDay=function(){return false};b.prototype.dateQueryFormat=function(){return"DATE '{0:yyyy-MM-dd}'"};return b}(f);d.ShapefileQueryFormatter=v;var n=function(a){function b(g){a.call(this,g)}__extends(b,a);b.prototype.supportsTimeOfDay=function(){return true};b.prototype.dateQueryFormat=function(){return"'{0:yyyy-MM-dd HH:mm:ss}'"};return b}(f);d.SqlServerQueryFormatter=n;var s=function(a){function b(g){a.call(this,
g)}__extends(b,a);b.prototype.textComparisonQueryFormat=function(){return"{0} LIKE {1}"};b.prototype.doesNotContainQueryFormat=function(){return"{0} NOT LIKE {1}"};return b}(f);d.GeocortexOwsQueryFormatter=s})(d.queryBuilder||(d.queryBuilder={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(){function f(){}f.execute=function(b,a,g,h){var i=this;f._previousExecuteQuery&&f._previousExecuteQuery.cancel();var k=f.getFsc(h);k.clear();h.openCollection(k.id);var a=this._appendExpression(a,b.getDefinitionExpression()),l=new esri.tasks.QueryTask(e.infrastructure.taskUtils.getQueryTaskUrl(b.gcxLayer)),n=new esri.tasks.Query;n.where=a;n.returnGeometry=true;n.outFields=["*"];n.geometry=g;a=l.execute(n);f._previousExecuteQuery=
a;a.then(function(a){a=new esri.tasks.FeatureSet(a);a=new d.essentialsHtmlViewer.mapping.infrastructure.FeatureSet({esriFeatureSet:a,layer:b.gcxLayer,app:i.app});a.displayName.set(i.app.getResource(i.libraryId,"language-querybuilder-feature-set-display-name").format(b.displayName));k.featureSets.addItem(a);a.resolveDataLinks(function(a){i.app.event("FeatureChangedEvent").publish(a)});h.closeCollection(k.id);f._previousExecuteQuery=null},function(a){i.app.trace.error(a);h.closeCollection(k.id);f._previousExecuteQuery=
null})};f._appendExpression=function(b,a){var g=b;a&&a.length>0&&(g=b&&b.length>0?b+" AND "+a:a);return g};f.getFsc=function(b){if(f._fsc)return f._fsc;var a=new d.essentialsHtmlViewer.mapping.infrastructure.FeatureSetCollection;b.addCollection(a);a.displayName.set(this.app.getResource(this.libraryId,"language-querybuilder-feature-set-collection-display-name"));a.sourceName="QueryBuilder";return f._fsc=a};f.getSuggestions=function(b,a,g,d){if(f._previousGetSuggestions)f._previousGetSuggestions.cancel(),
f._previousGetSuggestions=null;if(f._previousGetSuggestionsQuery)f._previousGetSuggestionsQuery.cancel(),f._previousGetSuggestionsQuery=null;var i=new dojo.Deferred;i.id=f.counter++;f._previousGetSuggestions=i;var g=this._appendExpression(g,b.getDefinitionExpression())||"1 = 1",b=new esri.tasks.QueryTask(e.infrastructure.taskUtils.getQueryTaskUrl(b.gcxLayer)),k=new esri.tasks.Query;k.where=g;k.returnGeometry=false;k.outFields=[a.name];k.geometry=d;g=b.execute(k);f._previousGetSuggestionsQuery=g;g.id=
f.counter++;g.then(function(b){f._previousGetSuggestions=null;f._previousGetSuggestionsQuery=null;for(var g={},d=[],h=0;h<b.features.length;h++){var e=b.features[h].attributes[a.name]+"";!f._isNullOrWhiteSpace(e)&&!g.hasOwnProperty(e)&&(g[e]=e,d.push(e));if(d.length==10)break}d.sort();i.resolve(d)},function(a){f._previousGetSuggestions=null;f._previousGetSuggestionsQuery=null;i.errback(a)});return i};f._isNullOrWhiteSpace=function(b){return!b||b.length==0||b.search(/^\s+$/g)>=0};f.counter=0;return f}();
f.Query=i})(f.queryBuilder||(f.queryBuilder={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){function e(b,a){var g=this;this._settingCodedDomainValue=false;this.fields=new ObservableCollection;this.fieldValue=new Observable;this.codedDomainValue=new Observable;this.operators=new ObservableCollection;this.selectedFieldName=new Observable;this.selectedOperator=new Observable;this.deleteDisabled=new Observable(false);this.isNotLast=new Observable(false);this.codedValues=new ObservableCollection;this.presentableFieldName=
new Observable;this.presentableOperator=new Observable;this.presentableFieldValue=new Observable;this.presentableFieldValueIsEmptyText=new Observable;this.isAwab=new Observable(false);this.isGvh=new Observable(false);this.showTextInput=new Observable;this.showDateTimeInput=new Observable;this.showCodedValueDomainInput=new Observable;this.showDisabledInput=new Observable;this.showDisplayField=new Observable(false);this.showEditField=new Observable(true);this.showDisplayOperator=new Observable(false);
this.showEditOperator=new Observable(true);this.showDisplayValue=new Observable(false);this.showEditValue=new Observable(true);this.app=a.app;this.libraryId=a.libraryId;this.layer=b;this.queryBuilderViewModel=a;this.selectedOperator.set((0).toString());this._selectedFieldNameBindingToken=this.selectedFieldName.bind(this,this._fieldChanged);this._fieldsBindingToken=this.fields.bind(this,this._fieldsChanged);this._selectedOperatorBindingToken=this.selectedOperator.bind(this,this._operatorChanged);this._codedDomainValueBindingToken=
this.codedDomainValue.bind(this,function(){!g._settingCodedDomainValue&&g.selectedField.isTypeField&&g.queryBuilderViewModel.updateCodedDomainValues()});this.presentableFieldName.syncTransform(this.selectedFieldName,function(){var a=g.fields.get().filter(function(a){return a.name==g.selectedFieldName.get()})[0];return a?a.alias:""});this.presentableFieldValue.syncTransform(this.fieldValue,function(b){if(b){g.presentableFieldValueIsEmptyText.set(false);var f=d.QueryFormatter.parseJsonDate(b);if(f)return g.queryBuilderViewModel.queryFormatterFactory.getFormatter(a.selectedLayer).supportsTimeOfDay()?
dojo.date.locale.format(f,{datePattern:"EEEE MMMM dd, yyyy"}):dojo.date.locale.format(f,{datePattern:"EEEE MMMM dd, yyyy",selector:"date"});else if(e._isCodedValueDomain(g.selectedField))for(f=0;f<g.codedValues.length();f++)if(g.codedValues.getAt(f).val===g.codedDomainValue.get())return g.codedValues.getAt(f).name;return g.selectedField.isNumeric()?b:"'{0}'".format(b)}g.presentableFieldValueIsEmptyText.set(true);return g.app.getResource(g.libraryId,"language-querybuilder-any-value")});this.presentableOperator.syncTransform(this.selectedOperator,
function(a){return d.QueryOperatorDescription.FromQueryOperator(parseInt(a)).name});this.isAwab.sync(a.isAwab);this.isGvh.sync(a.isGvh)}e.FromQueryClause=function(b){var a=new e(b.layer,b.queryBuilderViewModel);a.fields.addItems(b.fields.get());a.deleteDisabled.set(b.deleteDisabled.get());a.selectedFieldName.set(b.selectedFieldName.get());a.codedValues.addItems(b.codedValues.get());setTimeout(function(){e._isCodedValueDomain(a.selectedField)?a.codedDomainValue.set(b.codedDomainValue.get()):a.selectedField.isDate()?
a.datePickerFormItem.date.set(b.datePickerFormItem.date.get()):a.autoCompleteView.viewModel.value.set(b.fieldValue.get())},0);return a};e.prototype.format=function(b){var a=this.queryBuilderViewModel.queryFormatterFactory.getFormatter(this.layer),b=b||parseInt(this.selectedOperator.get()),g=this.fieldValue.get();return!g&&b!=10&&b!=11?"":a.format(this.selectedField,b,g)};e.prototype._fieldsChanged=function(){this.fields.length()>0&&!this.selectedFieldName.get()&&this.selectedFieldName.set(this.fields.getAt(0).name)};
e.prototype._fieldChanged=function(){var b=this,a=this.fields.get().filter(function(a){return a.name==b.selectedFieldName.get()})[0];this.selectedField=a;this.operators.clear();e._isCodedValueDomain(a)?(this.operators.addItem(d.QueryOperatorDescription.Equals),this.operators.addItem(d.QueryOperatorDescription.NotEquals)):a.isNumeric()||a.isDate()?(this.operators.addItem(d.QueryOperatorDescription.Equals),this.operators.addItem(d.QueryOperatorDescription.NotEquals),this.operators.addItem(d.QueryOperatorDescription.LessThan),
this.operators.addItem(d.QueryOperatorDescription.LessThanEquals),this.operators.addItem(d.QueryOperatorDescription.GreaterThan),this.operators.addItem(d.QueryOperatorDescription.GreaterThanEquals)):a.isText()&&(this.operators.addItem(d.QueryOperatorDescription.Contains),this.operators.addItem(d.QueryOperatorDescription.DoesNotContain),this.operators.addItem(d.QueryOperatorDescription.StartsWith),this.operators.addItem(d.QueryOperatorDescription.EndsWith),this.operators.addItem(d.QueryOperatorDescription.Equals),
this.operators.addItem(d.QueryOperatorDescription.NotEquals));a.nullable&&(this.operators.addItem(d.QueryOperatorDescription.IsNull),this.operators.addItem(d.QueryOperatorDescription.IsNotNull));this.selectedOperator.set(this.operators.getAt(0).value.toString());var g=parseInt(this.selectedOperator.get());this._updateInputVisibility(a,g);this.queryBuilderViewModel.updateCodedDomainValues();setTimeout(function(){b.codedValues.length()>0?b.fieldValue.sync(b.codedDomainValue):b.selectedField.isDate()?
b.fieldValue.syncTransform(b.datePickerFormItem.date,function(){return b.datePickerFormItem.getResult().value}):b.fieldValue.sync(b.autoCompleteView.viewModel.value)},0)};e.prototype.switchToReadOnly=function(){this.disableModeSwitch||(this.showEditField.set(false),this.showEditOperator.set(false),this.showEditValue.set(false),this.showDisplayField.set(true),this.showDisplayOperator.set(true),this.showDisplayValue.set(true))};e.prototype.switchToEditMode=function(){this.disableModeSwitch||(this.showDisplayField.set(false),
this.showDisplayOperator.set(false),this.showDisplayValue.set(false),this.showEditField.set(true),this.showEditOperator.set(true),this.showEditValue.set(true))};e.prototype.updateCodedDomainValues=function(){var b=this;this.codedValues.clear();if(this.selectedField.isCodedValueDomain())for(var a=0;a<this.selectedField.getCodedValueDomain().codedValues.length;a++){var g=this.selectedField.getCodedValueDomain().codedValues[a];this.codedValues.addItem({name:g.name,val:g.code.toString()})}else if(this.selectedField.hasSubtypeCodedValueDomains()){for(var g=
this.selectedField.getSubtypeCodedValueDomains(),d=0,e=null,a=0;a<this.queryBuilderViewModel.queryClauses.length();a++){var f=this.queryBuilderViewModel.queryClauses.getAt(a);f!==this&&f.selectedField&&f.selectedField.isTypeField&&(e=f,d++)}if(d===1)if(a=e.codedDomainValue.get(),e.selectedOperator.get()===(0).toString())(e=g[a])&&e.codedValues.forEach(function(a){b.codedValues.addItem({name:a.name,val:a.code.toString()})});else for(var j in g)j!==a&&g.hasOwnProperty(j)&&(e=g[j],e.codedValues.forEach(function(a){b.codedValues.addItem({name:a.name,
val:a.code.toString()})}));else for(j in g)g.hasOwnProperty(j)&&(e=g[j],e.codedValues.forEach(function(a){b.codedValues.addItem({name:a.name,val:a.code.toString()})}))}if(this.codedValues.length()>0){this._settingCodedDomainValue=true;g=false;for(a=0;a<this.codedValues.getLength();a++)this.codedValues.getAt(a).val===this.codedDomainValue.get()&&(g=true,this.codedDomainValue.pulse());g||this.codedDomainValue.set(this.codedValues.getAt(0).val);this._settingCodedDomainValue=false}};e.prototype._updateInputVisibility=
function(b,a){this.showTextInput.set(false);this.showDateTimeInput.set(false);this.showCodedValueDomainInput.set(false);this.showDisabledInput.set(false);a==11||a==10?this.showDisabledInput.set(true):b.isDate()?this.showDateTimeInput.set(true):e._isCodedValueDomain(b)?this.showCodedValueDomainInput.set(true):this.showTextInput.set(true)};e.prototype._operatorChanged=function(){var b=this.selectedField;b.isTypeField&&this.queryBuilderViewModel.updateCodedDomainValues();var a=parseInt(this.selectedOperator.get());
this._updateInputVisibility(b,a)};e._isCodedValueDomain=function(b){return b.isCodedValueDomain()||b.hasSubtypeCodedValueDomains()};e.prototype.dispose=function(){this.selectedFieldName.unbind(this._selectedFieldNameBindingToken);this.fields.unbind(this._fieldsBindingToken);this.selectedOperator.unbind(this._selectedOperatorBindingToken);this.codedDomainValue.unbind(this._codedDomainValueBindingToken);this.fieldValue.removeSync();this.presentableFieldName.removeSync();this.presentableFieldValue.removeSync();
this.presentableOperator.removeSync();this.autoCompleteView&&this.autoCompleteView.dispose();this.isAwab.removeSync();this.isGvh.removeSync()};return e}();d.QueryClause=e})(d.queryBuilder||(d.queryBuilder={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){d=d.essentialsHtmlViewer||(d.essentialsHtmlViewer={});d=d.mapping||(d.mapping={});d=d.modules||(d.modules={});d=d.queryBuilder||(d.queryBuilder={});d=d.QueryOperator||(d.QueryOperator={});d[d.Equals=0]="Equals";d[d.NotEquals=1]="NotEquals";d[d.GreaterThan=2]="GreaterThan";d[d.GreaterThanEquals=3]="GreaterThanEquals";d[d.LessThan=4]="LessThan";d[d.LessThanEquals=5]="LessThanEquals";d[d.Contains=6]="Contains";d[d.DoesNotContain=7]="DoesNotContain";d[d.StartsWith=8]="StartsWith";d[d.EndsWith=
9]="EndsWith";d[d.IsNull=10]="IsNull";d[d.IsNotNull=11]="IsNotNull"})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){function d(b,a){this.value=b;this.name=a}d.FromQueryOperator=function(b){for(var a in d)if(d[a].value==b)return d[a];return null};d.initializeStaticValues=function(b,a){this.Equals=new d(0,b.getResource(a,"language-querybuilder-operator-equals"));this.NotEquals=new d(1,b.getResource(a,"language-querybuilder-operator-not-equals"));this.GreaterThan=new d(2,b.getResource(a,"language-querybuilder-operator-greater-than"));
this.GreaterThanEquals=new d(3,b.getResource(a,"language-querybuilder-operator-greater-than-equal-to"));this.LessThan=new d(4,b.getResource(a,"language-querybuilder-operator-less-than"));this.LessThanEquals=new d(5,b.getResource(a,"language-querybuilder-operator-less-than-equal-to"));this.Contains=new d(6,b.getResource(a,"language-querybuilder-operator-contains"));this.DoesNotContain=new d(7,b.getResource(a,"language-querybuilder-operator-does-not-contain"));this.StartsWith=new d(8,b.getResource(a,
"language-querybuilder-operator-starts-with"));this.EndsWith=new d(9,b.getResource(a,"language-querybuilder-operator-ends-with"));this.IsNull=new d(10,b.getResource(a,"language-querybuilder-operator-null"));this.IsNotNull=new d(11,b.getResource(a,"language-querybuilder-operator-not-null"))};return d}();d.QueryOperatorDescription=e})(d.queryBuilder||(d.queryBuilder={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex=
{}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=d.essentialsHtmlViewer.mapping.infrastructure.gis,j=function(b){function a(a,d){b.call(this,a,d);this._focussedOnOtherInput=this._initialized=false;try{dojo.number.parse("0")}catch(e){}try{dojo.date.locale.format(new Date,{datePattern:"EEEE MMMM dd, yyyy",selector:"date"})}catch(f){}}__extends(a,b);a.prototype.attach=function(a){b.prototype.attach.call(this,a)};a.prototype.activated=function(){if(!this._initialized)this.doInit(),this._initialized=
true};a.prototype.doInit=function(){var a=this;this.viewModel.isAwab.set(this.app.isArcGisWebApp);dojo.connect(this.viewModel,"event_queryClausesRemoving",this,this.viewModel_queryClausesRemoving);this.bindAutoCompleteEvents();this.subscribeDocumentClickHandler();this.app.doWhenMapInitialized(function(){a.viewModel.initialize(a.configuration);var b=f.AppInfo.fromGeocortexApp(a.app);a.viewModel.initializeQueryBuilder(b)})};a.prototype.document_click=function(a){var b=a.data.view;if($(a.target).closest(".query-clause-row, .ui-datepicker-div, .ui-autocomplete").length==
0)for(a=0;a<b.viewModel.queryClauses.length();a++)b.switchToReadOnly(b.viewModel.queryClauses.getAt(a))};a.prototype.form_keydown=function(a){if((new Date).getTime()-(this._lastAutoCompleteTime?this._lastAutoCompleteTime.getTime():0)>50&&a.keyCode==13)if(a=$(a.target),a.prop("tagName").search(/^input$/i)>=0&&a.prop("type").search(/^text$/i)>=0)return this.performAction(),false;return true};a.prototype.form_submit=function(){return false};a.prototype.bindAutoCompleteEvents=function(){var a=this;$(this.htmlForm).on("autocompleteselect",
"input.ui-autocomplete-input",function(){a._lastAutoCompleteTime=new Date})};a.prototype.addQueryClause_click=function(){for(var a=0;a<this.viewModel.queryClauses.length();a++)this.viewModel.queryClauses.getAt(a).switchToReadOnly();this.viewModel.addQueryClause();$(".query-clause-row").last().find("input, select").first().focus()};a.prototype.removeQueryClause_click=function(a,b,d){this.viewModel.queryClauses.length()>1&&this.viewModel.removeQueryClause(d)};a.prototype.actionButton_click=function(){this.performAction()};
a.prototype.clearFilterButton_click=function(){this.viewModel.disabled.set(false);this.viewModel.selectedLayer.setDefinitionExpression(null)};a.prototype.clearResultsButton_click=function(){this.event_clearResultsButtonClicked()};a.prototype.externalfilterButton_click=function(){this.viewModel.selectedLayer.setDefinitionExpression("1 = 2")};a.prototype.event_clearResultsButtonClicked=function(){};a.prototype.addLayerButton_click=function(){if(!this._addedLayer)this._addedLayer=new esri.layers.ArcGISDynamicMapServiceLayer("http://agsdemos2.geocortex.com/arcgis/rest/services/BeaverCounty/BeaverCounty_Wells/MapServer"),
this.app.map.addLayer(this._addedLayer)};a.prototype.removeLayerButton_click=function(){if(this._addedLayer)this.app.map.removeLayer(this._addedLayer),this._addedLayer=null};a.prototype.input_blur=function(a,b,d){this.switchToReadOnly(d)};a.prototype.switchToReadOnly=function(a){var b=this;this._focussedOnOtherInput=false;setTimeout(function(){!b._focussedOnOtherInput&&$(".ui-datepicker:visible").length==0&&(a.switchToReadOnly(),$(document).off("click",null,b.document_click))},0)};a.prototype.input_focus=
function(){this._focussedOnOtherInput=true};a.prototype.displayField_click=function(a,b,d){this.switchToEditMode(d);d.disableModeSwitch=true;$(b).closest(".query-clause-row").find("select.field-selector").focus();d.disableModeSwitch=false};a.prototype.displayOperator_click=function(a,b,d){this.switchToEditMode(d);d.disableModeSwitch=true;$(b).closest(".query-clause-row").find("select.operator-selector").focus();d.disableModeSwitch=false};a.prototype.displayValue_click=function(a,b,d){this.switchToEditMode(d);
d.disableModeSwitch=true;$(b).closest(".query-clause-row").find(".value-selector input:visible, select.value-selector:visible").focus();d.disableModeSwitch=false};a.prototype.switchToEditMode=function(a){a.switchToEditMode();this.subscribeDocumentClickHandler()};a.prototype.subscribeDocumentClickHandler=function(){$(document).off("click",null,this.document_click);$(document).click({view:this},this.document_click)};a.prototype.performAction=function(){var a=this,b=this.viewModel.buildWhereClause();
this.viewModel.isQueryBuilder.get()?(this.event_searchInitiated(),this.viewModel.getGeometryFilter().then(function(d){e.Query.execute(a.viewModel.selectedLayer,b,d,a.app.featureSetManager)})):(this.viewModel.selectedLayer.setDefinitionExpression(b),this.app.command("ShowMap").execute())};a.prototype.event_searchInitiated=function(){};a.prototype.resolveWidget=function(a,b){var f=this;if(a=="DatePicker"){var j=new d.forms.items.DatePickerFormItem(null);j.nullable.set(false);var i=this.viewModel.queryFormatterFactory.getFormatter(this.viewModel.selectedLayer);
j.includeTimePicker.set(i.supportsTimeOfDay());i=new d.forms.items.TimePickerFormItem(null);j.timePickerItem=i;i=this.app.viewManager.createView({markupResource:"Mapping/modules/Workflow/Forms/Items/DatePickerFormItemView.html",libraryId:"Mapping",typeName:"geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.DatePickerFormItemView",isVisible:true});i.attach(j);b.datePickerFormItem=j;b.datePickerView=i;$(i.root).find("input, select").on("blur",function(){f.switchToReadOnly(b)});$(i.root).find("input, button, select").on("focus",
function(){f._focussedOnOtherInput=true});return i}else if(a=="AutoComplete")return j=new e.AutoCompleteView(this.app),i=document.createElement("span"),dojo.html.set(i,d.resourceManager.fetch("Mapping/modules/QueryBuilder/AutoCompleteView.html",this.libraryId)),j.root=i,$(i).find("input").on("blur",function(){f.switchToReadOnly(b)}),$(i).find("input").on("focus",function(){f._focussedOnOtherInput=true}),i=new e.AutoCompleteViewModel(this.app),i.queryClause=b,i.appendTo="."+this.id+" .autocomplete-container",
j.attach(i),b.autoCompleteView=j};a.prototype.viewModel_queryClausesRemoving=function(a){for(var b=0;b<a.length;b++)a[b].datePickerView&&$(a[b].datePickerView.root).find("input, button, select").off();for(b=0;b<a.length;b++)a[b].autoCompleteView&&$(a[b].autoCompleteView.root).find("input").off()};return a}(d.framework.ui.ViewBase);e.SimpleQueryBuilderView=j})(e.queryBuilder||(e.queryBuilder={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=d.essentialsHtmlViewer.mapping.infrastructure.gis,j=function(b){function a(a,h){b.call(this,a,h);this.layers=new d.framework.ui.FilterableCollection;this.selectedLayerUniqueId=new Observable;this.infoText=new Observable;this.queryClauses=new ObservableCollection;this.whereClause=new Observable;this.spatialFilters=new ObservableCollection;this.selectedSpatialFilter=new Observable;this.isOffline=new Observable(true);this.isOnline=
new Observable(false);this.isAwab=new Observable(false);this.isGvh=new Observable(false);this.isQueryAndAwab=new Observable(false);this.isDebug=new Observable(false);this.isQueryBuilder=new Observable(true);this.isFilterBuilder=new Observable(false);this.showLayerError=new Observable(false);this.disabled=new Observable(false);this.notDisabled=new Observable(true);this.noValidLayers=new Observable(false);this.config={};this._allLayers=new ObservableCollection;this._fields=[];this._layerToQueryClausesLookup=
new d.essentialsHtmlViewer.mapping.infrastructure.Dictionary;this._graphicsLayerSubscriptions=[];this.isOffline.sync(a.isOffline);this.isOnline.syncTransform(a.isOffline,function(a){return!a});this.isGvh.syncTransform(this.isAwab,function(a){return!a});this.notDisabled.syncTransform(this.disabled,function(a){return!a});this.selectedLayerUniqueId.bind(this,this.layerIdChanged)}__extends(a,b);a.prototype.refreshSpatialFilterOptions=function(){this.spatialFilters.length()==0&&(this.spatialFilters.addItem({name:this.getResource("language-querybuilder-spatial-filter-none"),
val:"None"}),this.spatialFilters.addItem({name:this.getResource("language-querybuilder-spatial-filter-current-extent"),val:"CurrentExtent"}),this.selectedSpatialFilter.set("None"));if(this.config.allowDrawingsAsSpatialFilter==void 0)this.config.allowDrawingsAsSpatialFilter=true;if(this.config.allowDrawingsAsSpatialFilter){var a=this._appInfo.mapInfo.markupLayer.get();if(a&&a.graphics.length>0&&this.spatialFilters.length()==2)this.spatialFilters.addItem({name:this.getResource("language-querybuilder-spatial-filter-polygons"),
val:"Drawings"});else if((!a||a.graphics.length==0)&&this.spatialFilters.length()==3)this.spatialFilters.removeAt(2),this.selectedSpatialFilter.get()=="Drawings"&&this.selectedSpatialFilter.set("None")}};a.prototype.initialize=function(a){if(a)this.config=a;this.queryFormatterFactory=new f.QueryFormatterFactory(this.config);this.isDebug.set(!!a.debug)};a.prototype.initializeQueryBuilder=function(a){var b=this;f.QueryOperatorDescription.initializeStaticValues(this.app,this.libraryId);f.Query.app=this.app;
f.Query.libraryId=this.libraryId;var e=this.config.mode!="filter";this.isQueryBuilder.set(e);this.isFilterBuilder.set(!e);this.isQueryAndAwab.set(this.isAwab.get()&&e);this._appInfo=a;this._allLayers.clear();e=a.mapInfo.getLayerInfos().filter(function(a){return a.queryable&&!!a.displayName&&!!a.url});e=d.essentialsHtmlViewer.mapping.infrastructure.ArrayUtils.sortBy(e,function(a){return a.displayName});this._allLayers.set(e);this._checkFilterableLayers();this.layers.setSource(this._allLayers);this.layers.setFilter(function(a){return!a.gcxLayer||
a.gcxLayer.inActiveTheme});this.layers.length()>0&&this.selectedLayerUniqueId.set(this.layers.getAt(0).uniqueId);this._handleNewServiceLayers(a.mapInfo.serviceLayers);this.refreshSpatialFilterOptions();this._appInfo.mapInfo.markupLayer.bind(this,this.markupLayerChanged);this.markupLayerChanged(this._appInfo.mapInfo.markupLayer.get());this._appInfo.map.on("layer-add",dojo.hitch(this,this.layerAdded));this._appInfo.map.on("layer-remove",dojo.hitch(this,this.layerRemoved));if(!this._layerThemeChangedEventToken)this._layerThemeChangedEventToken=
this.app.event("LayerThemeChangedEvent").subscribe(this,function(){b.layers.refresh();b.layers.indexOf(b.selectedLayer)<0?b.selectedLayerUniqueId.set(b.layers.length()?b.layers.getAt(0).uniqueId:null):b.selectedLayerUniqueId.pulse()})};a.prototype._checkFilterableLayers=function(){if(this.isFilterBuilder.get()||this.isQueryBuilder.get()){for(var a=0;a<this._allLayers.getLength();a++){var b=this._allLayers.getAt(a);if(b!=null&&b.gcxLayer&&e.infrastructure.taskUtils.canQueryLayer(b.gcxLayer)&&b.gcxLayer.includeInLayerList&&
b.gcxLayer.fields.length>0&&b.gcxLayer.mapService!==null&&b.gcxLayer.mapService.serviceLayer!==null)if(b.gcxLayer.mapService.serviceLayer instanceof esri.layers.FeatureLayer)continue;else if(b.gcxLayer.mapService.serviceLayer instanceof esri.layers.ArcGISDynamicMapServiceLayer&&(b=b.gcxLayer.mapService.serviceLayer,b.capabilities===null||b.capabilities.indexOf("Query")!=-1))continue;this._allLayers.removeAt(a);a--}this._allLayers.getLength()===0&&(this.isOnline.set(false),this.noValidLayers.set(true))}};
a.prototype._handleNewServiceLayers=function(a){if(this.isFilterBuilder.get())for(var b=this,d=0;d<a.length;d++)dojo.connect(a[d].serviceLayer,"setLayerDefinitions",function(a){b._layerDefinitionsSet.call(b,this,a)})};a.prototype._layerDefinitionsSet=function(a,b){for(var d in b)this.selectedLayer&&this.selectedLayer.serviceLayerInfo.serviceLayer==a&&this.selectedLayer.id==d+""&&this.whereClause.get()!=b[d]&&this.disabled.set(true)};a.prototype.markupLayerChanged=function(a){for(var b=this,d=0;d<
this._graphicsLayerSubscriptions.length;d++)this._graphicsLayerSubscriptions[d].remove();a&&(this._graphicsLayerSubscriptions.push(a.on("graphic-add",function(){b.refreshSpatialFilterOptions()})),this._graphicsLayerSubscriptions.push(a.on("graphic-remove",function(){b.refreshSpatialFilterOptions()})))};a.prototype.layerIdChanged=function(){var b=this;if(!(this.selectedLayer&&this.selectedLayerUniqueId.get()===this.selectedLayer.uniqueId)){this.event_queryClausesRemoving(this.queryClauses.get());this.disabled.set(false);
this.whereClause.set(null);this.previousLayer=this.selectedLayer;this.selectedLayer=null;for(var d=0;d<this.layers.length();d++)if(this.layers.getAt(d).uniqueId==this.selectedLayerUniqueId.get()){this.selectedLayer=this.layers.getAt(d);break}this.infoText.set("");if(this.previousLayer){var e=[];this.queryClauses.get().forEach(function(a){return e.push(a)});this._layerToQueryClausesLookup.set(this.previousLayer.uniqueId,{where:this.whereClause.get(),clauses:e})}this.queryClauses.get().forEach(function(a){return a.dispose()});
this.queryClauses.clear();this._fieldsRequest&&this._fieldsRequest.cancel();if(this.selectedLayer)this._fieldsRequest=this.selectedLayer.getFields(),this._fieldsRequest.then(function(d){b._fieldsRequest=null;b._fields=d.filter(function(b){return dojo.indexOf(a._excludedFieldTypes,b.type)<0&&b.isVisible});b._fields=b._fields.sort(function(a,b){var d=(a.alias||"").toLocaleLowerCase(),g=(b.alias||"").toLocaleLowerCase();return d==g?0:d<g?-1:1});var e;if(b._layerToQueryClausesLookup.containsKey(b.selectedLayer.uniqueId)){e=
b._layerToQueryClausesLookup.get(b.selectedLayer.uniqueId);var h=[];e.clauses.forEach(function(a){a=f.QueryClause.FromQueryClause(a);e.clauses.length>1&&a.switchToReadOnly();h.push(a)});b.queryClauses.addItems(h)}else d=new f.QueryClause(b.selectedLayer,b),d.deleteDisabled.set(true),d.isNotLast.set(false),b.queryClauses.addItem(d),d.fields.set(b._fields);b.infoText.set(b.getResource("language-querybuilder-find-in-layer").format(b.selectedLayer.displayName));b.isFilterBuilder.get()&&e&&(b._isEquivalentExpression(e.where,
b.selectedLayer.getDefinitionExpression())||b.disabled.set(true))},function(a){b._fieldsRequest=null;b.app.trace.error(a);b.infoText.set(b.getResource("language-querybuilder-cannot-query"))})}};a.prototype._isEquivalentExpression=function(a,b){var d;return(!a||a=="1 == 1")&&(!b||b=="1 == 1")?true:a==b?true:false};a.prototype.layerAdded=function(a){for(var a=i.ServiceLayerInfo.fromEsriLayer(a.layer),b=a.layers,b=d.essentialsHtmlViewer.mapping.infrastructure.ArrayUtils.sortBy(b,function(a){return a.displayName}),
e=this._allLayers.length()-1,f=b.length-1;e>=0&&f>=0;){var j=this._allLayers.getAt(e).displayName;b[f].displayName>=j?(this._allLayers.insertItem(e+1,b[f]),f--):e--}for(;f>=0;)this._allLayers.insertItem(0,b[f]),f--;this._handleNewServiceLayers([a])};a.prototype.layerRemoved=function(a){this._allLayers.removeWhere(function(b){return b.serviceLayerInfo.serviceLayer==a.layer})};a.prototype.addQueryClause=function(){var a=new f.QueryClause(this.selectedLayer,this);a.fields.set(this._fields);a.updateCodedDomainValues();
this.queryClauses.addItem(a);this.queryClauses.getAt(0).deleteDisabled.set(false);this.queryClauses.getAt(this.queryClauses.length()-2).isNotLast.set(true)};a.prototype.removeQueryClause=function(a){this.event_queryClausesRemoving([a]);a.dispose();this.queryClauses.removeItem(a);this.queryClauses.length()==1&&(this.queryClauses.getAt(0).deleteDisabled.set(true),this.queryClauses.getAt(0).isNotLast.set(false));this.queryClauses.getAt(this.queryClauses.length()-1).isNotLast.set(false);if(a.selectedField&&
a.selectedField.isTypeField){this.updateCodedDomainValues();for(a=0;a<this.queryClauses.length();a++)this.queryClauses.getAt(a).codedDomainValue.pulse()}};a.prototype.buildWhereClause=function(){for(var a="",b=0;b<this.queryClauses.length();b++){var d=this.queryClauses.getAt(b).format();d&&(a.length>0&&(a+=" AND "),a+=d)}a||(a="1 = 1");this.whereClause.set(a);return a};a.prototype.getGeometryFilter=function(){var a=new dojo.Deferred;if(this.selectedSpatialFilter.get()=="None")return a.resolve(null),
a;else if(this.selectedSpatialFilter.get()=="CurrentExtent")return a.resolve(this._appInfo.map.extent),a;else if(this.selectedSpatialFilter.get()=="Drawings"){var b=[];this.isAwab.get()?b=this._appInfo.mapInfo.getGraphicsLayers():b.push(this._appInfo.mapInfo.markupLayer.get());for(var e=[],f=0;f<b.length;f++)for(var j=b[f],i=0;i<j.graphics.length;i++){var k=j.graphics[i];k.geometry.type=="polygon"?e.push(k.geometry):k.geometry.type=="extent"&&(k=d.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.extentToPolygon(k.geometry),
e.push(k))}e.length==0?a.resolve(null):this._appInfo.getGeometryService().union(e).then(function(b){a.resolve(b)},function(){a.resolve(null)});return a}a.resolve(null);return a};a.prototype.getViewerApp=function(){return this.app};a.prototype.event_queryClausesRemoving=function(){};a.prototype.updateCodedDomainValues=function(){for(var a=0;a<this.queryClauses.length();a++)this.queryClauses.getAt(a).updateCodedDomainValues()};a.prototype.onDestroy=function(){b.prototype.onDestroy.call(this);this._layerThemeChangedEventToken&&
this.app.event("LayerThemeChangedEvent").unsubscribe(this._layerThemeChangedEventToken)};a._excludedFieldTypes=[d.essentials.EsriFieldTypes.esriFieldTypeBlob,d.essentials.EsriFieldTypes.esriFieldTypeGeometry,d.essentials.EsriFieldTypes.esriFieldTypeGlobalID,d.essentials.EsriFieldTypes.esriFieldTypeGUID];return a}(d.framework.ui.ViewModelBase);f.SimpleQueryBuilderViewModel=j})(f.queryBuilder||(f.queryBuilder={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(d){function b(a,b){d.call(this,a,b);this.app.command("RunReport").preExecute.subscribe(this,this._displayReportProgressUI);this.app.event("ReportResultEvent").subscribe(this,this._handleReportResultUI);this.app.event("ReportErrorEvent").subscribe(this,this._handleReportErrorUI)}__extends(b,d);b.prototype.handleClickDoneButton=function(){this.app.viewManager.deactivateView(this)};b.prototype._displayReportProgressUI=function(a){this.isBusy.set(true);
this.app.viewManager.activateView(this);a=new e.infrastructure.commandArgs.AddStatusArgs(this.getResource("language-run-report-progress-status").format(a.report.displayName||a.report.id));a.id="RunningReport";a.imageUri="Resources/Images/Icons/Toolbar/reports-24.png";a.showBusyIcon=true;a.timeoutMS=0;this.app.command("AddStatus").execute(a)};b.prototype._cleanupReportProgressUI=function(){this.isBusy.set(false);this.app.command("RemoveStatus").execute("RunningReport")};b.prototype._handleReportResultUI=
function(){this._cleanupReportProgressUI();this.isBusy.set(false);this.app.viewManager.activateView(this)};b.prototype._handleReportErrorUI=function(a){this.isBusy.set(false);this.app.viewManager.deactivateView(this);var b=this.getResource("language-run-report-error-title"),d;d=a.name==="ReportAlreadyRunning"?this.getResource("language-run-report-error-message-already-running"):a.name==="RequestTimeoutError"?this.getResource("language-run-report-error-message-timeout"):a.name==="OfflineReportImpossible"?
this.getResource("language-run-report-error-message-offline"):/outputFormat parameter invalid/.test(a.message)?this.getResource("language-run-report-error-message-output-format-unavailable"):this.getResource("language-run-report-error-message-generic");a.name!=="ReportAlreadyRunning"&&this._cleanupReportProgressUI();this.app.command("Alert").execute(d,b)};return b}(d.framework.ui.ViewBase);f.RunReportView=i})(f.reporting||(f.reporting={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(f){function b(){f.apply(this,arguments);this.complete=new Observable(false);this.isAsync=new Observable(false);this.href=new Observable("")}__extends(b,f);b.prototype.initialize=function(a){a===void 0&&(a={});f.prototype.initialize.apply(this,arguments);this.app.command("RunReport").register(this,this._executeRunReport)};b.prototype._executeRunReport=function(a){var b=this;if(a)try{this.complete.set(false);a.reportParameters=
a.reportParameters||new d.essentials.ReportParameters;a.reportParameters.featureIds=[];a.reportParameters.outputFormat=a.reportParameters.outputFormat||"PDF";if(!a.report.supportedOutputFormats.some(function(b){return b.toLowerCase()===a.reportParameters.outputFormat.toLowerCase()})){var h=a.report.supportedOutputFormats.length?a.report.supportedOutputFormats[0]:null;if(h)a.reportParameters.outputFormat=h;else{var f=Error("Selected report has no available output formats configured.");f.name="ReportHasNoSupportedOutputFormats";
throw f;}}e.infrastructure.reporting.getAllFeaturesFromReportable(a.reportable).forEach(function(b){(b=b.getPrimaryKeyValue())&&a.reportParameters.featureIds.push(b)});if(this.app.isOffline.get())throw f=Error("Reports cannot be run while offline."),f.name="OfflineReportImpossible",f;a.report.run(null,a.reportParameters,function(a){b.isAsync.set(a.isAsync);b.href.set(a.href);b.complete.set(true);b.app.event("ReportResultEvent").publish(a)},function(a){b.app.event("ReportErrorEvent").publish(a)})}catch(j){this.app.event("ReportErrorEvent").publish(j)}};
return b}(d.framework.ui.ViewModelBase);f.RunReportViewModel=i})(f.reporting||(f.reporting={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(d){function b(){d.apply(this,arguments);this.features=new ObservableCollection;this.availableReportListings=new ObservableCollection}__extends(b,d);b.prototype.initialize=function(a){a===void 0&&(a={});d.prototype.initialize.apply(this,arguments);this.warnUserWhenReportExcludesFeatures="warnUserWhenReportExcludesFeatures"in a?a.warnUserWhenReportExcludesFeatures:false;this.app.command("ListReports").register(this,this._executeListReports,
this._canExecuteListReports)};b.prototype._executeListReports=function(a){var b=this,d=e.infrastructure.reporting.getAllFeaturesFromReportable(a);this.features.set(d);this.availableReportListings.set(this._getAllAvailableReportsFromFeatures(d).map(function(a){var e=d.filter(function(b){return!b||!b.layer||!b.layer.mapService||b.layer.mapService.id!==a.layer.mapService.id||b.layer.id!==a.layer.id}),f=b.features.get().filter(function(a){return e.indexOf(a)===-1});return{report:a,displayName:a.displayName,
description:a.description,excludedFeatures:e,includedFeatures:f,details:b.getResource("language-list-reports-details").format(f.length,d.length),isMoreThanOneFeatureSelected:b.features.getLength()>1}}))};b.prototype._canExecuteListReports=function(a){return this._getAllAvailableReportsFromFeatures(e.infrastructure.reporting.getAllFeaturesFromReportable(a)).length>0};b.prototype._getAllAvailableReportsFromFeatures=function(a){var b=[];a.forEach(function(a){a&&a.layer&&a.layer.reports&&a.layer.reports.forEach(function(a){b.indexOf(a)===
-1&&b.push(a)})});return b};b.prototype.engageReport=function(a){var b=this,d=a.report,e=a.excludedFeatures,a=a.includedFeatures,f={report:d,reportable:a};this.warnUserWhenReportExcludesFeatures&&e.length>0?this.app.command("Confirm").execute(this.getResource("language-list-reports-exclusion-warning-message").format(d.displayName,e.length,this.features.getLength(),a.length),this.getResource("language-list-reports-exclusion-warning-title"),function(a){a&&b.app.command("RunReport").execute(f)}):this.app.command("RunReport").execute(f)};
return b}(d.framework.ui.ViewModelBase);f.ListReportsViewModel=i})(f.reporting||(f.reporting={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,b){var e=this;d.call(this,a,b);this.app.command("ListReports").postExecute.subscribe(this,function(){e.app.viewManager.activateView(e)})}__extends(b,d);b.prototype.handleClickReport=function(a,b,d){this.viewModel.engageReport(d)};return b}(d.framework.ui.ViewBase);e.ListReportsView=f})(e.reporting||(e.reporting={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.framework.application.ModuleBase);e.ReportingModule=f})(e.reporting||(e.reporting={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.framework.application.ModuleBase);e.ScalebarModule=f})(e.scalebar||(e.scalebar={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.framework.ui.ViewModelBase);e.ScalebarViewModel=f})(e.scalebar||(e.scalebar={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.scalebarContainer=this.scalebarHost=null}__extends(b,d);b.prototype.attach=function(a){var b=this;d.prototype.attach.call(this,a);var e=this.configuration;e.scalebarStyle?e.scalebarStyle=="line"||e.scalebarStyle=="ruler"||this.app.trace.warning("Configured value of '{0}' for scalebarStyle in ScalebarView is not known to be supported.".format(e.scalebarStyle)):e.scalebarStyle=
"line";e.scalebarUnit?e.scalebarUnit=="english"||e.scalebarUnit=="metric"||e.scalebarUnit=="dual"||this.app.trace.warning("Configured value of '{0}' for scalebarUnit in ScalebarView is not known to be supported.".format(e.scalebarUnit)):e.scalebarUnit="dual";e.showBackground=!!e.showBackground;e.showBackground&&$(this.scalebarContainer).addClass("scalebar-standout");e.scalebarStyle=="line"?$(this.scalebarContainer).addClass("scalebar-line-style"):e.scalebarStyle=="ruler"&&$(this.scalebarContainer).addClass("scalebar-ruler-style");
require(["esri/dijit/Scalebar"],function(a){new a({map:b.app.map,scalebarStyle:e.scalebarStyle,scalebarUnit:e.scalebarUnit},b.scalebarHost)})};return b}(d.framework.ui.ViewBase);e.ScalebarView=f})(e.scalebar||(e.scalebar={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,b){e.call(this,a,b);this.SEARCH_TYPE="BingGeocode";this.iconUri="Resources/Images/Icons/pin-red-32.png";this.culture=this.bingMapsKey=null;this.libraryId=void 0;this.intSearchUniqueId=0;this.currentSearchId=null;this._searchCancelState={};this._bingGeocoder=null;this.name="Bing Geocode";this.description="Search provider for the Bing Geocode Service.";this.isEnabled=true}__extends(b,e);b.prototype.initialize=
function(a){e.prototype.initialize.call(this,a);if(a&&a.bingMapsKey)this.bingMapsKey=a.bingMapsKey;this.culture=a&&a.culture?a.culture:!this.culture&&this.app.locale?this.app.locale:"en-US";if(a&&a.iconUri)this.iconUri=a.iconUri};b.prototype._getGeocoder=function(){if(!this._bingGeocoder)this._bingGeocoder=new esri.virtualearth.VEGeocoder({bingMapsKey:this.bingMapsKey,culture:this.culture});return this._bingGeocoder};b.prototype.search=function(a,b){var e=this,f=this.intSearchUniqueId++;this.currentSearchId=
f;this._searchCancelState[f]=false;var j=new d.essentialsHtmlViewer.mapping.infrastructure.eventArgs.SearchProgressEventArgs;j.results=a;j.error=null;j.message="";j.searchType=this.SEARCH_TYPE;j.query=b;var i=function(){e.status=d.essentialsHtmlViewer.mapping.infrastructure.search.Status.IDLE};a?b?(this.status=d.essentialsHtmlViewer.mapping.infrastructure.search.Status.SEARCHING,this._getGeocoder().addressToLocations(b).then(function(b){if(!e._searchCancelState[f]&&b.length>0){var g=new d.essentialsHtmlViewer.mapping.infrastructure.FeatureSet({app:e.app});
g.iconUri.set(e.iconUri);g.attributes.addItem(new d.essentialsHtmlViewer.mapping.infrastructure.FeatureAttribute("","addressLine","addressLine",e.app.getResource(e.libraryId,"language-search-bing-address")));g.attributes.addItem(new d.essentialsHtmlViewer.mapping.infrastructure.FeatureAttribute("","adminDistrict","adminDistrict",e.app.getResource(e.libraryId,"language-search-bing-admin-district")));g.attributes.addItem(new d.essentialsHtmlViewer.mapping.infrastructure.FeatureAttribute("","countryRegion",
"countryRegion",e.app.getResource(e.libraryId,"language-search-bing-country")));g.attributes.addItem(new d.essentialsHtmlViewer.mapping.infrastructure.FeatureAttribute("","district","district",e.app.getResource(e.libraryId,"language-search-bing-district")));g.attributes.addItem(new d.essentialsHtmlViewer.mapping.infrastructure.FeatureAttribute("","formattedAddress","formattedAddress",e.app.getResource(e.libraryId,"language-search-bing-formatted")));g.attributes.addItem(new d.essentialsHtmlViewer.mapping.infrastructure.FeatureAttribute("",
"locality","locality",e.app.getResource(e.libraryId,"language-search-bing-locality")));g.attributes.addItem(new d.essentialsHtmlViewer.mapping.infrastructure.FeatureAttribute("","postalCode","postalCode",e.app.getResource(e.libraryId,"language-search-bing-postal-code")));g.attributes.addItem(new d.essentialsHtmlViewer.mapping.infrastructure.FeatureAttribute("","postalTown","postalTown",e.app.getResource(e.libraryId,"language-search-bing-postal-town")));g.displayName.set(e.name);dojo.forEach(b,function(a){var b=
JSON.parse(JSON.stringify(a.address));delete b.declaredClass;b=new esri.Graphic(esri.geometry.geographicToWebMercator(a.location),null,b);b=new d.essentialsHtmlViewer.mapping.infrastructure.Feature({graphic:b});b.label.set(a.address.formattedAddress);b.description.set("Score: "+a.confidence);b.zoomExtent.set(esri.geometry.geographicToWebMercator(a.bestView));g.addFeature(b)});a.featureSets.addItem(g)}i();if(!e._searchCancelState[f])j.status=e.status,e.app.event("SearchProgress").publish(j),e.app.event("SearchProgressEvent").publish(j)},
function(a){i();if(!e._searchCancelState[f]){var b="Bing Geocode error: "+a.message;j.status=d.essentialsHtmlViewer.mapping.infrastructure.search.Status.ERROR;j.error=a;j.message=b;e.app.trace.error(b);e.app.event("SearchProgress").publish(j);e.app.event("SearchProgressEvent").publish(j)}})):this.app.trace.error("Bing Geocode Search Provider: Cannot perform search without search text."):this.app.trace.error("Bing Geocode Search Provider: Cannot perform search without a feature set collection.")};
b.prototype.cancelSearch=function(){this.status===d.essentialsHtmlViewer.mapping.infrastructure.search.Status.SEARCHING&&(this._searchCancelState[this.currentSearchId]=true)};return b}(d.essentialsHtmlViewer.mapping.infrastructure.search.SearchProviderBase);e.BingGeocodeSearchProvider=f})(e.search||(e.search={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,b){e.call(this,a,b);this.SEARCH_TYPE="ArcGISGeocode";this.iconUri="Resources/Images/Icons/pin-blue-32.png";this.token=this.locatorUrl=null;this.minimumScore=70;this.defaultZoomScale=8E3;this.singleLineField=null;this.parameters=[];this.globalSearchKey=null;this.intSearchUniqueId=0;this.currentSearchId=null;this._searchCancelState={};this._offlineSwitchToken=this._geocoder=null;this.name="ArcGIS Geocode";
this.description="Search provider for the ArcGIS Geocode Service.";this.isEnabled=true}__extends(b,e);b.prototype.initialize=function(a){e.prototype.initialize.call(this,a);if(a&&a.url)this.locatorUrl=a.url;if(a&&a.iconUri)this.iconUri=a.iconUri;if(a&&a.defaultZoomScale)this.defaultZoomScale=a.defaultZoomScale;if(a&&a.singleLineField)this.singleLineField=a.singleLineField;if(a&&a.minimumScore)this.minimumScore=a.minimumScore;if(!this.singleLineField&&this.locatorUrl)if(this.app.site&&this.app.site.isInitialized)this._loadGeocodeDefinition();
else this.app.event("SiteInitializedEvent").once(this,this._loadGeocodeDefinition)};b.prototype._loadGeocodeDefinition=function(){var a=this;if(this.app.isOffline.get())this._offlineSwitchToken=this.app.event("ApplicationOnlineEvent").subscribe(this,function(){a.app.event("ApplicationOnlineEvent").unsubscribe(a._offlineSwitchToken);a._loadGeocodeDefinition()});else if(!this.singleLineField&&this.locatorUrl){var b=this.locatorUrl+"?f=json"+(this.token?"&token="+encodeURIComponent(this.token):"");esri.request({url:b}).then(function(b){b&&
b.singleLineAddressField&&b.singleLineAddressField.name?a.singleLineField=b.singleLineAddressField.name:a.app.trace.error("ArcGIS geocode server does not support single address line query: '"+a.locatorUrl+"'.")},function(b){a.app.trace.error("Unable to retrieve geocode server information at: '"+a.locatorUrl+"': "+b.message)})}};b.prototype._getGeocoder=function(){if(!this._geocoder){var a=this.locatorUrl+(this.token?"?token="+encodeURIComponent(this.token):"");this._geocoder=new esri.tasks.Locator(a);
if(this.app&&this.app.map)this._geocoder.outSpatialReference=this.app.map.spatialReference}return this._geocoder};b.prototype.updateToken=function(a){this.token=a;this._geocoder=null};b.prototype.search=function(a,b){var e=this,f=this.intSearchUniqueId++;this.currentSearchId=f;this._searchCancelState[f]=false;var j=new d.essentialsHtmlViewer.mapping.infrastructure.eventArgs.SearchProgressEventArgs;j.results=a;j.error=null;j.searchType=this.SEARCH_TYPE;j.query=b;j.endpointUrl=this.locatorUrl;var i=
function(){e.status=d.essentialsHtmlViewer.mapping.infrastructure.search.Status.IDLE};if(a)if(b){this.status=d.essentialsHtmlViewer.mapping.infrastructure.search.Status.SEARCHING;j.status=this.status;this.app.event("SearchProgress").publish(j);this.app.event("SearchProgressEvent").publish(j);var k=this._getGeocoder(),l;this.globalSearchKey===this.singleLineField?(l={},l[this.singleLineField]=b,l={address:l}):l={address:this._getMultiLineFields(b)};var m=parseInt(this.minimumScore);if(!isNaN(m)&&(m<
0||m>100))m=null;k.addressToLocations(l).then(function(b){if(!e._searchCancelState[f]&&b.length>0){var g=new d.essentialsHtmlViewer.mapping.infrastructure.FeatureSet({app:e.app});g.iconUri.set(e.iconUri);g.attributes.addItem(new d.essentialsHtmlViewer.mapping.infrastructure.FeatureAttribute("","address","address",e.app.getResource(e.libraryId,"language-search-arcgis-address")));g.attributes.addItem(new d.essentialsHtmlViewer.mapping.infrastructure.FeatureAttribute("","score","score",e.app.getResource(e.libraryId,
"language-search-arcgis-score")));g.displayName.set(e.name);dojo.forEach(b,function(a){if(isNaN(m)||a.score>=m){var b=new esri.Graphic(a.location,null,{address:a.address,score:a.score}),b=new d.essentialsHtmlViewer.mapping.infrastructure.Feature({graphic:b});b.label.set(a.address);b.zoomScale.set(e.defaultZoomScale);b.description.set("Score: "+a.score);g.addFeature(b)}});g.features.length()>0&&a.featureSets.addItem(g)}i();if(!e._searchCancelState[f])j.status=e.status,e.app.event("SearchProgress").publish(j),
e.app.event("SearchProgressEvent").publish(j)},function(a){i();if(!e._searchCancelState[f])j.status=d.essentialsHtmlViewer.mapping.infrastructure.search.Status.ERROR,j.error=a,j.message=a.message,e.app.event("SearchProgress").publish(j),e.app.event("SearchProgressEvent").publish(j)})}else this.app.trace.error("ArcGIS Geocode Search Provider: Cannot perform search without search text.");else this.app.trace.error("ArcGIS Geocode Search Provider: Cannot perform search without a feature set collection.")};
b.prototype._getMultiLineFields=function(a){var b={},d;for(d in this.parameters)b[this.parameters[d].name]=this.parameters[d].name===this.globalSearchKey?a:this.parameters[d].value;return b};b.prototype.cancelSearch=function(){this.status===d.essentialsHtmlViewer.mapping.infrastructure.search.Status.SEARCHING&&(this._searchCancelState[this.currentSearchId]=true)};return b}(d.essentialsHtmlViewer.mapping.infrastructure.search.SearchProviderBase);e.ArcGisGeocodeSearchProvider=f})(e.search||(e.search=
{}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){(function(f){f.getIdentifyLayerIds=function(e,b,a,g,h,f,i,k){var l=[];if(h===false||e.isVisible())for(var h=e.essentialsMap.site.essentialsMap.calculateScale(),s=0;s<e.layers.length;s++){var m=e.layers[s];if(!(k&&m.type===d.essentials.LayerType.RASTER_LAYER)){var q=m.identifiableAtAllScales||f===false||m.withinScaleRange(h),p=m.isVisible()&&m.areAllAncestorsVisible();if((i==null||$.inArray(m.id,i)!==-1)&&(p||g===false)&&q&&b(m))(a==
null||a.length==0||dojo.indexOf(a,m.featureType)>=0)&&l.push(m.id)}}return l};f.getLayerDefinitions=function(d,b){var a=[];if(d.serviceLayer.layerDefinitions)for(var g=d.serviceLayer.layerDefinitions,e=0;e<g.length;e++)if(g[e])for(var f=0;f<b.length;f++)if(b[f]==e.toString()){a[e]=g[e];break}return a};f.getDynamicLayerInfos=function(d,b){for(var a=[],g=0;g<b.length;g++){var e=d.getDynamicLayerInfoById(b[g]);e&&a.push(e)}return a};f.appendToFeatureSetCollection=function(f,b,a,g){b==null&&(b=new e.infrastructure.FeatureSetCollection);
for(var h={},i=0;i<f.length;i++){var k=f[i],l=h[k.layerId];if(l==null){var n=a.findLayerById(k.layerId.toString());if(n&&n.type===d.essentials.LayerType.RASTER_LAYER){if(k.feature&&k.feature.attributes&&$.isEmptyObject(k.feature.attributes))return;for(var s in k.feature.attributes)if(k.feature.attributes.hasOwnProperty(s)){var m=k.feature.attributes[s];if(m==="NoValue"||m==="NoData")return}}l={};if(n)for(m=0;m<n.fields.length;m++){var q=n.fields[m];l[q.alias]=q}if(n&&n.type===d.essentials.LayerType.RASTER_LAYER&&
n.fields)if(n.fields.length===0){if(k.feature.attributes)for(s in k.feature.attributes)m=k.feature.attributes[s],n.fields.push(new d.essentials.Field({displayName:s,dataType:d.essentials.EssentialsFieldTypes.essentialsFieldTypeString,alias:s,hyperlinkLabel:"",name:s,searchable:true,visible:true}))}else for(var p in k.feature.attributes)if(p==="Pixel value")for(i=0;i<n.fields.length;i++)if(n.fields[i].name==="VALUE"){n.fields[i].name="Pixel value";break}m=null;if(k.displayFieldName&&(l=l[k.displayFieldName])&&
l.name)m=l.name;m||(m=n&&n.primaryKeyField&&n.primaryKeyField.name?n.primaryKeyField.name:k.displayFieldName);l=new esri.tasks.FeatureSet({displayFieldName:m,features:[]});if(k.feature.geometry)l.geometryType=k.feature.geometry.type,l.spatialReference=k.feature.geometry.spatialReference;l=new e.infrastructure.FeatureSet({esriFeatureSet:l,layer:n,app:this.app});n?l.displayName.set(n.displayName):l.displayName.set(k.layerName);h[k.layerId]=l}l.layer&&d.essentialsHtmlViewer.mapping.infrastructure.GraphicUtils.sanitizeAttributeNames(k.feature,
l.layer);l.esriFeatureSet.features.push(k.feature);n={graphic:k.feature,layer:l.layer,resolveLayerFields:true,allowUnsafeContent:false};if(a.drawingBehavior===d.essentials.DrawingBehavior.KML_SERVICE)n.allowUnsafeContent=g.configuration.allowUnsafeContent;n=new e.infrastructure.Feature(n);a.drawingBehavior===d.essentials.DrawingBehavior.KML_SERVICE&&(n.descriptionFormat.set("{snippet}"),n.longDescriptionFormat.set(k.feature.attributes.hasOwnProperty("balloonStyleText")?"{balloonStyleText}":"{description}"));
l.features.addItem(n)}for(var r in h)h.hasOwnProperty(r)&&(l=h[r],b.featureSets.addItem(l),l.resolveDataLinks(function(a){g.event("FeatureChangedEvent").publish(a)}));return b}})(f.IdentifyUtils||(f.IdentifyUtils={}))})(f.identify||(f.identify={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(){function f(b,a){this._identifyTaskErrorCount=this._identifyTaskCompletedCount=this._identifyTaskExecutedCount=0;this._isCancelled=this._taskExecutionComplete=false;this._pendingProgressQueue=[];this.height=this.width=this.extent=this.tag=this.map=this.app=null;this.returnGeometry=this.topMostLayerOnly=false;this.layersInVisibleScaleRangeOnly=this.visibleMapServicesOnly=this.visibleLayersOnly=true;this.pixelTolerance=
5;this.polygonPixelTolerance=2;this.allServicesInError=false;this.mapServicesAndLayersToIdentify=null;this.restrictRasterIdentifyToPoint=true;this.layerRestriction=this.delayedFSCOpen=null;this.app=a||null;this.map=b}f.prototype._pointToExtent=function(b,a){if(a===void 0)a=this.pixelTolerance;var d=this.map.extent.getWidth()/this.map.width;d*=a;return new esri.geometry.Extent(b.x-d,b.y-d,b.x+d,b.y+d,this.map.spatialReference)};f.prototype._checkAndReturnLayerRestriction=function(){var b=this.layerRestriction;
b||(b=function(a){return a.identifiable&&a.supportsIdentify});return b};f.prototype.execute=function(b,a,g,e,f){var j=this,i=this._checkAndReturnLayerRestriction();if(this.app&&!this.app.isOffline.get()&&b&&b.type=="polygon"&&d.essentials.GeometryUtilities.isSelfIntersectingPolygon(b)&&!f)d.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.simplifyPolygon(b,function(b){j.execute(b,a,g,e,true)},function(a){j.app.trace.warning("An error occurred while attempting to simplify the identify geometry. Make sure that your proxy is configured correctly.");
e(j,a,null)},this.app);else{this._identifyTaskErrorCount=this._identifyTaskCompletedCount=this._identifyTaskExecutedCount=0;this._pendingProgressQueue.length=0;this.allServicesInError=this._taskExecutionComplete=false;f=new esri.tasks.IdentifyParameters;f.tolerance=this.pixelTolerance;f.returnGeometry=this.returnGeometry;f.layerOption=this.topMostLayerOnly?esri.tasks.IdentifyParameters.LAYER_OPTION_TOP:esri.tasks.IdentifyParameters.LAYER_OPTION_ALL;f.width=this.width||this.map.width;f.height=this.height||
this.map.height;f.mapExtent=this.extent||this.map.extent;f.geometry=b;for(var k=0;k<this.app.site.essentialsMap.mapServices.length;k++){var l=this.app.site.essentialsMap.mapServices[k];if(l.serviceLayer&&l.serviceLayer instanceof esri.layers.FeatureLayer)this._handleFeatureLayer(b,l,l.serviceLayer,f,i,a,g,e);else if(l.serviceLayer instanceof esri.layers.KMLLayer)for(var m=l.serviceLayer.getLayers(),q=0;q<m.length;q++)m[q]instanceof esri.layers.FeatureLayer&&this._handleFeatureLayer(b,l,m[q],f,i,a,
g,e);else l.serviceLayer instanceof esri.layers.ArcGISImageServiceLayer||this._handleLayer(l,f,i,a,g,e)}this._taskExecutionComplete=true;this._conditionallyInvokeCompleteCallback(this,g)}};f.prototype._assignSpatialReferences=function(b){for(var a=0;a<b.length;++a){var d=b[a];if(d.feature.geometry)d.feature.geometry.spatialReference=this.app.map.extent.spatialReference}};f.prototype._handleLayer=function(b,a,g,h,f){if(e.infrastructure.taskUtils.getIdentifyTaskUrl(b)){var j=a.geometry.type!=="point"&&
this.restrictRasterIdentifyToPoint,i=dojo.clone(a);i.layerIds=this._getLayersToIdentifyForMapService(b,["Polygon"],g,j);i.tolerance=this.polygonPixelTolerance;a=dojo.clone(a);a.layerIds=this._getLayersToIdentifyForMapService(b,["None","Point","Multipoint","Line"],g,j);g=[i,a];this.delayedFSCOpen&&(i.layerIds.length>0||a.layerIds.length>0)&&this.delayedFSCOpen();for(i=0;i<g.length;i++){var k=g[i];if(k.layerIds.length>0){this._identifyTaskExecutedCount++;j=k.layerIds.join().split(",");k.layerDefinitions=
d.essentialsHtmlViewer.mapping.modules.identify.IdentifyUtils.getLayerDefinitions(b,j);k.dynamicLayerInfos=d.essentialsHtmlViewer.mapping.modules.identify.IdentifyUtils.getDynamicLayerInfos(b,j);k.spatialReference=this.app.map.extent.spatialReference;!this.layersInVisibleScaleRangeOnly&&k.dynamicLayerInfos.length&&k.dynamicLayerInfos.forEach(function(a,b){var d=new esri.layers.DynamicLayerInfo(a.toJson());d.minScale=0;d.maxScale=0;k.dynamicLayerInfos[b]=d});var l=this,m=this;(new esri.tasks.IdentifyTask(e.infrastructure.taskUtils.getIdentifyTaskUrl(b))).execute(k,
dojo.hitch(b,function(a){m._isCancelled||(l._assignSpatialReferences(a),m._identifyTaskCompletedCount++,m._queueInvokeProgress.call(m,this,h,[m,a,this]),m._conditionallyInvokeCompleteCallback(m,f))}),dojo.hitch(b,function(a){m._isCancelled||(m._identifyTaskCompletedCount++,m._identifyTaskErrorCount++,m._queueInvokeProgress.call(m,this,h,[m,a,this]),m._conditionallyInvokeCompleteCallback(m,f))}))}else this._queueInvokeProgress.call(this,b,h,[this,[],b]),this._conditionallyInvokeCompleteCallback(this,
f)}}};f.prototype._getLayersToIdentifyForMapService=function(b,a,g,e){if(this.mapServicesAndLayersToIdentify)for(var f=0;f<this.mapServicesAndLayersToIdentify.length;f++){if(this.mapServicesAndLayersToIdentify[f].mapServiceId===b.id)return d.essentialsHtmlViewer.mapping.modules.identify.IdentifyUtils.getIdentifyLayerIds(b,g,a,this.visibleLayersOnly,this.visibleMapServicesOnly,this.layersInVisibleScaleRangeOnly,this.mapServicesAndLayersToIdentify[f].layerIds,e)}else return d.essentialsHtmlViewer.mapping.modules.identify.IdentifyUtils.getIdentifyLayerIds(b,
g,a,this.visibleLayersOnly,this.visibleMapServicesOnly,this.layersInVisibleScaleRangeOnly,null,e)};f.prototype._handleFeatureLayer=function(b,a,g,h,f,j,i,k){var l=this;h.layerIds=this._getLayersToIdentifyForMapService(a,null,f,false);if(h.layerIds.length>0||a.drawingBehavior==d.essentials.DrawingBehavior.KML_SERVICE){this.delayedFSCOpen&&this.delayedFSCOpen();var m=new esri.tasks.Query,h=null,h=b.type==="point"?a.heatMap&&a.heatMap.enabled?this._pointToExtent(b,a.heatMap.intensity):this._pointToExtent(b):
this.app&&this.app.isOffline.get()===false&&a.serviceLayer.url&&a.drawingBehavior!=d.essentials.DrawingBehavior.KML_SERVICE?b:b.getExtent();m.geometry=h;m.outFields=["*"];m.outSpatialReference=this.app.map.spatialReference;m.returnGeometry=true;this._identifyTaskExecutedCount++;var q=function(a,b){(b.essentialsMap&&b.essentialsMap.getMap&&a.isVisibleAtScale(b.essentialsMap.getMap().getScale())?a.queryFeatures(m):(new esri.tasks.QueryTask(e.infrastructure.taskUtils.getQueryTaskUrl(a,b))).execute(m)).then(dojo.hitch(b,
function(a){if(!l._isCancelled){var b=[];if(a&&a.features&&a.features.length>0)for(var d=0;d<a.features.length;d++)a.features[d]._graphicsLayer=g,b.push({feature:a.features[d],displayFieldName:g.displayField,layerId:g.layerId,layerName:g.name});l._identifyTaskCompletedCount++;j(l,b,this);l._conditionallyInvokeCompleteCallback(l,i)}}),dojo.hitch(b,function(a){l._isCancelled||(l._identifyTaskCompletedCount++,l._identifyTaskErrorCount++,k(l,a,this),l._conditionallyInvokeCompleteCallback(l,i))}))};if(g.updating)var p=
dojo.connect(g,"onUpdateEnd",function(){q(g,a);dojo.disconnect(p)});else q(g,a)}};f.prototype._queueInvokeProgress=function(b,a,d){this._pendingProgressQueue[b.id]||(this._pendingProgressQueue[b.id]=[]);var e=this._pendingProgressQueue[b.id];e.push({func:a,args:d});if(e.length==2){a=e[0].args[1];if(a[0]&&a[0].feature){var f;if(a[0].feature.geometry)f=a[0].feature.geometry.type;else if(a[0].layerId)f=b.findLayerById(a[0].layerId).featureType;if(f=="polygon"||f=="Polygon")b=e[0],e[0]=e[1],e[1]=b}for(b=
0;b<e.length;b++)e[b].func.apply(this,e[b].args)}};f.prototype._conditionallyInvokeCompleteCallback=function(b,a){if(b._taskExecutionComplete&&b._identifyTaskExecutedCount==b._identifyTaskCompletedCount)b.allServicesInError=b._identifyTaskExecutedCount==b._identifyTaskErrorCount,a(b)};f.prototype.cancel=function(){this._isCancelled=true};return f}();f.MapIdentifyTask=i})(f.identify||(f.identify={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(j){function b(a,b){j.call(this,a,b);this.bufferingEnabled=true;this._providers=[];this._previousFscSource=null;this._previousFscIds={};this._fscSourceCount={};this._fscDisplayName="";this.app.command("Identify").register(this,this.search);this._fscDisplayName=a.getResource(b,"language-identify-results-header")}__extends(b,j);b.prototype.initialize=function(a){j.prototype.initialize.call(this,a);if(a){if(a.resultsDisplayName)this._fscDisplayName=
a.resultsDisplayName;this.pixelTolerance=isNaN(parseInt(a.pixelTolerance))?5:parseInt(a.pixelTolerance);this.polygonPixelTolerance=isNaN(parseInt(a.polygonPixelTolerance))?2:parseInt(a.polygonPixelTolerance);this.topMostLayerOnly=a.topMostLayerOnly!=void 0?!!a.topMostLayerOnly:false;this.returnGeometry=a.returnGeometry!=void 0?!!a.returnGeometry:true;this.visibleLayersOnly=a.visibleLayersOnly!=void 0?!!a.visibleLayersOnly:true;this.layersInVisibleScaleRangeOnly=a.layersInVisibleScaleRangeOnly!=void 0?
!!a.layersInVisibleScaleRangeOnly:true;this.bufferingEnabled=a.bufferingEnabled!=void 0?!!a.bufferingEnabled:true;this.restrictRasterIdentifyToPoint=a.restrictRasterIdentifyToPoint!=void 0?!!a.restrictRasterIdentifyToPoint:true;dojo.isArray(a.tools)&&this.app&&this.app.toolRegistry&&this.app.toolRegistry.createTools(a.tools,true);this.layerSelectorForIdentify=new f.LayerSelectorForIdentify(this.app,this);dojo.isArray(a.identifyProviders)&&this._loadProviders(a.identifyProviders)}};b.prototype._loadProviders=
function(a){for(var b=0;b<a.length;b++){var d=a[b];d&&(d.libraryId&&!this.app.allLibrariesLoaded?this._loadProviderWhenLibrariesDownloaded(d):this._loadProvider(d))}};b.prototype._loadProviderWhenLibrariesDownloaded=function(a){var b=this,d=this.app.event("ViewerLibrariesDownloadedEvent").subscribe(this,function(){b.app.event("ViewerLibrariesDownloadedEvent").unsubscribe(d);b._loadProvider(a)})};b.prototype._loadProvider=function(a){var b=dojo.getObject(a.type);b?(b=new b(this.app,a.libraryId||this.libraryId),
b.isEnabled=a.enabled!==false,b.initialize(a.configuration||{}),this._providers.push(b)):this.app.trace.error(this.id+" can't find identify provider typed "+a.type)};b.prototype.search=function(a){var b=this,e=this._processIdentifyArgs(a);this.cancelSearch();try{if(e.geometry&&e.geometry.type=="polygon"){var f=e.geometry;if(f.rings&&f.rings.length===1&&f.rings[0].length===5){var j=e.geometry.getExtent();if(!d.framework.utils.isNullOrUndefined(j)&&this.app.site){var i=this.app.site.getMap();if(i){var k=
i.toScreen(new esri.geometry.Point(j.xmin,j.ymin,j.spatialReference)),l=i.toScreen(new esri.geometry.Point(j.xmax,j.ymax,j.spatialReference));if(Math.abs(l.x-k.x)===96&&Math.abs(l.y-k.y)===96)e.geometry=j.getCenter()}}}}}catch(m){this.app.trace.warning("Could not perform rectangle validation of polygon geometry: "+m)}e.source=e.source||"Identify";e.doNotBuffer?this._executeIdentifyImpl(e):this._applyBufferIfConfigured(e).then(function(a){e.geometry=a.geometry;b._executeIdentifyImpl(e)},function(){b.app.trace.error("Identify: Could not apply buffer. Operation failed.")})};
b.prototype._executeIdentifyImpl=function(a){var b=a.source||"Identify";this._previousFscSource&&(this.app.featureSetManager.tryCloseCollection(this._previousFscIds[this._previousFscSource]),this._previousFscIds[b]&&(this.app.featureSetManager.removeCollectionById(this._previousFscIds[b]),delete this._previousFscIds[b]));var d=new e.infrastructure.FeatureSetCollection;d.displayName.set(this._fscDisplayName);this._fscSourceCount[b]=this._fscSourceCount.hasOwnProperty(b)?this._fscSourceCount[b]+1:0;
d.id=b+this._fscSourceCount[b];this._previousFscIds[b]=d.id;this._previousFscSource=d.sourceName=b;this.app.featureSetManager.addCollection(d);d.tag=a.geometry;for(b=0;b<this._providers.length;b++)this._providers[b].isEnabled&&this._providers[b].search(d,a)};b.prototype.cancelSearch=function(){for(var a=0;a<this._providers.length;a++)this._providers[a].cancelSearch()};b.prototype._processIdentifyArgs=function(a){a={geometry:a instanceof esri.geometry.Geometry?a:a.geometry,source:a.source!=void 0?
a.source:"Identify",extent:a instanceof esri.geometry.Geometry?null:a.extent||null,width:a instanceof esri.geometry.Geometry?null:parseInt(a.width)||null,height:a instanceof esri.geometry.Geometry?null:parseInt(a.height)||null,pixelTolerance:isNaN(parseInt(a.pixelTolerance))?this.pixelTolerance:parseInt(a.pixelTolerance),polygonPixelTolerance:isNaN(parseInt(a.polygonPixelTolerance))?this.polygonPixelTolerance:parseInt(a.polygonPixelTolerance),topMostLayerOnly:a.topMostLayerOnly!=void 0?!!a.topMostLayerOnly:
this.topMostLayerOnly,visibleLayersOnly:a.visibleLayersOnly!=void 0?!!a.visibleLayersOnly:this.visibleLayersOnly,visibleMapServicesOnly:a.visibleMapServicesOnly!=void 0?!!a.visibleMapServicesOnly:false,layersInVisibleScaleRangeOnly:a.layersInVisibleScaleRangeOnly!=void 0?!!a.layersInVisibleScaleRangeOnly:this.layersInVisibleScaleRangeOnly,restrictRasterIdentifyToPoint:a.restrictRasterIdentifyToPoint!=void 0?!!a.restrictRasterIdentifyToPoint:this.restrictRasterIdentifyToPoint,returnGeometry:a.returnGeometry!=
void 0?!!a.returnGeometry:this.returnGeometry,delayFSCOpen:a.delayFSCOpen!=void 0?!!a.delayFSCOpen:false,layerRestriction:a.layerRestriction!=void 0&&dojo.isFunction(a.layerRestriction)?a.layerRestriction:null,doNotBuffer:a.doNotBuffer!=void 0?!!a.doNotBuffer:false};if(a.source==="Identify")a.identifiableLayerInfo=this.layerSelectorForIdentify.mapServiceLayersToIdentify;return a};b.prototype._applyBufferIfConfigured=function(a){var b=this;return new Promise(function(d,e){var f=b.app.command("BufferGeometry");
!b.bufferingEnabled||f.isWrapper?d({geometry:a.geometry}):f.execute({geometry:a.geometry,callback:function(a){return d(a)},errback:function(a){return e(a)},sourceCommand:a.source})})};return b}(d.framework.application.ModuleBase);f.IdentifyModule=i})(f.identify||(f.identify={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,b){d.call(this,a,b);this._menuIsActive=false;this.app.event("ViewActivatedEvent").subscribe(this,function(a){if(a.id==="IWantToMenuView"&&this.root)dojo.removeClass(this.root,"wtm-inactive"),dojo.addClass(this.root,"wtm-active"),this._menuIsActive=true});this.app.event("ViewDeactivatedEvent").subscribe(this,function(a){if(a.id==="IWantToMenuView"&&this.root)dojo.removeClass(this.root,"wtm-active"),dojo.addClass(this.root,
"wtm-inactive"),this._menuIsActive=false})}__extends(b,d);b.prototype.handleButtonClick=function(){this.app.command("ToggleView").execute("IWantToMenuView");return false};return b}(d.framework.ui.ViewBase);e.IWantToMenuButtonView=f})(e.IWantToMenu||(e.IWantToMenu={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.name=new Observable("");this.description=new Observable("");this.cssClass=new Observable("menu-item disabled");this.iconUri=new Observable("");this.commandParameter=this.commandName=null}__extends(b,d);b.prototype.initialize=function(a){d.prototype.initialize.call(this,a);this.name.set(a.name);this.description.set(a.description);this.iconUri.set(a.iconUri||"Resources/Images/Icons/arrow-right-24.png");
this.commandName=a.command;this.commandParameter=a.commandParameter};return b}(d.framework.ui.ViewModelBase);e.IWantToMenuItemViewModel=f})(e.IWantToMenu||(e.IWantToMenu={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.initialize=function(a){d.prototype.initialize.call(this,a);a&&a.menus&&this.app.menuRegistry.loadMenus(a)};return b}(d.framework.application.ModuleBase);e.IWantToMenuModule=f})(e.IWantToMenu||(e.IWantToMenu={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.resolveWidget=function(a,b,e){d.prototype.resolveWidget.call(this,a,b);if(a==="MobileSettingsMenuWidget"&&this.viewModel.mobileMode.get()===true)return this.app.menuRegistry.createMenuWidget(this,b,e)};b.prototype.activated=function(){var a=this;d.prototype.activated.call(this);this.app.command("ClearActiveTool").execute();this.app.event("FlyoutActivated").publish(this);
var b={view:this,onOtherInteracted:function(b){return a._onOtherViewTapped(b)},onElementInteracted:function(b){return a._onMenuViewTapped(b)}};this.app.command("TapToDismiss").execute(b)};b.prototype.deactivated=function(){d.prototype.deactivated.call(this);this._lastState=false;this.app.event("FlyoutDeactivated").publish(this)};b.prototype.handleMenuItemClick=function(a,b,e){this._deactivateSelf();d.prototype.handleMenuItemClick.call(this,a,b,e)};b.prototype.handleMobileModeHeaderClick=function(){this._deactivateSelf()};
b.prototype._onOtherViewTapped=function(a){$(a.srcElement||a.target).hasClass("wtm-button")||this._deactivateSelf()};b.prototype._onMenuViewTapped=function(a){var b=this;this.app.configuration.mobileMode&&$(a.target).hasClass("list-menu-button")===false?(a={view:this,onOtherInteracted:function(a){return b._onOtherViewTapped(a)},onElementInteracted:function(a){return b._onMenuViewTapped(a)}},this.app.command("TapToDismiss").execute(a)):this.app.configuration.mobileMode&&$(a.target).hasClass("list-menu-button")===
true&&(a.target.click(),this._deactivateSelf())};b.prototype._deactivateSelf=function(){this.app.command("DeactivateView").execute(this.id)};return b}(d.essentialsHtmlViewer.mapping.infrastructure.menus.MenuView);e.IWantToMenuView=f})(e.IWantToMenu||(e.IWantToMenu={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){var i=function(d){function b(a,b){d.call(this,a,b);this.mobileMode=new Observable(false);this.showMenu=new Observable(true);this.menuTitle.set(this.getResource("language-menu-title"))}__extends(b,d);b.prototype.initialize=function(a){d.prototype.initialize.call(this,a);this.app.configuration.mobileMode===true&&this.mobileMode.set(true);a&&(a.hasOwnProperty("menuTitle")&&this.menuTitle.set(a.menuTitle),a.hasOwnProperty("showMenu")&&this.showMenu.set(!!a.showMenu))};
return b}(d.infrastructure.menus.MenuViewModel);f.IWantToMenuViewModel=i})(f.IWantToMenu||(f.IWantToMenu={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));geocortex.essentialsHtmlViewer.mapping.modules.results=geocortex.essentialsHtmlViewer.mapping.infrastructure.results;
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(f){function b(a,b){f.call(this,a,b);this.SEARCH_TYPE="InstantSearch";this.SEARCH_TYPE_HINTS="InstantSearchHints";this._cancelled=this._canExecute=false;this._intSearchUniqueID=0;this._fscSourceName="Search";this.precedenceToNearbyResults=this.enableSearchHints=true;this.maxResults=50;this.maxHints=5;this.name=this.app.getResource("Mapping","language-search-instant-provider-name");this.description=this.app.getResource("Mapping",
"language-search-instant-provider-description");this.supportsHints=this.isEnabled=true}__extends(b,f);b.prototype.initialize=function(a){f.prototype.initialize.call(this,a);if(a){if(a.hasOwnProperty("enableSearchHints"))this.enableSearchHints=a.enableSearchHints;if(a.hasOwnProperty("maxResults"))this.maxResults=parseInt(a.maxResults);if(a.hasOwnProperty("maxHints"))this.maxHints=parseInt(a.maxHints);if(a.hasOwnProperty("precedenceToNearbyResults"))this.precedenceToNearbyResults=a.precedenceToNearbyResults}if(this.app.site&&
this.app.site.isInitialized)this._onSiteInitialized(this.app.site);else this.app.event("SiteInitializedEvent").once(this,this._onSiteInitialized)};b.prototype.canExecute=function(){return this._canExecute?true:this.isEnabled=false};b.prototype.cancelSearch=function(){if(!this._cancelled){this._cancelled=true;this.status=e.infrastructure.search.Status.IDLE;var a=new e.infrastructure.eventArgs.SearchProgressEventArgs;a.status=e.infrastructure.search.Status.IDLE;a.message=this.app.getResource("Mapping",
"language-search-instant-provider-search-cancelled");a.results=null;this._updateProgress(a)}};b.prototype.search=function(a,b){var f=this;if(this.canExecute()!==false){this._cancelled=false;var j=new d.essentials.SearchQuery;j.searchText=b;j.maxResults=this.maxResults;j.searchLayers=this._getSearchableLayers();j.returnIdsOnly=false;j.returnCountOnly=false;j.returnHighlights=false;j.returnGeometry=true;j.contains=true;j.searchLayers.length==0?this._onSearchError(Error("No layers to search. Make sure you mark some layers as searchable in your site."),
a,j):(this.precedenceToNearbyResults&&this.app.map?(j.extent=this.app.map.extent,j.outSpatialReference=this.app.map.spatialReference):(j.extent=null,j.outSpatialReference=null),this.status=e.infrastructure.search.Status.SEARCHING,this.app.site.search(j,function(b){return f._onSearchBegin(b,a)},function(b){return f._onSearchCompleted(b,a,j)},function(b){return f._onSearchError(b,a,j)}))}};b.prototype.getSearchHints=function(a,b){var e=this;if(this.canExecute()!==false&&b&&b.replace(/ /g,"")!=""&&this.enableSearchHints){var f=
++this._intSearchUniqueID,j=new d.essentials.SearchQuery;j.searchText=b;j.maxResults=this.maxHints;j.searchLayers=this._getSearchableLayers();j.returnIdsOnly=false;j.returnCountOnly=false;j.returnGeometry=false;j.returnHighlights=true;j.contains=true;this.precedenceToNearbyResults&&this.app.map?(j.extent=this.app.map.extent,j.outSpatialReference=this.app.map.spatialReference):(j.extent=null,j.outSpatialReference=null);this.app.site.search(j,function(a){e._onGetSearchHintsBegin(a,f)},function(b){e._onGetSearchHintsCompleted(b,
a,j,f)},function(b){e._onGetSearchHintsError(b,a,j,f)})}};b.prototype._onSiteInitialized=function(a){this._checkCanExecute(a)};b.prototype._checkCanExecute=function(a){a&&a.getEssentialsVersion()>=4?this._canExecute=this._hasSearchableMapServices(a):(this._canExecute=false,this.app.trace.warning(this.app.getResource("Mapping","language-search-instant-provider-not-available")))};b.prototype._hasSearchableMapServices=function(a){for(var b=0;b<a.essentialsMap.mapServices.length;b++)if(a.essentialsMap.mapServices[b].instantSearch)return true;
return false};b.prototype._getSearchableLayers=function(){for(var a=this.app.site.essentialsMap.allLayers(),b=[],d=0;d<a.length;d++)a[d].searchable&&a[d].mapService&&a[d].mapService.instantSearch&&b.push(a[d]);return b};b.prototype._onSearchBegin=function(a){if(!this._cancelled){var b=new e.infrastructure.eventArgs.SearchProgressEventArgs;b.status=e.infrastructure.search.Status.SEARCHING;b.message=this.app.getResource("Mapping","language-search-instant-provider-search-started");b.searchType=this.SEARCH_TYPE;
b.query=a.searchText;this._updateProgress(b)}};b.prototype._onSearchCompleted=function(a,b,d){if(!this._cancelled&&(this.status=e.infrastructure.search.Status.IDLE,!a.error)){for(var a=this._createFeatureSetArray(a),f=0;f<a.length;f++)this._addFsToFsc(a[f],b);a=new e.infrastructure.eventArgs.SearchProgressEventArgs;a.status=e.infrastructure.search.Status.IDLE;a.message=this.app.getResource("Mapping","language-search-instant-provider-search-completed");a.results=b;a.searchType=this.SEARCH_TYPE;a.query=
d.searchText;this._updateProgress(a)}};b.prototype._onSearchError=function(a,b,d){if(!this._cancelled){this.status=e.infrastructure.search.Status.IDLE;var f=new e.infrastructure.eventArgs.SearchProgressEventArgs;f.status=e.infrastructure.search.Status.ERROR;f.message=this.app.getResource("Mapping","language-search-error").format(a.message);f.results=b;f.searchType=this.SEARCH_TYPE;f.query=d.searchText;this._updateProgress(f)}};b.prototype._onGetSearchHintsBegin=function(a){var b=new e.infrastructure.eventArgs.SearchProgressEventArgs;
b.status=e.infrastructure.search.Status.SEARCHING;b.message=this.app.getResource("Mapping","language-search-instant-provider-search-started");b.searchType=this.SEARCH_TYPE_HINTS;b.query=a.searchText;this._updateProgress(b)};b.prototype._onGetSearchHintsCompleted=function(a,b,d,f){if(f&&f===this._intSearchUniqueID){for(var j=[],i=this._createFeatureSetArray(a),f=0;f<i.length;f++){var k=i[f];if(k)for(var l=0;l<k.features.getLength();l++){var m=k.features.getAt(l);if(m&&(m=m.getExtendedPropertyByName("highlights")))for(var q in m)if(m.hasOwnProperty(q)){var p=
(m[q]+"").trim();j.indexOf(p)==-1&&j.push(p)}}}b.addItems(j.map(function(a){return new e.infrastructure.search.SearchHintItem(a)}))}b=this._createFeatureSetArray(a);a=new e.infrastructure.FeatureSetCollection;for(f=0;f<b.length;f++)this._addFsToFsc(b[f],a);f=new e.infrastructure.eventArgs.SearchProgressEventArgs;f.status=e.infrastructure.search.Status.IDLE;f.message=this.app.getResource("Mapping","language-search-instant-provider-search-completed");f.results=a;f.searchType=this.SEARCH_TYPE_HINTS;
f.query=d.searchText;this._updateProgress(f)};b.prototype._onGetSearchHintsError=function(a,b,d){this.app.trace.warning("InstantSearchProvider: could not retrieve search hints.");b=new e.infrastructure.eventArgs.SearchProgressEventArgs;b.status=e.infrastructure.search.Status.ERROR;b.message=this.app.getResource("Mapping","language-search-error").format(a.message);b.searchType=this.SEARCH_TYPE_HINTS;b.query=d.searchText;this._updateProgress(b)};b.prototype._updateProgress=function(a){this.app.event("SearchProgressEvent").publish(a)};
b.prototype._createFeatureSetArray=function(a){var b=[];if(a&&!a.error)for(var d=0;d<a.results.length;d++){var f=a.results[d],j=new e.infrastructure.FeatureSet({esriFeatureSet:new esri.tasks.FeatureSet,layer:f.layer,app:this.app});dojo.forEach(f.features,function(a){var b=new e.infrastructure.Feature({graphic:a.esriFeature,layer:f.layer,resolveLayerFields:true});a.highlights&&b.setExtendedProperty("highlights",a.highlights);j.addFeature(b)});b.push(j)}return b};b.prototype._addFsToFsc=function(a,
b){var d=this;a&&a.esriFeatureSet&&a.esriFeatureSet.features.length!=0&&(a.resolveDataLinks(function(a){d.app.event("FeatureChangedEvent").publish(a)}),b.featureSets.addItem(a))};return b}(e.infrastructure.search.SearchProviderBase);f.InstantSearchProvider=i})(f.search||(f.search={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(f){function b(a,b){f.call(this,a,b);this.SEARCH_TYPE="ArcGIS";this._cancelFunction=null;this.name="Query";this.description="Search provider for querying map servers or feature servers.";this.isEnabled=true}__extends(b,f);b.prototype.initialize=function(a){f.prototype.initialize.call(this,a)};b.prototype.search=function(a,b){var f=this,b=b.trim();if(a)if(b)if(!this.app.site||!this.app.site.isInitialized)this._handleError(Error("The site needs to be initialized before a search is performed."),
a);else{this._cancelFunction&&this._cancelFunction();for(var j=false,i=0;i<this.app.site.essentialsMap.mapServices.length;i++)if(this.app.site.essentialsMap.mapServices[i].instantSearch){j=true;break}var k=this._getSearchableLayers();if(k.length==0)j||this._handleWarning(Error("No layers to search. Make sure you mark some layers as searchable in your site."),a,b);else{this.status=d.essentialsHtmlViewer.mapping.infrastructure.search.Status.SEARCHING;var l=false,s=0,m=new d.essentialsHtmlViewer.mapping.infrastructure.eventArgs.SearchProgressEventArgs;
m.results=a;m.error=null;m.message="";m.searchType=this.SEARCH_TYPE;m.query=b;m.status=this.status;this.app.event("SearchProgress").publish(m);this.app.event("SearchProgressEvent").publish(m);var q=function(b,g){if(!l)b.features.length>0&&f._addFsToFsc(b,g,a),s++,f.status=s===k.length?d.essentialsHtmlViewer.mapping.infrastructure.search.Status.IDLE:d.essentialsHtmlViewer.mapping.infrastructure.search.Status.SEARCHING,m.status=f.status,f.app.event("SearchProgress").publish(m),f.app.event("SearchProgressEvent").publish(m)},
p=function(b,g){if(!l){s++;if(s===k.length)f.status=d.essentialsHtmlViewer.mapping.infrastructure.search.Status.IDLE;f._handleError(b,a,g.displayName)}};this._cancelFunction=function(){if(!l)l=true,f._cancelFunction=null,f.status=d.essentialsHtmlViewer.mapping.infrastructure.search.Status.IDLE};k.forEach(function(a){e.infrastructure.gis.LayerInfo.fromGcxLayer(a).getFields().then(function(d){(d=f._getWhereClause(a,d,b))?f._searchLayer(a,d,q,p):s++},function(b){p(b,a)})})}}else this._handleError(Error("Cannot perform search without search text."),
a);else this._handleError(Error("Cannot perform search without a feature set collection."),a)};b.prototype._getSearchableLayers=function(){for(var a=this.app.site.essentialsMap.allLayers(),b=[],d=0;d<a.length;d++)a[d].mapService&&!a[d].mapService.instantSearch&&a[d].searchable&&this._layerTypeSupported(a[d])&&b.push(a[d]);return b};b.prototype._searchLayer=function(a,b,d,f){var j=new esri.tasks.Query;j.where=b;j.outFields=["*"];j.outSpatialReference=this.app.map.spatialReference;j.returnGeometry=
true;(new esri.tasks.QueryTask(e.infrastructure.taskUtils.getQueryTaskUrl(a))).execute(j,function(b){d(b,a)},function(b){f(b,a)})};b.prototype._addFsToFsc=function(a,b,e){var f=this;if(a&&a.features&&a.features.length>0)for(var j=0;j<a.features.length;j++)if(b.mapService&&b.mapService.serviceLayer)a.features[j]._graphicsLayer=b.mapService.serviceLayer;a=new d.essentialsHtmlViewer.mapping.infrastructure.FeatureSet({esriFeatureSet:a,layer:b,app:this.app});a.resolveDataLinks(function(a){f.app.event("FeatureChangedEvent").publish(a)});
e.featureSets.addItem(a)};b.prototype.cancelSearch=function(){this._cancelFunction&&this._cancelFunction()};b.prototype._getWhereClause=function(a,b,e){for(var f=e.match(/^\d+\.?\d*$/),j=e.toLowerCase(),i="",k=0;k<b.length;k++){var l=b[k];if(l.searchable&&l.name!=="gml:id")if(l.isCodedValueDomain()||l.hasSubtypeCodedValueDomains()){var m=[],q=l.getCodedValueDomain();q&&q.codedValues.forEach(function(a){return m.push(a)});var q=l.getSubtypeCodedValueDomains(),p;for(p in q)q.hasOwnProperty(p)&&q[p].codedValues.forEach(function(a){return m.push(a)});
m.forEach(function(a){a.name.toLowerCase().indexOf(j)>-1&&(i.length>0&&(i+=" OR "),i+=l.type===d.essentials.EsriFieldTypes.esriFieldTypeString?encodeURI(l.name)+" = '"+a.code.replace("'","''")+"'":encodeURI(l.name)+" = "+a.code)})}else switch(l.type){case d.essentials.EsriFieldTypes.esriFieldTypeString:i.length>0&&(i+=" OR ");i+=a.mapService.serviceLayer instanceof esri.layers.WMSLayer?encodeURI(l.name)+" LIKE '%"+j.replace("'","''")+"%'":"LOWER("+l.name+") LIKE '%"+j.replace("'","''")+"%'";break;
case d.essentials.EsriFieldTypes.esriFieldTypeSmallInteger:case d.essentials.EsriFieldTypes.esriFieldTypeInteger:case d.essentials.EsriFieldTypes.esriFieldTypeOID:case d.essentials.EsriFieldTypes.esriFieldTypeSingle:case d.essentials.EsriFieldTypes.esriFieldTypeDouble:if(!f)break;i.length>0&&(i+=" OR ");i+=encodeURI(l.name.toLowerCase())+" = "+e;break;case d.essentials.EsriFieldTypes.esriFieldTypeDate:break;case d.essentials.EsriFieldTypes.esriFieldTypeGlobalID:case d.essentials.EsriFieldTypes.esriFieldTypeBlob:break;
default:this.app.trace.warning("Unhandled layer data type: '{0}'. Field '{1}' in layer '{2}' has been excluded from search.".format(l.type,l.alias,a.displayName))}}(a=a.getDefinitionExpression(a.mapService.serviceLayer))&&(i="("+i+") AND ("+a+")");return i};b.prototype._layerTypeSupported=function(a){return!a||!a.mapService?false:a.mapService.mapServiceType===d.essentials.MapServiceType.DYNAMIC?true:a.mapService.mapServiceType===d.essentials.MapServiceType.TILED?true:a.mapService.mapServiceType===
d.essentials.MapServiceType.FEATURE?true:a.mapService.mapServiceType===d.essentials.MapServiceType.WMS?true:false};b.prototype._handleWarning=function(a,b,e,f){var e="Layer Search Provider"+(e?" ("+e+"): ":": ")+a.message,j=new d.essentialsHtmlViewer.mapping.infrastructure.eventArgs.SearchProgressEventArgs;j.results=b;j.status=d.essentialsHtmlViewer.mapping.infrastructure.search.Status.ERROR;j.error=a;j.message=e;j.searchType=this.SEARCH_TYPE;j.query=f;this.app.trace.warning(e);this.app.event("SearchProgress").publish(j);
this.app.event("SearchProgressEvent").publish(j)};b.prototype._handleError=function(a,b,e,f){var e="Layer Search Provider"+(e?" ("+e+"): ":": ")+a.message,j=new d.essentialsHtmlViewer.mapping.infrastructure.eventArgs.SearchProgressEventArgs;j.results=b;j.status=d.essentialsHtmlViewer.mapping.infrastructure.search.Status.ERROR;j.error=a;j.message=e;j.searchType=this.SEARCH_TYPE;j.query=f;this.app.trace.error(e);this.app.event("SearchProgress").publish(j);this.app.event("SearchProgressEvent").publish(j)};
return b}(d.essentialsHtmlViewer.mapping.infrastructure.search.SearchProviderBase);f.LayerQuerySearchProvider=i})(f.search||(f.search={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,b){d.call(this,a,b);this.enableSearchRefinement=new Observable(true);this.minimumPopulateDelay=300;this.consecutiveSearchDelay=1E4;this.delayConsecutiveSearches=false;this.minimumPrefixLength=3;this.searchText=new Observable("");this.enableUI=new Observable(false);this.expanded=new Observable(false);this.searchDisabled=false;this.searchHints=new ObservableCollection;if(this.app.site&&this.app.site.isInitialized)this._onSiteInitialized(this.app.site);
else this.app.event("SiteInitializedEvent").once(this,this._onSiteInitialized)}__extends(b,d);b.prototype.initialize=function(a){a&&a.hasOwnProperty("enableSearchRefinement")&&this.enableSearchRefinement.set(a.enableSearchRefinement);if(a&&a.hasOwnProperty("minimumPopulateDelay"))this.minimumPopulateDelay=parseInt(a.minimumPopulateDelay);if(a&&a.hasOwnProperty("minimumPrefixLength"))this.minimumPrefixLength=parseInt(a.minimumPrefixLength);if(a&&a.hasOwnProperty("consecutiveSearchDelay"))this.consecutiveSearchDelay=
parseInt(a.consecutiveSearchDelay);if(a&&a.hasOwnProperty("delayConsecutiveSearches"))this.delayConsecutiveSearches=a.delayConsecutiveSearches;this.app.command("EnableSearchRefinement").register(this,this._executeEnableSearchRefinementCommand)};b.prototype.clearSearchHints=function(){this.searchHints.clear()};b.prototype.updateSearchHints=function(a){this.clearSearchHints();this.app.searchManager.getSearchHints(this.searchHints,a)};b.prototype._onSiteInitialized=function(){this.enableUI.set(true)};
b.prototype._executeEnableSearchRefinementCommand=function(a){this.enableSearchRefinement.set(a||false)};return b}(d.framework.ui.ViewModelBase);e.SearchViewModel=f})(e.search||(e.search={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(d){function b(a,b){var f=this;d.call(this,a,b);this.app.command("FocusOnSearchHint").register(this,function(a){a===dojo.keys.DOWN_ARROW||a===dojo.keys.NUMPAD_2?e.infrastructure.FocusUtils.focus($(f.hintsList).find(".list-menu-button")[0]):(a===dojo.keys.UP_ARROW||a==dojo.keys.NUMPAD_8)&&e.infrastructure.FocusUtils.focus($(f.hintsList).find(".list-menu-button")[$(f.hintsList).find(".list-menu-button").length-1])})}__extends(b,
d);b.prototype.attach=function(a){var b=this;d.prototype.attach.call(this,a);this.viewModel&&this.viewModel.expanded.bind(this,function(a){b.app.command(a?"ActivateView":"DeactivateView").execute(b.id);a?(b.app.event("FlyoutActivated").publish(b),a={view:b,onOtherInteracted:function(a){return b._onOtherInteracted(a)}},b.app.command("TapToDismiss").execute(a)):b.app.event("FlyoutDeactivated").publish(b)})};b.prototype.handleHintClick=function(a,b,d){d&&d.plainText.get()&&(this._hideAutoComplete(),
this.viewModel.searchText.set(d.plainText.get()),this.app.command("GlobalSearch").execute(d.plainText.get()),this.app.event("SearchHintClickedEvent").publish(d))};b.prototype.handleRefineSearchClick=function(a,b,d){d&&d.plainText.get()&&(this._showAutoComplete(),this.viewModel.searchText.set(d.plainText.get()),this.viewModel.updateSearchHints(d.plainText.get()))};b.prototype.handleKeyDown=function(a){if($(document.activeElement).parent(".hints-list")&&[dojo.keys.DOWN_ARROW,dojo.keys.UP_ARROW,dojo.keys.NUMPAD_2,
dojo.keys.NUMPAD_8].indexOf(a.keyCode)>-1){for(var b=$(this.hintsList).find(".list-menu-button"),d=0,d=0;d<b.length;d++)if(b[d]===document.activeElement)break;if(a.keyCode===dojo.keys.DOWN_ARROW||a.keyCode===dojo.keys.NUMPAD_2)return e.infrastructure.FocusUtils.focus(b[++d]),false;else if(a.keyCode===dojo.keys.UP_ARROW||a.keyCode==dojo.keys.NUMPAD_8)return e.infrastructure.FocusUtils.focus(b[--d]),false}return true};b.prototype._showAutoComplete=function(){this.viewModel.expanded.set(true)};b.prototype._onOtherInteracted=
function(){this.viewModel.expanded.set(false)};b.prototype._hideAutoComplete=function(){this.viewModel.expanded.set(false)};return b}(d.framework.ui.ViewBase);f.SearchHintsView=i})(f.search||(f.search={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(){e.apply(this,arguments);this.autoLoadSiteGeocoders=true}__extends(b,e);b.prototype.initialize=function(a){a&&a.searchProviders&&this._loadProviders(a.searchProviders);if(a&&a.hasOwnProperty("autoLoadSiteGeocoders")&&a.autoLoadSiteGeocoders==false)this.autoLoadSiteGeocoders=false;if(this.autoLoadSiteGeocoders)if(this.app.site&&this.app.site.isInitialized)this._loadGeocoders();else this.app.event("SiteInitializedEvent").once(this,
this._loadGeocoders)};b.prototype._loadProviders=function(a){for(var b=0;b<a.length;b++){var d=a[b];d&&(d.libraryId&&!this.app.allLibrariesLoaded?this._loadProviderWhenLibrariesDownloaded(d):this._loadProvider(d))}};b.prototype._loadProviderWhenLibrariesDownloaded=function(a){var b=this,d=this.app.event("ViewerLibrariesDownloadedEvent").subscribe(this,function(){b.app.event("ViewerLibrariesDownloadedEvent").unsubscribe(d);b._loadProvider(a)})};b.prototype._loadProvider=function(a){var b=dojo.getObject(a.type);
if(b){b=new b(this.app,a.libraryId||this.libraryId);b.initialize(a.configuration);if(a.hasOwnProperty("enable"))b.isEnabled=a.enable;if(a.hasOwnProperty("name"))b.name=a.name;if(a.hasOwnProperty("description"))b.description=a.description;this.app.command("RegisterSearchProvider").execute(b)}};b.prototype._loadGeocoders=function(){if(this.app.site&&this.app.site.isInitialized&&this.app.site.geocodingEndpoints&&this.app.site.geocodingEndpoints.length>0)for(var a=0;a<this.app.site.geocodingEndpoints.length;a++){var b=
this.app.site.geocodingEndpoints[a];if(b.includeInGlobalSearch)if(b.geocoderType==d.essentials.GeocodingEndpointType.BING_GEOCODER){var e=new d.essentialsHtmlViewer.mapping.modules.search.BingGeocodeSearchProvider(this.app,this.libraryId);e.libraryId=this.libraryId;e.name=b.displayName;e.initialize({});e.bingMapsKey=b.bingProperties.bingMapsKey;if(b.bingProperties.culture)e.culture=b.bingProperties.culture;this.app.command("RegisterSearchProvider").execute(e)}else if(b.geocoderType==d.essentials.GeocodingEndpointType.ARCGIS_GEOCODER){var f=
new d.essentialsHtmlViewer.mapping.modules.search.ArcGisGeocodeSearchProvider(this.app,this.libraryId);f.libraryId=this.libraryId;f.locatorUrl=b.geocoderUrl;f.token=b.geocoderToken;f.name=b.displayName;f.parameters=b.parameters;f.globalSearchKey=b.globalSearchKey;f.minimumScore=70;f.initialize({});this.app.command("RegisterSearchProvider").execute(f);b.geocoderToken&&dojo.subscribe("ServiceTokenRefreshed",function(a){a.serviceUrl==f.locatorUrl&&f.updateToken(a.token)})}}};return b}(d.framework.application.ModuleBase);
e.SearchModule=f})(e.search||(e.search={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(f){function b(a,b){f.call(this,a,b);this._keyDownTimer=null}__extends(b,f);b.prototype.attach=function(a){var b=this;f.prototype.attach.call(this,a);if(this.viewModel)this._keyDownTimer=new d.framework.utils.TimeDelayedAction(this.viewModel.minimumPopulateDelay,this._requestSearchHints,this),this.app.event("FSMCollectionClosedEvent").subscribe(this,function(a){if(a.featureSetCollectionId==="SearchResultsCollection")$(b.inputElement).prop("disabled",
false),b.viewModel.searchDisabled=false}),this.app.event("SearchHintClickedEvent").subscribe(this,function(){return b._delayConsecutiveSearches()})};b.prototype.handleKeyDown=function(a,b){var d=a.which?a.which:a.keyCode;this._isUpOrDownKey(d)&&this.viewModel.searchHints.length()!==0&&this.app.command("FocusOnSearchHint").execute(d);if(this._isSpecialChar(d))return true;this._resetKeyDownTimer(d);if(d===dojo.keys.ENTER){if(this.viewModel.searchDisabled)return true;this._hideAutoComplete();this.app.command("GlobalSearch").execute(b.value);
this._delayConsecutiveSearches();a.preventDefault()}return true};b.prototype.handleSearchClick=function(){this._hideAutoComplete();var a=this.viewModel.searchText.get();a&&!this.viewModel.searchDisabled&&(this.app.command("GlobalSearch").execute(a),this._delayConsecutiveSearches())};b.prototype._delayConsecutiveSearches=function(){var a=this;if(this.viewModel.delayConsecutiveSearches)$(this.inputElement).prop("disabled",true),this.viewModel.searchDisabled=true,setTimeout(function(){$(a.inputElement).prop("disabled",
false);a.viewModel.searchDisabled=false},this.viewModel.consecutiveSearchDelay)};b.prototype.handleDoubleClick=function(){this._hideAutoComplete()};b.prototype._isSpecialChar=function(a){switch(a){case dojo.keys.TAB:case dojo.keys.SHIFT:case dojo.keys.CTRL:case dojo.keys.ALT:case dojo.keys.PAUSE:case dojo.keys.CAPS_LOCK:case dojo.keys.ESCAPE:case dojo.keys.PAGE_UP:case dojo.keys.PAGE_DOWN:case dojo.keys.END:case dojo.keys.HOME:case dojo.keys.LEFT_ARROW:case dojo.keys.UP_ARROW:case dojo.keys.RIGHT_ARROW:case dojo.keys.DOWN_ARROW:case dojo.keys.NUM_LOCK:case dojo.keys.SCROLL_LOCK:return true}return false};
b.prototype._isUpOrDownKey=function(a){switch(a){case dojo.keys.UP_ARROW:case dojo.keys.DOWN_ARROW:return true}return false};b.prototype._resetKeyDownTimer=function(a){this._keyDownTimer.stop();a!==dojo.keys.ENTER&&this._keyDownTimer.start()};b.prototype._requestSearchHints=function(){var a=this.viewModel,b=a.searchText.get();b===null||b.length<a.minimumPrefixLength||b.replace(/ /g,"")==""?(this._hideAutoComplete(),a.clearSearchHints()):(this._showAutoComplete(),a.updateSearchHints(b))};b.prototype._showAutoComplete=
function(){this.viewModel.expanded.set(true);e.infrastructure.FocusUtils.focus(this.inputElement)};b.prototype._hideAutoComplete=function(){this.viewModel.expanded.set(false)};return b}(d.framework.ui.ViewBase);f.SearchView=i})(f.search||(f.search={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,b){d.call(this,a,b);this.shareOptions={};this._urlToken="{ViewerUrl}"}__extends(b,d);b.prototype.initialize=function(a){var b=this;a.shareOptions&&a.shareOptions.forEach(function(a){if(a){var d=a.displayName,e=a.url,f=a.iconUri,a=a.id;d&&e&&f&&a&&(b.shareOptions[a]={displayName:new Observable(d),url:new Observable(e),iconUri:new Observable(f)})}});this._registerCommands()};b.prototype._registerCommands=
function(){var a=this;this.app.commandRegistry.command("ShareOn").register(this,function(b){var d=a.shareOptions[b];if(d){var e=a.app.getResource(a.libraryId,"language-share-share-on-prompt-content").format(d.displayName.get()),d=a.app.getResource(a.libraryId,"language-share-share-on-prompt-title").format(d.displayName.get());a.app.commandRegistry.command("Confirm").execute(e,d,function(d){d&&a._openUrl(a.shareOptions[b].url.get())})}},function(b){return!!a.shareOptions[b]});this.app.commandRegistry.command("GetShareOptions").register(this,
this._getShareOptions)};b.prototype._getShareOptions=function(a){a(this.shareOptions)};b.prototype._openUrl=function(a){var b=this;this.app.commandRegistry.command("HandleGenerateSharingLink").execute(function(d){d=encodeURIComponent(d);(d=a.replace(b._urlToken,d))&&d.toLowerCase().startsWith("mailto")&&b.app.configuration.mobileMode?window.open(d,"_top"):window.open(d,"_blank")})};return b}(d.framework.application.ModuleBase);e.ShareModule=f})(e.share||(e.share={}))})(e.modules||(e.modules={}))})(f.mapping||
(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,b){d.call(this,a,b);this.urlToken="{ViewerUrl}"}__extends(b,d);b.prototype.attach=function(a){var b=this;d.prototype.attach.call(this,a);this.app.commandRegistry.command("ShowShareView").register(this,function(){b.app.viewManager.activateView(b)},function(){return!!b.viewModel&&!!b.viewModel.shareOptions.get()&&b.viewModel.shareOptions.get().length>0})};b.prototype.handleClick=function(a,b,d){var e=this;
this.app.commandRegistry.command("HandleGenerateSharingLink").execute(function(a){a=encodeURIComponent(a);b.href=d.url.get().replace(e.urlToken,a)});return true};return b}(d.framework.ui.ViewBase);e.ShareView=f})(e.share||(e.share={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,b){d.call(this,a,b);this.shareOptions=new ObservableCollection}__extends(b,d);b.prototype.initialize=function(a){var b=this,d=[];if(a.shareOptionIds&&a.shareOptionIds.hasOwnProperty("length"))d=a.shareOptionIds;this.app.commandRegistry.command("GetShareOptions").execute(function(a){b._populateShareOptions(a,d)})};b.prototype._populateShareOptions=function(a,b){var d=this;if(b.length===0){var b=[],e;for(e in a)b.push(e)}b.forEach(function(b){(b=
a[b])&&d.shareOptions.addItem(b)})};return b}(d.framework.ui.ViewModelBase);e.ShareViewModel=f})(e.share||(e.share={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,b){var e=this;d.call(this,a,b);this._providers=[];this._intrinsicUrlParameters=["configBase","viewer","viewerConfigUri"];this._appInitialized=false;this.app.command("HandleGenerateSharingLink").register(this,this.handleGenerateSharingLink);dojo.connect(this.app,"initializationCompleteCallback",function(){return e.handleAppInitialize()})}__extends(b,d);b.prototype.initialize=function(a){d.prototype.initialize.call(this,
a);if(a){if(dojo.isArray(a.intrinsicUrlParameters))this._intrinsicUrlParameters=a.intrinsicUrlParameters;dojo.isArray(a.sharingLinkProviders)&&this._loadProviders(a.sharingLinkProviders)}};b.prototype.handleGenerateSharingLink=function(a){var b=window.location.href;b.indexOf("?")>-1&&(b=b.substring(0,b.indexOf("?")));for(var d=0;d<this._intrinsicUrlParameters.length;d++)this.app.getUrlParameter(this._intrinsicUrlParameters[d])&&(b+=b.indexOf("?")>-1?"&":"?",b+=encodeURIComponent(this._intrinsicUrlParameters[d])+
"=",b+=encodeURIComponent(this.app.getUrlParameter(this._intrinsicUrlParameters[d])));for(d=0;d<this._providers.length;d++){var e=this._providers[d];e.generateParameter&&(b+=b.indexOf("?")>-1?"&":"?",b+=encodeURIComponent(e.name)+"=",b+=encodeURIComponent(e.generate()))}a(b)};b.prototype.handleAppInitialize=function(){if(this.app&&this.app.urlParameters){this._providers.sort(function(a,b){return a.priority-b.priority});for(var a=0;a<this._providers.length;a++)this._applyProvider(this._providers[a]);
this._appInitialized=true}};b.prototype._applyProvider=function(a){if(a.acceptParameter){var b=this.app.getUrlParameter(a.name);try{a.apply(b)}catch(d){this.app.trace.warning("SharingLinkModule: Could not apply the url parameter '{0}={1}'".format(a.name,b))}}};b.prototype._loadProviders=function(a){for(var b=0;b<a.length;b++){var d=a[b];d&&(d.libraryId&&!this.app.allLibrariesLoaded?this._loadProvidersWhenLibrariesDownloaded(d):this._loadProvider(d))}};b.prototype._loadProvidersWhenLibrariesDownloaded=
function(a){var b=this;this.app.event("ViewerLibrariesDownloadedEvent").once(this,function(){var d=b._loadProvider(a);b._appInitialized&&b._applyProvider(d)})};b.prototype._loadProvider=function(a){var b=dojo.getObject(a.type);if(b){b=new b(this.app,a.libraryId||this.libraryId);b.acceptParameter=a.apply!==false;b.generateParameter=a.generate!==false;if(a.name)b.name=a.name;b.initialize(a.configuration||{});this._providers.push(b);return b}else this.app.trace.error(this.id+" can't find sharing link provider typed "+
a.type)};return b}(d.framework.application.ModuleBase);e.SharingLinkModule=f})(e.sharingLink||(e.sharingLink={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.framework.ui.ViewModelBase);e.CommonShellViewModel=f})(e.shells||(e.shells={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(){e.apply(this,arguments);this._waitForEsc=false;this._escTimer=null}__extends(b,e);b.prototype.attach=function(a){var b=this;e.prototype.attach.call(this,a);window&&dojo.connect(window,"onkeyup",this,this.handleKeyUp);this.app.event("ViewActivatedEvent").subscribe(this,function(a){a instanceof d.essentialsHtmlViewer.mapping.modules.map.MapView&&b.app.command("CloseModalRegion").execute()});this.handleiOSShellIssue()};
b.prototype.handleiOSShellIssue=function(){navigator.userAgent.match(/iPad;.*CPU.*OS 7_\d/i)&&!window.navigator.standalone&&$("html").addClass("ipad ios7")};b.prototype.handleKeyUp=function(a){var b=this;a.shiftKey===true&&a.keyCode===27?this._waitForEsc?(this._waitForEsc=false,this.app.command("ToggleLogView").execute()):(this._waitForEsc=true,this._escTimer=setTimeout(function(){b._waitForEsc=false},1E3)):a.ctrlKey===true&&a.shiftKey===true&&a.keyCode===192&&this.app.command("ToggleLogView").execute();
return true};b.prototype.scrollToTop=function(){window.scrollTo&&window.scrollTo(0,0)};b.prototype.handleCloseModalRegionClick=function(){this.app.modalRegionSingleton&&this.app.modalRegionSingleton.deactivateActiveView()};return b}(d.framework.ui.ViewBase);e.CommonShellView=f})(e.shells||(e.shells={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){(function(f){var j=function(b){function a(){b.apply(this,arguments);this.timeoutId=null;this.dataframeIsOpen=false;this.resizeDelay=300}__extends(a,b);a.prototype.attach=function(){var a=this;this.app.event("DataFrameOpenedEvent").subscribe(this,function(){$(a.buttonElement).removeClass("tab-closed");$(a.buttonElement).addClass("tab-open");a.isActive||a.app.command("ActivateView").execute(a.id);a.dataframeIsOpen=true});this.app.event("DataFrameClosedEvent").subscribe(this,
function(){$(a.buttonElement).removeClass("tab-open");$(a.buttonElement).addClass("tab-closed");a.dataframeIsOpen=false})};a.prototype.handleMouseDown=function(a){var b=this;if(!(a.button>1&&a.type==="mousedown")&&this.dataframeIsOpen)this.timeoutId=setTimeout(function(){b._resizeDataFrame(a.pageX,a.pageY)},this.resizeDelay)};a.prototype.handleTouchStart=function(a){var b=this,d=null;$(this.viewModel.currentView.root).is(":visible")?($(this.app.getHostElement()).one("touchend.dataframe-toggle-click",
function(){b.app.command("CloseDataFrame").execute();clearTimeout(d)}),d=setTimeout(function(){$(b.app.getHostElement()).off("touchend.dataframe-toggle-click");b._resizeDataFrame(a.targetTouches[0].pageX,a.targetTouches[0].pageY)},this.resizeDelay)):this.app.command("OpenDataFrame").execute()};a.prototype.handleOnClick=function(){this.app.command("ToggleDataFrame").execute();if(this.timeoutId)clearTimeout(this.timeoutId),this.timeoutId=null};a.prototype._resizeDataFrame=function(a,b){this.viewModel.currentView instanceof
e.infrastructure.ui.components.SmartPanel.SmartPanelView?this.viewModel.currentView.resizeSmartPanel(a,b):this.app.viewManager.getViewById("DataFrameViewContainer").resizeSmartPanel(a,b)};return a}(d.framework.ui.ViewBase);f.DataFrameButtonView=j})(f.components||(f.components={}))})(f.shells||(f.shells={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){var f=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.handleTap=function(){this.app.command("ToggleView").execute("NavBarSmallView");return false};return a}(d.framework.ui.ViewBase);e.NavButtonView=f})(e.components||(e.components={}))})(e.shells||(e.shells={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex=
{}));(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){var f=function(b){function a(){b.apply(this,arguments)}__extends(a,b);return a}(d.framework.ui.ViewModelBase);e.NavButtonViewModel=f})(e.components||(e.components={}))})(e.shells||(e.shells={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){var f=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.handleTapNavButton=function(a,b,d){this.app.command("DeactivateView").execute(this.id);this.app.command("ActivateView").execute(d.view.id)};a.prototype.handleTapSwitcherCloseButton=function(){this.app.command("DeactivateView").execute(this.id)};return a}(d.framework.ui.ViewBase);e.NavBarSmallView=f})(e.components||(e.components={}))})(e.shells||
(e.shells={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));(function(d){d=d.essentialsHtmlViewer||(d.essentialsHtmlViewer={});d=d.mapping||(d.mapping={});d=d.modules||(d.modules={});d=d.shells||(d.shells={});d=d.PanelPosition||(d.PanelPosition={});d[d.Minimized=0]="Minimized";d[d.Partial=1]="Partial";d[d.Maximized=2]="Maximized"})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this._resizeShell=true}__extends(b,d);b.prototype.attach=function(a){var b=this;d.prototype.attach.call(this,a);if(this.configuration&&this.configuration.resizeShell===false)this._resizeShell=false;this.app.event("ApplicationNativeReadyEvent").subscribe(this,function(){b._native=b.app.isNative.get()});if(!(this.configuration&&this.configuration.disableHideAddressBar===true)){var e=
this.root,a=navigator.userAgent;this._iphone=!(!~a.indexOf("iPhone")&&!~a.indexOf("iPod"));this._ipad=!!~a.indexOf("iPad");this._ios=this._iphone||this._ipad;this._native=this.app.isNative.get();this._fullscreen=window.navigator.standalone;this._android=!!~a.indexOf("Android");this._androidChrome=/Android.*Chrome/.test(a);this._androidFirefox=/Firefox/.test(a);this._androidWebkit=this._android&&/WebKit/.test(a);this._androidGecko=this._android&&/Gecko/.test(a);var f=0;window.onresize=function(){if(f!=
e.offsetWidth)b.app.command("RecenterMapOnNextMapResize").execute(),f=e.offsetWidth}}};b.prototype.resizeShell=function(){if(this._resizeShell&&this.screenRegionElement){var a=this._android&&!this._androidChrome&&!this._androidFirefox?window.outerHeight/window.devicePixelRatio:dojo.window.getBox().h,b=this._android&&!this._androidChrome&&!this._androidFirefox?window.outerWidth/window.devicePixelRatio:dojo.window.getBox().w,d=this.screenRegionElement;dojo.style(d,"height",a-50+"px");dojo.style(d,"width",
b+"px")}};return b}(d.essentialsHtmlViewer.mapping.modules.shells.CommonShellView);e.HandheldShellView=f})(e.shells||(e.shells={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(f){function b(){f.apply(this,arguments);this.cssClasses={maximized:"panel-maximized",partial:"panel-partial-height",minimized:"panel-minimized",hiddenDueToMaximization:"hidden-by-panel",screenRegionSlideUp:"slide-up-end",leftPanelOpen:"left-panel-open",leftPanelOpening:"left-panel-opening",leftPanelClosed:"left-panel-closed",leftPanelClosing:"left-panel-closing"};this._headerBarDeactivateAnimation=["header-active:0","header-inactive:0"];
this._headerBarActivateAnimation=["header-inactive:0","header-active:0"];this._leftPanelOpenAnimation=["left-panel-closed:0","left-panel-opening:0","left-panel-opened:300"];this._leftPanelCloseAnimation=["left-panel-opened:0","left-panel-closing:300","left-panel-closed:0"];this._topRightRegionActivateAnimation=["top-right-shell-region-closed:0","top-right-shell-region-opening","top-right-shell-region-opened:250"];this._topRightRegionDeactivateAnimation=["top-right-shell-region-opened:0","top-right-shell-region-closing:250",
"top-right-shell-region-closed:0"];this._navRegionActivateAnimation=["nav-region-closed:0","nav-region-opening:0","nav-region-opened:500"];this._navRegionDeactivateAnimation=["nav-region-opened:0","nav-region-closing:500","nav-region-closed:0"];this._domBreatheDelay=50;this._resizeSettleTimeoutMs=550;this._bottomPanelOpening=false;this._useCssTransitions=true;this._cssTransitionStyle="transition";this._cssTransitionEnd="transitionend";this._cssTransitionEndMap={WebkitTransition:"webkitTransitionEnd",
MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",msTransition:"MSTransitionEnd",transition:"transitionend"}}__extends(b,f);b.prototype.added=function(){var a=this;$(this.app.getHostElement()).addClass("shell-small");this._detectCssTransitions();this._shellDimensions=this._measureShellDimensions();this.app.event("ViewActivatedEvent").subscribe(this,this._handleViewActivated);this.app.event("ViewDeactivatedEvent").subscribe(this,this._handleViewDeactivated);this.app.event("RegionActivatedEvent").subscribe(this,
this._handleRegionActivated);this.app.event("RegionDeactivatedEvent").subscribe(this,this._handleRegionDeactivated);this.app.event("ApplicationResizedEvent").subscribe(this,this._resizeShellOnceSettled);this.app.event("ApplicationNativeReadyEvent").subscribe(this,this.resizeShell);this.app.command("ResizeShell").register(this,this.resizeShell);this.app.command("OpenDataFrame").register(this,function(){return a._openBottomPanel()});this.app.command("CloseDataFrame").register(this,function(){return a._closeBottomPanel()});
this.app.command("DataFrameRaise").register(this,function(){return a._rotateDataFramePosition(true,false)});this.app.command("DataFrameLower").register(this,function(){return a._rotateDataFramePosition(false,false)});this.app.command("DataFrameCyclePosition").register(this,function(){return a._rotateDataFramePosition()});this.app.event("ToolbarFlyoutDeactivatedEvent").subscribe(this,this._handleToolbarFlyoutDeactivatedEvent);$(window).on("scroll",function(){return a._resizeShellOnceSettled()});this._yield(function(){d.framework.ui.animation.create(a.bottomPanelRegionElement).add({transform:"translate(0px, {0}px)".format(a._shellDimensions.height),
duration:0}).play()})};b.prototype.resizeShell=function(a){var b=this;a===void 0&&(a=false);if(this.containerElement){var f=this._measureShellDimensions(),j,i;this._shellDimensions?(j=this._shellDimensions.width!==f.width,i=this._shellDimensions.height!==f.height):(this._shellDimensions=this._measureShellDimensions(),i=j=true);if(this._ios&&!this._native){var l=document.body.offsetHeight,n=window.innerHeight;Math.abs(window.orientation);n<l?($(this.containerElement).css({top:"{0}px".format(l-n)}),
$(this.navigationRegionElement).css({top:"{0}px".format(n)}),f.height=n,a=true):($(this.containerElement).css({top:"0px"}),$(this.navigationRegionElement).css({top:"{0}px".format(l)}),$("body").height(""),f.height=n)}if(a||j||i){this._shellDimensions=f;this.viewModel.headerHeight=$(this.headerRegionElement).height();if(!this.viewModel.headerHeight||isNaN(this.viewModel.headerHeight))this.viewModel.headerHeight=e.SmallShellViewModel.DEFAULT_HEADER_HEIGHT;if(i||a){switch(this.viewModel.bottomPanelPosition){case 0:case 1:this.viewModel.bottomPanelTargetHeight=
this.viewModel.config.bottomPanelHeightPercent*this._shellDimensions.height;break;case 2:this.viewModel.bottomPanelTargetHeight=this._shellDimensions.height+1}$(this.screenRegionElement).height(f.height-this.viewModel.headerHeight);$(this.containerElement).height(f.height)}if(j||i||a)setTimeout(scrollTo,1,0,0),this._yieldForDom(function(){b.app.command("MapResize").execute();b._setPanelVerticalOffset(null,b.viewModel.bottomPanelPosition);var a=b.app.viewManager.getRegionForViewId(b.id);b.app.event("ViewDimensionsChangedEvent").publish(new d.framework.events.ViewDimensionsChangedArgs(b,
a))})}}};b.prototype._oneTimePanelTransitionEvent=function(a){if(this._useCssTransitions)$(this.bottomPanelRegionElement).one(this._cssTransitionEnd,function(b){a(b)});else this._yield(a)};b.prototype._viewIsInBottomPanelRegion=function(a){return(a=this.app.viewManager.getRegionForViewId(a.id))&&a.name==="BottomPanelRegion"};b.prototype._handleViewActivated=function(a){this._bottomPanelOpening||this._viewIsInBottomPanelRegion(a)&&this.app.command("OpenDataFrame").execute()};b.prototype._handleViewDeactivated=
function(a){if(this.viewModel.config.closeBottomPanelWhenDeactivated.indexOf(a.id)!==-1)this._changeDataFramePosition(0);else if((a=this.app.viewManager.getRegionForViewId(a.id))&&!(a&&a.name!=="BottomPanelRegion")){var b=false;a.views.forEach(function(a){return b=a.isActive?true:b});b||this._changeDataFramePosition(0)}};b.prototype._handleRegionActivated=function(a){var b=this;switch(a.name){case "LeftPanelRegion":d.framework.ui.animation.play(this.leftPanelRegionElement,this._leftPanelOpenAnimation).then(function(){return b.app.event("LeftPanelOpenedEvent")});
$(this.leftPanelRegionElement).removeClass(this.cssClasses.leftPanelClosed);$(this.leftPanelRegionElement).removeClass(this.cssClasses.leftPanelClosing);break;case "TopRightShellRegion":d.framework.ui.animation.play(this.topRightShellRegionElement,this._topRightRegionActivateAnimation);break;case "SmallNavigationRegion":d.framework.ui.animation.play(this.navigationRegionElement,this._navRegionActivateAnimation).then(function(){return b.app.event("SmallNavigationPanelOpenedEvent")})}};b.prototype._handleRegionDeactivated=
function(a){var b=this;switch(a.name){case "LeftPanelRegion":d.framework.ui.animation.play(this.leftPanelRegionElement,this._leftPanelCloseAnimation).then(function(){return b.app.event("LeftPanelClosedEvent")});$(this.leftPanelRegionElement).removeClass(this.cssClasses.leftPanelOpen);$(this.leftPanelRegionElement).removeClass(this.cssClasses.leftPanelOpening);break;case "TopRightShellRegion":d.framework.ui.animation.play(this.topRightShellRegionElement,this._topRightRegionDeactivateAnimation);break;
case "SmallNavigationRegion":d.framework.ui.animation.play(this.navigationRegionElement,this._navRegionDeactivateAnimation).then(function(){return b.app.event("SmallNavigationPanelClosedEvent")})}};b.prototype._handleToolbarFlyoutDeactivatedEvent=function(a){var b=this;this.app.command("DeactivateView").execute(a);this._yield(function(){return b.app.command("CloseDataFrame").execute()})};b.prototype._yield=function(a){return setTimeout(a,0)};b.prototype._yieldForDom=function(a){return setTimeout(a,
this._domBreatheDelay)};b.prototype._panelIsOpen=function(){return this.viewModel.bottomPanelPosition===2||this.viewModel.bottomPanelPosition===1};b.prototype._openBottomPanel=function(){this._panelIsOpen()||(this.viewModel.config.openToMaximum?this._changeDataFramePosition(2):this._changeDataFramePosition(1))};b.prototype._closeBottomPanel=function(){this._panelIsOpen()&&this._changeDataFramePosition(0)};b.prototype._rotateDataFramePosition=function(a,b){a===void 0&&(a=true);b===void 0&&(b=true);
var d=[0,1,2],e=d.indexOf(this.viewModel.bottomPanelPosition),e=e===d.length-1?d[0]:e+1;a?this.viewModel.bottomPanelPosition===0?e=1:this.viewModel.bottomPanelPosition===1?e=2:this.viewModel.bottomPanelPosition===2&&(e=b?0:2):this.viewModel.bottomPanelPosition===2?e=1:this.viewModel.bottomPanelPosition===1?e=0:this.viewModel.bottomPanelPosition===0&&(e=b?2:0);this._changeDataFramePosition(e)};b.prototype._changeDataFramePosition=function(a,b){var e=this,f=this.viewModel.bottomPanelPosition;this.viewModel.bottomPanelPosition===
2&&this._setToolAndScreenRegionVisibility(true);this.viewModel.bottomPanelPosition=a;if(a===1)this.viewModel.bottomPanelTargetHeight=this._shellDimensions.height*this.viewModel.config.bottomPanelHeightPercent,$(this.bottomPanelRegionElement).height(this.viewModel.bottomPanelTargetHeight);else if(a===2)this.viewModel.bottomPanelTargetHeight=this._shellDimensions.height,$(this.bottomPanelRegionElement).height(this.viewModel.bottomPanelTargetHeight);var j=this._shellDimensions.height,i;a===2||a===1?
(i=100*this.viewModel.config.bottomPanelHeightPercent/2,i+=100*(this.viewModel.headerHeight/j),i*=-1):i=0;d.framework.ui.animation.create(this.screenRegionElement).add({transform:"translate(0px, {0}%)".format(i)}).play().then(function(){var a=e.app.viewManager.getRegionForViewId(e.id),a=new d.framework.events.ViewDimensionsChangedArgs(e,a);e.app.event("ViewDimensionsChangedEvent").publish(a);e.app.command("MapResize").execute()});this._setPanelVerticalOffset(f,a,function(){return e._handlePanelVerticalOffsetChanged(f,
b)})};b.prototype._handlePanelVerticalOffsetChanged=function(a,b){var d=this;this.viewModel.bottomPanelPosition===2&&this.viewModel.config.openToMaximum&&this._setToolAndScreenRegionVisibility(false);this.viewModel.bottomPanelPosition===2?(a===0&&this.app.event("DataFrameOpenedEvent").publish(),this.app.event("DataFrameMaximizedEvent").publish()):this.viewModel.bottomPanelPosition===1?this._yield(function(){return d.app.event("DataFrameOpenedEvent").publish()}):this._yield(function(){d.app.event("DataFrameClosedEvent").publish()});
b&&b()};b.prototype._setPanelVerticalOffset=function(a,b,e){var f=this,j=0;if(b===2)this.viewModel.bottomPanelTargetHeight=this._shellDimensions.height,j=-this.viewModel.headerHeight-2;else if(b===1)j=this._shellDimensions.height-this._shellDimensions.height*this.viewModel.config.bottomPanelHeightPercent,j-=this.viewModel.headerHeight;else if(b===0)j=this._shellDimensions.height;$(this.bottomPanelRegionElement).height(this.viewModel.bottomPanelTargetHeight);var i=this._cssClassForPanelPosition(b);
a!=null&&$(this.bottomPanelRegionElement).removeClass(this._cssClassForPanelPosition(a));a=d.framework.ui.animation.create(this.bottomPanelRegionElement);a.add({transform:"translate(0px, {0}px)".format(j)});a.play().then(function(){(b===1||b===2)&&$(f.bottomPanelRegionElement).removeClass(f.cssClasses.minimized);$(f.bottomPanelRegionElement).addClass(i);f._bottomPanelOpening=false}).then(function(){e&&f._yieldForDom(e)});this._bottomPanelOpening=true};b.prototype._cssClassForPanelPosition=function(a){return[this.cssClasses.minimized,
this.cssClasses.partial,this.cssClasses.maximized][[0,1,2].indexOf(a)]};b.prototype._setToolAndScreenRegionVisibility=function(a){a===void 0&&(a=true);if(this.viewModel.toolAndScreenRegionsHidden!==a){var b=[this.headerRegionElement,this.screenRegionElement];a?$(b).removeClass(this.cssClasses.hiddenDueToMaximization):$(b).addClass(this.cssClasses.hiddenDueToMaximization);this.viewModel.toolAndScreenRegionsHidden=a}};b.prototype._resizeShellOnceSettled=function(a){var b=this;a===void 0&&(a=false);
this._resizeSettleHandle&&clearTimeout(this._resizeSettleHandle);this._resizeSettleHandle=setTimeout(function(){b.resizeShell(a)},this._resizeSettleTimeoutMs)};b.prototype._detectCssTransitions=function(){(this._useCssTransitions=Modernizr.csstransitions)?(this._cssTransitionStyle=Modernizr.prefixed("transition"),(this._cssTransitionEnd=this._cssTransitionEndMap[this._cssTransitionStyle])?this.app.trace.debug("Detected CSS transitions using '{0}' and '{1}'.".format(this._cssTransitionStyle,this._cssTransitionEnd)):
(this._useCssTransitions=false,this.app.trace.debug("No CSS transition end event detected. Transitions will not be used."))):this.app.trace.debug("Support for CSS transitions was not detected.")};b.prototype._measureShellDimensions=function(){return{width:this._android&&!this._androidChrome&&!this._androidFirefox?window.outerWidth/window.devicePixelRatio:$(window).width(),height:this._android&&!this._androidChrome&&!this._androidFirefox?window.outerHeight/window.devicePixelRatio:$(window).height()}};
return b}(e.HandheldShellView);e.SmallShellView=f})(e.shells||(e.shells={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(d){function b(){d.apply(this,arguments);this.toolAndScreenRegionsHidden=false;this.bottomPanelTargetHeight=this.bottomPanelPosition=0;this.headerHeight=b.DEFAULT_HEADER_HEIGHT;this.closeBottomPanelWhenDeactivatedDefaults=["BookmarksView","GeolocateView"]}__extends(b,d);b.prototype.initialize=function(a){this.config={};if(a)this.config.openToMaximum=!!a.openToMaximum,this.config.bottomPanelHeightPercent=a.bottomPanelHeightPercent!==
void 0?a.bottomPanelHeightPercent:b.DEFAULT_BOTTOM_PANEL_HEIGHT_PERCENT,this.config.bottomPanelHeightPercent/=100,this.config.closeBottomPanelWhenDeactivated=a.closeBottomPanelWhenDeactivated||this.closeBottomPanelWhenDeactivatedDefaults};b.DEFAULT_HEADER_HEIGHT=43;b.DEFAULT_BOTTOM_PANEL_HEIGHT_PERCENT=75;return b}(d.CommonShellViewModel);d.SmallShellViewModel=e})(d.shells||(d.shells={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||
(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(){e.apply(this,arguments)}__extends(b,e);b.prototype.initialize=function(a){var b=this;if(a.hasOwnProperty("css"))for(var d=0;d<a.css.length;++d){var e=dojo.create("link",{rel:"stylesheet",href:a.css[d]});dojo.place(e,document.getElementsByTagName("head")[0],"last")}if(a.hasOwnProperty("homePanelVisible")&&a.homePanelVisible)this.app.event("SiteInitializedEvent").once(this,function(){setTimeout(function(){b.app.command("ActivateHomePanel").execute()},500)});
this.registerCommands();this.registerEvents()};b.prototype.registerCommands=function(){this.app.command("TapToDismiss").register(this,this._executeTapToDismiss)};b.prototype.registerEvents=function(){var a=this;this.app.event("FlyoutActivated").subscribe(this,function(){a.app.command("DisableMapClick").execute()});this.app.event("FlyoutDeactivated").subscribe(this,function(){a.app.command("EnableMapOnNextClick").execute()})};b.prototype._executeTapToDismiss=function(a){(!this.app.configuration.mobileMode||
!(a.view.id!=="IWantToMenuView"&&a.view.id!=="SearchHintsView"))&&d.framework.ui.utils.tapToDismissThis(a.view,a.onOtherInteracted,a.onElementInteracted)};return b}(d.framework.application.ModuleBase);e.ShellModule=f})(e.shells||(e.shells={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(){e.apply(this,arguments);this.dataFrameIsUserResized=new Observable(false);this.dataFrameOpenByDefault=new Observable(false);this.dataFrameIsOpen=new Observable(false);this.dataFrameHasViews=new Observable(false);this.canAutoOpenDataframe=new Observable(false);this.bottomRegionIsUserResized=new Observable(false);this.bottomRegionIsOpen=new Observable(false);this.bottomRegionIsMaximized=new Observable(false);
this.bottomRegionHasViews=new Observable(false);this.linkableModuleLoaded=new Observable(false);this.infoModuleLoaded=new Observable(false);this.layerListModuleLoaded=new Observable(false)}__extends(b,e);b.prototype.initialize=function(a){var g=this;this.config={};var e=function(a,b,g,e){var f=typeof a==="string"&&d.framework.utils.isPercentage(a),b=f?g:b,a=f?d.framework.utils.clamp(parseFloat(a),0,100):parseInt(a);a>=0&&(e[b]=a)};if(a){a.hasOwnProperty("minWidth")&&e(a.minWidth,"minWidth","minWidthPercent",
this.config);a.hasOwnProperty("maxWidth")&&e(a.maxWidth,"maxWidth","maxWidthPercent",this.config);a.hasOwnProperty("dataFrameWidth")&&e(a.dataFrameWidth,"dataFrameWidth","dataFrameWidthPercent",this.config);if(this.config.dataFrameWidth===0||this.config.dataFrameWidthPercent===0)if(d.framework.utils.isNullOrUndefined(this.config.minWidth)){if(!d.framework.utils.isNullOrUndefined(this.config.minWidthPercent))this.config.dataFrameWidthPercent=this.config.minWidthPercent,delete this.config.dataFrameWidth}else this.config.dataFrameWidth=
this.config.minWidth,delete this.config.dataFrameWidthPercent;a.hasOwnProperty("dataFrameOpenByDefault")&&this.dataFrameOpenByDefault.set(a.dataFrameOpenByDefault);a.hasOwnProperty("bottomRegionHeight")&&e(a.bottomRegionHeight,"bottomRegionHeight","bottomRegionHeightPercent",this.config)}this.minWidth=new d.framework.ui.LazyObservable(null,this._createLazyDelegateGetter(this.config.minWidth,this.config.minWidthPercent,b.DEFAULT_DATA_FRAME_MIN_WIDTH));this.maxWidth=new d.framework.ui.LazyObservable(null,
this._createLazyDelegateGetter(this.config.maxWidth,this.config.maxWidthPercent,b.DEFAULT_DATA_FRAME_MAX_WIDTH));this.dataFrameWidth=new d.framework.ui.LazyObservable(null,this._createLazyDelegateGetter(this.config.dataFrameWidth,this.config.dataFrameWidthPercent,b.DEFAULT_DATA_FRAME_WIDTH));this.bottomRegionHeight=new d.framework.ui.LazyObservable(null,this._createLazyDelegateGetter(this.config.bottomRegionHeight,this.config.bottomRegionHeightPercent,b.DEFAULT_BOTTOM_REGION_HEIGHT));this.app.event("SiteInitializedEvent").once(this,
function(){g.canAutoOpenDataframe.set(true);g.dataFrameOpenByDefault.get()&&g.app.command("OpenDataFrame").execute()});this.app.command("ActivateHomePanel").canExecuteChanged.subscribe(this,function(){g.infoModuleLoaded.set(g.app.command("ActivateHomePanel").canExecute());g.linkableModuleLoaded.set(g.infoModuleLoaded.get()||g.layerListModuleLoaded.get())});this.app.command("SwitchToLayerView").canExecuteChanged.subscribe(this,function(){g.layerListModuleLoaded.set(g.app.command("SwitchToLayerView").canExecute());
g.linkableModuleLoaded.set(g.infoModuleLoaded.get()||g.layerListModuleLoaded.get())})};b.prototype.getValue=function(a,b,e){return!d.framework.utils.isNullOrUndefined(a)?a:!d.framework.utils.isNullOrUndefined(b)?"{0}%".format(b):e};b.prototype._createLazyDelegateGetter=function(a,b,d){var e=this;return function(){return e.getValue(a,b,d)}};b.DEFAULT_DATA_FRAME_MIN_WIDTH=200;b.DEFAULT_DATA_FRAME_MAX_WIDTH=500;b.DEFAULT_DATA_FRAME_WIDTH=350;b.DEFAULT_BOTTOM_REGION_HEIGHT=400;return b}(d.framework.ui.ViewModelBase);
e.LargeShellViewModel=f})(e.shells||(e.shells={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(f){function b(a,b){var d=this;f.call(this,a,b);this.leftPanelView=this.dataFrameAwaitsViewModel=null;this.app.event("ViewActivatedEvent").subscribe(this,function(a){d.resizeAll();a.id==="MapView"&&d.scrollToTop();var b=d.app.viewManager.getRegionForViewId(a.id);if(b&&b.name==="LeftPanelRegion")d.viewModel.canAutoOpenDataframe.get()&&d.app.command("OpenDataFrame").execute(),d.leftPanelView=a;b&&b.name==="BottomPanelRegion"&&
d.viewModel.canAutoOpenDataframe.get()&&d.app.command("OpenResultsFrame").execute()});this.app.event("ViewDeactivatedEvent").subscribe(this,function(){d.resizeAll()});this.app.event("ApplicationResizedEvent").subscribe(this,function(){d.resizeAll()});this.app.command("ActivateView").register(this,function(a){(a=d.app.viewManager.getRegionForViewId(a))&&a.name==="LeftPanelRegion"&&d.viewModel.canAutoOpenDataframe.get()&&d.app.command("OpenDataFrame").execute();a&&a.name==="BottomPanelRegion"&&d.app.command("OpenBottomRegion").execute()});
this.app.command("OpenDataFrame").register(this,this._executeOpenLeftPanel);this.app.command("CloseDataFrame").register(this,this._executeCloseLeftPanel);this.app.command("ToggleDataFrame").register(this,this._executeToggleLeftPanel);this.app.command("OpenResultsFrame").register(this,this._executeOpenBottomRegion);this.app.command("CloseResultsFrame").register(this,this._executeCloseBottomRegion);this.app.command("ToggleResultsFrame").register(this,this._executeToggleBottomRegion);this.app.command("OpenBottomRegion").register(this,
this._executeOpenBottomRegion);this.app.command("CloseBottomRegion").register(this,this._executeCloseBottomRegion);this.app.event("RegionActivatedEvent").subscribe(this,function(a){a.name==="LeftPanelRegion"&&d.viewModel.canAutoOpenDataframe.get()&&d._activateDataRegion(true);a.name==="BottomPanelRegion"&&d._activateBottomRegion(true)});this.app.event("RegionDeactivatedEvent").subscribe(this,function(a){a.name==="LeftPanelRegion"&&d._activateDataRegion(false);a.name==="BottomPanelRegion"&&d._activateBottomRegion(false)});
this.app.event("WorkflowFormTextInputBlurredEvent").subscribe(this,function(){setTimeout(function(){d.scrollToTop();d.resizeAll()},100)});this.app.command("ResizeShell").register(this,function(){d.resizeAll()});this.app.event("PanelResizeEndEvent").subscribe(this,function(a){var b=d.app.viewManager.getViewById(a.viewId),b=b&&b.configuration&&b.configuration.resizableParentRegion?b.configuration.resizableParentRegion:null;b||(b=(a=d.app.viewManager.getRegionForViewId(a.viewId))&&a.name?a.name:null);
b==="LeftPanelRegion"&&(d.viewModel.dataFrameIsUserResized.set(true),d.viewModel.dataFrameWidth.set(d.leftRegionElement.clientWidth));b==="BottomPanelRegion"&&(d.viewModel.bottomRegionIsUserResized.set(true),d.viewModel.bottomRegionHeight.set(d.bottomRegionElement.clientHeight))})}__extends(b,f);b.prototype._activateDataRegion=function(a){typeof a==="boolean"&&(a?this._executeOpenLeftPanel():this._executeCloseLeftPanel())};b.prototype._activateBottomRegion=function(a){typeof a==="boolean"&&(a?this._executeOpenBottomRegion():
this._executeCloseBottomRegion(),this.viewModel&&this.viewModel.bottomRegionHasViews.set(a))};b.prototype.attach=function(a){$(this.app.getHostElement()).addClass("shell-large");f.prototype.attach.call(this,a);if(this.dataFrameAwaitsViewModel)this._activateDataRegion(true),this.dataFrameAwaitsViewModel=false,this.resizeAll();this._shellDimensions=this._shellDimensions||this._measureShellDimensions();a={"min-width":this._shellDimensions.width?this._toPixels(this.viewModel.minWidth.get(),this._shellDimensions.width):
e.LargeShellViewModel.DEFAULT_DATA_FRAME_MIN_WIDTH,"max-width":this._shellDimensions.width?this._toPixels(this.viewModel.maxWidth.get(),this._shellDimensions.width):e.LargeShellViewModel.DEFAULT_DATA_FRAME_MAX_WIDTH};$(this.leftRegionElement).css(a);this._subscribeEvents()};b.prototype._subscribeEvents=function(){var a=this;this.app.event("DataFrameOpenedEvent").subscribe(this,function(){a.leftPanelView?(a.app.trace.debug("View focused from dataframe opening: "+a.leftPanelView.id),a.app.command("FocusOnFirstInputInView").execute(a.leftPanelView)):
a.app.trace.warning("View not found when trying to focus on dataframe.")})};b.prototype.handleClickCloseDataFrame=function(){this.app.command("CloseDataFrame").execute()};b.prototype.handleClickDataRegionTab=function(){this.app.command("OpenDataFrame").execute()};b.prototype.resizeAll=function(){this.resizeShell();this.resizeScreenRegion()};b.prototype.resizeScreenRegion=function(){if(this.viewModel&&this.headerContainerElement&&this.screenRegionElement){if(this.centerElement){var a=this.centerElement;
setTimeout(function(){dojo.style(a,{display:"block"})},0)}this.app.command("MapResize").execute()}};b.prototype.resizeShell=function(){if(this.viewModel&&this.mainElement){this._shellDimensions=this._measureShellDimensions();var a=this.headerContainerElement?dojo.position(this.headerContainerElement):null,a=a?a.h:0,b=this.footerContainerElement?dojo.position(this.footerContainerElement):null,b=b?b.h:0,e=this._currentDataFrameWidth(),f=this._currentBottomRegionHeight(),j=Math.max(document.documentElement.clientHeight,
window.innerHeight||0);f>j-a&&(f=j-a,$(this.bottomElement).height(f));if(this.viewModel.dataFrameIsOpen.get())var j=parseInt($(this.leftRegionElement).css("min-width")),i=parseInt($(this.leftRegionElement).css("max-width")),e=d.framework.utils.clamp(e,j,i);this.viewModel.bottomRegionIsOpen.get()&&(j=parseInt($(this.bottomRegionElement).css("min-height")),i=parseInt($(this.bottomRegionElement).css("max-height")),f=d.framework.utils.clamp(f,j,i));dojo.style(this.mainElement,"top",a+"px");dojo.style(this.mainElement,
"bottom",b+"px");dojo.style(this.leftElement,"width",e+"px");dojo.style(this.leftRegionElement,"width",e+"px");dojo.style(this.centerElement,"left",e+"px");dojo.style(this.centerElement,"bottom",f+"px");dojo.style(this.bottomElement,"left",e+"px");dojo.style(this.bottomElement,"height",f+"px");dojo.style(this.bottomRegionElement,"height",f+"px");$(this.bottomRegionElement).attr("data-maximized")==="true"?$(this.bottomElement).addClass("maximized"):$(this.bottomElement).removeClass("maximized");(a=
this.app.viewManager.getExistingRegionByName("BottomPanelRegion"))&&a.activeViews.length===0&&$(this.bottomElement).removeClass("maximized")}};b.prototype._executeOpenLeftPanel=function(){if(this.viewModel){if(this.viewModel.dataFrameIsOpen.get()===false){this.viewModel.dataFrameIsOpen.set(true);if(this.leftElement){this.app.command("RecenterMapOnNextMapResize").execute();dojo.removeClass(this.leftElement,"panel-closed");dojo.addClass(this.leftElement,"panel-open");var a=this._currentDataFrameWidth();
$(this.leftRegionElement).width(a);this.resizeAll()}if(this.leftPanelView instanceof d.framework.ui.ViewContainer.ViewContainerView)a=this.leftPanelView,a.resize(),a.viewModel.currentView.resize&&a.viewModel.currentView.resize();this.app.event("DataFrameOpenedEvent").publish();this.app.event("ApplicationResizeEvent").publish();this.app.event("ApplicationResizedEvent").publish()}}else this.dataFrameAwaitsViewModel=true};b.prototype._executeCloseLeftPanel=function(){this.viewModel&&this.viewModel.dataFrameIsOpen.get()===
true&&(this.viewModel.dataFrameIsOpen.set(false),this.leftElement&&(this.app.command("RecenterMapOnNextMapResize").execute(),dojo.removeClass(this.leftElement,"panel-open"),dojo.addClass(this.leftElement,"panel-closed"),this.resizeAll()),this.app.event("DataFrameClosedEvent").publish(),this.app.event("ApplicationResizeEvent").publish(),this.app.event("ApplicationResizedEvent").publish())};b.prototype._executeToggleLeftPanel=function(){this.viewModel.dataFrameIsOpen.get()===false?this.app.command("OpenDataFrame").execute():
this.app.command("CloseDataFrame").execute()};b.prototype._executeOpenBottomRegion=function(){if(this.viewModel&&this.viewModel.bottomRegionIsOpen.get()===false){this.viewModel.bottomRegionIsOpen.set(true);if(this.bottomElement){this.app.command("RecenterMapOnNextMapResize").execute();dojo.removeClass(this.bottomElement,"panel-closed");dojo.addClass(this.bottomElement,"panel-open");var a=this._currentBottomRegionHeight();$(this.bottomRegionElement).height(a);this.resizeAll()}this.app.event("ResultsRegionOpenedEvent").publish();
this.app.event("ApplicationResizeEvent").publish();this.app.event("ApplicationResizedEvent").publish()}};b.prototype._executeCloseBottomRegion=function(){this.viewModel&&this.viewModel.bottomRegionIsOpen.get()===true&&(this.viewModel.bottomRegionIsOpen.set(false),this.bottomElement&&(this.app.command("RecenterMapOnNextMapResize").execute(),dojo.removeClass(this.bottomElement,"panel-open"),dojo.addClass(this.bottomElement,"panel-closed"),this.resizeAll()),this.app.event("ResultsRegionClosedEvent").publish(),
this.app.event("ApplicationResizeEvent").publish(),this.app.event("ApplicationResizedEvent").publish())};b.prototype._executeToggleBottomRegion=function(){this.viewModel.bottomRegionIsOpen.get()===false?this.app.command("OpenBottomRegion").execute():this.app.command("CloseBottomRegion").execute()};b.prototype._measureShellDimensions=function(){return{width:this.mainElement?$(this.mainElement).width():0,height:this.mainElement?$(this.mainElement).height():0}};b.prototype._currentDataFrameWidth=function(){if(this.viewModel.dataFrameIsOpen.get()===
false)return 0;this._shellDimensions=this._shellDimensions||this._measureShellDimensions();return this._toPixels(this.viewModel.dataFrameWidth.get(),this._shellDimensions.width)};b.prototype._currentBottomRegionHeight=function(){if(this.viewModel.bottomRegionIsOpen.get()===false)return 0;this._shellDimensions=this._shellDimensions||this._measureShellDimensions();return this._toPixels(this.viewModel.bottomRegionHeight.get(),this._shellDimensions.height)};b.prototype._toPixels=function(a,b){return typeof a===
"string"&&d.framework.utils.isPercentage(a)?parseFloat(a)*b/100:a};b.prototype.openLayerList=function(){this.app.command("ShowLayerList").execute()};b.prototype.openHomePanel=function(){this.app.command("ActivateHomePanel").execute()};return b}(d.essentialsHtmlViewer.mapping.modules.shells.CommonShellView);e.LargeShellView=f})(e.shells||(e.shells={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){(function(f){var j=function(b){function a(){b.apply(this,arguments);this.managedViewsOnly=true;this.panelIsOpen=new Observable(false);this.showingSmartBackButton=new Observable(false)}__extends(a,b);a.prototype.initialize=function(a){var d=this;b.prototype.initialize.call(this,a);this.app.event("DataFrameOpenedEvent").subscribe(this,function(){d.panelIsOpen.set(true)});this.app.event("DataFrameClosedEvent").subscribe(this,function(){d.panelIsOpen.set(false)})};
return a}(d.infrastructure.ui.components.SmartPanel.SmartPanelViewModel);f.ShellPanelViewModel=j})(f.components||(f.components={}))})(f.shells||(f.shells={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){(function(f){var j=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.added=function(a){var e=this;b.prototype.added.call(this,a);this._wireUpHammer();this.viewModel.titleBarIsVisible.set(true);this.app.event("ViewActivatedInContainerEvent").subscribe(this,function(a){if(a.regionName===e.viewModel.regionName.get())a instanceof d.framework.ui.ViewContainer.ViewContainerView?(e.activeContainer=a,e.viewModel.showingSmartBackButton.sync(e.activeContainer.viewModel.showingBackButton)):
(e.activeContainer=null,e.viewModel.showingSmartBackButton.set(false))})};a.prototype.deactivateContainer=function(){this._destroyHoistedMenuOwnerViewIfExists();this.app.command("CloseDataFrame").execute()};a.prototype.handleClickSmartBackButton=function(a,b){if(this.activeContainer){var d=this.activeContainer.viewModel&&this.activeContainer.viewModel.currentView,d=d&&d.viewModel&&d.viewModel.menuSourceView;this.activeContainer.handleClickBack(a,b,this.activeContainer.viewModel);d&&this.app.viewManager.activateView(d)}};
a.prototype.handleClickPanelNavButton=function(a,b,d){this.app.command("ActivateView").execute(d.view.id)};a.prototype.handleTapSizeButton=function(){this._destroyHoistedMenuOwnerViewIfExists();this.app.command("CloseDataFrame").execute()};a.prototype.handleClickMore=function(){this.app.command("ActivateView").execute("PrimaryViewSwitcherView")};a.prototype._wireUpHammer=function(){var a=this,b=new Hammer(this.headerElement,{});b.get("swipe").set({direction:Hammer.DIRECTION_ALL});b.on("swipe",function(b){if(b.isFinal)switch(b.direction){case Hammer.DIRECTION_UP:a.app.command("DataFrameRaise").execute();
break;case Hammer.DIRECTION_DOWN:a.app.command("CloseDataFrame").execute();break;case Hammer.DIRECTION_LEFT:a.app.command("ActivateView").execute("IWantToMenu")}})};return a}(e.infrastructure.ui.components.SmartPanel.SmartPanelView);f.ShellPanelView=j})(f.components||(f.components={}))})(f.shells||(f.shells={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(){function j(b,a){this._convertedSnappingGraphics=null;this._managedDynamicLayers=[];this._loadedDefaultLayers=[];this._snappingLayerInfos=[];this._paused=false;this._snappingManagerReference=null;this.app=b;this.libraryId=a;this.name="EsriSnappingProvider"}j.prototype.initialize=function(b){this.providerConfiguration=b;this._convertedSnappingGraphics=new esri.layers.GraphicsLayer;this._convertedSnappingGraphics.id="snapping_graphics";
this.app.map.addLayer(this._convertedSnappingGraphics);this._handleGraphicsLayer(this._convertedSnappingGraphics);this._listenForGraphicLayers()};j.prototype.activate=function(b){this._threshold=b;this.app.map.enableSnapping(this._getSnappingInitOptions());this._refreshDynamicSnappingData()};j.prototype._getSnappingInitOptions=function(){return{map:this.app.map,alwaysSnap:true,snapKey:-1,tolerance:this._threshold,snapPointSymbol:new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_PATH,
0,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color([0,0,0,0]),0),new esri.Color([0,0,0,0])),layerInfos:this._cloneLayerInfos()}};j.prototype._cloneLayerInfos=function(){var b=[];this._loadConfiguredDefaultGraphicsLayers();this._snappingLayerInfos.forEach(function(a){var d=new f.SnappingInfo(a.layer);d.snapToEdge=a.snapToEdge;d.snapToPoint=a.snapToPoint;d.snapToVertex=a.snapToVertex;b.push(a)});return b};j.prototype.deactivate=function(){this.app.map.disableSnapping();
this._convertedSnappingGraphics.clear();if(this._snappingManagerReference)this._snappingManagerReference.destroy(),this._snappingManagerReference=null};j.prototype._snappingWithinMap=function(b){var a=true;b.x<this._threshold?a=false:b.y<this._threshold?a=false:b.y>this.app.map.height-this._threshold?a=false:b.x>this.app.map.width-this._threshold&&(a=false);return a};j.prototype.provideSnappingPoint=function(b){var a=this;return new Promise(function(d,e){a._paused&&d(null);a._snappingWithinMap(b)?
(a.continueSnapping(),a.app.map.snappingManager.getSnappingPoint(b).then(function(a){a?d(a):d(null)},function(a){e(a)})):(a.pauseSnapping(),d(null))})};j.prototype.registerLayer=function(b,a){if(!b)throw Error("Must specify a layer for snapping.");return!b.snappable?(this.app.trace.warning("Cannot snap to layer {0}, must be set as snappable in REST Manager".format(b.displayName)),false):b.mapService.serviceLayer instanceof esri.layers.GraphicsLayer?(this._handleGraphicsLayer(b.mapService.serviceLayer,
a),this._refreshLayerInfos(),true):b.mapService.serviceLayer instanceof esri.layers.ArcGISDynamicMapServiceLayer?(this._handleDynamicLayer(b),true):(this.app.trace.warning("Cannot snap to layer {0}, must be of Graphic or Dynamic type".format(b.displayName)),false)};j.prototype.unregisterLayer=function(b){b.mapService.serviceLayer instanceof esri.layers.GraphicsLayer?this._handleRemoveGraphicsLayer(b.mapService.serviceLayer):b.mapService.serviceLayer instanceof esri.layers.ArcGISDynamicMapServiceLayer&&
this._handleRemoveDynamicLayer(b);this._refreshLayerInfos()};j.prototype.getSnappableLayers=function(b){b=b.mapInfo.getLayerInfos().filter(function(a){return a.gcxLayer.snappable});return b=d.essentialsHtmlViewer.mapping.infrastructure.ArrayUtils.sortBy(b,function(a){return a.displayName})};j.prototype.continueSnapping=function(){if(this._snappingManagerReference&&!this.app.map.snappingManager&&this._paused)this.app.map.enableSnapping(this._snappingManagerReference),this._snappingManagerReference=
null;this.app.map.snappingManager&&this._paused&&(this.app.map.snappingManager._killOffSnapping(),this.app.map.snappingManager._setUpSnapping(),this.app.map.snappingManager._activateSnapping(),this.app.map.snappingManager._startSelectionLayerQuery(),this._refreshLayerInfos());this._paused=false};j.prototype.pauseSnapping=function(){if(this.app.map.snappingManager)this.app.map.snappingManager._killOffSnapping(),this.app.map.snappingManager._deactivateSnapping(),this.app.map.snappingManager._stopSelectionLayerQuery(),
this._snappingManagerReference=this.app.map.snappingManager,this.app.map.snappingManager=null;this._paused=true};j.prototype._isLayerVisible=function(b){if(!b.isVisible())return false;if(b.maxScale!==null&&b.maxScale!==void 0&&b.minScale!==null&&b.minScale!==void 0){var a=this.app.map.getScale();if(a<b.maxScale||a>b.minScale)return false}return true};j.prototype._handleGraphicsLayer=function(b,a){this._removeInfo(b);this.app.trace.debug("[EsriSnappingProvider] Graphics Layer handled {0}".format(b.id));
var d=new f.SnappingInfo(b);if(a)d.snapToEdge=a.edge,d.snapToPoint=a.point,d.snapToVertex=a.vertex;this._snappingLayerInfos.push(d);this._refreshLayerInfos()};j.prototype._listenForGraphicLayers=function(){var b=this;this.app.map.on("layer-add-result",function(a){a&&a.layer&&a.layer instanceof esri.layers.GraphicsLayer&&b._loadConfiguredDefaultGraphicsLayers()})};j.prototype._refreshLayerInfos=function(){this.app.map.snappingManager&&this.app.map.snappingManager.setLayerInfos(this._cloneLayerInfos())};
j.prototype._handleRemoveGraphicsLayer=function(b){this._removeInfo(b)};j.prototype._handleDynamicLayer=function(b){this._managedDynamicLayers.indexOf(b)<0&&(this._managedDynamicLayers.push(b),this._refreshDynamicSnappingData())};j.prototype._handleRemoveDynamicLayer=function(b){b=this._managedDynamicLayers.indexOf(b);b>-1&&(this._managedDynamicLayers.splice(b,1),this._refreshDynamicSnappingData())};j.prototype._refreshDynamicSnappingData=function(){this.loadForExtent(this.app.map.extent)};j.prototype._removeInfo=
function(b){for(var a=0;a<this._snappingLayerInfos.length;a++)if(this._snappingLayerInfos[a].layer===b){this._snappingLayerInfos.splice(a,1);break}};j.prototype.loadForExtent=function(b){var a=this;this._convertedSnappingGraphics.clear();for(var d=[],f=0;f<this._managedDynamicLayers.length;f++)this._isLayerVisible(this._managedDynamicLayers[f])&&d.push(this._managedDynamicLayers[f]);for(f=0;f<d.length;f++){var j=d[f];if(j){var i=new esri.tasks.Query;i.geometry=b;i.outSpatialReference=this.app.map.spatialReference;
i.returnGeometry=true;(new esri.tasks.QueryTask(e.infrastructure.taskUtils.getQueryTaskUrl(j))).execute(i,function(b){a._queryCompleted(b,j)},function(b){a._queryError(b)})}}};j.prototype._queryCompleted=function(b){if(b&&b.features)for(var a=0;a<b.features.length;a++){var d=b.features[a];d&&this._convertedSnappingGraphics.add(d)}};j.prototype._queryError=function(b){this.app.trace.error("An error occured while downloading snapping points: {0}".format(b&&b.message?b.message:"Undetermined cause"))};
j.prototype._loadConfiguredDefaultGraphicsLayers=function(){var b=this;this.providerConfiguration&&this.providerConfiguration.configuration&&this.providerConfiguration.configuration.graphicsLayers&&this.providerConfiguration.configuration.graphicsLayers.forEach(function(a){if((a=b.app.map.getLayer(a))&&a instanceof esri.layers.GraphicsLayer&&b._loadedDefaultLayers.indexOf(a)<0)b._loadedDefaultLayers.push(a),b._handleGraphicsLayer(a)})};return j}();f.EsriSnappingProvider=i})(f.snapping||(f.snapping=
{}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){function d(b,a){this.app=b;this.snappingModule=a;this._registerApplicationCommands()}d.prototype._registerApplicationCommands=function(){this.app.command("EnableAllLayersForSnapping").register(this,this._executeEnableAllLayersForSnapping);this.app.command("DisableAllLayersForSnapping").register(this,this._executeDisableAllLayersForSnapping);this.app.command("EnableLayerForSnapping").register(this,this._executeEnableLayerForSnapping);
this.app.command("DisableLayerForSnapping").register(this,this._executeDisableLayerForSnapping)};d.prototype._executeEnableLayerForSnapping=function(b){this.app.command("RegisterSnappingLayer").execute(b)};d.prototype._executeEnableAllLayersForSnapping=function(b){this.app.command("RegisterSnappingLayers").execute(b)};d.prototype._executeDisableLayerForSnapping=function(b){this.app.command("RemoveSnappingLayer").execute(b)};d.prototype._executeDisableAllLayersForSnapping=function(b){this.app.command("RemoveSnappingLayers").execute(b)};
return d}();d.LayerSelectorForSnapping=e})(d.snapping||(d.snapping={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){return function(d){this.snapToVertex=this.snapToPoint=this.snapToEdge=true;this.layer=d}}();d.SnappingInfo=e})(d.snapping||(d.snapping={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(d){function b(){d.apply(this,arguments);this._inputThrottleDelay=1E3/60;this._timer=this._originSnapPoint=this._originPoint=null;this._mouseInsideMapBounds=false;this._snapSymbol=null;this._canSnap=false;this._supportedDrawModes=[];this._accessibleMode=this._enabled=false;this._toggleKey=this._tempEditingLayer=this._graphicsLayer=null;this._supressNextDeactivatedEvent=this._isEditing=false;this._esriEditVertexMovedToken=
this._vertexHandleHiddenToken=this._vertexHandleShownToken=this._editVertexMoveToken=this._vertexMovedToken=this._graphicDrawToken=this._onKeyDown=this._panEndToken=this._mouseOverToken=this._extentChangedToken=this._mouseMoveToken=this._toolbar=this._dummyGraphic=this._currentEditingGraphic=this._graphicEditingLayerRef=null;this._defaultRadiusBorderColor="#000000";this._defaultSnappingPointColor=this._defaultPointColor=this._defaultHoverColor="#ffffff";this._defaultHoverOpacity=0.2;this._defaultPointSize=
5;this._defaultBorderSize=1;this._defaultThreshold=25;this._defaultCancelKey=70}__extends(b,d);b.prototype.initialize=function(a){var b=this;d.prototype.initialize.call(this,a);this._toggleKey=!isNaN(parseInt(this.configuration.toggleKey+""))?parseInt(this.configuration.toggleKey+""):this._defaultCancelKey;this._threshold=!isNaN(parseInt(this.configuration.threshold))?parseInt(this.configuration.threshold):this._defaultThreshold;this.layerSelectorForSnapping=new f.LayerSelectorForSnapping(this.app,
this);this.app.event("SiteServiceLayersLoadedEvent").subscribe(this,function(){b._initializeSnappingManager();b._subscribeToMapEvents()});if(this.configuration.supportedDrawModes)this._supportedDrawModes=this.configuration.supportedDrawModes;var a=(new esri.Color(this.configuration.radiusFillColor?this.configuration.radiusFillColor:this._defaultHoverColor)).toRgba(),e=!isNaN(parseFloat(this.configuration.radiusFillOpacity))?parseFloat(this.configuration.radiusFillOpacity):this._defaultHoverOpacity;
a[3]=e;var a=new esri.Color(a),e=this.configuration.pointColor?this.configuration.pointColor:this._defaultPointColor,i=!isNaN(parseInt(this.configuration.pointSize))?parseInt(this.configuration.pointSize):this._defaultPointSize;this._snapSymbol=new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,i,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color(e),1),new esri.Color(e));e=!isNaN(parseInt(this.configuration.radiusBorderSize))?parseInt(this.configuration.radiusBorderSize):
this._defaultBorderSize;i=this.configuration.radiusBorderColor?this.configuration.radiusBorderColor:this._defaultRadiusBorderColor;this._hoverGraphic=new esri.Graphic;this._hoverGraphic.setSymbol(new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,this._threshold*2,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color(i),e),a));this._snapGraphic=new esri.Graphic;this._snapGraphic.setSymbol(this._snapSymbol);this._registerApplicationCommands();
this._subscribeToApplicationEvents();if(this.app.map&&this.app.map.loaded)this._addKeyHandlers();else this.app.event("MapLoadedEvent").once(this,function(){b._addKeyHandlers()})};b.prototype._registerApplicationCommands=function(){this.app.command("ActivateSnapping").register(this,this._executeActivateSnapping,this._canExecuteSnapping);this.app.command("DeactivateSnapping").register(this,this._executeDeactivateSnapping,this._canExecuteSnapping);this.app.command("RegisterSnappingLayer").register(this,
this._executeRegisterSnappingLayer);this.app.command("RegisterSnappingLayers").register(this,this._executeRegisterSnappingLayers);this.app.command("RemoveSnappingLayer").register(this,this._executeUnregisterSnappingLayer);this.app.command("RemoveSnappingLayers").register(this,this._executeUnregisterSnappingLayers)};b.prototype._subscribeToApplicationEvents=function(){var a=this;this.app.event("ActiveToolChangedEvent").subscribe(this,this._handleActiveToolChanged);this.app.event("GraphicDrawActivatedEvent").subscribe(this,
function(b){a._handleGraphicDrawActivatedEvent(b)});this.app.event("GraphicDrawDeactivatedEvent").subscribe(this,function(b){a._handleDrawDeactivatedEvent(b)});this.app.event("GraphicEditActivatedEvent").subscribe(this,function(b){a._canSnap=true;a._handleEditBegin();a._subscribeMouseEvents();a._supressNextDeactivatedEvent=true;a._currentEditingGraphic=b.graphic;a._dummyGraphic=new esri.Graphic;a._toolbar=b.sender;a._graphicEditingLayerRef=b.graphic.getLayer();a._enabled&&a._moveEditingGraphicToTempLayer()});
this.app.event("GraphicEditDeactivatedEvent").subscribe(this,function(){a._canSnap=false;a._handleEditEnd();a._supressNextDeactivatedEvent=false;if(a._currentEditingGraphic)a._returnEditingGraphicToOwner(false),a._currentEditingGraphic=null,a._graphicEditingLayerRef=null,a._dummyGraphic=null,a._toolbar=null,a.app.trace.debug("[SnappingModule]: Graphic editing context cleaned up")});this.app.event("GraphicDrawAccessibleEditActivatedEvent").subscribe(this,function(){a._canSnap=true;a._handleEditBegin()});
this.app.event("GraphicDrawAccessibleEditDeactivatedEvent").subscribe(this,function(){a._supressNextDeactivatedEvent?a._supressNextDeactivatedEvent=false:(a._canSnap=false,a._handleEditEnd())});this.app.event("InputMethodChangedEvent").subscribe(this,function(b){var d=false;b.newMethod===e.infrastructure.accessibility.InputMethod.KEYBOARD&&(d=true);a._accessibleMode!==d&&a._hideSnappingGraphics();a._accessibleMode=d;a._subscribeToUIEvents()})};b.prototype._initializeSnappingManager=function(){this._graphicsLayer=
new esri.layers.GraphicsLayer;this._graphicsLayer.id="snapping_helper_graphics";this.app.map.addLayer(this._graphicsLayer);this._graphicsLayer.add(this._hoverGraphic);this._graphicsLayer.add(this._snapGraphic);this._hideSnappingGraphics();var a=this.configuration.snappingProvider;a&&(a.libraryId&&!this.app.allLibrariesLoaded?this._loadProviderWhenLibrariesDownloaded(a):this._loadProvider(a))};b.prototype._subscribeToMapEvents=function(){var a=this;this.app.map.on("layer-add-result",function(){a.app.map.reorderLayer(a._graphicsLayer,
a.app.map.graphicsLayerIds.length)})};b.prototype._loadProviderWhenLibrariesDownloaded=function(a){var b=this;this.app.event("ViewerLibrariesDownloadedEvent").once(this,function(){return b._loadProvider(a)})};b.prototype._loadProvider=function(a){var b=dojo.getObject(a.type);b&&(b=new b(this.app,a.libraryId||this.libraryId),b.initialize(a),this._registerSnappingProvider(b))};b.prototype._subscribeMouseEvents=function(){window.PointerEvent?this._addPointerMove():this._addMouseMove();this._addMouseLeave();
this._addMouseOver()};b.prototype._removeMouseEvents=function(){this._removeEventListener(this.app.map.root,"pointermove",this._handlePointerMove);this._removeEsriHandle(this._mouseOverToken);this._removeEsriHandle(this._mouseMoveToken);this._removeJQueryHandle(this._mouseLeaveToken)};b.prototype._handleEditBegin=function(){var a=this;this._handleEditEnd();this._editVertexMoveToken=this.app.event("EditVertexMovedEvent").subscribe(this,function(b){a._mouseInsideMapBounds=true;a._handleInputMove(b)});
this._vertexHandleShownToken=this.app.event("VertexHandleShownEvent").subscribe(this,function(){a._hideSnappingGraphics();a._removeMouseEvents()});this._vertexHandleHiddenToken=this.app.event("VertexHandleHiddenEvent").subscribe(this,function(){a._hideSnappingGraphics();a._subscribeMouseEvents()});this._esriEditVertexMovedToken=this.app.event("EditVertexHandleMovedEvent").subscribe(this,function(b){if(b&&b.geometry&&b.geometry instanceof esri.geometry.Point&&(a._mouseInsideMapBounds=true,!a._timer))a._timer=
setTimeout(function(){var d=b.getShape(),e=d.matrix.dx,d=d.matrix.dy,e=a.app.map.toScreen(b.geometry).offset(e,d),e={mapPoint:a.app.map.toMap(e),screenPoint:e};a._handleInputMove(e);a._clearTimeout()},a._inputThrottleDelay)});this._isEditing=true};b.prototype._handleEditEnd=function(){this._hideSnappingGraphics();this._removeGcxHandle("EditVertexMovedEvent",this._editVertexMoveToken);this._removeGcxHandle("VertexHandleShownEvent",this._vertexHandleShownToken);this._removeGcxHandle("VertexHandleHiddenEvent",
this._vertexHandleHiddenToken);this._removeGcxHandle("EditVertexHandleMovedEvent",this._esriEditVertexMovedToken);this._isEditing=false;this.snappingProvider.pauseSnapping()};b.prototype._subscribeAccessibilityEvents=function(){this._addVertexMoved()};b.prototype._removeAccessibilityEvents=function(){this._removeGcxHandle("GraphicVertexMovedEvent",this._vertexMovedToken)};b.prototype._handleGraphicDrawActivatedEvent=function(a){a=a.geometryType;if(a===esri.toolbars.Draw.MULTI_POINT)a=e.infrastructure.tools.DrawMode.MULTI_POINT;
a&&this._drawModeSupported(a)?(this._canSnap=true,this.snappingProvider.continueSnapping()):(this._canSnap=false,this.snappingProvider.pauseSnapping())};b.prototype._handleDrawDeactivatedEvent=function(){this._canSnap=false;this.snappingProvider.pauseSnapping()};b.prototype._handleActiveToolChanged=function(a){!a||!a.tool||!(a.tool instanceof e.infrastructure.tools.MapTool)?this._canSnap=false:(a=a.tool,a.command==="EditMarkup"||a.command==="DeleteMarkup"?this._canSnap=false:this._drawModeSupported(a.drawMode)?
(this._canSnap=true,this.snappingProvider.continueSnapping()):(this._canSnap=false,this.snappingProvider.pauseSnapping()))};b.prototype._drawModeSupported=function(a){return this._supportedDrawModes.indexOf(a?a.toUpperCase():a)>-1?true:false};b.prototype._registerSnappingProvider=function(a){this.snappingProvider=a;this.app.command("ActivateSnapping").raiseCanExecuteChanged();this.app.event("SnappingProviderRegistered").publish(this.snappingProvider)};b.prototype._subscribeToUIEvents=function(){if(this._enabled)this._accessibleMode?
(this._subscribeAccessibilityEvents(),this._removeMouseEvents(),this._mouseInsideMapBounds=true):(this._subscribeMouseEvents(),this._removeAccessibilityEvents()),this._addMapStateChangedEvents()};b.prototype._executeActivateSnapping=function(){this._executeDeactivateSnapping();this._enabled=true;this.snappingProvider.activate(this._threshold);this._canSnap&&(this.snappingProvider.pauseSnapping(),this.snappingProvider.continueSnapping());this._subscribeToUIEvents();this.app.command("ScreenReaderNarrate").execute(this.app.getResource(this.libraryId,
"language-snapping-activated"));this._isEditing&&(this.app.trace.debug("[SnappingModule]: Snapping enabled mid-edit"),this._handleEditBegin(),this._subscribeMouseEvents(),this._currentEditingGraphic&&this._moveEditingGraphicToTempLayer())};b.prototype._canExecuteSnapping=function(){if(this._canSnap)return true;if(!(this.app.toolRegistry.getActiveTool()instanceof e.infrastructure.tools.MapTool))return false;var a=this.app.toolRegistry.getActiveTool();return this.snappingProvider&&this._drawModeSupported(a.drawMode)?
true:false};b.prototype._executeDeactivateSnapping=function(){this._enabled&&this.app.command("ScreenReaderNarrate").execute(this.app.getResource(this.libraryId,"language-snapping-deactivated"));this._enabled=false;this.snappingProvider.deactivate();this._killOffSnapping();this._hideSnappingGraphics();this._raiseSnappingInputMovedEvent(null,null);e.infrastructure.FocusUtils.focusOnMap(this.app.map);this._currentEditingGraphic&&this._returnEditingGraphicToOwner()};b.prototype._executeRegisterSnappingLayers=
function(a){var b=this;a.forEach(function(a){b._readerLayerRegisterWrapper(a)})};b.prototype._executeRegisterSnappingLayer=function(a){this._readerLayerRegisterWrapper(a)};b.prototype._executeUnregisterSnappingLayer=function(a){this._readerLayerUnregisterWrapper(a)};b.prototype._executeUnregisterSnappingLayers=function(a){var b=this;a.forEach(function(a){b._readerLayerUnregisterWrapper(a)})};b.prototype._readerLayerRegisterWrapper=function(a){this.snappingProvider.registerLayer(a)&&this.app.command("ScreenReaderNarrate").execute(this.app.getResource(this.libraryId,
"language-snapping-layer-registered").format(a.displayName))};b.prototype._readerLayerUnregisterWrapper=function(a){this.snappingProvider.unregisterLayer(a);this.app.command("ScreenReaderNarrate").execute(this.app.getResource(this.libraryId,"language-snapping-layer-unregistered").format(a.displayName))};b.prototype._clearTimeout=function(){if(this._timer)clearTimeout(this._timer),this._timer=null};b.prototype._addVertexMoved=function(){var a=this;this._removeGcxHandle("GraphicVertexMovedEvent",this._vertexMovedToken);
this._vertexMovedToken=this.app.event("GraphicVertexMovedEvent").subscribe(this,function(b){a._handleInputMove(b)})};b.prototype._addMouseLeave=function(){var a=this;this._removeJQueryHandle(this._mouseLeaveToken);this._mouseLeaveToken=$(this.app.map.root).mouseleave(function(){a._clearTimeout();a._hideSnappingGraphics();a.snappingProvider.pauseSnapping();a._mouseInsideMapBounds=false})};b.prototype._addPointerMove=function(){var a=this;this._removeEventListener(this.app.map.root,"pointermove",this._handlePointerMove);
this._addEventListener(this.app.map.root,"pointermove",function(b){a._handlePointerMove(b)})};b.prototype._handlePointerMove=function(a){var b=this;if(a&&!this._timer)this._timer=setTimeout(function(){var d=a.clientX-b.app.map.root.getBoundingClientRect().left,e=a.clientY-b.app.map.root.getBoundingClientRect().top,d=b.app.map.toMap(new esri.geometry.ScreenPoint(d,e)),d={mapPoint:d,screenPoint:b.app.map.toScreen(d)};b._handleInputMove(d);b._clearTimeout()},this._inputThrottleDelay)};b.prototype._addMouseOver=
function(){var a=this;this._removeEsriHandle(this._mouseOverToken);this._mouseOverToken=this.app.map.on("mouse-over",function(b){a._mouseInsideMapBounds=true;if(!a._timer)a._timer=setTimeout(function(){a._handleInputMove(b);a._clearTimeout()},a._inputThrottleDelay)})};b.prototype._addMouseMove=function(){var a=this;this._removeEsriHandle(this._mouseMoveToken);this._mouseMoveToken=this.app.map.on("mouse-move",function(b){a._mouseInsideMapBounds=true;if(!a._timer)a._timer=setTimeout(function(){a._handleInputMove(b);
a._clearTimeout()},a._inputThrottleDelay)})};b.prototype._addMapStateChangedEvents=function(){var a=this;this._removeEsriHandle(this._extentChangedToken);this._extentChangedToken=this.app.map.on("extent-change",function(b){a.snappingProvider.loadForExtent(b.extent);a._originPoint=null;a._originSnapPoint=null});this._removeEsriHandle(this._panEndToken);this._panEndToken=this.app.map.on("pan-end",function(b){a.snappingProvider.loadForExtent(b.extent);a._originPoint=null;a._originSnapPoint=null})};b.prototype._removeGcxHandle=
function(a,b){a&&b&&this.app.event(a).unsubscribe(b)};b.prototype._addKeyHandlers=function(){var a=this;this._removeEsriHandle(this._onKeyDown);this._onKeyDown=this.app.map.on("key-down",function(b){a._onSnapKeyDownHandler(b)})};b.prototype._onSnapKeyDownHandler=function(a){a.keyCode===this._toggleKey&&(this._enabled?this.app.command("DeactivateSnapping").execute():this.app.command("ActivateSnapping").execute())};b.prototype._killOffSnapping=function(){this._removeMouseEvents();this._removeAccessibilityEvents();
this._removeEsriHandle(this._graphicDrawToken);this._removeEsriHandle(this._extentChangedToken);this._removeEsriHandle(this._panEndToken)};b.prototype._removeEsriHandle=function(a){a&&a.remove()};b.prototype._removeJQueryHandle=function(a){a&&a.off()};b.prototype._addSnappingGraphics=function(a,b){b===void 0&&(b=null);b||(b=a);if(this._originPoint){var d=this.app.map.toScreen(b),e=d.x-this._originSnapPoint.x,d=d.y-this._originSnapPoint.y,e=dojox.gfx.matrix.translate(e,d);(d=this._snapGraphic.getDojoShape())&&
d.setTransform(e);d=this.app.map.toScreen(a);e=d.x-this._originPoint.x;d=d.y-this._originPoint.y;e=dojox.gfx.matrix.translate(e,d);(d=this._hoverGraphic.getDojoShape())&&d.setTransform(e)}else this._originPoint=this.app.map.toScreen(a),this._originSnapPoint=this.app.map.toScreen(b),this._snapGraphic.setGeometry(b),this._hoverGraphic.setGeometry(a);this._snapGraphic.visible||this._snapGraphic.show();this._hoverGraphic.visible||this._hoverGraphic.show();$(this._snapGraphic.getNode()).css("pointer-events",
"none");$(this._hoverGraphic.getNode()).css("pointer-events","none")};b.prototype._hideSnappingGraphics=function(){this._originSnapPoint=this._originPoint=null;this._hoverGraphic.visible&&this._hoverGraphic.hide();this._snapGraphic.visible&&this._snapGraphic.hide()};b.prototype._handleInputMove=function(a){var b=this;this._enabled&&(this._canSnap?a&&a.screenPoint&&this._mouseInsideMapBounds&&(this.snappingProvider.continueSnapping(),this.snappingProvider.provideSnappingPoint(a.screenPoint).then(function(d){d?
(b._addSnappingGraphics(a.mapPoint,d),b._raiseSnappingInputMovedEvent(d,a.mapPoint),b.app.command("ScreenReaderNarrate").execute(b.app.getResource(b.libraryId,"language-snapping-point-found"))):(b._addSnappingGraphics(a.mapPoint,null),b._raiseSnappingInputMovedEvent(null,a.mapPoint))}).caught(function(d){b.app.trace.error("Failed to find a snapping point: {0}".format(d&&d.message?d.message:"Undetermined cause"));b.app.command("ScreenReaderNarrate").execute(b.app.getResource(b.libraryId,"language-snapping-error"));
b._raiseSnappingInputMovedEvent(null,a.mapPoint)})):this._hideSnappingGraphics())};b.prototype._raiseSnappingInputMovedEvent=function(a,b){var d={snappingPoint:a,inputPoint:b};this.app.event("SnappingFeedbackEvent").publish(d)};b.prototype._addEventListener=function(a,b,d){a.addEventListener?a.addEventListener(b,d,false):a.attachEvent&&a.attachEvent("on"+b,d)};b.prototype._removeEventListener=function(a,b,d){a.removeEventListener?a.removeEventListener(b,d,false):a.detachEvent&&a.detachEvent("on"+
b,d)};b.prototype._moveEditingGraphicToTempLayer=function(){if(this._graphicEditingLayerRef&&this._currentEditingGraphic&&this._canSwapEditingGraphic(this._graphicEditingLayerRef)){this.app.trace.debug("[SnappingModule]: Attempting to move the editing graphic from '{0}' to the temporary layer".format(this._graphicEditingLayerRef.id));if(!this._tempEditingLayer)this._tempEditingLayer=new esri.layers.GraphicsLayer,this._tempEditingLayer.id="temp_snapping_graphics_editing";this.app.map.getLayer("temp_snapping_graphics_editing")||
this.app.map.addLayer(this._tempEditingLayer);this._graphicEditingLayerRef.remove(this._currentEditingGraphic);this._graphicEditingLayerRef.add(this._dummyGraphic);this._tempEditingLayer.add(this._currentEditingGraphic);this._toolbar&&this._toolbar.refresh()}};b.prototype._returnEditingGraphicToOwner=function(a){a===void 0&&(a=true);if(this._graphicEditingLayerRef&&this._currentEditingGraphic&&this._tempEditingLayer&&this._canSwapEditingGraphic(this._graphicEditingLayerRef))this.app.trace.debug("[SnappingModule]: Returning the editing graphic back to '{0}'".format(this._graphicEditingLayerRef.id)),
this._tempEditingLayer.remove(this._currentEditingGraphic),this._graphicEditingLayerRef.remove(this._dummyGraphic),this._graphicEditingLayerRef.add(this._currentEditingGraphic),this.app.map.removeLayer(this._tempEditingLayer),this._tempEditingLayer.clear(),this._tempEditingLayer=null,a&&this._toolbar&&this._toolbar.refresh()};b.prototype._canSwapEditingGraphic=function(a){var b=false,d=[];if(this.snappingProvider&&this.snappingProvider.providerConfiguration&&this.snappingProvider.providerConfiguration.configuration&&
this.snappingProvider.providerConfiguration.configuration.graphicsLayers)d=this.snappingProvider.providerConfiguration.configuration.graphicsLayers;a&&a instanceof esri.layers.GraphicsLayer&&d.indexOf(a.id)>-1&&(b=true);return b};return b}(d.framework.application.ModuleBase);f.SnappingModule=i})(f.snapping||(f.snapping={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.attach=function(a){var b=this;d.prototype.attach.call(this,a);this.viewModel.activeFlyout.bind(this,function(a){var d=$(b.root).is(":visible");if(a)d?d&&(b.app.command("FocusOnFirstInputInView").execute(b),a={view:b,onOtherInteracted:function(a){return b._onOtherInteracted(a)}},b.app.command("TapToDismiss").execute(a),b.app.event("FlyoutActivated").publish(b)):
(b.app.command("ActivateView").execute(b.id),b.fallbackFlyout=a);else if(!a&&b.fallbackFlyout!=null)d?(b.app.event("ToolbarFlyoutDeactivatedEvent").publish(b.id),b.fallbackFlyout=a):d||b.viewModel.activeFlyout.set(b.fallbackFlyout)})};b.prototype._onOtherInteracted=function(a){if($(a.target||a.srcElement).hasClass("multi-tool-button")===false)this.fallbackFlyout=null,this.viewModel.activeFlyout.set(null),this.app.event("FlyoutDeactivated").publish(this)};b.prototype.changeToolFlyout=function(a,b,
d){var e=this.viewModel.activeFlyout.get();this.viewModel.activeFlyout.set(null);setTimeout(function(){e.switchActiveFlyoutTool(d)},0);this.viewModel.transientActive&&!this.viewModel.transientActive.get()&&this.app.command("ToggleToolbar").execute()};return b}(d.framework.ui.ViewBase);e.ToolbarFlyoutView=f})(e.toolbar||(e.toolbar={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){d=d.essentialsHtmlViewer||(d.essentialsHtmlViewer={});d=d.mapping||(d.mapping={});d=d.modules||(d.modules={});d=d.toolbar||(d.toolbar={});d=d.transients||(d.transients={});d=d.TransientElementSource||(d.TransientElementSource={});d[d.View=0]="View";d[d.Widget=1]="Widget";d[d.ToolbarGroup=2]="ToolbarGroup"})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(f){function b(){f.apply(this,arguments);this._transientElementEntries=[];this._transientElements=[];this._previousStateName=this._previousFriendToolId=this._previousToolId=this._peekTimerHandle=null;this._toolChangePeekPeriod=100}__extends(b,f);b.prototype.initialize=function(a){var b=this;if(a&&a.isEnabled){f.prototype.initialize.call(this,a);this.app.event("ActiveToolChangedEvent").subscribe(this,this._handleActiveToolChangedEvent);
this.app.command("ActivateTransientElements").register(this,this._activateTransientElementsFor);this.app.command("DeactivateTransientElements").register(this,this._deactivateTransientElementsFor);if(a.transientElements){for(var d=0;d<a.transientElements.length;++d){var e=a.transientElements[d];this._transientElementEntries.push({stateName:e.stateName,viewId:e.viewId,widgetId:e.widgetId,region:e.region,items:e.items})}this.app.event("StateEnteredEvent").subscribe(this,function(a){for(var d=0;d<b._transientElementEntries.length;d++){var e=
b._transientElementEntries[d];if(a.stateDefinition.name===e.stateName){b._activateTransientElementsFor(e.stateName);break}}});this.app.event("StateExitedEvent").subscribe(this,function(a){for(var d=0;d<b._transientElementEntries.length;d++){var e=b._transientElementEntries[d];if(a.stateDefinition.name===e.stateName)b._previousStateName=a.stateDefinition.name,b._deactivateTransientElementsFor(e.stateName)}})}a.toolbarGroups&&this.app.toolbarGroupRegistry.registerToolbarGroups(a.toolbarGroups,this.libraryId)}};
b.prototype._findTransientElementsFor=function(a){for(var b=[],d=0;d<this._transientElements.length;++d){var e=this._transientElements[d];e&&e.originatorId===a&&b.push(e)}return b};b.prototype._findTransientElementEntriesFor=function(a){for(var b=[],d=0;d<this._transientElementEntries.length;++d){var e=this._transientElementEntries[d];e.stateName===a&&b.push(e)}return b};b.prototype._activateTransientElementsFor=function(a){for(var b=this._findTransientElementEntriesFor(a),d=0;d<b.length;++d){var e=
this._activateTransientElement(b[d],a);e&&(this._transientElements.push(e),this.app.event("TransientActivatedEvent").publish({stateName:b[d].stateName,widgetId:b[d].widgetId,viewId:b[d].viewId}))}this._setNeighbourTransientClass()};b.prototype._setNeighbourTransientClass=function(){var a=this;if(this._transientElements.length>1)for(var b=0;b<this._transientElements.length;b++){for(var d=this._transientElements.filter(function(d){return d.element.regionName===a._transientElements[b].element.regionName}),
e=false,f=0;f<d.length;f++)d[f].element.viewModel.hasOwnProperty("items")||(e=true);if(e)for(e=0;e<d.length;e++)d[b].element.viewModel.hasNeighbour&&d[b].element.viewModel.hasNeighbour.set(true)}else for(b=0;b<this._transientElements.length;b++)this._transientElements[b].element.viewModel.hasNeighbour&&this._transientElements[b].element.viewModel.hasNeighbour.set(false)};b.prototype._activateTransientElement=function(a,b){var e=this;if(a.viewId)return this.app.commandRegistry.command("ActivateView").execute(a.viewId),
{source:0,originatorId:b,element:a.viewId};else if(a.widgetId){for(var f=null,j=0;j<this.app.configModel.widgetConfigs.length;++j)if(this.app.configModel.widgetConfigs[j].id===a.widgetId){f=this.app.configModel.widgetConfigs[j];break}if(!f)return this.app.trace.warning("Could not activate transient toolbar widget '{0}'".format(a.widgetId)),null;var i=(this.app.viewManager.getViewById("TabbedToolbarView")||new d.framework.ui.ViewBase(this.app,this.libraryId))._createWidgetViewFromConfig(f,this);i.regionName=
a.region;d.framework.ui.animation.runWhenIdle(function(){return e._activateView(i,a)});return{source:1,originatorId:b,element:i}}};b.prototype._activateView=function(a,b){if(this.app.viewManager.getViewById(a.id)){var d=false,f=this.app.viewManager.getExistingRegionByName(b.region);f&&f.views&&f.views.filter(function(a){return a.isActive}).length>0&&(d=true);b.items&&(f=new e.infrastructure.toolbarGroup.ToolbarGroup(this.app,this.libraryId,b),d?a.viewModel.items.addItems(f.items.get()):a.viewModel.items.set(f.items.get()),
this.app.command("ResizeShell").execute());(!d||!b.items)&&this.app.commandRegistry.command("ActivateView").execute(a.id)}};b.prototype._deactivateTransientElementsFor=function(a){for(var a=this._findTransientElementsFor(a),b=0;b<a.length;++b){var e=a[b];d.framework.utils.ArrayUtils.removeItem(this._transientElements,e);this._deactivateTransientElement(e)}this._transientElements.length===0&&this.app.event("TransientsDeactivatedEvent").publish();this._setNeighbourTransientClass()};b.prototype._deactivateTransientElement=
function(a){switch(a.source){case 1:this.app.viewManager.destroyView(a.element)}};b.prototype._handleActiveToolChangedEvent=function(a){var b=this,d=a.tool?a.tool.id||a.tool.name:null,a=a.previousTool?a.previousTool.id||a.previousTool.name:null;if(!d&&!this._peekTimerHandle)this._peekTimerHandle=setTimeout(function(){b._handleToolChangeTransients.apply(b,[b._previousToolId,d])},this._toolChangePeekPeriod);else if(clearTimeout(this._peekTimerHandle),this._peekTimerHandle=null,d&&this._previousToolId){var e=
this._findTransientElementEntriesFor(this._previousStateName);if(e)for(var f=0;f<e.length;++f);if([].indexOf(d)>-1){this._previousFriendToolId=d;this._transientElements.length===0&&this._activateTransientElementsFor(this._previousStateName);return}else this._handleToolChangeTransients.apply(this,[this._previousToolId,d])}else this._handleToolChangeTransients.apply(this,[this._previousToolId,d]);a&&a!==this._previousFriendToolId?this._previousToolId=a:this._previousFriendToolId=a};b.prototype._handleToolChangeTransients=
function(a){if(a)this._previousToolId=null;if(this._previousFriendToolId&&a)this._deactivateTransientElementsFor(this._previousStateName),this._previousFriendToolId=null,this.app.command("SetActiveTool").execute(a)};return b}(d.framework.application.ModuleBase);f.ToolbarModuleBase=i})(f.toolbar||(f.toolbar={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.initialize=function(a){d.prototype.initialize.call(this,a)};return b}(d.ToolbarModuleBase);d.CompactToolbarModule=e})(d.toolbar||(d.toolbar={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(){e.apply(this,arguments);this._collapsibleAreaWidth=null;this._transientRegionId="CompactToolbarTransientRegion";this._toolChangePeekPeriod=110}__extends(b,e);b.prototype.attach=function(a){var b=this;e.prototype.attach.call(this,a);if(this.viewModel.isEnabled.get()!==false){this.viewModel.activeTool.bind(this,function(){return b._resizeView()});this.viewModel.backArrowVisible.bind(this,function(){return b._resizeView()});
this.viewModel.forwardArrowVisible.bind(this,function(){return b._resizeView()});this.viewModel.registerCompactToolbarViewId(this.id);if(this.app.site&&this.app.site.isInitialized)this.viewModel.isExpanded.get()&&this._assignFloatingAreaWidth(),this._resizeView(),this.toggleScrollArrows();else this.app.event("SiteInitializedEvent").once(this,function(){b.viewModel.isExpanded.get()&&b._assignFloatingAreaWidth();b._resizeView();b.toggleScrollArrows()});this.app.event("RegionActivatedEvent").subscribe(this,
this._handleTransientActivated);this.app.event("RegionDeactivatedEvent").subscribe(this,this._handleTransientDeactivated);this.app.event("ToggleButtonStateChangedEvent").subscribe(this,function(){return b._resizeView()});this.app.command("ToggleToolbar").register(this,function(){return b._handleToolbarToggleStateChange()});this.app.command("OpenToolbar").register(this,function(){return b._handleToolbarToggleStateChange()});this.app.command("CloseToolbar").register(this,function(){return b._handleToolbarToggleStateChange()});
this.viewModel.isExpanded.bind(this,this.handleIsExpandedChange)}};b.prototype.handleToolbarButtonClicked=function(){var a=this;this.viewModel.activeTool.get()?(this.viewModel.activeTool.set(null),this.app.command("ClearActiveTool").execute(),this.app.command("CloseToolbar").execute(),setTimeout(function(){a.app.command("ClearActiveTool").execute()},this._toolChangePeekPeriod)):this.viewModel.isExpanded.get()?this.app.command("CloseToolbar").execute():this.app.command("OpenToolbar").execute();this.viewModel.activeFlyout.set(null)};
b.prototype.handleToolbarItemClick=function(a,b,d){d.execute();this.viewModel.transientActive.get()===false&&this.app.command("CloseToolbar").execute()};b.prototype.handleOpenToolFlyout=function(a,b,d){d.toggleFlyout();this.viewModel.activeFlyout.get()===d?this.viewModel.activeFlyout.set(null):(this.viewModel.activeFlyout.get()&&this.viewModel.activeFlyout.get().toggleFlyout(),a=$(this.collapsibleAreaElement).width(),$(b).position().left>a/2?(this.viewModel.multitoolFloatRight.set(true),this.viewModel.multitoolFloatLeft.set(false)):
(this.viewModel.multitoolFloatRight.set(false),this.viewModel.multitoolFloatLeft.set(true)),this.viewModel.activeFlyout.set(d))};b.prototype.handleScrollBack=function(){var a=$(this.floatingAreaElement);a.scrollLeft(a.scrollLeft()-$(this.expandedElement).width()-$(this.backArrowElement).width());this.toggleScrollArrows();this.viewModel.backArrowVisible.get()&&a.scrollLeft(a.scrollLeft()+$(this.forwardArrowElement).width())};b.prototype.handleScrollForward=function(){var a=$(this.floatingAreaElement);
a.scrollLeft(a.scrollLeft()+$(this.expandedElement).width()-$(this.forwardArrowElement).width());this.toggleScrollArrows();this.viewModel.forwardArrowVisible.get()&&a.scrollLeft(a.scrollLeft()-$(this.backArrowElement).width())};b.prototype.handleIsExpandedChange=function(a){var b=this;a?(this.app.event("FlyoutActivated").publish(this),a={view:this,onOtherInteracted:function(a){return b._onOtherInteracted(a)}},this.app.command("TapToDismiss").execute(a)):this.app.event("FlyoutDeactivated").publish(this)};
b.prototype._onOtherInteracted=function(){this.viewModel.transientActive.get()===false&&this.viewModel.isExpanded.get()===true&&this.app.command("CloseToolbar").execute()};b.prototype._resizeView=function(){this.viewModel.transientActive.get()===false?($(this.expandedElement).width(this._collapsibleAreaWidth),$(this.collapsibleAreaElement).width(this._collapsibleAreaWidth),this._resizeEntireToolArea()):(this._resizeTransientToolArea(),$(this.expandedElement).width($(this.transientElement).width()))};
b.prototype._handleTransientActivated=function(a){if(a.name===this._transientRegionId&&(this.viewModel.transientActive.set(true),a=this.app.toolRegistry.getActiveTool()))this.viewModel.activeTool.set(a),this.app.command("OpenToolbar").execute()};b.prototype._handleTransientDeactivated=function(a){var b=this;a.name===this._transientRegionId&&setTimeout(function(){b.app.toolRegistry.getActiveTool()?b._resizeView():(b.viewModel.activeTool.set(null),b.viewModel.transientActive.set(false),b.app.command("CloseToolbar").execute())},
this._toolChangePeekPeriod)};b.prototype._resizeEntireToolArea=function(){var a=$(this.toolbarParentElement).children(),b=$(this.floatingAreaElement).find("div.toolbar-group"),d=0;$(a).each(function(a,b){d+=Math.ceil($(b).outerWidth(true))});isNaN(parseFloat($(b).css("padding")))||(d+=parseFloat($(b).css("padding"))*2);isNaN(parseFloat($(b).css("border")))||(d+=parseFloat($(b).css("border"))*2);$(b).css("width",d)};b.prototype._resizeTransientToolArea=function(){var a=this;setTimeout(function(){var b=
$(a.transientElement).find("li"),d=$(a.collapsibleAreaElement);b.length===0&&(a.viewModel.transientActive.set(false),a.app.command("CloseToolbar").execute());var e=0;$(b).each(function(a,b){e+=Math.ceil($(b).outerWidth(true))});isNaN(parseFloat($(d).css("padding")))||(e+=parseFloat($(d).css("padding"))*2);isNaN(parseFloat($(d).css("border")))||(e+=parseFloat($(d).css("border"))*2);$(d).css("width",e)},0)};b.prototype._assignFloatingAreaWidth=function(){if(this._collapsibleAreaWidth===null&&this.viewModel.isExpanded.get()){var a=
$(this.toolbarParentElement).children(),b=Math.ceil($(a).outerWidth(true)),d=$(this.forwardArrowElement).outerWidth(true),d=b*this.viewModel.toolbarVisibleTools.get()+d,a=b*a.length;this._collapsibleAreaWidth=a<=d?a:d}};b.prototype._handleToolbarToggleStateChange=function(){var a=this;this.app.configuration.mobileMode?d.framework.ui.animation.runWhenIdle(function(){a._assignFloatingAreaWidth();a._resizeView();a.toggleScrollArrows()}):(this._assignFloatingAreaWidth(),this._resizeView(),this.toggleScrollArrows())};
b.prototype.toggleScrollArrows=function(){if(this.floatingAreaElement){var a=$(this.floatingAreaElement).scrollLeft(),b=this.floatingAreaElement,b=b.scrollWidth-b.clientWidth;a===0?this.viewModel.backArrowVisible.set(false):this.viewModel.backArrowVisible.set(true);a>=b?this.viewModel.forwardArrowVisible.set(false):this.viewModel.forwardArrowVisible.set(true)}};return b}(d.framework.ui.ViewBase);e.CompactToolbarView=f})(e.toolbar||(e.toolbar={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping=
{}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.isEnabled=new Observable(true);this.toggleCommandDisablesView=new Observable(false);this.isExpanded=new Observable(false);this.activeTool=new Observable(null);this.activeToolName=new Observable(null);this.activeToolIcon=new Observable(null);this.activeFlyout=new Observable(null);this.transientActive=new Observable(false);this.toolbarGroup=new Observable(null);this.backArrowVisible=
new Observable(false);this.forwardArrowVisible=new Observable(true);this.toolbarVisibleTools=new Observable(4);this.toolbarOpenByDefault=new Observable(false);this.multitoolFloatLeft=new Observable(true);this.multitoolFloatRight=new Observable(false);this._toolbarGroupId="compactToolbar";this._compactToolbarViewId=null}__extends(b,d);b.prototype.initialize=function(a){var b=this;this.toolbarGroup.set(this.app.toolbarGroupRegistry.getToolbarGroupById(this._toolbarGroupId));this.toolbarGroup.get()===
null?this.isEnabled.set(false):(a.registerToggleCommand!==false&&this.isEnabled.get()&&(this.app.command("ToggleToolbar").register(this,this._executeToggleToolbar,this._isPresent),this.app.command("OpenToolbar").register(this,this._executeOpenToolbar,this._isClosed),this.app.command("CloseToolbar").register(this,this._executeCloseToolbar,this._isOpen)),this.app.event("ActiveToolChangedEvent").subscribe(this,function(a){a.tool&&b._handleUpdateActiveTool(b.toolbarGroup.get().items.get(),a.tool,true);
a.previousTool&&b._handleUpdateActiveTool(b.toolbarGroup.get().items.get(),a.previousTool,false)}),a.toolbarVisibleTools?this.toolbarVisibleTools.set(a.toolbarVisibleTools):this.toolbarVisibleTools.set(this.toolbarGroup.get().items.length()),a.toggleCommandDisablesView&&(this.toggleCommandDisablesView.set(true),this.isExpanded.set(true)),a.toolbarOpenByDefault&&setTimeout(function(){b.app.command("ToggleToolbar").execute()},0),this.activeTool.bind(this,function(a){return a?b._assignProperNameToTool(a):
b._clearToolInfo()}))};b.prototype.registerCompactToolbarViewId=function(a){if(a&&!this._compactToolbarViewId)this._compactToolbarViewId=a};b.prototype._executeToggleToolbar=function(){if(this.toggleCommandDisablesView.get()){var a=this.app.viewManager.getViewById(this._compactToolbarViewId);this.app.command("ToggleView").execute(a.id)}else this.isExpanded.set(!this.isExpanded.get())};b.prototype._executeOpenToolbar=function(){if(this.toggleCommandDisablesView.get()){var a=this.app.viewManager.getViewById(this._compactToolbarViewId);
this.app.command("ActivateView").execute(a.id)}else this.isExpanded.set(true)};b.prototype._executeCloseToolbar=function(){if(this.toggleCommandDisablesView.get()){var a=this.app.viewManager.getViewById(this._compactToolbarViewId);a.isActive&&this.app.command("DeactivateView").execute(a.id)}else this.isExpanded.set(false)};b.prototype._isPresent=function(){return this.isEnabled.get()};b.prototype._isOpen=function(){if(this.toggleCommandDisablesView.get()){var a=this.app.viewManager.getViewById(this._compactToolbarViewId);
return a?a.isActive:null}else return this.isExpanded.get()};b.prototype._isClosed=function(){if(this.toggleCommandDisablesView.get()){var a=this.app.viewManager.getViewById(this._compactToolbarViewId);return a?!a.isActive:null}else return!this.isExpanded.get()};b.prototype._handleUpdateActiveTool=function(a,b,d){var e=this;this.activeFlyout.set(null);if(b&&a){var f=false;a.forEach(function(a){a.type==="tool"?a.tool?b&&a.tool.command&&b.command&&a.tool.command===b.command&&a.tool.drawMode===b.drawMode&&
(f=true,d?(a.activate(),e.activeTool.set(a.tool)):(a.deactivate(),e.activeTool.set(null))):e.transientActive.get()===false&&e.activeTool.set(null):(a.type==="toolbarGroup"||a.type==="flyout")&&a.items.getLength()&&e._handleUpdateActiveTool(a.items.get(),b,d)});f||(d&&(this.activeToolIcon.set(null),this.activeToolName.set(null)),this.activeTool.set(b))}};b.prototype._assignProperNameToTool=function(a){if(!this.activeToolName.get()){for(var b=0;b<this.toolbarGroup.get().items.length();b++){var d=this.toolbarGroup.get().items.getAt(b);
if(d.type==="flyout"||d.type==="group")for(var e=0;e<d.items.length();e++){var f=d.items.getAt(e);f.id===a.name&&(this.activeToolName.set(f.name.get()),this.activeToolIcon.set(f.iconUri.get()))}d.id===a.name&&(this.activeToolName.set(d.name.get()),this.activeToolIcon.set(d.iconUri.get()))}this.activeToolIcon.get()||this.activeToolIcon.set(this.app.toolRegistry.tools[a.name]?this.app.toolRegistry.tools[a.name].iconUri:null);this.activeToolName.get()||this.activeToolName.set(a.name)}};b.prototype._clearToolInfo=
function(){this.activeToolName.set(null);this.activeToolIcon.set(null)};return b}(d.framework.ui.ViewModelBase);e.CompactToolbarViewModel=f})(e.toolbar||(e.toolbar={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.failedServices=new ObservableCollection;this.hasError=new Observable(false)}__extends(b,d);return b}(d.framework.ui.ViewModelBase);e.ServiceLayersFailureViewModel=f})(e.site||(e.site={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,b){e.call(this,a,b);a.event("SiteServiceLayersFailedEvent").subscribe(this,this._serviceLayersFailed)}__extends(b,e);b.prototype._serviceLayersFailed=function(a){this.viewModel.failedServices.clear();this.viewModel.hasError.set(false);for(var b=0;b<a.length;b++){var e=a[b];if(e.failureAction===d.essentials.FailureAction.WARN||e.failureAction===d.essentials.FailureAction.ERROR)e.failureAction===d.essentials.FailureAction.ERROR&&
this.viewModel.hasError.set(true),this.viewModel.failedServices.addItem({name:a[b].displayName})}this.viewModel.failedServices.length()>0&&(this.title.set(this.app.getResource(this.libraryId,"language-site-service-layers-failure-view-title")),this.app.viewManager.activateView(this))};b.prototype.handleClickOk=function(){this.app.viewManager.deactivateView(this)};return b}(d.framework.ui.ViewBase);e.ServiceLayersFailureView=f})(e.site||(e.site={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping=
{}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(f){function b(){f.apply(this,arguments);this.proxyUri=this.siteUri="";this.essentialsSite=null}__extends(b,f);b.prototype.initialize=function(a){f.prototype.initialize.call(this,a);this.siteUri=a.siteUri;this.proxyUri=this.app.configuration.proxyUri||null;this.app.command("InitializeSite").register(this,this._onInitializeSite);this.app.event("SiteInitializedEvent").once(this,this._handleSiteInitializedEvent);this.app.event("SignInEvent").subscribe(this,
this._onSignIn)};b.prototype._onInitializeSite=function(a){var b=this,e=this.app.makeAbsolute(this.siteUri);this.app.site=new d.essentials.Site(e,a);this.app.event("SiteInitializingEvent").publish(this.app.site);/GeocortexApp/.test(navigator.userAgent)||this.app.isNative.get()?this._setNativeProperties():this.app.isNative.bind(this,function(a){a&&b._setNativeProperties()});if(this.app.isOffline.get())this.app.site.url=e;if(this.proxyUri)esri.config.defaults.io.proxyUrl=this.proxyUri;dojo.connect(this.app.site,
"onInitializationFailed",function(a){var d;a&&a.code===403?(b.app.event("SiteAuthorizationFailedEvent").publish(a),d=b.getResource("language-site-initialization-failure"),a=d.format(a.message),b.app.trace.error(a)):(b.app.event("SiteInitializationFailedEvent").publish(a),d=b.getResource("language-site-initialization-failure"),a=d.format(a.message),b.app.trace.error(a),b.app.command("Alert").execute(a))});dojo.connect(this.app.site,"onInitialized",function(){b._overrideGeometryService();b.app.event("SiteInitializedEvent").publish(b.app.site)});
dojo.connect(this.app.site,"onLayerLoad",function(a){b.app.event("SiteLayerLoad").publish(a);b.app.event("SiteLayerLoadedEvent").publish(a)});dojo.connect(this.app.site,"onLayerLoadError",function(a){b.app.event("SiteLayerLoadError").publish(a);b.app.event("SiteLayerLoadFailedEvent").publish(a)});dojo.connect(this.app.site,"onServiceLayersLoaded",function(a){b.app.event("SiteServiceLayersLoaded").publish(a);b.app.event("SiteServiceLayersLoadedEvent").publish(a);b._checkForFailedServices(a)});dojo.connect(this.app.site,
"onSignIn",function(a){b.app.event("SignInEvent").publish(a)});dojo.connect(this.app.site,"onSignOut",function(){b.app.event("SignOutEvent").publish()});dojo.connect(this.app.site,"onUserSignInCancelled",function(a){b.app.event("UserSignInCancelledEvent").publish(a)});this.app.site.configPreprocessor=function(a){return b._processSiteConfig(a)};this.app.site.deepInitialize=true;this.app.site.initialize()};b.prototype._handleSiteInitializedEvent=function(){for(var a=0;a<this.app.site.essentialsMap.mapServices.length;a++)if(this.app.site.essentialsMap.mapServices[a]._needsProxy){this.app.trace.info("Essentials security detected. The proxy page will be used.");
break}};b.prototype._onSignIn=function(){var a=this,b=this.getResource("language-site-signing-in"),f=new e.infrastructure.commandArgs.AddStatusArgs(b);f.timeoutMS=0;f.id=d.framework.utils.alphaNumericToken();this.app.command("AddStatus").execute(f);this.app.event("SiteInitializedEvent").once(this,function(){a.app.command("RemoveStatus").execute(f.id)})};b.prototype._checkForFailedServices=function(a){if(a.essentialsMap&&a.essentialsMap.mapServices){for(var b=[],d=0;d<a.essentialsMap.mapServices.length;d++){var e=
a.essentialsMap.mapServices[d];e.initializationFailure&&b.push(e)}b.length>0&&this.app.event("SiteServiceLayersFailedEvent").publish(b)}};b.prototype._setNativeProperties=function(){var a=window.location.toString(),b=a.indexOf("#");b!==-1&&(a=a.substring(0,b));a=encodeURIComponent(a);this.app.site.signInRedirectUri="gcx://viewer?url="+a;this.app.site.signOutRedirectUri="gcx://viewer?url="+a};b.prototype._processSiteConfig=function(a){if(a&&!(a.geometryEndpoints&&a.geometryEndpoints.length>0)){var b=
this.app.configuration.geometryServiceUrl||e.infrastructure.GeometryUtils.DEFAULT_GEOMETRY_SERVICE_URI;a.hasGeometryEndpoints=true;a.geometryEndpoints=[{id:"0",displayName:null,serviceType:"ArcGisGeometry",connectionString:"url={0}".format(b),properties:[],extensions:[]}]}};b.prototype._overrideGeometryService=function(){var a=d.framework.utils.ArrayUtils.firstOrDefault(this.app.site.geometryEndpoints),b=a?a.geometryServiceUrl:null;if(this.app.configuration&&(this.app.configuration.geometryServiceUrl=
b||this.app.configuration.geometryServiceUrl||e.infrastructure.GeometryUtils.DEFAULT_GEOMETRY_SERVICE_URI,esri.config.defaults.geometryService=new esri.tasks.GeometryService(this.app.configuration.geometryServiceUrl),a&&a.geometryServiceToken))this.app.configuration.geometryServiceToken=a.geometryServiceToken};return b}(d.framework.application.ModuleBase);f.SiteModule=i})(f.site||(f.site={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,b){d.call(this,a,b);this.tryAgainAction=null;a.event("UserSignInCancelledEvent").subscribe(this,this._signInCancelled)}__extends(b,d);b.prototype._signInCancelled=function(a){this.title.set(this.app.getResource(this.libraryId,"language-site-log-on-required-title"));this.tryAgainAction=a.tryAgainAction;this.app.viewManager.activateView(this)};b.prototype.handleClickTryAgain=function(){this.tryAgainAction&&
this.tryAgainAction()};return b}(d.framework.ui.ViewBase);e.SignInErrorView=f})(e.site||(e.site={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.framework.ui.ViewBase);e.StatusIndicatorView=f})(e.status||(e.status={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.framework.application.ModuleBase);e.TempModule=f})(e.temp||(e.temp={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,b){e.call(this,a,b);this.messageRegionName="StatusIndicatorMessageRegion";this.statusViewName="StatusIndicatorView";this.lastTestAddArgs=null;this.viewInstanceCounter=0;this.app.command("AddStatus").register(this,this.addStatus);this.app.command("UpdateStatus").register(this,this.updateStatus);this.app.command("PulseStatus").register(this,this.pulseStatus);this.app.command("RemoveStatus").register(this,
this.removeStatus);this.app.event("ViewUnhostedEvent").subscribe(this,this.viewUnhostedHandler)}__extends(b,e);b.prototype.initialize=function(a){e.prototype.initialize.call(this,a);if(!a.busyIcon)a.busyIcon="Resources/Images/loader-small.gif";this._defaultCloseTitle=this.getResource("language-common-close")};b.prototype.addStatus=function(a){a=typeof a==="string"||a instanceof String?new d.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs(a):a;this.app.command("ActivateView").execute(this.statusViewName);
var b=a.id?a.id:"StatusMessageView"+this.viewInstanceCounter++,e=this.app.viewManager.getViewById(b),f=e?e.viewModel:null;e||(e=this.createView("StatusMessageView",b,this.messageRegionName));a.id=b;f||(f=new d.essentialsHtmlViewer.mapping.modules.status.StatusMessageViewModel(this.app,this.libraryId),e.attach(f));f.text.set(a.text);f.closeTitle.set(a.closeTitle||this._defaultCloseTitle);f.imageUri.set(a.imageUri);f.imageClass.set(a.imageClass);f.statusClass.set(a.statusClass);f.userClosedCallback=
a.userClosedCallback;a.showBusyIcon&&f.imageUri.set(this.configuration.busyIcon);if(f.timer)f.timer.reset();else if(a.timeoutMS&&a.timeoutMS>0)f.timer=new d.framework.utils.TimeDelayedAction(a.timeoutMS,function(){this.removeStatus(b)},this),f.timer.start()};b.prototype.updateStatus=function(a){a=typeof a==="string"||a instanceof String?new d.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs(a):a;this.app.command("ActivateView").execute(this.statusViewName);var b=null;if(a.id)b=
this.app.viewManager.getViewById(a.id);else{var e=this.app.viewManager.getExistingRegionByName(this.messageRegionName);e.views.length>=1&&(b=e.views[e.views.length-1])}if(b&&(b=b.viewModel))a.text&&b.text.set(a.text),a.closeTitle&&b.closeTitle.set(a.closeTitle),a.imageUri&&b.imageUri.set(a.imageUri),a.imageClass&&b.imageClass.set(a.imageClass),a.statusClass&&b.statusClass.set(a.statusClass),typeof a.userClosedCallback==="function"&&(b.userClosedCallback=a.userClosedCallback),b.timer&&b.timer.reset()};
b.prototype.pulseStatus=function(a){if(a&&(a=this.app.viewManager.getViewById(a)))(a=a.viewModel)&&a.timer&&a.timer.reset()};b.prototype.removeStatus=function(a){var b=null;a?b=this.app.viewManager.getViewById(a):(a=this.app.viewManager.getExistingRegionByName(this.messageRegionName),a.views.length>=1&&(b=a.views[a.views.length-1]));b&&this.app.viewManager.destroyView(b)};b.prototype.createView=function(a,b,d){return this.app.viewManager.createView({id:b,type:"geocortex.essentialsHtmlViewer.mapping.modules.status."+
a,markup:this.libraryId+"/modules/Status/"+a+".html",visible:true,libraryId:this.libraryId,regionName:d})};b.prototype.viewUnhostedHandler=function(a){var b=a.region,a=a.view;b.name==this.messageRegionName&&(a&&a.viewModel&&a.viewModel.timer&&a.viewModel.timer.stop(),b.views.length==0&&this.app.command("DeactivateView").execute(this.statusViewName))};return b}(d.framework.application.ModuleBase);e.StatusModule=f})(e.status||(e.status={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.text=new Observable;this.closeTitle=new Observable;this.imageUri=new Observable;this.imageClass=new Observable;this.statusClass=new Observable;this.userClosedCallback=null}__extends(b,d);return b}(d.framework.ui.ViewModelBase);e.StatusMessageViewModel=f})(e.status||(e.status={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.attach=function(a){d.prototype.attach.call(this,a);if(a){this.updateClassBinding(a.statusClass.get());var b=a.statusClass.bind(this,this.updateClassBinding);this.addDisposableBinding(a.statusClass,b)}};b.prototype.updateClassBinding=function(a){var a=a||"",b=this._previousClass||"";if(a&&a!==b)this._previousClass=a,dojo.removeClass(this.containerElement,b),
dojo.addClass(this.containerElement,a)};b.prototype.handleClickClose=function(a,b,d){this.app.viewManager.destroyView(this);d&&d.userClosedCallback&&d.userClosedCallback.call(this,this)};return b}(d.framework.ui.ViewBase);e.StatusMessageView=f})(e.status||(e.status={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.framework.ui.ViewBase);e.TempView=f})(e.temp||(e.temp={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.framework.ui.ViewModelBase);e.TempViewModel=f})(e.temp||(e.temp={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.initialize=function(a){d.prototype.initialize.call(this,a)};return b}(d.ToolbarModuleBase);d.TabbedToolbarModule=e})(d.toolbar||(d.toolbar={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.handleClickToggleToolbar=function(){this.app.command("ToggleToolbar").execute();return false};return b}(d.framework.ui.ViewBase);e.ToolbarButtonView=f})(e.toolbar||(e.toolbar={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,b){d.call(this,a,b);this.tileElements=[];this.app.event("ViewActivatedEvent").subscribe(this,this._onViewActivatedEvent);this.app.event("ViewDeactivatedEvent").subscribe(this,this._onViewDeactivatedEvent)}__extends(b,d);b.prototype._onViewActivatedEvent=function(a){if(this.root&&a.id){if(this.viewModel&&this.viewModel.hostedViews&&!this.viewModel.hostedViews.contains(a))return false;this.handleViewActivated(a)}};
b.prototype._onViewDeactivatedEvent=function(a){if(this.root&&a.id){if(this.viewModel&&this.viewModel.hostedViews&&!this.viewModel.hostedViews.contains(a))return false;this.handleViewDeactivated(a)}};b.prototype.handleViewActivated=function(a){for(var b=0;b<this.tileElements.length;++b)dojo.removeClass(this.tileElements[b],"tb-view-active");a=".{0}".format(a.id);(a=dojo.query(a,this.root)[0])&&dojo.addClass(a,"tb-view-active")};b.prototype.handleViewDeactivated=function(a){a=".{0}".format(a.id);(a=
dojo.query(a,this.root)[0])&&dojo.removeClass(a,"tb-view-active")};b.prototype.handleViewTileClick=function(a,b,d){this.app.command("ActivateView").execute(d.id);this.app.event("ToolbarViewTilePressedEvent").publish(d.id);return false};return b}(d.framework.ui.ViewBase);e.ToolbarManagedViewsView=f})(e.toolbar||(e.toolbar={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,b){var f=this;d.call(this,a,b);this.hostedViews=new ObservableCollection;this.ordering={};this.managedRegionName="BottomPanelViewContainerRegion";this.app.event("ViewHostedEvent").subscribe(this,function(a){var b=a.view,a=a.region;b&&b.isManaged&&a.name===f.managedRegionName&&f._addOrderedView(b)});this.app.event("ViewUnhostedEvent").subscribe(this,function(a){var b=a.view,a=a.region;b&&b.isManaged&&a.name===
this.managedRegionName&&this.hostedViews.removeItem(b)});var i=this.app.event("ViewActivatedEvent").subscribe(this,function(a){if(a&&a instanceof e.ToolbarManagedViewsView){if(f.app.event("ViewActivatedEvent").unsubscribe(i),f.lastActivatedManagedView)var b=dojo.connect(a,"attach",function(){dojo.disconnect(b);a.handleViewActivated(f.lastActivatedManagedView)})}else if(a&&a.isManaged)f.lastActivatedManagedView=a})}__extends(b,d);b.prototype.initialize=function(a){d.prototype.initialize.call(this,
a);if(a.hasOwnProperty("ordering"))this.ordering=a.ordering};b.prototype._addOrderedView=function(a){if(this.ordering){var b=a.id;if(b)if(b=this.ordering.hasOwnProperty(b)?+this.ordering[b]:null,b===null||b===void 0)this.hostedViews.addItem(a);else{for(var d=false,e=0;e<this.hostedViews.getLength();++e){var f=this.hostedViews.getAt(e),f=this.ordering.hasOwnProperty(f.id)?+this.ordering[f.id]:null;if(f===null||b<=f){d=true;this.hostedViews.insertItem(e,a);break}}d||this.hostedViews.addItem(a)}else this.hostedViews.addItem(a)}else this.hostedViews.addItem(a)};
return b}(d.framework.ui.ViewModelBase);e.ToolbarManagedViewsViewModel=f})(e.toolbar||(e.toolbar={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.title=new Observable("");this.tooltip=new Observable("");this.group=new Observable(null);this.isVisible=new Observable(false);this.isActive=new Observable(false)}__extends(b,d);return b}(d.framework.ui.ViewModelBase);e.ToolbarTabViewModel=f})(e.toolbar||(e.toolbar={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this._longPressTimer=null;this._pressLengthMs=2E3;this.flyoutRegion=this.previousActiveToolElement=this._firstEvent=null}__extends(b,d);b.prototype.manageToolVisuals=function(a,b){if(b&&a)for(var d=0;d<a.length;d++){var e=a[d];e&&(e.type==="tool"&&!e.disabled.get()?e.tool.drawMode===b.drawMode&&e.tool.command===b.command&&(b.isActive?e.activate():e.deactivate()):(e.type==="toolbarGroup"||
e.type==="flyout")&&e.items.getLength()&&this.manageToolVisuals(e.items.get(),b))}};b.prototype.attach=function(a){var b=this;a.toolbarGroups&&(d.prototype.attach.call(this,a),a.registerTabbedToolbarViewId(this.id),a&&a.toolbarGroups&&!a.toolbarGroups.isEmpty()&&this.app.event("ActiveToolChangedEvent").subscribe(this,function(a){a.tool&&b.manageToolVisuals(b.viewModel.toolbarGroups.get(),a.tool);a.previousTool&&b.manageToolVisuals(b.viewModel.toolbarGroups.get(),a.previousTool)}),this.app.event("ActiveToolChangedEvent").subscribe(this,
function(a){b.isActive&&a.tool!==null&&b.app.configuration.mobileMode&&b.app.command("DataFrameLower").execute(b.id)}))};b.prototype.handleClickToggleToolbar=function(){this.viewModel.toolbarGroups&&this.viewModel.toolbarGroups.getLength()>0&&(this.app.command("ActivateView").execute(this.id),this.app.event("ApplicationResizedEvent").publish())};b.prototype.handleToolbarItemClick=function(a,b,d){d.execute()};b.prototype.handleTabClick=function(a,b,d){for(a=0;a<this.viewModel.toolbarTabs.getLength();a++)b=
this.viewModel.toolbarTabs.getAt(a),b!==d&&b.isActive.get()&&b.isActive.set(false);d.isActive.set(true);this.viewModel.currToolbarGrp.set(d.group.get());this.app.command("RecenterMapOnNextMapResize").execute();this.app.event("ApplicationResizedEvent").publish()};b.prototype.closeToolbar=function(){this.app.viewManager.deactivateView(this);this.app.command("RecenterMapOnNextMapResize").execute();this.app.event("ApplicationResizedEvent").publish()};b.prototype.toggleToolbar=function(){this.app.configuration.mobileMode?
this.app.command("ActivateView").execute(this.id):this.app.command("ToggleToolbar").execute();return false};b.prototype.resolveWidget=function(a,b){d.prototype.resolveWidget.call(this,a,b);if(a==="RegionWidget"&&b.regionName){var e=this.app.viewManager.createView({markupResource:"Mapping/modules/Toolbar/Templates/ToolbarRegionTemplate.html"});e.app=this.app;e.libraryId=this.libraryId;e.attach(b);return e}return null};b.prototype.toggleVisibleGroup=function(a,b,d){d.isActive.set(!d.isActive.get())};
b.prototype.handleOpenToolFlyout=function(a,b,d){d.toggleFlyout();if(this.viewModel.activeFlyout.get()===d)this.viewModel.activeFlyout.set(null);else{this.viewModel.activeFlyout.get()&&this.viewModel.activeFlyout.get().toggleFlyout();var a=$(b).offset(),e=$(b).outerHeight();$(this.flyoutRegion).css({left:a.left,top:a.top-$(b).parent().outerHeight()+e});this.viewModel.activeFlyout.set(d)}};b.prototype.handleTouchStart=function(){if(!this._firstEvent)this._firstEvent="touch start",this._beginLongPress();
return true};b.prototype.handleMouseDown=function(){if(!this._firstEvent)this._firstEvent="mouse down",this._beginLongPress();return true};b.prototype.handleTouchEnd=function(){if(this._firstEvent==="touch start")this._firstEvent=null,this._cancelLongPress();return true};b.prototype.handleMouseUp=function(){if(this._firstEvent==="mouse down")this._firstEvent=null,this._cancelLongPress();return true};b.prototype.handleMouseOut=function(){if(this._firstEvent==="mouse down")this._firstEvent=null,this._cancelLongPress();
return true};b.prototype.handleTouchCancel=function(){if(this._firstEvent==="touch start")this._firstEvent=null,this._cancelLongPress();return true};b.prototype.handleTouchMove=function(){if(this._firstEvent==="touch start")this._firstEvent=null,this._cancelLongPress();return true};b.prototype._beginLongPress=function(){var a=this;this._longPressTimer&&clearTimeout(this._longPressTimer);this._longPressTimer=setTimeout(function(){a.app.command("ActivateView").execute("LogView")},this._pressLengthMs)};
b.prototype._cancelLongPress=function(){if(this._longPressTimer)clearTimeout(this._longPressTimer),this._longPressTimer=null};return b}(d.framework.ui.ViewBase);e.TabbedToolbarView=f})(e.toolbar||(e.toolbar={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.toolbarVisible=new Observable(false);this.toolbarGroups=new ObservableCollection;this.toolbarTabs=new ObservableCollection;this.currToolbarGrp=new Observable(null);this.activeFlyout=new Observable(null);this._tabbedToolbarViewId=this.toolbarOpenByDefault=null}__extends(b,d);b.prototype.initialize=function(a){d.prototype.initialize.call(this,a);if(a){var b=a.toolbarGroupRefs;
if(b){for(var f=0;f<b.length;f++){var i=this.app.toolbarGroupRegistry.getToolbarGroupById(b[f]);if(i){this.toolbarGroups.addItem(i);i.selected=new Observable(false);var l=new e.ToolbarTabViewModel(this.app,this.libraryId);l.group.set(i);l.title.sync(i.name);l.tooltip.sync(i.tooltip);i.isActive.sync(l.isActive);this.toolbarTabs.addItem(l)}}this.toolbarTabs.getLength()>0&&(l=this.toolbarTabs.getAt(0),l.isActive.set(true),this.currToolbarGrp.set(l.group.get()));a.registerToggleCommand!==false&&this.toolbarGroups.getLength()!==
0&&(this.app.commandRegistry.command("ToggleToolbar").register(this,this._executeToggleToolbar,this._isPresent),this.app.commandRegistry.command("OpenToolbar").register(this,this._executeOpenToolbar,this._isClosed),this.app.commandRegistry.command("CloseToolbar").register(this,this._executeCloseToolbar,this._isOpen));this.handleDisabledItems(this.toolbarGroups.get())}this.toolbarOpenByDefault=a.toolbarOpenByDefault!=void 0?a.toolbarOpenByDefault:false}};b.prototype.registerTabbedToolbarViewId=function(a){if(a&&
!this._tabbedToolbarViewId)this._tabbedToolbarViewId=a,this._setToolbarInitialVisibility()};b.prototype.handleDisabledItems=function(a,b){var d;try{for(var e=0;e<a.length;e++)d=a[e],d.type==="toolbarGroup"&&(d.areAllHidden&&d.disabled.set(d.areAllHidden(d.items)),this.handleDisabledItems(d.items.get(),d)),d.disabled.bind(d,function(){b&&b.areAllHidden&&b.disabled.set(b.areAllHidden(b.items))})}catch(f){this.app.trace.error("Error occurred while setting CSS class for toolbar items: "+f)}};b.prototype._setToolbarInitialVisibility=
function(){var a=this,b=function(){a.toolbarOpenByDefault&&a.app.command("ActivateView").execute(a._tabbedToolbarViewId);a.toolbarVisible.set(a.toolbarOpenByDefault)};if(this.app.site!=null&&this.app.site.isInitialized)b();else this.app.event("SiteInitializedEvent").once(this,b)};b.prototype._executeToggleToolbar=function(){var a=this.app.viewManager.getViewById(this._tabbedToolbarViewId);this.app.configuration.mobileMode?this.app.command("ActivateView").execute(a.id):this.app.command("ToggleView").execute(a.id);
this.app.command("RecenterMapOnNextMapResize").execute();this.app.event("ApplicationResizedEvent").publish();this.app.event("ToolbarStateChangedEvent").publish(a.isActive)};b.prototype._executeOpenToolbar=function(){var a=this.app.viewManager.getViewById(this._tabbedToolbarViewId);a.isActive||this.app.command("ActivateView").execute(a.id)};b.prototype._executeCloseToolbar=function(){var a=this.app.viewManager.getViewById(this._tabbedToolbarViewId);a.isActive&&this.app.command("DeactivateView").execute(a.id)};
b.prototype._isPresent=function(){return this.toolbarGroups&&this.toolbarGroups.getLength()>0};b.prototype._isOpen=function(){var a=this.app.viewManager.getViewById(this._tabbedToolbarViewId);return a?a.isActive:null};b.prototype._isClosed=function(){var a=this.app.viewManager.getViewById(this._tabbedToolbarViewId);return a?!a.isActive:null};return b}(d.framework.ui.ViewModelBase);e.TabbedToolbarViewModel=f})(e.toolbar||(e.toolbar={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){var f=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.handleToolbarItemClick=function(a,b,d){d.execute()};a.prototype.resolveWidget=function(a,d){b.prototype.resolveWidget.call(this,a,d);if(a==="RegionWidget"&&d.regionName){var e=this.app.viewManager.createView({markupResource:"Mapping/modules/Toolbar/Templates/ToolbarRegionTemplate.html"});e.app=this.app;e.libraryId=this.libraryId;e.attach(d);
return e}return null};a.prototype.handleClickClose=function(){this.app.command("ClearActiveTool").execute()};return a}(d.framework.ui.ViewBase);e.TransientView=f})(e.transients||(e.transients={}))})(e.toolbar||(e.toolbar={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){var f=function(b){function a(){b.apply(this,arguments);this.items=new ObservableCollection([]);this.name=new Observable(null);this.hasNeighbour=new Observable(false)}__extends(a,b);a.prototype.initialize=function(a){b.prototype.initialize.call(this,a)};return a}(d.framework.ui.ViewModelBase);e.TransientViewModel=f})(e.transients||(e.transients={}))})(e.toolbar||(e.toolbar={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping=
{}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(d){function b(){d.apply(this,arguments);this.cssClasses={activeTool:"active-tool"}}__extends(b,d);b.prototype.initialize=function(a){d.prototype.initialize.call(this,a);a.tools&&this.app&&this.app.toolRegistry&&this.app.toolRegistry.createTools(a.tools,true);if(!a.hasOwnProperty("showStatusMessages"))a.showStatusMessages=true;a.showStatusMessages&&(this.app.event("ActiveToolChangedEvent").subscribe(this,this.activeToolChanged),
this.app.event("ToolInputMethodChangedEvent").subscribe(this,this.toolInputMethodChanged))};b.prototype.activeToolChanged=function(a){if(this.configuration.showStatusMessages)if(!a||!a.tool)a=a.previousTool.name+"StatusMessageView",this.app.command("RemoveStatus").execute(a);else{var b=a.tool;if(b.statusText){var a=b.name+"StatusMessageView",d=b.statusText;b.libraryId&&d&&d.length>0&&d[0]==="@"&&(d=this.app.getResource(b.libraryId,d.substring(1)));var f=b.closeTitle||this.getResource("language-common-deactivate-tool");
b.libraryId&&f&&f.length>0&&f[0]==="@"&&(f=this.app.getResource(b.libraryId,f.substring(1)));d=new e.infrastructure.commandArgs.AddStatusArgs(d);d.id=a;d.closeTitle=f;d.imageUri=b.iconUri;d.timeoutMS=0;d.userClosedCallback=function(){return b.setActive(false)};d.statusClass=b.statusClass||this.cssClasses.activeTool;this.app.command("AddStatus").execute(d);this.app.command("ScreenReaderNarrate").execute(b.statusText)}}};b.prototype.toolInputMethodChanged=function(a){if(this.configuration.showStatusMessages&&
a&&a.tool){var b=a.tool,d=(a=(a.newMethod||null)===e.infrastructure.accessibility.InputMethod.KEYBOARD)?b.keyboardStatusText:b.statusText;b.libraryId&&d&&d.length>0&&d[0]==="@"&&(d=this.app.getResource(b.libraryId,d.substring(1)));if(d){var b=b.name+"StatusMessageView",f=new e.infrastructure.commandArgs.AddStatusArgs(d);f.id=b;this.app.command("UpdateStatus").execute(f);a&&this.app.command("ScreenReaderNarrate").execute(d)}}};return b}(d.framework.application.ModuleBase);f.ToolsModule=i})(f.tools||
(f.tools={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,b){d.call(this,a,b);this.app.command("SignIn").canExecuteChanged.subscribe(this,this._handleCanExecuteSignInChanged)}__extends(b,d);b.prototype._handleCanExecuteSignInChanged=function(){this.app.command("SignIn").canExecute()?this.isActive||this.app.viewManager.activateView(this):this.isActive&&this.app.viewManager.deactivateView(this)};b.prototype.handleSignInClick=function(){this.app.command("SignIn").execute(null)};
return b}(d.framework.ui.ViewBase);e.SignInView=f})(e.User||(e.User={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.linkColor=new Observable("#1B7DBF")}__extends(b,d);b.prototype.initialize=function(a){a.linkColor&&this.linkColor.set(a.linkColor)};return b}(d.framework.ui.ViewModelBase);e.SignInViewModel=f})(e.User||(e.User={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(d){function b(a,b){d.call(this,a,b);this.app.command("SignIn").register(this,this._executeSignIn,this._canExecuteSignIn);this.app.command("SignOut").register(this,this._executeSignOut,this._canExecuteSignOut)}__extends(b,d);b.prototype.initialize=function(a){d.prototype.initialize.call(this,a);if((a=this.app.site)&&a.isInitialized)this._handleSiteInitialized(a);else this.app.event("SiteInitializedEvent").once(this,this._handleSiteInitialized);
this.app.event("ApplicationOfflineEvent").subscribe(this,this._handleApplicationOfflineChanged);this.app.event("ApplicationOnlineEvent").subscribe(this,this._handleApplicationOfflineChanged);this.app.event("SiteAuthorizationFailedEvent").subscribe(this,this._handleSiteAuthorizationFailedEvent)};b.prototype._canExecuteSignIn=function(){return!!this.app.site&&this.app.site.canSignIn()&&!this.app.isOffline.get()};b.prototype._canExecuteSignOut=function(){return!!this.app.site&&this.app.site.canSignOut()&&
!this.app.isOffline.get()};b.prototype._executeSignIn=function(a){var b=new e.infrastructure.eventArgs.UserEventArgs;this.app.event("UserSigningInEvent").publish(b);b.isCancelled||this.app.site.signIn(a)};b.prototype._executeSignOut=function(){var a=new e.infrastructure.eventArgs.UserEventArgs;this.app.event("UserSigningOutEvent").publish(a);a.isCancelled||this.app.site.signOut()};b.prototype._handleSiteInitialized=function(){this.app.command("SignIn").raiseCanExecuteChanged();this.app.command("SignOut").raiseCanExecuteChanged()};
b.prototype._handleApplicationOfflineChanged=function(){this.app.command("SignIn").raiseCanExecuteChanged();this.app.command("SignOut").raiseCanExecuteChanged()};b.prototype._handleSiteAuthorizationFailedEvent=function(){this.app.command("SignIn").raiseCanExecuteChanged();this.app.command("SignOut").raiseCanExecuteChanged()};return b}(d.framework.application.ModuleBase);f.UserModule=i})(f.User||(f.User={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.expanded=new Observable(false);this.userName=new Observable("");this.backgroundColor=new Observable("transparent")}__extends(b,d);b.prototype.initialize=function(a){this.linkColor=new Observable(a.linkColor||"#1B7DBF");this.textColor=new Observable(a.textColor||"#333333");this._backgroundColor=a.backgroundColor||"#FFFFFF";if((a=this.app.site)&&a.isInitialized)this._handleSiteInitialized(a);
else this.app.event("SiteInitializedEvent").once(this,this._handleSiteInitialized)};b.prototype.setExpanded=function(a){this.expanded.set(a);this.backgroundColor.set(a?this._backgroundColor:"transparent")};b.prototype._handleSiteInitialized=function(a){this.userName.set(a.principal.label)};return b}(d.framework.ui.ViewModelBase);e.UserInfoViewModel=f})(e.User||(e.User={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||
(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,b){d.call(this,a,b);this._unclickHandler=null;this.app.command("SignOut").canExecuteChanged.subscribe(this,this._handleCanExecuteSignOutChanged)}__extends(b,d);b.prototype.handleExpanderClick=function(){this.viewModel.expanded.get()?this._hideUserInfo():this._showUserInfo()};b.prototype.handleSignOutClick=function(){this._hideUserInfo();this.app.command("SignOut").execute()};b.prototype._showUserInfo=function(){var a=
this;$(document).bind("mousedown",this,this._unclickHandler=function(b){$(b.target).parents().is(a.root)||a._hideUserInfo()});this.viewModel.setExpanded(true)};b.prototype._hideUserInfo=function(){if(this._unclickHandler)$(document).unbind("mousedown",this._unclickHandler),this._unclickHandler=null;this.viewModel.setExpanded(false)};b.prototype._handleCanExecuteSignOutChanged=function(){this.app.command("SignOut").canExecute()?this.app.viewManager.activateView(this):this.app.viewManager.deactivateView(this)};
return b}(d.framework.ui.ViewBase);e.UserInfoView=f})(e.User||(e.User={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){var i=function(d){function b(a,b){d.call(this,a,b);this.displayName=this.app.getResource(b,"language-visualization-none")}__extends(b,d);b.prototype.initialize=function(a){d.prototype.initialize.call(this,a);this.isEnabled.set(true);this.isSupported.set(true)};b.prototype.canSupport=function(){return true};b.prototype.handleCurrentLayerChanged=function(){};b.prototype.handleActivate=function(){this.app.command("RemoveVisualization").execute({gcxLayer:this.currentLayer.get()})};
b.prototype.handleApply=function(){this.app.command("RemoveVisualization").execute({gcxLayer:this.currentLayer.get()})};return b}(d.infrastructure.visualization.VisualizationProviderBase);f.SimpleVisualizationProvider=i})(f.visualization||(f.visualization={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.initialize=function(a){d.prototype.initialize.call(this,a);this._registerCommandsAndEvents()};b.prototype._registerCommandsAndEvents=function(){this.app.command("RemoveVisualization").register(this,this._executeRemoveVisualization,this._canExecuteRemoveVisualization)};b.prototype._executeRemoveVisualization=function(a){a=this._getGeocortexLayer(a);this.app.command("RemoveHeatMap").execute({gcxLayer:a});
this.app.command("RemoveClusterLayer").execute({gcxLayer:a})};b.prototype._canExecuteRemoveVisualization=function(a){return(a=this._getGeocortexLayer(a))&&!!a.mapService};b.prototype._getGeocortexLayer=function(a){return typeof a==="string"?!this.app.site||!this.app.site.essentialsMap?null:this.app.site.essentialsMap.allLayers().filter(function(b){return a===b.mapService.id})[0]:a.gcxLayer};return b}(d.framework.application.ModuleBase);e.VisualizationModule=f})(e.visualization||(e.visualization={}))})(e.modules||
(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){var i=function(d){function b(a,b){d.call(this,a,b);this._registerCommandsAndEvents()}__extends(b,d);b.prototype._registerCommandsAndEvents=function(){this.app.command("ShowVisualizationView").register(this,this._executeShowVisualizationView,this._canExecuteShowVisualizationView)};b.prototype._executeShowVisualizationView=function(a){a=this._getGeocortexLayer(a);this.viewModel.selectedLayer.set(a);this.app.command("ActivateView").execute(this.id);
this.app.event("VisualizationViewActivatedEvent").publish(a)};b.prototype._canExecuteShowVisualizationView=function(a){var b=this;if(a=this._getGeocortexLayer(a))return this.viewModel&&this.viewModel.supportsVisualization(a);else if(!this.app.site.serviceLayersLoaded)this.app.event("SiteServiceLayersLoadedEvent").once(this,function(){b.app.command("ShowVisualizationView").raiseCanExecuteChanged()});return false};b.prototype.handleApplyButtonClick=function(){this.viewModel.updateVisualization()};b.prototype.handleDoneButtonClick=
function(){this.viewModel.updateVisualization();this.app.command("SwitchToLayerView").execute()};b.prototype._getGeocortexLayer=function(a){return typeof a==="string"?!this.app.site||!this.app.site.essentialsMap?null:this.app.site.essentialsMap.allLayers().filter(function(b){return a===b.mapService.id})[0]:a};return b}(d.infrastructure.ui.components.SmartPanel.SmartPanelView);f.VisualizationView=i})(f.visualization||(f.visualization={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(e){function b(){e.apply(this,arguments);this._activeProvider=null;this._providers=[];this._simpleViewProvider=null;this.selectedLayer=new Observable(null);this.supportedProviders=new ObservableCollection([]);this.selectedVisualization=new Observable(null);this.isSimpleView=new Observable(false)}__extends(b,e);b.prototype.initialize=function(a){e.prototype.initialize.call(this,a);this._simpleViewProvider=this._loadProvider({type:"geocortex.essentialsHtmlViewer.mapping.modules.visualization.SimpleVisualizationProvider",
displayName:a.defaultDisplayName});a.visualizationProviders&&this._loadProviders(a.visualizationProviders);this.selectedLayer.bind(this,this._handleLayerChange);this.selectedVisualization.bind(this,this._handleVisualizationChanged)};b.prototype.supportsVisualization=function(a){for(var b=0;b<this._providers.length;b++){var d=this._providers[b];if(this._isVisualization(d)&&d.canSupport(a))return true}return false};b.prototype.updateVisualization=function(){this._activeProvider&&this._activeProvider.handleApply()};
b.prototype._isVisualization=function(a){return!(a instanceof d.essentialsHtmlViewer.mapping.modules.visualization.SimpleVisualizationProvider)};b.prototype._handleLayerChange=function(a){var b=this;this.supportedProviders.clear();for(var d=0;d<this._providers.length;d++){var e=this._providers[d];e.currentLayer.set(a);e.isSupported.get()&&this.supportedProviders.addItem(e)}a=this._simpleViewProvider.displayName;d=this.supportedProviders.get().filter(function(a){return b._isVisualization(a)&&a.isEnabled.get()});
if(d.length>0)a=d[0].displayName;else if(d=this._providers.filter(function(a){return b._isVisualization(a)&&a.isEnabled.get()}),d.length>0)a=d[0].displayName;this.selectedVisualization.set(a)};b.prototype._handleVisualizationChanged=function(a){var b=this._providers.filter(function(b){return b.displayName===a})[0];b?(this._activeProvider=b,this._activeProvider.handleActivate(),this._activeProvider.isSupported.get()?(this.isSimpleView.set(!this._isVisualization(this._activeProvider)),b.viewId&&(b=
this.app.viewManager.getViewById(b.viewId))&&this.app.viewManager.activateView(b)):(this._activeProvider=this._simpleViewProvider,this.isSimpleView.set(true))):this.app.trace.warning("Could not find a visualization provider with name {0}".format(a))};b.prototype._loadProviders=function(a){for(var b=this,d=0;d<a.length;d++){var e=a[d];if(e.libraryId&&!this.app.allLibrariesLoaded)this.app.event("ViewerLibrariesDownloadedEvent").once(this,function(){b._loadProvider(e)});else this._loadProvider(e)}};
b.prototype._loadProvider=function(a){var b;if(b=dojo.getObject(a.type))return b=new b(this.app,a.libraryId||this.libraryId),b.initialize(a),this._providers.push(b),b;else this.app.trace.error("{0} can't find visualization provider typed {1}".format(this.id,a.type))};return b}(e.infrastructure.ui.components.SmartPanel.SmartPanelViewModel);f.VisualizationViewModel=i})(f.visualization||(f.visualization={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,b){e.call(this,a,b);this.toolbar=this.drawType=this.defaultButton=this.currentExtentImage=this.showCapturedMessage=this.graphicsLayer=this.geometryTypeCssDictionary=this.activityContext=this._inputMethodChangeHandle=null;this.defaultFormWidth=800;this.defaultFormHeight=600;this.statusMessageID="DisplayCaptureGeometryMessage";this.showCaptureStatusMessages=true;this.workflowFormContent=new Observable(null);
this.title=new Observable(null);this.showTitleInFormBody=new Observable(false);this.buttons=new ObservableCollection([]);this.formWidth=new Observable(this.defaultFormWidth);this.formHeight=new Observable(this.defaultFormHeight);this.showRequiredValidationMessage=new Observable(true);this.capturedMessageVisible=new Observable(false);this.showCapturedGeometry=false;this.showCurrentExtentOption=new Observable(false);this.geometryRequired=false;this.instructionMessage=this.inputGeometry=this.currentExtentLabel=
this.requiredMessage=null;this.captureTypes=new ObservableCollection([]);this.activeCaptureType=null;this.defaultCaptureType=new Observable(null);this.validationResults=new ObservableCollection([]);this.customGeometryInstructions=null;this.autoSubmit=false;this.app.event("ViewUnhostedEvent").subscribe(this,this.viewUnhostedHandler);this.app.command("SetActiveTool").preExecute.subscribe(this,this.cleanUp);this.app.command("ClearActiveTool").preExecute.subscribe(this,this.cleanUp);this.app.trace.debug("DisplayCaptureGeometryViewModel: object constructed.")}
__extends(b,e);b.prototype.initialize=function(a){var b=this,e=[],f=null,j=null,i=this.activityContext.getValue("CaptureTypes");a&&a.hasOwnProperty("showTitleInFormBody")&&this.showTitleInFormBody.set(a.showTitleInFormBody||false);for(var a=this.activityContext.getValue("DefaultCaptureType"),k=0;k<i.length;k++){f=i[k];if(f==="CurrentExtent")this.showCurrentExtentOption=new Observable(true);j={typeName:null,tooltip:null,isSelected:new Observable(false)};j.typeName=f;j.tooltip=this.getCaptureGeometryTooltip(f);
if(this.geometryTypeCssDictionary)j.className=this.geometryTypeCssDictionary[f];if(f==a)this.activeCaptureType=j,j.isSelected.set(true),this.setDrawMode(this.app.map,j,false);e.push(j)}this.captureTypes.addItems(e);this.defaultCaptureType=this.activityContext.getValue("DefaultCaptureType");this.inputGeometry=this.activityContext.getValue("InputGeometry");this.instructionMessage=this.activityContext.getValue("Message");this.requiredMessage=this.activityContext.getValue("RequiredMessage")||this.app.getResource(this.libraryId,
"language-capture-geometry-required-message");this.currentExtentLabel=this.activityContext.getValue("CurrentExtentLabel")||this.app.getResource(this.libraryId,"language-current_extent");this.showCapturedGeometry=this.activityContext.getValue("ShowCapturedGeometry");this.geometryRequired=this.activityContext.getValue("GeometryRequired");this.customGeometryInstructions=this.activityContext.getValue("CustomGeometryInstructions");this.autoSubmit=this.activityContext.getValue("AutoSubmit");if(this.showCapturedGeometry)this.graphicsLayer=
this.app.map.graphics;a==="CurrentExtent"&&this.setDrawMode(this.app.map,j,true);this.inputGeometry&&(this.addGraphic(this.inputGeometry,null,this.app.map),this.setCaptureResult(this.inputGeometry));f=this.activityContext.getValue("Buttons");e=[];if(f)for(j=0;j<f.length;j++){i=new d.forms.FormButton(f[j].Label,f[j].Value,f[j].CausesValidation,f[j].IsDefault);if(f[j].IsDefault)this.defaultButton=i;e.push(i)}else f=this.defaultButton=new d.forms.FormButton("OK","OK",true,true),e.push(f),e.push(new d.forms.FormButton("Cancel",
"Cancel",false,false));this.buttons=new ObservableCollection(e);this.app.trace.debug("DisplayCaptureGeometryViewModel: object initialized.");this.app.event("MapMouseDownEvent").subscribe(this,function(a){a.which===3&&b.toolbar&&b.cleanUp()})};b.prototype.clearGraphics=function(){this.graphicsLayer&&this.graphicsLayer.clear()};b.prototype.addGraphic=function(a,b,d){var e=null,e=null;if(this.showCapturedGeometry&&a&&d)b||(b=this._getDrawTool(d)),e=a.type,e=e==="point"||e==="multipoint"?b.markerSymbol:
e==="line"||e==="polyline"?b.lineSymbol:b.fillSymbol,this.graphicsLayer.add(new esri.Graphic(a,e))};b.prototype.setCaptureResult=function(a){!a&&this.geometryRequired?this.showRequiredValidationMessage.set(true):(this.capturedMessageVisible.set(this.activityContext.getValue("ShowCapturedMessage")),this.showRequiredValidationMessage.set(false),a.type==="extent"&&(a=d.essentials.GeometryUtilities.envelopeToPolygon(a)),this.activityContext.setValue("Result",a))};b.prototype._getDrawTool=function(a){if(this.toolbar==
null)this.toolbar=this.app.accessibilityManager.createComponent("geocortex.accessibility.draw",a,{showTooltips:false}),dojo.connect(this.toolbar,"onDrawEnd",dojo.hitch(this,this.drawEnd));return this.toolbar};b.prototype.setDrawMode=function(a,b,e){if(a)if(e)this.cleanUp(),this.addGraphic(a.extent,null,a),this.setCaptureResult(a.extent);else if(esri.toolbars&&esri.toolbars.Draw){this.app.command("ShowMap").execute();this.app.command("ClearActiveTool").execute();a=this._getDrawTool(a);this.drawType=
d.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.getEsriGeometryType(b.typeName);this.app.trace.debug("DisplayCaptureGeometryViewModel: setDrawMode :: Draw mode set.");if(!this._inputMethodChangeHandle&&a instanceof d.essentialsHtmlViewer.mapping.infrastructure.accessibility.Draw)this._inputMethodChangeHandle=dojo.aspect.after(a,"onInputMethodChange",dojo.hitch(this,"_onInputMethodChange"),true);a.deactivate();a.activate(this.drawType);this.app.trace.debug("DisplayCaptureGeometryViewModel: setDrawMode :: Toolbar activated.");
this.showCaptureStatusMessages&&(a=d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowModule.getCaptureGeometryStatusMessage(this.app,this.libraryId,this.drawType,true),b=new d.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs(a,null,dojo.hitch(this,this.userCancelled),b.className,this.statusMessageID),this.app.command("AddStatus").execute(b),this.app.trace.debug("DisplayCaptureGeometryViewModel: setDrawMode :: Status Message assigned and displayed."))}};b.prototype.setCaptureTypeSelection=
function(a){this.activeCaptureType!=null&&this.activeCaptureType.isSelected.set(false);this.activeCaptureType=a;a.isSelected.set(true)};b.prototype.drawEnd=function(a){var b=this.app.map,d=this._getDrawTool(b);if(a.type!="multipoint"||a.points.length>0)this.setCaptureResult(a),this.addGraphic(a,d,b);this.app.command("ActivateContainersForWorkflow").execute(this.activityContext.workflow().id);this.cleanUp();this.app.trace.debug("DisplayCaptureGeometryViewModel: drawEnd :: draw ended.");this.autoSubmit&&
this.app.event("Submit").publish(this)};b.prototype.cleanUp=function(){this.showCaptureStatusMessages&&this.app.command("RemoveStatus").execute(this.statusMessageID);if(this.activeCaptureType!=null)this.activeCaptureType.isSelected.set(false),this.activeCaptureType=null;if(this._inputMethodChangeHandle)this._inputMethodChangeHandle.remove(),this._inputMethodChangeHandle=null;if(this.toolbar)this.toolbar.deactivate(),this.toolbar=null;this.app.trace.debug("DisplayCaptureGeometryViewModel: cleanUp :: clean up finished.")};
b.prototype.userCancelled=function(){this._getDrawTool(this.app.map).finishDrawing();this.cleanUp()};b.prototype.validate=function(){var a=[];this.geometryRequired&&this.showRequiredValidationMessage&&this.showRequiredValidationMessage.get()&&a.push(new d.forms.items.validation.ValidationResult(false,this.requiredMessage));return a};b.prototype.viewUnhostedHandler=function(a){a.view.viewModel==this&&this.cleanUp()};b.prototype.getCaptureGeometryTooltip=function(a){switch(a){case "MapPoint":return this.getResource("language-capture-geometry-point_tooltip");
case "MultiPoint":return this.getResource("language-capture-geometry-multi-point_tooltip");case "Polyline":return this.getResource("language-capture-geometry-polyline_tooltip");case "FreehandPolyline":return this.getResource("language-capture-geometry-freehand-polyline_tooltip");case "Polygon":return this.getResource("language-capture-geometry-polygon_tooltip");case "Extent":return this.getResource("language-capture-geometry-rectangle_tooltip")}return this.getResource("language-current_extent_tooltip")};
b.prototype._onInputMethodChange=function(a){if(this.showCaptureStatusMessages)a=d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowModule.getCaptureGeometryStatusMessage(this.app,this.libraryId,this.drawType,true,a?a.newMethod:null),a=new d.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs(a),a.id=this.statusMessageID,this.app.command("UpdateStatus").execute(a),this.app.trace.debug("DisplayCaptureGeometryViewModel: _onInputMethodChange :: Status message updated.")};return b}(d.framework.ui.ViewModelBase);
e.DisplayCaptureGeometryViewModel=f})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,b){d.call(this,a,b);this.token=this.workflowFormContent=this.activityContext=null;this.token=this.app.event("Submit").subscribe(this,this.submitRequest)}__extends(b,d);b.prototype.attach=function(a){if(!a)throw Error("{0}: A view model must be specified to attach to.".format(this.id));d.prototype.attach.call(this,a);this.title.set(this.viewModel.title.get());this.app.event("ViewActivatedEvent").publish(this);
this.app.viewManager.notifyDimensionsChanged(this)};b.prototype.deactivated=function(){d.prototype.deactivated.call(this);this._deactivated()};b.prototype.handleClickButton=function(a,b,d){this.viewModel.clearGraphics();this.finishFormWithButton(d)};b.prototype.handleCaptureTypeSelection=function(a,b,d){this.viewModel.clearGraphics();this.viewModel.setDrawMode(this.app.map,d,b&&b.id==="CurrentExtent");this.viewModel.setCaptureTypeSelection(d)};b.prototype.submitRequest=function(){this.viewModel.defaultButton!=
null&&this.finishFormWithButton(this.viewModel.defaultButton)};b.prototype.finishFormWithButton=function(a){this._processForm(this.activityContext,a)&&(this.workflowContainer&&this.workflowContainer.view&&(this.workflowContainer.hasContent.set(false),this.app.viewManager.notifyDimensionsChanged(this.workflowContainer.view)),this.app.event("Submit").unsubscribe(this.token),this.app.viewManager.destroyView(this))};b.prototype._processForm=function(a,b){var d=null,e=null;if(b&&b.causesValidation&&b.causesValidation.get()){for(var d=
this.viewModel.validate(),e=[],f=0;f<d.length;++f)d[f].isValid==false&&e.push(d[f]);if(e&&e.length>0)return this.viewModel.validationResults.set(e),false;else this.viewModel.validationResults.clear()}a.setValue("ButtonResultValue",b.value.get());a.completeActivity();return true};b.prototype._deactivated=function(){this.viewModel.clearGraphics()};return b}(d.framework.ui.ViewBase);e.DisplayCaptureGeometryView=f})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,b){d.call(this,a,b)}__extends(b,d);b.prototype.attach=function(a){if(!a)throw Error("{0}: A view model must be specified to attach to.".format(this.id));d.prototype.attach.call(this,a);this.title.set(this.viewModel.title.get());this.workflowContainer&&this.workflowContainer.view&&this.app.viewManager.notifyDimensionsChanged(this.workflowContainer.view)};b.prototype.handleClickButton=function(a,b,d){this.activityContext&&
(this.activityContext.setValue("ButtonResultValue",d.value.get()),this.activityContext.completeActivity());this.workflowContainer&&(this.workflowContainer.hasContent.set(false),this.app.viewManager.notifyDimensionsChanged(this.workflowContainer.view));this.app.viewManager.destroyView(this)};return b}(d.framework.ui.ViewBase);e.DisplayHyperlinkView=f})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||
(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){var i=function(f){function b(a,b){f.call(this,a,b);this._defaultFeatureSetCollection=this._defaultContainerRegionName=this._iconMap=this._workflowContainers=this._lastOpenedCollectionId=this._startupWorkflowIds=this.defaultContainerName=this._defaultContainerIconUri=this._defaultContainerTitle=this._containerConfigs=this._eventListenersToken=this._eventListenersResults=this.configuration=this.dispatcher=null}__extends(b,f);b.prototype.initialize=
function(a){var b=this;this._eventListenersResults={};this._eventListenersToken=[];this.configuration=a;f.prototype.initialize.call(this,arguments);this.defaultContainerName="Default";if(a&&a.showCaptureStatusMessages==void 0)a.showCaptureStatusMessages=true;if(!this._defaultFeatureSetCollection)this._defaultFeatureSetCollection=new e.infrastructure.FeatureSetCollection,this._defaultFeatureSetCollection.sourceName="Workflow",this._defaultFeatureSetCollection.displayName.set("Workflow"),this.app.featureSetManager.addCollection(this._defaultFeatureSetCollection);
this._iconMap=a.icons?a.icons:{};this._workflowContainers={};this._defaultContainerTitle=a.defaultContainerTitle||"Workflow";this._defaultContainerRegionName=a.defaultContainerRegionName||"ModalWindowRegion";this._defaultContainerIconUri=a.defaultContainerIconUri||"Resources/Images/workflow-24.png";this._containerConfigs={};for(var h=0;h<a.containers.length;++h){var i=a.containers[h],k=new d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowContainerConfig(i);k.iconUri.set(i.iconUri||this._defaultContainerIconUri);
k.title.set(i.title);this._containerConfigs[k.name]=k}this._startupWorkflowIds=[];if(a.startupWorkflows&&a.startupWorkflows.length)for(h=0;h<a.startupWorkflows.length;h++)(i=a.startupWorkflows[h])&&(i.id?this._startupWorkflowIds.push(i.id):this._startupWorkflowIds.push(i));h=this._getUrlParameterIgnoreCase("run")||this._getUrlParameterIgnoreCase("runWorkflow")||this._getUrlParameterIgnoreCase("runWorkflowById");if(this.app.urlParameters&&h){var l;this.app.urlParameters[h]&&(l=this.app.urlParameters[h].split(","));
for(h=0;h<l.length;h++)i=l[h],dojo.indexOf(this._startupWorkflowIds,i)<0&&this._startupWorkflowIds.push(i)}this.dispatcher=new d.workflow.DefaultActivityDispatcher(function(a,d){b.app.event("WorkflowActivityDispatchError").publish({error:a,context:d});b.app.event("WorkflowActivityDispatchErrorEvent").publish({error:a,context:d})},function(a){b.app.event("WorkflowActivityBegin").publish(a.workflow());b.app.event("WorkflowActivityStartedEvent").publish(a.workflow())},function(a){b.app.event("WorkflowActivityComplete").publish(a.workflow());
b.app.event("WorkflowActivityCompletedEvent").publish(a.workflow())},function(a,d){b.app.event("WorkflowCompletedEvent").publish(d,a);b.app.event("WorkflowComplete").publish(d,a)},function(a,d){var e=d||a.workflow();e&&(b.app.event("WorkflowAbortedEvent").publish(e),b.app.trace.debug("Workflow '{0}' with id '{1}' aborted by the '{2}' activity.".format(e.displayName,e.id,a.getDisplayName())))},function(a,d){b.app.event("WorkflowWebRequestStartedEvent").publish(a,d)},function(a,d){b.app.event("WorkflowWebRequestCompletedEvent").publish(a,
d)});this.dispatcher.handleUnhandledActivityErrorFunction=function(a){b.app.trace.error(a.toString())};this.dispatcher._showDebugHandler=function(a,d){b._showDebugHandler(b,a,d)};this.dispatcher.handleOpenReportUrlFunction=function(a,d){b._handleOpenReportUrl(b,a,d)};this.app.event("WorkflowCompletedEvent").subscribe(this,function(a){b.cleanupViewsForWorkflow(a)});this.app.event("WorkflowAbortedEvent").subscribe(this,function(a){b.cleanupViewsForWorkflow(a)});this.app.event("ActiveToolChanged").subscribe(this,
function(){b.dispatcher.abortMapBasedActivity()});this.app.event("WorkflowActivityDispatchErrorEvent").subscribe(this,function(a){var d=a.error,a=a.context,d=b.app.getResource(b.libraryId,"language-workflow-error").format(d.message);b.app.command("Alert").execute(d);b.app.trace.error(d);a&&a.workflow&&b.cleanupViewsForWorkflow(a.workflow())});this.app.event("FSMCollectionOpenedEvent").subscribe(this,function(a){if(a&&a.featureSetCollection)b._lastOpenedCollectionId=a.featureSetCollection.id});d.forms.renderFormItem=
function(a){var e=null;b.configuration&&b.configuration.hasOwnProperty("formItems")&&(e=b.configuration.formItems);var f=null;a&&a.formDefinition&&(f=a.formDefinition.attached_application);return d.essentialsHtmlViewer.mapping.modules.workflow.forms.FormRenderer.getItemView(f,a,e).root};this.registerActivityHandlers();this.registerCommands();if(this.app.site&&this.app.site.isInitialized)this._onSiteInitialized(this.app.site);else this.app.event("SiteInitializedEvent").once(this,this._onSiteInitialized);
a&&a.tools&&this.app&&this.app.toolRegistry&&this.app.toolRegistry.createTools(a.tools,true)};b.prototype._getUrlParameterIgnoreCase=function(a){if(this.app.urlParameters)for(var b in this.app.urlParameters)if(this.app.urlParameters.hasOwnProperty(b)&&!String.isNullOrEmpty(b)&&!String.isNullOrEmpty(a)&&b.toLowerCase()===String(a).toLowerCase())return b;return null};b.prototype.remapWorkflowContainerIconUri=function(a){var b=null;return b=!this._iconMap||!this._iconMap[a]?String.isNullOrEmpty(a)?this._defaultContainerIconUri:
a:this._iconMap[a]};b.prototype.shutdown=function(){if(this._eventListenersToken)for(var a=0;a<this._eventListenersToken.length;a++)this._eventListenersToken[a]()};b.prototype._showDebugHandler=function(a,b,e){var f=this,j={typeName:"geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowFormView",markupResource:"Mapping/modules/Workflow/WorkflowFormView.html",isVisible:true,regionName:a._defaultContainerRegionName,libraryId:a.libraryId,iconUri:a.configuration.defaultContainerIconUri,configuration:{activityContext:null}},
i=new d.workflow.ActivityContext(this.dispatcher,0,null,null);j.configuration.activityContext=i;var k=new d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowFormViewModel(a.app);k.activityContext=i;k.initialize({showTitleInFormBody:a.configuration==null?false:a.configuration.showTitleInFormBody||false,formDefinition:b,buttons:[new d.forms.FormButton("OK","OK",false,true)]});var l=a.app.viewManager.createView(j);l.attach(k);l.configuration={};i.completeActivity=function(){f.app.viewManager.destroyView(l);
dojo.isFunction(e)&&e()};a.app.viewManager.activateView(l)};b.prototype._handleOpenReportUrl=function(a,b,e){var f=a.app.viewManager.createView({markup:"Mapping/modules/Workflow/DisplayReportUrlView.html",type:"geocortex.essentialsHtmlViewer.mapping.modules.workflow.DisplayReportUrlView",visible:true,libraryId:a.libraryId,iconUri:a._defaultContainerIconUri}),j=new d.essentialsHtmlViewer.mapping.modules.workflow.DisplayReportUrlViewModel(this.app,this.libraryId);j.app=a.app;j.libraryId=a.libraryId;
j.initialize(b);f.attach(j);f.activityContext=e;f.activityContextCompleteActivity=e.completeActivity;e.completeActivity=function(){a.app.trace.debug("activityContext.completeActivity ignored because the report url view is open")};b=new Observable(this.app.getResource(this.libraryId,"language-workflow-report-url-title"));j=a.getOrCreateContainer("Default");a.displayContainerContent(f,j,b,e)};b.prototype.getOrCreateContainer=function(a){var b=this._containerConfigs[a];b==null&&(b=new d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowContainerConfig({name:a,
regionName:this._defaultContainerRegionName,view:null}),b.iconUri.set(this._defaultContainerIconUri),b.title.set(this._defaultContainerTitle));return b};b.prototype.cleanupViewsForWorkflow=function(a){var b=this._workflowContainers[a.id];b==null&&(b=this._workflowContainers[a.id]=[]);for(var e=0;e<b.length;++e){var f=b[e];d.resourceManager.remove(this.libraryId,f.resourceName,"inv");this.app.viewManager.destroyView(f.view);f.view=null}this._workflowContainers[a.id]=[]};b.prototype.createContainerView=
function(a,b){var e=b.workflow(),f=d.resourceManager.fetch("Mapping/modules/Workflow/WorkflowContainerView.html",this.libraryId,"inv");if(f==null)return this.app.trace.warning("Could not create container '{0}' - markup resource '{1}' could not be found.".format(a.name,"Mapping/modules/Workflow/WorkflowContainerView.html")),false;var j="WorkflowContainerRegion-{0}".format(d.framework.utils.alphaNumericToken()),f=f.replace("!region-name-placeholder!",j),i="DynamicView-{0}-{1}".format(j,e.id);d.resourceManager.register(this.libraryId,
"inv",i,"html",d.framework.utils.base64Encode(f));f={typeName:"geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowContainerView",isVisible:true,regionName:a.regionName,configuration:{internalRegionName:j,showXButton:a.allowClose},libraryId:this.libraryId,isManaged:null,iconUri:null,markupResource:null};f.isManaged=a.isManaged;f.iconUri=a&&a.iconUri?a.iconUri.get():this._defaultContainerIconUri;f.markupResource=i;a.view=this.app.viewManager.createView(f);a.view.activityContext=b;a.internalRegionName=
j;a.activityContext=b;a.resourceName=i;a.view.attach(a);j=this._workflowContainers[e.id];j==null&&(j=this._workflowContainers[e.id]=[]);Array.contains(j,a)||j.push(a);return true};b.prototype.displayContainerContent=function(a,b,d,e){var f=e.workflow();b.view==null&&this.createContainerView(b,e);a.regionName=b.internalRegionName;d!=null&&b.view.viewModel.title.set(d.get());b.showOverlay.set(false);b.hasContent.set(true);b.view.activityContext=e;this.app.viewManager.activateView(b.view);this.app.viewManager.activateView(a);
this.app.command("FocusOnFirstInputInView").execute(a);this.app.viewManager.notifyDimensionsChanged(b.view);a=this._workflowContainers[f.id];a==null&&(a=this._workflowContainers[f.id]=[]);Array.contains(a,b)||a.push(b)};b.prototype.getEssentialsLayerInfoFromLayer=function(a){if(!a)return null;var b=new d.essentials.EssentialsLayerInfo;b.mapServiceUrl=a.mapService.serviceUrl;b.mapServiceId=a.mapService.id;b.token=a.mapService.serviceToken;b.isVisible=a.isVisible();b.isDynamic=a.isDynamic;b.id=a.id;
b.name=a.name;b.displayName=a.displayName;b.layerUrl=b.mapServiceUrl+"/"+(!b.isDynamic?b.id:"dynamicLayer");if(b.isDynamic&&(a=a.mapService.serviceLayer)&&a.dynamicLayerInfos)for(var e=0;e<a.dynamicLayerInfos.length;e++){var f=a.dynamicLayerInfos[e];if(f&&f.id.toString()===b.id){f.source&&(b.layerSourceJson=JSON.stringify(f.source.toJson()));break}}return b};b.prototype.getEssentialsFeatureSetFromFeatureSet=function(a){var b=new d.essentials.EssentialsFeatureSet;b.featureSetId=a.id;b.featureSetDisplayName=
a.displayName.get();b.esriFeatureSet=null;b.layerInfo=null;if(a.esriFeatureSet)a.esriFeatureSet.features=a.esriFeatureSet.features||[],b.esriFeatureSet=a.esriFeatureSet.toJson();if(a.layer)b.layerInfo=this.getEssentialsLayerInfoFromLayer(a.layer);return b};b.prototype.getFeaturesInCollection=function(a,b){var d=[],e=null;a?a&&(e=a=="Active"?this.app.featureSetManager.getCollectionById(this._lastOpenedCollectionId):this.app.featureSetManager.getCollectionById(a)):e=this.app.featureSetManager.getCollectionById(this._lastOpenedCollectionId);
if(e&&e.featureSets&&e.featureSets.getLength()>0)if(b)(j=e.getFeatureSetById(b))&&d.push(this.getEssentialsFeatureSetFromFeatureSet(j));else for(var f=0;f<e.featureSets.getLength();f++){var j=e.featureSets.getAt(f);j&&d.push(this.getEssentialsFeatureSetFromFeatureSet(j))}return d};b.prototype.prepFeatureSetInCollection=function(a,b,d,f,j){var i=this,k=null,l=null;if(b)(l=this.app.featureSetManager.getCollectionById(b))?(l.setExtendedProperty("ShowPushpins",j),d&&l.clear()):(l=new e.infrastructure.FeatureSetCollection,
l.id=b,l.sourceName="Workflow",l.setExtendedProperty("ShowPushpins",j),this.app.featureSetManager.addCollection(l)),l.displayName.set(b);else{l=this.app.featureSetManager.getCollectionById(this._defaultFeatureSetCollection.id);if(!l)l=this._defaultFeatureSetCollection,this.app.featureSetManager.addCollection(l);l.setExtendedProperty("ShowPushpins",j);d&&l.clear()}String.isNullOrEmpty(a.displayName.get())&&f&&a.displayName.set(f.displayName?f.displayName:f.name);this.app.featureSetManager.openCollection(l.id);
l.featureSets.getLength()>0&&(k=l.getFeatureSetById(a.id));k?(String.isNullOrEmpty(a.displayName.get())?k.displayName.set(a.id):k.displayName.set(a.displayName.get()),k.append(a),k.resolveDataLinks(function(a){i.app.event("FeatureChangedEvent").publish(a)})):(l.featureSets.addItem(a),a.resolveDataLinks(function(a){i.app.event("FeatureChangedEvent").publish(a)}));this.app.featureSetManager.closeCollection(l.id)};b.prototype.registerActivityHandlers=function(){var a=this;this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.ListenForExternalEvent",
function(b){d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleListenForExternalEvent(a,b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.CollectExternalEventArgs",function(b){d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleCollectExternalEventArgs(a,b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.Alert",function(b){d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleAlert(a,b)});this.dispatcher.registerExternalIdHandler("IntersectLayers",
d.workflow.DefaultActivityHandlers.handleIntersectLayers);this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.ConfigureWorkflowContainer",function(b){d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleConfigureWorkflowContainer(a,b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.Confirm",function(b){d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleConfirm(a,b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.DisplayForm",
function(b){d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleDisplayForm(a,b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.DisplayHyperlink",function(b){d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleDisplayHyperlink(a,b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.DisplayCaptureGeometry",function(b){d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleDisplayCaptureGeometry(a,
b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.Report",function(b){var e=b.getValue("MapServiceId"),f=b.getValue("LayerName"),j=b.getValue("ReportId");a.app.event("ReportTemplateStartedEvent").publish(j,e,f);d.workflow.DefaultActivityHandlers.handleReport(b);a.app.event("ReportTemplateCompletedEvent").publish(j,e,f)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.Prompt",function(b){d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handlePrompt(a,
b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.RunExternalCommand",function(b){d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleRunExternalCommand(a,b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.SelectFeatures",function(b){d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleSelectFeatures(a,b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.GetSelectedFeatures",function(b){d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleGetSelectedFeatures(a,
b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.DisplayResultPicker",function(b){d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleDisplayResultPicker(a,b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.ExternalLog",function(b){d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleExternalLog(a,b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.ShowMapTip",function(b){d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleShowMapTip(a,
b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.CaptureGeometry",function(b){d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleCaptureGeometry(a,b)});this.app.setWorkflowActivityDispatcher(this.dispatcher)};b.prototype._getContainersForWorkflowId=function(a){return this._workflowContainers&&this._workflowContainers.hasOwnProperty(a)?this._workflowContainers[a]:null};b.prototype._activateContainersForWorkflow=function(a){if((a=this._getContainersForWorkflowId(a))&&
a.length>0)for(var b=0;b<a.length;++b)this.app.command("ActivateView").execute(a[b].view.id)};b.prototype._deactivateContainersForWorkflow=function(a){if((a=this._getContainersForWorkflowId(a))&&a.length>0)for(var b=0;b<a.length;++b)this.app.command("DeactivateView").execute(a[b].view.id)};b.prototype.registerCommands=function(){var a=this;this.app.command("RunWorkflowById").register(this,function(b){if(!a.app.site||!a.app.site.isInitialized)a.app.trace.error("Error running workflow '{0}' - Site was not initialized.".format(b));
else if(a.app&&a.app.isOffline&&a.app.isOffline.get())a.app.command("Alert").execute(a.app.getResource(a.libraryId,"language-workflow-offline"),a.app.getResource(a.libraryId,"language-workflow-offline-title")),a.app.trace.error("Error running workflow '{0}' - Unable to run workflows in an offline state".format(b));else{var e=a.app.site.findWorkflowById(b);e?(d.workflow.WorkflowControllerProxy.startWorkflow(e,a.dispatcher,null),a.app.command("LogOptimizerEvent").execute("RunWorkflow",e.id)):a.app.trace.error("Error running workflow '{0}' - workflow not found in site.".format(b))}},
function(b){return!a.app||!a.app.site||!a.app.site.isInitialized||a.app.isOffline&&a.app.isOffline.get()?false:!a.app.site.findWorkflowById(b)?false:true});this.app.command("RunWorkflowWithGeometry").register(this,function(b){if(!a.app.site||!a.app.site.isInitialized)a.app.trace.error("Error running workflow '{0}' - Site was not initialized.".format(b.workflowId));else if(a.app&&a.app.isOffline&&a.app.isOffline.get())a.app.command("Alert").execute(a.app.getResource(a.libraryId,"language-workflow-offline"),
a.app.getResource(a.libraryId,"language-workflow-offline-title")),a.app.trace.error("Error running workflow '{0}' - Unable to run workflows in an offline state".format(b.workflowId));else{var e=a.app.site.findWorkflowById(b.workflowId);if(e){var f=e.getInputs();if(b.geometry&&f)for(var j=0;j<f.length;j++){var i=f[j];if(i!=null&&i.typeName!=null&&(i.typeName=="ESRI.ArcGIS.Client.Geometry.Geometry, ESRI.ArcGIS.Client"||b.geometry.type=="point"&&i.typeName=="ESRI.ArcGIS.Client.Geometry.Point, ESRI.ArcGIS.Client"||
b.geometry.type=="multipoint"&&i.typeName=="ESRI.ArcGIS.Client.Geometry.MultiPoint, ESRI.ArcGIS.Client"||b.geometry.type=="polyline"&&i.typeName=="ESRI.ArcGIS.Client.Geometry.Polyline, ESRI.ArcGIS.Client"||b.geometry.type=="polygon"&&i.typeName=="ESRI.ArcGIS.Client.Geometry.Polygon, ESRI.ArcGIS.Client"||b.geometry.type=="extent"&&i.typeName=="ESRI.ArcGIS.Client.Geometry.Envelope, ESRI.ArcGIS.Client"))i.value=b.geometry}d.workflow.WorkflowControllerProxy.startWorkflow(e,a.dispatcher,f);a.app.command("LogOptimizerEvent").execute("RunWorkflow",
e.id)}else a.app.trace.error("Error running workflow '{0}' - workflow not found in site.".format(b.workflowId))}},function(b){return b&&b.workflowId&&b.geometry&&a.app.site&&a.app.site.isInitialized&&a.app.site.findWorkflowById(b.workflowId)?true:false});this.app.command("RunWorkflowWithArguments").register(this,function(b){if(!a.app.site||!a.app.site.isInitialized)a.app.trace.error("Error running workflow '{0}' - Site was not initialized.".format(b.workflowId));else if(a.app&&a.app.isOffline&&a.app.isOffline.get())a.app.command("Alert").execute(a.app.getResource(a.libraryId,
"language-workflow-offline"),a.app.getResource(a.libraryId,"language-workflow-offline-title")),a.app.trace.error("Error running workflow '{0}' - Unable to run workflows in an offline state".format(b.workflowId));else{var e=a.app.site.findWorkflowById(b.workflowId);if(e){var f=e.getInputs();if(f)for(var j=0;j<f.length;j++)f[j].value=b[f[j].name];d.workflow.WorkflowControllerProxy.startWorkflow(e,a.dispatcher,f);a.app.command("LogOptimizerEvent").execute("RunWorkflow",e.id)}else a.app.trace.error("Error running workflow '{0}' - workflow not found in site.".format(b.workflowId))}},
function(b){return b&&b.workflowId&&a.app.site&&a.app.site.isInitialized&&a.app.site.findWorkflowById(b.workflowId)?true:false});this.app.command("DisplayWorkflowContainerContent").register(this,function(b){var d=b.containerName,e=b.view,b=b.activityContext;if(d!=null)d=a.getOrCreateContainer(d);else throw Error("Missing container name in DisplayWorkflowContainerContent.");a.displayContainerContent(e,d,d.title,b)});this.app.command("ActivateContainersForWorkflow").register(this,this._activateContainersForWorkflow);
this.app.command("DeactivateContainersForWorkflow").register(this,this._deactivateContainersForWorkflow)};b.prototype._onSiteInitialized=function(a){if(!a||!a.isInitialized)this.app.trace.error("Error processing startup workflows. - site was not initialized.");else{for(var b=this.app.site.workflows,e=0;e<b.length;e++){var f=b[e];f.runOnStartup&&this._startupWorkflowIds.indexOf(f.id)<0&&this._startupWorkflowIds.push(f.id);e===0&&(this.app.command("RunWorkflowById").raiseCanExecuteChanged(),this.app.command("RunWorkflowWithArguments").raiseCanExecuteChanged(),
this.app.command("RunWorkflowWithGeometry").raiseCanExecuteChanged())}if(!(this._startupWorkflowIds==null||this._startupWorkflowIds.length==0))for(e=0;e<this._startupWorkflowIds.length;e++)if(b=this._startupWorkflowIds[e],b!=null)if(f=a.findWorkflowById(b)){b=f.getInputs();if(b!=null&&this.app.urlParameters)for(var j=0;j<b.length;j++){var i=b[j];if(i!=null&&i.name!=null&&this.app.urlParameters[i.name])i.value=this.app.urlParameters[i.name]}d.workflow.WorkflowControllerProxy.startWorkflow(f,this.dispatcher,
b);this.app.command("LogOptimizerEvent").execute("RunWorkflow",f.id)}else this.app.trace.error("Error running startup workflow '{0}' - workflow not found in site.".format(b))}};b.getCaptureGeometryStatusMessage=function(a,b,d,f,j){if(j===void 0)j=e.infrastructure.accessibility.InputMethod.MOUSE;switch(d){case esri.toolbars.Draw.POINT:return a=j==e.infrastructure.accessibility.InputMethod.KEYBOARD?a.getResource(b,"language-capture-geometry-point-keyboard"):a.getResource(b,"language-capture-geometry-point");
case esri.toolbars.Draw.MULTI_POINT:return f?a.getResource(b,"language-capture-geometry-multi-point"):a.getResource(b,"language-capture-geometry-point");case esri.toolbars.Draw.POLYLINE:return a=j==e.infrastructure.accessibility.InputMethod.KEYBOARD?a.getResource(b,"language-capture-geometry-polyline-keyboard"):a.getResource(b,"language-capture-geometry-polyline");case esri.toolbars.Draw.POLYGON:return a=j==e.infrastructure.accessibility.InputMethod.KEYBOARD?a.getResource(b,"language-capture-geometry-polygon-keyboard"):
a.getResource(b,"language-capture-geometry-polygon");case esri.toolbars.Draw.FREEHAND_POLYLINE:return a.getResource(b,"language-capture-geometry-freehand-polyline");case esri.toolbars.Draw.FREEHAND_POLYGON:return a.getResource(b,"language-capture-geometry-freehand-polygon");case esri.toolbars.Draw.EXTENT:return a.getResource(b,"language-capture-geometry-rectangle")}return a.getResource(b,"language-capture-geometry-default")};return b}(d.framework.application.ModuleBase);f.WorkflowModule=i})(f.workflow||
(f.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,b){e.call(this,a,b);this.target=this.hyperlinkText=this.uri=this.message=this.buttons=this.workflowContainer=this.activityContext=null;this.title=new Observable("");this.showTitleInFormBody=new Observable(false)}__extends(b,e);b.prototype.initialize=function(a){if(this.activityContext&&a){var b=this.activityContext.getValue("Buttons"),e=[];if(!b||b.length===0)b=[{Label:this.app.getResource(this.libraryId,
"language-common-close"),Value:"Close",CausesValidation:false,IsDefault:false}];for(var f=0;f<b.length;f++){var j=new d.forms.FormButton(b[f].Label,b[f].Value,b[f].CausesValidation,b[f].IsDefault);if(b[f].IsDefault)this.defaultButton=j;e.push(j)}this.buttons=Observable.makeBindableProxy(e);this.message=new Observable(this.activityContext.getValue("Message"));this.uri=new Observable(this.activityContext.getValue("Uri"));this.hyperlinkText=new Observable(this.activityContext.getValue("HyperlinkText"));
this.hyperlinkText.get()==null&&this.hyperlinkText.set(this.uri.get());this.target=new Observable(this.activityContext.getValue("Target"));a&&a.hasOwnProperty("showTitleInFormBody")&&this.showTitleInFormBody.set(a.showTitleInFormBody||false)}};return b}(d.framework.ui.ViewModelBase);e.DisplayHyperlinkViewModel=f})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,b){d.call(this,a,b);this.activityContextCompleteActivity=this.activityContext=null}__extends(b,d);b.prototype.attach=function(a){if(!a)throw Error("{0}: A view model must be specified to attach to.".format(this.id));d.prototype.attach.call(this,a)};b.prototype.handleClickButton=function(){this.app.viewManager.destroyView(this)};b.prototype.destroy=function(){d.prototype.destroy.call(this);this._completeActivity()};
b.prototype._completeActivity=function(){if(this.activityContext&&this.activityContextCompleteActivity){var a=this.activityContext;this.activityContext=null;this.activityContextCompleteActivity.apply(a)}};return b}(d.framework.ui.ViewBase);e.DisplayReportUrlView=f})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,b){e.call(this,a,b);this.url=this.buttons=this.workflowContainer=null;this.target="_blank"}__extends(b,e);b.prototype.initialize=function(a){if(a)this.defaultButton=new d.forms.FormButton(this.app.getResource(this.libraryId,"language-common-close"),"Close",false,true),this.buttons=Observable.makeBindableProxy([this.defaultButton]),this.url=new Observable(a)};return b}(d.framework.ui.ViewModelBase);e.DisplayReportUrlViewModel=
f})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,b,d){e.call(this,a,b);this.resultTemplateComplexity=this.checkboxChanged=this.isSingleSelectionMode=this.selectionModes=this.selectionMode=this.startingIndex=this.defaultButton=this.buttons=this.message=this.workflowContainer=this.activityContext=null;this.featureSet=d;this.title=new Observable("");this.showTitleInFormBody=new Observable(false);this.filterText=new Observable("");this.selectedFeatures=new ObservableCollection([]);
this.shiftPressed=this.ctrlPressed=false;this.selectionModes=["single","multiple","extended"];this.disabledLinkCssClass=new Observable("");this.requiredValueErrorMessage=new Observable("");this.cssClass=new Observable("display-result-picker-list");this.features=new ObservableCollection(d.features.get());this.resultsList=new ObservableCollection(this.features.get());this.topOffset=new Observable("0px");this.bottomOffset=new Observable("0px");this.filterSectionVisible=new Observable(true);this.filterText.bind(this,
function(a){this.filterResults(a)})}__extends(b,e);b.prototype.initialize=function(a){if(this.activityContext&&a){var a=this.activityContext.getValue("Buttons"),b=[];if(!a||a.length===0)a=[{Label:this.app.getResource(this.libraryId,"language-common-close"),Value:"Close",CausesValidation:false,IsDefault:false}];for(var e=0;e<a.length;e++){var f=new d.forms.FormButton(a[e].Label,a[e].Value,a[e].CausesValidation,a[e].IsDefault);if(a[e].IsDefault)this.defaultButton=f;b.push(f)}this.buttons=Observable.makeBindableProxy(b);
this.message=new Observable(this.activityContext.getValue("Message"));this.showFilterTextBox=new Observable(this.activityContext.getValue("ShowFilterTextBox"));this.isSingleSelectionMode=this.selectionMode=="single";(this.selectionMode!="single"||this.message.get()!=null||this.showFilterTextBox.get())&&this.features.length()>0?this.filterSectionVisible.set(true):this.filterSectionVisible.set(false)}};b.prototype.filterResults=function(a){if(a){a.length>0&&!this.isSingleSelectionMode?this.disabledLinkCssClass.set("bound-visible-inline disabled-link"):
this.isSingleSelectionMode?this.disabledLinkCssClass.set("bound-invisible"):this.disabledLinkCssClass.set("bound-visible-inline");var b={},d;d=[];for(var e,f=[],j=[],i=false,k=0;k<this.resultsList.length();k++){b=this.resultsList.getAt(k);d=b.descriptionFormat;e=b.labelFormat;d=this.getTokens(d.get());f=this.getTokens(e.get());e=[];if(d&&f)e=d.concat(f);else if(d||f)e=d||f;if(e.length>0)for(d=0;d<e.length;d++)j.indexOf(e[d])==-1&&j.push(e[d]);d=a!=void 0?a.toLowerCase():"";if(j.length>0){b=b.esriFeature.get().attributes;
for(e=0;e<j.length;e++)if(f=b[j[e]])if(typeof f=="string"||f instanceof String||(f=f.toString()),f=f.toLowerCase(),f.indexOf(d)!==-1){i=true;break}}else i=true;i?this.resultsList.getAt(k).isFiltered.set(false):this.resultsList.getAt(k).isFiltered.set(true);i=false}}else{for(a=0;a<this.resultsList.length();a++)this.resultsList.getAt(a).isFiltered.set(false);this.isSingleSelectionMode?this.disabledLinkCssClass.set("bound-invisible"):this.disabledLinkCssClass.set("bound-visible-inline")}};b.prototype.featureClicked=
function(a){if(a!=void 0&&!this.checkboxChanged)if((this.ctrlPressed||this.selectionMode=="multiple")&&this.selectionMode!="single")this.selectedFeatures.indexOf(a)!=-1?this.removeFeatureFromSelection(a):this.addFeatureToSelection(a,true);else if(this.shiftPressed&&this.selectionMode=="extended")if(this.selectedFeatures.length()===0)this.addFeatureToSelection(a,true);else if(a=this.features.indexOf(a),a>this.startingIndex){this.clearSelection();for(var b=this.startingIndex;b<=a;b++)this.addFeatureToSelection(this.features.getAt(b),
false)}else{this.clearSelection();for(b=a;b<=this.startingIndex;b++)this.addFeatureToSelection(this.features.getAt(b),false)}else this.clearSelection(),this.addFeatureToSelection(a,true);return this.checkboxChanged=false};b.prototype.getTokens=function(a){if(!a)return null;var a=a.match(/{{.+?}}|{(.+?)}/g),b=[];if(a)for(var d=0;d<a.length;d++)a[d].match(/{(.+?)}/g)&&!a[d].match(/{{.+?}}/g)&&b.push(a[d].match("{(.+?)}")[1]);return b};b.prototype.featureChecked=function(a){a.isSelected.get()?this.addFeatureToSelection(a,
true):this.removeFeatureFromSelection(a);this.checkboxChanged=true};b.prototype.addFeatureToSelection=function(a,b){if(a.isFiltered.get()!=void 0&&!a.isFiltered.get()){a.isSelected.set(true);a.cssClass.set("selected");this.selectedFeatures.addItem(a);var d=this.features.indexOf(a);if(b&&d!=-1)this.startingIndex=d}};b.prototype.removeFeatureFromSelection=function(a){a.isSelected.set(false);a.cssClass.set("");this.selectedFeatures.removeItem(a);this.startingIndex=this.features.indexOf(a)};b.prototype.clearSelection=
function(){if(this.selectedFeatures.length()){for(var a=0;a<this.selectedFeatures.length();a++)this.selectedFeatures.getAt(a).isSelected.set(false),this.selectedFeatures.getAt(a).cssClass.set("");this.selectedFeatures.clear()}};b.prototype.clearTextBox=function(){this.filterText.set("")};b.prototype.selectAll=function(){this.addFeatureToSelection(this.features.getAt(0),true);for(var a=1;a<this.features.get().length;a++)this.addFeatureToSelection(this.features.getAt(a),false)};b.prototype.selectNone=
function(){this.clearSelection()};b.prototype.getSelectedIndices=function(){for(var a=[],b=0;b<this.selectedFeatures.length();b++)a.push(this.features.indexOf(this.selectedFeatures.getAt(b)));return a};b.prototype.showError=function(){var a=this.activityContext.getValue("RequiredValueErrorMessage");a===null&&(a=this.app.getResource(this.libraryId,"language-display-result-picker-no-results-selected"));this.requiredValueErrorMessage.set(a);this.cssClass.set("display-result-picker-list error")};return b}(d.framework.ui.ViewModelBase);
e.DisplayResultPickerViewModel=f})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,b){e.call(this,a,b);this.activityContext=null;this.onKeyDownHandle=[];this.onKeyUpHandle=[]}__extends(b,e);b.prototype.attach=function(a){if(!a)throw Error("{0}: A view model must be specified to attach to.".format(this.id));e.prototype.attach.call(this,a);this.app.event("ViewActivatedEvent").subscribe(this,this.setDisplayResultPickerListOffset);this.title.set(this.viewModel.title.get());this.workflowContainer&&
this.workflowContainer.view&&this.app.viewManager.notifyDimensionsChanged(this.workflowContainer.view);window&&(this.onKeyDownHandle.push(dojo.connect(window,"onkeydown",this,this.handleKeyDown)),this.onKeyUpHandle.push(dojo.connect(window,"onkeyup",this,this.handleKeyUp)))};b.prototype.setDisplayResultPickerListOffset=function(){this.topContainer&&this.viewModel.topOffset.set(this.topContainer.clientHeight);this.bottomContainer&&this.viewModel.bottomOffset.set(this.bottomContainer.clientHeight)};
b.prototype.makeUnselectableNode=function(a,b){a.nodeType==1&&a.setAttribute("unselectable",b);for(var d=a.firstChild;d;)this.makeUnselectableNode(d,b),d=d.nextSibling};b.prototype.handleKeyDown=function(a){if(a.ctrlKey===true)this.viewModel.ctrlPressed=true;if(a.shiftKey===true)this.viewModel.shiftPressed=true;if((a.ctrlKey===true||a.shiftKey===true)&&this.viewModel.cssClass.get().indexOf("unselectable")==-1)this.viewModel.cssClass.set(this.viewModel.cssClass.get()+" unselectable"),this.makeUnselectableNode(this["display-result-picker-list"],
"on");return false};b.prototype.handleKeyUp=function(a){if(a.ctrlKey===false)this.viewModel.ctrlPressed=false;if(a.shiftKey===false)this.viewModel.shiftPressed=false;if(a.ctrlKey===true||a.shiftKey===true)this.viewModel.cssClass.set(this.viewModel.cssClass.get().replace(" unselectable","")),this.makeUnselectableNode(this["display-result-picker-list"],"off");return false};b.prototype.handleClick=function(a,b,d){if(this._firstEvent&&this._cancelLongPress)this._firstEvent=null,this._cancelLongPress();
a.target.tagName!=="A"&&this.viewModel.featureClicked(d);return true};b.prototype.handleClearTextBox=function(){this.viewModel.clearTextBox()};b.prototype.handleSelectAll=function(){this.viewModel.selectAll()};b.prototype.handleSelectNone=function(){this.viewModel.selectNone()};b.prototype.getDescription=function(a,b,d){b.title=d.description.get()};b.prototype.resolveWidget=function(a,b){e.prototype.resolveWidget.call(this,a,b);var f;if(a==="GetDescription")return f=new d.essentialsHtmlViewer.mapping.infrastructure.FeatureDescriptionPresenterView(this.app,
this.libraryId),f.app=this.app,f.libraryId=this.libraryId,f.root=dojo.create("div"),f.root.className="feature-description",b.hasRelationships&&b.hasRelationships.get()?f.descriptionApply(b,f.root):f.root.innerHTML=f.descriptionGet(b),f.attach(b),f;if(a==="RenderComplexResultTemplate"&&this.viewModel.resultTemplateComplexity==="complex")return f=this.app.viewManager.createView({markupResource:"Mapping/modules/Workflow/Templates/DisplayResultPickerComplexResultTemplateView.html",type:"geocortex.essentialsHtmlViewer.mapping.modules.workflow.templates.DisplayResultPickerResultTemplateView"}),
f.app=this.app,f.libraryId=this.libraryId,f.parentView=this,f.attach(b),f;if(a==="RenderSimpleResultTemplate"&&this.viewModel.resultTemplateComplexity==="simple")return f=this.app.viewManager.createView({markupResource:"Mapping/modules/Workflow/Templates/DisplayResultPickerSimpleResultTemplateView.html",type:"geocortex.essentialsHtmlViewer.mapping.modules.workflow.templates.DisplayResultPickerResultTemplateView"}),f.app=this.app,f.libraryId=this.libraryId,f.parentView=this,f.attach(b),f};b.prototype.handleClickButton=
function(a,b,d){d.causesValidation.get()&&this.viewModel.selectedFeatures.get().length>0||d.causesValidation.get()&&this.viewModel.features.get().length==0||!d.causesValidation.get()?(this.activityContext&&(this.activityContext.setValue("ButtonResultValue",d.value.get()),this.activityContext.setValue("SelectedIndices",this.viewModel.getSelectedIndices()),this.activityContext.completeActivity()),this.workflowContainer&&(this.workflowContainer.hasContent.set(false),this.app.viewManager.notifyDimensionsChanged(this.workflowContainer.view)),
this.app.viewManager.destroyView(this)):this.viewModel.showError()};b.prototype.deactivated=function(){e.prototype.deactivated.call(this);this._deactivated()};b.prototype._deactivated=function(){dojo.forEach(this.onKeyDownHandle,dojo.disconnect);dojo.forEach(this.onKeyUpHandle,dojo.disconnect);this.onKeyDownHandle=[];this.onKeyUpHandle=[]};return b}(d.framework.ui.ViewBase);e.DisplayResultPickerView=f})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){(function(e){e.render=function(b,a){b.attached_application=a;var e=a.viewManager.createView({type:"geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowFormView",markup:"Mapping/modules/Workflow/WorkflowFormView.html",visible:true,region:null,libraryId:"Mapping"}),f=new d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowFormViewModel(a);f.initialize({});e.attach(f);e.configuration={};return e};e.getItemView=
function(b,a,e){var f=function(d,e){var g=b.viewManager.createView({type:e,markup:d,visible:true,region:null,libraryId:"Mapping"});g.attach(a);return g};if(e&&e.hasOwnProperty(a.declaredClass))return e=e[a.declaredClass],f(e.markup,e.codebehind);else{e=b.configModel.widgetConfigs.filter(function(b){return b.id===a.formItemType});return e.length>0?(f=e[0],e="WidgetView-{0}-{1}".format(f.id,d.framework.utils.alphaNumericToken()),e=new d.framework.config.ViewConfig(e,null,f.type),e.libraryId=f.libraryId,
e.markupResource=f.markup,e.configuration=f.configuration,f=b.viewManager.createView(e),f.attach(a),f):f("Mapping/modules/Workflow/Forms/Items/FormItemView.html","geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase")}}})(e.FormRenderer||(e.FormRenderer={}))})(e.forms||(e.forms={}))})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){(function(e){var b=function(a){function b(d,e){a.call(this,d,e)}__extends(b,a);b.prototype.attach=function(b){if(!b)throw Error("{0}: A view model must be specified to attach to.".format(this.id));this.viewModel=b;this.addDisposableBinding(b.isValid,b.isValid.bind(this,function(){this.calculateIndicatorDisplay()}));this.addDisposableBinding(b.isRequired,b.isRequired.bind(this,function(){this.calculateIndicatorDisplay()}));
this.calculateIndicatorDisplay();a.prototype.attach.call(this,b)};b.prototype.calculateIndicatorDisplay=function(){this.viewModel.attached_showIndicator&&(this.viewModel.attached_showIndicator.set(this.viewModel.isRequired.get()===true||this.viewModel.isValid.get()===false),this.viewModel.isValid.get()==false?this.viewModel.attached_indicatorClass.set("form-item invalid"):this.viewModel.attached_indicatorClass.set("form-item required"))};return b}(d.framework.ui.ViewBase);e.FormItemViewBase=b})(e.items||
(e.items={}))})(e.forms||(e.forms={}))})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){(function(e){var b=function(a){function b(d,e){a.call(this,d,e);this.closeTimer=this.keyTraverseInterval=this.lastKeyEvent=this.positionIndex=this.timer=this.dropDownListElement=this.dropDownContainerElement=this.textElement=null;this._searchFocus=this._queryCancelled=false;this.isBusy=new Observable(false);this.positionIndex=0;this.keyTraverseInterval=25}__extends(b,a);b.prototype.attach=function(b){if(!b)throw Error("{0}: A view model must be specified to attach to.".format(this.id));
b.isDropDownOpen=new Observable(false);a.prototype.attach.call(this,b);this.lastKeyEvent=(new Date).getTime();this.addDisposableBinding(this.viewModel.dataItems,this.viewModel.dataItems.bind(this,function(){this.isBusy.set(false);this.viewModel.dataItems.getLength()>0?(this.positionIndex=0,this._queryCancelled||this.openDropDown()):this.closeDropDown()}))};b.prototype.handleInputBlurEvent=function(a,b,d){var e=this;this.isBusy.set(false);this._searchFocus=false;this.closeTimer=setTimeout(function(){if(!e._searchFocus)e._queryCancelled=
true,e.viewModel.queryTaskRunner.triggerCascading(d.text.get()),e.closeDropDown()},750)};b.prototype.handleInputClickEvent=function(a,b){b.focus()};b.prototype.handleInputFocusEvent=function(){this._queryCancelled=false;this._searchFocus=true};b.prototype.handleDropdownFocusEvent=function(){var a=this;setTimeout(function(){a._searchFocus=true},100);if(this.closeTimer!=null)clearTimeout(this.closeTimer),this.closeTimer=null;return true};b.prototype.handleDropdownBlurEvent=function(){this.closeDropDown();
return true};b.prototype.handleClickItem=function(a,b,d){this.viewModel.text.set(d.display);this.viewModel.queryTaskRunner.triggerCascading(d.display);this.closeDropDown()};b.prototype.openDropDown=function(){d.essentialsHtmlViewer.___userInAutoComplete=true;this.viewModel.isDropDownOpen.set(true);this.positionIndex=-1;$(this.dropDownContainerElement).removeClass("inactive").addClass("active")};b.prototype.closeDropDown=function(){d.essentialsHtmlViewer.___userInAutoComplete=false;this.viewModel.isDropDownOpen.set(false);
$(this.dropDownContainerElement).removeClass("active").addClass("inactive")};b.prototype.setDropDownPosition=function(a){a=Math.min(a,this.viewModel.dataItems.getLength()-1);dojo.removeClass(this.dropDownListElement,"autocomplete-highlight");this.positionIndex=Math.max(0,a);a=$("li",this.dropDownListElement).eq(this.positionIndex);$(a).addClass("autocomplete-highlight");var b=this.viewModel.dataItems.getAt(this.positionIndex);b&&this.viewModel.text.set(b.display);a.length>0&&$(this.dropDownContainerElement).scrollTop($(this.dropDownContainerElement).scrollTop()+
$(a).position().top-$(this.dropDownContainerElement).height()/2+$(a).height()/2)};b.prototype.handleDropdownKeyDown=function(a,b,d){return a.which===13?this.handleKeyEvent(a,b,d):true};b.prototype.handleKeyEvent=function(a,b,d){b=(new Date).getTime();if(b-this.lastKeyEvent>this.keyTraverseInterval)if(this.lastKeyEvent=b,a.which===38||a.which===40)this.viewModel.isDropDownOpen.get()&&(a.which===40?this.setDropDownPosition(this.positionIndex+1):a.which===38&&this.setDropDownPosition(this.positionIndex-
1));else if(this.viewModel.isDropDownOpen.get()&&a.which===13){if(a=this.viewModel.dataItems.getAt(this.positionIndex))this.viewModel.text.set(a.display),this.viewModel.queryTaskRunner.triggerCascading(a.display);this.closeDropDown();this.timer!=null&&clearInterval(this.timer);return false}else if(this.viewModel.isDropDownOpen.get()&&a.which===8)return this.closeDropDown(),this.viewModel.queryTaskRunner.triggerCascading(null),a.which==8&&this.trigger(),false;else if(!(a.which===9||a.which===37||a.which===
39))if(a.which===13)return this.viewModel.queryTaskRunner.triggerCascading(d.display),false;else this.trigger();return true};b.prototype.trigger=function(){var a=this;this.timer!=null&&clearInterval(this.timer);if(this.textElement.value.length>=this.viewModel.minimumPrefixLength.get())this.timer=setTimeout(function(){a.filter(false)},this.viewModel.minimumPopulateDelay.get())};b.prototype.filter=function(a){if(this.timer!=null)clearInterval(this.timer),this.timer=null;this.closeDropDown();this.viewModel.queryTaskRunner.performQuery(this.textElement.value,
a)};return b}(d.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase);e.AutoCompleteBoxFormItemView=b})(e.items||(e.items={}))})(e.forms||(e.forms={}))})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){(function(e){var b=function(a){function b(d,e){a.call(this,d,e)}__extends(b,a);b.prototype.attach=function(b){if(!b)throw Error("{0}: A view model must be specified to attach to.".format(this.id));b.attached_textOnLeft=new Observable(false);this.addDisposableBinding(b.textLocation,b.textLocation.bind(this,function(a){b.attached_textOnLeft.set(a.toLowerCase()==="left")}));b.textLocation.pulse();b.attached_controlId=new Observable("checkbox-{0}".format(d.framework.utils.alphaNumericToken()));
b.attached_labelText=b.text!=null?new Observable(b.text.get()):"";a.prototype.attach.call(this,b)};return b}(d.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase);e.CheckBoxFormItemView=b})(e.items||(e.items={}))})(e.forms||(e.forms={}))})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){(function(e){var b=function(a){function b(d,e){a.call(this,d,e);this.attached_style=new Observable("");this.attached_isHorizontal=new Observable(false)}__extends(b,a);b.prototype.attach=function(b){var e=this;if(!b)throw Error("{0}: A view model must be specified to attach to.".format(this.id));b.attached_style=this.attached_style;b.attached_isHorizontal=this.attached_isHorizontal;b.hasOwnProperty("description")&&d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowUtils.convertToHTMLSyntax(b.description);
var g=this.configuration&&this.configuration.allowHorizontal!==void 0;this.auto(b.orientation,this,function(){var a=b.orientation.get()==="Horizontal";e.attached_style.set(void 0);e.attached_isHorizontal.set(a&&g)});b.orientation.pulse();this._attachVisibilityControls(b);a.prototype.attach.call(this,b)};b.prototype._attachVisibilityControls=function(a){var b=this;if(!a)throw Error("A view model must be specified to attach to.");if(a.visibleControlID.get()){var e=a.formDefinition.getFormItemById(a.visibleControlID.get());
if(e&&(a.applyVisibility(e),!this.resultChangeSubscription))this.resultChangeSubscription=dojo.subscribe("FormItemResultChangedEvent",function(g){if(g===e&&(g=a.isVisible.get(),a.applyVisibility(e),g!==a.isVisible.get())){var f=b.app.viewManager.getRegionForViewId(b.id);b.app.event("ViewDimensionsChangedEvent").publish(new d.framework.events.ViewDimensionsChangedArgs(b,f));f=a.getDisplayName();g="language-accessibility-form-{0}-container-{1}".format(f?"named":"unnamed",g?"hidden":"shown");g=b.app.getResource(b.libraryId,
g).format(f);b.app.command("ScreenReaderNarrate").execute(g)}})}};b.prototype.onDestroy=function(){a.prototype.onDestroy.call(this);this.resultChangeSubscription&&dojo.unsubscribe(this.resultChangeSubscription)};return b}(d.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase);e.ContainerFormItemView=b})(e.items||(e.items={}))})(e.forms||(e.forms={}))})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){(function(e){var b=function(a){function b(d,e){a.call(this,d,e);this._lastClearedTime=this.attached_hour=this.attached_minute=this.attached_second=this.attached_hours=this.attached_minutes=this.attached_seconds=null}__extends(b,a);b.prototype.attach=function(b){var d=this;if(!b)throw Error("{0}: A view model must be specified to attach to.".format(this.id));b.attached_time=this.attached_time=new Observable;b.attached_timeIsNull=
new Observable(false);b.attached_timeIsNull.syncTransform(b.time,function(a){return a==null});this._buildComboBoxes(b);a.prototype.attach.call(this,b);setTimeout(function(){d.viewModel.date?d.setPickerDateTime(d.viewModel.date.get()):d.viewModel.time&&d.setPickerDateTime(d.viewModel.time.get())},1)};b.prototype._buildComboBoxes=function(a){this.attached_seconds=new ObservableCollection([]);this.attached_minutes=new ObservableCollection([]);this.attached_hours=new ObservableCollection([]);this.attached_second=
new Observable(0);this.attached_minute=new Observable(0);this.attached_hour=new Observable(0);for(var b=[],d=[],e=[],g=0;g<24;++g)b.push({val:g,desc:"{0}".format(g)});this.attached_hours.addItems(b);for(g=0;g<60;++g)d.push(g),e.push(g);this.attached_minutes.addItems(d);this.attached_seconds.addItems(e);a.attached_seconds=this.attached_seconds;a.attached_minutes=this.attached_minutes;a.attached_hours=this.attached_hours;a.attached_second=this.attached_second;a.attached_minute=this.attached_minute;
a.attached_hour=this.attached_hour};b.prototype.setPickerDateTime=function(a){a!=null?(this.attached_second.set(a.getSeconds()),this.attached_minute.set(a.getMinutes()),this.attached_hour.set(a.getHours())):(this.attached_second.set(null),this.attached_minute.set(null),this.attached_hour.set(null),$(this.selectContainerElement).find("select").val([]))};b.prototype.handleChangeComboBoxTime=function(){var a;a=this.viewModel.time?this.viewModel.time.get():this.viewModel.date?this.viewModel.date.get():
new Date;this.attached_hour.get()!=null||this.attached_minute.get()!=null||this.attached_second.get()!=null?(a==null&&(a=new Date,a.setMilliseconds(0)),this.attached_hour.get()==null&&this.attached_hour.set(a.getHours()),this.attached_minute.get()==null&&this.attached_minute.set(a.getMinutes()),this.attached_second.get()==null&&this.attached_second.set(a.getSeconds()),a.setHours(this.attached_hour.get()),a.setMinutes(this.attached_minute.get()),a.setSeconds(this.attached_second.get())):a=null;this.viewModel.time?
this.viewModel.time.set(a):this.viewModel.date&&this.viewModel.date.set(a)};b.prototype.handleClickSetNull=function(){if(this.viewModel.time.get())this._lastClearedTime=this.viewModel.time.get();this.viewModel.time.set(null);this.setPickerDateTime(null)};b.prototype.handleClickSetNotNull=function(){if(this._lastClearedTime!=null)this.viewModel.time.set(this._lastClearedTime),this.setPickerDateTime(this._lastClearedTime),this._lastClearedTime=null;else{var a=new Date;this.viewModel.time.set(a);this.setPickerDateTime(a)}};
return b}(d.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase);e.TimePickerFormItemView=b})(e.items||(e.items={}))})(e.forms||(e.forms={}))})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){(function(e){var b=function(a){function b(d,e){a.call(this,d,e);this.attached_year=this.attached_month=this.attached_day=this.attached_years=this.attached_months=this.attached_days=this.attached_pickerType=null;this.selectElementCount=11;this._lastClearedDate=null;this._daysPerMonth={0:31,1:28,2:31,3:30,4:31,5:30,6:31,7:31,8:30,9:31,10:30,11:31};this._dateTimePickerType={comboPicker:"combos",comboDateTimePicker:"combos_datetime",
nativePicker:"native",nativeDateTimePicker:"native_datetime",nativeDateComboTimePicker:"native_date_combo_time",jQueryPicker:"jQuery",nativeDateJQueryTimePicker:"native_date_jQuery_time"}}__extends(b,a);b.prototype.attach=function(b){var d=this;if(!b)throw Error("{0}: A view model must be specified to attach to.".format(this.id));this.attached_pickerType=new Observable(this._dateTimePickerType.comboPicker);b.attached_isNull=new Observable(false);b.attached_isNull.syncTransform(b.date,function(a){return a==
null});var e=navigator.userAgent.indexOf("Android")>-1&&navigator.userAgent.indexOf("Mobile Safari")>-1&&!(navigator.userAgent.indexOf("Chrome")>-1),g=navigator.userAgent.indexOf("Android")>-1&&navigator.userAgent.indexOf("Firefox")>-1,f=navigator.userAgent.match(/(iPad|iPhone|iPod)/gi)?true:false;Modernizr&&Modernizr.inputtypes.date&&!(navigator.userAgent.indexOf("Chrome")>-1)&&!e&&!g?(this.attached_pickerType.set(this._dateTimePickerType.nativePicker),b.includeTimePicker.get()===true&&(Modernizr.inputtypes.datetime&&
!f?this.attached_pickerType.set(this._dateTimePickerType.nativeDateTimePicker):this.attached_pickerType.set(this._dateTimePickerType.nativeDateComboTimePicker))):Modernizr.touch?(this.attached_pickerType.set(this._dateTimePickerType.comboPicker),b.includeTimePicker.get()===true&&this.attached_pickerType.set(this._dateTimePickerType.comboDateTimePicker)):this.attached_pickerType.set(this._dateTimePickerType.jQueryPicker);b.attached_pickerType=this.attached_pickerType;this.viewModel=b;this.attached_days=
new ObservableCollection([]);this.attached_months=new ObservableCollection([]);this.attached_years=new ObservableCollection([]);this.attached_day=new Observable(1);this.attached_month=new Observable(1);this.attached_year=new Observable(2E3);b.attached_days=this.attached_days;b.attached_months=this.attached_months;b.attached_years=this.attached_years;b.attached_day=this.attached_day;b.attached_month=this.attached_month;b.attached_year=this.attached_year;this._buildComboBoxes(b);setTimeout(function(){d.viewModel.date?
d.setPickerDateTime(d.viewModel.date.get()):d.viewModel.time&&d.setPickerDateTime(d.viewModel.time.get())},1);this._syncComboBoxes();a.prototype.attach.call(this,b);this._createjQueryPicker()};b.prototype._syncComboBoxes=function(){for(var a=[this.attached_day,this.attached_month,this.attached_year],b=0;b<a.length;++b)a[b].bind(this,dojo.hitch(this,this._calcTime))};b.prototype._isLeapYear=function(a){return a%400===0?true:a%100===0?false:a%4===0?true:false};b.prototype._calcTime=function(){var a=
this.attached_month.get();if(a!=null){var b=this._daysPerMonth[a];a===1&&(b=29);if(this.attached_days.getLength()<b)for(a=this.attached_days.getLength();a<b;++a)this.attached_days.addItem(a+1);else this.attached_days.removeRange(b)}};b.prototype.setPickerDateTime=function(b){a.prototype.setPickerDateTime.call(this,b);if(b!=null)this.attached_day.set(b.getDate()),this.attached_month.set(b.getMonth()),this.attached_year.set(b.getFullYear());else{this.attached_day.set(null);this.attached_month.set(null);
this.attached_year.set(null);for(var d=0;d<=this.selectElementCount;d++)if(this["select"+d])this["select"+d].selectedIndex=-1}if(this.native_datetime_element)this.native_datetime_element.valueAsDate=b;if(this.native_date_element)this.native_datetime_element.valueAsDate=b;this.attached_pickerType.get()===this._dateTimePickerType.jQueryPicker&&$(this.jQueryPicker,this.root).datetimepicker("setDate",b)};b.prototype.handleChange=function(a){var b;try{b=new Date(a)}catch(d){b=new Date}isNaN(b.getTime())&&
(b=new Date);if(!this.viewModel.date.get()||b.getTime()!=this.viewModel.date.get().getTime())this.viewModel.date.set(b),this.setPickerDateTime(b),this.handleChangeComboBoxTime()};b.prototype.handleChangeComboBoxTime=function(){var a=this.viewModel.date.get();this.attached_year.get()!=null||this.attached_month.get()!=null||this.attached_day.get()!=null||this.viewModel.includeTimePicker.get()&&(this.attached_hour.get()!=null||this.attached_minute.get()!=null||this.attached_second.get()!=null)?(a||(a=
new Date,this.viewModel.includeTimePicker.get()||(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0))),this.attached_year.get()==null&&this.attached_year.set(a.getFullYear()),this.attached_month.get()==null&&this.attached_month.set(a.getMonth()),this.attached_day.get()==null&&this.attached_day.set(a.getDate()),a.setFullYear(this.attached_year.get()),a.setMonth(this.attached_month.get()),a.setDate(this.attached_day.get()),this.viewModel.includeTimePicker.get()&&(this.attached_hour.get()==
null&&this.attached_hour.set(a.getHours()),this.attached_minute.get()==null&&this.attached_minute.set(a.getMinutes()),this.attached_second.get()==null&&this.attached_second.set(a.getSeconds()),a.setHours(this.attached_hour.get()),a.setMinutes(this.attached_minute.get()),a.setSeconds(this.attached_second.get()))):a=null;this.viewModel.date.set(a)};b.prototype.handleChangeComboBoxTimeWithNativeDate=function(){var a=this.viewModel.date.get();a||(a=new Date);this.attached_hour.get()==null&&this.attached_hour.set(a.getHours());
this.attached_minute.get()==null&&this.attached_minute.set(a.getMinutes());this.attached_second.get()==null&&this.attached_second.set(a.getSeconds());a.setHours(this.attached_hour.get());a.setMinutes(this.attached_minute.get());a.setSeconds(this.attached_second.get());this.viewModel.date.set(a)};b.prototype._createjQueryPicker=function(){var a=this;d.essentialsHtmlViewer.mapping.modules.workflow.forms.items.DatePickerFormItemView.localizedJqueryDatepicker||this._localizeJqueryDatepicker();$(this.jQueryPicker,
this.root).blur();var b={dateFormat:this.viewModel._dateFormatStr.get(),showOn:"button",changeYear:true,yearRange:"c-50:c+50",onClose:function(){a.disabled=true;a.readOnly=true},onChangeMonthYear:function(b,d,e){var e=e.selectedDay,g=null;a.viewModel.date.get()?g=new Date(b,d-1,e,a.viewModel.date.get().getHours(),a.viewModel.date.get().getMinutes(),a.viewModel.date.get().getSeconds()):(g=new Date,g=new Date(b,d-1,e,g.getHours(),g.getMinutes(),g.getSeconds()));a.viewModel.date.set(g)},beforeShow:function(){a.disabled=
true;a.readOnly=true},onSelect:function(){a.viewModel.date.set($(a.jQueryPicker,a.root).datepicker("getDate"))}};if(this.attached_pickerType.get()===this._dateTimePickerType.jQueryPicker)this.viewModel.includeTimePicker.get()?(b.timeFormat=this.viewModel.timePickerItem._timeFormatStr.get(),b.showSecond=this.viewModel.timePickerItem.timeFormat.get()==="LongTime"):(b.hourMin=0,b.hourMax=0,b.minuteMin=0,b.minuteMax=0,b.showHour=false,b.showMinute=false,b.showTime=false,b.timeFormat=""),$(this.jQueryPicker,
this.root).datetimepicker(b),$(this.jQueryPicker,this.root).datetimepicker("setDate",this.viewModel.date.get());else if(this.attached_pickerType.get()===this._dateTimePickerType.nativeDateJQueryTimePicker)b.timeFormat=this.viewModel.timePickerItem._timeFormatStr.get(),b.showSecond=this.viewModel.timePickerItem.timeFormat.get()==="LongTime",$(this.jQueryPicker,this.root).timepicker(b)};b.prototype._localizeJqueryDatepicker=function(){var a=this.getResource("datepicker.regional"),b=this.getResource("timepicker.regional");
a&&$.datepicker.setDefaults(a);b&&$.timepicker.setDefaults(b);d.essentialsHtmlViewer.mapping.modules.workflow.forms.items.DatePickerFormItemView.localizedJqueryDatepicker=true};b.prototype._buildComboBoxes=function(b){a.prototype._buildComboBoxes.call(this,b);for(var b=[],d=1900;d<=2100;++d)b.push(d);this.attached_years.set(b);b=[];for(d=0;d<12;++d){var e="language-months-{0}".format(d);b.push({value:d,name:this.app.getResource(this.libraryId,e)})}this.attached_months.set(b);b=[];for(d=1;d<32;++d)b.push(d);
this.attached_days.set(b)};b.prototype.handleClickSetNull=function(){if(this.viewModel.date.get())this._lastClearedDate=this.viewModel.date.get();this.viewModel.date.set(null);this.setPickerDateTime(null)};b.prototype.handleClickSetNotNull=function(){if(this._lastClearedDate!=null)this.viewModel.date.set(this._lastClearedDate),this.setPickerDateTime(this._lastClearedDate),this._lastClearedDate=null;else{var a=new Date;this.viewModel.date.set(a);this.setPickerDateTime(a)}};b.prototype.handleJqueryDatePickerTextChanged=
function(a){var b="";(b=a.currentTarget?a.currentTarget.value:a.target.value)&&this.handleChange(b)};b.localizedJqueryDatepicker=false;return b}(d.essentialsHtmlViewer.mapping.modules.workflow.forms.items.TimePickerFormItemView);e.DatePickerFormItemView=b})(e.items||(e.items={}))})(e.forms||(e.forms={}))})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){(function(e){var b=function(a){function b(d,e){a.call(this,d,e)}__extends(b,a);b.prototype.attach=function(b){if(!b)throw Error("{0}: A view model must be specified to attach to.".format(this.id));a.prototype.attach.call(this,b)};b.prototype.handleChange=function(a){var b=this;this.viewModel.files.clear();for(var e=function(a){var e=a.name,g=a.size,f=a.type,h=new FileReader;h.onload=function(a){var h=new d.forms.FileItem;
h.fileName=e;h.fileSize=g;h.fileType=f;h.fileDataBase64=decodeURIComponent(a.target.result.substring(a.target.result.indexOf("base64,")+7));b.viewModel.files.addItem(h)};h.readAsDataURL(a)},g=0;g<a.currentTarget.files.length;g++)e(a.currentTarget.files[g])};b.prototype.handleClearClick=function(){this.viewModel.clear()};return b}(d.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase);e.FilePickerFormItemView=b})(e.items||(e.items={}))})(e.forms||(e.forms={}))})(e.workflow||
(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){(function(e){var b=function(a){function b(d,e){a.call(this,d,e)}__extends(b,a);b.prototype.attach=function(b){if(!b)throw Error("{0}: A view model must be specified to attach to.".format(this.id));a.prototype.attach.call(this,b)};return b}(d.essentialsHtmlViewer.mapping.modules.workflow.forms.items.ContainerFormItemView);e.GroupBoxFormItemView=b})(e.items||(e.items={}))})(e.forms||(e.forms={}))})(e.workflow||(e.workflow=
{}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){(function(e){var b=function(a){function b(d,e){a.call(this,d,e)}__extends(b,a);b.prototype.attach=function(b){if(!b)throw Error("{0}: A view model must be specified to attach to.".format(this.id));a.prototype.attach.call(this,b)};b.prototype.handleClick=function(){this.viewModel.wasClicked.set(true);return true};return b}(d.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase);e.HyperlinkFormItemView=
b})(e.items||(e.items={}))})(e.forms||(e.forms={}))})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){(function(e){var b=function(a){function b(d,e){a.call(this,d,e);this.selectionBindingToken=this.selectedBindingToken=this.selectionChangedTimer=null}__extends(b,a);b.prototype.attach=function(b){var d=this;if(!b)throw Error("{0}: A view model must be specified to attach to.".format(this.id));if(b.selectionMode){var e=b.selectionMode.get().toLowerCase();b.attached_isMultiple=new Observable(e.toLowerCase()==="multiple"||e.toLowerCase()==
"extended")}if(b.selected&&!this.selectedBindingToken)this.selectedBindingToken=b.selected.bind(this,function(){b.selected.get()>=0&&this.handleSelectionChanged()});else if(b.selection&&!this.selectionBindingToken)this.selectionBindingToken=b.selection.bind(this,function(){b.selection.length()>0&&this.handleSelectionChanged()});a.prototype.attach.call(this,b);$(this.selectElement).dblclick(function(){d.app.command("SubmitWorkflowForm").execute(d.viewModel.formDefinition)})};b.prototype.handleSelectionChanged=
function(){var a=this;if(this.selectionChangedTimer!=null)clearInterval(this.selectionChangedTimer),this.selectionChangedTimer=null;this.selectionChangedTimer=setTimeout(function(){if(a.viewModel.queryTaskRunner.isBusy.get()===false)a.viewModel.triggerCascading(null),a.selectionChangedTimer=null},450);return true};return b}(d.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase);e.ListBoxFormItemView=b})(e.items||(e.items={}))})(e.forms||(e.forms={}))})(e.workflow||(e.workflow=
{}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){(function(e){var b=function(a){function b(d,e){a.call(this,d,e);this.markdownElement=null}__extends(b,a);b.prototype.attach=function(b){if(!b)throw Error("{0}: A view model must be specified to attach to.".format(this.id));a.prototype.attach.call(this,b);var d=new Remarkable({breaks:true}),b=String.escapeHtmlEncode(b.plainText.get()),d=d.render(b);$(this.markdownElement).append(d)};return b}(d.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase);
e.MarkdownFormItemView=b})(e.items||(e.items={}))})(e.forms||(e.forms={}))})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){(function(e){var b=function(a){function b(d,e){a.call(this,d,e)}__extends(b,a);b.prototype.attach=function(b){var e=this;if(!b)throw Error("{0}: A view model must be specified to attach to.".format(this.id));b.attached_textOnLeft=new Observable(false);this.addDisposableBinding(b.textLocation,b.textLocation.bind(this,function(a){b.attached_textOnLeft.set(a.toLowerCase()==="left")}));b.textLocation.pulse();b.attached_controlId=
new Observable("radio-{0}".format(d.framework.utils.alphaNumericToken()));b.attached_labelText=b.text!=null?new Observable(b.text.get()):"";a.prototype.attach.call(this,b);if(this.radioElement)this.radioElement.checked=b.checked.get(),$(this.radioElement).change(function(){b.checked.set(this.checked)});this.viewModel.__getRadioValueClosure=function(){var a=e.radioElement;return a?a.checked:false};return true};return b}(d.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase);
e.RadioButtonFormItemView=b})(e.items||(e.items={}))})(e.forms||(e.forms={}))})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){d.handleCaptureGeometry=function(d,b){function a(a,d,e){e.deactivate();dojo.disconnect(d);f.setDrawObjectContext(null);b.setValue("Result",a);b.completeActivity()}function e(b){var d;switch(b){case 0:d=esri.toolbars.Draw.EXTENT;break;case 1:d=esri.toolbars.Draw.FREEHAND_POLYGON;break;case 2:d=esri.toolbars.Draw.FREEHAND_POLYLINE;break;case 3:d=esri.toolbars.Draw.LINE;break;case 4:d=esri.toolbars.Draw.POINT;break;case 5:d=
esri.toolbars.Draw.MULTI_POINT;break;case 6:d=esri.toolbars.Draw.POLYGON;break;case 7:d=esri.toolbars.Draw.POLYLINE;break;case 8:a(k.extent,n,l);s=false;break;default:d=esri.toolbars.Draw.EXTENT}return d}var f=b.dispatcher();if(!f.abortMapBasedActivity())throw Error("Could not deactivate current map based activity.");d.app.command("ClearActiveTool").execute();var i=b.getValue("CaptureType"),k=b.getEsriMap();if(k!=null){if(typeof esri.toolbars.Draw!="function")throw Error('dojo.require("esri.toolbars.draw") must be added to your client code to use CaptureGeometry activity.');
var l=d.app.accessibilityManager.createComponent("geocortex.accessibility.draw",k),n=dojo.connect(l,"onDrawEnd",dojo.hitch(n,function(b){a(b,n,l)})),s=true,i=e(i);s&&l.activate(i)}else throw Error("Capture Geometry: No map available.");f.setDrawObjectContext({activityContext:b,toolbar:l,drawEvent:n})}})(d.WorkflowHandlers||(d.WorkflowHandlers={}))})(d.workflow||(d.workflow={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||
(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){d.handleCollectExternalEventArgs=function(d,b){var a=b.getValue("EventName"),e=b.getValue("WaitForEvent"),f=b.getValue("WaitTimeout");if(d._eventListenersResults.hasOwnProperty(a))if(d._eventListenersResults[a])b.setValue("EventArgs",d._eventListenersResults[a]),b.completeActivity();else if(e)if(f>0)window.setTimeout(function(){b.setValue("EventArgs",d._eventListenersResults[a]);b.completeActivity()},f);else{var i=function(){d._eventListenersResults[a]?
(b.setValue("EventArgs",d._eventListenersResults[a]),b.completeActivity()):window.setTimeout(i,2E3)};i()}else b.completeActivity();else b.completeActivity()}})(d.WorkflowHandlers||(d.WorkflowHandlers={}))})(d.workflow||(d.workflow={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){d.handleAlert=function(d,b){var a=b.getValue("Title"),e=b.getValue("Text");d.app.command("Alert").execute(e,a,function(){b.completeActivity()})}})(d.WorkflowHandlers||(d.WorkflowHandlers={}))})(d.workflow||(d.workflow={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){(function(e){var b=function(a){function b(d,e){a.call(this,d,e)}__extends(b,a);b.prototype.attach=function(b){if(!b)throw Error("{0}: A view model must be specified to attach to.".format(this.id));b.attached_isPassword=new Observable(b.inputScope!=null?b.inputScope.get()==="Password":false);a.prototype.attach.call(this,b)};b.prototype.handleBlurControl=function(){this.app.event("WorkflowFormTextInputBlurredEvent").publish(this)};
return b}(d.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase);e.TextEntryFormItemView=b})(e.items||(e.items={}))})(e.forms||(e.forms={}))})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){d.handleConfigureWorkflowContainer=function(d,b){var a=b.getValue("WorkflowContainerName"),e=b.getValue("ShowContainer"),f=b.getValue("IsBusy"),i=b.getValue("Message"),k=b.getValue("Title"),l=b.getValue("IconUri");l&&l.indexOf("/")==0&&(l=l.substring(1));var n=d.getOrCreateContainer(a);d._containerConfigs[a]=n;k!=null&&n.title.set(k);f!=null&&n.busy.set(f);i!=null&&(n.message.set(i),n.hasContent.set(false),n.view&&d.app.viewManager.notifyDimensionsChanged(n.view));
l&&n.iconUri.set(d.remapWorkflowContainerIconUri(l));n.view||d.createContainerView(n,b);e?d.app.viewManager.activateView(n.view):e===false&&d.app.viewManager.deactivateView(n.view);b.completeActivity()}})(d.WorkflowHandlers||(d.WorkflowHandlers={}))})(d.workflow||(d.workflow={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){d.handleConfirm=function(d,b){var a=b.getValue("Title"),e=b.getValue("Text");d.app.command("Confirm").execute(e,a,function(a){b.setValue("Result",a||false);b.completeActivity()})}})(d.WorkflowHandlers||(d.WorkflowHandlers={}))})(d.workflow||(d.workflow={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){e.handleDisplayForm=function(e,b){var a=b.workflow(),f=b.getValue("RegionName"),h=b.getValue("WorkflowContainerName"),i=new Observable(e._defaultContainerTitle),k=null,l=b.getInputNamesByType("System.Collections.Generic.IEnumerable`1[[Geocortex.Forms.Client.DataItem"),n={};if(l!=null&&l.length>0)for(var s=0;s<l.length;++s){var m=b.getValue(l[s]);if(m!=null){for(var q=[],p=0;p<m.length;++p)q.push(new d.forms.DataItem(m[p].Display,
m[p].Value,m[p].TypeName));n[l[s]]=q}}s=b.getValue("InputGeometry");l=b.getValue("FormDefinition");n=new d.forms.FormDefinition(l,n,s);m=b.getValue("Buttons");l=[];if(m!=null)for(s=0;s<m.length;s++)l.push(new d.forms.FormButton(m[s].Label,m[s].Value,m[s].CausesValidation,m[s].IsDefault));else String.isNullOrEmpty(f)&&String.isNullOrEmpty(h)&&(l.push(new d.forms.FormButton("OK","OK",true,true)),l.push(new d.forms.FormButton("Cancel","Cancel",false,false)));if(h!=null)k=e.getOrCreateContainer(h),f=
k.internalRegionName,i=k.title;else if(!f||!e.app.viewManager.getExistingRegionByName(f))f="ModalWindowRegion";s={typeName:"geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowFormView",markupResource:"Mapping/modules/Workflow/WorkflowFormView.html",isVisible:true,regionName:null,libraryId:e.libraryId,iconUri:k&&k.iconUri?k.iconUri.get():e._defaultContainerIconUri,configuration:{}};s.configuration.activityContext=b;s.configuration.workflowContainer=k;h=new d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowFormViewModel(e.app,
e.libraryId);h.activityContext=b;h.initialize({showTitleInFormBody:e.configuration==null?false:e.configuration.showTitleInFormBody||false,formDefinition:n,buttons:l});k?(a=e.app.viewManager.createView(s),a.attach(h),i=h.title&&!String.isNullOrEmpty(h.title.get())?h.title:i,e.displayContainerContent(a,k,i,b)):(e.cleanupViewsForWorkflow(a),s.regionName=f,a=e.app.viewManager.createView(s),a.attach(h),a.configuration={},e.app.viewManager.activateView(a))}})(e.WorkflowHandlers||(e.WorkflowHandlers={}))})(e.workflow||
(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){e.handleDisplayCaptureGeometry=function(e,b){var a=null,f=null,h=null,i=null;b.workflow();var k=b.getValue("Title"),a=b.getValue("WorkflowContainerName"),i=e.configuration&&e.configuration.showTitleInFormBody,l=new Observable(e._defaultContainerTitle);if(a){e.app.command("ClearActiveTool").execute();a=e.getOrCreateContainer(a);k?l.set(k):a.title&&l.set(a.title.get());h="MapPoint,MultiPoint,FreehandPolyline,Polygon,Polyline,Extent,CurrentExtent".split(",");
k={};for(f=0;f<h.length;f++){var n=h[f];k[n]="geometry-type-"+n.toLowerCase()}f={typeName:"geocortex.essentialsHtmlViewer.mapping.modules.workflow.DisplayCaptureGeometryView",markupResource:"Mapping/modules/Workflow/DisplayCaptureGeometryView.html",isVisible:true,regionName:null,libraryId:e.libraryId,iconUri:e._defaultContainerIconUri};h=new d.essentialsHtmlViewer.mapping.modules.workflow.DisplayCaptureGeometryViewModel(e.app,e.libraryId);h.activityContext=b;h.libraryId=e.libraryId;h.hideShowContainer=
a.hideForMapInteraction||false;h.geometryTypeCssDictionary=k;h.title.set(l.get());h.initialize({showTitleInFormBody:i});if(e.configuration.showCaptureStatusMessages!=void 0)h.showCaptureStatusMessages=e.configuration.showCaptureStatusMessages;i=e.app.viewManager.createView(f);i.activityContext=b;i.workflowContainer=a;i.viewModel=h;e.displayContainerContent(i,a,l,b)}else e.app.trace.error("Error parsing activity context. WorkflowContainerName is a required value and is not supplied.")}})(e.WorkflowHandlers||
(e.WorkflowHandlers={}))})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){e.handleDisplayHyperlink=function(e,b){b.workflow();var a=b.getValue("WorkflowContainerName"),f=b.getValue("Buttons"),h=b.getValue("Title"),i=new Observable(e._defaultContainerTitle),k=null;if(!a&&e)a=e.defaultContainerName;a!=null&&(k=e.getOrCreateContainer(a));i.set(h);a=e.app.viewManager.createView({markup:"Mapping/modules/Workflow/DisplayHyperlinkView.html",type:"geocortex.essentialsHtmlViewer.mapping.modules.workflow.DisplayHyperlinkView",
isVisible:true,libraryId:e.libraryId,iconUri:e._defaultContainerIconUri});a.activityContext=b;a.workflowContainer=k;h=new d.essentialsHtmlViewer.mapping.modules.workflow.DisplayHyperlinkViewModel(e.app,e.libraryId);h.activityContext=b;h.app=e.app;h.libraryId=e.libraryId;var l=e.configuration&&e.configuration.showTitleInFormBody;h.title.set(i.get());h.initialize({buttons:f,showTitleInBody:l});a.attach(h);e.displayContainerContent(a,k,i,b)}})(e.WorkflowHandlers||(e.WorkflowHandlers={}))})(e.workflow||
(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){(function(f){f.handleDisplayResultPicker=function(f,b){b.workflow();var a=b.getValue("WorkflowContainerName"),g=b.getValue("Buttons"),h=b.getValue("FeatureSet"),i=b.getValue("MapServiceId"),k=b.getValue("LayerId"),l=b.getValue("LayerName"),n=b.getValue("DescriptionFormat"),s=b.getValue("LabelFormat"),m="extended";switch(b.getValue("SelectionMode")){case 0:m="single";break;case 1:m="multiple";break;case 2:m="extended"}var q=b.getValue("ShowIcons"),
p=b.getValue("Title"),r=new Observable(f._defaultContainerTitle),u=null,w=null;if(!a&&f)a=f.defaultContainerName;a!=null&&(u=f.getOrCreateContainer(a));p?r.set(p):u.title&&r.set(u.title.get());i&&(a=b.getSite().essentialsMap.findMapServiceById(i))&&(k?w=a.findLayerById(k):l&&(w=a.findLayerByName(l)));if(h&&h.fields)for(k=0;k<h.fields.length;k++)if(l=h.fields[k],l.type==="esriFieldTypeDate")for(a=0;a<h.features.length;a++)i=h.features[a],i.attributes[l.alias]?i.attributes[l.alias]=new Date(i.attributes[l.alias]):
i.attributes[l.name]&&(i.attributes[l.name]=new Date(i.attributes[l.name]));h=new e.infrastructure.FeatureSet({esriFeatureSet:h,layer:w});w=m==="extended"||m==="multiple";for(k=0;k<h.features.length();k++){l=d.essentialsHtmlViewer.mapping.modules.workflow.generateDisplayResultPickerFeaturefromFeature(h.features.getAt(k));l.showCheckbox=w;if(!q)l.showIcon=q;n&&l.descriptionFormat.set(n);s&&l.labelFormat.set(s)}n=f.app.viewManager.createView({markup:"Mapping/modules/Workflow/DisplayResultPickerView.html",
type:"geocortex.essentialsHtmlViewer.mapping.modules.workflow.DisplayResultPickerView",isVisible:true,libraryId:f.libraryId,iconUri:f._defaultContainerIconUri});n.activityContext=b;n.workflowContainer=u;s=new d.essentialsHtmlViewer.mapping.modules.workflow.DisplayResultPickerViewModel(f.app,f.libraryId,h);s.activityContext=b;s.selectionMode=m;s.app=f.app;s.libraryId=f.libraryId;m=f.configuration&&!!f.configuration.showTitleInFormBody;s.title.set(r.get());q=f.configuration.displayResultPickerTemplateComplexity;
s.resultTemplateComplexity=q===void 0||q!="complex"&&q!="simple"?"complex":q.toLowerCase();s.initialize({buttons:g,showTitleInBody:m});n.attach(s);f.displayContainerContent(n,u,r,b)}})(f.WorkflowHandlers||(f.WorkflowHandlers={}))})(f.workflow||(f.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){d.handleExternalLog=function(d,b){var a=b.getValue("Message");d.app.trace.info(a);b.completeActivity()}})(d.WorkflowHandlers||(d.WorkflowHandlers={}))})(d.workflow||(d.workflow={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){function f(b,a){if(b&&b.parent)for(var d=b.getSelfAndAncestors()||[],e=0;e<d.length;e++){var i=d[e];i&&i.id.get()!==b.layerList.id.get()&&i.isVisible.get()!=a&&i.isVisible.set(a)}}e.handleGetLayerListItemInfo=function(b,a){if(!a)throw Error("Get Layer List Item Info: required context was not supplied.");if(!b||!b.layerList)throw Error("Get Layer List Item Info: No layer list available.");b.doWhenLayerListInitialized(function(){var d=
a.getValue("ItemId"),e=a.getValue("ItemName"),f=b.layerList.getDescendants()||[];d?f=dojo.filter(f,function(a){return a&&a.id.get()==d}):e&&(f=dojo.filter(f,function(a){return a&&a.name.get()==e}));for(var i=[],j=0;j<f.length;j++){var k=f[j];k&&(k={isVisible:k.isVisible.get(),isEffectivelyVisible:k.isEffectivelyVisible.get(),isExpanded:k.isExpanded.get(),hasChildren:k.children&&k.children.getLength()>0,name:k.name.get(),id:k.id.get(),parentId:k.parent?k.parent.id.get():null},i.push(k))}a.setValue("Items",
JSON.stringify(i));a.completeActivity()})};e.handleSetLayerListItemInfo=function(b,a){if(!a)throw Error("Set Layer List Item Info: required context was not supplied.");if(!b||!b.layerList)throw Error("Set Layer List Item Info: No layer list available.");b.doWhenLayerListInitialized(function(){var e=a.getValue("ItemId"),h=a.getValue("ItemName"),i=a.getValue("IsVisible"),k=a.getValue("IsEffectivelyVisible"),l=a.getValue("IsExpanded"),n=b.layerList.getDescendants()||[],s=null;e?s=d.framework.utils.ArrayUtils.firstOrDefault(n,
function(a){return a&&a.id.get()==e}):h&&(s=d.framework.utils.ArrayUtils.firstOrDefault(n,function(a){return a&&a.name&&a.name.get()==h}));s&&(l!==null&&s.isExpanded.set(l),k!==null&&f(s,k),i!==null&&s.setItemVisibility(i));a.completeActivity()})}})(e.WorkflowHandlers||(e.WorkflowHandlers={}))})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){d.handleListenForExternalEvent=function(d,b){var a=b.getValue("EventName");if(d._eventListenersResults.hasOwnProperty(a))d._eventListenersResults[a]=null;else{d._eventListenersResults[a]=null;var e=d.app.event(a).subscribe(d,function(){d._eventListenersResults[a]=arguments});d._eventListenersToken.push(function(){d.app.event(a).unsubscribe(e)})}b.completeActivity()}})(d.WorkflowHandlers||(d.WorkflowHandlers={}))})(d.workflow||
(d.workflow={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){d.handleGetSelectedFeatures=function(d,b){var a=b.getValue("FeatureSetId"),e=b.getValue("FeatureSetCollectionId");(a=d.getFeaturesInCollection(e,a))&&a.length>0?b.setValue("SelectedFeatures",a):b.setValue("SelectedFeatures",null);b.completeActivity()}})(d.WorkflowHandlers||(d.WorkflowHandlers={}))})(d.workflow||(d.workflow={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){d.handleIntersectLayers=function(){}})(d.WorkflowHandlers||(d.WorkflowHandlers={}))})(d.workflow||(d.workflow={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){d.handlePrompt=function(d,b){var a=b.getValue("Title"),e=b.getValue("Description"),f=b.getValue("DefaultText");d.app.command("Prompt").execute(a,e,f,function(a){b.setValue("Result",a);b.completeActivity()})}})(d.WorkflowHandlers||(d.WorkflowHandlers={}))})(d.workflow||(d.workflow={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex=
{}));(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){d.handleRunExternalCommand=function(d,b){var a=b.getValue("CommandName"),e=b.getValue("CommandParameter");d.app.command(a).execute(e);b.completeActivity()}})(d.WorkflowHandlers||(d.WorkflowHandlers={}))})(d.workflow||(d.workflow={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){(function(d){d.handleShowMapTip=function(d,b){var a=b.getValue("FeatureSetCollectionId"),e=b.getValue("FeatureSetId"),f=b.getValue("FeatureId"),i=null,k=[];a?a&&(i=a=="Active"?d.app.featureSetManager.getCollectionById(d._lastOpenedCollectionId):d.app.featureSetManager.getCollectionById(a)):i=d.app.featureSetManager.getCollectionById(d._lastOpenedCollectionId);if(i&&i.featureSets&&i.featureSets.getLength()>0)if(e){if(e=i.getFeatureSetById(e))for(l=
0;l<e.features.getLength();l++)if(n=e.features.getAt(l))if(f)n.id.get()==f&&k.push(n);else{k.push(n);break}}else for(a=0;a<i.featureSets.getLength();a++)if(e=i.featureSets.getAt(a))for(var l=0;l<e.features.getLength();l++){var n=e.features.getAt(l);if(n)if(f)n&&n.id.get()==f&&k.push(n);else{k.push(n);break}}k.length>0&&d.app.command("ShowMapTip").execute(k[0]);b.completeActivity()}})(d.WorkflowHandlers||(d.WorkflowHandlers={}))})(d.workflow||(d.workflow={}))})(d.modules||(d.modules={}))})(d.mapping||
(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(f){(function(f){(function(f){f.setFeatureProperties=function(e,b){if(e){var a=b.getValue("LabelFormat"),f=b.getValue("DescriptionFormat"),h=b.getValue("LongDescriptionFormat"),i=b.getValue("IconUri"),k=b.getValue("FeatureSetDisplayName");k&&e.displayName.set(k);if((a||f||h||i)&&e.features)for(k=0;k<e.features.length();++k){var l=e.features.getAt(k);if(l){if(i){var n=b.getSite();n&&l.iconUri.set(d.essentials.RestHelper.processClientSideTokens(n,i))}a&&
l.labelFormat.set(a);f&&l.descriptionFormat.set(f);h&&l.longDescriptionFormat.set(h)}}}};f.handleSelectFeatures=function(f,b){var a=b.getValue("FeatureSet"),g=b.getValue("MapServiceId"),h=b.getValue("LayerId"),i=b.getValue("LayerName"),k=b.getValue("CollectionName"),l=b.getValue("ClearCollectionFirst"),n=b.getValue("ShowPushpins"),s=null;l||(l=false);n||(n=false);if(g){var m=null,q=b.getSite();q&&(m=q.getResourceById(q.essentialsMap.mapServices,g));m&&(h?s=m.findLayerById(h):i&&(s=m.findLayerByName(i)))}if(a&&
a.fields)for(g=0;g<a.fields.length;g++)if(h=a.fields[g],h.type==="esriFieldTypeDate"&&a.features&&a.features.length)for(i=0;i<a.features.length;i++)m=a.features[i],m.attributes[h.alias]?m.attributes[h.alias]=new Date(m.attributes[h.alias]):m.attributes[h.name]&&(m.attributes[h.name]=new Date(m.attributes[h.name]));var p=new e.infrastructure.FeatureSet({esriFeatureSet:a,layer:s,app:this.app});d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.setFeatureProperties(p,b);p!=null&&p.features!=
null&&p.features.length()>0&&s!=null&&!p.features.getAt(0).hasGeometry.get()?p.loadGeometries(null).then(function(){f.prepFeatureSetInCollection(p,k,l,s,n);b.completeActivity()},function(){f.prepFeatureSetInCollection(p,k,l,s,n);b.completeActivity()}):(f.prepFeatureSetInCollection(p,k,l,s,n),b.completeActivity())}})(f.WorkflowHandlers||(f.WorkflowHandlers={}))})(f.workflow||(f.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){(function(e){var f=function(b){function a(a,d){b.call(this,a,d)}__extends(a,b);a.prototype.attach=function(a){if(!a)throw Error("{0}: A view model must be specified to attach to.".format(this.id));b.prototype.attach.call(this,a)};a.prototype.handleCheckboxChecked=function(a,b,d){this.parentView.viewModel.featureChecked(d)};return a}(d.framework.ui.ViewBase);e.DisplayResultPickerResultTemplateView=f})(e.templates||(e.templates={}))})(e.workflow||
(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){return function(d){this.resourceName=this.internalRegionName=this.regionName=this.name=null;this.hideForMapInteraction=this.isManaged=false;this.allowClose=true;this.activityContext=this.view=null;d&&dojo.safeMixin(this,d);this.showOverlay=new Observable(false);this.displayHeader=new Observable(d.displayHeader||false);this.busy=new Observable(false);this.hasContent=new Observable(false);this.message=new Observable("");
this.iconUri=new Observable("");this.title=new Observable("");this.visible=new Observable(true)}}();d.WorkflowContainerConfig=e})(d.workflow||(d.workflow={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,b){e.call(this,a,b);this.hasSubscribed=false;var d=this;if(a&&!this.hasSubscribed)this.hasSubscribed=true,a.event("ViewContainerViewClosedEvent").subscribe(this,function(a){if(a&&(a.xButtonClicked||a.backButtonClicked)&&a.viewId===this.id&&d.viewModel&&d.viewModel.activityContext&&d.viewModel.activityContext.workflow)d.app.event("WorkflowAbort").publish(d.viewModel.activityContext.workflow()),d.app.event("WorkflowAbortedEvent").publish(d.viewModel.activityContext.workflow())})}
__extends(b,e);b.prototype.attach=function(a){if(!a)throw Error("{0}: A view model must be specified to attach to.".format(this.id));e.prototype.attach.call(this,a);d.essentialsHtmlViewer.mapping.modules.workflow.WorkflowUtils.convertToHTMLSyntax(a.message);this.title.sync(a.title);this.iconUri.sync(a.iconUri)};return b}(d.framework.ui.ViewBase);e.WorkflowContainerView=f})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,b){e.call(this,a,b);this.formWidth=this.formHeight=this.showTitleInFormBody=this.title=this.buttons=this.workflowFormContent=this.validationResults=this.formDefinition=this.activityContext=null;this.defaultFormWidth=800;this.defaultFormHeight=600;this.workflowFormContent=new Observable(null);this.buttons=new ObservableCollection([]);this.title=new Observable("Workflow form");this.formWidth=new Observable(this.defaultFormWidth);
this.formHeight=new Observable(this.defaultFormHeight);this.showTitleInFormBody=new Observable(false);this.validationResults=new ObservableCollection}__extends(b,e);b.prototype.initialize=function(a){a&&a.hasOwnProperty("showTitleInFormBody")&&this.showTitleInFormBody.set(a.showTitleInFormBody||false);this.buttons=a&&a.hasOwnProperty("buttons")?new ObservableCollection(a.buttons):new ObservableCollection([]);if(a&&a.hasOwnProperty("formDefinition"))this.formDefinition=a.formDefinition;if(this.formDefinition!=
null)this.formDefinition.attached_application=this.app,this.formWidth.set(this.formDefinition.maxWidth.get()),this.formHeight.set(this.formDefinition.maxHeight.get()),this.formWidth.get()<1&&this.formWidth.set(this.defaultFormWidth),this.title.set(this.formDefinition.title.get()),this.workflowFormContent.set(d.forms.renderFormItem(this.formDefinition.containerFormItem))};b.prototype.getDefaultButton=function(){for(var a=null,b=null,d=0;d<this.buttons.getLength();d++)if(b=this.buttons.getAt(d),b.isDefault.get()){a=
b;break}return a};return b}(d.framework.ui.ViewModelBase);e.WorkflowFormViewModel=f})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(e){function b(a,b){e.call(this,a,b);this.token=this.workflowFormContent=this.formDefinition=this.workflowContainer=this.activityContext=null;this.token=this.app.command("SubmitWorkflowForm").register(this,this.submitRequest)}__extends(b,e);b.prototype.attach=function(a){if(!a)throw Error("{0}: A view model must be specified to attach to.".format(this.id));this.workflowFormContent=a.workflowFormContent;this.workflowFormContent.bind(this,
function(){this.app.viewManager.notifyDimensionsChanged(this)});this.activityContext=this.configuration.activityContext;this.workflowContainer=this.configuration.workflowContainer;e.prototype.attach.call(this,a);Modernizr&&!Modernizr.touch&&this._focusFirstItem();a.title.bind(this,function(a){this.title.set(a)});a.title.pulse();this.app.viewManager.notifyDimensionsChanged(this)};b.prototype._focusFirstItem=function(){this.app.command("FocusOnFirstInputInView").execute(this)};b.prototype.submitRequest=
function(a){this.viewModel.formDefinition===a&&this.handleSubmit(null)};b.prototype.handleSubmit=function(a){if(a&&d.essentialsHtmlViewer.___userInAutoComplete===true)return a.preventDefault(),false;var b=this.viewModel.getDefaultButton();if(b)this.finishFormWithButton(b);else if(a)return a.preventDefault(),false};b.prototype.handleClickButton=function(a,b,d){this.finishFormWithButton(d)};b.prototype.finishFormWithButton=function(a){this._processForm(this.viewModel.formDefinition,this.activityContext,
a)==true&&(this.workflowContainer!=null&&this.workflowContainer.view!=null&&(this.workflowContainer.hasContent.set(false),this.app.viewManager.notifyDimensionsChanged(this.workflowContainer.view)),this.app.command("SubmitWorkflowForm").unregister(this.token),this.app.viewManager.destroyView(this))};b.prototype._processForm=function(a,b,d){if(a!=null&&d!=null&&d.causesValidation&&d.causesValidation.get()){for(var e=a.validate(),f=[],i=0;i<e.length;++i)e[i].isValid==false&&f.push(e[i]);if(f!=null&&
f.length>0)return this.viewModel.validationResults.set(f),false;else this.viewModel.validationResults.clear()}e=a.getResults();for(f=0;f<e.length;f++)(i=e[f])&&i.argumentName&&dojo.trim(i.argumentName)!=""&&b.setValue(i.argumentName,i.value,true);b.setValue("ButtonResultValue",d.value.get());a.destroy();b.completeActivity();return true};b.prototype.deactivated=function(){this.formDefinition!=null&&this.formDefinition.destroy();this.formDefinition=null};return b}(d.framework.ui.ViewBase);e.WorkflowFormView=
f})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(a,b){d.call(this,a,b);this._hideViewOnClickWorkflow=null}__extends(b,d);b.prototype.attach=function(a){if(!a)throw Error("{0}: A view model must be specified to attach to.".format(this.id));d.prototype.attach.call(this,a);this.title.set(this.app.getResource(this.libraryId,"language-workflow-available-workflows"))};b.prototype.handleButtonClick=function(){};b.prototype.handleClickWorkflow=function(a,b,d){this.configuration.hideOnClickWorkflow&&
this.app.command("DeactivateView").execute(this.id);this.app.command("RunWorkflowById").execute(d.id);return false};return b}(d.framework.ui.ViewBase);e.WorkflowListView=f})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(d){(function(d){var e=function(){function d(){}d.convertToHTMLSyntax=function(b){if(b.get()===null||b.get()===void 0)return null;for(var a in d.patterns){if(!a||a===void 0||a===null)break;var e=RegExp(a,"g");b.set(b.get().replace(e,d.patterns[a]))}};d.patterns={"\\n":"<br />","\\t":"&nbsp; &nbsp; &nbsp; &nbsp;"};return d}();d.WorkflowUtils=e})(d.workflow||(d.workflow={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(d){(function(d){(function(f){(function(f){var i=function(d){function b(a,b){d.call(this,a,b);this.command=this.workflowId=null}__extends(b,d);b.prototype.onDrawEnd=function(a){if(this.workflowId){var b={geometry:a,workflowId:this.workflowId};this.app.command("RunWorkflowWithGeometry").execute(b)}d.prototype.onDrawEnd.call(this,a)};return b}(d.infrastructure.tools.MapTool);f.WorkflowTool=i})(f.workflow||(f.workflow={}))})(d.modules||(d.modules={}))})(d.mapping||(d.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments);this.workflows=this.isActive=null}__extends(b,d);b.prototype.initialize=function(){this.isActive=new Observable(false);this.workflows=new ObservableCollection([]);this.app.site!=null&&this.app.site.isInitialized?this.getWorkflows():this.app.event("SiteInitializedEvent").subscribe(this,this.getWorkflows)};b.prototype.getWorkflows=function(){this.workflows.set(this.app.site.workflows)};
return b}(d.framework.ui.ViewModelBase);e.WorkflowViewModel=f})(e.workflow||(e.workflow={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);return b}(d.framework.application.ModuleBase);e.ZoomControlModule=f})(e.zoomcontrol||(e.zoomcontrol={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.handleClickZoomIn=function(){var a=this;this.app.command("StepZoomIn").execute();this.app.event("MapZoomEvent").once(this,function(){a.app.command("FocusOnFirstInputInView").execute(a)});return false};return b}(d.framework.ui.ViewBase);e.ZoomInView=f})(e.zoomcontrol||(e.zoomcontrol={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(d){(function(f){(function(e){(function(e){(function(e){var f=function(d){function b(){d.apply(this,arguments)}__extends(b,d);b.prototype.handleClickZoomOut=function(){var a=this;this.app.command("StepZoomOut").execute();this.app.event("MapZoomEvent").once(this,function(){a.app.command("FocusOnFirstInputInView").execute(a)});return false};return b}(d.framework.ui.ViewBase);e.ZoomOutView=f})(e.zoomcontrol||(e.zoomcontrol={}))})(e.modules||(e.modules={}))})(f.mapping||(f.mapping={}))})(d.essentialsHtmlViewer||
(d.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationModule",geocortex.framework.application.ModuleBase,{attempts:null,authView:null,constructor:function(){this.attempts=0},initialize:function(d){this.inherited(arguments);var f=d.region||"ModalWindowRegion",e=this;dojo.subscribe("geocortex_authenticationSucceeded",function(d){e.attempts=0;var f=new geocortex.essentialsHtmlViewer.mapping.infrastructure.eventArgs.AuthenticationEventArgs;f.username=d.username;f.token=
d.token;f.result=true;e.app.eventRegistry.event("AuthenticationSucceededEvent").publish(f)});dojo.extend(geocortex.essentials.RestHelperHTTPService,{_gatherCredentials:function(d){var k=false;if(e.attempts>0){var l=new geocortex.essentialsHtmlViewer.mapping.infrastructure.eventArgs.AuthenticationEventArgs;l.username=null;l.token=null;l.result=false;k=true;e.app.eventRegistry.event("AuthenticationFailedEvent").publish(l)}deferred=d?d:new dojo.Deferred;if(e.authView==null)e.authView=e.app.viewManager.createView({id:"AuthenticationdialogView",
markup:"Mapping/modules/Authentication/AuthenticationView.html",type:"geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationView",title:e.app.getResource(e.libraryId,"language-auth-title"),libraryId:e.libraryId,region:f}),d=new geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationViewModel(e.app),d.libraryId=e.libraryId,d.error.set(k),e.authView.attach(d);e.authView.deferred=deferred;e.app.viewManager.activateView(e.authView);++e.attempts;return deferred}})}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationView",geocortex.framework.ui.ViewBase,{deferred:null,attach:function(d){this.inherited(arguments);this.app.eventRegistry.event("AuthenticationFailedEvent").subscribe(this,function(){this.app.viewManager.destroyView(this)});this.app.eventRegistry.event("AuthenticationSucceededEvent").subscribe(this,function(){this.app.viewManager.destroyView(this)});this.app.eventRegistry.event("SiteInitializationFailedEvent").subscribe(this,
function(){this.app.viewManager.destroyView(this)});this.app.eventRegistry.event("SiteAuthenticationFailedEvent").subscribe(this,function(){this.app.viewManager.destroyView(this)})},handleClickLogin:function(){this.viewModel.username.get()==""?(this.app.viewManager.destroyView(this),this.viewModel.password.set(),this.viewModel.error.set(true),this.viewModel.errorMessage.set(this.app.getResource(this.libraryId,"language-auth-username-empty")),this.app.viewManager.activateView(this)):this.deferred&&
this.viewModel&&(this.viewModel.authenticating.set(true),this.deferred.resolve({username:this.viewModel.username.get(),password:this.viewModel.password.get()}))}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationViewModel",geocortex.framework.application.ModuleBase,{username:null,password:null,authenticating:null,error:null,errorMessage:null,constructor:function(){this.inherited(arguments);this.username=new Observable("");this.password=new Observable("");this.authenticating=new Observable(false);this.error=new Observable(false);this.errorMessage=new Observable;this.app.eventRegistry.event("AuthenticationFailedEvent").subscribe(this,
function(){this.error.set(true);this.authenticating.set(false);this.errorMessage.set(this.app.getResource(this.libraryId,"language-auth-error"))});this.app.eventRegistry.event("AuthenticationSucceededEvent").subscribe(this,function(){this.error.set(false);this.errorMessage.set(null);this.authenticating.set(false)});this.app.commandRegistry.command("HideSplashScreen").execute()},reset:function(){this.username.set("");this.password.set("");this.authenticating.set(false);this.error.set(false);this.errorMessage.set(null)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.banner.BannerModule",geocortex.framework.application.ModuleBase,{initialize:function(d){this.inherited(arguments)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.banner.BannerView",geocortex.framework.ui.ViewBase,{_longPressTimer:null,_pressLengthMs:1E3,_firstEvent:null,handleTouchStart:function(d){d=d.target||d.srcElement;if(!this._firstEvent&&d.id!=="gcx_search")this._firstEvent="touch start",this._beginLongPress();return true},handleMouseDown:function(d){d=d.target||d.srcElement;if(!this._firstEvent&&d.id!=="gcx_search")this._firstEvent="mouse down",this._beginLongPress();return true},handleTouchEnd:function(){if(this._firstEvent===
"touch start")this._firstEvent=null,this._cancelLongPress();return true},handleMouseUp:function(){if(this._firstEvent==="mouse down")this._firstEvent=null,this._cancelLongPress();return true},handleMouseOut:function(){if(this._firstEvent==="mouse down")this._firstEvent=null,this._cancelLongPress();return true},handleTouchCancel:function(){if(this._firstEvent==="touch start")this._firstEvent=null,this._cancelLongPress();return true},handleTouchMove:function(){if(this._firstEvent==="touch start")this._firstEvent=
null,this._cancelLongPress();return true},handleDoubleClick:function(){this.app.command("ToggleToolbar").execute()},_beginLongPress:function(){this._longPressTimer&&clearTimeout(this._longPressTimer);var d=this;this._longPressTimer=setTimeout(function(){d.app.command("ActivateView").execute("LogView")},d._pressLengthMs)},_cancelLongPress:function(){if(this._longPressTimer)clearTimeout(this._longPressTimer),this._longPressTimer=null}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.banner.BannerViewModel",geocortex.framework.ui.ViewModelBase,{applicationTitle:null,applicationSubtitle:null,titleColor:null,subtitleColor:null,backgroundColor:null,backgroundImage:null,leftImage:null,leftImageDescription:null,rightImage:null,rightImageDescription:null,height:null,initialize:function(d){this.inherited(arguments);this.applicationTitle=new Observable(d.applicationTitle);this.applicationSubtitle=new Observable(d.applicationSubtitle||
"");this.titleColor=new Observable(d.titleColor||"#1B7DBF");this.subtitleColor=new Observable(d.subtitleColor||"#959398");this.backgroundColor=new Observable(d.backgroundColor||"White");this.backgroundImage=new Observable(d.backgroundImage?"url({0})".format(encodeURI(d.backgroundImage)):"");this.leftImage=new Observable(d.leftImage);this.leftImageDescription=new Observable(d.leftImageDescription);this.rightImage=new Observable(d.rightImage);this.rightImageDescription=new Observable(d.rightImageDescription);
this.height=new Observable(d.height?d.height+"px":"50px")}});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureEditing.FeatureEditingModule",geocortex.framework.application.ModuleBase,{constructor:function(){},initialize:function(){}});
geocortex.essentialsHtmlViewer.mapping.modules.featureEditing.FeatureEditingModule.getEditingGeometryStatusMessage=function(d,f,e,i){switch(e){case esri.toolbars.Draw.POINT:return d.getResource(f,"language-feature-editing-geometry-point");case esri.toolbars.Draw.MULTI_POINT:return i?d.getResource(f,"language-feature-editing-geometry-multi-point"):d.getResource(f,"language-feature-editing-geometry-point");case esri.toolbars.Draw.POLYLINE:case esri.toolbars.Draw.FREEHAND_POLYLINE:return d.getResource(f,
"language-feature-editing-geometry-polyline");case esri.toolbars.Draw.POLYGON:case esri.toolbars.Draw.FREEHAND_POLYGON:return d.getResource(f,"language-feature-editing-geometry-polygon");case esri.toolbars.Draw.EXTENT:return d.getResource(f,"language-feature-editing-geometry-rectangle")}return d.getResource(f,"language-feature-editing-geometry-default")};
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureEditing.TemplatePickerView",geocortex.framework.ui.ViewBase,{constructor:function(){this.app.commandRegistry.command("ShowFeatureTemplatePicker").register(this,function(d){this.app.commandRegistry.command("ActivateView").execute(this.id);if(this.viewModel)if(this.app.isOffline.get()===true){var f=this;this.app.store.get("__featureLayerModuleIndex",function(e){if(e&&(e=JSON.parse(e))){f.viewModel.filteredLayers=[];for(var i in e.featureLayers){if(!e.featureLayers.hasOwnProperty(i))break;
f.viewModel.filteredLayers.push(e.featureLayers[i].serviceId)}}f._loadTemplate(d)})}else{if(this.viewModel.filteredLayers)this.viewModel.filteredLayers.length=0,this.viewModel.filteredLayers=null;this._loadTemplate(d)}},function(d){return d===void 0?true:typeof d==="object"&&d instanceof geocortex.essentials.Layer&&d.mapService&&d.mapService.serviceLayer&&d.mapService.serviceLayer.isEditable?d.mapService.serviceLayer.isEditable():false})},_loadTemplate:function(d){d?this.viewModel.loadTemplatesForCurrentLayer(d):
this.viewModel.loadLayerTemplates()},handleFeatureTemplateClick:function(d,f,e){d=null;if(e.proto&&e.proto.toJson)d=new esri.Graphic(e.proto.toJson());else if(d=new esri.Graphic(null),e.proto&&e.proto.attributes)d.attributes=e.proto.attributes;f=null;if(e.drawingTool&&e.drawingTool.value)switch(e.drawingTool.value){case "esriFeatureEditToolPoint":f="MapPoint";break;case "esriFeatureEditToolLine":f="Polyline";break;case "esriFeatureEditToolFreehand":e.layer.geometryType==="esriGeometryPolyline"?f=
"FreehandPolyline":e.layer.geometryType==="esriGeometryPolygon"&&(f="FreehandPolygon");break;case "esriFeatureEditToolAutoCompletePolygon":case "esriFeatureEditToolPolygon":f="Polygon";break;case "esriFeatureEditToolRectangle":e.layer.geometryType==="esriGeometryPolygon"&&dojo.mixin(d,{needsConversion:true});f="Rectangle";break;default:f="Polygon"}if(!f)switch(e.layer.geometryType){case "esriGeometryPoint":f="MapPoint";break;default:f=e.layer.geometryType.replace("esriGeometry","")}e.layer.add(d);
e.layer.show&&e.layer.show();dojo.mixin(d,{drawType:f});this.app.commandRegistry.command("StartAddingFeatureGeometry").execute(d);this.app.commandRegistry.command("ActivateView").execute("MapView")}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureEditing.TemplatePickerViewModel",geocortex.framework.ui.ViewModelBase,{layerTemplates:null,filteredLayers:null,constructor:function(){this.layerTemplates=new ObservableCollection},initialize:function(){this.app.eventRegistry.event("SiteServiceLayersLoadedEvent").subscribe(this,this.loadLayerTemplates)},_layerIsValidForEditing:function(d){if(!d)return false;var f=true;if(this.filteredLayers)for(var f=false,e=0;e<this.filteredLayers.length;e++)if(this.filteredLayers[e]===
d){f=true;break}return f},loadTemplatesForCurrentLayer:function(d){d&&d.mapService&&(this.layerTemplates.clear(),(d=this._getFeatureLayerModel(d.mapService))&&this.layerTemplates.addItem(d))},loadLayerTemplates:function(){if(this.app.site&&this.app.site.essentialsMap&&this.app.site.isInitialized){var d=this.app.site.getFeatureServices();this.layerTemplates.clear();for(var f=[],e=0;e<d.length;e++){var i=this._getFeatureLayerModel(d[e]);i&&f.push(i)}this.layerTemplates.addItems(f)}},_getFeatureLayerModel:function(d){if(d){if(!this._layerIsValidForEditing(d.id))return null;
if(d.serviceLayer.isEditable&&d.serviceLayer.isEditable()){var f=d.displayName;if(d&&d.layers&&d.layers.length>0)f=d.layers[0].displayName;var e=new ObservableCollection,i=true,k=this._loadFeatureTemplates(d.serviceLayer);k&&k.length>0&&(e.addItems(k),i=false);f={displayName:new Observable(f),mapServiceId:new Observable(d.id),layer:d.serviceLayer,templates:e};if(i){f.proto={attributes:[]};for(i=0;i<d.serviceLayer.fields.length;i++)f.proto.attributes.push(d.serviceLayer.fields[i])}return f}}},createTemplate:function(d,
f){var e=new geocortex.essentialsHtmlViewer.mapping.modules.featureEditing.Templates.FeatureTemplateViewModel;if(f){var i=f.name;e.name.set(i);e.description.set(f.description);e.drawingTool.set(f.drawingTool);e.proto=f.prototype;if(d.renderer&&(i=this._getTemplateSymbol(i,d.renderer)))switch(i.type){case "picturemarkersymbol":e.symbolUri.set(i.url);break;default:e.setTemplateShapeStyle("background-color:"+i.color.toCss()+";height:24px;width:24px"),i=this._getSVGShapeType(i.type),e.createSVGElement(i.shapeType,
i.points)}}e.layer=d;return e},_consumeTemplate:function(d,f){return this.createTemplate(d,f)},_getSVGShapeType:function(d){var f={shapeType:null,points:null};switch(d){case "simplelinesymbol":f.shapeType="polyline";f.points="20,1 25,9 16,21 8,2";break;case "simplemarkersymbol":case "simplefillsymbol":f.shapeType="polygon",f.points="30,1 35,9 20,21 8,2"}return f},_getTemplateSymbol:function(d,f){if(d&&f)if(f.infos)for(var e=0;e<f.infos.length;e++){var i=f.infos[e];if(i.label===d||i.value===d)return i.symbol}else return f.symbol},
_loadFeatureTemplates:function(d){if(d&&d.templates){var f=[];if(d.templates.length>0)for(var e=0;e<d.templates.length;++e)f.push(this._consumeTemplate(d,d.templates[e]));else if(d.types&&d.types.length>0)for(e=0;e<d.types.length;++e){var i=d.types[e];if(i.templates)for(var k=0;k<i.templates.length;++k)f.push(this._consumeTemplate(d,i.templates[k]))}return f}}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureEditing.Editor.AttributeEditorView",geocortex.framework.ui.ViewBase,{inactive:null,constructor:function(){this.app.commandRegistry.command("ShowFeatureAttributeEditor").register(this,function(){this.app.commandRegistry.command("ActivateView").execute(this.id)});this.app.commandRegistry.command("HideFeatureAttributeEditor").register(this,function(){this.isActive&&this.app.viewManager.deactivateView(this);return false})},deactivated:function(){if(!this.inactive)this.inactive=
true,this.inherited(arguments),this.viewModel&&this.viewModel._cancelEditing()},attach:function(d){this.inherited(arguments);d&&this.title.sync(d.headerText)},handleButtonClick:function(d,f,e){this.viewModel.applyButtonClick(e);return false},handleTypeFieldChange:function(d,f,e){this.viewModel.typeFieldSelected(e);return false}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureEditing.Editor.AttributeEditorViewModel",geocortex.framework.ui.ViewModelBase,{isApplyingEdits:null,feature:null,featureClone:null,fields:null,currentMapService:null,currentToolName:null,editingActive:null,editingNewFeature:null,hasRelatedLayers:null,validationMessages:null,isEditingRelatedFeatureNotInSite:null,isEditingGeometry:null,featureTypeHasGeometry:null,editGeometryButton:null,hasGeometry:null,geometry:null,attributes:null,
templates:null,defaultButton:null,buttons:null,validateGeometry:null,headerText:null,originalSymbol:null,_editingRelationshipOrigin:null,_editingRelationshipDestination:null,_editingGeometryMapClickHandle:null,_relatedFeature:null,_editObject:null,_layerClickEvents:null,_lastLayer:null,_newObjectId:0,_editLogEntry:null,constructor:function(){this.isApplyingEdits=new Observable(false);this.feature=new Observable(null);this.gcxFeature=new Observable(null);this.fields=new ObservableCollection([]);this.editingActive=
new Observable(false);this.editingNewFeature=new Observable(null);this.validationMessages=new ObservableCollection([]);this.hasRelatedLayers=new Observable(false);this.isEditingRelatedFeatureNotInSite=new Observable(false);this.isEditingGeometry=new Observable(false);this.featureTypeHasGeometry=new Observable(false);this.hasGeometry=new Observable(false);this.geometry=new Observable(null);this.currentMapService=new Observable(null);this.headerText=new Observable("");this._layerClickEvents=[];this.buttons=
new ObservableCollection;this._registerCommands();this._listenToMapEvents()},initialize:function(d){d&&d.tools&&this.app&&this.app.toolRegistry&&this.app.toolRegistry.createTools(d.tools,true);this.validateGeometry=d&&d.validateGeometry?d.validateGeometry:true},_getToolNameByDrawType:function(d){d||(d="Polygon");return"Editing"+d+"Tool"},_registerCommands:function(){this.app.commandRegistry.command("StartAddingFeatureGeometry").register(this,function(d){if(d)this.headerText.set(this.app.getResource(this.libraryId,
"language-common-feature-editing")),this.currentToolName=this._getToolNameByDrawType(d.drawType),this.editingNewFeature.set(true),this.setFeature(d),this.app.commandRegistry.command("ShowMap").execute(),this._editGeometry()});this.app.commandRegistry.command("StartEditingFeature").register(this,this._executeStartEditingFeature,function(d){return d&&d.layer&&(d=d.layer,d.mapService&&d.mapService.serviceLayer&&d.mapService.serviceLayer.isEditable)?d.mapService.serviceLayer.isEditable():false});this.app.commandRegistry.command("StartEditingNewFeature").register(this,
this._executeStartEditingNewFeature);this.app.commandRegistry.command("SetEditorFeatureGeometry").register(this,this._executeSetEditorGeometry);this.app.commandRegistry.command("StartEditingEditLogEntry").register(this,function(d){this.headerText.set(d.getDescription(this.app,this.libraryId));this.editingNewFeature.set(false);var f=new esri.Graphic(d.feature.toJson?d.feature.toJson():d.feature);f.__editingMeta=d.metadata;this.setFeature(f,d.mapServiceUrl);this._editLogEntry=d;this._setupButtons();
this.app.commandRegistry.command("ShowFeatureAttributeEditor").execute()});this.app.commandRegistry.command("FeatureLayerModuleStartSync").register(this,this._cancelEditing)},_listenToMapEvents:function(){this.app.eventRegistry.event("MapExtentChangedEvent").subscribe(this,function(){var d=this;if(d.isEditingGeometry.get()&&!d.editingNewFeature.get()){var f=d.featureClone;if(f){var e=function(e){if(e=d._findFeatureInLayer(f,e))e.setGeometry(f.geometry),e.hide()};if(d._lastLayer.updating)var i=dojo.connect(d._lastLayer,
"onUpdateEnd",function(){if(d._lastLayer.loaded)e(this);else var f=dojo.connect(d._lastLayer,"onLoad",function(){e(this);dojo.disconnect(f)});dojo.disconnect(i)});else e(d._lastLayer)}}});this.app.eventRegistry.event("ApplicationOfflineEvent").subscribe(this,this._resetGeometryEditingTool);this.app.eventRegistry.event("ApplicationOnlineEvent").subscribe(this,this._resetGeometryEditingTool)},_resetGeometryEditingTool:function(){var d=this,f=this.app.isOffline.get()?"FeatureLayerOfflineEvent":"FeatureLayerOnlineEvent",
e=this.app.eventRegistry.event(f).subscribe(this,function(){d.editingNewFeature.get()&&(d.cancel(),d.app.commandRegistry.command("ShowFeatureTemplatePicker").execute());this.app.eventRegistry.event(f).unsubscribe(e)})},_setupButtons:function(){var d=[];this.buttons.clear();var f=new Observable(true),e=null,i=null;this._editLogEntry==null&&(e=this.app.getResource(this.libraryId,"language-common-delete"),e=dojo.mixin(new geocortex.forms.FormButton(e,"Delete",false,false),{visibility:new Observable,
callback:this._confirmDelete}),e.visibility.syncTransform(this.editingNewFeature,function(d){return!d}),d.push(e));if(this.featureTypeHasGeometry.get())this.hasGeometry.get()?(e=this.app.getResource(this.libraryId,"language-feature-editing-edit-geometry-caption"),i="EditGeometry"):(e=this.app.getResource(this.libraryId,"language-feature-editing-add-geometry-caption"),i="AddGeometry"),this.editGeometryButton=dojo.mixin(new geocortex.forms.FormButton(e,i,true,false),{visibility:f,callback:this._editGeometry}),
this.editGeometryButton.visibility.syncTransform(this.isEditingGeometry,function(d){return!d}),d.push(this.editGeometryButton),e=this.app.getResource(this.libraryId,"language-feature-editing-stop-editing-geometry-caption"),f=dojo.mixin(new geocortex.forms.FormButton(e,"StopEditingGeometry",false,false),{visibility:new Observable,callback:this.stopEditingGeometry}),f.visibility.syncTransform(this.isEditingGeometry,function(d){return d}),d.push(f);e=this.app.getResource(this.libraryId,"language-common-save");
f=this.defaultButton=dojo.mixin(new geocortex.forms.FormButton(e,"Save",true,true),{visibility:new Observable(true),callback:this.save});d.push(f);e=this.app.getResource(this.libraryId,"language-common-cancel");d.push(dojo.mixin(new geocortex.forms.FormButton(e,"Cancel",false,false),{visibility:new Observable(true),callback:this._cancelEditing}));this.buttons.addItems(d)},applyButtonClick:function(d){d&&d.callback&&d.callback.apply(this)},_removeFeatureClickEvents:function(){for(var d=0;d<this._layerClickEvents.length;++d)dojo.disconnect(this._layerClickEvents[d]);
this._layerClickEvents=[]},_executeStartEditingFeature:function(d,f){this.app.commandRegistry.command("ClearDefaultHighlights").execute();f||(f=false);try{if(!this.app.map||!this.app.site||!this.app.site.isInitialized){var e=this;this.app.eventRegistry.event("SiteInitializedEvent").subscribe(this,function(){e._executeStartEditingFeatureImpl(d,f)})}else this._executeStartEditingFeatureImpl(d,f)}catch(i){this.app.trace.error("Could not start editing: {0}".format(i)),this.cancel()}},_executeStartEditingNewFeature:function(d){this._executeStartEditingFeature(d,
true)},_executeStartEditingFeatureImpl:function(d,f){this.cancel();try{var e=d;d&&d instanceof geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature&&(d.layer&&d.layer.mapService&&this.currentMapService.set(d.layer.mapService),this.headerText.set(d.label.get()),e=d.esriFeature.get());if(e){if(typeof e.getLayer!="function"){this.app.trace.warning("Could not edit feature - No associated graphic layer was found.");return}this.editingNewFeature.set(f);this.setFeature(e)}this._setupButtons();this.app.commandRegistry.command("ShowFeatureAttributeEditor").execute()}catch(i){this.app.trace.error("Could not start editing: {0}".format(i)),
this.cancel()}},_findFeatureInLayer:function(d,f){if(!d||!f)return null;var e=f.objectIdField,i=f.graphics;if(i.length<1)return null;var k=["__editingMeta","timestamp"];if(f.editFieldsInfo)for(var l in f.editFieldsInfo)f.editFieldsInfo.hasOwnProperty(l)&&k.push(f.editFieldsInfo[l]);var j=function(a){var b=0,d;for(d in a)!Array.contains(k,d)&&a.hasOwnProperty(d)&&++b;return b};l=i[0].attributes;if(j(l)!==j(d.attributes))return null;var j=0,b=[],a=[],g;for(g in l){var h=Array.contains(k,g);if(!h&&(!l.hasOwnProperty(g)||
!d.attributes.hasOwnProperty(g)))return null;h||(b.push(g),a.push(g),++j)}for(g=0;g<j;++g)if(b[g]!==a[g])return null;for(g=0;g<i.length;g++)if(l=i[g],!l.gcxIsClone&&l.attributes[e]===d.attributes[e])return l._graphicsLayer=f,l;return null},_findFeatureInLayers:function(d){var f=null;if(this._lastLayer&&(f=this._findFeatureInLayer(d,this._lastLayer)))return this._lastLayer=f._graphicsLayer=k,f;for(var e=this.app.site.getFeatureServices(),i=0;i<e.length;i++){var k=e[i].serviceLayer;if(k!==this._lastLayer&&
(f=this._findFeatureInLayer(d,k))){this._lastLayer=f._graphicsLayer=k;break}}return f},_findGeocortexLayerForUrl:function(d){if(this.app&&this.app.site&&this.app.site.essentialsMap&&this.app.site.essentialsMap.mapServices)for(var f=0;f<this.app.site.essentialsMap.mapServices.length;f++){var e=this.app.site.essentialsMap.mapServices[f];if(e.serviceUrl===d&&e.layers.length>0)return e.layers[0]}return null},_findServiceLayerForUrl:function(d){if(this.app&&this.app.site&&this.app.site.essentialsMap&&
this.app.site.essentialsMap.mapServices)for(var f=0;f<this.app.site.essentialsMap.mapServices.length;f++){var e=this.app.site.essentialsMap.mapServices[f];if(e.url===d)return e.serviceLayer}return null},_reAttachLayerToFeature:function(d,f){if(d.getLayer())this._lastLayer=d.getLayer();else if(f)this._lastLayer=this._findServiceLayerForUrl(f);else{var e=this._findFeatureInLayers(d);e&&(d=e)}this._lastLayer&&this.featureTypeHasGeometry.set(!!this._lastLayer.geometryType);return d},setFeature:function(d,
f,e){e||this.cancel();d?(d=this._reAttachLayerToFeature(d,f),this.feature.set(d),this.geometry.set(d.geometry),this.hasGeometry.set(!!d.geometry),e||(this._buildFeatureAttributes(),this._buildFeatureRelationships()),this.editingActive.set(true)):(this.editingNewFeature.set(true),this.feature.set(null),this._lastLayer=null,this.geometry.set(null),this.hasGeometry.set(false))},cloneFeature:function(d){return new esri.Graphic(d.toJson())},_executeSetEditorGeometry:function(d){this.stopEditingGeometry();
var f=this.feature.get();f&&(f.needsConversion&&d.type==="extent"&&this._lastLayer.geometryType==="esriGeometryPolygon"&&(d=geocortex.essentials.GeometryUtilities.envelopeToPolygon(d)),this.geometry.set(d),this.hasGeometry.set(!!d),f.setGeometry(d),this.app.eventRegistry.event("FeatureGeometryEditedEvent").publish(f));this._setupButtons();this.app.commandRegistry.command("ShowFeatureAttributeEditor").execute()},_createNewFeature:function(d,f,e,i){var k=new esri.Graphic;k.attributes=f||{};k.geometry=
d||new esri.geometry.Point(NaN,NaN);k.symbol=e||null;k.infoTemplate=i;return k},_getMapServiceByLayer:function(d){d=d.url||d._essentialsMetadata.serviceUrl;if(!d)return null;var f=d.indexOf("?token=");f!=-1&&(d=d.substring(0,f));for(f=0;f<this.app.site.essentialsMap.mapServices.length;++f){var e=this.app.site.essentialsMap.mapServices[f];if(e.serviceUrl===d)return e}return null},_getRelatedFeatureLayer:function(d,f,e,i){var k=new dojo.Deferred,d=f.substring(0,f.lastIndexOf("/")+1)+d,d=new esri.layers.FeatureLayer(d,
{mode:esri.layers.FeatureLayer.MODE_SELECTION,outFields:["*"]});dojo.connect(d,"onLoad",dojo.hitch(this,function(d){geocortex.deferredResolve(k,d);typeof e=="function"&&e(d)}));dojo.connect(d,"onError",dojo.hitch(this,function(d){geocortex.deferredReject(k,d);typeof i=="function"&&i(d)}));return k},_preventDeleteForRelOrigin:function(d,f,e){var i=this,k=this.feature.get(),l=this._lastLayer,j=null,b=false;if(k&&l&&d&&d.length()>0&&(j=d.length(),l))for(var a=0;a<d.length();a++){var g=function(){j--;
j<=0&&e&&e()},h=function(a){var d=parseInt(a.id.get()),e=a.relatedTableId?a.relatedTableId.get():a.relationship.relatedTableId,h=l.url||l._essentialsMetadata.serviceUrl,a=new esri.tasks.RelationshipQuery;a.objectIds=[k.attributes[l.objectIdField]];a.outFields=["*"];a.relationshipId=d;var j=new esri.tasks.QueryTask(h),o=null,o=i.app.isOffline.get()===false?j.executeRelationshipQuery(a):i.app.featureLayerModule._getRelatedFeatures(i._getMapServiceByLayer(l),d,a.objectIds[0]);o.then(function(a){var d=
false,j;for(j in a)if(a.hasOwnProperty(j)){d=true;break}d?i._getRelatedFeatureLayer(e,h).then(function(){if(!b){var d=[],e;for(e in a)if(a.hasOwnProperty(e)){var h=a[e].features||a[e];if(h)if(h.length)for(var i=0;i<h.length;i++)d.push(h[i]);else d.push(h)}d.length>0&&f&&(f(d),b=true);g()}},function(){g()}):g()},function(){g()})},o=d.getAt(a);o.relationship&&o.relationship.role==="esriRelRoleOrigin"&&h(o)}(!j||j<=0)&&e&&e()},_confirmDelete:function(){this.app.commandRegistry.command("Confirm").execute(this.app.getResource(this.libraryId,
"language-feature-editing-delete-confirmation"),this.app.getResource(this.libraryId,"language-feature-editing-module-title"),function(){})},deleteCurrentFeature:function(d,f){var e=this,i=this.feature.get(),k=i.getLayer()||this._lastLayer,l=null,l=this._getMapServiceByLayer(k);f||(f=function(d){e.isApplyingEdits.set(false);var d=e.app.getResource(e.libraryId,"language-feature-layer-error-feature-edits").format(d),b=e.app.getResource(e.libraryId,"language-feature-layer-error-title");e.app.trace.error(d);
e.app.commandRegistry.command("Alert").execute(d,b)});l={mapService:l,layer:k,feature:i,successCallback:function(){k&&k.remove(i);e.app.commandRegistry.command("HideFeatureAttributeEditor").execute();e.app.commandRegistry.command("ShowMap").execute();e.app.eventRegistry.event("FeatureDeletedEvent").publish(i);d&&d();e.isApplyingEdits.set(false)},errorCallback:f};this.isApplyingEdits.set(true);this.app.commandRegistry.command("DeleteFeature").execute(l)},_editGeometry:function(){this.startEditingGeometry()},
stopEditingGeometry:function(d){this.app.commandRegistry.command("ClearActiveTool").execute();var f=this.feature.get();f&&(this.featureClone&&!d&&f.setGeometry(this.featureClone.geometry),f.show());if(this._lastLayer){d=this._lastLayer.graphics;for(f=0;f<d.length;++f){var e=d[f];e.gcxIsClone&&this._lastLayer.remove(e)}}this.featureClone=null;if(this._editObject)this._editObject.deactivate(),this._editObject=null;if(this._editingGeometryMapClickHandle!=null)dojo.disconnect(this._editingGeometryMapClickHandle),
this._editingGeometryMapClickHandle=null;this._indicateGeometryEditing(false)},startEditingGeometry:function(){this._editObject&&this._editObject.deactivate();var d=this;this._lastLayer&&this.app.map.reorderLayer(this._lastLayer,this.app.map._layers.length-1);if(this.hasGeometry.get()){var f=null,f=this.feature.get();if(f==null)throw Error("Can't edit geometry of null feature");if(f.geometry!=this.geometry.get())f.geometry=this.geometry.get();this.featureClone&&this._lastLayer.remove(this.featureClone);
this.featureClone=new esri.Graphic(f.toJson());this.featureClone=dojo.mixin(this.featureClone,{gcxIsClone:true});this._lastLayer.add(this.featureClone);f.hide();this.originalSymbol=f.symbol;if(esri.toolbars.Edit){var f=esri.toolbars.Edit.MOVE|esri.toolbars.Edit.EDIT_VERTICES|esri.toolbars.Edit.SCALE|esri.toolbars.Edit.ROTATE,e={allowAddVertices:true,allowDeleteVertices:true};this._editObject=new esri.toolbars.Edit(this.app.map,e);var i=this._editObject.on("graphic-first-move",function(){d.app.map.disableMapNavigation()}),
k=this._editObject.on("graphic-move-stop",function(){d.app.map.enableMapNavigation()}),l=function(e,b,a){i.remove();k.remove();d._indicateGeometryEditing(false);b.setSymbol(d.originalSymbol);a.isModified&&d.app.commandRegistry.command("SetEditorFeatureGeometry").execute(b.geometry)};dojo.connect(this._editObject,"onDeactivate",l);if(this._editingGeometryMapClickHandle!=null)dojo.disconnect(this._editingGeometryMapClickHandle),this._editingGeometryMapClickHandle=null;this._editingGeometryMapClickHandle=
dojo.connect(this.app.map,"onClick",function(){l(d._editObject,d.featureClone,{isModified:true});dojo.disconnect(d._editingGeometryMapClickHandle);this._editingGeometryMapClickHandle=null});this._indicateGeometryEditing(true);this._editObject.activate(f,this.featureClone,e)}else f=this.app.getResource(this.libraryId,"language-feature-editing-package-required"),e=d.app.getResource(d.libraryId,"language-feature-layer-error-title"),this.app.commandRegistry.command("Alert").execute(f,e)}else this.app.commandRegistry.command("SetActiveTool").execute(this.currentToolName),
this._indicateGeometryEditing(true)},_indicateGeometryEditing:function(d){this.isEditingGeometry.set(d);if(d){var d=null,f=this.feature.get(),e=this.geometry.get();if(f&&(d=f.drawType||null,!d&&e))d=e.type;e&&(f=geocortex.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.getEsriGeometryType(d,esri.toolbars.Draw.POINT),e=null,e=geocortex.essentialsHtmlViewer.mapping.modules.featureEditing.FeatureEditingModule.getEditingGeometryStatusMessage(this.app,this.libraryId,f,true),d=new geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs(e,
null,null,"geometry-type-"+d.toLowerCase(),"geometryEditingStatus"),this.app.commandRegistry.command("AddStatus").execute(d));this.app.commandRegistry.command("ShowMap").execute()}else this.app.commandRegistry.command("RemoveStatus").execute("geometryEditingStatus")},save:function(d,f){var e=this,i,k={__editingMeta:null},l=this.feature.get();this.isEditingGeometry.get()&&l.setSymbol(this.originalSymbol);if(l){l.__editingMeta&&(k.__editingMeta=dojo.clone(l.__editingMeta));i=this.cloneFeature(l);i=
dojo.mixin(i,k);for(var j in i.attributes)i.attributes.hasOwnProperty(j)&&(j||delete i.attributes[j])}var b=l&&l.getLayer()||this._lastLayer;this.stopEditingGeometry();if(!i&&(i=this._createNewFeature(),b.renderer))i.symbol=b.renderer.getSymbol(i);i.geometry=b.geometryType&&this.hasGeometry.get()?this.geometry.get():null;this.validationMessages.clear();for(k=0;k<this.fields.getLength();++k){j=this.fields.getAt(k);var a=j.value.get();j.type.get()==="esriFieldTypeDate"&&(a=j.value.get())&&(a=a.getTime());
a===""&&j.type.get()!=="esriFieldTypeString"&&(a=null);var g=j.validationFunc(a);g?(j.cssClass.set("invalid"),this.validationMessages.addItem(g)):(j.cssClass.set(""),i.attributes[j.name.get()]=a)}this.validateGeometry&&i.geometry&&i.geometry.type==="polygon"&&geocortex.essentials.GeometryUtilities.isSelfIntersectingPolygon(i.geometry)&&this.validationMessages.addItem(this.app.getResource(this.libraryId,"language-feature-editing-self-intersecting-polygon-need-fixing"));if(this.validationMessages.getLength()>
0)return f&&f(),false;var h=new esri.Graphic(i.toJson());if(!this.editingNewFeature.get()&&typeof i.__editingMeta!=="undefined"&&i.__editingMeta)k=dojo.clone(i.__editingMeta),k.dependencies[i.attributes[k.objectIdField]]=[],k.dependencies[i.attributes[k.objectIdField]].push({from:k.objectIdField,to:k.objectIdField}),h.__editingMeta=k;k=null;j=b.url||b._essentialsMetadata.serviceUrl;this.isEditingRelatedFeatureNotInSite.get()||(k=this._getMapServiceByLayer(b));var o=function(){i=h;e.app.eventRegistry.event("FeatureEditedEvent").publish(h);
e.editingNewFeature.set(false);e.isApplyingEdits.set(false);var a=null;e._editLogEntry?(a=e._editLogEntry,a.setFeature(i)):(b.remove(l)||(l=e._findFeatureInLayer(l,b))&&b.remove(l),i.getLayer()==null&&(b.add(i),b.refresh()));e.feature.set(i);e._buildFeatureAttributes();e._buildFeatureRelationships();if(a)e._editLogEntry=a;!a&&!e.isEditingRelatedFeatureNotInSite.get()&&(a=e._findGeocortexLayerForUrl(b.url),a=new geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature({graphic:i,layer:a}),e.headerText.set(a.label.get()));
e.app.commandRegistry.command("DeactivateView").execute("AttributeEditorView");d&&d()};b.url=j;h.__editingMeta=i.__editingMeta;k={mapService:k,layer:b,feature:h,successCallback:o,errorCallback:function(a){e.isApplyingEdits.set(false);f&&f();e._cancelEditing();var b="";a.message&&(b+=a.message,a.details&&(b+=" (Details: {0})".format(a.details[0])));a=e.app.getResource(e.libraryId,"language-feature-layer-error-feature-edits").format(b?b:a);b=e.app.getResource(e.libraryId,"language-feature-layer-error-title");
e.app.trace.error(a);e.app.commandRegistry.command("Alert").execute(a,b)}};this._editLogEntry!=null?(k.oldEditLogEntry=this._editLogEntry,k.successCallback=function(){e.app.commandRegistry.command("RefreshOfflineLayers").execute();o()},this.app.commandRegistry.command("ChangeEditLogEntry").execute(k)):this.isEditingRelatedFeatureNotInSite.get()?this.editingNewFeature.get()?(k.relatedFeature=e._relatedFeature,k.relationshipOrigin=e._editingRelationshipOrigin,k.relationshipDestination=e._editingRelationshipDestination,
this.app.commandRegistry.command("CreateRelatedRecord").execute(k)):this.app.commandRegistry.command("UpdateRelatedRecord").execute(k):this.editingNewFeature.get()?(this.app.eventRegistry.event("EditorPreCreateFeatureEvent").publish(h),this.app.commandRegistry.command("CreateFeature").execute(k),this.app.isOffline.get()===false&&this._lastLayer.remove(this.feature.get())):(this.app.eventRegistry.event("EditorPreUpdateFeatureEvent").publish(h),this.app.commandRegistry.command("UpdateFeature").execute(k));
this.isApplyingEdits.set(true)},_cancelEditing:function(){this._lastLayer&&(this.editingNewFeature.get()&&this._lastLayer.remove(this.feature.get()),this._lastLayer.refresh());this.cancel();this.app.commandRegistry.command("HideFeatureAttributeEditor").execute()},cancel:function(){this.feature.get();this.validationMessages.clear();this.stopEditingGeometry(true);this._editLogEntry=this._lastLayer=null;this.feature.set(null);this.editingActive.set(false);this.isEditingRelatedFeatureNotInSite.set(false);
this.fields.clear();this.geometry.set(null);this.hasGeometry.set(false);this._relatedFeature=this._editingRelationshipDestination=this._editingRelationshipOrigin=null},startAddingNewRelatedRecord:function(d){var f=this,e=d.relationship,i=this._lastLayer,k=this._getMapServiceByLayer(i);this.setFeature(null);k?this.app.featureLayerModule._getRelatedFeatureLayer(k,e.id,function(i){var j=f._getMapServiceByLayer(i);j?(f.isEditingRelatedFeatureNotInSite.set(false),f.currentMapService.set(j)):f.isEditingRelatedFeatureNotInSite.set(true);
i&&f.featureTypeHasGeometry.set(!!i.geometryType);j=d.feature.get();f._lastLayer=i;f._editingRelationshipOrigin=e;f._relatedFeature=j;f.editingNewFeature.set(true);f.feature.set(null);f.geometry.set(null);f.hasGeometry.set(false);f._buildFeatureAttributes();if(e.keyField){for(var b=null,a=0;a<i.relationships.length;++a){var g=i.relationships[a];if(g.id===e.id){f._editingRelationshipDestination=g;b=g.keyField;break}}if(b){for(a=0;a<f.fields.getLength();++a)if(i=f.fields.getAt(a),i.name.get()===b)if(b.toLowerCase()===
"objectid"||b.toLowerCase()==="globalid")i.value.set("[Automatic]"),i.editable.set(false),i.cantEdit.set(true);else{i.value.set(j.attributes[e.keyField]);break}f._setupButtons()}else f.app.trace.error(f.app.getResource(f.libraryId,"language-feature-editing-relationships-key-field-missing"))}else f.app.trace.error(f.app.getResource(f.libraryId,"language-feature-editing-relationships-require-arcgis-version"))},function(){f.app.trace.error(f.app.getResource(f.libraryId,"language-feature-editing-related-feature-failed").format(e.id))}):
this.app.trace.warning("Could not edit feature. No map service for layer '{0}' was found.".format(i.url))},typeFieldSelected:function(d){if(d)for(var f=0;f<d.subTypes.getLength();f++){var e=d.subTypes.getAt(f);if(e.id!==null&&e.id.toString()===d.value.get()){this._loadRelatedCodedDomains(e.domains);break}}},_loadRelatedCodedDomains:function(d){if(d)for(var f in d)if(d.hasOwnProperty(f)&&d[f].type==="codedValue")for(var e=0;e<this.fields.getLength();e++){var i=this.fields.getAt(e);i.name.get()===f&&
this._addValueCollection({viewModel:i,typeName:"codedDomainValue",collectionName:"codedDomainValues",valueCollection:d[f].codedValues,nullable:i.nullable.get(),nullOption:{name:"",code:null}})}},_addValueCollection:function(d){if(d)d.viewModel.renderType=new Observable(d.typeName),d.viewModel[d.collectionName]=new ObservableCollection([]),d.viewModel[d.collectionName].addItems(d.valueCollection),d.nullable&&d.viewModel[d.collectionName].insertItem(0,d.nullOption)},_buildFeatureAttributes:function(){var d=
null,f=this.feature.get();if(!this._lastLayer&&this._findFeatureInLayers(f))this._lastLayer=feature.getLayer();var e=this._lastLayer;if(e){this.fields.clear();f===null&&(f=new esri.Graphic);var i=[],k=[];if(e._outFields&&e._outFields.length>0)for(var l=0;l<e._outFields.length;++l){var j=e._outFields[l];if(l===0&&j==="*"){k=e.fields;break}for(var b=0;b<e.fields.length;++b){var a=e.fields[b];if(a.name===j){k.push(a);break}}}else k=e.fields;for(l=0;l<k.length;++l)if(b=k[l],b.editable){var g=b.editable===
false,j=b.nullable===false&&!g,a=null;if(!this.editingNewFeature.get()||b.name===e.typeIdField)f.attributes&&(a=f.attributes[b.name]);var h=this._buildValidationFunc(b),g={name:new Observable(b.name),alias:new Observable(b.alias),length:new Observable(b.length),editable:new Observable(!g),cantEdit:new Observable(g),nullable:new Observable(!j),type:new Observable(b.type),renderType:new Observable(b.type),value:new Observable(a),cssClass:new Observable(""),attached_showIndicator:new Observable(j),attached_indicatorClass:new Observable(""),
validationFunc:h||function(){return true}};if(b.type==="esriFieldTypeDate"){h=new geocortex.forms.items.DatePickerFormItem;h.timePickerItem=new geocortex.forms.items.TimePickerFormItem;var o=this.feature.get()?new Date(this.feature.get().attributes[b.name]):new Date;h.includeTimePicker.set(true);h.initialDate.set(o);h.date.set(o);g.value.sync(h.date);dojo.safeMixin(h,g);g=h}b.name===e.typeIdField&&(this._addValueCollection({viewModel:g,typeName:"subType",collectionName:"subTypes",valueCollection:e.types,
nullable:!j,nullOption:{name:"",id:null}}),d=a);if(b.hasOwnProperty("domain"))(b=b.domain)&&b.type==="codedValue"&&this._addValueCollection({viewModel:g,typeName:"codedDomainValue",collectionName:"codedDomainValues",valueCollection:b.codedValues,nullable:!j,nullOption:{name:"",code:null}});i.push(g)}this.fields.addItems(i);if(d===null)for(l=0;l<e.types.length;l++)f=e.types[l],f.id===d&&this._loadRelatedCodedDomains(f.domains)}},_isValidEsriDate:function(d){return Object.prototype.toString.call(d)!==
"[object Date]"?false:!isNaN(d.getTime())},_buildValidationFunc:function(d){if(this.app.urlParameters.hasOwnProperty("noval"))return function(){};var f=this,e=function(d){return d.editable!==false&&d.nullable===false?f.app.getResource(f.libraryId,"language-feature-editing-requires-value").format(d.alias):null},i=function(d,b){var a=null;if(!d)return false;switch(d.type){case "esriFieldTypeSingle":case "esriFieldTypeDouble":a=/^[+-]?\d+.?\d*$/;break;case "esriFieldTypeSmallInteger":case "esriFieldTypeInteger":a=
/^\s*(\+|-)?\d+\s*$/}return a.test(String(b.toString()))};if(d.domain){var k=function(j,b,a,g){b=f.app.getResource(f.libraryId,"language-feature-editing-invalid-number").format(b,a,g);return!j?e(d):!i(d,j)?b:j<a||j>g?b:null};if(d.domain.type==="codedValue")return function(){return null};else if(d.domain.type==="range")if(d.domain.hasOwnProperty("range")){var l=d.domain.range;l.replace&&(l=l.replace("[","").replace("]","").split(","));return function(e){return k(e,d.alias,l[0],l[1])}}else return function(e){return k(e,
d.alias,d.domain.minValue,d.domain.maxValue)};else return function(){return null}}else switch(d.type){case "esriFieldTypeDate":return function(i){return!i?e(d):f._isValidEsriDate(new Date(i))?null:f.app.getResource(f.libraryId,"language-feature-editing-invalid-date").format(d.alias)};case "esriFieldTypeString":case "esriFieldTypeGUID":return function(i){return!i?e(d):d.length&&i.toString().length>d.length?f.app.getResource(f.libraryId,"language-feature-editing-value-too-long").format(d.alias,d.length):
null};case "esriFieldTypeSingle":case "esriFieldTypeDouble":return function(j){return!j&&j!==0?e(d):i(d,j)?null:f.app.getResource(f.libraryId,"language-feature-editing-invalid-decimal").format(d.name)};case "esriFieldTypeSmallInteger":case "esriFieldTypeInteger":return function(j){return!j&&j!==0?e(d):i(d,j)?null:f.app.getResource(f.libraryId,"language-feature-editing-invalid-integer").format(d.name)};default:return function(){return null}}}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureEditing.Templates.FeatureTemplateViewModel",geocortex.framework.ui.ViewModelBase,{name:null,description:null,proto:null,layer:null,drawingTool:null,symbolUri:null,symbolStyle:null,constructor:function(){this.name=new Observable;this.description=new Observable;this.drawingTool=new Observable;this.symbolUri=new Observable;this.symbolStyle=new Observable("");this.proto={}},setTemplateShapeStyle:function(d){d&&this.symbolStyle.set(d)},
createSVGElement:function(){}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLog",null,{entries:null,nextFeatureId:0,constructor:function(d){this.entries=[];if(d){d=JSON.parse(d);this.nextFeatureId=d.nextFeatureId||0;for(var f=0;f<d.entries.length;++f){var e=d.entries[f],i=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry;dojo.safeMixin(i,e);if(e.feature)i.feature=new esri.Graphic(e.feature.toJson?e.feature.toJson():e.feature);this.entries.push(i)}}},addEntry:function(d){this.entries.push(d);
++this.nextFeatureId},removeEntry:function(d){for(var f=0,e=this.entries.length;f<e;f++)if(this.entries[f].equals(d))return this.entries.splice(f,1),true;return false},removeEntryAndRelated:function(d){for(var f=false,e=0,i=this.entries.length;e<i;e++)if(this.entries[e].equals(d)||this.entries[e].isRelated(d))this.entries.splice(e,1),e--,i--,f=true;return f},removeEntryAndDependents:function(d){for(var f=false,e=0,i=this.entries.length;e<i;e++)if(this.entries[e].equals(d)||this.entries[e].isDependentOn(d))this.entries.splice(e,
1),e--,i--,f=true;return f},getRelatedEntries:function(d){return this.entries.filter(d.isRelated)},toJson:function(){for(var d=[],f=0;f<this.entries.length;++f)d.push(this.entries[f].toJson?this.entries[f].toJson():this.entries[f]);return{nextFeatureId:this.nextFeatureId,entries:d}}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry",null,{mapServiceUrl:null,layerUrl:null,keyField:null,related:{layerUrl:null,fromKeyField:null,toKeyField:null},type:null,error:null,metadata:null,committed:false,feature:null,_description:null,constructor:function(d,f,e,i,k){if(d)this.mapServiceUrl=d;if(f)this.layerUrl=f;if(e)this.keyField=e;if(i)this.type=i;if(k&&(this.feature=k,k.__editingMeta))this.metadata=k.__editingMeta},setRelatedData:function(d,f,e){this.related.layerUrl=
d;this.related.fromKeyField=f;this.related.toKeyField=e},setFeature:function(d){this.feature=d||null;this.metadata=d&&d.__editingMeta?d.__editingMeta:null;this.error=this._description=null},isAddition:function(){return/addition/i.test(this.type)},isUpdate:function(){return/update/i.test(this.type)},isDeletion:function(){return/deletion/i.test(this.type)},isRelatedRecord:function(){return/relatedRecord/i.test(this.type)},isAttachment:function(){return/attachmentInfos/i.test(this.type)},toJson:function(){return{mapServiceUrl:this.mapServiceUrl,
layerUrl:this.layerUrl,keyField:this.keyField,related:this.related,type:this.type,error:this.error&&this.error.message||this.error,committed:this.committed,metadata:this.metadata,feature:this.feature.toJson?this.feature.toJson():this.feature}},equals:function(d){function f(d,i){if(d===i)return true;if(!d&&!i)return true;if(d&&!i||!d&&i)return false;if(typeof d!=typeof i)return false;switch(typeof d){case "function":return true;case "object":for(var k in d)if(!k.toString().startsWith("_")&&!(k=="declaredClass"||
typeof d[k]=="function")){if(typeof i[k]=="undefined"&&!k==="type")return false;if(k!=="type"&&!f(d[k],i[k]))return false}for(k in i)if(!k.toString().startsWith("_")&&!(k=="declaredClass"||typeof i[k]=="function")&&typeof d[k]=="undefined"&&typeof i[k]!="undefined")return false;return true;default:return false}}return this===d?true:!d?false:this.mapServiceUrl!=d.mapServiceUrl||this.layerUrl!=d.layerUrl||this.type!=d.type||this.committed!=d.committed?false:!f(this.metadata,d.metadata)?false:!f(this.feature.attributes,
d.feature.attributes)?false:!f(this.feature.geometry,d.feature.geometry)?false:true},isRelated:function(d){return!d?false:this.layerUrl==d.layerUrl&&this.keyField==d.keyField&&this._isRelated(this,this.keyField,d,d.keyField)?true:this.related.layerUrl&&this.related.layerUrl==d.layerUrl&&this._isRelated(this,this.related.fromKeyField,d,this.related.toKeyField)?true:d.related.layerUrl&&this.layerUrl==d.related.layerUrl&&this._isRelated(this,d.related.toKeyField,d,d.related.fromKeyField)?true:false},
isDependentOn:function(d){return!d||!this.metadata||!d.metadata?false:this.layerUrl==d.layerUrl&&this.keyField==d.keyField&&this.directDependencyDirection(this,this.keyField,d,d.keyField)===1?true:this.related.layerUrl&&this.related.layerUrl==d.layerUrl&&this.directDependencyDirection(this,this.related.fromKeyField,d,this.related.toKeyField)===1?true:d.related.layerUrl&&this.layerUrl==d.related.layerUrl&&this.directDependencyDirection(this,d.related.toKeyField,d,d.related.fromKeyField)===1?true:false},
_isRelated:function(d,f,e,i){return d.feature.attributes[f]&&e.feature.attributes[i]&&d.feature.attributes[f]==e.feature.attributes[i]?true:this._hasDependency(d,f,e,i)},directDependencyDirection:function(d,f,e,i){return e.metadata.dependencies&&d.metadata.GCXOBJECTID&&e.metadata.dependencies[d.metadata.GCXOBJECTID]&&this._findDependency(e.metadata.dependencies[d.metadata.GCXOBJECTID],f,i)?-1:d.metadata.dependencies&&e.metadata.GCXOBJECTID&&d.metadata.dependencies[e.metadata.GCXOBJECTID]&&this._findDependency(d.metadata.dependencies[e.metadata.GCXOBJECTID],
i,f)?1:0},_hasDependency:function(d,f,e,i){if(d.metadata&&e.metadata){if(this.directDependencyDirection(d,f,e,i)!==0)return true;if(d.metadata.dependencies&&e.metadata.dependencies)for(var k in d.metadata.dependencies)if(d.metadata.dependencies[k]&&e.metadata.dependencies[k])return true}return false},_findDependency:function(d,f,e){for(var i=0;i<d.length;i++)if(d[i]&&d[i].from==f&&d[i].to==e)return true;return false},getDescription:function(d,f){if(!this._description){if(!d||!f)return"[app or libraryId not set]";
var e=null;switch(this.type){case "addition":e=d.getResource(f,"language-feature-layer-edit-action-created");break;case "update":e=d.getResource(f,"language-feature-layer-edit-action-updated");break;case "deletion":e=d.getResource(f,"language-feature-layer-edit-action-deleted");break;case "relatedRecordAddition":e=d.getResource(f,"language-feature-layer-edit-action-created-related");break;case "relatedRecordUpdate":e=d.getResource(f,"language-feature-layer-edit-action-updated-related");break;case "relatedRecordDeletion":e=
d.getResource(f,"language-feature-layer-edit-action-deleted-related");break;case "attachmentAddition":e=d.getResource(f,"language-feature-layer-edit-action-created-attachment");break;case "attachmentUpdate":e=d.getResource(f,"language-feature-layer-edit-action-updated-attachment");break;case "attachmentDeletion":e=d.getResource(f,"language-feature-layer-edit-action-deleted-attachment");break;default:e="[Unknown action]"}var i="";this.feature&&(i=(new geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature({graphic:this.feature})).label.get());
var k="";this.feature&&this.feature.attributes.OBJECTID&&this.feature.attributes.OBJECTID!=i&&(k=" ({0})".format(this.feature.attributes.OBJECTID));this._description=d.getResource(f,"language-feature-layer-edit-action-format").format(e,i,k)}return this._description}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogView",geocortex.framework.ui.ViewBase,{_lastHighlightedContext:null,constructor:function(){this.app.commandRegistry.command("ShowFeatureLayerEditLog").register(this,function(){this.app.commandRegistry.command("ActivateView").execute(this.id)})},handleSynchronizeClick:function(){var d=this;this.app.commandRegistry.command("Confirm").execute(this.app.getResource(d.libraryId,"language-feature-layer-sync-confirm"),this.app.getResource(d.libraryId,
"language-feature-layer-sync-confirm-title"),function(f){f&&d.app.commandRegistry.command("FeatureLayerModuleStartSync").execute()})},handleClickChange:function(d,f,e){e&&e.entry&&!e.entry.isDeletion()&&this.app.commandRegistry.command("StartEditingEditLogEntry").execute(e.entry)},handleClickDelete:function(d,f,e){var i=this;if(e&&e.entry){var k=0;(function j(b){k+=b.length();for(var a=0;a<b.length();a++)j(b.getAt(a).dependents)})(e.dependents);d=k>0?"language-feature-layer-delete-edit-confirmation":
"language-feature-layer-delete-edit-confirmation-singular";this.app.commandRegistry.command("Confirm").execute(i.app.getResource(i.libraryId,d).format(k),i.app.getResource(i.libraryId,"language-feature-layer-delete-edit-title"),function(d){d&&i.app.commandRegistry.command("DeleteFromEditLog").execute(e.entry,function(){i.app.commandRegistry.command("RefreshOfflineLayers").execute()},function(b){b=i.app.getResource(i.libraryId,"language-feature-layer-error-deleting-edit").format(b);i.app.commandRegistry.command("Alert").execute(b)})})}},
handleMouseDown:function(d,f,e){d=e.highlightClass.get()=="edit-highlight";f=this._lastHighlightedContext;if(f!=null)this._setDependsOnStyle(f.dependsOn,"edit-failed","edit-blocked",""),this._setDependentsStyle(f.dependents,"edit-blocked",""),f.error.get()?f.highlightClass.set("edit-failed"):f.blocked.get()?f.highlightClass.set("edit-blocked"):f.highlightClass.set(""),this._lastHighlightedContext=null;if(!d)this._setDependsOnStyle(e.dependsOn,"edit-highlight","edit-highlight","edit-highlight"),this._setDependentsStyle(e.dependents,
"edit-highlight","edit-highlight"),e.highlightClass.set("edit-highlight"),this._lastHighlightedContext=e},_setDependsOnStyle:function(d,f,e,i){for(var k=0,l=d.length();k<l;k++){var j=d.getAt(k);j.error.get()?j.highlightClass.set(f):j.blocked.get()?j.highlightClass.set(e):j.highlightClass.set(i);this._setDependsOnStyle(j.dependsOn,f,e,i)}},_setDependentsStyle:function(d,f,e){for(var i=0,k=d.length();i<k;i++){var l=d.getAt(i);l.blocked.get()?l.highlightClass.set(f):l.highlightClass.set(e);this._setDependentsStyle(l.dependents,
f,e)}}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogViewModel",geocortex.framework.ui.ViewModelBase,{isOffline:null,willDownloadOnSync:null,totalEdits:null,editLogEntries:null,constructor:function(){this.isOffline=new Observable(false);this.willDownloadOnSync=new Observable(false);this.totalEdits=new Observable;this.editLogEntries=new ObservableCollection([]);this.app.eventRegistry.event("DomainStorageClearedEvent").subscribe(this,this._handleDomainStorageClearedEvent);this.app.eventRegistry.event("ApplicationStorageClearedEvent").subscribe(this,
this._handleApplicationStorageClearedEvent)},initialize:function(){this.app.eventRegistry.event("FeatureLayerEditLogUpdatedEvent").subscribe(this,this._featureLayerUpdated);this.app.eventRegistry.event("FeatureLayerModuleSyncCompletedEvent").subscribe(this,this._featureLayerUpdated);this.app.eventRegistry.event("SiteServiceLayersLoadedEvent").subscribe(this,this._cachingSpecUpdated);this.app.eventRegistry.event("FeatureLayerCacheSpecChanged").subscribe(this,this._cachingSpecUpdated);this.isOffline.sync(this.app.isOffline);
this._loadModel()},_loadModel:function(){var d=this;this.app.moduleManager.notifyModuleLoaded("FeatureLayer",dojo.hitch(this,function(){this.app.featureLayerModule.getEditLog(function(f,e){d._featureLayerUpdated(f,e)},null)}))},_handleDomainStorageClearedEvent:function(){this._loadModel()},_handleApplicationStorageClearedEvent:function(){this._loadModel()},_cachingSpecUpdated:function(){var d=false;if(this.app.featureLayerModule.dataCachingSpec)for(var f=this.app.site.getFeatureServices(),e=0;e<f.length;e++)if(this.app.featureLayerModule.dataCachingSpec&&
this.app.featureLayerModule.dataCachingSpec.featureLayersFuture&&this.app.featureLayerModule.dataCachingSpec.featureLayersFuture[f[e].url]){d=true;break}this.willDownloadOnSync.set(d)},_featureLayerUpdated:function(d){this.editLogEntries.clear();for(var f=0,e=0;e<d.entries.length;e++){var i=d.entries[e];if(!i.committed&&i.feature){++f;for(var k=new geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature({graphic:i.feature}),i={entry:i,description:new Observable(i.getDescription(this.app,this.libraryId)),
hasGeometry:new Observable(i.feature.geometry!=null),hasAttributes:new Observable(i.feature.attributes!=null),feature:new Observable(k),gcxid:new Observable(i.metadata?i.metadata.GCXOBJECTID:null),committed:new Observable(i.committed),blocked:new Observable(false),error:new Observable(i.error),canBeChanged:new Observable(!i.isDeletion()&&!i.isRelatedRecord()&&!i.isAttachment()),dependsOn:new ObservableCollection,dependents:new ObservableCollection,highlightClass:new Observable(i.error?"highlight-error":
""),typeClass:new Observable(this._getTypeClass(i))},k=this.editLogEntries.length()-1;k>=0;k--){var l=this.editLogEntries.getAt(k);if(l.entry.isAddition()&&l.entry.metadata&&!i.entry.metadata&&l.entry.isRelated(i.entry))i.entry.feature.__editingMeta=l.entry.metadata;if(i.entry.isDependentOn(l.entry)){i.dependsOn.addItem(l);if(l.error.get()||l.blocked.get())i.blocked.set(true),i.highlightClass.set("highlight-error"),i.typeClass.set("error-24");l.dependents.addItem(i);break}}this.editLogEntries.addItem(i)}}this.totalEdits.set(f)},
_getTypeClass:function(d){return d.error!=null?"error-24":d.isAddition()?"add-24":d.isUpdate()?"edit-24":d.isDeletion()?"clear-24":(this.app.trace.warning("Got an entry that isn't addition, update, or deletion"),"error-24")}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditMetadata",null,{isNew:false,objectIdField:"OBJECTID",isRelated:false,relationship:null,dependencies:{},GCXOBJECTID:-1,constructor:function(){this.isRelated=this.isNew=false;this.relationship=null;this.dependencies={};this.GCXOBJECTID=-1}});if(esri&&esri.layers&&esri.layers.FeatureEditResult)var oldFeatureEditResult=esri.layers.FeatureEditResult;
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureEditResult",null,{constructor:function(d){if(d){this.objectId=jsonresultobjectId;this.success=d.success;if(!d.success){var f=d.error;this.error=Error();this.error.code=f.code;this.error.message=f.description}this.GID=d.globalId}}});esri||(esri={});if(!esri.layers)esri.layers={};esri.layers.FeatureEditResult=geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureEditResult;
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerDetailsView",geocortex.framework.ui.ViewBase,{_syncedCurrentFeature:false,constructor:function(){this.app.commandRegistry.command("ShowFeatureLayerDetails").register(this,function(d){d&&this.viewModel&&this.viewModel.currentFeatureLayer.set(d.get());this.app.commandRegistry.command("ActivateView").execute(this.id)})},activated:function(){this.inherited(arguments);navigator.userAgent.match(/(iPhone)|(iPad)/i)&&$(this.root).height("101%");
if(!this._syncedCurrentFeature)this._syncCurrentFeature(),this._syncedCurrentFeature=true},_syncCurrentFeature:function(){var d=this.app.getResource(this.libraryId,"language-common-feature-layer-details");this.title.syncTransform(this.viewModel.currentFeatureLayer,function(f){return f!=null?d.format(f.displayName.get()):d})},handleCheckCacheCheckbox:function(d,f,e){e.isSet.get()?this.handleClearClick(null,null,e):this.handleCacheClick(null,null,e)},handleZoomClick:function(d,f,e){if(d=esri.geometry.fromJson(e.geometry.get()))this.app.site.essentialsMap.extentManager.setExtentWithPriority(d.getExtent(),
5),this.app.commandRegistry.command("ShowMap").execute()},handleClearClick:function(d,f,e){this.app.commandRegistry.command("FeatureLayerClearCacheSpec").execute(e.serviceId.get());this.viewModel._refreshData()},handleCacheClick:function(d,f,e){d=new esri.tasks.Query;f=e.whereClause.get();d.where=f?f:"1=1";d.returnGeometry=true;d.outFields=["*"];d.geometry=this.app.map.extent;this.app.commandRegistry.command("FeatureLayerSetCacheSpec").execute(e.serviceId.get(),d);this.viewModel._refreshData()}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerListView",geocortex.framework.ui.ViewBase,{activated:function(){this.inherited(arguments);this.app.commandRegistry.command("FeatureLayerModuleRefreshData").execute("")},handleSynchronizeClick:function(){this.app.commandRegistry.command("ActivateView").execute("EditLogView")},handleRefreshClick:function(){this.app.commandRegistry.command("FeatureLayerModuleRefreshData").execute("")},handleFeatureLayerClick:function(d,
f,e){this.viewModel.currentFeatureLayer.set(e);this.app.commandRegistry.command("ActivateView").execute("FeatureLayerDetailsView")}});
geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerModuleDecl={_featureLayerModuleDataCachingSpecKey:null,_featuresStoragePrefix:null,_featuresStorageEditsPrefix:null,_showingOfflineLayers:null,_modalMessageView:null,_modalMessageViewModel:null,_relatedFeatureLayerCache:null,_hasDisplayedSyncNeededAlert:false,dataCachingSpec:null,layerEditSummaries:null,syncNeeded:null,isSyncing:null,latestFeatureEditId:null,constructor:function(){this.dataCachingSpec={};this._featureLayerModuleDataCachingSpecKey=
"_featureLayerModuleDataCachingSpec";this._featuresStorageEditsPrefix="__featureLayerModuleEdits";this._featuresStoragePrefix="__featureLayerModule";this._showingOfflineLayers=false;this._relatedFeatureLayerCache={};this.layerEditSummaries=new ObservableCollection;this.syncNeeded=new Observable(false);this.isSyncing=new Observable(false);this.latestFeatureEditId=new Observable(0);if(this.app)this.app.featureLayerModule=this;this._registerCommands();this.app.eventRegistry.event("SiteInitializedEvent").subscribe(this,
this._refreshModuleData);this.app.eventRegistry.event("SiteServiceLayersLoadedEvent").subscribe(this,this._checkIfOfflineOnStartup);this.app.eventRegistry.event("DomainStorageClearedEvent").subscribe(this,this._handleDomainStorageClearedEvent);this.app.eventRegistry.event("ApplicationStorageClearedEvent").subscribe(this,this._handleApplicationStorageClearedEvent);this.app.eventRegistry.event("FeatureLayerModuleSyncCompletedEvent").subscribe(this,this._handleSyncComplete);this.app.eventRegistry.event("ApplicationOfflineEvent").subscribe(this,
this._refreshModuleData);this.app.eventRegistry.event("ApplicationOnlineEvent").subscribe(this,this._refreshModuleData)},_handleDomainStorageClearedEvent:function(){this._resetFeatureLayersInfo(false);this._refreshModuleData()},_handleApplicationStorageClearedEvent:function(){this._resetFeatureLayersInfo(false);this._refreshModuleData()},_registerCommands:function(){this.app.commandRegistry.command("AttachFeatureAttachment").register(this,this._executeAttachFeatureAttachment);this.app.commandRegistry.command("FeatureLayerSetCacheSpec").register(this,
this._setFeatureLayerFutureSpec);this.app.commandRegistry.command("FeatureLayerClearCacheSpec").register(this,this._clearFeatureLayerFutureSpec);this.app.commandRegistry.command("ShowFeatureLayerModalMessage").register(this,this._showModalMessage);this.app.commandRegistry.command("UpdateFeatureLayerModalMessage").register(this,this._updateModalMessage);this.app.commandRegistry.command("AllowHideFeatureLayerModalMessage").register(this,this._allowHideModalMessage);this.app.commandRegistry.command("HideFeatureLayerModalMessage").register(this,
this._removeModalMessage);this.app.commandRegistry.command("CreateFeature").register(this,this._executeCreateFeature);this.app.commandRegistry.command("UpdateFeature").register(this,this._executeUpdateFeature);this.app.commandRegistry.command("DeleteFeature").register(this,this._executeDeleteFeature);this.app.commandRegistry.command("CreateRelatedRecord").register(this,this._executeCreateRelatedRecord);this.app.commandRegistry.command("UpdateRelatedRecord").register(this,this._executeUpdateRelatedRecord);
this.app.commandRegistry.command("DeleteRelatedRecord").register(this,this._executeDeleteRelatedRecord);this.app.commandRegistry.command("CreateAttachment").register(this,this._executeCreateAttachment);this.app.commandRegistry.command("UpdateAttachment").register(this,this._executeUpdateAttachment);this.app.commandRegistry.command("DeleteAttachment").register(this,this._executeDeleteAttachment);this.app.commandRegistry.command("GetRelatedFeatures").register(this,this._executeGetRelatedFeatures);this.app.commandRegistry.command("GetEditLog").register(this,
this._executeGetEditLog);this.app.commandRegistry.command("SetEditLog").register(this,this._executeSetEditLog);this.app.commandRegistry.command("DeleteFromEditLog").register(this,this._removeFromEditLog);this.app.commandRegistry.command("ChangeEditLogEntry").register(this,this._changeEditLogEntry);this.app.commandRegistry.command("FeatureLayerModuleRefreshData").register(this,this._refreshModuleData);this.app.commandRegistry.command("FeatureLayerModuleStartSync").register(this,this._autoProvisionAndStartSync);
this.app.commandRegistry.command("ApplyFeatureLayerEdits").register(this,this._applyFeatureLayerEdits);this.app.commandRegistry.command("FeatureLayerClearData").register(this,this._clearCachedFeatureLayerData);this.app.commandRegistry.command("FeatureLayerCacheData").register(this,this._cacheFeatureLayer)},initialize:function(){var d=this;this.app.commandRegistry.command("RefreshOfflineLayers").register(this,function(){this.app.isOffline.get()&&this._goOffline()});this.app.eventRegistry.event("ApplicationOfflineEvent").subscribe(this,
function(){this._goOffline();this._clearFeatureSets()});this.app.eventRegistry.event("ApplicationOnlineEvent").subscribe(this,function(){this._goOnline();this._clearFeatureSets()});this.app.store.get(this._featureLayerModuleDataCachingSpecKey,function(f){if(f){d.dataCachingSpec=JSON.parse(f);if(!d.dataCachingSpec.featureLayers)d.dataCachingSpec.featureLayers={};if(!d.dataCachingSpec.featureLayersFuture)d.dataCachingSpec.featureLayersFuture={}}else d.app.trace.debug("Feature Layer Module - dataCachingSpec not found, creating a new one."),
d._resetFeatureLayersInfo(false)},function(f){d.app.trace.error("Feature Layer Module - Unable to get the dataCachingSpec: {0}".format(f))})},_resetFeatureLayersInfo:function(d){this.dataCachingSpec={featureLayers:{},featureLayersFuture:{}};d&&this._persistDataCachingSpec()},_showModalMessage:function(d){this._removeModalMessage();this._modalMessageView=this.app.viewManager.createView({type:"geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.ModalMessageView",markup:"Mapping/modules/FeatureLayer/ModalMessageView.html",
visible:false,region:"ModalWindowRegion",libraryId:this.libraryId});this._modalMessageView.app=this.app;this._modalMessageViewModel=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.ModalMessageViewModel(this.app);this._modalMessageViewModel.initialize({message:d});this._modalMessageView.attach(this._modalMessageViewModel);this.app.viewManager.activateView(this._modalMessageView)},_updateModalMessage:function(d,f){this._modalMessageView&&d&&this._modalMessageViewModel.addMessage(d,f)},
_allowHideModalMessage:function(d,f){this._modalMessageViewModel&&(d&&this._modalMessageViewModel.setSummary(d,f),this._modalMessageViewModel.setEnableCloseButton(true))},_removeModalMessage:function(){if(this._modalMessageView)this.app.viewManager.destroyView(this._modalMessageView),this._modalMessageView=null},_checkIfOfflineOnStartup:function(){this.app.map&&this.app.featureLayerModule&&this.dataCachingSpec&&(this.app.isOffline.get()&&this._goOffline(),this._refreshModuleData())},_refreshLayersInDataCachingSpec:function(){if(this.dataCachingSpec.featureLayers)for(var d in this.dataCachingSpec.featureLayers)if(this.dataCachingSpec.featureLayers.hasOwnProperty(d)){var f=
this.dataCachingSpec.featureLayers[d];if(f.serviceId&&(f=this.app.site.essentialsMap.findMapServiceById(f.serviceId))&&f.serviceLayer)f.serviceLayer.clear&&f.serviceLayer.clear(),f.serviceLayer.refresh&&f.serviceLayer.refresh()}},_refreshModuleData:function(){this._updateEditSummarys(dojo.hitch(this,function(){this.syncNeeded.set(!this.app.isOffline.get()&&this.layerEditSummaries.getLength()>0);if(this.syncNeeded.get()&&!this.app.isOffline.get()&&!this._hasDisplayedSyncNeededAlert){this._hasDisplayedSyncNeededAlert=
true;var d=this.app.getResource(this.libraryId,"language-feature-layer-edits-and-sync"),d=this.app.getResource(this.libraryId,"language-feature-layer-pending-edits-multiple-layers-ext").format(d);this.app.commandRegistry.command("AddStatus").execute({text:d,timeoutMS:1E4})}}))},_goOffline:function(){var d=this;this._hasDisplayedSyncNeededAlert=false;for(var f=this.app.site.getFeatureServices(),e=0;e<f.length;e++)if(!f[e].isServiceLayerLoaded){var i=this.app.eventRegistry.event("SiteServiceLayersLoadedEvent").subscribe(this,
function(){this.app.eventRegistry.event("SiteServiceLayersLoadedEvent").unsubscribe(i);this.app.isOffline.get()&&this._goOffline()});return}this._showingOfflineLayers=true;this._clearRelatedFeaturesCache();for(e=0;e<f.length;e++)(function(){var i=f[e],l=null,j="";d.dataCachingSpec&&d.dataCachingSpec.featureLayers&&(j=d.dataCachingSpec.featureLayers[i.url]?i.url:i.originalUrl,l=d.dataCachingSpec.featureLayers[j]);l?(j=d._getFeatureLayerStorageKey(j),d.app.store.get(j,function(b){d._swapFeatureLayerForOffline(i,
b,l)},function(b){d.app.trace.error("Feature Layer Module - unable to retrieve features for feature layer '{2}({0})': {1}. ".format(i.id,b,i.displayName))})):d._swapFeatureLayerForOffline(i,null,null)})()},_goOnline:function(){if(this._showingOfflineLayers){this._showingOfflineLayers=false;for(var d=this.app.site.getFeatureServices(),f=0,f=0;f<d.length;f++){var e=d[f];e.restoreFeatureLayer();this.app.eventRegistry.event("FeatureLayerOnlineEvent").publish(e)}this._refreshModuleData()}},_clearFeatureSets:function(){for(var d=
this.app.featureSetManager.getCollectionIds(),f=0;f<d.length;f++){var e=this.app.featureSetManager.getCollectionById(d[f]);e&&(e.clear(),this.app.featureSetManager.tryCloseCollection(e.id),this.app.featureSetManager.removeCollectionById(e.id))}},_getEmptyEditSet:function(){return{additions:[],updates:[],deletions:[]}},_isObjectIdInCollection:function(d,f){if(d)for(var e=0,e=0;e<d.length;e++)if(d[e].objectId==f)return true;return false}};
dojo.safeMixin(geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerModuleDecl,{_binTool:{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeArrayBuffer:function(d){var f=Math.ceil(3*d.length/4),f=new ArrayBuffer(f);this.decode(d,f);return f},decode:function(d,f){var e=this._keyStr.indexOf(d.charAt(d.length-1)),i=this._keyStr.indexOf(d.charAt(d.length-1)),k=Math.ceil(3*d.length/4);e==64&&k--;i==64&&k--;for(var l,j,b,a,g=0,h=0,e=f?new Uint8Array(f):
new Uint8Array(k),d=d.replace(/[^A-Za-z0-9\+\/\=]/g,""),g=0;g<k;g+=3)l=this._keyStr.indexOf(d.charAt(h++)),j=this._keyStr.indexOf(d.charAt(h++)),i=this._keyStr.indexOf(d.charAt(h++)),a=this._keyStr.indexOf(d.charAt(h++)),l=l<<2|j>>4,j=(j&15)<<4|i>>2,b=(i&3)<<6|a,e[g]=l,i!=64&&(e[g+1]=j),a!=64&&(e[g+2]=b);return e}},_executeAttachFeatureAttachment:function(d){this._syncAttachmentToServer(d.featureUrl,d.filename,d.contentType,d.payload,d.callback)},_syncAttachmentToServer:function(d,f,e,i,k){this.app.trace.debug("--- _syncAttachmentToServer called");
try{for(var l=function(a){for(var b=new ArrayBuffer(a.length),b=new Uint8Array(b),d=0,e=a.length;d<e;d++)b[d]=a.charCodeAt(d)%255;return b},j=d.lastIndexOf("/"),b=d.substring(0,j),a=this.app.map.graphicsLayerIds,g=null,j=0;j<a.length;j++){var h=this.app.map.getLayer(a[j]);if(h.url){var o=h.url.match(/^(.[^?]*)/);if(o&&o[0]===b){g=h;break}}}g||(g=new esri.layers.FeatureLayer(d.replace(/\/\d$/g,"")));b=null;if(g.credential&&g.credential.token)b=g.credential.token;else{var t=g.url.match(/token=([^\?&$]*)/);
t&&(b=t[1])}b&&d.indexOf(b)===-1&&(d+=d.indexOf("?")>0?"&":"?",d+="token="+b);d=d.indexOf("?")>-1?d.replace("?","/addattachment?"):this.app.configuration.proxyUri+d+"/addAttachment";this.app.trace.debug("--- Creating XHR");var v=new XMLHttpRequest;v.open("POST",d,true);v.setRequestHeader("Content-Type","multipart/form-data; boundary=---------------------------L4717uD3G30");v.responseType="";v.onload=k;this.app.trace.debug("--- Creating request preamble");var n="-----------------------------L4717uD3G30\r\n"+
'Content-Disposition: form-data; name="attachment"; filename="{0}";\r\n'.format(f)+"Content-Type: {0}".format(e)+"\r\n\r\n";this.app.trace.debug("--- Encoding request preamble");var s=l(n);this.app.trace.debug("--- Encoding request payload");var m=this._binTool.decode(i);this.app.trace.debug("--- Creating request suffix");this.app.trace.debug("--- Encoding request suffix");var q=l('\r\n-----------------------------L4717uD3G30\r\nContent-Disposition: form-data; name="gdbVersion"\r\n\r\n\r\n-----------------------------L4717uD3G30\r\nContent-Disposition: form-data; name="f"\r\n\r\njson\r\n-----------------------------L4717uD3G30--\r\n');
this.app.trace.debug("--- Creating payload buffer");var p=new ArrayBuffer(s.length+m.length+q.length),r=new Uint8Array(p),d=0;this.app.trace.debug("--- Merging output buffers");for(j=0;j<s.length;j++,d++)r[d]=s[j]&255;for(j=0;j<m.length;j++,d++)r[d]=m[j]&255;for(j=0;j<q.length;j++,d++)r[d]=q[j]&255;this.app.trace.debug("--- Sending request");v.send(r.buffer)}catch(u){this.app.trace.error("--- ERROR: {0}".format(u.toString())),k&&k(u)}},_executeCreateAttachment:function(d){var f=d.mapService,e=d.layer,
i=d.feature,k=d.featureUrl,l=d.successCallback||d.callback,j=d.errorCallback||d.callback;this.app.trace.debug("--- Create Attachment.");if(this.app.isOffline.get()!==true)this.app.trace.debug("--- invoking _executeAttachFeatureAttachment."),e=d.feature.attributes[e.objectIdField],k=k.indexOf("?")>-1?k.replace("?","/{0}?".format(e)):"{0}/{1}".format(k,e),d.featureUrl=k,this._executeAttachFeatureAttachment(d);else{var b={attributes:{}},a=this._findKeyField(e,i,f);this._assignTemporaryObjectId(b,a);
b.attributes.filename=d.filename;b.attributes.contentType=d.contentType;var g=b.attributes.key="attachment-"+(new Date).getTime(),h=this.createNewFeatureMetaData(b,e),o={},t=i.__editingMeta;t&&t.isNew?(o={},o[t.GCXOBJECTID]=[],o[t.GCXOBJECTID].push({from:e.objectIdField,to:"gcx_feature_objectId"})):b.attributes.gcx_feature_objectId=i.attributes[e.objectIdField];h.dependencies=o;b.__editingMeta=h;var v=b;b.toJson&&(v=b.toJson());v.__editingMeta=h;if(!f)f=new geocortex.essentials.MapService(k),f.serviceLayer=
e;var n=this;this.app.store.set(g,d.payload,function(){d=null;var b=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry(f.url,k,a,"attachmentAddition",v);n._appendToEditLog(null,b,l,j)},j)}},_executeUpdateAttachment:function(){},_executeDeleteAttachment:function(){}});
dojo.safeMixin(geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerModuleDecl,{getEditLogKey:function(){return"__edits"},createNewFeatureMetaData:function(d,f){if(f==null)throw Error("Layer cannot be null");var e=f.objectIdField,i=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditMetadata,k=this._getNewFeatureId();dojo.safeMixin(i,{objectIdField:e,isNew:true,isRelated:false,relationshipOrigin:null,relationshipDestination:null,refs:{},GCXOBJECTID:k});return i},
_findKeyField:function(d,f,e){if(d&&d.objectIdField)return d.objectIdField;if(f&&f.getLayer())return f.getLayer().objectIdField;if(e&&e.serviceLayer)return e.serviceLayer.objectIdField;throw Error("Cannot find oject id field");},_assignTemporaryObjectId:function(d,f){if(f==null)throw Error("Field cannot be null");d.attributes[f]="GCX-"+geocortex.framework.utils.alphaNumericToken()},_getNewFeatureId:function(){this.latestFeatureEditId.set(this.latestFeatureEditId.get()+1);return this.latestFeatureEditId.get()},
_executeGetEditLog:function(d){this.getEditLog(d,function(f){d(f)})},_executeSetEditLog:function(d,f){this.setEditLog(d,f,function(d){f(d)})},_appendToEditLog:function(d,f,e,i){function k(){j.app.trace.debug("Feature Layer Module - edit log saved.");e&&e()}function l(b){j.app.trace.error("Feature Layer Module - could not persist edit log: {0}".format(b));i&&i(b)}var j=this;this.getEditLog(function(b){b.addEntry(f);j.setEditLog(b,k,l)},function(b){j.app.trace.error("Could not fetch edit log: {0}".format(b))})},
_removeFromEditLog:function(d,f,e){function i(){l.app.trace.debug("Feature Layer Module - edit log saved.");l.app.commandRegistry.command("RefreshOfflineLayers").execute();j&&l._refreshModuleData();f&&f()}function k(b){l.app.trace.error("Feature Layer Module - could not persist edit log: {0}".format(b));e&&e(b)}var l=this,j=false;this.getEditLog(function(b){b.removeEntryAndDependents(d)?(j=b.entries.length==0,l.setEditLog(b,i,k)):k("The edit log entry could not be found.")},function(b){l.app.trace.error("Could not fetch edit log: {0}".format(b));
e&&e(b)})},hasEditsInLog:function(d,f,e){var i=new dojo.Deferred;this.getEditLog(function(e){for(var l=false,j=0;j<e.entries.length;++j)if(e.entries[j].mapServiceUrl===d){l=true;break}geocortex.deferredResolve(i,l);f&&f(l)},function(d){geocortex.deferredReject(i,d);e&&e(d)});return i},clearServiceEditsFromLog:function(d,f,e){var i=this;this.getEditLog(function(k){k.entries=dojo.filter(k.entries,function(e){return e.mapServiceUrl!==d});i.setEditLog(k,function(){i.app.commandRegistry.command("RefreshOfflineLayers").execute();
f&&f()},e)},e)},getEditLog:function(d,f){var e=this;this.app.store.get(this.getEditLogKey(),function(f){var k=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLog;f?(k=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLog(f),k.nextFeatureId>e.latestFeatureEditId.get()&&e.latestFeatureEditId.set(k.nextFeatureId),d&&d(k,f)):d&&d(k)},function(d){f&&f(d)})},setEditLog:function(d,f,e){var i=this;try{var k=d.toJson();typeof k==="object"&&(k=JSON.stringify(k),JSON.parse(k));
d.nextFeatureId=this.latestFeatureEditId.get();this.app.store.set(this.getEditLogKey(),k,function(){i.app.eventRegistry.event("FeatureLayerEditLogUpdatedEvent").publish(d,k);f&&f()},e)}catch(l){e&&e(l)}},_applyFeatureLayerEdits:function(d){if(d){var f=d.mapService,e=d.layer;if(f)e=f.serviceLayer;else if(e)f=new geocortex.essentials.MapService(e.url),f.serviceLayer=e;else{this.app.trace.warning("Cannot apply edits: Missing map service and/or layer in edit descriptor.");return}var i=d.hasOwnProperty("additions")?
d.additions:[],k=d.hasOwnProperty("updates")?d.updates:[],l=d.hasOwnProperty("deletions")?d.deletions:[],j=d.hasOwnProperty("successCallback")?d.successCallback:function(){},b=d.hasOwnProperty("errorCallback")?d.errorCallback:function(){};this.app.isOffline.get()===true?(this._performEditsToFeatureCollection(e.objectIdField,f,f.serviceLayer.graphics,i,k,l),j&&j()):e.applyEdits(i,k,l,function(a,d){var f=null;if(d&&d.length>0)for(var k=0;k<d.length;++k){var l=d[k];if(!l.success){f=l.error;break}}if(a&&
a.length>0)for(k=0;k<a.length;++k)if(l=a[k],l.success)l.GID&&!String.isNullOrEmpty(e.globalIdField)&&(i[k].attributes[e.globalIdField]=l.GID);else{f=l.error;break}f?b((f||{message:"Editing operation was not successful"}).message):j&&j()},function(a){b(a)})}},_performEditsToFeatureCollection:function(d,f,e,i,k,l){if(e){f=f?f.serviceLayer:null;try{for(var j=0;j<i.length;++j)f?f.add(i[j]):e.push(i[j]);for(j=0;j<k.length;++j){var b=k[j];if(b.attributes&&b.attributes[d])for(var a=b.attributes[d],g=0;g<
e.length;++g){var h=e[g];if(h.attributes&&h.attributes.hasOwnProperty(d)&&h.attributes[d]===a)dojo.safeMixin(e[g].attributes,b.attributes),e[g].setGeometry?e[g].setGeometry(b.geometry):e[g].geometry=b.geometry}}for(j=0;j<l.length;++j){var o=l[j];if(o.attributes&&o.attributes[d])for(var t=o.attributes[d],g=0;g<e.length;++g)h=e[g],h.attributes&&h.attributes.hasOwnProperty(d)&&h.attributes[d]===t&&(f?f.remove(h):Array.remove(e,g))}}catch(v){this.app.trace.error("Error applying offline edits: {0}".format(v.toString()))}}},
_updateEditSummarys:function(d){var f=this;this.getEditLog(function(e){for(var i={},k=[],l=0;l<e.entries.length;++l){var j=e.entries[l];if(!j.committed){var b=i[j.mapServiceUrl];b||(b=i[j.mapServiceUrl]=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.LayerEditSummary(j.mapServiceUrl,j.mapServiceUrl),k.push(b));switch(j.type){case "addition":case "relatedRecordAddition":case "attachmentAddition":b.additions.addItem(j);b.numAdditions.set(b.numAdditions.get()+1);break;case "update":case "relatedRecordUpdate":case "attachmentUpdate":b.updates.addItem(j);
b.numUpdates.set(b.numUpdates.get()+1);break;case "deletion":case "relatedRecordDeletion":case "attachmentDeletion":b.additions.addItem(j),b.numDeletions.set(b.numDeletions.get()+1)}b.totalEdits.set(b.totalEdits.get()+1)}}f.layerEditSummaries.set(k);d&&d()},function(d){f.app.trace.error("An error occurred while generating layer edit summaries: {0}".format(d))})}});
dojo.safeMixin(geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerModuleDecl,{_executeCreateRelatedRecord:function(d){var f=d.mapService,e=d.layer,i=d.feature,k=d.relatedFeature,l=d.relationshipOrigin,j=d.relationshipDestination,b=d.successCallback,d=d.errorCallback,a=this._findKeyField(e,i,f);this._assignTemporaryObjectId(i,a);var g=this.createNewFeatureMetaData(i,e);g.isRelated=true;g.relationshipOrigin=l;g.relationshipDestination=j;var h=k.__editingMeta;if(h&&h.isNew)g.dependencies=
{},g.dependencies[h.GCXOBJECTID]=[{from:l.keyField,to:j.keyField}];i.__editingMeta=g;if(this.app.isOffline.get()===true){h=i;i.toJson&&(h=i.toJson());h.__editingMeta=g;var o=e.url||e._essentialsMetadata.serviceUrl;if(!f)f=new geocortex.essentials.MapService(o),f.serviceLayer=e;a=this._findKeyField(e,i,f);g=null;g=i.geometry?new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry(f.url,o,a,"addition",h):new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry(f.url,
o,a,"relatedRecordAddition",h);h=null;h=k&&k.getLayer&&k.getLayer()&&k.getLayer().url?k.getLayer().url:e.url;g.setRelatedData(h,l.keyField,j.keyField);this._appendToEditLog(f,g,b,d)}this._applyFeatureLayerEdits({mapService:f,layer:e,additions:[i],updates:[],deletions:[],successCallback:b,errorCallback:d})},_executeUpdateRelatedRecord:function(d){var f=d.mapService,e=d.layer,i=d.feature,k=d.relatedFeature,l=d.relationshipOrigin,j=d.relationshipDestination,b=d.successCallback,d=d.errorCallback;if(k&&
k.__editingMeta){var a=k.__editingMeta,g=this.createNewFeatureMetaData(i,e);g.isRelated=true;g.relationshipOrigin=l;g.relationshipDestination=j;a.isNew?(g.dependencies={},g.dependencies[a.GCXOBJECTID]=[{from:l.keyField,to:j.keyField}]):g.dependencies=JSON.parse(JSON.stringify(a.dependencies));i.__editingMeta=g}if(this.app.isOffline.get()===true){g=i;i.toJson&&(g=i.toJson());if(!f)f=new geocortex.essentials.MapService(e.url),f.serviceLayer=e;var h=this._findKeyField(e,i,f),a=null,a=i.geometry?new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry(f.url,
e.url,h,"update",g):new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry(f.url,e.url,h,"relatedRecordUpdate",g),g=null,g=k&&k.getLayer&&k.getLayer()&&k.getLayer().url?k.getLayer().url:e.url;a.setRelatedData(g,l.keyField,j.keyField);this._appendToEditLog(f,a,b,d)}this._applyFeatureLayerEdits({mapService:f,layer:e,additions:[],updates:[i],deletions:[],successCallback:b,errorCallback:d})},_executeDeleteRelatedRecord:function(d){var f=d.mapService,e=d.layer,i=d.feature,k=d.relatedFeature,
l=d.relationshipOrigin,j=d.relationshipDestination,b=d.successCallback,d=d.errorCallback;if(k){var a=k.__editingMeta;if(a&&a.isNew){var g=this.createNewFeatureMetaData(i,e);g.isRelated=true;g.relationshipOrigin=l;g.relationshipDestination=j;g.dependencies={};g.dependencies[a.GCXOBJECTID]=[{from:l.keyField,to:j.keyField}];i.__editingMeta=g}}if(this.app.isOffline.get()===true){g=i;i.toJson&&(g=i.toJson());if(!f)f=new geocortex.essentials.MapService(e.url),f.serviceLayer=e;var h=this._findKeyField(e,
i,f),a=null,a=i.geometry?new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry(f.url,e.url,h,"deletion",g):new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry(f.url,e.url,h,"relatedRecordDeletion",g),g=null,g=k&&k.getLayer&&k.getLayer()&&k.getLayer().url?k.getLayer().url:e.url;a.setRelatedData(g,l.keyField,j.keyField);this._appendToEditLog(f,a,b,d)}this._applyFeatureLayerEdits({mapService:f,layer:e,additions:[],updates:[],deletions:[i],successCallback:b,
errorCallback:d})},_executeCreateFeature:function(d){var f=this,e=d.mapService,i=d.layer,k=d.feature,l=d.successCallback,j=d.errorCallback;typeof e==="string"&&(e=this.app.site.essentialsMap.findMapServiceById(serviceEntry.serviceId));if(e)if(d=function(){f._applyFeatureLayerEdits({mapService:e,layer:i,additions:[k],updates:[],deletions:[],successCallback:l,errorCallback:j})},this.app.isOffline.get()===true){var b=this._findKeyField(i,k,e);this._assignTemporaryObjectId(k,b);var a=k;k.toJson&&(a=k.toJson());
k.__editingMeta=a.__editingMeta=this.createNewFeatureMetaData(k,e.serviceLayer||k.getLayer());b=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry(e.url,i.url,b,"addition",a);this._appendToEditLog(e,b,d,j)}else d();else j&&j(f.app.getResource(f.libraryId,"language-feature-layer-error-no-mapservice"))},_executeUpdateFeature:function(d){var f=this,e=d.mapService,i=d.layer,k=d.feature,l=d.successCallback,j=d.errorCallback;typeof e==="string"&&(e=this.app.site.essentialsMap.findMapServiceById(serviceEntry.serviceId));
if(e)if(d=function(){f._applyFeatureLayerEdits({mapService:e,layer:i,additions:[],updates:[k],deletions:[],successCallback:l,errorCallback:j})},this.app.isOffline.get()===true){var b=k,a=k.__editingMeta;k.toJson&&(b=k.toJson());var g=this._findKeyField(i,k,e);if(a){var h=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditMetadata;h.isNew=false;h.objectIdField=g;a.isNew?h.dependencies[a.GCXOBJECTID]=[{from:g,to:g}]:h.dependencies=JSON.parse(JSON.stringify(a.dependencies));b.__editingMeta=
h}else b.__editingMeta=null;b=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry(e.url,i.url,g,"update",b);this._appendToEditLog(e,b,d,j)}else d();else j&&j(f.app.getResource(f.libraryId,"language-feature-layer-error-no-mapservice"))},_executeDeleteFeature:function(d){var f=this,e=d.mapService,i=d.layer,k=d.feature,l=d.successCallback,d=d.errorCallback;typeof e==="string"&&(e=this.app.site.essentialsMap.findMapServiceById(serviceEntry.serviceId));if(k)if(this.app.isOffline.get()===
false)this._applyFeatureLayerEdits({mapService:e,layer:i,additions:[],updates:[],deletions:[k],successCallback:function(){f.app.event("FeatureDeletedEvent").publish(k);l&&l()},errorCallback:d});else{var j=this._findKeyField(i,k,e),b=k.attributes[j];if(b&&!(b.toString().indexOf("GCX")>-1)){var b=k,a=k.__editingMeta;k.toJson&&(b=k.toJson());if(a)a.objectIdField=j,b.__editingMeta=a;i=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry(e.url,i.url,j,"deletion",b);this._appendToEditLog(e,
i,l,d)}else if(i=k.__editingMeta){var g=i.GCXOBJECTID,h=null;f._applyFeatureLayerEdits({mapService:e,additions:[],updates:[],deletions:[k],successCallback:l,errorCallback:d});f.getEditLog(function(a){for(var b=0;b<a.entries.length;++b){var d=a.entries[b];if(!d.committed&&d.feature&&d.hasOwnProperty("metadata")){var e=d.metadata;if(e&&e.GCXOBJECTID===g){h=d;break}}}h&&a.removeEntryAndDependents(h);f.setEditLog(a,function(){f.app.trace.debug("Deleted a feature.")},function(a){var b=f.app.getResource(f.libraryId,
"language-feature-layer-error-deleting-feature"),b=b.format(a.toString());f.app.commandRegistry.command("Alert").execute(b)})},d)}}},_changeEditLogEntry:function(d){var f=this,e=d.mapService,i=d.feature,k=d.oldEditLogEntry,l=d.successCallback,j=d.errorCallback;typeof e==="string"&&(e=this.app.site.essentialsMap.findMapServiceById(serviceEntry.serviceId));e?this.getEditLog(function(b){for(var a=false,d=0;d<b.entries.length&&!a;d++){var e=b.entries[d];if(!e.committed&&e.equals(k))a=i.toJson?i.toJson():
(new esri.Graphic(i)).toString(),a.__editingMeta=i.__editingMeta=e.metadata,e.setFeature(a),a=true}a?f.setEditLog(b,l,j):j(f.app.getResource(f.libraryId,"language-feature-layer-error-edit-not-found"))},j):j&&j(f.app.getResource(f.libraryId,"language-feature-layer-error-no-mapservice"))}});
dojo.safeMixin(geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerModuleDecl,{_getFeatureLayerStorageKey:function(d){return this._featuresStoragePrefix+"_"+d},_getFeatureLayerRelatedStorageKey:function(d,f){return this._featuresStoragePrefix+"_rel_"+f+"_"+d},_getFeatureLayerEditsStorageKey:function(d){return this._featuresStorageEditsPrefix+"_"+d},_persistDataCachingSpec:function(){var d=this;this.app.store.set(this._featureLayerModuleDataCachingSpecKey,JSON.stringify(this.dataCachingSpec),
function(){d.app.trace.debug("Feature Layer Module - saved dataCachingSpec.");d.app.eventRegistry.event("FeatureLayerCacheSpecChanged").publish()},function(f){d.app.trace.error("Feature Layer Module - could not persist dataCachingSpec in storage: {0}".format(f))})},_clearCachedFeatureLayerData:function(d,f,e){if(this.app.isOffline.get()===true){var i=this.app.getResource(this.libraryId,"language-feature-layer-warning-offline-clearing-data");this.app.trace.error(i);e&&e(i)}else{this.app.commandRegistry.command("ShowFeatureLayerModalMessage").execute(this.app.getResource(this.libraryId,
"language-feature-layer-clearing-data"));delete this.dataCachingSpec.featureLayers[d];this._persistDataCachingSpec();this.app.store.remove(this._getFeatureLayerStorageKey(d),function(){},function(){});var k=this;this.getEditLog(function(i){for(var j=0;j<i.entries.length;++j)i.entries[j].mapServiceUrl===d&&(Array.remove(i.entries,j,j),--j);k.setEditLog(i,function(){k.app.commandRegistry.command("HideFeatureLayerModalMessage").execute();f&&f()},function(b){k.app.trace.error("Error saving edit log after removing layer edits: {0}".format(b));
k.app.commandRegistry.command("HideFeatureLayerModalMessage").execute();e&&e(b)})},function(d){k.app.trace.error("Error removing layer edits from edit log: {0}".format(d));k.app.commandRegistry.command("HideFeatureLayerModalMessage").execute()})}},_swapFeatureLayerForOffline:function(d,f,e){function i(b){var a=d.getEmptyFeatureCollection();f?(a.featureSet.features=JSON.parse(f),e&&e.layerMetadata&&k._applyLayerMetadataToFeatures(a.featureSet.features,e.layerMetadata)):a.featureSet.features=[];if(b.entries){for(var g=
[],h=[],i=[],t=0;t<b.entries.length;++t){var v=b.entries[t];if(v.mapServiceUrl===d.url){var n=new esri.Graphic(v.feature.toJson());n.attributes.__editingMeta=v.metadata;if(!n.symbol&&d&&d.serviceLayer&&d.serviceLayer.renderer)n.symbol=d.serviceLayer.renderer.getSymbol(n);switch(v.type){case "addition":n.attributes&&(!n.attributes.hasOwnProperty(l)||!n.attributes[l])&&k._assignTemporaryObjectId(n,l);g.push(n);break;case "update":h.push(n);break;case "deletion":i.push(n)}}}(g.length>0||h.length>0||
i.length>0)&&k._performEditsToFeatureCollection(l,null,a.featureSet.features,g,h,i)}var b=a.layerDefinition.hasAttachments,s=new esri.layers.FeatureLayer(a);j&&(s.id=j);if(b!=null)s.hasAttachments=b;for(a=0;a<s.graphics.length;++a)if(b=s.graphics[a],b.attributes&&b.attributes.__editingMeta)b.__editingMeta=b.attributes.__editingMeta,delete b.attributes.__editingMeta;a=[];a.push(dojo.connect(s,"onBeforeApplyEdits",function(a,b,d){k._layerOnBeforeApplyEdits(s,a,b,d)}));a.push(dojo.connect(s,"onAddAttachmentComplete",
function(a){k._layerOnAddAttachmentComplete(s,a)}));a.push(dojo.connect(s,"onDeleteAttachmentsComplete",function(a){k._layerOnDeleteAttachmentsComplete(s,a)}));a.push(dojo.connect(s,"onEditsComplete",function(a,b,d){k._layerOnEditsComplete(s,a,b,d)}));s._eventHandlers=a;b={};b.serviceUrl=d.serviceUrl;b.onlineUrl=d.url;b.eventHandlers=a;s._essentialsMetadata=b;d.replaceFeatureLayer(s,true,true,true);a=null;k.app.eventRegistry.event("FeatureLayerOfflineEvent").publish(d)}var k=this,l=d.serviceLayer?
d.serviceLayer.objectIdField:"OBJECTID",j=d.serviceLayer?d.serviceLayer.id:null;this.getEditLog(function(b){i(b)},function(b){k.app.trace.error("Feature Layer Module - Unable to retrieve edit log: {0}".format(b))})},_applyLayerMetadataToFeatures:function(d,f){for(var e=0;e<d.length;e++){var i=d[e];if(i.geometry&&f.spatialReference)i.geometry.spatialReference=f.spatialReference}},_cacheAllFeatureLayers:function(d){function f(){j++;if(j>=k.length)d(b);else{i=k[j];var a=l.dataCachingSpec.featureLayersFuture[i],
g=a.serviceId,h=new esri.tasks.Query;h.where=a.whereClause;h.returnGeometry=true;h.outFields=["*"];h.geometry=new esri.geometry.Extent(a.geometry.xmin,a.geometry.ymin,a.geometry.xmax,a.geometry.ymax,new esri.SpatialReference({wkid:a.geometry.spatialReference.wkid}));l._cacheFeatureLayer(g,h,f,e)}}function e(a){b.push(a);f()}for(var i in this.dataCachingSpec.featureLayers)this.dataCachingSpec.featureLayersFuture[i]||this.app.store.remove(this._getFeatureLayerStorageKey(this.dataCachingSpec.featureLayers[i].serviceUrl),
function(){},function(){});this.dataCachingSpec.featureLayers={};var k=[];for(i in this.dataCachingSpec.featureLayersFuture)k.push(i);var l=this,j=-1,b=[];f()},_cacheFeatureLayer:function(d,f,e,i){var k=this,l=null,j=null;if(this.app.isOffline&&this.app.isOffline.get())i(Error(this.app.getResource(this.libraryId,"language-feature-layer-caching-not-allowed")));else{var b=function(a){e&&e(a)},a=function(a){i&&i(a)};this.app.commandRegistry.command("UpdateFeatureLayerModalMessage").execute(this.app.getResource(this.libraryId,
"language-feature-layer-caching-data"));var g=this.app.site.essentialsMap.findMapServiceById(d);g||i&&i(Error("Map service for layer {0} not found. The administrator may have changed the site schema. Please clear offline data and try to sync again".format(d)));if(g.serviceLayer)l=g.serviceLayer.version,j=l>=10.1?g.serviceLayer.maxRecordCount:l>=10?1E3:500;l=[];console.log("CACHE features for map service "+g.url);var h=g.serviceLayer.queryFeatures(f);l.push(h);g.hasOriginRelationships()&&(h=g.queryIds(f),
l.push(h));l=new dojo.DeferredList(l);this.app.commandRegistry.command("UpdateFeatureLayerModalMessage").execute(this.app.getResource(this.libraryId,"language-feature-layer-fetching-data"));l.then(function(d){function e(d){if(d){var j=[],l;for(l=0;l<d.length;l++)if(d[l]&&d[l].length===2&&d[l][0]){var m={};m.info=s[l];m.data=k._prepRelatedData(d[l][1]);j.push(m)}else{j="";d[l]&&d[l].length===2&&(j=d[l][1]);d="Error getting related records for layer {0}. {1}".format(g.displayName,j);i&&i(Error(d));
k.app.trace.error(d);return}k._storeFeatureLayerForOfflineUse(h,g,f,b,a,j)}}if(d&&d.length>0&&d[0]&&d[0].length>=2&&d[0][0]===false)d[0][1].code==400&&d[0][1].details&&d[0][1].details.length&&/.*operation was attempted on an empty geometry.*/.test(d[0][1].details[0])?k._storeFeatureLayerForOfflineUse([],g,f,b,a):a(d[0][1]);else{var h=null,l,s;if(d&&d.length>0&&d[0]&&d[0].length>=2&&d[0][0])d[0][1].features.length===0?h=[]:(h=d[0][1].toJson().features,d[0][1].features.length===j&&k.app.trace.warning(k.app.getResource(k.libraryId,
"language-feature-layer-max-record-warning").format(g.displayName,d[0][1].features.length)));if(g.hasOriginRelationships()&&d&&d.length>1&&d[1]&&d[1].length>=2){l=[];s=[];var m,q;for(m=0;m<g.serviceLayer.relationships.length;m++)if(q=g._getRelation(g.serviceLayer.relationships[m].id),(!q||q.visible)&&g.serviceLayer.relationships[m].role==="esriRelRoleOrigin")q=new esri.tasks.RelationshipQuery,q.outFields=["*"],q.relationshipId=g.serviceLayer.relationships[m].id,q.objectIds=d[1][1],l.push(g.queryRelatedFeatures(q)),
s.push(g.serviceLayer.relationships[m]);l.length>0?(d=new dojo.DeferredList(l),k.app.commandRegistry.command("UpdateFeatureLayerModalMessage").execute(k.app.getResource(k.libraryId,"language-feature-layer-fetching-related-data")),d.then(e,a)):k._storeFeatureLayerForOfflineUse(h,g,f,b,a)}else k._storeFeatureLayerForOfflineUse(h,g,f,b,a)}},function(a){k.app.trace.error("Feature Layer Module - unable to cache data for feature layer '{2}({0})': {1}. ".format(d,a,g.displayName));i&&i(a)})}},_storeFeatureLayerForOfflineUse:function(d,
f,e,i,k,l){var j=this,b=f.serviceLayer,a=null;e&&e.geometry&&(a=e.geometry.toJson());var g=null;if(e&&e.where)g=e.where;var h=this._getSpatialReferenceAndClense(d),o=JSON.stringify(h.jsonFeatures),e=[],t=this.app.store.set(this._getFeatureLayerStorageKey(f.url),o);e.push(t);if(l)for(t=0;t<l.length;t++){var v=JSON.stringify(l[t].data);l[t].info.size=v.length*2;v=this.app.store.set(this._getFeatureLayerRelatedStorageKey(f.url,l[t].info.id),v);e.push(v)}(new dojo.DeferredList(e)).then(function(){j.app.trace.info("Feature Layer Module -  saved {1} feature(s) for Feature Layer '{2}({0})'".format(f.id,
d.length,f.displayName));var e=j._grabLayerMetadata(b);e.spatialReference=h.spatialReference;var k=j.getRelationshipMetadata(l);j.dataCachingSpec.featureLayers[f.url]={relationships:k,layerMetadata:e,count:d.length,size:o.length*2,storedOn:(new Date).toLocaleString(),geometry:a,whereClause:g,serviceUrl:f.url,serviceId:f.id};j._persistDataCachingSpec();i&&i()},function(a){j.app.trace.error("Feature Layer Module - unable to store features for Feature Layer '{2}({0})': {1}".format(f.id,a,f.displayName));
k&&k(a)})},_setFeatureLayerFutureSpec:function(d,f){var e=this.app.site.essentialsMap.findMapServiceById(d),i=f&&f.geometry?f.geometry.toJson():null,k=f&&f.where?f.where:null;this.dataCachingSpec.featureLayersFuture[e.url]={layerMetadata:this._grabLayerMetadata(e.serviceLayer),geometry:i,whereClause:k,serviceUrl:e.url,serviceId:e.id};this._persistDataCachingSpec()},_clearFeatureLayerFutureSpec:function(d){delete this.dataCachingSpec.featureLayersFuture[this.app.site.essentialsMap.findMapServiceById(d).url];
this._persistDataCachingSpec()},_grabLayerMetadata:function(d){return{fields:d.fields,version:d.version,capabilities:d.capabilities,relationships:d.relationships,objectIdField:d.objectIdField}},_getSpatialReferenceAndClense:function(d){for(var f={},e=0;e<d.length;e++){var i=d[e];if(i.geometry&&i.geometry.spatialReference){if(!f.spatialReference)f.spatialReference=i.geometry.spatialReference;delete i.geometry.spatialReference}}f.jsonFeatures=d;return f},_layerOnBeforeApplyEdits:function(){},_layerOnAddAttachmentComplete:function(){},
_layerOnDeleteAttachmentsComplete:function(){},_layerOnEditsComplete:function(){}});
dojo.safeMixin(geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerModuleDecl,{_executeGetRelatedFeatures:function(d){this._getRelatedFeatures(d.mapService,d.relationshipId,d.objectId,d.currentFeature,d.successCallback,d.errorCallback)},_clearRelatedFeaturesCache:function(){if(this._relatedFeatureLayerCache)for(var d in this._relatedFeatureLayerCache)this._relatedFeatureLayerCache.hasOwnProperty(d)&&(this._relatedFeatureLayerCache[d].clear(),delete this._relatedFeatureLayerCache[d])},
getRelationshipMetadata:function(d){var f=[];if(d){var e;for(e=0;e<d.length;e++)f.push({id:d[e].info.id,name:d[e].info.name,count:d[e].data.length,size:d[e].info.size})}return f},_getRelatedFeatureLayerIndex:function(d,f){return d&&!isNaN(f)?f+"_"+d.url:null},_prepRelatedData:function(d){var f=[];if(d)for(var e in d)if(d.hasOwnProperty(e)){var i={},k=d[e].toJson().features,l;for(l in k)!i.hasOwnProperty(l)&&k.hasOwnProperty(l)&&(i[l]=true,f.push(k[l]))}return f},_getRelatedFeatures:function(d,f,e,
i,k,l){var j=new dojo.Deferred,b=this;if(!d){var a=Error("_getRelatedFeatures: mapService cannot be null.");geocortex.deferredReject(j,a);typeof l=="function"&&l(a);return j}if(isNaN(f))return a=Error("_getRelatedFeatures: relationshipId cannot be null."),geocortex.deferredReject(j,a),typeof l=="function"&&l(a),j;if(!e)return a=Error("_getRelatedFeatures: objectId cannot be null."),geocortex.deferredReject(j,a),typeof l=="function"&&l(a),j;if(this.app.isOffline.get())if(a=function(a){if(!a.features||
a.features.length===0){a.features=[];for(var g=d.serviceLayer.objectIdField,t=d.serviceLayer.graphics.length-1;t>=0;--t){var v=d.serviceLayer.graphics[t];if(v.attributes&&v.attributes[g]===e){a.features.push(v);break}}}for(var n=d.serviceLayer._essentialsMetadata.serviceUrl,g=n.substring(0,n.lastIndexOf("/")),v=null,t=0;t<d.serviceLayer.relationships.length;++t){var s=d.serviceLayer.relationships[t];if(s.id===f){v=s;break}}n="{0}/{1}".format(g,v.relatedTableId);t=n.replace(/https?:\/\//,"").replace("//",
"/");g=t.indexOf("/local-proxy/");g!=-1&&(t=t.substring(g));t=geocortex.essentialsHtmlViewer.mapping.modules.offline.urlToPattern(t);b.app.store.get(t,function(e){if(e==null)e=Error("Could not find offline related layer '{0}'".format(n)),geocortex.deferredReject(j,e),typeof l=="function"&&l(e);else{/^\s*{/.test(e)||(e=geocortex.framework.utils.base64Decode(e));var g=JSON.parse(e);g.url=n;(b.app.store.get(b._getFeatureLayerRelatedStorageKey(d.url,f))||b.app.store.get(b._getFeatureLayerRelatedStorageKey(d.originalUrl,
f))).then(function(e){e==""&&(e=null);g.graphics=JSON.parse(e);b._performEditsToRelatedData(g,g.graphics,function(){var e=b._findRelatedRecord(d,f,a,g,i);geocortex.deferredResolve(j,e);typeof k=="function"&&k(e)},function(a){geocortex.deferredReject(j,a);typeof l=="function"&&l(a)})},l)}})},e>0||typeof e=="string"){var g=new esri.tasks.Query;g.objectIds=e;g.outFields=["*"];g=d.serviceLayer.queryFeatures(g);g.then(a)}else g=[],g.features=d.serviceLayer.graphics,a(g);else a=new esri.tasks.RelationshipQuery,
a.outFields=["*"],a.relationshipId=f,a.objectIds=[e],d&&d.serviceLayer&&d.serviceLayer.queryRelatedFeatures?(g=d.serviceLayer.queryRelatedFeatures(a),g.then(function(a){var b=[],d;for(d in a)if(a.hasOwnProperty(d))for(var e=0;e<a[d].features.length;e++)b.push(a[d].features[e]);geocortex.deferredResolve(j,b);typeof k=="function"&&k(b)},function(a){geocortex.deferredReject(j,a)})):geocortex.deferredResolve(j,[]);return j},_findRelatedRecord:function(d,f,e,i,k){var l=[];if(!d||isNaN(f)||!e||!i)return l;
var j=d._getEsriRelation(f);if(!j)return l;for(var b=l,a=0;a<i.relationships.length;a++)if(i.relationships[a].id==f){b=i.relationships[a];break}if(!b)return l;f=null;if(e&&e.features&&e.features.length>0)for(a=0;a<e.features.length;a++){var f=e.features[a].attributes[j.keyField],g={};if(!k&&i.graphics)for(var h=0;h<i.graphics.length;h++)if(i.graphics[h]){var o=i.graphics[h].attributes[i.objectIdField];i.graphics[h].attributes[b.keyField]==f&&!g[o]&&(g[o]=true,l.push(i.graphics[h]))}k&&(g=k.esriFeature.get().attributes[b.keyField],
typeof g=="string"&&typeof f=="string"&&(g=g.toUpperCase(),f=f.toUpperCase()),g==f&&d.serviceLayer.type!="Table"&&l.push(e.features[a]))}return l},_isRelatedFeatureLayerCached:function(d,f){return this._relatedFeatureLayerCache[this._getRelatedFeatureLayerIndex(d,f)]&&true},_getRelatedFeatureLayerFromCache:function(d,f){return this._relatedFeatureLayerCache[this._getRelatedFeatureLayerIndex(d,f)]},_addRelatedLayerToCache:function(d,f,e){this._relatedFeatureLayerCache[this._getRelatedFeatureLayerIndex(d,
f)]=e},_performEditsToRelatedData:function(d,f,e,i){var k=this,l=[],j=[],b=[];this.getEditLog(function(a){for(var g=0;g<a.entries.length;++g){var h=a.entries[g];h.layerUrl.match(/[^\\?]*/g)[0]===d.url&&(h.type==="relatedRecordAddition"?l.push(h.feature):h.type==="relatedRecordUpdate"?j.push(h.feature):h.type==="relatedRecordDeletion"?b.push(h.feature):h.type==="addition"?l.push(h.feature):h.type==="update"?j.push(h.feature):h.type==="deletion"&&b.push(h.feature))}k._performEditsToFeatureCollection(d.objectIdField,
null,f,l,j,b);e&&e(f)},function(a){k.app.trace.error("Error fetching offline edit log while loading offline edits: {0}".format(a));i&&i(a)})},_getRelatedFeatureLayer:function(d,f,e,i){var k=new dojo.Deferred,l=this;if(!d){var j=Error("_getRelatedFeatureLayer: mapService cannot be null.");geocortex.deferredReject(k,j);typeof i=="function"&&i(j);return k}if(isNaN(f))return j=Error("_getRelatedFeatureLayer: relationshipId cannot be null."),geocortex.deferredReject(k,j),typeof i=="function"&&i(j),k;j=
this._getRelatedFeatureLayerFromCache(d,f);if(this.app.isOffline.get()===true){for(var b=d.serviceLayer._essentialsMetadata.serviceUrl,j=b.substring(0,b.lastIndexOf("/")),a=null,g=0;g<d.serviceLayer.relationships.length;++g){var h=d.serviceLayer.relationships[g];if(h.id===f){a=h;break}}b="{0}/{1}".format(j,a.relatedTableId);j=b.replace(/https?:\/\//,"").replace("//","/");a=j.indexOf("/local-proxy/");a!=-1&&(j=j.substring(a));var j=geocortex.essentialsHtmlViewer.mapping.modules.offline.urlToPattern(j),
o=new dojo.Deferred;this.app.store.get(j,function(a){try{if(a==null)throw Error("Could not find offline related layer '{0}'".format(b));/^\s*{/.test(a)||(a=geocortex.framework.utils.base64Decode(a));var d=JSON.parse(a);d.url=b;d.graphics=[];geocortex.deferredResolve(o,d);typeof e=="function"&&e(d)}catch(f){geocortex.deferredReject(o,f),typeof i=="function"&&i(f)}finally{return o}});return o}if(j)return geocortex.deferredResolve(k,j),typeof e=="function"&&e(j),k;d.getRelatedFeatureLayer(f).then(function(a){function b(g){var h=
g.toJson();h.featureSet.features=g?JSON.parse(g):[];l._performEditsToRelatedData(a,h.featureSet.features);g=new esri.layers.FeatureLayer(h);h={};h.serviceUrl=a.url;h.onlineUrl=d.url;g._essentialsMetadata=h;l._addRelatedLayerToCache(d,f,g);geocortex.deferredResolve(k,g);typeof e=="function"&&e(g)}if(l.app.isOffline.get()===false)l._addRelatedLayerToCache(d,f,a),geocortex.deferredResolve(k,a),typeof e=="function"&&e(a);else{var g=l.dataCachingSpec.featureLayers[d.url]||l.dataCachingSpec.featureLayers[d.originalUrl],
h=null;if(g&&g.relationships){var j;for(j=0;j<g.relationships.length;j++)if(g.relationships[j].id===f){h=g.relationships[j];break}}h&&h.count>0?(l.app.store.get(l._getFeatureLayerRelatedStorageKey(d.url,f))||l.app.store.get(l._getFeatureLayerRelatedStorageKey(d.originalUrl,f))).then(b,function(a){geocortex.deferredReject(k,a);typeof i=="function"&&i(a)}):b()}},function(a){geocortex.deferredReject(k,a);typeof i=="function"&&i(a)});return k}});
dojo.safeMixin(geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerModuleDecl,{_updateEditLogForNewFeature:function(d,f,e,i,k){for(var l=this,j=f.metadata.GCXOBJECTID,b=0;b<d.entries.length;++b){var a=d.entries[b],g=a.metadata;if(g&&g.dependencies&&g.dependencies.hasOwnProperty(j)&&g.dependencies[j]!=null)for(var g=g.dependencies[j],h=0;h<g.length;++h){var o=g[h];a.feature.attributes[o.to]=f.feature.attributes[o.from]}}this.setEditLog(d,function(){l.app.trace.debug("Successfully updated relationships in edit log.");
i&&i(e)},function(a){l.app.trace.debug("An error occurred while updating relationships in the edit log: {0}.".format(a.toString()));k&&k(a)})}});
dojo.safeMixin(geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerModuleDecl,{_handleSyncComplete:function(){this._refreshModuleData()},_autoProvisionAndStartSync:function(){if(this.app.isOffline.get()){var d=this.app.getResource(this.libraryId,"language-feature-layer-cannot-sync-edits-offline");this.app.trace.info(d);this.app.commandRegistry.command("Alert").execute(d)}else this.app.commandRegistry.command("ShowFeatureLayerModalMessage").execute(this.app.getResource(this.libraryId,"language-feature-layer-syncing")),
this._noFeatureLayersSelectedForSync()&&(d=this.getResource("language-feature-layer-sync-no-layer-selected"),this.app.commandRegistry.command("UpdateFeatureLayerModalMessage").execute(d,"warning")),d=this.getResource("language-feature-layer-sync-start"),this.app.commandRegistry.command("UpdateFeatureLayerModalMessage").execute(d),this._startSync()},_noFeatureLayersSelectedForSync:function(){for(var d in this.dataCachingSpec.featureLayersFuture)if(this.dataCachingSpec.featureLayersFuture.hasOwnProperty(d)&&
this.dataCachingSpec.featureLayersFuture[d].hasOwnProperty("serviceUrl"))return false;return true},_recacheDataTimer:null,_startSync:function(){function d(){function d(){if(b.length==0)editSuccessMsg=k.app.getResource(k.libraryId,"language-feature-layer-sync-end-edit-success-start-recache"),k.app.commandRegistry.command("UpdateFeatureLayerModalMessage").execute(editSuccessMsg),k.app.commandRegistry.command("_autoDownloadOfflineResources").execute(e,function(){msg=k.app.getResource(k.libraryId,"language-feature-layer-sync-update-resource-failed");
k.app.commandRegistry.command("UpdateFeatureLayerModalMessage").execute(msg,"error");e()});else{var f=k.app.getResource(k.libraryId,"language-feature-layer-sync-end-edits-errors"),g=k.app.getResource(k.libraryId,"language-feature-layer-edits-and-sync"),f=f.format(a.length,g);k.app.commandRegistry.command("AllowHideFeatureLayerModalMessage").execute(f,false)}}function e(){var a=[],b=[],d=[],g=k.app.site.getFeatureServices();if(g.length==0)k._cacheAllFeatureLayers(f);else{for(var h=0;h<g.length;h++){var i=
g[h].serviceLayer;i.setAutoGeneralize&&i.setAutoGeneralize(false);i.visible||(a.push(i),i.show());i.visibleAtMapScale||(b.push(i),d.push({maxScale:i.maxScale,minScale:i.minScale}),i.setMaxScale(0),i.setMinScale(0))}if(k._)k.app.eventRegistry.event("LayerUpdateEndedEvent").unsubscribe(k._layerUpdateEndedEventToken),k._layerUpdateEndedEventToken=null;for(h=0;h<g.length;h++)g[h].serviceLayer.refresh();if(k._recacheDataTimer)clearInterval(k._recacheDataTimer),k._recacheDataTimer=null;k._recacheDataTimer=
setInterval(function(){for(var e=0;e<g.length;e++)if(g[e].serviceLayer.updating)return;if(k._recacheDataTimer)clearInterval(k._recacheDataTimer),k._recacheDataTimer=null;for(k._cacheAllFeatureLayers(f);a.length>0;)a.pop().hide();for(;b.length>0;)e=b.pop(),e.setMaxScale(d[b.length].maxScale),e.setMinScale(d[b.length].minScale)},200)}}function f(a){for(var b=k.app.site.getFeatureServices(),d=0;d<b.length;d++){var e=b[d].serviceLayer;e.setAutoGeneralize&&e.setAutoGeneralize(true)}b="";if(a.length==0)b=
k.app.getResource(k.libraryId,"language-feature-layer-sync-end-success");else for(d=0;d<a.length;d++)k.app.trace.error(a[d]),a[d].name&&a[d].name=="RequestTimeoutError"?b=k.app.getResource(k.libraryId,"language-feature-layer-sync-end-request-timeout"):a[d].message||a[d].description?(b=a[d].message||a[d].description,b=k.app.getResource(k.libraryId,"language-feature-layer-sync-end-error").format(b)):b=k.app.getResource(k.libraryId,"language-feature-layer-sync-end-unknown-error"),d!==a.length-1&&k.app.commandRegistry.command("UpdateFeatureLayerModalMessage").execute(b,
"error");k.app.eventRegistry.event("FeatureLayerModuleSyncCompletedEvent").publish(l);k.app.commandRegistry.command("AllowHideFeatureLayerModalMessage").execute(b,a.length==0)}if(b.length>0){for(var g=0;g<b.length&&g<3;g++)k.app.trace.error(b[g]);b.length>3&&k.app.trace.error(b.length-3+" more sync errors")}if(b.length==0)l.entries.length=0;k.setEditLog(l,d,function(a){k.app.trace.error(a);a=k.app.getResource(k.libraryId,"language-feature-layer-error-setting-edit-log").format(a);b.push(a);k.app.commandRegistry.command("Alert").execute(a);
d()})}function f(){j++;if(j>=l.entries.length)d();else{var b=l.entries[j];if(b.committed)f();else if(a.some(geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry.prototype.isRelated,b)){var h=k.app.getResource(k.libraryId,"language-feature-layer-skipping-feature-failed"),h=h.format(b.getDescription(k.app,k.libraryId));k.app.commandRegistry.command("UpdateFeatureLayerModalMessage").execute(h,"error");g.push(b);f()}else g.some(geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry.prototype.isRelated,
b)?(h=k.app.getResource(k.libraryId,"language-feature-layer-skipping-feature-blocked"),h=h.format(b.getDescription(k.app,k.libraryId)),k.app.commandRegistry.command("UpdateFeatureLayerModalMessage").execute(h,"warning"),g.push(b),f()):(b.error=null,k._syncEditToServer(l,b,e,i))}}function e(){var a=l.entries[j];h++;if(!a.error)a.committed=true;k.setEditLog(l,function(){f()},function(a){b.push("Error saving updated edit log: {0}".format(a));f()})}function i(d){var e=l.entries[j];e.error=d;var g="";
if(d&&d.message)g=d.message,d.details&&(g+=" (Details: {0})".format(d.details[0]));k.app.eventRegistry.event("FeatureLayerModuleSyncErrorEvent").publish(d);k.app.eventRegistry.event("FeatureLayerModuleSyncFailedEvent").publish(d);var h=k.app.getResource(k.libraryId,"language-feature-layer-error-sync-feature"),h=h.format(e.getDescription(k.app,k.libraryId),g?g:d);k.app.commandRegistry.command("UpdateFeatureLayerModalMessage").execute(h,"error");a.push(e);b.push("Error syncing edits to server: {0}".format(h));
f()}var k=this,l=null,j=-1,b=[],a=[],g=[],h=0;this.getEditLog(function(a){j=-1;l=a;try{k.app.eventRegistry.event("FeatureLayerModuleSyncStartedEvent").publish(l),k.app.trace.debug("Fetched the edit log from storage. Edit log has {0} entries.".format(l.entries.length)),f()}catch(e){b.push("An error occurred while syncing: {0}".format(e)),d()}},function(a){k.app.trace.error("Could not fetch offline edit log for synchronization: {0}".format(a))})},_syncEditToServer:function(d,f,e,i){var k=this,l=null,
j=f.mapServiceUrl,b=null;if(!this.dataCachingSpec||!this.dataCachingSpec.featureLayers)throw Error("Missing offline layer dataCachingSpec!");if(b=this.dataCachingSpec.featureLayers[j]||this.dataCachingSpec.featureLayers[geocortex.essentials.utilities.UrlUtilities.simplify(j)]){var a=this.app.site.essentialsMap.findMapServiceById(b.serviceId);if(a)l=a.serviceLayer;else{i(Error("Could not find map service '{0}'.".format(b.serviceId)));return}}else{b=this.app.site.essentialsMap.mapServices;for(a=0;a<
b.length;++a){var g=b[a];if(g.url===j){l=g.serviceLayer;break}}}switch(f.type){case "attachmentAddition":var h=f.feature.attributes.filename,o=f.feature.attributes.contentType;this.app.store.get(f.feature.attributes.key,function(a){k._syncAttachmentToServer(f.mapServiceUrl+"/"+f.feature.attributes.gcx_feature_objectId,h,o,a,function(a){try{if(a instanceof Error)i&&i(a);else{if(a.target.status==403)throw Error("Sync failed. Forbidden.");var b=JSON.parse(a.target.responseText);if(b.error)throw Error(b.error.message);
k._updateEditLogForNewFeature(d,f,l,function(){k.app.store.remove(f.feature.attributes.key,function(){e&&e(b.addAttachmentResult.objectId)},i)},i)}}catch(g){i&&i(g)}})},function(a){i&&i(a)});return}var t=[],v=[],n=[],b=false,s=function(a){if(t&&t.length>0)var b=t[0].attributes.OBJECTID;a.applyEdits(t,v,n,function(g,h){var j=null;if(h&&h.length>0)for(var l=0;l<h.length;++l){var n=h[l];if(!n.success){j=n.error;break}}if(g&&g.length>0)if(l=g[0],l.success){var j=l.objectId,o=l.GID,l=new esri.tasks.Query;
l.objectIds=[j];l.outFields=["*"];l.where="1=1";a.queryFeatures(l,function(b){!b||!b.features||!b.features.length?k.app.trace.error("Error updating synchronized feature: Could not requery saved feature."):(dojo.safeMixin(f.feature,b.features[0]),o&&!String.isNullOrEmpty(b.globalIdFieldName)&&(f.feature.attributes[b.globalIdFieldName]=o),k._updateEditLogForNewFeature(d,f,a,e,i))},function(a){f.error=a;k.app.trace.error("Error updating synchronized feature: {0}".format(a.toString()));i&&i(a)});for(var n=
d.entries.length,s=-1,l=0;l<n;l++){var v=d.entries[l];if(v.feature.attributes==t[0].attributes){s=l;break}}for(l=s;l<n;l++)if(v=d.entries[l],v.feature.attributes.OBJECTID==b)v.feature.attributes.OBJECTID=j}else l=l.error||{message:"Editing operation was not successful"},i(l.message);else j?(l=j||{message:"Editing operation was not successful"},i(l.message)):e&&e()},function(a){i&&i(a)})};switch(f.type){case "addition":t.push(f.feature);break;case "update":v.push(f.feature);break;case "deletion":n.push(f.feature);
break;case "relatedRecordAddition":case "relatedRecordUpdate":case "relatedRecordDeletion":f.type==="relatedRecordAddition"?t.push(f.feature):f.type==="relatedRecordUpdate"?v.push(f.feature):f.type==="relatedRecordDeletion"&&n.push(f.feature);l||(l=new esri.layers.FeatureLayer(j,{mode:esri.layers.FeatureLayer.MODE_ONDEMAND,outFields:["*"]}),l.loaded?s(l):(dojo.connect(l,"onLoad",dojo.hitch(this,function(){s(l)})),dojo.connect(l,"onError",dojo.hitch(this,function(){}))),b=true);break;default:throw Error("Cannot sync unknown edit type '{0}'".format(f.type));
}b||s(l)}});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerModule",geocortex.framework.application.ModuleBase,geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerModuleDecl);
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerViewModel",geocortex.framework.ui.ViewModelBase,{featureLayers:null,showDetails:null,currentFeatureLayer:null,syncNeeded:null,showWhereClause:null,layerEditSummaries:null,isOffline:null,constructor:function(){this._registerCommands();this.currentFeatureLayer=new Observable(null);this.showDetails=new Observable(false);this.featureLayers=new ObservableCollection;this.showWhereClause=new Observable(false);this.layerEditSummaries=
this.app.featureLayerModule.layerEditSummaries;this.syncNeeded=new Observable(false);this.syncNeeded.sync(this.app.featureLayerModule.syncNeeded);this.isOffline=this.app.isOffline},initialize:function(d){this.inherited(arguments);d&&d.showWhereClause&&this.showWhereClause.set(d.showWhereClause)},_registerCommands:function(){this.app.commandRegistry.command("FeatureLayerModuleRefreshData").register(this,this._refreshData);this.app.eventRegistry.event("DomainStorageClearedEvent").subscribe(this,this._handleDomainStorageClearedEvent);
this.app.eventRegistry.event("ApplicationStorageClearedEvent").subscribe(this,this._handleApplicationStorageClearedEvent);this.app.eventRegistry.event("SiteServiceLayersLoadedEvent").subscribe(this,this._refreshData)},_handleDomainStorageClearedEvent:function(){this._refreshData()},_handleApplicationStorageClearedEvent:function(){this._refreshData()},_refreshData:function(){if(this.app.site&&this.app.site.isInitialized&&this.app.featureLayerModule.dataCachingSpec.featureLayers){var d=this.app.site.getFeatureServices();
this.featureLayers.clear();for(var f=[],e=0;e<d.length;e++){var i=null,k=null;this.app.featureLayerModule.dataCachingSpec&&(i=this.app.featureLayerModule.dataCachingSpec.featureLayers[d[e].url]||this.app.featureLayerModule.dataCachingSpec.featureLayers[d[e].originalUrl],k=this.app.featureLayerModule.dataCachingSpec.featureLayersFuture[d[e].url]||this.app.featureLayerModule.dataCachingSpec.featureLayersFuture[d[e].originalUrl]);var l=d[e].displayName;if(d[e]&&d[e].layers&&d[e].layers.length>0)l=d[e].layers[0].displayName;
f.push({displayName:new Observable(l),mapServiceId:new Observable(d[e].id),isOffline:this.isOffline,hasCachedDataInfo:i!=null&&typeof i!="undefined",cachedDataInfo:new Observable(this._prepCachedDataInfo(i,d[e])),futureCachedDataInfo:new Observable(this._prepCachedDataInfo(k,d[e])),layer:d[e].serviceLayer})}this.featureLayers.addItems(f);if(this.currentFeatureLayer&&(d=this.currentFeatureLayer.get())){d=d.mapServiceId.get();for(f=0;f<this.featureLayers.getLength();f++)if(e=this.featureLayers.getAt(f),
e.mapServiceId.get()==d){this.currentFeatureLayer.set(e);break}}}},_augmentInformation:function(d,f){d.count=new Observable(null);d.size=new Observable(null);if(f&&f.relationships)for(var e in f.relationships)if(f.relationships.hasOwnProperty(e)&&f.relationships[e].id===d.relInfo.id){d.count=new Observable(f.relationships[e].count);d.size=new Observable(f.relationships[e].size);break}},_geometryToString:function(d){return!d||d.xmin===null||d.ymin===null||d.xmax===null||d.ymax===null?null:"{0}, {1}, {2}, {3}".format(d.xmin.toFixed(2),
d.ymin.toFixed(2),d.xmax.toFixed(2),d.ymax.toFixed(2))},_prepCachedDataInfo:function(d,f){var e={};e.relationships=new ObservableCollection;var i=false;if(f.hasOriginRelationships()&&f.serviceLayer.relationships)for(var k=0;k<f.serviceLayer.relationships.length;k++){var l=null;f&&f.layers&&f.layers.length>0&&(l=f._getRelation(f.serviceLayer.relationships[k].id));if(l&&l.visible&&f.serviceLayer.relationships[k].role==="esriRelRoleOrigin"){var i=true,j={};j.relInfo=f.serviceLayer.relationships[k];j.name=
new Observable(l.displayName?l.displayName:f.serviceLayer.relationships[k].name);this._augmentInformation(j,d);e.relationships.addItem(j)}}d?(e.hasRelatedTables=new Observable(i),e.isSet=new Observable(true),e.count=new Observable(d.count?d.count:0),e.size=new Observable(d.size?d.size:0),e.storedOn=new Observable(d.storedOn?d.storedOn:""),e.geometry=new Observable(d.geometry),e.whereClause=new Observable(d.whereClause),e.serviceUrl=new Observable(d.serviceUrl),e.serviceId=new Observable(d.serviceId)):
(e.hasRelatedTables=new Observable(false),e.isSet=new Observable(false),e.count=new Observable(null),e.size=new Observable(null),e.storedOn=new Observable(null),e.geometry=new Observable(null),e.whereClause=new Observable(""),e.serviceUrl=new Observable(f.url),e.serviceId=new Observable(f.id));e.showWhereClause=new Observable(this.showWhereClause.get());e.geometryString=new Observable(this._geometryToString(e.geometry.get()));return e}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.LayerEditSummary",null,{mapServiceUrl:null,displayName:null,numAdditions:null,numUpdates:null,numDeletions:null,additions:null,updates:null,deletions:null,totalEdits:null,constructor:function(d,f){this.mapServiceUrl=new Observable(d||null);this.displayName=new Observable(f||null);this.numAdditions=new Observable(0);this.numUpdates=new Observable(0);this.numDeletions=new Observable(0);this.additions=new ObservableCollection;
this.updates=new ObservableCollection;this.deletions=new ObservableCollection;this.totalEdits=new Observable(0)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.ModalMessageView",geocortex.framework.ui.ViewBase,{scrollElement:null,_scrollElementScrolls:null,constructor:function(){this._scrollElementScrolls=null},attach:function(d){this.inherited(arguments);this.title.set(d.title.get());var f=this;d.onContentChanged=function(){if(f._scrollElementScrolls===null)f._scrollElementScrolls=f.scrollElement&&f.scrollElement.currentStyle?f.isOverflow(f.scrollElement.currentStyle.overflowY):f.scrollElement&&
window.getComputedStyle?f.isOverflow(document.defaultView.getComputedStyle(f.scrollElement,null).overflowY):true;f._scrollElementScrolls?$(f.scrollElement).stop().animate({scrollTop:$(f.scrollElement)[0].scrollHeight},400):$("html,body").stop().animate({scrollTop:$(f.scrollElement)[0].scrollHeight},400)}},isOverflow:function(d){return d=="auto"||d=="scroll"},handleClose:function(){this.app.commandRegistry.command("HideFeatureLayerModalMessage").execute()}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.ModalMessageViewModel",geocortex.framework.ui.ViewModelBase,{title:null,messages:null,summary:null,summaryClass:null,showCloseButton:null,onContentChanged:null,_traceEventToken:null,constructor:function(){this.title=new Observable;this.messages=new ObservableCollection;this.summary=new Observable;this.summaryClass=new Observable;this.showCloseButton=new Observable(false)},initialize:function(d){d&&d.message&&this.title.set(d.message)},
addMessage:function(d,f){var e="trace";if(f&&(f==="error"||f==="warning"))e=f;this.messages.addItem({message:d,cssClass:e});if(this.onContentChanged)this.onContentChanged()},setSummary:function(d,f){this.summary.set(d);this.summaryClass.set(f?"list-menu-icon check-24":"list-menu-icon error-24");if(this.onContentChanged)this.onContentChanged()},setEnableCloseButton:function(d){this.showCloseButton.set(d)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.Info.InfoModule",geocortex.framework.application.ModuleBase,{constructor:function(){this.inherited(arguments)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.Info.InfoView",geocortex.framework.ui.ViewBase,{constructor:function(){this.inherited(arguments)},attach:function(d){this.inherited(arguments);if(this.viewModel.content.get()!==null)this._activateHomePanel();else var f=this.app.eventRegistry.event("HomePanelContentInitializedEvent").subscribe(this,function(){this._activateHomePanel();this.app.eventRegistry.event("HomePanelContentInitializedEvent").unsubscribe(f)})},_registerCommands:function(){this.app.commandRegistry.command("ShowHomePanel").register(this,
this._executeActivateHomePanel,this._canExecuteActivateHomePanel);this.app.commandRegistry.command("ActivateHomePanel").register(this,this._executeActivateHomePanel,this._canExecuteActivateHomePanel)},_canExecuteActivateHomePanel:function(){return this.viewModel.included.get()},_executeActivateHomePanel:function(){this.app.commandRegistry.command("ActivateView").execute(this.id)},_activateHomePanel:function(){this.viewModel.included.get()&&this.title.set(this.viewModel.title.get());this._registerCommands()},
resolveWidget:function(d,f){this.inherited(arguments);if(d==="GetHTMLContent"){var e=new geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureDescriptionPresenterView;e.app=this.app;e.libraryId=this.libraryId;e.root=dojo.create("div");e.root.className="content";var i=e.cleansedFormatForFormat(f).replace(/{{.+?}}|{.+?}/g,function(d){if(d.match(/{{.+?}}/g))return d.substring(1,d.length-1)});e.root.innerHTML=i;e.attach(f);return e}}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.Info.InfoViewModel",geocortex.framework.ui.ViewModelBase,{included:null,content:null,title:null,constructor:function(){this.inherited(arguments);this.content=new Observable(null);this.title=new Observable;this.included=new Observable(false)},initialize:function(d){this.inherited(arguments);d&&(d.hasOwnProperty("included")&&this.included.set(d.included),d.hasOwnProperty("title")&&this.title.set(d.title),d.hasOwnProperty("content")&&(this.content.set(decodeURIComponent(d.content)),
this.app.eventRegistry.event("HomePanelContentInitializedEvent").publish()))}});geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Accessibility/AccessibilityButtonView.html","html","PGRpdiBjbGFzcz0iYWNjZXNzaWJpbGl0eSIgdGFiaW5kZXg9Ii0xIj4gPGJ1dHRvbiBjbGFzcz0iYWNjZXNzaWJpbGl0eS1idXR0b24iIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpbmNsdWRlZH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZU9uQ2xpY2t9e3RpdGxlOiBAbGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtYWNjZXNzaWJpbGl0eS1pY29ufSIgdGFiaW5kZXg9IjAiPjwvYnV0dG9uPiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Accessibility/AccessibilityIconView.html","html","PGRpdiBjbGFzcz0ibW9kdWxlIG5vdGlmaWNhdGlvbiBhbGVydCI+IDxkaXYgcm9sZT0iYWxlcnQiIHRhYmluZGV4PSIwIj4gPGRpdiBjbGFzcz0iZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHdpZGdldDogR2V0SFRNTENvbnRlbnR9e0B3aWRnZXQtY29udGV4dDogY29udGVudH0iPjwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz0iZm9ybS1idG5zIj4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBva0J1dHRvbkVsZW1lbnR9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja09rfXtAdGV4dDogQGxhbmd1YWdlLWNvbW1vbi1va30iIC8+IDwvZGl2PiAgICANCjwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Accessibility/AccessibilityView.html","html","IDxkaXYgY2xhc3M9InNjcmVlbi1yZWFkZXItbm90aWZpY2F0aW9ucyIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogc2NyZWVuUmVhZGVyTm90aWZpY2F0aW9uc0VsZW1lbnR9IiBhcmlhLWxpdmU9InBvbGl0ZSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBhcmlhTGFiZWxUZXh0fSIgYXJpYS1saXZlPSJwb2xpdGUiPjwvc3Bhbj4gPC9kaXY+IA==");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Alert/AlertView.html","html","PGRpdiBjbGFzcz0ibW9kdWxlIG5vdGlmaWNhdGlvbiBhbGVydCI+IDxwIGNsYXNzPSJkZXNjIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogYWxlcnRCb2R5fSI+PC9wPiA8ZGl2IGNsYXNzPSJmb3JtLWJ0bnMiPiA8YnV0dG9uIGNsYXNzPSJidXR0b24iIGRhdGEtYmluZGluZz0ie0B2YXI6IG9rQnV0dG9uRWxlbWVudH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrT2t9e0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLW9rfSIgLz4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Authentication/AuthenticationView.html","html","PGRpdiBjbGFzcz0ibW9kdWxlIGF1dGhlbnRpY2F0aW9uLWRpYWxvZyI+IDxkaXYgY2xhc3M9ImZvcm0tdmFsaWRhdGlvbiIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGVycm9yfXtAdGV4dDplcnJvck1lc3NhZ2V9Ij48L2Rpdj4gIDxkaXYgY2xhc3M9ImxvYWRpbmctY29udGFpbmVyIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogYXV0aGVudGljYXRpbmd9Ij4gPGRpdiBjbGFzcz0ibG9hZGluZy1pbWciIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBidXN5fSI+PC9kaXY+IDxkaXYgY2xhc3M9ImxvYWRpbmctbXNnIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWF1dGgtYXV0aGVudGljYXRpbmd9Ij48L2Rpdj4gPC9kaXY+IDxmb3JtIGNsYXNzPSJmb3JtLWNvbnRhaW5lciIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogYXV0aGVudGljYXRpbmd9Ij4gPGRpdiBjbGFzcz0iZm9ybS1pdGVtIj4gPGxhYmVsIGZvcj0idXNlcm5hbWUiY2xhc3M9ImZvcm0tbGFiZWwiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtYXV0aC11c2VybmFtZX0iPjwvbGFiZWw+IDxkaXYgY2xhc3M9ImZvcm0tY29udHJvbCI+IDxpbnB1dCBpZD0idXNlcm5hbWUiIHR5cGU9InRleHQiIGF1dG9jb3JyZWN0PSJvZmYiIGF1dG9jYXBpdGFsaXplPSJvZmYiIGRhdGEtYmluZGluZz0ie0B2YWx1ZTogdXNlcm5hbWV9IiAvPiA8L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9ImZvcm0taXRlbSI+IDxsYWJlbCBmb3I9InBhc3N3b3JkIiBjbGFzcz0iZm9ybS1sYWJlbCIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1hdXRoLXBhc3N3b3JkfSI+PC9sYWJlbD4gPGRpdiBjbGFzcz0iZm9ybS1jb250cm9sIj4gPGlucHV0IGlkPSJwYXNzd29yZCIgdHlwZT0icGFzc3dvcmQiIGRhdGEtYmluZGluZz0ie0B2YWx1ZTogcGFzc3dvcmR9IiAvPiA8L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9ImZvcm0tYnRucyI+IDxidXR0b24gY2xhc3M9ImJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrTG9naW59e0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLWxvZ2lufSI+PC9idXR0b24+IDwvZGl2PiA8L2Zvcm0+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Banner/BannerView.html","html","PGRpdiBjbGFzcz0iYmFubmVyIg0KICAgICBkYXRhLWJpbmRpbmc9IntAc3R5bGUtYmFja2dyb3VuZEltYWdlOiBiYWNrZ3JvdW5kSW1hZ2V9e0BzdHlsZS1iYWNrZ3JvdW5kQ29sb3I6IGJhY2tncm91bmRDb2xvcn17QHN0eWxlLWhlaWdodDogaGVpZ2h0fSI+ICA8ZGl2IGNsYXNzPSJiYW5uZXItaW1hZ2VzIGJhbm5lci1ub3NlbGVjdCINCiAgICAgICAgIGRhdGEtYmluZGluZz0ie0BldmVudC1tb3VzZWRvd246IGhhbmRsZU1vdXNlRG93bn0NCiAgICAgICAgICAgICAgICAgICAgICB7QGV2ZW50LW1vdXNldXA6IGhhbmRsZU1vdXNlVXB9DQogICAgICAgICAgICAgICAgICAgICAge0BldmVudC1tb3VzZW91dDogaGFuZGxlTW91c2VPdXR9DQogICAgICAgICAgICAgICAgICAgICAge0BldmVudC1kYmxjbGljazogaGFuZGxlRG91YmxlQ2xpY2t9DQogICAgICAgICAgICAgICAgICAgICAge0BldmVudC10b3VjaGNhbmNlbDogaGFuZGxlVG91Y2hDYW5jZWx9DQogICAgICAgICAgICAgICAgICAgICAge0BldmVudC10b3VjaHN0YXJ0OiBoYW5kbGVUb3VjaFN0YXJ0fQ0KICAgICAgICAgICAgICAgICAgICAgIHtAZXZlbnQtdG91Y2hlbmQ6IGhhbmRsZVRvdWNoRW5kfSI+IDxpbWcgY2xhc3M9ImJhbm5lci1sZWZ0LWltZyIgZGF0YS1iaW5kaW5nPSJ7c3JjOiBsZWZ0SW1hZ2V9e2FsdDogbGVmdEltYWdlRGVzY3JpcHRpb259e0B2aXNpYmxlOiBsZWZ0SW1hZ2V9IiB0YWJpbmRleD0iMCIgLz4gPGltZyBjbGFzcz0iYmFubmVyLXJpZ2h0LWltZyIgZGF0YS1iaW5kaW5nPSJ7c3JjOiByaWdodEltYWdlfXthbHQ6IHJpZ2h0SW1hZ2VEZXNjcmlwdGlvbn17QHZpc2libGU6IHJpZ2h0SW1hZ2V9IiB0YWJpbmRleD0iMCIgLz4gPC9kaXY+IDx0YWJsZSBjbGFzcz0iYmFubmVyLXRleHQiIHJvbGU9InByZXNlbnRhdGlvbiI+IDx0cj4gPHRkPiA8aDEgY2xhc3M9ImJhbm5lci10aXRsZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGFwcGxpY2F0aW9uVGl0bGV9e0BzdHlsZS1jb2xvcjogdGl0bGVDb2xvcn17QHZpc2libGU6IGFwcGxpY2F0aW9uVGl0bGV9IiB0YWJpbmRleD0iMCI+PC9oMT4gPGgyIGNsYXNzPSJiYW5uZXItc3VidGl0bGUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBhcHBsaWNhdGlvblN1YnRpdGxlfXtAc3R5bGUtY29sb3I6IHN1YnRpdGxlQ29sb3J9e0B2aXNpYmxlOiBhcHBsaWNhdGlvblN1YnRpdGxlfSIgdGFiaW5kZXg9IjAiPjwvaDI+IDwvdGQ+IDwvdHI+IDwvdGFibGU+IDxkaXYgY2xhc3M9ImJhbm5lci1jb250ZW50LXJlZ2lvbiIgZGF0YS1yZWdpb24tbmFtZT0iQmFubmVyQ29udGVudFJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5EaXZTdGFja1JlZ2lvbkFkYXB0ZXIiIGRhdGEtcmVnaW9uLW9wdGlvbnM9ImFjdGl2YXRlVmlld3NJbkxhc3RQb3NpdGlvbj1mYWxzZSI+PC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/BarcodeScanner/BarcodeScannerView.html","html","PHZpZGVvIGF1dG9wbGF5IGRhdGEtYmluZGluZz0ie0B2YXI6IHZpZGVvRWxlbWVudH17QGV2ZW50LWtleWRvd246IGhhbmRsZUtleURvd259Ij48L3ZpZGVvPiA8Y2FudmFzIGRhdGEtYmluZGluZz0ie0B2YXI6IGNhbnZhc0VsZW1lbnR9IiBzdHlsZT0iZGlzcGxheTogbm9uZTsiIGlkPSJxci1jYW52YXMiIHdpZHRoPSI2NDAiIGhlaWdodD0iNDgwIj48L2NhbnZhcz4gPHVsIGNsYXNzPSJjYW1lcmEtY29udHJvbHMiPiA8bGk+IDxidXR0b24gY2xhc3M9ImJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1jb21tb24tY2FuY2VsfXtAZXZlbnQtb25jbGljazogaGFuZGxlQmFja0NsaWNrfSI+PC9idXR0b24+IDwvbGk+IDxsaT4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWJhcmNvZGUtc2Nhbm5lci1zd2l0Y2h9e0B2aXNpYmxlOiBzaG93U291cmNlU3dpdGNoZXJ9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVTd2l0Y2hTb3VyY2V9Ij48L2J1dHRvbj4gPC9saT4gPC91bD4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Basemap/BasemapSliderView.html","html","PGRpdiBjbGFzcz0iYmFzZW1hcC1zbGlkZXItY29udGFpbmVyIiBkYXRhLWJpbmRpbmc9IntAY2xhc3MtYmFzZW1hcC1zbGlkZXItZXhwYW5kZWQ6IHNsaWRlcklzRXhwYW5kZWR9Ij4gPGJ1dHRvbiBjbGFzcz0iYmFzZW1hcC1zbGlkZXItdG9nZ2xlIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogdG9nZ2xlRXhwYW5kZWR9e0BjbGFzcy1iYXNlbWFwLXNsaWRlci1leHBhbmRlZDogc2xpZGVySXNFeHBhbmRlZH17dGl0bGU6IEBsYW5ndWFnZS1iYXNlbWFwLXNsaWRlci10b2dnbGUtYnV0dG9ufSIgdGFiaW5kZXg9IjAiPlRvZ2dsZTwvYnV0dG9uPiA8ZGl2IGNsYXNzPSJiYXNlbWFwLXNsaWRlci1pbm5lciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHNsaWRlcklzRXhwYW5kZWR9Ij4gPGRpdiBjbGFzcz0ic2xpZGVyLWxhYmVsIHNsaWRlci1sYWJlbC1taW4iIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBzbGlkZXJNaW5MYWJlbH0iPjwvZGl2PiA8ZGl2IGNsYXNzPSJzbGlkZXItbGFiZWwgc2xpZGVyLWxhYmVsLW1heCIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHNsaWRlck1heExhYmVsfSI+PC9kaXY+IDxkaXYgY2xhc3M9ImJhc2VtYXAtc2xpZGVyLXRpY2tzIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBzbGlkZXJUaWNrc30iPiA8ZGl2IGNsYXNzPSJ0aWNrIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBzbGlkZXJUaWNrc317QHN0eWxlLWxlZnQ6IHBvc2l0aW9ufSI+PC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJiYXNlbWFwLXNsaWRlciIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogc2xpZGVyRWxlbWVudH0iPiA8ZGl2IGNsYXNzPSJ0aWNrIGxhc3QtdGljayI+PC9kaXY+IDxkaXYgY2xhc3M9InNsaWRlci1sYWJlbCBzbGlkZXItbGFiZWwtY3VycmVudCIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogc2xpZGVyTGFiZWxFbGVtZW50fXtAdGV4dDogc2xpZGVyU2VsZWN0ZWRMYWJlbH0iPjwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Basemap/BasemapSwitcherButtonView.html","html","PGRpdiBjbGFzcz0iZmx5b3V0LW1lbnUiPiA8YnV0dG9uIGNsYXNzPSJmbHlvdXQtbWVudS1hY3RpdmUtdG9vbCIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZURyYXdlckJ1dHRvbkNsaWNrZWR9e3RpdGxlOiBAbGFuZ3VhZ2UtYmFzZW1hcC1zd2l0Y2hlci1zd2l0Y2h9e0BlbmFibGVkOiBiYXNlbWFwc30iIHRhYmluZGV4PSIwIj4gPGltZyBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc2VsZWN0ZWRCYXNlbWFwSWNvblVyaX17c3JjOiBzZWxlY3RlZEJhc2VtYXBJY29uVXJpfXthbHQ6IGhlYWRlckxhYmVsfSIvPiA8cCBjbGFzcz0idG9vbC1sYWJlbCIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGhlYWRlckxhYmVsfXt0aXRsZTogaGVhZGVyTGFiZWx9Ij48L3A+IDwvYnV0dG9uPiA8ZGl2IGRhdGEtYmluZGluZz0ie0B3aWRnZXQ6IEJhc2VtYXBzTGlzdENvbnRyb2xsZXJ9e0B3aWRnZXQtY29udGV4dDogQGNvbnRleHR9e0B3aWRnZXQtcmVwbGFjZTogdHJ1ZX0iPjwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Basemap/BasemapSwitcherView.html","html","PHVsIGNsYXNzPSJiYXNlbWFwLXN3aXRjaGVyIHRvb2xiYXItcGFyZW50IiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBiYXNlbWFwc317QHZhcjogZHJhd2VyQ29udGVudFBhcmVudH0iPiA8bGkgY2xhc3M9ImJhc2VtYXAtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogYmFzZW1hcHN9Ij4gPGJ1dHRvbiBjbGFzcz0idG9vbGJhci1pdGVtIiBkYXRhLWJpbmRpbmc9IntAY2xhc3Mtc2VsZWN0ZWQ6IHZpc2libGV9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVCYXNlbWFwQ2xpY2t9IiB0YWJpbmRleD0iMCI+IDxpbWcgY2xhc3M9Imljb24iIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpY29uVXJpfXtzcmM6IGljb25Vcml9e3RpdGxlOiBkaXNwbGF5TmFtZX17YWx0OiBkaXNwbGF5TmFtZX0iIC8+IDxwIGNsYXNzPSJsYWJlbCIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGRpc3BsYXlOYW1lfXt0aXRsZTogZGlzcGxheU5hbWV9Ij48L3A+IDwvYnV0dG9uPiA8L2xpPiA8L3VsPiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Basemap/BasemapSwitcherViewControllerView.html","html","PGRpdiBjbGFzcz0iZmx5b3V0LW1lbnUtY29sbGFwc2libGUtYXJlYSBmbHlvdXQtbWVudS10b29scyIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGlzRXhwYW5kZWR9e0B2YXI6IGNvbGxhcHNpYmxlQXJlYUVsZW1lbnR9e0BjbGFzcy1tdWx0aS1yb3c6IG11bHRpcGxlUm93c30iPiA8YnV0dG9uIGNsYXNzPSJmbHlvdXQtbWVudS1zY3JvbGwgc2Nyb2xsLWJhY2siIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVTY3JvbGxCYWNrfXtAZW5hYmxlZDpiYWNrQXJyb3dFbmFibGVkfXtAdmlzaWJsZTpiYWNrQXJyb3dWaXNpYmxlfXtAdmFyOiBiYWNrQXJyb3dFbGVtZW50fSIgdGFiaW5kZXg9IjAiPiA8aW1nIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9jaGV2cm9uLWxlZnQtMTYucG5nIiBkYXRhLWJpbmRpbmc9InthbHQ6IEBsYW5ndWFnZS1jb21wYWN0LXRvb2xiYXItbW9yZS10b29sc30iIC8+IDwvYnV0dG9uPiA8YnV0dG9uIGNsYXNzPSJmbHlvdXQtbWVudS1zY3JvbGwgc2Nyb2xsLXRvcCIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVNjcm9sbFRvcH17QGVuYWJsZWQ6IHRvcEFycm93RW5hYmxlZH17QHZpc2libGU6IHRvcEFycm93VmlzaWJsZX17QHZhcjogdG9wQXJyb3dFbGVtZW50fSIgdGFiaW5kZXg9IjAiPiA8aW1nIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9jaGV2cm9uLXVwLTI0LnBuZyIgZGF0YS1iaW5kaW5nPSJ7YWx0OiBAbGFuZ3VhZ2UtY29tcGFjdC10b29sYmFyLW1vcmUtdG9vbHN9IiAvPiA8L2J1dHRvbj4gIDxkaXYgY2xhc3M9ImZseW91dC1tZW51LWZsb2F0aW5nLWFyZWEiIGRhdGEtYmluZGluZz0ie0B2YXI6IGRyYXdlckVsZW1lbnR9Ij4gPGRpdiBjbGFzcz0idG9vbGJhci1pdGVtIHRvb2xiYXItZ3JvdXAiIGRhdGEtYmluZGluZz0ie0B2YXI6IGRyYXdlckNvbnRlbnRFbGVtZW50fXtAY2xhc3MtdG9vbGJhci1ncm91cC1ob3Jpem9udGFsLWNvbnRyb2xzOiBoYXNIb3Jpem9udGFsQ29udHJvbHN9e0BjbGFzcy10b29sYmFyLWdyb3VwLXZlcnRpY2FsLWNvbnRyb2xzOiBoYXNWZXJ0aWNhbENvbnRyb2xzfSI+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHdpZGdldDogYmFzZW1hcHNMaXN0fXtAd2lkZ2V0LWNvbnRleHQ6IEBjb250ZXh0fXtAd2lkZ2V0LXJlcGxhY2U6IHRydWV9Ij48L2Rpdj4gPC9kaXY+IDwvZGl2PiAgPGJ1dHRvbiBjbGFzcz0iZmx5b3V0LW1lbnUtc2Nyb2xsIHNjcm9sbC1mb3J3YXJkIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlU2Nyb2xsRm9yd2FyZH17QGVuYWJsZWQ6IGZvcndhcmRBcnJvd0VuYWJsZWR9e0B2aXNpYmxlOmZvcndhcmRBcnJvd1Zpc2libGV9e0B2YXI6IGZvcndhcmRBcnJvd0VsZW1lbnR9Ij4gPGltZyBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvY2hldnJvbi1yaWdodC0xNi5wbmciIGRhdGEtYmluZGluZz0ie2FsdDogQGxhbmd1YWdlLWNvbXBhY3QtdG9vbGJhci1tb3JlLXRvb2xzfSIgLz4gPC9idXR0b24+IDxidXR0b24gY2xhc3M9ImZseW91dC1tZW51LXNjcm9sbCBzY3JvbGwtYm90dG9tIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlU2Nyb2xsQm90dG9tfXtAZW5hYmxlZDogYm90dG9tQXJyb3dFbmFibGVkfXtAdmlzaWJsZTogYm90dG9tQXJyb3dWaXNpYmxlfXtAdmFyOiBib3R0b21BcnJvd0VsZW1lbnR9Ij4gPGltZyBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvY2hldnJvbi1kb3duLTI0LnBuZyIgZGF0YS1iaW5kaW5nPSJ7YWx0OiBAbGFuZ3VhZ2UtY29tcGFjdC10b29sYmFyLW1vcmUtdG9vbHN9IiAvPiA8L2J1dHRvbj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Basemap/BasemapView.html","html","PGRpdiBjbGFzcz0icmVnaW9uIGJhc2VtYXAtcmVnaW9uIiBkYXRhLXJlZ2lvbi1uYW1lPSJCYXNlbWFwUmVnaW9uIiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLkRpdlN0YWNrUmVnaW9uQWRhcHRlciIgZGF0YS1yZWdpb24tb3B0aW9ucz0iYWN0aXZhdGVWaWV3c0luTGFzdFBvc2l0aW9uPWZhbHNlIj48L2Rpdj4g");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Basemap/SmallBasemapSwitcherButtonView.html","html","PGRpdiBjbGFzcz0iYmFzZW1hcC1zd2l0Y2hlci13cmFwcGVyIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc2hvd0Jhc2VtYXBzQ29udHJvbH17QGNsYXNzLXN3aXRjaGVyLWFjdGl2ZTogZXhwYW5kZWR9e0Bub2NsYXNzLXN3aXRjaGVyLWluYWN0aXZlOiBleHBhbmRlZH0iPiA8ZGl2IGNsYXNzPSJiYXNlbWFwLWJ1dHRvbiBzbWFsbCIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZURyYXdlckJ1dHRvbkNsaWNrZWR9Ij4gPGltZyBjbGFzcz0iYmFzZW1hcC1pY29uIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc2VsZWN0ZWRCYXNlbWFwSWNvblVyaX17c3JjOiBzZWxlY3RlZEJhc2VtYXBJY29uVXJpfXthbHQ6IGRpc3BsYXlOYW1lfSIgLz4gPHNwYW4gY2xhc3M9ImRpc3BsYXktbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGhlYWRlckxhYmVsfXt0aXRsZTogaGVhZGVyTGFiZWx9Ij48L3NwYW4+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Bookmarks/AddBookmarkView.html","html","PGRpdiBjbGFzcz0iZm9ybS1tb2RhbCBia21rLWFkZC1kaWFsb2ciPiA8Zm9ybSBhY3Rpb249ImphdmFzY3JpcHQ6dm9pZCgwKTsiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbnN1Ym1pdDogaGFuZGxlU3VibWl0fSI+IDxsYWJlbCBmb3I9IkJvb2ttYXJrTmFtZSIgZGF0YS1iaW5kaW5nPSIge0B0ZXh0OiBAbGFuZ3VhZ2UtYm9va21hcmtzLWVudGVyLW5hbWV9Ij48L2xhYmVsPiA8aW5wdXQgaWQ9IkJvb2ttYXJrTmFtZSIgY2xhc3M9ImJrbWstaW5wdXQiIHR5cGU9InRleHQiIGRhdGEtYmluZGluZz0ie0B2YWx1ZTogbmV3Qm9va21hcmtOYW1lfXtAZXZlbnQtY2xpY2s6IGhhbmRsZVRleHRCb3hDbGlja30iIC8+IDxzcGFuIGNsYXNzPSJmb3JtLXZhbGlkYXRpb24iIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiB0ZXh0RXJyb3JNZXNzYWdlfSI+IDxzcGFuIGNsYXNzPSJmaWVsZC12YWxpZGF0aW9uLWVycm9yIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogdGV4dEVycm9yTWVzc2FnZX0iPjwvc3Bhbj4gPC9zcGFuPiA8ZGl2IGNsYXNzPSJmb3JtLWJ0bnMiPiA8YnV0dG9uIGNsYXNzPSJidXR0b24iIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVTdWJtaXR9e0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLW9rfSI+PC9idXR0b24+IDxidXR0b24gY2xhc3M9ImJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNhbmNlbENsaWNrfXtAdGV4dDogQGxhbmd1YWdlLWNvbW1vbi1jYW5jZWx9Ij48L2J1dHRvbj4gPC9kaXY+IDwvZm9ybT4gPC9kaXY+IA0K");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Bookmarks/BookmarksButtonView.html","html","PGRpdiBjbGFzcz0iYm9va21hcmstd3JhcHBlciI+IDxkaXYgY2xhc3M9Inpvb20tY29udHJvbC1idG4iIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBzaG93Qm9va21hcmtzQnV0dG9ufXtAY2xhc3MtYmttay1hY3RpdmU6IGFjdGl2ZX0iPiA8YnV0dG9uIGNsYXNzPSJib29rbWFyayB0b2dnbGUtYnRuIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tUb2dnbGVCb29rbWFya317dGl0bGU6IEBsYW5ndWFnZS1ib29rbWFya3MtdGl0bGV9IiB0YWJpbmRleD0iMCI+PC9idXR0b24+IDwvZGl2PiA8ZGl2IGNsYXNzPSJib29rbWFyay1saXN0IiBkYXRhLXJlZ2lvbi1uYW1lPSJCb29rbWFya3NMaXN0UmVnaW9uIiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLk11bHRpRGl2UmVnaW9uQWRhcHRlciI+PC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Bookmarks/BookmarksView.html","html","PGRpdiBjbGFzcz0iYmttay1jb250YWluZXIiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBib29rbWFya3NFbmFibGVkfSI+IDxkaXYgY2xhc3M9ImJrbWstdGl0bGUiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBib29rbWFya3N9Ij4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1ib29rbWFya3MtdGl0bGV9Ij48L3NwYW4+IDwvZGl2PiA8ZGl2IGNsYXNzPSJia21rLWxpc3QiIHRhYmluZGV4PSItMSI+IDx1bCBjbGFzcz0ibGlzdC1tZW51IGhhcy1pY29uIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBib29rbWFya3N9e0BldmVudC1vbmJsdXI6IGhhbmRsZUhpZGVCb29rbWFya3N9Ij4gPGxpIGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogYm9va21hcmtzfXtAYXR0YWNoOiBAY29udGV4dH0iPiA8YnV0dG9uIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpc1VzZXJEZWZpbmVkfXtAZXZlbnQtb25jbGljazogaGFuZGxlRGVsZXRlQm9va21hcmt9e3RpdGxlOiBkZWxldGVCb29rbWFya1N0cmluZ30iIGNsYXNzPSJia21rLWRlbGV0ZSI+IDxpbWcgY2xhc3M9Imxpc3QtbWVudS1pY29uIiBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvZGVsZXRlLTE2LnBuZyIgYWx0PSIgIiAvPiA8L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz0ibGlzdC1tZW51LWRldGFpbHMiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkaXNwbGF5TmFtZX17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUJvb2ttYXJrU2VsZWN0aW9uQ2hhbmdlZH0iPjwvYnV0dG9uPiA8L2xpPiA8L3VsPiA8dWwgY2xhc3M9Imxpc3QtbWVudSBoYXMtaWNvbiBia21rLWFkZCI+IDxsaSBjbGFzcz0ibGlzdC1tZW51LWl0ZW0iPiA8YnV0dG9uIGNsYXNzPSJia21rLWFkZC1idG4iIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVBZGRCb29rbWFya317dGl0bGU6IEBsYW5ndWFnZS1ib29rbWFya3MtYWRkfSI+IDxpbWcgY2xhc3M9Imxpc3QtbWVudS1pY29uIiBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvYWRkLTE2LnBuZyIgYWx0PSIgIiAvPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LWRldGFpbHMiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtYm9va21hcmtzLWFkZH0iPjwvc3Bhbj4gPC9idXR0b24+IDwvbGk+IDwvdWw+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Buffer/BufferOptionsView.html","html","PGRpdiBjbGFzcz0iYnVmZmVyLW9wdGlvbnMiPiA8ZGl2IGNsYXNzPSJmb3JtLWl0ZW0iPiA8bGFiZWwgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1idWZmZXItb3B0aW9ucy1kaXN0YW5jZS1sYWJlbH0iPjwvbGFiZWw+IDxpbnB1dCB0eXBlPSJudW1iZXIiIHN0ZXA9ImFueSIgZGF0YS1iaW5kaW5nPSJ7QHZhbHVlOiBidWZmZXJEaXN0YW5jZX17QGV2ZW50LW9uY2hhbmdlOiB2YWxpZGF0ZUFuZEFwcGx5SW5wdXR9e3RpdGxlOiBAbGFuZ3VhZ2UtYnVmZmVyLW9wdGlvbnMtZGlzdGFuY2UtdGl0bGV9IiAvPiA8L2Rpdj4gPGRpdiBjbGFzcz0iZm9ybS12YWxpZGF0aW9uIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaW5wdXRFcnJvcn0iPiA8c3BhbiBjbGFzcz0iZmllbGQtdmFsaWRhdGlvbi1lcnJvciIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGlucHV0RXJyb3J9Ij48L3NwYW4+IDwvZGl2PiA8ZGl2IGNsYXNzPSJmb3JtLWl0ZW0iPiA8bGFiZWwgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1idWZmZXItb3B0aW9ucy11bml0cy1sYWJlbH0iPjwvbGFiZWw+IDxzZWxlY3QgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogYnVmZmVyVW5pdHN9e0B2YWx1ZTogc2VsZWN0ZWRCdWZmZXJVbml0fXtAZXZlbnQtb25jaGFuZ2U6IHZhbGlkYXRlQW5kQXBwbHlJbnB1dH17dGl0bGU6IEBsYW5ndWFnZS1idWZmZXItb3B0aW9ucy1sZW5ndGgtdW5pdC1zZWxlY3R9Ij4gPG9wdGlvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBidWZmZXJVbml0c317QHRleHQ6IGRpc3BsYXlOYW1lfXt2YWx1ZTogY29uZmlnfSIgLz4gPC9zZWxlY3Q+IDwvZGl2PiA8ZGl2IGNsYXNzPSJmb3JtLXZhbGlkYXRpb24iIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBidWZmZXJpbmdFcnJvcn0iPiA8c3BhbiBjbGFzcz0iZmllbGQtdmFsaWRhdGlvbi1lcnJvciIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGJ1ZmZlcmluZ0Vycm9yfSI+PC9zcGFuPiA8L2Rpdj4gPGRpdiBjbGFzcz0iZm9ybS1idG5zIj4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiBkYXRhLWJpbmRpbmc9Int0aXRsZTogQGxhbmd1YWdlLWJ1ZmZlci1jbGVhci1idXR0b24tdGl0bGV9e0B0ZXh0OiBAbGFuZ3VhZ2UtYnVmZmVyLWNsZWFyLWJ1dHRvbi10ZXh0fXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xlYXJCdXR0b25DbGlja30iPjwvYnV0dG9uPiA8YnV0dG9uIGNsYXNzPSJidXR0b24iIGRhdGEtYmluZGluZz0ie3RpdGxlOiBAbGFuZ3VhZ2UtYnVmZmVyLWNhbmNlbC1idXR0b24tdGl0bGV9e0B0ZXh0OiBAbGFuZ3VhZ2UtYnVmZmVyLWNhbmNlbC1idXR0b24tdGV4dH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNhbmNlbEJ1dHRvbkNsaWNrfSI+PC9idXR0b24+IDxidXR0b24gY2xhc3M9ImJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7dGl0bGU6IEBsYW5ndWFnZS1idWZmZXItb3B0aW9ucy1jb250aW51ZS1idXR0b24tdGl0bGV9e0B0ZXh0OiBAbGFuZ3VhZ2UtYnVmZmVyLW9wdGlvbnMtY29udGludWUtYnV0dG9uLXRleHR9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDb250aW51ZUJ1dHRvbkNsaWNrfSI+PC9idXR0b24+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/ClusterLayers/ClusterLayerView.html","html","PGRpdiBjbGFzcz0iY2x1c3RlcnMiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHNlbGVjdGVkQ2x1c3RlckxheWVyfSI+IDxkaXYgY2xhc3M9ImZvcm0tc3RhY2tlZCIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogc2VsZWN0ZWRDbHVzdGVyTGF5ZXJ9Ij4gPGg0IGNsYXNzPSJ2aXN1YWxpemF0aW9uLXRpdGxlIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWNsdXN0ZXJpbmctdGl0bGV9Ij48L2g0PiA8ZGl2IGNsYXNzPSJmb3JtLWl0ZW0iPiA8bGFiZWwgY2xhc3M9ImZvcm0tbGFiZWwiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtY2x1c3RlcmluZy1yYWRpdXN9Ij48L2xhYmVsPiA8ZGl2IGNsYXNzPSJmb3JtLWNvbnRyb2wiPiA8aW5wdXQgdHlwZT0ibnVtYmVyIiBkYXRhLWJpbmRpbmc9IntAdmFsdWU6IGNsdXN0ZXJSYWRpdXN9e3RpdGxlOiBAbGFuZ3VhZ2UtY2x1c3RlcmluZy1yYWRpdXN9IiAvPiA8L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9ImZvcm0taXRlbSI+IDxsYWJlbCBjbGFzcz0iZm9ybS1sYWJlbCIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1jbHVzdGVyaW5nLW1heGltdW0tZmVhdHVyZXN9Ij48L2xhYmVsPiA8ZGl2IGNsYXNzPSJmb3JtLWNvbnRyb2wiPiA8aW5wdXQgdHlwZT0ibnVtYmVyIiBtaW49IjAiIGRhdGEtYmluZGluZz0ie0B2YWx1ZTogbWF4RmVhdHVyZXNJbkNsdXN0ZXJ9e3RpdGxlOiBAbGFuZ3VhZ2UtY2x1c3RlcmluZy1tYXhpbXVtLWZlYXR1cmVzfSIgLz4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Confirm/ConfirmView.html","html","DQo8ZGl2IGNsYXNzPSJtb2R1bGUgbm90aWZpY2F0aW9uIGNvbmZpcm0iPiA8cCBjbGFzcz0iZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGNvbmZpcm1Cb2R5fSI+PC9wPiA8ZGl2IGNsYXNzPSJmb3JtLWJ0bnMiPiA8YnV0dG9uIGNsYXNzPSJidXR0b24iIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja09rfXtAdGV4dDogQGxhbmd1YWdlLWNvbW1vbi1va30iIC8+IDxidXR0b24gY2xhc3M9ImJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogY2FuY2VsQnV0dG9uRWxlbWVudH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrQ2FuY2VsfXtAdGV4dDogQGxhbmd1YWdlLWNvbW1vbi1jYW5jZWx9IiAvPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Coordinates/CoordinatesView.html","html","PGRpdiBjbGFzcz0iY29vcmRzIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaXNFbmFibGVkfSI+IDxidXR0b24gY2xhc3M9ImNvb3Jkcy10b2dnbGUiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiB0b2dnbGVDb29yZGluYXRlc0FjdGl2ZX17QGNsYXNzLWNvb3Jkcy10b2dnbGUtYWN0aXZlOiBpc0FjdGl2ZX17QGNsYXNzLWNvb3Jkcy10b2dnbGUtbGVmdDogaXNMZWZ0fXtAY2xhc3MtY29vcmRzLXRvZ2dsZS1yaWdodDogaXNSaWdodH17dGl0bGU6IEBsYW5ndWFnZS1mZWF0dXJlLWNvb3JkaW5hdGVzLXRvZ2dsZS1idXR0b259IiB0YWJpbmRleD0iMCI+VG9nZ2xlPC9idXR0b24+IDxkaXYgY2xhc3M9ImNvb3Jkcy1pbmZvIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaXNBY3RpdmV9e0BjbGFzcy1jb29yZHMtaW5mby1mbG9hdC1sZWZ0OiBpc0xlZnR9e0BjbGFzcy1jb29yZHMtaW5mby1mbG9hdC1yaWdodDogaXNSaWdodH0iPiA8YnV0dG9uIGNsYXNzPSJjb29yZHMtc2VsZWN0LWJ0biIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IHRvZ2dsZVNlbGVjdENvbnRhaW5lcn17dGl0bGU6QGxhbmd1YWdlLWZlYXR1cmUtY29vcmRpbmF0ZXMtY2hhbmdlLXN5c3RlbX0iIHRhYmluZGV4PSIwIj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogY3VycmVudENvb3JkaW5hdGVTeXN0ZW19Ij4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogY3VycmVudENvb3JkaW5hdGVTeXN0ZW19e0B0ZXh0OiBkaXNwbGF5TmFtZX0iPjwvc3Bhbj4gPC9zcGFuPiA8c3BhbiBjbGFzcz0iY29vcmQtc2VsZWN0LWFycm93IiBkYXRhLWJpbmRpbmc9IntAdGV4dDogY29vcmRpbmF0ZVNlbGVjdEFycm93fSI+PC9zcGFuPiA8L2J1dHRvbj4gPHVsIGNsYXNzPSJjb29yZHMtc2VsZWN0IiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBjb29yZGluYXRlU3lzdGVtc317QHZpc2libGU6IGNvb3JkaW5hdGVTZWxlY3RFbmFibGVkfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge0BjbGFzcy1jb29yZHMtc2VsZWN0LXRvcDogaXNUb3B9Ij4gPGxpIGNsYXNzPSJjb29yZHMtc2VsZWN0LWl0ZW0iIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGNvb3JkaW5hdGVTeXN0ZW1zfSI+IDxidXR0b24gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGRpc3BsYXlOYW1lfXtAZXZlbnQtb25jbGljazogY2hhbmdlQ29vcmRpbmF0ZVN5c3RlbX0iPjwvYnV0dG9uPiA8L2xpPiA8L3VsPiA8ZGl2IGNsYXNzPSJjb29yZHMtZGlzcGxheSI+IDxkaXYgY2xhc3M9ImNvb3Jkcy1pdGVtIGNvb3Jkcy14Ij4gPHNwYW4gY2xhc3M9ImNvb3Jkcy1sYWJlbCIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHhWYWx1ZVR5cGV9Ij48L3NwYW4+IDxzcGFuIGNsYXNzPSJjb29yZHMtdmFsdWVzIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogeFZhbHVlfSI+PC9zcGFuPiA8L2Rpdj4gPGRpdiBjbGFzcz0iY29vcmRzLWl0ZW0gY29vcmRzLXkiPiA8c3BhbiBjbGFzcz0iY29vcmRzLWxhYmVsIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogeVZhbHVlVHlwZX0iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9ImNvb3Jkcy12YWx1ZXMiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiB5VmFsdWV9Ij48L3NwYW4+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Editing/CreateOrEdit/CreateOrEditView.html","html","PGRpdiBjbGFzcz0idmlldy1mZWF0dXJlLWNyZWF0ZS1vci1lZGl0IGNvbnRlbnQtY29udGFpbmVyIj4gPHAgY2xhc3M9ImRlc2NyaXB0aW9uLXRleHQiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWNyZWF0ZS1lZGl0LW5vLWZlYXR1cmVzLWZvdW5kfSI+PC9wPiA8dWwgY2xhc3M9ImFjdGlvbi1idG5zIj4gPGxpPiA8YnV0dG9uIGNsYXNzPSJidXR0b24gYnV0dG9uLWFjdGlvbi1pY29uIGNyZWF0ZS1uZXctZmVhdHVyZSIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrQ3JlYXRlTmV3RmVhdHVyZX0iPjxpbWcgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL1Rvb2xiYXIvZmVhdHVyZS1jcmVhdGUtMjQucG5nIiBkYXRhLWJpbmRpbmc9InthbHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctY3JlYXRlLWVkaXQtbmV3LWZlYXR1cmV9e3RpdGxlOiBAbGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWNyZWF0ZS1lZGl0LW5ldy1mZWF0dXJlfSI+PHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctY3JlYXRlLWVkaXQtbmV3LWZlYXR1cmV9Ij48L3NwYW4+PC9idXR0b24+IDwvbGk+IDxsaT4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIGJ1dHRvbi1hY3Rpb24taWNvbiBleGlzdGluZy1mZWF0dXJlIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tTZWxlY3RFeGlzdGluZ0ZlYXR1cmV9Ij48aW1nIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9Ub29sYmFyL2ZlYXR1cmUtbG9jYXRpb24tMjQucG5nIiBkYXRhLWJpbmRpbmc9InthbHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctY3JlYXRlLWVkaXQtc2VsZWN0LWV4aXN0aW5nLWZlYXR1cmV9e3RpdGxlOiBAbGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWNyZWF0ZS1lZGl0LXNlbGVjdC1leGlzdGluZy1mZWF0dXJlfSI+PHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctY3JlYXRlLWVkaXQtc2VsZWN0LWV4aXN0aW5nLWZlYXR1cmV9Ij48L3NwYW4+PC9idXR0b24+IDwvbGk+IDwvdWw+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Editing/Editor/EditorView.html","html","PGRpdiBjbGFzcz0iZWRpdG9yIj4gIDxkaXYgY2xhc3M9ImxvYWRpbmctY29udGFpbmVyIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaXNCdXN5fSI+IDxkaXYgY2xhc3M9ImxvYWRpbmctaW1nIj48L2Rpdj4gPGRpdiBjbGFzcz0ibG9hZGluZy1tc2ciIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWFwcGx5aW5nfSI+PC9kaXY+IDwvZGl2PiAgPGRpdiBjbGFzcz0iYWRkLW9yLWVkaXQtZmVhdHVyZSIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogaXNCdXN5fSI+IDxkaXYgY2xhc3M9InBhbmVsLWNvbnRlbnQiPiAgPGRpdiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBmb3JtfSI+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogZm9ybX0iPiAgPGRpdiBjbGFzcz0icGFuZWwtbm90aWZpY2F0aW9uIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBmaWVsZHN9Ij4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctaW52YWxpZC1sYXllcn0iPjwvc3Bhbj4gPC9kaXY+IDxkaXYgY2xhc3M9InBhbmVsLWdyb3VwIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogZmllbGRzfSI+IDxoMyBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1mZWF0dXJlLWF0dHJpYnV0ZXN9Ij48L2gzPiA8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cC1jb250ZW50cyI+IDxkaXYgY2xhc3M9ImZvcm0gbGFiZWwtc3RhY2tlZCI+IDxkaXYgY2xhc3M9ImZvcm0tY29udGFpbmVyIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBmaWVsZHN9e0B0ZW1wbGF0ZS1zZWxlY3RvcjogcmVuZGVyVHlwZX0iPiAgPGRpdiBjbGFzcz0iZm9ybS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBlc3JpRmllbGRUeXBlRGF0ZX17QHZpc2libGU6IGVkaXRhYmxlfSI+IDxsYWJlbCBjbGFzcz0iZm9ybS1sYWJlbCI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkaXNwbGF5TmFtZX0iPjwvc3Bhbj4gPC9sYWJlbD4gPGRpdiBjbGFzcz0iZm9ybS1jb250cm9sLWRhdGUtcGlja2VyIiBkYXRhLWJpbmRpbmc9IntAd2lkZ2V0OiBEYXRlUGlja2VyRm9ybUl0ZW19e0B3aWRnZXQtY29udGV4dDogZGF0ZVBpY2tlclZpZXdNb2RlbH0iPiA8L2Rpdj4gPC9kaXY+ICA8ZGl2IGNsYXNzPSJmb3JtLWl0ZW0iIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IGNvZGVkRG9tYWluVmFsdWV9e0B2aXNpYmxlOiBlZGl0YWJsZX0iPiA8ZGl2IGNsYXNzPSJjb21ib2JveCI+IDxsYWJlbCBjbGFzcz0iZm9ybS1sYWJlbCI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkaXNwbGF5TmFtZX0iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9ImluZGljYXRvciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHNob3dJbmRpY2F0b3J9Ij4qPC9zcGFuPiA8L2xhYmVsPiA8ZGl2IGNsYXNzPSJmb3JtLWNvbnRyb2wiPiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHZhbHVlT3B0aW9uc317QHZhbHVlOiB2YWx1ZX17QGRpc2FibGVkOiByZWFkT25seX0iPiA8b3B0aW9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IHZhbHVlT3B0aW9uc317QHRleHQ6IG5hbWV9e3ZhbHVlOiBjb2RlfSI+PC9vcHRpb24+IDwvc2VsZWN0PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiAgPGRpdiBjbGFzcz0iZm9ybS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiB0eXBlRmllbGR9e0B2aXNpYmxlOiBlZGl0YWJsZX0iPiA8ZGl2IGNsYXNzPSJjb21ib2JveCI+IDxsYWJlbCBjbGFzcz0iZm9ybS1sYWJlbCI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkaXNwbGF5TmFtZX0iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9ImluZGljYXRvciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHNob3dJbmRpY2F0b3J9Ij4qPC9zcGFuPiA8L2xhYmVsPiA8ZGl2IGNsYXNzPSJmb3JtLWNvbnRyb2wiPiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHZhbHVlT3B0aW9uc317QHZhbHVlOiB2YWx1ZX17QGV2ZW50LW9uY2hhbmdlOiBoYW5kbGVUeXBlRmllbGRDaGFuZ2V9e0BkaXNhYmxlZDogcmVhZE9ubHl9Ij4gPG9wdGlvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiB2YWx1ZU9wdGlvbnN9e0B0ZXh0OiBuYW1lfXt2YWx1ZTogY29kZX0iPjwvb3B0aW9uPiA8L3NlbGVjdD4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gIDxkaXYgY2xhc3M9ImZvcm0taXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogdGV4dEFyZWF9e0B2aXNpYmxlOiBlZGl0YWJsZX0iPiA8ZGl2IGNsYXNzPSJ0ZXh0Ym94Ij4gPGxhYmVsIGNsYXNzPSJmb3JtLWxhYmVsIj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGRpc3BsYXlOYW1lfSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0iaW5kaWNhdG9yIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc2hvd0luZGljYXRvcn0iPio8L3NwYW4+IDwvbGFiZWw+IDxkaXYgY2xhc3M9ImZvcm0tY29udHJvbCI+IDx0ZXh0YXJlYSB0eXBlPSJ0ZXh0IiBkYXRhLWJpbmRpbmc9IntAdmFsdWU6IHZhbHVlfXtAZGlzYWJsZWQ6IHJlYWRPbmx5fSI+PC90ZXh0YXJlYT4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gIDxkaXYgY2xhc3M9ImZvcm0taXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogZmllbGRzfXtAdmlzaWJsZTogZWRpdGFibGV9Ij4gPGRpdiBjbGFzcz0idGV4dGJveCI+IDxsYWJlbCBjbGFzcz0iZm9ybS1sYWJlbCI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkaXNwbGF5TmFtZX0iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9ImluZGljYXRvciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHNob3dJbmRpY2F0b3J9Ij4qPC9zcGFuPiA8L2xhYmVsPiA8ZGl2IGNsYXNzPSJmb3JtLWNvbnRyb2wiPiA8aW5wdXQgdHlwZT0idGV4dCIgZGF0YS1iaW5kaW5nPSJ7QHZhbHVlOiB2YWx1ZX17QGRpc2FibGVkOiByZWFkT25seX0iIC8+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiAgPHVsIGNsYXNzPSJmb3JtLXZhbGlkYXRpb24iIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHZhbGlkYXRpb25NZXNzYWdlc317QHZpc2libGU6IHZhbGlkYXRpb25NZXNzYWdlc30iPiA8bGkgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogdmFsaWRhdGlvbk1lc3NhZ2VzfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAY29udGV4dH0iPjwvc3Bhbj4gPC9saT4gPC91bD4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiAgPGRpdiBjbGFzcz0icGFuZWwtZ3JvdXAtY29udGVudHMgZm9ybS1idG5zIj4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tFZGl0R2VvbWV0cnl9e0B2aXNpYmxlOiBzaG93RWRpdEdlb21ldHJ5QnV0dG9ufXtAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1lZGl0LWdlb21ldHJ5LWNhcHRpb259Ij48L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tFZGl0R2VvbWV0cnl9e0B2aXNpYmxlOiBzaG93U3RvcEVkaXRpbmdHZW9tZXRyeUJ1dHRvbn17QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctc3RvcC1lZGl0aW5nLWdlb21ldHJ5LWNhcHRpb259Ij48L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tEZWxldGVGZWF0dXJlfXtAdmlzaWJsZTogY2FuRGVsZXRlRmVhdHVyZX17QHRleHQ6IEBsYW5ndWFnZS1jb21tb24tZGVsZXRlfSI+PC9idXR0b24+IDxidXR0b24gY2xhc3M9ImJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrU2F2ZX17QHRleHQ6IEBsYW5ndWFnZS1jb21tb24tc2F2ZX0iPjwvYnV0dG9uPiA8YnV0dG9uIGNsYXNzPSJidXR0b24iIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0NhbmNlbH17QHRleHQ6IEBsYW5ndWFnZS1jb21tb24tY2FuY2VsfSI+PC9idXR0b24+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Editing/TemplatePicker/FeatureTemplate.html","html","DQo8ZGl2IGNsYXNzPSJmZWF0dXJlLXRlbXBsYXRlIGhhcy1pY29uIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlRmVhdHVyZVRlbXBsYXRlQ2xpY2t9Ij4gPGltZyBjbGFzcz0ibGlzdC1tZW51LWljb24iIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBzeW1ib2xVcml9e3NyYzogc3ltYm9sVXJpfSIgYWx0PSIgIi8+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1pY29uIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBzeW1ib2xVcml9e2lubmVySFRNTDogc3dhdGNoRWxlbWVudH0iPjwvZGl2PiA8YnV0dG9uIGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG5hbWV9Ij48L3NwYW4+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGRlc2NyaXB0aW9ufXtAdmlzaWJsZTogZGVzY3JpcHRpb259Ij48L3NwYW4+IDwvYnV0dG9uPiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Editing/TemplatePicker/TemplatePickerView.html","html","PGRpdiBjbGFzcz0iZmVhdHVyZS10ZW1wbGF0ZS1waWNrZXIiPiAgPGRpdiBjbGFzcz0icGFuZWwtZ3JvdXAgbm8taXRlbSIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogbGF5ZXJUZW1wbGF0ZXN9e0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLW5vLXRlbXBsYXRlc30iPjwvZGl2PiA8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogbGF5ZXJUZW1wbGF0ZXN9Ij4gPGRpdiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBsYXllclRlbXBsYXRlc317QHZpc2libGU6IGxheWVySXNFZGl0YWJsZX0iPiA8aDMgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGRpc3BsYXlOYW1lfSI+PC9oMz4gPGRpdiBjbGFzcz0ibm8tcmVzdWx0cyIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogdGVtcGxhdGVzfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLW5vLXRlbXBsYXRlc30iPjwvc3Bhbj4gPGRpdiBjbGFzcz0iZm9ybS1idXR0b24tY29udGFpbmVyIj4gPGRpdiBjbGFzcz0iZm9ybS1idXR0b24tYWxpZ24iPiA8ZGl2IGNsYXNzPSJmb3JtLWl0ZW0gZm9ybS1idG5zIj4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1hZGQtZmVhdHVyZS1idXR0b259e0BldmVudC1vbmNsaWNrOiBoYW5kbGVGZWF0dXJlVGVtcGxhdGVDbGlja30iPjwvYnV0dG9uPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPHVsIGNsYXNzPSJsaXN0LW1lbnUiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiB0ZW1wbGF0ZXN9e0Bzb3VyY2U6IHRlbXBsYXRlc317QHRlbXBsYXRlLXNlbGVjdG9yOiBmb299Ij4gPGxpIGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogQG51bGx9e0B0ZW1wbGF0ZTogTWFwcGluZy9tb2R1bGVzL0VkaXRpbmcvVGVtcGxhdGVQaWNrZXIvRmVhdHVyZVRlbXBsYXRlLmh0bWx9Ij48L2xpPiA8L3VsPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/ExportMap/ExportMapView.html","html","PGRpdiBjbGFzcz0iZXhwb3J0bWFwIj4gPGRpdiBjbGFzcz0iZXhwb3J0LWNyZWF0ZSIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogZXhwb3J0Q29tcGxldGV9Ij4gPGRpdiBjbGFzcz0iZXhwb3J0LXN0YXR1cyIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGlzRXhwb3J0aW5nfSI+IDxwIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZXhwb3J0LW1hcC1pcy1leHBvcnRpbmd9Ij48L3A+IDwvZGl2PiA8ZGl2IGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGlzRXhwb3J0aW5nfSI+IDxsYWJlbCBmb3I9Im91dHB1dGZvcm1hdCIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1leHBvcnQtbWFwLXNlbGVjdC1pbWFnZS1mb3JtYXR9e0B2aXNpYmxlOiBvdXRwdXRGb3JtYXRzfSI+PC9sYWJlbD4gPHNlbGVjdCBpZD0ib3V0cHV0Zm9ybWF0IiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBvdXRwdXRGb3JtYXRzfXtAdmFsdWU6IHNlbGVjdGVkRm9ybWF0fXtAdmlzaWJsZTogb3V0cHV0Rm9ybWF0c30iPiA8b3B0aW9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IG91dHB1dEZvcm1hdHN9e0B0ZXh0OiBAY29udGV4dH17QGF0dGFjaDogQGNvbnRleHR9Ij48L29wdGlvbj4gPC9zZWxlY3Q+IDxpbnB1dCBpZD0iZ2VvcmVmZXJlbmNlIiB0eXBlPSJjaGVja2JveCIgZGF0YS1iaW5kaW5nPSJ7QHZhbHVlOiBpbmNsdWRlR2VvcmVmZXJlbmNlRGF0YX17QGVuYWJsZWQ6IGZvcm1hdFN1cHBvcnRzSW5jbHVkZUdlb3JlZmVyZW5jZURhdGF9e0B2aXNpYmxlOiBhbGxvd0luY2x1ZGVHZW9yZWZlcmVuY2VEYXRhfSIgLz4gPGxhYmVsIGZvcj0iZ2VvcmVmZXJlbmNlIiBjbGFzcz0iaW5saW5lIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWV4cG9ydC1tYXAtaW5jbHVkZS1nZW9yZWZlcmVuY2UtZGF0YX17QHZpc2libGU6IGFsbG93SW5jbHVkZUdlb3JlZmVyZW5jZURhdGF9Ij48L2xhYmVsPiA8ZGl2IGNsYXNzPSJmb3JtLWJ0bnMiPiA8YnV0dG9uIGNsYXNzPSJleHBvcnQtYnV0dG9uIGJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LWNsaWNrOiBoYW5kbGVFeHBvcnRNYXBDbGlja317QHRleHQ6IEBsYW5ndWFnZS1leHBvcnQtbWFwLWNyZWF0ZS1pbWFnZX0iPjwvYnV0dG9uPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJleHBvcnQtY29tcGxldGUiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBleHBvcnRDb21wbGV0ZX0iPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWV4cG9ydC1tYXAtY29tcGxldGUtZGVzY3JpcHRpb259Ij48L3A+IDxkaXYgY2xhc3M9ImZvcm0tYnRucyI+IDxidXR0b24gY2xhc3M9ImV4cG9ydC1idXR0b24gYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtY2xpY2s6IGhhbmRsZVZpZXdJbWFnZUNsaWNrfXtAdGV4dDogQGxhbmd1YWdlLWV4cG9ydC1tYXAtdmlldy1pbWFnZX0iPjwvYnV0dG9uPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsSwitcherView.html","html","PGRpdiBjbGFzcz0idGFiLWNvbnRhaW5lciI+IDx1bCBjbGFzcz0idGFiLWNvbnRyb2wiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHZpZXdEZXNjcmlwdG9yc30iPiA8bGkgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogdmlld0Rlc2NyaXB0b3JzfXtAdmlzaWJsZTogcHJvdmlkZXJFbmFibGVkfXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tUYWJ9Ij4gPGJ1dHRvbiBkYXRhLWJpbmRpbmc9IntAbm9jbGFzcy10YWI6IGlzQWN0aXZlfXtAY2xhc3MtdGFiLWFjdGl2ZTogaXNBY3RpdmV9e0B0ZXh0OiB0aXRsZX17dGl0bGU6IHRpdGxlfSI+PC9idXR0b24+IDwvbGk+IDwvdWw+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsView.html","html","PGRpdiBjbGFzcz0iZmVhdHVyZS1kZXRhaWxzLWhlYWRlciI+IDxkaXYgY2xhc3M9ImZlYXR1cmUtYWN0aW9ucy13aWRnZXQiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBjdXJyZW50RmVhdHVyZX17QHdpZGdldDogRmVhdHVyZUFjdGlvbnNXaWRnZXR9e0B3aWRnZXQtY29udGV4dDogY3VycmVudEZlYXR1cmV9e0B3aWRnZXQtcmVxdWlyZWQ6IGZhbHNlfSIgZGF0YS1tZW51LWlkPSJGZWF0dXJlQWN0aW9ucyIgZGF0YS1tZW51LXRlbXBsYXRlPSJNYXBwaW5nL2luZnJhc3RydWN0dXJlL21lbnVzL01lbnVIeXBlcmxpbmtWaWV3Lmh0bWwiPjwvZGl2PiA8L2Rpdj4gPGRpdiBkYXRhLWJpbmRpbmc9IntAd2lkZ2V0OiBGZWF0dXJlRGV0YWlsc1JlZ2lvbldpZGdldH17QHdpZGdldC1jb250ZXh0OiBAY29udGV4dH17QHdpZGdldC1yZXF1aXJlZDogdHJ1ZX17QHdpZGdldC1yZXBsYWNlOiB0cnVlfSIgdGFiaW5kZXg9IjAiPjwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/LargeFeatureDetailsView.html","html","PGRpdiBjbGFzcz0ibGFyZ2UtZmVhdHVyZS1kZXRhaWwiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBoZWFkZXJUZXh0fSI+IDxoMiBkYXRhLWJpbmRpbmc9IntAdGV4dDogaGVhZGVyVGV4dH0iPjwvaDI+IDxkaXYgY2xhc3M9InBhbmVsLWdyb3VwIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogRmVhdHVyZUFjdGlvbnN9Ij4gPHVsIGNsYXNzPSJhY3Rpb25zLW1lbnUiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IEZlYXR1cmVBY3Rpb25zfSI+IDxsaSBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBGZWF0dXJlQWN0aW9uc30iPiA8YSBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7IiBkYXRhLWJpbmRpbmc9IntAdGV4dDogdGV4dH17QGV2ZW50LW9ubW91c2VvdmVyOiBnZXREZXNjcmlwdGlvbn17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZU1lbnVJdGVtQ2xpY2t9Ij48L2E+IDwvbGk+IDwvdWw+IDwvZGl2PiA8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCIgZGF0YS1yZWdpb24tbmFtZT0iRmVhdHVyZVJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5EaXZTdGFja1JlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsProviders/AttachmentsView.html","html","DQo8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHByb3ZpZGVyRW5hYmxlZH0iPiA8aDMgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWF0dGFjaG1lbnRzfSI+PC9oMz4gPGRpdiBjbGFzcz0ibm8taXRlbSIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogaXNBdHRhY2htZW50SW5mb3NJbml0aWFsaXplZH17QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWF0dGFjaG1lbnRzLWNoZWNraW5nfSI+PC9kaXY+IDxkaXYgY2xhc3M9Im5vLWl0ZW0iIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBub0F0dGFjaG1lbnRzfXtAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtYXR0YWNobWVudHMtbm8tYXR0YWNobWVudHN9Ij48L2Rpdj4gPGRpdiBjbGFzcz0ibm8taXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGlzT2ZmbGluZX17QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWF0dGFjaG1lbnRzLW5vLWF0dGFjaG1lbnRzLW9mZmxpbmV9Ij48L2Rpdj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51IGFjdGl2ZSBoYXMtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogYXR0YWNobWVudEluZm9zfSI+IDxhIGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogYXR0YWNobWVudEluZm9zfXtocmVmOiB1cmx9IiB0YXJnZXQ9Il9ibGFuayI+IDxpbWcgY2xhc3M9Imxpc3QtbWVudS1pY29uIiBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvVG9vbGJhci9hdHRhY2gtMjQucG5nIiBkYXRhLWJpbmRpbmc9InthbHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWF0dGFjaG1lbnRzfSIgLz4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXRhaWxzIj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1uYW1lIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogbmFtZX0iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXNjIj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHNpemV9Ij48L3NwYW4+IDwvc3Bhbj4gPC9zcGFuPiA8L2E+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsProviders/AttributesView.html","html","DQo8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHByb3ZpZGVyRW5hYmxlZH0iPiA8aDMgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWF0dHJpYnV0ZXN9IiB0YWItaW5kZXg9IjEiPjwvaDM+IDxkaXYgY2xhc3M9Imxpc3QtbWVudSBhdHRyaWIgc3RhdGljIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBhdHRyaWJ1dGVzfSI+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBhdHRyaWJ1dGVzfXtAdmlzaWJsZTogdmlzaWJsZX0iPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkaXNwbGF5TmFtZX0iPjwvc3Bhbj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWRlc2MiPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBkaXNwbGF5QXNVcmx9e0B0ZXh0OiBwcmVzZW50YWJsZVZhbHVlfSI+PC9zcGFuPiA8YSBkYXRhLWJpbmRpbmc9IntocmVmOiB2YWx1ZX17QHZpc2libGU6IGRpc3BsYXlBc1VybH17QHRleHQ6IHByZXNlbnRhYmxlVmFsdWV9IiB0YXJnZXQ9Il9ibGFuayI+PC9hPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBwcmVzZW50YWJsZVZhbHVlfXtAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtbm90LWF2YWlsYWJsZX0iPjwvc3Bhbj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsProviders/DataLinksTableView.html","html","PGRpdiBjbGFzcz0icGFuZWwtZ3JvdXAiPiA8aDMgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGRpc3BsYXlOYW1lfSI+PC9oMz4gIDxkaXYgY2xhc3M9ImRhdGFsaW5rcy10YWJsZS13aWRnZXQiIGRhdGEtYmluZGluZz0ie0B3aWRnZXQ6IERhdGFMaW5rc1RhYmxlVmlld1dpZGdldH17QHdpZGdldC1jb250ZXh0OiBAY29udGV4dH17QHdpZGdldC1yZXF1aXJlZDogZmFsc2V9Ij48L2Rpdj4gIDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsProviders/DataLinksView.html","html","PGRpdiBjbGFzcz0icGFuZWwtZ3JvdXAiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBwcm92aWRlckVuYWJsZWR9Ij4gPGgzIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkaXNwbGF5TmFtZX0iPjwvaDM+IDxkaXYgY2xhc3M9Imxpc3QtbWVudSBhY3RpdmUiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGRhdGFMaW5rc30iPiA8YnV0dG9uIGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogZGF0YUxpbmtzfXtAZXZlbnQtY2xpY2s6IGhhbmRsZVZpZXdDbGlja30iPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyI+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1uYW1lIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogZGlzcGxheU5hbWV9Ij48L2Rpdj4gPC9kaXY+IDwvYnV0dG9uPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsProviders/DataLinkView.html","html","DQo8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCBkYXRhLWxpbmsiPiA8aDMgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWF0dHJpYnV0ZXN9Ij48L2gzPiA8ZGl2IGNsYXNzPSJkYXRhbGlua3MiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBjdXJyZW50RGF0YUxpbmt9e0Bzb3VyY2U6IGN1cnJlbnREYXRhTGlua30iPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUgYXR0cmliIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBjdXJyZW50RGF0YUxpbmt9e0Bzb3VyY2U6IGF0dHJpYnV0ZXN9Ij4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0iIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGF0dHJpYnV0ZXN9IiB0YWJpbmRleD0iMCI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG5hbWV9Ij48L3NwYW4+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHZhbHVlfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGRpc3BsYXlBc1VybH17QHRleHQ6IHZhbHVlfSI+PC9zcGFuPiA8YSBkYXRhLWJpbmRpbmc9IntocmVmOiB2YWx1ZX17QHZpc2libGU6IGRpc3BsYXlBc1VybH17QHRleHQ6IHZhbHVlfSIgdGFyZ2V0PSJfYmxhbmsiPjwvYT4gPC9zcGFuPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LWRlc2MiIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IHZhbHVlfXtAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtbm90LWF2YWlsYWJsZX0iPjwvc3Bhbj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsProviders/DescriptionView.html","html","PGRpdiBjbGFzcz0icGFuZWwtZ3JvdXAgZmVhdHVyZS1kZXNjcmlwdGlvbi1wcm92aWRlciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHByb3ZpZGVyRW5hYmxlZH0iPiA8aDMgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWRlc2NyaXB0aW9ufSIgdGFiLWluZGV4PSIxIj48L2gzPiA8ZGl2IGNsYXNzPSJmZWF0dXJlLWRldGFpbHMtY29udGVudCIgZGF0YS1iaW5kaW5nPSJ7QHdpZGdldDogR2V0RGVzY3JpcHRpb259e0B3aWRnZXQtY29udGV4dDogY3VycmVudEZlYXR1cmV9e0B3aWRnZXQtcmVxdWlyZWQ6IGZhbHNlfSI+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsProviders/FeatureActionsView.html","html","DQo8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHByb3ZpZGVyRW5hYmxlZH0iICB0YWJpbmRleD0iMCI+IDxoMyBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtYWN0aW9uc30iIHRhYmluZGV4PSIwIj48L2gzPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUgYWN0aXZlIGhhcy1pY29uIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiB2aXNpYmxlTWVudUl0ZW1zfSI+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiB2aXNpYmxlTWVudUl0ZW1zfXtAZXZlbnQtb25tb3VzZW92ZXI6IGdldERlc2NyaXB0aW9ufXtAZXZlbnQtb25jbGljazogaGFuZGxlTWVudUl0ZW1DbGlja30iPiA8aW1nIGNsYXNzPSJsaXN0LW1lbnUtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGljb25Vcml9e3NyYzogaWNvblVyaX17YWx0OiB0ZXh0fSIgLz4gPGJ1dHRvbiBjbGFzcz0ibGlzdC1tZW51LWRldGFpbHMiPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiB0ZXh0fSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LWRlc2MiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkZXNjcmlwdGlvbn0iPjwvc3Bhbj4gPC9idXR0b24+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsProviders/HyperlinksView.html","html","DQo8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCBmZWF0dXJlLWh5cGVybGlua3MtcHJvdmlkZXIiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBwcm92aWRlckVuYWJsZWR9Ij4gPGgzIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1oeXBlcmxpbmtzfSI+PC9oMz4gPGRpdiBjbGFzcz0ibGlzdC1tZW51IGh5cGVybGlua3MiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBwcm92aWRlckVuYWJsZWR9e0Bzb3VyY2U6IGh5cGVybGlua3N9Ij4gPGEgY2xhc3M9Imxpc3QtbWVudS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBoeXBlcmxpbmtzfXtocmVmOiB1cml9e3RhcmdldDogdGFyZ2V0fXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tIeXBlcmxpbmt9Ij4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXRhaWxzIiBkYXRhLWJpbmRpbmc9Int0aXRsZTogdG9vbFRpcH17QGNsYXNzLWRpc2FibGVkOiBpc0Jyb2tlbn0iPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiB0ZXh0fSI+PC9zcGFuPiA8L3NwYW4+IDwvYT4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsProviders/MultiColumnAttributesView.html","html","PGRpdiBjbGFzcz0icGFuZWwtZ3JvdXAiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBwcm92aWRlckVuYWJsZWR9Ij4gPGgzIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1hdHRyaWJ1dGVzfSIgdGFiaW5kZXg9IjAiPjwvaDM+IDxkaXYgY2xhc3M9ImF0dHJpYiBzdGF0aWMiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IG11bHRpQ29sdW1uQXR0cmlidXRlQ29udGFpbmVyfSI+IDxkaXYgY2xhc3M9Im11bHRpLWNvbHVtbi1jb250YWluZXIiIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IG11bHRpQ29sdW1uQXR0cmlidXRlQ29udGFpbmVyfSI+IDx1bCBjbGFzcz0iYXR0cmlidXRlLWxpc3QgY29sdW1ucyIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogQGNvbnRleHR9e0B0ZW1wbGF0ZTogTWFwcGluZy9tb2R1bGVzL0ZlYXR1cmVEZXRhaWxzL0ZlYXR1cmVEZXRhaWxzUHJvdmlkZXJzL1NpbmdsZUF0dHJpYnV0ZVZpZXcuaHRtbH0iPjwvdWw+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsProviders/RelatedFeaturesTableView.html","html","PGRpdiBjbGFzcz0icGFuZWwtZ3JvdXAiIGRhdGEtYmluZGluZz0ie0BjbGFzcy1oYXMtZWRpdGFibGUtcmVsYXRlZC1mZWF0dXJlczogcmVsYXRlZHNFZGl0YWJsZX17QHZpc2libGU6IHByb3ZpZGVyRW5hYmxlZH0iIHRhYmluZGV4PSIwIj4gPGgzPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtcmVsYXRlZC1mZWF0dXJlc30iPjwvc3Bhbj4gPHNwYW4+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkaXNwbGF5TmFtZX0iPjwvc3Bhbj4gPC9zcGFuPiA8L2gzPiAgPGRpdiBjbGFzcz0ibm8taXRlbSIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogaGFzUmV0cmlldmVkRGF0YX17QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLXJlbGF0ZWQtY2hlY2tpbmd9Ij48L2Rpdj4gPGRpdiBjbGFzcz0iY3JlYXRlZmVhdHVyZSIgZGF0YS1iaW5kaW5nPSJ7QGVuYWJsZWQ6IGhhc1JldHJpZXZlZERhdGF9Ij4gPGRpdiBjbGFzcz0ibGlzdC1tZW51IGhhcy1pY29uIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogY2FuQWRkfSI+IDxidXR0b24gY2xhc3M9Imxpc3QtbWVudS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAZW5hYmxlZDogdmFsaWRDYXJkaW5hbGl0eX17QGV2ZW50LWNsaWNrOiBoYW5kbGVDbGlja0FkZFJlbGF0ZWRSZWNvcmR9Ij4gPGltZyBjbGFzcz0ibGlzdC1tZW51LWljb24iIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9hZGQtMjQucG5nIiBhbHQ9IiAiIC8+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWNyZWF0ZS1yZWxhdGVkLWZlYXR1cmVzfSI+PC9zcGFuPiA8L2J1dHRvbj4gPC9kaXY+IDxkaXYgY2xhc3M9Im5vLWl0ZW0iIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBub1JlbGF0ZWRGZWF0dXJlc317QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLXJlbGF0ZWQtbm8tZGF0YX0iPjwvZGl2PiA8ZGl2IGNsYXNzPSJuby1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogZXJyb3JGZXRjaGluZ1JlbGF0ZWRGZWF0dXJlc317QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLXJlbGF0ZWQtZXJyb3ItZmV0Y2hpbmd9Ij48L2Rpdj4gIDxkaXYgY2xhc3M9InJlbGF0ZWQtZmVhdHVyZXMtdGFibGUtd2lkZ2V0IiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBub1JlbGF0ZWRGZWF0dXJlc317QHdpZGdldDogUmVsYXRlZEZlYXR1cmVzVGFibGVWaWV3V2lkZ2V0fXtAd2lkZ2V0LWNvbnRleHQ6IEBjb250ZXh0fXtAd2lkZ2V0LXJlcXVpcmVkOiBmYWxzZX0iPjwvZGl2PiAgPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsProviders/RelatedFeaturesView.html","html","PGRpdiBjbGFzcz0icGFuZWwtZ3JvdXAiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBwcm92aWRlckVuYWJsZWR9IiB0YWJpbmRleD0iMCI+IDxoMz4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLXJlbGF0ZWQtZmVhdHVyZXN9Ij48L3NwYW4+IDxzcGFuPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogZGlzcGxheU5hbWV9Ij48L3NwYW4+IDwvc3Bhbj4gPC9oMz4gIDxkaXYgY2xhc3M9Im5vLWl0ZW0iIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGhhc1JldHJpZXZlZERhdGF9e0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1yZWxhdGVkLWNoZWNraW5nfSI+PC9kaXY+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QGVuYWJsZWQ6IGhhc1JldHJpZXZlZERhdGF9Ij4gPGRpdiBjbGFzcz0ibGlzdC1tZW51IGhhcy1pY29uIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogY2FuQWRkfSI+IDxidXR0b24gY2xhc3M9Imxpc3QtbWVudS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAZW5hYmxlZDogdmFsaWRDYXJkaW5hbGl0eX17QGV2ZW50LWNsaWNrOiBoYW5kbGVDbGlja0FkZFJlbGF0ZWRSZWNvcmR9Ij4gPGltZyBjbGFzcz0ibGlzdC1tZW51LWljb24iIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9hZGQtMjQucG5nIiBhbHQ9IiAiIC8+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWNyZWF0ZS1yZWxhdGVkLWZlYXR1cmVzfSI+PC9zcGFuPiA8L2J1dHRvbj4gPC9kaXY+IDxkaXYgY2xhc3M9Im5vLWl0ZW0iIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBub1JlbGF0ZWRGZWF0dXJlc317QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLXJlbGF0ZWQtbm8tZGF0YX0iPjwvZGl2PiA8ZGl2IGNsYXNzPSJuby1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogZXJyb3JGZXRjaGluZ1JlbGF0ZWRGZWF0dXJlc317QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLXJlbGF0ZWQtZXJyb3ItZmV0Y2hpbmd9Ij48L2Rpdj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51IGFjdGl2ZSIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogcmVsYXRlZEVzcmlGZWF0dXJlSW5mb30iPiA8YnV0dG9uIGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogcmVsYXRlZEVzcmlGZWF0dXJlSW5mb317QGV2ZW50LWNsaWNrOiBoYW5kbGVWaWV3Q2xpY2t9Ij4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWRldGFpbHMiPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkaXNwbGF5TmFtZX0iPjwvc3Bhbj4gPC9kaXY+IDwvYnV0dG9uPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsProviders/SingleAttributeView.html","html","PGxpIGNsYXNzPSJhdHRyaWJ1dGUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogQGNvbnRleHR9e0B2aXNpYmxlOiB2aXNpYmxlfSIgdGFiaW5kZXg9IjAiPiA8c3BhbiBjbGFzcz0iYXR0cmlidXRlLWxhYmVsIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogZGlzcGxheU5hbWV9Ij48L3NwYW4+IDxkaXYgY2xhc3M9ImF0dHJpYnV0ZS1kZXRhaWxzIj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogZGlzcGxheUFzVXJsfXtAdGV4dDogcHJlc2VudGFibGVWYWx1ZX0iPjwvc3Bhbj4gPGEgZGF0YS1iaW5kaW5nPSJ7aHJlZjogdmFsdWV9e0B2aXNpYmxlOiBkaXNwbGF5QXNVcmx9e0B0ZXh0OiBwcmVzZW50YWJsZVZhbHVlfSIgdGFyZ2V0PSJfYmxhbmsiPjwvYT4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogcHJlc2VudGFibGVWYWx1ZX17QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLW5vdC1hdmFpbGFibGV9Ij48L3NwYW4+IDwvZGl2PiA8L2xpPiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureEditing/TemplatePickerView.html","html","DQo8ZGl2IGNsYXNzPSJmZWF0dXJlLXRlbXBsYXRlLXBpY2tlciI+ICA8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCBuby1pdGVtIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBsYXllclRlbXBsYXRlc317QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctbm8tdGVtcGxhdGVzfSI+PC9kaXY+IDxkaXYgY2xhc3M9InBhbmVsLWdyb3VwIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBsYXllclRlbXBsYXRlc30iPiA8ZGl2IGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGxheWVyVGVtcGxhdGVzfSI+IDxoMyBkYXRhLWJpbmRpbmc9IntAdGV4dDogZGlzcGxheU5hbWV9Ij48L2gzPiA8ZGl2IGNsYXNzPSJuby1yZXN1bHRzIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiB0ZW1wbGF0ZXN9Ij4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctbm8tdGVtcGxhdGVzfSI+PC9zcGFuPiA8ZGl2IGNsYXNzPSJmb3JtLWJ1dHRvbi1jb250YWluZXIiPiA8ZGl2IGNsYXNzPSJmb3JtLWJ1dHRvbi1hbGlnbiI+IDxkaXYgY2xhc3M9ImZvcm0taXRlbSBmb3JtLWJ0bnMiPiA8YnV0dG9uIGNsYXNzPSJidXR0b24iIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWFkZC1mZWF0dXJlLWJ1dHRvbn17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUZlYXR1cmVUZW1wbGF0ZUNsaWNrfSI+PC9idXR0b24+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8dWwgY2xhc3M9Imxpc3QtbWVudSIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHRlbXBsYXRlc317QHNvdXJjZTogdGVtcGxhdGVzfXtAdGVtcGxhdGUtc2VsZWN0b3I6IGZvb30iPiA8bGkgY2xhc3M9Imxpc3QtbWVudS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBAbnVsbH17QHRlbXBsYXRlOiBNYXBwaW5nL21vZHVsZXMvRmVhdHVyZUVkaXRpbmcvVGVtcGxhdGVzL0ZlYXR1cmVUZW1wbGF0ZS5odG1sfSI+PC9saT4gPC91bD4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureEditing/Editor/AttributeEditorView.html","html","DQo8ZGl2IGNsYXNzPSJlZGl0b3IiPiAgPGRpdiBjbGFzcz0ibG9hZGluZy1jb250YWluZXIiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpc0FwcGx5aW5nRWRpdHN9Ij4gPGRpdiBjbGFzcz0ibG9hZGluZy1pbWciPjwvZGl2PiA8ZGl2IGNsYXNzPSJsb2FkaW5nLW1zZyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctYXBwbHlpbmd9Ij48L2Rpdj4gPC9kaXY+ICA8ZGl2IGNsYXNzPSJhZGQtb3ItZWRpdC1mZWF0dXJlIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBpc0FwcGx5aW5nRWRpdHN9Ij4gPGRpdiBjbGFzcz0icGFuZWwtY29udGVudCI+IDxkaXYgY2xhc3M9InBhbmVsLW5vdGlmaWNhdGlvbiIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGhhc0dlb21ldHJ5fSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWhhcy1nZW9tZXRyeX0iPjwvc3Bhbj4gPC9kaXY+IDxkaXYgY2xhc3M9InBhbmVsLW5vdGlmaWNhdGlvbiIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogZmllbGRzfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWludmFsaWQtbGF5ZXJ9Ij48L3NwYW4+IDwvZGl2PiA8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGZpZWxkc30iPiA8aDMgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctZmVhdHVyZS1hdHRyaWJ1dGVzfSI+PC9oMz4gPGRpdiBjbGFzcz0icGFuZWwtZ3JvdXAtY29udGVudHMiPiA8ZGl2IGNsYXNzPSJmb3JtIGxhYmVsLWxlZnQiPiA8ZGl2IGNsYXNzPSJmb3JtLWNvbnRhaW5lciIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogZmllbGRzfXtAdGVtcGxhdGUtc2VsZWN0b3I6IHJlbmRlclR5cGV9Ij4gIDxkaXYgY2xhc3M9ImZvcm0taXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogZXNyaUZpZWxkVHlwZURhdGV9Ij4gPGxhYmVsIGNsYXNzPSJmb3JtLWxhYmVsIj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGFsaWFzfSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0iaW5kaWNhdG9yIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogYXR0YWNoZWRfc2hvd0luZGljYXRvcn0iPio8L3NwYW4+IDwvbGFiZWw+IDxkaXYgY2xhc3M9ImZvcm0tY29udHJvbC1kYXRlLXBpY2tlciIgZGF0YS1iaW5kaW5nPSJ7QHdpZGdldDogRGF0ZVBpY2tlckZvcm1JdGVtfXtAd2lkZ2V0LWNvbnRleHQ6IEBjb250ZXh0fSI+IDwvZGl2PiA8L2Rpdj4gIDxkaXYgY2xhc3M9ImZvcm0taXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogY29kZWREb21haW5WYWx1ZX0iPiA8ZGl2IGNsYXNzPSJjb21ib2JveCIgPiA8bGFiZWwgY2xhc3M9ImZvcm0tbGFiZWwiPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogYWxpYXN9Ij48L3NwYW4+IDxzcGFuIGNsYXNzPSJpbmRpY2F0b3IiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBhdHRhY2hlZF9zaG93SW5kaWNhdG9yfSI+Kjwvc3Bhbj4gPC9sYWJlbD4gPGRpdiBjbGFzcz0iZm9ybS1jb250cm9sIj4gPHNlbGVjdCBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBjb2RlZERvbWFpblZhbHVlc317QHZhbHVlOiB2YWx1ZX17ZGlzYWJsZWQ6IGNhbnRFZGl0fSI+IDxvcHRpb24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogY29kZWREb21haW5WYWx1ZXN9e0B0ZXh0OiBuYW1lfXt2YWx1ZTogY29kZX0iPjwvb3B0aW9uPiA8L3NlbGVjdD4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gIDxkaXYgY2xhc3M9ImZvcm0taXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogc3ViVHlwZX0iPiA8ZGl2IGNsYXNzPSJjb21ib2JveCI+IDxsYWJlbCBjbGFzcz0iZm9ybS1sYWJlbCI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBhbGlhc30iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9ImluZGljYXRvciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGF0dGFjaGVkX3Nob3dJbmRpY2F0b3J9Ij4qPC9zcGFuPiA8L2xhYmVsPiA8ZGl2IGNsYXNzPSJmb3JtLWNvbnRyb2wiPiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHN1YlR5cGVzfXtAdmFsdWU6IHZhbHVlfXtkaXNhYmxlZDogY2FudEVkaXR9e0BldmVudC1vbmNoYW5nZTogaGFuZGxlVHlwZUZpZWxkQ2hhbmdlfSI+IDxvcHRpb24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogc3ViVHlwZXN9e0B0ZXh0OiBuYW1lfXt2YWx1ZTogaWR9Ij48L29wdGlvbj4gPC9zZWxlY3Q+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+ICA8ZGl2IGNsYXNzPSJmb3JtLWl0ZW0iIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGZpZWxkc30iPiA8ZGl2IGNsYXNzPSJ0ZXh0Ym94Ij4gPGxhYmVsIGNsYXNzPSJmb3JtLWxhYmVsIj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGFsaWFzfSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0iaW5kaWNhdG9yIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogYXR0YWNoZWRfc2hvd0luZGljYXRvcn0iPio8L3NwYW4+IDwvbGFiZWw+IDxkaXYgY2xhc3M9ImZvcm0tY29udHJvbCI+IDxpbnB1dCB0eXBlPSJ0ZXh0IiBkYXRhLWJpbmRpbmc9IntAdmFsdWU6IHZhbHVlfXtkaXNhYmxlZDogY2FudEVkaXR9IiAvPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gIDx1bCBjbGFzcz0iZm9ybS12YWxpZGF0aW9uIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiB2YWxpZGF0aW9uTWVzc2FnZXN9e0B2aXNpYmxlOiB2YWxpZGF0aW9uTWVzc2FnZXN9Ij4gPGxpIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IHZhbGlkYXRpb25NZXNzYWdlc30iPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGNvbnRleHR9Ij48L3NwYW4+IDwvbGk+IDwvdWw+ICA8ZGl2IGNsYXNzPSJmb3JtLWl0ZW0gZm9ybS1idG5zIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBidXR0b25zfSI+IDxidXR0b24gY2xhc3M9ImJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogYnV0dG9uc317QHZpc2libGU6IHZpc2liaWxpdHl9e0B0ZXh0OiBsYWJlbH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUJ1dHRvbkNsaWNrfSI+PC9idXR0b24+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureEditing/Templates/FeatureTemplate.html","html","PGRpdiBjbGFzcz0iZmVhdHVyZS10ZW1wbGF0ZSBoYXMtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUZlYXR1cmVUZW1wbGF0ZUNsaWNrfSI+IDxpbWcgY2xhc3M9Imxpc3QtbWVudS1pY29uIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc3ltYm9sVXJpfXtzcmM6IHN5bWJvbFVyaX0iIGFsdD0iICIgLz4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWljb24iIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IHN5bWJvbFVyaX17c3R5bGU6IHN5bWJvbFN0eWxlfSI+PC9kaXY+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1kZXRhaWxzIj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1uYW1lIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogbmFtZX0iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXNjIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogZGVzY3JpcHRpb259e0B2aXNpYmxlOiBkZXNjcmlwdGlvbn0iPjwvc3Bhbj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureLayer/EditLogView.html","html","PGRpdiBjbGFzcz0idmlldy1lZGl0LWxvZyI+IDxkaXYgY2xhc3M9Imxpc3QtbWVudSBoYXMtaWNvbiBzdGF0aWMiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpc09mZmxpbmV9Ij4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0iPiA8aW1nIGNsYXNzPSJsaXN0LW1lbnUtaWNvbiIgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL1Rvb2xiYXIvZXJyb3ItMjQucG5nIiBkYXRhLWJpbmRpbmc9InthbHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXlvdS1hcmUtb2ZmbGluZX0iIC8+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1kZXRhaWxzIj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1uYW1lIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtbGF5ZXIteW91LWFyZS1vZmZsaW5lfSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LWRlc2MiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1jYW5ub3Qtc3luYy1lZGl0cy1vZmZsaW5lfSI+PC9zcGFuPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUgc3RhdGljIHN5bmMtbm93IiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBpc09mZmxpbmV9Ij4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0iPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXN5bmN9Ij48L3NwYW4+IDwvZGl2PiA8YnV0dG9uIGNsYXNzPSJidXR0b24iIGRhdGEtYmluZGluZz0ie0BldmVudC1jbGljazogaGFuZGxlU3luY2hyb25pemVDbGlja30NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVkaXRzLWFuZC1zeW5jLXN5bmMtYnV0dG9ufQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aXRsZTogQGxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItZWRpdHMtYW5kLXN5bmMtc3luYy1idXR0b259Ij48L2J1dHRvbj4gPC9kaXY+IDwvZGl2PiAgPGRpdiBjbGFzcz0icGFuZWwtZ3JvdXAgZWRpdHMiPiA8aDMgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVkaXRzLWFuZC1zeW5jLXBlbmRpbmctZWRpdHN9Ij48L2gzPiA8ZGl2IGNsYXNzPSJuby1yZXN1bHRzIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBlZGl0TG9nRW50cmllc317QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVkaXRzLWFuZC1zeW5jLWVtcHR5fSI+PC9kaXY+IDxkaXYgY2xhc3M9Imxpc3QtbWVudSBoYXMtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogZWRpdExvZ0VudHJpZXN9Ij4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0iIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGVkaXRMb2dFbnRyaWVzfSI+IDx0YWJsZSBkYXRhLWJpbmRpbmc9IntjbGFzc05hbWU6IGhpZ2hsaWdodENsYXNzfXtAZXZlbnQtb25tb3VzZWRvd246IGhhbmRsZU1vdXNlRG93bn0iPiA8dHI+IDx0ZD4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWljb24iPiA8ZGl2IGRhdGEtYmluZGluZz0ie2NsYXNzTmFtZTogdHlwZUNsYXNzfSI+PC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGRlc2NyaXB0aW9ufSI+PC9zcGFuPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGRlcGVuZHNPbn17QHNvdXJjZTogZGVwZW5kc09ufSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGRlcGVuZHNPbn0iPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItZGVwZW5kcy1vbn0iPjwvc3Bhbj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGRlc2NyaXB0aW9ufSI+PC9zcGFuPiA8L3NwYW4+IDwvZGl2PiA8L2Rpdj4gPC90ZD4gPHRkIGNsYXNzPSJlZGl0LWJ0bnMiPiA8YnV0dG9uIGNsYXNzPSJlZGl0LWVkaXQtbG9nLWVudHJ5IiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogY2FuQmVDaGFuZ2VkfXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tDaGFuZ2V9e3RpdGxlOiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci12aWV3LWVkaXR9Ij4gPGltZyBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvVG9vbGJhci9lZGl0LTE2LnBuZyIgZGF0YS1iaW5kaW5nPSJ7YWx0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci12aWV3LWVkaXR9IiAvPiA8L2J1dHRvbj4gPGJ1dHRvbiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tEZWxldGV9e3RpdGxlOiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1kZWxldGUtZWRpdH0iPiA8aW1nIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9Ub29sYmFyL3RyYXNoLTE2LnBuZyIgZGF0YS1iaW5kaW5nPSJ7YWx0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1kZWxldGUtZWRpdH0iIC8+IDwvYnV0dG9uPiA8L3RkPiA8L3RyPiA8L3RhYmxlPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureLayer/FeatureLayerDetailsView.html","html","DQo8ZGl2IGNsYXNzPSJmZWF0dXJlLWxheWVyLWRldGFpbHMiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGN1cnJlbnRGZWF0dXJlTGF5ZXJ9Ij4gPGRpdiBjbGFzcz0iY3VycmVudC1mZWF0dXJlLWxheWVyLXRlbXBsYXRlIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBjdXJyZW50RmVhdHVyZUxheWVyfSI+ICA8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogZnV0dXJlQ2FjaGVkRGF0YUluZm99Ij4gPGRpdiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBmdXR1cmVDYWNoZWREYXRhSW5mb30iPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUgaGFzLWljb24gc3RhdGljIj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0iPiA8ZGl2IGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGlzU2V0fSI+IDxpbnB1dCBpZD0iY2FjaGUtaW5wdXQiIGNsYXNzPSJsaXN0LW1lbnUtaWNvbiIgdHlwZT0iY2hlY2tib3giIGRhdGEtYmluZGluZz0ie2NoZWNrZWQ6IGlzU2V0fXtAZXZlbnQtb25jaGFuZ2U6IGhhbmRsZUNoZWNrQ2FjaGVDaGVja2JveH0iIC8+IDxsYWJlbCBmb3I9ImNhY2hlLWlucHV0IiBjbGFzcz0ibGlzdC1tZW51LWRldGFpbHMiPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1jYWNoZS1vbi1zeW5jfSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LWRlc2MiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci13b250LWNhY2hlLWRlc2N9Ij48L3NwYW4+IDwvbGFiZWw+IDwvZGl2PiA8ZGl2IGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpc1NldH0iPiA8aW5wdXQgaWQ9ImNhY2hlLWlucHV0IiBjbGFzcz0ibGlzdC1tZW51LWljb24iIHR5cGU9ImNoZWNrYm94IiBkYXRhLWJpbmRpbmc9IntjaGVja2VkOiBpc1NldH17QGV2ZW50LW9uY2hhbmdlOiBoYW5kbGVDaGVja0NhY2hlQ2hlY2tib3h9IiAvPiA8bGFiZWwgZm9yPSJjYWNoZS1pbnB1dCIgY2xhc3M9Imxpc3QtbWVudS1kZXRhaWxzIj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1uYW1lIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItY2FjaGUtb24tc3luY30iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXNjIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItd2lsbC1jYWNoZS1kZXNjfSI+PC9zcGFuPiA8L2xhYmVsPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyBzeW5jLWV4dGVudCI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWV4dGVudH0iPjwvc3Bhbj4gPGEgY2xhc3M9ImxpbmsiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVpvb21DbGlja317QHRleHQ6IGdlb21ldHJ5U3RyaW5nfSI+PC9hPiA8L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9InN5bmMtZm9ybS1idG5zIj4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaXNTZXR9e0BldmVudC1jbGljazogaGFuZGxlQ2FjaGVDbGlja317QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXNhdmUtc3luYy1zZXR0aW5nc30iPjwvYnV0dG9uPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUgYXR0cmliIj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0gbGlzdC1tZW51LWRldGFpbHMiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBzaG93V2hlcmVDbGF1c2V9Ij4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1uYW1lIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItd2hlcmUtY2xhdXNlfSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0iZm9ybS1pbnB1dCI+PGlucHV0IHR5cGU9InRleHQiIGRhdGEtYmluZGluZz0ie0B2YWx1ZTogd2hlcmVDbGF1c2V9Ii8+PC9zcGFuPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gIDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGhhc0NhY2hlZERhdGFJbmZvfXtAc291cmNlOiBjYWNoZWREYXRhSW5mb30iPiA8ZGl2IGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGNhY2hlZERhdGFJbmZvfSI+IDxkaXYgY2xhc3M9InBhbmVsLWdyb3VwIj4gPGgzIGNsYXNzPSJleHBhbmRlciI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1jdXJyZW50bHktY2FjaGVkfSI+PC9zcGFuPiA8L2gzPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUgYXR0cmliIHN0YXRpYyIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogY3VycmVudGx5Q2FjaGVkRGF0YUNvbnRlbnR9Ij4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0gbGlzdC1tZW51LWRldGFpbHMiPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1leHRlbnR9Ij48L3NwYW4+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1kZXNjIj4gPGEgY2xhc3M9ImxpbmsiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGdlb21ldHJ5U3RyaW5nfXtAZXZlbnQtY2xpY2s6IGhhbmRsZVpvb21DbGlja30iPjwvYT4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtaXRlbSBsaXN0LW1lbnUtZGV0YWlscyI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLW51bWJlci1vZi1mZWF0dXJlc30iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXNjIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogY291bnR9Ij48L3NwYW4+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtaXRlbSBsaXN0LW1lbnUtZGV0YWlscyI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXNpemV9Ij48L3NwYW4+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHNpemV9Ij48L3NwYW4+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtaXRlbSBsaXN0LW1lbnUtZGV0YWlscyI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWNhY2hlZC1vbn0iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXNjIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogc3RvcmVkT259Ij48L3NwYW4+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtaXRlbSBsaXN0LW1lbnUtZGV0YWlscyIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHNob3dXaGVyZUNsYXVzZX0iPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci13aGVyZS1jbGF1c2V9Ij48L3NwYW4+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHdoZXJlQ2xhdXNlfSI+PC9zcGFuPiA8L2Rpdj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0gbGlzdC1tZW51LWRldGFpbHMiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBoYXNSZWxhdGVkVGFibGVzfSI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXJlbGF0ZWQtZmVhdHVyZXN9Ij48L3NwYW4+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1kZXNjIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiByZWxhdGlvbnNoaXBzfSI+IDxkaXYgY2xhc3M9InJlbGF0ZWQtZGF0YSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogcmVsYXRpb25zaGlwc30iPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogbmFtZX0iPjwvc3Bhbj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLW51bWJlci1vZi1mZWF0dXJlc30iPjwvc3Bhbj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGNvdW50fSI+PC9zcGFuPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItc2l6ZX0iPjwvc3Bhbj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHNpemV9Ij48L3NwYW4+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureLayer/FeatureLayerListView.html","html","PGRpdiBjbGFzcz0iZmVhdHVyZS1sYXllciI+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHN5bmNOZWVkZWR9Ij4gPGRpdiBjbGFzcz0ibGlzdC1tZW51IGhhcy1pY29uIj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0iIGRhdGEtYmluZGluZz0ie0BldmVudC1jbGljazogaGFuZGxlU3luY2hyb25pemVDbGlja30iPiA8aW1nIGNsYXNzPSJsaXN0LW1lbnUtaWNvbiIgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL1Rvb2xiYXIvZXJyb3ItMjQucG5nIiBkYXRhLWJpbmRpbmc9InthbHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXN5bmMtcmVxdWlyZWR9IiAvPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXBlbmRpbmctZWRpdHMtbXVsdGlwbGUtbGF5ZXJzfSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LWRlc2MiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1nby10by1zeW5jLXBhbmVsfSI+PC9zcGFuPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz0icGFuZWwtZ3JvdXAiPiA8aDMgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXNlbGVjdC1sYXllcn0iPjwvaDM+IDxkaXYgY2xhc3M9Im5vLXJlc3VsdHMiIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGZlYXR1cmVMYXllcnN9e0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1uby1sYXllcnN9Ij48L2Rpdj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51IiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogZmVhdHVyZUxheWVyc317QHNvdXJjZTogZmVhdHVyZUxheWVyc30iPiA8YnV0dG9uIGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogZmVhdHVyZUxheWVyc317QGV2ZW50LWNsaWNrOiBoYW5kbGVGZWF0dXJlTGF5ZXJDbGlja30iPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LWljb24iIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGNhY2hlZERhdGFJbmZvfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGNhY2hlZERhdGFJbmZvfSI+IDxzcGFuIGNsYXNzPSJjYWNoZWQiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpc1NldH0iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9Im5vdC1jYWNoZWQiIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGlzU2V0fSI+PC9zcGFuPiA8L3NwYW4+IDwvc3Bhbj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWRldGFpbHMiPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkaXNwbGF5TmFtZX0iPjwvc3Bhbj4gPC9kaXY+IDwvYnV0dG9uPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureLayer/ModalMessageView.html","html","DQo8ZGl2IGNsYXNzPSJzeW5jLWxvZyI+ICA8ZGl2IGNsYXNzPSJzY3JvbGwiIGRhdGEtYmluZGluZz0ie0B2YXI6IHNjcm9sbEVsZW1lbnR9Ij4gPHRhYmxlPiA8dGJvZHkgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogbWVzc2FnZXN9Ij4gPHRyIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IG1lc3NhZ2VzfXtjbGFzc05hbWU6IGNzc0NsYXNzfSI+IDx0ZCBjbGFzcz0ibXNnIj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG1lc3NhZ2V9Ij48L3NwYW4+IDwvdGQ+IDwvdHI+IDwvdGJvZHk+IDwvdGFibGU+ICA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUgaGFzLWljb24gc3RhdGljIHN5bmMtc3RhdHVzLW1zZyI+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc3VtbWFyeUNsYXNzfSI+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1pY29uIiBkYXRhLWJpbmRpbmc9IntjbGFzc05hbWU6IHN1bW1hcnlDbGFzc30iPjwvZGl2PiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBzdW1tYXJ5fSI+PC9zcGFuPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz0iZm9ybS1idG5zIj4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xvc2V9e0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLWNsb3NlfSIgLz4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Footer/FooterView.html","html","PGRpdiBjbGFzcz0iZm9vdGVyLWNvbnRhaW5lciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGhlaWdodH17QHN0eWxlLWJhY2tncm91bmRDb2xvcjogYmFja2dyb3VuZENvbG9yfXtAc3R5bGUtaGVpZ2h0OiBoZWlnaHR9Ij4gPGRpdiBjbGFzcz0icmVnaW9uIGZvb3Rlci1sZWZ0IiBkYXRhLXJlZ2lvbi1uYW1lPSJMZWZ0Rm9vdGVyUmVnaW9uIiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLkRpdlN0YWNrUmVnaW9uQWRhcHRlciI+PC9kaXY+IDxkaXYgY2xhc3M9InJlZ2lvbiBmb290ZXItcmlnaHQiIGRhdGEtcmVnaW9uLW5hbWU9IlJpZ2h0Rm9vdGVyUmVnaW9uIiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLkRpdlN0YWNrUmVnaW9uQWRhcHRlciI+PC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Geolocate/GeolocateButtonView.html","html","PGRpdiBjbGFzcz0iZ2VvbG9jYXRlLXdyYXBwZXIiPiA8ZGl2IGNsYXNzPSJ6b29tLWNvbnRyb2wtYnRuIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogdmlzaWJsZX17QGNsYXNzLWdlb2xvY2F0ZS10cmFja2luZzogaXNUcmFja2luZ317QGNsYXNzLWdlb2xvY2F0ZS1mb2xsb3dpbmc6IGlzRm9sbG93aW5nfXtAY2xhc3MtZ2VvbG9jYXRlLWFjdGl2ZTogYWN0aXZlfSI+IDxidXR0b24gY2xhc3M9Imdlb2xvY2F0ZS1iYXNlIHRvZ2dsZS1idG4iIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0dlb2xvY2F0ZX17dGl0bGU6QGxhbmd1YWdlLWdlb2xvY2F0ZS1maW5kLWRlc2N9IiB0YWJpbmRleD0iMCI+PC9idXR0b24+IDwvZGl2PiA8ZGl2IGNsYXNzPSJnZW9sb2NhdGUtbWVudSIgZGF0YS1yZWdpb24tbmFtZT0iR2VvbG9jYXRlTWVudVJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5NdWx0aURpdlJlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Geolocate/GeolocateStatusView.html","html","PGRpdiBjbGFzcz0ic3RhdHVzLXdpbmRvdyBnZW9sb2NhdGUtc3RhdHVzLXdpbmRvdyI+IDx0YWJsZSByb2xlPSJwcmVzZW50YXRpb24iPiA8dHI+IDx0ZD4gPGltZyBjbGFzcz0ic3RhdHVzLWltZyIgZGF0YS1iaW5kaW5nPSJ7c3JjOiBpbWFnZVVyaX17QHZpc2libGU6IGltYWdlVXJpfSIgYWx0PSIgIiAvPiA8L3RkPiA8dGQ+IDxkaXYgY2xhc3M9Imdlb2xvY2F0ZS1zdGF0dXMiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBzdGF0dXN9e0B2aXNpYmxlOiBzdGF0dXN9Ij48L2Rpdj4gPGRpdiBjbGFzcz0iY29vcmRzLWRpc3BsYXkiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBzaG93Q29vcmRpbmF0ZXN9Ij4gPGRpdiBjbGFzcz0iY29vcmRzLWl0ZW0gY29vcmRzLXgiPiA8c3BhbiBjbGFzcz0iY29vcmRzLWxhYmVsIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogeFZhbHVlVHlwZX0iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9ImNvb3Jkcy12YWx1ZXMiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiB4VmFsdWV9Ij48L3NwYW4+IDwvZGl2PiA8ZGl2IGNsYXNzPSJjb29yZHMtaXRlbSBjb29yZHMteSI+IDxzcGFuIGNsYXNzPSJjb29yZHMtbGFiZWwiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiB5VmFsdWVUeXBlfSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0iY29vcmRzLXZhbHVlcyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHlWYWx1ZX0iPjwvc3Bhbj4gPC9kaXY+IDwvZGl2PiA8L3RkPiA8dGQgY2xhc3M9InN0YXR1cy1jbG9zZSI+IDxidXR0b24gY2xhc3M9InN0YXR1cy1idG4iIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0Nsb3NlfXt0aXRsZTogQGxhbmd1YWdlLWNvbW1vbi1jbG9zZX0iPiA8c3Bhbj4mbmJzcDs8L3NwYW4+IDwvYnV0dG9uPiA8L3RkPiA8L3RyPiA8L3RhYmxlPiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Geolocate/GeolocateView.html","html","PGRpdiBjbGFzcz0iZ2VvbG9jYXRlLWNvbnRhaW5lciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHZpc2libGV9Ij4gPGRpdiBjbGFzcz0iZ2VvbG9jYXRlLXRpdGxlIj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1nZW9sb2NhdGUtdGl0bGV9Ij48L3NwYW4+IDwvZGl2PiA8ZGl2IGNsYXNzPSJnZW9sb2NhdGUtbGlzdCI+IDx1bCBjbGFzcz0ibGlzdC1tZW51IGhhcy1pY29uIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25ibHVyOiBkZWFjdGl2YXRlR2VvbG9jYXRlTWVudVZpZXd9Ij4gPGxpIGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGdlb2xvY2F0ZUVuYWJsZWR9Ij4gPGJ1dHRvbiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tNZW51RmluZH17dGl0bGU6IEBsYW5ndWFnZS1nZW9sb2NhdGUtZmluZH0iPiA8aW1nIGNsYXNzPSJsaXN0LW1lbnUtaWNvbiIgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL2dlb2xvY2F0ZS0yNC5wbmciIGFsdD0iICIgLz4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXRhaWxzIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWdlb2xvY2F0ZS1maW5kfSI+PC9zcGFuPiA8L2J1dHRvbj4gPC9saT4gPGxpIGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHRyYWNraW5nRW5hYmxlZH0iPiA8YnV0dG9uIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja01lbnVUcmFja317dGl0bGU6IEBsYW5ndWFnZS1nZW9sb2NhdGUtdHJhY2t9Ij4gPGltZyBjbGFzcz0ibGlzdC1tZW51LWljb24iIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9nZW9sb2NhdGUtdHJhY2stMjQucG5nIiBhbHQ9IiAiIC8+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1nZW9sb2NhdGUtdHJhY2t9Ij48L3NwYW4+IDwvYnV0dG9uPiA8L2xpPiA8bGkgY2xhc3M9Imxpc3QtbWVudS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogZm9sbG93aW5nRW5hYmxlZH0iPiA8YnV0dG9uIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja01lbnVGb2xsb3d9e3RpdGxlOiBAbGFuZ3VhZ2UtZ2VvbG9jYXRlLWZvbGxvd30iPiA8aW1nIGNsYXNzPSJsaXN0LW1lbnUtaWNvbiIgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL2dlb2xvY2F0ZS1mb2xsb3ctMjQucG5nIiBhbHQ9IiAiIC8+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1nZW9sb2NhdGUtZm9sbG93fSI+PC9zcGFuPiA8L2J1dHRvbj4gPC9saT4gPC91bD4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/HeatMaps/HeatMapsView.html","html","PGRpdiBjbGFzcz0iaGVhdC1tYXBzIGZvcm0tc3RhY2tlZCI+IDxoNCBjbGFzcz0idmlzdWFsaXphdGlvbi10aXRsZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1oZWF0LW1hcHMtdGl0bGV9Ij48L2g0PiA8ZGl2IGNsYXNzPSJmb3JtLWl0ZW0iPiA8bGFiZWwgY2xhc3M9ImZvcm0tbGFiZWwiIGZvcj0iaW50ZW5zaXR5IiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWhlYXQtbWFwcy1pbnRlbnNpdHl9Ij48L2xhYmVsPiA8ZGl2IGNsYXNzPSJzbGlkZXItY29udGFpbmVyIj4gPGRpdiBjbGFzcz0ic2xpZGVyLWxhYmVsIHNsaWRlci1sYWJlbC1taW4iIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtaGVhdC1tYXBzLWludGVuc2l0eS1zbGlkZXItbWluLWxhYmVsfSI+PC9kaXY+IDxkaXYgY2xhc3M9InNsaWRlci1sYWJlbCBzbGlkZXItbGFiZWwtbWF4IiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWhlYXQtbWFwcy1pbnRlbnNpdHktc2xpZGVyLW1heC1sYWJlbH0iPjwvZGl2PiA8ZGl2IGNsYXNzPSJpbnRlbnNpdHktc2xpZGVyIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBzbGlkZXJFbGVtZW50fSI+IDxkaXYgY2xhc3M9InNsaWRlci1sYWJlbCBzbGlkZXItbGFiZWwtY3VycmVudCI+PC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9ImZvcm0taXRlbSI+IDxsYWJlbCBmb3I9ImZpZWxkIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWhlYXQtbWFwcy1pbnRlbnNpdHktbXVsdGlwbGllcn0iPjwvbGFiZWw+IDxzZWxlY3QgaWQ9ImZpZWxkIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBmaWVsZHN9e0B2YWx1ZTogc2VsZWN0ZWRGaWVsZH17QGRpc2FibGVkOiBkaXNhYmxlRmllbGRzfXt0aXRsZTogQGxhbmd1YWdlLWhlYXQtbWFwcy1pbnRlbnNpdHktbXVsdGlwbGllcn0iPiA8b3B0aW9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGZpZWxkc317QHRleHQ6IGRpc3BsYXlOYW1lfXt2YWx1ZTogbmFtZX0iPjwvb3B0aW9uPiA8L3NlbGVjdD4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Identify/IdentifyOptionsView.html","html","PHVsIGNsYXNzPSJ0cmFuc2llbnQtaWRlbnRpZnkiPiA8bGkgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogYnVmZmVyVG9nZ2xlQnV0dG9ufSI+IDxidXR0b24gY2xhc3M9InRvb2xiYXItaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogYnVmZmVyVG9nZ2xlQnV0dG9ufXtAZGlzYWJsZWQ6IGRpc2FibGVkfXtAY2xhc3MtaGlkZGVuOiBoaWRkZW59e0BjbGFzcy10b2dnbGVkLW9uOiBpc1RvZ2dsZWRPbn17QG5vY2xhc3MtdG9nZ2xlZC1vZmY6IGlzVG9nZ2xlZE9ufXtAZXZlbnQtb25jbGljazogaGFuZGxlVG9vbGJhckl0ZW1DbGlja317dGl0bGU6IHRvb2x0aXB9IiAiPiA8aW1nIGNsYXNzPSIgaWNvbiIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGljb25Vcml9e3NyYzogaWNvblVyaX0iIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9Ub29sYmFyL2ljb24tYmxhbmstMjQucG5nIiBhbHQ9IiIgLz4gPHAgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG5hbWV9Ij48L3A+IDwvYnV0dG9uPiA8L2xpPiA8bGkgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogc2VsZWN0TGF5ZXJzQnV0dG9ufSI+IDxidXR0b24gY2xhc3M9InRvb2xiYXItaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogc2VsZWN0TGF5ZXJzQnV0dG9ufXtAZGlzYWJsZWQ6IGRpc2FibGVkfXtAZXZlbnQtb25jbGljazogaGFuZGxlVG9vbGJhckl0ZW1DbGlja317dGl0bGU6IHRvb2x0aXB9Ij4gPGltZyBjbGFzcz0iaWNvbiIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGljb25Vcml9e3NyYzogaWNvblVyaX0iIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9Ub29sYmFyL2ljb24tYmxhbmstMjQucG5nIiBhbHQ9IiIgLz4gPHAgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG5hbWV9Ij48L3A+IDwvYnV0dG9uPiA8L2xpPiA8L3VsPiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Identify/Widgets/IdentifyOptionsTransientView.html","html","PHVsIGNsYXNzPSJtYXJrdXAtZWRpdCI+IDxsaSBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBidWZmZXJUb2dnbGVCdXR0b259Ij4gPGJ1dHRvbiBjbGFzcz0idG9vbGJhci1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBidWZmZXJUb2dnbGVCdXR0b259e0BkaXNhYmxlZDogZGlzYWJsZWR9e0BjbGFzcy1oaWRkZW46IGhpZGRlbn17QGNsYXNzLXRvZ2dsZWQtb246IGlzVG9nZ2xlZE9ufXtAbm9jbGFzcy10b2dnbGVkLW9mZjogaXNUb2dnbGVkT259e0BldmVudC1vbmNsaWNrOiBoYW5kbGVUb29sYmFySXRlbUNsaWNrfXt0aXRsZTogdG9vbHRpcH0iPiA8aW1nIGNsYXNzPSJpY29uIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaWNvblVyaX17c3JjOiBpY29uVXJpfSIgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL1Rvb2xiYXIvaWNvbi1ibGFuay0yNC5wbmciIGFsdD0iIiAvPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogbmFtZX0iPjwvcD4gPC9idXR0b24+IDwvbGk+IDxsaSBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBzZWxlY3RMYXllcnNCdXR0b259Ij4gPGJ1dHRvbiBjbGFzcz0idG9vbGJhci1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBzZWxlY3RMYXllcnNCdXR0b259e0BkaXNhYmxlZDogZGlzYWJsZWR9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVUb29sYmFySXRlbUNsaWNrfXt0aXRsZTogdG9vbHRpcH0iPiA8aW1nIGNsYXNzPSJpY29uIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaWNvblVyaX17c3JjOiBpY29uVXJpfSIgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL1Rvb2xiYXIvaWNvbi1ibGFuay0yNC5wbmciIGFsdD0iIiAvPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogbmFtZX0iPjwvcD4gPC9idXR0b24+IDwvbGk+IDwvdWw+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Info/InfoView.html","html","PGRpdiBjbGFzcz0iaG9tZS1wYW5lbCIgZGF0YS1iaW5kaW5nPSJ7QHdpZGdldDogR2V0SFRNTENvbnRlbnR9e0B3aWRnZXQtY29udGV4dDogY29udGVudH0iIHRhYmluZGV4PSIwIj48L2Rpdj4g");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Integration/ExternalComponentPaneView.html","html","PGRpdiBjbGFzcz0icGFuZSI+IDxpZnJhbWUgY2xhc3M9Im1hcC1mcmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogZnJhbWVFbGVtZW50fXtkYXRhLWZyYW1lLWlkOiBmcmFtZUlkfXtAdmlzaWJsZTogdXJpfXtzcmM6IHVyaX0iPjwvaWZyYW1lPiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Integration/ExternalComponentView.html","html","PGRpdiBjbGFzcz0idmlldy1jb250YWluZXItdmlldyBpbnRlZ3JhdGlvbiIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogY29udGFpbmVyRWxlbWVudH0iPiAgPGRpdiBjbGFzcz0iYmFubmVyLW5vc2VsZWN0IiBkYXRhLWJpbmRpbmc9IntAdmFyOiBoZWFkZXJFbGVtZW50fXtAZXZlbnQtbW91c2Vkb3duOiBoYW5kbGVIZWFkZXJNb3VzZURvd259e0BldmVudC10b3VjaHN0YXJ0OiBoYW5kbGVIZWFkZXJUb3VjaFN0YXJ0fQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge0BjbGFzcy1yZXNpemUtaG9yaXpvbnRhbC1oaW50OiByZXNpemVYfXtAY2xhc3MtcmVzaXplLXZlcnRpY2FsLWhpbnQ6IHJlc2l6ZVl9Ij4gPGRpdiBjbGFzcz0icGFuZWwtaGVhZGVyIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaGVhZGVySXNWaXNpYmxlfSI+IDxidXR0b24gY2xhc3M9IiBwYW5lbC1oZWFkZXItYnV0dG9uIHJpZ2h0IGNsb3NlLTE2IiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCkiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBzaG93WEJ1dHRvbn17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrQ2xvc2V9Ij4gPC9idXR0b24+IDxidXR0b24gY2xhc3M9InBhbmVsLWhlYWRlci1idXR0b24gcmlnaHQiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBzaG93aW5nTWF4aW1pemVCdXR0b259e0BjbGFzcy1taW5pbWl6ZS0xNjogcGFuZWxNYXhpbWl6ZWR9e0Bub2NsYXNzLW1heGltaXplLTE2OiBwYW5lbE1heGltaXplZH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZU1heGltaXplVG9nZ2xlQ2xpY2t9e0BldmVudC10b3VjaHN0YXJ0OiBoYW5kbGVNYXhpbWl6ZVRvZ2dsZUNsaWNrfXt0aXRsZTogQGxhbmd1YWdlLWludGVncmF0aW9uLXNtYXJ0LXBhbmVsLW1heGltaXplLXJlc3RvcmV9Ij48L2J1dHRvbj4gPGltZyBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc2VsZWN0b3JJY29uVXJpfXtzcmM6IHNlbGVjdG9ySWNvblVyaX0iIC8+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHdpZGdldDogU2VsZWN0b3J9e0B3aWRnZXQtcmVwbGFjZTogdHJ1ZX0iPjwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz0icmVzaXplLWhlYWRlciIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogaGVhZGVySXNWaXNpYmxlfSI+PC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJwYW5lbC1zY3JvbGwtY29udGFpbmVyIiBkYXRhLWJpbmRpbmc9IntkYXRhLXJlZ2lvbi1uYW1lOiByZWdpb25OYW1lfXtkYXRhLXJlZ2lvbi1hZGFwdGVyOiByZWdpb25UeXBlfXtAdmFyOiBzY3JvbGxSZWdpb25FbGVtZW50fXtAZXZlbnQtb25zY3JvbGw6IGhhbmRsZVNjcm9sbENoYW5nZX0iPjwvZGl2PiA8ZGl2IGNsYXNzPSJpbnRlZ3JhdGlvbi1vdmVybGF5IiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogb3ZlcmxheUlzVmlzaWJsZX0iPjwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/IWantToMenu/IWantToMenuButtonView.html","html","PGJ1dHRvbiBjbGFzcz0id3RtLWJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHNob3dNZW51fXtAdGV4dDogbWVudVRpdGxlfXtAZXZlbnQtb25jbGljazogaGFuZGxlQnV0dG9uQ2xpY2t9IiB0YWJpbmRleD0iMCI+PC9idXR0b24+IDxkaXYgY2xhc3M9Ind0bS1saXN0LWNvbnRhaW5lciIgZGF0YS1yZWdpb24tbmFtZT0iSVdhbnRUb01lbnVSZWdpb24iPjwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/IWantToMenu/IWantToMenuView.html","html","DQo8ZGl2IGNsYXNzPSJ3dG0tbGlzdCIgZGF0YS1iaW5kaW5nPSJ7QGNsYXNzLW1vYmlsZS1tb2RlOiBtb2JpbGVNb2RlfSI+IDxoMiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogbW9iaWxlTW9kZX17QHRleHQ6IG1lbnVUaXRsZX17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZU1vYmlsZU1vZGVIZWFkZXJDbGlja30iPjwvaDI+IDxkaXYgY2xhc3M9IndhbnR0b21lbnUtbm8taXRlbXMiIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IHZpc2libGVNZW51SXRlbXN9e0B0ZXh0OiBAbGFuZ3VhZ2UtbWVudS1uby1pdGVtc30iPjwvZGl2PiA8dWwgY2xhc3M9Imxpc3QtbWVudSBoYXMtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogdmlzaWJsZU1lbnVJdGVtc30iPiA8bGkgY2xhc3M9Imxpc3QtbWVudS1pdGVtIG5vLWl0ZW1zIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLW1lbnUtbm8taXRlbXN9Ij48L2xpPiA8L3VsPiA8dWwgY2xhc3M9Imxpc3QtbWVudSBoYXMtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHZpc2libGVNZW51SXRlbXN9e0Bzb3VyY2U6IHZpc2libGVNZW51SXRlbXN9Ij4gPGxpIGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogdmlzaWJsZU1lbnVJdGVtc30iPiA8YnV0dG9uIGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZU1lbnVJdGVtQ2xpY2t9Ij4gPGltZyBjbGFzcz0ibGlzdC1tZW51LWljb24iIGRhdGEtYmluZGluZz0ie3NyYzogaWNvblVyaX0iIGFsdD0iICIgLz4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1uYW1lIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogdGV4dH0iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXNjIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogZGVzY3JpcHRpb259e0B0ZXh0OiBkZXNjcmlwdGlvbn0iPjwvc3Bhbj4gPC9idXR0b24+IDwvbGk+IDwvdWw+IDxkaXYgY2xhc3M9Im1lbnUiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBtb2JpbGVNb2RlfXtAd2lkZ2V0OiBNb2JpbGVTZXR0aW5nc01lbnVXaWRnZXR9e0B3aWRnZXQtY29udGV4dDogQGNvbnRleHR9e0B3aWRnZXQtcmVxdWlyZWQ6IGZhbHNlfSINCiAgICAgICAgIGRhdGEtbWVudS1pZD0iTW9iaWxlU2V0dGluZ3NNZW51Ig0KICAgICAgICAgZGF0YS1tZW51LXRlbXBsYXRlPSJNYXBwaW5nL2luZnJhc3RydWN0dXJlL21lbnVzL01lbnVIeXBlcmxpbmtWaWV3Lmh0bWwiPjwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/LayerList/LayerListView.html","html","PGRpdiBjbGFzcz0icmVzdWx0cy1saXN0LWFjdGlvbnMtd2lkZ2V0IiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogdmlld0luaXRpYWxpemVkfXtAd2lkZ2V0OiBMYXllckxpc3RBY3Rpb25zV2lkZ2V0fXtAd2lkZ2V0LWNvbnRleHQ6IEBjb250ZXh0fXtAd2lkZ2V0LXJlcXVpcmVkOiBmYWxzZX0iDQogICAgIGRhdGEtbWVudS1pZD0iTGF5ZXJMaXN0QWN0aW9ucyIgZGF0YS1tZW51LXRlbXBsYXRlPSJNYXBwaW5nL2luZnJhc3RydWN0dXJlL21lbnVzL01lbnVIeXBlcmxpbmtWaWV3Lmh0bWwiPjwvZGl2PiA8ZGl2IGNsYXNzPSJsYXllci10aGVtZS1zd2l0Y2hlciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGxheWVyVGhlbWVzfSI+IDxzZWxlY3QgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogbGF5ZXJUaGVtZXN9e0B2YWx1ZTogYWN0aXZlTGF5ZXJUaGVtZX17dGl0bGU6IEBsYW5ndWFnZS1sYXllcmxpc3QtdGhlbWUtc2VsZWN0b3J9Ij4gPG9wdGlvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBsYXllclRoZW1lc317QHRleHQ6IGRpc3BsYXlOYW1lfXtAYXR0YWNoOiBAY29udGV4dH0iIC8+IDwvc2VsZWN0PiA8L2Rpdj4gPGRpdiBjbGFzcz0ibGF5ZXItbGlzdCIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogbGF5ZXJMaXN0SXRlbXN9e0B2aXNpYmxlOiB2aWV3SW5pdGlhbGl6ZWR9Ij4gPHVsIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGxheWVyTGlzdEl0ZW1zfSI+IDxsaSBjbGFzcz0ibGF5ZXIgbGF5ZXItaW5mbyBwYXJlbnQtbGF5ZXIiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBkaXNwbGF5SXRlbX17QGNsYXNzLWxheWVyLWVuYWJsZWQ6IGluVmlzaWJsZVNjYWxlUmFuZ2V9e0Bub2NsYXNzLWxheWVyLWRpc2FibGVkOiBpblZpc2libGVTY2FsZVJhbmdlfSI+IDxkaXYgY2xhc3M9ImxheWVyLWl0ZW0tZXhwYW5kZXIiPjxidXR0b24gY2xhc3M9InRyZWUtZXhwYW5kZXIiIGRhdGEtYmluZGluZz0ie3RpdGxlOiBsYXllckZvbGRlclRvZ2dsZVRvb2x0aXB9e0B2aXNpYmxlOiBoYXNEaXNwbGF5ZWRDaGlsZHJlbn17QGNsYXNzLWV4cGFuZGVkOiBpc0V4cGFuZGVkfXtAbm9jbGFzcy1jb2xsYXBzZWQ6IGlzRXhwYW5kZWR9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVFeHBhbmRlckNsaWNrfSI+PC9idXR0b24+PC9kaXY+IDxzcGFuIGNsYXNzPSJsYXllci1hY3Rpb25zIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogZW5hYmxlTGF5ZXJBY3Rpb25zfSI+PGJ1dHRvbiBjbGFzcz0iY2hldnJvbi1yaWdodC0xNiIgZGF0YS1iaW5kaW5nPSJ7dGl0bGU6IEBsYW5ndWFnZS1sYXllci1hY3Rpb25zLXRvb2x0aXB9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVMYXllckFjdGlvbnN9Ij48L2J1dHRvbj48L3NwYW4+IDxzcGFuIGNsYXNzPSJ3aWRnZXQiIGRhdGEtYmluZGluZz0ie0B3aWRnZXQ6IFRyYW5zcGFyZW5jeVNsaWRlcn17QHdpZGdldC1jb250ZXh0OiBAY29udGV4dH17QHdpZGdldC1yZXF1aXJlZDogZmFsc2V9e0B2aXNpYmxlOiBjYW5BZGp1c3RPcGFjaXR5fSI+PC9zcGFuPiA8ZGl2IGNsYXNzPSJsYXllci1jb250ZW50cyI+IDxzcGFuIGNsYXNzPSJsYXllci1pdGVtLWN0cmwiPiA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGhhc1JhZGlvVG9nZ2xlfXtAZGlzYWJsZWQ6IGhhc1JhZGlvVG9nZ2xlfXtjaGVja2VkOiBpc1Zpc2libGV9e0BldmVudC1vbmNsaWNrOiBzZXRJdGVtVmlzaWJpbGl0eX17dGl0bGU6IGxheWVyVG9nZ2xlVG9vbHRpcH0iIC8+IDxpbnB1dCB0eXBlPSJyYWRpbyIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGhhc1JhZGlvVG9nZ2xlfXtAZW5hYmxlZDogaGFzUmFkaW9Ub2dnbGV9e25hbWU6IHJhZGlvR3JvdXB9e2NoZWNrZWQ6IGlzVmlzaWJsZX17QGV2ZW50LW9uY2xpY2s6IHNldEl0ZW1WaXNpYmlsaXR5RXhjbHVzaXZlfXt0aXRsZTogbGF5ZXJUb2dnbGVUb29sdGlwfSIgLz4gPC9zcGFuPiA8c3BhbiBjbGFzcz0ibGF5ZXItaXRlbS1jdHJsIGxheWVyLWxpc3QtbWFwc2VydmljZS1pY29uIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaWNvblVyaX0iPjxpbWcgZGF0YS1iaW5kaW5nPSJ7YWx0OiBpY29uVG9vbHRpcH17c3JjOiBpY29uVXJpfSIgLz48L3NwYW4+IDxzcGFuIGNsYXNzPSJsYXllci1pdGVtLWN0cmwiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBsZWdlbmRJc1Zpc2libGV9Ij48YnV0dG9uIGNsYXNzPSJsYXllci1saXN0LWxlZ2VuZC1pY29uIiBkYXRhLWJpbmRpbmc9Intpbm5lckhUTUw6IGxlZ2VuZFN3YXRjaH17dGl0bGU6IGxlZ2VuZFRvb2x0aXB9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVMZWdlbmRFeHBhbmRlckNsaWNrfSI+PC9idXR0b24+PC9zcGFuPiA8c3BhbiBjbGFzcz0iZGlzcGxheS1uYW1lIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogbmFtZX17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUV4cGFuZGVyQ2xpY2t9IiBpZD0iZGlzcGxheS1uYW1lIj48L3NwYW4+IDwvZGl2PiA8L2xpPiA8bGkgY2xhc3M9ImxheWVyIiByb2xlPSJ0cmVlaXRlbSI+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGxlZ2VuZElzVmlzaWJsZX0iPiA8dWwgY2xhc3M9ImxlZ2VuZC1saXN0IiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogZXhwYW5kTGVnZW5kfXtAc291cmNlOiBsZWdlbmRJdGVtc317QHRlbXBsYXRlOiBNYXBwaW5nL21vZHVsZXMvTGF5ZXJMaXN0L1RlbXBsYXRlcy9MYXllckxpc3RMZWdlbmRJdGVtVGVtcGxhdGUuaHRtbH0iPjwvdWw+IDwvZGl2PiA8ZGl2IGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpc0V4cGFuZGVkfXtAc291cmNlOiBvbkRlbWFuZEl0ZW1Db2xsZWN0aW9ufXtAdGVtcGxhdGU6IE1hcHBpbmcvbW9kdWxlcy9MYXllckxpc3QvVGVtcGxhdGVzL0xheWVyTGlzdEl0ZW1UZW1wbGF0ZS5odG1sfSI+PC9kaXY+IDwvbGk+IDwvdWw+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/LayerList/LayerActions/LayerActionsView.html","html","PGRpdiBjbGFzcz0icGFuZWwtZ3JvdXAgbm8taXRlbSIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogdmlzaWJsZU1lbnVJdGVtc317QHRleHQ6IEBsYW5ndWFnZS1sYXllcmxpc3Qtbm8tZmVhdHVyZS1hY3Rpb25zfSI+PC9kaXY+IDxkaXYgY2xhc3M9InBhbmVsLWdyb3VwIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogdmlzaWJsZU1lbnVJdGVtc317QHNvdXJjZTogdmlzaWJsZU1lbnVJdGVtc30iPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUgYWN0aXZlIGhhcy1pY29uIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiB2aXNpYmxlTWVudUl0ZW1zfXtAZW5hYmxlZDogY2FuRXhlY3V0ZX0iPiA8YnV0dG9uIGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9ubW91c2VvdmVyOiBnZXREZXNjcmlwdGlvbn17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZU1lbnVJdGVtQ2xpY2t9Ij4gPGltZyBjbGFzcz0ibGlzdC1tZW51LWljb24iIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpY29uVXJpfXtzcmM6IGljb25Vcml9IiBhbHQ9IiAiPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LWRldGFpbHMiPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiB0ZXh0fSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LWRlc2MiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkZXNjcmlwdGlvbn0iPjwvc3Bhbj4gPC9zcGFuPiA8L2J1dHRvbj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/LayerList/Templates/LayerListItemTemplate.html","html","PHVsIGNsYXNzPSJsYXllcnMiIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IG9uRGVtYW5kSXRlbUNvbGxlY3Rpb259Ij4gPGxpIGNsYXNzPSJsYXllciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGRpc3BsYXlJdGVtfXtAbm9jbGFzcy1sYXllci1pbnZpc2libGU6IHBhcmVudEVmZmVjdGl2ZWx5VmlzaWJsZX0iPiA8ZGl2IGNsYXNzPSJsYXllci1pdGVtLWV4cGFuZGVyIj48YnV0dG9uIGNsYXNzPSJ0cmVlLWV4cGFuZGVyIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaGFzRGlzcGxheWVkQ2hpbGRyZW59e0BjbGFzcy1leHBhbmRlZDogaXNFeHBhbmRlZH17QG5vY2xhc3MtY29sbGFwc2VkOiBpc0V4cGFuZGVkfXtAZXZlbnQtb25jbGljazogaGFuZGxlRXhwYW5kZXJDbGlja317dGl0bGU6bGF5ZXJGb2xkZXJUb2dnbGVUb29sdGlwfSI+PC9idXR0b24+PC9kaXY+IDxkaXYgY2xhc3M9ImxheWVyLWluZm8iIGRhdGEtYmluZGluZz0ie0BjbGFzcy1sYXllci1lbmFibGVkOiBpblZpc2libGVTY2FsZVJhbmdlfXtAbm9jbGFzcy1sYXllci1kaXNhYmxlZDogaW5WaXNpYmxlU2NhbGVSYW5nZX0iPiA8ZGl2IGNsYXNzPSJsYXllci1jb250ZW50cyIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW1vdXNlZG93bjogaGFuZGxlTW91c2VEb3dufXtAZXZlbnQtbW91c2V1cDogaGFuZGxlTW91c2VVcH17QGV2ZW50LXRvdWNoc3RhcnQ6IGhhbmRsZVRvdWNoU3RhcnR9e0BldmVudC10b3VjaGVuZDogaGFuZGxlVG91Y2hFbmR9Ij4gPHNwYW4gY2xhc3M9ImxheWVyLWl0ZW0tY3RybCI+IDxpbnB1dCB0eXBlPSJjaGVja2JveCIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogaGFzUmFkaW9Ub2dnbGV9e0BkaXNhYmxlZDogaGFzUmFkaW9Ub2dnbGV9e2NoZWNrZWQ6IGlzVmlzaWJsZX17ZGlzYWJsZWQ6IGNhbk5vdEFzc2lnblZpc2liaWxpdHl9e0BldmVudC1vbmNsaWNrOiBzZXRJdGVtVmlzaWJpbGl0eX17dGl0bGU6IGxheWVyVG9nZ2xlVG9vbHRpcH0iIC8+IDxpbnB1dCB0eXBlPSJyYWRpbyIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGhhc1JhZGlvVG9nZ2xlfXtAZW5hYmxlZDogaGFzUmFkaW9Ub2dnbGV9e25hbWU6IHJhZGlvR3JvdXB9e2NoZWNrZWQ6IGlzVmlzaWJsZX17ZGlzYWJsZWQ6IGNhbk5vdEFzc2lnblZpc2liaWxpdHl9e0BldmVudC1vbmNsaWNrOiBzZXRJdGVtVmlzaWJpbGl0eUV4Y2x1c2l2ZX17dGl0bGU6IGxheWVyVG9nZ2xlVG9vbHRpcH0iIC8+IDwvc3Bhbj4gPHNwYW4gY2xhc3M9ImxheWVyLWl0ZW0tY3RybCBsYXllci1saXN0LWxheWVyLWljb24iIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpY29uVXJpfSI+PGltZyBkYXRhLWJpbmRpbmc9InthbHQ6IGljb25Ub29sdGlwfXtzcmM6IGljb25Vcml9IiAvPjwvc3Bhbj4gPHNwYW4gY2xhc3M9ImxheWVyLWl0ZW0tY3RybCIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGxlZ2VuZElzVmlzaWJsZX0iPiA8c3BhbiBjbGFzcz0ibGF5ZXItbGlzdC1sZWdlbmQtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7aW5uZXJIVE1MOiBsZWdlbmRTd2F0Y2h9e3RpdGxlOiBsZWdlbmRUb29sdGlwfXtAaGlkZGVuOiBsZWdlbmRIYXNNdWx0aXBsZUl0ZW1zfSI+PC9zcGFuPiA8YnV0dG9uIGNsYXNzPSJsYXllci1saXN0LWxlZ2VuZC1pY29uIiBkYXRhLWJpbmRpbmc9Intpbm5lckhUTUw6IGxlZ2VuZFN3YXRjaH17dGl0bGU6IGxlZ2VuZFRvb2x0aXB9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVMZWdlbmRFeHBhbmRlckNsaWNrfXtAdmlzaWJsZTogbGVnZW5kSGFzTXVsdGlwbGVJdGVtc30iPjwvYnV0dG9uPiA8L3NwYW4+IDxzcGFuIGNsYXNzPSJkaXNwbGF5LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBuYW1lfXtAZXZlbnQtb25jbGljazogaGFuZGxlRXhwYW5kZXJDbGlja30iIGlkPSJkaXNwbGF5LW5hbWUyIj48L3NwYW4+IDwvZGl2PiA8ZGl2IGNsYXNzPSJ3aWRnZXQiIGRhdGEtYmluZGluZz0ie0B3aWRnZXQ6IFRyYW5zcGFyZW5jeVNsaWRlcn17QHdpZGdldC1jb250ZXh0OiBAY29udGV4dH17QHdpZGdldC1yZXF1aXJlZDogZmFsc2V9e0B2aXNpYmxlOiBjYW5BZGp1c3RPcGFjaXR5fSI+PC9kaXY+IDxkaXYgY2xhc3M9ImxheWVyLWFjdGlvbnMiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBlbmFibGVMYXllckFjdGlvbnN9Ij48YnV0dG9uIGNsYXNzPSJjaGV2cm9uLXJpZ2h0LTE2IiBkYXRhLWJpbmRpbmc9Int0aXRsZTogbGF5ZXJBY3Rpb25zVG9vbHRpcH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUxheWVyQWN0aW9uc30iPjwvYnV0dG9uPjwvZGl2PiA8L2Rpdj4gPGRpdiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogbGVnZW5kSXNWaXNpYmxlfSI+IDx1bCBjbGFzcz0ibGVnZW5kLWxpc3QiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBleHBhbmRMZWdlbmR9e0Bzb3VyY2U6IGxlZ2VuZEl0ZW1zfXtAdGVtcGxhdGU6IE1hcHBpbmcvbW9kdWxlcy9MYXllckxpc3QvVGVtcGxhdGVzL0xheWVyTGlzdExlZ2VuZEl0ZW1UZW1wbGF0ZS5odG1sfSI+PC91bD4gPC9kaXY+IDx1bCBjbGFzcz0ibGF5ZXJzIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaXNFeHBhbmRlZH17QHNvdXJjZTogb25EZW1hbmRJdGVtQ29sbGVjdGlvbn17QHRlbXBsYXRlOiBNYXBwaW5nL21vZHVsZXMvTGF5ZXJMaXN0L1RlbXBsYXRlcy9MYXllckxpc3RJdGVtVGVtcGxhdGUuaHRtbH0iPjwvdWw+IDwvbGk+IDwvdWw+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/LayerList/Templates/LayerListLegendItemTemplate.html","html","PHVsPiA8bGkgY2xhc3M9ImxlZ2VuZC1pdGVtIGxlYWYgY2xlYXIiIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGxlZ2VuZEl0ZW1zfSIgdGFiaW5kZXg9IjAiPiA8ZGl2IGNsYXNzPSJsZWdlbmQtaXRlbSBjaGlsZHJlbiBsYXllci1jb250ZW50cyIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGlzVmlzaWJsZUluTGF5ZXJMaXN0TGVnZW5kfSI+IDxkaXYgY2xhc3M9ImxlZ2VuZC1zd2F0Y2giIGRhdGEtYmluZGluZz0ie2lubmVySFRNTDogc3dhdGNoRWxlbWVudH17dGl0bGU6IGxhYmVsfSI+PC9kaXY+IDxzcGFuIGNsYXNzPSJsZWdlbmQtaXRlbS1sYWJlbCIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGxhYmVsfXt0aXRsZTogbGFiZWx9Ij48L3NwYW4+IDwvZGl2PiA8L2xpPiA8L3VsPiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/LayerList/Widgets/TransparencySliderView.html","html","PGRpdiBjbGFzcz0id2lkZ2V0Ij4gPGRpdiBjbGFzcz0idHJhbnNwYXJlbmN5LXNsaWRlciIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogdFNsaWRlckVsZW1lbnR9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVUcmFuc3BhcmVuY3lTbGlkZXJDbGlja30iPjwvZGl2PiA8L2Rpdj4g");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/LayerSelector/LayerSelectorView.html","html","PHVsIGNsYXNzPSJsYXllci1zZWxlY3Rvci1idXR0b25zIj4gPGxpPjxidXR0b24gY2xhc3M9ImJ1dHRvbiBsYXllci1hY3Rpb25zLWJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHNlbGVjdEFsbEJ1dHRvblRleHR9e3RpdGxlOiBzZWxlY3RBbGxCdXR0b25UaXRsZX17QGV2ZW50LW9uY2xpY2s6IHNlbGVjdEFsbExheWVyc30iPjwvYnV0dG9uPjwvbGk+IDxsaT48YnV0dG9uIGNsYXNzPSJidXR0b24gbGF5ZXItYWN0aW9ucy1idXR0b24iIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBjbGVhckFsbEJ1dHRvblRleHR9e3RpdGxlOiBjbGVhckFsbEJ1dHRvblRpdGxlfXtAZXZlbnQtb25jbGljazogY2xlYXJBbGxMYXllcnN9Ij48L2J1dHRvbj48L2xpPiA8L3VsPiA8ZGl2IGNsYXNzPSJsYXllci1saXN0Ij4gPGRpdiBjbGFzcz0iaWRlbnRpZnktbGF5ZXJzIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBpdGVtc317QHRlbXBsYXRlOiBNYXBwaW5nL21vZHVsZXMvTGF5ZXJTZWxlY3Rvci9UZW1wbGF0ZXMvTGF5ZXJTZWxlY3Rvckl0ZW1UZW1wbGF0ZS5odG1sfSI+PC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/LayerSelector/Templates/LayerSelectorItemTemplate.html","html","PHVsIGNsYXNzPSJsYXllcnMiIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGl0ZW1zfSI+IDxsaSBjbGFzcz0ibGF5ZXIiPiA8ZGl2IGNsYXNzPSJsYXllci1pdGVtLWV4cGFuZGVyIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaXNGb2xkZXJ9Ij4gPGJ1dHRvbiBjbGFzcz0idHJlZS1leHBhbmRlciIgZGF0YS1iaW5kaW5nPSJ7QGNsYXNzLWV4cGFuZGVkOiBpc0V4cGFuZGVkfXtAbm9jbGFzcy1jb2xsYXBzZWQ6IGlzRXhwYW5kZWR9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVFeHBhbmRlckNsaWNrfXt0aXRsZTogZXhwYW5kZXJUb29sdGlwfSI+PC9idXR0b24+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsYXllci1pbmZvIj4gPGRpdiBjbGFzcz0ibGF5ZXItY29udGVudHMiPiA8c3BhbiBjbGFzcz0ibGF5ZXItaXRlbS1jdHJsIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBpc0ZvbGRlcn0iPiA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGRhdGEtYmluZGluZz0ie0B2YWx1ZTogaXNFbmFibGVkfXtjaGVja2VkOiBpc0VuYWJsZWR9e3RpdGxlOiBzdGF0ZVRvZ2dsZVRvb2x0aXB9IiAvPiA8L3NwYW4+IDxzcGFuIGNsYXNzPSJsYXllci1pdGVtLWN0cmwgbGF5ZXItbGlzdC1sYXllci1pY29uIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaWNvblVyaX0iPjxpbWcgZGF0YS1iaW5kaW5nPSJ7YWx0OiBpY29uVG9vbHRpcH17c3JjOiBpY29uVXJpfSIgLz48L3NwYW4+IDxzcGFuIGNsYXNzPSJkaXNwbGF5LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBuYW1lfSI+PC9zcGFuPiA8L2Rpdj4gPC9kaXY+IDx1bCBjbGFzcz0ibGF5ZXJzIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaXNFeHBhbmRlZH17QHNvdXJjZTogaXRlbXN9e0B0ZW1wbGF0ZTogTWFwcGluZy9tb2R1bGVzL0xheWVyU2VsZWN0b3IvVGVtcGxhdGVzL0xheWVyU2VsZWN0b3JJdGVtVGVtcGxhdGUuaHRtbH0iPjwvdWw+IDwvbGk+IDwvdWw+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Legend/LegendView.html","html","PGRpdiBjbGFzcz0icmVzdWx0cy1saXN0LWFjdGlvbnMtd2lkZ2V0IiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogdmlld0luaXRpYWxpemVkfXtAd2lkZ2V0OiBMZWdlbmRBY3Rpb25zV2lkZ2V0fXtAd2lkZ2V0LWNvbnRleHQ6IEBjb250ZXh0fXtAd2lkZ2V0LXJlcXVpcmVkOiBmYWxzZX0iDQogICAgIGRhdGEtbWVudS1pZD0iTGVnZW5kQWN0aW9ucyIgZGF0YS1tZW51LXRlbXBsYXRlPSJNYXBwaW5nL2luZnJhc3RydWN0dXJlL21lbnVzL01lbnVIeXBlcmxpbmtWaWV3Lmh0bWwiPjwvZGl2PiA8ZGl2IGNsYXNzPSJuby1yZXN1bHRzIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBoYXNWaXNpYmxlSXRlbXN9Ij4gPHAgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1sZWdlbmQtbm8taXRlbXN9Ij48L3A+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsYXllci1saXN0IGxlZ2VuZCIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGhhc1Zpc2libGVJdGVtc317QHNvdXJjZTogcm9vdE5vZGV9Ij4gPGRpdiBjbGFzcz0ibGVnZW5kLWxpc3QiIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IHJvb3ROb2RlfSI+IDx1bCBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBjaGlsZHJlbn17QHRlbXBsYXRlOiBNYXBwaW5nL21vZHVsZXMvTGVnZW5kL1RlbXBsYXRlcy9MZWdlbmRJdGVtTm9kZS5odG1sfSI+IDwvdWw+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Legend/Templates/LegendItem.html","html","PGRpdiBjbGFzcz0ibGVnZW5kLWl0ZW0gbGVhZiBjbGVhciI+IDxkaXYgY2xhc3M9ImxlZ2VuZC1zd2F0Y2giIGRhdGEtYmluZGluZz0ie2lubmVySFRNTDogc3dhdGNoRWxlbWVudH17dGl0bGU6IGxhYmVsfSI+PC9kaXY+IDxzcGFuIGNsYXNzPSJsZWdlbmQtaXRlbS1sYWJlbCIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGxhYmVsfXt0aXRsZTogbGFiZWx9Ij48L3NwYW4+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Legend/Templates/LegendItemGroup.html","html","PGRpdiBjbGFzcz0ibGVnZW5kLWl0ZW0gZ3JvdXAgY2xlYXIiPiA8ZGl2IGNsYXNzPSJsZWdlbmQtaXRlbS1wYXJlbnQiPiA8YnV0dG9uIGRhdGEtYmluZGluZz0ie2NsYXNzOiBleHBhbmRlckNsYXNzfXtAdmlzaWJsZTogY2hpbGRyZW59e0BldmVudC1vbmNsaWNrOiBoYW5kbGVTbGlkZVRvZ2dsZUNsaWNrfXt0aXRsZTogbGFiZWx9Ij4gPHNwYW4gY2xhc3M9ImxlZ2VuZC1pdGVtLWxhYmVsIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogbGFiZWx9e3RpdGxlOiBsYWJlbH0iPjwvc3Bhbj48L2J1dHRvbj4gPC9kaXY+IDx1bCBjbGFzcz0ibGVnZW5kLWl0ZW0gY2hpbGRyZW4iIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGNoaWxkcmVufXtAdmlzaWJsZTogZXhwYW5kZWR9e0B0ZW1wbGF0ZTogTWFwcGluZy9tb2R1bGVzL0xlZ2VuZC9UZW1wbGF0ZXMvTGVnZW5kSXRlbU5vZGUuaHRtbH0iPiA8L3VsPiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Legend/Templates/LegendItemNode.html","html","PGxpIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IEBjb250ZXh0fXtAdmlzaWJsZTogaXNWaXNpYmxlfXtAdGVtcGxhdGUtc2VsZWN0b3I6IHRlbXBsYXRlVHlwZX0iPiA8ZGl2IGNsYXNzPSJ0ZW1wbC1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBzaW5nbGUtaXRlbX17QHRlbXBsYXRlOiBNYXBwaW5nL21vZHVsZXMvTGVnZW5kL1RlbXBsYXRlcy9MZWdlbmRJdGVtLmh0bWx9Ij48L2Rpdj4gPGRpdiBjbGFzcz0idGVtcGwtZ3JvdXAiIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IGdyb3VwfXtAdGVtcGxhdGU6IE1hcHBpbmcvbW9kdWxlcy9MZWdlbmQvVGVtcGxhdGVzL0xlZ2VuZEl0ZW1Hcm91cC5odG1sfSI+PC9kaXY+IDwvbGk+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Log/LogStatusView.html","html","PGRpdiBjbGFzcz0ibG9nLXN0YXR1cyI+IDxkaXYgY2xhc3M9ImJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGxvZ0VudHJpZXN9Ij4gPGEgY2xhc3M9ImxvZy12aWV3LWJ1dHRvbiIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2t9Ij48L2E+IDwvZGl2PiA8L2Rpdj4g");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Log/LogView.html","html","PGRpdiBjbGFzcz0ibG9ndmlldyI+IDxkaXYgY2xhc3M9ImxvZ3ZpZXctaGVhZGVyIj4gPGgyIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbG9nLXRpdGxlfSI+PC9oMj4gPGRpdiBjbGFzcz0ibG9ndmlldy1oZWFkZXItYnV0dG9ucyI+IDxidXR0b24gY2xhc3M9ImJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrQ2xlYXJ9e0B2aXNpYmxlOiBsb2dFbnRyaWVzfXtAdGV4dDogQGxhbmd1YWdlLWxvZy1jbGVhcn0iPjwvYnV0dG9uPiA8YnV0dG9uIGNsYXNzPSJidXR0b24iIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0hpZGV9e0B0ZXh0OiBAbGFuZ3VhZ2UtbG9nLWhpZGV9Ij48L2J1dHRvbj4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsb2d2aWV3LWlubmVyIj4gIDxkaXYgY2xhc3M9Im5vLXJlc3VsdHMiIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGxvZ0VudHJpZXN9e0B0ZXh0OiBAbGFuZ3VhZ2UtbG9nLW5vLWVudHJpZXN9Ij48L2Rpdj4gIDx0YWJsZSBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogbG9nRW50cmllc30iPiA8dGhlYWQ+IDx0ciB0YWJpbmRleD0iMCI+IDx0aCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWxvZy1sZXZlbH0iPjwvdGg+IDx0aCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWxvZy10aW1lc3RhbXB9Ij48L3RoPiA8dGggZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1sb2ctbWVzc2FnZX0iPjwvdGg+IDwvdHI+IDwvdGhlYWQ+IDx0Ym9keSBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBsb2dFbnRyaWVzfSI+IDx0ciB0YWJpbmRleD0iMCIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogbG9nRW50cmllc30iPiA8dGQgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGxldmVsfXtjbGFzc05hbWU6IGNzc0NsYXNzfSI+PC90ZD4gPHRkIGRhdGEtYmluZGluZz0ie0B0ZXh0OiB0aW1lc3RhbXB9e2NsYXNzTmFtZTogY3NzQ2xhc3N9Ij48L3RkPiA8dGQgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG1lc3NhZ2V9e2NsYXNzTmFtZTogY3NzQ2xhc3N9Ij48L3RkPiA8L3RyPiA8L3Rib2R5PiA8L3RhYmxlPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Map/MapHostView.html","html","PGRpdiBjbGFzcz0icmVnaW9uIG1hcC1yZWdpb24iIGRhdGEtcmVnaW9uLW5hbWU9Ik1hcFJlZ2lvbiI+PC9kaXY+IA==");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Map/MapView.html","html","DQo8ZGl2IGNsYXNzPSJtYXAtZXJyb3IiIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IHNob3dNYXB9Ij4gPGRpdiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc2hvd0Vycm9yfSI+IDxoMiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLW1hcC1zaXRlLWluaXRpYWxpemF0aW9uLWZhaWxlZH0iPjwvaDI+IDxwIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLWRlYnVnLWxvZy1rZXlzfSI+PC9wPiA8L2Rpdj4gPGRpdiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc2hvd0F1dGhFcnJvcn0iPiA8aDIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tYXAtc2l0ZS1hdXRob3JpemF0aW9uLWZhaWxlZH0iPjwvaDI+IDxwIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbWFwLXNpdGUtYXV0aG9yaXphdGlvbi1mYWlsZWQtbWVzc2FnZX0iPjwvcD4gPC9kaXY+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHNob3dDcml0aWNhbFNlcnZpY2VzRXJyb3J9Ij4gPGgyIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbWFwLXNpdGUtY3JpdGljYWwtc2VydmljZXMtZmFpbGVkfSI+PC9oMj4gPHAgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tYXAtc2l0ZS1jcml0aWNhbC1zZXJ2aWNlcy1mYWlsZWQtbWVzc2FnZX0iPjwvcD4gPC9kaXY+IDwvZGl2PiA8ZGl2IGlkPSJtYXAtY29udGFpbmVyIiBzdHlsZT0iaGVpZ2h0OiAxMDAlOyB3aWR0aDogMTAwJSIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHNob3dNYXB9Ij4gIDxkaXYgaWQ9Im1hcCIgY2xhc3M9Im1hcCBuZWVkc2NsaWNrIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBtYXBEaXZ9Ij48L2Rpdj4gIDxkaXYgY2xhc3M9InJlZ2lvbiBtYXAtY2VudGVyLXJlZ2lvbiIgZGF0YS1yZWdpb24tbmFtZT0iQ2VudGVyUmVnaW9uIiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLkRpdlN0YWNrUmVnaW9uQWRhcHRlciIgZGF0YS1yZWdpb24tb3B0aW9ucz0iYWN0aXZhdGVWaWV3c0luTGFzdFBvc2l0aW9uPWZhbHNlIj48L2Rpdj4gPGRpdiBjbGFzcz0icmVnaW9uIG1hcC10b3AtbGVmdCIgZGF0YS1yZWdpb24tbmFtZT0iVG9wTGVmdE1hcFJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5EaXZTdGFja1JlZ2lvbkFkYXB0ZXIiIGRhdGEtcmVnaW9uLW9wdGlvbnM9ImFjdGl2YXRlVmlld3NJbkxhc3RQb3NpdGlvbj1mYWxzZSI+PC9kaXY+IDxkaXYgY2xhc3M9InJlZ2lvbiBtYXAtbmF2aWdhdGlvbi1yZWdpb24iIGRhdGEtcmVnaW9uLW5hbWU9Ik5hdmlnYXRpb25NYXBSZWdpb24iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuRGl2U3RhY2tSZWdpb25BZGFwdGVyIiBkYXRhLXJlZ2lvbi1vcHRpb25zPSJhY3RpdmF0ZVZpZXdzSW5MYXN0UG9zaXRpb249ZmFsc2UiPjwvZGl2PiA8ZGl2IGNsYXNzPSJyZWdpb24gbWFwLXRvcC1jZW50ZXIiIGRhdGEtcmVnaW9uLW5hbWU9IlRvcENlbnRlck1hcFJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5EaXZTdGFja1JlZ2lvbkFkYXB0ZXIiIGRhdGEtcmVnaW9uLW9wdGlvbnM9ImFjdGl2YXRlVmlld3NJbkxhc3RQb3NpdGlvbj1mYWxzZSI+PC9kaXY+IDxkaXYgY2xhc3M9InJlZ2lvbiBtYXAtdG9wLXJpZ2h0IiBkYXRhLXJlZ2lvbi1uYW1lPSJUb3BSaWdodE1hcFJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5EaXZTdGFja1JlZ2lvbkFkYXB0ZXIiIGRhdGEtcmVnaW9uLW9wdGlvbnM9ImFjdGl2YXRlVmlld3NJbkxhc3RQb3NpdGlvbj1mYWxzZSI+PC9kaXY+IDxkaXYgY2xhc3M9InJlZ2lvbiBtYXAtYmFzZW1hcC1yZWdpb24iIGRhdGEtcmVnaW9uLW5hbWU9IkJhc2VtYXBNYXBSZWdpb24iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuRGl2U3RhY2tSZWdpb25BZGFwdGVyIiBkYXRhLXJlZ2lvbi1vcHRpb25zPSJhY3RpdmF0ZVZpZXdzSW5MYXN0UG9zaXRpb249ZmFsc2UiPjwvZGl2PiA8ZGl2IGNsYXNzPSJyZWdpb24gbWFwLW1pZGRsZS1yaWdodCIgZGF0YS1yZWdpb24tbmFtZT0iTWlkZGxlUmlnaHRNYXBSZWdpb24iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuRGl2U3RhY2tSZWdpb25BZGFwdGVyIiBkYXRhLXJlZ2lvbi1vcHRpb25zPSJhY3RpdmF0ZVZpZXdzSW5MYXN0UG9zaXRpb249ZmFsc2UiPjwvZGl2PiA8ZGl2IGNsYXNzPSJyZWdpb24gbWFwLWJvdHRvbS1yaWdodCIgZGF0YS1yZWdpb24tbmFtZT0iQm90dG9tUmlnaHRNYXBSZWdpb24iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuRGl2U3RhY2tSZWdpb25BZGFwdGVyIiBkYXRhLXJlZ2lvbi1vcHRpb25zPSJhY3RpdmF0ZVZpZXdzSW5MYXN0UG9zaXRpb249ZmFsc2UiPjwvZGl2PiA8ZGl2IGNsYXNzPSJyZWdpb24gbWFwLWJvdHRvbS1jZW50ZXIiIGRhdGEtcmVnaW9uLW5hbWU9IkJvdHRvbUNlbnRlck1hcFJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5EaXZTdGFja1JlZ2lvbkFkYXB0ZXIiIGRhdGEtcmVnaW9uLW9wdGlvbnM9ImFjdGl2YXRlVmlld3NJbkxhc3RQb3NpdGlvbj1mYWxzZSI+PC9kaXY+IDxkaXYgY2xhc3M9InJlZ2lvbiBtYXAtYm90dG9tLWxlZnQiIGRhdGEtcmVnaW9uLW5hbWU9IkJvdHRvbUxlZnRNYXBSZWdpb24iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuRGl2U3RhY2tSZWdpb25BZGFwdGVyIiBkYXRhLXJlZ2lvbi1vcHRpb25zPSJhY3RpdmF0ZVZpZXdzSW5MYXN0UG9zaXRpb249ZmFsc2UiPjwvZGl2PiA8ZGl2IGNsYXNzPSJyZWdpb24gbWFwLW1pZGRsZS1sZWZ0IiBkYXRhLXJlZ2lvbi1uYW1lPSJNaWRkbGVMZWZ0TWFwUmVnaW9uIiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLkRpdlN0YWNrUmVnaW9uQWRhcHRlciIgZGF0YS1yZWdpb24tb3B0aW9ucz0iYWN0aXZhdGVWaWV3c0luTGFzdFBvc2l0aW9uPWZhbHNlIj48L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/MapTips/MapCalloutView.html","html","DQo8ZGl2IGNsYXNzPSJtYXAtY2FsbG91dCI+IDxkaXYgY2xhc3M9Im1hcC1jYWxsb3V0LWhlYWRlciI+IDxidXR0b24gY2xhc3M9InBhbmVsLWhlYWRlci1idXR0b24gcmlnaHQgY2xvc2UtMTYiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbG9zZX17dGl0bGU6IEBsYW5ndWFnZS1jb21tb24tY2xvc2V9Ij48L2J1dHRvbj4gPGRpdiBjbGFzcz0ibWFwLWNhbGxvdXQtdGl0bGUiIGRhdGEtYmluZGluZz0ie0Bkb206IHRpdGxlQ29udGVudH0iPjwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz0ibWFwLWNhbGxvdXQtY29udGVudHMiPiA8ZGl2IGRhdGEtYmluZGluZz0ie0Bkb206IGlubmVyQ29udGVudH0iPjwvZGl2PiA8L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9Im1hcC1jYWxsb3V0LXBvaW50ZXIgdW5zZWxlY3RhYmxlIj4gPGRpdiBjbGFzcz0ibWFwLWNhbGxvdXQtcG9pbnRlci1pbWFnZSI+PC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/MapTips/MapTipContent.html","html","PGRpdiBjbGFzcz0ibWFwLXRpcC1jb250ZW50cyI+IDxkaXYgY2xhc3M9IndpZGdldCIgZGF0YS1iaW5kaW5nPSJ7QHdpZGdldDogR2V0RGVzY3JpcHRpb259e0B3aWRnZXQtY29udGV4dDogY3VycmVudEZlYXR1cmV9e0B3aWRnZXQtcmVxdWlyZWQ6IGZhbHNlfXtAaGlkZGVuOiBzaG93Tm9SZXN1bHRzfSI+PC9kaXY+IDxkaXYgY2xhc3M9Im5vbmUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBzZWFyY2hTdWdnZXN0aW9ufXtAdmlzaWJsZTogc2hvd05vUmVzdWx0c30iPjwvZGl2PiA8ZGl2IGNsYXNzPSJidXN5IiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWNvbW1vbi1sb2FkaW5nfXtAdmlzaWJsZTogc2hvd0xvYWRpbmd9Ij48L2Rpdj4gPGRpdiBjbGFzcz0id2lkZ2V0IiBkYXRhLWJpbmRpbmc9IntAd2lkZ2V0OiBNYXBUaXBBY3Rpb25zV2lkZ2V0fXtAd2lkZ2V0LWNvbnRleHQ6IGN1cnJlbnRGZWF0dXJlfXtAd2lkZ2V0LXJlcXVpcmVkOiBmYWxzZX17QGhpZGRlbjogc2hvd05vUmVzdWx0c30iIGRhdGEtbWVudS1pZD0iTWFwVGlwQWN0aW9ucyIgZGF0YS1tZW51LXRlbXBsYXRlPSJNYXBwaW5nL2luZnJhc3RydWN0dXJlL21lbnVzL01lbnVIeXBlcmxpbmtWaWV3Lmh0bWwiPjwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/MapTips/MapTipHeaderView.html","html","PGRpdiBjbGFzcz0ibWFwLXRpcC1oZWFkZXIiIHRhYi1pbmRleD0iMCI+IDxkaXYgY2xhc3M9Im1hcC10aXAtbmF2IiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaGFzTXVsdGlwbGVGZWF0dXJlc30iPiA8ZGl2IGNsYXNzPSJtYXAtdGlwLW5hdi1pbm5lciI+IDxkaXYgY2xhc3M9ImZlYXR1cmUtc2VsZWN0LXdyYXBwZXIiPiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGZlYXR1cmVzfXtAdmFsdWU6IGN1cnJlbnRGZWF0dXJlfXtAZXZlbnQtb25jaGFuZ2U6IGhhbmRsZVNlbGVjdH17dGl0bGU6IEBsYW5ndWFnZS1tYXAtdGlwLXNlbGVjdH0iPiA8b3B0aW9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGZlYXR1cmVzfXtpbm5lckhUTUw6IHBsYWluTGFiZWx9e0BhdHRhY2g6IEBjb250ZXh0fSIgLz4gPC9zZWxlY3Q+IDwvZGl2PiA8ZGl2IGNsYXNzPSJwYWdpbmctY29udHJvbCIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogcHJlc2VudGFibGVGZWF0dXJlc30iPiA8ZGl2IGNsYXNzPSIgcGFnaW5nLWJ1dHRvbnMiIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IHByZXNlbnRhYmxlRmVhdHVyZXN9Ij4gPGJ1dHRvbiBjbGFzcz0icHJldiIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZU1vdmVQcmV2fXt0aXRsZTogQGxhbmd1YWdlLW1hcC10aXAtZmVhdHVyZS1wcmV2fSI+PGltZyBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvcGFnaW5nLWNvbnRyb2wtcHJldmlvdXMtNDQucG5nIiBhbHQ9IiAiLz48L2J1dHRvbj4gPHNwYW4gY2xhc3M9InBhZ2luZy1idXR0b25zLWluZm8iIHRhYmluZGV4PSIwIj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGN1cnJJbmRleFN0YXJ0RnJvbU9uZX0iPjwvc3Bhbj4mbmJzcDs8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLW1hcC10aXAtZmVhdHVyZXMtb2Z9Ij48L3NwYW4+Jm5ic3A7PHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG51bWJlck9mSXRlbXN9Ij48L3NwYW4+IDwvc3Bhbj4gPGJ1dHRvbiBjbGFzcz0ibmV4dCIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZU1vdmVOZXh0fXt0aXRsZTogQGxhbmd1YWdlLW1hcC10aXAtZmVhdHVyZS1uZXh0fSI+PGltZyBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvcGFnaW5nLWNvbnRyb2wtbmV4dC00NC5wbmciIGFsdD0iICIgLz48L2J1dHRvbj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9Im1hcC10aXAtdGl0bGUiPiA8c3BhbiBkYXRhLWJpbmRpbmc9Intpbm5lckhUTUw6IHRpdGxlfSIgdGFiaW5kZXg9IjAiPjwvc3Bhbj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/MapTips/MapTipView.html","html","PGRpdiBjbGFzcz0ibWFwLXRpcC12aWV3Ij4gPGRpdiBjbGFzcz0ibWFwLXRpcC12aWV3LWhlYWRlciI+IDxkaXYgZGF0YS1yZWdpb24tbmFtZT0iTWFwVGlwSGVhZGVyUmVnaW9uIiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLkRpdlJlZ2lvbkFkYXB0ZXIiIHRhYi1pbmRleD0iMCI+PC9kaXY+IDxidXR0b24gY2xhc3M9InBhbmVsLWhlYWRlci1idXR0b24gcmlnaHQgY2xvc2UtMTYiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbG9zZX17dGl0bGU6QGxhbmd1YWdlLW1hcC10aXAtY2xvc2V9Ij48L2J1dHRvbj4gPC9kaXY+IDxkaXYgY2xhc3M9Im1hcC10aXAtdmlldy1jb250ZW50cyIgZGF0YS1yZWdpb24tbmFtZT0iTWFwVGlwQ29udGVudFJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5EaXZSZWdpb25BZGFwdGVyIj48L2Rpdj4gPC9kaXY+IA0K");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Markup/StyleSelector/StyleSelectorLine.html","html","PGRpdiBjbGFzcz0ic3R5bGUtc2VsZWN0b3IgbWFya3VwIHBvbHlsaW5lIj4gPGRpdiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBsaW5lU3R5bGVzfSI+IDxidXR0b24gY2xhc3M9Im1hcmt1cC1zd2F0Y2giIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGxpbmVTdHlsZXN9Ij48L2J1dHRvbj4gPC9kaXY+IDxkaXYgY2xhc3M9ImZvcm0tYnRucyI+IDxidXR0b24gY2xhc3M9ImJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrQ2FuY2VsfXtAdGV4dDogQGxhbmd1YWdlLWNvbW1vbi1jYW5jZWx9Ij48L2J1dHRvbj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Markup/StyleSelector/StyleSelectorPoint.html","html","PGRpdiBjbGFzcz0ic3R5bGUtc2VsZWN0b3IgbWFya3VwIHBvaW50Ij4gPGRpdiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBwb2ludFN0eWxlc30iPiA8YnV0dG9uIGNsYXNzPSJtYXJrdXAtc3dhdGNoIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBwb2ludFN0eWxlc30iPjwvYnV0dG9uPiA8L2Rpdj4gPGRpdiBjbGFzcz0iZm9ybS1idG5zIj4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tDYW5jZWx9e0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLWNhbmNlbH0iPjwvYnV0dG9uPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Markup/StyleSelector/StyleSelectorPolygon.html","html","PGRpdiBjbGFzcz0ic3R5bGUtc2VsZWN0b3IgbWFya3VwIHBvbHlnb24iPiA8ZGl2IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHBvbHlnb25TdHlsZXN9Ij4gPGJ1dHRvbiBjbGFzcz0ibWFya3VwLXN3YXRjaCIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogcG9seWdvblN0eWxlc30iPjwvYnV0dG9uPiA8L2Rpdj4gPGRpdiBjbGFzcz0iZm9ybS1idG5zIj4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tDYW5jZWx9e0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLWNhbmNlbH0iPjwvYnV0dG9uPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Markup/StyleSelector/StyleSelectorText.html","html","PGRpdiBjbGFzcz0ic3R5bGUtc2VsZWN0b3IgbWFya3VwIHRleHQiPiA8ZGl2IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHRleHRTdHlsZXN9Ij4gPGJ1dHRvbiBjbGFzcz0ibWFya3VwLXN3YXRjaCIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogdGV4dFN0eWxlc30iPjwvYnV0dG9uPiA8L2Rpdj4gPGRpdiBjbGFzcz0iZm9ybS1idG5zIj4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tDYW5jZWx9e0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLWNhbmNlbH0iPjwvYnV0dG9uPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Markup/ToolPalettes/DeletePaletteSmall.html","html","PGRpdiBjbGFzcz0idG9vbGJhci10b29sLW1vZGUiPiA8YnV0dG9uIGNsYXNzPSJ0YnRtLWRvbmUiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0RvbmV9Ij4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tZW51LWRvbmV9Ij48L3NwYW4+IDwvYnV0dG9uPiA8ZGl2IGNsYXNzPSJ0YnRtLWxpc3QiPiA8dWwgY2xhc3M9InR3byI+IDxsaT4gPGJ1dHRvbiBjbGFzcz0idGJ0bS1idG4iIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0VkaXR9Ij4gPHNwYW4gY2xhc3M9Imljb24gaWNvbi1kcmF3LWVkaXQtMjQiPjwvc3Bhbj4gPC9idXR0b24+IDxsYWJlbCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXBhbGV0dGUtc21hbGwtZWRpdH0iPjwvbGFiZWw+IDwvbGk+IDxsaT4gPGJ1dHRvbiBjbGFzcz0idGJ0bS1idG4iIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0NsZWFyfXtAZGlzYWJsZWQ6IGNsZWFyRGlzYWJsZWR9Ij4gPHNwYW4gY2xhc3M9Imljb24gaWNvbi1jbGVhci0yNCI+PC9zcGFuPiA8L2J1dHRvbj4gPGxhYmVsIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtdG9vbGJhci1jbGVhci1hbGx9Ij48L2xhYmVsPiA8L2xpPiA8L3VsPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Markup/ToolPalettes/EditPaletteLarge.html","html","PHVsIGNsYXNzPSJtYXJrdXAtZWRpdCI+IDxsaT4gPGJ1dHRvbiBjbGFzcz0idG9vbGJhci1pdGVtIiBkYXRhLWJpbmRpbmc9IntAZGlzYWJsZWQ6IGNoYW5nZVN0eWxlRGlzYWJsZWR9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0NoYW5nZVN0eWxlfXt0aXRsZTogQGxhbmd1YWdlLXRvb2xiYXItbWFya3VwLWNoYW5nZS1tYXJrdXAtc3R5bGUtdG9vbHRpcH0iPiA8c3BhbiBjbGFzcz0iaWNvbiBpY29uLXN3YXRjaC1waWNrZXItMjQiPjwvc3Bhbj4gPHAgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1wYWxldHRlLXNtYWxsLWNoYW5nZS1zdHlsZX0iPjwvcD4gPC9idXR0b24+IDwvbGk+IDwvdWw+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Markup/ToolPalettes/EditPaletteSmall.html","html","PGRpdiBjbGFzcz0idG9vbGJhci10b29sLW1vZGUiPiA8YnV0dG9uIGNsYXNzPSJ0YnRtLWRvbmUiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0RvbmV9Ij4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tZW51LWRvbmV9Ij48L3NwYW4+IDwvYnV0dG9uPiA8ZGl2IGNsYXNzPSJ0YnRtLWxpc3QiPiA8dWwgY2xhc3M9InRocmVlIj4gPGxpPiA8YnV0dG9uIGNsYXNzPSJ0YnRtLWJ0biIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrQ2hhbmdlU3R5bGV9e0BkaXNhYmxlZDogY2hhbmdlU3R5bGVEaXNhYmxlZH0iPiA8c3BhbiBjbGFzcz0iaWNvbiBpY29uLXN3YXRjaC1waWNrZXItMjQiPjwvc3Bhbj4gPC9idXR0b24+IDxsYWJlbCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXBhbGV0dGUtc21hbGwtY2hhbmdlLXN0eWxlfSI+PC9sYWJlbD4gPC9saT4gPGxpPiA8YnV0dG9uIGNsYXNzPSJ0YnRtLWJ0biIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrRGVsZXRlfXtAZGlzYWJsZWQ6IGNsZWFyRGlzYWJsZWR9Ij4gPHNwYW4gY2xhc3M9Imljb24gaWNvbi1kcmF3LWVkaXQtMjQiPjwvc3Bhbj4gPC9idXR0b24+IDxsYWJlbCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXBhbGV0dGUtc21hbGwtZGVsZXRlfSI+PC9sYWJlbD4gPC9saT4gPGxpPiA8YnV0dG9uIGNsYXNzPSJ0YnRtLWJ0biIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrQ2xlYXJ9e0BkaXNhYmxlZDogY2xlYXJEaXNhYmxlZH0iPiA8c3BhbiBjbGFzcz0iaWNvbiBpY29uLWNsZWFyLTI0Ij48L3NwYW4+IDwvYnV0dG9uPiA8bGFiZWwgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS10b29sYmFyLWNsZWFyLWFsbH0iPjwvbGFiZWw+IDwvbGk+IDwvdWw+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Markup/ToolPalettes/MarkupPaletteSmall.html","html","PGRpdiBjbGFzcz0idG9vbGJhci10b29sLW1vZGUiPiA8ZGl2IGNsYXNzPSJ0YnRtLWRvbmUiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0RvbmV9Ij4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tZW51LWRvbmV9Ij48L3NwYW4+IDwvZGl2PiA8ZGl2IGNsYXNzPSJ0YnRtLWxpc3QiPiA8dWwgY2xhc3M9InRyYW5zaWVudC1lbGVtZW50IG1hcmt1cCBmb3VyIj4gPGxpPiA8YnV0dG9uIGNsYXNzPSJ0YnRtLWJ0biIgZGF0YS1iaW5kaW5nPSJ7QGRpc2FibGVkOiBjaGFuZ2VTdHlsZURpc2FibGVkfXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tDaGFuZ2VTdHlsZX0iPiA8c3BhbiBjbGFzcz0iaWNvbiBpY29uLXN3YXRjaC1waWNrZXItMjQiPjwvc3Bhbj4gPHAgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1wYWxldHRlLXNtYWxsLWNoYW5nZS1zdHlsZX0iPjwvcD4gPC9idXR0b24+IDwvbGk+IDxsaT4gPGJ1dHRvbiBjbGFzcz0idGJ0bS1idG4iIGRhdGEtYmluZGluZz0ie0BjbGFzcy1oaWdobGlnaHQ6IGVkaXRUb2dnbGVkfXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tFZGl0fSI+IDxzcGFuIGNsYXNzPSJpY29uIGljb24tZHJhdy1lZGl0LTI0Ij48L3NwYW4+IDxwIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtcGFsZXR0ZS1zbWFsbC1lZGl0fSI+PC9wPiA8L2J1dHRvbj4gPC9saT4gPGxpPiA8YnV0dG9uIGNsYXNzPSJ0YnRtLWJ0biIgZGF0YS1iaW5kaW5nPSJ7QGRpc2FibGVkOiBjbGVhckRpc2FibGVkfXtAY2xhc3MtaGlnaGxpZ2h0OiBkZWxldGVUb2dnbGVkfXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tEZWxldGV9Ij4gPHNwYW4gY2xhc3M9Imljb24gaWNvbi1lcmFzZS0yNCI+PC9zcGFuPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXRvb2xiYXItZXJhc2V9Ij48L3A+IDwvYnV0dG9uPiA8L2xpPiA8bGk+IDxidXR0b24gY2xhc3M9InRidG0tYnRuIiBkYXRhLWJpbmRpbmc9IntAZGlzYWJsZWQ6IGNsZWFyRGlzYWJsZWR9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0NsZWFyfSI+IDxzcGFuIGNsYXNzPSJpY29uIGljb24tY2xlYXItMjQiPjwvc3Bhbj4gPHAgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS10b29sYmFyLWNsZWFyLWFsbH0iPjwvcD4gPC9idXR0b24+IDwvbGk+IDwvdWw+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Measurement/MeasurementUnitSwitcherView.html","html","PGRpdiBjbGFzcz0ibWVhc3VyZW1lbnQtdW5pdC1zd2l0Y2hlciI+IDx1bCBjbGFzcz0ibGlzdC1tZW51IGhhcy1pY29uIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBsZW5ndGhVbml0c317QHZhbHVlOiBzZWxlY3RlZExlbmd0aFVuaXRzfXtAdmlzaWJsZTogbGVuZ3RoU3dpdGNoZXJTZWxlY3RlZH0iPiA8bGkgY2xhc3M9Imxpc3QtbWVudS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBsZW5ndGhVbml0c317QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVNldExlbmd0aFVuaXRzfSI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBjb250ZXh0fSI+PC9zcGFuPiA8L2xpPiA8L3VsPiA8dWwgY2xhc3M9Imxpc3QtbWVudSBoYXMtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogYXJlYVVuaXRzfXtAdmFsdWU6IHNlbGVjdGVkQXJlYVVuaXRzfXtAaGlkZGVuOiBsZW5ndGhTd2l0Y2hlclNlbGVjdGVkfSI+IDxsaSBjbGFzcz0ibGlzdC1tZW51LWl0ZW0iIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGFyZWFVbml0c317QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVNldEFyZWFVbml0c30iPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LWRldGFpbHMiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAY29udGV4dH0iPjwvc3Bhbj4gPC9saT4gPC91bD4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Measurement/MeasurementView.html","html","PHVsIGNsYXNzPSJ0cmFuc2llbnQtbWVhc3VyZW1lbnQiPiA8bGkgY2xhc3M9InRvb2xiYXItaXRlbSBzZWxlY3QtZG91YmxlIj4gPHNlbGVjdCBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBsZW5ndGhVbml0c317QHZhbHVlOiBzZWxlY3RlZExlbmd0aFVuaXRzfXtkaXNhYmxlZDogbWVhc3VyZW1lbnRJblByb2dyZXNzfXt0aXRsZTogQGxhbmd1YWdlLW1lYXN1cmVtZW50LWxlbmd0aC1zZWxlY3R9Ij4gPG9wdGlvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBsZW5ndGhVbml0c317dmFsdWU6IEBjb250ZXh0fXtAdGV4dDogQGNvbnRleHR9IiAvPiA8L3NlbGVjdD4gPHNlbGVjdCBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBhcmVhVW5pdHN9e0B2YWx1ZTogc2VsZWN0ZWRBcmVhVW5pdHN9e2Rpc2FibGVkOiBtZWFzdXJlbWVudEluUHJvZ3Jlc3N9e3RpdGxlOiBAbGFuZ3VhZ2UtbWVhc3VyZW1lbnQtYXJlYS1zZWxlY3R9Ij4gPG9wdGlvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBhcmVhVW5pdHN9e3ZhbHVlOiBAY29udGV4dH17QHRleHQ6IEBjb250ZXh0fSIgLz4gPC9zZWxlY3Q+IDwvbGk+IDwvdWw+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Measurement/Widgets/MeasurementTransientView.html","html","PGRpdiBjbGFzcz0idG9vbGJhci10b29sLW1vZGUiPiA8ZGl2IGNsYXNzPSJ0YnRtLWRvbmUiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0Nsb3NlfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbWVudS1kb25lfSI+PC9zcGFuPiA8L2Rpdj4gPGRpdiBjbGFzcz0idGJ0bS1saXN0Ij4gPHVsIGNsYXNzPSJmaXZlIj4gPGxpIGNsYXNzPSJ0YnRtLWNoZWNrYm94Ij4gPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0idGJ0bS1hZGQtZHJhd2luZyIgZGF0YS1iaW5kaW5nPSJ7QHZhbHVlOiBhZGRNYXJrdXBUb01hcH17ZGlzYWJsZWQ6IG1lYXN1cmVtZW50SW5Qcm9ncmVzc30iIC8+IDxwIGZvcj0idGJ0bS1hZGQtZHJhd2luZyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tZWFzdXJlbWVudC1hZGQtYXMtZHJhd2luZ30iPjwvcD4gPC9saT4gPGxpPiA8YnV0dG9uIGNsYXNzPSJ0YnRtLXNlbGVjdCIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVNob3dMZW5ndGhTd2l0Y2hlcn0iPiA8aDEgY2xhc3M9InRidG0tdW5pdHMiPjxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBzZWxlY3RlZExlbmd0aFVuaXRTaG9ydH0iPjwvc3Bhbj48c3BhbiBjbGFzcz0iaWNvbiBpY29uLXNlbGVjdCI+PC9zcGFuPjwvaDE+IDxwIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbWVhc3VyZW1lbnQtbGVuZ3RoLWxhYmVsfSI+PC9wPiA8L2J1dHRvbj4gPC9saT4gPGxpPiA8YnV0dG9uIGNsYXNzPSJ0YnRtLXNlbGVjdCIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVNob3dBcmVhU3dpdGNoZXJ9Ij4gPGgxIGNsYXNzPSJ0YnRtLXVuaXRzIj48c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogc2VsZWN0ZWRBcmVhVW5pdFNob3J0fSI+PC9zcGFuPjxzcGFuIGNsYXNzPSJpY29uIGljb24tc2VsZWN0Ij48L3NwYW4+PC9oMT4gPHAgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tZWFzdXJlbWVudC1hcmVhLWxhYmVsfSI+PC9wPiA8L2J1dHRvbj4gPC9saT4gPGxpPiA8YnV0dG9uIGNsYXNzPSJ0YnRtLWJ0biIgZGF0YS1iaW5kaW5nPSJ7QGRpc2FibGVkOiBkZXNjcmlwdG9yQ29udGFpbmVyRW1wdHl9e0BjbGFzcy1oaWdobGlnaHQ6IGVyYXNlQWN0aXZlfXtAZXZlbnQtb25jbGljazogaGFuZGxlRXJhc2VNZWFzdXJlbWVudH0iPiA8c3BhbiBjbGFzcz0iaWNvbiBpY29uLWVyYXNlLTI0Ij48L3NwYW4+IDxwIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtdG9vbGJhci1lcmFzZX0iPjwvcD4gPC9idXR0b24+IDwvbGk+IDxsaT4gPGJ1dHRvbiBjbGFzcz0idGJ0bS1idG4iIGRhdGEtYmluZGluZz0ie0BkaXNhYmxlZDogZGVzY3JpcHRvckNvbnRhaW5lckVtcHR5fXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xlYXJBbGx9Ij4gPHNwYW4gY2xhc3M9Imljb24gaWNvbi1jbGVhci0yNCI+PC9zcGFuPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXRvb2xiYXItY2xlYXItYWxsfSI+PC9wPiA8L2J1dHRvbj4gPC9saT4gPC91bD4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Native/AttachFileView.html","html","PGRpdiBjbGFzcz0iYXR0YWNoLXBob3RvIj4gPGRpdiBjbGFzcz0icGFuZWwtY29udGVudCIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogYnJvd3NlckZpbGVBUElTdXBwb3J0ZWR9Ij4gPHAgY2xhc3M9ImhlYWRpbmciPjxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbmF0aXZlLWltYWdlLXNlbGVjdC1oZWFkaW5nfSI+PC9zcGFuPjwvcD4gPHA+PGJ1dHRvbiBjbGFzcz0iYnRuIiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCkiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVUYWtlTmF0aXZlUGhvdG9DYW1lcmF9e0B0ZXh0OiBAbGFuZ3VhZ2UtbmF0aXZlLXBob3RvLWZyb20tY2FtZXJhfSI+PC9idXR0b24+PC9wPiA8cD48YnV0dG9uIGNsYXNzPSJidG4iIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVRha2VOYXRpdmVQaG90b0dhbGxlcnl9e0B0ZXh0OiBAbGFuZ3VhZ2UtbmF0aXZlLXBob3RvLWZyb20tZ2FsbGVyeX0iPjwvYnV0dG9uPjwvcD4gPC9kaXY+IDxkaXYgY2xhc3M9InBhbmVsLWNvbnRlbnQiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBicm93c2VyRmlsZUFQSVN1cHBvcnRlZH0iPiA8cCBjbGFzcz0iaGVhZGluZyI+PHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1uYXRpdmUtZmlsZS1zZWxlY3QtaGVhZGluZ30iPjwvc3Bhbj48L3A+IDxmb3JtIGRhdGEtYmluZGluZz0ie0B2YXI6IHVwbG9hZEZvcm1FbGVtZW50fSI+IDxpbnB1dCB0eXBlPSJmaWxlIiBjbGFzcz0iaW5wIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jaGFuZ2U6IGhhbmRsZVNlbGVjdGVkRmlsZUlucHV0fSIgLz4gPC9mb3JtPiA8cCBjbGFzcz0ibG9hZGluZyI+PHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGlzVXBsb2FkaW5nfXtAdGV4dDogQGxhbmd1YWdlLW5hdGl2ZS1maWxlLXVwbG9hZGluZ30iPjwvc3Bhbj48L3A+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Offline/ClearDataView/ClearDataView.html","html","PGRpdiBjbGFzcz0ibW9kdWxlIG5vdGlmaWNhdGlvbiBhbGVydCI+IDxwIGNsYXNzPSJkZXNjIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWNsZWFyLXN0b3JhZ2Utdmlldy1kZXNjcmlwdGlvbn0iPjwvcD4gPGRpdiBjbGFzcz0iY29tYm9ib3giPiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IG9wdGlvbnN9e0B2YWx1ZTogb3B0aW9ufSI+IDxvcHRpb24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogb3B0aW9uc317QHRleHQ6IHRleHR9e3ZhbHVlOiBjb21tYW5kfSI+PC9vcHRpb24+IDwvc2VsZWN0PiA8L2Rpdj4gPGRpdiBjbGFzcz0iZm9ybS1idG5zIj4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBva0J1dHRvbkVsZW1lbnR9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0NsZWFyfXtAdGV4dDogQGxhbmd1YWdlLWNvbW1vbi1jbGVhcn0iIC8+IDxidXR0b24gY2xhc3M9ImJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogb2tCdXR0b25FbGVtZW50fXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tDYW5jZWx9e0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLWRvbmV9IiAvPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Offline/ConnectionStatusIndicator/ConnectionStatusIndicatorView.html","html","PGRpdiBjbGFzcz0iY29ubmVjdGlvbi1zdGF0dXMtaW5kaWNhdG9yIj4gPGJ1dHRvbiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tUb2dnbGVDb25uZWN0aXZpdHl9e0B2aXNpYmxlOiBkaXNwbGF5QnV0dG9ufSI+IDxpbWcgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL1Rvb2xiYXIvY29ubmVjdGlvbi1vZmYtMjQucG5nIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaXNPZmZsaW5lfXthbHQ6IEBsYW5ndWFnZS10YWtlLWFwcC1vbmxpbmV9IiAvPiA8aW1nIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9Ub29sYmFyL2Nvbm5lY3Rpb24tMjQucG5nIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBpc09mZmxpbmV9e2FsdDogQGxhbmd1YWdlLXRha2UtYXBwLW9mZmxpbmV9IiAvPiA8L2J1dHRvbj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/OverviewMap/OverviewMapView.html","html","PGRpdiBjbGFzcz0ib3ZlcnZpZXctbWFwLWNvbnRhaW5lciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGlzRW5hYmxlZH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7QGNsYXNzLW92ZXJ2aWV3LW1hcC1jb250YWluZXItdG9wLXBvc2l0aW9uOiBpc1RvcH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7QGNsYXNzLW92ZXJ2aWV3LW1hcC1jb250YWluZXItYm90dG9tLXBvc2l0aW9uOiBpc0JvdHRvbX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7QGNsYXNzLW92ZXJ2aWV3LW1hcC1jb250YWluZXItbGVmdC1wb3NpdGlvbjogaXNMZWZ0fQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtAY2xhc3Mtb3ZlcnZpZXctbWFwLWNvbnRhaW5lci1yaWdodC1wb3NpdGlvbjogaXNSaWdodH0iPiA8YnV0dG9uIGNsYXNzPSJvdmVydmlldy1tYXAtdG9nZ2xlIiB0YWJpbmRleD0iMCIgIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiB0b2dnbGVNYXB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge0BjbGFzcy1vdmVydmlldy1tYXAtdG9nZ2xlLW9mZjogaXNBY3RpdmV9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge0BjbGFzcy1vdmVydmlldy1tYXAtdG9nZ2xlLXJpZ2h0UG9zaXRpb246IGlzUmlnaHR9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge0BjbGFzcy1vdmVydmlldy1tYXAtdG9nZ2xlLWJvdHRvbVBvc2l0aW9uOiBpc0JvdHRvbX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7QGNsYXNzLW92ZXJ2aWV3LW1hcC10b2dnbGUtYm90dG9tQWN0aXZlOiBib3R0b21BbmRBY3RpdmV9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RpdGxlOiBAbGFuZ3VhZ2UtZmVhdHVyZS1vdmVydmlldy1tYXAtdG9nZ2xlfSI+PC9idXR0b24+IDxkaXYgY2xhc3M9Im92ZXJ2aWV3LW1hcCIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGlzQWN0aXZlfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtAY2xhc3Mtb3ZlcnZpZXctbWFwLWJvdHRvbS1wb3NpdGlvbjogaXNCb3R0b219DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge0BjbGFzcy1vdmVydmlldy1tYXAtdG9wLXBvc2l0aW9uOiBpc1RvcH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7QGNsYXNzLW92ZXJ2aWV3LW1hcC1yaWdodC1wb3NpdGlvbjogaXNSaWdodH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7QGNsYXNzLW92ZXJ2aWV3LW1hcC1sZWZ0LXBvc2l0aW9uOiBpc0xlZnR9Ij4gPGRpdiBkYXRhLWJpbmRpbmc9IntpZDogb3ZlcnZpZXdNYXBJZH0iPjwvZGl2PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Printing/PrintingView.html","html","PGRpdiBjbGFzcz0icHJpbnRpbmciPiA8ZGl2IGNsYXNzPSJwcmludC1jcmVhdGUiIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IHByaW50Q29tcGxldGV9Ij4gPGRpdiBjbGFzcz0icHJpbnQtc3RhdHVzIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaXNQcmludGluZ30iPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWlzLXByaW50aW5nfSI+Li4uPC9wPiA8L2Rpdj4gPGRpdiBjbGFzcz0icHJpbnQtc3RhdHVzIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBzZWxlY3RlZFRlbXBsYXRlfSI+IDxwIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2Utbm8tcHJpbnQtdGVtcGxhdGV9Ij48L3A+IDwvZGl2PiA8ZGl2IGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGlzUHJpbnRpbmd9e0B2aXNpYmxlOiBzZWxlY3RlZFRlbXBsYXRlfSI+IDxsYWJlbCBmb3I9InNlbGVjdFRlbXBsYXRlIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXNlbGVjdC1sYXlvdXR9Ij48L2xhYmVsPiA8c2VsZWN0IGlkPSJzZWxlY3RUZW1wbGF0ZSIgZGF0YS1iaW5kaW5nPSIge0Bzb3VyY2U6IHByaW50VGVtcGxhdGVzfXtAdmFsdWU6IHNlbGVjdGVkVGVtcGxhdGV9e0BldmVudC1vbmNoYW5nZTogaGFuZGxlVGVtcGxhdGVTZWxlY3Rpb25DaGFuZ2VkfSI+IDxvcHRpb24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogcHJpbnRUZW1wbGF0ZXN9e0B0ZXh0OiBkaXNwbGF5TmFtZX17QGF0dGFjaDogQGNvbnRleHR9Ij48L29wdGlvbj4gPC9zZWxlY3Q+IDxsYWJlbCBmb3I9Im91dHB1dEZvcm1hdCIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1vdXRwdXQtZm9ybWF0fXtAdmlzaWJsZTogb3V0cHV0Rm9ybWF0c30iPjwvbGFiZWw+IDxzZWxlY3QgaWQ9Im91dHB1dEZvcm1hdCIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogb3V0cHV0Rm9ybWF0c317QHZhbHVlOiBzZWxlY3RlZEZvcm1hdH17QHZpc2libGU6IG91dHB1dEZvcm1hdHN9Ij4gPG9wdGlvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBvdXRwdXRGb3JtYXRzfXtAdGV4dDogQGNvbnRleHR9e0BhdHRhY2g6IEBjb250ZXh0fSI+IDwvb3B0aW9uPiA8L3NlbGVjdD4gPGxhYmVsIGZvcj0icmVzb2x1dGlvbiIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1yZXNvbHV0aW9ufXtAdmlzaWJsZTogcmVzb2x1dGlvbnN9Ij48L2xhYmVsPiA8c2VsZWN0IGlkPSJyZXNvbHV0aW9uIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiByZXNvbHV0aW9uc317QHZhbHVlOiBzZWxlY3RlZFJlc29sdXRpb259e0B2aXNpYmxlOiByZXNvbHV0aW9uc30iPiA8b3B0aW9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IHJlc29sdXRpb25zfXtAdGV4dDogZGlzcGxheU5hbWV9e0BhdHRhY2g6IEBjb250ZXh0fSI+IDwvb3B0aW9uPiA8L3NlbGVjdD4gPGxhYmVsIGZvcj0iZ3JpZHMiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZ3JpZH17QHZpc2libGU6IGdyaWRzfSI+PC9sYWJlbD4gPHNlbGVjdCBpZD0iZ3JpZHMiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGdyaWRzfXtAdmFsdWU6IHNlbGVjdGVkR3JpZH17QHZpc2libGU6IGdyaWRzfSI+IDxvcHRpb24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogZ3JpZHN9e0B0ZXh0OiBkaXNwbGF5TmFtZX17QGF0dGFjaDogQGNvbnRleHR9Ij4gPC9vcHRpb24+IDwvc2VsZWN0PiA8bGFiZWwgZm9yPSJtYXBzY2FsZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tYXAtc2NhbGV9e0B2aXNpYmxlOiBzY2FsZXN9Ij48L2xhYmVsPiA8c2VsZWN0IGlkPSJtYXBzY2FsZSIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogc2NhbGVzfXtAdmFsdWU6IHNlbGVjdGVkU2NhbGV9e0B2aXNpYmxlOiBzY2FsZXN9Ij4gPG9wdGlvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBzY2FsZXN9e0B0ZXh0OiBkaXNwbGF5TmFtZX17QGF0dGFjaDogQGNvbnRleHR9Ij4gPC9vcHRpb24+IDwvc2VsZWN0PiA8ZGl2IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHRleHRGaWVsZHN9Ij4gPGRpdiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiB0ZXh0RmllbGRzfSI+IDxsYWJlbCBkYXRhLWJpbmRpbmc9IntAdGV4dDogZGlzcGxheU5hbWV9Ij48L2xhYmVsPiA8aW5wdXQgdHlwZT0idGV4dCIgZGF0YS1iaW5kaW5nPSJ7QHZhbHVlOiB2YWx1ZX17QGhpZGRlbjogbXVsdGlsaW5lfSIgLz4gPHRleHRhcmVhIGNvbHM9IjIwIiByb3dzPSI0IiBkYXRhLWJpbmRpbmc9IntAdGV4dDogdmFsdWV9e0B2YWx1ZTogdmFsdWV9e0B2aXNpYmxlOiBtdWx0aWxpbmV9Ij48L3RleHRhcmVhPiA8L2Rpdj4gPC9kaXY+IDxsYWJlbCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXByaW50aW5nLWVtYWlsLWFkZHJlc3N9e0B2aXNpYmxlOiBzdXBwb3J0c0VtYWlsTm90aWZpY2F0aW9ufSI+PC9sYWJlbD4gPGlucHV0IHR5cGU9InRleHQiIGRhdGEtYmluZGluZz0ie0B2YWx1ZTogZW1haWxBZGRyZXNzfXtAdmlzaWJsZTogc3VwcG9ydHNFbWFpbE5vdGlmaWNhdGlvbn0iIC8+IDxzbWFsbCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXByaW50aW5nLWVtYWlsLW5vdGlmaWNhdGlvbn17QHZpc2libGU6IHN1cHBvcnRzRW1haWxOb3RpZmljYXRpb259Ij48L3NtYWxsPiA8ZGl2IGNsYXNzPSJmb3JtLWJ0bnMiPiA8YnV0dG9uIGNsYXNzPSJidXR0b24gcHJpbnQtYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtY2xpY2s6IGhhbmRsZVByaW50Q2xpY2t9e0B0ZXh0OiBAbGFuZ3VhZ2UtcHJpbnR9Ij48L2J1dHRvbj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz0icHJpbnQtY29tcGxldGUiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBwcmludENvbXBsZXRlfSI+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogc3VwcG9ydHNFbWFpbE5vdGlmaWNhdGlvbn0iPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXByaW50LWNvbXBsZXRlLWRlc2NyaXB0aW9ufSI+PC9wPiA8ZGl2IGNsYXNzPSJmb3JtLWJ0bnMiPiA8YnV0dG9uIGNsYXNzPSJidXR0b24gcHJpbnQtYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtY2xpY2s6IGhhbmRsZU9wZW5GaWxlQ2xpY2t9e0B0ZXh0OiBAbGFuZ3VhZ2Utb3Blbi1maWxlfSI+PC9idXR0b24+IDwvZGl2PiA8L2Rpdj4gPGRpdiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc3VwcG9ydHNFbWFpbE5vdGlmaWNhdGlvbn0iPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXByaW50aW5nLXByaW50LXJlcXVlc3Qtc3RhcnQtZGVzY3JpcHRpb259Ij48L3A+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHZhbGlkRW1haWxBZGRyZXNzU3VwcGxpZWR9Ij4gPHAgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1wcmludGluZy1wcmludC1yZXF1ZXN0LWRlc2NyaXB0aW9ufSI+PC9wPiA8L2Rpdj4gPGRpdiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiB2YWxpZEVtYWlsQWRkcmVzc1N1cHBsaWVkfSI+IDxwIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtcHJpbnRpbmctcHJpbnQtcmVxdWVzdC1zdGF0dXMtZGVzY3JpcHRpb259Ij48L3A+IDxkaXYgY2xhc3M9ImZvcm0tYnRucyI+IDxidXR0b24gY2xhc3M9ImJ1dHRvbiBwcmludC1idXR0b24iIGRhdGEtYmluZGluZz0ie0BldmVudC1jbGljazogaGFuZGxlT3BlbkZpbGVDbGlja317QHRleHQ6IEBsYW5ndWFnZS1wcmludGluZy1wcmludC1qb2Itc3RhdHVzfSI+PC9idXR0b24+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Prompt/PromptView.html","html","DQo8ZGl2IGNsYXNzPSJtb2R1bGUgbm90aWZpY2F0aW9uIHByb21wdCI+IDxwIGNsYXNzPSJkZXNjIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogZGVzY3JpcHRpb259Ij48L3A+IDxmb3JtIGRhdGEtYmluZGluZz0ie0BldmVudC1vbnN1Ym1pdDogaGFuZGxlQ2xpY2tPa30iPiA8ZGl2IGNsYXNzPSJmb3JtLWl0ZW0iPiA8aW5wdXQgdHlwZT0idGV4dCIgZGF0YS1iaW5kaW5nPSJ7QHZhbHVlOiBwcm9tcHRUZXh0fSIgLz4gPC9kaXY+IDxpbnB1dCB0eXBlPSJzdWJtaXQiIGNsYXNzPSJib3VuZC1pbnZpc2libGUiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja09rfSIgLz4gPC9mb3JtPiA8ZGl2IGNsYXNzPSJmb3JtLWJ0bnMiPiA8YnV0dG9uIGNsYXNzPSJidXR0b24iIGRhdGEtYmluZGluZz0ie0B2YXI6IG9rQnV0dG9uRWxlbWVudH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrT2t9e0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLW9rfSIgLz4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tDYW5jZWx9e0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLWNhbmNlbH0iIC8+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/QueryBuilder/AutoCompleteView.html","html","PGlucHV0IHR5cGU9InRleHQiIGRhdGEtYmluZGluZz0ie0B2YWx1ZTogdmFsdWV9e0B2YXI6IGF1dG9Db21wbGV0ZUlucHV0fXtAZXZlbnQtZm9jdXM6IGF1dG9Db21wbGV0ZV9mb2N1c317QGV2ZW50LWJsdXI6IGF1dG9Db21wbGV0ZV9ibHVyfSIgLz4g");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/QueryBuilder/SimpleQueryBuilderView.html","html","PGRpdiBjbGFzcz0ic2ltcGxlLXF1ZXJ5LWJ1aWxkZXIgcGFkZGVkLXZpZXciPiA8ZGl2IGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpc09ubGluZX0iPiA8Zm9ybSBkYXRhLWJpbmRpbmc9IntAZXZlbnQta2V5ZG93bjogZm9ybV9rZXlkb3dufXtAdmFyOiBodG1sRm9ybX17QGV2ZW50LXN1Ym1pdDogZm9ybV9zdWJtaXR9Ij4gPGRpdiBjbGFzcz0ic2VsZWN0LWJveCI+IDxsYWJlbCBmb3I9InNlbGVjdGxheWVyIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXF1ZXJ5YnVpbGRlci1xdWVyeS1sYXllcn0iPjwvbGFiZWw+IDxzZWxlY3QgaWQ9InNlbGVjdGxheWVyIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBsYXllcnN9e0B2YWx1ZTogc2VsZWN0ZWRMYXllclVuaXF1ZUlkfSI+IDxvcHRpb24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogbGF5ZXJzfXtAdGV4dDogZGlzcGxheU5hbWV9e3ZhbHVlOiB1bmlxdWVJZH0iIC8+IDwvc2VsZWN0PiA8L2Rpdj4gPGhyIC8+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGRpc2FibGVkfSI+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1xdWVyeWJ1aWxkZXItZmlsdGVyLWFscmVhZHktYXBwbGllZH0iPjwvZGl2PiA8L2Rpdj4gPGRpdiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogbm90RGlzYWJsZWR9Ij4gPGRpdiBkYXRhLWJpbmRpbmc9Intpbm5lckhUTUw6IGluZm9UZXh0fSIgY2xhc3M9ImZpbmQtcmVjb3JkcyI+PC9kaXY+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogcXVlcnlDbGF1c2VzfSI+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogcXVlcnlDbGF1c2VzfSIgY2xhc3M9InF1ZXJ5LWNsYXVzZS1yb3ciPiA8dGFibGUgY2xhc3M9InF1ZXJ5LWNsYXVzZS1jb250ZW50IiByb2xlPSJwcmVzZW50YXRpb24iPiA8dHI+IDx0ZCBjbGFzcz0iZmllbGQtc2VsZWN0b3IiPiA8YSBkYXRhLWJpbmRpbmc9IntAdGV4dDogcHJlc2VudGFibGVGaWVsZE5hbWV9e0B2aXNpYmxlOiBzaG93RGlzcGxheUZpZWxkfXtAZXZlbnQtb25jbGljazogZGlzcGxheUZpZWxkX2NsaWNrfSIgaHJlZj0iIyIgY2xhc3M9InByZXNlbnRhYmxlLXF1ZXJ5LWl0ZW0iPjwvYT4gPHNlbGVjdCBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBmaWVsZHN9e0B2YWx1ZTogc2VsZWN0ZWRGaWVsZE5hbWV9e0B2aXNpYmxlOiBzaG93RWRpdEZpZWxkfXtAZXZlbnQtb25ibHVyOiBpbnB1dF9ibHVyfXtAZXZlbnQtb25mb2N1czogaW5wdXRfZm9jdXN9e3RpdGxlOiBAbGFuZ3VhZ2UtcXVlcnlidWlsZGVyLXNlbGVjdC1maWx0ZXJ9IiBjbGFzcz0iZmllbGQtc2VsZWN0b3IiPiA8b3B0aW9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGZpZWxkc317QHRleHQ6IGFsaWFzfXt2YWx1ZTogbmFtZX0iIC8+IDwvc2VsZWN0PiA8L3RkPiA8dGQgY2xhc3M9Im9wZXJhdG9yLXNlbGVjdG9yIj4gPGEgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHByZXNlbnRhYmxlT3BlcmF0b3J9e0B2aXNpYmxlOiBzaG93RGlzcGxheU9wZXJhdG9yfXtAZXZlbnQtb25jbGljazogZGlzcGxheU9wZXJhdG9yX2NsaWNrfSIgaHJlZj0iIyIgY2xhc3M9InByZXNlbnRhYmxlLXF1ZXJ5LWl0ZW0iPjwvYT4gPHNlbGVjdCBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBvcGVyYXRvcnN9e0B2YWx1ZTogc2VsZWN0ZWRPcGVyYXRvcn17QHZpc2libGU6IHNob3dFZGl0T3BlcmF0b3J9e0BldmVudC1vbmJsdXI6IGlucHV0X2JsdXJ9e0BldmVudC1vbmZvY3VzOiBpbnB1dF9mb2N1c317dGl0bGU6IEBsYW5ndWFnZS1xdWVyeWJ1aWxkZXItc2VsZWN0LW9wZXJhdG9yfSIgY2xhc3M9Im9wZXJhdG9yLXNlbGVjdG9yIj4gPG9wdGlvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBvcGVyYXRvcnN9e0B0ZXh0OiBuYW1lfXt2YWx1ZTogdmFsdWV9IiAvPiA8L3NlbGVjdD4gPC90ZD4gPHRkIGNsYXNzPSJhdXRvLWZpZWxkIj4gPGEgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHByZXNlbnRhYmxlRmllbGRWYWx1ZX17QHZpc2libGU6IHNob3dEaXNwbGF5VmFsdWV9e0BldmVudC1vbmNsaWNrOiBkaXNwbGF5VmFsdWVfY2xpY2t9e0BjbGFzcy1lbXB0eS10ZXh0LXBsYWNlaG9sZGVyOiBwcmVzZW50YWJsZUZpZWxkVmFsdWVJc0VtcHR5VGV4dH0iIGhyZWY9IiMiIGNsYXNzPSJwcmVzZW50YWJsZS1xdWVyeS1pdGVtIj48L2E+IDxkaXYgY2xhc3M9ImlubGluZS1ibG9jayBhdXRvLWZpZWxkIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc2hvd0VkaXRWYWx1ZX0iPiA8ZGl2IGRhdGEtYmluZGluZz0ie0B3aWRnZXQ6IEF1dG9Db21wbGV0ZX17QHdpZGdldC1jb250ZXh0OiBAY29udGV4dH17QHZpc2libGU6IHNob3dUZXh0SW5wdXR9IiBjbGFzcz0iYXV0by1jb21wbGV0ZSB2YWx1ZS1zZWxlY3RvciBpbmxpbmUtYmxvY2siPjwvZGl2PiA8ZGl2IGRhdGEtYmluZGluZz0ie0B3aWRnZXQ6IERhdGVQaWNrZXJ9e0B3aWRnZXQtY29udGV4dDogQGNvbnRleHR9e0B2aXNpYmxlOiBzaG93RGF0ZVRpbWVJbnB1dH0iIGNsYXNzPSJkYXRlLXBpY2tlciB2YWx1ZS1zZWxlY3RvciBpbmxpbmUtYmxvY2siPjwvZGl2PiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBzaG93Q29kZWRWYWx1ZURvbWFpbklucHV0fXtAc291cmNlOiBjb2RlZFZhbHVlc317QHZhbHVlOiBjb2RlZERvbWFpblZhbHVlfXtAZXZlbnQtb25ibHVyOiBpbnB1dF9ibHVyfXtAZXZlbnQtb25mb2N1czogaW5wdXRfZm9jdXN9e3RpdGxlOiBAbGFuZ3VhZ2UtcXVlcnlidWlsZGVyLWNvZGVkLXZhbHVlfSIgY2xhc3M9ImNvZGVkLXZhbHVlLXBpY2tlciB2YWx1ZS1zZWxlY3RvciBpbmxpbmUtYmxvY2siPiA8b3B0aW9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGNvZGVkVmFsdWVzfXtAdGV4dDogbmFtZX17dmFsdWU6IHZhbH0iIC8+IDwvc2VsZWN0PiA8aW5wdXQgZGlzYWJsZWQ9ImRpc2FibGVkIiB0eXBlPSJ0ZXh0IiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc2hvd0Rpc2FibGVkSW5wdXR9e0BjbGFzcy1kaXNhYmxlZDogc2hvd0Rpc2FibGVkSW5wdXR9IiBjbGFzcz0idmFsdWUtc2VsZWN0b3IiIC8+IDwvZGl2PiA8L3RkPiA8dGQgY2xhc3M9ImRlbGV0ZSI+PGJ1dHRvbiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogcmVtb3ZlUXVlcnlDbGF1c2VfY2xpY2t9e0BjbGFzcy1kaXNhYmxlZDogZGVsZXRlRGlzYWJsZWR9IiBjbGFzcz0iZGVsZXRlLWJ1dHRvbiI+PC9idXR0b24+PC90ZD4gPC90cj4gPC90YWJsZT4gPGRpdiBjbGFzcz0iYW5kLXRleHQiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtcXVlcnlidWlsZGVyLWFuZH17QHZpc2libGU6IGlzTm90TGFzdH0iPjwvZGl2PiA8L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9ImFkZC1xdWVyeS1jb250YWluZXIiPiA8YnV0dG9uIGNsYXNzPSJqaW11LWJ0biBhZGQgYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogYWRkUXVlcnlDbGF1c2VfY2xpY2t9e0B0ZXh0OiBAbGFuZ3VhZ2UtcXVlcnlidWlsZGVyLWFkZC1jb25kaXRpb259Ij48L2J1dHRvbj4gPC9kaXY+IDxociAvPiA8ZGl2IGNsYXNzPSJzZWxlY3QtYm94Ij4gPGxhYmVsIGZvcj0ic3BhdGlhbGZpbHRlciIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1xdWVyeWJ1aWxkZXItc3BhdGlhbC1maWx0ZXJ9Ij48L2xhYmVsPiA8c2VsZWN0IGlkPSJzcGF0aWFsZmlsdGVyIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBzcGF0aWFsRmlsdGVyc317QHZhbHVlOiBzZWxlY3RlZFNwYXRpYWxGaWx0ZXJ9Ij4gPG9wdGlvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBzcGF0aWFsRmlsdGVyc317QHRleHQ6IG5hbWV9e3ZhbHVlOiB2YWx9IiAvPiA8L3NlbGVjdD4gPC9kaXY+IDwvZGl2PiA8aHIgLz4gPGRpdiBjbGFzcz0ic2VhcmNoLWJ1dHRvbi1jb250YWluZXIiPiA8YnV0dG9uIGNsYXNzPSJqaW11LWJ0biBidXR0b24iIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBjbGVhclJlc3VsdHNCdXR0b25fY2xpY2t9e0B2aXNpYmxlOiBpc1F1ZXJ5QW5kQXdhYn17QHRleHQ6IEBsYW5ndWFnZS1xdWVyeWJ1aWxkZXItY2xlYXJ9Ij48L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz0iamltdS1idG4gYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogY2xlYXJGaWx0ZXJCdXR0b25fY2xpY2t9e0B2aXNpYmxlOiBpc0ZpbHRlckJ1aWxkZXJ9e0B0ZXh0OiBAbGFuZ3VhZ2UtcXVlcnlidWlsZGVyLWNsZWFyfSI+PC9idXR0b24+IDxidXR0b24gdHlwZT0ic3VibWl0IiBjbGFzcz0iamltdS1idG4gYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogYWN0aW9uQnV0dG9uX2NsaWNrfXtAdmlzaWJsZTogaXNRdWVyeUJ1aWxkZXJ9e0B0ZXh0OiBAbGFuZ3VhZ2UtcXVlcnlidWlsZGVyLXNlYXJjaH0iPjwvYnV0dG9uPiA8YnV0dG9uIHR5cGU9InN1Ym1pdCIgY2xhc3M9ImppbXUtYnRuIGJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGFjdGlvbkJ1dHRvbl9jbGlja317QHZpc2libGU6IGlzRmlsdGVyQnVpbGRlcn17QHRleHQ6IEBsYW5ndWFnZS1xdWVyeWJ1aWxkZXItZmlsdGVyfXtAZGlzYWJsZWQ6IGRpc2FibGVkfXtAY2xhc3MtZGlzYWJsZWQ6IGRpc2FibGVkfSI+PC9idXR0b24+IDwvZGl2PiAgPGRpdiBjbGFzcz0iY2xlYXIiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpc0RlYnVnfSI+IDxoND5EZWJ1ZzwvaDQ+IDxociAvPiA8dGV4dGFyZWEgZGF0YS1iaW5kaW5nPSJ7QHZhbHVlOiB3aGVyZUNsYXVzZX17QHZpc2libGU6IGlzRGVidWd9IiBzdHlsZT0id2lkdGg6IDEwMCU7Ij48L3RleHRhcmVhPiA8ZGl2IGNsYXNzPSJzZWFyY2gtYnV0dG9uLWNvbnRhaW5lciI+IDxidXR0b24gY2xhc3M9ImJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IHJlbW92ZUxheWVyQnV0dG9uX2NsaWNrfSI+UmVtb3ZlIExheWVyPC9idXR0b24+IDxidXR0b24gY2xhc3M9ImJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGFkZExheWVyQnV0dG9uX2NsaWNrfSI+QWRkIExheWVyPC9idXR0b24+IDxidXR0b24gY2xhc3M9ImJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGV4dGVybmFsZmlsdGVyQnV0dG9uX2NsaWNrfSI+RXh0ZXJuYWwgRmlsdGVyPC9idXR0b24+IDwvZGl2PiA8L2Rpdj4gPC9mb3JtPiA8L2Rpdj4gPGRpdiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaXNPZmZsaW5lfXtAdGV4dDogQGxhbmd1YWdlLWNvbW1vbi1ub3QtYXZhaWxhYmxlLW9mZmxpbmV9Ij4gPC9kaXY+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IG5vVmFsaWRMYXllcnN9e0B0ZXh0OiBAbGFuZ3VhZ2UtcXVlcnlidWlsZGVyLW5vLXZhbGlkLWxheWVyc30iPjwvZGl2PiA8ZGl2IGNsYXNzPSJhdXRvY29tcGxldGUtY29udGFpbmVyIj48L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Reporting/ListReportsView.html","html","PGRpdiBjbGFzcz0ibGlzdC1yZXBvcnRzLXZpZXciPiA8ZGl2IGNsYXNzPSJsaXN0LXJlcG9ydHMtaGVhZGVyIiB0YWJpbmRleD0iMCI+IDxwIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbGlzdC1yZXBvcnRzLWV4cGxhbmF0aW9ufSI+PC9wPiA8L2Rpdj4gPHVsIGNsYXNzPSJsaXN0LW9mLXJlcG9ydHMiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGF2YWlsYWJsZVJlcG9ydExpc3RpbmdzfSI+IDxsaSBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBhdmFpbGFibGVSZXBvcnRMaXN0aW5nc30iPiA8YnV0dG9uIGNsYXNzPSJsaXN0LW9mLXJlcG9ydHMtbGluayIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrUmVwb3J0fSI+IDxzdHJvbmcgY2xhc3M9Imxpc3Qtb2YtcmVwb3J0cy1saW5rLXRpdGxlIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogZGlzcGxheU5hbWV9Ij48L3N0cm9uZz4gPHNwYW4gY2xhc3M9Imxpc3Qtb2YtcmVwb3J0cy1saW5rLWRlc2NyaXB0aW9uIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogZGVzY3JpcHRpb259Ij48L3NwYW4+IDxzcGFuIGNsYXNzPSJsaXN0LW9mLXJlcG9ydHMtbGluay1kZXRhaWxzIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaXNNb3JlVGhhbk9uZUZlYXR1cmVTZWxlY3RlZH17QHRleHQ6IGRldGFpbHN9Ij48L3NwYW4+IDwvYnV0dG9uPiA8L2xpPiA8L3VsPiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Reporting/RunReportView.html","html","PGRpdiBjbGFzcz0icnVuLXJlcG9ydC12aWV3Ij4gIDxkaXYgY2xhc3M9InJ1bi1yZXBvcnQtcHJvZ3Jlc3MiIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGNvbXBsZXRlfSI+ICA8ZGl2IGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGlzQXN5bmN9Ij4gPGgyIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtcnVuLXJlcG9ydC1wcm9ncmVzcy1oZWFkaW5nLXN5bmN9Ij48L2gyPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXJ1bi1yZXBvcnQtcHJvZ3Jlc3MtbWVzc2FnZS1zeW5jfSI+PC9wPiA8L2Rpdj4gIDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGlzQXN5bmN9Ij4gPGgyIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtcnVuLXJlcG9ydC1wcm9ncmVzcy1oZWFkaW5nLWFzeW5jfSI+PC9oMj4gPHAgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1ydW4tcmVwb3J0LXByb2dyZXNzLW1lc3NhZ2UtYXN5bmN9Ij48L3A+IDwvZGl2PiA8L2Rpdj4gIDxkaXYgY2xhc3M9InJ1bi1yZXBvcnQtY29tcGxldGUiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBjb21wbGV0ZX0iPiAgPGRpdiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBpc0FzeW5jfSI+IDxoMiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXJ1bi1yZXBvcnQtY29tcGxldGUtaGVhZGluZy1zeW5jfSI+PC9oMj4gPGEgY2xhc3M9InJ1bi1yZXBvcnQtY29tcGxldGUtbGluayIgZGF0YS1iaW5kaW5nPSJ7aHJlZjogaHJlZn17QHRleHQ6IEBsYW5ndWFnZS1ydW4tcmVwb3J0LWNvbXBsZXRlLWxpbmstc3luY30iIGhyZWY9IiIgdGFyZ2V0PSJfYmxhbmsiIGRvd25sb2FkPjwvYT4gPC9kaXY+ICA8ZGl2IGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpc0FzeW5jfSI+IDxoMiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXJ1bi1yZXBvcnQtY29tcGxldGUtaGVhZGluZy1hc3luY30iPjwvaDI+IDxhIGNsYXNzPSJydW4tcmVwb3J0LWNvbXBsZXRlLWxpbmsiIGRhdGEtYmluZGluZz0ie2hyZWY6IGhyZWZ9e0B0ZXh0OiBAbGFuZ3VhZ2UtcnVuLXJlcG9ydC1jb21wbGV0ZS1saW5rLWFzeW5jfSIgaHJlZj0iIiB0YXJnZXQ9Il9ibGFuayI+PC9hPiA8L2Rpdj4gPGJ1dHRvbiBjbGFzcz0icnVuLXJlcG9ydC1jb21wbGV0ZS1kb25lLWJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1ydW4tcmVwb3J0LWNvbXBsZXRlLWRvbmUtYnV0dG9ufXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tEb25lQnV0dG9ufSI+PC9idXR0b24+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Scalebar/ScalebarView.html","html","PGRpdiBjbGFzcz0ic2NhbGUtYmFyLWNvbnRhaW5lciIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogc2NhbGViYXJDb250YWluZXJ9Ij4gIDxkaXYgY2xhc3M9InNjYWxlLWJhci1ob3N0IiBkYXRhLWJpbmRpbmc9IntAdmFyOiBzY2FsZWJhckhvc3R9Ij48L2Rpdj4gPC9kaXY+IA==");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Search/SearchHintsView.html","html","PGRpdiBjbGFzcz0iaGludHMtbGlzdCIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHNlYXJjaEhpbnRzfXtAdmFyOiBoaW50c0xpc3R9e0BldmVudC1rZXlkb3duOiBoYW5kbGVLZXlEb3dufSI+IDx1bCBjbGFzcz0ibGlzdC1tZW51IGhhcy1pY29uIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBzZWFyY2hIaW50c317QG5vY2xhc3MtcmVmaW5lLWRpc2FibGVkOiBlbmFibGVTZWFyY2hSZWZpbmVtZW50fSI+IDxsaSBjbGFzcz0ibGlzdC1tZW51LWl0ZW0iIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IHNlYXJjaEhpbnRzfSI+IDxidXR0b24gY2xhc3M9ImNvbnRlbnQgbGlzdC1tZW51LWJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUhpbnRDbGlja30iPiA8aW1nIGNsYXNzPSJsaXN0LW1lbnUtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGljb25Vcml9e3NyYzogaWNvblVyaX17YWx0OiBwbGFpblRleHR9IiBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvSWNvblBsYWNlaG9sZGVyMjR4MjQucG5nIiAvPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LWRldGFpbHMiIGRhdGEtYmluZGluZz0ie2lubmVySFRNTDogc2FmZVRleHR9e3RpdGxlOiBwbGFpblRleHR9Ij48L3NwYW4+IDwvYnV0dG9uPiA8ZGl2IGNsYXNzPSJyZWZpbmUtY29udGFpbmVyIj4gPGJ1dHRvbiBjbGFzcz0icmVmaW5lLWJ0biIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHNlYXJjaEhpbnRzfXtAZXZlbnQtb25jbGljazogaGFuZGxlUmVmaW5lU2VhcmNoQ2xpY2t9e3RpdGxlOiBAbGFuZ3VhZ2Utc2VhcmNoLXJlZmluZX0iPjwvYnV0dG9uPiA8L2Rpdj4gPC9saT4gPC91bD4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Search/SearchView.html","html","PGRpdiBjbGFzcz0iZ2xvYmFsLXNlYXJjaCIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGVuYWJsZVVJfSI+IDxkaXYgY2xhc3M9InNlYXJjaC1ib3giPiAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJnY3hfc2VhcmNoIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBpbnB1dEVsZW1lbnR9e0B2YWx1ZTogc2VhcmNoVGV4dH17QGV2ZW50LWtleWRvd246IGhhbmRsZUtleURvd259e0BldmVudC1kYmxjbGljazogaGFuZGxlRG91YmxlQ2xpY2t9e3BsYWNlaG9sZGVyOiBAbGFuZ3VhZ2Utc2VhcmNoLXBsYWNlaG9sZGVyfXt0aXRsZTogQGxhbmd1YWdlLXNlYXJjaC1zZWFyY2gtcHJvbXB0fSIgdGFiaW5kZXg9IjAiIC8+IDxidXR0b24gY2xhc3M9InNlYXJjaC1idXR0b24iIGRhdGEtYmluZGluZz0ie0BldmVudC1jbGljazogaGFuZGxlU2VhcmNoQ2xpY2t9IiB0YWJpbmRleD0iMCI+PHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1zZWFyY2gtcGVyZm9ybS1nbG9iYWwtc2VhcmNofSIgPjwvc3Bhbj48L2J1dHRvbj4gPC9kaXY+IDxkaXYgY2xhc3M9InJlZ2lvbiBzZWFyY2gtaGludHMtcmVnaW9uIiBkYXRhLXJlZ2lvbi1uYW1lPSJTZWFyY2hIaW50c1JlZ2lvbiI+PC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Share/ShareView.html","html","PGRpdiBjbGFzcz0ic29jaWFsLW1lZGlhLXNoYXJlIj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51IGFjdGl2ZSBoYXMtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogc2hhcmVPcHRpb25zfXtAdmlzaWJsZTogc2hhcmVPcHRpb25zfSI+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogc2hhcmVPcHRpb25zfSI+IDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LWNsaWNrOiBoYW5kbGVDbGlja30iIHRhcmdldD0iX2JsYW5rIj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0iPiA8aW1nIGNsYXNzPSJsaXN0LW1lbnUtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGljb259e3NyYzogaWNvblVyaX0iIGFsdD0iICIgLz4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWRldGFpbHMiPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkaXNwbGF5TmFtZX0iPjwvc3Bhbj4gPC9kaXY+IDwvZGl2PiA8L2E+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Shells/DebugView.html","html","PGRpdiBjbGFzcz0iZGVidWctdmlldyI+IDxkaXYgY2xhc3M9ImRlYnVnLXZpZXctaW5uZXIiPiA8Yj5EZWJ1ZyB2aWV3PC9iPiA8L2Rpdj4gPC9kaXY+IA==");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Shells/DesktopShellView.html","html","PGRpdiBjbGFzcz0ic2hlbGwtY29udGFpbmVyIj4gPGRpdiBjbGFzcz0ic2hlbGwtY29udGFpbmVyLWlubmVyIj4gPGRpdiBkYXRhLXJlZ2lvbi1uYW1lPSJMb2dSZWdpb24iIGNsYXNzPSJyZWdpb24gbG9nLXJlZ2lvbiI+PC9kaXY+IDxkaXYgY2xhc3M9ImxhcmdlLXNoZWxsLWhlYWRlciIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogaGVhZGVyQ29udGFpbmVyRWxlbWVudH0iPiA8ZGl2IGRhdGEtcmVnaW9uLW5hbWU9IkFjY2Vzc2liaWxpdHlSZWdpb24iIGNsYXNzPSJyZWdpb24gYWNjZXNzaWJpbGl0eS1yZWdpb24iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuTXVsdGlEaXZSZWdpb25BZGFwdGVyIj48L2Rpdj4gPGRpdiBkYXRhLXJlZ2lvbi1uYW1lPSJIZWFkZXJSZWdpb24iIGNsYXNzPSJyZWdpb24gaGVhZGVyLXJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5NdWx0aURpdlJlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA8ZGl2IGRhdGEtcmVnaW9uLW5hbWU9IlRvb2xiYXJSZWdpb24iIGNsYXNzPSJyZWdpb24gdG9vbGJhci1yZWdpb24iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuTXVsdGlEaXZSZWdpb25BZGFwdGVyIj48L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9ImxhcmdlLXNoZWxsLW1haW4iIGRhdGEtYmluZGluZz0ie0B2YXI6IG1haW5FbGVtZW50fSI+IDxkaXYgY2xhc3M9ImxhcmdlLXNoZWxsLWxlZnQgcGFuZWwtY2xvc2VkIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBsZWZ0RWxlbWVudH17QHZpc2libGU6IGRhdGFGcmFtZUlzT3Blbn0iPiA8ZGl2IGRhdGEtYmluZGluZz0ie0B2YXI6IGxlZnRSZWdpb25FbGVtZW50fSIgZGF0YS1yZWdpb24tbmFtZT0iTGVmdFBhbmVsUmVnaW9uIiBjbGFzcz0icmVnaW9uIGRhdGEtcmVnaW9uIiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLk11bHRpRGl2UmVnaW9uQWRhcHRlciIgZGF0YS1tYXhpbWl6ZWQ9ImZhbHNlIj48L2Rpdj4gPGRpdiBjbGFzcz0icGFuZWwtc2lkZS1lbXB0eSI+IDxoMiBjbGFzcz0icGFuZWwtZW1wdHktaGVhZGluZyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1zaGVsbC1kYXRhZnJhbWUtZGlzYWJsZWR9Ij48L2gyPiA8ZGl2IGNsYXNzPSJwYW5lbC1lbXB0eS1saW5rcyIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGxpbmthYmxlTW9kdWxlTG9hZGVkfSI+IDxwIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2Utc2hlbGwtZGF0YWZyYW1lLWRpc2FibGVkLW9wdGlvbnN9Ij48L3A+IDx1bD4gPGxpIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpbmZvTW9kdWxlTG9hZGVkfSI+PGJ1dHRvbiBjbGFzcz0iYnV0dG9uLXRleHQtbGluayIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IG9wZW5Ib21lUGFuZWx9e0B0ZXh0OiBAbGFuZ3VhZ2Utc2hlbGwtZGF0YWZyYW1lLWRpc2FibGVkLWhvbWUtcGFuZWx9Ij48L2J1dHRvbj48L2xpPiA8bGkgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGxheWVyTGlzdE1vZHVsZUxvYWRlZH0iPjxidXR0b24gY2xhc3M9ImJ1dHRvbi10ZXh0LWxpbmsiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBvcGVuTGF5ZXJMaXN0fXtAdGV4dDogQGxhbmd1YWdlLXNoZWxsLWRhdGFmcmFtZS1kaXNhYmxlZC1sYXllci1saXN0fSI+PC9idXR0b24+PC9saT4gPC91bD4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz0ibGFyZ2Utc2hlbGwtY2VudGVyIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBjZW50ZXJFbGVtZW50fSI+IDxkaXYgZGF0YS1yZWdpb24tbmFtZT0iTWFwUmVnaW9uIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBzY3JlZW5SZWdpb25FbGVtZW50fSIgY2xhc3M9InJlZ2lvbiBtYXAtcmVnaW9uIiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLk11bHRpRGl2UmVnaW9uQWRhcHRlciI+PC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsYXJnZS1zaGVsbC1ib3R0b20gcGFuZWwtY2xvc2VkIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBib3R0b21FbGVtZW50fSI+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHZhcjogYm90dG9tUmVnaW9uRWxlbWVudH0iIGRhdGEtcmVnaW9uLW5hbWU9IkJvdHRvbVBhbmVsUmVnaW9uIiBjbGFzcz0icmVnaW9uIGJvdHRvbS1yZWdpb24iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuTXVsdGlEaXZSZWdpb25BZGFwdGVyIiBkYXRhLW1heGltaXplZD0iZmFsc2UiPjwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz0ibGFyZ2Utc2hlbGwtcmlnaHQiIGRhdGEtYmluZGluZz0ie0B2YXI6IHJpZ2h0RWxlbWVudH0iPiA8ZGl2IGRhdGEtcmVnaW9uLW5hbWU9IlJpZ2h0UGFuZWxSZWdpb24iIGNsYXNzPSJyZWdpb24gZGF0YS1yZWdpb24iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuTXVsdGlEaXZSZWdpb25BZGFwdGVyIj48L2Rpdj4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsYXJnZS1zaGVsbC1mb290ZXIiIGRhdGEtYmluZGluZz0ie0B2YXI6IGZvb3RlckNvbnRhaW5lckVsZW1lbnR9Ij4gPGRpdiBkYXRhLXJlZ2lvbi1uYW1lPSJGb290ZXJSZWdpb24iIGNsYXNzPSJyZWdpb24gZm9vdGVyLXJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5NdWx0aURpdlJlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiAgIDxkaXYgZGF0YS1yZWdpb24tbmFtZT0iTW9kYWxXaW5kb3dQbGFjZWhvbGRlclJlZ2lvbiIgY2xhc3M9InJlZ2lvbiBtb2RhbCIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5Qb3B1cE1vZGFsUmVnaW9uQWRhcHRlciI+IDxkaXYgY2xhc3M9Im1vZGFsLW92ZXJsYXkiPjwvZGl2PiA8ZGl2IGNsYXNzPSJtb2RhbC1jb250YWluZXIiIGRhdGEtYmluZGluZz0ie0B2YXI6IG1vZGFsQ29udGFpbmVyRWxlbWVudH0iPiA8ZGl2IGNsYXNzPSJtb2RhbC1jb250YWluZXItaW5uZXIiPjwvZGl2PiA8L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9ImZvb3QiPjwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Shells/HandheldShellView.html","html","PGRpdiBjbGFzcz0ic2hlbGwtY29udGFpbmVyIj4gPGRpdiBjbGFzcz0ic2hlbGwtY29udGFpbmVyLWlubmVyIj4gPGRpdiBkYXRhLXJlZ2lvbi1uYW1lPSJUb29sUmVnaW9uIiBjbGFzcz0icmVnaW9uIHRvb2wtcmVnaW9uIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBiYW5uZXJDb250YWluZXJFbGVtZW50fSIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5NdWx0aURpdlJlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA8ZGl2IGRhdGEtcmVnaW9uLW5hbWU9IlNjcmVlblJlZ2lvbiIgY2xhc3M9InJlZ2lvbiBzY3JlZW4tcmVnaW9uIg0KICAgICAgICAgICAgIGRhdGEtYmluZGluZz0ie0B2YXI6IHNjcmVlblJlZ2lvbkVsZW1lbnR9IiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLk11bHRpRGl2UmVnaW9uQWRhcHRlciI+PC9kaXY+IDxkaXYgY2xhc3M9ImNsZWFyIj48L2Rpdj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Shells/TabletShellView.html","html","PGRpdiBjbGFzcz0ic2hlbGwtY29udGFpbmVyIj4gPGRpdiBjbGFzcz0ic2hlbGwtY29udGFpbmVyLWlubmVyIj4gPGRpdiBkYXRhLXJlZ2lvbi1uYW1lPSJMb2dSZWdpb24iIGNsYXNzPSJyZWdpb24gbG9nLXJlZ2lvbiI+PC9kaXY+IDxkaXYgY2xhc3M9Im1lZGl1bS1zaGVsbC1oZWFkZXIiICBkYXRhLWJpbmRpbmc9IntAdmFyOiBoZWFkZXJDb250YWluZXJFbGVtZW50fSI+IDxkaXYgZGF0YS1yZWdpb24tbmFtZT0iQWNjZXNzaWJpbGl0eVJlZ2lvbiIgY2xhc3M9InJlZ2lvbiBhY2Nlc3NpYmlsaXR5LXJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5NdWx0aURpdlJlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA8ZGl2IGRhdGEtcmVnaW9uLW5hbWU9IkhlYWRlclJlZ2lvbiIgIGNsYXNzPSJyZWdpb24gaGVhZGVyLXJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5NdWx0aURpdlJlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA8ZGl2IGRhdGEtcmVnaW9uLW5hbWU9IlRvb2xiYXJSZWdpb24iIGNsYXNzPSJyZWdpb24gdG9vbGJhci1yZWdpb24iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuTXVsdGlEaXZSZWdpb25BZGFwdGVyIiA+PC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJtZWRpdW0tc2hlbGwtbWFpbiIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogbWFpbkVsZW1lbnR9Ij4gPGRpdiBjbGFzcz0ibWVkaXVtLXNoZWxsLWxlZnQgcGFuZWwtY2xvc2VkIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBsZWZ0RWxlbWVudH17QHZpc2libGU6IGRhdGFGcmFtZUlzT3Blbn0iPiA8ZGl2IGRhdGEtYmluZGluZz0ie0B2YXI6IGxlZnRSZWdpb25FbGVtZW50fSIgZGF0YS1yZWdpb24tbmFtZT0iTGVmdFBhbmVsUmVnaW9uIiBjbGFzcz0icmVnaW9uIGRhdGEtcmVnaW9uIiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLk11bHRpRGl2UmVnaW9uQWRhcHRlciI+PC9kaXY+IDxkaXYgY2xhc3M9InBhbmVsLXNpZGUtZW1wdHkiPiA8aDIgY2xhc3M9InBhbmVsLWVtcHR5LWhlYWRpbmciIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2Utc2hlbGwtZGF0YWZyYW1lLWRpc2FibGVkfSI+PC9oMj4gPGRpdiBjbGFzcz0icGFuZWwtZW1wdHktbGlua3MiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBsaW5rYWJsZU1vZHVsZUxvYWRlZH0iPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXNoZWxsLWRhdGFmcmFtZS1kaXNhYmxlZC1vcHRpb25zfSI+PC9wPiA8dWw+IDxsaSBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaW5mb01vZHVsZUxvYWRlZH0iPjxidXR0b24gY2xhc3M9ImJ1dHRvbi10ZXh0LWxpbmsiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBvcGVuSG9tZVBhbmVsfXtAdGV4dDogQGxhbmd1YWdlLXNoZWxsLWRhdGFmcmFtZS1kaXNhYmxlZC1ob21lLXBhbmVsfSI+PC9idXR0b24+PC9saT4gPGxpIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBsYXllckxpc3RNb2R1bGVMb2FkZWR9Ij48YnV0dG9uIGNsYXNzPSJidXR0b24tdGV4dC1saW5rIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogb3BlbkxheWVyTGlzdH17QHRleHQ6IEBsYW5ndWFnZS1zaGVsbC1kYXRhZnJhbWUtZGlzYWJsZWQtbGF5ZXItbGlzdH0iPjwvYnV0dG9uPjwvbGk+IDwvdWw+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9Im1lZGl1bS1zaGVsbC1jZW50ZXIiIGRhdGEtYmluZGluZz0ie0B2YXI6IGNlbnRlckVsZW1lbnR9Ij4gPGRpdiBkYXRhLXJlZ2lvbi1uYW1lPSJNYXBSZWdpb24iIGRhdGEtYmluZGluZz0ie0B2YXI6IHNjcmVlblJlZ2lvbkVsZW1lbnR9IiBjbGFzcz0icmVnaW9uIG1hcC1yZWdpb24iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuTXVsdGlEaXZSZWdpb25BZGFwdGVyIj48L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9Im1lZGl1bS1zaGVsbC1ib3R0b20gcGFuZWwtY2xvc2VkIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBib3R0b21FbGVtZW50fSI+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHZhcjogYm90dG9tUmVnaW9uRWxlbWVudH0iIGRhdGEtcmVnaW9uLW5hbWU9IkJvdHRvbVBhbmVsUmVnaW9uIiBjbGFzcz0icmVnaW9uIiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLk11bHRpRGl2UmVnaW9uQWRhcHRlciI+PC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJtZWRpdW0tc2hlbGwtcmlnaHQiIGRhdGEtYmluZGluZz0ie0B2YXI6IHJpZ2h0RWxlbWVudH0iPiA8ZGl2IGRhdGEtcmVnaW9uLW5hbWU9IlJpZ2h0UGFuZWxSZWdpb24iIGNsYXNzPSJyZWdpb24gZGF0YS1yZWdpb24iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuTXVsdGlEaXZSZWdpb25BZGFwdGVyIj48L2Rpdj4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJtZWRpdW0tc2hlbGwtZm9vdGVyIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBmb290ZXJDb250YWluZXJFbGVtZW50fSI+IDxkaXYgZGF0YS1yZWdpb24tbmFtZT0iRm9vdGVyUmVnaW9uIiBjbGFzcz0icmVnaW9uIGZvb3Rlci1yZWdpb24iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuTXVsdGlEaXZSZWdpb25BZGFwdGVyIj48L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gICA8ZGl2IGRhdGEtcmVnaW9uLW5hbWU9Ik1vZGFsV2luZG93UGxhY2Vob2xkZXJSZWdpb24iIGNsYXNzPSJyZWdpb24gbW9kYWwiIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuUG9wdXBNb2RhbFJlZ2lvbkFkYXB0ZXIiPiA8ZGl2IGNsYXNzPSJtb2RhbC1vdmVybGF5Ij48L2Rpdj4gPGRpdiBjbGFzcz0ibW9kYWwtY29udGFpbmVyIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBtb2RhbENvbnRhaW5lckVsZW1lbnR9Ij4gPGRpdiBjbGFzcz0ibW9kYWwtY29udGFpbmVyLWlubmVyIj48L2Rpdj4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJmb290Ij48L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Shells/Components/DataFrameButtonView.html","html","PGJ1dHRvbiBjbGFzcz0iZGF0YS1mcmFtZS1idXR0b24gdGFiLWNsb3NlZCIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogYnV0dG9uRWxlbWVudH17dGl0bGU6IEBsYW5ndWFnZS1zaGVsbC1kYXRhZnJhbWV9e0BldmVudC1tb3VzZWRvd246IGhhbmRsZU1vdXNlRG93bn17QGV2ZW50LXRvdWNoc3RhcnQ6IGhhbmRsZVRvdWNoU3RhcnR9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVPbkNsaWNrfSI+PC9idXR0b24+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Shells/Components/NavBarSmallView.html","html","PGRpdiBjbGFzcz0idmlldy1zd2l0Y2hlci12aWV3Ij4gPGRpdiBjbGFzcz0icGFuZWwtaGVhZGVyLW5hdiIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogYWN0aXZlVmlld0Rlc2NyaXB0b3JzfSI+IDxidXR0b24gY2xhc3M9Im5hdi1idG4iIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGFjdGl2ZVZpZXdEZXNjcmlwdG9yc317QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVRhcE5hdkJ1dHRvbn17QGNsYXNzLW5hdi1idG4tYWN0aXZlOiBpc0FjdGl2ZX0iPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogdGl0bGV9Ij48L3NwYW4+IDwvYnV0dG9uPiA8L2Rpdj4gPGJ1dHRvbiBjbGFzcz0icGFuZWwtaGVhZGVyLWJ1dHRvbiByaWdodCIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVRhcFN3aXRjaGVyQ2xvc2VCdXR0b259Ij48L2J1dHRvbj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Shells/Components/Navigation/NavButtonView.html","html","PGJ1dHRvbiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlVGFwfSIgY2xhc3M9Im5hdi1idXR0b24tdmlldyI+PC9idXR0b24+IA==");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Shells/Components/Panels/ShellPanelView.html","html","PGRpdiBjbGFzcz0idmlldy1jb250YWluZXItdmlldyBzbWFydC1wYW5lbCBzaGVsbC1wYW5lbCIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogY29udGFpbmVyRWxlbWVudH0iPiA8ZGl2IGNsYXNzPSJwYW5lbC1oZWFkZXIiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBoZWFkZXJJc1Zpc2libGV9e0B2YXI6IGhlYWRlckVsZW1lbnR9Ij4gPGJ1dHRvbiBjbGFzcz0icGFuZWwtaGVhZGVyLWJ1dHRvbiBwYW5lbC1yZXNpemVyIHJpZ2h0IiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlVGFwU2l6ZUJ1dHRvbn0iPjwvYnV0dG9uPiA8YnV0dG9uIGNsYXNzPSJtZW51LWJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QGVuYWJsZWQ6IGhhc0V4ZWN1dGFibGVNZW51SXRlbXN9e0B2aXNpYmxlOiBoYXNIb2lzdGVkTWVudX17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVRhcE1lbnVCdXR0b259e0B2YXI6IG1lbnVCdXR0b25FbGVtZW50fSI+PC9idXR0b24+IDxkaXYgY2xhc3M9InBhbmVsLWhlYWRlci1uYXYiIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IHRpdGxlQmFySXNWaXNpYmxlfSI+PC9kaXY+IDxidXR0b24gY2xhc3M9InBhbmVsLWhlYWRlci1idXR0b24gcGFuZWwtYmFjayBsZWZ0IiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tTbWFydEJhY2tCdXR0b259e0B2aXNpYmxlOiBzaG93aW5nU21hcnRCYWNrQnV0dG9ufSI+PC9idXR0b24+IDxoMiBjbGFzcz0icGFuZWwtdGl0bGUiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiB0aXRsZUJhcklzVmlzaWJsZX0iPiA8aW1nIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9sb2FkZXItc21hbGwuZ2lmIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc2hvd0J1c3lJbmRpY2F0b3J9IiBhbHQ9IiAiIC8+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiB2aWV3VGl0bGV9Ij48L3NwYW4+IDwvaDI+IDxkaXYgY2xhc3M9InNtYXJ0LXBhbmVsLWhvaXN0ZWQtbWVudS1pbmxpbmUiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpbmxpbmVNZW51SXNPcGVufXtAd2lkZ2V0OiBTbWFydFBhbmVsSG9pc3RlZE1lbnV9e0B3aWRnZXQtcmVxdWlyZWQ6IGZhbHNlfXtAd2lkZ2V0LWNvbnRleHQ6IGhvaXN0ZWRNZW51Vmlld01vZGVsfSI+PC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJwYW5lbC1zY3JvbGwtY29udGFpbmVyIiBkYXRhLWJpbmRpbmc9IntkYXRhLXJlZ2lvbi1uYW1lOiByZWdpb25OYW1lfXtkYXRhLXJlZ2lvbi1hZGFwdGVyOiByZWdpb25UeXBlfXtAdmFyOiBzY3JvbGxSZWdpb25FbGVtZW50fXtAZXZlbnQtb25zY3JvbGw6IGhhbmRsZVNjcm9sbENoYW5nZX0iPjwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Shells/Small/SmallShellView.html","html","PGRpdiBjbGFzcz0ic2hlbGwtY29udGFpbmVyIG5ldy1zaGVsbCIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogY29udGFpbmVyRWxlbWVudH0iPiA8ZGl2IGRhdGEtcmVnaW9uLW5hbWU9IkFjY2Vzc2liaWxpdHlSZWdpb24iIGNsYXNzPSJyZWdpb24gYWNjZXNzaWJpbGl0eS1yZWdpb24iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuTXVsdGlEaXZSZWdpb25BZGFwdGVyIj48L2Rpdj4gPGRpdiBkYXRhLXJlZ2lvbi1uYW1lPSJIZWFkZXJSZWdpb24iIGNsYXNzPSJyZWdpb24gaGVhZGVyLXJlZ2lvbiIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogaGVhZGVyUmVnaW9uRWxlbWVudH0iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuTXVsdGlEaXZSZWdpb25BZGFwdGVyIj48L2Rpdj4gPGRpdiBkYXRhLXJlZ2lvbi1uYW1lPSJTY3JlZW5SZWdpb24iIGNsYXNzPSJyZWdpb24gc2NyZWVuLXJlZ2lvbiIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogc2NyZWVuUmVnaW9uRWxlbWVudH0iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuTXVsdGlEaXZSZWdpb25BZGFwdGVyIj48L2Rpdj4gPGRpdiBkYXRhLXJlZ2lvbi1uYW1lPSJUb3BMZWZ0U2hlbGxSZWdpb24iIGNsYXNzPSJyZWdpb24gdG9wLWxlZnQtc2hlbGwtcmVnaW9uIHRvcC1sZWZ0LXNoZWxsLXJlZ2lvbi1jbG9zZWQiIGRhdGEtYmluZGluZz0ie0B2YXI6IHRvcExlZnRTaGVsbFJlZ2lvbkVsZW1lbnR9IiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLk11bHRpRGl2UmVnaW9uQWRhcHRlciI+PC9kaXY+IDxkaXYgZGF0YS1yZWdpb24tbmFtZT0iVG9wUmlnaHRTaGVsbFJlZ2lvbiIgY2xhc3M9InJlZ2lvbiB0b3AtcmlnaHQtc2hlbGwtcmVnaW9uIHRvcC1yaWdodC1zaGVsbC1yZWdpb24tY2xvc2VkIiBkYXRhLWJpbmRpbmc9IntAdmFyOiB0b3BSaWdodFNoZWxsUmVnaW9uRWxlbWVudH0iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuTXVsdGlEaXZSZWdpb25BZGFwdGVyIj48L2Rpdj4gPGRpdiBkYXRhLXJlZ2lvbi1uYW1lPSJCb3R0b21MZWZ0U2hlbGxSZWdpb24iIGNsYXNzPSJyZWdpb24gYm90dG9tLWxlZnQtc2hlbGwtcmVnaW9uIGxlZnQtcGFuZWwtY2xvc2VkIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBib3R0b21MZWZ0U2hlbGxSZWdpb25FbGVtZW50fSIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5NdWx0aURpdlJlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA8ZGl2IGRhdGEtcmVnaW9uLW5hbWU9IkJvdHRvbVJpZ2h0U2hlbGxSZWdpb24iIGNsYXNzPSJyZWdpb24gYm90dG9tLXJpZ2h0LXNoZWxsLXJlZ2lvbiByaWdodC1wYW5lbC1jbG9zZWQiIGRhdGEtYmluZGluZz0ie0B2YXI6IGJvdHRvbVJpZ2h0U2hlbGxSZWdpb25FbGVtZW50fSIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5NdWx0aURpdlJlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA8ZGl2IGNsYXNzPSJib3R0b20tcGFuZWwgcGFuZWwtbWluaW1pemVkIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBib3R0b21QYW5lbFJlZ2lvbkVsZW1lbnR9Ij4gPGRpdiBkYXRhLXJlZ2lvbi1uYW1lPSJCb3R0b21QYW5lbFJlZ2lvbiIgY2xhc3M9InJlZ2lvbiBib3R0b20tcGFuZWwtcmVnaW9uIiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLk11bHRpRGl2UmVnaW9uQWRhcHRlciI+PC9kaXY+IDwvZGl2PiA8ZGl2IGRhdGEtcmVnaW9uLW5hbWU9IlNtYWxsTmF2aWdhdGlvblJlZ2lvbiIgY2xhc3M9InJlZ2lvbiBzbWFsbC1uYXZpZ2F0aW9uLXJlZ2lvbiBuYXYtcmVnaW9uLWNsb3NlZCIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogbmF2aWdhdGlvblJlZ2lvbkVsZW1lbnR9IiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLk11bHRpRGl2UmVnaW9uQWRhcHRlciI+PC9kaXY+IDxkaXYgZGF0YS1yZWdpb24tbmFtZT0iTGVmdFBhbmVsUmVnaW9uIiBjbGFzcz0icmVnaW9uIHNpZGUtcmVnaW9uIGxlZnQtcGFuZWwtcmVnaW9uIGxlZnQtcGFuZWwtY2xvc2VkIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBsZWZ0UGFuZWxSZWdpb25FbGVtZW50fSI+PC9kaXY+IDxkaXYgZGF0YS1yZWdpb24tbmFtZT0iUmlnaHRQYW5lbFJlZ2lvbiIgY2xhc3M9InJlZ2lvbiBzaWRlLXJlZ2lvbiByaWdodC1wYW5lbC1yZWdpb24gcmlnaHQtcGFuZWwtY2xvc2VkIiBkYXRhLWJpbmRpbmc9IntAdmFyOiByaWdodFBhbmVsUmVnaW9uRWxlbWVudH0iPjwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Site/ServiceLayersFailureView.html","html","PGRpdiBjbGFzcz0ibW9kdWxlIHNlcnZpY2UtbGF5ZXJzLWZhaWx1cmUiPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXNpdGUtc2VydmljZS1sYXllcnMtZmFpbHVyZS12aWV3LXdhcm5pbmd9e0BoaWRkZW46IGhhc0Vycm9yfSI+PC9wPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXNpdGUtc2VydmljZS1sYXllcnMtZmFpbHVyZS12aWV3LWVycm9yfXtAdmlzaWJsZTogaGFzRXJyb3J9Ij48L3A+IDx1bCBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBmYWlsZWRTZXJ2aWNlc30iPiA8bGkgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogZmFpbGVkU2VydmljZXN9Ij4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG5hbWV9Ij48L3NwYW4+IDwvbGk+IDwvdWw+IDxkaXYgY2xhc3M9ImZvcm0tYnRucyIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogaGFzRXJyb3J9Ij4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBva0J1dHRvbkVsZW1lbnR9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja09rfXtAdGV4dDogQGxhbmd1YWdlLWNvbW1vbi1va30iLz4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Site/SignInErrorView.html","html","PGRpdiBjbGFzcz0ibW9kdWxlIHNpZ24tb24tZXJyb3IiPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXNpdGUtbG9nLW9uLXJlcXVpcmVkLWVycm9yfSI+PC9wPiA8ZGl2IGNsYXNzPSJmb3JtLWJ0bnMiPiA8YnV0dG9uIGNsYXNzPSJidXR0b24iIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja1RyeUFnYWlufXtAdGV4dDogQGxhbmd1YWdlLXNpdGUtdHJ5LWxvZy1vbi1hZ2Fpbn0iIC8+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Status/StatusIndicatorView.html","html","DQo8ZGl2IGNsYXNzPSJzdGF0dXMtaW5kaWNhdG9yIGFuaW0tem9vbS1pbiIgZGF0YS1yZWdpb24tbmFtZT0iU3RhdHVzSW5kaWNhdG9yTWVzc2FnZVJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5NdWx0aURpdlJlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA=");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Status/StatusMessageView.html","html","DQo8ZGl2IGNsYXNzPSJzdGF0dXMtd2luZG93IiBkYXRhLWJpbmRpbmc9IntAdmFyOiBjb250YWluZXJFbGVtZW50fSI+IDx0YWJsZT4gPHRyPiA8dGQ+IDxpbWcgY2xhc3M9InN0YXR1cy1pbWciIGRhdGEtYmluZGluZz0ie3NyYzogaW1hZ2VVcml9e0B2aXNpYmxlOiBpbWFnZVVyaX0iIGFsdD0iICIgYXJpYS1oaWRkZW49InRydWUiIC8+IDwvdGQ+IDx0ZD4gPHNwYW4gY2xhc3M9InN0YXR1cy1tc2ciIGRhdGEtYmluZGluZz0ie0B0ZXh0OiB0ZXh0fSI+PC9zcGFuPiA8L3RkPiA8dGQgY2xhc3M9InN0YXR1cy1jbG9zZSI+IDxidXR0b24gY2xhc3M9InN0YXR1cy1idG4iIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0Nsb3NlfXt0aXRsZTogY2xvc2VUaXRsZX0iPiA8c3Bhbj4mbmJzcDs8L3NwYW4+IDwvYnV0dG9uPiA8L3RkPiA8L3RyPiA8L3RhYmxlPiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Temp/TempView.html","html","PGRpdiBjbGFzcz0iVGVtcENsYXNzIj4gPGgxPlRoaXMgaXMgVGVtcCBWaWV3PC9oMT4gPC9kaXY+IA==");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/LargeToolbarView.html","html","PGRpdiBjbGFzcz0idG9vbGJhci1jb250YWluZXIgdW5zZWxlY3RhYmxlIj4gPGRpdiBjbGFzcz0idG9vbGJhci10YWItY29udGFpbmVyIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogdG9vbGJhclRhYnN9Ij4gPHVsIGNsYXNzPSJ0b29sYmFyLXRhYi1jb250cm9sIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiB0b29sYmFyVGFic30iPiA8bGkgY2xhc3M9InRvb2xiYXItdGFiIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiB0b29sYmFyVGFic317QGNsYXNzLXRiLXRhYi1hY3RpdmU6IGlzQWN0aXZlfXtAaGlkZGVuOiBkaXNhYmxlZH0iPiA8YnV0dG9uIGRhdGEtYmluZGluZz0ie0B0ZXh0OiB0aXRsZX17dGl0bGU6IHRvb2x0aXB9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVUYWJDbGlja30iPjwvYnV0dG9uPiA8L2xpPiA8L3VsPiA8L2Rpdj4gPGRpdiBjbGFzcz0idG9vbGJhci1ib2R5IGxhcmdlIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiB0b29sYmFyR3JvdXBzfXtAdGVtcGxhdGU6IE1hcHBpbmcvbW9kdWxlcy9Ub29sYmFyL1RlbXBsYXRlcy9UYWJiZWRUb29sYmFyR3JvdXBUZW1wbGF0ZS5odG1sfSI+PC9kaXY+IDxkaXYgY2xhc3M9Im11bHRpLXRvb2wtZHJvcGRvd24iIGRhdGEtcmVnaW9uLW5hbWU9IlRvb2xiYXJGbHlvdXREcm9wZG93biIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGFjdGl2ZUZseW91dH17QHZhcjogZmx5b3V0UmVnaW9ufSI+PC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/LargeTransientToolbarView.html","html","PGRpdiBjbGFzcz0ibGFyZ2UtdHJhbnNpZW50LXRvb2xiYXIiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiB0b29sYmFyR3JvdXBzfXtAc291cmNlOiB0b29sYmFyR3JvdXBzfXtAdGVtcGxhdGU6IE1hcHBpbmcvbW9kdWxlcy9Ub29sYmFyL1RlbXBsYXRlcy9Ub29sYmFyR3JvdXBUZW1wbGF0ZS5odG1sfSI+IDxhIGNsYXNzPSJ0b29sYmFyLWNsb3NlLWJ1dHRvbiIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogY2xvc2VUb29sYmFyfSI+PC9hPiANCjwvZGl2PiA8ZGl2ICBjbGFzcz0ibGFyZ2UtdHJhbnNpZW50LXRvb2xiYXIiIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IHRvb2xiYXJHcm91cHN9e0B0ZXh0OiBAbGFuZ3VhZ2UtdG9vbGJhci1ub3QtYXZhaWxhYmxlfSI+IDxpbWcgY2xhc3M9InRvb2xiYXItY2xvc2UtYnV0dG9uIiBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvcGFuZWwtY2xvc2UucG5nIiBkYXRhLWJpbmRpbmc9InthbHQ6IEBsYW5ndWFnZS1jb21tb24tY2xvc2V9e0BldmVudC1vbmNsaWNrOiBjbG9zZVRvb2xiYXJ9IiAvPiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/SmallToolbarView.html","html","PGRpdiBjbGFzcz0idG9vbGJhci1ib2R5IHNtYWxsIHVuc2VsZWN0YWJsZSIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHRvb2xiYXJHcm91cHN9e0Bzb3VyY2U6IHRvb2xiYXJHcm91cHN9e0B0ZW1wbGF0ZTogTWFwcGluZy9tb2R1bGVzL1Rvb2xiYXIvVGVtcGxhdGVzL1Rvb2xiYXJHcm91cFRlbXBsYXRlLmh0bWx9Ij48L2Rpdj4g");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/SmallTransientToolbarView.html","html","PGRpdiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogdG9vbGJhckdyb3Vwc317QHNvdXJjZTogdG9vbGJhckdyb3Vwc317QHRlbXBsYXRlOiBNYXBwaW5nL21vZHVsZXMvVG9vbGJhci9UZW1wbGF0ZXMvVG9vbGJhckdyb3VwVGVtcGxhdGUuaHRtbH0iPjwvZGl2PiA8ZGl2IGRhdGEtYmluZGluZz0ie0BoaWRkZW46IHRvb2xiYXJHcm91cHN9e0B0ZXh0OiBAbGFuZ3VhZ2UtdG9vbGJhci1ub3QtYXZhaWxhYmxlfSI+PC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/ToolbarButtonView.html","html","PGJ1dHRvbiBjbGFzcz0idG9vbGJhci10b2dnbGUtYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogdG9vbGJhckdyb3Vwc317QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrVG9nZ2xlVG9vbGJhcn17dGl0bGU6IEBsYW5ndWFnZS10b29sYmFyLW9wZW4tdG9vbGJhcn0iIHRhYmluZGV4PSIwIj48L2J1dHRvbj4g");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/ToolbarManagedViewsView.html","html","PHRhYmxlIGNsYXNzPSJ0YWItY29udGFpbmVyIj4gPHRyIGNsYXNzPSJ0YWItY29udGFpbmVyIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBob3N0ZWRWaWV3c30iPiA8dGQgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogaG9zdGVkVmlld3N9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVWaWV3VGlsZUNsaWNrfXtjbGFzc05hbWU6IGlkfXtAdmFyOiB0aWxlRWxlbWVudHN9Ij4gPGltZyBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaWNvblVyaX17c3JjOiBpY29uVXJpfXthbHQ6IGRlc2NyaXB0aW9ufSIvPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBpY29uVXJpfXtAdGV4dDogdGl0bGV9Ij48L3NwYW4+IDwvdGQ+IDwvdHI+IDwvdGFibGU+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/ToolbarView.html","html","DQo8ZGl2IGNsYXNzPSJyZWdpb24gdG9vbGJhci10YWItY29udGVudC1yZWdpb24iIGRhdGEtcmVnaW9uLW5hbWU9IlRvb2xiYXJUYWJDb250ZW50UmVnaW9uIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtbW91c2Vkb3duOiBoYW5kbGVNb3VzZURvd259IHtAZXZlbnQtbW91c2V1cDogaGFuZGxlTW91c2VVcH0ge0BldmVudC10b3VjaHN0YXJ0OiBoYW5kbGVUb3VjaFN0YXJ0fSB7QGV2ZW50LXRvdWNoZW5kOiBoYW5kbGVUb3VjaEVuZH0ge0BldmVudC1tb3VzZW91dDogaGFuZGxlTW91c2VPdXR9IHtAZXZlbnQtdG91Y2hjYW5jZWw6IGhhbmRsZVRvdWNoQ2FuY2VsfSB7QGV2ZW50LXRvdWNobW92ZTogaGFuZGxlVG91Y2hNb3ZlfSIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5NdWx0aURpdlJlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/CompactToolbar/CompactToolbarView.html","html","IDxkaXYgY2xhc3M9ImZseW91dC1tZW51IiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaXNFbmFibGVkfSI+ICA8YnV0dG9uIGNsYXNzPSJmbHlvdXQtbWVudS1hY3RpdmUtdG9vbCIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVRvb2xiYXJCdXR0b25DbGlja2VkfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBhY3RpdmVUb29sfSI+IDxpbWcgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGFjdGl2ZVRvb2xJY29ufXtzcmM6IGFjdGl2ZVRvb2xJY29ufSIgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL1Rvb2xiYXIvaWNvbi1ibGFuay0yNC5wbmciIGFsdD0iIi8+IDxzcGFuIGNsYXNzPSJ0b29sLWxhYmVsIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogYWN0aXZlVG9vbE5hbWV9Ij48L3NwYW4+IDwvc3Bhbj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogYWN0aXZlVG9vbH0iPiA8aW1nIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9Ub29sYmFyL3Rvb2xzLTMyLnBuZyIgYWx0PSIiIC8+IDxzcGFuIGNsYXNzPSJ0b29sLWxhYmVsIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWNvbXBhY3QtdG9vbGJhci1idXR0b24tZGVzY3JpcHRpb259Ij48L3NwYW4+IDwvc3Bhbj4gPC9idXR0b24+IDxkaXYgY2xhc3M9ImZseW91dC1tZW51LWNvbGxhcHNpYmxlLWFyZWEgZmx5b3V0LW1lbnUtdG9vbHMiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpc0V4cGFuZGVkfXtAdmFyOiBjb2xsYXBzaWJsZUFyZWFFbGVtZW50fSI+ICA8ZGl2IGRhdGEtYmluZGluZz0ie0BoaWRkZW46IHRyYW5zaWVudEFjdGl2ZX0iPiA8YnV0dG9uIGNsYXNzPSJmbHlvdXQtbWVudS1zY3JvbGwgc2Nyb2xsLWJhY2siIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVTY3JvbGxCYWNrfXtAdmlzaWJsZTogYmFja0Fycm93VmlzaWJsZX17QHZhcjogYmFja0Fycm93RWxlbWVudH0iPiA8aW1nIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9jaGV2cm9uLWxlZnQtMTYucG5nIiBkYXRhLWJpbmRpbmc9InthbHQ6IEBsYW5ndWFnZS1jb21wYWN0LXRvb2xiYXItbW9yZS10b29sc30iPiA8L2J1dHRvbj4gPGRpdiBjbGFzcz0iZmx5b3V0LW1lbnUtZXhwYW5kZWQiIGRhdGEtYmluZGluZz0ie0B2YXI6IGV4cGFuZGVkRWxlbWVudH0iPiA8ZGl2IGNsYXNzPSJmbHlvdXQtbWVudS1mbG9hdGluZy1hcmVhIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiB0b29sYmFyR3JvdXB9e0BldmVudC1vbnNjcm9sbDogdG9nZ2xlU2Nyb2xsQXJyb3dzfXtAdmFyOiBmbG9hdGluZ0FyZWFFbGVtZW50fXtAdGVtcGxhdGU6IE1hcHBpbmcvbW9kdWxlcy9Ub29sYmFyL1RlbXBsYXRlcy9Ub29sYmFyR3JvdXBUZW1wbGF0ZS5odG1sfSI+PC9kaXY+IDwvZGl2PiA8YnV0dG9uIGNsYXNzPSJmbHlvdXQtbWVudS1zY3JvbGwgc2Nyb2xsLWZvcndhcmQiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVTY3JvbGxGb3J3YXJkfXtAdmlzaWJsZTogZm9yd2FyZEFycm93VmlzaWJsZX17QHZhcjogZm9yd2FyZEFycm93RWxlbWVudH0iPiA8aW1nIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9jaGV2cm9uLXJpZ2h0LTE2LnBuZyIgZGF0YS1iaW5kaW5nPSJ7YWx0OiBAbGFuZ3VhZ2UtY29tcGFjdC10b29sYmFyLW1vcmUtdG9vbHN9Ij4gPC9idXR0b24+IDwvZGl2PiAgPGRpdiBjbGFzcz0iZmx5b3V0LW1lbnUtdHJhbnNpZW50IiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLk11bHRpRGl2UmVnaW9uQWRhcHRlciIgZGF0YS1yZWdpb24tbmFtZT0iQ29tcGFjdFRvb2xiYXJUcmFuc2llbnRSZWdpb24iIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiB0cmFuc2llbnRBY3RpdmV9e0B2YXI6IHRyYW5zaWVudEVsZW1lbnR9Ij48L2Rpdj4gIDxkaXYgY2xhc3M9Im11bHRpLXRvb2wtZHJvcGRvd24iIGRhdGEtcmVnaW9uLW5hbWU9IkNvbXBhY3RUb29sYmFyRmx5b3V0RHJvcGRvd24iIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBhY3RpdmVGbHlvdXR9e0BjbGFzcy1tdWx0aS10b29sLWRyb3Bkb3duLWxlZnQ6IG11bHRpdG9vbEZsb2F0TGVmdH17QGNsYXNzLW11bHRpLXRvb2wtZHJvcGRvd24tcmlnaHQ6IG11bHRpdG9vbEZsb2F0UmlnaHR9Ij48L2Rpdj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/Templates/TabbedToolbarGroupTemplate.html","html","PGRpdiBjbGFzcz0idG9vbGJhci1ncm91cCIgZGF0YS1iaW5kaW5nPSJ7QGNsYXNzLWhpZGRlbjogZGlzYWJsZWR9e0B2aXNpYmxlOiBpc0FjdGl2ZX0iPiA8dWwgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogaXRlbXN9e0B0ZW1wbGF0ZS1zZWxlY3RvcjogdHlwZX17QGNsYXNzLXRvb2xiYXItc21hbGwtbGF5b3V0OiBoYXNTbWFsbExheW91dH0iPiA8bGkgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogdG9vbH0iPiA8YnV0dG9uIGNsYXNzPSJ0b29sYmFyLWl0ZW0gdG9vbCIgZGF0YS1iaW5kaW5nPSJ7QGRpc2FibGVkOiBkaXNhYmxlZH17QGNsYXNzLWhpZGRlbjogaGlkZGVufXtAY2xhc3MtaGlnaGxpZ2h0OiBpc0FjdGl2ZX17QGNsYXNzLXRyYW5zaWVudC1hY3RpdmU6IGFjdGl2ZVRyYW5zaWVudH17dGl0bGU6IHRvb2x0aXB9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVUb29sYmFySXRlbUNsaWNrfSI+IDxpbWcgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGljb25Vcml9e3NyYzogaWNvblVyaX0iIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9Ub29sYmFyL2ljb24tYmxhbmstMjQucG5nIiBhbHQ9IiIgLz4gPHAgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG5hbWV9Ij48L3A+IDwvYnV0dG9uPiA8L2xpPiA8bGkgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogYnV0dG9ufSI+IDxidXR0b24gY2xhc3M9InRvb2xiYXItaXRlbSB0b29sIiBkYXRhLWJpbmRpbmc9IntAZGlzYWJsZWQ6IGRpc2FibGVkfXtAY2xhc3MtaGlkZGVuOiBoaWRkZW59e3RpdGxlOiB0b29sdGlwfXtAZXZlbnQtb25jbGljazogaGFuZGxlVG9vbGJhckl0ZW1DbGlja30iPiA8aW1nIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpY29uVXJpfXtzcmM6IGljb25Vcml9IiBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvVG9vbGJhci9pY29uLWJsYW5rLTI0LnBuZyIgYWx0PSIiIC8+IDxwIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBuYW1lfSI+PC9wPiA8L2J1dHRvbj4gPC9saT4gPGxpIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IHRvZ2dsZUJ1dHRvbn0iPiA8YnV0dG9uIGNsYXNzPSJ0b29sYmFyLWl0ZW0gdG9nZ2xlLWJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QGRpc2FibGVkOiBkaXNhYmxlZH17QGNsYXNzLWhpZGRlbjogaGlkZGVufXtAY2xhc3MtdG9nZ2xlZC1vbjogaXNUb2dnbGVkT259e0Bub2NsYXNzLXRvZ2dsZWQtb2ZmOiBpc1RvZ2dsZWRPbn17QGNsYXNzLXRyYW5zaWVudC1hY3RpdmU6IGFjdGl2ZVRyYW5zaWVudH17dGl0bGU6IHRvb2x0aXB9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVUb29sYmFySXRlbUNsaWNrfXthcmlhLWxhYmVsOiBuYW1lfSI+IDxpbWcgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGljb25Vcml9e3NyYzogaWNvblVyaX0iIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9Ub29sYmFyL2ljb24tYmxhbmstMjQucG5nIiBhbHQ9IiIgLz4gPHAgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG5hbWV9Ij48L3A+IDwvYnV0dG9uPiA8L2xpPiA8bGkgY2xhc3M9InRvb2xiYXItcmVnaW9uIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiByZWdpb259Ij4gPGRpdiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiByZWdpb259e0B3aWRnZXQ6IFJlZ2lvbldpZGdldH17QHdpZGdldC1jb250ZXh0OiBAY29udGV4dH0iPjwvZGl2PiA8L2xpPiA8bGkgY2xhc3M9Im5lc3RlZC1ncm91cCIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogdG9vbGJhckdyb3VwfXtAdGVtcGxhdGU6IE1hcHBpbmcvbW9kdWxlcy9Ub29sYmFyL1RlbXBsYXRlcy9UYWJiZWRUb29sYmFyR3JvdXBUZW1wbGF0ZS5odG1sfSI+PC9saT4gPGxpIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IGZseW91dH17QGNsYXNzLWhpZGRlbjogZGlzYWJsZWR9e0B0ZW1wbGF0ZTogTWFwcGluZy9tb2R1bGVzL1Rvb2xiYXIvVGVtcGxhdGVzL1Rvb2xiYXJGbHlvdXRCdXR0b25UZW1wbGF0ZS5odG1sfSI+PC9saT4gPC91bD4gPGg0IGRhdGEtYmluZGluZz0ie0B0ZXh0OiBuYW1lfXtAdmlzaWJsZTogbmFtZX0iPjwvaDQ+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/Templates/ToolbarFlyoutButtonTemplate.html","html","PGRpdiBjbGFzcz0ibXVsdGktdG9vbC1pdGVtLWNvbnRhaW5lciIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogc2VsZWN0ZWRUb29sfXtAdGVtcGxhdGUtc2VsZWN0b3I6IHR5cGV9e0B0ZW1wbGF0ZS1mb3I6IHNlbGVjdGVkVG9vbH0iPiA8YnV0dG9uIGNsYXNzPSJ0b29sYmFyLWl0ZW0gbXVsdGktdG9vbCIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogYnV0dG9ufXtAZXZlbnQtb25jbGljazogaGFuZGxlVG9vbGJhckl0ZW1DbGlja317dGl0bGU6IHRvb2x0aXB9e2FyaWEtbGFiZWw6IG5hbWV9Ij4gPGltZyBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaWNvblVyaX17c3JjOiBpY29uVXJpfSIgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL1Rvb2xiYXIvaWNvbi1ibGFuay0yNC5wbmciIGFsdD0iIiAvPiA8L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz0idG9vbGJhci1pdGVtIG11bHRpLXRvb2wiIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IHRvZ2dsZUJ1dHRvbn17QGRpc2FibGVkOiBkaXNhYmxlZH17QGNsYXNzLWhpZGRlbjogaGlkZGVufXtAY2xhc3MtdG9nZ2xlZC1vbjogaXNUb2dnbGVkT259e0Bub2NsYXNzLXRvZ2dsZWQtb2ZmOiBpc1RvZ2dsZWRPbn17QGNsYXNzLXRyYW5zaWVudC1hY3RpdmU6IGFjdGl2ZVRyYW5zaWVudH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVRvb2xiYXJJdGVtQ2xpY2t9e3RpdGxlOiB0b29sdGlwfXthcmlhLWxhYmVsOiBuYW1lfSI+IDxpbWcgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGljb25Vcml9e3NyYzogaWNvblVyaX0iIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9Ub29sYmFyL2ljb24tYmxhbmstMjQucG5nIiBhbHQ9IiIgLz4gPC9idXR0b24+IDxidXR0b24gY2xhc3M9InRvb2xiYXItaXRlbSBtdWx0aS10b29sIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiB0b29sfXtAZGlzYWJsZWQ6IGRpc2FibGVkfXtAY2xhc3MtaGlnaGxpZ2h0OiBpc0FjdGl2ZX17QGNsYXNzLXRyYW5zaWVudC1hY3RpdmU6IGFjdGl2ZVRyYW5zaWVudH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVRvb2xiYXJJdGVtQ2xpY2t9e3RpdGxlOiB0b29sdGlwfXthcmlhLWxhYmVsOiBuYW1lfSI+IDxpbWcgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGljb25Vcml9e3NyYzogaWNvblVyaX0iIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9Ub29sYmFyL2ljb24tYmxhbmstMjQucG5nIiBhbHQ9IiIgLz4gPC9idXR0b24+IDwvZGl2PiA8YnV0dG9uIGNsYXNzPSJtdWx0aS10b29sLWJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZU9wZW5Ub29sRmx5b3V0fXtAdGV4dDogbmFtZX17QGF0dGFjaDogc2VsZWN0ZWRUb29sfXt0aXRsZTogZmx5b3V0QnV0dG9uRGVzY3JpcHRpb259e2FyaWEtbGFiZWw6IGZseW91dEJ1dHRvbkRlc2NyaXB0aW9ufSI+PC9idXR0b24+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/Templates/ToolbarFlyoutDropdownTemplate.html","html","PGRpdiBjbGFzcz0ibXVsdGktdG9vbC1jb250YWluZXIiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGFjdGl2ZUZseW91dH0iPiA8dWwgY2xhc3M9Im11bHRpLXRvb2wtbGlzdCIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogYWN0aXZlRmx5b3V0fXtAc291cmNlOiBpdGVtc317QHRlbXBsYXRlLXNlbGVjdG9yOiB0eXBlfSI+IDxsaSBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBidXR0b259Ij4gPGJ1dHRvbiBjbGFzcz0idG9vbGJhci1pdGVtIHRvb2wiIGRhdGEtYmluZGluZz0ie0BkaXNhYmxlZDogZGlzYWJsZWR9e0BjbGFzcy1oaWRkZW46IGhpZGRlbn17QGV2ZW50LW9uY2xpY2s6IGNoYW5nZVRvb2xGbHlvdXR9e3RpdGxlOiB0b29sdGlwfSI+IDxpbWcgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGljb25Vcml9e3NyYzogaWNvblVyaX0iIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9Ub29sYmFyL2ljb24tYmxhbmstMjQucG5nIiBhbHQ9IiIgLz4gPHAgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG5hbWV9Ij48L3A+IDwvYnV0dG9uPiA8L2xpPiA8bGkgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogdG9nZ2xlQnV0dG9ufSI+IDxidXR0b24gY2xhc3M9InRvb2xiYXItaXRlbSB0b29sIiBkYXRhLWJpbmRpbmc9IntAZGlzYWJsZWQ6IGRpc2FibGVkfXtAY2xhc3MtaGlkZGVuOiBoaWRkZW59e0BjbGFzcy10b2dnbGVkLW9uOiBpc1RvZ2dsZWRPbn17QG5vY2xhc3MtdG9nZ2xlZC1vZmY6IGlzVG9nZ2xlZE9ufXtAZXZlbnQtb25jbGljazogY2hhbmdlVG9vbEZseW91dH17dGl0bGU6IHRvb2x0aXB9e2FyaWEtbGFiZWw6IG5hbWV9Ij4gPGltZyBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaWNvblVyaX17c3JjOiBpY29uVXJpfSIgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL1Rvb2xiYXIvaWNvbi1ibGFuay0yNC5wbmciIGFsdD0iIiAvPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogbmFtZX0iPjwvcD4gPC9idXR0b24+IDwvbGk+IDxsaSBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiB0b29sfSI+IDxidXR0b24gY2xhc3M9InRvb2xiYXItaXRlbSB0b29sIiBkYXRhLWJpbmRpbmc9IntAZGlzYWJsZWQ6IGRpc2FibGVkfXtAY2xhc3MtaGlkZGVuOiBoaWRkZW59e0BjbGFzcy1oaWdobGlnaHQ6IGlzQWN0aXZlfXtAZXZlbnQtb25jbGljazogY2hhbmdlVG9vbEZseW91dH17dGl0bGU6IHRvb2x0aXB9Ij4gPGltZyBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaWNvblVyaX17c3JjOiBpY29uVXJpfSIgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL1Rvb2xiYXIvaWNvbi1ibGFuay0yNC5wbmciIGFsdD0iIiAvPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogbmFtZX0iPjwvcD4gPC9idXR0b24+IDwvbGk+IDwvdWw+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/Templates/ToolbarGroupTemplate.html","html","PGRpdiBjbGFzcz0idG9vbGJhci1pdGVtIHRvb2xiYXItZ3JvdXAiPiA8aDIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG5hbWV9Ij48L2gyPiA8dWwgY2xhc3M9InRvb2xiYXItcGFyZW50IiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBpdGVtc317QHRlbXBsYXRlLXNlbGVjdG9yOiB0eXBlfXtAY2xhc3MtdG9vbGJhci1zbWFsbC1sYXlvdXQ6IGhhc1NtYWxsTGF5b3V0fXtAdmFyOiB0b29sYmFyUGFyZW50RWxlbWVudH0iPiA8bGkgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogdG9vbH0iPiA8YnV0dG9uIGNsYXNzPSJ0b29sYmFyLWl0ZW0gdG9vbCIgZGF0YS1iaW5kaW5nPSJ7QGRpc2FibGVkOiBkaXNhYmxlZH17QGNsYXNzLWhpZ2hsaWdodDogaXNBY3RpdmV9e0BjbGFzcy10cmFuc2llbnQtYWN0aXZlOiBhY3RpdmVUcmFuc2llbnR9e0BjbGFzcy1oaWRkZW46IGhpZGRlbn17dGl0bGU6IHRvb2x0aXB9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVUb29sYmFySXRlbUNsaWNrfSI+IDxpbWcgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGljb25Vcml9e3NyYzogaWNvblVyaX0iIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9Ub29sYmFyL2ljb24tYmxhbmstMjQucG5nIiBhbHQ9IiIgLz4gPHAgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG5hbWV9Ij48L3A+IDwvYnV0dG9uPiA8L2xpPiA8bGkgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogYnV0dG9ufSI+IDxidXR0b24gY2xhc3M9InRvb2xiYXItaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QGRpc2FibGVkOiBkaXNhYmxlZH17QGNsYXNzLWhpZGRlbjogaGlkZGVufXt0aXRsZTogdG9vbHRpcH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVRvb2xiYXJJdGVtQ2xpY2t9Ij4gPGltZyBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaWNvblVyaX17c3JjOiBpY29uVXJpfSIgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL1Rvb2xiYXIvaWNvbi1ibGFuay0yNC5wbmciIGFsdD0iIiAvPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogbmFtZX0iPjwvcD4gPC9idXR0b24+IDwvbGk+IDxsaSBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiB0b2dnbGVCdXR0b259Ij4gPGJ1dHRvbiBjbGFzcz0idG9vbGJhci1pdGVtIHRvZ2dsZS1idXR0b24iIGRhdGEtYmluZGluZz0ie0BkaXNhYmxlZDogZGlzYWJsZWR9e0BjbGFzcy1oaWRkZW46IGhpZGRlbn17QGNsYXNzLXRvZ2dsZWQtb246IGlzVG9nZ2xlZE9ufXtAY2xhc3MtdHJhbnNpZW50LWFjdGl2ZTogYWN0aXZlVHJhbnNpZW50fXt0aXRsZTogdG9vbHRpcH17QG5vY2xhc3MtdG9nZ2xlZC1vZmY6IGlzVG9nZ2xlZE9ufXtAZXZlbnQtb25jbGljazogaGFuZGxlVG9vbGJhckl0ZW1DbGlja317YXJpYS1sYWJlbDogbmFtZX0iPiA8aW1nIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpY29uVXJpfXtzcmM6IGljb25Vcml9IiBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvVG9vbGJhci9pY29uLWJsYW5rLTI0LnBuZyIgYWx0PSIiIC8+IDxwIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBuYW1lfSI+PC9wPiA8L2J1dHRvbj4gPC9saT4gPGxpIGNsYXNzPSJ0b29sYmFyLXJlZ2lvbiIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogcmVnaW9ufXt0aXRsZTogdG9vbHRpcH0iPiA8YnV0dG9uIGRhdGEtYmluZGluZz0ie0B3aWRnZXQ6IFJlZ2lvbldpZGdldH17QHdpZGdldC1jb250ZXh0OiBAY29udGV4dH0iPjwvYnV0dG9uPiA8L2xpPiA8bGkgY2xhc3M9InRvb2xiYXItaXRlbSB0b29sYmFyLWdyb3VwIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiB0b29sYmFyR3JvdXB9e0BjbGFzcy1oaWRkZW46IGRpc2FibGVkfXtAdGVtcGxhdGU6IE1hcHBpbmcvbW9kdWxlcy9Ub29sYmFyL1RlbXBsYXRlcy9Ub29sYmFySXRlbXNUZW1wbGF0ZS5odG1sfSI+PC9saT4gPGxpIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IGZseW91dH17QGNsYXNzLWhpZGRlbjogZGlzYWJsZWR9e0B0ZW1wbGF0ZTogTWFwcGluZy9tb2R1bGVzL1Rvb2xiYXIvVGVtcGxhdGVzL1Rvb2xiYXJGbHlvdXRCdXR0b25UZW1wbGF0ZS5odG1sfSI+PC9saT4gPC91bD4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/Templates/ToolbarItemsTemplate.html","html","PGgzIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBuYW1lfSI+PC9oMz4gIDx1bCBjbGFzcz0idG9vbGJhci1uZXN0ZWQiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGl0ZW1zfXtAdGVtcGxhdGUtc2VsZWN0b3I6IHR5cGV9Ij4gPGxpIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IHRvb2x9Ij4gPGJ1dHRvbiBjbGFzcz0idG9vbGJhci1pdGVtIHRvb2wiIGRhdGEtYmluZGluZz0ie0BkaXNhYmxlZDogZGlzYWJsZWR9e0BjbGFzcy1oaWRkZW46IGhpZGRlbn17QGNsYXNzLWhpZ2hsaWdodDogaXNBY3RpdmV9e0BjbGFzcy10cmFuc2llbnQtYWN0aXZlOiBhY3RpdmVUcmFuc2llbnR9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVUb29sYmFySXRlbUNsaWNrfXt0aXRsZTogdG9vbHRpcH0iPiA8aW1nIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpY29uVXJpfXtzcmM6IGljb25Vcml9IiBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvVG9vbGJhci9pY29uLWJsYW5rLTI0LnBuZyIgYWx0PSIiIC8+IDxwIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBuYW1lfSI+PC9wPiA8L2J1dHRvbj4gPC9saT4gPGxpIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IGJ1dHRvbn0iPiA8YnV0dG9uIGNsYXNzPSJ0b29sYmFyLWl0ZW0gdG9vbCIgZGF0YS1iaW5kaW5nPSJ7QGRpc2FibGVkOiBkaXNhYmxlZH17QGNsYXNzLWhpZGRlbjogaGlkZGVufXtAZXZlbnQtb25jbGljazogaGFuZGxlVG9vbGJhckl0ZW1DbGlja317dGl0bGU6IHRvb2x0aXB9Ij4gPGltZyBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaWNvblVyaX17c3JjOiBpY29uVXJpfSIgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL1Rvb2xiYXIvaWNvbi1ibGFuay0yNC5wbmciIGFsdD0iIiAvPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogbmFtZX0iPjwvcD4gPC9idXR0b24+IDwvbGk+IDxsaSBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiB0b2dnbGVCdXR0b259Ij4gPGJ1dHRvbiBjbGFzcz0idG9vbGJhci1pdGVtIHRvZ2dsZS1idXR0b24iIGRhdGEtYmluZGluZz0ie0BkaXNhYmxlZDogZGlzYWJsZWR9e0BjbGFzcy1oaWRkZW46IGhpZGRlbn17QGNsYXNzLXRvZ2dsZWQtb246IGlzVG9nZ2xlZE9ufXtAY2xhc3MtdHJhbnNpZW50LWFjdGl2ZTogYWN0aXZlVHJhbnNpZW50fXtAbm9jbGFzcy10b2dnbGVkLW9mZjogaXNUb2dnbGVkT259e0BldmVudC1vbmNsaWNrOiBoYW5kbGVUb29sYmFySXRlbUNsaWNrfXt0aXRsZTogdG9vbHRpcH17YXJpYS1sYWJlbDogbmFtZX0iPiA8aW1nIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpY29uVXJpfXtzcmM6IGljb25Vcml9IiBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvVG9vbGJhci9pY29uLWJsYW5rLTI0LnBuZyIgYWx0PSIiIC8+IDxwIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBuYW1lfSI+PC9wPiA8L2J1dHRvbj4gPC9saT4gPGxpIGNsYXNzPSJ0b29sYmFyLXJlZ2lvbiIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogcmVnaW9ufXt0aXRsZTogdG9vbHRpcH0iPiA8ZGl2IGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IHJlZ2lvbn17QHdpZGdldDogUmVnaW9uV2lkZ2V0fXtAd2lkZ2V0LWNvbnRleHQ6IEBjb250ZXh0fSI+PC9kaXY+IDwvbGk+IDxsaSBjbGFzcz0ibmVzdGVkLWdyb3VwIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiB0b29sYmFyR3JvdXB9e0B0ZW1wbGF0ZTogTWFwcGluZy9tb2R1bGVzL1Rvb2xiYXIvVGVtcGxhdGVzL1RhYmJlZFRvb2xiYXJHcm91cFRlbXBsYXRlLmh0bWx9Ij48L2xpPiA8bGkgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogZmx5b3V0fXtAY2xhc3MtaGlkZGVuOiBkaXNhYmxlZH17QHRlbXBsYXRlOiBNYXBwaW5nL21vZHVsZXMvVG9vbGJhci9UZW1wbGF0ZXMvVG9vbGJhckZseW91dEJ1dHRvblRlbXBsYXRlLmh0bWx9Ij48L2xpPiA8L3VsPiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/Templates/ToolbarRegionTemplate.html","html","PGRpdiBkYXRhLWJpbmRpbmc9IntkYXRhLXJlZ2lvbi1uYW1lOiByZWdpb25OYW1lfSIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5NdWx0aURpdlJlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA=");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/Templates/TransientItems.html","html","PHVsIGNsYXNzPSJ0cmFuc2llbnQtdG9vbGJhciIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogaXRlbXN9e0B0ZW1wbGF0ZS1zZWxlY3RvcjogdHlwZX17QGNsYXNzLWhhcy1uZWlnaGJvdXItdHJhbnNpZW50OiBoYXNOZWlnaGJvdXJ9Ij4gPGxpIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IHRvb2x9Ij4gPGJ1dHRvbiBjbGFzcz0idG9vbGJhci1pdGVtIHRvb2wiIGRhdGEtYmluZGluZz0ie0BkaXNhYmxlZDogZGlzYWJsZWR9e0BjbGFzcy1oaWRkZW46IGhpZGRlbn17QGNsYXNzLWhpZ2hsaWdodDogaXNBY3RpdmV9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVUb29sYmFySXRlbUNsaWNrfXt0aXRsZTogdG9vbHRpcH0iPiA8aW1nIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpY29uVXJpfXtzcmM6IGljb25Vcml9IiBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvVG9vbGJhci9pY29uLWJsYW5rLTI0LnBuZyIgYWx0PSIiIC8+IDxwIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBuYW1lfSI+PC9wPiA8L2J1dHRvbj4gPC9saT4gPGxpIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IGJ1dHRvbn0iPiA8YnV0dG9uIGNsYXNzPSJ0b29sYmFyLWl0ZW0gdG9vbCIgZGF0YS1iaW5kaW5nPSJ7QGRpc2FibGVkOiBkaXNhYmxlZH17QGNsYXNzLWhpZGRlbjogaGlkZGVufXtAZXZlbnQtb25jbGljazogaGFuZGxlVG9vbGJhckl0ZW1DbGlja317dGl0bGU6IHRvb2x0aXB9Ij4gPGltZyBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaWNvblVyaX17c3JjOiBpY29uVXJpfSIgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL1Rvb2xiYXIvaWNvbi1ibGFuay0yNC5wbmciIGFsdD0iIiAvPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogbmFtZX0iPjwvcD4gPC9idXR0b24+IDwvbGk+IDxsaSBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiB0b2dnbGVCdXR0b259Ij4gPGJ1dHRvbiBjbGFzcz0idG9vbGJhci1pdGVtIHRvZ2dsZS1idXR0b24iIGRhdGEtYmluZGluZz0ie0BkaXNhYmxlZDogZGlzYWJsZWR9e0BjbGFzcy1oaWRkZW46IGhpZGRlbn17QGNsYXNzLXRvZ2dsZWQtb246IGlzVG9nZ2xlZE9ufXtAbm9jbGFzcy10b2dnbGVkLW9mZjogaXNUb2dnbGVkT259e0BldmVudC1vbmNsaWNrOiBoYW5kbGVUb29sYmFySXRlbUNsaWNrfXt0aXRsZTogdG9vbHRpcH17YXJpYS1sYWJlbDogbmFtZX0iPiA8aW1nIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpY29uVXJpfXtzcmM6IGljb25Vcml9IiBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvVG9vbGJhci9pY29uLWJsYW5rLTI0LnBuZyIgYWx0PSIiIC8+IDxwIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBuYW1lfSI+PC9wPiA8L2J1dHRvbj4gPC9saT4gPC91bD4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/User/SignInView.html","html","PGRpdiBjbGFzcz0ic2lnbi1pbiIgdGFiaW5kZXg9Ii0xIj4gPGJ1dHRvbiANCiAgICAgICAgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVNpZ25JbkNsaWNrfQ0KICAgICAgICAgICAgICAgICAgICAgIHtAdGV4dDogQGxhbmd1YWdlLXVzZXItc2lnbi1pbn0NCiAgICAgICAgICAgICAgICAgICAgICB7dGl0bGU6IEBsYW5ndWFnZS11c2VyLXNpZ24taW4tZGVzY30NCiAgICAgICAgICAgICAgICAgICAgICB7QHN0eWxlLWNvbG9yOiBsaW5rQ29sb3J9IiB0YWJpbmRleD0iMCI+IDwvYnV0dG9uPiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/User/UserInfoView.html","html","PGRpdiBjbGFzcz0idXNlci1pbmZvLXdyYXBwZXIiIHRhYmluZGV4PSItMSI+IDxkaXYgY2xhc3M9InVzZXItaW5mbyIgZGF0YS1iaW5kaW5nPSJ7QGNsYXNzLWV4cGFuZGVkOiBleHBhbmRlZH17QHN0eWxlLWJhY2tncm91bmRDb2xvcjogYmFja2dyb3VuZENvbG9yfSIgPiA8ZGl2IGNsYXNzPSJ1c2VyLWluZm8tZXhwYW5kZXIiPiA8YSBocmVmPSIjIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlRXhwYW5kZXJDbGlja317QHRleHQ6IEBsYW5ndWFnZS11c2VyLW9wZW5tZW51fSI+PC9hPiA8L2Rpdj4gPGRpdiBjbGFzcz0ic2lnbi1vdXQiPiA8YnV0dG9uIA0KICAgICAgICAgICAgICAgIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtdXNlci1zaWduLW91dH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aXRsZTogQGxhbmd1YWdlLXVzZXItc2lnbi1vdXQtZGVzY30NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtAdmlzaWJsZTogc2lnbk91dFZpc2libGV9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVNpZ25PdXRDbGlja30NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtAc3R5bGUtY29sb3I6IGxpbmtDb2xvcn0iPiA8L2J1dHRvbj4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJ1c2VyLWluZm8tcG9wdXAiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBleHBhbmRlZH17QHN0eWxlLWNvbG9yOiB0ZXh0Q29sb3J9e0BzdHlsZS1iYWNrZ3JvdW5kQ29sb3I6IGJhY2tncm91bmRDb2xvcn0iIHRhYmluZGV4PSItMSI+IDxwIGNsYXNzPSJ1c2VyLWluZm8tZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS11c2VyLXNpZ25lZC1pbi1hc30iPjwvcD4gPHAgY2xhc3M9InVzZXItbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHVzZXJOYW1lfSI+PC9wPiA8YnV0dG9uDQogICAgICAgICAgICBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXVzZXItc2lnbi1vdXR9DQogICAgICAgICAgICAgICAgICAgICAgICAgIHt0aXRsZTogQGxhbmd1YWdlLXVzZXItc2lnbi1vdXQtZGVzY30NCiAgICAgICAgICAgICAgICAgICAgICAgICAge0B2aXNpYmxlOiBzaWduT3V0VmlzaWJsZX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAge0BldmVudC1vbmNsaWNrOiBoYW5kbGVTaWduT3V0Q2xpY2t9DQogICAgICAgICAgICAgICAgICAgICAgICAgIHtAc3R5bGUtY29sb3I6IGxpbmtDb2xvcn0iPiA8L2J1dHRvbj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Visualization/VisualizationView.html","html","PGRpdiBjbGFzcz0idmlzdWFsaXphdGlvbiBwYW5lbC1ncm91cC1jb250ZW50cyI+IDxkaXYgY2xhc3M9InZpc3VhbGl6YXRpb24tc2VsZWN0b3IgZm9ybS1pdGVtIj4gPGxhYmVsIGZvcj0idmlzdWFsaXphdGlvbiIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS12aXN1YWxpemF0aW9uLXNlbGVjdH0iPjwvbGFiZWw+IDxzZWxlY3QgaWQ9InZpc3VhbGl6YXRpb24iIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHN1cHBvcnRlZFByb3ZpZGVyc317QHZhbHVlOiBzZWxlY3RlZFZpc3VhbGl6YXRpb259Ij4gPG9wdGlvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBzdXBwb3J0ZWRQcm92aWRlcnN9e0B0ZXh0OiBkaXNwbGF5TmFtZX17QHZhbHVlOiBkaXNwbGF5TmFtZX0iPjwvb3B0aW9uPiA8L3NlbGVjdD4gPC9kaXY+ICA8ZGl2IGNsYXNzPSJ2aXN1YWxpemF0aW9uLW9wdGlvbnMiIGRhdGEtYmluZGluZz0ie2RhdGEtcmVnaW9uLW5hbWU6IHJlZ2lvbk5hbWV9e2RhdGEtcmVnaW9uLWFkYXB0ZXI6IHJlZ2lvblR5cGV9e0B2YXI6IHNjcm9sbFJlZ2lvbkVsZW1lbnR9e0BldmVudC1vbnNjcm9sbDogaGFuZGxlU2Nyb2xsQ2hhbmdlfXtAaGlkZGVuOiBpc1NpbXBsZVZpZXd9Ij48L2Rpdj4gIDxkaXYgY2xhc3M9ImZvcm0tYnRucyI+IDxidXR0b24gY2xhc3M9ImJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LWNsaWNrOiBoYW5kbGVBcHBseUJ1dHRvbkNsaWNrfXtAdGV4dDogQGxhbmd1YWdlLXZpc3VhbGl6YXRpb24tYXBwbHl9Ij48L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtY2xpY2s6IGhhbmRsZURvbmVCdXR0b25DbGlja317QHRleHQ6IEBsYW5ndWFnZS12aXN1YWxpemF0aW9uLWRvbmV9Ij48L2J1dHRvbj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/DisplayCaptureGeometryView.html","html","PGRpdiBjbGFzcz0ibW9kdWxlIGRpc3BsYXktY2FwdHVyZS1nZW9tZXRyeSI+IDxkaXYgY2xhc3M9ImZvcm0tdGl0bGUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiB0aXRsZX17QHZpc2libGU6IHNob3dUaXRsZUluRm9ybUJvZHl9Ij48L2Rpdj4gIDxkaXYgY2xhc3M9IndvcmtmbG93LWluc3RydWN0aW9uLW1zZyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGluc3RydWN0aW9uTWVzc2FnZX0iPjwvZGl2PiAgPHNwYW4gY2xhc3M9IndvcmtmbG93LWZvcm0tZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGN1c3RvbUdlb21ldHJ5SW5zdHJ1Y3Rpb25zfSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0id29ya2Zsb3ctZm9ybS1kZXNjIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBjdXN0b21HZW9tZXRyeUluc3RydWN0aW9uc317QHRleHQ6IEBsYW5ndWFnZS1nZW9tZXRyeS10b29sYmFyLWluc3RydWN0aW9uc30iPjwvc3Bhbj4gIDxkaXYgY2xhc3M9ImZvcm0tYnRucyBnZW9tZXRyeSIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogY2FwdHVyZVR5cGVzfSI+IDxidXR0b24gY2xhc3M9ImJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogY2FwdHVyZVR5cGVzfXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2FwdHVyZVR5cGVTZWxlY3Rpb259e2lkOiB0eXBlTmFtZX17dGl0bGU6IHRvb2x0aXB9e0BjbGFzcy1oaWdobGlnaHQ6IGlzU2VsZWN0ZWR9Ij4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7Y2xhc3M6IGNsYXNzTmFtZX0iPjwvc3Bhbj4gPC9idXR0b24+IDwvZGl2PiAgPGRpdiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc2hvd1JlcXVpcmVkVmFsaWRhdGlvbk1lc3NhZ2V9Ij4gPGRpdiBjbGFzcz0id29ya2Zsb3ctc3RhdHVzLW1zZyBpbnZhbGlkIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogdmFsaWRhdGlvblJlc3VsdHN9Ij4gPHRhYmxlPiA8dHI+IDx0ZD48aW1nIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9lcnJvci13aGl0ZS0yNC5wbmciIGRhdGEtYmluZGluZz0ie2FsdDogQGxhbmd1YWdlLWdlb21ldHJ5LWNhcHR1cmVkfSIvPjwvdGQ+IDx0ZCBkYXRhLWJpbmRpbmc9IntAc291cmNlOiB2YWxpZGF0aW9uUmVzdWx0c30iPjxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IHZhbGlkYXRpb25SZXN1bHRzfXtAdGV4dDogZXJyb3JNZXNzYWdlfSIgLz48L3RkPiA8L3RyPiA8L3RhYmxlPiA8L2Rpdj4gPC9kaXY+ICA8ZGl2IGNsYXNzPSJ3b3JrZmxvdy1zdGF0dXMtbXNnIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogY2FwdHVyZWRNZXNzYWdlVmlzaWJsZX0iID4gPHRhYmxlPiA8dHI+IDx0ZD48aW1nIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9jaGVjay0yNC5wbmciIGRhdGEtYmluZGluZz0ie2FsdDogQGxhbmd1YWdlLWdlb21ldHJ5LWNhcHR1cmVkfSIvPjwvdGQ+IDx0ZCB2YWxpZ249Im1pZGRsZSI+PHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1nZW9tZXRyeS1jYXB0dXJlZH0iIC8+PC90ZD4gPC90cj4gPC90YWJsZT4gPC9kaXY+ICA8ZGl2IGNsYXNzPSJmb3JtLWJ0bnMiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGJ1dHRvbnN9Ij4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBidXR0b25zfXtAdGV4dDogbGFiZWx9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0J1dHRvbn0iPjwvYnV0dG9uPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/DisplayHyperlinkView.html","html","DQo8ZGl2IGNsYXNzPSJtb2R1bGUgZGlzcGxheS1oeXBlcmxpbmsiPiA8aDIgY2xhc3M9ImZvcm0tdGl0bGUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiB0aXRsZX17QHZpc2libGU6IHNob3dUaXRsZUluRm9ybUJvZHl9Ij48L2gyPiA8cCBjbGFzcz0iZm9ybS1pdGVtIGZvcm0tZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG1lc3NhZ2V9Ij48L3A+IDxhIGNsYXNzPSJmb3JtLWl0ZW0iIGRhdGEtYmluZGluZz0ie2hyZWY6IHVyaX17dGFyZ2V0OiB0YXJnZXR9e0B0ZXh0OiBoeXBlcmxpbmtUZXh0fSI+PC9hPiA8ZGl2IGNsYXNzPSJmb3JtLWJ0bnMiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGJ1dHRvbnN9Ij4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBidXR0b25zfXtAdGV4dDogbGFiZWx9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0J1dHRvbn0iPjwvYnV0dG9uPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/DisplayReportUrlView.html","html","PGRpdiBjbGFzcz0ibW9kdWxlIGRpc3BsYXktaHlwZXJsaW5rIj4gPHAgY2xhc3M9ImZvcm0taXRlbSBmb3JtLWRlc2MiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2Utd29ya2Zsb3ctcmVwb3J0LXVybH0iPjwvcD4gPGEgY2xhc3M9ImZvcm0taXRlbSIgZGF0YS1iaW5kaW5nPSJ7aHJlZjogdXJsfXt0YXJnZXQ6IHRhcmdldH17QHRleHQ6IEBsYW5ndWFnZS13b3JrZmxvdy1yZXBvcnQtdXJsLXRleHR9Ij48L2E+IDxkaXYgY2xhc3M9ImZvcm0tYnRucyIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogYnV0dG9uc30iPiA8YnV0dG9uIGNsYXNzPSJidXR0b24iIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGJ1dHRvbnN9e0B0ZXh0OiBsYWJlbH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrQnV0dG9ufSI+PC9idXR0b24+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/DisplayResultPickerView.html","html","PGRpdiBjbGFzcz0ibW9kdWxlIGRpc3BsYXktcmVzdWx0LXBpY2tlciI+ICA8ZGl2IGNsYXNzPSJuby1yZXN1bHRzIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBmZWF0dXJlc30iPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWNvbW1vbi1uby1yZXN1bHRzfSI+PC9wPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWNvbW1vbi1uby1yZXN1bHRzLWRlc2N9Ij48L3A+IDwvZGl2PiAgPGRpdiBjbGFzcz0iZmlsdGVyLXNlY3Rpb24iIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBmaWx0ZXJTZWN0aW9uVmlzaWJsZX17QHZhcjogdG9wQ29udGFpbmVyfSI+ICA8ZGl2IGNsYXNzPSJkaXNwbGF5LXJlc3VsdC1waWNrZXItbWVzc2FnZSIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IG1lc3NhZ2V9Ij4gPHAgY2xhc3M9ImZvcm0taXRlbSBmb3JtLWRlc2MiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBtZXNzYWdlfSI+PC9wPiA8L2Rpdj4gIDxkaXYgY2xhc3M9ImZpbHRlci10ZXh0LWJveCIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHNob3dGaWx0ZXJUZXh0Qm94fSI+IDxpbnB1dCB0eXBlPSJ0ZXh0IiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogZmVhdHVyZVNldH17QHZhbHVlOiBmaWx0ZXJUZXh0fXtwbGFjZWhvbGRlcjogQGxhbmd1YWdlLWRpc3BsYXktcmVzdWx0LXBpY2tlci1maWx0ZXItdGV4dC1ib3gtd2F0ZXJtYXJrfSI+IDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsZWFyVGV4dEJveH17QHZpc2libGU6IGZpbHRlclRleHR9Ij5DbGVhcjwvYT4gPC9kaXY+IDxkaXYgY2xhc3M9ImZpbHRlci1zZWxlY3Rpb24tbW9kZSIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogaXNTaW5nbGVTZWxlY3Rpb25Nb2RlfSI+IDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgZGF0YS1iaW5kaW5nPSJ7Y2xhc3NOYW1lOiBkaXNhYmxlZExpbmtDc3NDbGFzc317QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVNlbGVjdEFsbH0iPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWRpc3BsYXktcmVzdWx0LXBpY2tlci1zZWxlY3QtYWxsfSI+PC9zcGFuPiA8L2E+IDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVNlbGVjdE5vbmV9Ij4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1kaXNwbGF5LXJlc3VsdC1waWNrZXItc2VsZWN0LW5vbmV9Ij48L3NwYW4+IDwvYT4gPC9kaXY+IDwvZGl2PiAgPGRpdiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogZmVhdHVyZXN9Ij4gPGRpdiBkYXRhLWJpbmRpbmc9IntjbGFzc05hbWU6IGNzc0NsYXNzfXtAdmFyOiBkaXNwbGF5LXJlc3VsdC1waWNrZXItbGlzdH17QHN0eWxlLXRvcDogdG9wT2Zmc2V0fXtAc3R5bGUtYm90dG9tOiBib3R0b21PZmZzZXR9Ij4gPGRpdiBjbGFzcz0ibGlzdC1tZW51IGFjdGl2ZSIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogcmVzdWx0c0xpc3R9e0B2aXNpYmxlOiByZXN1bHRzTGlzdH0iPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogcmVzdWx0c0xpc3R9e0BoaWRkZW46IGlzRmlsdGVyZWR9e0BldmVudC1jbGljazogaGFuZGxlQ2xpY2t9Ij4gPGRpdiBkYXRhLWJpbmRpbmc9IntjbGFzc05hbWU6IGNzc0NsYXNzfSI+ICA8ZGl2IGRhdGEtYmluZGluZz0ie0B3aWRnZXQ6IFJlbmRlckNvbXBsZXhSZXN1bHRUZW1wbGF0ZX17QHdpZGdldC1yZXBsYWNlOiB0cnVlfXtAd2lkZ2V0LXJlcXVpcmVkOiBmYWxzZX17QHdpZGdldC1jb250ZXh0OiBAY29udGV4dH0iPjwvZGl2PiA8ZGl2IGRhdGEtYmluZGluZz0ie0B3aWRnZXQ6IFJlbmRlclNpbXBsZVJlc3VsdFRlbXBsYXRlfXtAd2lkZ2V0LXJlcGxhY2U6IHRydWV9e0B3aWRnZXQtcmVxdWlyZWQ6IGZhbHNlfXtAd2lkZ2V0LWNvbnRleHQ6IEBjb250ZXh0fSI+PC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gICA8YnI+IDxwIGNsYXNzPSJlcnJvci1tZXNzYWdlIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogcmVxdWlyZWRWYWx1ZUVycm9yTWVzc2FnZX0iPjwvcD4gICA8ZGl2IGNsYXNzPSJmb3JtLWJ0bnMiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGJ1dHRvbnN9e0B2YXI6IGJvdHRvbUNvbnRhaW5lcn0iPiA8YnV0dG9uIGNsYXNzPSJidXR0b24iIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGJ1dHRvbnN9e0B0ZXh0OiBsYWJlbH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrQnV0dG9ufSI+PC9idXR0b24+IDwvZGl2PiAgPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/WorkflowContainerView.html","html","DQo8ZGl2IGNsYXNzPSJ3b3JrZmxvdy1jb250YWluZXIiPiA8ZGl2IGNsYXNzPSJwYW5lbC1oZWFkZXIiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBkaXNwbGF5SGVhZGVyfSI+IDxoMiBjbGFzcz0icGFuZWwtdGl0bGUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiB0aXRsZX0iPjwvaDI+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsb2FkaW5nLWNvbnRhaW5lciIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogaGFzQ29udGVudH0iPiA8ZGl2IGNsYXNzPSJsb2FkaW5nLWltZyIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGJ1c3l9Ij48L2Rpdj4gPGRpdiBjbGFzcz0ibG9hZGluZy1tc2ciIGRhdGEtYmluZGluZz0ie2lubmVySFRNTDogbWVzc2FnZX0iPjwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz0id29ya2Zsb3ctY29udGFpbmVyLXJlZ2lvbi1ob2xkZXIiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBoYXNDb250ZW50fSI+ICA8ZGl2IGNsYXNzPSJyZWdpb24iIGRhdGEtcmVnaW9uLW5hbWU9IiFyZWdpb24tbmFtZS1wbGFjZWhvbGRlciEiPjwvZGl2PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/WorkflowFormView.html","html","DQo8ZGl2IGNsYXNzPSJtb2R1bGUgd29ya2Zsb3ctZm9ybSI+IDxoMiBjbGFzcz0iZm9ybS10aXRsZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHRpdGxlfXtAdmlzaWJsZTogc2hvd1RpdGxlSW5Gb3JtQm9keX0iPjwvaDI+IDxmb3JtIGRhdGEtYmluZGluZz0ie0BzdHlsZS1tYXhXaWR0aDogZm9ybVdpZHRofXtAZXZlbnQtb25zdWJtaXQ6IGhhbmRsZVN1Ym1pdH0iPiAgPGRpdiBjbGFzcz0id29ya2Zsb3ctZm9ybS1pbm5lciIgZGF0YS1iaW5kaW5nPSJ7QGRvbTogd29ya2Zsb3dGb3JtQ29udGVudH0iPjwvZGl2PiAgPHVsIGNsYXNzPSJmb3JtLXZhbGlkYXRpb24iIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiB2YWxpZGF0aW9uUmVzdWx0c317QHNvdXJjZTogdmFsaWRhdGlvblJlc3VsdHN9Ij4gPGxpIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IHZhbGlkYXRpb25SZXN1bHRzfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLXZhbGlkYXRpb24tc3ltYm9sfSI+PC9zcGFuPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogZXJyb3JNZXNzYWdlfSI+PC9zcGFuPiA8L2xpPiA8L3VsPiAgPGlucHV0IHR5cGU9InN1Ym1pdCIgc3R5bGU9InBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogLTk5OXB4OyB3aWR0aDogMXB4OyBoZWlnaHQ6IDFweDsiIHRhYmluZGV4PSItMSIvPiAgPGRpdiBjbGFzcz0iZm9ybS1idG5zIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBidXR0b25zfSI+IDxidXR0b24gY2xhc3M9ImJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogYnV0dG9uc317QHRleHQ6IGxhYmVsfXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tCdXR0b259Ij48L2J1dHRvbj4gPC9kaXY+IDwvZm9ybT4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/WorkflowListView.html","html","PGRpdiBjbGFzcz0id29ya2Zsb3ctbGlzdCI+ICA8ZGl2IGNsYXNzPSJuby1yZXN1bHRzIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiB3b3JrZmxvd3N9e0B0ZXh0OiBAbGFuZ3VhZ2Utd29ya2Zsb3ctbm9uZS1hdmFpbGFibGV9Ij48L2Rpdj4gIDxkaXYgY2xhc3M9Imxpc3QtbWVudSBhY3RpdmUiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHdvcmtmbG93c317QHZpc2libGU6IHdvcmtmbG93c30iPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogd29ya2Zsb3dzfXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tXb3JrZmxvd30iPiA8YnV0dG9uIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGRpc3BsYXlOYW1lfSI+PC9idXR0b24+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/AutoCompleteBoxFormItemView.html","html","PGRpdiBjbGFzcz0iYXV0b2NvbXBsZXRlLWlubmVyIj4gPGxhYmVsIGNsYXNzPSJmb3JtLWxhYmVsIj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogbGFiZWx9e0B2aXNpYmxlOiBsYWJlbH0iPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBsYWJlbH17QHRleHQ6IHRleHR9Ij48L3NwYW4+IDwvc3Bhbj4gPHNwYW4gY2xhc3M9ImluZGljYXRvciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGF0dGFjaGVkX3Nob3dJbmRpY2F0b3J9Ij4qPC9zcGFuPiA8L2xhYmVsPiA8ZGl2IGNsYXNzPSJmb3JtLWNvbnRyb2wiPiAgPGRpdiBjbGFzcz0iYXV0b2NvbXBsZXRlLWlucHV0Ij4gPGRpdiBjbGFzcz0ibG9hZGVyIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaXNCdXN5fSI+PC9kaXY+IDxpbnB1dCB0eXBlPSJ0ZXh0IiBkYXRhLWJpbmRpbmc9IntAdmFyOiB0ZXh0RWxlbWVudH17QGV2ZW50LW9ua2V5dXA6IGhhbmRsZUtleUV2ZW50fXtAZXZlbnQtb25ibHVyOiBoYW5kbGVJbnB1dEJsdXJFdmVudH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUlucHV0Q2xpY2tFdmVudH17QGV2ZW50LW9uZm9jdXM6IGhhbmRsZUlucHV0Rm9jdXNFdmVudH17QHZhbHVlOiB0ZXh0fXtAc3R5bGUtd2lkdGg6IHRleHRib3hXaWR0aH17dGl0bGU6IHRvb2xUaXB9IiAvPiA8L2Rpdj4gIDxkaXYgY2xhc3M9ImF1dG9jb21wbGV0ZS1tZW51IiBkYXRhLWJpbmRpbmc9IntAdmFyOiBkcm9wRG93bkNvbnRhaW5lckVsZW1lbnR9e0B2aXNpYmxlOiBpc0Ryb3BEb3duT3Blbn17QHN0eWxlLW1pbldpZHRoOiB0ZXh0Ym94V2lkdGh9e0BldmVudC1vbmtleWRvd246IGhhbmRsZURyb3Bkb3duS2V5RG93bn17QGV2ZW50LW9ubW91c2Vkb3duOiBoYW5kbGVEcm9wZG93bkZvY3VzRXZlbnR9e0BldmVudC1vbmZvY3VzOiBoYW5kbGVEcm9wZG93bkZvY3VzRXZlbnR9e0BldmVudC1vbmJsdXI6IGhhbmRsZURyb3Bkb3duQmx1ckV2ZW50fSI+IDx1bCBjbGFzcz0ibGlzdC1tZW51IiBkYXRhLWJpbmRpbmc9IntAdmFyOiBkcm9wRG93bkxpc3RFbGVtZW50fXtAdmlzaWJsZTogZGF0YUl0ZW1zfXtAc291cmNlOiBkYXRhSXRlbXN9Ij4gPGxpIGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogZGF0YUl0ZW1zfXtAdGV4dDogdmFsdWV9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0l0ZW19Ij48L2xpPiA8L3VsPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/CheckBoxFormItemView.html","html","PGRpdiBjbGFzcz0iY2hlY2tib3gtaW5uZXIiPiA8dGFibGU+IDx0cj4gPHRkIGNsYXNzPSJmb3JtLWxhYmVsIGxlZnQiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBhdHRhY2hlZF90ZXh0T25MZWZ0fSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie2ZvcjogYXR0YWNoZWRfY29udHJvbElkfXtAdGV4dDogYXR0YWNoZWRfbGFiZWxUZXh0fXt0aXRsZTogdG9vbFRpcH0iPjwvc3Bhbj4gPC90ZD4gPHRkPiA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGRhdGEtYmluZGluZz0ie0B2YWx1ZTogY2hlY2tlZH17aWQ6IGF0dGFjaGVkX2NvbnRyb2xJZH17dGl0bGU6IHRvb2xUaXB9IiAvPiA8L3RkPiA8dGQgY2xhc3M9ImZvcm0tbGFiZWwgbGVmdCIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogYXR0YWNoZWRfdGV4dE9uTGVmdH0iPiA8c3BhbiBkYXRhLWJpbmRpbmc9Intmb3I6IGF0dGFjaGVkX2NvbnRyb2xJZH17QHRleHQ6IGF0dGFjaGVkX2xhYmVsVGV4dH17dGl0bGU6IHRvb2xUaXB9Ij48L3NwYW4+IDwvdGQ+IDwvdHI+IDwvdGFibGU+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/ComboBoxFormItemView.html","html","PGRpdiBjbGFzcz0iaW5uZXIiPiA8bGFiZWwgY2xhc3M9ImZvcm0tbGFiZWwiPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBsYWJlbH17QHZpc2libGU6IGxhYmVsfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGxhYmVsfXtAdGV4dDogdGV4dH0iPjwvc3Bhbj4gPC9zcGFuPiA8c3BhbiBjbGFzcz0iaW5kaWNhdG9yIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogYXR0YWNoZWRfc2hvd0luZGljYXRvcn0iPio8L3NwYW4+IDwvbGFiZWw+IDxkaXYgY2xhc3M9ImZvcm0tY29udHJvbCI+IDxkaXYgY2xhc3M9ImxvYWRlciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGlzQnVzeX0iPjwvZGl2PiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGRhdGFJdGVtc317QHZhbHVlOiBzZWxlY3RlZH17QGV2ZW50LW9uY2hhbmdlOiBoYW5kbGVTZWxlY3Rpb25DaGFuZ2VkfXtkaXNhYmxlZDogaXNCdXN5fXt0aXRsZTogdG9vbFRpcH0iPiA8b3B0aW9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGRhdGFJdGVtc317QHRleHQ6IGRpc3BsYXl9e0BhdHRhY2g6IEBjb250ZXh0fSI+PC9vcHRpb24+IDwvc2VsZWN0PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/ContainerFormItemView.html","html","PGRpdiBjbGFzcz0iZm9ybS1jb250YWluZXIiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpc1Zpc2libGV9e0BjbGFzcy1mb3JtLWhvcml6b250YWw6IGF0dGFjaGVkX2lzSG9yaXpvbnRhbH0iPiA8cCBjbGFzcz0iZm9ybS1pdGVtIGZvcm0tZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGRlc2NyaXB0aW9ufXtpbm5lckhUTUw6IGRlc2NyaXB0aW9ufSI+PC9wPiA8ZGl2IGNsYXNzPSJmb3JtIGxhYmVsLWxlZnQiIGRhdGEtYmluZGluZz0ie3N0eWxlOiBhdHRhY2hlZF9zdHlsZX17QHN0eWxlLW1heFdpZHRoOiBtYXhXaWR0aH17QHNvdXJjZTogZm9ybUl0ZW1zfXtAdGVtcGxhdGU6IE1hcHBpbmcvbW9kdWxlcy9Xb3JrZmxvdy9Gb3Jtcy9JdGVtcy9Gb3JtSXRlbVZpZXcuaHRtbH0iPjwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/DatePickerFormItemView.html","html","PGRpdiBjbGFzcz0iaW5uZXIiPiA8bGFiZWwgY2xhc3M9ImZvcm0tbGFiZWwiPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBsYWJlbH17QHZpc2libGU6IGxhYmVsfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGxhYmVsfXtAdGV4dDogdGV4dH0iPjwvc3Bhbj4gPC9zcGFuPiA8c3BhbiBjbGFzcz0iaW5kaWNhdG9yIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogYXR0YWNoZWRfc2hvd0luZGljYXRvcn0iPio8L3NwYW4+IDwvbGFiZWw+IDxkaXYgY2xhc3M9ImZvcm0tY29udHJvbCI+ICA8ZGl2IGNsYXNzPSJpbmxpbmUtYmxvY2siIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IEBjb250ZXh0fXtAdGVtcGxhdGUtc2VsZWN0b3I6IGF0dGFjaGVkX3BpY2tlclR5cGV9Ij4gIDxpbnB1dCBjbGFzcz0iZGF0ZS10aW1lIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBuYXRpdmVfZGF0ZXRpbWVfZWxlbWVudH17QHRlbXBsYXRlLXNlbGVjdDogbmF0aXZlX2RhdGV0aW1lfXt0aXRsZTogdG9vbFRpcH17QHZhbHVlOiBkYXRlfSIgdHlwZT0iZGF0ZXRpbWUiIC8+ICA8aW5wdXQgZGF0YS1iaW5kaW5nPSJ7QHZhcjogalF1ZXJ5UGlja2VyfXtAdGVtcGxhdGUtc2VsZWN0OiBqUXVlcnl9e3RpdGxlOiB0b29sVGlwfXtAZXZlbnQtb25jaGFuZ2U6IGhhbmRsZUpxdWVyeURhdGVQaWNrZXJUZXh0Q2hhbmdlZH0iIHR5cGU9InRleHQiIC8+ICA8aW5wdXQgZGF0YS1iaW5kaW5nPSJ7QHZhcjogbmF0aXZlX2RhdGV0aW1lX2VsZW1lbnR9e0B0ZW1wbGF0ZS1zZWxlY3Q6IG5hdGl2ZX17dGl0bGU6IHRvb2xUaXB9e0B2YWx1ZTogZGF0ZX0iIHR5cGU9ImRhdGUiIC8+ICA8ZGl2IGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IG5hdGl2ZV9kYXRlX2pRdWVyeV90aW1lfXt0aXRsZTogdG9vbFRpcH0iPiA8aW5wdXQgZGF0YS1iaW5kaW5nPSJ7QHZhbHVlOiBkYXRlfSIgdHlwZT0iZGF0ZSIvPiA8aW5wdXQgZGF0YS1iaW5kaW5nPSJ7QHZhcjogalF1ZXJ5UGlja2VyfSIgdHlwZT0idGV4dCIvPiA8L2Rpdj4gIDxkaXYgY2xhc3M9ImRhdGV0aW1lLXNlbGVjdCIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogbmF0aXZlX2RhdGVfY29tYm9fdGltZX17dGl0bGU6IHRvb2xUaXB9Ij4gPGlucHV0IGRhdGEtYmluZGluZz0ie0B2YXI6IG5hdGl2ZV9kYXRldGltZV9lbGVtZW50fXtAdmFsdWU6IGRhdGV9IiB0eXBlPSJkYXRlIi8+IDxzZWxlY3QgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogYXR0YWNoZWRfaG91cnN9e0B2YWx1ZTogYXR0YWNoZWRfaG91cn17QGV2ZW50LW9uY2hhbmdlOiBoYW5kbGVDaGFuZ2VDb21ib0JveFRpbWVXaXRoTmF0aXZlRGF0ZX17QHZhcjogc2VsZWN0MH0iPiA8b3B0aW9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGF0dGFjaGVkX2hvdXJzfXtAYXR0YWNoZWQtdmFsdWU6IHZhbH17QHRleHQ6IGRlc2N9Ij48L29wdGlvbj4gPC9zZWxlY3Q+IDxzZWxlY3QgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogYXR0YWNoZWRfbWludXRlc317QHZhbHVlOiBhdHRhY2hlZF9taW51dGV9e0BldmVudC1vbmNoYW5nZTogaGFuZGxlQ2hhbmdlQ29tYm9Cb3hUaW1lV2l0aE5hdGl2ZURhdGV9e0B2YXI6IHNlbGVjdDF9Ij4gPG9wdGlvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBhdHRhY2hlZF9taW51dGVzfXtAdGV4dDogQGNvbnRleHR9e0BhdHRhY2hlZC12YWx1ZTogQGNvbnRleHR9Ij48L29wdGlvbj4gPC9zZWxlY3Q+IDxzZWxlY3QgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogYXR0YWNoZWRfc2Vjb25kc317QHZhbHVlOiBhdHRhY2hlZF9zZWNvbmR9e0BldmVudC1vbmNoYW5nZTogaGFuZGxlQ2hhbmdlQ29tYm9Cb3hUaW1lV2l0aE5hdGl2ZURhdGV9e0B2YXI6IHNlbGVjdDJ9Ij4gPG9wdGlvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBhdHRhY2hlZF9zZWNvbmRzfXtAdGV4dDogQGNvbnRleHR9e0BhdHRhY2hlZC12YWx1ZTogQGNvbnRleHR9Ij48L29wdGlvbj4gPC9zZWxlY3Q+IDwvZGl2PiAgPGRpdiBjbGFzcz0iZGF0ZXRpbWUtc2VsZWN0IiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBjb21ib3N9e3RpdGxlOiB0b29sVGlwfSI+IDxzZWxlY3QgY2xhc3M9ImRwLXl5IiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBhdHRhY2hlZF95ZWFyc317QHZhbHVlOiBhdHRhY2hlZF95ZWFyfXtAZXZlbnQtb25jaGFuZ2U6IGhhbmRsZUNoYW5nZUNvbWJvQm94VGltZX17QHZhcjogc2VsZWN0M30iPiA8b3B0aW9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGF0dGFjaGVkX3llYXJzfXtAdGV4dDogQGNvbnRleHR9e0BhdHRhY2hlZC12YWx1ZTogQGNvbnRleHR9Ij48L29wdGlvbj4gPC9zZWxlY3Q+IDxzZWxlY3QgY2xhc3M9ImRwLW1tIiBkYXRhLWJpbmRpbmc9IntAdmFsdWU6IGF0dGFjaGVkX21vbnRofXtAZXZlbnQtb25jaGFuZ2U6IGhhbmRsZUNoYW5nZUNvbWJvQm94VGltZX17QHZhcjogc2VsZWN0NH0iPiA8b3B0aW9uIHZhbHVlPSIwIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLW1vbnRocy0wfSI+PC9vcHRpb24+IDxvcHRpb24gdmFsdWU9IjEiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbW9udGhzLTF9Ij48L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT0iMiIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tb250aHMtMn0iPjwvb3B0aW9uPiA8b3B0aW9uIHZhbHVlPSIzIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLW1vbnRocy0zfSI+PC9vcHRpb24+IDxvcHRpb24gdmFsdWU9IjQiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbW9udGhzLTR9Ij48L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT0iNSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tb250aHMtNX0iPjwvb3B0aW9uPiA8b3B0aW9uIHZhbHVlPSI2IiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLW1vbnRocy02fSI+PC9vcHRpb24+IDxvcHRpb24gdmFsdWU9IjciIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbW9udGhzLTd9Ij48L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT0iOCIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tb250aHMtOH0iPjwvb3B0aW9uPiA8b3B0aW9uIHZhbHVlPSI5IiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLW1vbnRocy05fSI+PC9vcHRpb24+IDxvcHRpb24gdmFsdWU9IjEwIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLW1vbnRocy0xMH0iPjwvb3B0aW9uPiA8b3B0aW9uIHZhbHVlPSIxMSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tb250aHMtMTF9Ij48L29wdGlvbj4gPC9zZWxlY3Q+IDxzZWxlY3QgY2xhc3M9ImRwLWRkIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBhdHRhY2hlZF9kYXlzfXtAdmFsdWU6IGF0dGFjaGVkX2RheX17QGV2ZW50LW9uY2hhbmdlOiBoYW5kbGVDaGFuZ2VDb21ib0JveFRpbWV9e0B2YXI6IHNlbGVjdDV9Ij4gPG9wdGlvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBhdHRhY2hlZF9kYXlzfXtAdGV4dDogQGNvbnRleHR9e0BhdHRhY2hlZC12YWx1ZTogQGNvbnRleHR9Ij48L29wdGlvbj4gPC9zZWxlY3Q+IDwvZGl2PiAgPGRpdiBjbGFzcz0iZHAtdHAtc2VsZWN0IiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBjb21ib3NfZGF0ZXRpbWV9e3RpdGxlOiB0b29sVGlwfSI+IDxkaXYgY2xhc3M9ImRhdGV0aW1lLXNlbGVjdCI+IDxzZWxlY3QgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogYXR0YWNoZWRfeWVhcnN9e0B2YWx1ZTogYXR0YWNoZWRfeWVhcn17QGV2ZW50LW9uY2hhbmdlOiBoYW5kbGVDaGFuZ2VDb21ib0JveFRpbWV9e0B2YXI6IHNlbGVjdDZ9Ij4gPG9wdGlvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBhdHRhY2hlZF95ZWFyc317QHRleHQ6IEBjb250ZXh0fXtAYXR0YWNoZWQtdmFsdWU6IEBjb250ZXh0fSI+PC9vcHRpb24+IDwvc2VsZWN0PiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0B2YWx1ZTogYXR0YWNoZWRfbW9udGh9e0BldmVudC1vbmNoYW5nZTogaGFuZGxlQ2hhbmdlQ29tYm9Cb3hUaW1lfXtAdmFyOiBzZWxlY3Q3fSI+IDxvcHRpb24gdmFsdWU9IjAiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbW9udGhzLTB9Ij48L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT0iMSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tb250aHMtMX0iPjwvb3B0aW9uPiA8b3B0aW9uIHZhbHVlPSIyIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLW1vbnRocy0yfSI+PC9vcHRpb24+IDxvcHRpb24gdmFsdWU9IjMiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbW9udGhzLTN9Ij48L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT0iNCIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tb250aHMtNH0iPjwvb3B0aW9uPiA8b3B0aW9uIHZhbHVlPSI1IiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLW1vbnRocy01fSI+PC9vcHRpb24+IDxvcHRpb24gdmFsdWU9IjYiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbW9udGhzLTZ9Ij48L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT0iNyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tb250aHMtN30iPjwvb3B0aW9uPiA8b3B0aW9uIHZhbHVlPSI4IiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLW1vbnRocy04fSI+PC9vcHRpb24+IDxvcHRpb24gdmFsdWU9IjkiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbW9udGhzLTl9Ij48L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT0iMTAiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbW9udGhzLTEwfSI+PC9vcHRpb24+IDxvcHRpb24gdmFsdWU9IjExIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLW1vbnRocy0xMX0iPjwvb3B0aW9uPiA8L3NlbGVjdD4gPHNlbGVjdCBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBhdHRhY2hlZF9kYXlzfXtAdmFsdWU6IGF0dGFjaGVkX2RheX17QGV2ZW50LW9uY2hhbmdlOiBoYW5kbGVDaGFuZ2VDb21ib0JveFRpbWV9e0B2YXI6IHNlbGVjdDh9Ij4gPG9wdGlvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBhdHRhY2hlZF9kYXlzfXtAdGV4dDogQGNvbnRleHR9e0BhdHRhY2hlZC12YWx1ZTogQGNvbnRleHR9Ij48L29wdGlvbj4gPC9zZWxlY3Q+IDwvZGl2PiA8ZGl2IGNsYXNzPSJkYXRldGltZS1zZWxlY3QgdGltZSI+IDxsYWJlbD5IPC9sYWJlbD4gPHNlbGVjdCBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBhdHRhY2hlZF9ob3Vyc317QHZhbHVlOiBhdHRhY2hlZF9ob3VyfXtAZXZlbnQtb25jaGFuZ2U6IGhhbmRsZUNoYW5nZUNvbWJvQm94VGltZX17QHZhcjogc2VsZWN0OX0iPiA8b3B0aW9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGF0dGFjaGVkX2hvdXJzfXtAYXR0YWNoZWQtdmFsdWU6IHZhbH17QHRleHQ6IGRlc2N9Ij48L29wdGlvbj4gPC9zZWxlY3Q+IDxsYWJlbD5NPC9sYWJlbD4gPHNlbGVjdCBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBhdHRhY2hlZF9taW51dGVzfXtAdmFsdWU6IGF0dGFjaGVkX21pbnV0ZX17QGV2ZW50LW9uY2hhbmdlOiBoYW5kbGVDaGFuZ2VDb21ib0JveFRpbWV9e0B2YXI6IHNlbGVjdDEwfSI+IDxvcHRpb24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogYXR0YWNoZWRfbWludXRlc317QHRleHQ6IEBjb250ZXh0fXtAYXR0YWNoZWQtdmFsdWU6IEBjb250ZXh0fSI+PC9vcHRpb24+IDwvc2VsZWN0PiA8bGFiZWw+UzwvbGFiZWw+IDxzZWxlY3QgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogYXR0YWNoZWRfc2Vjb25kc317QHZhbHVlOiBhdHRhY2hlZF9zZWNvbmR9e0BldmVudC1vbmNoYW5nZTogaGFuZGxlQ2hhbmdlQ29tYm9Cb3hUaW1lfXtAdmFyOiBzZWxlY3QxMX0iPiA8b3B0aW9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGF0dGFjaGVkX3NlY29uZHN9e0B0ZXh0OiBAY29udGV4dH17QGF0dGFjaGVkLXZhbHVlOiBAY29udGV4dH0iPjwvb3B0aW9uPiA8L3NlbGVjdD4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz0iaW5saW5lLWJsb2NrIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogbnVsbGFibGV9Ij4gPGJ1dHRvbiBjbGFzcz0iZGF0ZXRpbWUtYnRuIHVuLW51bGxpZnkiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBhdHRhY2hlZF9pc051bGx9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja1NldE5vdE51bGx9Ij48L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz0iZGF0ZXRpbWUtYnRuIG51bGxpZnkiIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGF0dGFjaGVkX2lzTnVsbH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrU2V0TnVsbH0iPjwvYnV0dG9uPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/FilePickerFormItemView.html","html","PGRpdiBjbGFzcz0iaW5uZXIiPiA8bGFiZWwgY2xhc3M9ImZvcm0tbGFiZWwiPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBsYWJlbH17QHZpc2libGU6IGxhYmVsfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGxhYmVsfXtAdGV4dDogdGV4dH0iPjwvc3Bhbj4gPC9zcGFuPiA8c3BhbiBjbGFzcz0iaW5kaWNhdG9yIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogYXR0YWNoZWRfc2hvd0luZGljYXRvcn0iPio8L3NwYW4+IDwvbGFiZWw+IDxkaXYgY2xhc3M9ImZvcm0tY29udHJvbCI+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGlzU3VwcG9ydGVkfSI+IDxkaXYgY2xhc3M9ImZpbGUtaW5wdXQiPiA8ZGl2IGNsYXNzPSJmaWxlLWlucHV0LWJyb3dzZXIiPiA8aW5wdXQgdHlwZT0iZmlsZSIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGlzU3VwcG9ydGVkfXt0aXRsZTogdG9vbFRpcH17bXVsdGlwbGU6IGFsbG93TXVsdGlwbGV9e2FjY2VwdDogYWNjZXB0RmlsZVR5cGVzfXtAZXZlbnQtY2hhbmdlOiBoYW5kbGVDaGFuZ2V9IiAvPiA8L2Rpdj4gPC9kaXY+IDxpbnB1dCBjbGFzcz0iZmlsZS1pbnB1dC1jbGVhciIgdHlwZT0iYnV0dG9uIiB2YWx1ZT0iWCIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGZpbGVzfXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xlYXJDbGlja30iIC8+IDwvZGl2PiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBpc1N1cHBvcnRlZH17QHRleHQ6IEBsYW5ndWFnZS1maWxlLXBpY2tlci1ub3Qtc3VwcG9ydGVkfSI+PC9zcGFuPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/FormItemView.html","html","PGRpdiBjbGFzcz0iZm9ybS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaXNWaXNpYmxlfXtjbGFzc05hbWU6IGF0dGFjaGVkX2luZGljYXRvckNsYXNzfXtAc291cmNlOiBAY29udGV4dH17QHRlbXBsYXRlLXNlbGVjdG9yOiBmb3JtSXRlbVR5cGV9Ij4gPGRpdiBjbGFzcz0iYXV0b2NvbXBsZXRlIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBBdXRvQ29tcGxldGVCb3hGb3JtSXRlbX17QHdpZGdldDogQXV0b0NvbXBsZXRlQm94Rm9ybUl0ZW19e0B2aXNpYmxlOiBpc1Zpc2libGV9Ij48L2Rpdj4gPGRpdiBjbGFzcz0iY2hlY2tib3giIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IENoZWNrQm94Rm9ybUl0ZW19e0B3aWRnZXQ6IENoZWNrQm94Rm9ybUl0ZW19e0B2aXNpYmxlOiBpc1Zpc2libGV9Ij48L2Rpdj4gPGRpdiBjbGFzcz0iY29tYm9ib3giIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IENvbWJvQm94Rm9ybUl0ZW19e0B3aWRnZXQ6IENvbWJvQm94Rm9ybUl0ZW19e0B2aXNpYmxlOiBpc1Zpc2libGV9Ij48L2Rpdj4gPGRpdiBjbGFzcz0iY29udGFpbmVyIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBDb250YWluZXJGb3JtSXRlbX17QHdpZGdldDogQ29udGFpbmVyRm9ybUl0ZW19e0B2aXNpYmxlOiBpc1Zpc2libGV9Ij48L2Rpdj4gPGRpdiBjbGFzcz0iZGF0ZXBpY2tlciIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogRGF0ZVBpY2tlckZvcm1JdGVtfXtAd2lkZ2V0OiBEYXRlUGlja2VyRm9ybUl0ZW19e0B2aXNpYmxlOiBpc1Zpc2libGV9Ij48L2Rpdj4gPGRpdiBjbGFzcz0iZmlsZXBpY2tlciIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogRmlsZVBpY2tlckZvcm1JdGVtfXtAd2lkZ2V0OiBGaWxlUGlja2VyRm9ybUl0ZW19e0B2aXNpYmxlOiBpc1Zpc2libGV9Ij48L2Rpdj4gPGRpdiBjbGFzcz0iZ3JvdXBib3giIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IEdyb3VwQm94Rm9ybUl0ZW19e0B3aWRnZXQ6IEdyb3VwQm94Rm9ybUl0ZW19e0B2aXNpYmxlOiBpc1Zpc2libGV9Ij48L2Rpdj4gPGRpdiBjbGFzcz0ibGluayIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogSHlwZXJsaW5rRm9ybUl0ZW19e0B3aWRnZXQ6IEh5cGVybGlua0Zvcm1JdGVtfXtAdmlzaWJsZTogaXNWaXNpYmxlfSI+PC9kaXY+IDxkaXYgY2xhc3M9ImltYWdlIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBJbWFnZUZvcm1JdGVtfXtAd2lkZ2V0OiBJbWFnZUZvcm1JdGVtfXtAdmlzaWJsZTogaXNWaXNpYmxlfSI+PC9kaXY+IDxkaXYgY2xhc3M9ImxhYmVsIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBMYWJlbEZvcm1JdGVtfXtAd2lkZ2V0OiBMYWJlbEZvcm1JdGVtfXtAdmlzaWJsZTogaXNWaXNpYmxlfSI+PC9kaXY+IDxkaXYgY2xhc3M9Imxpc3Rib3giIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IExpc3RCb3hGb3JtSXRlbX17QHdpZGdldDogTGlzdEJveEZvcm1JdGVtfXtAdmlzaWJsZTogaXNWaXNpYmxlfSI+PC9kaXY+IDxkaXYgY2xhc3M9Im1hcmtkb3duIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBNYXJrZG93bkZvcm1JdGVtfXtAd2lkZ2V0OiBNYXJrZG93bkZvcm1JdGVtfXtAdmlzaWJsZTogaXNWaXNpYmxlfSI+PC9kaXY+IDxkaXYgY2xhc3M9InJhZGlvYnRuIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBSYWRpb0J1dHRvbkZvcm1JdGVtfXtAd2lkZ2V0OiBSYWRpb0J1dHRvbkZvcm1JdGVtfXtAdmlzaWJsZTogaXNWaXNpYmxlfSI+PC9kaXY+IDxkaXYgY2xhc3M9InRleHRhcmVhIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBUZXh0QXJlYUZvcm1JdGVtfXtAd2lkZ2V0OiBUZXh0QXJlYUZvcm1JdGVtfXtAdmlzaWJsZTogaXNWaXNpYmxlfSI+PC9kaXY+IDxkaXYgY2xhc3M9InRleHRib3giIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IFRleHRCb3hGb3JtSXRlbX17QHdpZGdldDogVGV4dEJveEZvcm1JdGVtfXtAdmlzaWJsZTogaXNWaXNpYmxlfSI+PC9kaXY+IDxkaXYgY2xhc3M9InRleHRhcmVhIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBUaW1lUGlja2VyRm9ybUl0ZW19e0B3aWRnZXQ6IFRpbWVQaWNrZXJGb3JtSXRlbX17QHZpc2libGU6IGlzVmlzaWJsZX0iPjwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/GroupBoxFormItemView.html","html","PGZpZWxkc2V0PiA8bGVnZW5kIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBoZWFkZXJ9Ij48L2xlZ2VuZD4gPHAgY2xhc3M9ImZvcm0taXRlbSBmb3JtLWRlc2MiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBkZXNjcmlwdGlvbn17aW5uZXJIVE1MOiBkZXNjcmlwdGlvbn0iPjwvcD4gIDxkaXYgY2xhc3M9ImZvcm0gbGFiZWwtbGVmdCIgZGF0YS1iaW5kaW5nPSJ7c3R5bGU6IGF0dGFjaGVkX3N0eWxlfXtAY2xhc3MtZm9ybS1ob3Jpem9udGFsOiBhdHRhY2hlZF9pc0hvcml6b250YWx9e0Bzb3VyY2U6IGZvcm1JdGVtc317QHRlbXBsYXRlOiBNYXBwaW5nL21vZHVsZXMvV29ya2Zsb3cvRm9ybXMvSXRlbXMvRm9ybUl0ZW1WaWV3Lmh0bWx9Ij48L2Rpdj4gPC9maWVsZHNldD4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/HyperlinkFormItemView.html","html","PGRpdiBjbGFzcz0iaHlwZXJsaW5rIj4gPGEgZGF0YS1iaW5kaW5nPSJ7aHJlZjogdXJpfXtAdGV4dDogaHlwZXJsaW5rVGV4dH17dGFyZ2V0OnRhcmdldH17dGl0bGU6IHRvb2xUaXB9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja30iPjwvYT4gPC9kaXY+IA==");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/ImageFormItemView.html","html","PGRpdiBjbGFzcz0iaW5uZXIiPiA8aW1nIGRhdGEtYmluZGluZz0ie3NyYzogc291cmNlfXtAc3R5bGUtd2lkdGg6IHdpZHRofXtAc3R5bGUtaGVpZ2h0OiBoZWlnaHR9e2FsdDogdG9vbFRpcH0iIC8+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/ListBoxFormItemView.html","html","PGRpdiBjbGFzcz0iaW5uZXIiPiA8bGFiZWwgY2xhc3M9ImZvcm0tbGFiZWwiPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBsYWJlbH17QHZpc2libGU6IGxhYmVsfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGxhYmVsfXtAdGV4dDogdGV4dH0iPjwvc3Bhbj4gPC9zcGFuPiA8c3BhbiBjbGFzcz0iaW5kaWNhdG9yIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogYXR0YWNoZWRfc2hvd0luZGljYXRvcn0iPio8L3NwYW4+IDwvbGFiZWw+IDxkaXYgY2xhc3M9ImZvcm0tY29udHJvbCI+IDxkaXYgY2xhc3M9ImxvYWRlciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGlzQnVzeX0iPjwvZGl2PiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGRhdGFJdGVtc317QHZhcjogc2VsZWN0RWxlbWVudH17bXVsdGlwbGU6IGF0dGFjaGVkX2lzTXVsdGlwbGV9e0B2YWx1ZTogc2VsZWN0aW9ufXtAZXZlbnQtb25jaGFuZ2U6IGhhbmRsZVNlbGVjdGlvbkNoYW5nZWR9e3RpdGxlOiB0b29sVGlwfXtkaXNhYmxlZDogaXNCdXN5fXtzaXplOiBzaXplfSI+IDxvcHRpb24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogZGF0YUl0ZW1zfXtAdGV4dDogZGlzcGxheX17QGF0dGFjaDogQGNvbnRleHR9Ij48L29wdGlvbj4gPC9zZWxlY3Q+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/MarkdownFormItemView.html","html","PGRpdiBjbGFzcz0iaW5uZXIiIGRhdGEtYmluZGluZz0ie0B2YXI6IG1hcmtkb3duRWxlbWVudH0iPjwvZGl2PiA=");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/RadioButtonFormItemView.html","html","PGRpdiBjbGFzcz0icmFkaW9idG4taW5uZXIiPiA8dGFibGU+IDx0cj4gPHRkIGNsYXNzPSJmb3JtLWxhYmVsIGxlZnQiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBhdHRhY2hlZF90ZXh0T25MZWZ0fSI+IDxsYWJlbCBkYXRhLWJpbmRpbmc9Intmb3I6IGF0dGFjaGVkX2NvbnRyb2xJZH17QHRleHQ6IGF0dGFjaGVkX2xhYmVsVGV4dH17dGl0bGU6IHRvb2xUaXB9Ij48L2xhYmVsPiA8L3RkPiA8dGQ+IDxpbnB1dCB0eXBlPSJyYWRpbyIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogcmFkaW9FbGVtZW50fXtpZDogYXR0YWNoZWRfY29udHJvbElkfXtuYW1lOiBncm91cE5hbWV9e3RpdGxlOiB0b29sVGlwfSIgLz4gPC90ZD4gPHRkIGNsYXNzPSJmb3JtLWxhYmVsIHJpZ2h0IiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBhdHRhY2hlZF90ZXh0T25MZWZ0fSI+IDxsYWJlbCBkYXRhLWJpbmRpbmc9Intmb3I6IGF0dGFjaGVkX2NvbnRyb2xJZH17QHRleHQ6IGF0dGFjaGVkX2xhYmVsVGV4dH17dGl0bGU6IHRvb2xUaXB9Ij48L2xhYmVsPiA8L3RkPiA8L3RyPiA8L3RhYmxlPiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/TextAreaFormItemView.html","html","PGRpdiBjbGFzcz0iaW5uZXIiPiA8bGFiZWwgY2xhc3M9ImZvcm0tbGFiZWwiPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBsYWJlbH17QHZpc2libGU6IGxhYmVsfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGxhYmVsfXtAdGV4dDogdGV4dH0iPjwvc3Bhbj4gPC9zcGFuPiA8c3BhbiBjbGFzcz0iaW5kaWNhdG9yIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogYXR0YWNoZWRfc2hvd0luZGljYXRvcn0iPio8L3NwYW4+IDwvbGFiZWw+IDxkaXYgY2xhc3M9ImZvcm0tY29udHJvbCI+IDx0ZXh0YXJlYSBkYXRhLWJpbmRpbmc9IntAdmFsdWU6IHRleHR9e0BzdHlsZS13aWR0aDogdGV4dGJveFdpZHRofXtAc3R5bGUtaGVpZ2h0OiB0ZXh0Ym94SGVpZ2h0fXt0aXRsZTogdG9vbFRpcH17QGV2ZW50LW9uYmx1cjogaGFuZGxlQmx1ckNvbnRyb2x9Ij48L3RleHRhcmVhPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/TextBoxFormItemView.html","html","PGRpdiBjbGFzcz0iaW5uZXIiPiA8bGFiZWwgY2xhc3M9ImZvcm0tbGFiZWwiPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBsYWJlbH17QHZpc2libGU6IGxhYmVsfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGxhYmVsfXtAdGV4dDogdGV4dH0iPjwvc3Bhbj4gPC9zcGFuPiA8c3BhbiBjbGFzcz0iaW5kaWNhdG9yIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogYXR0YWNoZWRfc2hvd0luZGljYXRvcn0iPio8L3NwYW4+IDwvbGFiZWw+IDxkaXYgY2xhc3M9ImZvcm0tY29udHJvbCI+IDxpbnB1dCB0eXBlPSJ0ZXh0IiBkYXRhLWJpbmRpbmc9IntAdmFsdWU6IHRleHR9e0BoaWRkZW46IGF0dGFjaGVkX2lzUGFzc3dvcmR9e0BzdHlsZS13aWR0aDogdGV4dGJveFdpZHRofXt0aXRsZTogdG9vbFRpcH0iIC8+IDxpbnB1dCB0eXBlPSJwYXNzd29yZCIgZGF0YS1iaW5kaW5nPSJ7QHZhbHVlOiB0ZXh0fXtAdmlzaWJsZTogYXR0YWNoZWRfaXNQYXNzd29yZH17QHN0eWxlLXdpZHRoOiB0ZXh0Ym94V2lkdGh9e3RpdGxlOiB0b29sVGlwfSIgLz4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/TimePickerFormItemView.html","html","PGRpdiBjbGFzcz0iZm9ybS1pdGVtIHRpbWUtcGlja2VyIj4gPGxhYmVsIGNsYXNzPSJmb3JtLWxhYmVsIj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogbGFiZWx9e0B2aXNpYmxlOiBsYWJlbH0iPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBsYWJlbH17QHRleHQ6IHRleHR9Ij48L3NwYW4+IDwvc3Bhbj4gPHNwYW4gY2xhc3M9ImluZGljYXRvciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGF0dGFjaGVkX3Nob3dJbmRpY2F0b3J9Ij4qPC9zcGFuPiA8L2xhYmVsPiA8ZGl2IGNsYXNzPSJkYXRldGltZS1zZWxlY3QgaW5saW5lLWJsb2NrIiBkYXRhLWJpbmRpbmc9Int0aXRsZTogdG9vbFRpcH17QHZhcjogc2VsZWN0Q29udGFpbmVyRWxlbWVudH0iPiA8ZGl2PiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGF0dGFjaGVkX2hvdXJzfXtAdmFsdWU6IGF0dGFjaGVkX2hvdXJ9e0BldmVudC1vbmNoYW5nZTogaGFuZGxlQ2hhbmdlQ29tYm9Cb3hUaW1lfSI+IDxvcHRpb24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogYXR0YWNoZWRfaG91cnN9e0BhdHRhY2hlZC12YWx1ZTogdmFsfXtAdGV4dDogZGVzY30iPjwvb3B0aW9uPiA8L3NlbGVjdD4gPHNlbGVjdCBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBhdHRhY2hlZF9taW51dGVzfXtAdmFsdWU6IGF0dGFjaGVkX21pbnV0ZX17QGV2ZW50LW9uY2hhbmdlOiBoYW5kbGVDaGFuZ2VDb21ib0JveFRpbWV9Ij4gPG9wdGlvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBhdHRhY2hlZF9taW51dGVzfXtAdGV4dDogQGNvbnRleHR9e0BhdHRhY2hlZC12YWx1ZTogQGNvbnRleHR9Ij48L29wdGlvbj4gPC9zZWxlY3Q+IDxzZWxlY3QgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogYXR0YWNoZWRfc2Vjb25kc317QHZhbHVlOiBhdHRhY2hlZF9zZWNvbmR9e0BldmVudC1vbmNoYW5nZTogaGFuZGxlQ2hhbmdlQ29tYm9Cb3hUaW1lfSI+IDxvcHRpb24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogYXR0YWNoZWRfc2Vjb25kc317QHRleHQ6IEBjb250ZXh0fXtAYXR0YWNoZWQtdmFsdWU6IEBjb250ZXh0fSI+PC9vcHRpb24+IDwvc2VsZWN0PiA8L2Rpdj4gPGRpdiBjbGFzcz0iaW5saW5lLWJsb2NrIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogbnVsbGFibGV9Ij4gPGJ1dHRvbiBjbGFzcz0iZGF0ZXRpbWUtYnRuIHVuLW51bGxpZnkiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBhdHRhY2hlZF90aW1lSXNOdWxsfXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tTZXROb3ROdWxsfSI+PC9idXR0b24+IDxidXR0b24gY2xhc3M9ImRhdGV0aW1lLWJ0biBudWxsaWZ5IiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBhdHRhY2hlZF90aW1lSXNOdWxsfXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tTZXROdWxsfSI+PC9idXR0b24+IDwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz0iY2xlYXIiPjwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Templates/DisplayResultPickerComplexResultTemplateView.html","html","PGRpdiBjbGFzcz0ibGlzdC1tZW51LWNoZWNrYm94IiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc2hvd0NoZWNrYm94fSI+IDxpbnB1dCBjbGFzcz0iZmVhdHVyZS1jaGVja2JveCIgdHlwZT0iY2hlY2tib3giIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBzaG93Q2hlY2tib3h9e0B2YWx1ZTogaXNTZWxlY3RlZH17QGV2ZW50LW9uY2hhbmdlOiBoYW5kbGVDaGVja2JveENoZWNrZWR9IiAvPiA8L2Rpdj4gIA0KPGRpdiBjbGFzcz0ibGlzdC1tZW51LWljb25zIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc2hvd0ljb259Ij4gPGltZyBjbGFzcz0ibGlzdC1tZW51LWljb24iIGRhdGEtYmluZGluZz0ie3NyYzogaWNvblVyaX17YWx0OiBsYWJlbH17QHZpc2libGU6IGljb25Vcml9IiAvPiA8aW1nIGNsYXNzPSJsaXN0LW1lbnUtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7YWx0OiBsYWJlbH17QGhpZGRlbjogaWNvblVyaX0iIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9tYXAtZGVmYXVsdC0yNC5wbmciIC8+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGxhYmVsfXtAdmlzaWJsZTogbGFiZWx9Ij48L3NwYW4+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1kZXNjIiBkYXRhLWJpbmRpbmc9IntAd2lkZ2V0OiBHZXREZXNjcmlwdGlvbn17QHdpZGdldC1jb250ZXh0OiBAY29udGV4dH0iPjwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Templates/DisplayResultPickerSimpleResultTemplateView.html","html","PGlucHV0IGNsYXNzPSJmZWF0dXJlLWNoZWNrYm94IiB0eXBlPSJjaGVja2JveCIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHNob3dDaGVja2JveH17QHZhbHVlOiBpc1NlbGVjdGVkfXtAZXZlbnQtb25jaGFuZ2U6IGhhbmRsZUNoZWNrYm94Q2hlY2tlZH0iIC8+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1kZXRhaWxzIj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1uYW1lIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogbGFiZWx9e0B2aXNpYmxlOiBsYWJlbH0iPjwvc3Bhbj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/ZoomControl/ZoomInView.html","html","PGRpdiBjbGFzcz0iem9vbS1jb250cm9sLWJ0biI+IDxidXR0b24gY2xhc3M9Inpvb20taW4iIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja1pvb21Jbn17dGl0bGU6IEBsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXN0ZXAtem9vbS1pbn0iIHRhYmluZGV4PSIwIj48L2J1dHRvbj4gPC9kaXY+IA==");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/ZoomControl/ZoomOutView.html","html","PGRpdiBjbGFzcz0iem9vbS1jb250cm9sLWJ0biI+IDxidXR0b24gY2xhc3M9Inpvb20tb3V0IiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tab29tT3V0fXt0aXRsZTogQGxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tc3RlcC16b29tLW91dH0iIHRhYmluZGV4PSIwIj48L2J1dHRvbj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Invariant","json","eyJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXRvZ2dsZS1sb2ctdmlldyI6IkFjdGl2YXRlcyBvciBkZWFjdGl2YXRlcyBsb2cgdmlldy4iLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC1kZWJ1Zy1sb2ciOiJEZWJ1ZyBMb2cgezB9IiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lZGl0IjoiRWRpdCBGZWF0dXJlIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lcnJvci13aGlsZS1jYWNoaW5nLWRhdGEtY29kZTQwMCI6IlRoZXJlIHdhcyBhbiBlcnJvciBpbiB0aGUgY2FjaGUgZGF0YSByZXF1ZXN0LiBXaGVyZSBjbGF1c2UgIFwiezB9XCIgaXMgbGlrZWx5IGludmFsaWQuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zdGFydC1lZGl0aW5nLW5ldy1mZWF0dXJlIjoiQmVnaW5zIGVkaXRpbmcgYSBuZXcgZmVhdHVyZS4iLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LXBvbHlsaW5lLWRlc2Mta2V5Ym9hcmQiOiJUbyBsZWFybiB3aGF0XHUyMDE5cyB0aGVyZSwgdXNlIGFycm93cyB0byBtb3ZlIHRoZSBwb2ludC4gSGl0IEVOVEVSIHRvIHBsb3QgYW5kIGJlZ2luIG1vdmluZyB0aGUgbmV4dCBwb2ludC4gSGl0IEVOVEVSIHR3aWNlIHRvIGZpbmlzaC4iLCJsYW5ndWFnZS1tYmwtaWRlbnRpZnktcG9pbnQtdG9vbCI6IlRhcCB0byBmaW5kIGZlYXR1cmVzIG9uIHRoZSBtYXAuIiwibGFuZ3VhZ2UtaWRlbnRpZnktZnJlZWhhbmQtcG9seWxpbmUtdG9vbCI6IkRyYWcgb24gdGhlIG1hcCB0byBkcmF3IGEgbGluZS4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXN5bmMtZW5kLWVkaXRzLWVycm9ycyI6IlRoZSBzeW5jIGRpZCBub3QgY29tcGxldGUgYmVjYXVzZSB0aGUgc2VydmVyIHJlZnVzZWQgezB9IG9mIHRoZSBlZGl0cy4gIFBsZWFzZSByZXZpZXcgdGhlIG1lc3NhZ2VzLCBmaXggdGhlIGVkaXRzIGluIHRoZSB7MX0gcGFuZWwsIGFuZCB0aGVuIHRyeSBhZ2Fpbi4iLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1yZXN1bHRzLWZpZWxkLWFyZWEiOiJBcmVhIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zaG93LW1hcC10aXAtcmVzdWx0cyI6IlNob3dzIG1hcCB0aXAgcmVzdWx0cyBmb3IgYSBGZWF0dXJlU2V0Q29sbGVjdGlvbiBwcmV2aW91c2x5IGFkZGVkIHRvIHRoZSBGZWF0dXJlU2V0TWFuYWdlci4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLW9wZW4tcmVzdWx0cy1mcmFtZSI6IkFjdGl2YXRlcyB0aGUgUmVzdWx0c1JlZ2lvbi4iLCJsYW5ndWFnZS1jYXB0dXJlLWdlb21ldHJ5LXBvaW50IjoiU2VsZWN0IGEgcG9pbnQgb24gdGhlIG1hcC4iLCJsYW5ndWFnZS1tYXJrdXAtZGVsZXRlLW11bHRpcGxlLXByb21wdC10aXRsZSI6Ildhcm5pbmc6IE11bHRpcGxlIGl0ZW1zIHNlbGVjdGVkIGZvciBkZWxldGlvbiEiLCJsYW5ndWFnZS1iYXNlbWFwLXNsaWRlci10b29sdGlwIjoiU2VsZWN0IGEgYmFzZSBtYXAuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1oaWdobGlnaHQtZmVhdHVyZS1zZXQiOiJIaWdobGlnaHRzIGFsbCBvZiB0aGUgZmVhdHVyZXMgaW4gdGhlIHNwZWNpZmllZCBmZWF0dXJlIHNldCBpbiB0aGUgYWN0aXZlIGhpZ2hsaWdodCBsYXllci4iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctZHNrLXBvaW50LXRvb2wta2V5Ym9hcmQiOiJVc2UgYXJyb3dzIHRvIG1vdmUgdGhlIHBvaW50LiBIaXQgRU5URVIgdG8gYWRkIHRoZSBmZWF0dXJlLiIsImxhbmd1YWdlLW9mZmxpbmUtdmlld2VyLXByb3Zpc2lvbmluZy1mYWlsZWQtc3RhdHVzNDA0IjoiVGhlIGRvd25sb2FkIG9mIHJlc291cmNlcyBmb3Igb2ZmbGluZSB1c2UgZmFpbGVkOiBUaGUgb2ZmbGluZSBkYXRhIGNvdWxkIG5vdCBiZSBmb3VuZC4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXNob3ctcmVzdWx0cy1mZWF0dXJlLWFjdGlvbiI6IkNyZWF0ZXMgUmVzdWx0c0xpc3RGZWF0dXJlQWN0aW9uc1ZpZXcgYW5kIGRpc3BsYXlzIHRoZSBGZWF0dXJlIEFjdGlvbnMuIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtcmVzdWx0cy1mZWF0dXJlLWxhYmVsLXNlZ21lbnQiOiJ7MH0sIFNlZ21lbnQgezF9IiwibGFuZ3VhZ2Utb2ZmbGluZS12aWV3ZXItcHJvdmlzaW9uaW5nLWZhaWxlZC1zdGF0dXM0MDMiOiJUaGUgZG93bmxvYWQgb2YgcmVzb3VyY2VzIGZvciBvZmZsaW5lIHVzZSBmYWlsZWQ6IFBlcm1pc3Npb24gZGVuaWVkLiIsImxhbmd1YWdlLWJ1ZmZlci1vcHRpb25zLXZpZXciOiJCdWZmZXIgT3B0aW9ucyIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItZXJyb3Itd2hpbGUtY2xlYXJpbmctZGF0YSI6IlRoZXJlIHdhcyBhbiBlcnJvciBjbGVhcmluZyBkYXRhLiIsImxhbmd1YWdlLXF1ZXJ5YnVpbGRlci1zaW1wbGUtdGl0bGUiOiJRdWVyeSIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLXBsYWNlaG9sZGVyIjoiUGxhY2Vob2xkZXIgVmlldyB7MH0iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVycm9yLW5vLW1hcHNlcnZpY2UiOiJUaGUgZmVhdHVyZSBpcyBub3QgYXNzb2NpYXRlZCB3aXRoIGFueSBrbm93biBtYXAgc2VydmljZS4iLCJsYW5ndWFnZS1xdWVyeWJ1aWxkZXItYW5kIjoiYW5kIiwibGFuZ3VhZ2UtbGF5ZXItc2VsZWN0b3Itc25hcHBpbmctc2VsZWN0LWFsbC10b29sdGlwIjoiU2VsZWN0IGFsbCBzbmFwcGFibGUgbGF5ZXJzIiwibGFuZ3VhZ2UtZmVhdHVyZS1hY3Rpb25zLWRlc2NyaXB0aW9uIjoiRmVhdHVyZSBBY3Rpb25zIiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtYm9va21hcmtzIjoiQm9va21hcmtzIHswfSIsImxhbmd1YWdlLXRvb2xiYXItZ3JvdXAtYWR2YW5jZWQtbWVhc3VyZW1lbnQiOiJBZHZhbmNlZCBNZWFzdXJlbWVudCIsImxhbmd1YWdlLW1lYXN1cmVtZW50LWFyZWEtc2VsZWN0IjoiU2VsZWN0IGFyZWEgdW5pdCIsImxhbmd1YWdlLXF1ZXJ5YnVpbGRlci1zcGF0aWFsLWZpbHRlci1wb2x5Z29ucyI6IkFsbCBQb2x5Z29uIERyYXdpbmdzIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi16b29tLXRvLWZlYXR1cmUiOiJab29tcyB0byBhIGZlYXR1cmUuIiwibGFuZ3VhZ2UtdG9vbGJhci1ncm91cC1maW5kLWRhdGEiOiJGaW5kIERhdGEiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctbmV3LXJlbGF0ZWQtZmVhdHVyZS1kZWZhdWx0IjoiTmV3IFJlbGF0ZWQgRmVhdHVyZSIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy11bmRvYWJsZS1leHBsb2RlIjoiRXhwbG9kZSBGZWF0dXJlcyIsImxhbmd1YWdlLWV4cG9ydC1tYXAtaXMtZXhwb3J0aW5nIjoiUHJlcGFyaW5nIGltYWdlLiBQbGVhc2Ugd2FpdC4uLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tZmVhdHVyZS1sYXllci1tb2R1bGUtcmVmcmVzaC1kYXRhIjoiUmVmcmVzaGVzIGxheWVyIGVkaXQgc3VtbWFyaWVzIGFuZCB0aGUgXCJzeW5jIG5lZWRlZFwiIGZsYWcuIiwibGFuZ3VhZ2UtdG9vbGJhci1ncm91cC1hbmFseXNpcyI6IkFuYWx5c2lzIiwibGFuZ3VhZ2UtbWVudS10aXRsZSI6Ikkgd2FudCB0by4uLiIsImxhbmd1YWdlLXRvb2xiYXItdGFiLXRvb2xzIjoiVG9vbHMiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctY3JlYXRlLWVkaXQtc2VsZWN0LXBvaW50LXRvb2wiOiJDbGljayBvciB0YXAgb24gdGhlIG1hcCB0byBzZWxlY3QgYSBmZWF0dXJlLiIsImxhbmd1YWdlLXNlYXJjaC1zZWFyY2gtcHJvbXB0IjoiVHlwZSB5b3VyIHNlYXJjaCB0ZXJtcyIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItY2FjaGUtbGF5ZXItZGF0YSI6Ildhcm5pbmc6IENhY2hpbmcgdGhpcyBsYXllciB3aWxsIG92ZXJ3cml0ZSBhbnkgb2ZmbGluZSBtYXAgZGF0YSBhbmQgYW55IGVkaXRzIG9uIHRoaXMgbGF5ZXIuIiwibGFuZ3VhZ2UtbWVudS12aWV3LWVkaXQtbG9nLWRlc2MiOiJQcmVwYXJlIG15IHZpZXdlciBmb3Igb2ZmbGluZSB1c2UgaWYgcmVxdWlyZWQsIHJldmlldyBteSBlZGl0cywgc2VuZCB0aGVtIHRvIHRoZSBzZXJ2ZXIgYW5kIHVwZGF0ZSBteSBvZmZsaW5lIGRhdGEuIiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtbGF5ZXItbGlzdCI6IkxheWVyIExpc3QgezB9IiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtdW5pdC1zcW1ldGVyIjoiTWV0ZXLCsiAobcKyKSIsImxhbmd1YWdlLXRvb2xiYXItaWRlbnRpZnktc25hcHBpbmctdG9vbHRpcCI6IkVuYWJsZS9EaXNhYmxlIHNuYXBwaW5nIHdoaWxlIGlkZW50aWZ5aW5nIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1hZGQtbWFya3VwIjoiQWRkcyB0aGUgZ2l2ZW4gZ2VvbWV0cnkgdG8gdGhlIG1hcmt1cCBsYXllci4iLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LWZvcm0tbmFtZWQtY29udGFpbmVyLXNob3duIjoiRm9ybSBncm91cCAnezB9JyBzaG93bi4iLCJsYW5ndWFnZS1xdWVyeWJ1aWxkZXItb3BlcmF0b3ItZW5kcy13aXRoIjoiZW5kcyB3aXRoIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1oaWdobGlnaHQtZmVhdHVyZSI6IkhpZ2hsaWdodHMgdGhlIGZlYXR1cmUgaW4gdGhlIGFjdGl2ZSBoaWdobGlnaHQgbGF5ZXIuIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtZXJhc2Utc3RhdHVzLWtleWJvYXJkIjoiVXNlIGFycm93cyB0byBtb3ZlIHRoZSBwb2ludC4gSGl0IEVOVEVSIHRvIHJlbW92ZSBkaXN0YW5jZSBvciBhcmVhIGNhbGN1bGF0aW9uIGZyb20gdGhlIG1hcC4iLCJsYW5ndWFnZS10b29sYmFyLWdyb3VwLW1lYXN1cmVtZW50IjoiTWVhc3VyZSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tc3RlcC16b29tLW91dCI6Ilpvb21zIG91dCBhIHN0ZXAuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1jbGVhci1zdG9yYWdlLWZvci1hcHBsaWNhdGlvbiI6IkNsZWFycyB0aGUgb2ZmbGluZSBkYXRhIGZvciB0aGUgY3VycmVudCBhcHBsaWNhdGlvbi4iLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC1pd3RtIjoiSSBXYW50IFRvIE1lbnUgezB9IiwibGFuZ3VhZ2UtaWRlbnRpZnktZnJlZWhhbmQtcG9seWdvbi10b29sIjoiRHJhZyBvbiB0aGUgbWFwIHRvIGRyYXcgYSBzaGFwZS4iLCJsYW5ndWFnZS1ydW4tcmVwb3J0LXByb2dyZXNzLWhlYWRpbmctc3luYyI6IkdlbmVyYXRpbmcgUmVwb3J0Li4uIiwibGFuZ3VhZ2UtdXNlci1zaWduLW91dC1kZXNjIjoiU2lnbiBvdXQgb2YgdGhlIGFwcGxpY2F0aW9uLiIsImxhbmd1YWdlLWJ1ZmZlci11bml0LWtpbG9tZXRlci1kaXNwbGF5LW5hbWUiOiJLaWxvbWV0ZXJzIChrbSkiLCJsYW5ndWFnZS1tZW51LXpvb20tb3V0IjoiWm9vbSBvdXQiLCJsYW5ndWFnZS1nZW9tZXRyeS1jYXB0dXJlZCI6Ikdlb21ldHJ5IGNhcHR1cmVkLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tcnVuLXdvcmtmbG93LXdpdGgtYXJndW1lbnRzIjoiUnVucyBhIHdvcmtmbG93IHdpdGggYSBzZXQgb2YgaW5wdXQgYXJndW1lbnRzLiIsImxhbmd1YWdlLWxheWVyLWFjdGlvbnMtdG9vbHRpcCI6IkNsaWNrIHRvIHNlZSBsYXllciBhY3Rpb25zIGF2YWlsYWJsZSBmb3IgdGhpcyBsYXllciIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXJlY3RhbmdsZS10b29sdGlwIjoiRHJhdyBhIHJlY3RhbmdsZSBvbiB0aGUgbWFwIiwibGFuZ3VhZ2UtY2xlYXItc3RvcmFnZS1kZXNjIjoiQ2xlYXJzIGFsbCBkYXRhIHN0b3JlZCBieSB0aGlzIHZpZXdlci4iLCJsYW5ndWFnZS10b29sYmFyLXNuYXBwaW5nLWRpc2FibGUiOiJEaXNhYmxlIFNuYXBwaW5nIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci13aGVyZS1jbGF1c2UiOiJXaGVyZSBDbGF1c2UiLCJsYW5ndWFnZS1vZmZsaW5lLWF1dG9tYXRpYy1wcm92aXNpb25pbmctc3RhcnRlZCI6IlByb3Zpc2lvbmluZyB2aWV3ZXIgZm9yIG9mZmxpbmUgdXNlLi4uIiwibGFuZ3VhZ2Utc2VhcmNoLWJpbmctcG9zdGFsLWNvZGUiOiJQb3N0YWwgQ29kZSIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1yZXF1aXJlcy12YWx1ZSI6InswfSByZXF1aXJlcyBhIHZhbHVlIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1jYWNoaW5nLXJlcGxhY2UtZGF0YS1jb250aW51ZSI6IkNhY2hpbmcgcmVwbGFjZXMgZXhpc3Rpbmcgb2ZmbGluZSBkYXRhLiBDb250aW51ZT8iLCJsYW5ndWFnZS1mZWF0dXJlLW92ZXJ2aWV3LW1hcC1lcnJvci1zcGF0aWFsLXJlZmVyZW5jZSI6Ik92ZXJ2aWV3IE1hcCBtdXN0IGhhdmUgc2FtZSBzcGF0aWFsIHJlZmVyZW5jZSBhcyBiYXNlbWFwLiBPdmVydmlldyBNYXAgZGlzYWJsZWQuIiwibGFuZ3VhZ2UtYm9va21hcmtzLW5hbWUtZXhpc3RzIjoiQm9va21hcmsgd2l0aCB0aGlzIG5hbWUgYWxyZWFkeSBleGlzdHMuIFBsZWFzZSBjaG9vc2Ugc29tZSBvdGhlciBuYW1lLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tdXBkYXRlLWZlYXR1cmUiOiJVcGRhdGVzIGVpdGhlciBhIG5ldyBvciBleGlzdGluZyBmZWF0dXJlLiIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLXJlc3VsdHMtdGFibGUiOiJSZXN1bHRzIFRhYmxlIHswfSIsImxhbmd1YWdlLWZlYXR1cmUtY29vcmRpbmF0ZXMtWFkiOiJYL1kiLCJsYW5ndWFnZS1zaGVsbC1kYXRhZnJhbWUtZGlzYWJsZWQtbGF5ZXItbGlzdCI6Ik9wZW4gdGhlIExheWVyIExpc3QiLCJsYW5ndWFnZS1hcHAtZ29uZS1vbmxpbmUiOiJZb3UgYXJlIG9ubGluZS4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWZzbS1jb2xsZWN0aW9uLXNldC1jb21tYW5kIjoiU2V0IHRoZSBwcmVmZXJyZWQgY29tbWFuZCB0byBvcGVuIHRoZSBmZWF0dXJlIHNldCBjb2xsZWN0aW9uIGZvciB0aGUgZ2l2ZW4gc291cmNlIG5hbWUuIiwibGFuZ3VhZ2UtcHJpbnRpbmctZW1haWwtYWRkcmVzcyI6IkVtYWlsIEFkZHJlc3MiLCJsYW5ndWFnZS1mZWF0dXJlLWNvb3JkaW5hdGVzLWRvd24tYXJyb3ciOiLilrwiLCJsYW5ndWFnZS1ydW4tcmVwb3J0LWVycm9yLW1lc3NhZ2UtdGltZW91dCI6IkFuIGVycm9yIG9jY3VycmVkOiB0aGUgcmVwb3J0IHRpbWVkIG91dCAoaXQgdG9vayB0b28gbG9uZyB0byBnZW5lcmF0ZSwgb3IgdGhlcmUgaXMgYSBwcm9ibGVtIHdpdGggeW91ciBjb25uZWN0aW9uKS4iLCJsYW5ndWFnZS13b3JrZmxvdy1lcnJvciI6IlRoZXJlIHdhcyBhIHdvcmtmbG93IGVycm9yIHJ1bm5pbmcgYWN0aXZpdHk6IHswfSIsImxhbmd1YWdlLXRvb2xiYXItdGFza3MtcHJpbnQtbWFwLXRvb2x0aXAiOiJDcmVhdGUgYSBwcmludGFibGUgdmVyc2lvbiBvZiB0aGUgbWFwIiwibGFuZ3VhZ2UtbmF0aXZlLW5vLXBob3RvLW5vLWNhbWVyYS1kZXRlY3RlZCI6Ik5vIGNhbWVyYSBkZXRlY3RlZC4iLCJsYW5ndWFnZS1xdWVyeWJ1aWxkZXItc2ltcGxlLWZpbHRlci10b29sdGlwIjoiU2hvdyBzaW1wbGUgZmlsdGVyIGJ1aWxkZXIiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWV4dGVudCI6Ik1hcCBFeHRlbnQ6IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi10b2dnbGUtZGF0YS1mcmFtZSI6IkFjdGl2YXRlcyBvciBkZWFjdGl2YXRlcyBkYXRhIGZyYW1lLiIsImxhbmd1YWdlLWNvbW1vbi1kZWxldGUiOiJEZWxldGUiLCJsYW5ndWFnZS1nZW9sb2NhdGUtZXJyb3ItdGltZW91dCI6Ikdlb2xvY2F0aW9uIGhhcyB0aW1lZCBvdXQuIiwibGFuZ3VhZ2UtdG9vbGJhci1zaG93LWxheWVybGlzdC1kZXNjIjoiRGlzcGxheSB0aGUgbGlzdCBvZiBhdmFpbGFibGUgbGF5ZXJzIiwibGFuZ3VhZ2UtbmF0aXZlLWFkZC10by1mYXZvcml0ZXMtbmFtZS1pbnZhbGlkLXRpdGxlIjoiTmFtZSBJbnZhbGlkIiwibGFuZ3VhZ2UtbWFwLXRpcC10aXRsZSI6Ik1hcCBUaXAiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXNlbGVjdC1sYXllciI6IlNlbGVjdCBhIEZlYXR1cmUgTGF5ZXIiLCJsYW5ndWFnZS1jbGVhci1zdG9yYWdlLXZpZXctZW50aXJlLWRvbWFpbiI6IkFsbCBhcHBsaWNhdGlvbnMgb24gdGhpcyB3ZWJzaXRlIiwibGFuZ3VhZ2UtcHJpbnRpbmctcHJpbnQtam9iLXN0YXR1cyI6IlByaW50IEpvYiBTdGF0dXMiLCJsYW5ndWFnZS1mZWF0dXJlLWF0dGFjaG1lbnRzLW5vLWF0dGFjaG1lbnRzIjoiTm8gYXR0YWNobWVudHMiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC10ZXh0IjoiVGV4dCIsImxhbmd1YWdlLXNlYXJjaC1pbnN0YW50LXByb3ZpZGVyLXNlYXJjaC1jYW5jZWxsZWQiOiJJbnN0YW50IHNlYXJjaCBjYW5jZWxsZWQuIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtcG9pbnQtZGVzYy1rZXlib2FyZCI6IlVzZSBhcnJvd3MgdG8gbW92ZSB0aGUgcG9pbnQuIEhpdCBFTlRFUiB0byBhZGQgaXQgdG8gdGhlIG1hcC4iLCJsYW5ndWFnZS10b29sYmFyLWdyb3VwLWVkaXRpbmciOiJFZGl0IERyYXdpbmdzIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWVkaXQtbG9nLWNhcHRpb24iOiJWaWV3IEVkaXQgTG9nIiwibGFuZ3VhZ2UtbmF0aXZlLWFkZC10by1mYXZvcml0ZXMtc3VjY2VzcyI6IlRoaXMgYXBwbGljYXRpb24gaGFzIGJlZW4gYWRkZWQgdG8geW91ciBmYXZvcml0ZXMuIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWludmFsaWQtaW50ZWdlciI6InswfSBtdXN0IGJlIGEgdmFsaWQgaW50ZWdlci4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXdvbnQtY2FjaGUtZGVzYyI6IlRvIGNhY2hlIHRoaXMgbGF5ZXIgb24gc3luYywgbW92ZSB0aGUgbWFwIHRvIHRoZSBhcmVhIHlvdSB3aXNoIHRvIGNhY2hlLCBhbmQgdGhlbiBlbmFibGUgY2FjaGluZyB3aXRoIHRoZSBjaGVja2JveC4iLCJsYW5ndWFnZS1mZWF0dXJlLWNvb3JkaW5hdGVzLXVuc3VwcG9ydGVkIjoiVGhlIG1vdXNlIGNvb3JkaW5hdGVzIHdpZGdldCBkb2VzIG5vdCBzdXBwb3J0IG1hcHMgdGhhdCBoYXZlIGEgc3BhdGlhbCByZWZlcmVuY2Ugc3lzdGVtIHRoYXQgaXMgZGVmaW5lZCBieSBhIFdlbGwtS25vd24gVGV4dCAoV0tUKS4gV2lkZ2V0IGhpZGRlbi4gSWYgeW91IHdpc2ggdG8gdXNlIHRoZSB3aWRnZXQgcGxlYXNlIHVzZSB0aGUgTWFuYWdlbWVudCBQYWNrIHRvIGRlZmluZSBhbHRlcm5hdGUgY29vcmRpbmF0ZSBzeXN0ZW1zLiIsImxhbmd1YWdlLXNuYXBwaW5nLWxheWVyLXNlbGVjdG9yLXRpdGxlIjoiU25hcHBhYmxlIExheWVycyIsImxhbmd1YWdlLW1lYXN1cmVtZW50LW1lYXN1cmUtZWxsaXBzZS10b29sLXRvb2x0aXAiOiJDYWxjdWxhdGUgYXJlYSBmb3IgYW4gZWxsaXBzZSIsImxhbmd1YWdlLXNlbGVjdC1sYXlvdXQiOiJTZWxlY3QgTGF5b3V0IiwibGFuZ3VhZ2UtbWVudS1hZGQtYS1mZWF0dXJlLWRlc2MiOiJDcmVhdGUgYSBuZXcgZmVhdHVyZSBvbiB0aGlzIGxheWVyLiIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLWVkaXQtZGVzYyI6IkNsaWNrIG9yIHRhcCBhbiBleGlzdGluZyBkcmF3aW5nIHRvIGJlZ2luIGVkaXRpbmcgaXQuIiwibGFuZ3VhZ2UtZmVhdHVyZS1jb29yZGluYXRlcy1ETVMiOiJETVMiLCJsYW5ndWFnZS1ydW4tcmVwb3J0LXByb2dyZXNzLXN0YXR1cyI6IlJlcG9ydCAnezB9JyBpcyBydW5uaW5nLi4iLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LWZyZWVoYW5kIjoiRnJlZWhhbmQiLCJsYW5ndWFnZS1sb2ctdGl0bGUiOiJEZWJ1ZyBMb2ciLCJsYW5ndWFnZS1uYXRpdmUtZG93bmxvYWQtZmFpbGVkIjoiRG93bmxvYWQgRmFpbGVkOiB7MH0uIiwibGFuZ3VhZ2UtY29tbW9uLWRlYWN0aXZhdGUtdG9vbCI6IkRlYWN0aXZhdGUgVG9vbCIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLWNyZWF0ZS1mZWF0dXJlIjoiQ3JlYXRlIEZlYXR1cmUgezB9IiwibGFuZ3VhZ2UtdG9vbGJhci1tdWx0aXRvb2wiOiJNdWx0aS10b29sIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1jcmVhdGUtbmV3LWZlYXR1cmUiOiJBZGQgTmV3IEZlYXR1cmUiLCJsYW5ndWFnZS1tZW51LXNob3ctY2hhcnRpbmctdmlldy1kZXNjIjoiU3dpdGNoIHRvIENoYXJ0aW5nIFZpZXciLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWFkZC10ZXh0LW1hcmt1cCI6IlByb21wdHMgdGhlIHVzZXIgZm9yIHRleHQgdG8gYWRkIGFzIG1hcmt1cC4gV2hlbiBjb21wbGV0ZWQsIHRleHQgbWFya3VwIGlzIGFkZGVkIGF0IHRoZSBwcm92aWRlZCBnZW9tZXRyeS4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXpvb20tb3V0LXRvLWV4dGVudCI6Ilpvb21zIG91dCB0byB0aGUgZ2l2ZW4gZXh0ZW50LiIsImxhbmd1YWdlLW1lbnUtbWFwdGlwLWFjdGlvbnMtdmlldy1kZXRhaWxzLWRlc2MiOiJWaWV3IGFkZGl0aW9uYWwgZGV0YWlscyBhYm91dCB0aGlzIGZlYXR1cmUiLCJsYW5ndWFnZS1tZW51LXJ1bi13b3JrZmxvdyI6IlBlcmZvcm0gYSB0YXNrIiwibGFuZ3VhZ2UtY2xlYXItc3RvcmFnZS1jb25maXJtIjoiV2FybmluZzogQ2xlYXJpbmcgZGF0YSBmb3IgdGhpcyB2aWV3ZXIgcmVtb3ZlcyBhbGwgc3RvcmVkIG1hcCBkYXRhLCBpbmNsdWRpbmcgYW55IGVkaXRzIG1hZGUgd2hpbGUgb2ZmbGluZS4gSWYgeW91IGNsZWFyIG9mZmxpbmUgZGF0YSwgeW91IHdpbGwgbmVlZCB0byByZWNhY2hlIG1hcCBkYXRhIHdoaWxlIG9ubGluZSBiZWZvcmUgeW91IGNhbiBjb250aW51ZSB3b3JraW5nIG9mZmxpbmUuIiwibGFuZ3VhZ2UtdG9vbGJhci1lZGl0aW5nLW1hbmFnZS1vZmZsaW5lLWRhdGEiOiJNYW5hZ2UgT2ZmbGluZSBEYXRhIiwibGFuZ3VhZ2UtZ2VvbG9jYXRlLXN0b3AiOiJTdG9wIEdlb2xvY2F0aW9uIiwibGFuZ3VhZ2UtZW50ZXItb25saW5lIjoiR28gdG8gT25saW5lIE1vZGUiLCJsYW5ndWFnZS10b29sYmFyLWdyb3VwLXRvb2xzIjoiVG9vbHMiLCJsYW5ndWFnZS10b29sYmFyLWVkaXRpbmctY3JlYXRlLW5ldy1mZWF0dXJlLWdlb2xvY2F0aW9uIjoiVXNlIEdlb2xvY2F0aW9uIiwibGFuZ3VhZ2UtdG9vbGJhci1lZGl0aW5nLWRhdGEiOiJEYXRhIiwibGFuZ3VhZ2UtbWVudS1yZXN1bHRzLXRhYmxlLWFjdGlvbnMtZGVzYyI6IlJlc3VsdHMgVGFibGUgQWN0aW9ucyIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tb3Blbi1mZWF0dXJlLXNldC1jb2xsZWN0aW9uIjoiT3BlbnMgdGhlIGZlYXR1cmUgc2V0IGNvbGxlY3Rpb24uIiwibGFuZ3VhZ2UtY29tbW9uLW5vdGlmaWNhdGlvbiI6Ik5vdGlmaWNhdGlvbiIsImxhbmd1YWdlLWNhcHR1cmUtZ2VvbWV0cnktcG9seWxpbmUta2V5Ym9hcmQiOiJVc2UgYXJyb3dzIHRvIG1vdmUgdGhlIHBvaW50LiBIaXQgRU5URVIgdG8gcGxvdCBhbmQgYmVnaW4gbW92aW5nIHRoZSBuZXh0IHBvaW50LiBIaXQgRU5URVIgdHdpY2UgdG8gZmluaXNoLiIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLXNlbGVjdC1mZWF0dXJlLWZvci1lZGl0aW5nIjoiU2VsZWN0IEZlYXR1cmUgZm9yIEVkaXRpbmcgezB9IiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1wb2ludC1kZXNjIjoiQ2xpY2sgb3IgdGFwIGEgbG9jYXRpb24gb24gdGhlIG1hcCB0byBsZWFybiB3aGF0XHUyMDE5cyB0aGVyZS4iLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LXBvbHlnb24tdG9vbHRpcCI6IkRyYXcgYSBjdXN0b20gc2hhcGUgb24gdGhlIG1hcCB0byBmaW5kIG91dCBhYm91dCBhbiBhcmVhIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1zeW5jLXN0YXJ0IjoiU3RhcnRpbmcgU3luYy4uLiIsImxhbmd1YWdlLW1lYXN1cmVtZW50LWRyYXdtb2RlLXVwLWFycm93IjoiVXAgQXJyb3ciLCJsYW5ndWFnZS1mZWF0dXJlLXJlbGF0ZWQtZmVhdHVyZXMiOiJSZWxhdGVkIiwibGFuZ3VhZ2UtYmFyY29kZS1zY2FubmVyLXVuYXZhaWxhYmxlIjoiUVIgc2Nhbm5lciBpcyB1bmF2YWlsYWJsZS4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXdvbnQtY2FjaGUiOiJUaGlzIGxheWVyIHdpbGwgbm90IGJlIGNhY2hlZCBvbiBzeW5jLiIsImxhbmd1YWdlLWludGVncmF0aW9uLXNlbGVjdG9yLXRleHQiOiJTZWxlY3QgTWFwIiwibGFuZ3VhZ2UtdG9vbGJhci0zcmQtcGFydHktbWFwcy1zaG93LW1hcHMtdG9vbHRpcCI6IkRpc3BsYXkgbGlua2VkIG1hcHMgaW4gdGhlIGV4dGVybmFsIGNvbXBvbmVudCB2aWV3IiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtdW5pdC1zcXlhcmQiOiJZYXJkwrIgKHlkwrIpIiwibGFuZ3VhZ2UtbWFwLXRpcC1mZWF0dXJlcy1vZiI6Im9mIiwibGFuZ3VhZ2UtbmF0aXZlLWRvd25sb2FkLWRvd25sb2FkaW5nIjoiRG93bmxvYWRpbmcgezB9OiB7MX0lIGNvbXBsZXRlLiIsImxhbmd1YWdlLXF1ZXJ5YnVpbGRlci1vcGVyYXRvci1zdGFydHMtd2l0aCI6InN0YXJ0cyB3aXRoIiwibGFuZ3VhZ2UtdG9vbGJhci1idWZmZXJpbmctYWx0LWVuYWJsZSI6IkVuYWJsZSBidWZmZXJpbmcgZm9yIGFjdGl2ZSB0b29sLiIsImxhbmd1YWdlLXNlYXJjaC1iaW5nLWNvdW50cnkiOiJDb3VudHJ5IiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1sYXllcnMtY2hhbmdlIjoiSWRlbnRpZmlhYmxlIExheWVycyIsImxhbmd1YWdlLWxheWVybGlzdC1vcGFjaXR5LXNsaWRlci1oYW5kbGUiOiJTbGlkZXIgaGFuZGxlIiwibGFuZ3VhZ2UtcXVlcnlidWlsZGVyLWZlYXR1cmUtc2V0LWNvbGxlY3Rpb24tZGlzcGxheS1uYW1lIjoiUXVlcnkgUmVzdWx0cyIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tY2xlYXItdGVtcG9yYXJ5LW1hcmt1cCI6IlJlbW92ZXMgdGVtcG9yYXJ5IG1hcmt1cCBjcmVhdGVkIGJ5IEFkZFRlbXBvcmFyeU1hcmt1cEdlb21ldHJ5LiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1nZW9tZXRyeS1wb2x5Z29uIjoiRWRpdCB2ZXJ0aWNlcyBieSBkcmFnZ2luZyB0aGVtLCBvciByaWdodCBjbGljayB0byBkZWxldGUuIERyYWcgdGhlIHNoYXBlIHRvIG1vdmUgaXQuIENsaWNrIG9yIHRhcCBvbiB0aGUgbWFwIHRvIHN0b3AgZWRpdGluZyIsImxhbmd1YWdlLXF1ZXJ5YnVpbGRlci1zcGF0aWFsLWZpbHRlci1ub25lIjoiTm9uZSIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXJlY3RhbmdsZSI6IlJlY3RhbmdsZSIsImxhbmd1YWdlLWJhcmNvZGUtc2Nhbm5lci1zd2l0Y2giOiJTd2l0Y2ggU291cmNlIiwibGFuZ3VhZ2UtdG9vbGJhci1hbmFseXNpcy1sb2NhdGlvbi1pbmZvcm1hdGlvbiI6IkxvY2F0aW9uIEluZm9ybWF0aW9uIiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtZmVhdHVyZS1kZXRhaWxzLWV4cGFuZGVkIjoiRXhwYW5kZWQgRmVhdHVyZSBEZXRhaWxzIHswfSIsImxhbmd1YWdlLXRvb2xiYXItbmF2aWdhdGlvbi16b29tLWluIjoiWm9vbSBJbiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1kc2stbGluZS10b29sIjoiQ2xpY2sgb3IgdGFwIG9uIHRoZSBtYXAgdG8gYWRkIHR3byBvciBtb3JlIGxpbmUgcG9pbnRzLiBEb3VibGUgY2xpY2svdGFwIHRvIHN0b3AiLCJsYW5ndWFnZS1kaXNwbGF5LXJlc3VsdC1waWNrZXItc2VsZWN0LW5vbmUiOiJTZWxlY3QgTm9uZSIsImxhbmd1YWdlLXRvb2xiYXItY2xlYXItYWxsIjoiQ2xlYXIiLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC1jb29yZGluYXRlcy1lcnJvciI6IkVycm9yIGxvYWRpbmcgbWFwIGNvb3JkaW5hdGVzLiAiLCJsYW5ndWFnZS1nZW9sb2NhdGUtdHJhY2staW4tcHJvZ3Jlc3MiOiJUcmFja2luZyB2aWEgZ2VvbG9jYXRpb24uLi4iLCJsYW5ndWFnZS10b29sYmFyLXRhc2tzLXByaW50aW5nIjoiUHJpbnRpbmciLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctY3JlYXRlLWVkaXQtZGVzY3JpcHRpb24iOiJTZWxlY3QgdG8gc3RhcnQgZWRpdGluZyBhIG5ldyBvciBleGlzdGluZyBmZWF0dXJlIiwibGFuZ3VhZ2Utc2l0ZS10cnktbG9nLW9uLWFnYWluIjoiVHJ5IEFnYWluIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtZHJhd2luZyI6IkNyZWF0ZSIsImxhbmd1YWdlLXNlYXJjaC1hcmNnaXMtc2NvcmUiOiJTY29yZSIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItbm8tbGF5ZXJzIjoiTm8gZmVhdHVyZSBsYXllcnMgYXZhaWxhYmxlLiIsInRpbWVwaWNrZXIucmVnaW9uYWwiOnsic2Vjb25kVGV4dCI6IlNlY29uZCIsInRpbWV6b25lVGV4dCI6IlRpbWUgWm9uZSIsImFtTmFtZXMiOlsiQU0iLCJBIl0sIm1pY3Jvc2VjVGV4dCI6Ik1pY3Jvc2Vjb25kIiwidGltZVN1ZmZpeCI6IiIsImN1cnJlbnRUZXh0IjoiTm93IiwiaG91clRleHQiOiJIb3VyIiwibWlsbGlzZWNUZXh0IjoiTWlsbGlzZWNvbmQiLCJ0aW1lRm9ybWF0IjoiSEg6bW0iLCJ0aW1lVGV4dCI6IlRpbWUiLCJjbG9zZVRleHQiOiJEb25lIiwicG1OYW1lcyI6WyJQTSIsIlAiXSwibWludXRlVGV4dCI6Ik1pbnV0ZSIsImlzUlRMIjpmYWxzZSwidGltZU9ubHlUaXRsZSI6IkNob29zZSBUaW1lIn0sImxhbmd1YWdlLXByaW50LWNvbXBsZXRlLWRlc2NyaXB0aW9uIjoiWW91ciBmaWxlIGlzIHJlYWR5LiBUbyB2aWV3IHRoZSBmaWxlLCBwbGVhc2UgY2xpY2sgJ09wZW4gRmlsZScuIiwibGFuZ3VhZ2UtbWVudS1tYXAtbGF5ZXJzLWV4cGFuZCI6IkV4cGFuZCBhbmQgY29sbGFwc2UgezB9IGxheWVyIGdyb3VwIiwibGFuZ3VhZ2UtYXV0aC1wYXNzd29yZCI6IlBhc3N3b3JkOiIsImxhbmd1YWdlLW1lYXN1cmVtZW50LXJlc3VsdHMtY29sbGVjdGlvbi1uYW1lIjoiTWVhc3VyZW1lbnQgUmVzdWx0cyIsImxhbmd1YWdlLW1lbnUtem9vbS10by12aXNpYmxlLXNjYWxlIjoiWm9vbSB0byB2aXNpYmxlIHNjYWxlIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lZGl0LWFjdGlvbi1jcmVhdGVkLWF0dGFjaG1lbnQiOiJDcmVhdGVkIGF0dGFjaG1lbnQiLCJsYW5ndWFnZS10b29sYmFyLWVyYXNlIjoiRXJhc2UiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1lbGxpcHNlLWRlc2MiOiJDbGljayBhbmQgZHJhZyB0byBkcmF3IGFuIGVsbGlwc2Ugb24gdGhlIG1hcC4iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctZXJyb3ItZGlhbG9ndWUiOiJFcnJvciBTYXZpbmcgRmVhdHVyZSIsImxhbmd1YWdlLXNlYXJjaC1mc2MtZGlzcGxheS1uYW1lIjoiU2VhcmNoIFJlc3VsdHM6IHswfSIsImxhbmd1YWdlLWxheWVybGlzdC10aGVtZS1zZWxlY3RvciI6IlNlbGVjdCBsYXllciB0aGVtZSIsImxhbmd1YWdlLWJhc2VtYXAtc2xpZGVyLWhhbmRsZSI6IlNsaWRlciBoYW5kbGUiLCJsYW5ndWFnZS10b29sYmFyLW5hdmlnYXRpb24tem9vbS1pbi10b29sdGlwIjoiRHJhdyBhbiBhcmVhIG9uIHRoZSBtYXAgdG8gem9vbSB0byIsImxhbmd1YWdlLXRvb2xiYXItaWRlbnRpZnktcG9pbnQtZGVzYy1rZXlib2FyZCI6IlVzZSBhcnJvd3MgdG8gbW92ZSB0aGUgcG9pbnQuIEhpdCBFTlRFUiB0byBsZWFybiB3aGF0XHUyMDE5cyB0aGVyZS4iLCJsYW5ndWFnZS1jb25maXJtLWRlZmF1bHQtdGl0bGUiOiJDb25maXJtIiwibGFuZ3VhZ2UtbG9nLWxldmVsIjoiTGV2ZWwiLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1tZWFzdXJlLWZyZWVoYW5kLXBvbHlnb24tdG9vbC1zdGF0dXMiOiJIb2xkIHRoZSBtb3VzZSBidXR0b24gb3IgeW91ciBmaW5nZXJ0aXAgZG93biwgdGhlbiBkcmF3IGEgZnJlZWhhbmQgc2hhcGUgYW5kIGZpbmQgYXJlYS4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWRlbGV0ZS1lZGl0IjoiVW5kbyIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1hZGQtZmVhdHVyZS1idXR0b24iOiJBZGQgRmVhdHVyZSIsImxhbmd1YWdlLW1lbnUtdmlldy1lZGl0LWxvZyI6IlN5bmMgb2ZmbGluZSBkYXRhIiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtZXh0ZXJuYWwtY29tcG9uZW50IjoiRXh0ZXJuYWwgQ29tcG9uZW50IHswfSIsImxhbmd1YWdlLWZlYXR1cmUtYXR0YWNobWVudHMtbm8tYXR0YWNobWVudHMtb2ZmbGluZSI6IkF0dGFjaG1lbnRzIGFyZSBub3QgYXZhaWxhYmxlIHdoZW4gb2ZmbGluZS4iLCJsYW5ndWFnZS1uYXRpdmUtZmlsZS11cGxvYWQtc3VjY2VzcyI6IkZpbGUgc3VjY2Vzc2Z1bGx5IGF0dGFjaGVkIHRvIGZlYXR1cmUiLCJsYW5ndWFnZS1idWZmZXItY2xlYXItYnV0dG9uLXRpdGxlIjoiQ2xlYXIgQnVmZmVyIE9wdGlvbnMiLCJsYW5ndWFnZS1sZWdlbmQtY2x1c3RlcnMtZGVmYXVsdC10aXRsZSI6IkNsdXN0ZXJzIiwibGFuZ3VhZ2UtY2FwdHVyZS1nZW9tZXRyeS1mcmVlaGFuZC1wb2x5bGluZSI6IkRyYXcgYSBmcmVlaGFuZCBsaW5lIG9uIHRoZSBtYXAuIiwibGFuZ3VhZ2UtcXVlcnlidWlsZGVyLW9wZXJhdG9yLWdyZWF0ZXItdGhhbi1lcXVhbC10byI6Ij49IiwibGFuZ3VhZ2Utc2VhcmNoLWJpbmctZm9ybWF0dGVkIjoiRm9ybWF0dGVkIEFkZHJlc3MiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVycm9yLWZlYXR1cmUtZWRpdHMiOiJUaGVyZSB3YXMgYW4gZXJyb3IgYXBwbHlpbmcgZmVhdHVyZSBlZGl0czogezB9IiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1mcmVlaGFuZC1wb2x5Z29uLXRvb2x0aXAiOiJJZGVudGlmeSB0aGluZ3Mgb24gdGhlIG1hcCBieSBkcmF3aW5nIGEgZnJlZWhhbmQgc2hhcGUiLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC1mZWF0dXJlLWxheWVyLWRldGFpbHMiOiJGZWF0dXJlIExheWVyIERldGFpbHMgezB9IiwibGFuZ3VhZ2UtbGVnZW5kLWhlYXQtbWFwcy1oaWdoIjoiSGlnaCIsImxhbmd1YWdlLWVudGVyLW9mZmxpbmUiOiJHbyB0byBPZmZsaW5lIE1vZGUiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctaW52YWxpZC1kYXRlIjoiezB9IG11c3QgYmUgYSB2YWxpZCBkYXRlLiIsImxhbmd1YWdlLW1hcC1zaXRlLWF1dGhvcml6YXRpb24tZmFpbGVkLW1lc3NhZ2UiOiJUaGlzIHNpdGUgaXMgcmVzdHJpY3RlZC4iLCJsYW5ndWFnZS1uYXRpdmUtZmVhdHVyZS1uby1sYXllci11cmwiOiJFcnJvcjogVGhlIExheWVyIFVybCBmb3IgdGhpcyBsYXllciBpcyBub3QgYXZhaWxhYmxlIG9yIGlzIG5vdCBjb25maWd1cmVkIGNvcnJlY3RseS4gRmlsZSB1cGxvYWQgZmFpbGVkLiIsImxhbmd1YWdlLXZpc3VhbGl6YXRpb24tbm9uZSI6Ik5vbmUiLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LWZvcm0tdW5uYW1lZC1jb250YWluZXItc2hvd24iOiJGb3JtIGdyb3VwIHNob3duLiIsImxhbmd1YWdlLXRvb2xiYXItaWRlbnRpZnktZnJlZWhhbmQtZGVzYyI6IkNsaWNrL3RhcCBhbmQgaG9sZCBkb3duLCB0aGVuIGRyYXcgYSBmcmVlaGFuZCBzaGFwZSB0byBsZWFybiB3aGF0XHUyMDE5cyB0aGVyZS4iLCJsYW5ndWFnZS1tZW51LXN3aXRjaC10by1sYXllcmxpc3QtZGVzYyI6IkRpc3BsYXkgdGhlIGxpc3Qgb2YgYXZhaWxhYmxlIGxheWVycyIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItZXJyb3ItdGl0bGUiOiJFcnJvciIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLXNpbXBsZS1maWx0ZXIiOiJTaW1wbGUgRmlsdGVyIHswfSIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItYXBwbHlpbmciOiJBcHBseWluZyBlZGl0cy4uLiIsImxhbmd1YWdlLW1hcmt1cC1jbGVhci1hbGwtcHJvbXB0LXRvb2x0aXAiOiJFcmFzZSBhbGwgaXRlbXMgYWRkZWQgdG8gdGhlIG1hcCIsImxhbmd1YWdlLWJvb2ttYXJrcy1uYW1lLXJlcXVpcmVkIjoiQm9va21hcmsgbmFtZSBpcyByZXF1aXJlZCIsImxhbmd1YWdlLXNoZWxsLWRhdGFmcmFtZS1kaXNhYmxlZC1vcHRpb25zIjoiVXNlIG9uZSBvZiB0aGUgZm9sbG93aW5nIGxpbmtzIHRvIHJlc3RvcmUgY29udGVudCB0byB0aGlzIHZpZXc6IiwibGFuZ3VhZ2UtY2FwdHVyZS1nZW9tZXRyeS1mcmVlaGFuZC1wb2x5Z29uX3Rvb2x0aXAiOiJTZWxlY3QgYnkgZnJlZWhhbmQgc2hhcGUiLCJsYW5ndWFnZS1tZW51LW9wZW4tb2ZmbGluZS10b29scy1tZW51IjoiTWFuYWdlIG9mZmxpbmUgZGF0YSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tZGVsZXRlLWZlYXR1cmUiOiJEZWxldGVzIGVpdGhlciBhIG5ldyBvciBleGlzdGluZyBmZWF0dXJlLiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItd2FybmluZy1vZmZsaW5lLWNsZWFyaW5nLWRhdGEiOiJZb3UgY2Fubm90IGNsZWFyIGRhdGEgd2hpbGUgb2ZmbGluZS4iLCJsYW5ndWFnZS1zZWFyY2gtYmluZy1hZGRyZXNzIjoiQWRkcmVzcyIsImxhbmd1YWdlLXRvb2xiYXItdGFza3MtaWRlbnRpZnktdG9vbHRpcCI6IkZpbmQgZGF0YSBvbiB0aGUgbWFwIiwiZGF0ZXBpY2tlci5yZWdpb25hbCI6eyJkYXRlRm9ybWF0IjoibW0vZGQveXkiLCJuZXh0VGV4dCI6Ik5leHQiLCJkYXlOYW1lcyI6WyJTdW5kYXkiLCJNb25kYXkiLCJUdWVzZGF5IiwiV2VkbmVzZGF5IiwiVGh1cnNkYXkiLCJGcmlkYXkiLCJTYXR1cmRheSJdLCJwcmV2VGV4dCI6IlByZXYiLCJkYXlOYW1lc1Nob3J0IjpbIlN1biIsIk1vbiIsIlR1ZSIsIldlZCIsIlRodSIsIkZyaSIsIlNhdCJdLCJ3ZWVrSGVhZGVyIjoiV2siLCJjdXJyZW50VGV4dCI6IlRvZGF5IiwiZmlyc3REYXkiOjAsImNsb3NlVGV4dCI6IkRvbmUiLCJzaG93TW9udGhBZnRlclllYXIiOmZhbHNlLCJkYXlOYW1lc01pbiI6WyJTdSIsIk1vIiwiVHUiLCJXZSIsIlRoIiwiRnIiLCJTYSJdLCJtb250aE5hbWVzU2hvcnQiOlsiSmFuIiwiRmViIiwiTWFyIiwiQXByIiwiTWF5IiwiSnVuIiwiSnVsIiwiQXVnIiwiU2VwIiwiT2N0IiwiTm92IiwiRGVjIl0sImlzUlRMIjpmYWxzZSwibW9udGhOYW1lcyI6WyJKYW51YXJ5IiwiRmVicnVhcnkiLCJNYXJjaCIsIkFwcmlsIiwiTWF5IiwiSnVuZSIsIkp1bHkiLCJBdWd1c3QiLCJTZXB0ZW1iZXIiLCJPY3RvYmVyIiwiTm92ZW1iZXIiLCJEZWNlbWJlciJdLCJ5ZWFyU3VmZml4IjoiIn0sImxhbmd1YWdlLW1lbnUtZ2xvYmFsLXNlYXJjaCI6IlNlYXJjaCIsImxhbmd1YWdlLW9mZmxpbmUtcHJvdmlzaW9uaW5nLWZhaWxlZC1pbnZhbGlkLWJ1bmRsZSI6IlRoZSBkb3dubG9hZCBmb3Igb2ZmbGluZSB1c2UgZmFpbGVkLiBJbnZhbGlkIGJ1bmRsZS4iLCJsYW5ndWFnZS1idWZmZXItY2FuY2VsLWJ1dHRvbi10aXRsZSI6IkNhbmNlbCBCdWZmZXIgT3B0aW9ucyIsImxhbmd1YWdlLW1lYXN1cmVtZW50LXVuaXQtc3FtaWxlLXNob3J0IjoibWnCsiIsImxhbmd1YWdlLW9mZmxpbmUtZGF0YS1jbGVhcmVkLXRpdGxlIjoiQ29tcGxldGVkIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1pZGVudGlmeSI6IkV4ZWN1dGVzIGFuIGlkZW50aWZ5IG9wZXJhdGlvbiBvbiBhIGdlb21ldHJ5LiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tYWRkLXRlbXBvcmFyeS1tYXJrdXAtZ2VvbWV0cnkiOiJBZGRzIGEgdGVtcG9yYXJ5IG1hcmt1cCBncmFwaGljIHRvIHRoZSBtYXAuIFRoZSBDbGVhclRlbXBvcmFyeU1hcmt1cCBjb21tYW5kIHdpbGwgY2xlYXIgdGhpcyBtYXJrdXAuIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1hdHRhY2gtcGhvdG8iOiJBdHRhY2ggYSBQaG90byIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItc3luYy11cGRhdGUtcmVzb3VyY2UtZmFpbGVkIjoiVW5hYmxlIHRvIHVwZGF0ZSBvZmZsaW5lIGJ1bmRsZS4iLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC1zaW1wbGUtcXVlcnkiOiJTaW1wbGUgUXVlcnkgezB9IiwibGFuZ3VhZ2UtY29tbW9uLWNsb3NlIjoiQ2xvc2UiLCJsYW5ndWFnZS1mZWF0dXJlLWRlc2NyaXB0aW9uIjoiRGVzY3JpcHRpb24iLCJsYW5ndWFnZS1xdWVyeWJ1aWxkZXItc2ltcGxlLWRlc2NyaXB0aW9uIjoiU2hvdyBzaW1wbGUgcXVlcnkgYnVpbGRlci4iLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC1ub25lIjoiTm9uZS4iLCJsYW5ndWFnZS1nZW9sb2NhdGUtZXJyb3ItcHJvamVjdGlvbiI6IlRoZXJlIHdhcyBhbiBlcnJvciBwcm9qZWN0aW5nIGdlb2xvY2F0aW9uOiB7MH0iLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1sZW5ndGgtbGFiZWwiOiJMZW5ndGgiLCJsYW5ndWFnZS1tZW51LWlkZW50aWZ5LWJ1ZmZlcmVkLWZlYXR1cmUtc2V0LWNvbGxlY3Rpb24tZGVzYyI6IklkZW50aWZ5IGZlYXR1cmVzIG5lYXIgdGhlc2UgcmVzdWx0cyIsImxhbmd1YWdlLW9mZmxpbmUtcHJvdmlzaW9uaW5nLXNlY3VyZS1zaXRlLXNhdmVkIjoiVGhlIHNpdGUgd2FzIHNhdmVkLiIsImxhbmd1YWdlLWNvbXBhY3QtdG9vbGJhci1uYW1lIjoiQ29tcGFjdCBUb29sYmFyIiwibGFuZ3VhZ2Utb2ZmbGluZS1wcm92aXNpb25pbmctc3VjY2VlZGVkIjoiVGhlIHZpZXdlciBpcyBwcmVwYXJlZCBmb3Igb2ZmbGluZSB1c2UuIFVzZSB0aGUgTWFuYWdlIFN5bmMgU2V0dGluZ3Mgb3B0aW9uIHRvIGNob29zZSBsYXllciBkYXRhIHRvIHdvcmsgd2l0aCB3aGlsZSBvZmZsaW5lLCB0aGVuIHBlcmZvcm0gYSBzeW5jIHRvIGNhY2hlIGl0IG9uIHlvdXIgZGV2aWNlLiIsImxhbmd1YWdlLWxheWVyLXNlbGVjdG9yLXNuYXBwaW5nLWNsZWFyLWFsbC10b29sdGlwIjoiQ2xlYXIgYWxsIHNuYXBwYWJsZSBsYXllcnMiLCJsYW5ndWFnZS1yZXN1bHRzLXRvZ2dsZS1saXN0LXZpZXctZGVzYyI6IlZpZXcgcmVzdWx0cyBpbiBsaXN0IGZvcm1hdCIsImxhbmd1YWdlLW1lbnUtem9vbS10by1sYXllci1kZXNjIjoiWm9vbSB0aGUgbWFwIHRvIHRoZSBmdWxsIGV4dGVudCBvZiB0aGUgbGF5ZXIuIiwibGFuZ3VhZ2UtdG9vbGJhci10YWItb2ZmbGluZSI6Ik9mZmxpbmUiLCJsYW5ndWFnZS1tZW51LXNob3ctcmVzdWx0cy10YWJsZS1kZXNjIjoiU3dpdGNoIHRvIFRhYmxlIFZpZXciLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXZpZXctZWRpdCI6IkNoYW5nZSIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItZWRpdC1hY3Rpb24tZGVsZXRlZC1hdHRhY2htZW50IjoiRGVsZXRlZCBhdHRhY2htZW50IiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtdW5pdC1zcW5hdXRpY2FsbWlsZS1zaG9ydCI6Ik5NwrIiLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC1jb29yZGluYXRlcy1zb3V0aCI6InswfSDCsCBTb3V0aCIsImxhbmd1YWdlLWNsZWFyLXN0b3JhZ2UiOiJDbGVhciBvZmZsaW5lIGRhdGEiLCJsYW5ndWFnZS11c2VyLXNpZ24taW4iOiJTaWduIGluIiwibGFuZ3VhZ2UtY2x1c3RlcmluZy10aXRsZSI6IkNsdXN0ZXJpbmcgT3B0aW9ucyIsImxhbmd1YWdlLWJ1ZmZlci1vcHRpb25zLWxlbmd0aC11bml0LXNlbGVjdCI6IlNlbGVjdCBidWZmZXIgbGVuZ3RoIHVuaXQiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWZldGNoaW5nLWRhdGEiOiJGZXRjaGluZyBwcmltYXJ5IGxheWVyIGRhdGEuLi4iLCJsYW5ndWFnZS1sYXllcmxpc3Qtb3BhY2l0eS1zbGlkZXItcGVyY2VudCI6InBlcmNlbnQiLCJsYW5ndWFnZS1tZW51LWlkZW50aWZ5LXBvaW50IjoiSWRlbnRpZnkgYnkgcG9pbnQiLCJsYW5ndWFnZS10b29sYmFyLXRhYi1ob21lIjoiSG9tZSIsImxhbmd1YWdlLWZlYXR1cmUtcmVsYXRlZC1ub3QtcmVsYXRpb24iOiJUaGVyZSBhcmUgbm8gZmVhdHVyZXMgcmVsYXRlZCB0byB0aGlzIGZlYXR1cmUuIiwibGFuZ3VhZ2Utc25hcHBpbmctbGF5ZXItdW5yZWdpc3RlcmVkIjoiTGF5ZXIgezB9IHdhcyB1bnJlZ2lzdGVyZWQgZnJvbSBzbmFwcGluZy4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXJlbW92ZS1zdGF0dXMiOiJSZW1vdmVzIHRoZSBzdGF0dXMgaW5kaWNhdG9yIGZyb20gdGhlIHNjcmVlbiB3aXRoIHRoZSBzcGVjaWZpZWQgSUQuIiwibGFuZ3VhZ2Utc2VhcmNoLXRpdGxlIjoiU2VhcmNoIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi10b2dnbGUtcmVzdWx0cy1mcmFtZSI6IkFjdGl2YXRlcyBvciBkZWFjdGl2YXRlcyBSZXN1bHRzIGZyYW1lLiIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLXJlc3VsdHMtbGlzdCI6IlJlc3VsdHMgTGlzdCB7MH0iLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC13b3JrZmxvd3MiOiJXb3JrZmxvd3MgezB9IiwibGFuZ3VhZ2Utb2ZmbGluZS1wcm92aXNpb25pbmctZmFpbGVkIjoiVGhlIGRvd25sb2FkIGZvciBvZmZsaW5lIHVzZSBmYWlsZWQuIFRoZXJlIHdhcyBhbiBlcnJvciBzYXZpbmcgYW4gb2ZmbGluZSByZXNvdXJjZS4gWW91IG1heSBiZSBvdXQgb2Ygc3BhY2UuIiwibGFuZ3VhZ2UtdG9vbGJhci1uYXZpZ2F0aW9uLWhvbWUiOiJIb21lIiwibGFuZ3VhZ2UtbWVudS1pZGVudGlmeS1kZXNjIjoiQ2xpY2ssIHRhcCwgb3IgZHJhdyBhIHJlY3RhbmdsZSBvbiB0aGUgbWFwIHRvIGlkZW50aWZ5IGZlYXR1cmVzLiIsImxhbmd1YWdlLW1lYXN1cmVtZW50LW1lYXN1cmUtbGluZS10b29sLXN0YXR1cyI6IkNsaWNrIG9yIHRhcCB0byBkcmF3IGEgbWVhc3VyZW1lbnQgbGluZS4gRG91YmxlLWNsaWNrL3RhcCB0byBmaW5pc2guIiwibGFuZ3VhZ2UtbGF5ZXItYWN0aW9ucy1kZXNjIjoiRGlzcGxheSBhIGxpc3Qgb2YgbGF5ZXIgYWN0aW9ucyIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tcnVuLXdvcmtmbG93LXdpdGgtZ2VvbWV0cnkiOiJSdW5zIGEgd29ya2Zsb3cgd2l0aCBhIGdlb21ldHJ5IHVzZWQgYXMgYW4gaW5wdXQgYXJndW1lbnQuIiwibGFuZ3VhZ2UtbWVudS1wcm92aXNpb24tZm9yLW9mZmxpbmUtZGVzYyI6IlByZXBhcmUgbXkgZGV2aWNlIGZvciBvZmZsaW5lIHVzZSBieSBkb3dubG9hZGluZyB0aGUgcmVxdWlyZWQgZmlsZXMuIiwibGFuZ3VhZ2UtdG9vbGJhci1uYXZpZ2F0aW9uLWluaXRpYWwtZXh0ZW50LXRvb2x0aXAiOiJSZXR1cm4gdG8gdGhlIGluaXRpYWwgcG9zaXRpb24gb2YgdGhlIG1hcCIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tc2hvdy1mZWF0dXJlLWxheWVyLW1vZGFsLW1lc3NhZ2UiOiJDcmVhdGVzIGEgTW9kZWxNZXNzYWdlVmlldyB2aWV3IGFuZCBkaXNwbGF5cyB0aGUgZ2l2ZW4gbWVzc2FnZS4iLCJsYW5ndWFnZS1vZmZsaW5lLWF1dG9tYXRpYy1wcm92aXNpb25pbmctc3VjY2VlZGVkIjoiVmlld2VyIHN1Y2Nlc3NmdWxseSBwcm92aXNpb25lZCBmb3Igb2ZmbGluZSB1c2Ugd2l0aCBidW5kbGUgZ2VuZXJhdGVkIG9uIHswfSIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLWVkaXQiOiJFZGl0IiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtbWVhc3VyZS1mcmVlaGFuZC1saW5lLXRvb2wtbmFtZSI6IkZyZWVoYW5kIExpbmUiLCJsYW5ndWFnZS1kaXNwbGF5LXJlc3VsdC1waWNrZXItc2VsZWN0LWFsbCI6IlNlbGVjdCBBbGwiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1mcmVlaGFuZC1wb2x5Z29uLWRlc2MiOiJIb2xkIHRoZSBtb3VzZSBidXR0b24gb3IgeW91ciBmaW5nZXJ0aXAgZG93biwgdGhlbiBkcmF3IGEgZnJlZWhhbmQgc2hhcGUuIiwibGFuZ3VhZ2UtYm9va21hcmtzLWRlbGV0ZSI6IkRlbGV0ZSBib29rbWFyayIsImxhbmd1YWdlLW1lYXN1cmVtZW50LXVuaXQtaGVjdGFyZSI6IkhlY3RhcmVzIChoYSkiLCJsYW5ndWFnZS1jb21tb24tcGFuLWRlc2NyaXB0aW9uIjoiUGFuIHRoZSBtYXAgdG8gY2VudGVyIHRoaXMgZmVhdHVyZS4iLCJsYW5ndWFnZS10b29sYmFyLW5hdmlnYXRpb24tcHJldmlvdXMtZXh0ZW50IjoiUHJldmlvdXMgRXh0ZW50IiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtcmVzdWx0cy1maWVsZC1iZWFyaW5nIjoiQmVhcmluZyIsImxhbmd1YWdlLXRvb2xiYXItZ3JvdXAtbWVhc3VyZW1lbnQtdG9vbHMiOiJNZWFzdXJlIiwibGFuZ3VhZ2UtcXVlcnlidWlsZGVyLW9wZXJhdG9yLW5vdC1udWxsIjoiaXMgbm90IG51bGwiLCJsYW5ndWFnZS1xdWVyeWJ1aWxkZXItc2VsZWN0LWZpbHRlciI6IlNlbGVjdCBmaWx0ZXIiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctZGVsZXRlLWNvbmZpcm1hdGlvbiI6IkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBwZXJtYW5lbnRseSBkZWxldGUgdGhpcyBmZWF0dXJlIG9uIHRoZSBzZXJ2ZXI/IiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWNvbmZpcm0tbG93LWFjY3VyYWN5LWdlb2xvY2F0aW9uIjoiVGhpcyBnZW9sb2NhdGlvbiByZXN1bHQgaXMgYWNjdXJhdGUgd2l0aGluIHswfSBtZXRlcnMuIFRvIHBsYWNlIHRoZSBmZWF0dXJlIGF0IHRoaXMgbG9jYXRpb24sIHNlbGVjdCB7MX0uIFRvIHNlbGVjdCBhIGRpZmZlcmVudCBsb2NhdGlvbiBvbiB0aGUgbWFwLCBzZWxlY3QgezJ9LiIsImxhbmd1YWdlLWZlYXR1cmUtb3ZlcnZpZXctbWFwLWVycm9yLW5vLWJhc2UtbGF5ZXIiOiJObyB2YWxpZCBiYXNlIGxheWVyIGZvdW5kIGZvciBPdmVydmlldyBNYXAuIiwibGFuZ3VhZ2Utc2VhcmNoLWluc3RhbnQtcHJvdmlkZXItbmFtZSI6Ikluc3RhbnRTZWFyY2hQcm92aWRlciIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXBvaW50IjoiUG9pbnQiLCJsYW5ndWFnZS1uYXRpdmUtb2ZmbGluZS1maWxlLXVwbG9hZC1lcnJvciI6IkVycm9yIHN0b3Jpbmcgb2ZmbGluZSBhdHRhY2htZW50LiBZb3UgbWF5IGJlIG91dCBvZiBvZmZsaW5lIHN0b3JhZ2Ugc3BhY2UuIiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtZm9jdXNlZCI6Ik1hcCBmb2N1c2VkLiIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLWNpcmNsZS1kZXNjIjoiRHJhZyBhIGNpcmNsZSBvbiB0byB0aGUgbWFwIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lcnJvci1lZGl0LW5vdC1mb3VuZCI6IlRoZSBvcmlnaW5hbCBlZGl0IGNvdWxkIG5vdCBiZSBmb3VuZC4iLCJsYW5ndWFnZS1uYXRpdmUtY2xvc2UtYXBwbGljYXRpb24tZGVzYyI6IkNsb3NlcyB0aGUgY3VycmVudCBhcHBsaWNhdGlvbiBhbmQgcmV0dXJucyB0byB0aGUgbWFpbiBtZW51LiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24taGlkZS1mZWF0dXJlLWxheWVyLW1vZGFsLW1lc3NhZ2UiOiJSZW1vdmVzIGEgbW9kYWwgbWVzc2FnZS4iLCJsYW5ndWFnZS1jb21tb24tc3luYy1jb21wbGV0ZSI6IlN5bmNocm9uaXphdGlvbiBjb21wbGV0ZSIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXBhbGV0dGUtc21hbGwtZWRpdCI6IkVkaXQiLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LWZvcm0tdW5uYW1lZC1jb250YWluZXItaGlkZGVuIjoiRm9ybSBncm91cCBoaWRkZW4uIiwibGFuZ3VhZ2UtZXhwb3J0LW1hcC1zZWxlY3QtaW1hZ2UtZm9ybWF0IjoiU2VsZWN0IEltYWdlIEZvcm1hdCIsImxhbmd1YWdlLXF1ZXJ5YnVpbGRlci1maWx0ZXItYWxyZWFkeS1hcHBsaWVkIjoiQSBmaWx0ZXIgaGFzIGFscmVhZHkgYmVlbiBkZWZpbmVkIGZvciB0aGlzIGxheWVyLiBVc2UgdGhlIGNsZWFyIGJ1dHRvbiBiZWxvdyB0byBjbGVhciB0aGUgZXhpc3RpbmcgZmlsdGVyIGFuZCBkZWZpbmUgYSBuZXcgZmlsdGVyLiIsImxhbmd1YWdlLW1lbnUtc2hvdy1yZXN1bHRzLXRhYmxlIjoiVGFibGUgVmlldyIsImxhbmd1YWdlLWNhcHR1cmUtZ2VvbWV0cnktZnJlZWhhbmQtcG9seWdvbiI6IkRyYXcgYSBmcmVlaGFuZCBzaGFwZSBvbiB0aGUgbWFwLiIsImxhbmd1YWdlLWNhcHR1cmUtZ2VvbWV0cnktcG9seWdvbi1rZXlib2FyZCI6IlVzZSBhcnJvd3MgdG8gbW92ZSB0aGUgcG9pbnQuIEhpdCBFTlRFUiB0byBwbG90IGFuZCBiZWdpbiBtb3ZpbmcgdGhlIG5leHQgcG9pbnQuIEhpdCBFTlRFUiB0d2ljZSB0byBmaW5pc2guIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWFkZC1nZW9tZXRyeS1jYXB0aW9uIjoiQWRkIEdlb21ldHJ5IiwibGFuZ3VhZ2UtZ2VvbG9jYXRlLWVycm9yLXVua25vd24iOiJVbmtub3duIEVycm9yIiwibGFuZ3VhZ2UtbGlzdC1yZXBvcnRzLWV4cGxhbmF0aW9uIjoiVGhlIGZvbGxvd2luZyByZXBvcnRzIGFyZSBhdmFpbGFibGUgZm9yIHRoZSBmZWF0dXJlcyB5b3Ugc2VsZWN0ZWQ6IiwibGFuZ3VhZ2Utc2VhcmNoLXJlZmluZSI6IlJlZmluZSBzZWFyY2giLCJsYW5ndWFnZS1nZW9sb2NhdGUtZXJyb3Itbm8tcmVzdWx0cyI6Ikdlb2xvY2F0aW9uIGNvbW1hbmQgcmV0dXJuZWQgbm8gcmVzdWx0cy4iLCJsYW5ndWFnZS1mZWF0dXJlLWNvb3JkaW5hdGVzLURETSI6IkRETSIsImxhbmd1YWdlLWJhc2VtYXAtc3dpdGNoZXItdmlldy1uYW1lIjoiU2VsZWN0IGEgQmFzZSBNYXAiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVkaXQtYWN0aW9uLXVwZGF0ZWQtcmVsYXRlZCI6IlVwZGF0ZWQgcmVsYXRlZCIsImxhbmd1YWdlLXRvb2xiYXItbmF2aWdhdGlvbi1uZXh0LWV4dGVudCI6Ik5leHQgRXh0ZW50IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1nZW9sb2NhdGUiOiJab29tcyB0byB0aGUgY3VycmVudCBsb2NhdGlvbiBvZiB0aGUgZGV2aWNlLiIsImxhbmd1YWdlLXRvb2xiYXItZ3JvdXAtbmF2aWdhdGlvbiI6Ik5hdmlnYXRpb24iLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC12aXNpYmxlLWZlYXR1cmVzIjoiVmlzaWJsZSBGZWF0dXJlczogezB9IiwibGFuZ3VhZ2UtbG9nLW5vLWVudHJpZXMiOiJObyBFbnRyaWVzIiwibGFuZ3VhZ2UtbmF0aXZlLWFkZC10by1mYXZvcml0ZXMtdmlld2VyLW5hbWUiOiJQbGVhc2UgZW50ZXIgYSBuYW1lIGZvciB0aGlzIGFwcGxpY2F0aW9uLiIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLWNsZWFyIjoiQ2xlYXIiLCJsYW5ndWFnZS1tZW51LWVudGVyLW9mZmxpbmUtZGVzYyI6IkdvIHRvIG9mZmxpbmUgbW9kZSBhbmQgdmlldyBjYWNoZWQgbWFwIGRhdGEuIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLXJlbGF0aW9uc2hpcHMtcmVxdWlyZS1hcmNnaXMtdmVyc2lvbiI6IkVkaXRpbmcgcmVsYXRpb25zaGlwcyByZXF1aXJlcyBBcmNHSVMgc2VydmVyIHZlcnNpb24gMTAuMSBvciBoaWdoZXIuIiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtY2xlYXItb2ZmbGluZS1kYXRhIjoiQ2xlYXIgT2ZmbGluZSBEYXRhIHswfSIsImxhbmd1YWdlLXRvb2xiYXItdGFza3MtZXhwb3J0LW1hcC10b29sdGlwIjoiU2F2ZSBhIG1hcCBpbWFnZSIsImxhbmd1YWdlLWZlYXR1cmUtZGV0YWlscy1uby1mZWF0dXJlIjoiVGhlcmUgYXJlIG5vIGZlYXR1cmVzIHNlbGVjdGVkLiIsImxhbmd1YWdlLW1lYXN1cmVtZW50LW1lYXN1cmUtZGlzdGFuY2UtdG9vbC10b29sdGlwIjoiRHJhdyBhIG11bHRpLXBhcnQgbGluZSB0byBtZWFzdXJlIGEgZGlzdGFuY2UiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctbm8tc3ltYm9sb2d5IjoiWW91IGNhbm5vdCBlZGl0IHRoZSBzeW1ib2xvZ3kgb2YgdGhpcyBmZWF0dXJlLiIsImxhbmd1YWdlLWNhcHR1cmUtZ2VvbWV0cnktcG9seWxpbmVfdG9vbHRpcCI6IlNlbGVjdCBieSBwb2x5bGluZSIsImxhbmd1YWdlLW1lYXN1cmVtZW50LXVuaXQta2lsb21ldGVyIjoiS2lsb21ldGVycyAoa20pIiwibGFuZ3VhZ2Utb2ZmbGluZS1wcm92aXNpb25pbmctc2VjdXJlLWxheWVycy1zYXZlZCI6IkRvbmUhIiwibGFuZ3VhZ2UtYXV0aC11c2VybmFtZS1lbXB0eSI6IlVzZXJuYW1lIGFuZCBwYXNzd29yZCBhcmUgcmVxdWlyZWQuIFBsZWFzZSB0cnkgYWdhaW4uIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWNyZWF0ZS1lZGl0LXNlbGVjdC1leGlzdGluZy1mZWF0dXJlIjoiU2VsZWN0IEV4aXN0aW5nIEZlYXR1cmUiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWNsZWFyLXN0b3JhZ2UtZm9yLWRvbWFpbiI6IkNsZWFycyBhbGwgb2ZmbGluZSBkYXRhIGZvciB0aGUgY3VycmVudCBkb21haW4uIFRoaXMgaW5jbHVkZXMgZGF0YSBmb3IgYWxsIGFwcGxpY2F0aW9ucyBsb2FkZWQgZnJvbSB0aGUgY3VycmVudCBkb21haW4uIiwibGFuZ3VhZ2UtY29tbW9uLXBhbiI6IlBhbiIsImxhbmd1YWdlLWNsdXN0ZXJpbmctcmFkaXVzIjoiUmFkaXVzIiwibGFuZ3VhZ2UtZXhwb3J0LW1hcC1jcmVhdGUtaW1hZ2UiOiJDcmVhdGUgSW1hZ2UiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXN5bmMtY29uZmlybS10aXRsZSI6IlN5bmMgV2l0aCBTZXJ2ZXIiLCJsYW5ndWFnZS1uYXRpdmUtYWRkLXRvLWZhdm9yaXRlcyI6IkFkZCBhcHBsaWNhdGlvbiB0byBmYXZvcml0ZXMiLCJsYW5ndWFnZS1leHBvcnQtbWFwLWluY2x1ZGUtZ2VvcmVmZXJlbmNlLWRhdGEiOiJJbmNsdWRlIEdlb3JlZmVyZW5jZSBEYXRhIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWNyZWF0ZS1lZGl0LXNlbGVjdC1nZW9tZXRyeS1kZXNjcmlwdGlvbiI6IkNob29zZSBtZXRob2QgdG8gZGVmaW5lIGZlYXR1cmUncyBnZW9tZXRyeSIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItb3BlcmF0aW9uLWNhbm5vdC1iZS11bmRvbmUiOiJXYXJuaW5nOiBUaGlzIG9wZXJhdGlvbiBjbGVhcnMgb3Igb3ZlcndyaXRlcyBhbGwgdGhlIG9mZmxpbmUgZGF0YSBhbmQgZWRpdHMgb24gdGhlIGxheWVyLiIsImxhbmd1YWdlLXRvb2xiYXItaWRlbnRpZnktcG9seWdvbiI6IlBvbHlnb24iLCJsYW5ndWFnZS1zaXRlLXNlcnZpY2UtbGF5ZXJzLWZhaWx1cmUtdmlldy10aXRsZSI6IkVycm9yIExvYWRpbmcgTWFwIFNlcnZpY2VzIiwibGFuZ3VhZ2UtdXNlci1vcGVubWVudSI6Ik9wZW4gVXNlciBJbmZvIE1lbnUiLCJsYW5ndWFnZS1nZW9sb2NhdGUtZmluZC1kZXNjIjoiRmluZCB5b3VyIGN1cnJlbnQgcG9zaXRpb24uIiwibGFuZ3VhZ2UtZmVhdHVyZS1kZXRhaWxzLWV4cGFuZGVkIjoiU2hvdyBFeHBhbmRlZCBWaWV3IiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtdW5pdC1zcW1pbGUiOiJNaWxlwrIgKG1pwrIpIiwibGFuZ3VhZ2UtcnVuLXJlcG9ydC1lcnJvci1tZXNzYWdlLW9mZmxpbmUiOiJSZXBvcnRzIGNhbm5vdCBiZSBydW4gd2hpbGUgaW4gb2ZmbGluZSBtb2RlLiIsImxhbmd1YWdlLXJlc3VsdHMtdG9nZ2xlLWxpc3QtdmlldyI6IlN3aXRjaCB0byBMaXN0IiwibGFuZ3VhZ2UtcXVlcnlidWlsZGVyLXNlYXJjaCI6IlNlYXJjaCIsImxhbmd1YWdlLW5hdGl2ZS1waG90by1mcm9tLWNhbWVyYSI6IkF0dGFjaCBwaG90byBmcm9tIHRoZSBjYW1lcmEiLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1tZWFzdXJlLWNpcmNsZS10b29sLXN0YXR1cyI6IkNsaWNrIG9yIHRhcCwgdGhlbiBkcmFnIHRvIGRyYXcgYSBjaXJjbGUgYW5kIGZpbmQgYXJlYS4iLCJsYW5ndWFnZS1vZmZsaW5lLWVycm9yLWNsZWFyaW5nLWRhdGEiOiJFcnJvciBjbGVhcmluZyBvZmZsaW5lIGRhdGE6IHswfSIsImxhbmd1YWdlLW5hdGl2ZS1hdHRhY2gtcGhvdG8iOiJBdHRhY2ggYSBwaG90byBmcm9tIHRoZSBjYW1lcmEgb3IgZ2FsbGVyeSIsImxhbmd1YWdlLW1lYXN1cmVtZW50LWFyZWEtbGFiZWwiOiJBcmVhIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtcG9seWxpbmUtZmluYWwtbWFya3VwLWxhYmVsIjoiVG90YWw6IHswfSB7MX0iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXJlY2VudGVyLW1hcC1vbi1uZXh0LW1hcC1yZXNpemUiOiJSZWNlbnRlcnMgdGhlIG1hcCB0byBpdHMgZXhpc3RpbmcgcG9zaXRpb24gdGhlIG5leHQgdGltZSB0aGUgbWFwIGlzIHJlc2l6ZWQuIiwibGFuZ3VhZ2Utb3Blbi1maWxlIjoiT3BlbiBGaWxlIiwibGFuZ3VhZ2UtcXVlcnlidWlsZGVyLWNsZWFyIjoiQ2xlYXIiLCJsYW5ndWFnZS1xdWVyeWJ1aWxkZXItb3BlcmF0b3ItZ3JlYXRlci10aGFuIjoiPiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tY3JlYXRlLWF0dGFjaG1lbnQiOiJDcmVhdGVzIGEgZmVhdHVyZSBhdHRhY2htZW50LiIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLWhvbWUtcGFuZWwiOiJIb21lIFBhbmVsIHswfSIsImxhbmd1YWdlLXRvb2xiYXItYnVmZmVyaW5nLWFsdC1kaXNhYmxlIjoiRGlzYWJsZSBidWZmZXJpbmcgZm9yIGFjdGl2ZSB0b29sIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtY2xlYXItYWxsLXByb21wdC10aXRsZSI6IkNsZWFyIEFsbCBNZWFzdXJlbWVudHM/IiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLXJlbGF0ZWQta2V5LWZpZWxkLW1pc3NpbmciOiJ7MH0gaXMgYSBrZXkgZmllbGQgYW5kIHJlcXVpcmVzIGEgdmFsdWUuIFBsZWFzZSBhc3NpZ24gYSB2YWx1ZSB0byB0aGUgZmVhdHVyZSBhbmQgc2F2ZSBpdC4iLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1tZWFzdXJlLXJlY3RhbmdsZS10b29sLXRvb2x0aXAiOiJDYWxjdWxhdGUgYXJlYSBmb3IgYSByZWN0YW5nbGUiLCJsYW5ndWFnZS10b29sYmFyLW11bHRpLXRvb2wiOiJNdWx0aS10b29sIiwibGFuZ3VhZ2UtbWVudS1wb3dlcmVkLWJ5LWdlb2NvcnRleCI6IlBvd2VyZWQgYnkgR2VvY29ydGV4IiwibGFuZ3VhZ2UtYnVmZmVyLWVycm9yLWlucHV0LXZhbGlkYXRpb24iOiJDb3VsZCBub3QgcmV0cmlldmUgY2hpbGQgdmlldyBtb2RlbCBmb3IgdmlldyB3aXRoIGlkIHswfSBmb3IgaW5wdXQgdmFsaWRhdGlvbi4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWRpcmVjdC1kZXBlbmRlbnRzIjoiRGlyZWN0IGRlcGVuZGVudHM6IiwibGFuZ3VhZ2UtaGVhdC1tYXBzLWludGVuc2l0eS1zbGlkZXItbWluLWxhYmVsIjoiMCIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tY3JlYXRlLWZlYXR1cmUiOiJDcmVhdGVzIGEgbmV3IGZlYXR1cmUuIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci12aWV3LWNhY2hlZC1leHRlbnQiOiJWaWV3IEV4dGVudCIsImxhbmd1YWdlLXByaW50aW5nLXByaW50LXJlcXVlc3Qtc3RhcnQtZGVzY3JpcHRpb24iOiJZb3VyIHByaW50IGpvYiBoYXMgYmVndW4uIiwibGFuZ3VhZ2UtcXVlcnlidWlsZGVyLW9wZXJhdG9yLW5vdC1lcXVhbHMiOiIhPSIsImxhbmd1YWdlLW1lYXN1cmVtZW50LXVuaXQtc3FtZXRlci1zaG9ydCI6Im3CsiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tY3JlYXRlLXJlbGF0ZWQtcmVjb3JkIjoiQ3JlYXRlcyBhIHJlbGF0ZWQgdGFibGUgcmVjb3JkLiIsImxhbmd1YWdlLXRvb2xiYXItZWRpdGluZy1lZGl0IjoiRWRpdCIsImxhbmd1YWdlLW1lYXN1cmVtZW50LW1lYXN1cmUtcmVjdGFuZ2xlLXRvb2wtbmFtZSI6IlJlY3RhbmdsZSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tcHVsc2Utc3RhdHVzIjoiUmVzZXRzIHRoZSB0aW1lciBvZiB0aGUgc3RhdHVzIHZpZXdNb2RlbC4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXN5bmMtZW5kLWNhY2hlLWVycm9yIjoiRWRpdHMgd2VyZSBzdWNjZXNzZnVsbHkgc2VudCB0byB0aGUgc2VydmVyIGJ1dCB0aGUgb2ZmbGluZSBjYWNoZSBjb3VsZCBOT1QgYmUgdXBkYXRlZC4gUGxlYXNlIGNoZWNrIHlvdXIgY29ubmVjdGlvbiBhbmQgdHJ5IGFnYWluIGxhdGVyLiIsImxhbmd1YWdlLW1lbnUtc3dpdGNoLXRvLWxlZ2VuZCI6IlNob3cgTGVnZW5kIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtcGFsZXR0ZS1zbWFsbC1kZWxldGUiOiJEZWxldGUiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXRhcC10by1lZGl0LWZlYXR1cmUiOiJUYXAgdG8gZWRpdCBhIGZlYXR1cmUuIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1zaXplIjoiU2l6ZSIsImxhbmd1YWdlLXRvb2xiYXItZ3JvdXAtaG9tZSI6IkJhc2ljIFRvb2xzIiwibGFuZ3VhZ2UtdG9vbGJhci1hbmFseXNpcy1sb2NhdGlvbi1pbmZvIjoiTG9jYXRpb24gSW5mbyIsImxhbmd1YWdlLW1lYXN1cmVtZW50LWRyYXdtb2RlLW11bHRpLXBvaW50IjoiTXVsdGlwb2ludCIsImxhbmd1YWdlLWNvbW1vbi1lZGl0aW5nIjoiRWRpdGluZyIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tZGVzdHJveS12aWV3IjoiRGVzdHJveXMgYSB2aWV3LCB3aXBpbmcgb3V0IGl0cyBiaW5kaW5nIGFuZCBET00gc3Vic3RydWN0dXJlcy4iLCJsYW5ndWFnZS1jb21tb24tb2siOiJPSyIsImxhbmd1YWdlLW91dHB1dC1mb3JtYXQiOiJPdXRwdXQgRm9ybWF0IiwibGFuZ3VhZ2UtY2x1c3RlcmluZy1uYW1lIjoiRmVhdHVyZSBDbHVzdGVyaW5nIiwibGFuZ3VhZ2UtYnVmZmVyLW9wdGlvbnMtdW5pdHMtbGFiZWwiOiJVbml0cyIsImxhbmd1YWdlLW1lYXN1cmVtZW50LW1lYXN1cmUtcG9seWdvbi10b29sLXRvb2x0aXAiOiJDYWxjdWxhdGUgYXJlYSBmb3IgYSBwb2x5Z29uIiwibGFuZ3VhZ2UtbWVudS1ydW4tYS13b3JrZmxvdyI6IlBlcmZvcm0gYSB0YXNrIiwibGFuZ3VhZ2UtdG9vbGJhci1ub3QtYXZhaWxhYmxlIjoiVG9vbGJhciBpcyBub3QgYXZhaWxhYmxlIiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtdGl0bGUiOiJBY2Nlc3NpYmxlIEdlb2NvcnRleCIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXIteW91LWFyZS1vZmZsaW5lIjoiWW91IGFyZSBpbiBvZmZsaW5lIG1vZGUuIiwibGFuZ3VhZ2UtcXVlcnlidWlsZGVyLWNvZGVkLXZhbHVlIjoiU2VsZWN0IGNvZGVkIHZhbHVlIiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtY2hhbmdlZC1pbmZvcm1hdGlvbiI6Ik1hcCBDaGFuZ2VkLiB7MH0iLCJsYW5ndWFnZS1uYXRpdmUtZmlsZS1mcm9tLWJyb3dzZXIiOiJBdHRhY2ggZmlsZSBvciBwaG90byB0byBmZWF0dXJlLiIsImxhbmd1YWdlLW9mZmxpbmUtdXBkYXRlLWRvd25sb2FkZWQtcmVzb3VyY2VzIjoiQW4gdXBkYXRlZCBvZmZsaW5lIGJ1bmRsZSBpcyBhdmFpbGFibGUuIFJlLXByb3Zpc2lvbmluZyB2aWV3ZXIuLi4iLCJsYW5ndWFnZS10YWtlLWFwcC1vZmZsaW5lLWRlc2MiOiJHbyB0byBvZmZsaW5lIG1vZGUuIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtdGV4dC10b29sdGlwIjoiQWRkIHlvdXIgb3duIHRleHQgdG8gdGhlIG1hcCIsImxhbmd1YWdlLWV4dHJhY3QtZGF0YS1kZXNjcmlwdGlvbiI6IkV4dHJhY3QgZmVhdHVyZSBkYXRhIGZyb20gdGhlIG1hcC4iLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC1sZWdlbmQiOiJMZWdlbmQgezB9IiwibGFuZ3VhZ2Utc2l0ZS1zaWduaW5nLWluIjoiVGhlIHZpZXdlciBtYXkgbmVlZCB0byBsb2cgaW4gdG8gY29udGludWUuICBJZiBhbm90aGVyIGJyb3dzZXIgd2luZG93IG9wZW5lZCwgcGxlYXNlIHVzZSB0aGF0IHdpbmRvdyB0byBjb21wbGV0ZSB0aGUgbG9naW4gcHJvY2Vzcy4iLCJsYW5ndWFnZS1jb21tb24tdmFsaWRhdGlvbi1zeW1ib2wiOiIqIiwibGFuZ3VhZ2UtdG9vbGJhci10YXNrcy1leHBvcnQtbWFwIjoiRXhwb3J0IiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1jYWNoZWQtb24iOiJDYWNoZWQgT24iLCJsYW5ndWFnZS1mZWF0dXJlLWh5cGVybGlua3MiOiJIeXBlcmxpbmtzIiwibGFuZ3VhZ2UtcnVuLXJlcG9ydC1wcm9ncmVzcy1tZXNzYWdlLWFzeW5jIjoiUGxlYXNlIHdhaXQgd2hpbGUgeW91ciByZXBvcnQgcGFnZSBpcyBnZW5lcmF0aW5nLiIsImxhbmd1YWdlLXNoYXJlLXNoYXJlLW9uLXByb21wdC1jb250ZW50IjoiU2hhcmUgdGhlIGxpbmsgdG8gdGhpcyBhcHBsaWNhdGlvbiBvbiB7MH0/IiwibGFuZ3VhZ2UtbWFya3VwLWRlbGV0ZS1tdWx0aXBsZS1wcm9tcHQiOiJNdWx0aXBsZSBkcmF3aW5ncyBleGlzdCBhdCB0aGUgbG9jYXRpb24geW91IGp1c3Qgc3BlY2lmaWVkLCBhbmQgYWxsIHdpbGwgYmUgcGVybWFuZW50bHkgZXJhc2VkIGlmIHlvdSBwcm9jZWVkLiBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIGFsbCB0aGVzZSBpdGVtcz8iLCJsYW5ndWFnZS1pcy1wcmludGluZyI6IlByZXBhcmluZyBmaWxlLiBQbGVhc2Ugd2FpdC4uLiIsImxhbmd1YWdlLXF1ZXJ5YnVpbGRlci1yZW1vdmUtcXVlcnktY29uZGl0aW9uIjoiUmVtb3ZlIHF1ZXJ5IGNvbmRpdGlvbiIsImxhbmd1YWdlLW1lbnUtbWFwLWxheWVycy1kZXNjIjoiVHVybiBsYXllcnMgb24gYW5kIG9mZiwgcGVyZm9ybSBsYXllciBhY3Rpb25zLCBhbmQgdmlldyB0aGUgbGVnZW5kLiIsImxhbmd1YWdlLWZlYXR1cmUtYWN0aW9ucyI6IkFjdGlvbnMiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXJlbW92ZS1mZWF0dXJlLXNldC1jb2xsZWN0aW9uIjoiUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGNvbGxlY3Rpb24gZnJvbSB0aGUgZmVhdHVyZSBzZXQgbWFuYWdlci4iLCJsYW5ndWFnZS1ib29rbWFya3MtZW50ZXItbmFtZSI6IkJvb2ttYXJrIE5hbWU6IiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtbWVhc3VyZS1wb2x5Z29uLXRvb2wtbmFtZSI6IlBvbHlnb24iLCJsYW5ndWFnZS1xdWVyeWJ1aWxkZXItZmlsdGVyIjoiRmlsdGVyIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lZGl0LWFjdGlvbi1mb3JtYXQiOiJ7MH0gZmVhdHVyZSB7MX17Mn0iLCJsYW5ndWFnZS10b29sYmFyLXRvZ2dsZS1idWZmZXItb24tbmFtZSI6IkJ1ZmZlciBPcHRpb25zIiwibGFuZ3VhZ2UtZ2VvbG9jYXRlLWVycm9yLXBlcm1pc3Npb24iOiJJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnMgZm9yIGdlb2xvY2F0aW9uLiIsImxhbmd1YWdlLW1lbnUtYWNjZXNzaWJpbGl0eS1wYW5lbCI6IlZpZXcgdGhlIGFjY2Vzc2liaWxpdHkgcGFuZWwiLCJsYW5ndWFnZS10b29sYmFyLWdyb3VwLWRyYXciOiJEcmF3IiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1zeW5jLXNldHRpbmdzIjoiRmVhdHVyZSBMYXllciBTeW5jIFNldHRpbmdzIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lZGl0LWFjdGlvbi11cGRhdGVkLWF0dGFjaG1lbnQiOiJVcGRhdGVkIGF0dGFjaG1lbnQiLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LXBvaW50IjoiUG9pbnQiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVkaXRzLWFuZC1zeW5jIjoiU3luYyBPZmZsaW5lIERhdGEiLCJsYW5ndWFnZS1tYXAtc3VyZmFjZSI6Ik1hcCBTdXJmYWNlIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtZHJhd2luZy1lZGl0LXRvb2xzIjoiRWRpdCIsImxhbmd1YWdlLW1lYXN1cmVtZW50LWluY29ycmVjdC1kcmF3LW1vZGUiOiJUaGUgbWVhc3VyZW1lbnQgdG9vbCBvbmx5IHN1cHBvcnRzIHRoZSBQT0xZTElORSBhbmQgUE9MWUdPTiBkcmF3IG1vZGVzLiBQbGVhc2UgdmVyaWZ5IGNvbmZpZ3VyYXRpb24gc2V0dGluZ3MiLCJsYW5ndWFnZS10YWtlLWFwcC1vbmxpbmUiOiJHbyBPbmxpbmUiLCJsYW5ndWFnZS1oZWF0LW1hcHMtaW50ZW5zaXR5LXNsaWRlci10b29sdGlwIjoiQWRqdXN0IGhlYXQgbWFwIGludGVuc2l0eSAoaW4gcGl4ZWxzKS4iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1jaGFuZ2Utc3R5bGVzLWRpYWxvZy10aXRsZSI6IlNlbGVjdCBEZXNpcmVkIFN0eWxpbmciLCJsYW5ndWFnZS12aXN1YWxpemF0aW9uLXNlbGVjdCI6IlNlbGVjdCBhIHZpc3VhbGl6YXRpb24gZm9yIHlvdXIgbGF5ZXI6IiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWRzay1wb2ludC10b29sIjoiQ2xpY2sgb3IgdGFwIG9uIHRoZSBtYXAgdG8gYWRkIHRoZSBmZWF0dXJlLiIsImxhbmd1YWdlLW1lYXN1cmVtZW50LW1lYXN1cmUtYXJlYS10b29sLXRvb2x0aXAiOiJDYWxjdWxhdGUgYXJlYSBmb3IgYSBkZWZpbmVkIHNoYXBlIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtZnJlZWhhbmQtcG9seWdvbiI6IkZyZWVoYW5kIFNoYXBlIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1vcGVuLWRhdGEtZnJhbWUiOiJPcGVucyB0aGUgRGF0YVJlZ2lvbiwgaWYgcHJlc2VudCBpbiB0aGUgY3VycmVudCBzaGVsbC4iLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC1jb21wYWN0LXRvb2xiYXIiOiJDb21wYWN0IFRvb2xiYXIgezB9IiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1jYW5ub3Qtc3luYy1lZGl0cy1vZmZsaW5lIjoiWW91IGNhbm5vdCBzeW5jIGRhdGEgd2hpbGUgb2ZmbGluZS4iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1jaGFuZ2UtbWFya3VwLXN0eWxlLXRvb2x0aXAiOiJDaG9vc2Ugc3R5bGluZyBmb3IgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBkcmF3aW5nIHRvb2wiLCJsYW5ndWFnZS1jb21tb24td2VsY29tZSI6IkhvbWUiLCJsYW5ndWFnZS13b3JrZmxvdy13b3JrZmxvd3MiOiJXb3JrZmxvd3MiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXpvb20tdG8taW5pdGlhbC1leHRlbnQiOiJab29tcyB0byB0aGUgaW5pdGlhbCBleHRlbnQgb2YgdGhlIGN1cnJlbnQgU2l0ZS4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWNsZWFyLWFjdGl2ZS10b29sIjoiQ2xlYXJzIHRoZSBhY3RpdmUgdG9vbC4iLCJsYW5ndWFnZS1vZmZsaW5lLXByb3Zpc2lvbmluZy1zZWN1cmUtc2l0ZSI6IlNhdmluZyB0aGUgc2VjdXJlZCBzaXRlLi4uIiwibGFuZ3VhZ2Utd29ya2Zsb3ctc2l0ZS13b3JrZmxvd3MiOiJTaXRlIFdvcmtmbG93cyIsImxhbmd1YWdlLWlkZW50aWZ5LXBvbHlnb24tdG9vbCI6IkNsaWNrIG9yIHRhcCBvbmNlIHRvIGFkZCBwb2ludHMsIHR3aWNlIHRvIGZpbmlzaC4iLCJsYW5ndWFnZS1tZW51LWJvb2ttYXJrLWFkZCI6IkJvb2ttYXJrIGN1cnJlbnQgbWFwIGV4dGVudCIsImxhbmd1YWdlLWRzay1tYXAtY2VudGVyIjoiQ2xpY2sgdG8gY2VudGVyIHRoZSBtYXAgYXQgdGhhdCBwb2ludC4iLCJsYW5ndWFnZS1tZW51LXpvb20taW4iOiJab29tIGluIiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtY29vcmRpbmF0ZXMtbm9ydGgiOiJ7MH0gwrAgTm9ydGgiLCJsYW5ndWFnZS1kc2staWRlbnRpZnktcG9seWxpbmUtdG9vbCI6IkNsaWNrIG9yIHRhcCBvbmNlIHRvIGFkZCBwb2ludHMsIHR3aWNlIHRvIGZpbmlzaC4iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctbWJsLWZyZWVoYW5kLXBvbHlsaW5lLXRvb2wiOiJEcmFnIG9uIHRoZSBtYXAgdG8gZHJhdyBhIGZyZWVoYW5kIGxpbmUuIiwibGFuZ3VhZ2UtYnVmZmVyLWVycm9yLWlkZW50aWZ5LWJ1ZmZlcmVkLWZlYXR1cmUtc2V0LWNvbGxlY3Rpb24iOiJDb3VsZCBub3QgZXhlY3V0ZSBJZGVudGlmeUJ1ZmZlcmVkRmVhdHVyZVNldENvbGxlY3Rpb24gb3BlcmF0aW9uLiBGZWF0dXJlIFNldCBDb2xsZWN0aW9uIG5vdCBmb3VuZC4iLCJsYW5ndWFnZS1tZW51LXpvb20tdG8tbGF5ZXIiOiJab29tIHRvIGZ1bGwgZXh0ZW50IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi16b29tLXRvLWVzcmktZmVhdHVyZS1zZXQiOiJab29tcyB0byB0aGUgZXh0ZW50IG9mIGFsbCB0aGUgZmVhdHVyZXMgaW4gdGhlIGZlYXR1cmUgc2V0LiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tY2xvc2UtZGF0YS1mcmFtZSI6IkNsb3NlcyB0aGUgRGF0YVJlZ2lvbiwgaWYgaXQgaXMgcHJlc2VudCBpbiB0aGUgY3VycmVudCBzaGVsbC4iLCJsYW5ndWFnZS1tZW51LXJ1bi1yZXBvcnQtZGVzYyI6IlJ1biBhIFJlcG9ydCBvbiB0aGUgU2VsZWN0ZWQgUmVzdWx0cyIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItd2lsbC1jYWNoZSI6IlRoaXMgbGF5ZXIgd2lsbCBiZSBjYWNoZWQgb24gc3luYy4iLCJsYW5ndWFnZS1uYXRpdmUtZmlsZS11cGxvYWQtZmFpbGVkIjoiRmlsZSBhdHRhY2htZW50IGZhaWxlZC4gIiwibGFuZ3VhZ2UtaWRlbnRpZnktcmVzdWx0cy1oZWFkZXIiOiJJZGVudGlmeSBSZXN1bHRzIiwibGFuZ3VhZ2Utc2VhcmNoLWluc3RhbnQtcHJvdmlkZXItc2VhcmNoLXN0YXJ0ZWQiOiJTdGFydGluZyBpbnN0YW50IHNlYXJjaC4iLCJsYW5ndWFnZS1sYXllcmxpc3Qtb3BhY2l0eSI6IkFkanVzdCBsYXllciBvcGFjaXR5LiIsImxhbmd1YWdlLXRvb2xiYXItZWRpdGluZy1tYW5hZ2Utb2ZmbGluZS1kYXRhLXRvb2x0aXAiOiJTZWxlY3QsIHN5bmMsIGFuZCBjbGVhciBvZmZsaW5lIGRhdGEiLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1kcmF3bW9kZS1mcmVlaGFuZC1wb2x5Z29uIjoiRnJlZWhhbmQgU2hhcGUiLCJsYW5ndWFnZS1xdWVyeWJ1aWxkZXItbm8tdmFsaWQtbGF5ZXJzIjoiVGhlIGFwcGxpY2F0aW9uIGRvZXMgbm90IGNvbnRhaW4gYW55IGZpbHRlcmFibGUgbGF5ZXJzLiIsImxhbmd1YWdlLWNvbW1vbi1jYW5jZWwiOiJDYW5jZWwiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXNldC1hY3RpdmUtaGlnaGxpZ2h0LWxheWVyIjoiU2V0cyB0aGUgbGF5ZXIgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUgYXMgYWN0aXZlLCBpZiB0aGVyZSBpcyBvbmUuIiwibGFuZ3VhZ2UtbWVudS16b29tLXRvLXZpc2libGUtc2NhbGUtZGVzYyI6Ilpvb20gdGhlIG1hcCB0byBhIHNjYWxlIHdoZXJlIHRoZSBsYXllciBpcyB2aXNpYmxlLiIsImxhbmd1YWdlLWZlYXR1cmUtZGV0YWlscy1jb21wYWN0IjoiU2hvdyBDb21wYWN0IFZpZXciLCJsYW5ndWFnZS1tYXJrdXAtY2xlYXItYWxsLXByb21wdC10aXRsZSI6IkNsZWFyIEFsbCIsImxhbmd1YWdlLWRvd25sb2FkLWJ1bmRsZS1kZXNjIjoiRG93bmxvYWQgdGhlIHJlc291cmNlcyBuZWVkZWQgdG8gb3BlcmF0ZSBvZmZsaW5lLiIsImxhbmd1YWdlLXF1ZXJ5YnVpbGRlci1xdWVyeS1sYXllciI6IkxheWVyOiIsImxhbmd1YWdlLWF1dGgtdXNlcm5hbWUiOiJVc2VybmFtZToiLCJsYW5ndWFnZS10b29sYmFyLWZpbmQtZGF0YSI6IkZpbmQgRGF0YSIsImxhbmd1YWdlLXJ1bi1yZXBvcnQtcHJvZ3Jlc3MtaGVhZGluZy1hc3luYyI6IkdlbmVyYXRpbmcgUmVwb3J0IFBhZ2UuLi4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLW51bWJlci1vZi1mZWF0dXJlcyI6IkNvdW50IiwibGFuZ3VhZ2UtY29tbW9uLXNob3ctZGV0YWlscy1kZXNjcmlwdGlvbiI6IlNlZSBhZGRpdGlvbmFsIGRldGFpbHMgZm9yIHRoaXMgZmVhdHVyZS4iLCJsYW5ndWFnZS1xdWVyeWJ1aWxkZXItYWRkLWNvbmRpdGlvbiI6IkFkZCBBbm90aGVyIENvbmRpdGlvbiIsImxhbmd1YWdlLXJ1bi1yZXBvcnQtdGl0bGUiOiJSZXBvcnQiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWFsbG93LWhpZGUtZmVhdHVyZS1sYXllci1tb2RhbC1tZXNzYWdlIjoiU2hvdyB0aGUgY2xvc2UgYnV0dG9uIG9uIHRoZSBNb2RhbE1lc3NhZ2VWaWV3IGFsbG93aW5nIHRoZSB1c2VyIHRvIGNsb3NlIGl0LiIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLWRlbGV0ZS1kZXNjIjoiQ2xpY2sgb3IgdGFwIHRvIGltbWVkaWF0ZWx5IGFuZCBwZXJtYW5lbnRseSBkZWxldGUgYSBkcmF3aW5nLiBUaGlzIGNhbm5vdCBiZSB1bmRvbmUuIiwibGFuZ3VhZ2UtdG9vbGJhci1lZGl0aW5nLWNyZWF0ZS1uZXctZmVhdHVyZS1nZW9sb2NhdGlvbi10b29sdGlwIjoiQ3JlYXRlIGEgcG9pbnQtYmFzZWQgZmVhdHVyZSB1c2luZyBnZW9sb2NhdGlvbi4iLCJsYW5ndWFnZS1leHRyYWN0LWRhdGEiOiJFeHRyYWN0IGRhdGEiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWNsZWFyLW1hcmt1cCI6IlByb21wdHMgdGhlIHVzZXIgZm9yIGNvbmZpcm1hdGlvbiwgYW5kIGlmIGFwcHJvdmVkLCBjbGVhcnMgYWxsIG9mIHRoZSBtYXJrdXAgZnJvbSB0aGUgbWFya3VwIGxheWVyLiIsImxhbmd1YWdlLXJ1bi1yZXBvcnQtZXJyb3ItbWVzc2FnZS1vdXRwdXQtZm9ybWF0LXVuYXZhaWxhYmxlIjoiQ291bGQgbm90IHJ1biByZXBvcnQ6IHNlbGVjdGVkIG91dHB1dCBmb3JtYXQgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIHJlcG9ydC4iLCJsYW5ndWFnZS1tZW51LXNob3ctbG9nLWRlc2MiOiJEaXNwbGF5IHRoZSB2aWV3ZXIncyBsb2csIGluY2x1ZGluZyBkaWFnbm9zdGljIGVycm9ycyBhbmQgdGhlIHZlcnNpb24gbnVtYmVyLiIsImxhbmd1YWdlLW1ibC1tYXAtY2VudGVyIjoiVGFwIHRvIGNlbnRlciB0aGUgbWFwIGF0IHRoYXQgcG9pbnQuIiwibGFuZ3VhZ2UtbWVudS1jbGVhci1vZmZsaW5lLWRhdGEtZGVzYyI6IkNsZWFyIGFsbCBvZmZsaW5lIGRhdGEgZm9yIHRoaXMgdmlld2VyIGFuZC9vciByZWxhdGVkIGFwcGxpY2F0aW9ucy4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVkaXQtZ2VvbWV0cnktY2FwdGlvbiI6IkVkaXQgR2VvbWV0cnkiLCJsYW5ndWFnZS1zZWFyY2gtYmluZy1sb2NhbGl0eSI6IkxvY2FsaXR5IiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1jYWNoaW5nLWRhdGEiOiJDYWNoaW5nIGRhdGEuLi4iLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC1jaGFydGluZyI6IkNoYXJ0aW5nIHswfSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tZGVsZXRlLWF0dGFjaG1lbnQiOiJEZWxldGVzIGEgZmVhdHVyZSBhdHRhY2htZW50LiIsImxhbmd1YWdlLWxvZy1hcHAtbG9nIjoiQXBwbGljYXRpb24gTG9nIiwibGFuZ3VhZ2UtZmVhdHVyZS1hdHRhY2htZW50cyI6IkF0dGFjaG1lbnRzIiwibGFuZ3VhZ2UtbWVudS1ob21lLXBhbmVsLWRlc2MiOiJWaWV3IGluZm9ybWF0aW9uIGFib3V0IHRoaXMgYXBwbGljYXRpb24uIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtbWVhc3VyZS1saW5lLXRvb2wtbmFtZSI6IkxpbmUiLCJsYW5ndWFnZS1jb21tb24tZmVhdHVyZS1lZGl0aW5nLWRlc2MiOiJFZGl0IHRoZSBhdHRyaWJ1dGVzIG9mIHRoZSBmZWF0dXJlIGFuZCBzYXZlIHRoZW0uIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtdW5pdC1zcWtpbG9tZXRlciI6IktpbG9tZXRlcsKyIChrbcKyKSIsImxhbmd1YWdlLWhlYXQtbWFwcy1pbnRlbnNpdHkiOiJJbnRlbnNpdHkiLCJsYW5ndWFnZS1tZWFzdXJlbWVudC11bml0LWFjcmUiOiJBY3JlcyAoYWMpIiwibGFuZ3VhZ2UtbWVudS16b29tLWluaXRpYWwtZXh0ZW50IjoiUmV0dXJuIHRvIGluaXRpYWwgbWFwIGV4dGVudCIsImxhbmd1YWdlLWRzay1pZGVudGlmeS1wb2ludC10b29sIjoiQ2xpY2sgdG8gZmluZCBmZWF0dXJlcyBvbiB0aGUgbWFwLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tZGVsZXRlLWZyb20tZWRpdC1sb2ciOiJSZW1vdmVzIHRoZSBnaXZlbiBlbnRyeSBmcm9tIHRoZSBlZGl0IGxvZywgdGhlbiBzZXRzIHRoZSBlZGl0IGxvZy4iLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1kcmF3bW9kZS1saW5lIjoiTGluZSIsImxhbmd1YWdlLXNlYXJjaC1iaW5nLWFkbWluLWRpc3RyaWN0IjoiQWRtaW5pc3RyYXRpdmUgRGlzdHJpY3QiLCJsYW5ndWFnZS10b29sYmFyLWdyb3VwLW9mZmxpbmUtbWFuYWdlbWVudCI6Ik9mZmxpbmUgTWFuYWdlbWVudCIsImxhbmd1YWdlLW1lbnUtbWFuYWdlLXN5bmMtc2V0dGluZ3MtZGVzYyI6Ik1hbmFnZSB3aGF0IGRhdGEgYXJlIGNvcGllZCB0byBteSBkZXZpY2Ugb24gc3luYy4iLCJsYW5ndWFnZS1jb21tb24tZmVhdHVyZS1zeW5jLXNldHRpbmdzIjoiTWFuYWdlIFN5bmMgU2V0dGluZ3MiLCJsYW5ndWFnZS1vZmZsaW5lLXZpZXdlci1wcm92aXNpb24tb25saW5lLW9ubHkiOiJZb3UgbXVzdCBiZSBvbmxpbmUgdG8gZG93bmxvYWQgcmVzb3VyY2VzIHRvIHVzZSBvZmZsaW5lLiIsImxhbmd1YWdlLWJ1ZmZlci1vcHRpb25zLWRpc3RhbmNlLXRpdGxlIjoiQnVmZmVyIERpc3RhbmNlIiwibGFuZ3VhZ2UtbGF5ZXJsaXN0LXRvZ2dsZSI6IlRvZ2dsZSBsYXllciB2aXNpYmlsaXR5IiwibGFuZ3VhZ2UtY29tbW9uLWZlYXR1cmUtc3luYy1zZXR0aW5ncy1kZXNjIjoiRGlzcGxheXMgYSBsaXN0IG9mIGZlYXR1cmUgbGF5ZXJzIHRvIGNob29zZSBmcm9tLiIsImxhbmd1YWdlLWJ1ZmZlci11bml0LW5hdXRpY2FsbWlsZS1kaXNwbGF5LW5hbWUiOiJOYXV0aWNhbCBNaWxlcyAoTk0pIiwibGFuZ3VhZ2UtYm9va21hcmtzLWp1bXAiOiJKdW1wIHRvIGEgYm9va21hcmsuLi4iLCJsYW5ndWFnZS1idWZmZXItaW52YWxpZC11bml0LXdhcm5pbmciOiJVbnN1cHBvcnRlZCBidWZmZXIgdW5pdCAtIHswfS4gUGxlYXNlIGNoZWNrIHlvdXIgY29uZmlndXJhdGlvbi4iLCJsYW5ndWFnZS1iYXNlbWFwLXN3aXRjaGVyLW5vLWJhc2VtYXBzIjoiTm8gQmFzZSBNYXBzIiwibGFuZ3VhZ2UtZG93bmxvYWQtYnVuZGxlIjoiRG93bmxvYWQgZm9yIG9mZmxpbmUgdXNlIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtcG9seWdvbi1kZXNjLWtleWJvYXJkIjoiVXNlIGFycm93cyB0byBtb3ZlIHRoZSBwb2ludC4gSGl0IEVOVEVSIHRvIHBsb3QgYW5kIGJlZ2luIG1vdmluZyB0aGUgbmV4dCBwb2ludC4gSGl0IEVOVEVSIHR3aWNlIHRvIGZpbmlzaC4iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1yZWN0YW5nbGUtZGVzYyI6IkNsaWNrIGFuZCBkcmFnIHRvIGRyYXcgYSByZWN0YW5nbGUgb24gdGhlIG1hcC4iLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1yZXN1bHRzLWZpZWxkLXgiOiJYIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtcmVzdWx0cy1maWVsZC15IjoiWSIsImxhbmd1YWdlLXF1ZXJ5YnVpbGRlci1hbnktdmFsdWUiOiIoYW55IHZhbHVlKSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tZmVhdHVyZS1sYXllci1tb2R1bGUtc3RhcnQtc3luYyI6IlN0YXJ0cyBzeW5jaHJvbml6ZXMgdGhlIGZlYXR1cmUgZWRpdHMgdG8gdGhlIHNlcnZlci4iLCJsYW5ndWFnZS1zZWFyY2gtZXJyb3IiOiJTZWFyY2ggZXJyb3I6IHswfSIsImxhbmd1YWdlLWNvbW1vbi1mZWF0dXJlLWVkaXRpbmciOiJGZWF0dXJlIEF0dHJpYnV0ZXMiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVkaXQtZmVhdHVyZSI6IkVkaXQgRmVhdHVyZXMiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLW5vLWRhdGEtd2lsbC1iZS1jYWNoZWQtZGVzYyI6IldoZW4geW91IHN5bmMsIG5vIGRhdGEgd2lsbCBiZSBzdG9yZWQgb24gdGhlIGRldmljZS4gWW91IGNhbiBkZWZpbmUgdGhlIGRhdGEgeW91IHdhbnQgdG8gY2FjaGUgaW4gdGhlIFN5bmMgU2V0dGluZ3MgcGFuZWwuIiwibGFuZ3VhZ2UtbW9udGhzLTIiOiJNYXJjaCIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLWxvYWRpbmctY2hhbmdlcyI6IkxvYWRpbmcgbWFwIGNoYW5nZXMuLi4iLCJsYW5ndWFnZS1tb250aHMtMSI6IkZlYnJ1YXJ5IiwibGFuZ3VhZ2UtY2FwdHVyZS1nZW9tZXRyeS1tdWx0aS1wb2ludCI6IlNlbGVjdCBzZXZlcmFsIHBvaW50cyBvbiB0aGUgbWFwLiBEb3VibGUtY2xpY2sgb3IgdGFwIHRvIGZpbmlzaC4iLCJsYW5ndWFnZS1tb250aHMtNCI6Ik1heSIsImxhbmd1YWdlLWJ1ZmZlci1vcGVyYXRpb24tZXJyb3IiOiJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBidWZmZXJpbmcuIFBsZWFzZSBlbnN1cmUgdGhhdCB0aGUgYnVmZmVyIHBhcmFtZXRlcnMgY29uZmlndXJlZCBoZXJlIGFyZSBjb3JyZWN0LiBEZXRhaWxzIG9mIHRoaXMgZXJyb3IgYXJlOiB7MH0iLCJsYW5ndWFnZS1uYXRpdmUtYWRkLXRvLWZhdm9yaXRlcy1lcnJvci10aXRsZSI6IkVycm9yIEFkZGluZyBGYXZvcml0ZSIsImxhbmd1YWdlLXNlYXJjaC1pbnN0YW50LXByb3ZpZGVyLW5vdC1hdmFpbGFibGUiOiJJbnN0YW50IFNlYXJjaCBoYXMgYmVlbiBkaXNhYmxlZC4gSXQgaXMgb25seSBhdmFpbGFibGUgaW4gRXNzZW50aWFscyA0LjAgYW5kIGxhdGVyLiBQbGVhc2UgdXBncmFkZSBpZiB5b3Ugd2FudCB0byBlbmFibGUgdGhpcyBmdW5jdGlvbmFsaXR5LiIsImxhbmd1YWdlLW1vbnRocy0zIjoiQXByaWwiLCJsYW5ndWFnZS1mZWF0dXJlLW92ZXJ2aWV3LW1hcC10b2dnbGUiOiJPcGVuIGFuZCBDbG9zZSB0aGUgT3ZlcnZpZXcgTWFwIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zaG93LW1hcCI6IkFjdGl2YXRlcyBtYXAgdmlldy4iLCJsYW5ndWFnZS1tb250aHMtMCI6IkphbnVhcnkiLCJsYW5ndWFnZS1tZWFzdXJlbWVudC11bml0LW1ldGVyIjoiTWV0ZXJzIChtKSIsImxhbmd1YWdlLXF1ZXJ5YnVpbGRlci1vcGVyYXRvci1kb2VzLW5vdC1jb250YWluIjoiZG9lcyBub3QgY29udGFpbiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItZGVwZW5kcy1vbiI6IkRlcGVuZHMgb246IiwibGFuZ3VhZ2UtbW9udGhzLTkiOiJPY3RvYmVyIiwibGFuZ3VhZ2UtdG9vbGJhci1uYXZpZ2F0aW9uLW5leHQtZXh0ZW50LXRvb2x0aXAiOiJab29tIHRvIHRoZSBuZXh0IGV4dGVudCIsImxhbmd1YWdlLXdvcmtmbG93LXRpdGxlIjoiV29ya2Zsb3ciLCJsYW5ndWFnZS1tb250aHMtNiI6Ikp1bHkiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWhhcy1nZW9tZXRyeSI6IlRoaXMgZmVhdHVyZSBoYXMgZ2VvbWV0cnkuIiwibGFuZ3VhZ2UtbW9udGhzLTUiOiJKdW5lIiwibGFuZ3VhZ2UtbWVudS1zd2l0Y2gtdG8tbGF5ZXJsaXN0IjoiU2hvdyBMYXllciBMaXN0IiwibGFuZ3VhZ2UtbWFya3VwLWNsZWFyLWFsbC1wcm9tcHQiOiJJZiB5b3UgcHJvY2VlZCwgYWxsIGN1cnJlbnQgZHJhd2luZ3Mgd2lsbCBiZSBwZXJtYW5lbnRseSBlcmFzZWQuIENvbnRpbnVlPyIsImxhbmd1YWdlLW1vbnRocy04IjoiU2VwdGVtYmVyIiwibGFuZ3VhZ2UtbW9udGhzLTciOiJBdWd1c3QiLCJsYW5ndWFnZS1tZW51LWV4cG9ydC1yZXN1bHRzLXRvLXNocC1kZXNjIjoiRXhwb3J0IFJlc3VsdHMgdG8gU2hhcGVmaWxlIiwibGFuZ3VhZ2UtbWVudS1pZGVudGlmeS1wb2ludC1kZXNjIjoiRHJhdyBhIHBvaW50IG9uIHRoZSBtYXAgdG8gdmlldyBpbmZvcm1hdGlvbiBhdCB0aGF0IHBvaW50IG9uIHRoZSBtYXAuIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1zeW5jLW5vLWxheWVyLXNlbGVjdGVkIjoiTm8gbGF5ZXJzIGhhdmUgYmVlbiBzZWxlY3RlZCB0byBjYWNoZSBmb3Igb2ZmbGluZSB1c2UuIFVzZSB0aGUgTWFuYWdlIE9mZmxpbmUgRGF0YSBvcHRpb24gdG8gY2hvb3NlIGxheWVycyB0byB3b3JrIHdpdGggd2hpbGUgb2ZmbGluZS4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWludm9rZS1tYXAtdGlwIjoiRXhlY3V0ZXMgYW4gSWRlbnRpZnkgb3BlcmF0aW9uIG9uIHRoZSBnaXZlbiBnZW9tZXRyeSBhbmQgXCJNYXBUaXBcIiBhcyBpdHMgc291cmNlIHRhZy4iLCJsYW5ndWFnZS1sZWdlbmQtc2hvdy1sYXllci1saXN0IjoiU2hvdyBMYXllciBMaXN0IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1jbG9zZS1mZWF0dXJlLXNldC1jb2xsZWN0aW9uIjoiQ2xvc2VzIHRoZSBmZWF0dXJlIHNldCBjb2xsZWN0aW9uLiIsImxhbmd1YWdlLWhlYXQtbWFwcy1pbnRlbnNpdHktbXVsdGlwbGllciI6IkludGVuc2l0eSBNdWx0aXBsaWVyIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1jbGVhci1kYXRhIjoiQ2xlYXIiLCJsYW5ndWFnZS1jb21wYWN0LXRvb2xiYXItbnVtYmVyLXZpc2libGUiOiIjIG9mIFRvb2xzIHRvIERpc3BsYXkiLCJsYW5ndWFnZS1tZW51LWVudGVyLW9ubGluZSI6IkdvIHRvIG9ubGluZSBtb2RlIiwibGFuZ3VhZ2UtYnVmZmVyLXVuaXQtbWlsZS1kaXNwbGF5LW5hbWUiOiJNaWxlcyAobWkpIiwibGFuZ3VhZ2UtYnVmZmVyLWVycm9yLXByb2Nlc3MtYXJncyI6IkVycm9yIHByb2Nlc3NpbmcgYnVmZmVyIEFyZ3MiLCJsYW5ndWFnZS1tZW51LWVkaXQtZmVhdHVyZS1kZXNjcmlwdGlvbiI6IkVkaXQgdGhlIGRldGFpbHMgYWJvdXQgdGhpcyBmZWF0dXJlLiIsImxhbmd1YWdlLW1lbnUtaWRlbnRpZnktZnJlZWhhbmQiOiJJZGVudGlmeSBieSBmcmVlaGFuZCBzaGFwZSIsImxhbmd1YWdlLWJhc2VtYXAtc3dpdGNoZXItYmFzZW1hcHMiOiJCYXNlIE1hcHMiLCJsYW5ndWFnZS1vZmZsaW5lLXByb3Zpc2lvbmluZy1mYWlsZWQtdGl0bGUiOiJFcnJvciIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLXNjYWxlIjoiU2NhbGU6IG9uZSB0byB7MH0uIiwibGFuZ3VhZ2UtdG9vbGJhci1uYXZpZ2F0aW9uLXpvb20tb3V0LWRlc2MiOiJEcmFnIGEgcmVjdGFuZ2xlIG9uIHRoZSBtYXAgdG8gem9vbSBvdXQgd2hpbGUga2VlcGluZyB0aGF0IGFyZWEgY2VudGVyZWQiLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1tZWFzdXJlLWRpc3RhbmNlLXRvb2wtc3RhdHVzLWtleWJvYXJkIjoiVXNlIGFycm93cyB0byBtb3ZlIHRoZSBwb2ludC4gSGl0IEVOVEVSIHRvIHBsb3QgYW5kIGJlZ2luIG1vdmluZyB0aGUgbmV4dCBwb2ludC4gSGl0IEVOVEVSIHR3aWNlIHRvIGZpbmlzaC4iLCJsYW5ndWFnZS1tZW51LWlkZW50aWZ5LWJ1ZmZlcmVkLWZlYXR1cmUtc2V0LWNvbGxlY3Rpb24iOiJTaG93IEJ1ZmZlciBPcHRpb25zIiwibGFuZ3VhZ2UtdG9vbGJhci1mbHlvdXQtZGVzY3JpcHRpb24iOiJBY2Nlc3MgYWRkaXRpb25hbCB0b29scyBpbiB7MH0gbXVsdGktdG9vbC4iLCJsYW5ndWFnZS10b29sYmFyLW5hdmlnYXRpb24tem9vbS1vdXQiOiJab29tIE91dCIsImxhbmd1YWdlLXRvb2xiYXItc25hcHBpbmctYWx0LWVuYWJsZSI6IkVuYWJsZSBzbmFwcGluZyBmb3IgYWN0aXZlIHRvb2wuIiwibGFuZ3VhZ2Utc2l0ZS1pbml0aWFsaXphdGlvbi1mYWlsdXJlIjoiRmFpbGVkIHRvIGluaXRpYWxpemUgc2l0ZS4gVGhlIGVycm9yIHdhczogezB9IiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtbWVhc3VyZS1mcmVlaGFuZC1wb2x5Z29uLXRvb2wtdG9vbHRpcCI6IkNhbGN1bGF0ZSBhcmVhIGZvciBhIGZyZWVoYW5kIHNoYXBlIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtZGVsZXRlLWRlc2Mta2V5Ym9hcmQiOiJVc2UgYXJyb3dzIHRvIG1vdmUgdGhlIHBvaW50LiBIaXQgRU5URVIgdG8gaW1tZWRpYXRlbHkgYW5kIHBlcm1hbmVudGx5IGRlbGV0ZSBhIGRyYXdpbmcuIFRoaXMgY2Fubm90IGJlIHVuZG9uZS4iLCJsYW5ndWFnZS1sYXllci1zZWxlY3Rvci1kZWZhdWx0LXNlbGVjdC1hbGwtdGV4dCI6IlNlbGVjdCBBbGwiLCJsYW5ndWFnZS10b29sYmFyLXNlbGVjdC1sYXllcnMtdG9nZ2xlLW9uLW5hbWUiOiJGaWx0ZXIgTGF5ZXJzIiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1yZWN0YW5nbGUiOiJSZWN0YW5nbGUiLCJsYW5ndWFnZS10b29sYmFyLXNuYXBwaW5nLXNlbGVjdC1sYXllcnMtdG9vbHRpcCI6IkNoYW5nZSB3aGljaCBsYXllcnMgYXJlIHNuYXBwYWJsZS4iLCJsYW5ndWFnZS1jbHVzdGVyaW5nLW1heGltdW0tZmVhdHVyZXMiOiJNYXhpbXVtIENsdXN0ZXIgU2l6ZSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tY2xvc2UtbW9kYWwtcmVnaW9uIjoiQ2xvc2VzIHRoZSBNb2RhbFdpbmRvd1JlZ2lvbi4iLCJsYW5ndWFnZS10b29sYmFyLW5hdmlnYXRpb24taG9tZS1zdWIiOiJIb21lIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLW1ibC1wb2ludC10b29sIjoiVGFwIG9uIHRoZSBtYXAgdG8gYWRkIHRoZSBmZWF0dXJlLiIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktZm9ybS1uYW1lZC1jb250YWluZXItaGlkZGVuIjoiRm9ybSBncm91cCAnezB9JyBoaWRkZW4uIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtdW5pdC1zcWZlZXQtc2hvcnQiOiJmdMKyIiwibGFuZ3VhZ2UtdmlzdWFsaXphdGlvbi10aXRsZSI6IlZpc3VhbGl6YXRpb24gT3B0aW9ucyIsImxhbmd1YWdlLWJ1ZmZlci1jb25maWctdW5pdHMtZXJyb3IiOiJDb25maWd1cmF0aW9uIGVycm9yLiBCdWZmZXIgdW5pdHMgb3IgZGVmYXVsdCBidWZmZXIgdW5pdCBub3Qgc3BlY2lmaWVkIG9yIHVuc3VwcG9ydGVkLiIsImxhbmd1YWdlLW1lYXN1cmVtZW50LW1lYXN1cmUtZWxsaXBzZS10b29sLXN0YXR1cyI6IkNsaWNrIG9yIHRhcCwgdGhlbiBkcmFnIHRvIGRyYXcgYW4gZWxsaXBzZSBhbmQgZmluZCBhcmVhLiIsImxhbmd1YWdlLWludGVncmF0aW9uLXNtYXJ0LXBhbmVsLW1heGltaXplLXJlc3RvcmUiOiJNYXhpbWl6ZS9SZXN0b3JlIFBhbmVsIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1uby1kYXRhLXdpbGwtYmUtY2FjaGVkIjoiTm8gRGF0YSBXaWxsIEJlIENhY2hlZCIsImxhbmd1YWdlLW1lbnUtZWRpdC1mZWF0dXJlIjoiRWRpdCB0aGlzIEZlYXR1cmUiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1wb2ludC10b29sdGlwIjoiQWRkIGEgcG9pbnQgdG8gdGhlIG1hcCIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1kc2stcmVjdGFuZ2xlLXRvb2wiOiJEcmFnIG9uIHRoZSBtYXAgdG8gZHJhdyBhIHJlY3RhbmdsZSIsImxhbmd1YWdlLXNoYXJlLXNoYXJlLW9uLXByb21wdC10aXRsZSI6IlNoYXJlIG9uIHswfSIsImxhbmd1YWdlLWNsZWFyLXN0b3JhZ2Utdmlldy10aXRsZSI6IkNsZWFyIE9mZmxpbmUgRGF0YSIsImxhbmd1YWdlLWNhcHR1cmUtZ2VvbWV0cnktcG9pbnRfdG9vbHRpcCI6IlNlbGVjdCBieSBwb2ludCIsImxhbmd1YWdlLW1hcC10aXAtcmVzdWx0cyI6IlJlc3VsdHMiLCJsYW5ndWFnZS1mZWF0dXJlLXJlbGF0ZWQtZXJyb3ItZmV0Y2hpbmciOiJUaGVyZSB3YXMgYW4gZXJyb3IgZmV0Y2hpbmcgcmVsYXRlZCBmZWF0dXJlcy4iLCJsYW5ndWFnZS1sb2ctdGltZXN0YW1wIjoiVGltZXN0YW1wIiwibGFuZ3VhZ2Utb2ZmbGluZS1kYXRhLWNsZWFyZWQiOiJPZmZsaW5lIGRhdGEgY2xlYXJlZC4iLCJsYW5ndWFnZS1sYXllci1zZWxlY3Rvci1pZGVudGlmeS1zZWxlY3QtYWxsLXRvb2x0aXAiOiJTZWxlY3QgYWxsIGlkZW50aWZpYWJsZSBsYXllcnMiLCJsYW5ndWFnZS1vZmZsaW5lLXJlc291cmNlLXNhdmUtZXJyb3IiOiJUaGVyZSB3YXMgYW4gZXJyb3Igc2F2aW5nIGFuIG9mZmxpbmUgcmVzb3VyY2UuIFlvdSBtYXkgYmUgb3V0IG9mIHNwYWNlLiBFcnJvcjogezB9IiwibGFuZ3VhZ2UtbWVudS1vcGVuLW9mZmxpbmUtdG9vbHMtbWVudS1kZXNjIjoiTWFuYWdlIGNhY2hlIHNldHRpbmdzLCB2aWV3IGVkaXRzLCBhbmQgc3luYyB3aXRoIHRoZSBzZXJ2ZXIuIiwibGFuZ3VhZ2UtbWVudS1tYXAtbGF5ZXJzIjoiQ2hhbmdlIHZpc2libGUgbWFwIGxheWVycyIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLXdvcmtmbG93bGlzdC12aWV3IjoiV29ya2Zsb3dMaXN0VmlldyIsImxhbmd1YWdlLXRvb2xiYXItY2hhcnRpbmctc2hvdy1jaGFydHMiOiJWaWV3IENoYXJ0cyIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXBvbHlsaW5lLWRlc2MiOiJDbGljayBvciB0YXAgbG9jYXRpb25zIGFsb25nIHRoZSBtYXAgdG8gY3JlYXRlIGEgbGluZS4gRG91YmxlIGNsaWNrL3RhcCB0byBmaW5pc2guIiwibGFuZ3VhZ2UtdG9vbGJhci10YXNrcy1pZGVudGlmeSI6IklkZW50aWZ5IiwibGFuZ3VhZ2UtYnJvd3Nlci10aXRsZSI6Ikdlb2NvcnRleCBWaWV3ZXIgZm9yIEhUTUw1IiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lcnJvci1kZWxldGluZy1mZWF0dXJlIjoiVGhlcmUgd2FzIGFuIGVycm9yIGRlbGV0aW5nIGZlYXR1cmU6IHswfSIsImxhbmd1YWdlLXF1ZXJ5YnVpbGRlci1zcGF0aWFsLWZpbHRlciI6IlNwYXRpYWwgRmlsdGVyOiIsImxhbmd1YWdlLW1lYXN1cmVtZW50LWVyYXNlLW11bHRpcGxlLXByb21wdCI6Ik11bHRpcGxlIG1lYXN1cmVtZW50cyBleGlzdCBhdCB0aGUgbG9jYXRpb24geW91IGp1c3Qgc3BlY2lmaWVkLCBhbmQgYWxsIHdpbGwgYmUgcGVybWFuZW50bHkgZXJhc2VkIGlmIHlvdSBwcm9jZWVkLiBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIGFsbCB0aGVzZSBpdGVtcz8iLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LXJlY3RhbmdsZS1kZXNjIjoiVG8gbGVhcm4gd2hhdFx1MjAxOXMgdGhlcmUsIGNsaWNrIG9yIHRhcCBhbmQgZHJhZyB0byBkcmF3IGEgcmVjdGFuZ2xlIG9uIHRoZSBtYXAuIiwibGFuZ3VhZ2UtcHJpbnRpbmctcHJpbnQtcmVxdWVzdC1kZXNjcmlwdGlvbiI6IkFuIGVtYWlsIHdpbGwgYmUgc2VudCB0byB0aGUgc3BlY2lmaWVkIGFkZHJlc3Mgd2hlbiB0aGUgam9iIGlzIGNvbXBsZXRlLiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1hcHBseWluZyI6IkFwcGx5aW5nIGVkaXRzLi4uIiwibGFuZ3VhZ2UtcHJpbnRpbmctbm9uZSI6IihOb25lKSIsImxhbmd1YWdlLXNlYXJjaC1nbyI6IkdvIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWdlb21ldHJ5LXJlY3RhbmdsZSI6Ik1vdmUgdGhlIHNoYXBlIGJ5IGRyYWdnaW5nLiBSZXNpemUgYnkgZ3JhYmJpbmcgZWRnZXMgb3IgY29ybmVycy4gQ2xpY2sgb3IgdGFwIG9uIHRoZSBtYXAgdG8gc3RvcCBlZGl0aW5nIiwibGFuZ3VhZ2UtZmVhdHVyZS1yZWxhdGVkLWNoZWNraW5nIjoiQ2hlY2tpbmcgZm9yIHJlbGF0ZWQgZmVhdHVyZXMuLi4iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctZWxsaXBzZS10b29sIjoiRHJhZyBvbiB0aGUgbWFwIHRvIGRyYXcgYW4gZWxsaXBzZSIsImxhbmd1YWdlLWVudGVyLW9mZmxpbmUtZGVzYyI6IkdvIHRvIG9mZmxpbmUgbW9kZSBhbmQgdmlldyBjYWNoZWQgbWFwIGRhdGEuIiwibGFuZ3VhZ2UtbWVudS1leHBvcnQtcmVzdWx0cy10by1zaHAiOiJFeHBvcnQgdG8gU2hhcGVmaWxlIiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtYWNjZXNzaWJpbGl0eS1pY29uIjoiQWNjZXNzaWJpbGl0eSBJY29uIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtZHJhd21vZGUtZG93bi1hcnJvdyI6IkRvd24gQXJyb3ciLCJsYW5ndWFnZS1sYXllcmxpc3Qtbm8tZmVhdHVyZS1hY3Rpb25zIjoiTm8gYWN0aW9ucyBhdmFpbGFibGUuIiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtc25hcHBhYmxlLWxheWVycyI6IlNuYXBwYWJsZSBMYXllcnMgezB9IiwibGFuZ3VhZ2UtaGVhdC1tYXBzLWludGVuc2l0eS1zbGlkZXItcGl4ZWxzIjoicGl4ZWxzIiwibGFuZ3VhZ2UtdXNlci1zaWduLWluLWRlc2MiOiJOYXZpZ2F0ZSB0byB0aGUgc2lnbi1pbiBwYWdlLiIsImxhbmd1YWdlLW1lbnUtZXhwb3J0LXJlc3VsdHMtdG8teGxzeCI6IkV4cG9ydCB0byBYTFNYIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtY2xlYXItYWxsLXByb21wdCI6IklmIHlvdSBwcm9jZWVkLCBhbGwgbWVhc3VyZW1lbnQgY2FsY3VsYXRpb25zIG9uIHRoZSBtYXAgd2lsbCBiZSBwZXJtYW5lbnRseSBlcmFzZWQuIENvbnRpbnVlPyIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tc2hvdy1sYXllci1saXN0IjoiQWN0aXZhdGVzIHRoZSBMYXllckxpc3QgVmlldy4iLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC1zZXJ2aWNlLWxheWVycy1mYWlsdXJlIjoiU2VydmljZSBMYXllcnMgRmFpbHVyZSB7MH0iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctcmVsYXRlZC1mZWF0dXJlLWZhaWxlZCI6IkNvdWxkIG5vdCBlZGl0IGEgcmVsYXRlZCBmZWF0dXJlIC0gbm8gcmVsYXRlZCBsYXllciBjb3VsZCBiZSBsb2FkZWQgZm9yIHJlbGF0aW9uc2hpcCB7MH0iLCJsYW5ndWFnZS1xdWVyeWJ1aWxkZXItY2Fubm90LXF1ZXJ5IjoiVGhpcyBsYXllciBjYW5ub3QgYmUgcXVlcmllZC4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVkaXQtYWN0aW9uLXVwZGF0ZWQiOiJVcGRhdGVkIiwibGFuZ3VhZ2UtcXVlcnlidWlsZGVyLWZpbmQtaW4tbGF5ZXIiOiJGaW5kIHJlc3VsdHMgaW4gPHN0cm9uZz57MH08XC9zdHJvbmc+IHdoZXJlOiIsImxhbmd1YWdlLXF1ZXJ5YnVpbGRlci1mZWF0dXJlLXNldC1kaXNwbGF5LW5hbWUiOiJ7MH0iLCJsYW5ndWFnZS1yZXN1bHRzLXRvZ2dsZS10YWJsZS12aWV3LWRlc2MiOiJWaWV3IHJlc3VsdHMgaW4gdGFibGUgZm9ybWF0IiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtdW5pdC15YXJkLXNob3J0IjoieWQiLCJsYW5ndWFnZS1sb2ctbWVzc2FnZSI6Ik1lc3NhZ2UiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXRha2UtYXBwbGljYXRpb24tb2ZmbGluZSI6IlB1dHMgdGhlIGFwcGxpY2F0aW9uIGluIGFuIG9mZmxpbmUgc3RhdGUuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zdGFydC1lZGl0aW5nLWZlYXR1cmUiOiJCZWdpbnMgZWRpdGluZyBhbiBleGlzdGluZyBmZWF0dXJlLiIsImxhbmd1YWdlLW1lYXN1cmVtZW50LW1lYXN1cmUtcmVjdGFuZ2xlLXRvb2wtc3RhdHVzIjoiQ2xpY2sgb3IgdGFwLCB0aGVuIGRyYWcgdG8gZHJhdyBhIHJlY3RhbmdsZSBhbmQgZmluZCBhcmVhLiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1pbnZhbGlkLWxheWVyIjoiVGhpcyBmZWF0dXJlIGhhcyBubyBlZGl0YWJsZSBmaWVsZHMuIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLW1ibC1saW5lLXRvb2wiOiJUYXAgb24gdGhlIG1hcCB0byBhZGQgdHdvIGxpbmUgcG9pbnRzLiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1yZWN0YW5nbGUtdG9vbCI6IkRyYWcgb24gdGhlIG1hcCB0byBkcmF3IGEgcmVjdGFuZ2xlLiIsImxhbmd1YWdlLXdvcmtmbG93LXJlcG9ydC11cmwiOiJZb3VyIHJlcG9ydCBpcyByZWFkeSB0byBkb3dubG9hZC4gQ2xpY2sgdGhlIGxpbmsgb3IgcmlnaHQtY2xpY2ssIGFuZCB0aGVuIHNlbGVjdCBcIlNhdmUgYXMuXCIiLCJsYW5ndWFnZS1sZWdlbmQtdGl0bGUiOiJMZWdlbmQiLCJsYW5ndWFnZS1tZW51LXJlc3VsdHMtbGlzdC1hY3Rpb25zLWRlc2MiOiJSZXN1bHRzIExpc3QgQWN0aW9ucyIsImxhbmd1YWdlLXF1ZXJ5YnVpbGRlci1vcGVyYXRvci1sZXNzLXRoYW4iOiI8IiwibGFuZ3VhZ2UtbmF0aXZlLWFkZC10by1mYXZvcml0ZXMtbmFtZS1pbnZhbGlkIjoiVGhlIG5hbWUgcHJvdmlkZWQgd2FzIGludmFsaWQuIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1saXN0IjoiTWFuYWdlIEZlYXR1cmUgTGF5ZXJzIiwibGFuZ3VhZ2UtYnVmZmVyLW9wdGlvbnMtY29udGludWUtYnV0dG9uLXRleHQiOiJDb250aW51ZSIsImxhbmd1YWdlLWxpc3QtcmVwb3J0cy1leGNsdXNpb24td2FybmluZy10aXRsZSI6IlJlcG9ydCBkb2Vzbid0IGNvdmVyIGFsbCBzZWxlY3RlZCBmZWF0dXJlcyIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1wYWNrYWdlLXJlcXVpcmVkIjoiZXNyaS50b29sYmFycy5lZGl0IG5lZWRzIHRvIGJlIGluY2x1ZGVkIGluIHlvdXIgYXBwbGljYXRpb24gdmlhIGEgZG9qby5yZXF1aXJlIHN0YXRlbWVudCBpbiBvcmRlciBmb3IgZmVhdHVyZSBlZGl0aW5nIHRvIHdvcmsgcHJvcGVybHkuIiwibGFuZ3VhZ2UtdmlzdWFsaXphdGlvbi1hcHBseSI6IkFwcGx5IiwibGFuZ3VhZ2UtZmVhdHVyZS1kZXRhaWxzLWV4cGFuZGVkLWRlc2MiOiJTd2l0Y2ggdG8gdGhlIGZlYXR1cmUgZGV0YWlscyBleHBhbmRlZCB2aWV3LiIsImxhbmd1YWdlLWNvbW1vbi1oaWRlIjoiSGlkZSIsImxhbmd1YWdlLWZlYXR1cmUtYXR0cmlidXRlcyI6IkRldGFpbHMiLCJsYW5ndWFnZS1kaXNwbGF5LXJlc3VsdC1waWNrZXItbm8tcmVzdWx0cy1zZWxlY3RlZCI6IlBsZWFzZSBzZWxlY3Qgb25lIG9mIHRoZSByZXN1bHRzIiwibGFuZ3VhZ2UtdG9vbGJhci10YWItbmF2aWdhdGlvbiI6Ik5hdmlnYXRpb24iLCJsYW5ndWFnZS1saXN0LXJlcG9ydHMtZGV0YWlscyI6IkNvdmVycyB7MH0gb2YgezF9IHNlbGVjdGVkIGZlYXR1cmVzLiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItc3luYy1sb2ctZXJyb3IiOiJFcnJvciIsImxhbmd1YWdlLW1hcC1vcGVyYXRpb24tdW5hdmFpbGFibGUtb2ZmbGluZSI6IllvdSBjYW5ub3QgcGVyZm9ybSB0aGlzIG9wZXJhdGlvbiBvZmZsaW5lLiIsImxhbmd1YWdlLXJ1bi1yZXBvcnQtY29tcGxldGUtaGVhZGluZy1hc3luYyI6IlJlcG9ydCIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLWZlYXR1cmUtbGF5ZXItbGlzdCI6Ik1hbmFnZSBTeW5jIFNldHRpbmdzIHswfSIsImxhbmd1YWdlLWV4cG9ydC1tYXAtbm9uZSI6IihOb25lKSIsImxhbmd1YWdlLWNvbW1vbi1yZXN1bHRzIjoiUmVzdWx0cyIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItY3VycmVudGx5LWNhY2hlZCI6IlByZXZpb3VzbHkgQ2FjaGVkIERhdGEiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWdldC1yZWxhdGVkLWZlYXR1cmUiOiJHZXRzIGZlYXR1cmVzIHJlbGF0ZWQgdG8gdGhlIGZlYXR1cmUuIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtZnJlZWhhbmQiOiJGcmVlaGFuZCIsImxhbmd1YWdlLW1lbnUtbWFwdGlwLWFjdGlvbnMiOiJBY3Rpb25zIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1jbGVhci1sYXllci1kYXRhIjoiV2FybmluZzogQ2xlYXJpbmcgdGhpcyBsYXllciB3aWxsIHJlbW92ZSBhbnkgb2ZmbGluZSBtYXAgZGF0YSBhbmQgYW55IGVkaXRzIG9uIHRoaXMgbGF5ZXIuIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWRzay1wb2x5bGluZS10b29sIjoiQ2xpY2sgb3IgdGFwIG9uIHRoZSBtYXAgdG8gYWRkIHR3byBvciBtb3JlIGxpbmUgcG9pbnRzLiBEb3VibGUgY2xpY2svdGFwIHRvIHN0b3AiLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1yZXN1bHRzLWZlYXR1cmUtc2V0LW5hbWUiOiJ7MH0gezF9IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1wcm9qZWN0IjoiQ2FsbHMgYSBnZW9tZXRyeSBzZXJ2aWNlIHRvIHByb2plY3QgZ2VvbWV0cmllcyBiZXR3ZWVuIGRpZmZlcmVudCBjb29yZGluYXRlIHN5c3RlbXMuIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLXNlbGYtaW50ZXJzZWN0aW5nLXBvbHlnb24tbmVlZC1maXhpbmciOiJUaGlzIHBvbHlnb24gaW50ZXJzZWN0cyBpdHNlbGYuIFlvdSBtdXN0IGZpeCB0aGUgcG9seWdvbiBiZWZvcmUgc2F2aW5nLiIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLWFjY2Vzc2liaWxpdHktaWNvbi1kZXNjIjoiQWNjZXNzaWJpbGl0eSBpY29uIiwibGFuZ3VhZ2UtY29tbW9uLWJhY2siOiJCYWNrIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtZXJhc2UtdG9vbHRpcCI6IkNsZWFyIGEgY2hvc2VuIGRpc3RhbmNlL2FyZWEgY2FsY3VsYXRpb24gZnJvbSB0aGUgbWFwIiwibGFuZ3VhZ2UtbWVudS1lbnRlci1vbmxpbmUtZGVzYyI6IkdvIHRvIG9ubGluZSBtb2RlIGFuZCB2aWV3IGxpdmUgbWFwIGRhdGEgZnJvbSB0aGUgd2ViLiIsImxhbmd1YWdlLW1lYXN1cmVtZW50LWNsZWFyLWFsbC10b29sdGlwIjoiQ2xlYXIgYWxsIG1lYXN1cmVtZW50IG1hcmt1cCIsImxhbmd1YWdlLXNuYXBwaW5nLXBvaW50LWZvdW5kIjoiU25hcHBpbmcgcG9pbnQgZm91bmQuIiwibGFuZ3VhZ2UtdGFrZS1hcHAtb2ZmbGluZSI6IkdvIG9mZmxpbmUiLCJsYW5ndWFnZS1uYXRpdmUtaW1hZ2Utc2VsZWN0LWhlYWRpbmciOiJQbGVhc2Ugc2VsZWN0IGFuIGltYWdlIHRvIHVwbG9hZCIsImxhbmd1YWdlLWNvbW1vbi1sb2FkaW5nIjoiTG9hZGluZy4uLiIsImxhbmd1YWdlLW1lbnUtdmlzdWFsaXphdGlvbi1kZXNjIjoiRW5hYmxlIEhlYXQgTWFwcyBvciBDbHVzdGVyaW5nIHRvIGJlIHNob3duLiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1jcmVhdGUtZWRpdC1zZWxlY3QtbG9jYXRpb24iOiJTZWxlY3QgYSBsb2NhdGlvbiIsIi8vdGltZXBpY2tlci5yZWdpb25hbC5oZWxwIjoiQ29weSBzZXR0aW5ncyBmcm9tIG9uZSBvZiB0aGUgZmlsZXMgaW4gaHR0cHM6Ly9naXRodWIuY29tL3RyZW50cmljaGFyZHNvbi9qUXVlcnktVGltZXBpY2tlci1BZGRvbi90cmVlL21hc3Rlci9zcmMvaTE4biIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tcGFuLXRvLXBvaW50IjoiUGFucyB0byBhIHBvaW50IG9yIG90aGVyIHR5cGUgb2YgR2VvbWV0cnkuIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtZWxsaXBzZSI6IkVsbGlwc2UiLCJsYW5ndWFnZS10b29sYmFyLXRhYi1hbmFseXNpcyI6IkFuYWx5c2lzIiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtYXR0YWNoLWZpbGUiOiJBdHRhY2ggRmlsZSB7MH0iLCJsYW5ndWFnZS1jbGVhci1zdG9yYWdlLWRvbWFpbiI6IkNsZWFyIG9mZmxpbmUgZGF0YSBmb3IgdGhpcyBkb21haW4iLCJsYW5ndWFnZS1ydW4tcmVwb3J0LWNvbXBsZXRlLWRvbmUtYnV0dG9uIjoiRG9uZSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tZmVhdHVyZS1sYXllci1jbGVhci1kYXRhIjoiQ2xlYXJzIHRoZSBkYXRhIGZvciBhIGdpdmVuIG1hcCBzZXJ2aWNlIFVSTC4iLCJsYW5ndWFnZS1vZmZsaW5lLXByb3Zpc2lvbmluZy1mYWlsZWQtaW5kZXgtZ2V0IjoiVGhlIGRvd25sb2FkIGZvciBvZmZsaW5lIHVzZSBmYWlsZWQuIENvdWxkIG5vdCByZXRyaWV2ZSBpbmRleC4iLCJsYW5ndWFnZS1zaXRlLWxvZy1vbi1yZXF1aXJlZC10aXRsZSI6IkxvZyBPbiBSZXF1aXJlZCIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItc3luYy1sb2ctdHJhY2UiOiJUcmFjZSIsImxhbmd1YWdlLWdlb2xvY2F0ZS1lcnJvci1vZmZsaW5lIjoiQ291bGQgbm90IGNvbXB1dGUgeW91ciBwb3NpdGlvbiBpbiBvZmZsaW5lIG1vZGUuIiwibGFuZ3VhZ2UtbmF0aXZlLWFkZC10by1mYXZvcml0ZXMtc3VjY2Vzcy10aXRsZSI6IkZhdm9yaXRlIEFkZGVkIiwibGFuZ3VhZ2UtZnJhbWV3b3JrLXVpLXZpZXctY29udGFpbmVyLXZpZXctYmFjayI6IkdvIEJhY2sgezB9IiwibGFuZ3VhZ2UtbmF0aXZlLXBob3RvLWZyb20tZ2FsbGVyeSI6IkF0dGFjaCBhIHBob3RvIGZyb20gdGhlIGdhbGxlcnkiLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LWZyZWVoYW5kLXRvb2x0aXAiOiJGaW5kIG91dCBhYm91dCBhbiBhcmVhIG9uIHRoZSBtYXAgZGVmaW5lZCBieSBhIGZyZWVoYW5kIHNoYXBlIiwibGFuZ3VhZ2UtY29tbW9uLWNyZWF0ZSI6IkNyZWF0ZSIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLXNpbXBsZS1maWx0ZXItYnVpbGRlci1jb250YWluZXIiOiJTaW1wbGUgRmlsdGVyIEJ1aWxkZXIgQ29udGFpbmVyIHswfSIsImxhbmd1YWdlLW5hdGl2ZS1kb3dubG9hZC1jb21wbGV0ZSI6IkRvd25sb2FkIENvbXBsZXRlOiB7MH0uIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtbWVhc3VyZS1kaXN0YW5jZS10b29sLW5hbWUiOiJEaXN0YW5jZSIsImxhbmd1YWdlLW1lYXN1cmVtZW50LW1lYXN1cmUtZnJlZWhhbmQtcG9seWdvbi10b29sLW5hbWUiOiJGcmVlaGFuZCBTaGFwZSIsImxhbmd1YWdlLW1lbnUtc29jaWFsLWxpbmtzLW1lbnUtZGVzYyI6IlNvY2lhbCBMaW5rcyIsImxhbmd1YWdlLWNhcHR1cmUtZ2VvbWV0cnktZGVmYXVsdCI6IkRyYXcgYW4gYXJlYSBvbiB0aGUgbWFwLiIsImxhbmd1YWdlLW9mZmxpbmUtZGF0YS1jYW50LWNsZWFyIjoiTm8gZGF0YSB0byBjbGVhci4iLCJsYW5ndWFnZS13b3JrZmxvdy1pcy1idXN5IjoiVGhlIHdvcmtmbG93IGlzIGJ1c3kuIiwibGFuZ3VhZ2UtYmFubmVyLXRpdGxlIjoiQXBwbGljYXRpb24gVGl0bGUiLCJsYW5ndWFnZS1tZW51LWFkZC1hLWZlYXR1cmUiOiJDcmVhdGUgYSBmZWF0dXJlIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtdW5pdC1tZXRlci1zaG9ydCI6Im0iLCJsYW5ndWFnZS1tZWFzdXJlbWVudC11bml0LXNxa2lsb21ldGVyLXNob3J0Ijoia23CsiIsImxhbmd1YWdlLWZlYXR1cmUtZGF0ZS1mb3JtYXQiOiJNTU0gZGQsIHl5eXkgSEg6bW06c3MiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVkaXRzLWFuZC1zeW5jLXN5bmMtYnV0dG9uIjoiU3luYyBEYXRhIiwibGFuZ3VhZ2UtdG9vbGJhci1uYXZpZ2F0aW9uLXBhbi10b29sdGlwIjoiQ2FuY2VsIGFueSBhY3RpdmUgdG9vbHMgYW5kIHB1dCB0aGUgbWFwIGludG8gcGFuIG1vZGUiLCJsYW5ndWFnZS11aS10YWJsZS1zb3J0ZWQtZGVzY2VuZGluZyI6IkNvbHVtbiBoZWFkZXIuIHswfSAtIFNvcnRlZCBkZXNjZW5kaW5nLiIsImxhbmd1YWdlLW1lYXN1cmVtZW50LXJlc3VsdHMtZmVhdHVyZS1sYWJlbC10b3RhbCI6InswfSIsImxhbmd1YWdlLXdvcmtmbG93LWF2YWlsYWJsZS13b3JrZmxvd3MiOiJBdmFpbGFibGUgVGFza3MiLCJsYW5ndWFnZS1jb21tb24tZmVhdHVyZS1lZGl0bG9nLWRlc2MiOiJEaXNwbGF5cyBpbmZvcm1hdGlvbiBhYm91dCBlZGl0aW5nIGhpc3Rvcnkgb2YgdGhlIGZlYXR1cmUgbGF5ZXIuIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtZHJhd21vZGUtbGVmdC1hcnJvdyI6IkxlZnQgQXJyb3ciLCJsYW5ndWFnZS1sYXllci1zZWxlY3Rvci1kZWZhdWx0LXNlbGVjdC1hbGwtdG9vbHRpcCI6IlNlbGVjdCBhbGwgbGF5ZXJzIiwibGFuZ3VhZ2UtbWFwLWxvYWRpbmctc3RhZ2UzIjoiU3RpbGwgd29ya2luZy4gIExvYWRpbmcgezB9IG1hcCBkYXRhLi4uIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLXVuZG9hYmxlLXVwZGF0ZSI6IlVwZGF0ZSBGZWF0dXJlcyIsImxhbmd1YWdlLW1hcC1sb2FkaW5nLXN0YWdlMiI6IlN0aWxsIGxvYWRpbmcgezB9IG1hcCBkYXRhLi4uIiwibGFuZ3VhZ2UtZXhwb3J0LW1hcC1kZXNjcmlwdGlvbiI6IkV4cG9ydCBhIE1hcCBJbWFnZSIsImxhbmd1YWdlLW1hcC1sb2FkaW5nLXN0YWdlMSI6IkxvYWRpbmcgezB9IG1hcCBkYXRhLi4uIiwibGFuZ3VhZ2UtbWVudS1zaG93LXJlc3VsdHMtbGlzdCI6Ikxpc3QgVmlldyIsImxhbmd1YWdlLXRvb2xiYXItaW5mb3JtYXRpb24tYWN0aW9ucyI6IkluZm9ybWF0aW9uICYgQWN0aW9ucyIsImxhbmd1YWdlLWdyaWQiOiJHcmlkIiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtY29vcmRpbmF0ZXMtaW50cm9kdWN0aW9uIjoiQ2VudGVyIGxhdGl0dWRlOiB7MH0uIENlbnRlciBsb25naXR1ZGU6IHsxfS4iLCJsYW5ndWFnZS1jb21tb24tZmVhdHVyZS1sYXllci1kZXRhaWxzIjoiU3luYyBTZXR0aW5ncyBmb3IgezB9IiwibGFuZ3VhZ2UtdXNlci1zaWduZWQtaW4tYXMiOiJZb3UgYXJlIHNpZ25lZCBpbiBhczoiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXNob3ctcmVzdWx0cy10YWJsZSI6IkRpc3BsYXlzIHRoZSBsaXN0IG9mIGZlYXR1cmVzIGluIHRoZSBnaXZlbiBmZWF0dXJlIHNldCBjb2xsZWN0aW9uIGluIGEgdGFidWxhciB2aWV3LiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItc3luYy1lbmQtZWRpdC1zdWNjZXNzLXN0YXJ0LXJlY2FjaGUiOiJFZGl0cyBzdWNjZXNzZnVsbHkgc2VudCB0byBzZXJ2ZXIuIENhY2hpbmcgb2ZmbGluZSBkYXRhLi4uIiwibGFuZ3VhZ2UtYnVmZmVyLXN0YXR1cy1tc2ciOiJCdWZmZXJpbmcgaW4gcHJvZ3Jlc3MgLi4uIiwibGFuZ3VhZ2UtZ2VvbG9jYXRlLWZvbGxvdyI6IkZvbGxvdyBNZSIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLWRyYXdpbmctdG9vbHMiOiJEcmF3IiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtdG9vbGJhciI6IlRvb2xiYXIgezB9IiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtZGF0YS1mcmFtZS12aWV3LWNvbnRhaW5lciI6IkRhdGEgRnJhbWUgVmlldyBDb250YWluZXIgezB9IiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWRzay1wb2x5Z29uLXRvb2wta2V5Ym9hcmQiOiJVc2UgYXJyb3dzIHRvIG1vdmUgdGhlIHBvaW50LiBIaXQgRU5URVIgdG8gcGxvdCBhbmQgYmVnaW4gbW92aW5nIHRoZSBuZXh0IHBvaW50LiBIaXQgRU5URVIgdHdpY2UgdG8gZmluaXNoLiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItbWF4LXJlY29yZC13YXJuaW5nIjoiQ2FjaGluZyBsYXllciB7MH0gaGFzIHJldHVybmVkIHsxfSByZWNvcmRzLiBUaGUgZGF0YSBtYXkgaGF2ZSBiZWVuIHRydW5jYXRlZCBiZWNhdXNlIGl0IGV4Y2VlZGVkIHRoZSBtYXhpbXVtIGFsbG93ZWQgYnkgQXJjR0lTIFNlcnZlci4iLCJsYW5ndWFnZS1vZmZsaW5lLXZpZXdlci1wcm92aXNpb25pbmctZmFpbGVkLXN0YXR1czUwMCI6IlRoZSBkb3dubG9hZCBvZiByZXNvdXJjZXMgZm9yIG9mZmxpbmUgdXNlIGZhaWxlZDogVGhlcmUgd2FzIGFuIGludGVybmFsIHNlcnZlciBlcnJvci4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4iLCJsYW5ndWFnZS1tZW51LXNob3ctY2hhcnRpbmctdmlldyI6IkNoYXJ0aW5nIFZpZXciLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWNsZWFyLWRlZmF1bHQtaGlnaGxpZ2h0cyI6IlJlbW92ZXMgdGhlIGhpZ2hsaWdodHMgZnJvbSB0aGUgZGVmYXVsdCBoaWdobGlnaHQgbGF5ZXIuIiwibGFuZ3VhZ2UtbWFwLXRpcC1mZWF0dXJlLXByZXYiOiJQcmV2aW91cyIsImxhbmd1YWdlLW1lbnUtbWFwdGlwLWFjdGlvbnMtZGVzYyI6Ik1hcFRpcCBBY3Rpb25zIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtZHJhd21vZGUtcmVjdGFuZ2xlIjoiUmVjdGFuZ2xlIiwibGFuZ3VhZ2UtbmF0aXZlLWZpbGUtc2VsZWN0LWhlYWRpbmciOiJQbGVhc2Ugc2VsZWN0IGEgZmlsZSB0byB1cGxvYWQiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWNoYW5nZS1lZGl0LWxvZy1lbnRyeSI6IkNoYW5nZSBhbiBleGlzdGluZyBlZGl0IGxvZyBlbnRyeS4iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1mcmVlaGFuZC1kZXNjIjoiSG9sZCB0aGUgbW91c2UgYnV0dG9uIG9yIHlvdXIgZmluZ2VydGlwIGRvd24sIHRoZW4gZHJhdyBhIGZyZWVoYW5kIGxpbmUuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1jb25maXJtIjoiRGlzcGxheXMgYSBjb25maXJtLiIsImxhbmd1YWdlLWxvZy1jbGVhciI6IkNsZWFyIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLW5vLXRlbXBsYXRlcyI6Ik5vIHRlbXBsYXRlcyBhdmFpbGFibGUuIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci15b3UtYXJlLW9ubGluZS1kZXNjIjoiQW55IGZlYXR1cmVzIGRpc3BsYXllZCBvbiB0aGUgbWFwIGFyZSBmcm9tIHRoZSBsaXZlIGxheWVyLCBhbmQgbm90IHRoZSBjYWNoZWQgZGF0YS4iLCJsYW5ndWFnZS11aS10YWJsZS11bnNvcnRlZCI6IkNvbHVtbiBoZWFkZXIuIHswfSAtIFVuc29ydGVkIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtbWVhc3VyZS1lbGxpcHNlLXRvb2wtbmFtZSI6IkVsbGlwc2UiLCJsYW5ndWFnZS1oZWF0LW1hcHMtaW50ZW5zaXR5LXNsaWRlci1oYW5kbGUiOiJTbGlkZXIgaGFuZGxlIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtdW5pdC15YXJkIjoiWWFyZHMgKHlkKSIsImxhbmd1YWdlLW1lbnUtYnVmZmVyLWlkZW50aWZ5LWZlYXR1cmUtZGVzYyI6IklkZW50aWZ5IG5lYXJieSBmZWF0dXJlcyIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLWVsbGlwc2UtdG9vbHRpcCI6IkRyYXcgYW4gZWxsaXBzZSBvbiB0aGUgbWFwIiwibGFuZ3VhZ2UtbWFwLXpvb20tb3V0IjoiRHJhZyBvbiB0aGUgbWFwIHRvIHpvb20gb3V0LiBUaGUgc21hbGxlciB0aGUgYXJlYSwgdGhlIGZhcnRoZXIgeW91IHpvb20gb3V0LiIsImxhbmd1YWdlLWZlYXR1cmUtYXR0YWNobWVudHMtZmlsZS1zaXplIjoiQnl0ZXMiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWxheWVyLWRldGFpbHMiOiJNYW5hZ2UgRmVhdHVyZSBMYXllciIsImxhbmd1YWdlLXByaW50aW5nLWVtYWlsLW5vdGlmaWNhdGlvbiI6Iihmb3Igbm90aWZpY2F0aW9uIHdoZW4gdGhlIHByaW50IGpvYiBpcyBjb21wbGV0ZSkiLCJsYW5ndWFnZS1leHBvcnQtbWFwLXZpZXctaW1hZ2UiOiJWaWV3IEltYWdlIiwibGFuZ3VhZ2UtbGF5ZXJsaXN0LWFjdGlvbnMtZGVzYyI6IlRoZSBsYXllciBsaXN0IC8gbGVnZW5kIGFjdGlvbiBtZW51IGl0ZW1zIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1kZWxldGUtZWRpdC10aXRsZSI6IkRlbGV0ZSBFZGl0IiwibGFuZ3VhZ2Utc2l0ZS1zZXJ2aWNlLWxheWVycy1mYWlsdXJlLXZpZXctd2FybmluZyI6IlRoZXJlIHdhcyBhIHByb2JsZW0gbG9hZGluZyBvbmUgb3IgbW9yZSBtYXAgc2VydmljZXMuIFRoZSBmb2xsb3dpbmcgbWFwIHNlcnZpY2VzIG1heSBiZSB1bmF2YWlsYWJsZToiLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC1wcmludGluZyI6IlByaW50aW5nIHswfSIsImxhbmd1YWdlLWNvbW1vbi1kb25lIjoiRG9uZSIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItZXJyb3Itc3luYy1mZWF0dXJlIjoiVGhlcmUgd2FzIGFuIGVycm9yIHN5bmNocm9uaXppbmcgZmVhdHVyZSAnezB9JzogezF9IiwibGFuZ3VhZ2UtdG9vbGJhci1lZGl0aW5nLXN5bmMtdG9vbHRpcCI6IlB1c2ggYW55IG9mZmxpbmUgZWRpdHMgdG8gdGhlIHNlcnZlciBhbmQgY2hlY2sgb3V0IGZyZXNoIGRhdGEiLCJsYW5ndWFnZS1zZWFyY2gtYmluZy1kaXN0cmljdCI6IkRpc3RyaWN0IiwibGFuZ3VhZ2UtbWVudS1nbG9iYWwtc2VhcmNoLWRlc2MiOiJTZWFyY2ggZm9yIGZlYXR1cmVzIG9uIHRoZSBtYXAuIiwibGFuZ3VhZ2UtbWVudS1lbnRlci1vZmZsaW5lIjoiR28gdG8gb2ZmbGluZSBtb2RlIiwibGFuZ3VhZ2UtdG9vbGJhci10YXNrcy1zaGFyZSI6IlNoYXJlIiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtZmVhdHVyZS1lZGl0aW5nLWNvbnRhaW5lciI6IkZlYXR1cmUgRWRpdGluZyBDb250YWluZXIgezB9IiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1wb2x5Z29uLWRlc2Mta2V5Ym9hcmQiOiJUbyBsZWFybiB3aGF0XHUyMDE5cyB0aGVyZSwgdXNlIGFycm93cyB0byBtb3ZlIHRoZSBwb2ludC4gSGl0IEVOVEVSIHRvIHBsb3QgYW5kIGJlZ2luIG1vdmluZyB0aGUgbmV4dCBwb2ludC4gSGl0IEVOVEVSIHR3aWNlIHRvIGZpbmlzaC4iLCJsYW5ndWFnZS1iYXNlbWFwLXN3aXRjaGVyLXZpZXctdGl0bGUiOiJCYXNlIE1hcHMiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctY3JlYXRlLWVkaXQtY3VycmVudC1sb2NhdGlvbi1kZXNjcmlwdGlvbiI6IkhvdyB3b3VsZCB5b3UgbGlrZSB0byBzZWxlY3QgeW91ciBmZWF0dXJlJ3MgbG9jYXRpb24/IiwibGFuZ3VhZ2UtY2FwdHVyZS1nZW9tZXRyeS1tdWx0aS1wb2ludF90b29sdGlwIjoiU2VsZWN0IHVzaW5nIG11bHRpcGxlIHBvaW50cyIsImxhbmd1YWdlLXNuYXBwaW5nLWFjdGl2YXRlZCI6IlNuYXBwaW5nIGFjdGl2YXRlZCIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLWZlYXR1cmUtZGV0YWlscy1jb21wYWN0IjoiQ29tcGFjdCBGZWF0dXJlIERldGFpbHMgezB9IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zdGVwLXpvb20taW4iOiJab29tcyBpbiBhIHN0ZXAuIiwibGFuZ3VhZ2Utb2ZmbGluZS1wcm92aXNpb25pbmctc2VjdXJlLXNpdGUtZXJyb3IiOiJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBzYXZpbmcgdGhlIHNlY3VyZSB2ZXJzaW9uIG9mIHRoZSBTaXRlOiB7MH0iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWdvLXRvLXN5bmMtcGFuZWwiOiJDbGljayBoZXJlIHRvIHJldmlldyB5b3VyIGVkaXRzIGFuZCB0aGVuIHN5bmMgeW91ciBvZmZsaW5lIGRhdGEuIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtbWVhc3VyZS1hcmVhLXRvb2wtc3RhdHVzLWtleWJvYXJkIjoiVXNlIGFycm93cyB0byBtb3ZlIHRoZSBwb2ludC4gSGl0IEVOVEVSIHRvIHBsb3QgYW5kIGJlZ2luIG1vdmluZyB0aGUgbmV4dCBwb2ludC4gSGl0IEVOVEVSIHR3aWNlIHRvIGZpbmlzaC4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXRvZ2dsZS12aWV3IjoiQWN0aXZhdGVzIG9yIGRlYWN0aXZhdGVzIGEgdmlldy4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXRha2UtYXBwbGljYXRpb24tb25saW5lIjoiQ29ubmVjdHMgdGhlIGFwcGxpY2F0aW9uIHRvIHRoZSBpbnRlcm5ldC4iLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LXBvbHlsaW5lIjoiTGluZSIsImxhbmd1YWdlLWNhcHR1cmUtZ2VvbWV0cnktdGl0bGUiOiJEaXNwbGF5IENhcHR1cmUgR2VvbWV0cnkiLCJsYW5ndWFnZS1jYXB0dXJlLWdlb21ldHJ5LXJlY3RhbmdsZV90b29sdGlwIjoiU2VsZWN0IGJ5IHJlY3RhbmdsZSIsImxhbmd1YWdlLW1hcC1zaXRlLWluaXRpYWxpemF0aW9uLWZhaWxlZCI6IlRoZSBzaXRlIGZhaWxlZCB0byBpbml0aWFsaXplLiIsImxhbmd1YWdlLWZlYXR1cmUtcmVsYXRlZC1uby1kYXRhIjoiTm8gZGF0YSIsImxhbmd1YWdlLW1lYXN1cmVtZW50LWxlbmd0aC1zZWxlY3QiOiJTZWxlY3QgbGVuZ3RoIHVuaXQiLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC12aXNpYmxlLWZlYXR1cmUtdW5jaGFuZ2VkIjoidW5jaGFuZ2VkLiIsImxhbmd1YWdlLXRvb2xiYXItdG9nZ2xlLWJ1ZmZlci1vZmYtbmFtZSI6IkJ1ZmZlcmluZyBPbiIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLWRhdGEtZnJhbWUtY2xvc2VkIjoiRGF0YSBmcmFtZSBjbG9zZWQuICAiLCJsYW5ndWFnZS11c2VyLXNpZ24tb3V0IjoiU2lnbiBvdXQiLCJsYW5ndWFnZS1nZW9sb2NhdGUtc3RvcC1kZXNjIjoiU3RvcCBhY3RpdmVseSB1cGRhdGluZyB5b3VyIGN1cnJlbnQgcG9zaXRpb24uIiwibGFuZ3VhZ2UtaWRlbnRpZnktbm8tZ2VvbWV0cnktZm9yLW1hcC10aXAtcmVzdWx0cyI6IkNhbid0IGV4ZWN1dGUgdGhlIFNob3dNYXBUaXBSZXN1bHRzIGNvbW1hbmQgd2l0aG91dCBhIGdlb21ldHJ5LiIsImxhbmd1YWdlLXJhc3RlcklkZW50aWZ5LWNhdGFsb2dJdGVtLWxhYmVsRm9ybWF0IjoiQ2F0YWxvZzogezB9LCB7MX0iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctZ2VvbWV0cnktbXVsdGktcG9pbnQiOiJNb3ZlIHRoZSBzZWxlY3RlZCBwb2ludHMgYnkgaG9sZGluZyBkb3duIGFuZCBkcmFnZ2luZy4gUmVsZWFzZSB0byBzdG9wIiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtbGF5ZXItZGF0YS1jb250YWluZXIiOiJMYXllciBEYXRhIENvbnRhaW5lciB7MH0iLCJsYW5ndWFnZS1mZWF0dXJlLWF0dGFjaG1lbnRzLWNoZWNraW5nIjoiQ2hlY2tpbmcgZm9yIGF0dGFjaG1lbnRzLi4uIiwibGFuZ3VhZ2UtZmVhdHVyZS1kYXRhbGlua3MiOiJEYXRhTGlua3MiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctaW52YWxpZC1udW1lcmljLXJhbmdlIjoiVGhlIHZhbHVlIGZvciB7MH0gaXMgb3V0IG9mIHJhbmdlLiIsImxhbmd1YWdlLWxheWVybGlzdC10aXRsZSI6IkxheWVycyIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItY2FjaGUtb24tc3luYyI6IkNhY2hlIHRoaXMgbGF5ZXIgb24gc3luYyIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1kc2stcG9seWxpbmUtdG9vbC1rZXlib2FyZCI6IlVzZSBhcnJvd3MgdG8gbW92ZSB0aGUgcG9pbnQuIEhpdCBFTlRFUiB0byBwbG90IGFuZCBiZWdpbiBtb3ZpbmcgdGhlIG5leHQgcG9pbnQuIEhpdCBFTlRFUiB0d2ljZSB0byBmaW5pc2guIiwibGFuZ3VhZ2UtbWFya3VwLWFkZC10ZXh0IjoiVHlwZSB0aGUgdGV4dCB5b3Ugd2FudCB0byBhZGQgYXQgdGhpcyBsb2NhdGlvbiBvbiB0aGUgbWFwLiIsImxhbmd1YWdlLXZpc3VhbGl6YXRpb24tZG9uZSI6IkRvbmUiLCJsYW5ndWFnZS10b29sYmFyLWJ1ZmZlcmluZy1lbmFibGUiOiJFbmFibGUgYnVmZmVyaW5nIiwibGFuZ3VhZ2UtaWRlbnRpZnktcmVjdGFuZ2xlLXRvb2wiOiJEcmFnIG9uIHRoZSBtYXAgdG8gZHJhdyBhIHJlY3RhbmdsZS4iLCJsYW5ndWFnZS10b29sYmFyLXNlbGVjdC1sYXllcnMtdG9nZ2xlLW9mZi1uYW1lIjoiTGF5ZXJzIGFyZSBGaWx0ZXJlZCIsImxhbmd1YWdlLW1lbnUtZXhwb3J0LXJlc3VsdHMtdG8tY3N2IjoiRXhwb3J0IHRvIENTViIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLWNpcmNsZS10b29sdGlwIjoiRHJhdyBhIGNpcmNsZSBvbiB0aGUgbWFwIiwibGFuZ3VhZ2Utd29ya2Zsb3ctcmVwb3J0LXVybC10aXRsZSI6IlJlcG9ydCBDb21wbGV0ZSIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItc3luY2luZyI6IlN5bmMgd2l0aCBTZXJ2ZXIiLCJsYW5ndWFnZS1jb21tb24tZmVhdHVyZS10ZW1wbGF0ZS1waWNrZXItZGVzYyI6IlNlbGVjdCBhIGZlYXR1cmUgdHlwZS4iLCJsYW5ndWFnZS13b3JrZmxvdy1ub25lLWF2YWlsYWJsZSI6Ik5vIHRhc2tzIGF2YWlsYWJsZS4iLCJsYW5ndWFnZS13b3JrZmxvdy1vZmZsaW5lLXRpdGxlIjoiV29ya2Zsb3cgTm90IEF2YWlsYWJsZSIsImxhbmd1YWdlLWZpbGUtcGlja2VyLW5vdC1zdXBwb3J0ZWQiOiJUaGUgZmlsZSBwaWNrZXIgaXMgbm90IHN1cHBvcnRlZCBieSB5b3VyIGJyb3dzZXIuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1jbGVhci1tYXJrdXAtcXVpZXQiOiJDbGVhcnMgYWxsIG9mIHRoZSBtYXJrdXAgZnJvbSB0aGUgbWFya3VwIGxheWVyIHdpdGhvdXQgcHJvbXB0aW5nIGZvciBjb25maXJtYXRpb24uIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci15b3UtYXJlLW9ubGluZSI6IllvdSBhcmUgaW4gb25saW5lIG1vZGUuIiwibGFuZ3VhZ2Utc2l0ZS1sb2ctb24tcmVxdWlyZWQtZXJyb3IiOiJZb3UgbXVzdCBsb2cgb24gdG8gYWNjZXNzIHRoaXMgYXBwbGljYXRpb24uIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtZHJhd21vZGUtdHJpYW5nbGUiOiJUcmlhbmdsZSIsImxhbmd1YWdlLW1lYXN1cmVtZW50LWRyYXdtb2RlLXBvbHlsaW5lIjoiTGluZSIsImxhbmd1YWdlLXRvb2xiYXItaWRlbnRpZnktcG9seWxpbmUtdG9vbHRpcCI6IkZpbmQgb3V0IGFib3V0IGFuIGFyZWEgb24gdGhlIG1hcCBkZWZpbmVkIGJ5IGEgbGluZSIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1pbnZhbGlkLW51bWJlciI6InswfSBtdXN0IGJlIGEgdmFsaWQgbnVtYmVyIGJldHdlZW4gezF9IGFuZCB7Mn0uIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lcnJvci1vY2N1cnJlZC13aGlsZS1zeW5jaGluZyI6IlRoZXJlIHdhcyBhbiBlcnJvciBzeW5jaHJvbml6aW5nLiIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLWxheWVyLWFjdGlvbnMiOiJMYXllciBBY3Rpb25zIHswfSIsImxhbmd1YWdlLXRvb2xiYXItdGFiLWVkaXRpbmciOiJFZGl0aW5nIiwibGFuZ3VhZ2UtZ2VvbG9jYXRlLWVycm9yIjoiVGhlcmUgd2FzIGFuIGVycm9yIGluIGdlb2xvY2F0aW9uOiAiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXNldC1oaWdobGlnaHQtZmlsbC1jb2xvciI6IlNldHMgdGhlIGZpbGwgY29sb3IgdXNlZCBmb3IgbmV3IGhpZ2hsaWdodHMsIHNwZWNpZmllZCBpbiA2IG9yIDggZGlnaXQgaGV4IGluIFJHQiBvciBBUkdCIGZvcm0uIiwibGFuZ3VhZ2UtYnVmZmVyLW9wdGlvbnMtY29udGludWUtYnV0dG9uLXRpdGxlIjoiQ29udGludWUgQnVmZmVyaW5nIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1mZWF0dXJlLWxheWVyLWNsZWFyLWNhY2hlLXNwZWMiOiJTcGVjaWZ5IHRoaXMgbGF5ZXIgYXMgbm90IHRvIGJlIGNhY2hlZCBvbiBuZXh0IHN5bmMuIiwibGFuZ3VhZ2UtY29tcGFjdC10b29sYmFyLW1vcmUtdG9vbHMiOiJWaWV3IE1vcmUgVG9vbHMiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXJlbW92ZS1oaWdobGlnaHQtbGF5ZXIiOiJSZW1vdmVzIHRoZSBoaWdobGlnaHQgbGF5ZXIgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUsIGlmIHRoZXJlIGlzIG9uZS4iLCJsYW5ndWFnZS1zZWFyY2gtYXJjZ2lzLWFkZHJlc3MiOiJBZGRyZXNzIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zaG93LW1hcC1jYWxsb3V0IjoiRGlzcGxheXMgYSBtYXAgY2FsbG91dCBhbmNob3JlZCB0byBhIGdpdmVuIHBvaW50LiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItY2FjaGluZy1ub3QtYWxsb3dlZCI6IllvdSBjYW5ub3QgY2FjaGUgZGF0YSBpbiBvZmZsaW5lIG1vZGUuIiwibGFuZ3VhZ2Utc2VhcmNoLXBlcmZvcm0tZ2xvYmFsLXNlYXJjaCI6IlBlcmZvcm0gYSBTZWFyY2giLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctZHNrLWZyZWVoYW5kLXBvbHlnb24tdG9vbCI6IkNsaWNrIG9yIHRhcCBvbiB0aGUgbWFwIHRvIGRyYXcgYSBwb2x5Z29uIHNoYXBlLiBEb3VibGUgY2xpY2svdGFwIHRvIHN0b3AiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1jaGFuZ2UtbWFya3VwLXN0eWxlIjoiU3R5bGVzIiwibGFuZ3VhZ2UtdG9vbGJhci1uYXZpZ2F0aW9uLWZ1bGwtZXh0ZW50LXRvb2x0aXAiOiJSZXR1cm4gdG8gdGhlIGZ1bGwgZXh0ZW50IG9mIHRoZSBtYXAiLCJsYW5ndWFnZS1tYXAtb3BlcmF0aW9uLXByb2plY3QtZmFpbGVkIjoiVGhpcyBvcGVyYXRpb24gZmFpbGVkIGJlY2F1c2Ugb2YgYSBwcm9qZWN0aW9uIGVycm9yLiIsImxhbmd1YWdlLW1lbnUtZm9vdGVyLW1lbnUtZGVzYyI6IkZvb3RlciBNZW51IiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtbWVhc3VyZS1mcmVlaGFuZC1saW5lLXRvb2wtdG9vbHRpcCI6IkRyYXcgYSBmcmVlaGFuZCBsaW5lIHRvIG1lYXN1cmUgYSBkaXN0YW5jZSIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLWZyZWVoYW5kLXBvbHlnb24tdG9vbHRpcCI6IkRyYXcgYSBmcmVlaGFuZCBzaGFwZSBvbiB0aGUgbWFwIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1kZWxldGUtZWRpdC1jb25maXJtYXRpb24tc2luZ3VsYXIiOiJBcmUgeW91IHN1cmUgeW91IHdpc2ggdG8gZGVsZXRlIHRoaXMgZWRpdD8iLCJsYW5ndWFnZS1oZWF0LW1hcHMtdGl0bGUiOiJIZWF0IE1hcCBPcHRpb25zIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLW11bHRpLWZlYXR1cmUtc2VsZWN0b3ItZXJyb3ItbWVzc2FnZSI6IllvdSBtdXN0IHNlbGVjdCBhIGZlYXR1cmUgdG8gY29udGludWUiLCJsYW5ndWFnZS1xdWVyeWJ1aWxkZXItc3BhdGlhbC1maWx0ZXItY3VycmVudC1leHRlbnQiOiJDdXJyZW50IEV4dGVudCIsImxhbmd1YWdlLWhlYXQtbWFwcy1pbnRlbnNpdHktc2xpZGVyLWludGVuc2l0eSI6ImhlYXQgbWFwIGludGVuc2l0eSIsImxhbmd1YWdlLW1lYXN1cmVtZW50LW51bGwtZ3JhcGhpY3MtZXJyb3IiOiJUaGUgZ3JhcGhpY3MgZm9yIHRoaXMgTWFwIGFyZSB1bmRlZmluZWQgb3Igbm90IHlldCBsb2FkZWQuIE1lYXN1cmVtZW50IFRvb2xzIGNhbm5vdCBjb250aW51ZS4iLCJsYW5ndWFnZS1tZW51LWJvb2ttYXJrLWFkZC1kZXNjIjoiQWRkIHRoZSBjdXJyZW50IG1hcCBleHRlbnQgdG8gdGhlIGxpc3Qgb2YgYm9va21hcmtzLCBzbyB0aGF0IEkgY2FuIHJldHVybiB0byBpdCBsYXRlci4iLCJsYW5ndWFnZS1idWZmZXItdW5pdC1tZXRlci1kaXNwbGF5LW5hbWUiOiJNZXRlcnMgKG0pIiwibGFuZ3VhZ2UtY2FwdHVyZS1nZW9tZXRyeS1wb2x5Z29uX3Rvb2x0aXAiOiJTZWxlY3QgYnkgcG9seWdvbiIsImxhbmd1YWdlLW9mZmxpbmUtcHJvdmlzaW9uaW5nLWZhaWxlZC1jb2RlMjIiOiJUaGUgZG93bmxvYWQgZm9yIG9mZmxpbmUgdXNlIGZhaWxlZC4gVGhlIGRvd25sb2FkZWQgcmVzb3VyY2VzIG1heSBiZSB0b28gbGFyZ2UgZm9yIHRoZSBvZmZsaW5lIHN0b3JhZ2Ugc3BhY2UuIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1tYW5hZ2UtbGF5ZXItb2ZmbGluZSI6Ik9mZmxpbmUiLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1tZWFzdXJlLXBvbHlnb24tdG9vbC1zdGF0dXMiOiJDbGljayBvciB0YXAgdG8gZHJhdyBhIG11bHRpLXNpZGVkIHNoYXBlIGFuZCBmaW5kIGFyZWEuIERvdWJsZS1jbGljay90YXAgdG8gZmluaXNoLiIsImxhbmd1YWdlLW1hcC16b29tLWluIjoiRHJhZyBvbiB0aGUgbWFwIHRvIHpvb20gaW4gdG8gdGhhdCBhcmVhLiBUaGUgc21hbGxlciB0aGUgYXJlYSwgdGhlIGZ1cnRoZXIgeW91IHpvb20gaW4uIiwibGFuZ3VhZ2UtdG9vbGJhci1zbmFwcGluZy1zZWxlY3QtbGF5ZXJzIjoiU2VsZWN0IFNuYXBwaW5nIExheWVycyIsImxhbmd1YWdlLW1lbnUtc2hvdy1yZXN1bHRzLWxpc3QtZGVzYyI6IlN3aXRjaCB0byBMaXN0IFZpZXciLCJsYW5ndWFnZS10b29sYmFyLWdyb3VwLWZpbmQtZGF0YS10b29scyI6IkZpbmQiLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC12aXN1YWxpemF0aW9uLXZpZXciOiJWaXN1YWxpemF0aW9uIFZpZXcgezB9IiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtbWVhc3VyZS1saW5lLXRvb2wtdG9vbHRpcCI6IkRyYXcgYSBtdWx0aS1wYXJ0IGxpbmUgdG8gbWVhc3VyZSBhIGRpc3RhbmNlIiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1mcmVlaGFuZC1wb2x5Z29uIjoiRnJlZWhhbmQgU2hhcGUgSWRlbnRpZnkiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctc2VsZWN0ZWQtbGF5ZXIiOiJTZWxlY3RlZCBGZWF0dXJlIExheWVyIiwibGFuZ3VhZ2UtbWFwLXRpcC1mZWF0dXJlLW5leHQiOiJOZXh0IiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtcG9seWxpbmUtdG9vbHRpcCI6IkRyYXcgYSBsaW5lIG9uIHRoZSBtYXAiLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC13b3JrZmxvdy1saXN0IjoiV29ya2Zsb3cgTGlzdCB7MH0iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1jaXJjbGUiOiJDaXJjbGUiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctZHNrLXBvbHlnb24tdG9vbCI6IkNsaWNrIG9yIHRhcCBvbiB0aGUgbWFwIHRvIGFkZCBwb2ludHMgdG8gYSBwb2x5Z29uLiBEb3VibGUgY2xpY2svdGFwIHRvIHN0b3AiLCJsYW5ndWFnZS1tZWFzdXJlbWVudC11bml0LW1pbGUiOiJNaWxlcyAobWkpIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1ub3Qtc3luY2hyb25pemVkLXRvLXNlcnZlciI6IllvdSBjdXJyZW50bHkgaGF2ZSBlZGl0cyB0aGF0IGhhdmUgbm90IGJlZW4gc3luY2hyb25pemVkIHdpdGggdGhlIHNlcnZlci4gIiwibGFuZ3VhZ2UtdG9vbGJhci1lZGl0aW5nLXRvb2xzIjoiRWRpdCBGZWF0dXJlcyIsImxhbmd1YWdlLWZlYXR1cmUtY2hhcnRzIjoiQ2hhcnRzIiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtY3JlYXRlLW9yLWVkaXQiOiJDcmVhdGUgb3IgRWRpdCB7MH0iLCJsYW5ndWFnZS1xdWVyeWJ1aWxkZXItb3BlcmF0b3ItbnVsbCI6ImlzIG51bGwiLCJsYW5ndWFnZS1tZW51LXJ1bi1yZXBvcnQiOiJSdW4gYSBSZXBvcnQiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1kZWxldGUtdG9vbHRpcCI6IkRlbGV0ZSBhbiBleGlzdGluZyBkcmF3aW5nLiIsImxhbmd1YWdlLWNvbW1vbi1mZWF0dXJlLXRlbXBsYXRlLXBpY2tlciI6IkNyZWF0ZSBhIGZlYXR1cmUiLCJsYW5ndWFnZS1jdXJyZW50X2V4dGVudF90b29sdGlwIjoiVXNlIHRoZSBjdXJyZW50IG1hcCBhcmVhIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1pbml0aWFsaXplLXNpdGUiOiJUZWxscyB0aGUgR2VvY29ydGV4IEVzc2VudGlhbHMgU2l0ZSBvYmplY3QgdG8gYmVnaW4gaW5pdGlhbGl6YXRpb24uIiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtY29vcmRpbmF0ZXMtZWFzdCI6InswfSDCsCBFYXN0IiwibGFuZ3VhZ2UtbWVudS1ydW4td29ya2Zsb3ctZGVzYyI6IlNlbGVjdCBmcm9tIGEgbGlzdCBvZiBhdmFpbGFibGUgdGFza3MuIiwibGFuZ3VhZ2UtdG9vbGJhci1ncm91cC1sYXllcnMiOiJMYXllcnMiLCJsYW5ndWFnZS1uYXRpdmUtb2ZmbGluZS1maWxlLXVwbG9hZCI6IkhUTUwgVmlld2VyIGlzIGluIG9mZmxpbmUgbW9kZS4gQXR0YWNobWVudCB3aWxsIGJlIHVwbG9hZGVkIHdoZW4gY29ubmVjdGVkLiIsImxhbmd1YWdlLXF1ZXJ5YnVpbGRlci1vcGVyYXRvci1lcXVhbHMiOiI9IiwibGFuZ3VhZ2UtbWVudS1idWZmZXItaWRlbnRpZnktZmVhdHVyZSI6IlNob3cgQnVmZmVyIE9wdGlvbnMiLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1kcmF3bW9kZS1lbGxpcHNlIjoiRWxsaXBzZSIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1tYmwtcG9seWxpbmUtdG9vbCI6IlRhcCBvbiB0aGUgbWFwIHRvIGFkZCBwb2ludHMgdG8gYSBsaW5lLiIsImxhbmd1YWdlLW9mZmxpbmUtYnVuZGxlLWluZGV4LWVycm9yIjoiVGhlcmUgd2FzIGFuIGVycm9yIHNhdmluZyB0aGUgaW5kZXggZm9yIG9mZmxpbmUgZGF0YS4gWW91IG1heSBiZSBvdXQgb2Ygc3BhY2UuIEVycm9yOiB7MH0iLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1kcmF3bW9kZS1jaXJjbGUiOiJDaXJjbGUiLCJsYW5ndWFnZS10b29sYmFyLW9wZW4tdG9vbGJhciI6Ik9wZW4gdG9vbGJhciIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLWNvbXBhY3QtdG9vbGJhci12aWV3IjoiQ29tcGFjdFRvb2xiYXJWaWV3IiwibGFuZ3VhZ2Utc25hcHBpbmctZXJyb3IiOiJBbiBlcnJvciBvY2N1cmVkIGR1cmluZyBzbmFwcGluZy4iLCJsYW5ndWFnZS10b29sYmFyLXRhYi1tYXAiOiJNYXAiLCJsYW5ndWFnZS10b29sYmFyLW5hdmlnYXRpb24iOiJOYXZpZ2F0aW9uIiwibGFuZ3VhZ2UtbWFwLXRpcC1jbG9zZSI6IkNsb3NlIE1hcCBUaXAiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctbWJsLXBvbHlnb24tdG9vbCI6IlRhcCBvbiB0aGUgbWFwIHRvIGFkZCBwb2ludHMgdG8gYSBwb2x5Z29uLiIsImxhbmd1YWdlLW1lYXN1cmVtZW50LW1lYXN1cmUtYXJlYS10b29sLXN0YXR1cyI6IkNsaWNrIG9yIHRhcCB0byBkcmF3IGEgbXVsdGktc2lkZWQgc2hhcGUgYW5kIGZpbmQgYXJlYS4gRG91YmxlLWNsaWNrL3RhcCB0byBmaW5pc2guIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtcmVzdWx0cy1maWVsZC1sZW5ndGgiOiJMZW5ndGgiLCJsYW5ndWFnZS10b29sYmFyLW5hdmlnYXRpb24tZnVsbC1leHRlbnQiOiJGdWxsIEV4dGVudCIsImxhbmd1YWdlLXRvb2xiYXItdGFza3MtcHJpbnQtbWFwIjoiUHJpbnQiLCJsYW5ndWFnZS10b29sYmFyLWdyb3VwLWVkaXQtZmVhdHVyZXMiOiJFZGl0IEZlYXR1cmVzIiwibGFuZ3VhZ2UtYnVmZmVyLWVycm9yLWlkZW50aWZ5LWJ1ZmZlcmVkLWZlYXR1cmUtc2V0IjoiQ291bGQgbm90IGV4ZWN1dGUgSWRlbnRpZnlCdWZmZXJlZEZlYXR1cmVTZXQgb3BlcmF0aW9uLiBGZWF0dXJlIFNldCBvciBGZWF0dXJlIFNldCBDb2xsZWN0aW9uIG5vdCBmb3VuZC4iLCJsYW5ndWFnZS1nZW9sb2NhdGUtZm9sbG93LWRlc2MiOiJLZWVwIHRoZSBzY3JlZW4gY2VudGVyZWQgb24geW91ciBsb2NhdGlvbi4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWRlbGV0ZS1lZGl0LWNvbmZpcm1hdGlvbiI6IkFyZSB5b3Ugc3VyZSB5b3Ugd2lzaCB0byBkZWxldGUgdGhpcyBlZGl0IGFuZCB7MH0gZGVwZW5kZW50IGVkaXRzPyIsImxhbmd1YWdlLXByaW50aW5nLXByaW50LXJlcXVlc3Qtc3RhdHVzLWRlc2NyaXB0aW9uIjoiVG8gdmlldyB0aGUgc3RhdHVzLCBwbGVhc2UgY2xpY2sgJ1ByaW50IEpvYiBTdGF0dXMnIGFuZCByZWZyZXNoLiIsImxhbmd1YWdlLW1lYXN1cmVtZW50LW1lYXN1cmUtY2lyY2xlLXRvb2wtbmFtZSI6IkNpcmNsZSIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1tb2R1bGUtdGl0bGUiOiJGZWF0dXJlIEVkaXRpbmciLCIvL2RhdGVwaWNrZXIucmVnaW9uYWwuaGVscCI6IkNvcHkgc2V0dGluZ3MgZnJvbSBvbmUgb2YgdGhlIGZpbGVzIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LXVpL3RyZWUvbWFzdGVyL3VpL2kxOG4iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctaW52YWxpZC1kZWNpbWFsIjoiezB9IG11c3QgYmUgYSB2YWxpZCBkZWNpbWFsIG51bWJlci4iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1wb2x5Z29uLWRlc2MiOiJDbGljayBvciB0YXAgbG9jYXRpb25zIHRvIGRlZmluZSBhIHBvbHlnb24uIERvdWJsZS1jbGljay90YXAgdG8gZmluaXNoLiIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLWVkaXQtbG9nLXZpZXciOiJTeW5jIE9mZmxpbmUgRGF0YSB7MH0iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWhhcy1nZW9tZXRyeS1zaG9ydCI6IkhhcyBnZW9tZXRyeS4iLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1kcmF3bW9kZS1hcnJvdyI6IkFycm93IiwibGFuZ3VhZ2UtdG9vbGJhci1zbmFwcGluZy1lbmFibGUiOiJFbmFibGUgU25hcHBpbmciLCJsYW5ndWFnZS1idWZmZXItZXJyb3ItZGV0YWlscy11bmF2YWlsYWJsZSI6IkVycm9yIGRldGFpbHMgdW5hdmFpbGFibGUuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1jbG9zZS1yZXN1bHRzLWZyYW1lIjoiRGVhY3RpdmF0ZXMgdGhlIFJlc3VsdHNSZWdpb24uIiwibGFuZ3VhZ2UtdG9vbGJhci1ncm91cC0zcmQtcGFydHktbWFwcyI6IkxpbmtlZCBNYXBzIiwibGFuZ3VhZ2UtcXVlcnlidWlsZGVyLXNpbXBsZS1maWx0ZXItdGl0bGUiOiJGaWx0ZXIiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWFjdGl2YXRlLXZpZXciOiJBY3RpdmF0ZXMgYSB2aWV3LiIsImxhbmd1YWdlLXdvcmtmbG93LXJlcG9ydC11cmwtdGV4dCI6IkNsaWNrIGhlcmUuIiwibGFuZ3VhZ2UtcmVzdWx0cy10b2dnbGUtdGFibGUtdmlldyI6IlN3aXRjaCB0byBUYWJsZSIsImxhbmd1YWdlLXByb21wdC1kZWZhdWx0LXRpdGxlIjoiUHJvbXB0IiwibGFuZ3VhZ2UtcnVuLXJlcG9ydC1lcnJvci1tZXNzYWdlLWdlbmVyaWMiOiJBbiBlcnJvciBvY2N1cnJlZCB3aGVuIGF0dGVtcHRpbmcgdG8gcnVuIHlvdXIgcmVwb3J0LiIsImxhbmd1YWdlLXNlYXJjaC1wbGFjZWhvbGRlciI6IlNlYXJjaC4uLiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItbm8tY2FjaGVkLWRhdGEiOiJObyBjYWNoZWQgZGF0YSBhdmFpbGFibGUiLCJsYW5ndWFnZS1tYXJrdXAtY2hhbmdlLXRleHQtdGV4dCI6IkVudGVyIG5ldyB0ZXh0LiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tdXBkYXRlLWF0dGFjaG1lbnQiOiJVcGRhdGVzIGEgZmVhdHVyZSBhdHRhY2htZW50LiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy11bmRvYWJsZS1hZGQiOiJBZGQgRmVhdHVyZXMiLCJsYW5ndWFnZS1tZW51LW1hbmFnZS1zeW5jLXNldHRpbmdzIjoiTWFuYWdlIHN5bmMgc2V0dGluZ3MiLCJsYW5ndWFnZS1tZWFzdXJlbWVudC11bml0LXNxeWFyZC1zaG9ydCI6InlkwrIiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctbXVsdGktZmVhdHVyZS1zZWxlY3Rvci1tZXNzYWdlIjoiU2VsZWN0IGEgZmVhdHVyZSB0byBlZGl0IiwibGFuZ3VhZ2UtbGVnZW5kLW5vLWl0ZW1zIjoiTm8gaXRlbXMgdG8gZGlzcGxheS4iLCJsYW5ndWFnZS1sYXllci1zZWxlY3Rvci1kZWZhdWx0LWNsZWFyLWFsbC10b29sdGlwIjoiQ2xlYXIgYWxsIGxheWVycyIsImxhbmd1YWdlLWJ1ZmZlci11bml0LXlhcmQtZGlzcGxheS1uYW1lIjoiWWFyZHMgKHlkKSIsImxhbmd1YWdlLW5vLXByaW50LXRlbXBsYXRlIjoiTm8gcHJpbnQgdGVtcGxhdGVzIGFyZSBjb25maWd1cmVkIGZvciB0aGlzIHNpdGUuIiwibGFuZ3VhZ2UtYnVmZmVyLXRhcmdldC1tb2R1bGVzLWVycm9yIjoiezB9OiBUYXJnZXQgbW9kdWxlcyBub3Qgc2V0LiBQbGVhc2UgY2hlY2sgeW91ciBjb25maWd1cmF0aW9uLiIsImxhbmd1YWdlLWJhc2VtYXAtc2xpZGVyLXRvZ2dsZS1idXR0b24iOiJPcGVuIGFuZCBjbG9zZSBiYXNlIG1hcCBzbGlkZXIiLCJsYW5ndWFnZS1sYXllci1zZWxlY3Rvci1pZGVudGlmeS1jbGVhci1hbGwtdG9vbHRpcCI6IkNsZWFyIGFsbCBpZGVudGlmaWFibGUgbGF5ZXJzIiwibGFuZ3VhZ2UtZmVhdHVyZS1jb29yZGluYXRlcy1sYXQtbG9uZyI6IkxhdC9Mb25nIiwibGFuZ3VhZ2UtbWVudS1leHBvcnQtcmVzdWx0cy10by14bHN4LWRlc2MiOiJFeHBvcnQgUmVzdWx0cyB0byBYTFNYIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWNvbmZpcm0tbG93LWFjY3VyYWN5LWdlb2xvY2F0aW9uLXRpdGxlIjoiR2VvbG9jYXRpb24gUmVzdWx0IiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtZWRpdC10b29sdGlwIjoiRWRpdCBhbiBleGlzdGluZyBkcmF3aW5nIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lZGl0LWFjdGlvbi1jcmVhdGVkIjoiQ3JlYXRlZCIsImxhbmd1YWdlLW1lYXN1cmVtZW50LWRyYXdtb2RlLXBvbHlnb24iOiJQb2x5Z29uIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1yZW1vdmUtZmVhdHVyZS1zZXQtY29sbGVjdGlvbi1ieS1pZCI6IlJlbW92ZXMgdGhlIHNwZWNpZmllZCBjb2xsZWN0aW9uIGZyb20gdGhlIGZlYXR1cmUgc2V0IG1hbmFnZXIuIiwibGFuZ3VhZ2UtcXVlcnlidWlsZGVyLW5vdC1hdmFpbGFibGUtb2ZmbGluZSI6IiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1kZWxldGUtd2l0aC1yZWxhdGlvbi1mb3JiaWRkZW4iOiJUaGlzIGZlYXR1cmUgaXMgcmVsYXRlZCB0byBvdGhlcnMgYW5kIGNhbm5vdCBiZSBkZWxldGVkIHVudGlsIHRoZSByZWxhdGVkIHJlY29yZHMgYXJlIGRlbGV0ZWQuIiwibGFuZ3VhZ2UtaGVhdC1tYXBzLW5vLWZpZWxkcyI6Ik5vIGF2YWlsYWJsZSBmaWVsZHMiLCJsYW5ndWFnZS1tZWFzdXJlbWVudC11bml0LXNxbmF1dGljYWxtaWxlIjoiTmF1dGljYWwgTWlsZcKyIChOTcKyKSIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItYXR0YWNoLXBob3RvLWRlc2MiOiJVc2UgdGhlIGNhbWVyYSB0byBhdHRhY2ggYSBwaG90byB0byB0aGlzIGZlYXR1cmUuIiwibGFuZ3VhZ2UtdG9vbGJhci10YXNrcy1zaGFyZS10b29sdGlwIjoiU2hhcmUgdGhlIGN1cnJlbnQgbWFwIG9uIHRoZSBtb3N0IGNvbW1vbiBTb2NpYWwgTWVkaWEiLCJsYW5ndWFnZS1iYXNlbWFwLXN3aXRjaGVyLXN3aXRjaCI6IlNlbGVjdCBhIGJhc2UgbWFwIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zZXQtZWRpdG9yLWZlYXR1cmUtZ2VvbWV0cnkiOiJTZXRzIHRoZSBnZW9tZXRyeSBvZiB0aGUgZmVhdHVyZSB0aGF0IGlzIGN1cnJlbnRseSBiZWluZyBlZGl0ZWQgaW4gdGhlIEF0dHJpYnV0ZSBFZGl0b3IsIGFuZCBhY3RpdmF0ZXMgdGhlIEF0dHJpYnV0ZUVkaXRvciBWaWV3LiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItd2lsbC1jYWNoZS1kZXNjIjoiRmVhdHVyZXMgaW4gdGhlIGZvbGxvd2luZyBhcmVhIHdpbGwgYmUgYXZhaWxhYmxlIG9mZmxpbmUgYWZ0ZXIgc3luYzoiLCJsYW5ndWFnZS1tYXAtc2NhbGUiOiJNYXAgU2NhbGUiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXBhbi10by1mZWF0dXJlIjoiUGFucyB0byB0aGUgR2VvY29ydGV4IGZlYXR1cmUuIiwibGFuZ3VhZ2UtbWVudS12aXN1YWxpemF0aW9uIjoiVHVybiBvbi9vZmYgbGF5ZXIgdmlzdWFsaXphdGlvbnMiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVkaXQtYWN0aW9uLWRlbGV0ZWQiOiJEZWxldGVkIiwibGFuZ3VhZ2UtZW50ZXItb25saW5lLWRlc2MiOiJHbyB0byBvbmxpbmUgbW9kZSBhbmQgdmlldyBsaXZlIG1hcCBkYXRhIGZyb20gdGhlIHdlYi4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXNhdmUtc3luYy1zZXR0aW5ncyI6IlVwZGF0ZSBDYWNoZWQgQXJlYSIsImxhbmd1YWdlLW1lbnUtbWFwdGlwLWFjdGlvbnMtdmlldy1kZXRhaWxzIjoiVmlldyBBZGRpdGlvbmFsIERldGFpbHMiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1wb2x5Z29uLXRvb2x0aXAiOiJEcmF3IGEgY3VzdG9tIHNoYXBlIG9uIHRoZSBtYXAiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWRpc3BsYXktd29ya2Zsb3ctY29udGFpbmVyLWNvbnRlbnQiOiJEaXNwbGF5cyBhIHZpZXcgaW4gYSB3b3JrZmxvdyBjb250YWluZXIuIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtdW5pdC1raWxvbWV0ZXItc2hvcnQiOiJrbSIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLWVkaXQtZGVzYy1rZXlib2FyZCI6IlVzZSBhcnJvd3MgdG8gbW92ZSB0aGUgcG9pbnQuIEhpdCBFTlRFUiB0byBiZWdpbiBlZGl0aW5nIGFuIGV4aXN0aW5nIGRyYXdpbmcuIiwibGFuZ3VhZ2UtbWVudS1sYXRpdHVkZS1nZW9ncmFwaGljcy1kZXNjIjoiTGF0aXR1ZGUgR2VvZ3JhcGhpY3MgR3JvdXAgTHRkLiIsImxhbmd1YWdlLXRvb2xiYXItYnVmZmVyLXRvZ2dsZS10b29sdGlwIjoiQnVmZmVyIGFuIGFyZWEgYXJvdW5kIHlvdXIgc2VsZWN0aW9uIiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtc2hhcmUiOiJTaGFyZSB7MH0iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXN5bmMiOiJQcmVwYXJlIHZpZXdlciBmb3Igb2ZmbGluZSB1c2UgaWYgcmVxdWlyZWQsIHNlbmQgb2ZmbGluZSBlZGl0cyB0byB0aGUgc2VydmVyIGFuZCByZWZyZXNoIGNhY2hlZCBtYXAgZGF0YS4iLCJsYW5ndWFnZS10b29sYmFyLWVkaXRpbmctc3luYyI6IlN5bmMiLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC1lZGl0LWZlYXR1cmUiOiJFZGl0IEZlYXR1cmUgezB9IiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWNyZWF0ZS1lZGl0LW5vLWZlYXR1cmVzLWZvdW5kIjoiTm8gZmVhdHVyZXMgd2VyZSBmb3VuZCB3aXRoIG1hdGNoaW5nIHZhbHVlLiBXaGF0IHdvdWxkIHlvdSBsaWtlIHRvIGRvPyIsImxhbmd1YWdlLXJ1bi1yZXBvcnQtZXJyb3ItdGl0bGUiOiJSZXBvcnQgRXJyb3IiLCJsYW5ndWFnZS1tZW51LWlkZW50aWZ5LWZyZWVoYW5kLWRlc2MiOiJEcmF3IGEgc2hhcGUgdG8gdmlldyBpbmZvcm1hdGlvbiBhYm91dCB0aGF0IGFyZWEuIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWNpcmNsZS10b29sIjoiRHJhZyBvbiB0aGUgbWFwIHRvIGRyYXcgYSBjaXJjbGUiLCJsYW5ndWFnZS1hdXRoLXRpdGxlIjoiQXV0aGVudGljYXRpb24gUmVxdWlyZWQiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXNob3ctZmVhdHVyZS1kZXRhaWxzIjoiQ3JlYXRlcyBhbmQgZGlzcGxheXMgdGhlIEZlYXR1cmUgRGV0YWlscyBkaWFsb2cgZm9yIHRoZSBmZWF0dXJlIG9yIGZlYXR1cmUgc2V0IGNvbGxlY3Rpb24gc3BlY2lmaWVkLiIsImxhbmd1YWdlLW9mZmxpbmUtdmlld2VyLXByb3Zpc2lvbmluZy1mYWlsZWQiOiJUaGUgZG93bmxvYWQgb2YgcmVzb3VyY2VzIGZvciBvZmZsaW5lIHVzZSBmYWlsZWQuIiwibGFuZ3VhZ2UtcnVuLXJlcG9ydC1jb21wbGV0ZS1oZWFkaW5nLXN5bmMiOiJSZXBvcnQgUmVhZHkiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctY3JlYXRlLXJlbGF0ZWQtZmVhdHVyZSI6IkNyZWF0ZSBhIG5ldyByZWxhdGVkIHswfSByZWNvcmQiLCJsYW5ndWFnZS1zbmFwcGluZy1kZWFjdGl2YXRlZCI6IlNuYXBwaW5nIGRlYWN0aXZhdGVkIiwibGFuZ3VhZ2UtbWVudS16b29tLWluaXRpYWwtZXh0ZW50LWRlc2MiOiJSZXR1cm4gdG8gdGhlIGluaXRpYWwgbWFwIHBvc2l0aW9uIGFuZCB6b29tIGxldmVsLiIsImxhbmd1YWdlLWNvbW1vbi1xdWVyeS1yZXN1bHRzIjoiUXVlcnkgUmVzdWx0cyIsImxhbmd1YWdlLWJvb2ttYXJrcy1tYXAtc2NhbGUiOiJNYXAgU2NhbGU6IDE6IiwibGFuZ3VhZ2UtbWFwLXNpdGUtYXV0aG9yaXphdGlvbi1mYWlsZWQiOiJBY2Nlc3MgRGVuaWVkLiIsImxhbmd1YWdlLWxlZ2VuZC1rbWwtZGVmYXVsdC10aXRsZSI6IktNTCIsImxhbmd1YWdlLWZyYW1ld29yay11aS12aWV3LWNvbnRhaW5lci12aWV3LWNsb3NlIjoiQ2xvc2UgezB9IiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtZnJlZWhhbmQtdG9vbHRpcCI6IkRyYXcgYSBmcmVlaGFuZCBsaW5lIG9uIHRoZSBtYXAiLCJsYW5ndWFnZS1sYXllcmxpc3Qtb3BhY2l0eS1zbGlkZXItZGVzY3JpcHRpb24iOiJsYXllciBvcGFjaXR5IiwibGFuZ3VhZ2UtY2xlYXItc3RvcmFnZS12aWV3LWRlc2NyaXB0aW9uIjoiQ2xlYXIgYWxsIG9mZmxpbmUgZGF0YSBmb3I6IiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1sYXllcnMtY2hhbmdlLXRvb2x0aXAiOiJFbmFibGUvRGlzYWJsZSBsYXllcnMgc2VsZWN0ZWQgZm9yIGlkZW50aWZ5IG9wZXJhdGlvbnMiLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1hbGVydC10aXRsZSI6Ik1lYXN1cmVtZW50IFRvb2xzIFN0YXR1cyBBbGVydCIsImxhbmd1YWdlLWZlYXR1cmUtbG9hZGluZy1yZWxhdGVkLWZlYXR1cmVzIjoiTG9hZGluZyByZWxhdGVkIGZlYXR1cmVzLi4uIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1tYXAtcmVzaXplIjoiVGVsbHMgdGhlIG1hcCBjb250cm9sIHRvIHJlc2l6ZSBpdHNlbGYuIFRoaXMgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciBhbHRlcmluZyB0aGUgbWFwIGNvbnRhaW5lcidzIGRpbWVuc2lvbnMuIiwibGFuZ3VhZ2UtbGF5ZXJsaXN0LXNlcnZpY2UtdW5hdmFpbGFibGUiOiJUaGlzIHNlcnZpY2UgbWF5IGJlIGN1cnJlbnRseSB1bmF2YWlsYWJsZS4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVkaXQtYWN0aW9uLWRlbGV0ZWQtcmVsYXRlZCI6IkRlbGV0ZWQgcmVsYXRlZCIsImxhbmd1YWdlLW1lYXN1cmVtZW50LXVuaXQtbmF1dGljYWxtaWxlLXNob3J0IjoiTk0iLCJsYW5ndWFnZS1oZWF0LW1hcHMtbm9uZSI6Ik5vbmUiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWNsZWFyaW5nLWRhdGEiOiJDbGVhcmluZyBkYXRhLi4uIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lcnJvci1kZWxldGluZy1lZGl0IjoiVGhlcmUgd2FzIGFuIGVycm9yIGRlbGV0aW5nIHRoZSBlZGl0OiB7MH0iLCJsYW5ndWFnZS1idWZmZXItYWN0aXZlLXRvb2wtYWRkb24tbWVzc2FnZSI6Ik5vdGU6IEJ1ZmZlcmluZyBpcyBhY3RpdmUuIEEgYnVmZmVyIG9mIHswfSB7MX0gd2lsbCBiZSBhcHBsaWVkLiIsImxhbmd1YWdlLWNvbW1vbi1kZWJ1Zy1sb2cta2V5cyI6IlRvIHZpZXcgdGhlIGxvZyBvbiBhIGRlc2t0b3AgbWFjaGluZSwgcHJlc3MgQ3RybCArIFNoaWZ0ICsgfi4gT24gYSBtb2JpbGUgZGV2aWNlLCBwcmVzcyBhbmQgaG9sZCB0aGUgdG9vbGJhci4iLCJsYW5ndWFnZS1iYXNlbWFwLXN3aXRjaGVyLXZpZXctZGVzY3JpcHRpb24iOiJTZWxlY3Qgb25lIG9mIHRoZSBhdmFpbGFibGUgYmFzZSBtYXBzIiwibGFuZ3VhZ2UtZmVhdHVyZS1jb29yZGluYXRlcy10b2dnbGUtYnV0dG9uIjoiT3BlbiBhbmQgY2xvc2UgY29vcmRpbmF0ZXMgd2lkZ2V0IiwibGFuZ3VhZ2UtY29tbW9uLXZpZXctbG9nIjoiVmlldyBMb2ciLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1wb2x5Z29uLXByZWRpY3RpdmUtbWFya3VwLWxhYmVsIjoiQ3VycmVudDogezB9IHsxfTsgQXJlYTogezJ9IHszfTsgUGVyaW1ldGVyOiB7NH0gezV9IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1hY3RpdmF0ZS1jb250YWluZXJzLWZvci13b3JrZmxvdyI6IkFjdGl2YXRlcyBhbnkgd29ya2Zsb3cgY29udGFpbmVyIHZpZXdzIGFzc29jaWF0ZWQgd2l0aCBhIGdpdmVuIHdvcmtmbG93LiIsImxhbmd1YWdlLWNhcHR1cmUtZ2VvbWV0cnktcmVxdWlyZWQtbWVzc2FnZSI6IlBsZWFzZSBzZWxlY3QgYSBnZW9tZXRyeSBvbiB0aGUgbWFwIHRvIHByb2NlZWQiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctc3RvcC1lZGl0aW5nLWdlb21ldHJ5LWNhcHRpb24iOiJTYXZlIEdlb21ldHJ5IiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtdW5pdC1uYXV0aWNhbG1pbGUiOiJOYXV0aWNhbCBNaWxlcyAoTk0pIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zZXQtZWRpdC1sb2ciOiJTZXRzIHRoZSBlZGl0IGxvZywgcGFzc2luZyBpdCBpbnRvIGEgY2FsbGJhY2suIElmIGFuIGVycm9yIG9jY3VycywgdGhlIGVycm9yIGlzIHBhc3NlZCBpbnRvIHRoZSBjYWxsYmFjay4iLCJsYW5ndWFnZS10b29sYmFyLW5hdmlnYXRpb24taW5pdGlhbC1leHRlbnQiOiJJbml0aWFsIFZpZXciLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLW1hbmFnZS1sYXllci1vbmxpbmUiOiJPbmxpbmUiLCJsYW5ndWFnZS1zZWFyY2gtaW5zdGFudC1wcm92aWRlci1zZWFyY2gtY29tcGxldGVkIjoiRmluaXNoaW5nIGluc3RhbnQgc2VhcmNoLiIsImxhbmd1YWdlLWNvbW1vbi1zaG93IjoiU2hvdyIsImxhbmd1YWdlLWNvbW1vbi1leHRyYWN0LWRhdGEiOiJFeHRyYWN0IERhdGEiLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1wb2x5bGluZS1wcmVkaWN0aXZlLW1hcmt1cC1sYWJlbCI6IkN1cnJlbnQ6IHswfSB7MX07IFRvdGFsOiB7Mn0gezN9IiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtcG9seWxpbmUiOiJMaW5lIiwibGFuZ3VhZ2UtZmVhdHVyZS1kZXRhaWxzLWZvciI6IkRldGFpbHMgRm9yIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zaG93LW1hcC1lbGVtZW50IjoiRGlzcGxheXMgYW4gZWxlbWVudCBhbmNob3JlZCB0byBhIHNwZWNpZmljIHBvaW50IG9uIHRoZSBtYXAuIiwibGFuZ3VhZ2UtZ2VvbG9jYXRlLWZpbmQiOiJGaW5kIE1lIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtdGV4dC1kZXNjIjoiQ2xpY2sgYSBsb2NhdGlvbiB3aGVyZSB5b3Ugd2FudCB0byBhZGQgdGV4dCBvbiB0aGUgbWFwLiIsImxhbmd1YWdlLXRvb2xiYXItZ3JvdXAtdGFza3MiOiJUYXNrcyIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLWlkZW50aWZpYWJsZS1sYXllcnMiOiJJZGVudGlmaWFibGUgTGF5ZXJzIHswfSIsImxhbmd1YWdlLWludGVncmF0aW9uLW5vLWl0ZW1zIjoiTm8gaXRlbXMgdG8gZGlzcGxheSIsImxhbmd1YWdlLWxheWVyLXNlbGVjdG9yLXRpdGxlIjoiSWRlbnRpZmlhYmxlIExheWVycyIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLWRhdGEtZnJhbWUtcmVzdWx0cy1jb250YWluZXIiOiJEYXRhIEZyYW1lIFJlc3VsdHMgQ29udGFpbmVyIHswfSIsImxhbmd1YWdlLWZlYXR1cmUtY29vcmRpbmF0ZXMtV0tJRCI6IldLSUQiLCJsYW5ndWFnZS1tb250aHMtMTEiOiJEZWNlbWJlciIsImxhbmd1YWdlLW1vbnRocy0xMCI6Ik5vdmVtYmVyIiwibGFuZ3VhZ2UtbGF5ZXJsaXN0LWV4cGFuZCI6IkNvbGxhcHNlIG9yIGV4cGFuZCB7MH0gbGF5ZXIgZ3JvdXAiLCJsYW5ndWFnZS1wcmludGluZy1jdXJyZW50LWV4dGVudCI6IkN1cnJlbnQgRXh0ZW50IiwibGFuZ3VhZ2UtY29tbW9uLW5vLXJlc3VsdHMtZGVzYyI6Ikl0ZW1zIGFwcGVhciBhZnRlciB5b3UgcGVyZm9ybSBhIHZhbGlkIHNlYXJjaCBvciBvdGhlciB0YXNrIHRoYXQgcmV0dXJucyByZXN1bHRzLiIsImxhbmd1YWdlLWZlYXR1cmUtZGV0YWlscy1jb21wYWN0LWRlc2MiOiJTd2l0Y2ggdG8gdGhlIGZlYXR1cmUgZGV0YWlscyBjb21wYWN0IHZpZXcuIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtcG9seWdvbiI6IlBvbHlnb24iLCJsYW5ndWFnZS1iYW5uZXItc3ViLXRpdGxlIjoiIiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1wb2x5Z29uLWRlc2MiOiJUbyBsZWFybiB3aGF0XHUyMDE5cyB0aGVyZSwgZHJhdyBhIHNoYXBlIG9uIHRoZSBtYXAuIERvdWJsZS1jbGljay90YXAgdG8gZmluaXNoLiIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLW9wZW4iOiJvcGVuLiAgIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLW1ibC1yZWN0YW5nbGUtdG9vbCI6IkRyYWcgb24gdGhlIG1hcCB0byBkcmF3IGEgcmVjdGFuZ2xlLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24taGlkZS1tYXAtZWxlbWVudCI6IlJlbW92ZXMgYW4gZWxlbWVudCBwcmV2aW91c2x5IGFuY2hvcmVkIHRvIHRoZSBtYXAgdXNpbmcgU2hvd01hcEVsZW1lbnQuIiwibGFuZ3VhZ2Utb2ZmbGluZS12aWV3ZXItcHJvdmlzaW9uLW9ubGluZS1vbmx5LXRpdGxlIjoiWW91IGFyZSBvZmZsaW5lLiIsImxhbmd1YWdlLWNhcHR1cmUtZ2VvbWV0cnktcG9pbnQta2V5Ym9hcmQiOiJVc2UgYXJyb3dzIHRvIG1vdmUgdGhlIHBvaW50LiBIaXQgRU5URVIgdG8gZmluaXNoLiIsImxhbmd1YWdlLWJvb2ttYXJrcy10aXRsZSI6IkJvb2ttYXJrZWQgTG9jYXRpb25zIiwibGFuZ3VhZ2UtZ2VvbG9jYXRlLWluLXByb2dyZXNzIjoiRmluZGluZyB5b3VyIGxvY2F0aW9uLi4uIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1jb21pdHRlZCI6IkNvbW1pdHRlZCIsImxhbmd1YWdlLWJhc2VtYXAtc3dpdGNoZXItbGF5ZXItdGhlbWVzIjoiTGF5ZXIgVGhlbWVzIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lZGl0cy1hbmQtc3luYy1lbXB0eSI6Ik5vIHVuc3luY2VkIGVkaXRzLiIsImxhbmd1YWdlLXJ1bi1yZXBvcnQtY29tcGxldGUtbGluay1zeW5jIjoiRG93bmxvYWQgcmVwb3J0IGZpbGUiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXN5bmMtY29uZmlybSI6IlRoaXMgY2FuIHRha2Ugc2V2ZXJhbCBtaW51dGVzLiBEbyB5b3Ugd2FudCB0byBjb250aW51ZT8iLCJsYW5ndWFnZS1pZGVudGlmeS1saW5lLXRvb2wiOiJEcmFnIG9uIHRoZSBtYXAgdG8gZHJhdyBhIGxpbmUuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1nZXQtZmVhdHVyZS1kZXRhaWxzLXByb3ZpZGVycyI6IkNyZWF0ZXMgdmlldyBmb3IgYWxsIGNvbmZpZ3VyZWQgZmVhdHVyZSBkZXRhaWxzIHByb3ZpZGVycyBhbmQgZW1iZWRzIHRoZW0gaW50byBmZWF0dXJlIGRldGFpbHMgZGlhbG9nLiIsImxhbmd1YWdlLWNvbW1vbi1mZWF0dXJlLWxheWVyLWRldGFpbHMtZGVzYyI6Ik1hbmFnZSBjYWNoaW5nIG9mIGEgZmVhdHVyZSBsYXllciBmb3Igb2ZmbGluZSB1c2UuIiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1wb2ludC10b29sdGlwIjoiRmluZCBvdXQgYWJvdXQgYSBsb2NhdGlvbiBvbiB0aGUgbWFwIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1wZW5kaW5nLWVkaXRzLW11bHRpcGxlLWxheWVycyI6IllvdSBoYXZlIGVkaXRzIG9uIG9uZSBvciBtb3JlIGxheWVycyB0aGF0IGhhdmUgbm90IGJlZW4gc3luY2VkIHRvIHRoZSBzZXJ2ZXIuIiwibGFuZ3VhZ2Utc2hlbGwtZGF0YWZyYW1lLWRpc2FibGVkIjoiVGhlcmUgaXMgY3VycmVudGx5IG5vIGNvbnRlbnQgaW4gdGhpcyB2aWV3IiwibGFuZ3VhZ2UtYnVmZmVyLWVycm9yLWludmFsaWQtcmVzdWx0cyI6IlRoZSBidWZmZXIgb3BlcmF0aW9uIHJldHVybmVkIGludmFsaWQgcmVzdWx0cy4iLCJsYW5ndWFnZS10b29sYmFyLWVkaXRpbmctY3JlYXRlLW5ldy1mZWF0dXJlIjoiQ3JlYXRlIE5ldyBGZWF0dXJlIiwibGFuZ3VhZ2UtY29tcGFjdC10b29sYmFyLWJ1dHRvbi1kZXNjcmlwdGlvbiI6IlRvb2xzIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1hZGQtc3RhdHVzIjoiQWRkcyBhIHN0YXR1cyBpbmRpY2F0b3IgdG8gdGhlIHNjcmVlbi4iLCJsYW5ndWFnZS1wcmludC1tYXAiOiJQcmludCBNYXAiLCJsYW5ndWFnZS1mZWF0dXJlLWNyZWF0ZS1yZWxhdGVkLWZlYXR1cmVzIjoiQ3JlYXRlIEEgTmV3IFJlbGF0ZWQgRmVhdHVyZSIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1tdWx0aS1mZWF0dXJlLXNlbGVjdG9yIjoiU2VsZWN0IEZlYXR1cmUgRm9yIEVkaXRpbmciLCJsYW5ndWFnZS1jb21tb24tc2hhcmUiOiJTaGFyZSIsImxhbmd1YWdlLW1lYXN1cmVtZW50LXVuaXQtYWNyZS1zaG9ydCI6ImFjIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWdlb21ldHJ5LXBvaW50IjoiTW92ZSB0aGUgc2VsZWN0ZWQgcG9pbnQgYnkgaG9sZGluZyBkb3duIG9uIGl0IGFuZCBkcmFnZ2luZy4gUmVsZWFzZSB0byBzdG9wIiwibGFuZ3VhZ2UtYXV0aC1lcnJvciI6IkludmFsaWQgdXNlcm5hbWUgb3IgcGFzc3dvcmQuIFBsZWFzZSB0cnkgYWdhaW4uIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1kZWxldGUtcmVsYXRlZC1yZWNvcmQiOiJEZWxldGVzIGEgcmVsYXRlZCB0YWJsZSByZWNvcmQuIiwibGFuZ3VhZ2UtYWxlcnQtZGVmYXVsdC10aXRsZSI6IkFsZXJ0IiwibGFuZ3VhZ2UtaGVhdC1tYXBzLWludGVuc2l0eS1zbGlkZXItbWF4LWxhYmVsIjoiMTAwIiwibGFuZ3VhZ2UtYnVmZmVyLWVycm9yLXVuaW9uLW9wZXJhdGlvbiI6IkEgdW5pb24gY291bGQgbm90IGJlIHBlcmZvcm1lZCBvbiB0aGUgYnVmZmVyIG9wZXJhdGlvbiByZXN1bHRzLiIsImxhbmd1YWdlLW1lYXN1cmVtZW50LXJlc3VsdHMtZmVhdHVyZS1kZXNjcmlwdGlvbi1wb2x5Z29uIjoiUGVyaW1ldGVyOiB7TGVuZ3RofXtVbml0c31cbkFyZWE6IHtBcmVhfXtBcmVhIFVuaXRzfSIsImxhbmd1YWdlLWNvbW1vbi1sb2dpbiI6IkxvZyBJbiIsImxhbmd1YWdlLXRvb2xiYXItdGl0bGUiOiJUb29sYmFyIiwibGFuZ3VhZ2UtbWVudS1pZGVudGlmeSI6IkZpbmQgZGF0YSBvbiB0aGUgbWFwIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWNyZWF0ZS1lZGl0IjoiQ3JlYXRlIE9yIEVkaXQgRmVhdHVyZSIsImxhbmd1YWdlLXJ1bi1yZXBvcnQtcHJvZ3Jlc3MtbWVzc2FnZS1zeW5jIjoiUGxlYXNlIHdhaXQgd2hpbGUgeW91ciByZXBvcnQgZmlsZSBpcyBnZW5lcmF0aW5nLiIsImxhbmd1YWdlLWxheWVybGlzdC1zaG93LWxlZ2VuZCI6IlNob3cgTGVnZW5kIiwibGFuZ3VhZ2Utc25hcHBpbmctbGF5ZXItcmVnaXN0ZXJlZCI6IkxheWVyIHswfSB3YXMgcmVnaXN0ZXJlZCBmb3Igc25hcHBpbmcuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zdGFydC1lZGl0aW5nLWVkaXQtbG9nLWVudHJ5IjoiQ3JlYXRlcyBhIGF2aWV3IHRvIGNoYW5nZSBhbiBleGlzdGluZyBlZGl0LiIsImxhbmd1YWdlLW1lYXN1cmVtZW50LXJlc3VsdHMtZmVhdHVyZS1kZXNjcmlwdGlvbi1wb2x5bGluZSI6Ikxlbmd0aDoge0xlbmd0aH17VW5pdHN9IiwibGFuZ3VhZ2UtdG9vbGJhci1uYXZpZ2F0aW9uLXpvb20taW4tZGVzYyI6IkNsaWNrIG9yIHRhcCwgdGhlbiBkcmFnIGFyZWEgb2YgaW50ZXJlc3Qgb24gdGhlIG1hcC4gTWFwIHdpbGwgem9vbSB0byB0aGF0IGxvY2F0aW9uLiIsImxhbmd1YWdlLW1lbnUtbm8taXRlbXMiOiJObyBtZW51IG9wdGlvbnMuIiwibGFuZ3VhZ2UtdG9vbGJhci1ob21lLXN1YiI6IkhvbWUiLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1hZGQtYXMtZHJhd2luZyI6IlByZXNlcnZlIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtZGVsZXRlIjoiRXJhc2UiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXJlZ2lzdGVyLXNlYXJjaC1wcm92aWRlciI6IlJlZ2lzdGVycyBhIHNlYXJjaCBwcm92aWRlciBpZiBub3QgYWxyZWFkeSByZWdpc3RlcmVkLiIsImxhbmd1YWdlLWNvbW1vbi1zYXZlIjoiU2F2ZSIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1jcmVhdGUtZWRpdC1zZWxlY3QtZ2VvbWV0cnkiOiJTZWxlY3QgR2VvbWV0cnkgSW5wdXQiLCJsYW5ndWFnZS1pbnRlZ3JhdGlvbi12aWV3cG9pbnQtaW5kaWNhdG9yLWRlc2MiOiJEcmFnIHRoZSBtYXJrZXIgb24gdGhlIG1hcCB0byB1cGRhdGUgdGhlIGNvcnJlc3BvbmRpbmcgbWFwIHZpZXcuIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtcmVzdWx0cy1mZWF0dXJlLWRlc2NyaXB0aW9uLXNlZ21lbnQiOiJMZW5ndGg6IHtMZW5ndGh9e1VuaXRzfVxuQW5nbGU6IHtBbmdsZX1cbkJlYXJpbmc6IHtCZWFyaW5nfSIsImxhbmd1YWdlLXJlc29sdXRpb24iOiJSZXNvbHV0aW9uIiwibGFuZ3VhZ2UtZ2VvbG9jYXRlLXRyYWNrLWRlc2MiOiJLZWVwIGFuIGluZGljYXRvciBvbiB5b3VyIGxvY2F0aW9uLiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1mZWF0dXJlLWF0dHJpYnV0ZXMiOiJWaWV3L0VkaXQgQXR0cmlidXRlcyIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItZXJyb3Itd2hpbGUtY2FjaGluZy1kYXRhIjoiVGhlcmUgd2FzIGFuIGVycm9yIGNhY2hpbmcgZGF0YTogezB9IHsxfSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tc2hvdy1yZXN1bHRzLWxpc3QiOiJEaXNwbGF5cyB0aGUgbGlzdCBvZiBmZWF0dXJlcyBpbiB0aGUgZ2l2ZW4gZmVhdHVyZSBzZXQgY29sbGVjdGlvbiBhcyBhIGxpc3QuIiwibGFuZ3VhZ2UtdG9vbGJhci10b29sYmFyIjoiVG9vbGJhciIsImxhbmd1YWdlLW5hdGl2ZS1mZWF0dXJlLW5vLWxheWVyIjoiRXJyb3I6IFRoaXMgZmVhdHVyZSBkb2VzIG5vdCBzZWVtIHRvIGJlIGFzc29jaWF0ZWQgd2l0aCBhbnkgbGF5ZXIuIFBsZWFzZSB0cnkgaWRlbnRpZnlpbmcgdGhlIGZlYXR1cmUgYWdhaW4uIiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1wb2x5bGluZS1kZXNjIjoiVG8gbGVhcm4gd2hhdFx1MjAxOXMgdGhlcmUsIGRyYXcgYSBsaW5lIG9mIGludGVyZXN0IGFsb25nIHRoZSBtYXAuIERvdWJsZS1jbGljay90YXAgdG8gZmluaXNoLiIsImxhbmd1YWdlLXNoZWxsLWRhdGFmcmFtZS1kaXNhYmxlZC1ob21lLXBhbmVsIjoiT3BlbiB0aGUgSG9tZSBQYW5lbCIsImxhbmd1YWdlLWdlb2xvY2F0ZS1lcnJvci1icm93c2VyIjoiWW91ciBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgZ2VvbG9jYXRpb24uIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWNyZWF0ZS1lZGl0LXVzZS1jdXJyZW50LWxvY2F0aW9uIjoiVXNlIG15IGxvY2F0aW9uIiwibGFuZ3VhZ2UtZmVhdHVyZS1jb29yZGluYXRlcy1jaGFuZ2Utc3lzdGVtIjoiU2VsZWN0IGNvb3JkaW5hdGUgc3lzdGVtIiwibGFuZ3VhZ2UtY2FwdHVyZS1nZW9tZXRyeS1wb2x5bGluZSI6IkRyYXcgYSBsaW5lIG9uIHRoZSBtYXAuIERvdWJsZS1jbGljayB0byBmaW5pc2guIiwibGFuZ3VhZ2UtYnVmZmVyLWludmFsaWQtZGlzdGFuY2UiOiJUaGUgZGlzdGFuY2UgbXVzdCBiZSBhIG5vbi16ZXJvIG51bWJlci4gSWYgZXh0cmVtZSBudW1iZXJzIGFyZSBlbnRlcmVkLCBidWZmZXJpbmcgbWF5IGZhaWwuIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWRzay1mcmVlaGFuZC1wb2x5bGluZS10b29sIjoiRHJhZyBvbiB0aGUgbWFwIHRvIGRyYXcgYSBmcmVlaGFuZCBsaW5lIiwibGFuZ3VhZ2UtZ2VvbG9jYXRlLWZvbGxvdy1pbi1wcm9ncmVzcyI6IkZvbGxvd2luZyB2aWEgZ2VvbG9jYXRpb24uLi4iLCJsYW5ndWFnZS1hdXRoLWF1dGhlbnRpY2F0aW5nIjoiQXV0aGVudGljYXRpbmcuLi4iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctY3JlYXRlLWVkaXQtbmV3LWZlYXR1cmUiOiJDcmVhdGUgRmVhdHVyZSIsImxhbmd1YWdlLWFwcC1nb25lLW9mZmxpbmUiOiJZb3UgYXJlIG9mZmxpbmUuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1mZWF0dXJlLWxheWVyLWNhY2hlLWRhdGEiOiJDYWNoZXMgdGhlIGRhdGEgZm9yIGEgZ2l2ZW4gbWFwIHNlcnZpY2UgVVJMLiIsImxhbmd1YWdlLW1lbnUtbWVudXMtZGVzY3JpcHRpb24iOiJJIFdhbnQgVG8uLi4gTWVudXMiLCJsYW5ndWFnZS1tYXAtc2l0ZS1jcml0aWNhbC1zZXJ2aWNlcy1mYWlsZWQtbWVzc2FnZSI6IlRoZSBhcHBsaWNhdGlvbiBjYW5ub3QgYmUgdXNlZCBhdCB0aGlzIHRpbWUuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1nZXQtZWRpdC1sb2ciOiJHZXRzIHRoZSBlZGl0IGxvZywgcGFzc2luZyBpdCBpbnRvIGEgY2FsbGJhY2suIElmIGFuIGVycm9yIG9jY3VycywgdGhlIGVycm9yIGlzIHBhc3NlZCBpbnRvIHRoZSBjYWxsYmFjay4iLCJsYW5ndWFnZS10b29sYmFyLWNoYXJ0aW5nLXNob3ctY2hhcnRzLXRvb2x0aXAiOiJMYXVuY2ggdGhlIGNoYXJ0aW5nIHZpZXciLCJsYW5ndWFnZS1oZWF0LW1hcHMtbmFtZSI6IkhlYXQgTWFwIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1oaWdobGlnaHQtZmVhdHVyZS1kZWZhdWx0IjoiSGlnaGxpZ2h0cyB0aGUgZmVhdHVyZSBpbiB0aGUgZGVmYXVsdCBoaWdobGlnaHQgbGF5ZXIuIiwibGFuZ3VhZ2UtY29tbW9uLXNob3ctZGV0YWlscyI6IlNlZSBEZXRhaWxzIiwibGFuZ3VhZ2UtZmVhdHVyZS1jb29yZGluYXRlcy1pbnZhbGlkLXZhbHVlIjoiSW52YWxpZCBSZXN1bHQiLCJsYW5ndWFnZS10b29sYmFyLWVkaXRpbmctY3JlYXRlLW5ldy1mZWF0dXJlLXRvb2x0aXAiOiJDcmVhdGUgYSBuZXcgZmVhdHVyZSBvbiB0aGUgbWFwIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zaG93LWZlYXR1cmUtdGVtcGxhdGUtcGlja2VyIjoiU2hvd3MgdGhlIGZlYXR1cmUgdGVtcGxhdGUgcGlja2VyIHVzZWQgdG8gY3JlYXRlIG5ldyBmZWF0dXJlcy4gSWYgYSBsYXllciBpcyBzdXBwbGllZCwgc2hvd3MgdGhlIHRlbXBsYXRlcyBmb3IgdGhlIGxheWVyLiIsImxhbmd1YWdlLWZlYXR1cmUtYXR0YWNobWVudHMtbm90LXN1cHBvcnRlZCI6IlRoZXJlIGFyZSBubyBhdHRhY2htZW50cyBmb3IgdGhpcyBmZWF0dXJlLiIsImxhbmd1YWdlLW1lYXN1cmVtZW50LXVuaXQtZmVldC1zaG9ydCI6ImZ0IiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtY2xvc2VkIjoiY2xvc2VkLiAgIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1hbGVydCI6IkRpc3BsYXlzIGFuIGFsZXJ0LiIsImxhbmd1YWdlLWZlYXR1cmUtZGV0YWlscy10aXRsZSI6IkZlYXR1cmUgRGV0YWlscyIsImxhbmd1YWdlLW1lbnUtcG93ZXJlZC1ieS1nZW9jb3J0ZXgtZGVzYyI6IlBvd2VyZWQgYnkgR2VvY29ydGV4IiwibGFuZ3VhZ2UtbWVudS1hY2Nlc3NpYmlsaXR5LXBhbmVsLWRlc2MiOiJWaWV3IGluZm9ybWF0aW9uIGFib3V0IHRoZSBhY2Nlc3NpYmlsaXR5IG9mIHRoaXMgYXBwbGljYXRpb24uIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLXZhbHVlLXRvby1sb25nIjoiezB9IG11c3QgYmUgbm8gbG9uZ2VyIHRoYW4gezF9IGNoYXJhY3RlcnMuIiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtdmlzaWJsZS1mZWF0dXJlLWluZm9ybWF0aW9uIjoiezB9IGZlYXR1cmVzIHZpc2libGUgb24gezF9LiIsImxhbmd1YWdlLWJ1ZmZlci1vcHRpb25zLWRpc3RhbmNlLWxhYmVsIjoiRGlzdGFuY2UiLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LWZyZWVoYW5kLXBvbHlnb24tZGVzYyI6IkRyYXcgYSBmcmVlaGFuZCBzaGFwZSBvbiB0aGUgbWFwIHRvIHNlZSB3aGF0J3MgdGhlcmUiLCJsYW5ndWFnZS1idWZmZXItY2FuY2VsLWJ1dHRvbi10ZXh0IjoiQ2FuY2VsIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1zeW5jLXJlcXVpcmVkIjoiU3luY2hyb25pemF0aW9uIFJlcXVpcmVkIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1jYWNoZS1leHRlbnQiOiJDYWNoZSBFeHRlbnQiLCJsYW5ndWFnZS1tZW51LXN3aXRjaC10by1sZWdlbmQtZGVzYyI6IkRpc3BsYXkgdGhlIGxlZ2VuZCBmb3IgdmlzaWJsZSBsYXllcnMiLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC1idWZmZXItb3B0aW9ucyI6IkJ1ZmZlciBPcHRpb25zIHswfSIsImxhbmd1YWdlLW1hcC1zaXRlLWNyaXRpY2FsLXNlcnZpY2VzLWZhaWxlZCI6IkNyaXRpY2FsIHNlcnZpY2VzIGZhaWxlZC4iLCJsYW5ndWFnZS1tZW51LXNldHRpbmdzLWRlc2NyaXB0aW9uIjoiTW9iaWxlIFNldHRpbmdzIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1ydW4td29ya2Zsb3ctYnktaWQiOiJSdW5zIGEgd29ya2Zsb3cuIiwibGFuZ3VhZ2UtbWVudS1leHBvcnQtcmVzdWx0cy10by1jc3YtZGVzYyI6IkV4cG9ydCBSZXN1bHRzIHRvIENTViIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLWV4cG9ydC1tYXAiOiJFeHBvcnQgTWFwIHswfSIsImxhbmd1YWdlLXNpdGUtc2VydmljZS1sYXllcnMtZmFpbHVyZS12aWV3LWVycm9yIjoiVGhlcmUgd2FzIGEgcHJvYmxlbSBsb2FkaW5nIG9uZSBvciBtb3JlIGNyaXRpY2FsIG1hcCBzZXJ2aWNlcy4gVGhlIGFwcGxpY2F0aW9uIGNhbm5vdCBiZSB1c2VkIGF0IHRoaXMgdGltZS4gVGhlIGZvbGxvd2luZyBzZXJ2aWNlcyBmYWlsZWQgdG8gbG9hZDoiLCJsYW5ndWFnZS10b29sYmFyLXRhYi10YXNrcyI6IlRhc2tzIiwibGFuZ3VhZ2UtdG9vbGJhci1ob21lLXRvb2x0aXAiOiJPcGVuIHRoZSBIb21lIFBhbmVsIiwibGFuZ3VhZ2UtZ2VvbG9jYXRlLXRyYWNrIjoiVHJhY2sgTWUiLCJsYW5ndWFnZS1tZWFzdXJlbWVudC11bml0LWhlY3RhcmUtc2hvcnQiOiJoYSIsImxhbmd1YWdlLW1lbnUtZGVzY3JpcHRpb24iOiJRdWljayBhY2Nlc3MgdG8gY29tbW9uIHRhc2tzIiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtZGF0YS1mcmFtZS1vcGVuIjoiRGF0YSBmcmFtZSBvcGVuLiAgIiwibGFuZ3VhZ2UtbWVudS16b29tIjoiWm9vbSB0byBGZWF0dXJlIiwibGFuZ3VhZ2UtbGF5ZXItYWN0aW9ucyI6IlBlcmZvcm0gYW4gYWN0aW9uIG9uIHswfSIsImxhbmd1YWdlLWJvb2ttYXJrcy1jaG9vc2UiOiJKdW1wIHRvIGEgbWFwIGJvb2ttYXJrLi4uIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtcmVzdWx0cy1maWVsZC1zZWdtZW50IjoiU2VnbWVudCIsImxhbmd1YWdlLXF1ZXJ5YnVpbGRlci1vcGVyYXRvci1jb250YWlucyI6ImNvbnRhaW5zIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1zeW5jLWxvZy13YXJuaW5nIjoiV2FybmluZyIsImxhbmd1YWdlLW1lYXN1cmVtZW50LXVuaXQtZmVldCI6IkZlZXQgKGZ0KSIsImxhbmd1YWdlLWNvbW1vbi1jbGVhciI6IkNsZWFyIiwibGFuZ3VhZ2UtbWVudS1ob21lLXBhbmVsIjoiVmlldyB0aGUgaG9tZSBwYW5lbCIsImxhbmd1YWdlLWdlb2xvY2F0ZS1lcnJvci1jYW5ub3QtY29udmVydC1jb29yZGluYXRlIjoiRXJyb3IiLCJsYW5ndWFnZS1sZWdlbmQtaGVhdC1tYXBzLWxvdyI6IkxvdyIsImxhbmd1YWdlLXRvb2xiYXItbmF2aWdhdGlvbi1wYW4iOiJQYW4iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1lZGl0LWRlc2Mtc2hvcnRjdXRzIjoiVXNlIGFycm93cyB0byBtb3ZlLCBSIHRvIHJvdGF0ZSwgUyB0byBzY2FsZSwgViB0byBzZWxlY3QgdmVydGV4LiBDb21iaW5lIHdpdGggQUxUIGZvciBmaW5lciBjb250cm9sLiBDb21iaW5lIHdpdGggU0hJRlQgdG8gcmV2ZXJzZS4iLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1tZWFzdXJlLWZyZWVoYW5kLWxpbmUtdG9vbC1zdGF0dXMiOiJIb2xkIHRoZSBtb3VzZSBidXR0b24gb3IgeW91ciBmaW5nZXJ0aXAgZG93biwgdGhlbiBkcmF3IGEgZnJlZWhhbmQgbWVhc3VyZW1lbnQgbGluZS4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXN5bmMtZW5kLXN1Y2Nlc3MiOiJTeW5jaHJvbml6YXRpb24gY29tcGxldGUuIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLXVuZG9hYmxlLWN1dCI6IkN1dCBGZWF0dXJlcyIsImxhbmd1YWdlLW5hdGl2ZS1hZGQtdG8tZmF2b3JpdGVzLWRlc2MiOiJBZGRzIHRoZSBjdXJyZW50IGFwcGxpY2F0aW9uIHRvIHRoZSBmYXZvcml0ZXMgb24gdGhlIG1haW4gbWVudS4iLCJsYW5ndWFnZS1jYXB0dXJlLWdlb21ldHJ5LWZyZWVoYW5kLXBvbHlsaW5lX3Rvb2x0aXAiOiJTZWxlY3QgYnkgZnJlZWhhbmQgbGluZSIsImxhbmd1YWdlLXRvb2xiYXItbmF2aWdhdGlvbi16b29tLW91dC10b29sdGlwIjoiRHJhdyBhbiBhcmVhIG9mIGludGVyZXN0IG9uIHRoZSBtYXAgYW5kIHpvb20gb3V0LCBrZWVwaW5nIHRoZSBhcmVhIGNlbnRlcmVkIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtcG9pbnQtZGVzYyI6IkNsaWNrIG9yIHRhcCBhIG1hcCBsb2NhdGlvbiB0byBhZGQgYSBwb2ludC4iLCJsYW5ndWFnZS10b29sYmFyLXNuYXBwaW5nLWFsdC1kaXNhYmxlIjoiRGlzYWJsZSBzbmFwcGluZyBmb3IgYWN0aXZlIHRvb2wuIiwibGFuZ3VhZ2UtYnVmZmVyLWNsZWFyLWJ1dHRvbi10ZXh0IjoiQ2xlYXIiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1wYWxldHRlLXNtYWxsLWNoYW5nZS1zdHlsZSI6IlN0eWxlcyIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy11bmRvYWJsZS11bmlvbiI6IlVuaW9uIEZlYXR1cmVzIiwibGFuZ3VhZ2Utb2ZmbGluZS1wcm92aXNpb25pbmctc2VjdXJlLWxheWVycy1lcnJvciI6IkVycm9yIGNhY2hpbmcgZmVhdHVyZSBzZXJ2aWNlIHswfS4gVGhlIHNlcnZpY2UgbWF5IG5lZWQgdG8gYmUgYWxsb3dlZCB0aHJvdWdoIHRoZSBwcm94eSBwYWdlLiIsImxhbmd1YWdlLWxpc3QtcmVwb3J0cy10aXRsZSI6IkNob29zZSBSZXBvcnQiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctZ2VvbWV0cnktZGVmYXVsdCI6IkVkaXQgdGhlIHNlbGVjdGVkIGdlb21ldHJ5LiIsImxhbmd1YWdlLW1lbnUtY2xlYXItb2ZmbGluZS1kYXRhIjoiQ2xlYXIgb2ZmbGluZSBkYXRhIiwibGFuZ3VhZ2UtbGF5ZXJsaXN0LW11bHRpcGxlLWxlZ2VuZC1pY29uLXRvb2x0aXAiOiJDbGljayB0byBzZWUgbGVnZW5kIGluZm9ybWF0aW9uIGZvciB7MH0gbGF5ZXIiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1wb2x5bGluZS1kZXNjLWtleWJvYXJkIjoiVXNlIGFycm93cyB0byBtb3ZlIHRoZSBwb2ludC4gSGl0IEVOVEVSIHRvIHBsb3QgYW5kIGJlZ2luIG1vdmluZyB0aGUgbmV4dCBwb2ludC4gSGl0IEVOVEVSIHR3aWNlIHRvIGZpbmlzaC4iLCJsYW5ndWFnZS11aS10YWJsZS1zb3J0ZWQtYXNjZW5kaW5nIjoiQ29sdW1uIGhlYWRlci4gezB9IC0gU29ydGVkIGFzY2VuZGluZy4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXBlbmRpbmctZWRpdHMtbXVsdGlwbGUtbGF5ZXJzLWV4dCI6IllvdSBoYXZlIHVuc3luY2VkIGVkaXRzIG9uIG9uZSBvciBtb3JlIGxheWVycy4gUGxlYXNlIHVzZSB0aGUgezB9IHNjcmVlbiB0byBzeW5jaHJvbml6ZSB5b3VyIGVkaXRzIHRvIHRoZSBzZXJ2ZXIuIiwibGFuZ3VhZ2UtcXVlcnlidWlsZGVyLXNpbXBsZS1maWx0ZXItZGVzY3JpcHRpb24iOiJTaG93IHNpbXBsZSBmaWx0ZXIgYnVpbGRlci4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXNlYXJjaCI6IlBlcmZvcm1zIGEgc2VhcmNoIG9uIGFsbCBhY3RpdmUgcHJvdmlkZXJzLiIsImxhbmd1YWdlLW1lYXN1cmVtZW50LWFkZC1hcy1kcmF3aW5nLXRvb2x0aXAiOiJBZGQgbWVhc3VyZW1lbnRzIHRvIHRoZSBkcmF3aW5nIGxheWVyIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWNhcmRpbmFsaXR5LXZpb2xhdGlvbiI6IlRoZSB2YWx1ZSAnezB9JyBpbiB7MX0gdmlvbGF0ZXMgcmVsYXRpb25zaGlwIGNhcmRpbmFsaXR5LiBDaGFuZ2VzIG5vdCBzYXZlZC4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXJlbGF0ZWQtZmVhdHVyZXMiOiJSZWxhdGVkIEZlYXR1cmVzIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtcmVzdWx0cy1maWVsZC11bml0cyI6IlVuaXRzIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtcmVzdWx0cy1maWVsZC1hcmVhLXVuaXRzIjoiQXJlYSBVbml0cyIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tY2xlYXItaGlnaGxpZ2h0cyI6IlJlbW92ZXMgdGhlIGhpZ2hsaWdodHMgZnJvbSB0aGUgYWN0aXZlIGhpZ2hsaWdodCBsYXllci4iLCJsYW5ndWFnZS1ydW4tcmVwb3J0LWNvbXBsZXRlLWxpbmstYXN5bmMiOiJHbyB0byBSZXBvcnQgUGFnZSIsImxhbmd1YWdlLXF1ZXJ5YnVpbGRlci1zaW1wbGUtdG9vbHRpcCI6IlNob3cgc2ltcGxlIHF1ZXJ5IGJ1aWxkZXIiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVkaXQtZGVzYyI6IkVkaXQgdGhlIGF0dHJpYnV0ZXMgb2YgdGhlIGZlYXR1cmUuIiwibGFuZ3VhZ2UtcXVlcnlidWlsZGVyLXNlbGVjdC1vcGVyYXRvciI6IlNlbGVjdCBvcGVyYXRvciIsImxhbmd1YWdlLWRpc3BsYXktcmVzdWx0LXBpY2tlci1maWx0ZXItdGV4dC1ib3gtd2F0ZXJtYXJrIjoiRmlsdGVyIHJlc3VsdHMiLCJsYW5ndWFnZS10b29sYmFyLW5hdmlnYXRpb24tcHJldmlvdXMtZXh0ZW50LXRvb2x0aXAiOiJab29tIHRvIHRoZSBwcmV2aW91cyBleHRlbnQiLCJsYW5ndWFnZS1vZmZsaW5lLXByb3Zpc2lvbmluZy1zdWNjZWVkZWQtdGl0bGUiOiJDb21wbGV0ZWQiLCJsYW5ndWFnZS1tZWFzdXJlbWVudC11bml0LXNxZmVldCI6IkZlZXTCsiAoZnTCsikiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLW9wZW4td2ViLXBhZ2UiOiJPcGVucyBhIHdlYiBwYWdlIGluIGFub3RoZXIgdGFiL3dpbmRvdy4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWNhbmNlbC1zZWFyY2giOiJDYW5jZWwgdGhlIHNlYXJjaCBvbiBhbGwgcHJvdmlkZXJzLiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItc3luYy1lbmQtcmVxdWVzdC10aW1lb3V0IjoiRWRpdHMgd2VyZSBzdWNjZXNzZnVsbHkgc2VudCB0byB0aGUgc2VydmVyIGJ1dCB0aGUgcmVxdWVzdCB0byB1cGRhdGUgeW91ciBkYXRhIHRpbWVkIG91dC4gUGxlYXNlIGNoZWNrIHlvdXIgY29ubmVjdGlvbiBhbmQgdHJ5IGFnYWluIGxhdGVyLiIsImxhbmd1YWdlLWNvbW1vbi13b3JrZmxvdyI6IldvcmtmbG93IiwibGFuZ3VhZ2UtbWVudS1kb25lIjoiRG9uZSIsImxhbmd1YWdlLWNhcHR1cmUtZ2VvbWV0cnktcmVjdGFuZ2xlIjoiRHJhdyBhIHJlY3RhbmdsZSBvbiB0aGUgbWFwLiIsImxhbmd1YWdlLWNsZWFyLXN0b3JhZ2Utdmlldy10aGlzLXZpZXdlciI6IlRoaXMgYXBwbGljYXRpb24iLCJsYW5ndWFnZS10b29sYmFyLTNyZC1wYXJ0eS1tYXBzLXNob3ctbWFwcyI6IkxpbmtlZCBNYXBzIiwibGFuZ3VhZ2UtbmF0aXZlLWxvdy1tZW1vcnkiOiJUaGUgZGV2aWNlIGlzIGN1cnJlbnRseSBsb3cgb24gbWVtb3J5LiIsImxhbmd1YWdlLW1lYXN1cmVtZW50LWRyYXdtb2RlLWV4dGVudCI6IkV4dGVudCIsImxhbmd1YWdlLW1hcmt1cC1jaGFuZ2UtdGV4dC10ZXh0LXRpdGxlIjoiQ2hhbmdlIFRleHQiLCJsYW5ndWFnZS1tZW51LXpvb20tZGVzY3JpcHRpb24iOiJab29tIHRvIHRoaXMgZmVhdHVyZSBvbiB0aGUgbWFwLiIsImxhbmd1YWdlLXdvcmtmbG93LW9mZmxpbmUiOiJZb3UgY2Fubm90IHJ1biBhIHdvcmtmbG93IGluIG9mZmxpbmUgbW9kZS4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWdsb2JhbC1zZWFyY2giOiJQZXJmb3JtcyBhIHNlYXJjaCBvbiBhbGwgYWN0aXZlIHByb3ZpZGVycy4iLCJsYW5ndWFnZS1tZW51LXNob3ctbG9nIjoiU2hvdyBMb2ciLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXNraXBwaW5nLWZlYXR1cmUtYmxvY2tlZCI6IlNraXBwaW5nIGVkaXQgJ3swfScgYmVjYXVzZSBpdCBpcyByZWxhdGVkIHRvIGEgYmxvY2tlZCBlZGl0LiIsImxhbmd1YWdlLW1lYXN1cmVtZW50LXVuaXQtbWlsZS1zaG9ydCI6Im1pIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtcHJvamVjdGlvbi1lcnJvciI6IlByb2plY3Rpb24gdG8gV0tJRCB7MH0gZmFpbGVkLiB7MX0iLCJsYW5ndWFnZS1wcmludCI6IlByaW50IiwibGFuZ3VhZ2UtdG9vbGJhci1zZWxlY3QtbGF5ZXJzLXRvZ2dsZS10b29sdGlwIjoiRmlsdGVyIGxheWVycyBmb3IgSWRlbnRpZnkgcmVzdWx0cyIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tc2V0LWhpZ2hsaWdodC1ib3JkZXItY29sb3IiOiJTZXRzIHRoZSBib3JkZXIgY29sb3IgdXNlZCBmb3IgbmV3IGhpZ2hsaWdodHMsIHNwZWNpZmllZCBpbiA2IG9yIDggZGlnaXQgaGV4IGluIFJHQiBvciBBUkdCIGZvcm0uIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtbWVhc3VyZS1hcmVhLXRvb2wtbmFtZSI6IkFyZWEiLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1kcmF3bW9kZS1mcmVlaGFuZC1wb2x5bGluZSI6IkZyZWVoYW5kIExpbmUiLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1tZWFzdXJlLWNpcmNsZS10b29sLXRvb2x0aXAiOiJDYWxjdWxhdGUgYXJlYSBmb3IgYSBjaXJjbGUiLCJsYW5ndWFnZS1uYXRpdmUtaW50ZXJuYWwtc2VydmVyLWVycm9yIjoiSW50ZXJuYWwgU2VydmVyIEVycm9yIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLXVuZG9hYmxlLWRlbGV0ZSI6IkRlbGV0ZSBGZWF0dXJlcyIsImxhbmd1YWdlLXJ1bi1yZXBvcnQtZXJyb3ItbWVzc2FnZS1hbHJlYWR5LXJ1bm5pbmciOiJBIHJlcG9ydCBpcyBhbHJlYWR5IHJ1bm5pbmcgKHlvdSBjYW4gb25seSBydW4gb25lIHJlcG9ydCBhdCBhIHRpbWUpLiIsImxhbmd1YWdlLWN1cnJlbnRfZXh0ZW50IjoiQ3VycmVudCBFeHRlbnQiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWhpZ2hsaWdodC1lc3JpLWZlYXR1cmUtc2V0IjoiSGlnaGxpZ2h0cyBhbGwgb2YgdGhlIGZlYXR1cmVzIGluIHRoZSBzcGVjaWZpZWQgZmVhdHVyZSBzZXQgaW4gdGhlIGFjdGl2ZSBoaWdobGlnaHQgbGF5ZXIuIiwibGFuZ3VhZ2UtbWFya3VwLWFkZC10ZXh0LXRpdGxlIjoiRW50ZXIgWW91ciBUZXh0IiwibGFuZ3VhZ2Utc2VhcmNoLWluc3RhbnQtcHJvdmlkZXItZGVzY3JpcHRpb24iOiJTZWFyY2ggcHJvdmlkZXIgZm9yIHNlYXJjaGluZyBhIEdlb2NvcnRleCBzaXRlIHVzaW5nIEdlb2NvcnRleCBJbnN0YW50IFNlYXJjaC4iLCJsYW5ndWFnZS1tYXAtdGl0bGUiOiJNYXAiLCJsYW5ndWFnZS1tZW51LWlkZW50aWZ5LXJlY3RhbmdsZS1kZXNjIjoiRHJhdyBhIHJlY3RhbmdsZSB0byB2aWV3IGluZm9ybWF0aW9uIGFib3V0IHRoYXQgYXJlYS4iLCJsYW5ndWFnZS1uYXRpdmUtYWRkLXRvLWZhdm9yaXRlcy1lcnJvciI6IkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGF0dGVtcHRpbmcgdG8gYWRkIHRoZSBmYXZvcml0ZTogezB9LiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tZGVhY3RpdmF0ZS1jb250YWluZXJzLWZvci13b3JrZmxvdyI6IkRlYWN0aXZhdGVzIGFueSB3b3JrZmxvdyB2aWV3cyBhc3NvY2lhdGVkIHdpdGggYSBnaXZlbiB3b3JrZmxvdy4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXN0b3AtZWRpdGluZy1nZW9tZXRyeS1jYXB0aW9uIjoiU2F2ZSBHZW9tZXRyeSIsImxhbmd1YWdlLWFjY2Vzc2liaWxpdHktbWFwLXNpZ24taW4tZXJyb3IiOiJTaWduLWluIEVycm9yIHswfSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tc2hvdy1tYXAtdGlwIjoiQ3JlYXRlcyBhIE1hcCBUaXAgVmlldyBhbmQgZGlzcGxheXMgdGhlIGZlYXR1cmUgaW4gaXQuIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtY2xlYXItdG9vbHRpcCI6IkNsZWFyIGFsbCBkcmF3aW5ncyBmcm9tIHRoZSBtYXAiLCJsYW5ndWFnZS1jb21tb24tZmVhdHVyZS1vZmZsaW5lLXRvb2xzIjoiTWFuYWdlIE9mZmxpbmUgRGF0YSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tZGVhY3RpdmF0ZS12aWV3IjoiRGVhY3RpdmF0ZXMgYSB2aWV3LiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItc3luYy1lbmQtZXJyb3IiOiJFZGl0cyB3ZXJlIHN1Y2Nlc3NmdWxseSBzZW50IHRvIHRoZSBzZXJ2ZXIgYnV0IHRoZSByZXF1ZXN0IHRvIHVwZGF0ZSB5b3VyIGRhdGEgZmFpbGVkIHdpdGggdGhlIGZvbGxvd2luZyBlcnJvcjogezB9LiIsImxhbmd1YWdlLW1ibC1pZGVudGlmeS1wb2x5bGluZS10b29sIjoiQ2xpY2sgb3IgdGFwIG9uY2UgdG8gYWRkIHBvaW50cywgdHdpY2UgdG8gZmluaXNoLiIsImxhbmd1YWdlLXRvb2xiYXItZmluZC1kYXRhLXRvb2xzIjoiRmluZCBEYXRhIFRvb2xzIiwibGFuZ3VhZ2UtZ2VvbWV0cnktdG9vbGJhci1pbnN0cnVjdGlvbnMiOiJEZWZpbmUgeW91ciBjdXN0b20gZ2VvbWV0cnkgYnkgY2hvb3Npbmcgb25lIG9mIHRoZSB0b29scyBiZWxvdywgYW5kIHNlbGVjdGluZyBhbiBhcmVhIG9uIHRoZSBtYXAuIiwibGFuZ3VhZ2UtdG9vbGJhci1uYW1lIjoiVG9vbGJhciIsImxhbmd1YWdlLWNsZWFyLXN0b3JhZ2UtZG9tYWluLWNvbmZpcm0iOiJXYXJuaW5nOiBDbGVhcmluZyBhbGwgdGhlIGRhdGEgc3RvcmVkIGZvciB0aGlzIGRvbWFpbiByZW1vdmVzIGFsbCBvZmZsaW5lIGRhdGEgc3RvcmVkIGZvciB0aGlzIGRvbWFpbiwgaW5jbHVkaW5nIGFueSBlZGl0cyBtYWRlIHdoaWxlIG9mZmxpbmUuIElmIHlvdSBjbGVhciBzdG9yZWQgZG9tYWluIGRhdGEsIHlvdSB3aWxsIG5lZWQgdG8gcmVjYWNoZSBtYXAgZGF0YSB3aGlsZSBvbmxpbmUgYmVmb3JlIHlvdSBjYW4gY29udGludWUgd29ya2luZyBvZmZsaW5lLiIsImxhbmd1YWdlLXNlYXJjaC13b3JsZC1wbGFjZS1uYW1lcyI6IldvcmxkIFBsYWNlIE5hbWVzIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtcG9seWdvbi1maW5hbC1tYXJrdXAtbGFiZWwiOiJBcmVhOiB7MH0gezF9OyBQZXJpbWV0ZXI6IHsyfSB7M30iLCJsYW5ndWFnZS1jb21tb24tbm90LWF2YWlsYWJsZS1vZmZsaW5lIjoiVGhpcyBmdW5jdGlvbiBpcyBub3QgYXZhaWxhYmxlIHdoZW4gb2ZmbGluZS4iLCJsYW5ndWFnZS10b29sYmFyLWFuYWx5c2lzLW1lYXN1cmVtZW50LXRvb2xzIjoiTWVhc3VyZSIsImxhbmd1YWdlLXRvb2xiYXItbmF2aWdhdGlvbi1ob21lLXRvb2x0aXAiOiJSZXR1cm5zIHRvIGludHJvZHVjdG9yeSBwYWdlIiwibGFuZ3VhZ2UtZmVhdHVyZS1jb29yZGluYXRlcy1tYXAtZGVmYXVsdC1jb29yZGluYXRlLXN5c3RlbSI6IkRlZmF1bHQiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctcmVsYXRpb25zaGlwcy1rZXktZmllbGQtbWlzc2luZyI6IkVkaXRpbmcgdGhlIHJlbGF0aW9uc2hpcCBmYWlsZWQgYmVjYXVzZSBhIGtleSBmaWVsZCBpcyBub3QgaWRlbnRpZmllZC4iLCJsYW5ndWFnZS1sYXllcmxpc3Qtc2luZ2xlLWxlZ2VuZC1pY29uLXRvb2x0aXAiOiJ7MH0gLSBMZWdlbmQiLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1lcmFzZS1zdGF0dXMiOiJDbGljayB0aGUgZGlzdGFuY2Ugb3IgYXJlYSBjYWxjdWxhdGlvbiBvbiB0aGUgbWFwIHlvdSB3aXNoIHRvIHJlbW92ZS4iLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1oaWdoLWxpbmUtc2VnbWVudHMtd2FybmluZyI6IlRoaXMgZmVhdHVyZSBjb250YWlucyB7MH0gbGluZSBzZWdtZW50cyBhbmQgbWF5IHRha2Ugc29tZSB0aW1lIHRvIHByb2Nlc3MuIFlvdXIgYnJvd3NlciBtYXkgYmVjb21lIHVucmVzcG9uc2l2ZSBkdXJpbmcgdGhpcyBwZXJpb2QuIERvIHlvdSB3YW50IHRvIGNvbnRpbnVlPyIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tc2V0LWFjdGl2ZS10b29sIjoiU2V0cyB0aGUgYWN0aXZlIHRvb2wuIiwibGFuZ3VhZ2UtZmVhdHVyZS1ub3QtYXZhaWxhYmxlIjoiTi9BIiwibGFuZ3VhZ2UtdG9vbGJhci1zaG93LWxheWVybGlzdCI6IkxheWVyIExpc3QiLCJsYW5ndWFnZS1idWZmZXItZXhjZXNzLWZlYXR1cmVzLXdhcm5pbmciOiJCdWZmZXJpbmcgezB9IGZlYXR1cmVzIG1heSB0YWtlIHNvbWUgdGltZSB0byBwcm9jZXNzLiBZb3VyIGJyb3dzZXIgbWF5IGJlY29tZSB1bnJlc3BvbnNpdmUgZHVyaW5nIHRoaXMgcGVyaW9kLiBEbyB5b3Ugd2FudCB0byBjb250aW51ZT8iLCJsYW5ndWFnZS1uYXRpdmUtZmlsZS11cGxvYWRpbmciOiJVcGxvYWRpbmcgZmlsZS4gUGxlYXNlIHdhaXQgLi4uIiwibGFuZ3VhZ2Utc2VhcmNoLWJpbmctcG9zdGFsLXRvd24iOiJQb3N0YWwgVG93biIsImxhbmd1YWdlLXByaW50aW5nLWN1cnJlbnQtc2NhbGUiOiJDdXJyZW50IFNjYWxlIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi11cGRhdGUtZmVhdHVyZS1sYXllci1tb2RhbC1tZXNzYWdlIjoiVXBkYXRlIHRoZSB2aXNpYmxlIE1vZGVsTWVzc2FnZVZpZXcgdG8gYWxzbyBpbmNsdWRlIHRoZSBnaXZlbiBtZXNzYWdlLiIsImxhbmd1YWdlLWNvbW1vbi1mZWF0dXJlLWVkaXRsb2ciOiJWaWV3IEVkaXQgTG9nIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLW1ibC1mcmVlaGFuZC1wb2x5Z29uLXRvb2wiOiJEcmF3IGEgcG9seWdvbiBzaGFwZSBvbiB0aGUgbWFwLiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1lZGl0LWdlb21ldHJ5LWNhcHRpb24iOiJFZGl0IEdlb21ldHJ5IiwibGFuZ3VhZ2UtbWVudS1kZWZhdWx0LXRpdGxlIjoiT3B0aW9ucyIsImxhbmd1YWdlLW5hdGl2ZS1hdHRhY2gtZmlsZSI6IkF0dGFjaCBhIGZpbGUgb3IgcGhvdG8iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXpvb20tdG8tZXh0ZW50IjoiWm9vbXMgdG8gdGhlIGdpdmVuIGV4dGVudC4iLCJsYW5ndWFnZS1uYXRpdmUtY2xvc2UtYXBwbGljYXRpb24iOiJSZXR1cm4gdG8gdGhlIG1haW4gbWVudSIsImxhbmd1YWdlLWNvbW1vbi1uby1yZXN1bHRzLXNob3J0IjoiTm8gcmVzdWx0cyIsImxhbmd1YWdlLW1lYXN1cmVtZW50LWVyYXNlLW11bHRpcGxlLXByb21wdC10aXRsZSI6Ildhcm5pbmc6IE11bHRpcGxlIGl0ZW1zIHNlbGVjdGVkIGZvciBkZWxldGlvbiEiLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC1zaW1wbGUtcXVlcnktYnVpbGRlci1jb250YWluZXIiOiJTaW1wbGUgUXVlcnkgQnVpbGRlciBDb250YWluZXIgezB9IiwibGFuZ3VhZ2UtaWRlbnRpZnktZXJyb3ItbWVzc2FnZSI6IlRoZSByZXF1ZXN0ZWQgb3BlcmF0aW9uIGZhaWxlZC4gVHJ5IGFnYWluIGxhdGVyLCBvciBpbmZvcm0geW91ciBhcHBsaWNhdGlvbiBhZG1pbmlzdHJhdG9yIG9mIHRoZSBwcm9ibGVtLiIsImxhbmd1YWdlLWV4cG9ydC1tYXAtZXJyb3IiOiJFeHBvcnQgZXJyb3I6IHswfSIsImxhbmd1YWdlLXRvb2xiYXItaWRlbnRpZnktcmVjdGFuZ2xlLXRvb2x0aXAiOiJGaW5kIG91dCBhYm91dCBhbiBhcmVhIG9uIHRoZSBtYXAgZGVmaW5lZCBieSBhIHJlY3RhbmdsZSIsImxhbmd1YWdlLXRha2UtYXBwLW9ubGluZS1kZXNjIjoiR28gdG8gb25saW5lIG1vZGUuIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lcnJvci1zZXR0aW5nLWVkaXQtbG9nIjoiVGhlcmUgd2FzIGFuIGVycm9yIHNldHRpbmcgdGhlIGVycm9yIGxvZzogezB9IiwibGFuZ3VhZ2UtY29tbW9uLWxheWVyLWRhdGEiOiJMYXllciBEYXRhIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWNhY2hlLWxheWVyLWNhcHRpb24iOiJDYWNoZSBMYXllciIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItc2tpcHBpbmctZmVhdHVyZS1mYWlsZWQiOiJTa2lwcGluZyBlZGl0ICd7MH0nIGJlY2F1c2UgaXQgaXMgcmVsYXRlZCB0byBhIGZhaWxlZCBlZGl0LiIsImxhbmd1YWdlLW1lbnUtbGF0aXR1ZGUtZ2VvZ3JhcGhpY3MiOiJMYXRpdHVkZSBHZW9ncmFwaGljcyBHcm91cCBMdGQuIiwibGFuZ3VhZ2UtbGlzdC1yZXBvcnRzLWV4Y2x1c2lvbi13YXJuaW5nLW1lc3NhZ2UiOiJUaGUgcmVwb3J0IFwiezB9XCIgd2lsbCBub3QgY292ZXIgYWxsIHNlbGVjdGVkIGZlYXR1cmVzOiB7MX0gd2lsbCBiZSBleGNsdWRlZCAob2YgezJ9IHRvdGFsKS4gRG8geW91IHdpc2ggdG8gcnVuIHRoZSByZXBvcnQgKG9uIHszfSkgYW55d2F5cz8iLCJsYW5ndWFnZS1sYXllci1hY3Rpb25zLXRpdGxlIjoiTGF5ZXIgQWN0aW9ucyIsImxhbmd1YWdlLW9mZmxpbmUtcHJvdmlzaW9uaW5nLXNlY3VyZS1sYXllcnMiOiJTYXZpbmcgezB9IGxheWVycyB3aXRoIHNlY3VyaXR5IGFwcGxpZWQuLi4iLCJsYW5ndWFnZS1tYXAtdGlwLXNlbGVjdCI6IlNlbGVjdCBhIE1hcCBUaXAiLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1kcmF3bW9kZS1yaWdodC1hcnJvdyI6IlJpZ2h0IEFycm93IiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtcmVzdWx0cy10b3RhbCI6IlRvdGFsIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtbWVhc3VyZS1kaXN0YW5jZS10b29sLXN0YXR1cyI6IkNsaWNrIG9yIHRhcCB0byBkcmF3IGEgbWVhc3VyZW1lbnQgbGluZS4gRG91YmxlLWNsaWNrL3RhcCB0byBmaW5pc2guIiwibGFuZ3VhZ2UtY2xlYXItc3RvcmFnZS1kb21haW4tZGVzYyI6IkNsZWFycyBhbGwgZGF0YSBzdG9yZWQgYnkgdGhlIGVudGlyZSBkb21haW4uIiwibGFuZ3VhZ2UtbWVhc3VyZW1lbnQtcmVzdWx0cy1maWVsZC1hbmdsZSI6IkFuZ2xlIiwibGFuZ3VhZ2UtYWNjZXNzaWJpbGl0eS1tYXAtaW5mbyI6IkhvbWUgUGFuZWwgezB9IiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1zeW5jLWVuZC11bmtub3duLWVycm9yIjoiRWRpdHMgd2VyZSBzdWNjZXNzZnVsbHkgc2VudCB0byB0aGUgc2VydmVyIGJ1dCB0aGUgcmVxdWVzdCB0byB1cGRhdGUgeW91IGRhdGEgZmFpbGVkIGR1ZSB0byBhbiB1bmtub3duIGVycm9yLiIsImxhbmd1YWdlLW5hdGl2ZS1hZGQtdG8tZmF2b3JpdGVzLXZpZXdlci1uYW1lLXRpdGxlIjoiVmlld2VyIE5hbWUiLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC1vZmZsaW5lLW1hbmFnZW1lbnQtb3B0aW9ucyI6Ik9mZmxpbmUgTWFuYWdlbWVudCBPcHRpb25zIHswfSIsImxhbmd1YWdlLWJvb2ttYXJrcy1hZGQiOiJCb29rbWFyayBDdXJyZW50IEV4dGVudCIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tcHJvbXB0IjoiRGlzcGxheXMgYSBwcm9tcHQuIiwibGFuZ3VhZ2UtY29tbW9uLW5vLXJlc3VsdHMiOiJObyByZXN1bHRzIHRvIGRpc3BsYXkiLCJsYW5ndWFnZS1nZW9sb2NhdGUtdGl0bGUiOiJHZW9sb2NhdGlvbiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItZWRpdC1hY3Rpb24tY3JlYXRlZC1yZWxhdGVkIjoiQ3JlYXRlZCByZWxhdGVkIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1mZXRjaGluZy1yZWxhdGVkLWRhdGEiOiJGZXRjaGluZyByZWxhdGVkIGRhdGEuLi4iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1wYWxldHRlLXNtYWxsLWNsZWFyLWFsbCI6IkNsZWFyIEFsbCIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tY3JlYXRlLWhpZ2hsaWdodC1sYXllciI6IkNyZWF0ZXMgYSBuZXcgaGlnaGxpZ2h0IGxheWVyIHdpdGggdGhlIHNwZWNpZmllZCBuYW1lLiIsImxhbmd1YWdlLW1lbnUtcHJvdmlzaW9uLWZvci1vZmZsaW5lIjoiUHJlcGFyZSBkZXZpY2UgZm9yIG9mZmxpbmUgdXNlIiwibGFuZ3VhZ2UtZmVhdHVyZS1jb29yZGluYXRlcy11cC1hcnJvdyI6IuKWsiIsImxhbmd1YWdlLW1lbnUtaWRlbnRpZnktcmVjdGFuZ2xlIjoiSWRlbnRpZnkgYnkgcmVjdGFuZ2xlIiwibGFuZ3VhZ2UtbG9nLWhpZGUiOiJIaWRlIiwibGFuZ3VhZ2UtdG9vbGJhci1ib29rbWFyay1vcGVuIjoiT3BlbiB0aGUgYm9va21hcmtzIHZpZXciLCJsYW5ndWFnZS1xdWVyeWJ1aWxkZXItb3BlcmF0b3ItbGVzcy10aGFuLWVxdWFsLXRvIjoiPD0iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctaGFzLWdlb21ldHJ5IjoiVGhpcyBmZWF0dXJlIGhhcyBnZW9tZXRyeS4iLCJsYW5ndWFnZS1leHBvcnQtbWFwLWNvbXBsZXRlLWRlc2NyaXB0aW9uIjoiVG8gZG93bmxvYWQgYW5kIGRpc3BsYXkgdGhlIG1hcCBpbWFnZSwgY2xpY2sgVmlldyBJbWFnZS4iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctZ2VvbWV0cnktcG9seWxpbmUiOiJFZGl0IHZlcnRpY2VzIGJ5IGRyYWdnaW5nIHRoZW0sIG9yIHJpZ2h0IGNsaWNrIHRvIGRlbGV0ZS4gRHJhZyB0aGUgc2hhcGUgdG8gbW92ZSBpdC4gQ2xpY2sgb3IgdGFwIG9uIHRoZSBtYXAgdG8gc3RvcCBlZGl0aW5nIiwibGFuZ3VhZ2Utc2hlbGwtZGF0YWZyYW1lIjoiRXhwYW5kL0NvbGxhcHNlIHRoZSBkYXRhIGZyYW1lLiIsImxhbmd1YWdlLWxheWVyLXNlbGVjdG9yLWRlZmF1bHQtY2xlYXItYWxsLXRleHQiOiJDbGVhciBBbGwiLCJsYW5ndWFnZS1idWZmZXItdW5pdC1mZWV0LWRpc3BsYXktbmFtZSI6IkZlZXQgKGZ0KSIsImxhbmd1YWdlLXRvb2xiYXItYnVmZmVyaW5nLWRpc2FibGUiOiJEaXNhYmxlIGJ1ZmZlcmluZyIsImxhbmd1YWdlLWNhcHR1cmUtZ2VvbWV0cnktcG9seWdvbiI6IkRyYXcgYSBwb2x5Z29uIG9uIHRoZSBtYXAuIERvdWJsZS1jbGljayBvciB0YXAgdG8gZmluaXNoLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tdXBkYXRlLXJlbGF0ZWQtcmVjb3JkIjoiVXBkYXRlcyBhIHJlbGF0ZWQgdGFibGUgcmVjb3JkLiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItZWRpdHMtYW5kLXN5bmMtcGVuZGluZy1lZGl0cyI6IlVuc3luY2VkIGVkaXRzIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLW11bHRpLWZlYXR1cmUtc2VsZWN0b3ItZGVzY3JpcHRpb24iOiJTaG93IGRpYWxvZyB0byBzZWxlY3QgYSBmZWF0dXJlIGZvciBhdHRyaWJ1dGUgZWRpdGluZyIsImxhbmd1YWdlLXRvb2xiYXItYm9va21hcmsiOiJCb29rbWFya3MiLCJsYW5ndWFnZS1hY2Nlc3NpYmlsaXR5LW1hcC1jb29yZGluYXRlcy13ZXN0IjoiezB9IMKwIFdlc3QiLCJsYW5ndWFnZS1nZW9sb2NhdGUtZXJyb3ItcG9zaXRpb24tdW5hdmFpbGFibGUiOiJZb3VyIGN1cnJlbnQgbG9jYXRpb24gaXMgbm90IGF2YWlsYWJsZS4iLCJsYW5ndWFnZS1tZWFzdXJlbWVudC1kcmF3bW9kZS1wb2ludCI6IlBvaW50In0=");
geocortex.framework.notifyLibraryDownload("Mapping");
