require({cache:{"geocortex/framework-ui/FilterableCollection":function(){define(["require","exports","geocortex/framework/observables","geocortex/framework/events/CollectionChangedArgs"],function(e,t,i,r){"use strict";var n=function(e){function t(t,i){var r=e.call(this)||this;return r._source=null,r._sourceBindingToken=null,r._filter=r._defaultFilter,r._indexMap=[],t&&r.setSource(t),i&&r.setFilter(i),r}return __extends(t,e),t.prototype.setSource=function(e){if(e!==this._source){if(this._source&&this._sourceBindingToken){if(this._source.unbind(this._sourceBindingToken),this._sourceBindingToken=null,this.length()>0){var t=new r.CollectionChangedArgs;t.type="clear",t.rangeStart=0,t.rangeEnd=this.length()-1,this.bindingEvent.publish(t)}this._source=null}null!=e&&(this._source=e,this._sourceBindingToken=this._source.bind(this,this._sourceChanged),this._redo())}},t.prototype.getSource=function(){return this._source},t.prototype.setFilter=function(e){e||(e=this._defaultFilter),e!==this._filter&&(this._filter=e,this._source&&this._redo())},t.prototype.getFilter=function(){return this._filter===this._defaultFilter?null:this._filter},t.prototype.refresh=function(){this._redo()},t.prototype._redo=function(e){void 0===e&&(e=new r.CollectionChangedArgs),e.sender=this,0!=this._indexMap.length&&(e.type="clear",e.rangeStart=0,e.rangeEnd=this._indexMap.length-1,this.bindingEvent.publish(e)),this._indexMap.length=0;for(var t=0,i=this._source?this._source.length():0;t<i;t++)this._filter(this._source.getAt(t))&&this._indexMap.push(t);0!=this._indexMap.length&&(e.type="append",e.rangeStart=0,e.rangeEnd=this._indexMap.length-1,this.bindingEvent.publish(e))},t.prototype._sourceChanged=function(e){var t,i,n=new r.CollectionChangedArgs;switch(n.sender=this,e.type){case"set":return void this._redo(n);case"append":for(n.type="append",n.rangeStart=this._indexMap.length,t=e.rangeStart;t<=e.rangeEnd;t++)this._filter(this._source.getAt(t))&&this._indexMap.push(t);n.rangeEnd=this._indexMap.length-1;break;case"insert":for(i=e.rangeStart>0?this._findIndexMapIx(e.rangeStart):0;i<this._indexMap.length&&this._indexMap[i]<e.rangeStart;)i++;for(n.type=i<this._indexMap.length?"insert":"append",n.rangeStart=i,t=e.rangeStart;t<=e.rangeEnd;t++)this._filter(this._source.getAt(t))&&this._indexMap.splice(i++,0,t);n.rangeEnd=i-1;for(var o=e.rangeEnd-e.rangeStart+1;i<this._indexMap.length;i++)this._indexMap[i]+=o;break;case"remove":for(i=e.rangeStart>0?this._findIndexMapIx(e.rangeStart):0;i<this._indexMap.length&&this._indexMap[i]<e.rangeStart;)i++;for(n.rangeStart=i;i<this._indexMap.length&&this._indexMap[i]<=e.rangeEnd;)i++;n.rangeEnd=i-1,n.type=0==n.rangeStart&&n.rangeEnd==this._indexMap.length-1?"clear":"remove";break;case"clear":if(0==this.length())return;n.type="clear",n.rangeStart=0,n.rangeEnd=this._indexMap.length;break;default:throw new Error("Unhandled case: "+e.type)}switch(n.rangeStart<=n.rangeEnd&&this.bindingEvent.publish(n),n.type){case"remove":this._indexMap.splice(n.rangeStart,n.rangeEnd-n.rangeStart+1);var s=e.rangeEnd-e.rangeStart+1;for(i=e.rangeStart;i<this._indexMap.length;i++)this._indexMap[i]-=s;break;case"clear":this._indexMap.length=0}},t.prototype._findIndexMapIx=function(e){for(var t=0,i=this._indexMap.length-1,r=0;t<=i;)if(r=Math.floor((t+i)/2),this._indexMap[r]>e)i=r-1;else{if(!(this._indexMap[r]<e))return r;t=r+1}return r},t.prototype._defaultFilter=function(e){return!0},t.prototype.isEmpty=function(){return 0==this._indexMap.length},t.prototype.length=function(){return this._indexMap.length},t.prototype.contains=function(e){return this._source&&this._filter(e)&&this._source.contains(e)},t.prototype.getAt=function(e){return this._source?this._source.getAt(this._indexMap[e]):null},t.prototype.getRange=function(e,t){(null===t||void 0===t||t>=this._indexMap.length)&&(t=this._indexMap.length-1);for(var i=new Array(t-e+1),r=e;r<=t;r++)i[r-e]=this.getAt(r);return i},t.prototype.indexOf=function(e){if(!this._source||!this._filter(e))return-1;var t=this._source.indexOf(e);return t==-1?-1:this._findIndexMapIx(t)},t.prototype.get=function(){throw new Error("Raw array manipulation not supported")},t.prototype.getItems=function(){throw new Error("Raw array manipulation not supported")},t.prototype.getLength=function(){return this._indexMap.length},t.prototype.addItems=function(e){throw new Error("Operation not supported")},t.prototype.addItem=function(e){throw new Error("Operation not supported")},t.prototype.insertItems=function(e,t){throw new Error("Operation not supported")},t.prototype.insertItem=function(e,t){throw new Error("Operation not supported")},t.prototype.removeItem=function(e){throw new Error("Operation not supported")},t.prototype.removeAt=function(e){throw new Error("Operation not supported")},t.prototype.removeRange=function(e,t){throw new Error("Operation not supported")},t.prototype.clear=function(){throw new Error("Operation not supported")},t.prototype.set=function(e){throw new Error("Operation not supported")},t.prototype.sync=function(e){throw new Error("Operation not supported")},t.prototype.equals=function(e){throw new Error("Operation not supported")},t}(i.ObservableCollection);t.FilterableCollection=n})},"geocortex/framework-ui/LazyObservable":function(){define(["require","exports","geocortex/framework/observables"],function(e,t,i){"use strict";var r=function(e){function t(t,i,r){var n=e.call(this,t)||this;return n.delegateGetter=i||null,r&&(n.cacheDelegateResults=r),n}return __extends(t,e),t.prototype.get=function(){var t=e.prototype.get.call(this);if(null!=t||this._delegateNullCached)return t;if(this.delegateGetter){var i=this.delegateGetter();return this.cacheDelegateResults&&i!==t&&e.prototype.set.call(this,i),this.cacheDelegateNull&&(this._delegateNullCached=!0),i}return null},t.prototype.clear=function(){e.prototype.set.call(this,null),delete this._delegateNullCached},t}(i.Observable);t.LazyObservable=r,r.prototype.cacheDelegateResults=!1,r.prototype.cacheDelegateNull=!1,r.prototype._delegateNullCached=!1})},"geocortex/framework-ui/ObservableCollectionAggregator":function(){define(["require","exports","geocortex/framework/observables","geocortex/framework/events/CollectionChangedArgs"],function(e,t,i,r){"use strict";var n=function(e){function t(t){var i=e.call(this)||this;return i._collectionsBindingToken=null,i._collectionsMembersBindingTokens=[],t&&i.setCollectionsSource(t),i}return __extends(t,e),t.prototype.setCollectionsSource=function(e){if(e!==this._collections){if(null!=this._collections){if(this._collections.unbind(this._collectionsBindingToken),this._collectionsBindingToken=null,this._collections.length()>0){var t=new r.CollectionChangedArgs;t.type="clear",t.rangeStart=0,t.rangeEnd=this.length()-1,this.collectionsChanged(t)}this._collections=null}if(null!=e){this._collections=e,this._collectionsBindingToken=this._collections.bind(this,this.collectionsChanged);var i=new r.CollectionChangedArgs;i.rangeStart=0,i.rangeEnd=this._collections.length()-1,i.type="append",this.collectionsChanged(i)}}},t.prototype.getCollectionSource=function(){return this._collections},t.prototype.collectionsChanged=function(e){this.fixBindings(e),this.propagateEvents(e)},t.prototype.fixBindings=function(e){if("append"==e.type||"insert"==e.type)for(var t=e.rangeStart;t<=e.rangeEnd;t++)this._collectionsMembersBindingTokens.splice(t,0,this._collections.getAt(t).bindingEvent.subscribe(this,this.underlyingCollectionChanged));else{if("remove"!=e.type&&"clear"!=e.type)throw"replace"==e.type?new Error("The original value is lost and we need to unbind from it"):new Error("Unknown argument type");for(var t=e.rangeStart;t<=e.rangeEnd;t++)this._collections.getAt(t).bindingEvent.unsubscribe(this._collectionsMembersBindingTokens[t]),this._collectionsMembersBindingTokens[t]=null;this._collectionsMembersBindingTokens.splice(e.rangeStart,e.rangeEnd-e.rangeStart+1)}},t.prototype.propagateEvents=function(e){var t=this._collections.length(),i=new r.CollectionChangedArgs;i.type=e.type,i.rangeStart=0,i.rangeEnd=0;for(var n=0;n<t&&n<e.rangeStart;n++)i.rangeStart+=this._collections.getAt(n).length();for(i.rangeEnd=i.rangeStart-1;n<t&&n<=e.rangeEnd;n++)i.rangeEnd+=this._collections.getAt(n).length();i.rangeEnd>=i.rangeStart&&(i.sender=this,this.bindingEvent.publish(i))},t.prototype.underlyingCollectionChanged=function(e){var t=new r.CollectionChangedArgs;t.sender=this,t.type=e.type;for(var i=0,n=this._collections.length(),o=0;o<n;o++){var s=this._collections.getAt(o);if(s===e.sender){"append"==e.type&&o!=n-1?t.type="insert":"clear"==e.type&&1!=n&&(t.type="remove"),t.rangeStart=i+e.rangeStart,t.rangeEnd=i+e.rangeEnd;break}i+=s.length()}this.bindingEvent.publish(t)},t.prototype.isEmpty=function(){if(null==this._collections)return!0;for(var e=this._collections.length(),t=0;t<e;t++)if(!this._collections.getAt(t).isEmpty())return!1;return!0},t.prototype.length=function(){if(null==this._collections)return 0;for(var e=0,t=this._collections.length(),i=0;i<t;i++)e+=this._collections.getAt(i).length();return e},t.prototype.contains=function(e){if(null==this._collections)return!1;for(var t=this._collections.length(),i=0;i<t;i++)if(this._collections.getAt(i).contains(e))return!0;return!1},t.prototype.getAt=function(e){if(null==this._collections)return null;for(var t=this._collections.length(),i=0;i<t;i++){var r=this._collections.getAt(i),n=r.length();if(!(e>=n))return r.getAt(e);e-=n}throw new Error("Index out of bounds")},t.prototype.getRange=function(e,t){if(null==this._collections)return[];void 0===t&&(t=Number.POSITIVE_INFINITY);for(var i=null,r=0,n=this._collections.length(),o=0;o<n&&t>=0;o++,e-=r,t-=r){var s=this._collections.getAt(o);if(r=s.length(),r>e){var a=s.getRange(e>0?e:0,t);i=null==i?a:i.concat(a)}}return i},t.prototype.indexOf=function(e){if(null==this._collections)return-1;for(var t=0,i=this._collections.length(),r=0;r<i;r++){var n=this._collections.getAt(r),o=n.indexOf(e);if(o!=-1)return t+o;t+=n.length()}return-1},t.prototype.get=function(){throw new Error("Raw array manipulation not supported")},t.prototype.getItems=function(){throw new Error("Raw array manipulation not supported")},t.prototype.getLength=function(){return this.length()},t.prototype.addItems=function(e){throw new Error("Operation not supported")},t.prototype.addItem=function(e){throw new Error("Operation not supported")},t.prototype.insertItems=function(e,t){throw new Error("Operation not supported")},t.prototype.insertItem=function(e,t){throw new Error("Operation not supported")},t.prototype.removeItem=function(e){throw new Error("Operation not supported")},t.prototype.removeAt=function(e){throw new Error("Operation not supported")},t.prototype.removeRange=function(e,t){throw new Error("Operation not supported")},t.prototype.clear=function(){throw new Error("Operation not supported")},t.prototype.set=function(e){throw new Error("Operation not supported")},t.prototype.sync=function(e){throw new Error("Operation not supported")},t.prototype.equals=function(e){throw new Error("Operation not supported")},t}(i.ObservableCollection);t.ObservableCollectionAggregator=n})},"geocortex/framework-ui/OrderedCollection":function(){define(["require","exports","geocortex/framework/observables","geocortex/framework/events/CollectionChangedArgs"],function(e,t,i,r){"use strict";var n=function(e){function t(t,i){var r=e.call(this,t)||this;return r._sorter=null,i&&r.setSortFunction(i),r}return __extends(t,e),t.prototype.setSortFunction=function(t){if(this._sorter!==t){var i=this.length();if(t){var n=new r.CollectionChangedArgs;n.type="clear",n.rangeStart=0,n.rangeEnd=i-1,n.sender=this,this.bindingEvent.publish(n)}this._sorter=t,t&&(e.prototype.get.call(this).sort(this._sorter),n=new r.CollectionChangedArgs,n.type="append",n.rangeStart=0,n.rangeEnd=i-1,n.sender=this,this.bindingEvent.publish(n))}},t.prototype.getSortFunction=function(){return this._sorter},t.prototype.addItems=function(t){if(!this._sorter)return void e.prototype.addItems.call(this,t);if(0===this.length())e.prototype.addItems.call(this,t.concat().sort(this._sorter));else for(var i=0;i<t.length;i++)this.addItem(t[i])},t.prototype.addItem=function(t){if(!this._sorter)return void e.prototype.addItem.call(this,t);for(var i=0,r=e.prototype.length.call(this);i<r&&this._sorter(e.prototype.getAt.call(this,i),t)<0;i++);i>=r?e.prototype.addItem.call(this,t):e.prototype.insertItem.call(this,i,t)},t.prototype.set=function(t){this._sorter?e.prototype.set.call(this,t.concat().sort(this._sorter)):e.prototype.set.call(this,t)},t.prototype.sync=function(e){this._unsortedSyncToken&&this._unsortedSyncSource&&(this._unsortedSyncSource.bindingEvent.unsubscribe(this._unsortedSyncToken),this._unsortedSyncSource=null,this._unsortedSyncToken=null),e&&e.bindingEvent&&(this.clear(),this.addItems(e.getRange(0,e.length()-1)),this._unsortedSyncSource=e,this._unsortedSyncToken=e.bindingEvent.subscribe(this,this._onSyncedCollectionChanged))},t.prototype._onSyncedCollectionChanged=function(e){switch(e.type){case"set":this.set(e.sender.getRange(e.rangeStart,e.rangeEnd));break;case"append":case"insert":this.addItems(e.sender.getRange(e.rangeStart,e.rangeEnd));break;case"remove":for(var t=e.rangeStart;t<=e.rangeEnd;t++)this.removeItem(e.sender.getAt(t));break;case"clear":this.clear();break;default:throw new Error("Unhandled case: "+e.type)}},t.prototype.insertItems=function(e,t){throw new Error("Direct insertion is not supported")},t.prototype.insertItem=function(e,t){throw new Error("Direct insertion is not supported")},t}(i.ObservableCollection);t.OrderedCollection=n})},"geocortex/framework-ui/PresentableCollection":function(){define(["require","exports","geocortex/framework/observables","geocortex/framework/FrameworkObject"],function(e,t,i,r){"use strict";var n=function(){function e(e,t,r){this.pageNumber=new i.Observable(e||null),this.isActive=new i.Observable(t||!1),this.cssClass=new i.Observable(r||"pc-page-shortcut")}return e}();t.PresentableCollectionPageShortcut=n;var o=function(e){function t(t){var r=e.call(this,null,null)||this;return r.items=new i.ObservableCollection,r.isSorted=new i.Observable((!1)),r.isFiltered=new i.Observable((!1)),r.isPaginated=new i.Observable((!0)),r.isMultiplePages=new i.Observable((!0)),r.numberOfItems=new i.Observable(0),r.currIndexStart=new i.Observable(0),r.currIndexStartFromOne=new i.Observable(1),r.currIndexEnd=new i.Observable(0),r.currPageNumber=new i.Observable(1),r.prevPageNumber=new i.Observable,r.nextPageNumber=new i.Observable,r.firstPageNumber=new i.Observable(1),r.lastPageNumber=new i.Observable(1),r.pageSize=new i.Observable(5),r.pageShortcuts=new i.ObservableCollection,r.numPageShortcuts=new i.Observable(10),r._itemCollection=new i.ObservableCollection,r.sortMethod=null,r.sortingPredicate=null,r.filterPredicate=null,r._prevIndexStart=r.currIndexStart.get(),r._prevIndexEnd=r.currIndexEnd.get(),r._prevPageNum=0,r._prevPageSize=r.pageSize.get(),r.sortMethod=r.defaultNativeSort,r.sortingPredicate=function(e,t){return e===t?0:e>t?1:-1},t&&r.attachToCollection(t),r.auto(r.isSorted,r,function(e){e?this.sortCollection():this.unsortCollection()}),r.currIndexStartFromOne.syncTransform(r.currIndexStart,function(e){return e+1}),r.auto(r.isPaginated,r,r._enableOrDisablePagination),r.auto(r.currPageNumber,r,r._handlePageChange),r.auto(r.pageSize,r,r._handlePageChange),r}return __extends(t,e),t.prototype.nextPage=function(){this.currPageNumber.set(this.currPageNumber.get()+1)},t.prototype.prevPage=function(){this.currPageNumber.set(this.currPageNumber.get()-1)},t.prototype.getAt=function(e){return this._itemCollection.getAt(e)},t.prototype.getLength=function(){return this._itemCollection.getLength()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.cleanUp()},t.prototype.cleanUp=function(){this._itemCollection&&this._itemCollection.clear(),this.items&&this.items.clear(),this._underlyingCollection&&(this._underlyingCollection.unbind(this._underlyingCollectionBindingToken),this._underlyingCollection=null,this._underlyingCollectionBindingToken=null)},t.prototype.attachToCollection=function(e){if(this.cleanUp(),!e)throw new Error("Could not attach to collection.");this._attachToUnderlyingCollection(e)},t.prototype._attachToUnderlyingCollection=function(e){this._underlyingCollection=e,this._underlyingCollectionBindingToken=this._underlyingCollection.bind(this,this._handleUnderlyingCollectionChanges),this._itemCollection.set(e.getRange(0));var t=this._itemCollection.getLength();this.numberOfItems.set(t),this.currIndexStart.set(0),this.currIndexEnd.set(this.pageSize.get()),this.currPageNumber.set(1),t<this.currIndexEnd.get()&&(this.currIndexEnd.set(t),this._prevIndexEnd=t),this._bindEntirePage(),this._maintainPageRanges()},t.prototype._bindEntirePage=function(){this._calculatePageWindow(),this.items.clear();for(var e=[],t=this.currIndexStart.get(),i=this.currIndexEnd.get(),r=t;r<i;++r){var n=this._itemCollection.getAt(r);e.push(n)}this.items.addItems(e),this._prevIndexStart=t,this._prevIndexEnd=this._prevIndexEnd},t.prototype._enableOrDisablePagination=function(e){e?(this.currIndexStart.set(this.currPageNumber.get()*this._prevPageSize),this.pageSize.set(this._prevPageSize),this._calculatePageWindow(),this._bindEntirePage(),this._maintainPageRanges()):(this.currIndexStart.set(0),this._prevPageSize=this.pageSize.get(),this.pageSize.set(Number.MAX_VALUE),this.pageShortcuts.clear(),this._calculatePageWindow(),this._bindEntirePage())},t.prototype._calculatePageWindow=function(){var e=this._itemCollection.length();this.lastPageNumber.set(Math.ceil(e/this.pageSize.get()));var t=this.currIndexStart.get(),i=this.currIndexEnd.get(),r=this.pageSize.get(),n=0,o=0,s=0;return i>e&&(i=e),this.currIndexStart.set(0>t?0:t),this.currIndexEnd.set(Math.min(this._itemCollection.getLength(),this.currIndexEnd.get())),n=this.currIndexStart.get()-this._prevIndexStart,e<=t&&(n=0,o=0,s=~~((t-e+1)/r+1),s*=-1,n=Math.max(0,s*r)),i-t<r&&e>=i&&(o=Math.min(r,e)-(i-t)),0!==s&&(n=0,o=0),{pageShift:s,startShift:n,endShift:o}},t.prototype._handlePageChange=function(e){return this.isPaginated.get()?(this.pageSize.value=Math.max(0,Number(this.pageSize.get())),this.currPageNumber.value=Math.max(1,Number(this.currPageNumber.get())),void(isNaN(this.pageSize.get())||this.pageSize.get()<1||(this.currPageNumber.get()>this.lastPageNumber.get()&&this.lastPageNumber.get()>0?this.currPageNumber.set(this.lastPageNumber.get()):(this.currIndexStart.set((this.currPageNumber.get()-1)*this.pageSize.get()),this.currIndexEnd.set(Math.min(this._itemCollection.getLength(),this.currIndexStart.get()+this.pageSize.get())),this._prevIndexStart=this.currIndexStart.get(),this._prevIndexEnd=this.currIndexEnd.get(),this._maintainPageRanges(),this._bindEntirePage())))):void(e!=Number.MAX_VALUE&&(this._prevPageSize=e,this.pageSize.set(Number.MAX_VALUE)))},t.prototype._maintainPageRanges=function(){var e=Math.ceil(this._itemCollection.getLength()/this.pageSize.get());this.lastPageNumber.set(e),e>1&&!this.isMultiplePages.get()?this.isMultiplePages.set(!0):e<=1&&this.isMultiplePages.get()&&this.isMultiplePages.set(!1),this.firstPageNumber.set(1);var t=this.numPageShortcuts.get(),i=Math.max(0,this.currPageNumber.get()-t/2),r=t/2-(this.currPageNumber.get()-i),o=Math.min(e,this.currPageNumber.get()+t/2+r);o-i<this.numPageShortcuts.get()&&(i-=this.numPageShortcuts.get()-(o-i),i<0&&(i=0)),this.pageShortcuts.clear();for(var s=[],a=i;a<o;++a)s.push(new n(a+1,(!1)));this.pageShortcuts.addItems(s),this._highlightCorrectPageShortcut()},t.prototype._highlightCorrectPageShortcut=function(){for(var e=0;e<this.pageShortcuts.getLength();++e){var t=this.pageShortcuts.getAt(e);t.pageNumber.get()===this.currPageNumber.get()?t.cssClass.set("pc-page-shortcut pc-shortcut-active"):t.cssClass.set("pc-page-shortcut")}},t.prototype._performWindowRecalc=function(e){if(0!==e.pageShift)this.currIndexStart.set((this.currPageNumber.get()-1)*this.pageSize.get()),this.currIndexEnd.set(this.currIndexStart.get()+this.pageSize.get()),this.currIndexStart.set(Math.max(0,this.currIndexStart.get())),this.currIndexEnd.set(Math.min(this._itemCollection.getLength(),this.currIndexEnd.get())),this._bindEntirePage();else{if(e.startShift<0){var t=Math.max(0,this._prevIndexStart+e.startShift),i=this._itemCollection.getRange(t,this._prevIndexStart-1);this.items.insertItems(0,i)}else e.startShift>0&&this.items.removeRange(0,e.startShift-1);if(e.endShift<0)this.items.removeRange(this.items.getLength()+e.endShift,this.items.getLength());else if(e.endShift>0){var r=Math.min(this._itemCollection.getLength(),this.currIndexEnd.get()+e.endShift),i=this._itemCollection.getRange(this.currIndexEnd.get(),r-1);this.items.addItems(i)}this.currIndexStart.set(this.currIndexStart.get()+e.startShift),this.currIndexEnd.set(this.currIndexEnd.get()+e.endShift),this.currIndexStart.get()<0&&(this.currIndexEnd.set(Math.min(this.items.length(),this.currIndexEnd.get()-this.currIndexStart.get())),this.currIndexStart.set(0))}this._prevIndexStart=this.currIndexStart.get(),this._prevIndexEnd=this.currIndexEnd.get()},t.prototype._handleUnderlyingCollectionChanges=function(e){if(e&&"clear"!==e.type){if("replace"===e.type)this.items.clear(),this._itemCollection.clear(),this._itemCollection.addItems(this._underlyingCollection.getRange(0)),this._calculatePageWindow(),this._bindEntirePage();else if("insert"===e.type){if(!this.isSorted.get()){var i=this._underlyingCollection.getRange(e.rangeStart,e.rangeEnd);this._itemCollection.insertItems(e.rangeStart,i);var r=t.getIntersectType(this.currIndexStart.get(),this.currIndexEnd.get(),e.rangeStart,e.rangeEnd);if(r===t.RANGE_RELATION_BEFORE||r===t.RANGE_RELATION_HEAD){var n=e.rangeEnd-e.rangeStart+1;this._prevIndexStart+=n,this._prevIndexEnd+=n,this._performWindowRecalc({pageShift:0,startShift:-n,endShift:Math.min(-n+Math.max(this.pageSize.get()-this.numberOfItems.get(),0),0)})}else if(r===t.RANGE_RELATION_CONTAINED)this._performWindowRecalc({pageShift:0,startShift:0,endShift:Math.min(-(e.rangeEnd-e.rangeStart+1)+Math.max(this.pageSize.get()-this.numberOfItems.get(),0),0)}),this.items.insertItems(e.rangeStart-this.currIndexStart.get(),i),this.currIndexEnd.get()<this.items.length()&&this.currIndexEnd.set(this.items.length());else if(r===t.RANGE_RELATION_TAIL){this.items.removeRange(e.rangeStart-this.currIndexStart.get(),this.items.getLength());var o=this.currIndexStart.get()+this.pageSize.get(),s=Math.min(o,e.rangeEnd);this._performWindowRecalc({pageShift:0,startShift:0,endShift:s-this.currIndexEnd.get()}),e.rangeStart+i.length>o&&(i=i.slice(0,o-e.rangeStart)),this.items.insertItems(e.rangeStart-this.currIndexStart.get(),i),this.currIndexEnd.get()<this.items.length()&&this.currIndexEnd.set(this.items.length())}else if(r===t.RANGE_RELATION_AFTER){var a=this.currIndexEnd.get()-this.currIndexStart.get();a<this.pageSize.get()&&this.items.addItems(i.slice(0,this.pageSize.get()-a))}else this._bindEntirePage()}}else if("append"===e.type)if(this.isSorted.get())for(var c=e.rangeStart;c<=e.rangeEnd;++c){var l=this._underlyingCollection.getAt(c),h=this.getSortedPosition(l);this._itemCollection.insertItem(h,l),h<=this.currIndexStart.get()?(this.items.removeRange(this.items.getLength()-1),this.items.insertItem(0,this._itemCollection.getAt(this.currIndexStart.get()))):h>this.currIndexStart.get()&&h<=this.currIndexEnd.get()&&(this.items.removeRange(this.items.getLength()-1),this.items.insertItem(h-this.currIndexStart.get(),l))}else this._itemCollection.addItems(this._underlyingCollection.getRange(e.rangeStart,e.rangeEnd)),this._performWindowRecalc(this._calculatePageWindow());else if("remove"===e.type)if(e.rangeEnd-e.rangeStart>0){if(this.isSorted.get())for(var c=e.rangeStart;c<=e.rangeEnd;++c){var d=this.getSortedPosition(this._underlyingCollection.getAt(c));this._itemCollection.removeRange(d,d)}else this._itemCollection.removeRange(e.rangeStart,e.rangeEnd);this._bindEntirePage()}else{var d=-1;if(d=this.isSorted.get()?this.getSortedPosition(this._underlyingCollection.getAt(e.rangeStart)):e.rangeStart,this._itemCollection.removeRange(d,d),d<this.currIndexStart.get())this.currIndexEnd.set(this.currIndexEnd.get()-1),this._performWindowRecalc({pageShift:0,startShift:1,endShift:1}),this.currIndexEnd.set(this.currIndexEnd.get()+1);else if(d>=this.currIndexStart.get()&&d<this.currIndexEnd.get()){var u=d-this.currIndexStart.get();this.items.removeRange(u,u),this.currIndexEnd.set(this.currIndexEnd.get()-1),this._performWindowRecalc({pageShift:0,startShift:0,endShift:1})}}}else this.items.clear(),this._itemCollection.clear(),this._calculatePageWindow();this.numberOfItems.set(this._itemCollection.getLength()),this._maintainPageRanges()},t.prototype.sortCollection=function(){var e=this._itemCollection.get();this.sortMethod(e,this.sortingPredicate||null),this._bindEntirePage()},t.prototype.unsortCollection=function(){this._itemCollection.set(this._underlyingCollection.getRange(0)),this._bindEntirePage()},t.prototype.getSortedPosition=function(e){if(this.isSorted.get()===!1)return this._itemCollection.getLength();for(var t=this._itemCollection.get(),i=(this._itemCollection.getLength(),0),r=t.length-1,n=~~((r-i)/2);n<r&&n>i;){var o=t[n],s=this.sortingPredicate(e,o);if(0===this.sortingPredicate(e,t[r]))return r;if(0===this.sortingPredicate(e,t[i]))return i;if(s>0)i=n;else{if(!(s<0))return n;r=n}n=~~((r-i)/2)+i}return n},t.prototype.defaultNativeSort=function(e,t){var i=null;return i=null===t||"undefined"==typeof t?e.sort():e.sort(t)},t.getIntersectType=function(e,i,r,n){return e===r&&i===n?t.RANGE_RELATION_SAME:r<e&&n<=e?t.RANGE_RELATION_BEFORE:r<=e&&n<i?t.RANGE_RELATION_HEAD:r<e&&n>i?t.RANGE_RELATION_CONTAINS:r>e&&n<i?t.RANGE_RELATION_CONTAINED:r<=i&&n>i?t.RANGE_RELATION_TAIL:r>i?t.RANGE_RELATION_AFTER:t.RANGE_RELATION_SAME},t}(r.FrameworkObject);o.RANGE_RELATION_SAME=0,o.RANGE_RELATION_BEFORE=1,o.RANGE_RELATION_HEAD=2,o.RANGE_RELATION_TAIL=3,o.RANGE_RELATION_AFTER=4,o.RANGE_RELATION_CONTAINS=5,o.RANGE_RELATION_CONTAINED=6,t.PresentableCollection=o})},"geocortex/framework-ui/StringLocalizer":function(){define(["require","exports"],function(e,t){"use strict";function i(e,t,r){if(t){if(!e.allLibrariesLoaded)return void e.event("ViewerLibrariesDownloadedEvent").once(this,function(){i(e,t,r)});for(var n=0;n<r.length;n++){var o=r[n].get();o&&o.length>9&&"@language"==o.substring(0,9)&&r[n].set(e.getResource(t,o.substring(1)))}}}function r(e,t,i,n){if(t&&i&&n)if(e.allLibrariesLoaded)n(i&&i.length>9&&"@language"==i.substring(0,9)?e.getResource(t,i.substring(1)):i);else var o=e.event("ViewerLibrariesDownloadedEvent").subscribe(this,function(){e.event("ViewerLibrariesDownloadedEvent").unsubscribe(o),r(e,t,i,n)})}t.localizeObservables=i,t.localizeString=r})},"geocortex/framework-ui/ViewDescriptorInterface":function(){define(["require","exports"],function(e,t){"use strict"})},"geocortex/framework-ui/animation/AnimationState":function(){define(["require","exports"],function(e,t){"use strict";var i;!function(e){e[e.Idle=0]="Idle",e[e.Started=1]="Started",e[e.FrameBegin=2]="FrameBegin",e[e.FrameEnd=3]="FrameEnd",e[e.Completed=4]="Completed",e[e.Stopped=5]="Stopped",e[e.Error=6]="Error"}(i=t.AnimationState||(t.AnimationState={}))})},"geocortex/framework-ui/animation/AnimationKeyframe":function(){define(["require","exports"],function(e,t){"use strict";t.reservedKeyframeProperties=["className","duration","isDynamic"]})},"geocortex/framework-ui/animation/AnimationEvent":function(){define(["require","exports"],function(e,t){"use strict"})},"geocortex/framework-ui/animation/AnimationFrameCallback":function(){define(["require","exports"],function(e,t){"use strict"})},"geocortex/framework-ui/animation/AnimationSequence":function(){define(["require","exports","geocortex/framework-ui/animation/AnimationState","geocortex/framework-ui/animation/Animation"],function(e,t,i,r){"use strict";function n(){return t._activeAnimations.length>0}function o(){if(n())return!1;var e=a.slice();a=[];for(var t=0;t<e.length;++t)try{e[t]()}catch(i){console.error("Error during animation delegate: "+i)}return!0}function s(e){a.push(e),setTimeout(function(){return o()},0)}t._activeAnimations=[];var a=[];t.isAnimating=n,t.checkAndRunIdle=o,t.runWhenIdle=s;var c=function(){function e(e,t,r,n){var o=this;this._frameProvider=e,this._element=t,this._frame=-1,this._frames=[],this._frameCallback=n,this._state=i.AnimationState.Idle,r&&r.forEach(function(e){return o.add(e)})}return e.prototype.resets=function(){return this._resets},e.prototype.setResets=function(e){return this._resets=e,this},e.prototype.play=function(t){var r=this;if(t&&(this._frameCallback=t),this._state!==i.AnimationState.Idle)return this._animationPromise.reject(new Error("Animation already in progress."));this._animationPromise=$.Deferred();var n=e.getActiveAnimationForElement(this._element);return n?n._animationPromise.then(function(e){return r._startAnimation()}):this._frames.length?this._startAnimation():this._isDynamic&&!this._frames.length?(this._state=i.AnimationState.Idle,this._animationPromise):void 0},e.prototype.stop=function(){return this._state=i.AnimationState.Stopped,this._complete(!1)},e.prototype.add=function(e){if("string"==typeof e){var t=null,r=e;if(r.indexOf(":")>-1){var n=r.split(":");r=n[0],t=parseInt(n[1])}this._frames.push({className:r,duration:t})}else{var o={};for(var s in e)e.hasOwnProperty(s)&&(o[s]=e[s]);this._isDynamic&&(o.isDynamic=!0),this._frames.push(o)}return this._isDynamic&&this._state===i.AnimationState.Idle&&this._tick(),this},e.prototype._startAnimation=function(){var r=this;return t._activeAnimations.push(this),this._state=i.AnimationState.Started,this._frame=-1,setTimeout(function(){r._tick()},0),this._animationPromise.then(function(t){return e.removeAnimationForElement(r._element),t})},e.prototype._tick=function(){return this._frame>=this._frames.length?this._isDynamic?void(this._state=i.AnimationState.Idle):void this._complete():void this._applyFrame()},e.prototype._complete=function(e){setTimeout(function(){o()},0);var t={state:e?i.AnimationState.Stopped:i.AnimationState.Completed,element:this._element,frame:null};return this._animationPromise.resolve(t)},e.prototype._onFrameEnd=function(){++this._frame,this._state=i.AnimationState.Started,this._tick()},e.prototype._applyFrame=function(){var e=this;r.scheduleForAnimationFrame(function(){var t=e._frame===-1?null:e._frames[e._frame],r=e._frame>=e._frames.length-1?null:e._frames[e._frame+1];return e._isDynamic&&!r?void(e._state=i.AnimationState.Idle):(e._state=i.AnimationState.FrameBegin,void e._frameProvider.animate(e,e._element,t,r,function(r){if(r=r||{state:i.AnimationState.FrameEnd,element:e._element,frame:t},e._frameCallback)try{e._frameCallback(r)}catch(n){return console.error("Error in animation frame callback: "+n),e._animationPromise.reject(r)}if(r){if(r.state===i.AnimationState.Error)return e._animationPromise.reject(r);if(r.state!==i.AnimationState.FrameEnd)throw new Error("Animation provider emitted an event other than an error or a frame.")}e._onFrameEnd()}))})},e.getActiveAnimationForElement=function(e){return t._activeAnimations.filter(function(t){return t._element===e})[0]||null},e.removeAnimationForElement=function(e){for(var i=0;i<t._activeAnimations.length;++i)if(t._activeAnimations[i]._element===e)return t._activeAnimations.splice(i,1),!0;return!1},e}();t.AnimationSequence=c})},"geocortex/framework-ui/animation/AnimationProvider":function(){define(["require","exports"],function(e,t){"use strict"})},"geocortex/framework-ui/animation/AnimationProviderBase":function(){define(["require","exports"],function(e,t){"use strict";var i=function(){function e(){}return e.prototype.animate=function(e,t,i,r,n){throw new Error("Not implemented")},e}();t.AnimationProviderBase=i})},"geocortex/framework-ui/animation/providers/CachedKeyframe":function(){define(["require","exports"],function(e,t){"use strict"})},"geocortex/framework-ui/utils/UiUtils":function(){define(["require","exports"],function(e,t){"use strict";
function i(e){if(!e&&null!==s)return s;var t=e?e.toLowerCase():navigator.userAgent.toLowerCase(),i=/opera/.exec(t)||/(msie|trident)/.exec(t)||/firefox/.exec(t)||/(chrome|safari|webkit)/.exec(t),r={opera:"O",chrome:"webkit",safari:"webkit",webkit:"webkit",firefox:"Moz",msie:"ms",trident:"ms"},n=i?r[i[0]]||"":"";return e||(s=n),n}function r(e,t,i,r){var n=!1,o="tapToDismiss"+t.id;t.root===e.target?n=!0:$(e.target).parents().each(function(e){this===t.root&&(n=!0)}),n?i?r&&r(e):t.app.viewManager.deactivateView(t):($(document.body).off("mousedown."+o+" touchstart."+o),i&&i(e))}function n(e,t,i){if(e){var n="tapToDismiss"+e.id;$(document.body).off("mousedown."+n+" touchstart."+n),$(document.body).on("mousedown."+n+" touchstart."+n,function(n){return r(n,e,t,i)})}}function o(e){if(e){var t="tapToDismiss"+e.id;$(document.body).off("mousedown."+t+" touchstart."+t)}}var s=null;t.detectBrowserPrefix=i,t.tapToDismissThis=n,t.disableTapToDismiss=o})},"geocortex/framework-ui/animation/providers/CssTransitionAnimationProvider":function(){define(["require","exports","geocortex/framework-ui/animation/AnimationProviderBase","geocortex/framework-ui/animation/AnimationKeyframe","geocortex/framework-ui/utils/UiUtils","geocortex/framework/utils/utils"],function(e,t,i,r,n,o){"use strict";var s=function(e){function t(){var t=e.call(this)||this;return t._poolSize=1e3,t._poolFlushFactor=.75,t._poolSizeTarget=.5,t._cachedKeyframeMap={},t._cachedKeyframesArray=[],t._cssPropertyNameMap={},t._emittedStylesheet||(t._setupPropertyMap(),t._setupStylesheet()),t}return __extends(t,e),t.prototype.getKeyframeStyleCount=function(){return this._emittedStylesheet.cssRules.length},t.prototype.animate=function(e,t,i,r,n){var o,s,a,c=n;if(i&&r){if(!i.className){var l=this._getCachedKeyframeData(t,r);i.className=l.emittedClassName}a=t.className.replace(i.className,"").trim()}else a=i?t.className:t.className.replace(/anim-keyframe[-\d\w]+/g,"").trim();return r&&(o=r.duration,r.className?t.className.indexOf(r.className)===-1&&(a=a?a+" "+r.className:r.className):(s=this._getCachedKeyframeData(t,r),r.className=s.emittedClassName,t.className.indexOf(r.className)===-1&&(a=a?a+" "+s.emittedClassName:s.emittedClassName),++s.refCount,c=function(){n(),--s.refCount})),r&&$(t).hasClass(r.className)?void setTimeout(c,10):(t.className=a.trim().replace(/\s\s+/g," "),s&&s.duration&&(o=s.duration),null==o&&(!r&&i.duration?o=i.duration:r&&(o=this._getKeyframeDuration(t),r.duration=o,s&&(s.duration=r.duration))),r||e.resets()&&(t.className=t.className.replace(i.className,"").trim()),void setTimeout(c,null!=o?o:10))},t.prototype._setupPropertyMap=function(){var e,i="-{0}-".format(n.detectBrowserPrefix());if(window.getComputedStyle){var r=window.getComputedStyle(document.body);e=[];for(var o=0;o<r.length;++o)e.push(r[o])}else e=t._animatableProperties;["transition","transform"].forEach(function(e){return i+e});for(var o=0;o<e.length;++o){var s=e[o].replace(i,"").replace(/\-(\w)/g,function(e){return e.toUpperCase().replace("-","")});this._cssPropertyNameMap[s]=e[o]}},t.prototype._setupStylesheet=function(){var e=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(e),this._emittedStylesheet=e.sheet},t.prototype._generateFrameId=function(){return"anim-keyframe-"+o.alphaNumericToken(8)},t.prototype.getCssNameForProperty=function(e){return this._cssPropertyNameMap[e]||e},t.prototype._getHashKey=function(e){var t={};for(var i in e)!e.hasOwnProperty(i)||r.reservedKeyframeProperties.indexOf(i)>-1&&"duration"!==i||(t[i]=e[i]);return String.quickHashCode(JSON.stringify(t))},t.prototype._getCachedKeyframeData=function(e,t){var i="anim-keyframe"+this._getHashKey(t),r=this._cachedKeyframeMap[i];if(r)return++r.count,r;var n=null!=t.duration;t.className=i,t.duration=null!=t.duration?t.duration:this._getKeyframeDuration(e),r={key:i,count:0,refCount:0,emittedClassName:i,frame:t,duration:t.duration,styleBlockIndex:-1},this._cachedKeyframeMap[i]=r,this._cachedKeyframesArray.push(r);var o="."+t.className+" { ";for(var s in t)if(t.hasOwnProperty(s)&&"className"!==s&&"duration"!==s){var a=this.getCssNameForProperty(s)||s;o+=a+": "+t[s]+"; "}return n&&(o+=this.getCssNameForProperty("transitionDuration")+": "+t.duration+"ms !important; "),o+="} ",r.styleBlockIndex=this._emittedStylesheet.insertRule(o,this._emittedStylesheet.cssRules.length),this._emittedStylesheet.cssRules.length>=this._poolSize*this._poolFlushFactor&&(++r.refCount,this.flushKeyframes(),--r.refCount),r},t.prototype.flushKeyframes=function(){for(var e=this._emittedStylesheet.cssRules.length,t=this._poolSize*this._poolSizeTarget,i=e,r={},n=[],o=[],s=0;s<this._cachedKeyframesArray.length;++s){var a=this._cachedKeyframesArray[s];0===a.refCount?o.push(a):(n.push(a),r[a.key]=a)}i-=o.length,this._swapKeyframeSets(n,r);o.length;this._removeKeyframesFromStylesheets(o),i<=t},t.prototype._swapKeyframeSets=function(e,t){this._cachedKeyframesArray=e.slice(),this._cachedKeyframeMap={};for(var i in t)this._cachedKeyframeMap[i]=t[i]},t.prototype._removeKeyframesFromStylesheets=function(e,t){void 0===t&&(t=!0);for(var i=(this._cachedKeyframesArray.length,0);i<e.length;++i)this._emittedStylesheet.removeRule(e[i].styleBlockIndex-i);for(var i=0;i<this._emittedStylesheet.rules.length;++i){var r=this._emittedStylesheet.rules[i].selectorText.substr(1);this._cachedKeyframeMap[r].styleBlockIndex=i}},t.prototype._getKeyframeDuration=function(e){if(!window.getComputedStyle)return null;var t=window.getComputedStyle(e),i=t.getPropertyValue("transition-duration")||"0",r=t.getPropertyValue("transition-delay")||"0",n=i.indexOf("ms")>-1?parseFloat(i):1e3*parseFloat(i),o=r.indexOf("ms")>-1?parseFloat(r):1e3*parseFloat(r);return o+n},t.prototype._setPoolOptions=function(e){e.hasOwnProperty("poolSize")&&(this._poolSize=e.poolSize),e.hasOwnProperty("poolFlushFactor")&&(this._poolFlushFactor=e.poolFlushFactor),e.hasOwnProperty("poolSizeTarget")&&(this._poolSizeTarget=e.poolSizeTarget)},t}(i.AnimationProviderBase);s._animatableProperties=["background","background-color","background-position","border-bottom-color","border-bottom-width","border","border-color","border-left-color","border-left-width","border-right-color","border-right-width","border-spacing","border-top-color","border-top-width","bottom","clip","color","crop","font-size","font-weight","height","left","letter-spacing","line-height","margin","margin-bottom","margin-left","margin-right","margin-top","max-height","max-width","min-height","min-width","opacity","outline-color","outline-offset","outline-width","padding","padding-bottom","padding-left","padding-right","padding-top","right","text-indent","text-shadow","transform","transition-duration","transform-origin","top","vertical-align","visibility","width","word-spacing","z-index"],t.CssTransitionAnimationProvider=s})},"geocortex/framework-ui/animation/AnimationFactory":function(){define(["require","exports","geocortex/framework-ui/animation/AnimationSequence","geocortex/framework-ui/animation/providers/CssTransitionAnimationProvider"],function(e,t,i,r){"use strict";var n=function(){function e(e){this._animationProvider=e||null}return e.prototype.create=function(e,t,r){return this._isInitialized||this._init(),new i.AnimationSequence(this.getAnimationProvider(),e,t||[],r)},e.prototype.getAnimationProvider=function(){return this._animationProvider},e.prototype.setAnimationProvider=function(e){this._animationProvider=e},e.prototype._init=function(){this._isInitialized=!0,this._animationProvider||(this._animationProvider=new r.CssTransitionAnimationProvider)},e}();t.AnimationFactory=n})},"geocortex/framework-ui/animation/Animation":function(){define(["require","exports","geocortex/framework-ui/animation/AnimationFactory"],function(e,t,i){"use strict";function r(){return c}function n(e,t,r){return c||(c=new i.AnimationFactory),c.create(e,t,r)}function o(e,t,i){return n(e,t,i).play(i)}function s(){h=0;for(var e=l.splice(0,t.MAX_OPS_PER_FRAME),i=0;i<e.length;++i)e[i]();l.length&&!h&&setTimeout(function(){h=requestAnimationFrame(s)},0)}function a(e){l.push(e),h||(h=requestAnimationFrame(s))}t.MAX_OPS_PER_FRAME=1e3;var c=null,l=[],h=0;t.getDefault=r,t.create=n,t.play=o,t.scheduleForAnimationFrame=a})},"geocortex/framework-ui/ViewSwitcher/ViewSwitcherViewDescriptor":function(){define(["require","exports","geocortex/framework/observables"],function(e,t,i){"use strict";var r=function(){function e(e,t){this.view=e,this.viewSwitcherViewModel=t,this.title=e.title,this.isActive=new i.Observable(e.isActive)}return e}();t.ViewSwitcherViewDescriptor=r})},"geocortex/framework-ui/ViewSwitcher/ViewSwitcherViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","geocortex/framework-ui/ViewSwitcher/ViewSwitcherViewDescriptor"],function(e,t,i,r,n){"use strict";var o=function(e){function t(t,i,n){var o=e.call(this,t,i)||this;return o.viewDescriptors=new r.ObservableCollection([]),o.viewSwitcherActive=new r.Observable((!1)),o.targetRegion=n||"",o}return __extends(t,e),t.prototype.initialize=function(e){return e&&!this.targetRegion&&(this.targetRegion=e.targetRegion),this.targetRegion?void this._subscribeEvents():void this.app.trace.error("ViewSwitcherViewModel: Target region not configured.")},t.prototype.getDescriptorForView=function(e){if(e)for(var t=0;t<this.viewDescriptors.getLength();++t){var i=this.viewDescriptors.getAt(t);if(i.view.id===e.id)return i}return null},t.prototype.updateViewSwitcherState=function(){this.viewSwitcherActive.set(this.checkIfSwitcherActive())},t.prototype.createDescriptorForView=function(e){return new n.ViewSwitcherViewDescriptor(e,this)},t.prototype.handleViewHostedEvent=function(e){if(e.region.name===this.targetRegion&&e.view){var t=this.createDescriptorForView(e.view);this.viewDescriptors.addItem(t),this.updateViewSwitcherState()}},t.prototype.handleViewUnHostedEvent=function(e){if(e.region.name===this.targetRegion&&e.view){var t=this.getDescriptorForView(e.view);t&&(this.viewDescriptors.removeItem(t),this.updateViewSwitcherState())}},t.prototype.handleViewActivatedEvent=function(e){var t=this.getDescriptorForView(e);t&&(this._deactivateActiveTabsInTargetRegion(),t.isActive.set(!0))},t.prototype.handleViewDeactivatedEvent=function(e){var t=this.getDescriptorForView(e);t&&t.isActive.set(!1)},t.prototype.checkIfSwitcherActive=function(){return this.viewDescriptors.length()>1},t.prototype._deactivateActiveTabsInTargetRegion=function(){this.viewDescriptors.get().forEach(function(e){return e.isActive.get()&&e.isActive.set(!1)})},t.prototype._subscribeEvents=function(){this.app.event("ViewHostedEvent").subscribe(this,this.handleViewHostedEvent),this.app.event("ViewUnhostedEvent").subscribe(this,this.handleViewUnHostedEvent),this.app.event("ViewActivatedEvent").subscribe(this,this.handleViewActivatedEvent),this.app.event("ViewDeactivatedEvent").subscribe(this,this.handleViewDeactivatedEvent)},t}(i.ViewModelBase);t.ViewSwitcherViewModel=o})},"geocortex/framework-ui/MultiRegion/RegionDescriptor":function(){define(["require","exports","geocortex/framework/observables"],function(e,t,i){"use strict";var r=function(){function e(e,t,r){if(this.regionActive=new i.Observable((!1)),this.displayRegionViewSwitcher=new i.Observable((!1)),this.viewSwitcherViewModel=new i.Observable(null),this.DEFAULT_REGION_TYPE="geocortex.framework.ui.MultiDivRegionAdapter",this.DEFAULT_CSS_CLASS="region-container",!e)throw new Error("RegionDescriptor Error: Cannot create region descriptor. Region name not defined.");this.regionName=e,this.regionType=t||this.DEFAULT_REGION_TYPE,this.regionCss=this.DEFAULT_CSS_CLASS+(r?" "+r.trim():"")}return e}();t.RegionDescriptor=r})},"geocortex/framework-ui/MultiRegion/MultiRegionViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","geocortex/framework-ui/MultiRegion/RegionDescriptor","geocortex/framework-ui/ViewSwitcher/ViewSwitcherViewModel"],function(e,t,i,r,n,o){"use strict";var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.regionDescriptors=new r.ObservableCollection([]),t.autoInsertViewSwitcher=!1,t.regionViewSwitcherWidgetMarkup="Framework.UI/geocortex/framework/ui/ViewSwitcher/ViewSwitcherView.html",t.regionViewSwitcherWidgetType="geocortex.framework.ui.ViewSwitcher.ViewSwitcherView",t.regionViewSwitcherLibraryId="Framework.UI",t.supportedViewSwitcherRegionAdapters=["geocortex.framework.ui.MultiDivRegionAdapter","geocortex.framework.ui.MultiViewRegionAdapter"],t}return __extends(t,e),t.prototype.initialize=function(e){var t=this;return e&&e.regions&&dojo.isArray(e.regions)?(this.autoInsertViewSwitcher=!!e.autoInsertViewSwitcher,e.regions.forEach(function(e){return e.regionName&&t.regionDescriptors.addItem(t.createDescriptorForRegion(e.regionName,e.regionType,e.regionCss))}),void this._processRegionDescriptors()):void this.app.trace.error("MultiRegionViewModel: Region configuration not found or invalid region configuration syntax.")},t.prototype.getRegionDescriptorByRegionName=function(e){for(var t=0;t<this.regionDescriptors.length();t++){var i=this.regionDescriptors.getAt(t);if(i.regionName===e)return i}return null},t.prototype.supportsViewSwitcher=function(e){return this.autoInsertViewSwitcher&&this.supportedViewSwitcherRegionAdapters.indexOf(e.regionType)>-1},t.prototype.createDescriptorForRegion=function(e,t,i){return new n.RegionDescriptor(e,t,i)},t.prototype.createViewSwitcherViewModel=function(e){return new o.ViewSwitcherViewModel(this.app,this.libraryId,e)},t.prototype.processRegion=function(e){e&&this.supportsViewSwitcher(e)&&(e.viewSwitcherViewModel.set(this.createViewSwitcherViewModel(e.regionName)),e.displayRegionViewSwitcher.sync(e.viewSwitcherViewModel.get().viewSwitcherActive))},t.prototype._processRegionDescriptors=function(){var e=this;this.regionDescriptors.get().forEach(function(t){return e.processRegion(t)})},t}(i.ViewModelBase);t.MultiRegionViewModel=s})},"geocortex/framework-ui/MultiRegion/MultiRegionView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,i){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.attach=function(t){e.prototype.attach.call(this,t),this._wireUpEventSubscriptions()},t.prototype.resolveWidget=function(t,i,r){if(e.prototype.resolveWidget.call(this,t,i,r),"RegionViewSwitcherWidget"===t){if(!i)return null;var n=this.app.viewManager.createView({markupResource:this.viewModel.regionViewSwitcherWidgetMarkup,typeName:this.viewModel.regionViewSwitcherWidgetType,libraryId:this.viewModel.regionViewSwitcherLibraryId});return n&&n.attach(i),n}return null},t.prototype._wireUpEventSubscriptions=function(){this.app.event("RegionActivatedEvent").subscribe(this,this._handleRegionActivatedEvent),this.app.event("RegionDeactivatedEvent").subscribe(this,this._handleRegionDeactivatedEvent)},t.prototype._handleRegionActivatedEvent=function(e){var t=this.viewModel.getRegionDescriptorByRegionName(e.name.toString());t&&(t.regionActive.set(!0),this.regionName&&!this.isActive&&this.app.viewManager.activateView(this))},t.prototype._handleRegionDeactivatedEvent=function(e){var t=this.viewModel.getRegionDescriptorByRegionName(e.name.toString());t&&(t.regionActive.set(!1),dojo.some(this.viewModel.regionDescriptors.get(),function(e){return e.regionActive.get()===!0})||this.regionName&&this.isActive&&this.app.viewManager.deactivateView(this))},t}(i.ViewBase);t.MultiRegionView=r})},"geocortex/framework-ui/Selector/SelectorItemViewModel":function(){define(["require","exports","geocortex/framework/observables","geocortex/framework/utils/utils"],function(e,t,i,r){"use strict";var n=function(){function e(e,t,n){this.id=new i.Observable,this.id.set(r.alphaNumericToken()),this.displayName=new i.Observable(null===e||void 0===e?"":e),this.isSelected=new i.Observable((!!n)),this.item=t||null}return e.prototype.getId=function(){return this.id.get()},e}();t.SelectorItemViewModel=n})},"geocortex/framework-ui/Selector/SelectorViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","geocortex/framework-ui/Selector/SelectorItemViewModel"],function(e,t,i,r,n){"use strict";var o=function(e){function t(t,i,o,s){void 0===o&&(o=!0),void 0===s&&(s=!0);var a=e.call(this,t,i)||this;return a.displayNameField="displayName",a.dummyItemText=null,a.templatePath=null,a.templateLibraryId=null,a.templateTypeName=null,a.mobileMode=!0,a.singleSelect=o,a._selectedItems=new r.ObservableCollection,a.showSelectorHeader=new r.Observable((!1)),a.showNativeSelect=new r.Observable(s),a.selectorText=new r.Observable(""),a.noItemsText=new r.Observable(""),a.openState=new r.Observable(a.showNativeSelect.get()&&o),a.items=new r.ObservableCollection,a.selectedItems=new r.ObservableCollection,a.dummyItem=new n.SelectorItemViewModel,a}return __extends(t,e),t.prototype.toggleOpenState=function(){this.showNativeSelect.get()&&this.singleSelect||this.openState.set(!this.openState.get())},t.prototype.setCollection=function(e,t,i,r,n){this.syncToken&&(this._underlyingCollection.unbind(this.syncToken),this.syncToken=null),this.displayNameField=t,this.templatePath=i,this.templateLibraryId=r,this.templateTypeName=n,this.showSelectorHeader.set(!this.showNativeSelect.get()||!this.singleSelect),this._underlyingCollection=e,this.syncToken=this._underlyingCollection.bind(this,this.handleUnderlyingCollectionChange),this.clear(),this.items.addItems(this._adapt(this._underlyingCollection.get()))},t.prototype.clear=function(){this.items.clear(),this.dummyItemText&&(this.dummyItem.displayName.set(this.dummyItemText),this.items.addItem(this.dummyItem))},t.prototype._adapt=function(e){var t=this,i=[];return e.forEach(function(e){var r=new n.SelectorItemViewModel;e[t.displayNameField].isObservable?r.displayName.set(e[t.displayNameField].get()):r.displayName.set(e[t.displayNameField]),r.item=e,i.push(r)}),i},t.prototype.handleUnderlyingCollectionChange=function(e){var t;switch(e.type){case"append":t=this._adapt(this._underlyingCollection.getRange(e.rangeStart,e.rangeEnd)),this.items.addItems(t);break;case"insert":t=this._adapt(this._underlyingCollection.getRange(e.rangeStart,e.rangeEnd)),this.items.insertItems(e.rangeStart,t);break;case"remove":this.items.removeRange(e.rangeStart,e.rangeEnd);break;case"clear":this.clear();break;case"set":t=this._adapt(this._underlyingCollection.getRange(e.rangeStart,e.rangeEnd)),this.clear(),this.items.addItems(t)}},t.prototype.getViewModelForItem=function(e){for(var t=0;t<this.items.getLength();++t)if(this.items.getAt(t).item===e)return this.items.getAt(t);return null},t.prototype.getViewModelForSelectedItem=function(e){for(var t=0;t<this._selectedItems.getLength();++t)if(this._selectedItems.getAt(t).item===e)return this._selectedItems.getAt(t);return null},t.prototype.getSelectedItems=function(){return this._selectedItems.get().slice()},t.prototype.hasItemViewModelFor=function(e){return!!this.getViewModelForItem(e)},t.prototype.selectItem=function(e,t){this._setItemSelectedState(e,t,!0)},t.prototype.unselectItem=function(e,t){this._setItemSelectedState(e,t,!1)},t.prototype.onSelectItem=function(e){},t.prototype.onUnselectItem=function(e){},t.prototype.handleSelectionChange=function(e,t){if(e===!0)this.selectItem(null,t);else{var i=!t.isSelected.get();i?this.selectItem(null,t):this.unselectItem(null,t)}},t.prototype.unselectAll=function(e){var t=this;this._selectedItems.get().forEach(function(i){"string"!=typeof i&&i.isSelected.get()===!0&&(e&&e===i||t.unselectItem(null,i))}),this.openState.get()&&!this.singleSelect&&this.openState.set(!1)},t.prototype._setItemSelectedState=function(e,t,i){if(t=t||this.getViewModelForItem(e),!t)throw new Error("Tried to select an item in a Framework UI selector but item was not part of bound collection.");this.singleSelect&&i&&this.unselectAll(t),t.isSelected.get()!==i&&(t.isSelected.set(i),i?this._selectedItems.addItem(t):this._selectedItems.removeItem(t),i&&this.onSelectItem?this.onSelectItem(t):!i&&this.onUnselectItem&&this.onUnselectItem(t))},t}(i.ViewModelBase);t.SelectorViewModel=o})},"geocortex/framework-ui/Selector/SelectorView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,i){"use strict";var r="data-is-dummy",n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._itemViews=[],t}return __extends(t,e),t.prototype.attach=function(t){var i=this;e.prototype.attach.call(this,t),this.viewModel.singleSelect||dojo.attr(this.selectElement,"multiple","multiple"),t.openState.bind(this,function(e){if(e){var t={view:i,onOtherInteracted:function(e){return i.viewModel.openState.set(!1)}};i.app.command("TapToDismiss").execute(t),i.viewModel.openState.get()&&!i.viewModel.showNativeSelect.get()&&i.positionCustomSelect()}}),t.items.bind(this,function(e){if(["remove"].indexOf(e.type)>-1)for(var t=e.rangeStart;t<=e.rangeEnd;++t)for(var r=i._itemViews.length;r--;){var n=i._itemViews[r];n&&n.viewModel==e.sender.getAt(t)&&(i.app.viewManager.destroyView(n),i._itemViews.splice(r,1))}})},t.prototype.handleSelectionChange=function(e,t,i){for(var n=this,o=t,s=[],a=0;a<o.options.length;++a)s.push(o.options[a]);var c=s.filter(function(e){return e.selected&&null==e.attributes[r]});return c.length<1?(this.viewModel.unselectAll(),!0):(setTimeout(function(){var e=n.viewModel.items.get(),t=n.viewModel.getSelectedItems();e.map(function(e){t.indexOf(e)>-1?n.viewModel.selectItem(e.item,e):n.viewModel.unselectItem(e.item,e)}),n.viewModel.singleSelect&&n.viewModel.toggleOpenState()}),!0)},t.prototype.handleClickItem=function(e,t,i){return i===this.viewModel.dummyItem?(this.viewModel.unselectAll(),void this.viewModel.toggleOpenState()):(this.viewModel.handleSelectionChange(null,i),this.viewModel.singleSelect&&this.viewModel.toggleOpenState(),!0)},t.prototype.handleClickSelector=function(e,t,i){return this.viewModel.toggleOpenState(),!0},t.prototype.positionCustomSelect=function(){var e=this.customSelect;e.style.top="auto",e.style.left="auto",e.style.opacity="0",this.app.viewManager.activateView(this);var t=document.body.clientWidth,i=document.body.clientHeight,r=e.getBoundingClientRect();r.left+r.width>t&&(e.style.left=-1*r.width+"px"),r.top+r.height>i&&(e.style.top=-1*r.height+"px"),e.style.opacity="1"},t.prototype.resolveWidget=function(e,t,i){if("SelectorItemWidget"===e){var r=this.viewModel.templatePath||"Framework.UI/geocortex/framework/ui/Selector/DefaultItemTemplate.html",n=this.viewModel.templateLibraryId||this.libraryId,o=this.viewModel.templateTypeName||"geocortex.framework.ui.ViewBase",s=this.app.viewManager.createView({typeName:o,markupResource:r,isVisible:!0,libraryId:n});return s.parentView=this,s.attach(t),this._itemViews.push(s),s}},t}(i.ViewBase);t.SelectorView=n})},"geocortex/framework-ui/SplashScreen/SplashScreenView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,i){"use strict";var r=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r._siteInitializedToken=null,r._siteInitializedFailedToken=null,r.app.command("HideSplashScreen").register(r,function(){this.removeSplash()}),r.app.site&&r.app.site.isInitialized?r.removeSplash():(r._siteInitializedToken=r.app.event("SiteInitializedEvent").once(r,function(){setTimeout(function(){r.removeSplash()},0)}),r._siteInitializedFailedToken=r.app.event("SiteInitializationFailedEvent").subscribe(r,function(){setTimeout(function(){r.removeSplash()},0)}),r._siteInitializedFailedToken=r.app.event("UserSignInCancelledEvent").subscribe(r,function(){setTimeout(function(){r.removeSplash()},0)})),r}return __extends(t,e),t.prototype.removeSplash=function(){var e=this;this.app.viewManager.deactivateView(this),this.app.command("HideSplashScreen").clear(),this._siteInitializedToken&&this.app.event("SiteInitializedEvent").unsubscribe(this._siteInitializedToken),this._siteInitializedFailedToken&&this.app.event("SiteInitializationFailedEvent").unsubscribe(this._siteInitializedFailedToken),setTimeout(function(){e.app.viewManager.destroyView(e)},250)},t}(i.ViewBase);t.SplashScreenView=r})},"geocortex/framework-ui/ViewContainer/ViewContainerViewClosedEventArgs":function(){define(["require","exports"],function(e,t){"use strict";var i=function(){function e(e,t,i,r){this.containerViewId=e,this.viewId=t,this.xButtonClicked=i,this.backButtonClicked=r}return e}();t.ViewContainerViewClosedEventArgs=i})},"geocortex/framework-ui/ViewContainer/ViewContainerView":function(){define(["require","exports","geocortex/framework/ui/ViewBase","geocortex/framework/observables","geocortex/framework-ui/ViewContainer/ViewContainerViewClosedEventArgs"],function(e,t,i,r,n){"use strict";var o=function(e){function t(t,i){var n=e.call(this,t,i)||this;n._hasDiscoveredRegions=!1,n._active=!1,n._keyDownEventToken=null,n._activatingForViewInContainer=!1,n.headerInsertDomElement=new r.Observable(null),n.footerInsertDomElement=new r.Observable(null),n.scrollContainerTop=new r.Observable(0),n.scrollContainerBottom=new r.Observable(0);n.app.eventRegistry.event("ViewActivatedInContainerEvent").subscribe(n,n._handleViewActivatedInContainerEvent);return n.app.event("RegionActivatedEvent").subscribe(n,n.handleRegionActivatedEvent),n.app.event("RegionDeactivatedEvent").subscribe(n,n.handleRegionDeactivatedEvent),n.app.event("ViewDimensionsChangedEvent").subscribe(n,n.resize),n.app.event("SiteInitializedEvent").once(n,n.delayedResize),n}return __extends(t,e),t.prototype.attach=function(t){var i=this;e.prototype.attach.call(this,t),this.title.sync(this.viewModel.viewTitle),this.headerInsertDomElement.sync(this.viewModel.headerInsertDomElement),this.footerInsertDomElement.sync(this.viewModel.footerInsertDomElement),this.viewModel.headerIsVisible.bind(this,function(e){return i.delayedResize()}),this.delayedResize()},t.prototype.resize=function(){if(this.headerElement&&this.scrollRegionElement&&this.containerElement){var e=$(this.scrollRegionElement),t=$(this.headerElement),i=$(this.footerElement),r=t.length&&"none"!==t.css("display")?t.outerHeight():0,n=i.length&&"none"!==i.css("display")?i.outerHeight():0;"relative"!==e.css("position")&&e.css("top",r+"px"),e.css("bottom",n+"px")}},t.prototype.delayedResize=function(){var e=this;setTimeout(function(){e.resize()},1)},t.prototype.getZerothView=function(){for(var e=0;e<this.viewModel.viewDescriptors.getLength();++e){var t=this.viewModel.viewDescriptors.getAt(e);if(0===this.viewModel.getViewPriority(t.view.id))return t.view}return null},t.prototype.activated=function(){if(e.prototype.activated.call(this),!this._active&&this.viewModel&&!this._activatingForViewInContainer){this._activatingForViewInContainer=!1,this._active=!0;var t=this.getZerothView();if(t&&!t.isActive)this.app.viewManager.activateView(t),this._active=!0;else var i=this.viewModel.viewDescriptors.bind(this,function(e){var t=e.sender.getAt(0);t&&0===this.viewModel.getViewPriority(t.view.id)&&(t.view.isActive||this.app.viewManager.activateView(t.view),this.viewModel.viewDescriptors.unbind(i))})}this.viewModel&&this.viewModel.showOrHideCloseButtons(),this.viewModel&&this.viewModel.closeOnEscape&&(this._keyDownEventToken=dojo.connect(document,"keydown",this,this._documentKeyDown)),this.app.event("ViewContainerActivatedEvent").publish(this),this.delayedResize()},t.prototype.deactivated=function(){e.prototype.deactivated.call(this),this._activatingForViewInContainer=!1,this._keyDownEventToken&&(dojo.disconnect(this._keyDownEventToken),this._keyDownEventToken=null),this.app.event("ViewContainerDeactivatedEvent").publish(this)},t.prototype.activateContainer=function(){this._active=!0,this.regionName&&this.app.viewManager.activateView(this)},t.prototype.deactivateContainer=function(){this._active=!1,this.app.viewManager.deactivateView(this)},t.prototype.handleScrollChange=function(e,t,i){var r=i.getDescriptorForActiveView(i.currentView);r.scrollTop=t.scrollTop},t.prototype.handleRegionActivatedEvent=function(e){this.viewModel&&e.name===this.viewModel.regionName.get()&&this.activateContainer()},t.prototype.handleRegionDeactivatedEvent=function(e){this.viewModel&&e.name===this.viewModel.regionName.get()&&this.deactivateContainer()},t.prototype.handleClickBack=function(e,t,i){if(i.currentView){var r=i.currentView;this._closeCurrentView(i),this._broadcastClosedEvent(r,!1,!0)}},t.prototype.handleClickClose=function(e,t,i){if(i.currentView){var r=i.currentView;this._closeCurrentView(i),this._broadcastClosedEvent(r,!0,!1)}},t.prototype.handleClickTab=function(e,t,i){var r=i.view;r&&this.app.command("ActivateView").execute(r.id)},t.prototype.handleClickCloseTab=function(e,t,i){var r=i.view;r&&this.app.viewManager.destroyView(r)},t.prototype._documentKeyDown=function(e){if(27===e.keyCode&&this.viewModel){var t=this.viewModel.currentView;this._closeCurrentView(this.viewModel),this._broadcastClosedEvent(t,!0,!1)}},t.prototype._handleViewActivatedInContainerEvent=function(e){var t=this;this._activatingForViewInContainer=!1;var i=null;if(this.viewModel&&(i=this.viewModel.getDescriptorForActiveView(e))){this._activatingForViewInContainer=!0,this.regionName&&this.app.viewManager.activateView(this);var r=void 0===i.scrollTop?0:i.scrollTop;"FeatureDetailsView"!=i.view.id&&"EditorView"!=i.view.id&&setTimeout(function(){dojo.style(t.scrollRegionElement,"scrollTop",r),t.scrollRegionElement.scrollTop=r},0),this.delayedResize()}},t.prototype._closeCurrentView=function(e){e.closeCurrentView()},t.prototype._broadcastClosedEvent=function(e,t,i){var r=new n.ViewContainerViewClosedEventArgs(this.id,e.id,t,i);this.app.event("ViewContainerViewClosedEvent").publish(r)},t}(i.ViewBase);t.ViewContainerView=o})},"geocortex/framework-ui/ViewContainer/ViewDescriptor":function(){define(["require","exports","geocortex/framework/observables","geocortex/framework-ui/ViewContainer/ViewContainerView"],function(e,t,i,r){"use strict";var n=function(){function e(e,t){if(this.containerTitle=new i.Observable(null),this.isBusy=new i.Observable(null),this.isActive=new i.Observable((!1)),this.cssClass=new i.Observable("tab-inactive"),this.view=e,this.iconUri=e.iconUri.get()?e.iconUri:new i.Observable(t.defaultViewIconUri),this.title=e.title,this.isBusy=e.isBusy,this.priority=1,e instanceof r.ViewContainerView==!0){var n=e;this.containerTitle.set(n.viewModel.containerTitle.get()),n.viewModel.containerManagedTitle.get()&&(this.title=n.viewModel.containerManagedTitle)}}return e}();t.ViewDescriptor=n})},"geocortex/framework-ui/ViewContainer/ViewContainerViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","geocortex/framework-ui/ViewContainer/ViewDescriptor","geocortex/framework-ui/ViewContainer/ViewContainerView"],function(e,t,i,r,n,o){"use strict";var s=function(e){function t(t,i){var n=e.call(this,t,i)||this;n.regionName=new r.Observable(""),n.regionType=new r.Observable(null),n.headerIsVisible=new r.Observable((!0)),n.titleBarIsVisible=new r.Observable((!0)),n.hasCustomHeaderComponent=new r.Observable((!1)),n.hasCustomFooterComponent=new r.Observable((!1)),n.showingBackButton=new r.Observable((!0)),n.showBusyIndicator=new r.Observable((!1)),n.showHostedViews=new r.Observable((!1)),n.showingXButton=new r.Observable((!0)),n.containerTitle=new r.Observable(""),n.containerManagedTitle=new r.Observable(""),n.viewTitle=new r.Observable(""),n.closeTitle=new r.Observable(""),n.backTitle=new r.Observable(""),n.fullTitle=new r.Observable(""),n.viewDescriptors=new r.ObservableCollection,n.activeViewDescriptors=new r.ObservableCollection,n.headerInsertDomElement=new r.Observable(null),n.footerInsertDomElement=new r.Observable(null),n.managedViewsOnly=!1,n.defaultViewIconUri=null,n._viewDescriptorConstructor=null,n._activeViews={},n._insertedViews=[],n._ordering={},n._backButtonOnRootView=!0,n._showBackButton=!0,n._showBackButtonAsX=!0,
n._originalHeaderIsVisibleSetting=!1,n._showHeaderForStandaloneViews=!1,n._fullTitleFormatString="{0} - {1}";var o=n.app.viewManager.getExistingRegionByName(n.regionName.get());if(o)for(var s=0;s<o.views.length;++s)n._addOrderedView(n.createDescriptorForView(o.views[s]));return n.app.event("ViewHostedEvent").subscribe(n,n.handleViewHosted),n.app.event("ViewUnhostedEvent").subscribe(n,n.handleViewUnhosted),n.app.event("ViewActivatedEvent").subscribe(n,n.handleViewActivatedEvent),n.app.event("ViewDeactivatedEvent").subscribe(n,n.handleViewDeactivatedEvent),n}return __extends(t,e),t.prototype.initialize=function(e){var t=this;this.regionName.set(e.containerRegionName),this.regionType.set(e.containerRegionType||"geocortex.framework.ui.MultiDivRegionAdapter"),this.containerTitle.set(e.containerTitle||null),this.containerManagedTitle.set(e.containerManagedTitle||null),this.defaultViewIconUri=e.defaultViewIcon||null,this.containerTitle.get()&&this.viewTitle.sync(this.containerTitle),null!==e.headerIsVisible&&void 0!==e.headerIsVisible?this._originalHeaderIsVisibleSetting=!!e.headerIsVisible:this._originalHeaderIsVisibleSetting=!0,this._showHeaderForStandaloneViews=!!e.showHeaderForStandaloneViews,this.headerIsVisible.set(this._originalHeaderIsVisibleSetting),this.showHostedViews.set(!!e.showHostedViews),this._ordering=e.ordering||{},this._backButtonOnRootView=e.backButtonOnRootView,this._showBackButtonAsX=e.showBackButtonAsX,this.closeOnEscape=!!e.closeOnEscape,this._viewDescriptorConstructor=e.viewDescriptor||null;var i=function(r,n){if(e["{0}InsertMarkup".format(r)])try{var o={markupResource:e["{0}InsertMarkup".format(r)],typeName:e["{0}InsertType".format(r)],libraryId:t.libraryId};if(e["{0}InsertLibraryId".format(r)]){if(!t.app.allLibrariesLoaded){var s=t.app.event("ViewerLibrariesDownloadedEvent").subscribe(t,function(){t.app.event("ViewerLibrariesDownloadedEvent").unsubscribe(s),i(r,n)});return}o.libraryId=e["{0}InsertLibraryId".format(r)]}else o.libraryId="Framework.UI";var a=t.app.viewManager.createView(o);a.attach(t),t._insertedViews.push(a),n.set(a.root)}catch(c){t.app.trace.error("Could not create view {0} container insert: {1}".format(r,c.toString()))}};i("header",this.headerInsertDomElement),i("footer",this.footerInsertDomElement)},t.prototype.createDescriptorForView=function(e){if(this._viewDescriptorConstructor){var t=dojo.getObject(this._viewDescriptorConstructor);if(t)return new t(e,this);this.app.trace.error("Couldn't find viewDescriptor type: "+this._viewDescriptorConstructor),this._viewDescriptorConstructor=null}return new n.ViewDescriptor(e,this)},t.prototype.getDescriptorForView=function(e){for(var t=0;t<this.viewDescriptors.getLength();++t){var i=this.viewDescriptors.getAt(t);if(i.view===e)return i}return null},t.prototype.getDescriptorForActiveView=function(e){for(var t=0;t<this.activeViewDescriptors.getLength();++t){var i=this.activeViewDescriptors.getAt(t);if(i.view===e)return i}return null},t.prototype.handleViewHosted=function(e){if((!this.managedViewsOnly||e.view.isManaged)&&e.region.name===this.regionName.get()){var t=this.getDescriptorForView(e.view);if(!t&&(t=this.createDescriptorForView(e.view),this._addOrderedView(t),this.showHostedViews.get())){var i=this.getDescriptorForActiveView(e.view);i||this.insertActiveViewDescriptor(t)}}},t.prototype.handleViewUnhosted=function(e){if(e.region.name===this.regionName.get()){var t=this.getDescriptorForView(e.view);t&&(this.viewDescriptors.removeItem(t),this.showHostedViews.get()||this.activeViewDescriptors.removeItem(t))}},t.prototype.handleViewActivatedEvent=function(e){if(!this.managedViewsOnly||e.isManaged){var t=this.app.viewManager.getRegionForViewId(e.id);if(t&&t.name===this.regionName.get()){var i=this.getDescriptorForView(e);i||(i=this.createDescriptorForView(e),this._addOrderedView(i)),this._activeViews[e.id]=!0,this.app.trace.debug("--- Activated view {0}".format(e.id)),this.activateViewInContainer(e)}}},t.prototype.handleViewDeactivatedEvent=function(e){var t=this.app.viewManager.getRegionForViewId(e.id);if(t&&t.name===this.regionName.get()){this._activeViews[e.id]=!1;var i=this.getDescriptorForView(e);i&&!this.showHostedViews.get()&&this.activeViewDescriptors.removeItem(i),this.app.trace.debug("--- Deactivated view {0}".format(e.id)),this.deactivateViewInContainer(e)}},t.prototype.activateViewInContainer=function(e){this.deactivateViews(),this.currentView=e;var t=this.getDescriptorForView(e);t?(t.isActive.set(!0),t.cssClass.set("tab-active")):e.isManaged&&(t=this.createDescriptorForView(e),t.isActive.set(!0),t.cssClass.set("tab-active"),this._addOrderedView(t));var i=this.getDescriptorForActiveView(e);i||this.insertActiveViewDescriptor(t),this.app.event("ViewActivatedInContainerEvent").publish(e),!this._showHeaderForStandaloneViews||e instanceof o.ViewContainerView?this.headerIsVisible.set(this._originalHeaderIsVisibleSetting):this.headerIsVisible.set(!0),this.showOrHideCloseButtons(),this.containerTitle.get()||this.viewTitle.sync(e.title),this.backTitle.set(this.app.getResource(this.libraryId,"language-framework-ui-view-container-view-back").format(this.viewTitle.get())),this.closeTitle.set(this.app.getResource(this.libraryId,"language-framework-ui-view-container-view-close").format(this.viewTitle.get())),this.showBusyIndicator.sync(e.isBusy)},t.prototype.showOrHideCloseButtons=function(){var e=this.viewDescriptors.getAt(0);e&&(this.currentView===e.view?this._backButtonOnRootView?(this.showingXButton.set(this._showBackButtonAsX),this.showingBackButton.set(!this._showBackButtonAsX)):(this.showingBackButton.set(!1),this.showingXButton.set(!1)):this.currentView&&this.currentView.hasOwnProperty("configuration")&&(this.currentView.configuration.hasOwnProperty("showXButton")||this.currentView.configuration.hasOwnProperty("showBackButton"))?this.currentView.configuration.hasOwnProperty("showXButton")?(this.showingXButton.set(!!this.currentView.configuration.showXButton),this.showingBackButton.set(!1)):(this.showingBackButton.set(!!this.currentView.configuration.showBackButton),this.showingXButton.set(!1)):(this.showingXButton.set(this._showBackButtonAsX),this.showingBackButton.set(!this._showBackButtonAsX)))},t.prototype.deactivateViewInContainer=function(e){var t=this.getDescriptorForView(e);t&&(t.isActive.set(!1),t.cssClass.set("tab-inactive"),this.showHostedViews.get()||this.activeViewDescriptors.removeItem(t)),this.showOrHideCloseButtons()},t.prototype.closeCurrentView=function(){var e=this.getDescriptorForView(this.currentView);e&&!this.showHostedViews.get()&&this.activeViewDescriptors.removeItem(e),this.deactivateCurrentView()},t.prototype.deactivateCurrentView=function(){this.currentView&&this.app.viewManager.deactivateView(this.currentView)},t.prototype.deactivateViews=function(){for(var e=0;e<this.viewDescriptors.getLength();++e){var t=this.viewDescriptors.getAt(e);t.isActive.set(!1),t.cssClass.set("tab-inactive")}},t.prototype.getViewPriority=function(e){return this._ordering.hasOwnProperty(e)?parseInt(this._ordering[e]):null},t.prototype._addOrderedView=function(e){var t=e.view,i=this.getDescriptorForActiveView(t);if(!this._ordering)return this.viewDescriptors.addItem(e),void(t.isActive&&!i&&this.insertActiveViewDescriptor(e));var r=t.id;if(!r)return this.viewDescriptors.addItem(e),void(t.isActive&&!i&&this.insertActiveViewDescriptor(e));var n=this.getViewPriority(r);if(e.priority=n,null===n||void 0===n)return e.priority=this.activeViewDescriptors.getLength()+1,this.viewDescriptors.addItem(e),void(t.isActive&&!i&&this.insertActiveViewDescriptor(e));for(var o=!1,s=0;s<this.viewDescriptors.getLength();++s){var a=this.viewDescriptors.getAt(s).view,c=this.getViewPriority(a.id);if(null===c||n<=c){o=!0,this.viewDescriptors.insertItem(s,e);break}}o||this.viewDescriptors.addItem(e),t.isActive&&this.insertActiveViewDescriptor(e)},t.prototype.insertActiveViewDescriptor=function(e){for(var t=0;t<this.activeViewDescriptors.getLength();++t){var i=this.activeViewDescriptors.getAt(t);if(e.priority<i.priority)return void this.activeViewDescriptors.insertItem(t,e)}this.activeViewDescriptors.addItem(e)},t.prototype.dispose=function(){for(var e=0;e<this._insertedViews.length;e++){var t=this._insertedViews[e];this.app.viewManager.destroyView(t)}this._insertedViews.length=0},t}(i.ViewModelBase);t.ViewContainerViewModel=s})},"geocortex/framework-ui/ViewContainer/ButtonTabStripView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,i){"use strict";var r=75,n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.attach=function(t){var i=this;e.prototype.attach.call(this,t),this.app.event("DataFrameOpenedEvent").subscribe(this,function(){return i._yield(function(){return i._updateLabels()})}),this.app.event("PanelResizeEndEvent").subscribe(this,function(){return i._yield(function(){return i._updateLabels()})}),this.viewModel.activeViewDescriptors.bind(this,function(e){var t=i.viewModel.activeViewDescriptors.getLength();if("remove"===e.type){var r=e.rangeEnd-e.rangeStart+1;t-=r}else"clear"===e.type&&(t=0);i._updateLabels(t)})},t.prototype.handleClickTab=function(e,t,i){var r=i.view;r&&this.app.viewManager.activateView(r)},t.prototype._updateLabels=function(e){e=e||this.viewModel.activeViewDescriptors.getLength();var t=$(this.buttonTabStripElement),i=t.width()/e;i>r?t.removeClass("no-label"):t.addClass("no-label")},t.prototype._yield=function(e){return setTimeout(e,0)},t}(i.ViewBase);t.ButtonTabStripView=n})},"geocortex/framework-ui/ViewSwitcher/ViewSwitcherView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,i){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.handleClickTab=function(e,t,i){var r=i.view;r&&this.app.viewManager.activateView(r)},t}(i.ViewBase);t.ViewSwitcherView=r})},"url:/Framework.UI/geocortex/framework/ui/MultiRegion/MultiRegionView.html":'<div class="multi-region-view" data-binding="{@var: multiRegionViewElement}{@source: regionDescriptors}">\r\n    <div data-binding="{@template-for: regionDescriptors}{class: regionCss}">\r\n        <div class="region-view-switcher" data-binding="{@visible: displayRegionViewSwitcher}{@widget: RegionViewSwitcherWidget}{@widget-context: viewSwitcherViewModel}{@widget-required: false}"></div>\r\n        <div class="region" data-binding="{data-region-name: regionName}{data-region-adapter: regionType}"></div>\r\n    </div>\r\n</div>',"url:/Framework.UI/geocortex/framework/ui/Selector/DefaultItemTemplate.html":'<li class="selector-item single-select">\r\n    <div data-binding="{@event-onclick: handleClickItem}{@event-touchstart: handleClickItem}">\r\n        <input class="selector-checkbox" data-binding="{id: id}{checked: isSelected}" type="checkbox" />\r\n        <label data-binding="{@text: displayName}{for: id}"></label>\r\n    </div>\r\n</li>\r\n',"url:/Framework.UI/geocortex/framework/ui/Selector/SelectorView.html":'<div class="fui-selector" data-binding="{@class-expanded: openState}">\r\n\r\n    <div class="fui-selector-header" data-binding="{@visible: showSelectorHeader}{@noclass-no-selector-items: items}">\r\n        <button data-binding="{@event-onclick: handleClickSelector}{@visible: items}"><span data-binding="{@text: selectorText}"></span></button>\r\n        <span data-binding="{@hidden: items}{@text: noItemsText}"></span>\r\n    </div>\r\n    <div data-binding="{@visible: openState}">\r\n        <ul class="fui-selector-body" data-binding="{@hidden:showNativeSelect}{@source: items}{@class-expanded: openState}{@var: customSelect}">\r\n            <li class="fui-selector-item" data-binding="{@template-for: items}{@widget: SelectorItemWidget}{@widget-context: @context}{@widget-replace: true}" />\r\n        </ul>      \r\n        <select class="fui-selector-body" data-binding="{@class-expanded: openState}{@visible: showNativeSelect}{@var: selectElement}{@source: items}{@value: _selectedItems}\r\n            {@event-onchange: handleSelectionChange}">\r\n            <option data-binding="{@template-for: items}{@event-onclick: handleClickItem}{@text: displayName}{@attach:@context}"></option>\r\n        </select>  \r\n    </div>\r\n</div>\r\n',"url:/Framework.UI/geocortex/framework/ui/SplashScreen/SplashScreenView.html":'<div class="splash-screen"></div>',"url:/Framework.UI/geocortex/framework/ui/ViewContainer/ButtonTabStripView.html":'\r\n<div class="button-tab-strip" data-binding="{@var: buttonTabStripElement}">\r\n    <div data-binding="{@source: activeViewDescriptors}">\r\n        <button data-binding="{@template-for: activeViewDescriptors}{@event-onclick: handleClickTab}{className: cssClass}{title: title}">\r\n            <img class="tab-strip-icon" data-binding="{src: iconUri}{@visible: iconUri}" alt=" " />\r\n            <p class="tab-strip-label" data-binding="{@visible: title}{@text: title}"></p>\r\n        </button>\r\n    </div>\r\n</div>',"url:/Framework.UI/geocortex/framework/ui/ViewContainer/ViewContainerView.html":'<div class="view-container-view" data-binding="{@var: containerElement}">\r\n    <div class="panel-header" data-binding="{@visible: headerIsVisible}{@var: headerElement}">\r\n\r\n        <div data-binding="{@visible: titleBarIsVisible}">\r\n            <button class="panel-header-button right close-16" data-binding="{@visible: showingXButton}{@event-onclick: handleClickClose}{title: closeTitle}"></button>\r\n            <button class="panel-header-button left back-16" data-binding="{@visible: showingBackButton}{@event-click: handleClickBack}{title: backTitle}"></button>\r\n\r\n            <h2 class="panel-title">\r\n                <img src="Resources/Images/loader-small.gif" data-binding="{@visible: showBusyIndicator}" alt=" " />\r\n                <span data-binding="{@text: containerTitle}{@visible: containerTitle}"></span>\r\n                <span data-binding="{@visible: containerTitle}">&nbsp;-&nbsp;</span>\r\n                <span data-binding="{@text: viewTitle}{@visible: viewTitle}"></span>\r\n            </h2>\r\n        </div>\r\n\r\n        <div data-binding="{@dom: headerInsertDomElement}"></div>\r\n    </div>\r\n\r\n    <div class="panel-scroll-container" data-binding="{data-region-name: regionName}{data-region-adapter: regionType}{@var: scrollRegionElement}{@event-onscroll: handleScrollChange}"></div>\r\n\r\n    <div class="panel-footer" data-binding="{@var: footerElement}{@visible: footerInsertDomElement}" style="position: absolute">\r\n        <div class="panel-footer-inner" data-binding="{@dom: footerInsertDomElement}"></div>\r\n    </div>\r\n</div>',"url:/Framework.UI/geocortex/framework/ui/ViewSwitcher/ViewSwitcherView.html":'<div class="tab-container">\r\n    <ul class="tab-control" data-binding="{@source: viewDescriptors}">\r\n        <li data-binding="{@template-for: viewDescriptors}{@event-onclick: handleClickTab}">\r\n            <a data-binding="{@noclass-tab: isActive}{@class-tab-active: isActive}">\r\n                <span data-binding="{@text: title}{title: title}"></span>\r\n            </a>\r\n        </li>\r\n    </ul>\r\n</div>\r\n'}}),require(["geocortex/framework/resourceManager"],function(e){e.resourceManager.register("Framework.UI","inv","Invariant","json","eyJsYW5ndWFnZS1mcmFtZXdvcmstdWktdmlldy1jb250YWluZXItdmlldy1jbG9zZSI6IkNsb3NlIHswfSIsImxhbmd1YWdlLWZyYW1ld29yay11aS12aWV3LWNvbnRhaW5lci12aWV3LWJhY2siOiJHbyBCYWNrIHswfSJ9")});