function shim(e,t,r){if("string"==typeof e&&(r=t,t=e),"undefined"==typeof r)return void console.warn("Undefined shim for: "+t);for(var i=t.split("."),a=null,n=window,s=0,o=i.length;s<o;s++)a=i[s],s==o-1?n[a]=r:n[a]||(n[a]={}),n=n[a]}require({cache:{"Mapping/modules/LayerThemes/LayerThemeSharingLinkProvider":function(){define(["require","exports","geocortex/infrastructure/sharing/SharingLinkProviderBase"],function(e,t,r){"use strict";var i=function(e){function t(t,i){var a=e.call(this,t,i)||this;return a.name="layerTheme",a.priority=r.LayerListLinkPriority.LAYERTHEME,a}return __extends(t,e),t.prototype.generate=function(){var e=this.app.site.essentialsMap.layerThemesInfo;return e&&e.layerThemesConfigured?this.app.site.essentialsMap.layerThemesInfo.activeTheme.id:""},t.prototype.apply=function(e){var t=this;e&&(this.app.site&&this.app.site.serviceLayersLoaded?this._applyLayerTheme(e):this.app.event("LayerListInitializedEvent").once(this,function(){t._applyLayerTheme(e)}))},t.prototype._applyLayerTheme=function(e){var t=this.app.site.essentialsMap.layerThemesInfo;if(t&&t.layerThemesConfigured){var r=t.getTheme(e,!0);r&&!r.isActive?r.applyToMap():this.app.trace.warning("Could not switch layer theme to {0}: Specified theme not found.".format(e))}else this.app.trace.warning("Could not switch layer theme to {0}: No layer themes configured.".format(e))},t}(r.SharingLinkProviderBase);t.LayerThemeSharingLinkProvider=i})},"Mapping/modules/LayerThemes/LayerThemesModule":function(){define(["require","exports","geocortex/framework/application/ModuleBase","geocortex/infrastructure/MapUtils"],function(e,t,r,i){"use strict";var a=function(e){function t(t,r){return e.call(this,t,r)||this}return __extends(t,e),t.prototype.initialize=function(e){var t=this,r=function(){t.app.site.essentialsMap&&t.app.site.essentialsMap.layerThemesInfo&&t.app.site.essentialsMap.layerThemesInfo.layerThemesConfigured&&(t.layerThemesInfo=t.app.site.essentialsMap.layerThemesInfo,t.app.site.hasNamedExtents&&(t.namedExtents=t.app.site.namedExtents),t.layerThemesInfo.activeTheme&&t._handleConfiguredThemeProperties({currTheme:t.layerThemesInfo.activeTheme,prevTheme:t.layerThemesInfo.previousTheme}),t._registerEvents()),t._registerCommands()};this.app.site&&this.app.site.isInitialized?r():this.app.event("SiteInitializedEvent").once(this,r)},t.prototype._registerCommands=function(){this.app.command("SwitchToLayerTheme").register(this,this._switchToLayerThemeImpl)},t.prototype._registerEvents=function(){var e=this;this.layerThemesInfo&&(dojo.connect(this.layerThemesInfo,"layerThemeChangingEvent",function(t){e.app.event("LayerThemeChangingEvent").publish(t)}),dojo.connect(this.layerThemesInfo,"layerThemeChangedEvent",function(t){e._handleConfiguredThemeProperties(t),e.app.event("LayerThemeChangedEvent").publish(t)}))},t.prototype._switchToLayerThemeImpl=function(e){if(this.layerThemesInfo&&this.layerThemesInfo.layerThemesConfigured){var t=this.layerThemesInfo.getTheme(e,!0);if(t)return void t.applyToMap();this.app.trace.warning("LayerThemeModule: Could not switch layer theme to: {0}. Specified theme not found.".format(e))}else this.app.trace.warning("LayerThemeModule: Could not switch layer theme to: {0}. No layer themes configured.".format(e))},t.prototype._handleConfiguredThemeProperties=function(e){var t=this;if(e.currTheme&&e.currTheme.properties&&e.currTheme.properties.length)for(var r=0;r<e.currTheme.properties.length;r++){var a=e.currTheme.properties[r];switch(a.name){case"LayerThemeNamedExtent":case"layerThemeNamedExtent":case"layerthemenamedextent":case"LAYERTHEMENAMEDEXTENT":if(this.namedExtents)for(var n=0;n<this.namedExtents.length;n++)if(this.app.map&&(this.namedExtents[n].id===a.value||this.namedExtents[n].displayName===a.value)){if(this.app.map.loaded)i.zoomToExtentWithPriority(this.app,this.namedExtents[n].extent,10,!0);else var s=this.app.map.on("load",function(){s.remove(),i.zoomToExtentWithPriority(t.app,t.namedExtents[n].extent,10,!0)});break}break;default:this.app.trace.info("LayerThemesModule: Property {0} not supported by the Geocortex Viewer for HTML".format(a.name))}}},t}(r.ModuleBase);t.LayerThemesModule=a})}}}),define(["Mapping/modules/LayerThemes/LayerThemeSharingLinkProvider","Mapping/modules/LayerThemes/LayerThemesModule"],function(e,t){shim(e,"geocortex.essentialsHtmlViewer.mapping.modules.layerThemes.LayerThemeSharingLinkProvider",e.LayerThemeSharingLinkProvider),shim(t,"geocortex.essentialsHtmlViewer.mapping.modules.layerThemes.LayerThemesModule",t.LayerThemesModule)});