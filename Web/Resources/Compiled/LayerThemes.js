!function(){function e(e,t,r){if("string"==typeof e&&(r=t,t=e),void 0!==r)for(var i=t.split("."),n=null,a=window,o=0,s=i.length;o<s;o++)n=i[o],o==s-1?a[n]=r:a[n]||(a[n]={}),a=a[n];else console.warn("Undefined shim for: "+t)}require({cache:{"Mapping/modules/LayerThemes/LayerThemeSharingLinkProvider":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();define(["require","exports","geocortex/infrastructure/sharing/SharingLinkProviderBase"],function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t){function r(e,r){var n=t.call(this,e,r)||this;return n.name="layerTheme",n.priority=i.LayerListLinkPriority.LAYERTHEME,n}return e(r,t),r.prototype.generate=function(){var e=this.app.site.essentialsMap.layerThemesInfo;return e&&e.layerThemesConfigured?this.app.site.essentialsMap.layerThemesInfo.activeTheme.id:""},r.prototype.apply=function(e){var t=this;e&&(this.app.site&&this.app.site.serviceLayersLoaded?this._applyLayerTheme(e):this.app.event("LayerListInitializedEvent").once(this,function(){t._applyLayerTheme(e)}))},r.prototype._applyLayerTheme=function(e){var t=this.app.site.essentialsMap.layerThemesInfo;if(t&&t.layerThemesConfigured){var r=t.getTheme(e,!0);r&&!r.isActive?r.applyToMap():this.app.trace.warning("Could not switch layer theme to {0}: Specified theme not found.".format(e))}else this.app.trace.warning("Could not switch layer theme to {0}: No layer themes configured.".format(e))},r}(i.SharingLinkProviderBase);r.LayerThemeSharingLinkProvider=n})},"Mapping/modules/LayerThemes/LayerThemesModule":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();define(["require","exports","geocortex/framework/application/ModuleBase","geocortex/infrastructure/MapUtils"],function(t,r,i,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(t){function r(e,r){return t.call(this,e,r)||this}return e(r,t),r.prototype.initialize=function(e){var t=this,r=function(){t.app.site.essentialsMap&&t.app.site.essentialsMap.layerThemesInfo&&t.app.site.essentialsMap.layerThemesInfo.layerThemesConfigured&&(t.layerThemesInfo=t.app.site.essentialsMap.layerThemesInfo,t.app.site.hasNamedExtents&&(t.namedExtents=t.app.site.namedExtents),t.layerThemesInfo.activeTheme&&t._handleConfiguredThemeProperties({currTheme:t.layerThemesInfo.activeTheme,prevTheme:t.layerThemesInfo.previousTheme}),t._registerEvents()),t._registerCommands()};this.app.site&&this.app.site.isInitialized?r():this.app.event("SiteInitializedEvent").once(this,r)},r.prototype._registerCommands=function(){this.app.command("SwitchToLayerTheme").register(this,this._switchToLayerThemeImpl)},r.prototype._registerEvents=function(){var e=this;this.layerThemesInfo&&(dojo.connect(this.layerThemesInfo,"layerThemeChangingEvent",function(t){e.app.event("LayerThemeChangingEvent").publish(t)}),dojo.connect(this.layerThemesInfo,"layerThemeChangedEvent",function(t){e._handleConfiguredThemeProperties(t),e.app.event("LayerThemeChangedEvent").publish(t)}))},r.prototype._switchToLayerThemeImpl=function(e){if(this.layerThemesInfo&&this.layerThemesInfo.layerThemesConfigured){var t=this.layerThemesInfo.getTheme(e,!0);if(t)return void t.applyToMap();this.app.trace.warning("LayerThemeModule: Could not switch layer theme to: {0}. Specified theme not found.".format(e))}else this.app.trace.warning("LayerThemeModule: Could not switch layer theme to: {0}. No layer themes configured.".format(e))},r.prototype._handleConfiguredThemeProperties=function(e){var t=this;if(e.currTheme&&e.currTheme.properties&&e.currTheme.properties.length)for(var r=0;r<e.currTheme.properties.length;r++){var i=e.currTheme.properties[r];switch(i.name){case"LayerThemeNamedExtent":case"layerThemeNamedExtent":case"layerthemenamedextent":case"LAYERTHEMENAMEDEXTENT":if(this.namedExtents)for(var a=0;a<this.namedExtents.length;a++)if(this.app.map&&(this.namedExtents[a].id===i.value||this.namedExtents[a].displayName===i.value)){if(this.app.map.loaded)n.zoomToExtentWithPriority(this.app,this.namedExtents[a].extent,10,!0);else var o=this.app.map.on("load",function(){o.remove(),n.zoomToExtentWithPriority(t.app,t.namedExtents[a].extent,10,!0)});break}break;default:this.app.trace.info("LayerThemesModule: Property {0} not supported by the Geocortex Viewer for HTML".format(i.name))}}},r}(i.ModuleBase);r.LayerThemesModule=a})}}}),require({cache:{}}),define(["Mapping/modules/LayerThemes/LayerThemeSharingLinkProvider","Mapping/modules/LayerThemes/LayerThemesModule"],function(t,r){e(t,"geocortex.essentialsHtmlViewer.mapping.modules.layerThemes.LayerThemeSharingLinkProvider",t.LayerThemeSharingLinkProvider),e(r,"geocortex.essentialsHtmlViewer.mapping.modules.layerThemes.LayerThemesModule",r.LayerThemesModule)})}();