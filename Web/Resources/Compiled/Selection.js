function shim(e,t,n){if("string"==typeof e&&(n=t,t=e),"undefined"==typeof n)return void console.warn("Undefined shim for: "+t);for(var i=t.split("."),o=null,a=window,r=0,s=i.length;r<s;r++)o=i[r],r==s-1?a[o]=n:a[o]||(a[o]={}),a=a[o]}require({cache:{"Mapping/modules/Selection/CombineResultsView":function(){define(["require","exports","geocortex/framework/ui/ViewBase","geocortex/infrastructure/ui/components/PagingControls/PagingControlsViewModel","geocortex/infrastructure/FeatureSet","geocortex/infrastructure/FeatureSetCollection","geocortex/infrastructure/selection/CombineMode"],function(e,t,n,i,o,a,r){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.attach=function(t){e.prototype.attach.call(this,t),this._registerCommands()},t.prototype.deactivated=function(){this.viewModel.reset()},t.prototype._registerCommands=function(){this.app.command("ShowSearchOptions").register(this,this.show),this.app.command("CombineResultsInteractive").register(this,this._executeCombineResultsInteractive)},t.prototype.resolveWidget=function(t,n,o){if("CombineResultsOptionsWidget"===t)return this.app.menuRegistry.createMenuWidget(this,n,o);if("PagingControlsWidget"===t){var a=this.app.viewManager.createView({typeName:"geocortex.essentialsHtmlViewer.mapping.infrastructure.ui.components.PagingControls.PagingControlsView",markupResource:"Mapping/infrastructure/ui/components/PagingControls/PagingControlsView.html",libraryId:"Mapping.Infrastructure",isVisible:!0});if(a){var r=new i.PagingControlsViewModel(this.app,n);a.attach(r)}return a}return e.prototype.resolveWidget.call(this,t,n,o)},t.prototype.show=function(e){if(this.viewModel){var t;if("string"==typeof e)t=this.app.featureSetManager.getCollectionById(e);else if(e instanceof o.FeatureSet){var n=new a.FeatureSetCollection;n.featureSets.addItem(e),t=n}else t=e;if(!t)return void this.app.trace.warning("Cannot save feature set collection: No feature set collection with matching ID found.");this.viewModel.featureSetCollection.set(t),this.app.viewManager.activateView(this)}},t.prototype.handleOkClick=function(e,t,n){var i=this,o=this.viewModel.featureSetCollection.get().displayName.get();0===o.length&&this.viewModel.featureSetCollection.get().featureSets&&(o=this.viewModel.featureSetCollection.get().featureSets.getAt(0).displayName.get());var a={nameOfCurrentResults:o,currentResults:this.viewModel.featureSetCollection.get(),collectionNames:this.viewModel.getSelectedItems().map(function(e){return e.name}),combineResponse:void 0};Promise.resolve(a).then(function(e){return i.app.viewManager.deactivateView(i),e}).then(function(e){return i._combineResults(e)}).then(function(e){return i._displayNotification(e)})["catch"](function(e){return i._processError(e)})},t.prototype.handleCancelClick=function(e,t,n){this.app.viewManager.deactivateView(this)},t.prototype._executeCombineResultsInteractive=function(e){var t=this;if(this.viewModel){var n,i=r.CombineMode.REPLACE;Promise["try"](function(){var o=e?e.mode:null,a=e?e.currentResults:null;n="string"==typeof a?t.app.featureSetManager.getCollectionById(a):a,t.viewModel.combineModeChosen.set(!0),t.viewModel.combineMode=o||i,n&&t.viewModel.featureSetCollection.get()&&n.id!==t.viewModel.featureSetCollection.get().id&&t.viewModel.featureSetCollection.set(n)}).then(function(){return t.viewModel.populateFromMetadata()})["catch"](function(e){return t._processError(e)})}},t.prototype._combineResults=function(e){var t=this;return new Promise(function(n,i){var o={combineMode:t.viewModel.combineMode,featureSetCollectionIds:t.viewModel.getSelectedItems().map(function(e){return e.featureSetCollectionId}),currentResults:e.currentResults,successCallback:function(t){e.combineResponse=t,n(e)},errorCallback:i};t.app.command("CombineResults").execute(o)})},t.prototype._displayNotification=function(e){var t,n=e.combineResponse,i=e.collectionNames.map(function(e){return"'"+e+"'"}).join(", "),o=e.nameOfCurrentResults;switch(n.combineMode){case r.CombineMode.UNION:t=this.getResource("language-common-results-union-confirmation");break;case r.CombineMode.INTERSECT:t=this.getResource("language-common-results-intersect-confirmation");break;case r.CombineMode.SUBTRACT:t=this.getResource("language-common-results-subtract-confirmation")}return t&&(t=t.format(o,i),this.app.command("AddResultsStatus").execute(t)),e},t.prototype._processError=function(e){var t=e&&"UiError"==e.name?e.message:this.getResource("language-saved-results-error-message");return this.app.command("AddResultsStatus").execute(t),this.app.trace.error(e.message,e),e},t}(n.ViewBase);t.CombineResultsView=s})},"Mapping/modules/Selection/CombineResultsViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","./SelectableSelectionItem","geocortex/framework-ui/PresentableCollection","geocortex/infrastructure/selection/CombineMode"],function(e,t,n,i,o,a,r){"use strict";var s=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o.featureSetCollection=new i.Observable,o.combineModeChosen=new i.Observable((!1)),o.isPaged=!0,o.pageSize=10,o.combineMode=r.CombineMode.REPLACE,o.selections=new i.ObservableCollection,o.presentableResults=new a.PresentableCollection(o.selections),o.resultsPage=o.presentableResults.items,o.presentableResults.items.useThrottling=!0,o}return __extends(t,e),t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),t=t||{},t.hasOwnProperty("isPaged")&&(this.isPaged=t.isPaged),t.hasOwnProperty("pageSize")&&(this.pageSize=t.pageSize),this.presentableResults.isPaginated.set(this.isPaged),this.presentableResults.pageSize.set(this.pageSize)},t.prototype.reset=function(){this.combineModeChosen.set(!1)},t.prototype.getSelectedItems=function(){var e=this.selections?this.selections.getItems():[];return e.filter(function(e){return e&&e.isSelected.get()})},t.prototype.populateFromMetadata=function(){var e=this;return this._fetchMetadata().then(function(e){return e.map(function(e){return new o.SelectableSelectionItem(e)})}).then(function(t){return e._excludeCurrentResultsFromList(t)}).then(function(t){return e._populatePresentableCollection(t)}).then(function(t){return e.presentableResults.currPageNumber.set(1)})},t.prototype._fetchMetadata=function(){var e=this;return new Promise(function(t,n){e.app.command("FindAllSelectionMetadata").execute({successCallback:t,errorCallback:n})})},t.prototype._excludeCurrentResultsFromList=function(e){var t=this.featureSetCollection.get();return e&&t&&"Selection"===t.sourceName?e.filter(function(e){return e.name!==t.getExtendedPropertyByName("SelectionName")}):e},t.prototype._populatePresentableCollection=function(e){return this.selections.set(e),e},t}(n.ViewModelBase);t.CombineResultsViewModel=s})},"Mapping/modules/Selection/ListSelectionsView":function(){define(["require","exports","geocortex/framework/ui/ViewBase","geocortex/infrastructure/ui/components/PagingControls/PagingControlsViewModel","./SelectionItem","geocortex/framework/utils/ArrayUtils"],function(e,t,n,i,o,a){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.attach=function(t){e.prototype.attach.call(this,t),this._registerCommands()},t.prototype.resolveWidget=function(t,n,o){if("PagingControlsWidget"===t){var a=this.app.viewManager.createView({typeName:"geocortex.essentialsHtmlViewer.mapping.infrastructure.ui.components.PagingControls.PagingControlsView",markupResource:"Mapping/infrastructure/ui/components/PagingControls/PagingControlsView.html",libraryId:"Mapping.Infrastructure",isVisible:!0});if(a){var r=new i.PagingControlsViewModel(this.app,n);a.attach(r)}return a}return e.prototype.resolveWidget.call(this,t,n,o)},t.prototype._registerCommands=function(){this.app.command("ListSelections").register(this,this.show)},t.prototype.show=function(){var e=this;this.viewModel&&this.viewModel.findAllMetadata().then(function(t){return e._processMetadata(t)}).then(function(t){return e._disableCurrentlyOpenedCollection(t)}).then(function(t){e.viewModel.selections.set(t),e.viewModel.selections.pulse(),e.app.viewManager.activateView(e)})},t.prototype.handleRestoreSelectionClick=function(e,t,n){var i=n?n.name:null;if(!i)throw new Error("Cannot restore named selection into the results view: selection name is required.");this.app.viewManager.deactivateView(this),this.app.command("RestoreSelection").execute({name:i})},t.prototype.handleRenameClick=function(e,t,n){var i,o=this;this.promptForSelectionName(n).then(function(e){return o._processName(e,n)}).then(function(e){return i=e}).then(function(e){return o.viewModel.renameSelection(n,e)})["catch"](function(e){return o._processError(e)})},t.prototype.handleDeleteClick=function(e,t,n){var i=this;this.confirmDelete(n).then(function(e){e&&i.viewModel.deleteSelection(n)})},t.prototype.confirmDelete=function(e){var t=this,n=this.getResource("language-saved-results-delete-prompt").format(e.name),i=this.getResource("language-saved-results-delete-prompt-title").format(e.name);return new Promise(function(e,o){return t.app.command("Confirm").execute(n,i,e)})},t.prototype.promptForSelectionName=function(e){var t=this,n=this.getResource("language-saved-results-rename-prompt-title"),i=this.getResource("language-saved-results-rename-prompt"),o=e.name,a=new Promise(function(e,a){return t.app.command("Prompt").execute(n,i,o,e)});return a},t.prototype._processMetadata=function(e){var t=this;return e.map(function(e){var n=new o.SelectionItem(e);return t.viewModel.setTooltips(n)})},t.prototype._disableCurrentlyOpenedCollection=function(e){var t=this.viewModel.featureSetCollection.get(),n=t&&"Selection"===t.sourceName?t.displayName.get():null,i=e&&n?a.firstOrDefault(e,function(e){return e.name===n}):null;return i&&i.disabled.set(!0),e},t.prototype._processName=function(e,t){var n=this.viewModel.selections.get();if(!e){var i=new Error(this.getResource("language-saved-results-no-name-error").format(t.name));throw i.name="UiError",i}if(e===t.name)return t.name;if(n.some(function(t){return t.name===e})){var i=new Error(this.getResource("language-saved-results-rename-prompt-error").format(e));throw i.name="UiError",i}return e},t.prototype._processError=function(e){var t=e&&"UiError"==e.name?e.message:this.getResource("language-saved-results-error-message");return this.app.command("AddResultsStatus").execute(t),this.app.trace.error(t,e),e},t}(n.ViewBase);t.ListSelectionsView=r})},"Mapping/modules/Selection/ListSelectionsViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","geocortex/framework-ui/PresentableCollection"],function(e,t,n,i,o){"use strict";var a=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.featureSetCollection=new i.Observable,a.isPaged=!0,a.pageSize=10,a.selections=new i.ObservableCollection,a.presentableResults=new o.PresentableCollection(a.selections),a.resultsPage=a.presentableResults.items,a.presentableResults.items.useThrottling=!0,a}return __extends(t,e),t.prototype.initialize=function(t){var n=this;e.prototype.initialize.call(this,t),t=t||{},t.hasOwnProperty("isPaged")&&(this.isPaged=t.isPaged),t.hasOwnProperty("pageSize")&&(this.pageSize=t.pageSize),this.presentableResults.isPaginated.set(this.isPaged),this.presentableResults.pageSize.set(this.pageSize),this.app.command("ShowResultsList").register(this,this._trackDisplayedResults),this.app.command("ShowResultsTable").register(this,this._trackDisplayedResults,function(){return!n.app.configuration.mobileMode})},t.prototype.findAllMetadata=function(){var e=this,t=new Promise(function(t,n){e.app.command("FindAllSelectionMetadata").execute({successCallback:t,errorCallback:n})});return t},t.prototype.deleteSelection=function(e){var t=this,n=new Promise(function(n,i){var o={name:e.name,successCallback:function(){t.selections.removeItem(e),n()},errorCallback:i};t.app.command("DeleteSelection").execute(o)});return n},t.prototype.renameSelection=function(e,t){var n=this,i=new Promise(function(i,o){var a={name:e.name,newName:t,successCallback:function(){e.name=t,n.setTooltips(e),n.resultsPage.pulse(),i()},errorCallback:o};n.app.command("RenameSelection").execute(a)});return i},t.prototype.setTooltips=function(e){var t=this.getResource("language-saved-results-item-restore-description").format(e.name),n=this.getResource("language-saved-results-item-rename-description").format(e.name),i=this.getResource("language-saved-results-item-delete-description").format(e.name);return e.restoreTooltip=t,e.renameTooltip=n,e.deleteTooltip=i,e},t.prototype._trackDisplayedResults=function(e){var t="string"==typeof e?this.app.featureSetManager.getCollectionById(e):e;t&&t!==this.featureSetCollection.get()&&this.featureSetCollection.set(t)},t}(n.ViewModelBase);t.ListSelectionsViewModel=a})},"Mapping/modules/Selection/SaveSelectionView":function(){define(["require","exports","geocortex/framework/ui/ViewBase","geocortex/infrastructure/Dictionary","geocortex/infrastructure/FeatureSet","geocortex/infrastructure/FeatureSetCollection"],function(e,t,n,i,o,a){"use strict";var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._metadataCache=new i.Dictionary,t}return __extends(t,e),t.prototype.attach=function(t){e.prototype.attach.call(this,t),this._registerCommands()},t.prototype._registerCommands=function(){this.app.command("ShowSaveSelectionDialog").register(this,this.show,this._canShow),this.app.event("SelectionCreatedEvent").subscribe(this,this._handleSelectionCreated),this.app.event("SelectionChangedEvent").subscribe(this,this._handleSelectionChanged),this.app.event("SelectionRemovedEvent").subscribe(this,this._handleSelectionRemoved)},t.prototype.handleKeyDown=function(e,t,n){var i=e.which?e.which:e.keyCode;return i===dojo.keys.ENTER&&(this.save(),e.preventDefault()),!0},t.prototype.handleCancelClick=function(e,t,n){this.app.viewManager.deactivateView(this)},t.prototype.handleSaveClick=function(e,t,n){this.save()},t.prototype.save=function(){var e=this,t=this.viewModel.name.get();this.viewModel.saveSelection(t).then(function(t){return e._processResults(t)})["catch"](function(t){return e._processError(t)})},t.prototype.show=function(e,t){var n;if("string"==typeof e)n=this.app.featureSetManager.getCollectionById(e);else if(e instanceof o.FeatureSet){var i=new a.FeatureSetCollection;i.featureSets.addItem(e),n=i}else n=e;if(!n)return void this.app.trace.warning("Cannot save feature set collection: No feature set collection with matching ID found.");var r=t;r||(r="Selection"===n.sourceName?n.getExtendedPropertyByName("SelectionName"):""),this.viewModel.featureSetCollection.set(n),this.viewModel.name.set(r),this.app.viewManager.activateView(this)},t.prototype._canShow=function(e,t){var n;if("string"==typeof e)n=this.app.featureSetManager.getCollectionById(e);else if(e instanceof o.FeatureSet){var i=new a.FeatureSetCollection;i.featureSets.addItem(e),n=i}else n=e;return!(!n||0==n.featureSets.length())&&("Selection"!==n.sourceName||n.isModified.get())},t.prototype._processResults=function(e){return e&&(this.viewModel.showConfirmationMessage(),this.app.viewManager.deactivateView(this)),e},t.prototype._processError=function(e){var t=e&&"UiError"==e.name?e.message:this.getResource("language-saved-results-error-message");return this.app.command("AddResultsStatus").execute(t),this.app.trace.error(t,e),e},t.prototype._handleSelectionCreated=function(e){var t=e?e.name:null,n=e&&e.featureSetCollection?e.featureSetCollection.id:null;this._computeCanExecute(t,n)},t.prototype._handleSelectionChanged=function(e){var t=e?e.name:null,n=e&&e.featureSetCollection?e.featureSetCollection.id:null;this._computeCanExecute(t,n)},t.prototype._handleSelectionRemoved=function(e){var t=e?e.name:null,n=e&&e.featureSetCollection?e.featureSetCollection.id:null;this._computeCanExecute(t,n)},t.prototype._computeCanExecute=function(e,t){var n=this;t&&this.viewModel.findMetadata(e,t).then(function(e){return e?n._metadataCache.set(t,e):n._metadataCache.remove(t)})["catch"](function(e){return n._metadataCache.remove(t)}).lastly(function(){return n.app.command("ShowSaveSelectionDialog").raiseCanExecuteChanged()})},t}(n.ViewBase);t.SaveSelectionView=r})},"Mapping/modules/Selection/SaveSelectionViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","geocortex/framework/utils/utils"],function(e,t,n,i,o){"use strict";var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=new i.Observable,t.featureSetCollection=new i.Observable,t._existingSelection=!1,t}return __extends(t,e),t.prototype.saveSelection=function(e){var t=this;return Promise["try"](function(){return t._assertNameNotNull(e),t.selectionExists(e).then(function(n){return t._existingSelection=n,t._existingSelection?t.confirmOverwrite(e):Promise.resolve(!0)}).then(function(n){return t._existingSelection&&n?t.updateSelection(e).thenReturn(!0):t._existingSelection?Promise.resolve(!1):t.createSelection(e).thenReturn(!0)})})},t.prototype.findMetadata=function(e,t){var n=this;return new Promise(function(i,o){var a={successCallback:i,errorCallback:o};if(!e&&!t)throw new Error("The selection name or feature set collection ID must be set.");e&&(a.name=e),t&&(a.featureSetCollectionId=t),n.app.command("FindMetadataForSelection").execute(a)})},t.prototype.selectionExists=function(e){var t=this;return Promise["try"](function(){return t._assertNameNotNull(e),t.findMetadata(e).then(function(e){return!o.isNullOrUndefined(e)})})},t.prototype.createSelection=function(e){var t=this;return new Promise(function(n,i){t._assertNameNotNull(e),t.app.command("CreateSelection").execute({name:e,featureSetCollection:t.featureSetCollection.get(),successCallback:n,errorCallback:i})})},t.prototype.updateSelection=function(e){var t=this;return new Promise(function(n,i){t._assertNameNotNull(e),t.app.command("UpdateSelection").execute({name:e,featureSetCollection:t.featureSetCollection.get(),successCallback:n,errorCallback:i})})},t.prototype.confirmOverwrite=function(e){var t=this,n=this.app.getResource(this.libraryId,"language-saved-results-overwrite-prompt").format(e),i=this.app.getResource(this.libraryId,"language-saved-results-overwrite-prompt-title").format(e);return new Promise(function(e,o){return t.app.command("Confirm").execute(n,i,e)})},t.prototype.showConfirmationMessage=function(){var e=this.name.get(),t=this.featureSetCollection.get().countFeatures(),n=this._existingSelection?"language-saved-results-update-confirmation":"language-saved-results-create-confirmation",i=this.getResource(n).format(e,t);this.app.command("AddResultsStatus").execute(i)},t.prototype._assertNameNotNull=function(e){if(o.isNullOrUndefined(e))throw new Error("The selection name must be set.")},t}(n.ViewModelBase);t.SaveSelectionViewModel=a})},"Mapping/modules/Selection/SelectableSelectionItem":function(){define(["require","exports","./SelectionItem","geocortex/framework/observables"],function(e,t,n,i){"use strict";var o=function(e){function t(t){var n=e.call(this,t)||this;return n.isSelected=new i.Observable((!1)),n}return __extends(t,e),t}(n.SelectionItem);t.SelectableSelectionItem=o})},"Mapping/modules/Selection/SelectionItem":function(){define(["require","exports","geocortex/framework/observables","geocortex/infrastructure/FormatUtils","geocortex/framework-ui/LazyObservable"],function(e,t,n,i,o){"use strict";var a=function(){function e(e){var t=this;this.disabled=new n.Observable((!1)),this.id=e.id,this.featureSetCollectionId=e.featureSetCollectionId,this.name=e.name||"",this.count=e.count||0,this.modified=e.modified||!1,this.timeCreated=e.timeCreated,this.timeModified=e.timeModified,this.timeExpiration=e.timeExpiration,this.dateCreated=i.parseUtcDate(this.timeCreated),this.dateModified=i.parseUtcDate(this.timeModified),this.dateExpiration=i.parseUtcDate(this.timeExpiration),this.displayName=new o.LazyObservable(null,function(){return t.formatDisplayName()})}return e.prototype.formatDisplayName=function(){var e=this.name||"",t=this.count||0;return e?"{0} ({1})".format(e,t):""},e.prototype.toMetaData=function(){return{id:this.id,featureSetCollectionId:this.featureSetCollectionId,name:this.name,count:this.count,modified:this.modified,timeCreated:this.timeCreated,timeModified:this.timeModified,timeExpiration:this.timeExpiration}},e}();t.SelectionItem=a})},"Mapping/modules/Selection/SelectionModule":function(){define(["require","exports","geocortex/framework/application/ModuleBase","geocortex/infrastructure/selection/SelectionMetadataStore","geocortex/framework/observables","geocortex/infrastructure/FeatureSetCollection","geocortex/infrastructure/validation/NumberValidator","geocortex/infrastructure/commandArgs/AddStatusArgs","geocortex/infrastructure/eventArgs/FeatureSetManagerEventArgs","geocortex/infrastructure/FeatureSet","geocortex/framework/utils/ArrayUtils","geocortex/infrastructure/selection/CombineMode"],function(e,t,n,i,o,a,r,s,l,c,u,d){"use strict";var p=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a._fscSourceName="Selection",a._extPropName="SelectionName",a._resultsListStatusRegion="DataFrameResultsStatusRegion",a._resultsTableStatusRegion="ResultsStatusRegion",a._statusView=null,a._featureSetCollection=new o.Observable,a._metadataStore=new i.SelectionMetadataStore(t),a}return __extends(t,e),t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),t=t||{},t.hasOwnProperty("resultsListStatusRegion")&&(this._resultsListStatusRegion=t.resultsListStatusRegion),t.hasOwnProperty("resultsTableStatusRegion")&&(this._resultsTableStatusRegion=t.resultsTableStatusRegion),this.app.menuRegistry.loadMenus(t),this._statusRegionName=this._resultsListStatusRegion,this._registerCommands()},t.prototype.getStateFilter=function(){var e=new r.NumberValidator;return{results:this.app.project.filter.featureSetCollection,selections:{item:{id:!0,name:!0,featureSetCollectionId:!0,count:e,modified:!0,timeCreated:e,timeModified:e,timeExpiration:e}}}},t.prototype.exportState=function(){var e=this;return Promise["try"](function(){return{results:e.app.project.convert.fromGcxFeatureSetCollection(e._featureSetCollection.get()),selections:e._metadataStore.findAll()}})},t.prototype.applyState=function(e){var t=this;return Promise["try"](function(){return t._metadataStore.clear(),t.app.project.convert.toGcxFeatureSetCollection(e.results).then(function(n){t._featureSetCollection.set(n);var i=e.selections||[];i.forEach(function(e){t._metadataStore.add(e)}),t._notifyCanExecuteChanged()})})},t.prototype._registerCommands=function(){var e=this;this.app.command("FindAllSelectionMetadata").register(this,this._executeFindAllSelectionMetadata),this.app.command("FindMetadataForSelection").register(this,this._executeFindMetadataForSelection),this.app.command("FindSelection").register(this,this._executeFindSelection,this._canFindSelection),this.app.command("CreateSelection").register(this,this._executeCreateSelection,this._canCreateSelection),this.app.command("UpdateSelection").register(this,this._executeUpdateSelection,this._canUpdateSelection),this.app.command("RestoreSelection").register(this,this._executeRestoreSelection,this._canRestoreSelection),this.app.command("DeleteSelection").register(this,this._executeDeleteSelection,this._canDeleteSelection),this.app.command("RenameSelection").register(this,this._executeRenameSelection,this._canRenameSelection),this.app.command("AddFeatureToResults").register(this,this._executeAddFeatureToResults,this._canAddFeatureToResults),this.app.command("RemoveFeatureFromResults").register(this,this._executeRemoveFeatureFromResults,this._canRemoveFeatureFromResults),this.app.command("CombineResults").register(this,this._executeCombineResults,this._canCombineResults),this.app.command("ResultsReplace").register(this,this._executeReplaceResults,this._canReplaceResults),this.app.command("ResultsUnion").register(this,this._executeUnionResults,this._canUnionResults),this.app.command("ResultsSubtract").register(this,this._executeSubtractResults,this._canSubtractResults),this.app.command("ResultsIntersect").register(this,this._executeIntersectResults,this._canIntersectResults),this.app.command("AddResultsStatus").register(this,this.addStatus),this.app.command("RemoveResultsStatus").register(this,this.removeStatus),this.app.command("ShowResultsList").register(this,function(t){e._setStatusRegion(e._resultsListStatusRegion);var n="string"==typeof t?e.app.featureSetManager.getCollectionById(t):t;n&&n!==e._featureSetCollection.get()&&e._featureSetCollection.set(n),e._notifyCanExecuteChanged()}),this.app.command("ShowResultsTable").register(this,function(t){e._setStatusRegion(e._resultsTableStatusRegion);var n="string"==typeof t?e.app.featureSetManager.getCollectionById(t):t;n&&n!==e._featureSetCollection.get()&&e._featureSetCollection.set(n),e._notifyCanExecuteChanged()},function(){return!e.app.configuration.mobileMode}),this.app.event("ResultsViewCollapsedEvent").subscribe(this,this._handleResultsViewCollapsed),this.app.event("FSMCollectionRemovedEvent").subscribe(this,this._handleFsmCollectionRemovedEvent),this.app.event("FSMCollectionChangedEvent").subscribe(this,this._handleFsmCollectionChangedEvent),this.app.event("FeatureDeletedEvent").subscribe(this,this._updateMetadataForSavedSelections),this.app.event("GraphicRemovedEvent").subscribe(this,this._updateMetadataForSavedSelections)},t.prototype.addStatus=function(e){var t;"string"==typeof e?(t=new s.AddStatusArgs(e),t.timeoutMS=0):t=e,t.regionName=t.regionName||this._statusRegionName,t.id=t.id||"ResultsStatusMessageView",this.app.command("RemoveResultsStatus").execute(),this.app.command("AddStatus").execute(t)},t.prototype.removeStatus=function(){this.app.command("RemoveStatus").execute("ResultsStatusMessageView")},t.prototype._handleFsmCollectionChangedEvent=function(e){this._featureSetCollection.get()&&e&&e.featureSetCollectionId&&e.featureSetCollectionId==this._featureSetCollection.get().id&&this._featureSetCollection.get().sourceName===this._fscSourceName&&(this._featureSetCollection.get().isModified.set(!0),this.app.command("ShowSaveSelectionDialog").raiseCanExecuteChanged())},t.prototype._handleFsmCollectionRemovedEvent=function(e){this._featureSetCollection.get()&&e&&e.featureSetCollectionId&&e.featureSetCollectionId==this._featureSetCollection.get().id&&(this._featureSetCollection.set(null),this.app.command("ShowSaveSelectionDialog").raiseCanExecuteChanged())},t.prototype._updateMetadataForSavedSelections=function(){var e=this;(this._metadataStore.findAll()||[]).forEach(function(t){var n=(new Date).getTime(),i=e.app.featureSetManager.getCollectionById(t.featureSetCollectionId);t.count=i.countFeatures(),t.timeModified=n,e._metadataStore.updateById(t.id,t)})},t.prototype._setStatusRegion=function(e){this._statusRegionName=e||this._resultsListStatusRegion},t.prototype._handleResultsViewCollapsed=function(e){e&&this._statusView&&this.app.command("RemoveResultsStatus").execute()},t.prototype._copyFeatureSets=function(e,t,n){if(void 0===n&&(n=!1),e&&t&&e!=t){n&&t.clear();for(var i=0;i<e.featureSets.length();i++){var o=e.featureSets.getAt(i);if(o){var a=o.clone();t.featureSets.addItem(a)}}}},t.prototype._copyExtendedProperties=function(e,t,n){void 0===n&&(n=!1),e&&t&&e!==t&&(n&&t.extendedProperties.clear(),e.extendedProperties.getItems().forEach(function(e){return t.setExtendedProperty(e.name,e.value)}))},t.prototype._copy=function(e){var t=new a.FeatureSetCollection;return t.sourceName=e.sourceName,t.displayName.set(e.displayName.get()),t.isModified.set(e.isModified.get()),t.tag=e.tag,this._copyExtendedProperties(e,t,!0),this._copyFeatureSets(e,t,!0),this.app.featureSetManager.addCollection(t),t},t.prototype._create=function(e,t){var n=new a.FeatureSetCollection;return n.sourceName=this._fscSourceName,n.tag=t.tag,n.displayName.set(e),this._copyFeatureSets(t,n,!0),this._copyExtendedProperties(t,n,!0),n.setExtendedProperty(this._extPropName,e),this.app.featureSetManager.addCollection(n),this._createMetadata(e,n),n},t.prototype._createMetadata=function(e,t){if(!t)throw new Error("Cannot create metadata for selection: A feature set collection is required.");if(!e)throw new Error("Cannot create metadata for selection: The selection name is required.");var n=(new Date).getTime(),i={id:null,name:e,featureSetCollectionId:t.id,count:t.countFeatures(),modified:!1,timeCreated:n,timeModified:n},o=this._metadataStore.add(i);return o},t.prototype._update=function(e,t,n){t.tag=n.tag,this._copyFeatureSets(n,t,!0),this._copyExtendedProperties(n,t,!0),t.setExtendedProperty(this._extPropName,e.name),t.isModified.set(!1),n.isModified.set(!1);var i=(new Date).getTime();e.timeModified=i,e.count=t.countFeatures(),e.modified=!1,this._metadataStore.updateById(e.id,e)},t.prototype._restore=function(e){if(!e)throw new Error("Collection is required");var t=this.app.featureSetManager.getCollectionIds().indexOf(e.id)>-1;t||this.app.featureSetManager.addCollection(e),this._restoreById(e.id)},t.prototype._restoreById=function(e){this.app.featureSetManager.tryCloseCollection(e),this.app.featureSetManager.openCollection(e),this.app.featureSetManager.closeCollection(e)},t.prototype._delete=function(e,t){this.app.featureSetManager.tryCloseCollection(t.id),this.app.featureSetManager.removeCollectionById(t.id),this._metadataStore.removeById(e.id)},t.prototype._rename=function(e,t,n){var i=(new Date).getTime();t.timeModified=i,t.name=e,this._metadataStore.updateById(t.id,t),n.displayName.set(e),n.setExtendedProperty(this._extPropName,e)},t.prototype._existsInCollection=function(e,t){if(!e||!e.featureSet&&!e.layer)return!1;if(!t)throw new Error("FeatureSetCollection is required");for(var n=0;n<t.featureSets.getLength();n++){var i=t.featureSets.getAt(n),o=i.layer;if(e.featureSet&&e.featureSet.id===i.id)return i.containsFeature(e);var a=e.layer===o||e.layer&&o&&e.layer.id==o.id,r=e.layer===o||e.layer&&o&&e.layer.mapService===o.mapService||e.layer&&o&&e.layer.mapService&&o.mapService&&e.layer.mapService.id==o.mapService.id;if(a&&r)return i.containsFeature(e)}return!1},t.prototype._tryAddToCollection=function(e,t){if(!t||!e)return!1;if(this._existsInCollection(e,t))return!1;var n=null,i=e.featureSet?e.featureSet.id:null,o=e.layer;if(i&&(n=t.getFeatureSetById(i)),!n&&o&&(n=t.getFeatureSetByLayer(o)),!n&&!e.layer&&e.esriFeature&&e.esriFeature.get()&&e.esriFeature.get().getLayer()&&(n=t.getFeatureSetbyEsriLayer(e.esriFeature.get().getLayer())),n)n.addFeature(e);else{if(e.featureSet){var a=e.featureSet;n=a.cloneStructure()}else{var r;!e.layer&&e.esriFeature&&e.esriFeature.get()&&e.esriFeature.get().getLayer()&&e.esriFeature.get().getLayer().id&&(r=e.esriFeature.get().getLayer().id),n=new c.FeatureSet({app:this.app,layer:e.layer,esriFeatureSet:new esri.tasks.FeatureSet,id:r})}n.addFeature(e),t.featureSets.addItem(n)}return!0},t.prototype._tryRemoveFromCollection=function(e,t){if(!t||!e)return!1;var n=null,i=e.featureSet?e.featureSet.id:null,o=e.layer,a=!1;if(i&&(n=t.getFeatureSetById(i)),!n&&o&&(n=t.getFeatureSetByLayer(o)),!n&&!e.layer&&e.esriFeature&&e.esriFeature.get()&&e.esriFeature.get().getLayer()&&(n=t.getFeatureSetbyEsriLayer(e.esriFeature.get().getLayer())),n)if(1===n.features.length()&&(e.getExtendedPropertyByName("isShownInMaptip")||e.getExtendedPropertyByName("isShownInFeaturedetails")))for(var r=0;r<t.featureSets.length();r++){var s=t.featureSets.getAt(r);s===n&&(t.featureSets.removeItem(n),a=!0)}else a=n.removeFeature(e),0===n.features.getLength()&&(t.featureSets.removeItem(n),a=!0);return a},t.prototype._notifyCanExecuteChanged=function(){this.app.command("AddFeatureToResults").raiseCanExecuteChanged(),this.app.command("RemoveFeatureFromResults").raiseCanExecuteChanged(),this.app.command("CombineResults").raiseCanExecuteChanged(),this.app.command("ResultsReplace").raiseCanExecuteChanged(),
this.app.command("ResultsUnion").raiseCanExecuteChanged(),this.app.command("ResultsSubtract").raiseCanExecuteChanged(),this.app.command("ResultsIntersect").raiseCanExecuteChanged()},t.prototype._notifyFeatureSetCollectionChanged=function(){var e=new l.FeatureSetManagerEventArgs({sender:this,featureSetCollection:this._featureSetCollection.get(),featureSetCollectionId:this._featureSetCollection.get().id});this.app.event("FSMCollectionChangedEvent").publish(e)},t.prototype._executeAddFeatureToResults=function(e){var t=this._featureSetCollection.get()?this._featureSetCollection.get().displayName.get():"",n=this._tryAddToCollection(e,this._featureSetCollection.get());if(n){this._notifyCanExecuteChanged(),this._notifyFeatureSetCollectionChanged();var i=this.getResource("language-common-results-added-confirmation").format(1,t);this.app.command("AddResultsStatus").execute(i)}},t.prototype._executeRemoveFeatureFromResults=function(e){var t=this._featureSetCollection.get()?this._featureSetCollection.get().displayName.get():"",n=this._tryRemoveFromCollection(e,this._featureSetCollection.get());if(n){this._notifyCanExecuteChanged(),this.app.event("_featureRemovedFromResults").publish(e),this._notifyFeatureSetCollectionChanged();var i=this.getResource("language-common-results-removed-confirmation").format(1,t);this.app.command("AddResultsStatus").execute(i)}},t.prototype._executeFindAllSelectionMetadata=function(e){e=e||{};var t=e.successCallback||this._noop,n=(e.errorCallback||this._noop,this._metadataStore.findAll());t(n)},t.prototype._executeFindMetadataForSelection=function(e){e=e||{};var t=e.successCallback||this._noop,n=e.errorCallback||this._noop,i=e.name,o=e.featureSetCollectionId;if(!i&&!o)return void n(new Error("Cannot fetch selection metadata: A selection name or feature set collection ID is required."));var a={};i&&(a.name=i),o&&(a.featureSetCollectionIds=[o]);var r=this._metadataStore.find(a),s=u.firstOrDefault(r);t(s)},t.prototype._executeFindSelection=function(e){e=e||{};var t=null,n=e.successCallback||this._noop,i=(e.errorCallback||this._noop,e.name),o=i?this._metadataStore.findByName(i):null,a=o?this.app.featureSetManager.getCollectionById(o.featureSetCollectionId):null;a&&(t=this._copy(a)),n(t)},t.prototype._executeCreateSelection=function(e){e=e||{};var t=e.successCallback||this._noop,n=e.errorCallback||this._noop,i=e.featureSetCollection,o=e.name;if(!o)return void n(new Error("Cannot create named selection: The selection name is required."));var a="string"==typeof i?this.app.featureSetManager.getCollectionById(i):i,r=this._copy(this._create(o,a));this._restore(r),t(),this.app.event("SelectionCreatedEvent").publish({name:o,featureSetCollection:r}),this._notifyCanExecuteChanged()},t.prototype._executeUpdateSelection=function(e){e=e||{};var t=e.successCallback||this._noop,n=e.errorCallback||this._noop,i=e.featureSetCollection,o=e.name;if(!o)return void n(new Error("Cannot update named selection: The selection name is required."));var a=this._metadataStore.findByName(o);if(!a||!a.id)return void n(new Error("Cannot update named selection: '{0}' not found.".format(o)));var r="string"==typeof i?this.app.featureSetManager.getCollectionById(i):i,s=this.app.featureSetManager.getCollectionById(a.featureSetCollectionId);if(!s)return void n(new Error("Cannot update named selection: feature set collection '{0}' not found.".format(a.featureSetCollectionId)));this._update(a,s,r);var l=this._copy(s);this._restore(l),t(),this.app.event("SelectionChangedEvent").publish({name:o,previousName:o,featureSetCollection:l}),this._notifyCanExecuteChanged()},t.prototype._executeRestoreSelection=function(e){e=e||{};var t,n=e.successCallback||this._noop,i=e.errorCallback||this._noop,o=e.name;if(!o)return void i(new Error("Cannot restore named selection: The selection name is required."));var a=this._metadataStore.findByName(o);if(!a)return void i(new Error("Cannot restore named selection: '{0}' not found.".format(o)));if(t=this.app.featureSetManager.getCollectionById(a.featureSetCollectionId),!t)return void i(new Error("Cannot restore named selection: feature set collection '{0}' not found.".format(a.featureSetCollectionId)));var r=this._copy(t);this._restore(r),n(),this._notifyCanExecuteChanged()},t.prototype._executeDeleteSelection=function(e){e=e||{};var t,n=e.successCallback||this._noop,i=e.errorCallback||this._noop,o=e.name;if(!o)return void i(new Error("Cannot delete named selection: The selection name is required."));var a=this._metadataStore.findByName(o);return a?(t=this.app.featureSetManager.getCollectionById(a.featureSetCollectionId))?(this._delete(a,t),n(),void this.app.event("SelectionRemovedEvent").publish({name:o,featureSetCollection:t})):void i(new Error("Cannot delete named selection: feature set collection '{0}' not found.".format(a.featureSetCollectionId))):void i(new Error("Cannot delete named selection: '{0}' not found.".format(o)))},t.prototype._executeRenameSelection=function(e){e=e||{};var t=e.successCallback||this._noop,n=e.errorCallback||this._noop,i=e.name,o=e.newName;if(!i||!o)return void n(new Error("Cannot rename selection: The selection name is required."));var a=this._metadataStore.findByName(i);if(!a||!a.id)return void n(new Error("Cannot rename selection: '{0}' not found.".format(i)));var r=this.app.featureSetManager.getCollectionById(a.featureSetCollectionId);if(!r)return void n(new Error("Cannot rename selection: feature set collection '{0}' not found.".format(a.featureSetCollectionId)));this._rename(o,a,r);var s=this._copy(r),l=this._featureSetCollection.get();if(l&&l.sourceName===this._fscSourceName){var c=l.getExtendedPropertyByName(this._extPropName);c&&c===i&&(l.displayName.set(o),l.setExtendedProperty(this._extPropName,o))}t(),this.app.event("SelectionChangedEvent").publish({name:o,previousName:i,featureSetCollection:s}),this._notifyCanExecuteChanged()},t.prototype._getCombineResultsCommandArgs=function(e,t){var n="string"==typeof e?e:e.id;return n?{combineMode:t||d.CombineMode.REPLACE,currentResults:this._featureSetCollection.get(),featureSetCollectionIds:[n]}:null},t.prototype._executeReplaceResults=function(e){var t=this._getCombineResultsCommandArgs(e,d.CombineMode.REPLACE);this._executeCombineResults(t)},t.prototype._executeUnionResults=function(e){var t=this._getCombineResultsCommandArgs(e,d.CombineMode.UNION);this._executeCombineResults(t)},t.prototype._executeSubtractResults=function(e){var t=this._getCombineResultsCommandArgs(e,d.CombineMode.SUBTRACT);this._executeCombineResults(t)},t.prototype._executeIntersectResults=function(e){var t=this._getCombineResultsCommandArgs(e,d.CombineMode.INTERSECT);this._executeCombineResults(t)},t.prototype._executeCombineResults=function(e){var t=this;if(e&&e.featureSetCollectionIds&&0!=e.featureSetCollectionIds.length){var n,i=e.currentResults;if(n="string"==typeof i?this.app.featureSetManager.getCollectionById(i):i,n||(n=this._featureSetCollection.get()),n){var o=e.featureSetCollectionIds.map(function(e){return t.app.featureSetManager.getCollectionById(e)}).filter(function(e){return null!=e}).map(function(e){return e.clone(!0)}),a=e.combineMode||d.CombineMode.REPLACE,r=e.successCallback,s=(e.errorCallback,!1);switch(a){case d.CombineMode.REPLACE:var l=o&&o.length>0?o[0]:null;l&&(n.clear(),n.featureSets.addItems(l.featureSets.getItems()));break;case d.CombineMode.UNION:s=n.unionManyInPlace(o);break;case d.CombineMode.SUBTRACT:s=n.subtractManyInPlace(o);break;case d.CombineMode.INTERSECT:s=n.intersectManyInPlace(o)}if(this._featureSetCollection.get().id!==n.id){this.app.command("HideFeatureSetResultsView").execute();for(var c=this._featureSetCollection.get().featureSets.getLength(),u=0;u<c;u++)this._featureSetCollection.get().featureSets.removeAt(0);for(var p=n.featureSets.getLength(),m=0;m<p;m++){var f=n.featureSets.getAt(m);this._featureSetCollection.get().featureSets.addItem(f)}}s&&(this._notifyCanExecuteChanged(),this._notifyFeatureSetCollectionChanged()),r&&r({updatedCollection:n,combineMode:a,modified:s})}}},t.prototype._canAddFeatureToResults=function(e){var t=this._featureSetCollection.get();return!(!t||!e)&&!this._existsInCollection(e,t)},t.prototype._canRemoveFeatureFromResults=function(e){var t=this._featureSetCollection.get();return!(!t||!e)&&this._existsInCollection(e,t)},t.prototype._canFindSelection=function(e){return!0},t.prototype._canCreateSelection=function(e){return!0},t.prototype._canUpdateSelection=function(e){return!0},t.prototype._canRestoreSelection=function(e){return!0},t.prototype._canDeleteSelection=function(e){return!0},t.prototype._canRenameSelection=function(e){return!0},t.prototype._canReplaceResults=function(e){return!0},t.prototype._canUnionResults=function(e){return!0},t.prototype._canSubtractResults=function(e){return!0},t.prototype._canIntersectResults=function(e){return!0},t.prototype._canCombineResults=function(e){return!0},t.prototype._noop=function(){},t}(n.ModuleBase);t.SelectionModule=p})},"Mapping/modules/Selection/SelectionState":function(){define(["require","exports"],function(e,t){"use strict"})},"url:/Mapping/modules/Selection/CombineResultsView.html":'<div class="refine-results">\r\n    <div class="widget refine-options" data-binding="{@widget: CombineResultsOptionsWidget}{@widget-context: featureSetCollection}{@hidden: combineModeChosen}" data-menu-id="CombineResultsActions" data-menu-hoist-disabled="true"></div>\r\n\r\n    <div data-binding="{@visible: combineModeChosen}">\r\n        <div class="panel-group no-item box-container" data-binding="{@hidden: selections}">\r\n            <p data-binding="{@text: @language-saved-results-browse-no-items}"></p>\r\n            <p class="description" data-binding="{@text: @language-saved-results-browse-no-items-desc}"></p>\r\n        </div>\r\n\r\n        <div class="panel-group" data-binding="{@visible: selections}">\r\n            <div class="list-refine-results-header" tabindex="0">\r\n                <span data-binding="{@text: @language-saved-results-combine-list-explanation}"></span>\r\n            </div>\r\n            <ul class="list-menu" data-binding="{@source: resultsPage}">\r\n                <li class="list-menu-item" data-binding="{@template-for: resultsPage}">\r\n                    <label class="list-menu-label" data-binding="{@text: displayName}{for: id}"></label>\r\n                    <input class="list-menu-action" type="checkbox" data-binding="{id: id}{@value: isSelected}" />\r\n                </li>\r\n            </ul>\r\n            <div class="form-btns">\r\n                <button class="button ok-button" data-binding="{@event-click: handleOkClick}{@text: @language-common-ok}"></button>\r\n                <button class="button cancel-button" data-binding="{@event-click: handleCancelClick}{@text: @language-common-cancel}"></button>\r\n            </div>\r\n        </div>\r\n        <!-- BEGIN: Paging Controls -->\r\n        <div data-binding="{@visible: selections}{@widget: PagingControlsWidget}{@widget-context: @context}{@widget-required: false}"></div>\r\n        <!-- END: Paging Controls -->\r\n    </div>\r\n</div>',"url:/Mapping/modules/Selection/ListSelectionsView.html":'<div class="list-selections-view">\r\n    <div class="panel-group no-item box-container" data-binding="{@hidden: selections}">\r\n        <p data-binding="{@text: @language-saved-results-browse-no-items}"></p>\r\n        <p class="description" data-binding="{@text: @language-saved-results-browse-no-items-desc}"></p>\r\n    </div>\r\n\r\n    <div class="panel-group" data-binding="{@visible: selections}">\r\n        <ul class="list-menu" data-binding="{@source: resultsPage}">\r\n            <li class="list-menu-item" data-binding="{@template-for: resultsPage}">\r\n                <button class="selection-contents" data-binding="{@disabled: disabled}{title: restoreTooltip}{@event-onclick: handleRestoreSelectionClick}">\r\n                    <span class="list-menu-name" data-binding="{@text: displayName}"></span>\r\n                    <span class="list-menu-desc" data-binding="{@visible:disabled}{@text: @language-saved-results-item-already-open}"></span>\r\n                </button>\r\n                <button class="action-button edit-24 right" data-binding="{@event-onclick: handleRenameClick}{title: renameTooltip}"></button>\r\n                <button class="action-button trashcan-24 right" data-binding="{@event-onclick: handleDeleteClick}{title: deleteTooltip}"></button>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <!-- BEGIN: Paging Controls -->\r\n    <div data-binding="{@visible: selections}{@widget: PagingControlsWidget}{@widget-context: @context}{@widget-required: false}"></div>\r\n    <!-- END: Paging Controls -->\r\n</div>',"url:/Mapping/modules/Selection/SaveSelectionView.html":'<div class="save-selection-view">\r\n    <label for="selectionName" data-binding="{@text: @language-common-save-as}"></label>\r\n    <input type="text" id="selectionName" data-binding="{@value: name}{@event-keydown: handleKeyDown}" />\r\n\r\n    <div class="form-btns">\r\n        <button class="button save-button" data-binding="{@event-click: handleSaveClick}{@text: @language-common-save}{@enabled: name}"></button>\r\n        <button class="button cancel-button" data-binding="{@event-click: handleCancelClick}{@text: @language-common-cancel}"></button>\r\n    </div>\r\n</div>'}}),define(["Mapping/modules/Selection/CombineResultsView","Mapping/modules/Selection/CombineResultsViewModel","Mapping/modules/Selection/ListSelectionsView","Mapping/modules/Selection/ListSelectionsViewModel","Mapping/modules/Selection/SaveSelectionView","Mapping/modules/Selection/SaveSelectionViewModel","Mapping/modules/Selection/SelectableSelectionItem","Mapping/modules/Selection/SelectionItem","Mapping/modules/Selection/SelectionModule"],function(e,t,n,i,o,a,r,s,l){shim(e,"geocortex.essentialsHtmlViewer.mapping.modules.selection.CombineResultsView",e.CombineResultsView),shim(t,"geocortex.essentialsHtmlViewer.mapping.modules.selection.CombineResultsViewModel",t.CombineResultsViewModel),shim(n,"geocortex.essentialsHtmlViewer.mapping.modules.selection.ListSelectionsView",n.ListSelectionsView),shim(i,"geocortex.essentialsHtmlViewer.mapping.modules.selection.ListSelectionsViewModel",i.ListSelectionsViewModel),shim(o,"geocortex.essentialsHtmlViewer.mapping.modules.selection.SaveSelectionView",o.SaveSelectionView),shim(a,"geocortex.essentialsHtmlViewer.mapping.modules.selection.SaveSelectionViewModel",a.SaveSelectionViewModel),shim(r,"geocortex.essentialsHtmlViewer.mapping.modules.selection.SelectableSelectionItem",r.SelectableSelectionItem),shim(s,"geocortex.essentialsHtmlViewer.mapping.modules.selection.SelectionItem",s.SelectionItem),shim(l,"geocortex.essentialsHtmlViewer.mapping.modules.selection.SelectionModule",l.SelectionModule)});