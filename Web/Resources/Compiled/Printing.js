function shim(e,t,i){if("string"==typeof e&&(i=t,t=e),"undefined"==typeof i)return void console.warn("Undefined shim for: "+t);for(var n=t.split("."),a=null,s=window,r=0,l=n.length;r<l;r++)a=n[r],r==l-1?s[a]=i:s[a]||(s[a]={}),s=s[a]}require({cache:{"Mapping/modules/Printing/PrintingModule":function(){define(["require","exports","geocortex/framework/application/ModuleBase"],function(e,t,i){"use strict";var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.ModuleBase);t.PrintingModule=n})},"Mapping/modules/Printing/PrintingView":function(){define(["require","exports","geocortex/framework/ui/ViewBase","geocortex/infrastructure/DistanceConverter","geocortex/essentials/DistanceUnit","geocortex/infrastructure/MapUtils"],function(e,t,i,n,a,s){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.attach=function(t){var i=this;e.prototype.attach.call(this,t),this.viewModel.printPreviewIsLocked.bind(this,this.lockModeHasChanged),this.app.command("PrintMap").register(this,function(){i.viewModel.printComplete.set(!1),i.app.viewManager.activateView(i),i.app.configuration.mobileMode||i.initializePrintPreview()},function(){return i.app.site&&i.app.site.hasPrintTemplates});var n=this.app.site;n&&n.isInitialized?this.siteInitializedEvent():this.app.event("SiteInitializedEvent").once(this,this.siteInitializedEvent)},t.prototype.siteInitializedEvent=function(){var e=this;this.viewModel.previewIsEnabled.set(n.canConvert(this.app.site.essentialsMap.units.type.replace("_",""),a.DistanceUnitType.INCHES)),this.viewModel.previewIsEnabled.get()&&(this.app.event("PrintTemplateStartedEvent").subscribe(this,this.hidePrintPreview),this.app.event("PrintTemplateCompletedEvent").subscribe(this,this.printTemplateCompletedEvent),this.app.configuration.mobileMode&&this.app.event("DataFrameOpenedEvent").subscribe(this,function(t){e.bottomPanelPercHeight=t;var i=document.body.clientHeight,n=i-i*t;e.adaptMapScale(n)})),this.viewModel.siteInitialized()},t.prototype.initializePrintPreview=function(){this.viewModel.previewIsEnabled.get()&&(this.viewModel.previewIsVisible.get()?this.addGraphicPrintPreview():(this.viewModel.setScales(this.viewModel.selectedTemplate.get()),this.viewModel.printPreviewIsLocked.set(!0),this.viewModel.graphic||this.addGraphicPrintPreview()))},t.prototype.activated=function(){this.viewIsActivated=!0,this.viewModel.printPreviewLockTogglerIsDisabled.set(!1)},t.prototype.deactivated=function(){this.viewIsActivated=!1,this.viewModel.previewIsEnabled.get()&&this.resetPrintPreview(),this.app.configuration.mobileMode||this.app.command("DeactivateView").execute("UnlockedPrintPreviewView")},t.prototype.printTemplateCompletedEvent=function(){this.viewModel.printPreviewIsLocked.get()&&this.addGraphicPrintPreview({scale:this.viewModel.printPreviewScale,extent:this.viewModel.printPreviewExtent})},t.prototype.handleTemplateSelectionChanged=function(e,t,i){this.viewModel.updatePrintTemplate(),this.viewModel.previewIsVisible.get()&&this.viewModel.previewIsEnabled.get()&&this.viewModel.printPreviewIsLocked.get()&&this.addGraphicPrintPreview(),this.app.event("PrintPreviewLayoutChangedEvent").publish()},t.prototype.handleScaleSelectionChanged=function(e,t,i){var n=this;return setTimeout(function(){n.viewModel.previewIsVisible.get()&&n.viewModel.previewIsEnabled.get()&&n.viewModel.printPreviewIsLocked.get()&&n.addGraphicPrintPreview();var e=parseFloat(n.viewModel.selectedScale.get().scale);e?(n.app.command("ZoomToScale").execute(e),n.viewModel.printPreviewLockTogglerIsDisabled.get()&&n.viewModel.printPreviewLockTogglerIsDisabled.set(!1)):(n.viewModel.printPreviewLockTogglerIsDisabled.set(!0),n.viewModel.printPreviewIsLocked.get()&&n.viewModel.printPreviewIsLocked.set(!1)),n.app.event("PrintPreviewScaleChangedEvent").publish()}),!0},t.prototype.handlePrintClick=function(e,t,i){this.viewModel.performPrint()},t.prototype.handleOpenFileClick=function(e,t,i){window.open(this.viewModel.url.get()),this.viewModel.printComplete.set(!1)},t.prototype.lockModeHasChanged=function(e){this.viewModel.printPreviewIsLocked.get()?this.addGraphicPrintPreview({extent:this.viewModel.printPreviewExtent}):this.hidePrintPreview()},t.prototype.handleReCenterClick=function(e,t,i){this.viewModel.previewIsEnabled.get()&&this.addGraphicPrintPreview({adaptMapScale:this.app.configuration.mobileMode})},t.prototype.handleCancelClick=function(){this.app.viewManager.deactivateView(this)},t.prototype.handleTogglePreviewClick=function(){this.viewModel.previewIsVisible.get()?this.hidePrintPreview():this.viewModel.graphic?this.showPrintPreview():this.addGraphicPrintPreview({adaptMapScale:this.app.configuration.mobileMode})},t.prototype.resetPrintPreview=function(){this.hidePrintPreview(),this.viewModel.graphic=null,this.imageGraphic=null,this.viewModel.printPreviewExtent=null,this.viewModel.printPreviewScale=null},t.prototype.showPrintPreview=function(){this.viewModel.previewIsVisible.set(!0),this.viewModel.graphic&&this.app.map.graphics.add(this.viewModel.graphic),this.imageGraphic&&this.app.map.graphics.add(this.imageGraphic)},t.prototype.hidePrintPreview=function(){this.viewModel.previewIsVisible.set(!1),this.viewModel.graphic&&this.app.map.graphics.remove(this.viewModel.graphic),this.imageGraphic&&this.app.map.graphics.remove(this.imageGraphic)},t.prototype.addGraphicPrintPreview=function(e){e||(e={}),this.resetPrintPreview();var t=e.extent?e.extent.getCenter():this.app.map.extent.getCenter(),i=e.scale?e.scale:parseFloat(this.viewModel.selectedScale.get().scale);i||(this.viewModel.printPreviewScale=null);var n=this.viewModel.calculateWidthAndHeightFromSelectedPrintTemplate(i);if(this.viewModel.graphic=this.viewModel.getGraphicFromPrintTemplate(t,n.width,n.height),this.app.map.graphics.add(this.viewModel.graphic),this.imageGraphic=new esri.Graphic,this.imageGraphic.setSymbol(this.viewModel.imageSymbol),this.imageGraphic.setGeometry(t),this.app.map.graphics.add(this.imageGraphic),this.imageGraphic.show(),this.viewModel.previewIsVisible.set(!0),this.viewModel.printPreviewExtent=this.viewModel.graphic.geometry.getExtent(),this.viewModel.printPreviewScale=i,this.app.configuration.mobileMode&&this.bottomPanelPercHeight)var a=document.body.clientHeight,s=a-a*this.bottomPanelPercHeight;else this.app.configuration.mobileMode||(s=this.app.map.height);e.adaptMapScale&&s&&this.adaptMapScale(s)},t.prototype.adaptMapScale=function(e){var t=this.app.map.getScale();if(s.getClosestScale(this.app.map,s.ScaleChangeMode.GreaterThan,t+1)!==t+1&&this.viewModel.graphic&&this.viewModel.previewIsVisible.get()){var i,n=this.viewModel.getGraphicPositionFromExtent(this.viewModel.printPreviewExtent),a=n.width>n.height,r=a?n.height:n.width,l=1,o=r/l;if(r>e){for(;e<o;)i=s.getClosestScale(this.app.map,s.ScaleChangeMode.GreaterThan,t+1),l=i/t,o/=l,t=i;this.app.command("ZoomToScale").execute(i)}}},t}(i.ViewBase);t.PrintingView=r})},"Mapping/modules/Printing/PrintingViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables","geocortex/essentials/ReportParameters","geocortex/essentials/exportMap/ExportMapParameters","geocortex/essentials/exportMap/ExportMapTask","geocortex/infrastructure/DistanceConverter","geocortex/essentials/DistanceUnit"],function(e,t,i,n,a,s,r,l,o){"use strict";var p=function(e){function t(t,i){var a=e.call(this,t,i)||this;return a.printTemplates=new n.ObservableCollection,a.outputFormats=new n.ObservableCollection,a.resolutions=new n.ObservableCollection,a.scales=new n.ObservableCollection,a.grids=new n.ObservableCollection,a.textFields=new n.ObservableCollection,a.textFied=new n.Observable(null),a.selectedTemplate=new n.Observable(null),a.selectedScale=new n.Observable(null),a.selectedResolution=new n.Observable(null),a.selectedFormat=new n.Observable(null),a.selectedGrid=new n.Observable(null),a.supportsEmailNotification=new n.Observable((!1)),a.validEmailAddressSupplied=new n.Observable((!1)),a.emailAddress=new n.Observable(null),a.isPrinting=new n.Observable((!1)),a.printComplete=new n.Observable((!1)),a.isMapLoaded=new n.Observable((!1)),a.url=new n.Observable(null),a.previewIsVisible=new n.Observable((!1)),a.printPreviewIsLocked=new n.Observable((!0)),a.previewIsEnabled=new n.Observable((!1)),a.printPreviewLockTogglerIsDisabled=new n.Observable((!1)),a.mobileMode=new n.Observable(a.app.configuration.mobileMode),a}return __extends(t,e),t.prototype.initialize=function(e){var t=e.previewBackgroundColor||[207,76,64,.3],i=e.previewBorderColor||[128,128,128],n=e.previewBorderThickness||2;this.printPreviewSymbol=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color(i),n),new esri.Color(t));var a=e.previewCenterImageUrl||"Resources/Images/center-cross-32.png";this.imageSymbol=new esri.symbol.PictureMarkerSymbol(a,32,32)},t.prototype.siteInitialized=function(){if(this.app.site&&this.app.site.hasPrintTemplates){this.printTemplates.addItems(this.app.site.printTemplates);for(var e=this.printTemplates.getLength()-1;e>=0;e--)this.printTemplates.getAt(e).visible!==!1?this.printTemplates.getAt(e).isDefault===!0&&this.selectedTemplate.set(this.printTemplates.getAt(e)):this.printTemplates.removeAt(e);null===this.selectedTemplate.get()&&this.selectedTemplate.set(this.printTemplates.getAt(0)),this.updatePrintTemplate()}this.isMapLoaded.set(!0),this.app.command("PrintMap").raiseCanExecuteChanged()},t.prototype.performPrint=function(){var e=this;this.isPrinting.set(!0);var t=this.selectedTemplate.get();this.app.command("ScreenReaderNarrate").execute(this.app.getResource(this.libraryId,"language-is-printing"));var i=new a.ReportParameters;if(i.outputFormat=this.selectedFormat.get(),i.resolution=this.selectedResolution.get(),i.grid=this.selectedGrid.get(),i.fields=t.textFields,i.customExtent=this.printPreviewExtent,i.scale=this.selectedScale.get(),i.scale.scale){var n=parseFloat(i.scale.scale);i.scale.scale=n.toFixed(6)}""===i.scale.scale?i.extentType=a.ReportParameters.CURRENT_EXTENT:i.extentType=a.ReportParameters.CUSTOM_EXTENT,this.supportsEmailNotification.get()&&(String.isNullOrEmpty(this.emailAddress.get())?this.validEmailAddressSupplied.set(!1):(i.notificationEmailAddress=this.emailAddress.get(),this.validEmailAddressSupplied.set(!0))),this.app.event("PrintTemplateStartedEvent").publish(t);var l=new s.ExportMapParameters;l.reportParameters=i;var o=new r.ExportMapTask(t);o.generateMapImageUrl(l).then(function(t){return e._printSuccess(t)},function(t){return e._printError(t)})},t.prototype._printError=function(e){this.app.command("Alert").execute("Print error: "+e.message),this.app.command("ScreenReaderNarrate").execute("Print error: "+e.message),this.app.event("PrintTemplateErrorEvent").publish({name:"PrintTemplateError",message:e.message}),this.isPrinting.set(!1)},t.prototype._printSuccess=function(e){this.isPrinting.set(!1),this.url.set(e.href),this.printComplete.set(!0),this.app.command("ScreenReaderNarrate").execute(this.app.getResource(this.libraryId,"language-print-complete-description")),this.app.command("LogOptimizerEvent").execute("PrintMap",this.selectedTemplate.get().displayName),this.app.event("PrintTemplateCompletedEvent").publish(this.selectedTemplate.get())},t.prototype.updatePrintTemplate=function(){var e=this.selectedTemplate.get();e&&(this.setOutputFormats(e),this.setResolutions(e),this.setGrids(e),this.setScales(e),this.setTextFields(e),this.setEmailNotification(e))},t.prototype.setOutputFormats=function(e){this.outputFormats.clear(),e.supportedOutputFormats&&(this.outputFormats.addItems(e.supportedOutputFormats),e.defaultOutputFormat?this.selectedFormat.set(e.defaultOutputFormat):this.selectedFormat.set(this.outputFormats.getAt(0)))},t.prototype.setResolutions=function(e){this.resolutions.clear(),e.supportedResolutions&&(this.resolutions.addItems(e.supportedResolutions),e.defaultResolution?this.selectedResolution.set(e.defaultResolution):this.selectedResolution.set(this.resolutions.getAt(0)))},t.prototype.setGrids=function(e){if(this.grids.clear(),e.grids&&e.grids.length){var t=this.app.getResource(this.libraryId,"language-printing-none");this.grids.addItem({id:null,displayName:t}),this.grids.addItems(e.grids),e.defaultGrid?this.selectedGrid.set(e.defaultGrid):this.selectedGrid.set(this.grids.getAt(0))}},t.prototype.setScales=function(e){this.scales.clear();var t=this.app.getResource(this.libraryId,"language-printing-current-scale"),i=esri.geometry.getScale(this.app.map),n={displayName:t+" - 1: "+Math.round(i),scale:i.toString()};this.scales.addItem({displayName:t+" - 1: "+Math.round(i),scale:i.toString()});var a=this.app.getResource(this.libraryId,"language-printing-current-extent"),s={displayName:a,scale:""};this.scales.addItem(s),e.supportedMapScales&&e.supportedMapScales.length&&this.scales.addItems(e.supportedMapScales),this.selectedScale.set(this.scales.getAt(0)),e.defaultMapScale?this.selectedScale.set(e.defaultMapScale):e.defaultMapScaleName&&("Current Extent"===e.defaultMapScaleName?this.selectedScale.set(s):"Current Scale"===e.defaultMapScaleName&&this.selectedScale.set(n))},t.prototype.setTextFields=function(e){if(this.textFields.clear(),e.textFields&&e.textFields.length>0){for(var t=[],i=0;i<e.textFields.length;i++){var a=e.textFields[i],s={};for(var r in a)if(a.hasOwnProperty(r)){var l=this._setupObservablePrimitive(l,r,a);s[r]=l}t.push(new n.Observable(s))}this.textFields.addItems(t)}},t.prototype.adjustCustomExtent=function(e,t,i){var n,a=e.getWidth(),s=e.getHeight(),r=a/s,l=t/i;if(l!==r){var o=void 0,p=void 0;r>l?(p=a,o=a/l):(o=s,p=s*l);var d=e.getCenter(),h=p/2,c=o/2,u=d.x-h,g=d.y-c,v=d.x+h,m=d.y+c;n=new esri.geometry.Extent(u,g,v,m,e.spatialReference)}else n=e;return n},t.prototype.getGraphicFromPrintTemplate=function(e,t,i){var n=new esri.geometry.Polygon(this.app.map.spatialReference),a=new Array;return a.push(new esri.geometry.Point(e.x-t/2,e.y-i/2)),a.push(new esri.geometry.Point(e.x-t/2,e.y+i/2)),a.push(new esri.geometry.Point(e.x+t/2,e.y+i/2)),a.push(new esri.geometry.Point(e.x+t/2,e.y-i/2)),a.push(new esri.geometry.Point(e.x-t/2,e.y-i/2)),n.addRing(a),new esri.Graphic(n,this.printPreviewSymbol)},t.prototype.getGraphicPositionFromExtent=function(e){var t=this.app.map.toScreen(new esri.geometry.Point(e.xmin,e.ymax,this.app.map.spatialReference)),i=this.app.map.toScreen(new esri.geometry.Point(e.xmax,e.ymin,this.app.map.spatialReference)),n=t.y,a=t.x,s=i.x-t.x,r=i.y-t.y;return{top:n,left:a,width:s,height:r}},t.prototype.calculateWidthAndHeightFromSelectedPrintTemplate=function(e){var t,i;if(e)t=l.convert(this.app.site.essentialsMap.units.type.replace("_",""),this.selectedTemplate.get().mainMapWidth*e,o.DistanceUnitType.INCHES),i=l.convert(this.app.site.essentialsMap.units.type.replace("_",""),this.selectedTemplate.get().mainMapHeight*e,o.DistanceUnitType.INCHES);else{var n=this.adjustCustomExtent(this.app.map.extent,this.selectedTemplate.get().mainMapWidth,this.selectedTemplate.get().mainMapHeight);t=n.getWidth(),i=n.getHeight()}return{width:t,height:i}},t.prototype.calculateExtentFromPrintTemplate=function(e,t){t=t||parseFloat(this.selectedScale.get().scale);var i=this.calculateWidthAndHeightFromSelectedPrintTemplate(t),n=new esri.geometry.Point(e.x-i.width/2,e.y+i.height/2),a=new esri.geometry.Point(e.x+i.width/2,e.y-i.height/2),s=new esri.geometry.Extent(n.x,a.y,a.x,n.y,this.app.map.spatialReference);return s},t.prototype._setupObservablePrimitive=function(e,t,i){var e=new n.Observable(i[t]);return e.set=function(n){i[t]=n,e.value=n,e.bindingEvent.publish(n)},e.get=function(){return i[t]},e},t.prototype.setEmailNotification=function(e){this.supportsEmailNotification.set(e.supportsEmailNotification)},t}(i.ViewModelBase);t.PrintingViewModel=p})},"Mapping/modules/Printing/UnlockedPrintPreviewView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,i){"use strict";var n=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype.attach=function(t){var i=this;e.prototype.attach.call(this,t),this.peephole.style.borderWidth=this.viewModel.printPreviewSymbol.outline.width+"px",this.peephole.style.borderColor=this.viewModel.printPreviewSymbol.outline.color.toCss(!0),this.peephole.style.backgroundColor=this.viewModel.printPreviewSymbol.color.toCss(!0),this.viewModel.printPreviewIsLocked.bind(this,function(e){return i.setPeepholeVisibility(e)})},t.prototype.activated=function(){this.mapZoomStartedToken||(this.mapZoomStartedToken=this.app.event("MapZoomStartedEvent").subscribe(this,this.mapZoomStartedEvent)),this.mapZoomEndedToken||(this.mapZoomEndedToken=this.app.event("MapZoomEndedEvent").subscribe(this,this.handleMapZoomEvent)),this.mapExtentChangedToken||(this.mapExtentChangedToken=this.app.event("MapExtentChangedEvent").subscribe(this,this.setExtentFromPeepholePosition)),this.selectedScaleToken||(this.selectedScaleToken=this.app.event("PrintPreviewScaleChangedEvent").subscribe(this,this.printMapScaleHasChanged)),this.selectedTemplateToken||(this.selectedTemplateToken=this.app.event("PrintPreviewLayoutChangedEvent").subscribe(this,this.handleTemplateSelectionChanged)),this.calculatePeepholeDimensionsFromExtent(this.viewModel.printPreviewExtent)},t.prototype.deactivated=function(){this.mapZoomStartedToken&&(this.app.event("MapZoomStartedEvent").unsubscribe(this.mapZoomStartedToken),this.mapZoomStartedToken=null),this.mapZoomEndedToken&&(this.app.event("MapZoomEndedEvent").unsubscribe(this.mapZoomEndedToken),this.mapZoomEndedToken=null),this.mapExtentChangedToken&&(this.app.event("MapExtentChangedEvent").unsubscribe(this.mapExtentChangedToken),this.mapExtentChangedToken=null),this.selectedScaleToken&&(this.app.event("PrintPreviewScaleChangedEvent").unsubscribe(this.selectedScaleToken),this.selectedScaleToken=null),this.selectedTemplateToken&&(this.app.event("PrintPreviewLayoutChangedEvent").unsubscribe(this.selectedTemplateToken),this.selectedTemplateToken=null)},t.prototype.setPeepholeVisibility=function(e){e?this.app.command("DeactivateView").execute(this.id):this.app.command("ActivateView").execute(this.id)},t.prototype.handleTemplateSelectionChanged=function(){var e=this.viewModel.calculateExtentFromPrintTemplate(this.app.map.extent.getCenter());this.calculatePeepholeDimensionsFromExtent(e)},t.prototype.printMapScaleHasChanged=function(){var e,t=this,i=parseFloat(this.viewModel.selectedScale.get().scale);return i&&i.toFixed(2)!==this.app.map.getScale().toFixed(2)?this.app.event("MapZoomEndedEvent").once(this,function(){e=t.viewModel.calculateExtentFromPrintTemplate(t.app.map.extent.getCenter(),i),t.calculatePeepholeDimensionsFromExtent(e),t.viewModel.printPreviewExtent=e}):i&&i.toFixed(2)===this.app.map.getScale().toFixed(2)?(e=this.viewModel.calculateExtentFromPrintTemplate(this.app.map.extent.getCenter(),i),this.calculatePeepholeDimensionsFromExtent(e),this.viewModel.printPreviewExtent=e):(e=this.app.map.extent,this.calculatePeepholeDimensionsFromExtent(e),this.viewModel.printPreviewExtent=e),!0},t.prototype.mapZoomStartedEvent=function(){this.peephole.style.opacity="0"},t.prototype.handleMapZoomEvent=function(){var e=parseFloat(this.viewModel.selectedScale.get().scale);if(this.app.map.extent.contains(this.viewModel.printPreviewExtent)&&e){var t=this.viewModel.printPreviewExtent,i=this.viewModel.getGraphicPositionFromExtent(t);this.peephole.style.top=i.top+"px",this.peephole.style.left=i.left+"px",this.peephole.style.width=i.width+"px",this.peephole.style.height=i.height+"px"}else e?this.calculatePeepholeDimensionsFromExtent(this.viewModel.printPreviewExtent):this.calculatePeepholeDimensionsFromExtent(this.app.map.extent);this.peephole.style.opacity="1"},t.prototype.calculatePeepholeDimensionsFromExtent=function(e){var t=this.viewModel.getGraphicPositionFromExtent(e);if(this.app.map.extent.contains(this.viewModel.printPreviewExtent))this.peephole.style.top=t.top+"px",this.peephole.style.left=t.left+"px",this.peephole.style.width=t.width+"px",this.peephole.style.height=t.height+"px";else{var i=this.app.map.toScreen(this.app.map.extent.getCenter()),n=t.width,a=t.height,s=i.y-a/2,r=i.x-n/2;this.peephole.style.top=s+"px",this.peephole.style.left=r+"px",this.peephole.style.width=n+"px",this.peephole.style.height=a+"px",this.setExtentFromPeepholePosition()}},t.prototype.setExtentFromPeepholePosition=function(){var e=parseInt(this.peephole.style.top),t=parseInt(this.peephole.style.left),i=parseInt(this.peephole.style.width),n=parseInt(this.peephole.style.height),a=this.app.map.toMap({x:t,y:e}),s=this.app.map.toMap({x:t+i,y:e+n}),r=new esri.geometry.Extent(a.x,s.y,s.x,a.y,this.app.map.spatialReference);this.viewModel.printPreviewExtent=r},t}(i.ViewBase);t.UnlockedPrintPreviewView=n})},"url:/Mapping/modules/Printing/PrintingView.html":'<div class="printing">\r\n    <div class="print-create" data-binding="{@hidden: printComplete}">\r\n        <div class="print-status" data-binding="{@visible: isPrinting}">\r\n            <p data-binding="{@text: @language-is-printing}">...</p>\r\n        </div>\r\n\r\n        <div class="print-status" data-binding="{@hidden: selectedTemplate}">\r\n            <p data-binding="{@text: @language-no-print-template}"></p>\r\n        </div>\r\n\r\n        <div data-binding="{@hidden: isPrinting}{@visible: selectedTemplate}">\r\n\r\n            <div data-binding="{@visible:previewIsEnabled}">\r\n                <div class="form-btns" data-binding="{@visible:mobileMode}">\r\n                    <button class="button print-center-button" data-binding="{@event-click: handleReCenterClick}{@text: @language-print-preview-center}"></button>\r\n                    <button class="button toggle-preview-button" data-binding="{@hidden: previewIsVisible}{@event-click: handleTogglePreviewClick}{@text: @language-print-show-preview-center}"></button>\r\n                    <button class="button toggle-preview-button" data-binding="{@visible: previewIsVisible}{@event-click: handleTogglePreviewClick}{@text: @language-print-hide-preview-center}"></button>\r\n\r\n                </div>\r\n            </div>\r\n\r\n            <label for="selectTemplate" data-binding="{@text: @language-select-layout}"></label>\r\n            <select id="selectTemplate" data-binding="{@source: printTemplates}{@value: selectedTemplate}{@event-onchange: handleTemplateSelectionChanged}">\r\n                <option data-binding="{@template-for: printTemplates}{@text: displayName}{@attach: @context}"></option>\r\n            </select>\r\n\r\n            <label for="outputFormat" data-binding="{@text: @language-output-format}{@visible: outputFormats}"></label>\r\n            <select id="outputFormat" data-binding="{@source: outputFormats}{@value: selectedFormat}{@visible: outputFormats}">\r\n                <option data-binding="{@template-for: outputFormats}{@text: @context}{@attach: @context}"></option>\r\n            </select>\r\n\r\n            <label for="resolution" data-binding="{@text: @language-resolution}{@visible: resolutions}"></label>\r\n            <select id="resolution" data-binding="{@source: resolutions}{@value: selectedResolution}{@visible: resolutions}">\r\n                <option data-binding="{@template-for: resolutions}{@text: displayName}{@attach: @context}"></option>\r\n            </select>\r\n\r\n            <label for="grids" data-binding="{@text: @language-grid}{@visible: grids}"></label>\r\n            <select id="grids" data-binding="{@source: grids}{@value: selectedGrid}{@visible: grids}">\r\n                <option data-binding="{@template-for: grids}{@text: displayName}{@attach: @context}"></option>\r\n            </select>\r\n\r\n            <label for="mapscale" data-binding="{@text: @language-map-scale}{@visible: scales}"></label>\r\n            <select id="mapscale" data-binding="{@source: scales}{@value: selectedScale}{@visible: scales}{@event-onchange: handleScaleSelectionChanged}">\r\n                <option data-binding="{@template-for: scales}{@text: displayName}{@attach: @context}"></option>\r\n            </select>\r\n\r\n            <div data-binding="{@source: textFields}">\r\n                <div data-binding="{@template-for: textFields}">\r\n                    <label data-binding="{@hidden: multiline}">\r\n                        <span data-binding="{@text: displayName}"></span>\r\n                        <input type="text" data-binding="{@value: value}{@hidden: multiline}" />\r\n                    </label>\r\n                    <label data-binding="{@visible: multiline}">\r\n                        <span data-binding="{@text: displayName}"></span>\r\n                        <textarea cols="20" rows="4" data-binding="{@value: value}{@visible: multiline}"></textarea>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n\r\n            <label data-binding="{@text: @language-printing-email-address}{@visible: supportsEmailNotification}"></label>\r\n            <input type="text" data-binding="{@value: emailAddress}{@visible: supportsEmailNotification}" />\r\n            <small data-binding="{@text: @language-printing-email-notification}{@visible: supportsEmailNotification}"></small>\r\n\r\n            <div class="form-btns">\r\n                <div data-binding="{@visible:previewIsEnabled}">\r\n                    <label class="print-preview-toggler" data-binding="{@hidden:mobileMode}">\r\n                        <input type="checkbox" data-binding="{@value: printPreviewIsLocked}{disabled: printPreviewLockTogglerIsDisabled}" />\r\n                        <span data-binding="{@text: @language-print-preview-lock}"></span>\r\n                    </label>\r\n                </div>\r\n                <button class="button print-button" data-binding="{@event-click: handlePrintClick}{@text: @language-print}"></button>\r\n                <button class="button print-cancel-button" data-binding="{@event-click: handleCancelClick}{@text: @language-common-cancel}"></button>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n\r\n    <div class="print-complete" data-binding="{@visible: printComplete}">\r\n        <div data-binding="{@hidden: supportsEmailNotification}">\r\n            <p data-binding="{@text: @language-print-complete-description}"></p>\r\n            <div class="form-btns">\r\n                <button class="button print-button" data-binding="{@event-click: handleOpenFileClick}{@text: @language-open-file}"></button>\r\n            </div>\r\n        </div>\r\n        <div data-binding="{@visible: supportsEmailNotification}">\r\n            <p data-binding="{@text: @language-printing-print-request-start-description}"></p>\r\n            <div data-binding="{@visible: validEmailAddressSupplied}">\r\n                <p data-binding="{@text: @language-printing-print-request-description}"></p>\r\n            </div>\r\n            <div data-binding="{@hidden: validEmailAddressSupplied}">\r\n                <p data-binding="{@text: @language-printing-print-request-status-description}"></p>\r\n                <div class="form-btns">\r\n                    <button class="button print-button" data-binding="{@event-click: handleOpenFileClick}{@text: @language-printing-print-job-status}"></button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n',"url:/Mapping/modules/Printing/UnlockedPrintPreviewView.html":'<div class="printing-peephole-container">\r\n    <div class="printing-peephole" data-binding="{@var:peephole}">\r\n        <img class="printing-peephole-img" src="Resources/Images/center-cross-32.png" />\r\n    </div>\r\n</div>'}}),define(["Mapping/modules/Printing/PrintingModule","Mapping/modules/Printing/PrintingView","Mapping/modules/Printing/PrintingViewModel","Mapping/modules/Printing/UnlockedPrintPreviewView"],function(e,t,i,n){shim(e,"geocortex.essentialsHtmlViewer.mapping.modules.printing.PrintingModule",e.PrintingModule),shim(t,"geocortex.essentialsHtmlViewer.mapping.modules.printing.PrintingView",t.PrintingView),shim(i,"geocortex.essentialsHtmlViewer.mapping.modules.printing.PrintingViewModel",i.PrintingViewModel),shim(n,"geocortex.essentialsHtmlViewer.mapping.modules.printing.UnlockedPrintPreviewView",n.UnlockedPrintPreviewView)});