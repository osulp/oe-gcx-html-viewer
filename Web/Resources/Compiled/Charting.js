!function(){var e="<div class='view-container-view charting' data-binding='{@var: containerElement}{@class-charting-mobile: mobileMode}{@noclass-no-header: headerIsVisible}'>    \x3c!-- BEGIN: Header --\x3e    <button class='bottom-panel-resize resize-handle' tabindex='-1' data-binding='{@visible: resizeY}{@event-mousedown: handleHeaderMouseDown}{@event-touchstart: handleHeaderTouchStart}{title: @language-charting-smart-panel-resize}'>        <span class='icon-drag'></span>    </button>    <div class='panel-header banner-noselect' data-binding='{@visible: headerIsVisible}{@var: headerElement}{@event-mousedown: handleHeaderMouseDown}                                                            {@event-touchstart: handleHeaderTouchStart}{@class-resize-horizontal-hint: resizeX}{@class-resize-vertical-hint: resizeY}'>        <button class='panel-header-button right close-16' data-binding='{@visible: showXButton}{@event-onclick: handleClickClose}{title: @language-common-close}'></button>        <button class='panel-header-button right' data-binding='{@visible: showingMaximizeButton}{@class-minimize-16: panelMaximized}{@noclass-maximize-16: panelMaximized}{@event-onclick: handleMaximizeToggleClick}{@event-touchstart: handleMaximizeToggleClick}{title: @language-charting-smart-panel-maximize-restore}'></button>        <img src='Resources/Images/Icons/charting-24.png' alt=' ' />        <div data-binding='{@widget: ChartSelector}{@widget-replace: true}'></div>    </div>    <div class='panel-scroll-container' data-binding='{data-region-name: regionName}{data-region-adapter: regionType}{@var: scrollRegionElement}{@event-onscroll: handleScrollChange}'></div></div>",i="<div class='chart-pane' data-binding='{@var: containerElement}{@class-auto-size: autoSize}{@noclass-no-header: headerIsVisible}'>    <div class='panel-header' data-binding='{@visible: headerIsVisible}'>        <button class='panel-header-button right close-16' data-binding='{@visible: showXButton}{@event-onclick: handleClickClose}{title: @language-common-close}'></button>        <h2 class='panel-title'>            <img src='Resources/Images/loader-small.gif' data-binding='{@visible: showBusyIndicator}' alt=' ' />            <span data-binding='{@text: title}{@visible: title}'></span>        </h2>    </div>    <div class='chart-pane-caption' data-binding='{@text: caption}'></div>    <div class='chart-pane-body'>        <div data-binding='{@widget: ChartWidget}{@widget-context: currentChart}{@widget-required: true}{@widget-replace: true}'></div>    </div></div>",r="<div class='panel-group single-feature-chart' data-binding='{@var: containerElement}{@visible: providerEnabled}'>    <h3 data-binding='{@text: @language-feature-charts}'></h3>    <div class='single-feature-chart-selector'>        <img src='Resources/Images/Icons/charting-24.png' alt=' ' />        <div data-binding='{@widget: ChartSelector}{@widget-replace: true}'></div>    </div>    <div class='single-feature-chart-widget' data-binding='{@widget: ChartPaneWidget}{@widget-context: currentChart}{@widget-required: false}'></div></div>";function u(t,e,i){if("string"==typeof t&&(i=e,e=t),void 0!==i)for(var r=e.split("."),a=null,n=window,o=0,s=r.length;o<s;o++)a=r[o],o==s-1?n[a]=i:n[a]||(n[a]={}),n=n[a];else console.warn("Undefined shim for: "+e)}require({cache:{"Mapping/modules/Charting/ChartingModule":function(){var r,f=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});define(["require","exports","./FormatProvider","geocortex/infrastructure/Dictionary","geocortex/infrastructure/FeatureSet","geocortex/charting/infrastructure/eventArgs/ChartPointEventArgs","./ChartUtils","geocortex/charting/infrastructure/ColorUtils","geocortex/charting/ChartSeriesProvider","./ChartPointCollectionFeatureAggregator","geocortex/framework/application/ModuleBase","geocortex/charting/ChartViewModelFactory","geocortex/charting/infrastructure/ChartPointAdapterRegistry"],function(t,e,r,a,i,h,o,s,n,l,c,u,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p,g=(p=c.ModuleBase,f(C,p),C.prototype.initialize=function(t){var a=this;p.prototype.initialize.call(this,t),this.doWhenLibrariesDownloaded(function(t){t&&t.hasOwnProperty("infrastructureLibraryId")&&(a.infrastructureLibraryId=t.infrastructureLibraryId),a.initializeChartFactory(),a._registerCommands(),t&&t.hasOwnProperty("adapters")&&a._loadAdapters(t.adapters);var e=a.app.command("CreateHighlightLayer"),i=C.CHART_HIGHLIGHT_LAYER_NAME;if(e.canExecute(i))e.execute(i,C.DEFAULT_FILL_COLOR,C.DEFAULT_BORDER_COLOR,!0);else var r=e.canExecuteChanged.subscribe(a,function(){e.canExecute(i)&&(e.canExecuteChanged.unsubscribe(r),e.execute(i,C.DEFAULT_FILL_COLOR,C.DEFAULT_BORDER_COLOR,!0))})},t)},C.prototype.getStateFilter=function(){return{results:{item:this.app.project.filter.featureSetCollection},displayedCharts:{item:!0}}},C.prototype.exportState=function(){var t=this,e={results:void 0,displayedCharts:[]};return Promise.try(function(){return t.app.command("_ExportChartingState").execute(e),e})},C.prototype.applyState=function(t){var e=this,i={state:t,stateAppliedPromises:[]};return Promise.try(function(){return e.app.command("_ApplyChartingState").execute(i)}).then(function(){return Promise.all(i.stateAppliedPromises)}).return()},C.prototype.initializeChartFactory=function(){var t=new r.FormatProvider,e=new n.ChartSeriesProvider(this.app,this.infrastructureLibraryId),i=new l.ChartPointCollectionFeatureAggregator;i.formatProvider=t,this.chartFactory=new u.ChartViewModelFactory(this.app,this.infrastructureLibraryId),this.chartFactory.id="ChartViewModelFactory",this.chartFactory.initialize({formatProvider:t,seriesProvider:e,aggregator:i}),this.app.registerFrameworkObject(this.chartFactory)},C.prototype.doWhenLibrariesDownloaded=function(t,e){var i=this;if(t)if(this.app.allLibrariesLoaded)t(e);else var r=this.app.event("ViewerLibrariesDownloadedEvent").subscribe(this,function(){i.app.event("ViewerLibrariesDownloadedEvent").unsubscribe(r),t(e)})},C.prototype._registerCommands=function(){this.app.command("RegisterChartPointAdapter").register(this,this._executeRegisterAdapter),this.app.command("ClearChartHighlights").register(this,this._executeClearChartHighlights,this._canExecuteClearChartHighlights),this.app.command("HighlightChartFeatureSet").register(this,this._executeHighlightChartFeatureSet,this._canExecuteHighlightChartFeatureSet),this.app.command("RunChartFeatureActions").register(this,this._executeRunChartFeatureActions,this._isValidFeatureSet)},C.prototype._subscribeToEvents=function(){this.app.event("ChartPointMouseHoverBeginEvent").subscribe(this,this._chartPointMouseHoverBeginEventHandler)},C.prototype._executeRegisterAdapter=function(t){if(!t.adapter)throw new Error("Cannot register a null chart data adapter.");d.ChartPointAdapterRegistry.registerAdapter(t.adapter,t.sourceType)},C.prototype._executeClearChartHighlights=function(){this.app.highlightManager.clearHighlights(C.CHART_HIGHLIGHT_LAYER_NAME)},C.prototype._canExecuteClearChartHighlights=function(){return this.app.command("ClearHighlights").canExecute()&&this.app.command("SetHighlightFillColor").canExecute(void 0)&&this.app.command("SetHighlightBorderColor").canExecute(void 0)},C.prototype._executeHighlightChartFeatureSet=function(t){var e=this._convertParameterToFeatureSet(t);if(this._savedBorderColor=this.app.highlightManager.getHighlightBorderColor(),this._savedFillColor=this.app.highlightManager.getHighlightFillColor(),this._lookupTable.containsKey(e.uniqueId)){var i=this._lookupTable.get(e.uniqueId),r=o.ChartUtils.findSeriesViewModelFromChartPoint(i.chartPoint,i.chartViewModel.seriesViewModels.getItems());if(r){var a=C.DEFAULT_FILL_COLOR,n=C.DEFAULT_BORDER_COLOR;r.distinctColor?(a=r.distinctColor.toString(!0),n=s.ColorUtils.generateSelectionColor(r.distinctColor).toString(!0)):r.seriesDefinition&&r.seriesDefinition.color&&(a=r.seriesDefinition.color.toString(!0),n=s.ColorUtils.generateSelectionColor(r.seriesDefinition.color).toString(!0)),this.app.command("SetHighlightFillColor").execute(n,C.CHART_HIGHLIGHT_LAYER_NAME),this.app.command("SetHighlightBorderColor").execute(a,C.CHART_HIGHLIGHT_LAYER_NAME)}}this.app.command("ClearAndHighlightFeatures").execute({feature:e.features.get(),layer:C.CHART_HIGHLIGHT_LAYER_NAME})},C.prototype._canExecuteHighlightChartFeatureSet=function(t){var e=this._convertParameterToFeatureSet(t);return this.app.command("SetHighlightFillColor").canExecute(void 0)&&this.app.command("SetHighlightBorderColor").canExecute(void 0)&&this.app.command("HighlightFeatures").canExecute(e.features.get())},C.prototype._convertParameterToFeatureSet=function(t){var e=null;return t instanceof h.ChartPointEventArgs?e=o.ChartUtils.getFeaturesFromChartPoint(t.chartPoint):t instanceof i.FeatureSet&&(e=t),e},C.prototype._executeRunChartFeatureActions=function(t){var e,i=this,r=this._convertParameterToFeatureSet(t);if(t instanceof h.ChartPointEventArgs?e=t.chartViewModel:this._lookupTable.containsKey(r.uniqueId)&&(e=this._lookupTable.get(r.uniqueId).chartViewModel),e){var a=e.chartDefinition.area;if(a){if(a.actionZoom?this.app.command("ZoomToAllFeatures").execute(r.features.getItems()):a.actionPan&&this.app.command("PanToAllFeatures").execute(r.features.getItems()),a.actionFeatureDetails){var n=r.features.getAt(0);this.app.command("ClearChartHighlights").execute(),this.app.configuration.mobileMode&&$(".k-chart").trigger("mouseout"),setTimeout(function(){i.app.command("ShowFeatureDetails").execute(n)},0)}if(a.actionRunCommand){var o=a.commandName,s=a.commandParameter?a.commandParameter:null;o&&this.app.command(o).execute(s)}}}else this.app.trace.warning("Could not execute actions associated with clicking on a chart. Chart configuration not found.")},C.prototype._isValidFeatureSet=function(t){var e=this._convertParameterToFeatureSet(t);return null!==e&&e instanceof i.FeatureSet&&0<e.features.getLength()},C.prototype._chartPointMouseHoverBeginEventHandler=function(t){if(t){var e={chartPoint:t.chartPoint,chartViewModel:t.chartViewModel},i=o.ChartUtils.getFeaturesFromChartPoint(t.chartPoint);i&&this._lookupTable.set(i.uniqueId,e)}},C.prototype._loadAdapters=function(t){for(var e=0,i=t;e<i.length;e++){var r=i[e];r&&this._loadAdapter(r)}},C.prototype._loadAdapter=function(t){var e=dojo.getObject(t.type);if(e){var i=new e;"function"==typeof i.initialize&&i.initialize(t.configuration);var r={adapter:i,sourceType:t.source||"Field"};this.app.command("RegisterChartPointAdapter").execute(r)}},C.CHART_HIGHLIGHT_LAYER_NAME="Charts",C.DEFAULT_FILL_COLOR="#99ECEC3A",C.DEFAULT_BORDER_COLOR="#FFCCCC33",C);function C(t,e){var i=p.call(this,t,e)||this;return i.infrastructureLibraryId="Charting",i._behavior=null,i._savedBorderColor=null,i._savedFillColor=null,i._lookupTable=new a.Dictionary,i._subscribeToEvents(),i}e.ChartingModule=g})},"Mapping/modules/Charting/ChartingState":function(){define(["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})})},"Mapping/modules/Charting/ChartingView":function(){var r,p=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});define(["require","exports","geocortex/infrastructure/ui/components/SmartPanel/SmartPanelView","geocortex/framework-ui/Selector/SelectorViewModel","./ChartPaneViewModel","geocortex/framework/utils/TimeDelayedOperation","geocortex/framework/utils/utils","geocortex/framework/utils/ArrayUtils","geocortex/framework-ui/ViewContainer/ViewContainerView","geocortex/charting/infrastructure/Enums"],function(t,e,i,a,n,r,o,s,h,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c,u=(c=i.SmartPanelView,p(d,c),d.prototype._registerCommandsAndEvents=function(){this.app.command("ShowChartingView").register(this,this._executeShowChartingView,this._canExecuteShowChartingView),this.app.command("DisplayChartById").register(this,this.addChartById,this._canExecuteDisplayChartById),this.app.command("RemoveChartById").register(this,this.destroyChartById,this._canExecuteRemoveChartById),this.app.command("ClearCharts").register(this,this.clearCharts,this._canExecuteClearCharts),this.app.event("ApplicationResizedEvent").subscribe(this,this.handleApplicationResizedEvent),this.app.event("ViewDimensionsChangedEvent").subscribe(this,this.handleViewDimensionsChangedEvent),this.app.event("ViewHostedEvent").subscribe(this,this.handleViewHostedEvent),this.app.event("ViewUnhostedEvent").subscribe(this,this.handleViewUnhostedEvent),this.app.event("ViewActivatedEvent").subscribe(this,this.handleViewActivatedEvent),this.app.event("ViewDeactivatedEvent").subscribe(this,this.handleViewDeactivatedEvent),this.app.event("ViewContainerActivatedEvent").subscribe(this,this.handleViewContainerActivatedEvent),this.app.command("_ExportChartingState").register(this,this._exportState),this.app.command("_ApplyChartingState").register(this,this._applyState)},d.prototype._enableOrDisableShowChartingView=function(t){this.app.command("ShowChartingView").raiseCanExecuteChanged()},d.prototype.resize=function(){c.prototype.resize.call(this),o.isNullOrUndefined(this.scrollRegionElement)||dojo.style(this.scrollRegionElement,"top","")},d.prototype.activated=function(){c.prototype.activated.call(this),this.viewModel&&(this.viewModel.expanded.set(!0),!1===this.isActive&&(this._delayedResizeHandle=this._delayedResizeContainer())),this.isActive=!0},d.prototype.deactivated=function(){c.prototype.deactivated.call(this),this.viewModel&&this.viewModel.expanded.set(!1),this.isActive=!1,this.app.command("ClearChartHighlights").execute()},d.prototype.resolveWidget=function(t,e,i){var r=this;return"ChartSelector"===t?(this._selectorView=this.app.viewManager.createView({typeName:"geocortex.framework.ui.Selector.SelectorView",markupResource:"Framework.UI/geocortex/framework/ui/Selector/SelectorView.html",isVisible:!0,title:this.app.getResource(this.libraryId,"language-feature-charts"),libraryId:"Framework.UI"}),this.selector=new a.SelectorViewModel(this.app,this.libraryId,!!this.app.configuration.mobileMode,!!this.app.configuration.mobileMode),this.selector.setCollection(this.viewModel.charts,"displayName",null),this.selector.selectorText.set(this.app.getResource(this.libraryId,"language-charting-selector-text")),this.selector.noItemsText.set(this.app.getResource(this.libraryId,"language-charting-no-items")),this.selector.onSelectItem=function(t){return r.handleSelectChart(t.item)},this.selector.onUnselectItem=function(t){return r.handleUnSelectChart(t.item)},this._selectorView.attach(this.selector),this._selectorView):c.prototype.resolveWidget.call(this,t,e,null)},d.prototype.addDefaultCharts=function(){if(!(0<this.viewModel.displayedCharts.getLength()))for(var t=0;t<this.viewModel.defaultCharts.getLength();t++){var e=this.viewModel.defaultCharts.getAt(t);this.addChart(e)}},d.prototype.addChartById=function(t){var e=this.viewModel.findChartById(t);this.addChart(e)},d.prototype.addChart=function(t){return t&&this.canAddChart(t)?(!1===this.isActive&&this.activateContainer(),this.viewModel.displayedCharts.addItem(t),this.app.command("ClearCharts").raiseCanExecuteChanged(),this.selector&&this.selector.hasItemViewModelFor(t)&&this.selector.selectItem(t),this.viewModel.applyChartOptions(t),t.chartPointCollection.get(),this._hostChartInPane(t)):null},d.prototype.canAddChart=function(t){return!(!t||!this.viewModel||this.viewModel.displayedCharts.contains(t))},d.prototype.destroyChartById=function(t){var e=this.viewModel.findDisplayedChartById(t);this.destroyChart(e)},d.prototype.destroyChart=function(t){if(!t||!this.canDestroyChart(t))return!1;this.viewModel.displayedCharts.removeItem(t),this.app.command("ClearCharts").raiseCanExecuteChanged(),this.selector&&this.selector.hasItemViewModelFor(t)&&this.selector.unselectItem(t),t.destroyChartPoints(),this.viewModel.cleanup();var e=this.findChartPaneForViewModel(t);return e?(this.app.command("DestroyView").execute(e.id),!0):(this.app.trace.warning("Could not destroy chart '{0}': Chart not found.".format(t.chartId.get())),!1)},d.prototype.canDestroyChart=function(t){return!(!t||!this.viewModel)&&this.viewModel.displayedCharts.contains(t)},d.prototype.clearCharts=function(){for(var t=this.viewModel.displayedCharts.getLength();t--;){var e=this.viewModel.displayedCharts.getAt(t);this.destroyChart(e)}},d.prototype.handleSelectChart=function(t){this.addChart(t)},d.prototype.handleUnSelectChart=function(t){this.destroyChart(t)},d.prototype.handleClickClose=function(t,e,i){this.deactivateContainer()},d.prototype.handleViewHostedEvent=function(t){this.viewModel&&t.region.name===this.viewModel.regionName.get()&&!s.contains(this._panes,t.view)&&this._panes.push(t.view)},d.prototype.handleViewUnhostedEvent=function(t){this.viewModel&&t.region.name===this.viewModel.regionName.get()&&s.contains(this._panes,t.view)&&(s.removeItem(this._panes,t.view),s.removeItem(this._activePanes,t.view))},d.prototype.handleViewActivatedEvent=function(t){if(t&&this.viewModel){var e=this.app.viewManager.getRegionForViewId(t.id);if(e&&e.name===this.viewModel.regionName.get()){var i=s.contains(this._panes,t),r=s.contains(this._activePanes,t);i&&!r&&(this._activePanes.push(t),this._resizeContainer())}}},d.prototype.handleViewDeactivatedEvent=function(t){if(t&&this.viewModel){var e=this.app.viewManager.getRegionForViewId(t.id);if(e&&e.name===this.viewModel.regionName.get()){var i=s.contains(this._panes,t),r=s.contains(this._activePanes,t);i&&r&&(s.removeItem(this._activePanes,t),this._resizeContainer())}}},d.prototype.handleViewDimensionsChangedEvent=function(t){"ShellView"===t.view.id&&this._resizeContainer()},d.prototype.handleApplicationResizedEvent=function(){this._delayedResizeContainer()},d.prototype.handleViewContainerActivatedEvent=function(t){this.isActive&&this._isViewHostedInContainer(t)&&(this._cancelDelayedResizeContainer(),this._delayedResizeContainer())},d.prototype._isViewHostedInContainer=function(t){if(t instanceof h.ViewContainerView){var e=t.viewModel.regionName.get(),i=this.app.viewManager.getRegionForViewId(this.id);if(i&&i.name===e)return!0}return!1},d.prototype._cancelDelayedResizeContainer=function(){this._delayedResizeHandle&&this._delayedResizeHandle.stop(),this._delayedResizeHandle=null},d.prototype._delayedResizeContainer=function(){return this._delayedResizeHandle=new r.TimeDelayedAction(0,this._resizeContainer,this),this._delayedResizeHandle.start(),this._delayedResizeHandle},d.prototype._resizeContainer=function(t){if(void 0===t&&(t=!1),this._cancelDelayedResizeContainer(),this.viewModel&&!1!==this.isActive&&!1!==this._active){var e=-1<this.viewModel.regionType.get().indexOf("Stack"),i=this.scrollRegionElement,r=$(".view.active .chart-pane",i);if(e&&0!==r.length){this.headerElement.clientHeight;for(var a=i.clientWidth,n=i.clientHeight,o=Math.floor(a/r.length-2),s=n,h=0,l=this._panes;h<l.length;h++){var c=l[h];c&&c.viewModel&&(c.viewModel.setSize(o,s),c.refresh())}}}},d.prototype.findChartPaneForViewModel=function(e){return s.firstOrDefault(this._panes,function(t){return t&&t.viewModel&&t.viewModel.currentChart.get()===e})},d.prototype._hostChartInPane=function(t){var e=this,i=new n.ChartPaneViewModel(this.app,this.libraryId);i.id="ChartPaneViewModel-"+o.alphaNumericToken(),i.currentChart.set(t),i.responsiveLegendPositioning.set(!!this.app.configuration.mobileMode),i.initialize({title:t.chartDefinition.displayName,infrastructureLibraryId:this.viewModel.infrastructureLibraryId,headerIsVisible:this.viewModel.headerIsVisible.get(),showXButton:this.viewModel.showXButton.get()});var r=this.app.viewManager.createView({typeName:"geocortex.essentialsHtmlViewer.mapping.modules.charting.ChartPane",markupResource:"Mapping/modules/Charting/ChartPane.html",libraryId:this.libraryId||"Mapping",title:this.app.getResource(this.libraryId,"language-feature-charts"),regionName:this.viewModel.regionName.get(),isVisible:!0,viewModel:i});return r.onClose=function(t){return e.destroyChart(t)},r},d.prototype._executeShowChartingView=function(){!1===this.isActive&&this.activateContainer(),this.addDefaultCharts(),this.viewModel.updateDisplayedCharts()},d.prototype._canExecuteShowChartingView=function(){if(this.viewModel&&this.viewModel.featureSetCollection.get())for(var t=this.viewModel.featureSetCollection.get().featureSets.getLength();t--;){var e=this.viewModel.featureSetCollection.get().featureSets.getAt(t);if(e.features&&e.layer&&e.layer.charts&&e.layer.charts.some(function(t){return t.chartDefinition.visible&&t.chartFeatureType===l.ChartFeatureType.MultiFeature}))return!0}return!1},d.prototype._canExecuteDisplayChartById=function(t){return this.viewModel&&this.canAddChart(this.viewModel.findChartById(t))},d.prototype._canExecuteRemoveChartById=function(t){return this.viewModel&&this.canDestroyChart(this.viewModel.findDisplayedChartById(t))},d.prototype._canExecuteClearCharts=function(){return this.viewModel&&0<this.viewModel.displayedCharts.getLength()},d.prototype._exportState=function(t){t.results=this.app.project.convert.fromGcxFeatureSetCollection(this.viewModel.featureSetCollection.get()),t.displayedCharts=this.viewModel.displayedCharts.get().map(function(t){return t.chartId.get()})},d.prototype._applyState=function(e){var i=this;e.stateAppliedPromises.push(this.app.project.convert.toGcxFeatureSetCollection(e.state.results).then(function(t){i.viewModel.featureSetCollection.set(t),i.clearCharts(),(e.state.displayedCharts||[]).forEach(function(t){i.addChartById(t)})}))},d);function d(t,e){var i=c.call(this,t,e)||this;return i._delayedResizeHandle=null,i._panes=[],i._activePanes=[],i._registerCommandsAndEvents(),i}e.ChartingView=u})},"Mapping/modules/Charting/ChartingViewModel":function(){var r,s=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});define(["require","exports","geocortex/framework/observables","geocortex/infrastructure/ui/components/SmartPanel/SmartPanelViewModel","geocortex/framework/utils/ArrayUtils","geocortex/charting/infrastructure/Enums","geocortex/charting/infrastructure/ChartUtils"],function(t,e,r,i,l,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,n=(a=i.SmartPanelViewModel,s(o,a),o.prototype.initialize=function(t){if(a.prototype.initialize.call(this,t),t){t.hasOwnProperty("chartingEnabled")&&(this.enabled=!!t.chartingEnabled),t.hasOwnProperty("infrastructureLibraryId")&&(this.infrastructureLibraryId=t.infrastructureLibraryId),t.hasOwnProperty("headerIsVisible")&&this.headerIsVisible.set(!!t.headerIsVisible),t.hasOwnProperty("showXButton")&&this.showXButton.set(!!t.showXButton);var e=t.chartConfiguration;e&&(e.hasOwnProperty("chartWidth")&&(this._chartConfig.chartWidth=parseInt(e.chartWidth,10)),e.hasOwnProperty("chartHeight")&&(this._chartConfig.chartHeight=parseInt(e.chartHeight,10)),e.hasOwnProperty("renderAs")&&(this._chartConfig.renderAs=e.renderAs),e.hasOwnProperty("animationsEnabled")&&(this._chartConfig.animationsEnabled=!!e.animationsEnabled),e.hasOwnProperty("gradientsEnabled")&&(this._chartConfig.gradientsEnabled=!!e.gradientsEnabled),e.hasOwnProperty("interactiveLegendEnabled")&&(this._chartConfig.interactiveLegendEnabled=!!e.interactiveLegendEnabled),e.hasOwnProperty("pieStartAngle")&&(this._chartConfig.pieStartAngle=e.pieStartAngle))}this._registerCommands(),this._subscribeEvents()},o.prototype.refresh=function(){this.featureSetCollection.pulse()},o.prototype.getChartFactory=function(){return null===this._chartFactory&&(this._chartFactory=this.app.getFrameworkObjectById("ChartViewModelFactory")),this._chartFactory},o.prototype.doWhenChartGenerationCompleted=function(e){var i=this;if(e)if(this.isGenerated.get())e(this);else var r=this.isGenerated.bind(this,function(t){t&&(i.isGenerated.unbind(r),e(i))})},o.prototype.applyChartOptions=function(t){t&&t.setOptions(this._chartConfig)},o.prototype.findChartById=function(e){return l.firstOrDefault(this.charts.getItems(),function(t){return t.chartDefinition.id===e})},o.prototype.findDisplayedChartById=function(e){return l.firstOrDefault(this.displayedCharts.getItems(),function(t){return t.chartDefinition.id===e})},o.prototype.createChart=function(t){var e=this.getChartFactory().createInstance(t.chartDefinition,t.chartFeatureType);return this.applyChartOptions(e),e},o.prototype.chartPointCollectionLoadDelegate=function(t,e){var i=this;return function(){return i.getChartFactory()?i.getChartFactory().createChartPointCollection(t.chartDefinition,e,t.chartFeatureType):null}},o.prototype.initializeCharts=function(t){var e=this;if(t&&!t.features.isEmpty()&&t.layer&&t.layer.charts&&0!==t.layer.charts.length){this.isGenerated.set(!1);var i=this.charts.getItems().map(function(t){return t.chartDefinition.id}),r=this._createCharts(t.layer,i);if(this.charts.addItems(r),this.cleanup(),0!==this.charts.getLength()){for(var a=t.layer.charts.filter(function(t){return t.chartDefinition.visible&&t.defaultChart&&t.chartFeatureType===c.ChartFeatureType.MultiFeature}),n=function(e){var t=l.firstOrDefault(o.charts.getItems(),function(t){return t.chartDefinition.id===e.id});t&&!o.defaultCharts.contains(t)&&o.defaultCharts.addItem(t)},o=this,s=0,h=a;s<h.length;s++)n(h[s]);0===this.defaultCharts.getLength()&&this.defaultCharts.addItem(this.charts.getAt(0)),t.layer.charts&&t.layer.charts.some(function(t){return u.ChartUtils.containsDataLinks(t.chartDefinition)})?t.doWhenDataLinkingCompleted(function(t){e._buildChartPointCollections(t),e.isGenerated.set(!0)}):(this._buildChartPointCollections(t),this.isGenerated.set(!0))}else this.defaultCharts.clear()}},o.prototype.cleanup=function(){if(this.featureSetCollection.get())for(var t=this.featureSetCollection.get().featureSets.getItems().map(function(t){return t.layer}),e=this.charts.getLength();e--;){var i=this.charts.getAt(e);this.displayedCharts.contains(i)||null!=t&&l.contains(t,i.tag)||(this.defaultCharts.removeItem(i),this.charts.removeAt(e))}},o.prototype.updateDisplayedCharts=function(){this.displayedCharts.get().forEach(function(t){t.chartPointCollection.get()})},o.prototype._registerCommands=function(){this.app.command("SetCollectionOfInterest").register(this,this._executeChangeCollectionOfInterest)},o.prototype._subscribeEvents=function(){this._disconnectAppEvents(),this._connectAppEvent("FSMCollectionChangedEvent",this._fsmCollectionChangedEventHandler),this._connectAppEvent("FSMCollectionRemovedEvent",this._fsmCollectionRemovedEventHandler)},o.prototype._handleCollectionChanged=function(t){if(this.cleanup(),this._disconnectFeatureSetChanges(t),t&&0<t.featureSets.getLength()){for(var e=0;e<t.featureSets.getLength();e++)this.initializeCharts(t.featureSets.getAt(e));this._connectFeatureSetChanges(t)}},o.prototype._fsmCollectionChangedEventHandler=function(t){var e=this;this.featureSetCollection.get()&&t&&t.featureSetCollection&&t.featureSetCollection.id===this.featureSetCollection.get().id&&(!t.collectionChangedEventArgs||"clear"!==t.collectionChangedEventArgs.type&&"remove"!==t.collectionChangedEventArgs.type?this.featureSetCollection.set(t.featureSetCollection):setTimeout(function(){e.featureSetCollection.set(t.featureSetCollection)},0))},o.prototype._featureSetChanged=function(t,e){},o.prototype._fsmCollectionRemovedEventHandler=function(t){this.featureSetCollection.get()&&t&&t.featureSetCollectionId&&t.featureSetCollectionId===this.featureSetCollection.get().id&&(this._disconnectFeatureSetChanges(),this.featureSetCollection.set(null))},o.prototype._executeChangeCollectionOfInterest=function(t){var e=this.app.featureSetManager.getCollectionById(t);e&&e!==this.featureSetCollection.get()&&(this._disconnectFeatureSetChanges(),this.featureSetCollection.set(e))},o.prototype._createCharts=function(t,e){void 0===e&&(e=null);var i=[];if(t&&t.charts)for(var r=0,a=t.charts;r<a.length;r++){var n=a[r];if(n&&n.chartDefinition.id&&n.chartDefinition.visible&&n.chartFeatureType===c.ChartFeatureType.MultiFeature&&!(e&&0<=e.indexOf(n.chartDefinition.id))){var o=this.createChart(n);o.tag=t,i.push(o)}}return i},o.prototype._buildChartPointCollections=function(t){for(var e=t.layer.charts.map(function(t){return t.id}),i=0;i<this.charts.getLength();i++){var r=this.charts.getAt(i);if(r&&e&&!(e.indexOf(r.chartDefinition.id)<0)){var a=this.chartPointCollectionLoadDelegate(r,t),n=r.chartPointCollection;n.clear(),n.delegateGetter=a,n.cacheDelegateResults=!0}}this.expanded.get()&&this.updateDisplayedCharts()},o.prototype._connectAppEvent=function(t,e){var i=this.app.event(t).subscribe(this,e);this._handles.appEvents.push({eventName:t,token:i})},o.prototype._disconnectAppEvents=function(){if(0<this._handles.appEvents.length)for(var t=0,e=this._handles.appEvents;t<e.length;t++){var i=e[t];this.app.event(i.eventName).unsubscribe(i.token)}this._handles.appEvents.length=0},o.prototype._connectFeatureSetChanges=function(r){for(var a=this,t=function(t){var e=r.featureSets.getAt(t);if(!n._handles.fsEvents.some(function(t){return t.collection===e.features})){var i=e.features.bind(n,function(t){return a._featureSetChanged(r.id,t)});n._handles.fsEvents.push({collection:e.features,token:i})}},n=this,e=0;e<r.featureSets.getLength();e++)t(e)},o.prototype._disconnectFeatureSetChanges=function(t){for(var i,r=t?t.featureSets.getRange(0):null,e=function(t){var e=a._handles.fsEvents[t];!e.collection||r&&r.some(function(t){return t.features===e.collection})||(e.collection.unbind(e.token),a._handles.fsEvents.splice(t,1),t--),i=t},a=this,n=0;n<this._handles.fsEvents.length;n++)e(n),n=i},o);function o(t,e){var i=a.call(this,t,e)||this;return i._handles={appEvents:[],mapEvents:[],fsEvents:[]},i._chartConfig={animationsEnabled:!0,gradientsEnabled:!1,interactiveLegendEnabled:!1,pieStartAngle:180,renderAs:"svg",chartWidth:0,chartHeight:0},i._chartFactory=null,i.enabled=!0,i.featureSetCollection=new r.Observable,i.charts=new r.ObservableCollection,i.defaultCharts=new r.ObservableCollection,i.displayedCharts=new r.ObservableCollection,i.expanded=new r.Observable(!1),i.infrastructureLibraryId="Charting",i.headerIsVisible=new r.Observable(!0),i.showXButton=new r.Observable(!0),i.isGenerated=new r.Observable(!1),i.featureSetCollection.bind(i,i._handleCollectionChanged),i}e.ChartingViewModel=n})},"Mapping/modules/Charting/ChartOptions":function(){define(["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})})},"Mapping/modules/Charting/ChartPane":function(){var r,s=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});define(["require","exports","geocortex/framework/ui/ViewBase","geocortex/charting/infrastructure/ChartUtils"],function(t,e,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=i.ViewBase,s(o,r),o.prototype.attach=function(t){var e=this;r.prototype.attach.call(this,t),this.viewModel&&this.containerElement&&(this.auto(this.viewModel.width,this,function(t){return $(e.containerElement).width(t)}),this.auto(this.viewModel.height,this,function(t){return $(e.containerElement).height(t)}),this._chartBBox=this.containerElement.getBoundingClientRect())},o.prototype.resolveWidget=function(t,e,i){return e&&"ChartWidget"===t?(this._chartView=this.app.viewManager.createView({markupResource:"geocortex/charting/Chart.html",typeName:"geocortex.charting.Chart",isVisible:!0,libraryId:this.viewModel.infrastructureLibraryId||"Charting"}),this.viewModel&&this.viewModel.responsiveLegendPositioning.get()&&this._overrideLegendPosition(e),this._chartView.attach(e),this.viewModel.showBusyIndicator.sync(this._chartView.isBusy),this._chartView):r.prototype.resolveWidget.call(this,t,e)},o.prototype.refresh=function(){if(this.viewModel&&this.viewModel.responsiveLegendPositioning.get()&&this.viewModel.currentChart.get()&&this._overrideLegendPosition(this.viewModel.currentChart.get()),this._chartView){var t=this.containerElement.getBoundingClientRect();!this._chartBBox||t.width===this._chartBBox.width&&t.height===this._chartBBox.height||this._chartView.updateLayout(),this._chartBBox=t}},o.prototype.destroy=function(){r.prototype.destroy.call(this),this._chartView&&this._chartView.destroy(),this.viewModel&&(this.viewModel.showBusyIndicator.removeSync(),this.viewModel.destroy()),this._chartView=null,this.viewModel=null,this.root=null,this.app=null,this._isDestroyed=!0},o.prototype.displayChart=function(t){this.viewModel.currentChart.set(t);var e=this._chartView;e&&(e.destroyBindings(),e.attach(t),this.app.command("ActivateView").execute(e.id))},o.prototype.onClose=function(t){},o.prototype.handleClickClose=function(t,e,i){this.viewModel&&this.onClose&&this.onClose(this.viewModel.currentChart.get()),this._isDestroyed||this.app.command("DestroyView").execute(this.id)},o.prototype._overrideLegendPosition=function(t){if(this.root&&t){var e=this.app.configuration.mobileMode?$(window).width():$(this.root).width(),i=(this.app.configuration.mobileMode?$(window).height():$(this.root).height())<e,r=a.ChartUtils.getResponsiveLegendPosition(t,i);t.legendPosition.set(r)}},o);function o(t,e){var i=r.call(this,t,e)||this;return i._chartView=null,i._isDestroyed=!1,i._chartBBox=null,i}e.ChartPane=n})},"Mapping/modules/Charting/ChartPaneViewModel":function(){var r,s=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables"],function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,n=(a=i.ViewModelBase,s(o,a),o.prototype.initialize=function(t){a.prototype.initialize.call(this,t),t&&(t.hasOwnProperty("infrastructureLibraryId")&&(this.infrastructureLibraryId=t.infrastructureLibraryId),t.hasOwnProperty("headerIsVisible")&&this.headerIsVisible.set(!!t.headerIsVisible),t.hasOwnProperty("showXButton")&&this.showXButton.set(!!t.showXButton))},o.prototype.setSize=function(t,e){isNaN(t)||isNaN(e)||(this.width.set(t),this.height.set(e))},o.prototype.onDestroy=function(){a.prototype.onDestroy.call(this),this.currentChart.set(null),this.currentChart=null,this.app=null},o.prototype._handleCurrentChartChanged=function(t){this.title.set(t.displayName.get()),this.caption.set(t.caption.get())},o);function o(t,e){var i=a.call(this,t,e)||this;return i.infrastructureLibraryId="Charting",i.title=new r.Observable(""),i.caption=new r.Observable(""),i.headerIsVisible=new r.Observable(!0),i.showXButton=new r.Observable(!0),i.showBusyIndicator=new r.Observable(!1),i.responsiveLegendPositioning=new r.Observable(!1),i.currentChart=new r.Observable(null),i.autoSize=new r.Observable(!1),i.height=new r.Observable(0),i.width=new r.Observable(0),i.currentChart.bind(i,i._handleCurrentChartChanged),i}e.ChartPaneViewModel=n})},"Mapping/modules/Charting/ChartPointCollectionFeatureAggregator":function(){var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});define(["require","exports","geocortex/charting/infrastructure/aggregation/ChartPointCollectionAggregator","geocortex/infrastructure/Feature","geocortex/infrastructure/FeatureSet"],function(t,e,i,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d,r=(d=i.ChartPointCollectionAggregator,n(a,d),a.prototype.attachAttributes=function(t,e){if(d.prototype.attachAttributes.call(this,t,e),e&&e.items&&0<e.items.length){for(var i=this._getFeatureFromChartPoint(e.items[0]),r=i?i.layer:null,a=[],n=0,o=e.items;n<o.length;n++){var s=o[n],h=this._getFeatureFromChartPoint(s);null!==h&&h instanceof c.Feature&&a.push(h)}var l=new u.FeatureSet({layer:r});l.features.addItems(a),t.attributes=t.attributes||{},t.attributes.features=l}},a.prototype._getFeatureFromChartPoint=function(t){return t&&t.attributes&&t.attributes.hasOwnProperty("feature")?t.attributes.feature:null},a);function a(){return null!==d&&d.apply(this,arguments)||this}e.ChartPointCollectionFeatureAggregator=r})},"Mapping/modules/Charting/ChartUtils":function(){define(["require","exports","geocortex/infrastructure/Feature","geocortex/framework/utils/ArrayUtils","geocortex/essentials/utilities/SiteResourceIdComparer","geocortex/infrastructure/FeatureSet","geocortex/charting/infrastructure/ChartUtils"],function(t,e,r,a,n,o,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=(h.findDataLinkingResultById=function(t,e){if(t&&t.layer&&t.dataLinkingResults){var i=n.SiteResourceIdComparer.lookUp(t.layer.dataLinks,e);if(i)return a.firstOrDefault(t.dataLinkingResults.getItems(),function(t){return null!=t&&t.dataLink.get().id===i.id})}return null},h.getFeaturesFromChartPoint=function(t){var e=null;if(t&&t.attributes)if(t.attributes.hasOwnProperty("feature")){var i=t.attributes.feature;null!==i&&i instanceof r.Feature&&(e=new o.FeatureSet({layer:i.layer})).features.addItem(i)}else t.attributes.hasOwnProperty("features")&&(e=t.attributes.features);return e},h.createCompareFunction=function(a){return function(t,e){var i=a(t),r=a(e);return i===r?0:r<i?1:-1}},h.applyChartOptions=function(t,e){t&&e&&t.setOptions(e)},h.tryGetFieldValue=i.ChartUtils.tryGetFieldValue,h.containsDataLinks=i.ChartUtils.containsDataLinks,h.findSeriesViewModelFromChartPoint=i.ChartUtils.findSeriesViewModelFromChartPoint,h);function h(){}e.ChartUtils=s})},"Mapping/modules/Charting/DataLinkChartPointAdapter":function(){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});define(["require","exports","geocortex/charting/infrastructure/ChartPointAdapterBase","geocortex/charting/infrastructure/ChartPointCollection","geocortex/infrastructure/FeatureSet","./ChartUtils","geocortex/charting/infrastructure/Enums","geocortex/infrastructure/Feature"],function(t,e,i,c,u,d,p,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,r=(a=i.ChartPointAdapterBase,o(n,a),n.prototype.fill=function(t,e,i){if(i&&i.chartCategory&&i.chartSeries&&e&&e instanceof u.FeatureSet&&0!==e.features.getLength()){t=t||new c.ChartPointCollection;var r=e.features.getAt(0),a=d.ChartUtils.findDataLinkingResultById(r,i.chartSeries.field.dataLinkId);if(a&&!a.dataLink.get().isOneToOne)switch(i.chartFeatureType){case p.ChartFeatureType.SingleFeature:this._fillFromDataLink(t,r,a,i);break;case p.ChartFeatureType.MultiFeature:for(var n=0;n<e.features.getLength();n++){var o=e.features.getAt(n);(a=d.ChartUtils.findDataLinkingResultById(o,i.chartSeries.field.dataLinkId))&&this._fillFromDataLink(t,o,a,i)}}else for(var s=0;s<e.features.getLength();s++){var h=e.features.getAt(s),l=this.createChartPoint(h,i,null);l&&t.items.push(l)}t.items.length}},n.prototype.createChartPoint=function(t,e,i){if(void 0===i&&(i=null),!e||!e.chartCategory||!e.chartSeries)return null;null!=e.chartType&&void 0!==e.chartType||(e.chartType=p.ChartType.Linear);var r=this.getFieldValue(e.chartSeries.field,t,i),a=null;switch(e.chartType){case p.ChartType.Linear:a=d.ChartUtils.tryGetFieldValue(e.chartCategory.field,t,i);break;case p.ChartType.Pie:}return this.createChartPointCore(t,e.chartSeries.title,r,a,e,i)},n.prototype.getFieldValue=function(t,e,i){void 0===i&&(i=null);var r=e,a=i?i.dataLink:null,n=i?i.dataLinkRow:null;if(!(r&&r instanceof h.Feature))return null;if(!t||t.sourceType!==p.ChartFieldSourceType.DataLink)return null;if(a||(a=d.ChartUtils.findDataLinkingResultById(r,t.dataLinkId),n=null),!a||!a.table.get())return null;var o=a.table.get();if(o&&0<o.rows.length){n=n||o.rows[0];var s=o.columns.indexOf(t.name);if(-1<s)return n.row[s]}return null},n.prototype._fillFromDataLink=function(t,e,i,r){if(e&&i){t=t||new c.ChartPointCollection;var a=i.table.get();if(a&&0!==a.columns.length)for(var n=0,o=a.rows;n<o.length;n++){var s={dataLink:i,dataLinkRow:o[n]},h=this.createChartPoint(e,r,s);h&&t.items.push(h)}}},n.prototype.attachAttributes=function(t,e,i,r){void 0===r&&(r=null),a.prototype.attachAttributes.call(this,t,e,i,r),t&&e&&e instanceof h.Feature&&(t.attributes=t.attributes||{},t.attributes.feature=e)},n);function n(){return null!==a&&a.apply(this,arguments)||this}e.DataLinkChartPointAdapter=r})},"Mapping/modules/Charting/FeatureChartPointAdapter":function(){var r,u=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});define(["require","exports","geocortex/charting/infrastructure/ChartPointCollection","geocortex/charting/infrastructure/ChartPointAdapterBase","geocortex/infrastructure/FeatureSet","geocortex/charting/infrastructure/Enums","geocortex/charting/infrastructure/ChartUtils","geocortex/infrastructure/Feature"],function(t,e,o,i,s,h,n,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,r=(a=i.ChartPointAdapterBase,u(c,a),c.prototype.fill=function(t,e,i){if(i&&i.chartCategory&&i.chartSeries&&e&&e instanceof s.FeatureSet){t=t||new o.ChartPointCollection;for(var r=0;r<e.features.getLength();r++){var a=e.features.getAt(r),n=this.createChartPoint(a,i);n&&t.items.push(n)}t.items.length}},c.prototype.createChartPoint=function(t,e,i){if(void 0===i&&(i=null),!e||!e.chartCategory||!e.chartSeries)return null;null!=e.chartType&&void 0!==e.chartType||(e.chartType=h.ChartType.Linear);var r=this.getFieldValue(e.chartSeries.field,t,i),a=null;switch(e.chartType){case h.ChartType.Linear:a=n.ChartUtils.tryGetFieldValue(e.chartCategory.field,t,i);break;case h.ChartType.Pie:}return this.createChartPointCore(t,e.chartSeries.title,r,a,e,i)},c.prototype.getFieldValue=function(t,e,i){void 0===i&&(i=null);var r,a=e;if(!(a&&a instanceof l.Feature))return null;if(!t||t.sourceType!==h.ChartFieldSourceType.Field)return null;if(a.attributes)for(var n=0;n<a.attributes.getLength();n++){var o=a.attributes.getAt(n);if(o.name.get()===t.name){r=o;break}}if(r)return this._normalizeAttribute(r.value.get(),r.type.get());var s=a.esriFeature.get();return s&&s.attributes?s.attributes[t.name]:null},c.prototype.attachAttributes=function(t,e,i,r){void 0===r&&(r=null),a.prototype.attachAttributes.call(this,t,e,i,r),t&&e&&e instanceof l.Feature&&(t.attributes=t.attributes||{},t.attributes.feature=e)},c.prototype._normalizeAttribute=function(t,e){if(e)if(e.toLowerCase()==="DateTime".toLowerCase()){if("number"==typeof t){var i=new Date(t);return"Invalid Date"===i&&(i=new Date(parseInt(t.toString(),10))),i}if("string"==typeof t){var r=Date.parse(t);if("number"==typeof r)return new Date(r)}}else{if(-1<["single","double","float"].indexOf(e.toLowerCase()))return parseFloat(t);if(-1<["int16","int32","short"].indexOf(e.toLowerCase()))return parseInt(t,10)}return t},c);function c(){return null!==a&&a.apply(this,arguments)||this}e.FeatureChartPointAdapter=r})},"Mapping/modules/Charting/FormatProvider":function(){define(["require","exports","geocortex/charting/globalization/KendoFormatProvider","geocortex/essentials/utilities/TimeZoneUtils","geocortex/infrastructure/FormatUtils"],function(t,e,i,a,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(o.prototype.toString=function(t,e,i,r){return t instanceof Date?(t=r?a.correctDatesForDisplayInDisplayTimeZone(t,i,r):a.correctDatesForDisplayInLocalTime(t,i),n.formatDate(t,e)):"number"==typeof t?n.formatNumber(t,e):this._kendoFormatProvider.toString(t,e)},o);function o(){this._kendoFormatProvider=new i.KendoFormatProvider}e.FormatProvider=r})},"Mapping/modules/Charting/SingleFeatureChartView":function(){var r,l=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});define(["require","exports","geocortex/framework/ui/ViewBase","geocortex/framework-ui/Selector/SelectorViewModel","./ChartPaneViewModel","geocortex/framework/utils/utils"],function(t,e,i,a,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,r=(s=i.ViewBase,l(h,s),h.prototype.attach=function(t){var e=this;s.prototype.attach.call(this,t),t&&(t.currentChart.bind(this,this._onCurrentChartChanged),t.onNewFeatureInitialized=function(){return e._onNewFeatureInitialized()})},h.prototype.activated=function(){s.prototype.activated.call(this),this._refreshChartPane()},h.prototype.resolveWidget=function(t,e,i){var r=this;return"ChartSelector"===t?(this._selectorView=this.app.viewManager.createView({typeName:"geocortex.framework.ui.Selector.SelectorView",markupResource:"Framework.UI/geocortex/framework/ui/Selector/SelectorView.html",isVisible:!0,libraryId:"Framework.UI"}),this.selector=new a.SelectorViewModel(this.app,this.libraryId,!0),this.selector.showNativeSelect.get()&&(this.selector.dummyItemText=this.app.getResource(this.libraryId,"language-feature-no-chart")),this.selector.setCollection(this.viewModel.charts,"displayName",null),this.selector.selectorText.set(this.app.getResource(this.libraryId,"language-charting-selector-text")),this.selector.noItemsText.set(this.app.getResource(this.libraryId,"language-charting-no-items")),this.selector.onSelectItem=function(t){return r.handleSelectChart(t.item)},this.selector.onUnselectItem=function(t){return r.handleUnSelectChart(t.item)},this._selectorView.attach(this.selector),this._selectorView):e&&"ChartPaneWidget"===t?(this._chartPane=this._hostChartInPane(e),this._chartPane):s.prototype.resolveWidget.call(this,t,e)},h.prototype._hostChartInPane=function(t){var e=this,i=new n.ChartPaneViewModel(this.app,this.libraryId);i.id="ChartPaneViewModel-"+o.alphaNumericToken(),i.responsiveLegendPositioning.set(!0),i.currentChart.set(t),i.initialize({title:t.chartDefinition.displayName,infrastructureLibraryId:this.viewModel.infrastructureLibraryId,headerIsVisible:!0,showXButton:!0});var r=this.app.viewManager.createView({typeName:"geocortex.essentialsHtmlViewer.mapping.modules.charting.ChartPane",markupResource:"Mapping/modules/Charting/ChartPane.html",libraryId:this.libraryId||"Mapping",isVisible:!0,viewModel:i});return r.onClose=function(t){return e.destroyChart(t)},r},h.prototype.handleSelectChart=function(t){this.addChart(t)},h.prototype.handleUnSelectChart=function(t){this.destroyChart(t)},h.prototype.handleApplicationResizedEvent=function(){this.viewModel&&this._chartPane&&this._chartPane.refresh()},h.prototype.addChart=function(t){return t&&this.viewModel.currentChart.get()!==t?(t.chartPointCollection.get(),this.viewModel.currentChart.set(t),this.selector.selectItem(t),this.handleApplicationResizedEvent(),this._chartPane):null},h.prototype.destroyChart=function(t){return!(!t||this.viewModel.currentChart.get()!==t||(this._chartPane?(this.viewModel.currentChart.set(null),this.selector.unselectItem(t),t.destroyChartPoints(),this.cleanup(),0):(this.app.trace.warning("Could not destroy chart '{0}': Chart not found.".format(t.chartId.get())),1)))},h.prototype.cleanup=function(){this._chartPane&&(this._chartPane.destroy(),this._chartPane=null)},h.prototype._onCurrentChartChanged=function(t){t||this.cleanup()},h.prototype._onNewFeatureInitialized=function(){this.viewModel.charts.length()&&(this.addChart(this.viewModel.charts.getAt(0)),this._refreshChartPane())},h.prototype._refreshChartPane=function(){var t=this;setTimeout(function(){return t.handleApplicationResizedEvent()},0)},h);function h(t,e){var i=s.call(this,t,e)||this;return i._chartPane=null,i.app.event("ApplicationResizedEvent").subscribe(i,i.handleApplicationResizedEvent),i}e.SingleFeatureChartView=r})},"Mapping/modules/Charting/SingleFeatureChartViewModel":function(){var r,c=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});define(["require","exports","geocortex/infrastructure/featureDetails/FeatureProviderBase","geocortex/framework/observables","geocortex/charting/infrastructure/Enums","./ChartUtils","geocortex/infrastructure/FeatureSet"],function(t,e,i,r,s,h,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=(n=i.FeatureProviderBase,c(l,n),l.prototype.onNewFeatureInitialized=function(){},l.prototype.getChartFactory=function(){return null===this._chartFactory&&(this._chartFactory=this.app.getFrameworkObjectById("ChartViewModelFactory")),this._chartFactory},l.prototype.initialize=function(t){if(n.prototype.initialize.call(this,t),t){t.hasOwnProperty("infrastructureLibraryId")&&(this.infrastructureLibraryId=t.infrastructureLibraryId),t.hasOwnProperty("containerRegionName")&&this.containerRegionName.set(t.containerRegionName);var e=t.chartConfiguration;e&&(e.hasOwnProperty("chartWidth")&&(this._chartConfig.chartWidth=parseInt(e.chartWidth,10)),e.hasOwnProperty("chartHeight")&&(this._chartConfig.chartHeight=parseInt(e.chartHeight,10)),e.hasOwnProperty("renderAs")&&(this._chartConfig.renderAs=e.renderAs),e.hasOwnProperty("animationsEnabled")&&(this._chartConfig.animationsEnabled=!!e.animationsEnabled),e.hasOwnProperty("gradientsEnabled")&&(this._chartConfig.gradientsEnabled=!!e.gradientsEnabled),e.hasOwnProperty("interactiveLegendEnabled")&&(this._chartConfig.interactiveLegendEnabled=!!e.interactiveLegendEnabled),e.hasOwnProperty("pieStartAngle")&&(this._chartConfig.pieStartAngle=e.pieStartAngle))}},l.prototype.handleCurrentFeatureChanged=function(t){this.charts.clear(),this.currentChart.set(null),this._syncToken&&this._syncSource&&(this._syncSource.unbind(this._syncToken),this._syncSource=null,this._syncToken=null);var e=this.getChartFactory();if(e&&t&&t.layer&&t.layer.charts){for(var i=[],r=0,a=t.layer.charts;r<a.length;r++){var n=a[r];if(n&&n.chartDefinition.visible&&n.chartFeatureType===s.ChartFeatureType.SingleFeature){var o=e.createInstance(n.chartDefinition,s.ChartFeatureType.SingleFeature);o.tag=t.layer,this.applyChartOptions(o),i.push(o)}}this.charts.addItems(i),this.charts.getItems().some(function(t){return h.ChartUtils.containsDataLinks(t.chartDefinition)})&&(this._syncSource=t.dataLinkingResults,this._syncToken=t.dataLinkingResults.bind(this,this._handleDataLinksChanged)),this.buildChartPointCollections(t),this.updateDisplayedCharts(),this.onNewFeatureInitialized()}this.updateProviderState(!!this.charts.length())},l.prototype.applyChartOptions=function(t){t&&t.setOptions(this._chartConfig)},l.prototype.updateDisplayedCharts=function(){this.currentChart.get()&&this.currentChart.get().chartPointCollection.get()},l.prototype.chartPointCollectionLoadDelegate=function(e,i){var r=this;return function(){if(r.getChartFactory()){var t=new a.FeatureSet({layer:i.layer,app:r.app});return t.addFeature(i),r.getChartFactory().createChartPointCollection(e.chartDefinition,t,s.ChartFeatureType.SingleFeature)}return null}},l.prototype.buildChartPointCollections=function(t){for(var e=0;e<this.charts.getLength();e++){var i=this.charts.getAt(e),r=this.chartPointCollectionLoadDelegate(i,t),a=i.chartPointCollection;a.clear(),a.delegateGetter=r,a.cacheDelegateResults=!0}},l.prototype._handleDataLinksChanged=function(t){this.buildChartPointCollections(this.currentFeature.get()),this.updateDisplayedCharts()},l);function l(t,e){var i=n.call(this,t,e)||this;return i._chartFactory=null,i._chartConfig={animationsEnabled:!0,gradientsEnabled:!1,interactiveLegendEnabled:!1,interactiveChart:!1,pieStartAngle:180,renderAs:"svg",chartWidth:0,chartHeight:0},i._syncToken=null,i._syncSource=null,i.charts=new r.ObservableCollection,i.currentChart=new r.Observable,i.infrastructureLibraryId="Charting",i.containerRegionName=new r.Observable(""),i}e.SingleFeatureChartViewModel=o})},"url:/Mapping/modules/Charting/ChartingView.html":e,"url:/Mapping/modules/Charting/ChartPane.html":i,"url:/Mapping/modules/Charting/SingleFeatureChartView.html":r}}),require(["geocortex/framework/resourceManager"],function(t){t.resourceManager.register("Mapping","inv","Mapping/modules/Charting/CSS/common.css","css","LyogQ0hBUlRJTkcgU1RZTElORyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KLyogLS0tLS0tIFNUQVJUOiBDaGFydCBQYW5lIC0tLS0tLSAqLw0KLmNoYXJ0LXBhbmUgew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICBwYWRkaW5nOiAwOw0KICAgIG1hcmdpbjogMDsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgIGJhY2tncm91bmQ6IHdoaXRlOw0KfQ0KLmNoYXJ0LXBhbmUgLnBhbmVsLWhlYWRlciBoMiB7DQogICAgZm9udC1zaXplOiAxLjFlbTsNCn0NCi5jaGFydC1wYW5lIC5wYW5lbC1oZWFkZXItYnV0dG9uIHsNCiAgICB3aWR0aDogMS43ZW07DQp9DQouY2hhcnQtcGFuZSAuY2hhcnQgew0KICAgIHdpZHRoOiBhdXRvOw0KICAgIG1hcmdpbjogYXV0bzsNCiAgICBjbGVhcjogYm90aDsNCiAgICBwYWRkaW5nOiAwIC41ZW07DQp9DQouY2hhcnQtcGFuZSAuY2hhcnQtcGFuZS1jYXB0aW9uIHsNCiAgICBtYXJnaW4tbGVmdDogMWVtOw0KICAgIG1hcmdpbi1yaWdodDogMWVtOw0KfQ0KLyogLS0tLS0tIEVORDogQ2hhcnQgUGFuZSAtLS0tLS0gKi8NCg0KLyogLS0tLS0tIFNUQVJUOiBTaW5nbGUgRmVhdHVyZSBDaGFydHMgKEZlYXR1cmUgRGV0YWlscykgLS0tLS0tICovDQouc2luZ2xlLWZlYXR1cmUtY2hhcnQtc2VsZWN0b3Igew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgd2lkdGg6IDEwMCU7DQogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7DQp9DQouc2luZ2xlLWZlYXR1cmUtY2hhcnQtc2VsZWN0b3IgaW1nIHsNCiAgICBtYXJnaW46IDFlbSAwIDAgMWVtOw0KICAgIGxlZnQ6IDA7DQogICAgdG9wOiAwOw0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCn0NCi5zaW5nbGUtZmVhdHVyZS1jaGFydC1zZWxlY3RvciAuZnVpLXNlbGVjdG9yIHsNCiAgICBwYWRkaW5nOiAxZW0gMC41ZW0gMWVtIDNlbTsNCiAgICB3aWR0aDogODAlOw0KICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIGZsb2F0OiBsZWZ0Ow0KICAgIHRvcDogMDsNCn0NCi5zaW5nbGUtZmVhdHVyZS1jaGFydC1zZWxlY3RvciAuZnVpLXNlbGVjdG9yLWhlYWRlciB7DQogICAgd2lkdGg6IDEwMCU7DQp9DQouc2luZ2xlLWZlYXR1cmUtY2hhcnQtc2VsZWN0b3IgdWwuZnVpLXNlbGVjdG9yLWJvZHkgbGkgZGl2IHsNCiAgICBwYWRkaW5nOiAxZW07DQp9DQouc2luZ2xlLWZlYXR1cmUtY2hhcnQtc2VsZWN0b3IgLnNlbGVjdG9yLWl0ZW0gc3BhbiB7DQogICAgd2lkdGg6YXV0bzsNCn0NCi5zaW5nbGUtZmVhdHVyZS1jaGFydC1zZWxlY3RvciAuc2VsZWN0b3ItaXRlbSBpbnB1dCB7DQogICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsNCiAgICBtYXJnaW4tcmlnaHQ6IDAuNWVtOw0KfQ0KDQouc2luZ2xlLWZlYXR1cmUtY2hhcnQtd2lkZ2V0IHsNCiAgICBjbGVhcjogYm90aDsNCiAgICBtYXJnaW4tdG9wOiAwLjVlbTsNCn0NCi5zaW5nbGUtZmVhdHVyZS1jaGFydCAuY2hhcnQtcGFuZSB7DQogICAgd2lkdGg6IDEwMCU7DQogICAgaGVpZ2h0OiAxMDAlOw0KfQ0KLkZlYXR1cmVEZXRhaWxzQ29tcGFjdFZpZXcgLmNoYXJ0LXBhbmUgLmNoYXJ0IHsNCiAgICBtaW4taGVpZ2h0OiA0MDBweDsNCn0NCg0KLkZlYXR1cmVEZXRhaWxzQ29tcGFjdFZpZXcgZGl2LmNoYXJ0IHN2ZyB7DQogICAgbWluLWhlaWdodDogNDAwcHg7DQp9DQouQ2hhcnRpbmdWaWV3IC5jaGFydC1wYW5lIC5wYW5lbC1oZWFkZXIsDQouc2luZ2xlLWZlYXR1cmUtY2hhcnQgLmNoYXJ0LXBhbmUgLnBhbmVsLWhlYWRlciB7DQogICAgYm9yZGVyOiAwOw0KfQ0KLyogQWRqdXN0IGNoYXJ0IHNpemUgd2hlbiB0YWJzIGFyZSBwcmVzZW50IGluIHRoZSByZWdpb24gaGVhZGVyICovDQouRmVhdHVyZURldGFpbHNFeHBhbmRlZFZpZXcgLnJlZ2lvbi12aWV3LXN3aXRjaGVyLmJvdW5kLXZpc2libGUgKyAucmVnaW9uIC52aWV3LmFjdGl2ZSAucGFuZWwtZ3JvdXAuc2luZ2xlLWZlYXR1cmUtY2hhcnQgIHsNCiAgICB0b3A6IDIuMmVtOyAvKiBNYXRjaGVzIGhlaWdodCBvZiB0aGUgdGFiIHN3aXRjaGVyICovDQp9DQouRmVhdHVyZURldGFpbHNFeHBhbmRlZFZpZXcgLnNpbmdsZS1mZWF0dXJlLWNoYXJ0IHsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgd2lkdGg6IDEwMCU7DQogICAgdG9wOiAwOw0KICAgIGJvdHRvbTogMDsNCn0NCi5GZWF0dXJlRGV0YWlsc0V4cGFuZGVkVmlldyAuc2luZ2xlLWZlYXR1cmUtY2hhcnQtd2lkZ2V0IHsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgbWFyZ2luOiAwOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIHRvcDogMy40ZW07IC8qIE1hdGNoZXMgaGVpZ2h0IG9mIHRoZSBjaGFydCBzZWxlY3RvciAqLw0KICAgIGJvdHRvbTogMDsNCiAgICBtaW4taGVpZ2h0OiAwOw0KfQ0KLkNoYXJ0aW5nVmlldyAuY2hhcnQtcGFuZSAuY2hhcnQsDQouRmVhdHVyZURldGFpbHNFeHBhbmRlZFZpZXcgLmNoYXJ0LXBhbmUgLmNoYXJ0IHsNCiAgICBoZWlnaHQ6IDEwMCU7DQp9DQouQ2hhcnRpbmdWaWV3IC5jaGFydC1wYW5lLWJvZHksDQouRmVhdHVyZURldGFpbHNFeHBhbmRlZFZpZXcgLmNoYXJ0LXBhbmUtYm9keSB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIHRvcDogMy43NWVtOyAvKiBNYXRjaGVzIGhlaWdodCBvZiB0aGUgcGFuZWwgaGVhZGVyICovDQogICAgYm90dG9tOiAwOw0KICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgYmFja2dyb3VuZDogd2hpdGU7DQp9DQoubm8tdG91Y2ggLkNoYXJ0aW5nVmlldyAuY2hhcnQtcGFuZS1ib2R5LA0KLm5vLXRvdWNoIC5GZWF0dXJlRGV0YWlsc0V4cGFuZGVkVmlldyAuY2hhcnQtcGFuZS1ib2R5IHsNCiAgICB0b3A6IDNlbTsgLyogTWF0Y2hlcyBoZWlnaHQgb2YgdGhlIHBhbmVsIGhlYWRlciAqLw0KfQ0KLkNoYXJ0aW5nVmlldyAubm8taGVhZGVyIC5jaGFydC1wYW5lLWJvZHksIA0KLkZlYXR1cmVEZXRhaWxzRXhwYW5kZWRWaWV3IC5uby1oZWFkZXIgLmNoYXJ0LXBhbmUtYm9keSB7DQogICAgdG9wOiAwOyAvKiBObyBoZWFkZXIgc2hvd24gZm9yIHRoaXMgcGFuZWwsIGl0IHNob3VsZCB0YWtlIGFsbCBhdmFpbGFibGUgc3BhY2UgKi8NCn0NCi8qIC0tLS0tLSBFTkQ6IFNpbmdsZSBGZWF0dXJlIENoYXJ0cyAoRmVhdHVyZSBEZXRhaWxzKSAtLS0tLS0gKi8NCg0KLyogLS0tLS0tIFNUQVJUOiBNdWx0aS1GZWF0dXJlIENoYXJ0cyAtLS0tLS0gKi8NCi5DaGFydGluZ1ZpZXcgLnBhbmVsLWhlYWRlciBpbWcgew0KICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICBtYXJnaW4tbGVmdDogMC43ZW07DQogICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsNCn0NCi5DaGFydGluZ1ZpZXcgLmZ1aS1zZWxlY3RvciB7DQogICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsNCiAgICBwYWRkaW5nOiAwOw0KICAgIG1hcmdpbjogMDsNCiAgICB3aWR0aDogMTZlbTsNCiAgICBmbG9hdDogbm9uZTsNCiAgICBoZWlnaHQ6IGF1dG87DQp9DQouQ2hhcnRpbmdWaWV3IHVsLmZ1aS1zZWxlY3Rvci1ib2R5IHNwYW4gew0KICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7DQogICAgbGluZS1oZWlnaHQ6IDEuNmVtOw0KICAgIGZvbnQtc2l6ZTogMC45NWVtOw0KICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICB3aWR0aDogOTMlOw0KfQ0KLkNoYXJ0aW5nVmlldyAuY2hhcnRpbmctbW9iaWxlIHVsLmZ1aS1zZWxlY3Rvci1ib2R5IHsNCiAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgbGVmdDogMDsNCiAgICByaWdodDogMDsNCiAgICB0b3A6IDQ1cHg7DQogICAgYm90dG9tOiAwOw0KICAgIG1heC1oZWlnaHQ6IGluaXRpYWw7DQogICAgYm9yZGVyOiBub25lOw0KfQ0KLkNoYXJ0aW5nVmlldyAuY2hhcnRpbmctbW9iaWxlIHVsLmZ1aS1zZWxlY3Rvci1ib2R5LmV4cGFuZGVkIHsNCiAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjY2NjY2NjOw0KfQ0KDQouQ2hhcnRpbmdWaWV3IC5wYW5lbC1zY3JvbGwtY29udGFpbmVyIHsNCiAgICBib3JkZXI6IDA7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICB0b3A6IDMuNzVlbTsgLyogTWF0Y2hlcyBoZWlnaHQgb2YgdGhlIHZpZXcgY29udGFpbmVyIGhlYWRlciAqLw0KICAgIG1hcmdpbi10b3A6IDJweDsNCn0NCi5uby10b3VjaCAuQ2hhcnRpbmdWaWV3IC5wYW5lbC1zY3JvbGwtY29udGFpbmVyIHsNCiAgICB0b3A6IDNlbTsgLyogTWF0Y2hlcyBoZWlnaHQgb2YgdGhlIHZpZXcgY29udGFpbmVyIGhlYWRlciAqLw0KfQ0KLkNoYXJ0aW5nVmlldyAubm8taGVhZGVyIC5wYW5lbC1zY3JvbGwtY29udGFpbmVyIHsNCiAgICB0b3A6IDA7IC8qIE5vIGhlYWRlciBzaG93biBmb3IgdGhpcyB2aWV3IGNvbnRhaW5lciwgaXQgc2hvdWxkIHRha2UgYWxsIGF2YWlsYWJsZSBzcGFjZSAqLw0KICAgIG1hcmdpbjogMDsNCn0NCi5DaGFydGluZ1ZpZXcgLnBhbmVsLXNjcm9sbC1jb250YWluZXIgPiAudmlldy5hY3RpdmUgew0KICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICAvKioNCiAgICAgKiBOb3RlOiBJZiB5b3UncmUgY2hhbmdpbmcgdGhlc2UgcHJvcGVydGllcywgeW91J3JlIGNoYW5naW5nIHRoZSB0b3RhbCBzaXplIG9mIGNoYXJ0aW5nIHBhbmVzIGFuZCBtdXN0DQogICAgICogY2hhbmdlIHRoZSBzaXplIHBhcmFtZXRlcnMgaW4gY29kZS4gU2VlICdoYW5kbGVBcHBsaWNhdGlvblJlc2l6ZWRFdmVudCcgaW4gQ2hhcnRpbmdWaWV3Lg0KICAgICAqLw0KICAgIG1hcmdpbjogMGVtOw0KICAgIC8qYm9yZGVyOiAxcHggc29saWQgI2VlZTsqLw0KfQ0KLkNoYXJ0aW5nVmlldyAuY2hhcnQtcGFuZSB7DQogICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjZWVlOw0KfQ0KLkNoYXJ0aW5nVmlldyAuY2hhcnRpbmctbW9iaWxlIC5jaGFydC1wYW5lIC5wYW5lbC1oZWFkZXItYnV0dG9uIHsNCiAgICBkaXNwbGF5OiBub25lOw0KfQ0KLyogLS0tLS0tIEVORDogTXVsdGktRmVhdHVyZSBDaGFydHMgLS0tLS0tICovDQoNCi8qIC0tLS0tLSBTVEFSVDogQ2hhcnQgVG9vbHRpcCBkaXYgLS0tLS0tICovDQouay1jaGFydC10b29sdGlwIHsNCiAgICB6LWluZGV4OiA5OTk5Ow0KICAgIHBhZGRpbmc6IDAuMjVlbTsNCn0NCi8qIC0tLS0tLSBFTkQ6IENoYXJ0IFRvb2x0aXAgZGl2IC0tLS0tLSAqLw0K"),t.resourceManager.register("Mapping","inv","Mapping/modules/Charting/CSS/small.css","css","LyogQ0hBUlRJTkcgU1RZTElORyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KLyogLS0tLS0tIFNUQVJUOiBDaGFydCBQYW5lIC0tLS0tLSAqLw0KLmNoYXJ0LXBhbmUgLnBhbmVsLWhlYWRlci1idXR0b24uY2xvc2UtMTYgew0KICAgIGRpc3BsYXk6IG5vbmU7DQp9DQoNCi5zaGVsbC1zbWFsbCAuY2hhcnQtcGFuZSAuY2hhcnQgew0KICAgIHBhZGRpbmc6IDBlbTsNCn0NCg0KLnNoZWxsLXNtYWxsIC5jaGFydC1wYW5lIC5wYW5lbC1oZWFkZXIgew0KICAgIHBhZGRpbmc6IDBlbTsNCn0NCi8qIC0tLS0tLSBFTkQ6IENoYXJ0IFBhbmUgLS0tLS0tICov"),t.resourceManager.register("Mapping","inv","Mapping/modules/Charting/ChartingView.html","html",e),t.resourceManager.register("Mapping","inv","Mapping/modules/Charting/ChartPane.html","html",i),t.resourceManager.register("Mapping","inv","Mapping/modules/Charting/SingleFeatureChartView.html","html",r)}),require({cache:{}}),define(["Mapping/modules/Charting/ChartingModule","Mapping/modules/Charting/ChartingView","Mapping/modules/Charting/ChartingViewModel","Mapping/modules/Charting/ChartPane","Mapping/modules/Charting/ChartPaneViewModel","Mapping/modules/Charting/ChartPointCollectionFeatureAggregator","Mapping/modules/Charting/DataLinkChartPointAdapter","Mapping/modules/Charting/FeatureChartPointAdapter","Mapping/modules/Charting/FormatProvider","Mapping/modules/Charting/SingleFeatureChartView","Mapping/modules/Charting/SingleFeatureChartViewModel"],function(t,e,i,r,a,n,o,s,h,l,c){u(t,"geocortex.essentialsHtmlViewer.mapping.modules.charting.ChartingModule",t.ChartingModule),u(e,"geocortex.essentialsHtmlViewer.mapping.modules.charting.ChartingView",e.ChartingView),u(i,"geocortex.essentialsHtmlViewer.mapping.modules.charting.ChartingViewModel",i.ChartingViewModel),u(r,"geocortex.essentialsHtmlViewer.mapping.modules.charting.ChartPane",r.ChartPane),u(a,"geocortex.essentialsHtmlViewer.mapping.modules.charting.ChartPaneViewModel",a.ChartPaneViewModel),u(n,"geocortex.essentialsHtmlViewer.mapping.modules.charting.ChartPointCollectionFeatureAggregator",n.ChartPointCollectionFeatureAggregator),u(h,"geocortex.essentialsHtmlViewer.mapping.modules.charting.FormatProvider",h.FormatProvider),u(o,"geocortex.essentialsHtmlViewer.mapping.modules.charting.DataLinkChartPointAdapter",o.DataLinkChartPointAdapter),u(s,"geocortex.essentialsHtmlViewer.mapping.modules.charting.FeatureChartPointAdapter",s.FeatureChartPointAdapter),u(l,"geocortex.essentialsHtmlViewer.mapping.modules.charting.SingleFeatureChartView",l.SingleFeatureChartView),u(c,"geocortex.essentialsHtmlViewer.mapping.modules.charting.SingleFeatureChartViewModel",c.SingleFeatureChartViewModel)})}();