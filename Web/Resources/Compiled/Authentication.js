!function(){function e(e,t,i){if("string"==typeof e&&(i=t,t=e),void 0!==i)for(var n=t.split("."),a=null,o=window,r=0,s=n.length;r<s;r++)a=n[r],r==s-1?o[a]=i:o[a]||(o[a]={}),o=o[a];else console.warn("Undefined shim for: "+t)}var t="<div class='module authentication-dialog'>        <div class='form-validation' data-binding='{@visible: error}{@text:errorMessage}'></div>    \x3c!-- Same deal as WorkflowContainerView's busy/loading status --\x3e    <div class='loading-container' data-binding='{@visible: authenticating}'>        <div class='loading-img' data-binding='{@visible: busy}'></div>        <div class='loading-msg' data-binding='{@text: @language-auth-authenticating}'></div>    </div>    <form class='form-container' data-binding='{@hidden: authenticating}'>        <div class='form-item'>            <label for='username'class='form-label' data-binding='{@text: @language-auth-username}'>\x3c!-- Username: --\x3e</label>            <div class='form-control'>                <input id='username' type='text' autocorrect='off' autocapitalize='off' data-binding='{@value: username}' />            </div>        </div>        <div class='form-item'>            <label for='password' class='form-label' data-binding='{@text: @language-auth-password}'>\x3c!-- Password: --\x3e</label>            <div class='form-control'>                <input id='password' type='password' data-binding='{@value: password}' />            </div>        </div>        <div class='form-btns'>            <button class='button' data-binding='{@event-onclick: handleClickLogin}{@text: @language-common-login}'></button>        </div>    </form></div>";require({cache:{"Mapping/modules/Authentication/AuthenticationModule":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define(["require","exports","geocortex/framework/application/ModuleBase","geocortex/infrastructure/eventArgs/AuthenticationEventArgs","geocortex/essentials/RestHelperHTTPService","./AuthenticationViewModel"],function(t,i,n,a,o,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=function(t){function i(e,i){var n=t.call(this,e,i)||this;return n.attempts=null,n.authView=null,n.attempts=0,n}return e(i,t),i.prototype.initialize=function(e){var i=this;t.prototype.initialize.call(this,e);var n=e.region||"ModalWindowRegion";dojo.subscribe("geocortex_authenticationSucceeded",function(e){i.attempts=0;var t=new a.AuthenticationEventArgs;t.username=e.username,t.token=e.token,t.result=!0,i.app.eventRegistry.event("AuthenticationSucceededEvent").publish(t)}),dojo.extend(o.RestHelperHTTPService,{_gatherCredentials:function(e){var t,o=!1;if(i.attempts>0){var s=new a.AuthenticationEventArgs;s.username=null,s.token=null,s.result=!1,o=!0,i.app.eventRegistry.event("AuthenticationFailedEvent").publish(s)}if(t=e||new dojo.Deferred,null==i.authView){i.authView=i.app.viewManager.createView({viewId:"AuthenticationdialogView",markupResource:"Mapping/modules/Authentication/AuthenticationView.html",typeName:"geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationView",title:i.app.getResource(i.libraryId,"language-auth-title"),libraryId:i.libraryId,regionName:n});var u=new r.AuthenticationViewModel(i.app,i.libraryId);u.libraryId=i.libraryId,u.error.set(o),i.authView.attach(u)}return i.authView.deferred=t,i.app.viewManager.activateView(i.authView),++i.attempts,t}})},i}(n.ModuleBase);i.AuthenticationModule=s})},"Mapping/modules/Authentication/AuthenticationView":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define(["require","exports","geocortex/framework/ui/ViewBase"],function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.deferred=null,e}return e(i,t),i.prototype.attach=function(e){t.prototype.attach.call(this,e),this.app.eventRegistry.event("AuthenticationFailedEvent").subscribe(this,function(){this.app.viewManager.destroyView(this)}),this.app.eventRegistry.event("AuthenticationSucceededEvent").subscribe(this,function(){this.app.viewManager.destroyView(this)}),this.app.eventRegistry.event("SiteInitializationFailedEvent").subscribe(this,function(){this.app.viewManager.destroyView(this)}),this.app.eventRegistry.event("SiteAuthenticationFailedEvent").subscribe(this,function(){this.app.viewManager.destroyView(this)})},i.prototype.handleClickLogin=function(e,t,i){if(""==this.viewModel.username.get())return this.app.viewManager.destroyView(this),this.viewModel.password.set(),this.viewModel.error.set(!0),this.viewModel.errorMessage.set(this.app.getResource(this.libraryId,"language-auth-username-empty")),void this.app.viewManager.activateView(this);this.deferred&&this.viewModel&&(this.viewModel.authenticating.set(!0),this.deferred.resolve({username:this.viewModel.username.get(),password:this.viewModel.password.get()}))},i}(n.ViewBase);i.AuthenticationView=a})},"Mapping/modules/Authentication/AuthenticationViewModel":function(){var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables"],function(t,i,n,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function i(e,i){var n=t.call(this,e,i)||this;return n.username=null,n.password=null,n.authenticating=null,n.error=null,n.errorMessage=null,n.username=new a.Observable(""),n.password=new a.Observable(""),n.authenticating=new a.Observable(!1),n.error=new a.Observable(!1),n.errorMessage=new a.Observable,n.app.eventRegistry.event("AuthenticationFailedEvent").subscribe(n,function(){this.error.set(!0),this.authenticating.set(!1),this.errorMessage.set(this.app.getResource(this.libraryId,"language-auth-error"))}),n.app.eventRegistry.event("AuthenticationSucceededEvent").subscribe(n,function(){this.error.set(!1),this.errorMessage.set(null),this.authenticating.set(!1)}),n.app.commandRegistry.command("HideSplashScreen").execute(),n}return e(i,t),i.prototype.reset=function(){this.username.set(""),this.password.set(""),this.authenticating.set(!1),this.error.set(!1),this.errorMessage.set(null)},i}(n.ViewModelBase);i.AuthenticationViewModel=o})},"url:/Mapping/modules/Authentication/AuthenticationView.html":t}}),require(["geocortex/framework/resourceManager"],function(e){e.resourceManager.register("Mapping","inv","Mapping/modules/Authentication/CSS/common.css","css","DQovKiBBVVRIRU5USUNBVElPTiBESUFMT0cgKENPTU1PTikgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQoNCi5hdXRoZW50aWNhdGlvbi1kaWFsb2cgaW5wdXRbdHlwZT0ndGV4dCddLA0KLmF1dGhlbnRpY2F0aW9uLWRpYWxvZyBpbnB1dFt0eXBlPSdwYXNzd29yZCddIHsNCiAgICB3aWR0aDogMTAwJTsNCn0NCg0KLmF1dGhlbnRpY2F0aW9uLWRpYWxvZyAuZm9ybS1sYWJlbCB7DQogICAgcGFkZGluZy1sZWZ0OiAwOw0KfQ=="),e.resourceManager.register("Mapping","inv","Mapping/modules/Authentication/AuthenticationView.html","html",t)}),require({cache:{}}),define(["Mapping/modules/Authentication/AuthenticationModule","Mapping/modules/Authentication/AuthenticationView","Mapping/modules/Authentication/AuthenticationViewModel"],function(t,i,n){e(t,"geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationModule",t.AuthenticationModule),e(i,"geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationView",i.AuthenticationView),e(n,"geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationViewModel",n.AuthenticationViewModel)})}();