!function(){var t="<div class='module authentication-dialog'>        <div class='form-validation' data-binding='{@visible: error}{@text:errorMessage}'></div>    \x3c!-- Same deal as WorkflowContainerView's busy/loading status --\x3e    <div class='loading-container' data-binding='{@visible: authenticating}'>        <div class='loading-img' data-binding='{@visible: busy}'></div>        <div class='loading-msg' data-binding='{@text: @language-auth-authenticating}'></div>    </div>    <form class='form-container' data-binding='{@hidden: authenticating}'>        <div class='form-item'>            <label for='username'class='form-label' data-binding='{@text: @language-auth-username}'>\x3c!-- Username: --\x3e</label>            <div class='form-control'>                <input id='username' type='text' autocorrect='off' autocapitalize='off' data-binding='{@value: username}' />            </div>        </div>        <div class='form-item'>            <label for='password' class='form-label' data-binding='{@text: @language-auth-password}'>\x3c!-- Password: --\x3e</label>            <div class='form-control'>                <input id='password' type='password' data-binding='{@value: password}' />            </div>        </div>        <div class='form-btns'>            <button class='button' data-binding='{@event-onclick: handleClickLogin}{@text: @language-common-login}'></button>        </div>    </form></div>";function n(e,t,i){if("string"==typeof e&&(i=t,t=e),void 0!==i)for(var n=t.split("."),a=null,o=window,r=0,s=n.length;r<s;r++)a=n[r],r==s-1?o[a]=i:o[a]||(o[a]={}),o=o[a];else console.warn("Undefined shim for: "+t)}require({cache:{"Mapping/modules/Authentication/AuthenticationModule":function(){var n,c=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","geocortex/framework/application/ModuleBase","geocortex/infrastructure/eventArgs/AuthenticationEventArgs","geocortex/essentials/RestHelperHTTPService","./AuthenticationViewModel"],function(e,t,i,s,n,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o=(a=i.ModuleBase,c(r,a),r.prototype.initialize=function(e){var o=this;a.prototype.initialize.call(this,e);var r=e.region||"ModalWindowRegion";dojo.subscribe("geocortex_authenticationSucceeded",function(e){o.attempts=0;var t=new s.AuthenticationEventArgs;t.username=e.username,t.token=e.token,t.result=!0,o.app.eventRegistry.event("AuthenticationSucceededEvent").publish(t)}),dojo.extend(n.RestHelperHTTPService,{_gatherCredentials:function(e){var t,i=!1;if(0<o.attempts){var n=new s.AuthenticationEventArgs;n.username=null,n.token=null,i=!(n.result=!1),o.app.eventRegistry.event("AuthenticationFailedEvent").publish(n)}if(t=e||new dojo.Deferred,null==o.authView){o.authView=o.app.viewManager.createView({viewId:"AuthenticationdialogView",markupResource:"Mapping/modules/Authentication/AuthenticationView.html",typeName:"geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationView",title:o.app.getResource(o.libraryId,"language-auth-title"),libraryId:o.libraryId,regionName:r});var a=new u.AuthenticationViewModel(o.app,o.libraryId);a.libraryId=o.libraryId,a.error.set(i),o.authView.attach(a)}return o.authView.deferred=t,o.app.viewManager.activateView(o.authView),++o.attempts,t}})},r);function r(e,t){var i=a.call(this,e,t)||this;return i.attempts=null,i.authView=null,i.attempts=0,i}t.AuthenticationModule=o})},"Mapping/modules/Authentication/AuthenticationView":function(){var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=(n=i.ViewBase,r(o,n),o.prototype.attach=function(e){n.prototype.attach.call(this,e),this.app.eventRegistry.event("AuthenticationFailedEvent").subscribe(this,function(){this.app.viewManager.destroyView(this)}),this.app.eventRegistry.event("AuthenticationSucceededEvent").subscribe(this,function(){this.app.viewManager.destroyView(this)}),this.app.eventRegistry.event("SiteInitializationFailedEvent").subscribe(this,function(){this.app.viewManager.destroyView(this)}),this.app.eventRegistry.event("SiteAuthenticationFailedEvent").subscribe(this,function(){this.app.viewManager.destroyView(this)})},o.prototype.handleClickLogin=function(e,t,i){if(""==this.viewModel.username.get())return this.app.viewManager.destroyView(this),this.viewModel.password.set(),this.viewModel.error.set(!0),this.viewModel.errorMessage.set(this.app.getResource(this.libraryId,"language-auth-username-empty")),void this.app.viewManager.activateView(this);this.deferred&&this.viewModel&&(this.viewModel.authenticating.set(!0),this.deferred.resolve({username:this.viewModel.username.get(),password:this.viewModel.password.get()}))},o);function o(){var e=null!==n&&n.apply(this,arguments)||this;return e.deferred=null,e}t.AuthenticationView=a})},"Mapping/modules/Authentication/AuthenticationViewModel":function(){var n,s=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables"],function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o=(a=i.ViewModelBase,s(r,a),r.prototype.reset=function(){this.username.set(""),this.password.set(""),this.authenticating.set(!1),this.error.set(!1),this.errorMessage.set(null)},r);function r(e,t){var i=a.call(this,e,t)||this;return i.username=null,i.password=null,i.authenticating=null,i.error=null,i.errorMessage=null,i.username=new n.Observable(""),i.password=new n.Observable(""),i.authenticating=new n.Observable(!1),i.error=new n.Observable(!1),i.errorMessage=new n.Observable,i.app.eventRegistry.event("AuthenticationFailedEvent").subscribe(i,function(){this.error.set(!0),this.authenticating.set(!1),this.errorMessage.set(this.app.getResource(this.libraryId,"language-auth-error"))}),i.app.eventRegistry.event("AuthenticationSucceededEvent").subscribe(i,function(){this.error.set(!1),this.errorMessage.set(null),this.authenticating.set(!1)}),i.app.commandRegistry.command("HideSplashScreen").execute(),i}t.AuthenticationViewModel=o})},"url:/Mapping/modules/Authentication/AuthenticationView.html":t}}),require(["geocortex/framework/resourceManager"],function(e){e.resourceManager.register("Mapping","inv","Mapping/modules/Authentication/CSS/common.css","css","DQovKiBBVVRIRU5USUNBVElPTiBESUFMT0cgKENPTU1PTikgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQoNCi5hdXRoZW50aWNhdGlvbi1kaWFsb2cgaW5wdXRbdHlwZT0ndGV4dCddLA0KLmF1dGhlbnRpY2F0aW9uLWRpYWxvZyBpbnB1dFt0eXBlPSdwYXNzd29yZCddIHsNCiAgICB3aWR0aDogMTAwJTsNCn0NCg0KLmF1dGhlbnRpY2F0aW9uLWRpYWxvZyAuZm9ybS1sYWJlbCB7DQogICAgcGFkZGluZy1sZWZ0OiAwOw0KfQ=="),e.resourceManager.register("Mapping","inv","Mapping/modules/Authentication/AuthenticationView.html","html",t)}),require({cache:{}}),define(["Mapping/modules/Authentication/AuthenticationModule","Mapping/modules/Authentication/AuthenticationView","Mapping/modules/Authentication/AuthenticationViewModel"],function(e,t,i){n(e,"geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationModule",e.AuthenticationModule),n(t,"geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationView",t.AuthenticationView),n(i,"geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationViewModel",i.AuthenticationViewModel)})}();