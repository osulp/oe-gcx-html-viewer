function shim(e,t,i){if("string"==typeof e&&(i=t,t=e),"undefined"==typeof i)return void console.warn("Undefined shim for: "+t);for(var n=t.split("."),a=null,r=window,s=0,o=n.length;s<o;s++)a=n[s],s==o-1?r[a]=i:r[a]||(r[a]={}),r=r[a]}require({cache:{"Mapping/modules/Authentication/AuthenticationModule":function(){define(["require","exports","geocortex/framework/application/ModuleBase","geocortex/infrastructure/eventArgs/AuthenticationEventArgs","geocortex/essentials/RestHelperHTTPService","./AuthenticationViewModel"],function(e,t,i,n,a,r){"use strict";var s=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.attempts=null,n.authView=null,n.attempts=0,n}return __extends(t,e),t.prototype.initialize=function(t){var i=this;e.prototype.initialize.call(this,t);var s=t.region||"ModalWindowRegion";dojo.subscribe("geocortex_authenticationSucceeded",function(e){i.attempts=0;var t=new n.AuthenticationEventArgs;t.username=e.username,t.token=e.token,t.result=!0,i.app.eventRegistry.event("AuthenticationSucceededEvent").publish(t)}),dojo.extend(a.RestHelperHTTPService,{_gatherCredentials:function(e){var t,a=!1;if(i.attempts>0){var o=new n.AuthenticationEventArgs;o.username=null,o.token=null,o.result=!1,a=!0,i.app.eventRegistry.event("AuthenticationFailedEvent").publish(o)}if(t=e?e:new dojo.Deferred,null==i.authView){i.authView=i.app.viewManager.createView({viewId:"AuthenticationdialogView",markupResource:"Mapping/modules/Authentication/AuthenticationView.html",typeName:"geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationView",title:i.app.getResource(i.libraryId,"language-auth-title"),libraryId:i.libraryId,regionName:s});var u=new r.AuthenticationViewModel(i.app,i.libraryId);u.libraryId=i.libraryId,u.error.set(a),i.authView.attach(u)}return i.authView.deferred=t,i.app.viewManager.activateView(i.authView),++i.attempts,t}})},t}(i.ModuleBase);t.AuthenticationModule=s})},"Mapping/modules/Authentication/AuthenticationView":function(){define(["require","exports","geocortex/framework/ui/ViewBase"],function(e,t,i){"use strict";var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.deferred=null,t}return __extends(t,e),t.prototype.attach=function(t){e.prototype.attach.call(this,t),this.app.eventRegistry.event("AuthenticationFailedEvent").subscribe(this,function(){this.app.viewManager.destroyView(this)}),this.app.eventRegistry.event("AuthenticationSucceededEvent").subscribe(this,function(){this.app.viewManager.destroyView(this)}),this.app.eventRegistry.event("SiteInitializationFailedEvent").subscribe(this,function(){this.app.viewManager.destroyView(this)}),this.app.eventRegistry.event("SiteAuthenticationFailedEvent").subscribe(this,function(){this.app.viewManager.destroyView(this)})},t.prototype.handleClickLogin=function(e,t,i){return""==this.viewModel.username.get()?(this.app.viewManager.destroyView(this),this.viewModel.password.set(),this.viewModel.error.set(!0),this.viewModel.errorMessage.set(this.app.getResource(this.libraryId,"language-auth-username-empty")),void this.app.viewManager.activateView(this)):void(this.deferred&&this.viewModel&&(this.viewModel.authenticating.set(!0),this.deferred.resolve({username:this.viewModel.username.get(),password:this.viewModel.password.get()})))},t}(i.ViewBase);t.AuthenticationView=n})},"Mapping/modules/Authentication/AuthenticationViewModel":function(){define(["require","exports","geocortex/framework/ui/ViewModelBase","geocortex/framework/observables"],function(e,t,i,n){"use strict";var a=function(e){function t(t,i){var a=e.call(this,t,i)||this;return a.username=null,a.password=null,a.authenticating=null,a.error=null,a.errorMessage=null,a.username=new n.Observable(""),a.password=new n.Observable(""),a.authenticating=new n.Observable((!1)),a.error=new n.Observable((!1)),a.errorMessage=new n.Observable,a.app.eventRegistry.event("AuthenticationFailedEvent").subscribe(a,function(){this.error.set(!0),this.authenticating.set(!1),this.errorMessage.set(this.app.getResource(this.libraryId,"language-auth-error"))}),a.app.eventRegistry.event("AuthenticationSucceededEvent").subscribe(a,function(){this.error.set(!1),this.errorMessage.set(null),this.authenticating.set(!1)}),a.app.commandRegistry.command("HideSplashScreen").execute(),a}return __extends(t,e),t.prototype.reset=function(){this.username.set(""),this.password.set(""),this.authenticating.set(!1),this.error.set(!1),this.errorMessage.set(null)},t}(i.ViewModelBase);t.AuthenticationViewModel=a})},"url:/Mapping/modules/Authentication/AuthenticationView.html":'<div class="module authentication-dialog">\r\n    \r\n    <div class="form-validation" data-binding="{@visible: error}{@text:errorMessage}"></div>\r\n\r\n    <!-- Same deal as WorkflowContainerView\'s busy/loading status -->\r\n\r\n    <div class="loading-container" data-binding="{@visible: authenticating}">\r\n        <div class="loading-img" data-binding="{@visible: busy}"></div>\r\n        <div class="loading-msg" data-binding="{@text: @language-auth-authenticating}"></div>\r\n    </div>\r\n\r\n    <form class="form-container" data-binding="{@hidden: authenticating}">\r\n        <div class="form-item">\r\n            <label for="username"class="form-label" data-binding="{@text: @language-auth-username}"><!-- Username: --></label>\r\n            <div class="form-control">\r\n                <input id="username" type="text" autocorrect="off" autocapitalize="off" data-binding="{@value: username}" />\r\n            </div>\r\n        </div>\r\n\r\n        <div class="form-item">\r\n            <label for="password" class="form-label" data-binding="{@text: @language-auth-password}"><!-- Password: --></label>\r\n            <div class="form-control">\r\n                <input id="password" type="password" data-binding="{@value: password}" />\r\n            </div>\r\n        </div>\r\n\r\n        <div class="form-btns">\r\n            <button class="button" data-binding="{@event-onclick: handleClickLogin}{@text: @language-common-login}"></button>\r\n        </div>\r\n\r\n    </form>\r\n\r\n</div>'}}),define(["Mapping/modules/Authentication/AuthenticationModule","Mapping/modules/Authentication/AuthenticationView","Mapping/modules/Authentication/AuthenticationViewModel"],function(e,t,i){shim(e,"geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationModule",e.AuthenticationModule),shim(t,"geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationView",t.AuthenticationView),shim(i,"geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationViewModel",i.AuthenticationViewModel)});