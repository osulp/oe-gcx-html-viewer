// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.21/esri/copyright.txt for details.
//>>built
(function(g,n){var m,l=function(){},p=function(a){for(var d in a)return 0;return 1},x={}.toString,q=function(a){return"[object Function]"==x.call(a)},u=function(a){return"[object String]"==x.call(a)},c=function(a){return"[object Array]"==x.call(a)},b=function(a,d){if(a)for(var b=0;b<a.length;)d(a[b++])},e=function(a,d){for(var b in d)a[b]=d[b];return a},f=function(a,d){return e(Error(a),{src:"dojoLoader",info:d})},y=1,oa=function(){return"_"+y++},k=function(a,d,b){return pa(a,d,b,0,k)},F=this,M=F.document,
Ia=M&&M.createElement("DiV"),r=k.has=function(a){return q(D[a])?D[a]=D[a](F,M,Ia):D[a]},D=r.cache=n.hasCache;r.add=function(a,d,b,h){(void 0===D[a]||h)&&(D[a]=d);return b&&r(a)};e(n.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0});n.loaderPatch={injectUrl:function(a,d){try{importScripts(a),d()}catch(t){console.info("failed to load resource ("+a+")"),console.error(t)}}};for(var A in g.has)r.add(A,g.has[A],0,1);
k.async=1;var Ja=r("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");k.eval=function(a,d){return Ja(a+"\r\n//# sourceURL\x3d"+d)};var aa={},C=k.signal=function(a,d){var t=aa[a];b(t&&t.slice(0),function(a){a.apply(null,c(d)?d:[d])})},N=k.on=function(a,d){var b=aa[a]||(aa[a]=[]);b.push(d);return{remove:function(){for(var a=0;a<b.length;a++)if(b[a]===d){b.splice(a,1);break}}}},qa=[],Ka={},ra=[],G={},sa=k.map={},O=[],v={},ba="",H={},P={};A={};var da=function(a){var d,b,h,e;for(d in P)b=
P[d],(h=d.match(/^url\:(.+)/))?H["url:"+ta(h[1],a)]=b:"*now"==d?e=b:"*noref"!=d&&(h=R(d,a,!0),H[h.mid]=H["url:"+h.url]=b);e&&e(ca(a));P={}},ua=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})},ea=function(a,d){d.splice(0,d.length);for(var b in a)d.push([b,a[b],new RegExp("^"+ua(b)+"(/|$)"),b.length]);d.sort(function(a,b){return b[3]-a[3]});return d},La=function(a,d){b(a,function(a){d.push([u(a[0])?new RegExp("^"+ua(a[0])+"$"):a[0],a[1]])})},va=function(a){var b=
a.name;b||(b=a,a={name:b});a=e({main:"main"},a);a.location=a.location?a.location:b;a.packageMap&&(sa[b]=a.packageMap);a.main.indexOf("./")||(a.main=a.main.substring(2));G[b]=a},wa=[],J=function(a,d,t){for(var h in a){"waitSeconds"==h&&(k.waitms=1E3*(a[h]||0));"cacheBust"==h&&(ba=a[h]?u(a[h])?a[h]:(new Date).getTime()+"":"");if("baseUrl"==h||"combo"==h)k[h]=a[h];a[h]!==D&&(k.rawConfig[h]=a[h],"has"!=h&&r.add("config-"+h,a[h],0,d))}k.baseUrl||(k.baseUrl="./");/\/$/.test(k.baseUrl)||(k.baseUrl+="/");
for(h in a.has)r.add(h,a.has[h],0,d);b(a.packages,va);for(var f in a.packagePaths)b(a.packagePaths[f],function(a){var b=f+"/"+a;u(a)&&(a={name:a});a.location=b;va(a)});ea(e(sa,a.map),O);b(O,function(a){a[1]=ea(a[1],[]);"*"==a[0]&&(O.star=a)});ea(e(Ka,a.paths),ra);La(a.aliases,qa);if(d)wa.push({config:a.config});else for(h in a.config)d=E(h,t),d.config=e(d.config||{},a.config[h]);a.cache&&(da(),P=a.cache,a.cache["*noref"]&&da());C("config",[a,k.rawConfig])};if(r("dojo-cdn")){var xa=M.getElementsByTagName("script");
m=0;for(var S,w,T,K;m<xa.length;)if(S=xa[m++],(T=S.getAttribute("src"))&&(K=T.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&(w=K[3]||"",n.baseUrl=n.baseUrl||w),T=S.getAttribute("data-dojo-config")||S.getAttribute("djConfig"))A=k.eval("({ "+T+" })","data-dojo-config")}k.rawConfig={};J(n,1);r("dojo-cdn")&&((G.dojo.location=w)&&(w+="/"),G.dijit.location=w+"../dijit/",G.dojox.location=w+"../dojox/");J(g,1);J(A,1);var ga=function(a){fa(function(){b(a.deps,ya)})},pa=function(a,b,t,h,Q){var d;if(u(a)){if((d=E(a,
h,!0))&&d.executed)return d.result;throw f("undefinedModule",a);}c(a)||(J(a,0,h),a=b,b=t);if(c(a))if(a.length){t="require*"+oa();for(var y,g=[],m=0;m<a.length;)y=a[m++],g.push(E(y,h));d=e(U("",t,0,""),{injected:2,deps:g,def:b||l,require:h?h.require:k,gc:1});v[d.mid]=d;ga(d);var n=L&&!0;fa(function(){ha(d,n)});d.executed||B.push(d);ia()}else b&&b();return Q},ca=function(a){if(!a)return k;var b=a.require;b||(b=function(d,h,e){return pa(d,h,e,a,b)},a.require=e(b,k),b.module=a,b.toUrl=function(b){return ta(b,
a)},b.toAbsMid=function(b){return ja(b,a)});return b},B=[],V=[],z={},Na=function(a){a.injected=1;z[a.mid]=1;a.url&&(z[a.url]=a.pack||1);za()},X=function(a){a.injected=2;delete z[a.mid];a.url&&delete z[a.url];p(z)&&W()},Oa=k.idle=function(){return!V.length&&p(z)&&!B.length&&!L},ka=function(a,b){if(b)for(var d=0;d<b.length;d++)if(b[d][2].test(a))return b[d];return 0},Aa=function(a){var b=[],e,h;for(a=a.replace(/\\/g,"/").split("/");a.length;)e=a.shift(),".."==e&&b.length&&".."!=h?(b.pop(),h=b[b.length-
1]):"."!=e&&b.push(h=e);return b.join("/")},U=function(a,b,e,h){return{pid:a,mid:b,pack:e,url:h,executed:0,def:0}},Ba=function(a,d,e,h,c,k,y,g,m){var t,Q,l,n;n=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||n&&!d)return U(0,a,0,a);a=Aa(n?d.mid+"/../"+a:a);if(/^\./.test(a))throw f("irrationalPath",a);d&&(l=ka(d.mid,k));(l=(l=l||k.star)&&ka(a,l[1]))&&(a=l[1]+a.substring(l[3]));d=(K=a.match(/^([^\/]+)(\/(.+))?$/))?K[1]:"";(t=e[d])?a=d+"/"+(Q=K[3]||t.main):d="";var p=0;b(g,function(b){var d=a.match(b[0]);
d&&0<d.length&&(p=q(b[1])?a.replace(b[0],b[1]):b[1])});if(p)return Ba(p,0,e,h,c,k,y,g,m);if(e=h[a])return m?U(e.pid,e.mid,e.pack,e.url):h[a];h=(l=ka(a,y))?l[1]+a.substring(l[3]):d?t.location+"/"+Q:r("config-tlmSiblingOfDojo")?"../"+a:a;/(^\/)|(\:)/.test(h)||(h=c+h);return U(d,a,t,Aa(h+".js"))},R=function(a,b,e){return Ba(a,b,G,v,k.baseUrl,e?[]:O,e?[]:ra,e?[]:qa)},Ca=function(a,b,e){return a.normalize?a.normalize(b,function(a){return ja(a,e)}):ja(b,e)},Da=0,E=function(a,b,e){var d,f;(d=a.match(/^(.+?)\!(.*)$/))?
(f=E(d[1],b,e),5!==f.executed||f.load||la(f),f.load?(d=Ca(f,d[2],b),a=f.mid+"!"+(f.dynamic?++Da+"!":"")+d):(d=d[2],a=f.mid+"!"+ ++Da+"!waitingForPlugin"),a={plugin:f,mid:a,req:ca(b),prid:d}):a=R(a,b);return v[a.mid]||!e&&(v[a.mid]=a)},ja=k.toAbsMid=function(a,b){return R(a,b).mid},ta=k.toUrl=function(a,b){var d=R(a+"/x",b),e=d.url;return Ea(0===d.pid?a:e.substring(0,e.length-5))},Fa={injected:2,executed:5,def:3,result:3};w=function(a){return v[a]=e({mid:a},Fa)};var Pa=w("require"),Qa=w("exports"),
Ra=w("module"),Y={},ma=0,la=function(a){var b=a.result;a.dynamic=b.dynamic;a.normalize=b.normalize;a.load=b.load;return a},Sa=function(a){var d={};b(a.loadQ,function(b){var f=Ca(a,b.prid,b.req.module),h=a.dynamic?b.mid.replace(/waitingForPlugin$/,f):a.mid+"!"+f,f=e(e({},b),{mid:h,prid:f,injected:0});v[h]&&v[h].injected||Ga(v[h]=f);d[b.mid]=v[h];X(b);delete v[b.mid]});a.loadQ=0;var f=function(a){for(var b=a.deps||[],e=0;e<b.length;e++)(a=d[b[e].mid])&&(b[e]=a)},h;for(h in v)f(v[h]);b(B,f)},na=function(a){k.trace("loader-finish-exec",
[a.mid]);a.executed=5;a.defOrder=ma++;a.loadQ&&(la(a),Sa(a));for(m=0;m<B.length;)B[m]===a?B.splice(m,1):m++;/^require\*/.test(a.mid)&&delete v[a.mid]},Ta=[],ha=function(a,b){if(4===a.executed)return k.trace("loader-circular-dependency",[Ta.concat(a.mid).join("-\x3e")]),!a.def||b?Y:a.cjs&&a.cjs.exports;if(!a.executed){if(!a.def)return Y;var d=a.mid,e=a.deps||[],c,y=[],l=0;for(a.executed=4;c=e[l++];){c=c===Pa?ca(a):c===Qa?a.cjs.exports:c===Ra?a.cjs:ha(c,b);if(c===Y)return a.executed=0,k.trace("loader-exec-module",
["abort",d]),Y;y.push(c)}k.trace("loader-run-factory",[a.mid]);var d=a.def,g;if(r("config-dojo-loader-catches"))try{g=q(d)?d.apply(null,y):d}catch(Ma){C("error",a.result=f("factoryThrew",[a,Ma]))}else g=q(d)?d.apply(null,y):d;a.result=void 0===g&&a.cjs?a.cjs.exports:g;na(a)}return a.result},L=0,fa=function(a){try{L++,a()}catch(d){throw d;}finally{L--}Oa()&&C("idle",[])},ia=function(){L||fa(function(){for(var a,b,e=0;e<B.length;)a=ma,b=B[e],ha(b),a!=ma?e=0:e++})};void 0===r("dojo-loader-eval-hint-url")&&
r.add("dojo-loader-eval-hint-url",1);var Ea="function"==typeof g.fixupUrl?g.fixupUrl:function(a){a+="";return a+(ba?(/\?/.test(a)?"\x26":"?")+ba:"")},Ga=function(a){var b=a.plugin;5!==b.executed||b.load||la(b);var e=function(b){a.result=b;X(a);na(a);ia()};b.load?b.load(a.prid,a.req,e):b.loadQ?b.loadQ.push(a):(b.loadQ=[a],B.unshift(b),ya(b))},I=0,Ua=function(a,b){r("config-stripStrict")&&(a=a.replace(/(["'])use strict\1/g,""));if(r("config-dojo-loader-catches"))try{a===I?I.call(null):k.eval(a,r("dojo-loader-eval-hint-url")?
b.url:b.mid)}catch(t){C("error",f("evalModuleThrew",b))}else a===I?I.call(null):k.eval(a,r("dojo-loader-eval-hint-url")?b.url:b.mid)},ya=function(a){var b=a.mid,c=a.url;if(!(a.executed||a.injected||z[b]||a.url&&(a.pack&&z[a.url]===a.pack||1==z[a.url])))if(Na(a),a.plugin)Ga(a);else{var h=function(){Va(a);if(2!==a.injected){if(r("dojo-enforceDefine")){C("error",f("noDefine",a));return}X(a);e(a,Fa);k.trace("loader-define-nonmodule",[a.url])}ia()};(I=H[b]||H["url:"+a.url])?(k.trace("loader-inject",["cache",
a.mid,c]),Ua(I,a),h()):(k.trace("loader-inject",["script",a.mid,c]),k.injectUrl(Ea(c),h,a))}},Ha=function(a,b,c){k.trace("loader-define-module",[a.mid,b]);if(2===a.injected)return C("error",f("multipleDefine",a)),a;e(a,{deps:b,def:c,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(b){a.cjs.exports=b},config:function(){return a.config}}});for(var d=0;b[d];d++)b[d]=E(b[d],a);X(a);q(c)||b.length||(a.result=c,na(a));return a},Va=function(a,e){for(var d=[],f,c;V.length;)c=V.shift(),e&&(c[0]=
e.shift()),f=c[0]&&E(c[0])||a,d.push([f,c[1],c[2]]);da(a);b(d,function(a){ga(Ha.apply(null,a))})},Z=0,W=l,za=l,W=function(){Z&&clearTimeout(Z);Z=0},za=function(){W();k.waitms&&(Z=F.setTimeout(function(){W();C("error",f("timeout",z))},k.waitms))};k.log=function(){try{for(var a=0;a<arguments.length;a++)console.log(arguments[a])}catch(d){}};k.trace=l;w=function(a,b,e){var d=arguments.length,f=["require","exports","module"],c=[0,a,b];1==d?c=[0,q(a)?f:[],a]:2==d&&u(a)?c=[a,q(b)?f:[],b]:3==d&&(c=[a,b,e]);
k.trace("loader-define",c.slice(0,2));(d=c[0]&&E(c[0]))&&!z[d.mid]?ga(Ha(d,c[1],c[2])):(r("ie-event-behavior"),V.push(c))};w.amd={vendor:"dojotoolkit.org"};e(e(k,n.loaderPatch),g.loaderPatch);N("error",function(a){try{if(console.error(a),a instanceof Error){for(var b in a)console.log(b+":",a[b]);console.log(".")}}catch(t){}});e(k,{uid:oa,cache:H,packs:G});F.define?C("error",f("defineAlreadyDefined",0)):(F.define=w,F.require=k,b(wa,function(a){J(a)}),N=A.deps||g.deps||n.deps,A=A.callback||g.callback||
n.callback,k.boot=N||A?[N||[],A]:0)})(this.dojoConfig||this.djConfig||this.require||{},{async:1,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../dgrid1",main:"OnDemandGrid",name:"dgrid1"},{location:"../dstore",main:"Store",name:"dstore"},{location:"../put-selector",
main:"put",name:"put-selector"},{location:"../xstyle",name:"xstyle"},{location:"../moment",main:"moment.js",name:"moment"},{location:"../esri",name:"esri"}]});
require({cache:{"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(g,n){n.add("bug-for-in-skips-shadowed",function(){for(var b in{toString:1})return 0;return 1});var m=n("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],l=m.length,p=function(b,e,f){f||(f=b[0]&&g.scopeMap[b[0]]?g.scopeMap[b.shift()][1]:g.global);try{for(var c=0;c<b.length;c++){var l=b[c];if(!(l in f))if(e)f[l]={};else return;
f=f[l]}return f}catch(k){}},x=Object.prototype.toString,q=function(b,e,f){return(f||[]).concat(Array.prototype.slice.call(b,e||0))},u=/\{([^\}]+)\}/g,c={_extraNames:m,_mixin:function(b,e,f){var c,g,k,p={};for(c in e)g=e[c],c in b&&(b[c]===g||c in p&&p[c]===g)||(b[c]=f?f(g):g);if(n("bug-for-in-skips-shadowed")&&e)for(k=0;k<l;++k)c=m[k],g=e[c],c in b&&(b[c]===g||c in p&&p[c]===g)||(b[c]=f?f(g):g);return b},mixin:function(b,e){b||(b={});for(var f=1,g=arguments.length;f<g;f++)c._mixin(b,arguments[f]);
return b},setObject:function(b,e,c){var f=b.split(".");b=f.pop();return(c=p(f,!0,c))&&b?c[b]=e:void 0},getObject:function(b,e,c){return b?p(b.split("."),e,c):c},exists:function(b,e){return void 0!==c.getObject(b,!1,e)},isString:function(b){return"string"==typeof b||b instanceof String},isArray:Array.isArray||function(b){return"[object Array]"==x.call(b)},isFunction:function(b){return"[object Function]"===x.call(b)},isObject:function(b){return void 0!==b&&(null===b||"object"==typeof b||c.isArray(b)||
c.isFunction(b))},isArrayLike:function(b){return!!b&&!c.isString(b)&&!c.isFunction(b)&&!(b.tagName&&"form"==b.tagName.toLowerCase())&&(c.isArray(b)||isFinite(b.length))},isAlien:function(b){return b&&!c.isFunction(b)&&/\{\s*\[native code\]\s*\}/.test(String(b))},extend:function(b,e){for(var f=1,g=arguments.length;f<g;f++)c._mixin(b.prototype,arguments[f]);return b},_hitchArgs:function(b,e){var f=c._toArray(arguments,2),l=c.isString(e);return function(){var m=c._toArray(arguments),k=l?(b||g.global)[e]:
e;return k&&k.apply(b||this,f.concat(m))}},hitch:function(b,e){if(2<arguments.length)return c._hitchArgs.apply(g,arguments);e||(e=b,b=null);if(c.isString(e)){b=b||g.global;if(!b[e])throw['lang.hitch: scope["',e,'"] is null (scope\x3d"',b,'")'].join("");return function(){return b[e].apply(b,arguments||[])}}return b?function(){return e.apply(b,arguments||[])}:e},delegate:function(){function b(){}return function(e,f){b.prototype=e;var g=new b;b.prototype=null;f&&c._mixin(g,f);return g}}(),_toArray:n("ie")?
function(){function b(b,c,g){g=g||[];for(c=c||0;c<b.length;c++)g.push(b[c]);return g}return function(c){return(c.item?b:q).apply(this,arguments)}}():q,partial:function(b){return c.hitch.apply(g,[null].concat(c._toArray(arguments)))},clone:function(b){if(!b||"object"!=typeof b||c.isFunction(b))return b;if(b.nodeType&&"cloneNode"in b)return b.cloneNode(!0);if(b instanceof Date)return new Date(b.getTime());if(b instanceof RegExp)return new RegExp(b);var e,f,g;if(c.isArray(b))for(e=[],f=0,g=b.length;f<
g;++f)f in b&&(e[f]=c.clone(b[f]));else e=b.constructor?new b.constructor:{};return c._mixin(e,b,c.clone)},trim:String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(b,e,f){return b.replace(f||u,c.isFunction(e)?e:function(b,f){return c.getObject(f,!1,e)})}};c.mixin(g,c);return c})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(g,n,m,l){var p,x=function(){return this}(),q={},u={},
c={config:n,global:x,dijit:q,dojox:u},q={dojo:["dojo",c],dijit:["dijit",q],dojox:["dojox",u]};l=m.map&&m.map[l.id.match(/[^\/]+/)[0]];for(p in l)q[p]?q[p][0]=l[p]:q[p]=[l[p],{}];for(p in q)l=q[p],l[1]._scopeName=l[0],n.noGlobals||(x[l[0]]=l[1]);c.scopeMap=q;c.baseUrl=c.config.baseUrl=m.baseUrl;c.isAsync=m.async;c.locale=n.locale;x="$Rev: 594ed6f $".match(/[0-9a-f]{7,}/);c.version={major:1,minor:12,patch:2,flag:"",revision:x?x[0]:NaN,toString:function(){var b=c.version;return b.major+"."+b.minor+"."+
b.patch+b.flag+" ("+b.revision+")"}};g("csp-restrictions")||Function("d","d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(c);c.exit=function(){};g.add("dojo-debug-messages",!!n.isDebug);c.deprecated=c.experimental=function(){};g("dojo-debug-messages")&&(c.deprecated=function(b,c,f){b="DEPRECATED: "+b;c&&(b+=" "+c);f&&(b+=" -- will be removed in version: "+f);console.warn(b)},c.experimental=function(b,c){var e="EXPERIMENTAL: "+b+" -- APIs subject to change without notice.";
c&&(e+=" "+c);console.warn(e)});if(n.modulePaths){c.deprecated("dojo.modulePaths","use paths configuration");g={};for(p in n.modulePaths)g[p.replace(/\./g,"/")]=n.modulePaths[p];m({paths:g})}c.moduleUrl=function(b,e){c.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var f=null;b&&(f=m.toUrl(b.replace(/\./g,"/")+(e?"/"+e:"")+"/*.*").replace(/\/\*\.\*/,"")+(e?"":"/"));return f};c._hasResource={};return c})},"dojo/has":function(){define(["require","module"],function(g,n){var m=g.has||function(){};
m.clearElement=function(g){g.innerHTML="";return g};m.normalize=function(g,p){var l=g.match(/[\?:]|[^:\?]*/g),n=0,u=function(c){var b=l[n++];if(":"==b)return 0;if("?"==l[n++]){if(!c&&m(b))return u();u(!0);return u(c)}return b||0};return(g=u())&&p(g)};m.load=function(g,m,n){g?m([g],n):n()};return m})},"dojo/_base/config":function(){define(["../has","require"],function(g,n){var m={},l=n.rawConfig,p;for(p in l)m[p]=l[p];!m.locale&&"undefined"!=typeof navigator&&(l=navigator.languages&&navigator.languages.length?
navigator.languages[0]:navigator.language||navigator.userLanguage)&&(m.locale=l.toLowerCase());return m})},"dojo/sniff":function(){define(["./has"],function(g){return g})}}});(function(){var g=this.require;g({cache:{}});!g.async&&g(["dojo"]);g.boot&&g.apply(null,g.boot)})();
//>>built
require({cache:{"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(n,a,f,p){var g=function(){return this}(),e={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,
0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:g.Worker&&!1,io:{errorHandler:function(c,b){a.publish("esri.Error",[c])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:"server.arcgisonline.com services.arcgisonline.com www.arcgis.com js.arcgis.com jsdev.arcgis.com jsqa.arcgis.com tiles.arcgis.com tiles1.arcgis.com tiles2.arcgis.com tiles3.arcgis.com tiles4.arcgis.com basemaps.arcgis.com basemapsbeta.arcgis.com elevation3d.arcgis.com services.arcgis.com services1.arcgis.com services2.arcgis.com services3.arcgis.com services4.arcgis.com services5.arcgis.com services6.arcgis.com services7.arcgis.com static.arcgis.com utility.arcgis.com utility.arcgisonline.com geocode.arcgis.com geoenrich.arcgis.com qaext.arcgis.com staticqa.arcgis.com tilesqa.arcgis.com servicesqa.arcgis.com servicesqa1.arcgis.com servicesqa2.arcgis.com servicesqa3.arcgis.com geocodeqa.arcgis.com geoenrichqa.arcgis.com dev.arcgis.com devext.arcgis.com localvtiles.arcgis.com staticdev.arcgis.com tilesdevext.arcgis.com elevation3ddev.arcgis.com servicesdev.arcgis.com servicesdev1.arcgis.com servicesdev2.arcgis.com servicesdev3.arcgis.com geocodedev.arcgis.com geoenrichdev.arcgis.com basemapsdev.arcgis.com basemapsbetadev.arcgis.com".split(" "),
corsDetection:g.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};f("extend-esri")&&(p.config=e);n.noGlobals||(g.esriConfig=e);return e})},
"dojo/topic":function(){define(["./Evented"],function(n){var a=new n;return{publish:function(f,p){return a.emit.apply(a,arguments)},subscribe:function(f,p){return a.on.apply(a,arguments)}}})},"dojo/Evented":function(){define(["./aspect","./on"],function(n,a){function f(){}var p=n.after;f.prototype={on:function(g,e){return a.parse(this,g,e,function(a,b){return p(a,"on"+b,e,!0)})},emit:function(g,e){var c=[this];c.push.apply(c,arguments);return a.emit.apply(a,c)}};return f})},"dojo/aspect":function(){define([],
function(){function n(a,b,d,l){var c=a[b],e="around"==b,g;if(e){var f=d(function(){return c.advice(this,arguments)});g={remove:function(){f&&(f=a=d=null)},advice:function(a,b){return f?f.apply(a,b):c.advice(a,b)}}}else g={remove:function(){if(g.advice){var c=g.previous,l=g.next;l||c?(c?c.next=l:a[b]=l,l&&(l.previous=c)):delete a[b];a=d=g.advice=null}},id:a.nextId++,advice:d,receiveArguments:l};if(c&&!e)if("after"==b){for(;c.next&&(c=c.next););c.next=g;g.previous=c}else"before"==b&&(a[b]=g,g.next=
c,c.previous=g);else a[b]=g;return g}function a(a){return function(b,c,l,m){var d=b[c],e;d&&d.target==b||(b[c]=e=function(){for(var a=e.nextId,b=arguments,c=e.before;c;)c.advice&&(b=c.advice.apply(this,b)||b),c=c.next;if(e.around)var d=e.around.advice(this,b);for(c=e.after;c&&c.id<a;){if(c.advice)if(c.receiveArguments)var l=c.advice.apply(this,b),d=l===f?d:l;else d=c.advice.call(this,d,b);c=c.next}return d},d&&(e.around={advice:function(a,b){return d.apply(a,b)}}),e.target=b,e.nextId=e.nextId||0);
b=n(e||d,a,l,m);l=null;return b}}var f,p=a("after"),g=a("before"),e=a("around");return{before:g,around:e,after:p}})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(n,a,f){function p(a,d,l,e,g){if(e=d.match(/(.*):(.*)/))return d=e[2],e=e[1],c.selector(e,d).call(g,a,l);f("touch")&&(b.test(d)&&(l=x(l)),f("event-orientationchange")||"orientationchange"!=d||(d="resize",a=window,l=x(l)));E&&(l=E(l));if(a.addEventListener){var B=d in m,F=B?m[d]:d;
a.addEventListener(F,l,B);return{remove:function(){a.removeEventListener(F,l,B)}}}if(q&&a.attachEvent)return q(a,"on"+d,l);throw Error("Target must be an event emitter");}function g(){this.cancelable=!1;this.defaultPrevented=!0}function e(){this.bubbles=!1}var c=function(a,b,d,l){return"function"!=typeof a.on||"function"==typeof b||a.nodeType?c.parse(a,b,d,p,l,this):a.on(b,d)};c.pausable=function(a,b,d,l){var e;a=c(a,b,function(){if(!e)return d.apply(this,arguments)},l);a.pause=function(){e=!0};a.resume=
function(){e=!1};return a};c.once=function(a,b,d,l){var e=c(a,b,function(){e.remove();return d.apply(this,arguments)});return e};c.parse=function(a,b,d,l,e,m){var g;if(b.call)return b.call(m,a,d);b instanceof Array?g=b:-1<b.indexOf(",")&&(g=b.split(/\s*,\s*/));if(g){var u=[];b=0;for(var B;B=g[b++];)u.push(c.parse(a,B,d,l,e,m));u.remove=function(){for(var a=0;a<u.length;a++)u[a].remove()};return u}return l(a,b,d,e,m)};var b=/^touch/;c.matches=function(b,d,c,l,e){e=e&&"function"==typeof e.matches?e:
a.query;l=!1!==l;1!=b.nodeType&&(b=b.parentNode);for(;!e.matches(b,d,c);)if(b==c||!1===l||!(b=b.parentNode)||1!=b.nodeType)return!1;return b};c.selector=function(a,b,d){return function(l,e){function m(b){return c.matches(b,a,l,d,g)}var g="function"==typeof a?{matches:a}:this,u=b.bubble;return u?c(l,u(m),e):c(l,b,function(a){var b=m(a.target);if(b)return a.selectorTarget=b,e.call(b,a)})}};var d=[].slice,l=c.emit=function(a,b,c){var l=d.call(arguments,2),m="on"+b;if("parentNode"in a){var B=l[0]={},
F;for(F in c)B[F]=c[F];B.preventDefault=g;B.stopPropagation=e;B.target=a;B.type=b;c=B}do a[m]&&a[m].apply(a,l);while(c&&c.bubbles&&(a=a.parentNode));return c&&c.cancelable&&c},m=f("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!f("event-stopimmediatepropagation"))var t=function(){this.modified=this.immediatelyStopped=!0},E=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=t,a.apply(this,arguments)}};if(f("dom-addeventlistener"))c.emit=function(a,b,
d){if(a.dispatchEvent&&document.createEvent){var e=(a.ownerDocument||document).createEvent("HTMLEvents");e.initEvent(b,!!d.bubbles,!!d.cancelable);for(var m in d)m in e||(e[m]=d[m]);return a.dispatchEvent(e)&&e}return l.apply(c,arguments)};else{c._fixEvent=function(a,b){a||(a=(b&&(b.ownerDocument||b.document||b).parentWindow||window).event);if(!a)return a;try{C&&a.type==C.type&&a.srcElement==C.target&&(a=C)}catch(G){}if(!a.target)switch(a.target=a.srcElement,a.currentTarget=b||a.srcElement,"mouseover"==
a.type&&(a.relatedTarget=a.fromElement),"mouseout"==a.type&&(a.relatedTarget=a.toElement),a.stopPropagation||(a.stopPropagation=A,a.preventDefault=w),a.type){case "keypress":var c="charCode"in a?a.charCode:a.keyCode;10==c?(c=0,a.keyCode=13):13==c||27==c?c=0:3==c&&(c=99);a.charCode=c;c=a;c.keyChar=c.charCode?String.fromCharCode(c.charCode):"";c.charOrCode=c.keyChar||c.keyCode}return a};var C,D=function(a){this.handle=a};D.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var y=function(a){return function(b){b=
c._fixEvent(b,this);var d=a.call(this,b);b.modified&&(C||setTimeout(function(){C=null}),C=b);return d}},q=function(a,b,c){c=y(c);if(((a.ownerDocument?a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=top||5.8>f("jscript"))&&!f("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var d=a[b];if(!d||!d.listeners){var l=d,d=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");
d.listeners=[];a[b]=d;d.global=this;l&&d.listeners.push(_dojoIEListeners_.push(l)-1)}d.listeners.push(a=d.global._dojoIEListeners_.push(c)-1);return new D(a)}return n.after(a,b,c,!0)},A=function(){this.cancelBubble=!0},w=c._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(z){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(f("touch"))var v=function(){},K=window.orientation,x=function(a){return function(b){var c=b.corrected;if(!c){var d=
b.type;try{delete b.type}catch(F){}if(b.type){if(f("touch-can-modify-event-delegate"))v.prototype=b,c=new v;else{var c={},l;for(l in b)c[l]=b[l]}c.preventDefault=function(){b.preventDefault()};c.stopPropagation=function(){b.stopPropagation()}}else c=b,c.type=d;b.corrected=c;if("resize"==d){if(K==window.orientation)return null;K=window.orientation;c.type="orientationchange";return a.call(this,c)}"rotation"in c||(c.rotation=0,c.scale=1);if(window.TouchEvent&&b instanceof TouchEvent){var d=c.changedTouches[0],
e;for(e in d)delete c[e],c[e]=d[e]}}return a.call(this,c)}};return c})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(n,a,f){var p=function(){return this}(),g=p.location,e=g.pathname,c=g.protocol,g={version:"3.21",_appBaseUrl:c+"//"+g.host+e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]))};a.noGlobals||(p.esri=g);n.isAsync||f.add("extend-esri",1);(g.dijit=g.dijit||{})._arcgisUrl=("http:"===c||"https:"===c?c:"http:")+"//www.arcgis.com/sharing/rest";
return g})},"esri/layers/vectorTiles/core/workers/WorkerConnection":function(){define(["require","exports","./WorkerProxy"],function(n,a,f){return function(){function a(a,e,c){this.id=c;this._target="function"===typeof a?new a(this):a;this.proxy=new f(this._target,e,this)}a.prototype.invoke=function(a,e,c){return this.proxy.invoke(a,e,c,this.id)};return a}()})},"esri/layers/vectorTiles/core/workers/WorkerProxy":function(){define(["require","exports","dojo/Deferred"],function(n,a,f){return function(){function a(a,
e,c){this.parentModule=a;this.worker=e;this.connection=c;this.msgCount=0;this.outgoingJobs={};this.incomingJobs={};this.msgCount=0;this.outgoingJobs={};this.incomingJobs={}}a.prototype.invoke=function(a,e,c,b){var d=this,l=++this.msgCount,m=new f(function(a){d.worker.postMessage({type:"\x3ccancel\x3e",id:l,connection:b,data:{reason:a}});d.outgoingJobs[l]&&delete d.outgoingJobs[l]});this.outgoingJobs[l]=m;this.worker.postMessage({type:a,id:l,connection:b,data:e},c);return m.promise};a.prototype.message=
function(a){var e=this;if(a&&a.data){var c=a.data.type;if(c){var b=a.data,d=a.data.id,l=a.data.connection;if("\x3cresponse\x3e"===c&&d){if(a=this.outgoingJobs[d])delete this.outgoingJobs[d],b.error?a.reject(b.error):a.resolve(b.data)}else"\x3ccancel\x3e"===c&&d?(a=this.incomingJobs[d])&&a.cancel(b.data.reason||"cancel"):(a=this.parentModule[c],"function"===typeof a&&(b=a.call(this.parentModule,b.data,this.connection),this.incomingJobs[d]=b,b.then(function(a){e.worker.postMessage({type:"\x3cresponse\x3e",
id:d,connection:l,data:a?a.data:null},a?a.buffers:[])}).otherwise(function(a){a||(a="Error encountered at method "+c);e.worker.postMessage({type:"\x3cresponse\x3e",id:d,connection:l,data:null,error:a})}).always(function(){delete e.incomingJobs[d]})))}}};return a}()})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(n,a,f,p,g){var e=Object.freeze||function(){},c=function(a,c,d,l,e){2===c&&m.instrumentRejected&&
0===a.length&&m.instrumentRejected(d,!1,l,e);for(e=0;e<a.length;e++)b(a[e],c,d,l)},b=function(a,b,c,e){var g=a[b],f=a.deferred;if(g)try{var t=g(c);if(0===b)"undefined"!==typeof t&&l(f,b,t);else{if(t&&"function"===typeof t.then){a.cancel=t.cancel;t.then(d(f,1),d(f,2),d(f,0));return}l(f,1,t)}}catch(w){l(f,2,w)}else l(f,b,c);2===b&&m.instrumentRejected&&m.instrumentRejected(c,!!g,e,f.promise)},d=function(a,b){return function(c){l(a,b,c)}},l=function(a,b,c){if(!a.isCanceled())switch(b){case 0:a.progress(c);
break;case 1:a.resolve(c);break;case 2:a.reject(c)}},m=function(a){var d=this.promise=new p,l=this,g,t,q,A=!1,w=[];Error.captureStackTrace&&(Error.captureStackTrace(l,m),Error.captureStackTrace(d,m));this.isResolved=d.isResolved=function(){return 1===g};this.isRejected=d.isRejected=function(){return 2===g};this.isFulfilled=d.isFulfilled=function(){return!!g};this.isCanceled=d.isCanceled=function(){return A};this.progress=function(a,b){if(g){if(!0===b)throw Error("This deferred has already been fulfilled.");
return d}c(w,0,a,null,l);return d};this.resolve=function(a,b){if(g){if(!0===b)throw Error("This deferred has already been fulfilled.");return d}c(w,g=1,t=a,null,l);w=null;return d};var v=this.reject=function(a,b){if(g){if(!0===b)throw Error("This deferred has already been fulfilled.");return d}Error.captureStackTrace&&Error.captureStackTrace(q={},v);c(w,g=2,t=a,q,l);w=null;return d};this.then=d.then=function(a,c,l){var e=[l,a,c];e.cancel=d.cancel;e.deferred=new m(function(a){return e.cancel&&e.cancel(a)});
g&&!w?b(e,g,t,q):w.push(e);return e.deferred.promise};this.cancel=d.cancel=function(b,c){if(!g){if(a){var d=a(b);b="undefined"===typeof d?b:d}A=!0;if(!g)return"undefined"===typeof b&&(b=new f),v(b),b;if(2===g&&t===b)return b}else if(!0===c)throw Error("This deferred has already been fulfilled.");};e(d)};m.prototype.toString=function(){return"[object Deferred]"};g&&g(m);return m})},"dojo/errors/CancelError":function(){define(["./create"],function(n){return n("CancelError",null,null,{dojoType:"cancel",
log:!1})})},"dojo/errors/create":function(){define(["../_base/lang"],function(n){return function(a,f,p,g){p=p||Error;var e=function(a){if(p===Error){Error.captureStackTrace&&Error.captureStackTrace(this,e);var b=Error.call(this,a),c;for(c in b)b.hasOwnProperty(c)&&(this[c]=b[c]);this.message=a;this.stack=b.stack}else p.apply(this,arguments);f&&f.apply(this,arguments)};e.prototype=n.delegate(p.prototype,g);e.prototype.name=a;return e.prototype.constructor=e}})},"dojo/promise/Promise":function(){define(["../_base/lang"],
function(n){function a(){throw new TypeError("abstract");}return n.extend(function(){},{then:function(f,p,g){a()},cancel:function(f,p){a()},isResolved:function(){a()},isRejected:function(){a()},isFulfilled:function(){a()},isCanceled:function(){a()},always:function(a){return this.then(a,a)},otherwise:function(a){return this.then(null,a)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer",
"../has","../_base/lang","../_base/array"],function(n,a,f,p){function g(a,b,c){if(!a||!1!==a.log){var d="";a&&a.stack&&(d+=a.stack);b&&b.stack&&(d+="\n    ----------------------------------------\n    rejected"+b.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));c&&c.stack&&(d+="\n    ----------------------------------------\n"+c.stack);console.error(a,d)}}function e(a,b,c,d){b||g(a,c,d)}function c(a,c,e,g){p.some(d,function(b){if(b.error===a)return c&&(b.handled=!0),!0})||d.push({error:a,
rejection:e,handled:c,deferred:g,timestamp:(new Date).getTime()});l||(l=setTimeout(b,m))}function b(){var a=(new Date).getTime(),c=a-m;d=p.filter(d,function(a){return a.timestamp<c?(a.handled||g(a.error,a.rejection,a.deferred),!1):!0});l=d.length?setTimeout(b,d[0].timestamp+m-a):!1}a.add("config-useDeferredInstrumentation","report-unhandled-rejections");var d=[],l=!1,m=1E3;return function(b){var d=a("config-useDeferredInstrumentation");if(d){n.on("resolved",f.hitch(console,"log","resolved"));n.on("rejected",
f.hitch(console,"log","rejected"));n.on("progress",f.hitch(console,"log","progress"));var l=[];"string"===typeof d&&(l=d.split(","),d=l.shift());if("report-rejections"===d)b.instrumentRejected=e;else if("report-unhandled-rejections"===d||!0===d||1===d)b.instrumentRejected=c,m=parseInt(l[0],10)||m;else throw Error("Unsupported instrumentation usage \x3c"+d+"\x3e");}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(n,a,f){function p(a){setTimeout(function(){e.apply(g,
a)},0)}var g=new f,e=g.emit;g.emit=null;a.prototype.trace=function(){var a=n._toArray(arguments);this.then(function(b){p(["resolved",b].concat(a))},function(b){p(["rejected",b].concat(a))},function(b){p(["progress",b].concat(a))});return this};a.prototype.traceRejected=function(){var a=n._toArray(arguments);this.otherwise(function(b){p(["rejected",b].concat(a))});return this};return g})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(n,a,f){function p(a){return c[a]=
new Function("item","index","array",a)}function g(a){var b=!a;return function(d,l,e){var m=0,g=d&&d.length||0,f;g&&"string"==typeof d&&(d=d.split(""));"string"==typeof l&&(l=c[l]||p(l));if(e)for(;m<g;++m){if(f=!l.call(e,d[m],m,d),a^f)return!f}else for(;m<g;++m)if(f=!l(d[m],m,d),a^f)return!f;return b}}function e(a){var c=1,l=0,e=0;a||(c=l=e=-1);return function(m,g,f,t){if(t&&0<c)return d.lastIndexOf(m,g,f);t=m&&m.length||0;var E=a?t+e:l;f===b?f=a?l:t+e:0>f?(f=t+f,0>f&&(f=l)):f=f>=t?t+e:f;for(t&&"string"==
typeof m&&(m=m.split(""));f!=E;f+=c)if(m[f]==g)return f;return-1}}var c={},b,d={every:g(!1),some:g(!0),indexOf:e(!0),lastIndexOf:e(!1),forEach:function(a,b,d){var l=0,e=a&&a.length||0;e&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=c[b]||p(b));if(d)for(;l<e;++l)b.call(d,a[l],l,a);else for(;l<e;++l)b(a[l],l,a)},map:function(a,b,d,e){var l=0,m=a&&a.length||0;e=new (e||Array)(m);m&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=c[b]||p(b));if(d)for(;l<m;++l)e[l]=b.call(d,a[l],
l,a);else for(;l<m;++l)e[l]=b(a[l],l,a);return e},filter:function(a,b,d){var e=0,l=a&&a.length||0,m=[],g;l&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=c[b]||p(b));if(d)for(;e<l;++e)g=a[e],b.call(d,g,e,a)&&m.push(g);else for(;e<l;++e)g=a[e],b(g,e,a)&&m.push(g);return m},clearCache:function(){c={}}};f.mixin(n,d);return d})},"esri/layers/vectorTiles/views/vectorTiles/WorkerTileHandler":function(){define("require exports dojo/Deferred ../../core/promiseUtils ./WorkerTile ./style/StyleRepository".split(" "),
function(n,a,f,p,g,e){return function(){function a(){this._tiles=new Map;this._spriteInfo={};this._glyphInfo={}}a.prototype.reset=function(){var a=new f;this._spriteInfo={};this._glyphInfo={};var d=this._tiles;d.forEach(function(a){return a.setObsolete()});d.clear();a.resolve();return a.promise};a.prototype.getLayers=function(){return this._layers};a.prototype.setLayers=function(a){this._layers=(new e(a)).layers;return p.resolve({data:""})};a.prototype.getTile=function(a,d){var b=this,c=a.key,e=g.pool.acquire();
e.initialize(a.key,a.refKey,this,a.rotation);var f=a.cacheTile;return d.invoke("fetchTileData",a.refKey).then(function(a){return e.setDataAndParse(a.protobuff,d).then(function(a){f&&6!==e.status&&b._tiles.set(c,e);return a}).otherwise(function(a){e.setObsolete();g.pool.release(e);b._tiles["delete"](e.tileKey);return p.reject(a)})}).otherwise(function(a){e.setObsolete();if(b._tiles.has(e.tileKey))b._tiles["delete"](e.tileKey);return p.reject(a)}).always(function(a){f||g.pool.release(e);return a})};
a.prototype.update=function(a){var b=this._tiles.get(a.key);return b?b.updateSymbols(a.rotation):p.reject()};a.prototype.destructTileData=function(a){this._tiles.has(a.key)&&(g.pool.release(this._tiles.get(a.key)),this._tiles["delete"](a.key));return p.resolve()};a.prototype.fetchSprites=function(a,d){var b=[],c=this._spriteInfo;a.forEach(function(a){void 0===c[a]&&b.push(a)});return 0===b.length?p.resolve():d.invoke("getSprites",{sprites:b}).then(function(a){a=a.spriteItems;for(var b in a)c[b]=a[b]})};
a.prototype.getSpriteItems=function(){return this._spriteInfo};a.prototype.fetchGlyphs=function(a,d,c,e){var b=[],l=this._glyphInfo[d];l?c.forEach(function(a){l[a]||b.push(a)}):(l=this._glyphInfo[d]=[],c.forEach(function(a){return b.push(a)}));return 0===b.length?p.resolve():e.invoke("getGlyphs",{tileID:a,font:d,codePoints:b}).then(function(a){a=a.glyphItems;for(var b in a)l[b]=a[b]})};a.prototype.getGlyphItems=function(a){return this._glyphInfo[a]};return a}()})},"esri/layers/vectorTiles/core/promiseUtils":function(){define(["require",
"exports","dojo/Deferred","dojo/promise/all","./Error"],function(n,a,f,p,g){function e(a){if(a){if("function"!==typeof a.forEach){var b=Object.keys(a),d=b.map(function(b){return a[b]});return e(d).then(function(a){var d={};b.forEach(function(b,c){return d[b]=a[c]});return d})}var c=new f,g=[],t=a.length;0===t&&c.resolve(g);a.forEach(function(a){var b={promise:a};g.push(b);a.then(function(a){b.value=a}).otherwise(function(a){b.error=a}).then(function(){--t;0===t&&c.resolve(g)})});return c.promise}}
Object.defineProperty(a,"__esModule",{value:!0});a.all=function(a){return p(a)};a.eachAlways=e;a.create=function(a,b){var d=new f(b);a(function(a){void 0===a&&(a=null);return d.resolve(a)},d.reject);return d.promise};a.reject=function(a){var b=new f;b.reject(a);return b.promise};a.resolve=function(a){void 0===a&&(a=null);var b=new f;b.resolve(a);return b.promise};a.after=function(a,b){void 0===b&&(b=null);var d=0,c=new f(function(){d&&(clearTimeout(d),d=0)}),d=setTimeout(function(){c.resolve(b)},
a);return c.promise};a.timeout=function(a,b,d){var c=0,e=new f(a.cancel);a.then(function(a){e.isFulfilled()||(e.resolve(a),c&&(clearTimeout(c),c=0))});a.otherwise(function(a){e.isFulfilled()||(e.reject(a),c&&(clearTimeout(c),c=0))});c=setTimeout(function(){var a=d||new g("promiseUtils:timeout","The wrapped promise did not resolve within "+b+" ms");e.reject(a)},b);return e.promise};a.wrapCallback=function(a){var b=!1,d=new f(function(){return b=!0});a(function(a){b||d.resolve(a)});return d.promise}})},
"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(n,a,f){var p=n.some;return function(g){var e,c;g instanceof Array?c=g:g&&"object"===typeof g&&(e=g);var b,d=[];if(e){c=[];for(var l in e)Object.hasOwnProperty.call(e,l)&&(d.push(l),c.push(e[l]));b={}}else c&&(b=[]);if(!c||!c.length)return(new a).resolve(b);var m=new a;m.promise.always(function(){b=d=null});var t=c.length;p(c,function(a,c){e||d.push(c);f(a,function(a){m.isFulfilled()||(b[d[c]]=a,0===--t&&m.resolve(b))},
m.reject);return m.isFulfilled()});return m.promise}})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(n,a){return function(f,p,g,e){var c=f&&"function"===typeof f.then,b=c&&f instanceof a;if(!c)return 1<arguments.length?p?p(f):f:(new n).resolve(f);b||(c=new n(f.cancel),f.then(c.resolve,c.reject,c.progress),f=c.promise);return p||g||e?f.then(p,g,e):f}})},"esri/layers/vectorTiles/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./Message"],
function(n,a,f,p){n=function(a){function e(c,b,d){var l=a.call(this,c,b,d)||this;return l instanceof e?l:new e(c,b,d)}f(e,a);return e}(p);n.prototype.type="error";return n})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,f){a.__proto__=f}||function(a,f){for(var p in f)f.hasOwnProperty(p)&&(a[p]=f[p])};return function(a,f){function p(){this.constructor=a}n(a,f);a.prototype=
null===f?Object.create(f):(p.prototype=f.prototype,new p)}}()})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","dojo/string"],function(n,a,f){return function(){function a(g,e,c){this instanceof a&&(this.name=g,this.message=e&&f.substitute(e,c,function(a){return null==a?"":a})||"",this.details=c)}a.prototype.toString=function(){return"["+this.name+"]: "+this.message};return a}()})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(n,a){var f=
/[&<>'"\/]/g,p={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},g={};a.setObject("dojo.string",g);g.escape=function(a){return a?a.replace(f,function(a){return p[a]}):""};g.rep=function(a,c){if(0>=c||!a)return"";for(var b=[];;){c&1&&b.push(a);if(!(c>>=1))break;a+=a}return b.join("")};g.pad=function(a,c,b,d){b||(b="0");a=String(a);c=g.rep(b,Math.ceil((c-a.length)/b.length));return d?a+c:c+a};g.substitute=function(e,c,b,d){d=d||n.global;b=b?a.hitch(d,
b):function(a){return a};return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(e,g,f){if(""==g)return"$";e=a.getObject(g,!1,c);f&&(e=a.getObject(f,!1,d).call(d,e,g));f=b(e,g);if("undefined"===typeof f)throw Error('string.substitute could not find key "'+g+'" in template');return f.toString()})};g.trim=String.prototype.trim?a.trim:function(a){a=a.replace(/^\s+/,"");for(var c=a.length-1;0<=c;c--)if(/\S/.test(a.charAt(c))){a=a.substring(0,c+1);break}return a};return g})},"esri/layers/vectorTiles/views/vectorTiles/WorkerTile":function(){define("require exports dojo/Deferred ../../core/promiseUtils ../../core/executeAsync ../../core/ObjectPool ./VertexMemoryBuffer ./IndexMemoryBuffer ./TileParser ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ./Placement ./GeometryUtils".split(" "),
function(n,a,f,p,g,e,c,b,d,l,m,t,E,C,D){n=function(){function a(){this.status=this.rotation=0;this._symbolBuckets=[];this.placementEngine=new C.PlacementEngine;this.polygonVertexBuffer=new c.PolygonMemoryBuffer;this.polygonOutlineVertexBuffer=new c.PolygonOutlineMemoryBuffer;this.polygonIndexBuffer=new b.TriangleElementMemoryBuffer;this.polygonOutlineIndexBuffer=new b.TriangleElementMemoryBuffer;this.lineVertexBuffer=new c.LineMemoryBuffer;this.lineIndexBuffer=new b.TriangleElementMemoryBuffer;this.markerVertexBuffer=
new c.SymbolMemoryBuffer;this.markerIndexBuffer=new b.TriangleElementMemoryBuffer;this.textVertexBuffer=new c.SymbolMemoryBuffer;this.textIndexBuffer=new b.TriangleElementMemoryBuffer}a.prototype.initialize=function(a,b,d,c){void 0===c&&(c=0);this.tileKey=a;this.refKey=b;this._workerTileHandler=d;this.rotation=c;this.placementEngine.setAngle(D.C_DEG_TO_RAD*c)};a.prototype.release=function(){this.tileKey=this.refKey="";this.rotation=this.status=0;this.polygonVertexBuffer.reset();this.polygonOutlineVertexBuffer.reset();
this.polygonIndexBuffer.reset();this.polygonOutlineIndexBuffer.reset();this.lineVertexBuffer.reset();this.lineIndexBuffer.reset();this.markerVertexBuffer.reset();this.markerIndexBuffer.reset();this.textVertexBuffer.reset();this.textIndexBuffer.reset();this.placementEngine.reset();this._symbolBuckets.length=0;this._workerTileHandler=null};a.prototype.setDataAndParse=function(a,b){var d=this,c=new f(function(a){d.status=6});this._parse(a,b).then(function(a){d.status=4;for(var b=new Uint32Array([2,d.polygonVertexBuffer.sizeInBytes,
3,d.polygonOutlineVertexBuffer.sizeInBytes,6,d.polygonIndexBuffer.sizeInBytes,7,d.polygonOutlineIndexBuffer.sizeInBytes,0,d.lineVertexBuffer.sizeInBytes,8,d.lineIndexBuffer.sizeInBytes,4,d.markerVertexBuffer.sizeInBytes,9,d.markerIndexBuffer.sizeInBytes,5,d.textVertexBuffer.sizeInBytes,10,d.textIndexBuffer.sizeInBytes]),e=[],g=a.length,f=0;f<g;f++){var p=a[f];if(p instanceof m)e.push(p.layerIndex),e.push(1),e.push(p.polygonIndexStart),e.push(p.polygonIndexCount),e.push(p.polygonOutlineIndexStart),
e.push(p.polygonOutlineIndexCount);else if(p instanceof t)e.push(p.layerIndex),e.push(2),e.push(p.triangleIndexStart),e.push(p.triangleIndexCount),e.push(p.connectorStart),e.push(p.connectorCount);else if(p instanceof E){e.push(p.layerIndex);e.push(3);e.push(p.sdfMarker?1:0);var C=p.markerPageMap;e.push(C.size);C.forEach(function(a,b){e.push(b);e.push(a[0]);e.push(a[1])});p=p.glyphsPageMap;e.push(p.size);p.forEach(function(a,b){e.push(b);e.push(a[0]);e.push(a[1])})}else p instanceof l&&(e.push(p.layerIndex),
e.push(0))}a=new Uint32Array(e);var g=d.polygonVertexBuffer.toBuffer(),f=d.polygonOutlineVertexBuffer.toBuffer(),p=d.polygonIndexBuffer.toBuffer(),C=d.polygonOutlineIndexBuffer.toBuffer(),B=d.lineVertexBuffer.toBuffer(),F=d.lineIndexBuffer.toBuffer(),u=d.markerVertexBuffer.toBuffer(),q=d.markerIndexBuffer.toBuffer(),D=d.textVertexBuffer.toBuffer(),v=d.textIndexBuffer.toBuffer();c.resolve({data:{bufferDataInfo:b.buffer,bucketDataInfo:a.buffer,bufferData:[g,f,p,C,B,F,u,q,D,v]},buffers:[g,p,f,C,B,F,
u,q,D,v,b.buffer,a.buffer]})});return c.promise};a.prototype.addBucket=function(a){this._symbolBuckets.push(a)};a.prototype.updateSymbols=function(a){var b=this,d=this._symbolBuckets;if(!d||0===d.length)return p.resolve({data:null});this.rotation=a;var c=this.placementEngine;c.reset();c.setAngle(a/256*360*D.C_DEG_TO_RAD);var e=this.markerVertexBuffer;e.reset();var l=this.markerIndexBuffer;l.reset();var m=this.textVertexBuffer;m.reset();var f=this.textIndexBuffer;f.reset();var t=[],E=d.length,C=0;
return g(function(){if(6===b.status||0===b.status)return!0;if(C<E){var a=d[C++].copy(e,l,m,f,c);a&&(t.push(a),a.updateSymbols())}return C>=E},5).then(function(){if(6===b.status||0===b.status||0===e.sizeInBytes&&0===l.sizeInBytes&&0===m.sizeInBytes&&0===f.sizeInBytes)return{data:null};var a=new Uint32Array([4,e.sizeInBytes,9,l.sizeInBytes,5,m.sizeInBytes,10,f.sizeInBytes]),d=[];E=t.length;for(var c=0;c<E;c++){var g=t[c];d.push(g.layerIndex);d.push(3);d.push(g.sdfMarker?1:0);var p=g.markerPageMap;d.push(p.size);
p.forEach(function(a,b){d.push(b);d.push(a[0]);d.push(a[1])});g=g.glyphsPageMap;d.push(g.size);g.forEach(function(a,b){d.push(b);d.push(a[0]);d.push(a[1])})}var c=new Uint32Array(d),g=e.toBuffer(),p=l.toBuffer(),x=m.toBuffer(),C=f.toBuffer();return{data:{bufferDataInfo:a.buffer,bucketDataInfo:c.buffer,bufferData:[g,p,x,C]},buffers:[g,p,x,C,a.buffer,c.buffer]}}).otherwise(function(a){return p.resolve({data:null})})};a.prototype.setObsolete=function(){this.status=6};a.prototype.getLayers=function(){return this._workerTileHandler.getLayers()};
a.prototype.getWorkerTileHandler=function(){return this._workerTileHandler};a.prototype._parse=function(a,b){if(!a||0===a.byteLength)return p.resolve([]);this.status=2;return(new d(a,this,b)).parse()};return a}();n.pool=new e(n);return n})},"esri/layers/vectorTiles/core/executeAsync":function(){define(["require","exports","dojo/Deferred","./now"],function(n,a,f,p){return function(a,e){var c;if(!e||0>=e)e=500;var b=new f(function(){c&&clearTimeout(c)}),d=function(){if(!b.isFulfilled()){for(var l=p(),
g=!1;!g&&p()-l<e;)g=!0===a();g?b.resolve():c=setTimeout(d,0)}};c=setTimeout(d,0);return b.promise}})},"esri/layers/vectorTiles/core/now":function(){define(["require","exports","./global"],function(n,a,f){return function(){var a=f.performance||{};if(a.now)return function(){return a.now()};if(a.webkitNow)return function(){return a.webkitNow()};if(a.mozNow)return function(){return a.mozNow()};if(a.msNow)return function(){return a.msNow()};if(a.oNow)return function(){return a.oNow()};var g;g=a.timing&&
a.timing.navigationStart?a.timing.navigationStart:Date.now();return function(){return Date.now()-g}}()})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(n,a){return"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{}})},"esri/layers/vectorTiles/core/ObjectPool":function(){define(["require","exports"],function(n,a){var f=function(){return function(){}}();return function(){function a(a,e,c,b,d){void 0===b&&(b=
1);void 0===d&&(d=0);this.classConstructor=a;this.acquireFunctionOrWithConstructor=e;this.releaseFunction=c;this.growthSize=b;!0===e?this.acquireFunction=this._constructorAcquireFunction:"function"===typeof e&&(this.acquireFunction=e);this._pool=Array(d);this._set=new Set;this._initialSize=d;for(a=0;a<d;a++)this._pool[a]=new this.classConstructor;this.growthSize=Math.max(b,1)}a.prototype.acquire=function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];e=this.classConstructor||f;if(0===
this._pool.length)for(var c=this.growthSize,b=0;b<c;b++)this._pool[b]=new e;e=this._pool.shift();this.acquireFunction?this.acquireFunction.apply(this,[e].concat(a)):e&&e.acquire&&"function"===typeof e.acquire&&e.acquire.apply(e,a);this._set.delete(e);return e};a.prototype.release=function(a){a&&!this._set.has(a)&&(this.releaseFunction?this.releaseFunction(a):a&&a.release&&"function"===typeof a.release&&a.release(),this._pool.push(a),this._set.add(a))};a.prototype.prune=function(){if(!(this._pool.length<=
this._initialSize))for(var a;this._initialSize>this._pool.length;)a=this._pool.shift(),this._set.delete(a),a.dispose&&"function"===typeof a.dispose&&a.dispose()};a.prototype._constructorAcquireFunction=function(a){for(var e=[],c=1;c<arguments.length;c++)e[c-1]=arguments[c];(b=this.classConstructor).call.apply(b,[a].concat(e));var b};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/VertexMemoryBuffer":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./MemoryBuffer ./GeometryUtils".split(" "),
function(n,a,f,p,g,e){Object.defineProperty(a,"__esModule",{value:!0});n=function(a){function b(){return a.call(this,12)||this}f(b,a);b.prototype.add=function(a,b,c,e,f,p,D){var d=this.array,l=this.index;a=g.i1616to32(a,b);d.push(a);a=g.i8888to32(Math.round(31*c),Math.round(31*e),Math.round(31*f),Math.round(31*p));d.push(a);a=g.i1616to32(D,0);d.push(a);return l};return b}(g);a.LineMemoryBuffer=n;n=function(a){function b(){return a.call(this,4)||this}f(b,a);b.prototype.add=function(a,b){var d=this.index;
this.array.push(g.i1616to32(a,b));return d};return b}(g);a.LineJoinMemoryBuffer=n;n=function(a){function b(){return a.call(this,4)||this}f(b,a);b.prototype.add=function(a,b){this.array.push(g.i1616to32(a,b))};return b}(g);a.PolygonMemoryBuffer=n;n=function(a){function b(){return a.call(this,8)||this}f(b,a);b.prototype.add=function(a,b,c,e,f,p){var d=this.array,l=this.index;a=g.i1616to32(a,b);d.push(a);a=g.i8888to32(Math.round(15*c),Math.round(15*e),f,p);d.push(a);return l};return b}(g);a.PolygonOutlineMemoryBuffer=
n;n=function(a){function b(){return a.call(this,16)||this}f(b,a);b.prototype.add=function(a,b,c,f,p,C,D,y,q,A){var d=this.array,l=this.index;a=g.i1616to32(a,b);d.push(a);a=g.i1616to32(Math.round(32*c),Math.round(32*f));d.push(a);a=g.i8888to32(p/4,C/4,0,0);d.push(a);a=g.i8888to32(Math.ceil(10*A),e.radToByte(D),10*y,10*Math.min(q,25));d.push(a);return l};return b}(g);a.SymbolMemoryBuffer=n})},"esri/layers/vectorTiles/core/tsSupport/decorateHelper":function(){define([],function(){return function(n,a,
f,p){var g=arguments.length,e=3>g?a:null===p?p=Object.getOwnPropertyDescriptor(a,f):p,c;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)e=Reflect.decorate(n,a,f,p);else for(var b=n.length-1;0<=b;b--)if(c=n[b])e=(3>g?c(e):3<g?c(a,f,e):c(a,f))||e;return 3<g&&e&&Object.defineProperty(a,f,e),e}})},"esri/layers/vectorTiles/views/vectorTiles/MemoryBuffer":function(){define(["require","exports"],function(n,a){return function(){function a(a){this._array=[];0>=a&&console.error("strideInBytes must be positive!");
this._stride=a}Object.defineProperty(a.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0});a.prototype.reset=
function(){this.array.length=0};a.prototype.toBuffer=function(){return(new Uint32Array(this._array)).buffer};a.i1616to32=function(a,g){return 65535&a|g<<16};a.i8888to32=function(a,g,e,c){return a&255|(g&255)<<8|(e&255)<<16|c<<24};a.i8816to32=function(a,g,e){return a&255|(g&255)<<8|e<<16};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(n,a){function f(a,e){a%=e;return 0<=a?a:a+e}Object.defineProperty(a,"__esModule",{value:!0});
a.C_INFINITY=Number.POSITIVE_INFINITY;a.C_PI=Math.PI;a.C_2PI=2*a.C_PI;a.C_PI_BY_2=a.C_PI/2;a.C_RAD_TO_256=128/a.C_PI;a.C_256_TO_RAD=a.C_PI/128;a.C_DEG_TO_256=256/360;a.C_DEG_TO_RAD=a.C_PI/180;a.C_SQRT2=1.414213562;a.C_SQRT2_INV=1/a.C_SQRT2;var p=1/Math.LN2;a.positiveMod=f;a.radToByte=function(g){return f(g*a.C_RAD_TO_256,256)};a.degToByte=function(g){return f(g*a.C_DEG_TO_256,256)};a.log2=function(a){return Math.log(a)*p};a.sqr=function(a){return a*a};a.clamp=function(a,e,c){return Math.min(Math.max(a,
e),c)};a.interpolate=function(a,e,c){return a*(1-c)+e*c};a.between=function(a,e,c){return a>=e&&a<=c||a>=c&&a<=e}})},"esri/layers/vectorTiles/views/vectorTiles/IndexMemoryBuffer":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./MemoryBuffer"],function(n,a,f,p,g){Object.defineProperty(a,"__esModule",{value:!0});n=function(a){function c(){return a.call(this,12)||this}f(c,a);c.prototype.add=function(a,d,c){var b=this.array;b.push(a);
b.push(d);b.push(c)};return c}(g);a.TriangleElementMemoryBuffer=n;g=function(a){function c(){return a.call(this,4)||this}f(c,a);c.prototype.add=function(a){this.array.push(a)};return c}(g);a.PointElementMemoryBuffer=g})},"esri/layers/vectorTiles/views/vectorTiles/TileParser":function(){define("require exports dojo/promise/all ../../core/promiseUtils ../../core/executeAsync ../../core/pbf ./SourceLayerData ./Feature ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ./TileClipper".split(" "),
function(n,a,f,p,g,e,c,b,d,l,m,t,E){return function(){function a(a,b,d){this._pbfTile=new e(new Uint8Array(a),new DataView(a));this._tile=b;this._connection=d;this._layers=b.getLayers();d=b.tileKey.split("/").map(parseFloat);var c=d[0];a=d[1];d=d[2];this._level=c;b.refKey&&(b=b.refKey.split("/").map(parseFloat)[0],b=c-b,0<b&&(c=(1<<b)-1,this._tileClipper=new E.TileClipper(b,a&c,d&c)));this._tileClipper||(this._tileClipper=new E.SimpleBuilder)}a.prototype.parse=function(){for(var a=this,d=this._parseTileData(this._pbfTile),
c=this._layers,e=c.length,l=this._level,m,t=[],x={},E=new Set,e=e-1;0<=e;e--)if(m=c[e],!(m.minzoom&&l<m.minzoom||m.maxzoom&&l>=m.maxzoom||m.layout&&"none"===m.layout.visibility))if(0===m.type)m=this._createBucket(m),t.push(m);else{var C=m.sourceLayer,O=d[C];O&&(E.add(C),m=this._createBucket(m))&&(m.layerIndex=e,m.layerExtent=O.extent,(O=x[C])||(O=x[C]=[]),O.push(m))}var G=10*(this._level+1),H=[],B=[],F=[],u=[],V=this._tileClipper,J=new Set,aa={},N=[];E.forEach(function(a){return N.push(a)});var R=
0,n=0,Q=N.length;return g(function(){if(6===a._tile.status)return!0;switch(R){case 0:if(n<Q){var c=N[n++],e=d[c],l=x[c];if(l&&0!==l.length)for(c=e.getData();c.next(2);){var m=new b(c.getMessage(),e),g=m.values;if(g&&(g=g._minzoom)&&g>=G)continue;for(var f=0,t=l;f<t.length;f++)g=t[f],g.pushFeature(m)}}else{e=a._tile;for(c in x)for(l=x[c],m=0;m<l.length;m++)g=l[m],g.hasFeatures()&&(3===g.layer.type?(H.push(g),e.addBucket(g)):g.layer.refLayerId?F.push(g):(B.push(g),u[g.layer.id]=g));R=1;n=0;Q=H.length}break;
case 1:n<Q?H[n++].getResources(V,J,aa):R=2}return 2===R},50).then(function(){if(6===a._tile.status)return[];var b=[],d=a._tile.getWorkerTileHandler(),c;0<J.size&&(c=d.fetchSprites(J,a._connection),b.push(c));for(var e in aa)c=aa[e],0<c.size&&(c=d.fetchGlyphs(a._tile.tileKey,e,c,a._connection),b.push(c));return f(b).then(function(b){if(6===a._tile.status)return[];var d=0,c=0,e=B.length;return g(function(){if(6===a._tile.status)return!0;switch(d){case 0:if(c<e){var b=B[c++];b.processFeatures(V,a._tile);
t.push(b)}else d=1,c=0,e=F.length;break;case 1:for(var l=0;l<F.length;l++){var b=F[l],g=u[b.layer.refLayerId];g&&(g.assignBufferInfo(b),t.push(b))}d=2;c=0;e=H.length;break;case 2:c<e?(b=H[c++],b.processFeatures(V,a._tile),t.push(b)):d=3}return 3===d},50).then(function(){t.sort(function(a,b){return a.layerIndex-b.layerIndex});return t})}).otherwise(function(a){return p.reject(Error(a))})}).otherwise(function(a){return p.reject(Error(a))})};a.prototype._parseTileData=function(a){for(var b={};a.next();)switch(a.tag()){case 3:var d=
new c(a.getMessage());b[d.name]=d;break;default:a.skip()}return b};a.prototype._createBucket=function(a){switch(a.type){case 0:return this._createBackgroundBucket(a);case 1:return this._createFillBucket(a);case 2:return this._createLineBucket(a);case 3:return this._createSymbolBucket(a)}};a.prototype._createBackgroundBucket=function(a){return new d(a,this._level)};a.prototype._createFillBucket=function(a){var b=this._tile;return new l(a,this._level,b.polygonVertexBuffer,b.polygonIndexBuffer,b.polygonOutlineVertexBuffer,
b.polygonOutlineIndexBuffer)};a.prototype._createLineBucket=function(a){var b=this._tile;return new m(a,this._level,b.lineVertexBuffer,b.lineIndexBuffer)};a.prototype._createSymbolBucket=function(a){var b=this._tile;return new t(a,this._level,b.markerVertexBuffer,b.markerIndexBuffer,b.textVertexBuffer,b.textIndexBuffer,b.placementEngine,b.getWorkerTileHandler())};return a}()})},"esri/layers/vectorTiles/core/pbf":function(){define(["require","exports"],function(n,a){return function(){function a(a,
g,e,c){this._tag=0;this._dataType=99;this._data=a;this._dataView=g;this._pos=e||0;this._end=c||a.byteLength}a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)};a.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;var g=this._decodeVarint();this._tag=g>>3;this._dataType=g&7;if(!a||a===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=
function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=function(){return this._decodeVarint()};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=function(){return this._decodeSVarint()};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var a=0!==this._data[this._pos];this._skip(1);return a};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=
function(){var a=this._dataView,g=this._pos,a=a.getUint32(g,!0)+4294967296*a.getUint32(g+4,!0);this._skip(8);return a};a.prototype.getSFixed64=function(){var a=this._dataView,g=this._pos,a=a.getUint32(g,!0)+4294967296*a.getInt32(g+4,!0);this._skip(8);return a};a.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,!0);this._skip(8);return a};a.prototype.getFixed32=function(){var a=this._dataView.getUint32(this._pos,!0);this._skip(4);return a};a.prototype.getSFixed32=function(){var a=
this._dataView.getInt32(this._pos,!0);this._skip(4);return a};a.prototype.getFloat=function(){var a=this._dataView.getFloat32(this._pos,!0);this._skip(4);return a};a.prototype.getString=function(){var a=this._getLength(),g=this._pos,g=this._toString(this._data,g,g+a);this._skip(a);return g};a.prototype.getBytes=function(){var a=this._getLength(),g=this._pos,g=this._toBytes(this._data,g,g+a);this._skip(a);return g};a.prototype.getMessage=function(){var f=this._getLength(),g=this._pos,g=new a(this._data,
this._dataView,g,g+f);this._skip(f);return g};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=a};a.prototype._decodeVarint=function(){var a=this._data,g=this._pos,e=0,c;if(10<=this._end-g){if(c=a[g++],
e|=c&127,0!==(c&128)&&(c=a[g++],e|=(c&127)<<7,0!==(c&128)&&(c=a[g++],e|=(c&127)<<14,0!==(c&128)&&(c=a[g++],e|=(c&127)<<21,0!==(c&128)&&(c=a[g++],e+=268435456*(c&127),0!==(c&128)&&(c=a[g++],e+=34359738368*(c&127),0!==(c&128)&&(c=a[g++],e+=4398046511104*(c&127),0!==(c&128)&&(c=a[g++],e+=562949953421312*(c&127),0!==(c&128)&&(c=a[g++],e+=72057594037927936*(c&127),0!==(c&128)&&(c=a[g++],e+=0x7fffffffffffffff*(c&127),0!==(c&128)))))))))))throw Error("Varint too long!");}else{for(var b=1;g!==this._end;){c=
a[g];if(0===(c&128))break;++g;e+=(c&127)*b;b*=128}if(g===this._end)throw Error("Varint overrun!");++g;e+=c*b}this._pos=g;return e};a.prototype._decodeSVarint=function(){var a=this._decodeVarint();return a%2?-(a+1)/2:a/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(a,g,e){var c="",b="";for(e=Math.min(this._end,e);g<e;++g){var d=a[g];d&128?b+="%"+d.toString(16):(c+=decodeURIComponent(b)+
String.fromCharCode(d),b="")}b.length&&(c+=decodeURIComponent(b));return c};a.prototype._toBytes=function(a,g,e){e=Math.min(this._end,e);return new Uint8Array(a.buffer,g,e-g)};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/SourceLayerData":function(){define(["require","exports"],function(n,a){return function(){function a(f){this.extent=4096;this.keys=[];this.values=[];for(this._pbfLayer=f.clone();f.next();)switch(f.tag()){case 1:this.name=f.getString();break;case 3:this.keys.push(f.getString());
break;case 4:this.values.push(a._parseValue(f.getMessage()));break;case 5:this.extent=f.getUInt32();break;default:f.skip()}}a.prototype.getData=function(){return this._pbfLayer};a._parseValue=function(a){for(;a.next();)switch(a.tag()){case 1:return a.getString();case 2:return a.getFloat();case 3:return a.getDouble();case 4:return a.getInt64();case 5:return a.getUInt64();case 6:return a.getSInt64();case 7:return a.getBool();default:a.skip()}return null};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/Feature":function(){define(["require",
"exports","./Geometry"],function(n,a,f){return function(){function a(a,e){this.values={};for(var c=e.keys,b=e.values;a.next();)switch(a.tag()){case 1:this.id=a.getUInt64();break;case 2:for(var d=a.getMessage(),l=this.values;!d.empty();){var g=d.getUInt32(),f=d.getUInt32();l[c[g]]=b[f]}break;case 3:this.type=a.getUInt32();break;case 4:this._pbfGeometry=a.getMessage();break;default:a.skip()}}a.prototype.getGeometry=function(a){if(void 0!==this._geometry)return this._geometry;var e=this._pbfGeometry,
c,b;a?a.reset(this.type):c=[];for(var d=1,l=0,m=0,g=0;!e.empty();)switch(0===l&&(l=e.getUInt32(),d=l&7,l>>=3),l--,d){case 1:m+=e.getSInt32();g+=e.getSInt32();a?a.moveTo(m,g):(b&&c.push(b),b=[],b.push(new f.Point(m,g)));break;case 2:m+=e.getSInt32();g+=e.getSInt32();a?a.lineTo(m,g):b.push(new f.Point(m,g));break;case 7:a?a.close():b&&!b[0].equals(m,g)&&b.push(b[0].clone());break;default:throw Error("Invalid path operation");}a?a=a.result():(b&&c.push(b),a=c);return this._geometry=a};return a}()})},
"esri/layers/vectorTiles/views/vectorTiles/Geometry":function(){define(["require","exports"],function(n,a){Object.defineProperty(a,"__esModule",{value:!0});var f=function(){function a(a,e){this.x=a;this.y=e}a.prototype.clone=function(){return new a(this.x,this.y)};a.prototype.equals=function(a,e){return a===this.x&&e===this.y};a.prototype.isEqual=function(a){return a.x===this.x&&a.y===this.y};a.prototype.setCoords=function(a,e){this.x=a;this.y=e};a.prototype.normalize=function(){var a=this.x,e=this.y,
a=Math.sqrt(a*a+e*e);this.x/=a;this.y/=a};a.prototype.rightPerpendicular=function(){var a=this.x;this.x=this.y;this.y=-a};a.prototype.move=function(a,e){this.x+=a;this.y+=e};a.prototype.assign=function(a){this.x=a.x;this.y=a.y};a.prototype.assignAdd=function(a,e){this.x=a.x+e.x;this.y=a.y+e.y};a.prototype.assignSub=function(a,e){this.x=a.x-e.x;this.y=a.y-e.y};a.prototype.rotate=function(a,e){var c=this.x,b=this.y;this.x=c*a-b*e;this.y=c*e+b*a};a.prototype.scale=function(a){this.x*=a;this.y*=a};a.prototype.length=
function(){var a=this.x,e=this.y;return Math.sqrt(a*a+e*e)};a.distance=function(a,e){var c=e.x-a.x,b=e.y-a.y;return Math.sqrt(c*c+b*b)};a.add=function(g,e){return new a(g.x+e.x,g.y+e.y)};a.sub=function(g,e){return new a(g.x-e.x,g.y-e.y)};return a}();a.Point=f})},"esri/layers/vectorTiles/views/vectorTiles/BackgroundBucket":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./Bucket"],function(n,a,f,p,g){return function(a){function c(b,
d){return a.call(this,b,d)||this}f(c,a);return c}(g)})},"esri/layers/vectorTiles/views/vectorTiles/Bucket":function(){define(["require","exports"],function(n,a){return function(){function a(a,g){this.layerExtent=4096;this._features=[];this.layer=a;this.zoom=g;this._filter=a.getFeatureFilter()}a.prototype.pushFeature=function(a){this._filter.filter(a)&&this._features.push(a)};a.prototype.hasFeatures=function(){return 0<this._features.length};a.prototype.processFeatures=function(a,g){};a.prototype.assignBufferInfo=
function(a){};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/FillBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./Geometry ../../core/libs/earcut/earcut".split(" "),function(n,a,f,p,g,e,c){return function(a){function b(b,d,c,e,g,f){b=a.call(this,b,d)||this;b.polygonVertexBuffer=c;b.polygonIndexBuffer=e;b.polygonOutlineVertexBuffer=g;b.polygonOutlineIndexBuffer=f;return b}f(b,a);Object.defineProperty(b.prototype,
"polygonIndexStart",{get:function(){return this._triangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"polygonIndexCount",{get:function(){return this._triangleElementsNum},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"polygonOutlineIndexStart",{get:function(){return this._outlineElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"polygonOutlineIndexCount",{get:function(){return this._outlineElementsNum},enumerable:!0,
configurable:!0});b.prototype.assignBufferInfo=function(a){a._triangleElementsStart=this._triangleElementsStart;a._triangleElementsNum=this._triangleElementsNum;a.layer.hasPaintProperty("fill-outline-color")?(a._outlineElementsStart=this._outlineElementsStart,a._outlineElementsNum=this._outlineElementsNum):(a._outlineElementsStart=0,a._outlineElementsNum=0)};b.prototype.processFeatures=function(a,b){this._triangleElementsStart=this.polygonIndexBuffer.index;this._triangleElementsNum=0;this._outlineElementsStart=
this.polygonOutlineIndexBuffer.index;this._outlineElementsNum=0;a&&a.setExtent(this.layerExtent);for(var d=this.layer.getPaintValue("fill-pattern",this.zoom),d=this.layer.getPaintValue("fill-antialias",this.zoom)&&void 0===d,c=0,e=this._features;c<e.length;c++){var l=e[c].getGeometry(a);this._processFeature(l,d)}};b.prototype._processFeature=function(a,d){if(a){var c=a.length;if(d)for(var e=0;e<c;e++)this._processOutline(a[e]);for(var l,e=0;e<c;e++){var m=b._area(a[e]);128<m?(void 0!==l&&this._processFill(a,
l),l=[e]):-128>m&&void 0!==l&&l.push(e)}void 0!==l&&this._processFill(a,l)}};b.prototype._processOutline=function(a){var b=this.polygonOutlineVertexBuffer,d=this.polygonOutlineIndexBuffer,c=d.index,l,g,f,q=new e.Point(0,0),p=new e.Point(0,0),w=new e.Point(0,0),v=-1,K=-1,x=l=-1,z=-1,I=a.length;if(!(2>I)){var O=a[0];for(l=a[I-1];I&&l.isEqual(O);)--I,l=a[I-1];if(!(2>I-0)){for(O=0;O<I;++O){0===O?(l=a[I-1],g=a[0],f=a[1],q.assignSub(g,l),q.normalize(),q.rightPerpendicular()):(l=g,g=f,f=O!==I-1?a[O+1]:a[0],
q.assign(p));p.assignSub(f,g);p.normalize();p.rightPerpendicular();l=q.x*p.y-q.y*p.x;w.assignAdd(q,p);w.normalize();var G=-w.x*-q.x+-w.y*-q.y,G=Math.abs(0!==G?1/G:1);8<G&&(G=8);0<=l?(l=b.add(g.x,g.y,q.x,q.y,0,1),-1===x&&(x=l),0<=v&&0<=K&&0<=l&&d.add(v,K,l),K=b.add(g.x,g.y,G*-w.x,G*-w.y,0,-1),-1===z&&(z=K),0<=v&&0<=K&&0<=l&&d.add(v,K,l),v=K,K=l,l=b.add(g.x,g.y,w.x,w.y,0,1),0<=v&&0<=K&&0<=l&&d.add(v,K,l),K=b.add(g.x,g.y,p.x,p.y,0,1)):(l=b.add(g.x,g.y,G*w.x,G*w.y,0,1),-1===x&&(x=l),0<=v&&0<=K&&0<=l&&
d.add(v,K,l),K=b.add(g.x,g.y,-q.x,-q.y,0,-1),-1===z&&(z=K),0<=v&&0<=K&&0<=l&&d.add(v,K,l),v=K,K=l,l=b.add(g.x,g.y,-w.x,-w.y,0,-1),0<=v&&0<=K&&0<=l&&d.add(v,K,l),v=b.add(g.x,g.y,-p.x,-p.y,0,-1));0<=v&&0<=K&&0<=l&&d.add(v,K,l)}0<=v&&0<=K&&0<=x&&d.add(v,K,x);0<=v&&0<=x&&0<=z&&d.add(v,z,x);this._outlineElementsNum+=3*(d.index-c)}}};b.prototype._processFill=function(a,b){var d;1<b.length&&(d=[]);for(var e=0,l=0;l<b.length;l++){var m=b[l];0!==e&&d.push(e);e+=a[m].length}for(var e=2*e,l=new Float64Array(e),
g=0,f=0;f<b.length;f++)for(var m=b[f],m=a[m],p=m.length,w=0;w<p;++w)l[g++]=m[w].x,l[g++]=m[w].y;d=c(l,d,2);g=d.length;if(0<g){f=this.polygonVertexBuffer.index;for(m=0;m<e;)this.polygonVertexBuffer.add(l[m++],l[m++]);for(e=0;e<g;)this.polygonIndexBuffer.add(f+d[e++],f+d[e++],f+d[e++]);this._triangleElementsNum+=g}};b._area=function(a){for(var b=0,d=a.length-1,c=0;c<d;c++)b+=(a[c].x-a[c+1].x)*(a[c].y+a[c+1].y);b+=(a[d].x-a[0].x)*(a[d].y+a[0].y);return.5*b};return b}(g)})},"esri/layers/vectorTiles/core/libs/earcut/earcut":function(){define([],
function(){function n(b,l,m){m=m||2;v=b.length/m+(l?2*l.length:0);K=!1;var g=l&&l.length,x=g?l[0]*m:b.length,t=a(b,0,x,m,!0),B=[];if(!t)return B;var F,u,E,q;if(g)a:{var C=m,g=[],N,z,I;q=0;for(N=l.length;q<N;q++)z=l[q]*C,I=q<N-1?l[q+1]*C:b.length,z=a(b,z,I,C,!1),z===z.next&&(z.steiner=!0),g.push(d(z));g.sort(e);for(q=0;q<g.length;q++){if(!t){t=null;break a}l=g[q];C=t;if(C=c(l,C))l=D(C,l),f(l,l.next);t=f(t,t.next)}}if(K)return B;if(b.length>80*m){F=E=b[0];u=g=b[1];for(C=m;C<x;C+=m)q=b[C],l=b[C+1],q<
F&&(F=q),l<u&&(u=l),q>E&&(E=q),l>g&&(g=l);E=Math.max(E-F,g-u)}p(t,B,m,F,u,E);return B}function a(a,b,d,c,e){var l;if(e===0<w(a,b,d,c))for(e=b;e<d;e+=c)l=y(e,a[e],a[e+1],l);else for(e=d-c;e>=b;e-=c)l=y(e,a[e],a[e+1],l);l&&t(l,l.next)&&(q(l),l=l.next);return l}function f(a,b){if(!a)return a;b||(b=a);var d=a,c,e=0,l=v*v/2;do{c=!1;if(d.steiner||!t(d,d.next)&&0!==m(d.prev,d,d.next))d=d.next;else{q(d);d=b=d.prev;if(d===d.next)return null;c=!0}if(e++>l)return K=!0,null}while(c||d!==b);return b}function p(a,
d,c,e,v,y,B){if(a){if(!B&&y){var F=a,u=F;do null===u.z&&(u.z=b(u.x,u.y,e,v,y)),u.prevZ=u.prev,u=u.nextZ=u.next;while(u!==F);u.prevZ.nextZ=null;u.prevZ=null;var F=u,x,J,z,N,G,I,w=1;do{u=F;z=F=null;for(N=0;u;){N++;J=u;for(x=G=0;x<w&&(G++,J=J.nextZ,J);x++);for(I=w;0<G||0<I&&J;)0===G?(x=J,J=J.nextZ,I--):0!==I&&J?u.z<=J.z?(x=u,u=u.nextZ,G--):(x=J,J=J.nextZ,I--):(x=u,u=u.nextZ,G--),z?z.nextZ=x:F=x,x.prevZ=z,z=x;u=J}z.nextZ=null;w*=2}while(1<N)}for(F=a;a.prev!==a.next;){u=a.prev;J=a.next;if(y)a:{z=a;I=e;
var H=v,A=y;N=z.prev;G=z;w=z.next;if(0<=m(N,G,w))z=!1;else{var n=N.x>G.x?N.x>w.x?N.x:w.x:G.x>w.x?G.x:w.x,O=N.y>G.y?N.y>w.y?N.y:w.y:G.y>w.y?G.y:w.y;x=b(N.x<G.x?N.x<w.x?N.x:w.x:G.x<w.x?G.x:w.x,N.y<G.y?N.y<w.y?N.y:w.y:G.y<w.y?G.y:w.y,I,H,A);I=b(n,O,I,H,A);for(H=z.nextZ;H&&H.z<=I;){if(H!==z.prev&&H!==z.next&&l(N.x,N.y,G.x,G.y,w.x,w.y,H.x,H.y)&&0<=m(H.prev,H,H.next)){z=!1;break a}H=H.nextZ}for(H=z.prevZ;H&&H.z>=x;){if(H!==z.prev&&H!==z.next&&l(N.x,N.y,G.x,G.y,w.x,w.y,H.x,H.y)&&0<=m(H.prev,H,H.next)){z=
!1;break a}H=H.prevZ}z=!0}}else z=g(a);if(z)d.push(u.i/c),d.push(a.i/c),d.push(J.i/c),q(a),F=a=J.next;else{if(K)break;a=J;if(a===F){if(!B)p(f(a),d,c,e,v,y,1);else if(1===B){B=d;F=c;u=a;do J=u.prev,z=u.next.next,!t(J,z)&&E(J,u,u.next,z)&&C(J,z)&&C(z,J)&&(B.push(J.i/F),B.push(u.i/F),B.push(z.i/F),q(u),q(u.next),u=a=z),u=u.next;while(u!==a);a=u;p(a,d,c,e,v,y,2)}else if(2===B)a:{B=a;do{for(F=B.next.next;F!==B.prev;){if(u=B.i!==F.i){u=B;J=F;z=void 0;if(z=u.next.i!==J.i&&u.prev.i!==J.i){z=void 0;b:{z=u;
do{if(z.i!==u.i&&z.next.i!==u.i&&z.i!==J.i&&z.next.i!==J.i&&E(z,z.next,u,J)){z=!0;break b}z=z.next}while(z!==u);z=!1}z=!z}N=void 0;if(N=z&&C(u,J)&&C(J,u)){z=u;N=!1;G=(u.x+J.x)/2;J=(u.y+J.y)/2;do z.y>J!==z.next.y>J&&G<(z.next.x-z.x)*(J-z.y)/(z.next.y-z.y)+z.x&&(N=!N),z=z.next;while(z!==u)}u=N}if(u){a=D(B,F);B=f(B,B.next);a=f(a,a.next);p(B,d,c,e,v,y);p(a,d,c,e,v,y);break a}F=F.next}B=B.next}while(B!==a)}break}}}}}function g(a){var b=a.prev,d=a.next;if(0<=m(b,a,d))return!1;for(var c=a.next.next,e=0;c!==
a.prev;){if(l(b.x,b.y,a.x,a.y,d.x,d.y,c.x,c.y)&&0<=m(c.prev,c,c.next))return!1;c=c.next;if(e++>v)return K=!0,!1}return!0}function e(a,b){return a.x-b.x}function c(a,b){var d=b,c=a.x,e=a.y,m=-Infinity,g;do{if(!d)return null;if(e<=d.y&&e>=d.next.y){var f=d.x+(e-d.y)*(d.next.x-d.x)/(d.next.y-d.y);if(f<=c&&f>m){m=f;if(f===c){if(e===d.y)return d;if(e===d.next.y)return d.next}g=d.x<d.next.x?d:d.next}}d=d.next}while(d!==b);if(!g)return null;if(c===m)return g.prev;for(var f=g,u=g.x,t=g.y,x=Infinity,E,d=g.next;d!==
f;)c>=d.x&&d.x>=u&&l(e<t?c:m,e,u,t,e<t?m:c,e,d.x,d.y)&&(E=Math.abs(e-d.y)/(c-d.x),(E<x||E===x&&d.x>g.x)&&C(d,a)&&(g=d,x=E)),d=d.next;return g}function b(a,b,d,c,e){a=32767*(a-d)/e;b=32767*(b-c)/e;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function d(a){var b=a,d=a;do b.x<d.x&&(d=b),b=b.next;while(b!==a);return d}function l(a,b,d,c,e,l,g,m){return 0<=(e-g)*(b-m)-(a-g)*
(l-m)&&0<=(a-g)*(c-m)-(d-g)*(b-m)&&0<=(d-g)*(l-m)-(e-g)*(c-m)}function m(a,b,d){return(b.y-a.y)*(d.x-b.x)-(b.x-a.x)*(d.y-b.y)}function t(a,b){return a.x===b.x&&a.y===b.y}function E(a,b,d,c){return t(a,b)&&t(d,c)||t(a,c)&&t(d,b)?!0:0<m(a,b,d)!==0<m(a,b,c)&&0<m(d,c,a)!==0<m(d,c,b)}function C(a,b){return 0>m(a.prev,a,a.next)?0<=m(a,b,a.next)&&0<=m(a,a.prev,b):0>m(a,b,a.prev)||0>m(a,a.next,b)}function D(a,b){var d=new A(a.i,a.x,a.y),c=new A(b.i,b.x,b.y),e=a.next,l=b.prev;a.next=b;b.prev=a;d.next=e;e.prev=
d;c.next=d;d.prev=c;l.next=c;c.prev=l;return c}function y(a,b,d,c){a=new A(a,b,d);c?(a.next=c.next,a.prev=c,c.next.prev=a,c.next=a):(a.prev=a,a.next=a);return a}function q(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function A(a,b,d){this.i=a;this.x=b;this.y=d;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function w(a,b,d,c){for(var e=0,l=d-c;b<d;b+=c)e+=(a[l]-a[b])*(a[b+1]+a[l+1]),l=b;return e}var v,K;n.deviation=
function(a,b,d,c){var e=b&&b.length,l=Math.abs(w(a,0,e?b[0]*d:a.length,d));if(e)for(var e=0,g=b.length;e<g;e++)l-=Math.abs(w(a,b[e]*d,e<g-1?b[e+1]*d:a.length,d));for(e=b=0;e<c.length;e+=3){var g=c[e]*d,m=c[e+1]*d,u=c[e+2]*d;b+=Math.abs((a[g]-a[u])*(a[m+1]-a[g+1])-(a[g]-a[m])*(a[u+1]-a[g+1]))}return 0===l&&0===b?0:Math.abs((b-l)/l)};n.flatten=function(a){for(var b=a[0][0].length,d={vertices:[],holes:[],dimensions:b},c=0,e=0;e<a.length;e++){for(var l=0;l<a[e].length;l++)for(var g=0;g<b;g++)d.vertices.push(a[e][l][g]);
0<e&&(c+=a[e-1].length,d.holes.push(c))}return d};return n})},"esri/layers/vectorTiles/views/vectorTiles/LineBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./LineTess ./style/StyleLayer".split(" "),function(n,a,f,p,g,e,c){return function(a){function b(b,d,c,g){b=a.call(this,b,d)||this;b.extrudeVectorsDoubleBuffer=[e.allocExtrudeVectors(),e.allocExtrudeVectors()];b.firstExtrudeVectors=e.allocExtrudeVectors();b.recycledTriangleBridge=
e.allocTriangles(20);b.recycledTrianglePie=e.allocTriangles(20);b.lineVertexBuffer=c;b.lineIndexBuffer=g;return b}f(b,a);Object.defineProperty(b.prototype,"triangleIndexStart",{get:function(){return this.triangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"triangleIndexCount",{get:function(){return this.triangleElementsCount},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"connectorStart",{get:function(){return 0},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"connectorCount",{get:function(){return 0},enumerable:!0,configurable:!0});b.prototype.assignBufferInfo=function(a){a.triangleElementsStart=this.triangleElementsStart;a.triangleElementsCount=this.triangleElementsCount};b.prototype.processFeatures=function(a,b){this.triangleElementsStart=this.lineIndexBuffer.index;this.triangleElementsCount=0;a&&a.setExtent(this.layerExtent);for(var d=new c.LineLayout(this.layer,this.zoom),e=0,l=this._features;e<l.length;e++){var g=
l[e].getGeometry(a);this._processFeature(d,g)}};b.prototype._processFeature=function(a,b){if(b){var d=b.length,c;for(c=0;c<d;c++)this._processGeometry(b[c],a)}};b.prototype._processGeometry=function(a,b){if(!(2>a.length)){var d=a[0],c=a[a.length-1],l=c.x-d.x,c=c.y-d.y,d=1E-6>l*l+c*c;if(!(2>a.length)){for(var g=a[0],m=1;m<a.length;)l=a[m].x-g.x,c=a[m].y-g.y,1E-6>l*l+c*c?a.splice(m,1):(g=a[m],++m);if(!(2>a.length)){this.vertices=a;this.verticesLen=a.length;this.isClosed=d;this.cap=b.cap;this.join=b.join;
this.almostParallelRads=.05;this.veryShallowRads=.1;this.miterSafeRads=e.MITER_SAFE_RADS;this.miterLimitMag=Math.min(b.miterLimit,e.SYSTEM_MAG_LIMIT);this.roundLimitRads=Math.min(b.roundLimit,.5);this.newRoundJoinsSafeRads=2.3;for(var l=this.lineIndexBuffer.index,c=0,f=void 0,g=this.verticesLen,m=0;m<g;++m){var p=a[m],w=f===this.extrudeVectorsDoubleBuffer[m%2]?this.extrudeVectorsDoubleBuffer[(m+1)%2]:this.extrudeVectorsDoubleBuffer[m%2];m<g||!d?(this._computeExtrudeVectors(w,m),this._writeGPUVertices(p.x,
p.y,c,w),!w.capCenter||d&&m===g-1||this._writeGPUPieElements(w),d&&0===m&&e.copyExtrudeVectors(this.firstExtrudeVectors,w)):e.copyExtrudeVectors(w,this.firstExtrudeVectors);f&&this._writeGPUBridgeElements(f,w);m<g-1&&(f=a[m+1],p=e.length([f.x-p.x,f.y-p.y]),c+=p);f=w}this.triangleElementsCount+=3*(this.lineIndexBuffer.index-l)}}}};b.prototype._computeExtrudeVectors=function(a,b){var d=this.vertices,c=this.verticesLen,l=this.isClosed,g=d[b],m=[void 0,void 0],f=[void 0,void 0];if(0<b&&b<c-1){var p=d[(b+
c-1)%c],w=d[(b+1)%c];e.normalize(m,[g.x-p.x,g.y-p.y]);e.normalize(f,[w.x-g.x,w.y-g.y])}else if(0===b)w=d[(b+1)%c],e.normalize(f,[w.x-g.x,w.y-g.y]),l?(d=d[c-2],e.normalize(m,[g.x-d.x,g.y-d.y])):m=f;else if(b===c-1)p=d[(b+c-1)%c],e.normalize(m,[g.x-p.x,g.y-p.y]),l?(d=d[1],e.normalize(f,[d.x-g.x,d.y-g.y])):f=m;else{console.error("Vertex index 'i' out of range.");return}l||0!==b?l||b!==c-1?this._computeJoinExtrudeVectors(a,m,f):this._computeCapExtrudeVectors(a,m,f,e.CapPosition.END):this._computeCapExtrudeVectors(a,
m,f,e.CapPosition.START)};b.prototype._computeCapExtrudeVectors=function(a,b,d,c){0===this.cap?e.buttCap(a,b,d):1===this.cap?e.roundCap(a,b,d,c,e.getNumberOfSlices(Math.PI),c===e.CapPosition.START?-1:1):2===this.cap?e.squareCap(a,b,d,c):(e.buttCap(a,b,d),console.error("Unknown cap type!"))};b.prototype._computeJoinExtrudeVectors=function(a,b,d){var c=e.getRads(b,d);if(c>Math.PI-this.almostParallelRads)e.rectJoin(a,b,d);else if(2===this.join||c<this.veryShallowRads)c<this.almostParallelRads?e.fastMiterJoin(a,
b,d):c<this.miterSafeRads?e.miterJoin(a,b,d):e.bevelJoin(a,b,d,this.miterLimitMag);else if(0===this.join)e.bevelJoin(a,b,d,1);else if(1===this.join){var l=e.getNumberOfSlices(c);c<this.newRoundJoinsSafeRads?2>l||c<this.roundLimitRads?e.bevelJoin(a,b,d,1):e.roundJoin(a,b,d,l):e.unitRoundJoin(a,b,d,l)}};b.prototype._writeGPUVertices=function(a,b,d,c){var e;for(e=0;e<c.vectors.count;++e){var l=this.lineVertexBuffer.add(a,b,c.vectors.items[e].vector[0],c.vectors.items[e].vector[1],c.vectors.items[e].texCoords[0],
c.vectors.items[e].texCoords[1],d);c.vectors.items[e].base=l}};b.prototype._writeGPUBridgeElements=function(a,b){e.bridge(this.recycledTriangleBridge,a,b);var d;for(d=0;d<this.recycledTriangleBridge.count;++d){var c=this.recycledTriangleBridge.items[d];this.lineIndexBuffer.add(c.v1.base,c.v2.base,c.v3.base)}};b.prototype._writeGPUPieElements=function(a){e.pie(this.recycledTrianglePie,a);for(a=0;a<this.recycledTrianglePie.count;++a){var b=this.recycledTrianglePie.items[a];this.lineIndexBuffer.add(b.v1.base,
b.v2.base,b.v3.base)}};return b}(g)})},"esri/layers/vectorTiles/views/vectorTiles/LineTess":function(){define(["require","exports"],function(n,a){function f(a){var b={items:[],count:0},d;for(d=0;d<a;++d)b.items.push(void 0);return b}function p(a,b){return a[0]*b[0]+a[1]*b[1]}function g(a){return Math.sqrt(p(a,a))}function e(a,b){var d=g(b);a[0]=b[0]/d;a[1]=b[1]/d;return a}function c(a,b){a[0]=-b[1];a[1]=b[0];return a}function b(a,b){return a[0]*b[1]-a[1]*b[0]}function d(a,b){a[0]=-b[0];a[1]=-b[1];
return a}function l(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;return a}function m(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];return a}function t(a,b){var d=p(a,b);return.999<d?0:-.999>d?Math.PI:Math.acos(d)}function E(a,b,d,c,e){if(0===c)a.count=0;else{var m=g(b),f=l(v[0],b,1/m);d=l(v[1],d,1/m);f=t(f,d);f=(e?-1:1)*f/c;e=Math.cos(f);f=Math.sin(f);d=b[0];var u=b[1];for(b=0;b<c-1;++b)m=d,d=e*m-f*u,u=f*m+e*u,a.items[b][0]=d,a.items[b][1]=u;a.count=c-1}}function C(a){var b=a.count,d=Math.floor(b/2),c;for(c=0;c<d;++c){var e=
a.items[c];a.items[c]=a.items[b-c-1];a.items[b-c-1]=e}}function D(a,b,e){e=c(v[0],e);b=d(v[1],e);var l=a.vectors.items[0];l.vector[0]=e[0];l.vector[1]=e[1];l.texCoords[0]=0;l.texCoords[1]=-1;e=a.vectors.items[1];e.vector[0]=b[0];e.vector[1]=b[1];e.texCoords[0]=0;e.texCoords[1]=1;a.vectors.count=2;b=a.lists[y.ENTRY];b.items[0]=0;b.items[1]=1;b.count=2;b=a.lists[y.EXIT];b.items[0]=0;b.items[1]=1;b.count=2;a.lists[y.CAP].count=0;a.capCenter=void 0}Object.defineProperty(a,"__esModule",{value:!0});var y;
(function(a){a[a.ENTRY=1]="ENTRY";a[a.EXIT=2]="EXIT";a[a.CAP=3]="CAP"})(y=a.VectorRole||(a.VectorRole={}));var q;(function(a){a[a.START=1]="START";a[a.END=2]="END"})(q=a.CapPosition||(a.CapPosition={}));a.SYSTEM_MAG_LIMIT=3.8;a.MITER_SAFE_RADS=2*Math.acos(1/a.SYSTEM_MAG_LIMIT);var A=a.SYSTEM_MAG_LIMIT*a.SYSTEM_MAG_LIMIT,w=16/(2*Math.PI);a.allocTriangles=function(a){var b={items:[],count:0},d;for(d=0;d<a;++d)b.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0]},v2:{vector:[void 0,void 0],
texCoords:[void 0,void 0]},v3:{vector:[void 0,void 0],texCoords:[void 0,void 0]}});return b};a.allocExtrudeVectors=function(){var a={items:[],count:0},b;for(b=0;30>b;++b)a.items.push({vector:[void 0,void 0],texCoords:[void 0,void 0]});b={};b[y.ENTRY]=f(20);b[y.EXIT]=f(20);b[y.CAP]=f(20);return{vectors:a,lists:b}};a.copyExtrudeVectors=function(a,b){var d;for(d=0;d<b.vectors.count;++d)a.vectors.items[d].vector[0]=b.vectors.items[d].vector[0],a.vectors.items[d].vector[1]=b.vectors.items[d].vector[1],
a.vectors.items[d].texCoords[0]=b.vectors.items[d].texCoords[0],a.vectors.items[d].texCoords[1]=b.vectors.items[d].texCoords[1],a.vectors.items[d].base=b.vectors.items[d].base;a.vectors.count=b.vectors.count;a.capCenter=b.capCenter};var v=[],K;for(K=0;32>K;++K)v.push([void 0,void 0]);var x=function(a){var b={items:[],count:0},d;for(d=0;d<a;++d)b.items.push([void 0,void 0]);return b}(16);a.length=g;a.normalize=e;a.getNumberOfSlices=function(a){return Math.round(a*w)};a.getRads=t;var z=[void 0,void 0],
I=[void 0,void 0];a.bridge=function(a,b,d){var c=b.vectors;b=b.lists[y.EXIT];var e=d.vectors,l=d.lists[y.ENTRY],g,m;if(b.count===l.count+1)d=b.items,g=c.items,m=l.items,e=e.items;else if(l.count===b.count+1)d=l.items,g=e.items,m=b.items,e=c.items;else if(b.count===l.count)d=l.items,g=e.items,m=b.items,e=c.items;else{console.error("Cannot bridge "+b.count+" to "+l.count+".");a.count=0;return}c=b.count+l.count-2;a.count=c;z[0]=d;z[1]=m;I[0]=g;I[1]=e;for(b=0;b<c;++b)d=a.items[b],g=(b+0)%2,g=I[g][z[g][Math.floor((b+
0)/2)]],d.v1.vector[0]=g.vector[0],d.v1.vector[1]=g.vector[1],d.v1.texCoords[0]=g.texCoords[0],d.v1.texCoords[1]=g.texCoords[1],d.v1.base=g.base,g=(b+1)%2,g=I[g][z[g][Math.floor((b+1)/2)]],d.v2.vector[0]=g.vector[0],d.v2.vector[1]=g.vector[1],d.v2.texCoords[0]=g.texCoords[0],d.v2.texCoords[1]=g.texCoords[1],d.v2.base=g.base,g=(b+2)%2,g=I[g][z[g][Math.floor((b+2)/2)]],d.v3.vector[0]=g.vector[0],d.v3.vector[1]=g.vector[1],d.v3.texCoords[0]=g.texCoords[0],d.v3.texCoords[1]=g.texCoords[1],d.v3.base=g.base};
a.pie=function(a,b){if(0===b.lists[y.CAP].count)a.count=0;else if(1===b.lists[y.CAP].count)console.error("A single vector is not enough to define a pie."),a.count=0;else{a.count=b.lists[y.CAP].count-1;var d;for(d=0;d<a.count;++d){var c=a.items[d],e=b.vectors.items[b.lists[y.CAP].items[d]];c.v1.vector[0]=e.vector[0];c.v1.vector[1]=e.vector[1];c.v1.texCoords[0]=e.texCoords[0];c.v1.texCoords[1]=e.texCoords[1];c.v1.base=e.base;e=b.vectors.items[b.lists[y.CAP].items[d+1]];c.v2.vector[0]=e.vector[0];c.v2.vector[1]=
e.vector[1];c.v2.texCoords[0]=e.texCoords[0];c.v2.texCoords[1]=e.texCoords[1];c.v2.base=e.base;e=b.vectors.items[b.capCenter];c.v3.vector[0]=e.vector[0];c.v3.vector[1]=e.vector[1];c.v3.texCoords[0]=e.texCoords[0];c.v3.texCoords[1]=e.texCoords[1];c.v3.base=e.base}}};a.buttCap=function(a,b,d){D(a,b,d)};a.roundCap=function(a,b,d,c,e,g){void 0===g&&(g=0);D(a,b,d);d=c===q.START?0:1;c=c===q.START?1:0;a.capCenter=a.vectors.count;b=a.vectors.items[a.capCenter];b.vector[0]=0;b.vector[1]=0;b.texCoords[0]=0;
b.texCoords[1]=0;++a.vectors.count;E(x,a.vectors.items[d].vector,a.vectors.items[c].vector,e,!1);e=a.vectors.count;b=a.lists[y.CAP];b.items[0]=d;d=a.vectors.items[d].texCoords[1];var l=a.vectors.items[c].texCoords[1],m;for(m=0;m<x.count;++m){var f=g*(1-Math.abs(x.count/2-m)/(x.count/2)),u=d+m/(x.count-1)*(l-d),B=x.items[m],F=a.vectors.items[e+m];F.vector[0]=B[0];F.vector[1]=B[1];F.texCoords[0]=f;F.texCoords[1]=u;b.items[m+1]=e+m}b.items[x.count+1]=c;b.count=x.count+2;a.vectors.count=e+x.count};var O=
Math.cos(Math.PI/4),G=Math.sin(Math.PI/4),H=Math.sqrt(2);a.squareCap=function(a,b,d,c){D(a,b,d);b=c===q.START?0:1;d=c===q.START?1:0;var e=v[0],g=v[1],m=v[2],f=v[3];c=v[4];var u=a.vectors.items[b].vector;e[0]=O*u[0]-G*u[1];e[1]=G*u[0]+O*u[1];l(f,e,H);g[0]=O*e[0]-G*e[1];g[1]=G*e[0]+O*e[1];m[0]=O*g[0]-G*g[1];m[1]=G*g[0]+O*g[1];l(c,m,H);b=a.vectors.items[b];b.vector[0]=f[0];b.vector[1]=f[1];a=a.vectors.items[d];a.vector[0]=c[0];a.vector[1]=c[1]};a.fastMiterJoin=D;a.miterJoin=function(a,b,g){b=c(v[0],
b);g=c(v[1],g);var m=v[2];m[0]=b[0]+g[0];m[1]=b[1]+g[1];g=e(v[3],m);b=p(g,b);g=l(v[4],g,1/b);b=d(v[5],g);m=a.vectors.items[0];m.vector[0]=g[0];m.vector[1]=g[1];m.texCoords[0]=0;m.texCoords[1]=-1;g=a.vectors.items[1];g.vector[0]=b[0];g.vector[1]=b[1];g.texCoords[0]=0;g.texCoords[1]=1;a.vectors.count=2;b=a.lists[y.ENTRY];b.items[0]=0;b.items[1]=1;b.count=2;b=a.lists[y.EXIT];b.items[0]=0;b.items[1]=1;b.count=2;a.lists[y.CAP].count=0;a.capCenter=void 0};a.bevelJoin=function(a,g,f,t){var u=t*t;t=b(g,f);
var q=0<t?[-1,1]:[1,-1],B=q[0],q=q[1],F=0<t?d(v[0],c(v[1],g)):c(v[2],g),E=0<t?d(v[3],c(v[4],f)):c(v[5],f),w=v[6];w[0]=F[0]+E[0];w[1]=F[1]+E[1];var w=e(v[7],w),x=d(v[8],w),z=p(w,F),G=b(w,F),H=Math.abs(G/z),D=1+H*H,n=D<A?[H,!1]:[Math.sqrt(A-1),!0],G=n[0],n=n[1],H=D<u?[H,!1]:[Math.sqrt(u-1),!0],u=H[0];(H=H[1])&&n?(n=a.vectors.items[0],m(n.vector,d(v[9],F),l(v[10],d(v[11],g),G)),n.texCoords[0]=0,n.texCoords[1]=B,x=a.vectors.items[1],m(x.vector,d(v[12],E),l(v[13],f,G)),x.texCoords[0]=0,x.texCoords[1]=
B,B=a.vectors.items[2],B.vector[0]=0,B.vector[1]=0,B.texCoords[0]=0,B.texCoords[1]=0,B=a.vectors.items[3],m(B.vector,F,l(v[14],g,u)),B.texCoords[0]=0,B.texCoords[1]=q,g=a.vectors.items[4],m(g.vector,E,l(v[15],d(v[16],f),u)),g.texCoords[0]=0,g.texCoords[1]=q,a.vectors.count=5,f=a.lists[y.ENTRY],f.items[0]=0,f.items[1]=2,f.items[2]=3,f.count=3,f=a.lists[y.EXIT],f.items[0]=1,f.items[1]=2,f.items[2]=4,f.count=3,f=a.lists[y.CAP],f.items[0]=3,f.items[1]=4,f.count=2,a.capCenter=2):!H&&n?(n=a.vectors.items[0],
m(n.vector,d(v[9],F),l(v[10],d(v[11],g),G)),n.texCoords[0]=0,n.texCoords[1]=B,x=a.vectors.items[1],m(x.vector,d(v[12],E),l(v[13],f,G)),x.texCoords[0]=0,x.texCoords[1]=B,B=a.vectors.items[2],B.vector[0]=0,B.vector[1]=0,B.texCoords[0]=0,B.texCoords[1]=0,B=a.vectors.items[3],l(B.vector,w,1/z),B.texCoords[0]=0,B.texCoords[1]=q,a.vectors.count=4,f=a.lists[y.ENTRY],f.items[0]=0,f.items[1]=2,f.items[2]=3,f.count=3,f=a.lists[y.EXIT],f.items[0]=1,f.items[1]=2,f.items[2]=3,f.count=3,a.lists[y.CAP].count=0,
a.capCenter=void 0):H&&!n?(n=a.vectors.items[0],l(n.vector,x,1/z),n.texCoords[0]=0,n.texCoords[1]=B,x=a.vectors.items[1],x.vector[0]=0,x.vector[1]=0,x.texCoords[0]=0,x.texCoords[1]=0,B=a.vectors.items[2],m(B.vector,F,l(v[9],g,u)),B.texCoords[0]=0,B.texCoords[1]=q,B=a.vectors.items[3],m(B.vector,E,l(v[10],d(v[11],f),u)),B.texCoords[0]=0,B.texCoords[1]=q,a.vectors.count=4,f=a.lists[y.ENTRY],f.items[0]=0,f.items[1]=1,f.items[2]=2,f.count=3,f=a.lists[y.EXIT],f.items[0]=0,f.items[1]=1,f.items[2]=3,f.count=
3,f=a.lists[y.CAP],f.items[0]=2,f.items[1]=3,f.count=2,a.capCenter=1):H||n||(n=a.vectors.items[0],l(n.vector,x,1/z),n.texCoords[0]=0,n.texCoords[1]=B,x=a.vectors.items[1],l(x.vector,w,1/z),x.texCoords[0]=0,x.texCoords[1]=q,a.vectors.count=2,f=a.lists[y.ENTRY],f.items[0]=0,f.items[1]=1,f.count=2,f=a.lists[y.EXIT],f.items[0]=0,f.items[1]=1,f.count=2,a.lists[y.CAP].count=0,a.capCenter=void 0);0>t&&(C(a.lists[y.ENTRY]),C(a.lists[y.EXIT]))};a.roundJoin=function(a,g,f,t){var u=b(g,f),q=0<u?[-1,1]:[1,-1],
B=q[0],q=q[1],F=0<u?d(v[0],c(v[1],g)):c(v[2],g),w=0<u?d(v[3],c(v[4],f)):c(v[5],f),z=v[6];z[0]=F[0]+w[0];z[1]=F[1]+w[1];var H=e(v[7],z),z=d(v[8],H),G=p(H,F),H=b(H,F),H=Math.abs(H/G),n=1+H*H<A?[H,!1]:[Math.sqrt(A-1),!0],H=n[0];n[1]?(n=a.vectors.items[0],n.vector[0]=F[0],n.vector[1]=F[1],n.texCoords[0]=0,n.texCoords[1]=q,n=a.vectors.items[1],n.vector[0]=w[0],n.vector[1]=w[1],n.texCoords[0]=0,n.texCoords[1]=q,n=a.vectors.items[2],m(n.vector,d(v[9],F),l(v[10],d(v[11],g),H)),n.texCoords[0]=0,n.texCoords[1]=
B,g=a.vectors.items[3],m(g.vector,d(v[12],w),l(v[13],f,H)),g.texCoords[0]=0,g.texCoords[1]=B,f=a.vectors.items[4],f.vector[0]=0,f.vector[1]=0,f.texCoords[0]=0,f.texCoords[1]=0,a.vectors.count=5,f=a.lists[y.ENTRY],f.items[0]=2,f.items[1]=4,f.items[2]=0,f.count=3,f=a.lists[y.EXIT],f.items[0]=3,f.items[1]=4,f.items[2]=1,f.count=3,a.capCenter=4):(n=a.vectors.items[0],n.vector[0]=F[0],n.vector[1]=F[1],n.texCoords[0]=0,n.texCoords[1]=q,n=a.vectors.items[1],n.vector[0]=w[0],n.vector[1]=w[1],n.texCoords[0]=
0,n.texCoords[1]=q,n=a.vectors.items[2],l(n.vector,z,1/G),n.texCoords[0]=0,n.texCoords[1]=B,g=a.vectors.items[3],g.vector[0]=0,g.vector[1]=0,g.texCoords[0]=0,g.texCoords[1]=0,a.vectors.count=4,f=a.lists[y.ENTRY],f.items[0]=2,f.items[1]=3,f.items[2]=0,f.count=3,f=a.lists[y.EXIT],f.items[0]=2,f.items[1]=3,f.items[2]=1,f.count=3,a.capCenter=3);E(x,F,w,t,0>u);t=a.vectors.count;F=a.lists[y.CAP];for(w=F.items[0]=0;w<x.count;++w)f=x.items[w],B=a.vectors.items[t+w],B.vector[0]=f[0],B.vector[1]=f[1],B.texCoords[0]=
0,B.texCoords[1]=q,F.items[w+1]=t+w;F.items[x.count+1]=1;F.count=x.count+2;a.vectors.count=t+x.count;0>u&&(C(a.lists[y.ENTRY]),C(a.lists[y.EXIT]))};a.unitRoundJoin=function(a,e,g,l){var f=b(e,g),m=0<f?[-1,1]:[1,-1],t=m[0],m=m[1];e=0<f?d(v[0],c(v[1],e)):c(v[2],e);g=0<f?d(v[3],c(v[4],g)):c(v[5],g);var u=a.vectors.items[0];u.vector[0]=e[0];u.vector[1]=e[1];u.texCoords[0]=0;u.texCoords[1]=m;u=a.vectors.items[1];u.vector[0]=g[0];u.vector[1]=g[1];u.texCoords[0]=0;u.texCoords[1]=m;u=a.vectors.items[2];d(u.vector,
e);u.texCoords[0]=0;u.texCoords[1]=t;u=a.vectors.items[3];d(u.vector,g);u.texCoords[0]=0;u.texCoords[1]=t;t=a.vectors.items[4];t.vector[0]=0;t.vector[1]=0;t.texCoords[0]=0;t.texCoords[1]=0;a.vectors.count=5;t=a.lists[y.ENTRY];t.items[0]=2;t.items[1]=0;t.count=2;t=a.lists[y.EXIT];t.items[0]=3;t.items[1]=1;t.count=2;a.capCenter=4;E(x,e,g,l,0>f);l=a.vectors.count;e=a.lists[y.CAP];for(t=e.items[0]=0;t<x.count;++t)g=x.items[t],u=a.vectors.items[l+t],u.vector[0]=g[0],u.vector[1]=g[1],u.texCoords[0]=0,u.texCoords[1]=
m,e.items[t+1]=l+t;e.items[x.count+1]=1;e.count=x.count+2;a.vectors.count=l+x.count;0>f&&(C(a.lists[y.ENTRY]),C(a.lists[y.EXIT]))};a.rectJoin=function(a,b,e){b=c(v[0],b);e=c(v[1],e);var g=a.vectors.items[0];g.vector[0]=b[0];g.vector[1]=b[1];g.texCoords[0]=0;g.texCoords[1]=-1;g=a.vectors.items[1];g.vector[0]=e[0];g.vector[1]=e[1];g.texCoords[0]=0;g.texCoords[1]=-1;g=a.vectors.items[2];d(g.vector,b);g.texCoords[0]=0;g.texCoords[1]=1;b=a.vectors.items[3];d(b.vector,e);b.texCoords[0]=0;b.texCoords[1]=
1;a.vectors.count=4;b=a.lists[y.ENTRY];b.items[0]=0;b.items[1]=2;b.count=2;b=a.lists[y.EXIT];b.items[0]=1;b.items[1]=3;b.count=2;a.capCenter=void 0}})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleLayer":function(){define(["require","exports","./StyleDefinition","./StyleProperty","./Filter"],function(n,a,f,p,g){Object.defineProperty(a,"__esModule",{value:!0});n=function(){function a(a,b,d){this.type=a;this.id=b.id;this.source=b.source;this.sourceLayer=b["source-layer"];this.minzoom=b.minzoom;
this.maxzoom=b.maxzoom;this.filter=b.filter;this.layout=b.layout;this.paint=b.paint;this.z=d;switch(a){case 0:this._layoutDefinition=f.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=f.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=f.StyleDefinition.fillLayoutDefinition;this._paintDefinition=f.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=f.StyleDefinition.lineLayoutDefinition;this._paintDefinition=f.StyleDefinition.linePaintDefinition;
break;case 3:this._layoutDefinition=f.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=f.StyleDefinition.symbolPaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}a.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=g.createFilter(this.filter)};a.prototype.hasLayoutProperty=function(a){var b=this._layoutProperties;return b&&b[a]?!0:!1};a.prototype.hasPaintProperty=
function(a){var b=this._paintProperties;return b?void 0!==b[a]:!1};a.prototype.getLayoutValue=function(a,b){var d,c=this._layoutProperties;c&&(c=c[a])&&(d=c.getValue(b));c=this._layoutDefinition[a];void 0===d&&(d=c["default"]);"enum"===c.type&&(d=c.values.indexOf(d));return d};a.prototype.getPaintValue=function(a,b){var d,c=this._paintProperties;c&&(c=c[a])&&(d=c.getValue(b));c=this._paintDefinition[a];void 0===d&&(d=c["default"]);"enum"===c.type&&(d=c.values.indexOf(d));return d};a.prototype._parseLayout=
function(a){var b={},d;for(d in a)b[d]=new p(this._layoutDefinition[d],a[d]);return b};a.prototype._parsePaint=function(a){var b={},d;for(d in a)b[d]=new p(this._paintDefinition[d],a[d]);return b};return a}();a.StyleLayer=n;n=function(){return function(a,c){this.cap=a.getLayoutValue("line-cap",c);this.join=a.getLayoutValue("line-join",c);this.miterLimit=a.getLayoutValue("line-miter-limit",c);this.roundLimit=a.getLayoutValue("line-round-limit",c)}}();a.LineLayout=n;n=function(){return function(a,c,
b){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",c);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",c);this.optional=a.getLayoutValue("icon-optional",c);this.rotationAlignment=a.getLayoutValue("icon-rotation-alignment",c);this.size=a.getLayoutValue("icon-size",c);this.rotate=a.getLayoutValue("icon-rotate",c);this.padding=a.getLayoutValue("icon-padding",c);this.keepUpright=a.getLayoutValue("icon-keep-upright",c);this.offset=a.getLayoutValue("icon-offset",c);b&&1===this.rotationAlignment&&
!a.hasLayoutProperty("icon-rotation-alignment")&&(this.rotationAlignment=0)}}();a.IconLayout=n;n=function(){return function(a,c,b){this.allowOverlap=a.getLayoutValue("text-allow-overlap",c);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",c);this.optional=a.getLayoutValue("text-optional",c);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",c);this.font=a.getLayoutValue("text-font",c);this.maxWidth=a.getLayoutValue("text-max-width",c);this.lineHeight=a.getLayoutValue("text-line-height",
c);this.letterSpacing=a.getLayoutValue("text-letter-spacing",c);this.justify=a.getLayoutValue("text-justify",c);this.anchor=a.getLayoutValue("text-anchor",c);this.maxAngle=a.getLayoutValue("text-max-angle",c);this.size=a.getLayoutValue("text-size",c);this.rotate=a.getLayoutValue("text-rotate",c);this.padding=a.getLayoutValue("text-padding",c);this.keepUpright=a.getLayoutValue("text-keep-upright",c);this.transform=a.getLayoutValue("text-transform",c);this.offset=a.getLayoutValue("text-offset",c);b&&
1===this.rotationAlignment&&!a.hasLayoutProperty("text-rotation-alignment")&&(this.rotationAlignment=0)}}();a.TextLayout=n})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(n,a){Object.defineProperty(a,"__esModule",{value:!0});var f=function(){return function(){}}();f.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};f.fillLayoutDefinition={visibility:{type:"enum",values:["visible",
"none"],"default":"visible"}};f.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2},"line-round-limit":{type:"number","default":1.05}};f.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"symbol-placement":{type:"enum",
values:["point","line"],"default":"point"},"symbol-spacing":{type:"number",minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},"icon-optional":{type:"boolean","default":!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number","default":0},
"icon-padding":{type:"number",minimum:0,"default":2},"icon-keep-upright":{type:"boolean","default":!0},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},"text-line-height":{type:"number",
"default":1.2},"text-letter-spacing":{type:"number","default":0},"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),"default":"center"},"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number","default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean","default":!0},"text-transform":{type:"enum",
values:["none","uppercase","lowercase"],"default":"none"},"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean","default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean","default":!1}};f.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,"default":1},"background-color":{type:"color","default":[0,0,0,1]},"background-pattern":{type:"string"}};f.fillPaintDefinition={"fill-opacity":{type:"number",
minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean","default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color","default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}};f.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},"line-color":{type:"color","default":[0,0,0,1]},
"line-translate":{type:"array",value:"number",length:2,"default":[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",value:"number","default":[]},"line-pattern":{type:"string"}};f.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,
maximum:1,"default":1},"icon-color":{type:"color","default":[0,0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"text-opacity":{type:"number",minimum:0,maximum:1,"default":1},"text-color":{type:"color","default":[0,0,0,1]},"text-halo-color":{type:"color",
"default":[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};f.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,"default":1},"raster-hue-rotate":{type:"number","default":0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",
minimum:0,maximum:1,"default":1},"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,"default":300}};f.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",minimum:0,"default":5},"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",minimum:0,"default":0},"circle-translate":{type:"array",
value:"number",length:2,"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};a.StyleDefinition=f})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(n,a,f,p){return function(){function a(e,c){var b;switch(e.type){case "number":b=!0;break;case "color":b=!0;c=a._parseColor(c);break;case "array":b="number"===e.value;break;default:b=!1}this.getValue=b?this._interpolate(c):
this._piecewise(c)}a.prototype._piecewise=function(a){var c=a.stops;return c?function(a){var b=c.length;if(0!==b){for(var e=0,g=0;g<b;g++)if(c[g][0]<=a)e=g;else break;return c[e][1]}}:function(){return a}};a.prototype._interpolate=function(a){var c=a.stops;if(c){var b=a.base||1;return function(a){for(var d,e,g=c.length,f=0;f<g;f++){var n=c[f];if(n[0]<=a)d=n;else{e=n;break}}if(d&&e){f=e[0]-d[0];a-=d[0];a=1===b?a/f:(Math.pow(b,a)-1)/(Math.pow(b,f)-1);if(Array.isArray(d[1])){d=d[1];e=e[1];g=[];for(f=
0;f<d.length;f++)g.push(p.interpolate(d[f],e[f],a));return g}return p.interpolate(d[1],e[1],a)}if(d)return d[1];if(e)return e[1]}}return function(){return a}};a._parseColor=function(e){if(Array.isArray(e))return e;if("string"===typeof e)return e=new f(e),[e.r/255,e.g/255,e.b/255,e.a||1];if(e&&e.stops)return e.stops=e.stops.map(function(c){return[c[0],a._parseColor(c[1])]}),e;throw Error("Incorrect color definition "+e);};return a}()})},"esri/layers/vectorTiles/Color":function(){define(["require",
"exports","esri/Color"],function(n,a,f){return function(){return function(a){return new f(a)}}()})},"esri/Color":function(){define(["dojo/_base/declare","dojo/_base/Color","dojo/has","./kernel"],function(n,a,f,p){n=n([a],{declaredClass:"esri.Color"});n.toJsonColor=function(a){return a&&[a.r,a.g,a.b,1<a.a?a.a:Math.round(255*a.a)]};n.toDojoColor=function(c){return c&&new a([c[0],c[1],c[2],c[3]/255])};var g,e="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(g=0;g<e.length;g++)n[e[g]]=
a[e[g]];f("extend-esri")&&(p.Color=n);return n})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(n,a,f){function p(a,b){throw Error("declare"+(b?" "+b:"")+": "+a);}function g(a,b){for(var d=[],c=[{cls:0,refs:[]}],e={},g=1,f=a.length,l=0,m,t,q,v,w;l<f;++l){(m=a[l])?"[object Function]"!=x.call(m)&&p("mixin #"+l+" is not a callable constructor.",b):p("mixin #"+l+" is unknown. Did you use dojo.require to pull it in?",b);t=m._meta?m._meta.bases:[m];q=0;for(m=t.length-1;0<=
m;--m)v=t[m].prototype,v.hasOwnProperty("declaredClass")||(v.declaredClass="uniqName_"+I++),v=v.declaredClass,e.hasOwnProperty(v)||(e[v]={count:0,refs:[],cls:t[m]},++g),v=e[v],q&&q!==v&&(v.refs.push(q),++q.count),q=v;++q.count;c[0].refs.push(q)}for(;c.length;){q=c.pop();d.push(q.cls);for(--g;w=q.refs,1==w.length;){q=w[0];if(!q||--q.count){q=0;break}d.push(q.cls);--g}if(q)for(l=0,f=w.length;l<f;++l)q=w[l],--q.count||c.push(q)}g&&p("can't build consistent linearization",b);m=a[0];d[0]=m?m._meta&&m===
d[d.length-m._meta.bases.length]?m._meta.bases.length:1:0;return d}function e(a,b,d,c){var e,g,f,l,m,t,q=this._inherited=this._inherited||{};"string"===typeof a&&(e=a,a=b,b=d,d=c);if("function"===typeof a)f=a,a=b,b=d;else try{f=a.callee}catch(Q){if(Q instanceof TypeError)p("strict mode inherited() requires the caller function to be passed before arguments",this.declaredClass);else throw Q;}(e=e||f.nom)||p("can't deduce a name to call inherited()",this.declaredClass);d=c=0;l=this.constructor._meta;
c=l.bases;t=q.p;if("constructor"!=e){if(q.c!==f&&(t=0,m=c[0],l=m._meta,l.hidden[e]!==f)){(g=l.chains)&&"string"==typeof g[e]&&p("calling chained method with inherited: "+e,this.declaredClass);do if(l=m._meta,g=m.prototype,l&&(g[e]===f&&g.hasOwnProperty(e)||l.hidden[e]===f))break;while(m=c[++t]);t=m?t:-1}if(m=c[++t])if(g=m.prototype,m._meta&&g.hasOwnProperty(e))d=g[e];else{f=K[e];do if(g=m.prototype,(d=g[e])&&(m._meta?g.hasOwnProperty(e):d!==f))break;while(m=c[++t])}d=m&&d||K[e]}else{if(q.c!==f&&(t=
0,(l=c[0]._meta)&&l.ctor!==f)){for((g=l.chains)&&"manual"===g.constructor||p("calling chained constructor with inherited",this.declaredClass);(m=c[++t])&&(!(l=m._meta)||l.ctor!==f););t=m?t:-1}for(;(m=c[++t])&&!(d=(l=m._meta)?l.ctor:m););d=m&&d}q.c=d;q.p=t;if(d)return!0===b?d:d.apply(this,b||a)}function c(a,b,d){return"string"===typeof a?"function"===typeof b?this.__inherited(a,b,d,!0):this.__inherited(a,b,!0):"function"===typeof a?this.__inherited(a,b,!0):this.__inherited(a,!0)}function b(a,b,d,c){var e=
this.getInherited(a,b,d);if(e)return e.apply(this,c||d||b||a)}function d(a){for(var b=this.constructor._meta.bases,d=0,c=b.length;d<c;++d)if(b[d]===a)return!0;return this instanceof a}function l(b,d){for(var c in d)"constructor"!=c&&d.hasOwnProperty(c)&&(b[c]=d[c]);if(a("bug-for-in-skips-shadowed"))for(var e=f._extraNames,g=e.length;g;)c=e[--g],"constructor"!=c&&d.hasOwnProperty(c)&&(b[c]=d[c])}function m(a){w.safeMixin(this.prototype,a);return this}function t(a,b){a instanceof Array||"function"===
typeof a||(b=a,a=void 0);b=b||{};a=a||[];return w([this].concat(a),b)}function E(a,b){return function(){var d=arguments,c=d,e=d[0],g,f;f=a.length;var l;if(!(this instanceof d.callee))return A(d);if(b&&(e&&e.preamble||this.preamble))for(l=Array(a.length),l[0]=d,g=0;;){(e=d[0])&&(e=e.preamble)&&(d=e.apply(this,d)||d);e=a[g].prototype;(e=e.hasOwnProperty("preamble")&&e.preamble)&&(d=e.apply(this,d)||d);if(++g==f)break;l[g]=d}for(g=f-1;0<=g;--g)e=a[g],(e=(f=e._meta)?f.ctor:e)&&e.apply(this,l?l[g]:d);
(e=this.postscript)&&e.apply(this,c)}}function C(a,b){return function(){var d=arguments,c=d,e=d[0];if(!(this instanceof d.callee))return A(d);b&&(e&&(e=e.preamble)&&(c=e.apply(this,c)||c),(e=this.preamble)&&e.apply(this,c));a&&a.apply(this,d);(e=this.postscript)&&e.apply(this,d)}}function D(a){return function(){var b=arguments,d=0,c,e;if(!(this instanceof b.callee))return A(b);for(;c=a[d];++d)if(c=(e=c._meta)?e.ctor:c){c.apply(this,b);break}(c=this.postscript)&&c.apply(this,b)}}function y(a,b,d){return function(){var c,
e,g=0,f=1;d&&(g=b.length-1,f=-1);for(;c=b[g];g+=f)e=c._meta,(c=(e?e.hidden:c.prototype)[a])&&c.apply(this,arguments)}}function q(a){z.prototype=a.prototype;a=new z;z.prototype=null;return a}function A(a){var b=a.callee,d=q(b);b.apply(d,a);return d}function w(b,n,z){"string"!=typeof b&&(z=n,n=b,b="");z=z||{};var F,u,A,B,H,I,G,P=1,Q=n;"[object Array]"==x.call(n)?(I=g(n,b),A=I[0],P=I.length-A,n=I[P]):(I=[0],n?"[object Function]"==x.call(n)?(A=n._meta,I=I.concat(A?A.bases:n)):p("base class is not a callable constructor.",
b):null!==n&&p("unknown base class. Did you use dojo.require to pull it in?",b));if(n)for(u=P-1;;--u){F=q(n);if(!u)break;A=I[u];(A._meta?l:v)(F,A.prototype);B=a("csp-restrictions")?function(){}:new Function;B.superclass=n;B.prototype=F;n=F.constructor=B}else F={};w.safeMixin(F,z);A=z.constructor;A!==K.constructor&&(A.nom="constructor",F.constructor=A);for(u=P-1;u;--u)(A=I[u]._meta)&&A.chains&&(G=v(G||{},A.chains));F["-chains-"]&&(G=v(G||{},F["-chains-"]));n&&n.prototype&&n.prototype["-chains-"]&&
(G=v(G||{},n.prototype["-chains-"]));A=!G||!G.hasOwnProperty("constructor");I[0]=B=G&&"manual"===G.constructor?D(I):1==I.length?C(z.constructor,A):E(I,A);B._meta={bases:I,hidden:z,chains:G,parents:Q,ctor:z.constructor};B.superclass=n&&n.prototype;B.extend=m;B.createSubclass=t;B.prototype=F;F.constructor=B;F.getInherited=c;F.isInstanceOf=d;F.inherited=O;F.__inherited=e;b&&(F.declaredClass=b,f.setObject(b,B));if(G)for(H in G)F[H]&&"string"==typeof G[H]&&"constructor"!=H&&(A=F[H]=y(H,I,"after"===G[H]),
A.nom=H);return B}var v=f.mixin,K=Object.prototype,x=K.toString,z,I=0;z=a("csp-restrictions")?function(){}:new Function;var O=n.config.isDebug?b:e;n.safeMixin=w.safeMixin=function(b,d){var c,e;for(c in d)e=d[c],e===K[c]&&c in K||"constructor"==c||("[object Function]"==x.call(e)&&(e.nom=c),b[c]=e);if(a("bug-for-in-skips-shadowed")&&d)for(var g=f._extraNames,l=g.length;l;)c=g[--l],e=d[c],e===K[c]&&c in K||"constructor"==c||("[object Function]"==x.call(e)&&(e.nom=c),b[c]=e);return b};return n.declare=
w})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(n,a,f,p){var g=n.Color=function(a){a&&this.setColor(a)};g.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:p.transparentColor||[0,0,0,0]};a.extend(g,{r:255,g:255,
b:255,a:1,_set:function(a,c,b,d){this.r=a;this.g=c;this.b=b;this.a=d},setColor:function(e){a.isString(e)?g.fromString(e,this):a.isArray(e)?g.fromArray(e,this):(this._set(e.r,e.g,e.b,e.a),e instanceof g||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+f.map(["r","g","b"],function(a){a=this[a].toString(16);return 2>a.length?"0"+a:a},this).join("")},toCss:function(a){var c=
this.r+", "+this.g+", "+this.b;return(a?"rgba("+c+", "+this.a:"rgb("+c)+")"},toString:function(){return this.toCss(!0)}});g.blendColors=n.blendColors=function(a,c,b,d){var e=d||new g;f.forEach(["r","g","b","a"],function(d){e[d]=a[d]+(c[d]-a[d])*b;"a"!=d&&(e[d]=Math.round(e[d]))});return e.sanitize()};g.fromRgb=n.colorFromRgb=function(a,c){var b=a.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return b&&g.fromArray(b[1].split(/\s*,\s*/),c)};g.fromHex=n.colorFromHex=function(a,c){var b=c||new g,d=4==
a.length?4:8,e=(1<<d)-1;a=Number("0x"+a.substr(1));if(isNaN(a))return null;f.forEach(["b","g","r"],function(c){var g=a&e;a>>=d;b[c]=4==d?17*g:g});b.a=1;return b};g.fromArray=n.colorFromArray=function(a,c){var b=c||new g;b._set(Number(a[0]),Number(a[1]),Number(a[2]),Number(a[3]));isNaN(b.a)&&(b.a=1);return b.sanitize()};g.fromString=n.colorFromString=function(a,c){var b=g.named[a];return b&&g.fromArray(b,c)||g.fromRgb(a,c)||g.fromHex(a,c)};return g})},"esri/layers/vectorTiles/views/vectorTiles/style/Filter":function(){define(["require",
"exports"],function(n,a){var f=function(){function a(g,e,c){this._op=g;"$type"===e?(this._val=c instanceof Array?c.map(function(b){return a._types.indexOf(b)}):a._types.indexOf(c),this._op+=11):(this._key=e,this._val=c)}a.prototype.filter=function(a){switch(this._op){case 0:return this._val;case 1:return a.values[this._key]===this._val;case 2:return a.values[this._key]!==this._val;case 3:return a.values[this._key]<this._val;case 4:return a.values[this._key]>this._val;case 5:return a.values[this._key]<=
this._val;case 6:return a.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(a.values[this._key]);case 8:return-1===this._val.indexOf(a.values[this._key]);case 9:for(var e=0,c=this._val;e<c.length;e++){var b=c[e];if(b.filter(a))return!0}return!1;case 10:e=0;for(c=this._val;e<c.length;e++)if(b=c[e],!b.filter(a))return!1;return!0;case 11:e=0;for(c=this._val;e<c.length;e++)if(b=c[e],b.filter(a))return!1;return!0;case 12:return a.type===this._val;case 13:return a.type!==this._val;case 14:return a.type<
this._val;case 15:return a.type>this._val;case 16:return a.type>=this._val;case 17:return a.type<=this._val;case 18:return-1!==this._val.indexOf(a.type);case 19:return-1===this._val.indexOf(a.type)}};a.createFilter=function(g){if(!g)return new a(0,void 0,!0);var e=g[0];if(1>=g.length)return new a(0,void 0,"any"!==e);switch(e){case "\x3d\x3d":return new a(1,g[1],g[2]);case "!\x3d":return new a(2,g[1],g[2]);case "\x3e":return new a(4,g[1],g[2]);case "\x3c":return new a(3,g[1],g[2]);case "\x3e\x3d":return new a(6,
g[1],g[2]);case "\x3c\x3d":return new a(5,g[1],g[2]);case "in":return new a(7,g[1],g.slice(2));case "!in":return new a(8,g[1],g.slice(2));case "any":return new a(9,void 0,g.slice(1).map(a.createFilter.bind(this)));case "all":return new a(10,void 0,g.slice(1).map(a.createFilter.bind(this)));case "none":return new a(11,void 0,g.slice(1).map(a.createFilter.bind(this)));default:throw Error("invalid operator: "+e);}};return a}();f._types=["Unknown","Point","LineString","Polygon"];return f})},"esri/layers/vectorTiles/views/vectorTiles/SymbolBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./Geometry ./style/StyleLayer ./Placement ./GeometryUtils ./TextShaping dojox/string/BidiEngine".split(" "),
function(n,a,f,p,g,e,c,b,d,l,m){function t(a,b){if(a.iconMosaicItem&&b.iconMosaicItem){if(a.iconMosaicItem.page!==b.iconMosaicItem.page)return a.iconMosaicItem.page<b.iconMosaicItem.page?-1:1}else{if(a.iconMosaicItem&&!b.iconMosaicItem)return 1;if(!a.iconMosaicItem&&b.iconMosaicItem)return-1}return 0}var E=function(){return function(){}}(),C=function(){return function(a,b,d,c){this.line=b;this.shaping=a;this.iconMosaicItem=d;this.anchor=c}}();(function(){return function(){}})();n=function(a){function g(b,
d,c,e,g,f,l,m){b=a.call(this,b,d)||this;b._markerRatio=1;b._markerMap=new Map;b._glyphMap=new Map;b._glyphBufferDataStorage=new Map;b._markerVertexBuffer=c;b._markerIndexBuffer=e;b._textVertexBuffer=g;b._textIndexBuffer=f;b._placementEngine=l;b._workerTileHandler=m;return b}f(g,a);Object.defineProperty(g.prototype,"markerPageMap",{get:function(){return this._markerMap},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"glyphsPageMap",{get:function(){return this._glyphMap},enumerable:!0,
configurable:!0});Object.defineProperty(g.prototype,"textIndexStart",{get:function(){return this._textTriangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"textIndexCount",{get:function(){return this._textTriangleElementsNum},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"sdfMarker",{get:function(){return!1},enumerable:!0,configurable:!0});g.prototype.copy=function(a,b,d,c,e){e=new g(this.layer,this.zoom,a,b,d,c,e,this._workerTileHandler);e.layerIndex=
this.layerIndex;e.layerExtent=this.layerExtent;e._markerVertexStart=a.index;e._markerTriangleElementsStart=b.index;e._textVertexStart=d.index;e._textTriangleElementsStart=c.index;e._markerTriangleElementsNum=0;e._textTriangleElementsNum=0;e._symbolInstances=this._symbolInstances;e._workerTileHandler=this._workerTileHandler;e._font=this._font;e._textLayout=this._textLayout;e._markerLayout=this._markerLayout;e._isLinePlacement=this._isLinePlacement;e._avoidEdges=this._avoidEdges;return e};g.prototype.getResources=
function(a,b,d){var c=this.layer,e=this.zoom;a&&a.setExtent(this.layerExtent);for(var f=c.getLayoutValue("icon-image",e),l=c.getLayoutValue("text-field",e),m=c.getLayoutValue("text-font",e),c=c.getLayoutValue("text-transform",e),e=[],t=0,q=this._features;t<q.length;t++){var n=q[t],w=n.getGeometry(a);if(w&&0!==w.length){var p=void 0;f&&(p=this._replaceKeys(f,n.values))&&b.add(p);var u=void 0,C=!1;if(l){u=this._replaceKeys(l,n.values);switch(c){case 2:u=u.toLowerCase();break;case 1:u=u.toUpperCase()}g._bidiEngine.hasBidiChar(u)&&
(C=void 0,C="rtl"===g._bidiEngine.checkContextual(u)?"IDNNN":"ICNNN",u=g._bidiEngine.bidiTransform(u,C,"VLYSN"),C=!0);n=u.length;if(0<n){var A=d[m];A||(A=d[m]=new Set);for(var D=0;D<n;D++){var y=u.charCodeAt(D);A.add(y)}}}if(p||u)n=new E,n.sprite=p,n.label=u,n.rtl=C,n.geometry=w,e.push(n)}}this._symbolFeatures=e};g.prototype.processFeatures=function(a,e){a&&a.setExtent(this.layerExtent);var f=this.layer,m=this.zoom,q=this._isLinePlacement=1===f.getLayoutValue("symbol-placement",m),n=this._avoidEdges=
f.getLayoutValue("symbol-avoid-edges",m)&&!q,p=8*f.getLayoutValue("symbol-spacing",m),E=f.getLayoutValue("icon-image",m),A=f.getLayoutValue("text-field",m),D=this._workerTileHandler,y;E&&(this._markerLayout=new c.IconLayout(f,m,q),y=D.getSpriteItems());var B,F;if(A){var u=this._textLayout=new c.TextLayout(f,m,q);B=void 0;u.font&&u.font.length&&(this._font=B=u.font[0]);F=.5;switch(u.anchor){case 5:case 1:case 7:F=0;break;case 6:case 2:case 8:F=1}f=.5;switch(u.anchor){case 5:case 3:case 6:f=0;break;
case 7:case 4:case 8:f=1}m=.5;switch(u.justify){case 0:m=0;break;case 2:m=1}var E=24*u.letterSpacing,A=q?0:24*u.maxWidth,V=24*u.lineHeight,u=[24*u.offset[0],24*u.offset[1]];B=D.getGlyphItems(B);F=new l(B,A,V,E,u,F,f,m)}this._markerVertexStart=this._markerVertexBuffer.index;this._markerTriangleElementsStart=this._markerIndexBuffer.index;this._textVertexStart=this._textVertexBuffer.index;this._textTriangleElementsStart=this._textIndexBuffer.index;this._textTriangleElementsNum=this._markerTriangleElementsNum=
0;this._markerMap.clear();this._glyphMap.clear();this._symbolInstances=D=[];f=this._textLayout;m=1;f&&f.size&&(m=f.size/24);E=f?f.maxAngle*d.C_DEG_TO_RAD:0;A=f?8*f.size:0;V=0;for(u=this._symbolFeatures;V<u.length;V++){var J=u[V],aa=void 0;J.sprite&&(aa=y[J.sprite]);var N=void 0,R=J.label,P=0;if(R&&(N=F.getShaping(R,J.rtl))&&0<N.length){for(var P=1E30,R=-1E30,Q=0,S=N;Q<S.length;Q++)var T=S[Q],P=Math.min(P,T.x),R=Math.max(R,T.x);P=(R-P+48)*m*8}R=0;for(J=J.geometry;R<J.length;R++)for(Q=J[R],T=void 0,
q?(N&&0<N.length&&f&&f.size&&g._smoothVertices(Q,8*f.size*(2+Math.min(2,4*Math.abs(f.offset[1])))),T=g._findAnchors(Q,p,P)):T=[new b.Anchor(Q[0].x,Q[0].y)],S=0;S<T.length;S++){var ca=T[S];0>ca.x||4096<ca.x||0>ca.y||4096<ca.y||q&&0<P&&0===f.rotationAlignment&&!g._honorsTextMaxAngle(Q,ca,P,E,A)||D.push(new C(N,Q,aa,ca))}}D.sort(t);for(q=0;q<D.length;q++)this._processFeature(D[q],B,n);this._addPlacedGlyphs()};g.prototype.updateSymbols=function(){this._markerVertexStart=this._markerVertexBuffer.index;
this._markerTriangleElementsStart=this._markerIndexBuffer.index;this._textVertexStart=this._textVertexBuffer.index;this._textTriangleElementsStart=this._textIndexBuffer.index;this._textTriangleElementsNum=this._markerTriangleElementsNum=0;this._markerMap.clear();this._glyphMap.clear();for(var a=this._workerTileHandler.getGlyphItems(this._font),b=this._avoidEdges,d=0,c=this._symbolInstances;d<c.length;d++)this._processFeature(c[d],a,b);this._addPlacedGlyphs()};g.prototype._replaceKeys=function(a,b){return a.replace(/{([^{}]+)}/g,
function(a,d){return d in b?b[d]:""})};g.prototype._processFeature=function(a,b,c){var g=a.line,f=a.iconMosaicItem,l=a.shaping,m=a.anchor,t=(a=this._markerLayout)&&!!f,q=!0,n=1;t&&(n=a.size/(1/this._markerRatio)*8,q=a.optional||!f);var p=this._textLayout,C=p&&l&&0<l.length,E;E=1;var u=!0;C&&(E=p.size/24,E*=8,u=p.optional||!l||0===l.length);var w=new e.Point(0,-17),D;if(t){D=this._placementEngine.getIconPlacement(m,f,n,g,a,c);if(D.footprint.minzoom===d.C_INFINITY&&!q)return;m.minzoom>D.footprint.minzoom&&
(D.footprint.minzoom=m.minzoom)}var A;if(C&&(A=this._placementEngine.getTextPlacement(m,w,l,b,E,g,p,c))){if(A.footprint.minzoom===d.C_INFINITY&&!u)return;m.minzoom>A.footprint.minzoom&&(A.footprint.minzoom=m.minzoom)}if(!u&&!q||!q&&A&&A.footprint.minzoom!==d.C_INFINITY||!u&&D&&D.footprint.minzoom!==d.C_INFINITY)b=Math.max(D.footprint.minzoom,A.footprint.minzoom),D.footprint.minzoom=b,A.footprint.minzoom=b;A&&A.footprint.minzoom!==d.C_INFINITY&&(p.ignorePlacement||this._placementEngine.add(A),this._storePlacedGlyphs(A.shapes,
A.footprint.minzoom,this.zoom));D&&D.footprint.minzoom!==d.C_INFINITY&&(a.ignorePlacement||this._placementEngine.add(D),this._addPlacedIcons(D.shapes,D.footprint.minzoom,this.zoom,f.page))};g.prototype._addPlacedIcons=function(a,b,c,e){b=Math.max(c+d.log2(b),0);for(var g=this._markerVertexBuffer,f=this._markerIndexBuffer,l=0;l<a.length;l++){var m=a[l],t=Math.max(c+d.log2(m.minzoom),b),q=Math.min(c+d.log2(m.maxzoom),25);if(!(q<=t)){var n=m.tl,p=m.tr,E=m.bl,C=m.br,v=m.mosaicRect,w=-m.labelAngle,m=m.anchor,
D=g.index,A=v.x,y=v.y,P=A+v.width,v=y+v.height;g.add(m.x,m.y,n.x,n.y,A,y,w,t,q,b);g.add(m.x,m.y,p.x,p.y,P,y,w,t,q,b);g.add(m.x,m.y,E.x,E.y,A,v,w,t,q,b);g.add(m.x,m.y,C.x,C.y,P,v,w,t,q,b);f.add(D+0,D+1,D+2);f.add(D+1,D+2,D+3);this._markerMap.has(e)?this._markerMap.get(e)[1]+=6:this._markerMap.set(e,[this._markerTriangleElementsStart+this._markerTriangleElementsNum/3,6]);this._markerTriangleElementsNum+=6}}};g.prototype._addPlacedGlyphs=function(){var a=this,b=this._textVertexBuffer,d=this._textIndexBuffer;
this._glyphBufferDataStorage.forEach(function(c,e){for(var g=0;g<c.length;g++){var f=c[g],m=b.index;b.add(f.glyphAnchor[0],f.glyphAnchor[1],f.tl[0],f.tl[1],f.xmin,f.ymin,f.labelAngle,f.minLod,f.maxLod,f.placementLod);b.add(f.glyphAnchor[0],f.glyphAnchor[1],f.tr[0],f.tr[1],f.xmax,f.ymin,f.labelAngle,f.minLod,f.maxLod,f.placementLod);b.add(f.glyphAnchor[0],f.glyphAnchor[1],f.bl[0],f.bl[1],f.xmin,f.ymax,f.labelAngle,f.minLod,f.maxLod,f.placementLod);b.add(f.glyphAnchor[0],f.glyphAnchor[1],f.br[0],f.br[1],
f.xmax,f.ymax,f.labelAngle,f.minLod,f.maxLod,f.placementLod);d.add(m+0,m+1,m+2);d.add(m+1,m+2,m+3);a._glyphMap.has(e)?a._glyphMap.get(e)[1]+=6:a._glyphMap.set(e,[a._textTriangleElementsStart+a._textTriangleElementsNum/3,6]);a._textTriangleElementsNum+=6}});this._glyphBufferDataStorage.clear()};g.prototype._storePlacedGlyphs=function(a,b,c){b=Math.max(c+d.log2(b),0);for(var e=0;e<a.length;e++){var g=a[e],f=Math.max(c+d.log2(g.minzoom),b),m=Math.min(c+d.log2(g.maxzoom),25);if(!(m<=f)){var l=g.tl,t=
g.tr,n=g.bl,q=g.br,p=-g.labelAngle,E=g.anchor,C=g.mosaicRect;this._glyphBufferDataStorage.has(g.page)||this._glyphBufferDataStorage.set(g.page,[]);this._glyphBufferDataStorage.get(g.page).push({glyphAnchor:[E.x,E.y],tl:[l.x,l.y],tr:[t.x,t.y],bl:[n.x,n.y],br:[q.x,q.y],xmin:C.x,ymin:C.y,xmax:C.x+C.width,ymax:C.y+C.height,labelAngle:p,minLod:f,maxLod:m,placementLod:b})}}};g._findAnchors=function(a,c,g){c+=g;for(var f=0,m=a.length-1,l=0;l<m;l++)f+=e.Point.distance(a[l],a[l+1]);l=.5*(g||c);if(f<=l)return[];
g=l/f;c=f/Math.max(Math.round(f/c),1);for(var f=0,m=-c/2,t=[],n=a.length-1,l=0;l<n;l++){for(var q=a[l],p=a[l+1],C=p.x-q.x,E=p.y-q.y,w=Math.sqrt(C*C+E*E),u=void 0;m+c<f+w;){var m=m+c,D=(m-f)/w,y=d.interpolate(q.x,p.x,D),D=d.interpolate(q.y,p.y,D);void 0===u&&(u=Math.atan2(E,C));t.push(new b.Anchor(y,D,u,l,g))}f+=w}return t};g.deviation=function(a,b,d){return Math.atan2((b.x-a.x)*(d.y-b.y)-(b.y-a.y)*(d.x-b.x),(b.x-a.x)*(d.x-b.x)+(b.y-a.y)*(d.y-b.y))};g._honorsTextMaxAngle=function(a,b,d,c,g){var f=
0;d/=2;for(var m=new e.Point(b.x,b.y),l=b.segment+1;f>-d;){--l;if(0>l)return!1;f-=e.Point.distance(a[l],m);m=a[l]}f+=e.Point.distance(a[l],a[l+1]);b=[];for(var m=0,t=a.length;f<d;){var n=a[l],p=void 0;do{++l;if(l===t)return!1;p=a[l]}while(p.isEqual(n));var q=l,C=void 0;do{++q;if(q===t)return!1;C=a[q]}while(C.isEqual(p));n=this.deviation(n,p,C);b.push({deviation:n,distToAnchor:f});for(m+=n;f-b[0].distToAnchor>g;)m-=b.shift().deviation;if(Math.abs(m)>c)return!1;f+=e.Point.distance(p,C)}return!0};g._smoothVertices=
function(a,b){if(!(0>=b)){var d=a.length;if(!(3>d)){var c=[],g=0;c.push(0);for(var f=1;f<d;f++)g+=e.Point.distance(a[f],a[f-1]),c.push(g);b=Math.min(b,.2*g);g=[];g.push(a[0].x);g.push(a[0].y);var l=a[d-1].x,m=a[d-1].y,f=e.Point.sub(a[0],a[1]);f.normalize();a[0].x+=b*f.x;a[0].y+=b*f.y;f.assignSub(a[d-1],a[d-2]);f.normalize();a[d-1].x+=b*f.x;a[d-1].y+=b*f.y;for(f=1;f<d;f++)c[f]+=b;c[d-1]+=b;for(var t=.5*b,f=1;f<d-1;f++){for(var n=0,p=0,C=0,E=f-1;0<=E&&!(c[E+1]<c[f]-t);E--){var q=t+c[E+1]-c[f],D=c[E+
1]-c[E],y=c[f]-c[E]<t?1:q/D;if(1E-6>Math.abs(y))break;var A=y*y,N=y*q-.5*A*D,R=y*D/b,P=a[E+1],Q=a[E].x-P.x,S=a[E].y-P.y,n=n+R/N*(P.x*y*q+.5*A*(q*Q-D*P.x)-A*y*D*Q/3),p=p+R/N*(P.y*y*q+.5*A*(q*S-D*P.y)-A*y*D*S/3),C=C+R}for(E=f+1;E<d&&!(c[E-1]>c[f]+t);E++){q=t-c[E-1]+c[f];D=c[E]-c[E-1];y=c[E]-c[f]<t?1:q/D;if(1E-6>Math.abs(y))break;A=y*y;N=y*q-.5*A*D;R=y*D/b;P=a[E-1];Q=a[E].x-P.x;S=a[E].y-P.y;n+=R/N*(P.x*y*q+.5*A*(q*Q-D*P.x)-A*y*D*Q/3);p+=R/N*(P.y*y*q+.5*A*(q*S-D*P.y)-A*y*D*S/3);C+=R}g.push(n/C);g.push(p/
C)}g.push(l);g.push(m);for(E=f=0;f<d;f++)a[f].x=g[E++],a[f].y=g[E++]}}};return g}(g);n._bidiEngine=new m;return n})},"esri/layers/vectorTiles/views/vectorTiles/Placement":function(){define(["require","exports","./Geometry","./GeometryUtils","./Conflict"],function(n,a,f,p,g){Object.defineProperty(a,"__esModule",{value:!0});n=function(){return function(a,b,c,e,g){void 0===c&&(c=0);void 0===e&&(e=-1);void 0===g&&(g=d);this.x=a;this.y=b;this.angle=c;this.segment=e;this.minzoom=g}}();a.Anchor=n;n=function(){return function(a,
b,d){this.glyph=a;this.x=b;this.y=d}}();a.ShapedGlyph=n;var e=function(){return function(a,b,c,e,g,f,n){void 0===g&&(g=!1);void 0===f&&(f=d);void 0===n&&(n=p.C_INFINITY);this.anchor=a;this.labelAngle=b;this.glyphAngle=c;this.page=e;this.upsideDown=g;this.minzoom=f;this.maxzoom=n}}(),c=function(){return function(a,b,d,c,e,g,f,n,p,w){this.tl=a;this.tr=b;this.bl=d;this.br=c;this.mosaicRect=e;this.labelAngle=g;this.anchor=f;this.minzoom=n;this.maxzoom=p;this.page=w}}();a.PlacedSymbol=c;var b=function(){return function(a,
b){this.footprint=a;this.shapes=b}}();a.Placement=b;var d=.5;n=function(){function a(){this.mapAngle=0;this._conflictEngine=new g.ConflictEngine}a.prototype.reset=function(){this._conflictEngine.reset()};a.prototype.setAngle=function(a){this.mapAngle=a;this._conflictEngine.setAngle(a)};a.prototype.getIconPlacement=function(a,e,l,n,D,y){var m=e.width/e.pixelRatio,t=e.height/e.pixelRatio;n=D.offset[0]-m/2;var E=D.offset[1]-t/2,m=n+m,t=E+t,C=e.rect,K=n-2,x=E-2,z=K+C.width/e.pixelRatio,I=x+C.height/e.pixelRatio;
e=new f.Point(K,x);var O=new f.Point(z,I),K=new f.Point(K,I),z=new f.Point(z,x),I=D.rotate*p.C_DEG_TO_RAD,x=1===D.rotationAlignment;0<=a.segment&&!x&&(I+=a.angle);if(0!==I){var G=Math.cos(I),H=Math.sin(I);e.rotate(G,H);O.rotate(G,H);K.rotate(G,H);z.rotate(G,H)}G=8*D.padding;H=new f.Point(a.x,a.y);a=new g.Footprint(this.mapAngle,G,x);a.addBox(H,new g.Box(n,E,m,t),l,I,d,p.C_INFINITY);l=new c(e,z,K,O,C,0,H,d,p.C_INFINITY,0);l=new b(a,[l]);n=d;D.allowOverlap||(n=this._conflictEngine.getMinZoom(l.footprint,
n,y,x));a.minzoom=n;return l};a.prototype.getTextPlacement=function(a,l,n,C,D,y,q,A){for(var m=new f.Point(a.x,a.y),t=q.rotate*p.C_DEG_TO_RAD,E=0===q.rotationAlignment,x=q.keepUpright,z=d,I=!E,O=I?0:a.angle,G=0<=a.segment&&E,H=new g.Footprint(this.mapAngle,8*q.padding,I),B=[],F=!G,u=Number.POSITIVE_INFINITY,V=Number.NEGATIVE_INFINITY,J=u,aa=V,N=G?x:E&&x,R=[],P,Q=0;Q<n.length;Q++){var S=n[Q],T=C[S.glyph];if(T&&!T.rect.isEmpty){var ca=T.rect,fa=T.metrics,da=T.page;F&&(P&&P!==S.y&&(H.addBox(m,new g.Box(u,
J,V,aa),D,t,d,p.C_INFINITY),u=Number.POSITIVE_INFINITY,V=Number.NEGATIVE_INFINITY,J=u,aa=V),P=S.y);var ga=[];if(G){if(T=(l.x+S.x+fa.left-4+.5*T.metrics.width)*D,z=this._placeGlyph(a,z,T,y,a.segment,1,da,ga),x&&(z=this._placeGlyph(a,z,T,y,a.segment,-1,da,ga)),2<=z)break}else ga.push(new e(m,O,O,da)),E&&x&&ga.push(new e(m,O+p.C_PI,O+p.C_PI,da,!0));for(var da=S.x+l.x+fa.left,S=S.y+l.y-fa.top,T=da+fa.width,fa=S+fa.height,ea=new f.Point(da-4,S-4),X=new f.Point(ea.x+ca.width,ea.y+ca.height),ha=new f.Point(ea.x,
X.y),W=new f.Point(X.x,ea.y),ia=0;ia<ga.length;ia++){var Y=ga[ia],ka=ea.clone(),la=ha.clone(),ma=W.clone(),na=X.clone(),oa=S,ba=fa,L=Y.glyphAngle+t;if(0!==L){var U=Math.cos(L),h=Math.sin(L);ka.rotate(U,h);na.rotate(U,h);la.rotate(U,h);ma.rotate(U,h)}B.push(new c(ka,ma,la,na,ca,Y.labelAngle,Y.anchor,Y.minzoom,Y.maxzoom,Y.page));if(!N||this._legible(Y.labelAngle))F?(da<u&&(u=da),oa<J&&(J=oa),T>V&&(V=T),ba>aa&&(aa=ba)):2>Y.minzoom&&H.addBox(Y.anchor,new g.Box(da,oa,T,ba),D,L,Y.minzoom,Y.maxzoom);R.push(Y)}}}if(2<=
z)return null;F&&H.addBox(m,new g.Box(u,J,V,aa),D,t,d,p.C_INFINITY);a=new b(H,B);q.allowOverlap||(z=this._conflictEngine.getMinZoom(a.footprint,z,A,I));H.minzoom=z;return a};a.prototype.add=function(a){this._conflictEngine.add(a.footprint)};a.prototype._legible=function(a){a=p.radToByte(a);return 65>a||193<=a};a.prototype._placeGlyph=function(a,b,d,c,g,l,n,A){var m=0>l?p.positiveMod(a.angle+p.C_PI,p.C_2PI):a.angle,t=this._legible(m),E=0;0>d&&(l*=-1,d*=-1,E=p.C_PI);0<l&&++g;a=new f.Point(a.x,a.y);
var C=c[g],q=p.C_INFINITY;if(c.length<=g)return q;for(;;){var D=C.x-a.x,y=C.y-a.y,G=Math.sqrt(D*D+y*y),H=Math.max(d/G,b),D=p.positiveMod(Math.atan2(y/G,D/G)+E,p.C_2PI);A.push(new e(a,m,D,n,t,H,q));if(H<=b)return H;a=C.clone();do{g+=l;if(c.length<=g||0>g)return H;C=c[g]}while(a.isEqual(C));q=C.x-a.x;D=C.y-a.y;y=Math.sqrt(q*q+D*D);q*=G/y;D*=G/y;a.x-=q;a.y-=D;q=H}};return a}();a.PlacementEngine=n})},"esri/layers/vectorTiles/views/vectorTiles/Conflict":function(){define(["require","exports","./Geometry",
"./GeometryUtils"],function(n,a,f,p){Object.defineProperty(a,"__esModule",{value:!0});n=function(){function a(a,d,c,e){this.left=a;this.top=d;this.right=c;this.bottom=e}a.prototype.clone=function(){return new a(this.left,this.top,this.right,this.bottom)};a.prototype.move=function(a,d){this.left+=a;this.top+=d;this.right+=a;this.bottom+=d};a.prototype.rotate=function(a,d){var b=this.left,c=this.right,e=this.top,g=this.bottom,f=b*a-e*d,n=b*d+e*a,p=c*a-e*d,e=c*d+e*a,q=b*a-g*d,b=b*d+g*a,A=c*a-g*d,c=c*
d+g*a;this.left=Math.min(f,p,q,A);this.top=Math.min(n,e,b,c);this.right=Math.max(f,p,q,A);this.bottom=Math.max(n,e,b,c)};a.overlaps=function(a,d){return a.right>d.left&&a.left<d.right&&a.bottom>d.top&&a.top<d.bottom};return a}();a.Box=n;var g=function(){function a(a,d,c,e){this.anchor=a;this.corners=d;this.minzoom=c;this.maxzoom=e}a.prototype.left=function(){return this.corners[0].x};a.prototype.right=function(){return this.corners[2].x};a.prototype.top=function(){return this.corners[1].y};a.prototype.bottom=
function(){return this.corners[3].y};return a}();a.Obstacle=g;n=function(){function a(a,d,c){this.obstacles=[];this.mapAngle=a;this.padding=d;this.isScreenAligned=c;this.minzoom=e}a.prototype.addBox=function(a,d,c,e,t,n){var b=d.left*c-this.padding,l=d.top*c-this.padding,m=d.right*c+this.padding;d=d.bottom*c+this.padding;b=[new f.Point(b,l),new f.Point(m,l),new f.Point(m,d),new f.Point(b,d)];0!==this.mapAngle&&(l=Math.cos(this.mapAngle),m=Math.sin(this.mapAngle),a=a.clone(),a.rotate(l,m));this.isScreenAligned||
(e+=this.mapAngle);if(0!==e){l=Math.cos(e);m=Math.sin(e);b[0].rotate(l,m);b[1].rotate(l,m);b[2].rotate(l,m);b[3].rotate(l,m);e=0;for(l=1;4>l;l++)b[l].x<b[e].x?e=l:b[l].x===b[e].x&&b[l].y<b[e].y&&(e=l);if(e){m=[];for(l=0;4>l;l++)m.push(b[(l+e)%4]);b=m}}this.obstacles.push(new g(a,b,t,n))};return a}();a.Footprint=n;var e=.5;n=function(){function a(){this._grid=[]}a.prototype.setAngle=function(a){this._angle=a;this._c=Math.cos(a);this._s=Math.sin(a)};a.prototype.reset=function(){this._angle=this._s=
0;this._c=1;this._grid=[]};a.prototype.add=function(b){var d=this._grid,c=0;for(b=b.obstacles;c<b.length;c++)for(var e=b[c],g=e.anchor,f=a._gridClamp(Math.min(e.left()+g.x,g.x)),n=a._gridClamp(Math.max(e.right()+g.x,g.x)),p=a._gridClamp(Math.min(e.top()+g.y,g.y)),g=a._gridClamp(Math.max(e.bottom()+g.y,g.y));p<=g;p++)for(var y=f;y<=n;y++){var q=d[16*p+y];q||(q=d[16*p+y]=[]);q.push(e)}};a.prototype.getMinZoom=function(b,d,c,e){if(0===b.obstacles.length)return p.C_INFINITY;c=this._grid;e=0;for(b=b.obstacles;e<
b.length;e++)for(var g=b[e],f=g.anchor,l=a._gridClamp(Math.min(g.left()+f.x,f.x)),m=a._gridClamp(Math.max(g.right()+f.x,f.x)),n=a._gridClamp(Math.min(g.top()+f.y,f.y)),f=a._gridClamp(Math.max(g.bottom()+f.y,f.y));n<=f;n++)for(var q=l;q<=m;q++){var A=c[16*n+q];if(A)for(var w=0;w<A.length;w++){var v=A[w];if(!(g.minzoom>=v.maxzoom||v.minzoom>=g.maxzoom)&&(d=a._calcPlacementZoom(g,v,d),2<=d))return p.C_INFINITY}}return 2>d?d:p.C_INFINITY};a._gridClamp=function(a){return p.clamp(a>>9,-7,8)};a._calcPlacementZoom=
function(b,d,c){var e=d.anchor.x-b.anchor.x;if(0===e&&(b.right()<d.left()||d.right()<b.left()))return c;var g=d.anchor.y-b.anchor.y;if(0===g&&(b.bottom()<d.top()||d.bottom()<b.top()))return c;var f=p.C_INFINITY;if(0!==e){var l=(0<e?b.right()-d.left():b.left()-d.right())/e;l<f&&(f=l);e=0<e?a._calcExtZoomX(b,d,l):a._calcExtZoomX(d,b,l);e<f&&(f=e)}0!==g&&(e=(0<g?b.bottom()-d.top():b.top()-d.bottom())/g,e<f&&(f=e),g=0<g?a._calcExtZoomY(b,d,e):a._calcExtZoomY(d,b,e),g<f&&(f=g));if(f<b.minzoom||f<d.minzoom)return c;
f=Math.min(f,b.maxzoom,d.maxzoom);f<c&&(f=c);return f};a._calcExtZoomX=function(a,d,c){var b,e,g;if(a.anchor.y+a.corners[2].y/c<d.anchor.y+d.corners[0].y/c){b=a.corners[2].x-a.corners[3].x;g=a.corners[2].y-a.corners[3].y;var f=d.corners[1].x-d.corners[0].x;e=d.corners[1].y-d.corners[0].y;0<=b*e-g*f?a.anchor.y+a.corners[3].y/c<d.anchor.y+d.corners[0].y/c?(c=a.corners[3],b=d.corners[0],e=d.corners[1],g=1):(c=d.corners[0],b=a.corners[3],e=a.corners[2],g=-1):a.anchor.y+a.corners[2].y/c>d.anchor.y+d.corners[1].y/
c?(c=a.corners[2],b=d.corners[0],e=d.corners[1],g=1):(c=d.corners[1],b=a.corners[3],e=a.corners[2],g=-1)}else b=a.corners[2].x-a.corners[1].x,g=a.corners[2].y-a.corners[1].y,f=d.corners[3].x-d.corners[0].x,e=d.corners[3].y-d.corners[0].y,0>b*e-g*f?a.anchor.y+a.corners[1].y/c>d.anchor.y+d.corners[0].y/c?(c=a.corners[1],b=d.corners[0],e=d.corners[3],g=1):(c=d.corners[0],b=a.corners[1],e=a.corners[2],g=-1):a.anchor.y+a.corners[2].y/c<d.anchor.y+d.corners[3].y/c?(c=a.corners[2],b=d.corners[0],e=d.corners[3],
g=1):(c=d.corners[3],b=a.corners[1],e=a.corners[2],g=-1);f=e.x-b.x;e=e.y-b.y;return g*((c.y-b.y)*f-(c.x-b.x)*e)/((a.anchor.x-d.anchor.x)*e-(a.anchor.y-d.anchor.y)*f)};a._calcExtZoomY=function(a,d,c){var b,e,g;if(a.anchor.x+a.corners[3].x/c<d.anchor.x+d.corners[1].x/c){b=a.corners[3].x-a.corners[2].x;g=a.corners[3].y-a.corners[2].y;var f=d.corners[0].x-d.corners[1].x;e=d.corners[0].y-d.corners[1].y;0>b*e-g*f?a.anchor.x+a.corners[2].x/c<d.anchor.x+d.corners[1].x/c?(c=a.corners[2],b=d.corners[1],e=d.corners[0],
g=1):(c=d.corners[1],b=a.corners[2],e=a.corners[3],g=-1):a.anchor.x+a.corners[3].x/c>d.anchor.x+d.corners[0].x/c?(c=a.corners[3],b=d.corners[1],e=d.corners[0],g=1):(c=d.corners[0],b=a.corners[2],e=a.corners[3],g=-1)}else b=a.corners[3].x-a.corners[0].x,g=a.corners[3].y-a.corners[0].y,f=d.corners[2].x-d.corners[1].x,e=d.corners[2].y-d.corners[1].y,0<b*e-g*f?a.anchor.x+a.corners[0].x/c>d.anchor.x+d.corners[1].x/c?(c=a.corners[0],b=d.corners[1],e=d.corners[2],g=1):(c=d.corners[1],b=a.corners[0],e=a.corners[3],
g=-1):a.anchor.x+a.corners[3].x/c<d.anchor.x+d.corners[2].x/c?(c=a.corners[3],b=d.corners[1],e=d.corners[2],g=1):(c=d.corners[2],b=a.corners[0],e=a.corners[3],g=-1);f=e.x-b.x;e=e.y-b.y;return g*((c.y-b.y)*f-(c.x-b.x)*e)/((a.anchor.x-d.anchor.x)*e-(a.anchor.y-d.anchor.y)*f)};return a}();a.ConflictEngine=n})},"esri/layers/vectorTiles/views/vectorTiles/TextShaping":function(){define(["require","exports","./Placement"],function(n,a,f){return function(){function a(a,e,c,b,d,f,m,n){this._glyphItems=a;this._maxWidth=
e;this._lineHeight=c;this._letterSpacing=b;this._offset=d;this._hAnchor=f;this._vAnchor=m;this._justify=n}a.prototype.getShaping=function(a,e){for(var c=this._glyphItems,b=this._letterSpacing,d=this._offset[0],g=this._offset[1],m=[],n=a.length,p=0;p<n;p++){var C=a.charCodeAt(p),D=c[C];D&&(m.push(new f.ShapedGlyph(C,d,g)),d+=D.metrics.advance+b)}if(0<m.length){D=this._maxWidth;c=this._lineHeight;d=this._justify;g=m.length;C=n=b=0;if(0!==D)for(var y=0,q=0,p=0;p<g;p++){var A=m[p];A.x-=q;A.y=e?A.y-c*
b:A.y+c*b;if(A.x>D&&0<y){for(var w=m[y+1].x,C=Math.max(w,C),v=y+1;v<=p;v++)m[v].y=e?m[v].y-c:m[v].y+c,m[v].x-=w;d&&this._applyJustification(m,n,y-1);n=y+1;y=0;q+=w;b++}32===A.glyph&&(y=p)}p=m[g-1];C=Math.max(C,p.x+this._glyphItems[p.glyph].metrics.advance);d&&this._applyJustification(m,n,g-1);p=(d-this._hAnchor)*C;d=(-this._vAnchor*(b+1)+.5)*c;e&&b&&(d+=b*c);for(c=0;c<m.length;c++)b=m[c],b.x+=p,b.y+=d}return m};a.prototype._applyJustification=function(a,e,c){for(var b=a[c],b=(b.x+this._glyphItems[b.glyph].metrics.advance)*
this._justify;e<=c;e++)a[e].x-=b};return a}()})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Stateful"],function(n,a,f){function p(a,d,c,f,h){var k=a;void 0===d&&(d=h.defInFormat);void 0===c&&(c=h.defOutFormat);void 0===f&&(f=h.defSwap);if(d!==c){var l,m=d.substring(0,1);l=d.substring(1,4);var n=c.substring(0,1),t=c.substring(1,4);"C"===l.charAt(0)&&(l=g(k),l="ltr"===l||"rtl"===l?l.toUpperCase():"L"===d.charAt(2)?"LTR":"RTL",d=m+l);"C"===t.charAt(0)&&
(l=g(k),"rtl"===l?t="RTL":"ltr"===l?(k=k.split(""),k.reverse(),l=g(k.join("")),t=l.toUpperCase()):t="L"===c.charAt(2)?"LTR":"RTL",c=n+t)}if(d===c)return a;n=d.substring(0,1);k=d.substring(1,4);m=c.substring(0,1);t=c.substring(1,4);h.inFormat=d;h.outFormat=c;h.swap=f;if("L"===n&&"VLTR"===c){if("LTR"===k)return h.dir=I,e(a,h);if("RTL"===k)return h.dir=O,e(a,h)}if("V"===n&&"V"===m)return h.dir="RTL"===k?O:I,b(a,h);if("L"===n&&"VRTL"===c)return h.dir="LTR"===k?I:O,a=e(a,h),b(a);if("VLTR"===d&&"LLTR"===
c)return h.dir=I,e(a,h);if("V"===n&&"L"===m&&k!==t)return a=b(a),"RTL"===k?p(a,"LLTR","VLTR",f,h):p(a,"LRTL","VRTL",f,h);if("VRTL"===d&&"LRTL"===c)return p(a,"LRTL","VRTL",f,h);if("L"===n&&"L"===m)return d=h.swap,h.swap=d.substr(0,1)+"N","RTL"===k?(h.dir=O,a=e(a,h),h.swap="N"+d.substr(1,2),h.dir=I,a=e(a,h)):(h.dir=I,a=e(a,h),h.swap="N"+d.substr(1,2),a=p(a,"VLTR","LRTL",h.swap,h)),a}function g(a){return(a=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(a))?"z">=a[0]?
"ltr":"rtl":""}function e(a,b){var d=a.split(""),e=[];c(d,e,b);if(0!==b.hiLevel&&b.swap.substr(0,1)!==b.swap.substr(1,2))for(var g=0;g<d.length;g++)if(1===e[g]){var f=g,h;b:{h=d[g];for(var k=void 0,l=0,n=B.length-1;l<=n;)if(k=Math.floor((l+n)/2),h<B[k][0])n=k-1;else if(h>B[k][0])l=k+1;else{h=B[k][1];break b}}d[f]=h}m(2,d,e,b);m(1,d,e,b);v=e;return d.join("")}function c(a,b,d){var c=a.length,e=d.dir?da:fa,g=null,f=null,h=null,g=0,f=f=null,k=-1,l=f=null,m=[],n=[];d.hiLevel=d.dir;d.lastArabic=!1;d.hasUbatAl=
!1;d.hasUbatB=!1;d.hasUbatS=!1;for(f=0;f<c;f++){var l=f,h=a[f].charCodeAt(0),p=qa[h>>8];m[l]=p<ba?p:ra[p-ba][h&255]}for(l=0;l<c;l++){n[l]=f=t(a,m,n,l,d);g=e[g][f];f=g&240;g&=15;b[l]=h=e[g][x];if(0<f){if(16===f)for(f=k;f<l;f++)b[f]=1;k=-1}if(f=e[g][z])-1===k&&(k=l);else if(-1<k){for(f=k;f<l;f++)b[f]=h;k=-1}m[l]===ia&&(b[l]=0);d.hiLevel|=h}if(d.hasUbatS)for(a=0;a<c;a++)if(m[a]===Y)for(b[a]=d.dir,e=a-1;0<=e;e--)if(m[e]===la)b[e]=d.dir;else break}function b(a,b){var d=a.split("");if(b){var e=[];c(d,e,
b);v=e}d.reverse();A.reverse();return d.join("")}function d(a){for(var b=0;b<T.length;b++)if(a>=T[b]&&a<=ca[b])return!0;return!1}function l(a,b,c,e){for(;b*c<e&&C(a[b]);)b+=c;return b*c<e&&d(a[b])?!0:!1}function m(a,b,d,c){if(!(c.hiLevel<a))if(1!==a||c.dir!==O||c.hasUbatB){c=b.length;for(var e=0,g,f,h;e<c;){if(d[e]>=a){for(g=e+1;g<c&&d[g]>=a;)g++;for(f=g-1;e<f;e++,f--)h=b[e],b[e]=b[f],b[f]=h,h=A[e],A[e]=A[f],A[f]=h;e=g}e++}}else b.reverse(),A.reverse()}function t(a,b,d,c,e){return{UBAT_L:function(){e.lastArabic=
!1;return ga},UBAT_R:function(){e.lastArabic=!1;return ea},UBAT_ON:function(){return W},UBAT_AN:function(){return ha},UBAT_EN:function(){return e.lastArabic?ha:X},UBAT_AL:function(){e.lastArabic=!0;e.hasUbatAl=!0;return ea},UBAT_WS:function(){return W},UBAT_CS:function(){var a,g;if(1>c||c+1>=b.length||(a=d[c-1])!==X&&a!==ha||(g=b[c+1])!==X&&g!==ha)return W;e.lastArabic&&(g=ha);return g===a?g:W},UBAT_ES:function(){return(0<c?d[c-1]:ia)===X&&c+1<b.length&&b[c+1]===X?X:W},UBAT_ET:function(){if(0<c&&
d[c-1]===X)return X;if(e.lastArabic)return W;for(var a=c+1,g=b.length;a<g&&b[a]===ma;)a++;return a<g&&b[a]===X?X:W},UBAT_NSM:function(){if("VLTR"===e.inFormat){for(var g=b.length,f=c+1;f<g&&b[f]===na;)f++;if(f<g&&(g=a[c],f=b[f],(1425<=g&&2303>=g||64286===g)&&(f===ea||f===ka)))return ea}return 1>c||b[c-1]===ia?W:d[c-1]},UBAT_B:function(){e.lastArabic=!0;e.hasUbatB=!0;return e.dir},UBAT_S:function(){e.hasUbatS=!0;return W},UBAT_LRE:function(){e.lastArabic=!1;return W},UBAT_RLE:function(){e.lastArabic=
!1;return W},UBAT_LRO:function(){e.lastArabic=!1;return W},UBAT_RLO:function(){e.lastArabic=!1;return W},UBAT_PDF:function(){e.lastArabic=!1;return W},UBAT_BN:function(){return W}}[oa[b[c]]]()}function E(a,b){for(var d=0;d<J.length;d++)if(a===J[d])return b[d];return a}function C(a){return"\u064b"<=a&&"\u0655">=a?!0:!1}function D(a){if("L"===a)return"LTR";if("R"===a)return"RTL";if("C"===a)return"CLR";if("D"===a)return"CRL"}function y(a,b){for(var d=0;d<F.length;d++)if(a===F[d])return b[d];return a}
function q(a,b,d,c){for(var e=0;e<a.length;e++)if(a[e]>b||!d&&a[e]===b)a[e]+=c}n.getObject("string",!0,dojox);n=a("dojox.string.BidiEngine",f,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(a,b,c){this.sourceToTarget=[];this.targetToSource=[];if(!a)return"";var e=this.sourceToTarget,g=this.targetToSource,f=a.length;A=[];v=[];for(var h=0;h<f;h++)e[h]=h,g[h]=h,A[h]=h;if(!this.checkParameters(b,c))return a;b=this.inputFormat;c=this.outputFormat;
var e=a,e=K,h=D(b.charAt(1)),g=D(c.charAt(1)),k="I"===b.charAt(0)?"L":b.charAt(0),f="I"===c.charAt(0)?"L":c.charAt(0),h=k+h,g=f+g,f=b.charAt(2)+c.charAt(2);e.defInFormat=h;e.defOutFormat=g;e.defSwap=f;a=p(a,h,g,f,e);e=!1;if("R"===c.charAt(1))e=!0;else if("C"===c.charAt(1)||"D"===c.charAt(1))e=this.checkContextual(a);g=this.sourceToTarget=A;f=Array(g.length);for(h=0;h<g.length;h++)f[g[h]]=h;w=this.targetToSource=f;if(b.charAt(3)===c.charAt(3))e=a;else if("S"===c.charAt(3))if(b=e,c=!0,0===a.length)e=
void 0;else{void 0===b&&(b=!0);void 0===c&&(c=!0);a=String(a);a=a.split("");var m=0,g=1,e=a.length;b||(m=a.length-1,g=-1,e=1);for(var f=e,h=c,n=0,e=[],k=0;m*g<f;m+=g)if(d(a[m])||C(a[m])){var t;if(t="\u0644"===a[m])b:{for(var r=a,x=m+g,z=g,B=f;x*z<B&&C(r[x]);)x+=z;t=" ";if(x*z<B)for(t=r[x],r=0;r<F.length;r++)if(F[r]===t){t=!0;break b}t=!1}if(t){a[m]=0===n?y(a[m+g],u):y(a[m+g],V);m+=g;n=a;t=m;r=g;for(x=f;t*r<x&&C(n[t]);)t+=r;t*r<x&&(n[t]=" ");h&&(e[k]=m,k++);n=0}else{t=a[m];if(1===n){r=m;if(l(a,m+g,
g,f))b:for(x=a[m],z=0;z<J.length;z++){if(x===J[z]){x=R[z];break b}}else x=E(a[m],N);a[r]=x}else!0===l(a,m+g,g,f)?a[m]=E(a[m],P):a[m]=E(a[m],aa);C(t)||(n=1);b:{for(r=0;r<Q.length;r++)if(Q[r]===t){t=!0;break b}t=!1}!0===t&&(n=0)}}else n=0;g="";for(f=0;f<a.length;f++){if(h=c){b:{for(h=0;h<e.length;h++)if(e[h]===f)break b;h=-1}h=-1<h}h?(q(w,f,!b,-1),A.splice(f,1)):g+=a[f]}e=g}else if(b=a,c=e,a=!0,0===b.length)e=void 0;else for(void 0===a&&(a=!0),void 0===c&&(c=!0),b=String(b),e="",g=[],g=b.split(""),
f=0;f<b.length;f++)h=!1,"\ufe70"<=g[f]&&"\ufeff">g[f]?(k=b.charCodeAt(f),"\ufef5"<=g[f]&&"\ufefc">=g[f]?(c?(0<f&&a&&" "===g[f-1]?e=e.substring(0,e.length-1)+"\u0644":(e+="\u0644",h=!0),e+=F[(k-65269)/2]):(e+=F[(k-65269)/2],e+="\u0644",f+1<b.length&&a&&" "===g[f+1]?f++:h=!0),h&&(q(w,f,!0,1),A.splice(f,0,A[f]))):e+=S[k-65136]):e+=g[f];this.sourceToTarget=A;this.targetToSource=w;this.levels=v;return e},_inputFormatSetter:function(a){if(!G.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");
this.inputFormat=a},_outputFormatSetter:function(a){if(!G.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=a},checkParameters:function(a,b){a?this.set("inputFormat",a):a=this.inputFormat;b?this.set("outputFormat",b):b=this.outputFormat;return a===b?!1:!0},checkContextual:function(a){a=g(a);if("ltr"!==a&&"rtl"!==a){try{a=document.dir.toLowerCase()}catch(sa){}"ltr"!==a&&"rtl"!==a&&(a="ltr")}return a},hasBidiChar:function(a){return H.test(a)}});var A=
[],w=[],v=[],K={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},x=5,z=6,I=0,O=1,G=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,H=/[\u0591-\u06ff\ufb1d-\ufefc]/,B=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]","["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],
["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],F=["\u0622","\u0623","\u0625","\u0627"],u=["\ufef5","\ufef7","\ufef9","\ufefb"],V=["\ufef6","\ufef8","\ufefa","\ufefc"],J="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),
aa="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),N="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),
R="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),P="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),
Q="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),S="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
T=["\u0621","\u0641"],ca=["\u063a","\u064a"],fa=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],da=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],ga=0,ea=1,X=2,ha=3,W=4,ia=5,Y=6,ka=7,la=8,ma=11,na=12,oa="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),ba=100;a=ga;f=ea;var L=X,U=ha,h=W,ja=ia,pa=Y,k=ka,Z=la,M=ma,
r=na,qa=[ba+0,a,a,a,a,ba+1,ba+2,ba+3,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,ba+4,h,h,h,a,h,a,h,a,h,h,h,a,a,h,h,a,a,a,a,a,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,a,a,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,a,a,h,h,a,a,h,h,a,a,h,h,h,h,h,h,h,h,h,h,h,h,h,h,
h,h,h,h,h,h,h,h,h,a,a,a,ba+5,k,k,ba+6,ba+7],ra=[[18,18,18,18,18,18,18,18,18,pa,ja,pa,Z,ja,18,18,18,18,18,18,18,18,18,18,18,18,18,18,ja,ja,ja,pa,Z,h,h,M,M,M,h,h,h,h,h,10,9,10,9,9,L,L,L,L,L,L,L,L,L,L,9,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,18,18,18,18,18,18,ja,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,h,M,M,M,M,h,h,h,h,a,h,h,18,h,h,M,M,L,L,h,a,h,h,h,L,a,h,h,h,h,h,a,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,a,a,a,a,a,a,a,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,a,h,h,h,h,h,h,h,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,
r,r,r,f,r,f,r,r,f,r,r,f,r,h,h,h,h,h,h,h,h,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,h,h,h,h,h,f,f,f,f,f,h,h,h,h,h,h,h,h,h,h,h],[U,U,U,U,h,h,h,h,k,M,M,k,9,k,h,h,r,r,r,r,r,r,r,r,r,r,r,k,h,h,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,U,U,U,U,U,U,U,U,U,U,M,U,U,k,k,k,r,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,
k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,r,r,r,r,r,r,r,U,h,r,r,r,r,r,r,k,k,r,r,h,r,r,r,r,k,k,L,L,L,L,L,L,L,L,L,L,k,k,k,k,k,k],[k,k,k,k,k,k,k,k,k,k,k,k,k,k,h,k,k,r,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,h,h,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,r,r,r,r,r,r,r,r,r,
r,r,k,h,h,h,h,h,h,h,h,h,h,h,h,h,h,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,r,r,r,r,r,r,r,r,r,f,f,h,h,h,h,f,h,h,h,h,h],[Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,18,18,18,a,f,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,Z,ja,13,14,15,16,17,9,M,M,M,M,M,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,9,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,Z,18,18,18,18,18,h,h,h,h,h,18,18,18,18,18,18,L,a,h,h,L,L,L,L,L,L,10,10,h,h,h,a,L,L,L,L,L,L,L,L,L,L,10,10,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,
h,h,h,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h],[a,a,a,a,a,a,a,h,h,h,h,h,h,h,h,h,h,h,h,a,a,a,a,a,h,h,h,h,h,f,r,f,f,f,f,f,f,f,f,f,f,10,f,f,f,f,f,f,f,f,f,f,f,f,f,h,f,f,f,f,f,h,f,h,f,f,h,f,f,h,f,f,f,f,f,f,f,f,f,f,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,
k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k],[r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,r,r,r,r,r,r,r,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,9,h,9,h,h,9,h,h,h,h,h,h,h,h,h,M,h,h,10,10,h,h,h,h,h,M,M,h,h,h,h,h,k,k,k,k,k,h,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,
k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,h,h,18],[h,h,h,M,M,M,h,h,h,h,h,10,9,10,9,9,L,L,L,L,L,L,L,L,L,L,9,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,h,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,a,a,a,a,a,a,h,h,a,a,a,a,a,a,h,h,a,a,a,a,a,a,h,h,a,a,a,h,h,h,M,M,h,h,h,M,M,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h]];return n})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(n,a,f,p){return n("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(a){var e=this._attrPairNames;return e[a]?e[a]:e[a]={s:"_"+a+"Setter",
g:"_"+a+"Getter"}},postscript:function(a){a&&this.set(a)},_get:function(a,e){return"function"===typeof this[e.g]?this[e.g]():this[a]},get:function(a){return this._get(a,this._getAttrNames(a))},set:function(a,e){if("object"===typeof a){for(var c in a)a.hasOwnProperty(c)&&"_watchCallbacks"!=c&&this.set(c,a[c]);return this}c=this._getAttrNames(a);var b=this._get(a,c);c=this[c.s];var d;"function"===typeof c?d=c.apply(this,Array.prototype.slice.call(arguments,1)):this[a]=e;if(this._watchCallbacks){var g=
this;p(d,function(){g._watchCallbacks(a,b,e)})}return this},_changeAttrValue:function(a,e){var c=this.get(a);this[a]=e;this._watchCallbacks&&this._watchCallbacks(a,c,e);return this},watch:function(a,e){var c=this._watchCallbacks;if(!c)var b=this,c=this._watchCallbacks=function(a,d,e,f){var g=function(c){if(c){c=c.slice();for(var f=0,g=c.length;f<g;f++)c[f].call(b,a,d,e)}};g(c["_"+a]);f||g(c["*"])};e||"function"!==typeof a?a="_"+a:(e=a,a="*");var d=c[a];"object"!==typeof d&&(d=c[a]=[]);d.push(e);var g=
{};g.unwatch=g.remove=function(){var a=f.indexOf(d,e);-1<a&&d.splice(a,1)};return g}})})},"esri/layers/vectorTiles/views/vectorTiles/TileClipper":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(n,a,f,p){Object.defineProperty(a,"__esModule",{value:!0});var g=function(){return function(a,b,d){this.ratio=a;this.x=b;this.y=d}}();n=function(){function a(a,d,c){this.dz=a;this.yPos=d;this.xPos=c}a.prototype.setExtent=function(a){this.finalRatio=4096/a*(1<<this.dz);var b;b=
64/this.finalRatio;a>>=this.dz;b>a&&(b=a);this.margin=b;this.xmin=a*this.xPos-b;this.ymin=a*this.yPos-b;this.xmax=this.xmin+a+2*b;this.ymax=this.ymin+a+2*b};a.prototype.reset=function(a){this.type=a;this._prevIsIn=!1;this.lines=[];this.line=null};a.prototype.moveTo=function(a,d){this._pushLine();this._prevIsIn=this._isIn(a,d);this._moveTo(a,d,this._prevIsIn);this._prevPt=new f.Point(a,d);this._firstPt=new f.Point(a,d)};a.prototype.lineTo=function(a,d){var b=this._isIn(a,d),c,e,n,p,D,y;if(b)this._prevIsIn?
this._lineTo(a,d,!0):(c=this._prevPt,e=new f.Point(a,d),n=this._intersect(e,c),this._lineTo(n.x,n.y,!0),this._lineTo(e.x,e.y,!0));else{if(this._prevIsIn)e=this._prevPt,c=new f.Point(a,d),n=this._intersect(e,c),this._lineTo(n.x,n.y,!0);else{var q=this._prevPt;c=new f.Point(a,d);if(!(q.x<=this.xmin&&c.x<=this.xmin||q.x>=this.xmax&&c.x>=this.xmax||q.y<=this.ymin&&c.y<=this.ymin||q.y>=this.ymax&&c.y>=this.ymax)){e=[];if(q.x<this.xmin&&c.x>this.xmin||q.x>this.xmin&&c.x<this.xmin)n=(this.xmin-q.x)/(c.x-
q.x),y=q.y+n*(c.y-q.y),y<=this.ymin?D=!1:y>=this.ymax?D=!0:e.push(new g(n,this.xmin,y));if(q.x<this.xmax&&c.x>this.xmax||q.x>this.xmax&&c.x<this.xmax)n=(this.xmax-q.x)/(c.x-q.x),y=q.y+n*(c.y-q.y),y<=this.ymin?D=!1:y>=this.ymax?D=!0:e.push(new g(n,this.xmax,y));if(q.y<this.ymin&&c.y>this.ymin||q.y>this.ymin&&c.y<this.ymin)n=(this.ymin-q.y)/(c.y-q.y),y=q.x+n*(c.x-q.x),y<=this.xmin?p=!1:y>=this.xmax?p=!0:e.push(new g(n,y,this.ymin));if(q.y<this.ymax&&c.y>this.ymax||q.y>this.ymax&&c.y<this.ymax)n=(this.ymax-
q.y)/(c.y-q.y),y=q.x+n*(c.x-q.x),y<=this.xmin?p=!1:y>=this.xmax?p=!0:e.push(new g(n,y,this.ymax));if(0===e.length)p?D?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):D?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(1<e.length&&e[0].ratio>e[1].ratio)this._lineTo(e[1].x,e[1].y,!0),this._lineTo(e[0].x,e[0].y,!0);else for(n=0;n<e.length;n++)this._lineTo(e[n].x,e[n].y,!0)}}this._lineTo(c.x,c.y,!1)}this._prevIsIn=b;this._prevPt=new f.Point(a,
d)};a.prototype.close=function(){var a,d;0<this.line.length&&(a=this._firstPt,d=this._prevPt,a.x===d.x&&a.y===d.y||this.lineTo(a.x,a.y),a=this.line,d=a.length,4<=d&&(a[0].x===a[1].x&&a[0].x===a[d-2].x||a[0].y===a[1].y&&a[0].y===a[d-2].y)&&(a.pop(),a[0].x=a[d-2].x,a[0].y=a[d-2].y))};a.prototype.result=function(){this._pushLine();if(0===this.lines.length)return null;3===this.type&&e.simplify(this.margin*this.finalRatio,this.lines);return this.lines};a.prototype._isIn=function(a,d){return a>=this.xmin&&
a<=this.xmax&&d>=this.ymin&&d<=this.ymax};a.prototype._intersect=function(a,d){var b,c;if(d.x>=this.xmin&&d.x<=this.xmax)c=d.y<=this.ymin?this.ymin:this.ymax,b=a.x+(c-a.y)/(d.y-a.y)*(d.x-a.x);else if(d.y>=this.ymin&&d.y<=this.ymax)b=d.x<=this.xmin?this.xmin:this.xmax,c=a.y+(b-a.x)/(d.x-a.x)*(d.y-a.y);else{c=d.y<=this.ymin?this.ymin:this.ymax;b=d.x<=this.xmin?this.xmin:this.xmax;var e=(b-a.x)/(d.x-a.x),g=(c-a.y)/(d.y-a.y);e<g?c=a.y+e*(d.y-a.y):b=a.x+g*(d.x-a.x)}return new f.Point(b,c)};a.prototype._pushLine=
function(){this.line&&(1===this.type?0<this.line.length&&this.lines.push(this.line):2===this.type?1<this.line.length&&this.lines.push(this.line):3===this.type&&3<this.line.length&&this.lines.push(this.line));this.line=[]};a.prototype._moveTo=function(a,d,c){3!==this.type?c&&(a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),d=Math.round((d-(this.ymin+this.margin))*this.finalRatio),this.line.push(new f.Point(a,d))):(c||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),d<this.ymin&&(d=
this.ymin),d>this.ymax&&(d=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),d=Math.round((d-(this.ymin+this.margin))*this.finalRatio),this.line.push(new f.Point(a,d)),this._is_v=this._is_h=!1)};a.prototype._lineTo=function(a,d,c){if(3!==this.type)if(c){a=Math.round((a-(this.xmin+this.margin))*this.finalRatio);d=Math.round((d-(this.ymin+this.margin))*this.finalRatio);if(0<this.line.length&&(c=this.line[this.line.length-1],c.equals(a,d)))return;this.line.push(new f.Point(a,d))}else this.line&&
0<this.line.length&&this._pushLine();else if(c||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),d<this.ymin&&(d=this.ymin),d>this.ymax&&(d=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),d=Math.round((d-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){c=this.line[this.line.length-1];var b=c.x===a,e=c.y===d;b&&e||(this._is_h&&b?(c.x=a,c.y=d,c=this.line[this.line.length-2],this._is_h=c.x===a,this._is_v=c.y===d):this._is_v&&e?(c.x=a,c.y=d,c=this.line[this.line.length-
2],this._is_h=c.x===a,this._is_v=c.y===d):(this.line.push(new f.Point(a,d)),this._is_h=b,this._is_v=e))}else this.line.push(new f.Point(a,d))};return a}();a.TileClipper=n;n=function(){function a(){}a.prototype.setExtent=function(a){this._ratio=4096===a?1:4096/a};a.prototype.reset=function(a){this.type=a;this.lines=[];this.line=null};a.prototype.moveTo=function(a,c){this.line&&this.lines.push(this.line);this.line=[];var b=this._ratio;this.line.push(new f.Point(Math.round(a*b),Math.round(c*b)))};a.prototype.lineTo=
function(a,c){var b=this._ratio;this.line.push(new f.Point(Math.round(a*b),Math.round(c*b)))};a.prototype.close=function(){var a=this.line;a&&!a[0].isEqual(a[a.length-1])&&a.push(a[0])};a.prototype.result=function(){this.line&&this.lines.push(this.line);if(0===this.lines.length)return null;3===this.type&&1!==this._ratio&&e.simplify(64,this.lines);return this.lines};return a}();a.SimpleBuilder=n;var e=function(){function a(){}a.simplify=function(b,d){if(d){for(var c=-b,e=4096+b,f=-b,g=4096+b,n=[],
p=[],y=d.length,q=0;q<y;++q){var A=d[q];if(A&&!(2>A.length))for(var w=A[0],v=void 0,K=A.length,x=1;x<K;++x)v=A[x],w.x===v.x&&(w.x<=c&&(w.y>v.y?(n.push(q),n.push(x),n.push(0),n.push(-1)):(p.push(q),p.push(x),p.push(0),p.push(-1))),w.x>=e&&(w.y<v.y?(n.push(q),n.push(x),n.push(1),n.push(-1)):(p.push(q),p.push(x),p.push(1),p.push(-1)))),w.y===v.y&&(w.y<=f&&(w.x<v.x?(n.push(q),n.push(x),n.push(2),n.push(-1)):(p.push(q),p.push(x),p.push(2),p.push(-1))),w.y>=g&&(w.x>v.x?(n.push(q),n.push(x),n.push(3),n.push(-1)):
(p.push(q),p.push(x),p.push(3),p.push(-1)))),w=v}0!==n.length&&0!==p.length&&(a.fillParent(d,p,n),a.fillParent(d,n,p),c=[],a.calcDeltas(c,p,n),a.calcDeltas(c,n,p),a.addDeltas(c,d))}};a.fillParent=function(a,c,e){for(var b=e.length,d=c.length,f=0;f<d;f+=4){for(var g=c[f],l=c[f+1],n=c[f+2],q=a[g][l-1],g=a[g][l],l=8092,A=-1,w=0;w<b;w+=4)if(e[w+2]===n){var v=e[w],K=e[w+1],x=a[v][K-1],v=a[v][K];switch(n){case 0:case 1:p.between(q.y,x.y,v.y)&&p.between(g.y,x.y,v.y)&&(x=Math.abs(v.y-x.y),x<l&&(l=x,A=w));
break;case 2:case 3:p.between(q.x,x.x,v.x)&&p.between(g.x,x.x,v.x)&&(x=Math.abs(v.x-x.x),x<l&&(l=x,A=w))}}c[f+3]=A}};a.calcDeltas=function(b,c,e){for(var d=c.length,f=0;f<d;f+=4){var g=a.calcDelta(f,c,e,[]);b.push(c[f]);b.push(c[f+1]);b.push(c[f+2]);b.push(g)}};a.calcDelta=function(b,c,e,f){b=c[b+3];if(-1===b)return 0;var d=f.length;if(1<d&&f[d-2]===b)return 0;f.push(b);return a.calcDelta(b,e,c,f)+1};a.addDeltas=function(a,c){for(var b=a.length,d=0,e=0;e<b;e+=4){var f=a[e+3];f>d&&(d=f)}for(e=0;e<
b;e+=4){var g=c[a[e]],n=a[e+1],f=d-a[e+3];switch(a[e+2]){case 0:g[n-1].x-=f;g[n].x-=f;break;case 1:g[n-1].x+=f;g[n].x+=f;break;case 2:g[n-1].y-=f;g[n].y-=f;break;case 3:g[n-1].y+=f,g[n].y+=f}}b=c.length;for(d=0;d<b;++d)g=c[d],!g||2>g.length||g[g.length-1].x!==g[0].x&&g[g.length-1].y!==g[0].y&&g.push(g[0])};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","./StyleLayer","dojo/has"],function(n,a,f,p){return function(){function a(e,
c){this.styleJSON=e;this.version=parseFloat(e.version);this.sprite=c?c.spriteUrl:e.sprite;this.glyphs=c?c.glyphsUrl:e.glyphs;if(p("stable-symbol-rendering")){var b=(e.layers||[]).filter(function(a){return a.layout&&a.layout["text-font"]})[0];b&&(e.layers||[]).forEach(function(a){a.layout&&a.layout["text-font"]&&(a.layout["text-font"]=b.layout["text-font"])})}this.layers=(e.layers||[]).map(a._create);this._identifyRefLayers()}a.prototype._identifyRefLayers=function(){for(var a=[],c=[],b=0,d=this.layers;b<
d.length;b++){var f=d[b];if(1===f.type){var g=f.sourceLayer,g=g+("|"+JSON.stringify(f.minzoom)),g=g+("|"+JSON.stringify(f.maxzoom)),g=g+("|"+JSON.stringify(f.filter));a.push({key:g,layer:f})}2===f.type&&(g=f.sourceLayer,g+="|"+JSON.stringify(f.minzoom),g+="|"+JSON.stringify(f.maxzoom),g+="|"+JSON.stringify(f.filter),g+="|"+JSON.stringify(f.layout["line-cap"]),g+="|"+JSON.stringify(f.layout["line-join"]),c.push({key:g,layer:f}))}this._assignRefLayers(a);this._assignRefLayers(c)};a.prototype._assignRefLayers=
function(a){a.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});for(var c,b,d=a.length,e=0;e<d;e++){var f=a[e];if(f.key===c)f.layer.refLayerId=b;else if(c=f.key,b=f.layer.id,1===f.layer.type&&!f.layer.hasPaintProperty("fill-outline-color"))for(var g=e+1;g<d;g++){var n=a[g];if(n.key===c){if(n.layer.hasPaintProperty("fill-outline-color")){a[e]=n;a[g]=f;b=n.layer.id;break}}else break}}};a._create=function(a,c,b){c=1-1/(b.length+1)*(1+c);switch(a.type){case "background":return new f.StyleLayer(0,
a,c);case "fill":return new f.StyleLayer(1,a,c);case "line":return new f.StyleLayer(2,a,c);case "symbol":return new f.StyleLayer(3,a,c);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":throw Error("Unsupported vector tile circle layer");}throw Error("Unknown vector tile layer");};return a}()})}}});define("esri/layers/vectorTiles/core/workers/worker-init",[],1);