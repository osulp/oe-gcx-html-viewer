// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all dojox/html/entities ./lang ./kernel ./request ./promiseList ./ArcadeExpression ./tasks/query ./tasks/QueryTask ./tasks/RelationshipQuery ./tasks/StatisticDefinition ./arcadeProfiles/popupProfile ./layers/support/attributeUtils dojo/i18n!dojo/cldr/nls/number".split(" "),function(t,m,q,A,D,u,k,c,a,b,h,d,e,f,g,r,y,v,l,B,x,
w){t=t(null,{declaredClass:"esri.PopupInfo",_reNewline:/(\n)/ig,_reExprField:/^\s*expression\//i,_reExprFieldPattern:/\{expression\/([^\}]+)\}/ig,_exprPrefix:"expression/",_relatedFieldPrefix:"relationships/",initialize:function(a,b){if(a){m.mixin(this,b);this.info=a;this.title=this.getTitle;this.content=this.getContent;this._exprCache=this._compileExpressions(this.info.expressionInfos);var n=this._fieldLabels={},c=this._fieldsMap={};this.info.fieldInfos&&q.forEach(this.info.fieldInfos,function(a){var p=
a.fieldName.toLowerCase(),b=this._isExpressionField(p)?this.getExpressionInfo(p):null;n[p]=b?b.title:a.label;c[p]=a},this);this.titleHasRelatedFields=!(!this.info.title||-1===this.info.title.indexOf("{"+this._relatedFieldPrefix));this.titleHasAsyncExpressions=this._titleHasAsyncExpressions()}},toJson:function(){return A.fromJson(A.toJson(this.info))},getTitle:function(){},getContent:function(){},getFieldInfo:function(a){var n;q.some(this.info&&this.info.fieldInfos,function(b){b.fieldName===a&&(n=
b);return!!n});return n},getExpressionInfo:function(a){if(this._isExpressionField(a)){a=a.replace(this._reExprField,"");a=a.toLowerCase();var n;q.some(this.info.expressionInfos,function(b){b.name.toLowerCase()===a&&(n=b);return!!n});return n}},getExpressionFieldsInTitle:function(){var a=this.info.title?this.info.title.match(this._reExprFieldPattern):null;return q.map(a,function(a){return a.replace(this._reExprFieldPattern,"$1")},this)},hasGeometryOperations:function(){return q.some(this._getArcadeExpressions(),
function(a){return a.hasGeometryOperations()})},hasAsyncExpressions:function(){return q.some(this._getArcadeExpressions(),function(a){return a.async})},initializeArcadeEngine:function(){return B.initialize(this._getArcadeExpressions())},getComponents:function(a){var n=this.info,b={};n.fieldInfos&&(n=q.filter(n.fieldInfos,function(a){return-1!==a.fieldName.indexOf(this._relatedFieldPrefix)},this))&&0<n.length&&(b.relatedInfo=this._getRelatedRecords({graphic:a,fieldsInfo:n}));this._needFullResolutionFeature(a)&&
(b.fullResolutionFeature=this._getFullResolutionFeature(a));return f(b).then(m.hitch(this,function(n){n=n.fullResolutionFeature;n=this.hasAsyncExpressions()?this._fetchAttributesAsync(a,n):this._fetchAttributes(a,n);return f([n]).then(m.hitch(this,function(p){return this._getPopupValues(a,p[0])}))}))},getAttachments:function(a){var n=a.getSourceLayer();a=a.attributes;if(this.info.showAttachments&&n&&n.hasAttachments&&n.objectIdField&&(a=a&&a[n.objectIdField]))return n.queryAttachmentInfos(a)},_needFullResolutionFeature:function(a){return(a=
a.getSourceLayer())?"function"===typeof a.getMaxAllowableOffset&&0<a.getMaxAllowableOffset()&&this.hasGeometryOperations():!1},_getFullResolutionFeature:function(a){var n=a.getSourceLayer(),b=n.objectIdField;a=(a=a.attributes)&&b&&a[b];if(null==a)return null;var c=new r;c.objectIds=[a];c.maxAllowableOffset=0;c.outFields=[b];return n.queryFeatures(c).then(function(a){return a.features&&a.features[0]})},_isExpressionField:function(a){return this._reExprField.test(a)},_titleHasAsyncExpressions:function(){return q.some(this.getExpressionFieldsInTitle(),
function(a){a=this._exprCache[a];return!(!a||!a.async)},this)},_compileExpressions:function(a){var b={};q.forEach(a,function(a){var n=a.returnType&&a.returnType.toLowerCase();b[a.name]=new g({expression:a.expression,returnType:"number"===n?"number":"string",profile:B})});return b},_getArcadeExpressions:function(){var a=[],b;for(b in this._exprCache)a.push(this._exprCache[b]);return a},_fetchAttributesAsync:function(a,b){var n=this._fetchAttributes(a,b);a={};for(var c in n)(b=n[c])&&b.then&&(a[c]=
b);return f(a).then(function(a){for(var p in a){var b=a[p];n[p]=b instanceof Error?null:b}return n})},_fetchAttributes:function(a,c,l){var n=m.clone(a.attributes)||{},p=c&&c.geometry,e=this._exprPrefix,f=this._exprCache;l=l||q.map(this.info.expressionInfos,function(a){return a.name});q.forEach(l,function(c){var l=e+c;c=(c=f[c])?a.evaluateExpression(c,this._getEvalOptions(c,a,p)):null;"string"===typeof c&&(c=b.encode(c));n[l]=c},this);return n},_getEvalOptions:function(a,b,c){var n=a.hasGeometryOperations(),
p=b.getSourceLayer(),l=p&&(p.getMap()||p.parentLayer&&p.parentLayer.getMap());a=B.getEvalOptions({expression:a,feature:b,layer:p,map:l,spatialReference:l&&l.spatialReference});b=a.context.vars.$feature;n=!(!n||!c);b&&n&&(b._geometry=c);a.skipCache=n;return a},_getPopupValues:function(a,b,c){b=b||this._fetchAttributes(a);var n=this.info,p=a.getSourceLayer(),l=m.clone(b),e="",f="",d,g,z,r,k,E=p&&p._getDateOpts&&p._getDateOpts().properties,E=E&&E.slice(0),x={dateFormat:{properties:E,formatter:"DateFormat"+
this._insertOffset(this._dateFormats.shortDateShortTime)}};if(this._relatedInfo)for(r in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(r)){var B=this._relatedInfo[r],v=this._relatedLayersInfo[r];B&&(q.forEach(B.relatedFeatures,function(a){for(k in a.attributes)if(a.attributes.hasOwnProperty(k)&&"esriRelCardinalityOneToOne"===v.relation.cardinality){var p=this._toRelatedFieldName([v.relation.id,k]);b[p]=l[p]=a.attributes[k]}},this),q.forEach(B.relatedStatsFeatures,function(a){for(k in a.attributes)if(a.attributes.hasOwnProperty(k)){var p=
this._toRelatedFieldName([v.relation.id,k]);b[p]=l[p]=a.attributes[k]}},this))}for(g in l)r=this._fieldsMap[g.toLowerCase()],B=this._getLayerFieldInfo(p,g),r&&B&&(r.fieldName=B.name),l[g]=this._formatValue(l[g],g,x),E&&r&&r.format&&r.format.dateFormat&&(r=q.indexOf(E,g),-1<r&&E.splice(r,1));if(p)for(g in E=p.typeIdField,b)b.hasOwnProperty(g)&&-1===g.indexOf(this._relatedFieldPrefix)&&(z=b[g],h.isDefined(z)&&(r=this._getDomainName(p,a,g,z),h.isDefined(r)?l[g]=r:g===E&&(r=this._getTypeName(p,a,z),h.isDefined(r)&&
(l[g]=r))));n.title&&(e=this._processFieldsInLinks(this._fixTokens(n.title,p),b),e=m.trim(this._removeEmptyHref(h.substitute(l,e,x)||"")));if(c)return{title:e};n.description&&(f=this._processFieldsInLinks(this._fixTokens(n.description,p),b),f=m.trim(this._removeEmptyHref(h.substitute(l,f,x)||"")));n.fieldInfos&&(d=[],q.forEach(n.fieldInfos,function(a){(g=a.fieldName)&&a.visible&&d.push([this._fieldLabels[g.toLowerCase()]||g,h.substitute(l,"${"+g+"}",x)||""])},this));var w,y;n.mediaInfos&&(w=[],q.forEach(n.mediaInfos,
function(a){y=0;z=a.value;switch(a.type){case "image":var c=z.sourceURL,c=c&&m.trim(this._removeEmptyHref(h.substitute(b,this._fixTokens(c,p))));y=!!c;break;case "piechart":case "linechart":case "columnchart":case "barchart":var n,c=z.normalizeField;z.fields=q.map(z.fields,function(a){return(n=this._getLayerFieldInfo(p,a))?n.name:a},this);c&&(n=this._getLayerFieldInfo(p,c),z.normalizeField=n?n.name:c);y=q.some(z.fields,function(a){return h.isDefined(b[a])||-1!==a.indexOf(this._relatedFieldPrefix)&&
this._relatedInfo},this);break;default:return}if(y){a=m.clone(a);z=a.value;var c=a.title?this._processFieldsInLinks(this._fixTokens(a.title,p),b):"",e=a.caption?this._processFieldsInLinks(this._fixTokens(a.caption,p),b):"";a.title=c?m.trim(this._removeEmptyHref(h.substitute(l,c,x)||"")):"";a.caption=e?m.trim(this._removeEmptyHref(h.substitute(l,e,x)||"")):"";if("image"===a.type)z.sourceURL=h.substitute(b,this._fixTokens(z.sourceURL,p)),z.linkURL&&(z.linkURL=m.trim(h.substitute(b,this._fixTokens(z.linkURL,
p))||""));else{var f,g;q.forEach(z.fields,function(a,p){if(-1!==a.indexOf(this._relatedFieldPrefix))g=this._getRelatedChartInfos(a,z,b,x),g instanceof Array?z.fields=g:z.fields[p]=g;else{var c=b[a],c=void 0===c?null:c;f=b[z.normalizeField]||0;c&&f&&(c/=f);z.fields[p]={y:c,tooltip:(this._fieldLabels[a.toLowerCase()]||a)+":\x3cbr/\x3e"+this._formatValue(c,a,x,!!f)}}},this)}w.push(a)}},this));return{title:e,description:f,hasDescription:!!n.description,fields:d&&d.length?d:null,mediaInfos:w&&w.length?
w:null,formatted:l,editSummary:!1!==n.showLastEditInfo&&p&&p.getEditSummary?p.getEditSummary(a):""}},_getRelatedChartInfos:function(a,b,c,l){var p,n,e,f,g,d;p=[];d=this._fromRelatedFieldName(a);g=d[0];n=this._relatedInfo[g];g=this._relatedLayersInfo[g];n&&q.forEach(n.relatedFeatures,function(n){n=n.attributes;var g,r;for(r in n)if(n.hasOwnProperty(r)&&r===d[1]){g={};f=n[r];b.normalizeField&&(e=-1!==b.normalizeField.indexOf(this._relatedFieldPrefix)?n[this._fromRelatedFieldName(b.normalizeField)[1]]:
c[b.normalizeField]);f&&e&&(f/=e);if(b.tooltipField)if(-1!==b.tooltipField.indexOf(this._relatedFieldPrefix)){var C=this._fromRelatedFieldName(b.tooltipField)[1],z=h.isDefined(n[C])?this._formatValue(n[C],b.tooltipField,l,!!e):C;g.tooltip=z+":\x3cbr/\x3e"+this._formatValue(f,C,l,!!e)}else g.tooltip=(this._fieldLabels[a.toLowerCase()]||a)+":\x3cbr/\x3e"+this._formatValue(f,b.tooltipField,l,!!e);else g.tooltip=f;g.y=f;p.push(g)}},this);return"esriRelCardinalityOneToMany"===g.relation.cardinality||"esriRelCardinalityManyToMany"===
g.relation.cardinality?p:p[0]},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",
shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",
longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"},_reHref:/href\s*=\s*\"([^\"]+)\"/ig,_reHrefApos:/href\s*=\s*\'([^\']+)\'/ig,_fixTokens:function(a,b){var c=this;return a.replace(/(\{([^\{\r\n]+)\})/g,function(a,p,n){a=c._getLayerFieldInfo(b,n);return"$"+(a?"{"+a.name+"}":p)})},_encodeAttributes:function(a){a=m.clone(a)||{};var b,c;for(b in a)(c=a[b])&&"string"===typeof c&&(c=encodeURIComponent(c).replace(/\'/g,
"\x26apos;"),a[b]=c);return a},_processFieldsInLinks:function(a,b){var c=this._encodeAttributes(b);b=m.hitch(this,this._addValuesToHref,b,c);a&&(a=a.replace(this._reHref,b).replace(this._reHrefApos,b));return a},_addValuesToHref:function(a,b,c,l){l=l&&m.trim(l);return c=h.substitute(l&&0===l.indexOf("${")?a:b,c)},_getLayerFieldInfo:function(a,b){return a&&a.getField?a.getField(b):null},_formatValue:function(a,b,c,l){var p=this._fieldsMap[b.toLowerCase()],n=p&&p.format;b=-1!==q.indexOf(c.dateFormat.properties,
b);var e="number"===typeof a&&!b&&(!n||!n.dateFormat);if(!h.isDefined(a)||!p||!h.isDefined(n))return this._applyFormatting(a,e);var f="",p=[],g=n.hasOwnProperty("places")||n.hasOwnProperty("digitSeparator"),d=n.hasOwnProperty("digitSeparator")?n.digitSeparator:!0;if(g&&!b)f="NumberFormat",p.push("places: "+(h.isDefined(n.places)&&(!l||0<n.places)?Number(n.places):"Infinity")),p.length&&(f+="("+p.join(",")+")");else if(n.dateFormat)f="DateFormat"+this._insertOffset(this._dateFormats[n.dateFormat]||
this._dateFormats.shortDateShortTime);else return this._applyFormatting(a,e);var r=this._applyFormatFunctions(a,f,c);g&&-1<a.constructor.toString().indexOf("Array")&&(r="",q.forEach(a,m.hitch(this,function(a,b){b&&(r+=" ");r+=this._applyFormatFunctions(a,f,c)})));g&&!d&&w.group&&(r=r.replace(new RegExp("\\"+w.group,"g"),""));b&&(r='\x3cspan class\x3d"esriDateValue"\x3e'+r+"\x3c/span\x3e");return this._applyFormatting(r,e)},_applyFormatFunctions:function(a,b,c){return h.substitute({myKey:a},"${myKey:"+
b+"}",c)||""},_applyFormatting:function(a,b){return b?this._forceLTR(a):this._applyPreWrap(a)},_forceLTR:function(a){var b=c("ie");return b&&10>=b?a:"\x3cspan class\x3d'esriNumericValue'\x3e"+a+"\x3c/span\x3e"},_applyPreWrap:function(a){return"string"===typeof a?a.replace(this._reNewline,"\x3cspan class\x3d'charNewLine'\x3e$1\x3c/span\x3e"):a},_insertOffset:function(a){a&&(a=h.isDefined(this.utcOffset)?a.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):a);return a},_getDomainName:function(a,b,
c,l){return(a=a.getDomain&&a.getDomain(c,{feature:b}))&&a.codedValues?a.getName(l):null},_getTypeName:function(a,b,c){return(a=a.getType&&a.getType(b))&&a.name},_getRelatedRecords:function(a){var b=a.graphic,c;this._relatedLayersInfoPromise||(this._relatedLayersInfoPromise=this._getRelatedLayersInfo(a).then(m.hitch(this,function(a){for(c in a)a.hasOwnProperty(c)&&a[c]&&(this._relatedLayersInfo[c].relatedLayerInfo=a[c])})));return this._relatedLayersInfoPromise.then(m.hitch(this,function(){return this._queryRelatedLayers(b)})).then(m.hitch(this,
function(a){this._setRelatedRecords(b,a);return a}))},_getRelatedLayersInfo:function(b){var c=b.fieldsInfo,f,n,p={};f=b.graphic.getSourceLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});q.forEach(c,function(a){var b,c,p,e;b=this._fromRelatedFieldName(a.fieldName);c=b[0];b=b[1];c&&(!this._relatedLayersInfo[c]&&f&&f.relationships&&(q.some(f.relationships,function(a){if(a.id==c)return e=a,!0}),e&&(this._relatedLayersInfo[c]={relation:e,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[c]&&
(this._relatedLayersInfo[c].relatedFields.push(b),a.statisticType&&(p=new l,p.statisticType=a.statisticType,p.onStatisticField=b,p.outStatisticFieldName=b,this._relatedLayersInfo[c].outStatistics.push(p))))},this);for(n in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(n)&&this._relatedLayersInfo[n]&&(b=this._relatedLayersInfo[n].relation,b=f.url.replace(/[0-9]+$/,b.relatedTableId),this._relatedLayersInfo[n].relatedLayerUrl=b,p[n]=e({url:b,content:{f:"json"},callbackParamName:"callback"}));
return a(p)},_queryRelatedLayers:function(b){var c={},l;for(l in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(l)&&(c[l]=this._queryRelatedLayer({graphic:b,relatedInfo:this._relatedLayersInfo[l]}));return a(c)},_queryRelatedLayer:function(b){var c,l,e,p,f,g,n,d,h,x,B,w,v;c=b.graphic;l=c.getSourceLayer();e=l.url.match(/[0-9]+$/g)[0];B=b.relatedInfo;x=B.relatedLayerInfo;w=B.relatedLayerUrl;b=B.relation;q.some(x.relationships,function(a){if(a.relatedTableId===parseInt(e,10))return p=
a,!0},this);p&&(f=new r,q.some(x.fields,function(a){if(a.name===p.keyField)return d=-1!==q.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],a.type)?"number":"string",!0}),p.relationshipTableId&&p.keyFieldInRelationshipTable?(v=new k,this._queryRelatedRecords(c,p).then(m.hitch(this,function(a){var b;(b=a[c.attributes[l.objectIdField]])?(a=q.map(b.features,function(a){return a.attributes[x.objectIdField]},this),B.outStatistics&&0<B.outStatistics.length&&
x.supportsStatistics&&(h=new r,h.objectIds=a,h.outFields=f.outFields,h.outStatistics=B.outStatistics),h&&(g=new y(w),g.execute(h).then(m.hitch(this,function(a){var c=[];c.push(b);c.push(a);v.resolve(c)})))):v.resolve()}))):(n="string"===d?p.keyField+"\x3d'"+c.attributes[b.keyField]+"'":p.keyField+"\x3d"+c.attributes[b.keyField],f.where=n,f.outFields=B.relatedFields,B.outStatistics&&0<B.outStatistics.length&&x.supportsStatistics&&(h=new r,h.where=f.where,h.outFields=f.outFields,h.outStatistics=B.outStatistics),
g=new y(w),n=[],n.push(g.execute(f)),h&&n.push(g.execute(h))));return n?a(n):v?v.promise:void 0},_setRelatedRecords:function(a,b){this._relatedInfo=[];for(var c in b)b.hasOwnProperty(c)&&b[c]&&(a=b[c],this._relatedInfo[c]={},this._relatedInfo[c].relatedFeatures=a[0].features,h.isDefined(a[1])&&(this._relatedInfo[c].relatedStatsFeatures=a[1].features))},_handlerErrorResponse:function(a,b){a.reject(b)},_fromRelatedFieldName:function(a){var b=[];-1!==a.indexOf(this._relatedFieldPrefix)&&(a=a.split("/"),
b=a.slice(1));return b},_toRelatedFieldName:function(a){var b="";a&&0<a.length&&(b=this._relatedFieldPrefix+a[0]+"/"+a[1]);return b},_queryRelatedRecords:function(a,b){var c=a.getSourceLayer(),l=new v;l.outFields=["*"];l.relationshipId=b.id;l.objectIds=[a.attributes[c.objectIdField]];return c.queryRelatedFeatures(l)},_removeEmptyHref:function(a){return a.replace(/href=(""|'')/gi,"")}});u("extend-esri")&&(d.PopupInfo=d.PopupInfoTemplate=t);return t})},"dojox/html/entities":function(){define(["dojo/_base/lang"],
function(t){var m=t.getObject("dojox.html.entities",!0),q=function(m,u){var k,c;if(u._encCache&&u._encCache.regexp&&u._encCache.mapper&&u.length==u._encCache.length)k=u._encCache.mapper,c=u._encCache.regexp;else{k={};c=["["];var a;for(a=0;a<u.length;a++)k[u[a][0]]="\x26"+u[a][1]+";",c.push(u[a][0]);c.push("]");c=new RegExp(c.join(""),"g");u._encCache={mapper:k,regexp:c,length:u.length}}return m=m.replace(c,function(a){return k[a]})},A=function(m,u){var k,c;if(u._decCache&&u._decCache.regexp&&u._decCache.mapper&&
u.length==u._decCache.length)k=u._decCache.mapper,c=u._decCache.regexp;else{k={};c=["("];var a;for(a=0;a<u.length;a++){var b="\x26"+u[a][1]+";";a&&c.push("|");k[b]=u[a][0];c.push(b)}c.push(")");c=new RegExp(c.join(""),"g");u._decCache={mapper:k,regexp:c,length:u.length}}return m=m.replace(c,function(a){return k[a]})};m.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];m.latin=[["\u00a1","iexcl"],["\u00a2","cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],
["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0",
"Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da",
"Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1","ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4",
"ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f",
"Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3",
"sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0",
"lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245",
"cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665","hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],
["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039","lsaquo"],["\u203a","rsaquo"]];m.encode=function(t,u){t&&(u?
t=q(t,u):(t=q(t,m.html),t=q(t,m.latin)));return t};m.decode=function(q,u){q&&(u?q=A(q,u):(q=A(q,m.html),q=A(q,m.latin)));return q};return m})},"esri/ArcadeExpression":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./layers/support/attributeUtils ./support/expressionUtils".split(" "),function(t,m,q,A,D,u){t=t(null,{declaredClass:"esri.ArcadeExpression",expression:null,profile:null,returnType:null,async:null,id:null,syntaxTree:null,_traits:null,_attributeDef:null,_attributeCache:null,
_compiled:!1,constructor:function(k){m.mixin(this,k);this.returnType=this.returnType||"string";this.id=D.getAttributeId(this.expression);this._setSyntaxTree(this.profile.parse(this));this.async=this.async||this.profile.isAsync(this)},hasGeometryOperations:function(){var k=this._traits.geometryOperations;void 0===k&&(k=this._traits.geometryOperations=u.hasGeometryOperations(this.syntaxTree));return k},hasFeatureSetOperations:function(){var k=this._traits.featureSetOperations;void 0===k&&(k=this._traits.featureSetOperations=
u.hasFeatureSetOperations(this.syntaxTree));return k},hasVariable:function(k){var c=this._traits.variables;void 0===c[k]&&(c[k]=u.hasVariable(this.syntaxTree,k));return c[k]},evaluate:function(k){this._compile();var c=this._attributeCache.compiledFunc;return this.async?u.executeAsyncFunction(c,k):u.executeFunction(c,k)},_setSyntaxTree:function(k){this.syntaxTree=k;this._compiled=!1;this._traits={variables:{}};this._createLegacyValueObjects()},_createLegacyValueObjects:function(){this._attributeDef=
{valueExpression:this.expression};this._attributeCache={attributeInfo:this._attributeDef,isNumeric:"number"===this.returnType,idSource:this.expression,id:this.id,hasExpr:!0,compiledFunc:null,syntaxTree:this.syntaxTree,isScaleDriven:!1,dependsOnView:this.hasVariable("$view"),dependsOnGeometry:this.hasGeometryOperations(),isJSFunc:!1}},_compile:function(){this._compiled||(this._attributeCache.compiledFunc=this.profile.compile(this),this._compiled=!0)}});q("extend-esri")&&(A.ArcadeExpression=t);return t})},
"esri/tasks/QueryTask":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/DeferredList ../kernel ../sniff ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),function(t,m,q,A,D,u,k,c,a,b,h,d,e,f,g){var r=a("esri-pbf"),y=m(null,{url:null,query:null,requestOptions:null,pagination:null,pageSize:null,_fetchDfd:null,_startPage:null,_result:null,constructor:function(a){this._handleSuccess=
q.hitch(this,this._handleSuccess);this._handleError=q.hitch(this,this._handleError);q.mixin(this,a);null==this.pagination&&(this.pagination=!1);null==this.pageSize&&(this.pageSize=1E3)},execute:function(){var a=new D(this._canceler);this._fetchDfd=a;this._result=null;this._sendRequest();return a.promise},_canceler:function(a){var b=a._pendingRequest,c;a.isFulfilled()||!b||b.isFulfilled()||(b.cancel(),c=b.results&&b.results[1]);a._pendingRequest=null;return c},_sendRequest:function(a){var c=this.query;
this.pagination&&(this._startPage=c.resultOffset=null==a?0:a,c.resultRecordCount=this.pageSize);a=this.requestOptions;this._fetchDfd._pendingRequest=b({url:this.url,content:c,handleAs:"pbf"===c.f?"arraybuffer":"json",callbackParamName:"callback",timeout:a&&a.timeout},a);this._fetchDfd._pendingRequest.then(this._handleSuccess).otherwise(this._handleError)},_handleSuccess:function(a){this.pagination?(a.exceededTransferLimit&&this._sendRequest(this._startPage+this.pageSize),this._result?this._result.features=
this._result.features.concat(a.features):this._result=a,this._fetchDfd.progress(a),a.exceededTransferLimit||this._fetchDfd.resolve(this._result)):(this._fetchDfd.progress(a),this._fetchDfd.resolve(a))},_handleError:function(a){this._fetchDfd.reject(a)}}),v=m(f,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},constructor:function(a,b){this._handler=
q.hitch(this,this._handler);this._relationshipQueryHandler=q.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=q.hitch(this,this._executeForIdsHandler);this._countHandler=q.hitch(this,this._countHandler);this._extentHandler=q.hitch(this,this._extentHandler);this.source=b&&b.source;this.gdbVersion=b&&b.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"rawExecute",c:2,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,
p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onRawExecuteComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(a,c,f,e,g){var l=g.assembly;a=this._encode(q.mixin({},this._url.query,{f:e&&e.format||"json"},a.toJson(l&&l[0])));var d=this._handler,
h=this._errorHandler;this.source&&(e={source:this.source.toJson()},a.layer=u.toJson(e));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);var p="pbf"===a.f;if(p){var n;r||(n="QueryTask.execute: 'pbf' format is not supported in your browser.");if(n)return a=new D,a.addErrback(function(a){h(a,f,g.dfd)}),a.reject(Error(n)),a}n=this.requestOptions;n=b({url:this._url.path+"/query",content:a,callbackParamName:"callback",handleAs:p?"arraybuffer":"json",timeout:n&&n.timeout},n);a=[n];p&&a.push(v.loadPBFReader());
(new k(a)).then(function(a){g.dfd.isFulfilled()||(a=a[0],a[0]?d(a[1],p,c,f,g.dfd):h(a[1],f,g.dfd))});return n},rawExecute:function(a,b,c){b=b||{};a=this._encode(q.mixin({},this._url.query,{f:b.format||"json"},a.toJson(c.assembly&&c.assembly[0])));this.source&&(a.layer=u.toJson({source:this.source.toJson()}));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return(new y({url:this._url.path+"/query",query:a,requestOptions:this.requestOptions,pagination:b.pagination,pageSize:b.pageSize})).execute().then(null,
null,function(a){c.dfd.progress(a)}).then(q.hitch(this,function(a){this._successHandler([a],"onRawExecuteComplete",null,c.dfd)})).otherwise(q.hitch(this,function(a){this._errorHandler(a,null,c.dfd)}))},executeRelationshipQuery:function(a,c,f){a=this._encode(q.mixin({},this._url.query,{f:"json"},a.toJson()));var e=this._relationshipQueryHandler,g=this._errorHandler;this.gdbVersion&&(a.gdbVersion=this.gdbVersion);var l=new D(h._dfdCanceller),d=this.requestOptions;l._pendingDfd=b({url:this._url.path+
"/queryRelatedRecords",content:a,callbackParamName:"callback",timeout:d&&d.timeout,load:function(a,b){e(a,b,c,f,l)},error:function(a){g(a,f,l)}},d);return l},executeForIds:function(a,c,f,e){var g=e.assembly;a=this._encode(q.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},a.toJson(g&&g[0])));var l=this._executeForIdsHandler,d=this._errorHandler;this.source&&(g={source:this.source.toJson()},a.layer=u.toJson(g));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);g=this.requestOptions;return b({url:this._url.path+
"/query",content:a,callbackParamName:"callback",timeout:g&&g.timeout,load:function(a,b){l(a,b,c,f,e.dfd)},error:function(a){d(a,f,e.dfd)}},g)},executeForCount:function(a,c,f,e){var g=e.assembly;a=this._encode(q.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},a.toJson(g&&g[0])));var d=this._countHandler,l=this._errorHandler;this.source&&(g={source:this.source.toJson()},a.layer=u.toJson(g));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);g=this.requestOptions;return b({url:this._url.path+
"/query",content:a,callbackParamName:"callback",timeout:g&&g.timeout,load:function(a,b){d(a,b,c,f,e.dfd)},error:function(a){l(a,f,e.dfd)}},g)},executeForExtent:function(a,c,f,e){var g=e.assembly;a=this._encode(q.mixin({},this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},a.toJson(g&&g[0])));var d=this._extentHandler,l=this._errorHandler;this.source&&(g={source:this.source.toJson()},a.layer=u.toJson(g));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);g=this.requestOptions;return b({url:this._url.path+
"/query",content:a,callbackParamName:"callback",timeout:g&&g.timeout,load:function(a,b){d(a,b,c,f,e.dfd)},error:function(a){l(a,f,e.dfd)}},g)},_handler:function(a,b,c,f,e){try{a&&b&&(a=v.pbfDeps.optimizedFeatures.convertToFeatureSet(v.pbfDeps.pbfQueryUtils.parsePBFFeatureQuery(a)));var d=new g(a);this._successHandler([d],"onComplete",c,e)}catch(E){this._errorHandler(E,f,e)}},_relationshipQueryHandler:function(a,b,c,f,e){try{var d=a.geometryType,h=a.spatialReference,l={};A.forEach(a.relatedRecordGroups,
function(a){var b={};b.geometryType=d;b.spatialReference=h;b.features=a.relatedRecords;b=new g(b);if(null!=a.objectId)l[a.objectId]=b;else for(var c in a)a.hasOwnProperty(c)&&"relatedRecords"!==c&&(l[a[c]]=b)});this._successHandler([l],"onExecuteRelationshipQueryComplete",c,e)}catch(p){this._errorHandler(p,f,e)}},_executeForIdsHandler:function(a,b,c,e,f){try{this._successHandler([a.objectIds],"onExecuteForIdsComplete",c,f)}catch(z){this._errorHandler(z,e,f)}},_countHandler:function(a,b,c,f,e){try{var g,
d=a.features,h=a.objectIds;if(h)g=h.length;else{if(d)throw Error("Unable to perform query. Please check your parameters.");g=a.count}this._successHandler([g],"onExecuteForCountComplete",c,e)}catch(p){this._errorHandler(p,f,e)}},_extentHandler:function(a,b,c,e,f){try{a.extent&&(a.extent=new d(a.extent)),this._successHandler([a],"onExecuteForExtentComplete",c,f)}catch(z){this._errorHandler(z,e,f)}}});v.loadPBFReader=function(){var a=new D;v.pbfDeps?a.resolve():t(["./support/pbfDeps"],function(b){v.pbfDeps=
b;a.isFulfilled()||a.resolve()});return a.promise};e._createWrappers(v);a("extend-esri")&&q.setObject("tasks.QueryTask",v,c);return v})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(t,m,q){t.DeferredList=function(t,D,u,k,c){var a=[];m.call(this);var b=this;0!==t.length||D||this.resolve([0,[]]);var h=0;q.forEach(t,function(c,e){function f(c,f){a[e]=[c,f];h++;h===t.length&&b.resolve(a)}c.then(function(a){D?b.resolve([e,a]):f(!0,a)},function(a){u?
b.reject(a):f(!1,a);if(k)return null;throw a;})})};t.DeferredList.prototype=new m;t.DeferredList.prototype.gatherResults=function(m){m=new t.DeferredList(m,!1,!0,!1);m.addCallback(function(m){var u=[];q.forEach(m,function(k){u.push(k[1])});return u});return m};return t.DeferredList})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(t,m,q,A,D,u,k,c){t=t(c,{declaredClass:"esri.tasks._Task",
_eventMap:{error:["error"],complete:["result"]},constructor:function(a,b){a&&m.isString(a)&&(this._url=k.urlToObject(this.url=a));b&&b.requestOptions&&(this.requestOptions=b.requestOptions);this.normalization=!0;this._errorHandler=m.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var a=this._url,b=/^http:/i;this.url&&(this.url=this.url.replace(b,"https:"));a&&a.path&&(a.path=a.path.replace(b,"https:"))},_encode:function(a,b,c){var d,e,f={},g,h;for(g in a)if("declaredClass"!==
g&&(d=a[g],e=typeof d,null!==d&&void 0!==d&&"function"!==e))if(m.isArray(d))for(f[g]=[],h=d.length,e=0;e<h;e++)f[g][e]=this._encode(d[e]);else"object"===e?d.toJson&&(e=d.toJson(c&&c[g]),"esri.tasks.FeatureSet"===d.declaredClass&&e.spatialReference&&(e.sr=e.spatialReference,delete e.spatialReference),f[g]=b?e:q.toJson(e)):f[g]=d;return f},_successHandler:function(a,b,c,d){b&&this[b].apply(this,a);c&&c.apply(null,a);d&&u._resDfd(d,a)},_errorHandler:function(a,b,c){this.onError(a);b&&b(a);c&&c.errback(a)},
setNormalization:function(a){this.normalization=a},onError:function(){}});A("extend-esri")&&(D.Task=t);return t})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/Polygon ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),function(t,m,q,A,D,u,k,c,a,b,h,d){t=t(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(a,b){if(a){m.mixin(this,a);var f=this.features=
this.features||[],e=a.spatialReference,e=this.spatialReference=h.createInstance(c.simpleConstructor,e),y=h.getGeometryType(a.geometryType);this.geometryType=a.geometryType;a.fields&&(this.fields=a.fields);a=h.supportsLazyUnquantization(this.geometryType);var v=h.unquantizeFunction(this.geometryType,this.transform),l=!!(b&&a&&v),B=y&&(l?y.accessorConstructor:y.simpleConstructor);q.forEach(f,function(a,b){var g=h.createInstance(k.simpleConstructor),r=a.geometry;if(y&&r){var x=g.geometry=h.createInstance(B,
l?null:r);x.setSpatialReference(r.spatialReference?h.createInstance(c.simpleConstructor,r.spatialReference):e);l&&x.setupLazyUnquantization(v,r)}g.symbol=a.symbol?d.fromJson(a.symbol):null;g.attributes=a.attributes;f[b]=g});l||this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(b){var c={};this.displayFieldName&&(c.displayFieldName=this.displayFieldName);this.fields&&(c.fields=this.fields);this.spatialReference?c.spatialReference=
this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(c.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(c.geometryType=h.getJsonType(this.features[0].geometry)),c.features=a._encodeGraphics(this.features,b));c.geometryType=c.geometryType||this.geometryType;c.exceededTransferLimit=this.exceededTransferLimit;c.transform=this.transform;return u.fixJson(c)},_hydrate:function(){h.unquantize(this.features,this.geometryType,
this.transform);this.transform=null},quantize:function(a){if(!this.geometryType)return this.transform=null,this;var b=a.translate[0],c=a.translate[1],e=a.scale[0],d=a.scale[1],h=this.features,l=function(a,b,c){var f,p,e,g,d,h,l=[];f=0;for(p=a.length;f<p;f++)if(e=a[f],0<f){if(h=b(e[0]),e=c(e[1]),h!==g||e!==d)l.push([h-g,e-d]),g=h,d=e}else g=b(e[0]),d=c(e[1]),l.push([g,d]);return 0<l.length?l:null},k=function(a,b,c){if("esriGeometryPoint"===a)return function(a){a.x=b(a.x);a.y=c(a.y);return a};if("esriGeometryPolyline"===
a||"esriGeometryPolygon"===a)return function(a){var p,e,f,g,d;f=a.rings||a.paths;d=[];p=0;for(e=f.length;p<e;p++)g=f[p],(g=l(g,b,c))&&d.push(g);return 0<d.length?(a.rings?a.rings=d:a.paths=d,a):null};if("esriGeometryMultipoint"===a)return function(a){var p;p=l(a.points,b,c);return 0<p.length?(a.points=p,a):null};if("esriGeometryEnvelope"===a)return function(a){return a}}(this.geometryType,function(a){return Math.round((a-b)/e)},function(a){return Math.round((c-a)/d)}),x,w;x=0;for(w=h.length;x<w;x++)h[x].geometry&&
(k(h[x].geometry)||h[x].setGeometry(null));this.transform=a;return this}});t.createGraphics=function(a){var b=a.geometryType,e=h.createInstance(c.simpleConstructor,a.spatialReference),d=h.getGeometryType(b).accessorConstructor,y=h.unquantizeFunction(b,a.transform);return q.map(a.features,function(a,b){b=h.createInstance(k.simpleConstructor);var c=a.geometry;if(c){var f=b.geometry=h.createInstance(d);f.setSpatialReference(e);f.setupLazyUnquantization(y,c)}b.attributes=a.attributes;return b})};t.createPolygon=
function(a,c,g){var f;a&&(f=h.createInstance(b.accessorConstructor),f.setSpatialReference(c),c=h.unquantizeFunction("esriGeometryPolygon",g),f.setupLazyUnquantization(c,a));return f};A("extend-esri")&&m.setObject("tasks.FeatureSet",t,D);return t})},"esri/tasks/RelationshipQuery":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","../kernel"],function(t,m,q,A,D){t=t(null,{declaredClass:"esri.tasks.RelationshipQuery",definitionExpression:"",relationshipId:null,returnGeometry:!1,
objectIds:null,outSpatialReference:null,outFields:null,orderByFields:null,toJson:function(){var m={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},k=this.objectIds,c=this.outFields,a=this.outSpatialReference,b=this.orderByFields;k&&(m.objectIds=k.join(","));c&&(m.outFields=c.join(","));a&&(m.outSR=a.wkid||q.toJson(a.toJson()));b&&(m.orderByFields=
b.join(","));m._ts=this._ts;return m}});A("extend-esri")&&m.setObject("tasks.RelationshipQuery",t,D);return t})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(t,m,q,A){t=t(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,
maxVertexCount:this.maxVertexCount}}});q("extend-esri")&&m.setObject("tasks.StatisticDefinition",t,A);return t})},"esri/arcadeProfiles/popupProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(t,m,q,A,D,u,k,c){t=new (t(null,{declaredClass:"esri.arcadeProfiles.PopupProfile",defaults:{globals:{featureSet:["$layer","$datastore","$map"],async:["$layer","$datastore","$map"]},context:{vars:{$feature:"any",
$layer:"any",$datastore:"any",$map:"any"}}},initialize:function(a){var b=[];c.hasGeometryOperations(a)&&b.push(k.enableGeometryOperations());(c.hasFeatureSetOperations(a)||c.hasVariables(a,this.defaults.globals.featureSet))&&b.push(k.enableFeatureSetOperations());c.isAsync(a)&&b.push(k.enableAsyncOperations());return D(b)},isAsync:function(a){a=[a];return c.hasFeatureSetOperations(a)||c.hasVariables(a,this.defaults.globals.async)},parse:function(a){return k.createSyntaxTree(a.expression)},compile:function(a){var b=
m.clone(this.defaults.context);b.useAsync=a.async;return a.syntaxTree?k.createFunction(a.syntaxTree,b):null},getEvalOptions:function(a){var b=a.expression,h=a.feature,d=a.layer,e=a.map;a=a.spatialReference;var h=h&&b.hasVariable("$feature")?u.createFromGraphicLikeObject(h.geometry,h.attributes,d):null,f,g;if(d){var r={spatialReference:a};b.hasVariable("$layer")&&(f=d.getMap()?k.createFeatureSetFromLayer(d,r):k.createFeatureSetFromLayerUrl(d.url,r));b.hasVariable("$datastore")&&(g=(g=c.getServiceUrl(d.url))?
k.createFeatureSetCollectionFromServiceUrl(g,r):null)}b=e&&b.hasVariable("$map")?k.createFeatureSetCollectionFromMap(e):null;return{context:{vars:{$feature:h,$layer:f,$datastore:g,$map:b},spatialReference:a}}}}));q("extend-esri")&&m.setObject("arcadeProfiles.popupProfile",t,A);return t})},"esri/core/timerUtils":function(){define([],function(){function t(m){var k,c=m.length;for(k=0;k<c;k++)m[k]()}var m={LOW:1,HIGH:2},q,A={};A[m.LOW]=[];A[m.HIGH]=[];var D=function(){clearTimeout(q);q=null;var u=A[m.HIGH];
A[m.HIGH]=[];t(u);u=A[m.LOW];A[m.LOW]=[];t(u)};return{priority:m,callbackQueue:A,setTimeout:function(m,k){m=[k,A[k].push(m)-1];q||(q=setTimeout(D,0));return m},clearTimeout:function(m){m&&A[m[0]].splice(m[1],1)}}})},"esri/arcadeProfiles/labelingProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(t,m,q,A,D,u,k,c){t=new (t(null,{declaredClass:"esri.arcadeProfiles.LabelingProfile",defaults:{context:{vars:{$feature:"any"}}},
initialize:function(a){var b=[];c.hasGeometryOperations(a)&&b.push(k.enableGeometryOperations());return D(b)},isAsync:function(a){return!1},parse:function(a){return k.createSyntaxTree(a.expression)},compile:function(a){var b=m.clone(this.defaults.context);return a.syntaxTree?k.createFunction(a.syntaxTree,b):null},getEvalOptions:function(a){var b=a.feature;return{context:{vars:{$feature:b&&a.expression.hasVariable("$feature")?u.createFromGraphicLikeObject(b.geometry,b.attributes,a.layer):null},spatialReference:a.spatialReference}}}}));
q("extend-esri")&&m.setObject("arcadeProfiles.labelingProfile",t,A);return t})},"esri/layers/labelLayerUtils/DynamicLabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../../kernel ../../geometry/Extent ../../geometry/Polygon".split(" "),function(t,m,q,A,D,u){t=t(null,{declaredClass:"esri.layers.labelLayerUtils.DynamicLabelClass",constructor:function(){this._preparedLabels=[];this._placedLabels=[];this._extent=null;this._y1=this._x1=this._y0=this._x0=this._ymax=this._ymin=this._xmax=
this._xmin=0;this._scale=1},setMap:function(k,c){this._labelLayer=c;this._xmin=k.extent.xmin;this._xmax=k.extent.xmax;this._ymin=k.extent.ymin;this._ymax=k.extent.ymax;this._scale=(this._xmax-this._xmin)/k.width},_process:function(k){this._preparedLabels=k;this._placedLabels=[];var c;for(k=this._preparedLabels.length-1;0<=k;k--){var a=this._preparedLabels[k],b=Math.min(a.labelWidth,a.labelHeight),h=a.labelWidth+0*b,b=a.labelHeight+0*b,d=(c=a.options)&&void 0!==c.lineLabelPlacement?c.lineLabelPlacement:
"PlaceAtCenter",e=c&&void 0!==c.lineLabelPosition?c.lineLabelPosition:"Above",f=c&&void 0!==c.pointPriorities?c.pointPriorities:"AboveRight",g=[2,2,1,3,0,2,3,3,2];"AboveLeft"==f?g=[1,2,2,2,0,3,2,3,3]:"AboveCenter"==f?g=[2,1,2,2,0,2,3,3,3]:"AboveRight"==f?g=[2,2,1,3,0,2,3,3,2]:"CenterLeft"==f?g=[2,2,3,1,0,3,2,2,3]:"CenterCenter"==f?g=[0,0,0,0,1,0,0,0,0]:"CenterRight"==f?g=[3,2,2,3,0,1,3,2,2]:"BelowLeft"==f?g=[2,3,3,2,0,3,1,2,2]:"BelowCenter"==f?g=[3,3,3,2,0,2,2,1,2]:"BelowRight"==f&&(g=[3,3,2,3,0,
2,2,2,1]);var r=c&&void 0!==c.labelRotation?c.labelRotation:!0,f=Math.PI/180*a.angle;c=c&&void 0!==c.howManyLabels?c.howManyLabels:"OneLabel";if("point"==a.geometry.type)this._generatePointPositions(a,a.geometry.x,a.geometry.y,a.text,f,h,b,a.symbolWidth,a.symbolHeight,g);else if("multipoint"==a.geometry.type)for(d=a.geometry,e=0;e<d.points.length;e++)this._generatePointPositions(a,d.points[e][0],d.points[e][1],a.text,f,h,b,a.symbolWidth,a.symbolHeight,g);else"polyline"==a.geometry.type?this._generateLinePositions(a,
a.geometry,a.text,h,b,2*a.symbolHeight+b,d,e,r):"polygon"==a.geometry.type&&this._generatePolygonPositions(a,c,a.geometry,a.text,f,h,b)}return this._placedLabels},_generatePointPositions:function(k,c,a,b,h,d,e,f,g,r){f=(f+d)*this._scale;g=(g+e)*this._scale;var y,v;for(y=1;3>=y;y++)for(v=1;9>=v;v++)if(r[v-1]==y)switch(v){case 1:if(this._findPlace(k,b,c-f,a+g,h,d,e))return;break;case 2:if(this._findPlace(k,b,c,a+g,h,d,e))return;break;case 3:if(this._findPlace(k,b,c+f,a+g,h,d,e))return;break;case 4:if(this._findPlace(k,
b,c-f,a,h,d,e))return;break;case 5:if(this._findPlace(k,b,c,a,h,d,e))return;break;case 6:if(this._findPlace(k,b,c+f,a,h,d,e))return;break;case 7:if(this._findPlace(k,b,c-f,a-g,h,d,e))return;break;case 8:if(this._findPlace(k,b,c,a-g,h,d,e))return;break;case 9:if(this._findPlace(k,b,c+f,a-g,h,d,e))return}},_generateLinePositions:function(k,c,a,b,h,d,e,f,g){var r=b*this._scale*b*this._scale,y,v,l;for(y=0;y<c.paths.length;y++){var m=c.paths[y],x=m.length,w=Math.floor((x-1)/2),n=0!==(x-1)%2?1:-1;"PlaceAtStart"==
e&&(w=0,n=1);"PlaceAtEnd"==e&&(w=x-2,n=-1);for(;0<=w&&w<x-1;){for(v=w;v<x;v++){var z=m[w][0],q=m[w][1],t=m[v][0]-z,p=m[v][1]-q;if(t*t+p*p>r){for(var C=Math.atan2(p,t);C>Math.PI/2;)C-=Math.PI;for(;C<-(Math.PI/2);)C+=Math.PI;var F=Math.sin(C),u=Math.cos(C),H=0,I=0;"Above"==f&&(H=d*F*this._scale,I=d*u*this._scale);"Below"==f&&(H=-d*F*this._scale,I=-d*u*this._scale);if(1==v-w){if(this._clipLine(z,q,m[v][0],m[v][1])&&(z=this._x1-this._x0,l=this._y1-this._y0,z*z+l*l>r&&(v=Math.atan2(l,z),t=b/2+2*h,q=t*
this._scale*Math.cos(v),t=t*this._scale*Math.sin(v),"PlaceAtStart"==e?(z=this._x0+q,l=this._y0+t):"PlaceAtEnd"==e?(z=this._x1-q,l=this._y1-t):(z=this._x0+z/2,l=this._y0+l/2),this._findPlace(k,a,z-H,l+I,g?-v:0,b,h))))return}else{var J=0;for(l=w;l<=v;l++)J=Math.max(J,Math.abs((m[l][1]-q)*u-(m[l][0]-z)*F));if(J<h&&this._findPlace(k,a,z+t/2-H,q+p/2+I,g?-C:0,b,h))return}break}}w+=n}}},_generatePolygonPositions:function(k,c,a,b,h,d,e){var f;if("ManyLabels"==c)for(c=0;c<a.rings.length;c++)f=a.rings[c],u.prototype.isClockwise(f)&&
(f=this._findCentroid(f,this._xmin,this._ymin,this._xmax,this._ymax),this._findPlace(k,b,f[0],f[1],h,d,e));else{f=this._findCentroidForFeature(a,this._xmin,this._ymin,this._xmax,this._ymax);var g=f[1],r=0;for(c=0;10>c;c++){r+=e/4;f=this._findCentroidForFeature(a,this._xmin,g+(r-e/4),this._xmax,g+(r+e/4));if(this._findPlace(k,b,f[0],f[1],h,d,e))break;f=this._findCentroidForFeature(a,this._xmin,g-(r+e/4),this._xmax,g-(r-e/4));if(this._findPlace(k,b,f[0],f[1],h,d,e))break}}},_findCentroid:function(k,
c,a,b,h){var d=k.length,e=[0,0],f=0,g=k[0][0],r=k[0][1];g>b&&(g=b);g<c&&(g=c);r>h&&(r=h);r<a&&(r=a);for(var m=1;m<d-1;m++){var v=k[m][0],l=k[m][1],B=k[m+1][0],x=k[m+1][1];v>b&&(v=b);v<c&&(v=c);l>h&&(l=h);l<a&&(l=a);B>b&&(B=b);B<c&&(B=c);x>h&&(x=h);x<a&&(x=a);var w=(v-g)*(x-r)-(B-g)*(l-r);e[0]+=w*(g+v+B);e[1]+=w*(r+l+x);f+=w}e[0]/=3*f;e[1]/=3*f;if(isNaN(e[0])||isNaN(e[1]))return e;a=[];this._fillBuffer(k,a,e);e[0]=this._sortBuffer(a,e[0],c,b);return e},_findCentroidForFeature:function(k,c,a,b,h){for(var d,
e=0,f=[0,0],g=0;g<k.rings.length;g++){var r=k.rings[g],m=r.length,v=r[0][0],l=r[0][1];v>b&&(v=b);v<c&&(v=c);l>h&&(l=h);l<a&&(l=a);for(d=1;d<m-1;d++){var B=r[d][0],x=r[d][1],w=r[d+1][0],n=r[d+1][1];B>b&&(B=b);B<c&&(B=c);x>h&&(x=h);x<a&&(x=a);w>b&&(w=b);w<c&&(w=c);n>h&&(n=h);n<a&&(n=a);var q=(B-v)*(n-l)-(w-v)*(x-l);f[0]+=q*(v+B+w);f[1]+=q*(l+x+n);e+=q}}f[0]/=3*e;f[1]/=3*e;if(isNaN(f[0])||isNaN(f[1]))return f;a=[];for(d=0;d<k.rings.length;d++)this._fillBuffer(k.rings[d],a,f);f[0]=this._sortBuffer(a,
f[0],c,b);return f},_fillBuffer:function(k,c,a){for(var b=k.length-1,h=k[0][1]>=k[b][1]?1:-1,d=0;d<=b;d++){var e=d,f=d+1;d==b&&(f=0);var g=k[e][0],e=k[e][1],r=k[f][0],f=k[f][1],m=f>=e?1:-1;if(e<=a[1]&&a[1]<=f||f<=a[1]&&a[1]<=e)a[1]!=e&&a[1]!=f?(c.push((a[1]-e)*(r-g)/(f-e)+g),h=m):a[1]==e&&a[1]!=f?(h!=m&&c.push(g),h=m):a[1]!=e&&a[1]==f?(c.push(r),h=m):a[1]==e&&a[1]==f&&(1==h&&c.push(g),c.push(r),h=m)}},_sortBuffer:function(k,c,a,b){var h=k.length;k.sort();if(0<h){for(var d=0,e=c=0;e<h-1;e+=2){var f=
Math.abs(k[e+1]-k[e]);!(k[e]<=a&&k[e+1]<=a||k[e]>=b&&k[e+1]>=b)&&f>d&&(d=f,c=e)}h=k[c];k=k[c+1];h>b&&(h=b);h<a&&(h=a);k>b&&(k=b);k<a&&(k=a);c=(h+k)/2}return c},_findPlace:function(k,c,a,b,h,d,e){if(isNaN(a)||isNaN(b))return!1;for(var f=0;f<this._placedLabels.length;f++){var g=this._placedLabels[f].angle,r=this._placedLabels[f].width*this._scale,m=this._placedLabels[f].height*this._scale,v=this._placedLabels[f].x-a,l=this._placedLabels[f].y-b;if(0===h&&0===g){if(this._findPlace2(-d*this._scale,-e*
this._scale,d*this._scale,e*this._scale,v-r,l-m,v+r,l+m))return!1}else{var B=new D(-d*this._scale,-e*this._scale,d*this._scale,e*this._scale,null),x=0,w=1;0!==h&&(x=Math.sin(h),w=Math.cos(h));var n=v*w-l*x,v=v*x+l*w,g=g-h,x=Math.sin(g),w=Math.cos(g),q=-r*w- -m*x,l=-r*x+-m*w,g=+r*w- -m*x,t=+r*x+-m*w,r=n+q,m=v-l,x=n+g,w=v-t,q=n-q,l=v+l,n=n-g,v=v+t,g=new u;g.addRing([[r,m],[x,w],[q,l],[n,v],[r,m]]);if(B.intersects(g))return!1}}for(;h>Math.PI/2;)h-=Math.PI;for(;h<-(Math.PI/2);)h+=Math.PI;f={};f.layer=
k;f.text=c;f.angle=h;f.x=a;f.y=b;f.width=d;f.height=e;this._placedLabels.push(f);return!0},_findPlace2:function(k,c,a,b,h,d,e,f){return(k>=h&&k<=e||a>=h&&a<=e||k<=h&&a>=e)&&(c>=d&&c<=f||b>=d&&b<=f||c<=d&&b>=f)?!0:!1},_clipLine:function(k,c,a,b){for(var h=this._code(k,c),d=this._code(a,b);0!==h||0!==d;){if(0!==(h&d))return!1;var e=a-k,f=b-c;0!==h?(k<this._xmin?(c+=f*(this._xmin-k)/e,k=this._xmin):k>this._xmax?(c+=f*(this._xmax-k)/e,k=this._xmax):c<this._ymin?(k+=e*(this._ymin-c)/f,c=this._ymin):c>
this._ymax&&(k+=e*(this._ymax-c)/f,c=this._ymax),h=this._code(k,c)):(a<this._xmin?(b+=f*(this._xmin-a)/e,a=this._xmin):a>this._xmax?(b+=f*(this._xmax-a)/e,a=this._xmax):b<this._ymin?(a+=e*(this._ymin-b)/f,b=this._ymin):b>this._ymax&&(a+=e*(this._ymax-b)/f,b=this._ymax),d=this._code(a,b))}this._x0=k;this._y0=c;this._x1=a;this._y1=b;return!0},_code:function(k,c){var a=0;k<this._xmin&&(a+=8);k>this._xmax&&(a+=4);c<this._ymin&&(a+=2);c>this._ymax&&(a+=1);return a}});q("extend-esri")&&m.setObject("layers.labelLayerUtils.DynamicLabelClass",
t,A);return t})},"esri/layers/labelLayerUtils/StaticLabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../../kernel ../../geometry/Extent ../../geometry/Point ../../geometry/Polygon".split(" "),function(t,m,q,A,D,u,k){return t(null,{declaredClass:"esri.layers.labelLayerUtils.StaticLabel",constructor:function(){this._preparedLabels=[];this._placedLabels=[];this._extent=null;this._ymax=this._ymin=this._xmax=this._xmin=0;this._scale=1;this._LINE_STEP_CONST=1.5;this._POLYGON_X_STEP_CONST=
1;this._POLYGON_Y_STEP_CONST=.75;this._OVERRUN=2},setMap:function(c,a){this._labelLayer=a;this._map=c;this._xmin=c.extent.xmin;this._xmax=c.extent.xmax;this._ymin=c.extent.ymin;this._ymax=c.extent.ymax;this._scale=(this._xmax-this._xmin)/c.width},_process:function(c){var a,b,h,d,e,f,g,r,m;this._preparedLabels=c;this._placedLabels=[];for(c=this._preparedLabels.length-1;0<=c;c--){a=this._preparedLabels[c];e=a.labelWidth;f=a.labelHeight;r=(g=a.options)&&g.lineLabelPlacement?g.lineLabelPlacement:"PlaceAtCenter";
m=g&&g.lineLabelPosition?g.lineLabelPosition:"Above";b=g&&g.labelRotation?g.labelRotation:!0;h=Math.PI/180*a.angle;d=g&&g.howManyLabels?g.howManyLabels:"OneLabel";var v=[];if("point"===a.geometry.type)this._generatePointPositions(a.geometry.x,a.geometry.y,a.text,h,e,f,a.symbolWidth,a.symbolHeight,g,v);else if("multipoint"===a.geometry.type)for(b=0;b<a.geometry.points.length;b++)this._generatePointPositions(a.geometry.points[b][0],a.geometry.points[b][1],a.text,h,e,f,a.symbolWidth,a.symbolHeight,g,
v);else if("polyline"===a.geometry.type)if("PlaceAtStart"===r)this._generateLinePositionsPlaceAtStart(a.geometry,!0,a.text,e,f,2*a.symbolHeight+f,r,m,b,v);else if("PlaceAtEnd"===r)this._generateLinePositionsPlaceAtEnd(a.geometry,!0,a.text,e,f,2*a.symbolHeight+f,r,m,b,v);else{g=[];var l=a.geometry.getExtent(),q=this._map.extent;if(l.getWidth()<e*this._scale/this._OVERRUN&&l.getHeight()<e*this._scale/this._OVERRUN)continue;else.5*l.getWidth()<q.getWidth()&&.5*l.getHeight()<q.getHeight()?this._generateLinePositionsPlaceAtCenter(a.geometry,
!1,.1*Math.min(this._map.width,this._map.height)*this._scale,a.text,e,f,2*a.symbolHeight+f,r,m,b,g):this._generateLinePositionsPlaceAtCenter(a.geometry,!0,.2*Math.min(this._map.width,this._map.height)*this._scale,a.text,e,f,2*a.symbolHeight+f,r,m,b,g);this._postSorting(q,g,v)}else if("polygon"===a.geometry.type){r=[];for(b=0;b<a.geometry.rings.length;b++)m=a.geometry.rings[b],1<a.geometry.rings.length&&!k.prototype.isClockwise(m)||(g=this._calcRingExtent(m),g.xmax-g.xmin<4*e*this._scale/this._OVERRUN&&
g.ymax-g.ymin<4*f*this._scale/this._OVERRUN||r.push(m));r.sort(function(a,b){return b.length-a.length});for(b=0;b<r.length;b++)this._generatePolygonPositionsForManyLabels(r[b],a.geometry.spatialReference,a.text,h,e,f,v)}for(b=0;b<v.length&&(r=v[b].x,m=v[b].y,void 0!==v[b].angle&&(h=v[b].angle),g=this._findPlace(a,a.text,r,m,h,e,f),"OneLabel"!==d||!g||!this._labelLayer._isWithinScreenArea(new u(r,m,a.geometry.spatialReference)));b++);}return this._placedLabels},_generatePointPositions:function(c,a,
b,h,d,e,f,g,r,k){b=r&&r.pointPriorities?r.pointPriorities:"AboveRight";d=(f+d)*this._scale;e=(g+e)*this._scale;switch(b.toLowerCase()){case "aboveleft":c-=d;a+=e;break;case "abovecenter":a+=e;break;case "aboveright":c+=d;a+=e;break;case "centerleft":c-=d;break;case "centercenter":break;case "centerright":c+=d;break;case "belowleft":c-=d;a-=e;break;case "belowcenter":a-=e;break;case "belowright":c+=d;a-=e;break;default:return}k.push({x:c,y:a})},_generateLinePositionsPlaceAtStart:function(c,a,b,h,d,
e,f,g,r,k){f=h*this._scale;var m=this._LINE_STEP_CONST*Math.min(this._map.width,this._map.height)*this._scale,l,q,x,w,n,t,E,u;for(l=0;l<c.paths.length;l++){var p=c.paths[l],C=f,F=0;for(q=0;q<p.length-1;q++)x=p[q][0],w=p[q][1],n=p[q+1][0],t=p[q+1][1],E=n-x,u=t-w,E=Math.sqrt(E*E+u*u),F+E>C?(F=this._generatePositionsOnLine(c.spatialReference,a,C,m,F,x,w,n,t,b,h,d,e,g,r,k),C=m):F+=E}},_generateLinePositionsPlaceAtEnd:function(c,a,b,h,d,e,f,g,r,k){f=h*this._scale;var m=this._LINE_STEP_CONST*Math.min(this._map.width,
this._map.height)*this._scale,l,q,x,w,n,t,u,y;for(l=0;l<c.paths.length;l++){var p=c.paths[l],C=f,F=0;for(q=p.length-2;0<=q;q--)x=p[q+1][0],w=p[q+1][1],n=p[q][0],t=p[q][1],u=n-x,y=t-w,u=Math.sqrt(u*u+y*y),F+u>C?(F=this._generatePositionsOnLine(c.spatialReference,a,C,m,F,x,w,n,t,b,h,d,e,g,r,k),C=m):F+=u}},_generateLinePositionsPlaceAtCenter:function(c,a,b,h,d,e,f,g,r,k,m){var l,q,v,w,n,t,u,y;for(g=0;g<c.paths.length;g++){var p=c.paths[g];if(!(2>p.length)){if(2==p.length){w=p[0];l=p[1];v=w[0];w=w[1];
p=l[0];t=l[1];n=(p-v)*(p-v)+(t-w)*(t-w);u=Math.atan2(t-w,p-v);t=Math.cos(u);u=Math.sin(u);p=[];y=v;for(var C=w;(y-v)*(y-v)+(C-w)*(C-w)<n;)p.push([y,C]),y+=b/2*t,C+=b/2*u;p.push(l)}var F=0;for(l=0;l<p.length-1;l++)v=p[l][0],w=p[l][1],n=p[l+1][0],t=p[l+1][1],u=n-v,y=t-w,F+=Math.sqrt(u*u+y*y);for(l=C=0;l<p.length-1;l++){v=p[l][0];w=p[l][1];n=p[l+1][0];t=p[l+1][1];u=n-v;y=t-w;u=Math.sqrt(u*u+y*y);if(C+u>F/2)break;C+=u}l==p.length-1&&l--;v=p[l][0];w=p[l][1];n=p[l+1][0];t=p[l+1][1];u=n-v;y=t-w;C=F/2-C;
u=Math.atan2(y,u);y=v+C*Math.cos(u);u=w+C*Math.sin(u);v=this._angleAndShifts(v,w,n,t,f,r,k);m.push({x:y+v.shiftX,y:u+v.shiftY,angle:v.angle});var F=y,K=u,C=0;for(q=l;q<p.length-1;q++)q==l?(v=F,w=K):(v=p[q][0],w=p[q][1]),n=p[q+1][0],t=p[q+1][1],u=n-v,y=t-w,u=Math.sqrt(u*u+y*y),C=C+u>b?this._generatePositionsOnLine(c.spatialReference,a,b,b,C,v,w,n,t,h,d,e,f,r,k,m):C+u;C=0;for(q=l;0<=q;q--)q==l?(v=F,w=K):(v=p[q+1][0],w=p[q+1][1]),n=p[q][0],t=p[q][1],u=n-v,y=t-w,u=Math.sqrt(u*u+y*y),C=C+u>b?this._generatePositionsOnLine(c.spatialReference,
a,b,b,C,v,w,n,t,h,d,e,f,r,k,m):C+u}}},_generatePositionsOnLine:function(c,a,b,h,d,e,f,g,r,k,m,l,q,t,u,n){k=Math.atan2(r-f,g-e);m=e;l=f;var v=m,w=l;do if(d=b-d,m+=d*Math.cos(k),l+=d*Math.sin(k),this._belongs(m,l,e,f,g,r))d=this._angleAndShifts(e,f,g,r,q,t,u),b=m+d.shiftX,w=l+d.shiftY,a?this._labelLayer._isWithinScreenArea(new D(b,w,b,w,c))&&n.push({x:b,y:w,angle:d.angle}):n.push({x:b,y:w,angle:d.angle}),v=m,w=l,d=0,b=h;else return c=g-v,r-=w,Math.sqrt(c*c+r*r);while(1)},_postSorting:function(c,a,b){if(c&&
0<a.length){var h=.5*(c.xmin+c.xmax);c=.5*(c.ymin+c.ymax);for(var d=a[0].x,e=a[0].y,f=Math.sqrt((d-h)*(d-h)+(e-c)*(e-c)),g=a[0].angle,r=0;r<a.length;r++){var k=a[r].x,m=a[r].y,l=Math.sqrt((k-h)*(k-h)+(m-c)*(m-c));l<f&&(d=k,e=m,f=l,g=a[r].angle)}b.push({x:d,y:e,angle:g})}},_belongs:function(c,a,b,h,d,e){if(d==b&&e==h)return!1;if(d>b){if(c>d||c<b)return!1}else if(c<d||c>b)return!1;if(e>h){if(a>e||a<h)return!1}else if(a<e||a>h)return!1;return!0},_angleAndShifts:function(c,a,b,h,d,e,f){for(c=Math.atan2(h-
a,b-c);c>Math.PI/2;)c-=Math.PI;for(;c<-(Math.PI/2);)c+=Math.PI;h=Math.sin(c);var g=Math.cos(c);b=a=0;"Above"==e&&(a=d*h*this._scale,b=d*g*this._scale);"Below"==e&&(a=-d*h*this._scale,b=-d*g*this._scale);d=[];d.angle=f?-c:0;d.shiftX=-a;d.shiftY=b;return d},_generatePolygonPositionsForManyLabels:function(c,a,b,h,d,e,f){d=this._findCentroidForRing(c);h=d[0];var g=d[1],r=this._calcRingExtent(c);d=r.xmin;e=r.ymin;var k=r.xmax,r=r.ymax,m=(r-e)/(this._map.height*this._scale);if(!(10<(k-d)/(this._map.width*
this._scale)&&10<m)){var l=!0;if(k-d>this._map.width*this._scale||r-e>this._map.height*this._scale)l=!1;var m=this._map.width*this._scale*(l?.1875:.5),l=this._map.height*this._scale*(l?.1875:.5),q=!0,t=!0,u=0;do{g+=(u%2?-1:1)*u*l;if(this._scanRingByX(b,a,c,h,g,d,k,m,f))break;g<e&&(q=!1);g>r&&(t=!1);u++}while(q||t)}},_scanRingByX:function(c,a,b,h,d,e,f,g,k){var r=!0,m=!0,l=0,q=1E3;do{h+=(l%2?-1:1)*l*g;var t=this._movePointInsideRing(b,h,d),u=this._labelLayer._isWithinScreenArea(new D(t,d,t,d,a)),n=
this._isPointWithinRing(c,b,t,d);if(u&&n)return k.push({x:t,y:d}),!0;h<e&&(r=!1);h>f&&(m=!1);l++;q--;if(0>=q)return!0}while(r||m);return!1},_movePointInsideRing:function(c,a,b){for(var h=[],d=c.length-1,e=c[0][1]>=c[d][1]?1:-1,f=0;f<=d;f++){var g=f,k=f+1;f==d&&(k=0);var m=c[g][0],g=c[g][1],q=c[k][0],k=c[k][1],l=k>=g?1:-1;if(g<=b&&b<=k||k<=b&&b<=g)b!=g&&b!=k?(h.push((b-g)*(q-m)/(k-g)+m),e=l):b==g&&b!=k?(e!=l&&h.push(m),e=l):b!=g&&b==k?(h.push(q),e=l):b==g&&b==k&&(1==e&&h.push(m),h.push(q),e=l)}h.sort(function(a,
b){return a-b});c=h.length;if(0<c){for(f=b=a=0;f<c-1;f+=2)d=Math.abs(h[f+1]-h[f]),d>a&&(a=d,b=f);a=(h[b]+h[b+1])/2}return a},_calcRingExtent:function(c){var a,b;b=new D;for(a=0;a<c.length-1;a++){var h=c[a][0],d=c[a][1];if(void 0===b.xmin||h<b.xmin)b.xmin=h;if(void 0===b.ymin||d<b.ymin)b.ymin=d;if(void 0===b.xmax||h>b.xmax)b.xmax=h;if(void 0===b.ymax||d>b.ymax)b.ymax=d}return b},_isPointWithinPolygon:function(c,a,b,h){var d;for(d=0;d<a.rings.length;d++)if(this._isPointWithinRing(c,a.rings[d],b,h))return!0;
return!1},_isPointWithinRing:function(c,a,b,h){var d,e,f,g,k=[],m=a.length;for(c=0;c<m-1;c++)if(d=a[c][0],e=a[c][1],f=a[c+1][0],g=a[c+1][1],d!=f||e!=g){if(e==g)if(h==e)k.push(d);else continue;d==f?(e<g&&h>=e&&h<g&&k.push(d),e>g&&h<=e&&h>g&&k.push(d)):(e=(f-d)/(g-e)*(h-e)+d,d<f&&e>=d&&e<f&&k.push(e),d>f&&e<=d&&e>f&&k.push(e))}k.sort(function(a,b){return a-b});for(c=0;c<k.length-1;c++)if(d=k[c],f=k[c+1],b>=d&&b<f)if(c%2)break;else return!0;return!1},_findCentroidForRing:function(c){for(var a=c.length,
b=[0,0],h=0,d=c[0][0],e=c[0][1],f=1;f<a-1;f++){var g=c[f][0],k=c[f][1],m=c[f+1][0],q=c[f+1][1],l=(g-d)*(q-e)-(m-d)*(k-e);b[0]+=l*(d+g+m);b[1]+=l*(e+k+q);h+=l}b[0]/=3*h;b[1]/=3*h;return b},_findCentroidForFeature:function(c){for(var a=0,b=[0,0],h=0;h<c.rings.length;h++)for(var d=c.rings[h],e=d.length,f=d[0][0],g=d[0][1],k=1;k<e-1;k++){var m=d[k][0],q=d[k][1],l=d[k+1][0],t=d[k+1][1],u=(m-f)*(t-g)-(l-f)*(q-g);b[0]+=u*(f+m+l);b[1]+=u*(g+q+t);a+=u}b[0]/=3*a;b[1]/=3*a;return b},_findPlace:function(c,a,
b,h,d,e,f){if(isNaN(b)||isNaN(h))return!1;for(var g=0;g<this._placedLabels.length;g++){var m=this._placedLabels[g].angle,q=this._placedLabels[g].width*this._scale,t=this._placedLabels[g].height*this._scale,l=this._placedLabels[g].x-b,u=this._placedLabels[g].y-h;if(0===d&&0===m){if(this._findPlace2(-e*this._scale,-f*this._scale,e*this._scale,f*this._scale,l-q,u-t,l+q,u+t))return!1}else{var x=new D(-e*this._scale,-f*this._scale,e*this._scale,f*this._scale,null),w=0,n=1;0!==d&&(w=Math.sin(d),n=Math.cos(d));
var z=l*n-u*w,l=l*w+u*n,m=m-d,w=Math.sin(m),n=Math.cos(m),A=-q*n- -t*w,u=-q*w+-t*n,m=+q*n- -t*w,G=+q*w+-t*n,q=z+A,t=l-u,w=z+m,n=l-G,A=z-A,u=l+u,z=z-m,l=l+G,m=new k;m.addRing([[q,t],[w,n],[A,u],[z,l],[q,t]]);if(x.intersects(m))return!1}}for(;d>Math.PI/2;)d-=Math.PI;for(;d<-(Math.PI/2);)d+=Math.PI;g={};g.layer=c;g.text=a;g.angle=d;g.x=b;g.y=h;g.width=e;g.height=f;this._placedLabels.push(g);return!0},_findPlace2:function(c,a,b,h,d,e,f,g){return(c>=d&&c<=f||b>=d&&b<=f||c<=d&&b>=f)&&(a>=e&&a<=g||h>=e&&
h<=g||a<=e&&h>=g)?!0:!1}})})},"*noref":1}});
define("esri/layers/LabelLayer","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/i18n!dojo/cldr/nls/number dojo/number dojo/has dojox/gfx/_base ../kernel ../lang ../graphic ../PopupInfo ../ArcadeExpression ../core/timerUtils ../symbols/TextSymbol ../symbols/ShieldLabelSymbol ../geometry/Extent ../geometry/Point ../geometry/webMercatorUtils ../renderers/SimpleRenderer ../arcadeProfiles/labelingProfile ./labelLayerUtils/DynamicLabelClass ./labelLayerUtils/StaticLabelClass ./GraphicsLayer ./LabelClass".split(" "),function(t,
m,q,A,D,u,k,c,a,b,h,d,e,f,g,r,y,v,l,B,x,w,n,z,E){function G(a){return"sizeInfo"===a.type}t=t(z,{declaredClass:"esri.layers.LabelLayer",constructor:function(a){this._refreshLabels=m.hitch(this,this._refreshLabels);this.id="labels";this.featureLayers=[];this._featureLayerInfos=[];this._preparedLabels=[];this._engineType="STATIC";this._mapEventHandlers=[];a&&(a.id&&(this.id=a.id),a.mode&&(this._engineType="DYNAMIC"===a.mode.toUpperCase()?"DYNAMIC":"STATIC"))},_setMap:function(a){this._mapEventHandlers.push(a.on("extent-change",
m.hitch(this,"_handleLevelChange")));var b=this.inherited(arguments);this.refresh();return b},_unsetMap:function(){var a;for(a=0;a<this._mapEventHandlers.length;a++)A.disconnect(this._mapEventHandlers[a]);this.refresh();f.clearTimeout(this._refreshHandle);this._refreshHandle=null;this.inherited(arguments)},setAlgorithmType:function(a){this._engineType=a&&"DYNAMIC"===a.toUpperCase()?"DYNAMIC":"STATIC";this.refresh()},addFeatureLayer:function(a,b,c,f){if(!this.getFeatureLayer(a.layerId)){var e=[];e.push(a.on("update-end",
m.hitch(this,"refresh")));e.push(a.on("suspend",m.hitch(this,"refresh")));e.push(a.on("resume",m.hitch(this,"refresh")));e.push(a.on("edits-complete",m.hitch(this,"refresh")));e.push(a.on("labeling-info-change",m.hitch(this,"refresh")));e.push(a.on("time-extent-change",m.hitch(this,"refresh")));e.push(a.on("show-labels-change",m.hitch(this,"refresh")));e.push(a.on("feature-reduction-change",m.hitch(this,"refresh")));this._featureLayerInfos.push({FeatureLayer:a,LabelExpressionInfo:c,LabelingOptions:f,
LabelRenderer:b,EventHandlers:e});this.featureLayers.push(a);this.refresh()}},getFeatureLayer:function(a){var b,c;for(b=0;b<this.featureLayers.length;b++)if(c=this.featureLayers[b],void 0!==c&&c.id==a)return c;return null},removeFeatureLayer:function(a){var b;a=this.getFeatureLayer(a);if(void 0!==a&&(b=q.indexOf(this.featureLayers,a),-1<b)){this.featureLayers.splice(b,1);for(a=0;a<this._featureLayerInfos[b].EventHandlers.length;a++)A.disconnect(this._featureLayerInfos[b].EventHandlers[a]);this._featureLayerInfos.splice(b,
1);this.refresh()}},removeAllFeatureLayers:function(){var a;for(a=0;a<this.featureLayers.length;a++){for(var b=0;b<this._featureLayerInfos[a].EventHandlers.length;b++)A.disconnect(this._featureLayerInfos[a].EventHandlers[b]);this.featureLayers=[];this._featureLayerInfos=[]}this.refresh()},getFeatureLayers:function(){return this.featureLayers},getFeatureLayerInfo:function(a){var b,c;for(b=0;b<this.featureLayers.length;b++)if(c=this.featureLayers[b],void 0!==c&&c.id==a)return this._featureLayerInfos[b];
return null},refresh:function(){null==this._refreshHandle&&(this._refreshHandle=f.setTimeout(this._refreshLabels,f.priority.LOW))},_handleLevelChange:function(a){a.levelChange&&this.clear();this.refresh()},_refreshLabels:function(a){this._refreshHandle=null;var b,c,e,f,g,d=[],p,h="DYNAMIC"===this._engineType?new w:new n;if(this._map){h.setMap(this._map,this);this._preparedLabels=[];for(a=0;a<this.featureLayers.length;a++)if(c=this.featureLayers[a],c.visible&&c.showLabels&&c.visibleAtMapScale&&!c._suspended)if(b=
this._featureLayerInfos[a],g=this._convertOptions(null),b.LabelRenderer){if(d=c.labelingInfo)if(p=d[0])f=this._getLabelExpression(p),g=this._convertOptions(p);e=b.LabelRenderer;b.LabelExpressionInfo&&(f=b.LabelExpressionInfo);b.LabelingOptions&&(g=this._convertOptions(null),void 0!==b.LabelingOptions.pointPriorities&&(d=b.LabelingOptions.pointPriorities,g.pointPriorities="above-center"==d||"AboveCenter"==d||"esriServerPointLabelPlacementAboveCenter"==d?"AboveCenter":"above-left"==d||"AboveLeft"==
d||"esriServerPointLabelPlacementAboveLeft"==d?"AboveLeft":"above-right"==d||"AboveRight"==d||"esriServerPointLabelPlacementAboveRight"==d?"AboveRight":"below-center"==d||"BelowCenter"==d||"esriServerPointLabelPlacementBelowCenter"==d?"BelowCenter":"below-left"==d||"BelowLeft"==d||"esriServerPointLabelPlacementBelowLeft"==d?"BelowLeft":"below-right"==d||"BelowRight"==d||"esriServerPointLabelPlacementBelowRight"==d?"BelowRight":"center-center"==d||"CenterCenter"==d||"esriServerPointLabelPlacementCenterCenter"==
d?"CenterCenter":"center-left"==d||"CenterLeft"==d||"esriServerPointLabelPlacementCenterLeft"==d?"CenterLeft":"center-right"==d||"CenterRight"==d||"esriServerPointLabelPlacementCenterRight"==d?"CenterRight":"AboveRight"),void 0!==b.LabelingOptions.lineLabelPlacement&&(g.lineLabelPlacement=b.LabelingOptions.lineLabelPlacement),void 0!==b.LabelingOptions.lineLabelPosition&&(g.lineLabelPosition=b.LabelingOptions.lineLabelPosition),void 0!==b.LabelingOptions.labelRotation&&(g.labelRotation=b.LabelingOptions.labelRotation),
void 0!==b.LabelingOptions.howManyLabels&&(g.howManyLabels=b.LabelingOptions.howManyLabels));e instanceof E&&(f=this._getLabelExpression(e),e=new B(e.symbol),g=this._convertOptions(e));this._addLabels(c,e,f,g)}else if(d=c.labelingInfo)for(b=d.length-1;0<=b;b--)if(p=d[b])e=new E(p instanceof E?p.toJson():p),f=this._getLabelExpression(p),g=this._convertOptions(p),this._addLabels(c,e,f,g);f=h._process(this._preparedLabels);this.clear();this.drawLabels(this._map,f)}},drawLabels:function(a,b){this._scale=
(a.extent.xmax-a.extent.xmin)/a.width;var c;for(c=0;c<b.length;c++){var e=b[c],f=e.x,d=e.y,p=e.text,k=e.angle,l=e.layer.labelSymbol;"polyline"==e.layer.geometry.type&&e.layer.options.labelRotation&&l.setAngle(180/Math.PI*k);l.setText(p);l instanceof g&&(p=l.getHeight(),f-=.25*p*this._scale*Math.sin(k),d-=.33*p*this._scale);k=new h(new v(f,d,a.extent.spatialReference));k.setParentGraphic(e.layer.graphic);k.setSymbol(l);this.add(k)}},_addLabels:function(a,b,c,e){var f,g,d,p;if(this._isWithinScaleRange(b.minScale,
b.maxScale)&&c&&""!==c){var h=this._map,k=!a.url&&!h.spatialReference.equals(a.spatialReference);for(f=0;f<a.graphics.length;f++)if(g=a.graphics[f],!1!==g.visible&&!g._suspended){d=g.geometry;if(k){if(!l.canProject(d,h))continue;d=l.project(d,h)}d&&this._isWhere(b.where,g.attributes)&&this._isWithinScreenArea(d)&&(p=this._buildLabelText(c,g,a.fields,e),this._addLabel(p,b,a.renderer,g,e,d,h))}}},_isWithinScreenArea:function(a){a="point"===a.type?new y(a.x,a.y,a.x,a.y,a.spatialReference):a.getExtent();
if(void 0===a)return!1;a=this._intersects(this._map,a);return null===a||0===a.length?!1:!0},_isWithinScaleRange:function(a,b){var c=this._map.getScale();return 0<a&&c>=a||0<b&&c<b?!1:!0},_isWhere:function(a,b){try{if(!a)return!0;if(a){var c=a.split(" ");if(3===c.length)return this._sqlEquation(b[this._removeQuotes(c[0])],c[1],this._removeQuotes(c[2]));if(7===c.length){var e=this._sqlEquation(b[this._removeQuotes(c[0])],c[1],this._removeQuotes(c[2])),f=c[3],g=this._sqlEquation(b[this._removeQuotes(c[4])],
c[5],this._removeQuotes(c[6]));switch(f){case "AND":return e&&g;case "OR":return e||g}}}return!1}catch(J){console.log("Error.: can't parse \x3d "+a)}},_sqlEquation:function(a,b,c){switch(b){case "\x3d":return a==c?!0:!1;case "\x3c\x3e":return a!=c?!0:!1;case "\x3e":return a>c?!0:!1;case "\x3e\x3d":return a>=c?!0:!1;case "\x3c":return a<c?!0:!1;case "\x3c\x3d":return a<=c?!0:!1}return!1},_removeQuotes:function(a){var b=a.indexOf('"'),c=a.lastIndexOf('"');if(-1!=b&&-1!=c)return a.substr(1,a.length-
2);b=a.indexOf("'");c=a.lastIndexOf("'");return-1!=b&&-1!=c?a.substr(1,a.length-2):a},_getSizeInfo:function(a){return a?a.sizeInfo||q.filter(a.visualVariables,G)[0]:null},_addLabel:function(a,b,e,f,d,h,k){var l,p,n,q;if(a&&""!==m.trim(a)&&b){a=a.replace(/\s+/g," ");l=b.getSymbol(f);l instanceof g?(l=new g(l.toJson()),l.setVerticalAlignment("baseline"),l.setHorizontalAlignment("center")):l=l instanceof r?new r(l.toJson()):new g;l.setText(a);b.symbol=l;if(n=this._getProportionalSize(b.sizeInfo,f.attributes))l instanceof
g?l.setSize(n):l instanceof r&&(l.setWidth(n),l.setHeight(n));q=n=0;if(e){p=e.getSymbol(f);var t=this._getSizeInfo(e);if((e=t?e.getSize(f,{sizeInfo:t,resolution:k.getResolutionInMeters()}):f.size)&&null!==e)n=q=e;else if(p)if("simplemarkersymbol"==p.type)q=n=p.size;else if("picturemarkersymbol"==p.type)n=p.width,q=p.height;else if("simplelinesymbol"==p.type||"cartographiclinesymbol"==p.type)n=p.width}e={};e.graphic=f;e.options=d;e.geometry=h;e.labelRenderer=b;e.labelSymbol=l;e.labelWidth=l.getWidth()/
2;e.labelHeight=l.getHeight()/2;e.symbolWidth=c.normalizedLength(n)/2;e.symbolHeight=c.normalizedLength(q)/2;e.text=a;e.angle=l.angle;this._preparedLabels.push(e)}},_buildLabelText:function(a,c,e,f){if(f.hasExpression)return a=x.getEvalOptions({expression:f.arcadeExpr,feature:c,layer:c.getLayer(),spatialReference:this._map.spatialReference}),c=c.evaluateExpression(f.arcadeExpr,a),b.isDefined(c)?""+c:"";var g=c.attributes;return a.replace(/{[^}]*}/g,function(a){var c,h=a;for(c=0;c<e.length;c++)if("{"+
e[c].name+"}"==a){var h=g[e[c].name],k=e[c].domain;if(k&&m.isObject(k)){if("codedValue"==k.type&&f.useCodedValues)for(c=h,a=0;a<k.codedValues.length;a++)if(k.codedValues[a].code==c){h=k.codedValues[a].name;break}break}k=e[c].type;if(f.fieldInfos){var l=f.fieldInfos;for(c=0;c<l.length;c++)if("{"+l[c].fieldName+"}"==a){a=l[c].format;"esriFieldTypeDate"==k?(a="DateFormat"+d.prototype._dateFormats[a.dateFormat?a.dateFormat:"shortDate"])&&(h=b.substitute({myKey:h},"${myKey:"+a+"}")):"esriFieldTypeInteger"!=
k&&"esriFieldTypeSingle"!=k&&"esriFieldTypeSmallInteger"!=k&&"esriFieldTypeLong"!=k&&"esriFieldTypeDouble"!=k||!a||(h=u.format(h,{places:a.places}),a.digitSeparator||D.group&&(h=h.replace(new RegExp("\\"+D.group,"g"),"")));break}}break}else h="";return null==h?"":h})},_getLabelExpression:function(a){var b="";a.labelExpressionInfo?b=a.labelExpressionInfo.value||a.labelExpressionInfo.expression:this._validSyntax(a.labelExpression)&&(b=this._convertLabelExpression(a.labelExpression));return b},_validSyntax:function(a){return/^(\s*\[[^\]]+\]\s*)+$/i.test(a)},
_convertLabelExpression:function(a){return a.replace(/\[/g,"{").replace(/\]/g,"}")},_getProportionalSize:function(a,c){if(!a)return null;c=b.substitute(c,"${"+a.field+"}",{first:!0});return!(a.minSize&&a.maxSize&&a.minDataValue&&a.maxDataValue&&c)||0>=a.maxDataValue-a.minDataValue?null:(a.maxSize-a.minSize)/(a.maxDataValue-a.minDataValue)*(c-a.minDataValue)+a.minSize},_convertOptions:function(a){var b=!0,c="shortDate",f=null,g=null,d="",h=!0,k,l;if(a&&(a.format&&(c=a.format.dateFormat,f={places:a.format.places,
digitSeparator:a.format.digitSeparator}),g=a.fieldInfos,d=a.labelPlacement,null!=a.useCodedValues&&(b=a.useCodedValues),a=a.labelExpressionInfo)){var m=a.expression;m&&!a.value&&(l=!0,k=new e({expression:m,returnType:"string",profile:x}))}if("always-horizontal"==d||"esriServerPolygonPlacementAlwaysHorizontal"==d)h=!1;return{useCodedValues:b,dateFormat:c,numberFormat:f,fieldInfos:g,pointPriorities:"above-center"==d||"esriServerPointLabelPlacementAboveCenter"==d?"AboveCenter":"above-left"==d||"esriServerPointLabelPlacementAboveLeft"==
d?"AboveLeft":"above-right"==d||"esriServerPointLabelPlacementAboveRight"==d?"AboveRight":"below-center"==d||"esriServerPointLabelPlacementBelowCenter"==d?"BelowCenter":"below-left"==d||"esriServerPointLabelPlacementBelowLeft"==d?"BelowLeft":"below-right"==d||"esriServerPointLabelPlacementBelowRight"==d?"BelowRight":"center-center"==d||"esriServerPointLabelPlacementCenterCenter"==d?"CenterCenter":"center-left"==d||"esriServerPointLabelPlacementCenterLeft"==d?"CenterLeft":"center-right"==d||"esriServerPointLabelPlacementCenterRight"==
d?"CenterRight":"AboveRight",lineLabelPlacement:"above-start"==d||"below-start"==d||"center-start"==d?"PlaceAtStart":"above-end"==d||"below-end"==d||"center-end"==d?"PlaceAtEnd":"PlaceAtCenter",lineLabelPosition:"above-after"==d||"esriServerLinePlacementAboveAfter"==d||"above-along"==d||"esriServerLinePlacementAboveAlong"==d||"above-before"==d||"esriServerLinePlacementAboveBefore"==d||"above-start"==d||"esriServerLinePlacementAboveStart"==d||"above-end"==d||"esriServerLinePlacementAboveEnd"==d?"Above":
"below-after"==d||"esriServerLinePlacementBelowAfter"==d||"below-along"==d||"esriServerLinePlacementBelowAlong"==d||"below-before"==d||"esriServerLinePlacementBelowBefore"==d||"below-start"==d||"esriServerLinePlacementBelowStart"==d||"below-end"==d||"esriServerLinePlacementBelowEnd"==d?"Below":"center-after"==d||"esriServerLinePlacementCenterAfter"==d||"center-along"==d||"esriServerLinePlacementCenterAlong"==d||"center-before"==d||"esriServerLinePlacementCenterBefore"==d||"center-start"==d||"esriServerLinePlacementCenterStart"==
d||"center-end"==d||"esriServerLinePlacementCenterEnd"==d?"OnLine":"Above",labelRotation:h,howManyLabels:"OneLabel",hasExpression:l,arcadeExpr:k}}});k("extend-esri")&&m.setObject("layers.LabelLayer",t,a);return t});