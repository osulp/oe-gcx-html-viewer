// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.27/esri/copyright.txt for details.
//>>built
define("esri/geometry/mathUtils",["dojo/_base/lang","dojo/has","../kernel","./Point"],function(q,v,w,n){function r(a,b,c){return a instanceof n?new n(a.x+c*(b.x-a.x),a.y+c*(b.y-a.y)):[a[0]+c*(b[0]-a[0]),a[1]+c*(b[1]-a[1])]}function k(a,b){return 1E-8>Math.abs(a-b)}function t(a,b,c,e){var d,f=k(a[0],b[0])?1E10:(a[1]-b[1])/(a[0]-b[0]),g=k(c[0],e[0])?1E10:(c[1]-e[1])/(c[0]-e[0]),h=a[1]-f*a[0],p=c[1]-g*c[0];if(k(f,g)){if(k(h,p)){if(k(a[0],b[0]))if(Math.min(a[1],b[1])<Math.max(c[1],e[1])||Math.max(a[1],
b[1])>Math.min(c[1],e[1]))a=(a[1]+b[1]+c[1]+e[1]-Math.min(a[1],b[1],c[1],e[1])-Math.max(a[1],b[1],c[1],e[1]))/2,d=(a-h)/f;else return null;else if(Math.min(a[0],b[0])<Math.max(c[0],e[0])||Math.max(a[0],b[0])>Math.min(c[0],e[0]))d=(a[0]+b[0]+c[0]+e[0]-Math.min(a[0],b[0],c[0],e[0])-Math.max(a[0],b[0],c[0],e[0]))/2,a=f*d+h;else return null;return[d,a]}return null}k(f,1E10)?(d=a[0],a=g*d+p):k(g,1E10)?(d=c[0],a=f*d+h):(d=-(h-p)/(f-g),a=a[1]===b[1]?a[1]:c[1]===e[1]?c[1]:f*d+h);return[d,a]}var u={getLength:function(a,
b){var c=b.x-a.x;a=b.y-a.y;return Math.sqrt(c*c+a*a)},_getLength:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)},getPointOnLine:r,getMidpoint:function(a,b){return r(a,b,.5)},_equals:k,_getLineIntersection:t,getLineIntersection:function(a,b,c,e,d){(a=t([a.x,a.y],[b.x,b.y],[c.x,c.y],[e.x,e.y]))&&(a=new n(a[0],a[1],d));return a},_getLineIntersection2:function(a,b){var c=a[0],e=a[1],d=b[0],f=b[1];b=c[0];c=c[1];a=e[0];var e=e[1],g=d[0],h=d[1],d=f[0]-g,g=b-g,k=a-b,f=f[1]-h,h=c-h,l=
e-c,m=f*k-d*l;if(0===m)return!1;d=(d*h-f*g)/m;g=(k*h-l*g)/m;return 0<=d&&1>=d&&0<=g&&1>=g?[b+d*(a-b),c+d*(e-c)]:!1},_pointLineDistance:function(a,b){var c=b[0],e=b[1];b=c[0];var d=c[1],c=a[0];a=a[1];var f=e[0]-b,g=e[1]-d,h=c-b,k=a-d,e=Math.sqrt,l=Math.pow,m=e(l(f,2)+l(g,2)),h=(h*f+k*g)/(m*m),d=d+h*g;return e(l(c-(b+h*f),2)+l(a-d,2))}};v("extend-esri")&&q.mixin(q.getObject("geometry",!0,w),u);return u});