/*
	
	Copyright (c) 2016, Latitude Geographics Group Ltd.
	All rights reserved.
	       
	Redistribution is not permitted. 
	
	Use in binary form, without modification, is permitted provided that neither 
	the name of the organization nor the names of its contributors may be used 
	to endorse or promote products derived from this software without specific 
	prior written permission.
	       
	THIS SOFTWARE IS PROVIDED BY COPYRIGHT HOLDER ''AS IS'' AND ANY
	EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
	WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
	DISCLAIMED. IN NO EVENT SHALL LATITUDE GEOGRAPHICS GROUP LTD. BE LIABLE FOR ANY
	DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
	(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
	LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
	ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
	(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
	SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/


/* Begin Script: Framework.UI/framework.ui_ts_out.js ------------------------- */ 
var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},geocortex;!function(e){!function(e){!function(e){!function(e){function t(t,i,r){return n||(n=new e.AnimationFactory),n.create(t,i,r)}function i(){o=0;for(var t=r.splice(0,e.MAX_OPS_PER_FRAME),n=0;n<t.length;++n)t[n]();r.length&&!o&&setTimeout(function(){o=requestAnimationFrame(i)},0)}e.MAX_OPS_PER_FRAME=1e3;var n=null,r=[],o=0;e.getDefault=function(){return n},e.create=t,e.play=function(e,i,n){return t(e,i,n).play(n)},e.scheduleForAnimationFrame=function(e){r.push(e),o||(o=requestAnimationFrame(i))}}(e.animation||(e.animation={}))}(e.ui||(e.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(e){!function(e){!function(e){var t=function(){function t(e){this._animationProvider=e||null}return t.prototype.create=function(t,i,n){return this._isInitialized||this._init(),new e.AnimationSequence(this.getAnimationProvider(),t,i||[],n)},t.prototype.getAnimationProvider=function(){return this._animationProvider},t.prototype.setAnimationProvider=function(e){this._animationProvider=e},t.prototype._init=function(){this._isInitialized=!0,this._animationProvider||(this._animationProvider=new e.CssTransitionAnimationProvider)},t}();e.AnimationFactory=t}(e.animation||(e.animation={}))}(e.ui||(e.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(e){!function(e){!function(e){e.reservedKeyframeProperties=["className","duration","isDynamic"]}(e.animation||(e.animation={}))}(e.ui||(e.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(e){!function(e){!function(e){var t=function(){function e(){}return e.prototype.animate=function(e,t,i,n,r){throw new Error("Not implemented")},e}();e.AnimationProviderBase=t}(e.animation||(e.animation={}))}(e.ui||(e.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(e){!function(e){var t;!function(e){function i(){return e._activeAnimations.length>0}function n(){if(i())return!1;var e=r.slice();r=[];for(var t=0;t<e.length;++t)try{e[t]()}catch(e){console.error("Error during animation delegate: "+e)}return!0}e._activeAnimations=[];var r=[];e.isAnimating=i,e.checkAndRunIdle=n,e.runWhenIdle=function(e){r.push(e),setTimeout(function(){return n()},0)};var o=function(){function i(t,i,n,r){var o=this;this._frameProvider=t,this._element=i,this._frame=-1,this._frames=[],this._frameCallback=r,this._state=e.AnimationState.Idle,n&&n.forEach(function(e){return o.add(e)})}return i.prototype.resets=function(){return this._resets},i.prototype.setResets=function(e){return this._resets=e,this},i.prototype.play=function(t){var n=this;if(t&&(this._frameCallback=t),this._state!==e.AnimationState.Idle)return this._animationPromise.reject(new Error("Animation already in progress."));this._animationPromise=$.Deferred();var r=i.getActiveAnimationForElement(this._element);return r?r._animationPromise.then(function(e){return n._startAnimation()}):this._frames.length?this._startAnimation():this._isDynamic&&!this._frames.length?(this._state=e.AnimationState.Idle,this._animationPromise):void 0},i.prototype.stop=function(){return this._state=e.AnimationState.Stopped,this._complete(!1)},i.prototype.add=function(t){if("string"==typeof t){var i=null,n=t;if(n.indexOf(":")>-1){var r=n.split(":");n=r[0],i=parseInt(r[1])}this._frames.push({className:n,duration:i})}else{var o={};for(var s in t)t.hasOwnProperty(s)&&(o[s]=t[s]);this._isDynamic&&(o.isDynamic=!0),this._frames.push(o)}return this._isDynamic&&this._state===e.AnimationState.Idle&&this._tick(),this},i.prototype._startAnimation=function(){var n=this;return t._activeAnimations.push(this),this._state=e.AnimationState.Started,this._frame=-1,setTimeout(function(){n._tick()},0),this._animationPromise.then(function(e){return i.removeAnimationForElement(n._element),e})},i.prototype._tick=function(){if(this._frame>=this._frames.length)return this._isDynamic?void(this._state=e.AnimationState.Idle):void this._complete();this._applyFrame()},i.prototype._complete=function(i){setTimeout(function(){t.checkAndRunIdle()},0);var n={state:i?e.AnimationState.Stopped:e.AnimationState.Completed,element:this._element,frame:null};return this._animationPromise.resolve(n)},i.prototype._onFrameEnd=function(){++this._frame,this._state=e.AnimationState.Started,this._tick()},i.prototype._applyFrame=function(){var t=this;e.scheduleForAnimationFrame(function(){var i=-1===t._frame?null:t._frames[t._frame],n=t._frame>=t._frames.length-1?null:t._frames[t._frame+1];!t._isDynamic||n?(t._state=e.AnimationState.FrameBegin,t._frameProvider.animate(t,t._element,i,n,function(n){if(n=n||{state:e.AnimationState.FrameEnd,element:t._element,frame:i},t._frameCallback)try{t._frameCallback(n)}catch(e){return console.error("Error in animation frame callback: "+e),t._animationPromise.reject(n)}if(n){if(n.state===e.AnimationState.Error)return t._animationPromise.reject(n);if(n.state!==e.AnimationState.FrameEnd)throw new Error("Animation provider emitted an event other than an error or a frame.")}t._onFrameEnd()})):t._state=e.AnimationState.Idle})},i.getActiveAnimationForElement=function(e){return t._activeAnimations.filter(function(t){return t._element===e})[0]||null},i.removeAnimationForElement=function(e){for(var i=0;i<t._activeAnimations.length;++i)if(t._activeAnimations[i]._element===e)return t._activeAnimations.splice(i,1),!0;return!1},i}();e.AnimationSequence=o}(t=e.animation||(e.animation={}))}(e.ui||(e.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(e){!function(e){!function(e){!function(e){e[e.Idle=0]="Idle",e[e.Started=1]="Started",e[e.FrameBegin=2]="FrameBegin",e[e.FrameEnd=3]="FrameEnd",e[e.Completed=4]="Completed",e[e.Stopped=5]="Stopped",e[e.Error=6]="Error"}(e.AnimationState||(e.AnimationState={}));e.AnimationState}(e.animation||(e.animation={}))}(e.ui||(e.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(e){!function(t){!function(i){var n=function(n){function r(){n.call(this),this._poolSize=1e3,this._poolFlushFactor=.75,this._poolSizeTarget=.5,this._cachedKeyframeMap={},this._cachedKeyframesArray=[],this._cssPropertyNameMap={},this._emittedStylesheet||(this._setupPropertyMap(),this._setupStylesheet())}return __extends(r,n),r.prototype.getKeyframeStyleCount=function(){return this._emittedStylesheet.cssRules.length},r.prototype.animate=function(e,t,i,n,r){var o,s,a,c=r;if(i&&n){if(!i.className){var h=this._getCachedKeyframeData(t,n);i.className=h.emittedClassName}a=t.className.replace(i.className,"").trim()}else a=i?t.className:t.className.replace(/anim-keyframe[-\d\w]+/g,"").trim();n&&(o=n.duration,n.className?-1===t.className.indexOf(n.className)&&(a=a?a+" "+n.className:n.className):(s=this._getCachedKeyframeData(t,n),n.className=s.emittedClassName,-1===t.className.indexOf(n.className)&&(a=a?a+" "+s.emittedClassName:s.emittedClassName),++s.refCount,c=function(){r(),--s.refCount})),n&&$(t).hasClass(n.className)?setTimeout(c,10):(t.className=a.trim().replace(/\s\s+/g," "),s&&s.duration&&(o=s.duration),null==o&&(!n&&i.duration?o=i.duration:n&&(o=this._getKeyframeDuration(t),n.duration=o,s&&(s.duration=n.duration))),n||e.resets()&&(t.className=t.className.replace(i.className,"").trim()),setTimeout(c,null!=o?o:10))},r.prototype._setupPropertyMap=function(){var e,i="-{0}-".format(t.utils.detectBrowserPrefix());if(window.getComputedStyle){var n=window.getComputedStyle(document.body);e=[];for(o=0;o<n.length;++o)e.push(n[o])}else e=r._animatableProperties;["transition","transform"].forEach(function(e){return i+e});for(var o=0;o<e.length;++o){var s=e[o].replace(i,"").replace(/\-(\w)/g,function(e){return e.toUpperCase().replace("-","")});this._cssPropertyNameMap[s]=e[o]}},r.prototype._setupStylesheet=function(){var e=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(e),this._emittedStylesheet=e.sheet},r.prototype._generateFrameId=function(){return"anim-keyframe-"+e.utils.alphaNumericToken(8)},r.prototype.getCssNameForProperty=function(e){return this._cssPropertyNameMap[e]||e},r.prototype._getHashKey=function(e){var t={};for(var n in e)!e.hasOwnProperty(n)||i.reservedKeyframeProperties.indexOf(n)>-1&&"duration"!==n||(t[n]=e[n]);return String.quickHashCode(JSON.stringify(t))},r.prototype._getCachedKeyframeData=function(e,t){var i="anim-keyframe"+this._getHashKey(t),n=this._cachedKeyframeMap[i];if(n)return++n.count,n;var r=null!=t.duration;t.className=i,t.duration=null!=t.duration?t.duration:this._getKeyframeDuration(e),n={key:i,count:0,refCount:0,emittedClassName:i,frame:t,duration:t.duration,styleBlockIndex:-1},this._cachedKeyframeMap[i]=n,this._cachedKeyframesArray.push(n);var o="."+t.className+" { ";for(var s in t)t.hasOwnProperty(s)&&"className"!==s&&"duration"!==s&&(o+=(this.getCssNameForProperty(s)||s)+": "+t[s]+"; ");return r&&(o+=this.getCssNameForProperty("transitionDuration")+": "+t.duration+"ms !important; "),o+="} ",n.styleBlockIndex=this._emittedStylesheet.insertRule(o,this._emittedStylesheet.cssRules.length),this._emittedStylesheet.cssRules.length>=this._poolSize*this._poolFlushFactor&&(++n.refCount,this.flushKeyframes(),--n.refCount),n},r.prototype.flushKeyframes=function(){this._emittedStylesheet.cssRules.length,this._poolSize,this._poolSizeTarget;for(var e={},t=[],i=[],n=0;n<this._cachedKeyframesArray.length;++n){var r=this._cachedKeyframesArray[n];0===r.refCount?i.push(r):(t.push(r),e[r.key]=r)}i.length,this._swapKeyframeSets(t,e);i.length;this._removeKeyframesFromStylesheets(i)},r.prototype._swapKeyframeSets=function(e,t){this._cachedKeyframesArray=e.slice(),this._cachedKeyframeMap={};for(var i in t)this._cachedKeyframeMap[i]=t[i]},r.prototype._removeKeyframesFromStylesheets=function(e,t){void 0===t&&(t=!0);this._cachedKeyframesArray.length;for(i=0;i<e.length;++i)this._emittedStylesheet.removeRule(e[i].styleBlockIndex-i);for(var i=0;i<this._emittedStylesheet.rules.length;++i){var n=this._emittedStylesheet.rules[i].selectorText.substr(1);this._cachedKeyframeMap[n].styleBlockIndex=i}},r.prototype._getKeyframeDuration=function(e){if(!window.getComputedStyle)return null;var t=window.getComputedStyle(e),i=t.getPropertyValue("transition-duration")||"0",n=t.getPropertyValue("transition-delay")||"0",r=i.indexOf("ms")>-1?parseFloat(i):1e3*parseFloat(i);return(n.indexOf("ms")>-1?parseFloat(n):1e3*parseFloat(n))+r},r.prototype._setPoolOptions=function(e){e.hasOwnProperty("poolSize")&&(this._poolSize=e.poolSize),e.hasOwnProperty("poolFlushFactor")&&(this._poolFlushFactor=e.poolFlushFactor),e.hasOwnProperty("poolSizeTarget")&&(this._poolSizeTarget=e.poolSizeTarget)},r._animatableProperties=["background","background-color","background-position","border-bottom-color","border-bottom-width","border","border-color","border-left-color","border-left-width","border-right-color","border-right-width","border-spacing","border-top-color","border-top-width","bottom","clip","color","crop","font-size","font-weight","height","left","letter-spacing","line-height","margin","margin-bottom","margin-left","margin-right","margin-top","max-height","max-width","min-height","min-width","opacity","outline-color","outline-offset","outline-width","padding","padding-bottom","padding-left","padding-right","padding-top","right","text-indent","text-shadow","transform","transition-duration","transform-origin","top","vertical-align","visibility","width","word-spacing","z-index"],r}(i.AnimationProviderBase);i.CssTransitionAnimationProvider=n}(t.animation||(t.animation={}))}(e.ui||(e.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(t){!function(t){var i=function(){return function(e,t,i){this.pageNumber=new Observable(e||null),this.isActive=new Observable(t||!1),this.cssClass=new Observable(i||"pc-page-shortcut")}}();t.PresentableCollectionPageShortcut=i;var n=function(t){function n(e){t.call(this,null,null),this.items=new ObservableCollection,this.isSorted=new Observable(!1),this.isFiltered=new Observable(!1),this.isPaginated=new Observable(!0),this.isMultiplePages=new Observable(!0),this.numberOfItems=new Observable(0),this.currIndexStart=new Observable(0),this.currIndexStartFromOne=new Observable(1),this.currIndexEnd=new Observable(0),this.currPageNumber=new Observable(1),this.prevPageNumber=new Observable,this.nextPageNumber=new Observable,this.firstPageNumber=new Observable(1),this.lastPageNumber=new Observable(1),this.pageSize=new Observable(5),this.pageShortcuts=new ObservableCollection,this.numPageShortcuts=new Observable(10),this._itemCollection=new ObservableCollection,this.sortMethod=null,this.sortingPredicate=null,this.filterPredicate=null,this._prevIndexStart=this.currIndexStart.get(),this._prevIndexEnd=this.currIndexEnd.get(),this._prevPageNum=0,this._prevPageSize=this.pageSize.get(),this.sortMethod=this.defaultNativeSort,this.sortingPredicate=function(e,t){return e===t?0:e>t?1:-1},e&&this.attachToCollection(e),this.auto(this.isSorted,this,function(e){e?this.sortCollection():this.unsortCollection()}),this.currIndexStartFromOne.syncTransform(this.currIndexStart,function(e){return e+1}),this.auto(this.isPaginated,this,this._enableOrDisablePagination),this.auto(this.currPageNumber,this,this._handlePageChange),this.auto(this.pageSize,this,this._handlePageChange)}return __extends(n,t),n.prototype.nextPage=function(){this.currPageNumber.set(this.currPageNumber.get()+1)},n.prototype.prevPage=function(){this.currPageNumber.set(this.currPageNumber.get()-1)},n.prototype.getAt=function(e){return this._itemCollection.getAt(e)},n.prototype.getLength=function(){return this._itemCollection.getLength()},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.cleanUp()},n.prototype.cleanUp=function(){this._itemCollection&&this._itemCollection.clear(),this.items&&this.items.clear(),this._underlyingCollection&&(this._underlyingCollection.unbind(this._underlyingCollectionBindingToken),this._underlyingCollection=null,this._underlyingCollectionBindingToken=null)},n.prototype.attachToCollection=function(e){if(this.cleanUp(),!e)throw new Error("Could not attach to collection.");this._attachToUnderlyingCollection(e)},n.prototype._attachToUnderlyingCollection=function(e){this._underlyingCollection=e,this._underlyingCollectionBindingToken=this._underlyingCollection.bind(this,this._handleUnderlyingCollectionChanges),this._itemCollection.set(e.getRange(0));var t=this._itemCollection.getLength();this.numberOfItems.set(t),this.currIndexStart.set(0),this.currIndexEnd.set(this.pageSize.get()),this.currPageNumber.set(1),t<this.currIndexEnd.get()&&(this.currIndexEnd.set(t),this._prevIndexEnd=t),this._bindEntirePage(),this._maintainPageRanges()},n.prototype._bindEntirePage=function(){this._calculatePageWindow(),this.items.clear();for(var e=[],t=this.currIndexStart.get(),i=this.currIndexEnd.get(),n=t;n<i;++n){var r=this._itemCollection.getAt(n);e.push(r)}this.items.addItems(e),this._prevIndexStart=t,this._prevIndexEnd=this._prevIndexEnd},n.prototype._enableOrDisablePagination=function(e){e?(this.currIndexStart.set(this.currPageNumber.get()*this._prevPageSize),this.pageSize.set(this._prevPageSize),this._calculatePageWindow(),this._bindEntirePage(),this._maintainPageRanges()):(this.currIndexStart.set(0),this._prevPageSize=this.pageSize.get(),this.pageSize.set(Number.MAX_VALUE),this.pageShortcuts.clear(),this._calculatePageWindow(),this._bindEntirePage())},n.prototype._calculatePageWindow=function(){var e=this._itemCollection.length();this.lastPageNumber.set(Math.ceil(e/this.pageSize.get()));var t=this.currIndexStart.get(),i=this.currIndexEnd.get(),n=this.pageSize.get(),r=0,o=0,s=0;return i>e&&(i=e),this.currIndexStart.set(0>t?0:t),this.currIndexEnd.set(Math.min(this._itemCollection.getLength(),this.currIndexEnd.get())),r=this.currIndexStart.get()-this._prevIndexStart,e<=t&&(r=0,o=0,s=~~((t-e+1)/n+1),s*=-1,r=Math.max(0,s*n)),i-t<n&&e>=i&&(o=Math.min(n,e)-(i-t)),0!==s&&(r=0,o=0),{pageShift:s,startShift:r,endShift:o}},n.prototype._handlePageChange=function(e){this.isPaginated.get()?(this.pageSize.value=Math.max(0,Number(this.pageSize.get())),this.currPageNumber.value=Math.max(1,Number(this.currPageNumber.get())),isNaN(this.pageSize.get())||this.pageSize.get()<1||(this.currPageNumber.get()>this.lastPageNumber.get()&&this.lastPageNumber.get()>0?this.currPageNumber.set(this.lastPageNumber.get()):(this.currIndexStart.set((this.currPageNumber.get()-1)*this.pageSize.get()),this.currIndexEnd.set(Math.min(this._itemCollection.getLength(),this.currIndexStart.get()+this.pageSize.get())),this._prevIndexStart=this.currIndexStart.get(),this._prevIndexEnd=this.currIndexEnd.get(),this._maintainPageRanges(),this._bindEntirePage()))):e!=Number.MAX_VALUE&&(this._prevPageSize=e,this.pageSize.set(Number.MAX_VALUE))},n.prototype._maintainPageRanges=function(){var e=Math.ceil(this._itemCollection.getLength()/this.pageSize.get());this.lastPageNumber.set(e),e>1&&!this.isMultiplePages.get()?this.isMultiplePages.set(!0):e<=1&&this.isMultiplePages.get()&&this.isMultiplePages.set(!1),this.firstPageNumber.set(1);var t=this.numPageShortcuts.get(),n=Math.max(0,this.currPageNumber.get()-t/2),r=t/2-(this.currPageNumber.get()-n),o=Math.min(e,this.currPageNumber.get()+t/2+r);o-n<this.numPageShortcuts.get()&&(n-=this.numPageShortcuts.get()-(o-n))<0&&(n=0),this.pageShortcuts.clear();for(var s=[],a=n;a<o;++a)s.push(new i(a+1,!1));this.pageShortcuts.addItems(s),this._highlightCorrectPageShortcut()},n.prototype._highlightCorrectPageShortcut=function(){for(var e=0;e<this.pageShortcuts.getLength();++e){var t=this.pageShortcuts.getAt(e);t.pageNumber.get()===this.currPageNumber.get()?t.cssClass.set("pc-page-shortcut pc-shortcut-active"):t.cssClass.set("pc-page-shortcut")}},n.prototype._performWindowRecalc=function(e){if(0!==e.pageShift)this.currIndexStart.set((this.currPageNumber.get()-1)*this.pageSize.get()),this.currIndexEnd.set(this.currIndexStart.get()+this.pageSize.get()),this.currIndexStart.set(Math.max(0,this.currIndexStart.get())),this.currIndexEnd.set(Math.min(this._itemCollection.getLength(),this.currIndexEnd.get())),this._bindEntirePage();else{if(e.startShift<0){var t=Math.max(0,this._prevIndexStart+e.startShift),i=this._itemCollection.getRange(t,this._prevIndexStart-1);this.items.insertItems(0,i)}else e.startShift>0&&this.items.removeRange(0,e.startShift-1);if(e.endShift<0)this.items.removeRange(this.items.getLength()+e.endShift,this.items.getLength());else if(e.endShift>0){var n=Math.min(this._itemCollection.getLength(),this.currIndexEnd.get()+e.endShift),i=this._itemCollection.getRange(this.currIndexEnd.get(),n-1);this.items.addItems(i)}this.currIndexStart.set(this.currIndexStart.get()+e.startShift),this.currIndexEnd.set(this.currIndexEnd.get()+e.endShift),this.currIndexStart.get()<0&&(this.currIndexEnd.set(Math.min(this.items.length(),this.currIndexEnd.get()-this.currIndexStart.get())),this.currIndexStart.set(0))}this._prevIndexStart=this.currIndexStart.get(),this._prevIndexEnd=this.currIndexEnd.get()},n.prototype._handleUnderlyingCollectionChanges=function(e){if(e&&"clear"!==e.type){if("replace"===e.type)this.items.clear(),this._itemCollection.clear(),this._itemCollection.addItems(this._underlyingCollection.getRange(0)),this._calculatePageWindow(),this._bindEntirePage();else if("insert"===e.type){if(!this.isSorted.get()){var t=this._underlyingCollection.getRange(e.rangeStart,e.rangeEnd);this._itemCollection.insertItems(e.rangeStart,t);var i=n.getIntersectType(this.currIndexStart.get(),this.currIndexEnd.get(),e.rangeStart,e.rangeEnd);if(i===n.RANGE_RELATION_BEFORE||i===n.RANGE_RELATION_HEAD){var r=e.rangeEnd-e.rangeStart+1;this._prevIndexStart+=r,this._prevIndexEnd+=r,this._performWindowRecalc({pageShift:0,startShift:-r,endShift:Math.min(-r+Math.max(this.pageSize.get()-this.numberOfItems.get(),0),0)})}else if(i===n.RANGE_RELATION_CONTAINED)this._performWindowRecalc({pageShift:0,startShift:0,endShift:Math.min(-(e.rangeEnd-e.rangeStart+1)+Math.max(this.pageSize.get()-this.numberOfItems.get(),0),0)}),this.items.insertItems(e.rangeStart-this.currIndexStart.get(),t),this.currIndexEnd.get()<this.items.length()&&this.currIndexEnd.set(this.items.length());else if(i===n.RANGE_RELATION_TAIL){this.items.removeRange(e.rangeStart-this.currIndexStart.get(),this.items.getLength());var o=this.currIndexStart.get()+this.pageSize.get(),s=Math.min(o,e.rangeEnd);this._performWindowRecalc({pageShift:0,startShift:0,endShift:s-this.currIndexEnd.get()}),e.rangeStart+t.length>o&&(t=t.slice(0,o-e.rangeStart)),this.items.insertItems(e.rangeStart-this.currIndexStart.get(),t),this.currIndexEnd.get()<this.items.length()&&this.currIndexEnd.set(this.items.length())}else if(i===n.RANGE_RELATION_AFTER){var a=this.currIndexEnd.get()-this.currIndexStart.get();a<this.pageSize.get()&&this.items.addItems(t.slice(0,this.pageSize.get()-a))}else this._bindEntirePage()}}else if("append"===e.type)if(this.isSorted.get())for(l=e.rangeStart;l<=e.rangeEnd;++l){var c=this._underlyingCollection.getAt(l),h=this.getSortedPosition(c);this._itemCollection.insertItem(h,c),h<=this.currIndexStart.get()?(this.items.removeRange(this.items.getLength()-1),this.items.insertItem(0,this._itemCollection.getAt(this.currIndexStart.get()))):h>this.currIndexStart.get()&&h<=this.currIndexEnd.get()&&(this.items.removeRange(this.items.getLength()-1),this.items.insertItem(h-this.currIndexStart.get(),c))}else this._itemCollection.addItems(this._underlyingCollection.getRange(e.rangeStart,e.rangeEnd)),this._performWindowRecalc(this._calculatePageWindow());else if("remove"===e.type)if(e.rangeEnd-e.rangeStart>0){if(this.isSorted.get())for(var l=e.rangeStart;l<=e.rangeEnd;++l){u=this.getSortedPosition(this._underlyingCollection.getAt(l));this._itemCollection.removeRange(u,u)}else this._itemCollection.removeRange(e.rangeStart,e.rangeEnd);this._bindEntirePage()}else{var u=-1;if(u=this.isSorted.get()?this.getSortedPosition(this._underlyingCollection.getAt(e.rangeStart)):e.rangeStart,this._itemCollection.removeRange(u,u),u<this.currIndexStart.get())this.currIndexEnd.set(this.currIndexEnd.get()-1),this._performWindowRecalc({pageShift:0,startShift:1,endShift:1}),this.currIndexEnd.set(this.currIndexEnd.get()+1);else if(u>=this.currIndexStart.get()&&u<this.currIndexEnd.get()){var g=u-this.currIndexStart.get();this.items.removeRange(g,g),this.currIndexEnd.set(this.currIndexEnd.get()-1),this._performWindowRecalc({pageShift:0,startShift:0,endShift:1})}}}else this.items.clear(),this._itemCollection.clear(),this._calculatePageWindow();this.numberOfItems.set(this._itemCollection.getLength()),this._maintainPageRanges()},n.prototype.sortCollection=function(){var e=this._itemCollection.get();this.sortMethod(e,this.sortingPredicate||null),this._bindEntirePage()},n.prototype.unsortCollection=function(){this._itemCollection.set(this._underlyingCollection.getRange(0)),this._bindEntirePage()},n.prototype.getSortedPosition=function(e){if(!1===this.isSorted.get())return this._itemCollection.getLength();for(var t=this._itemCollection.get(),i=(this._itemCollection.getLength(),0),n=t.length-1,r=~~((n-i)/2);r<n&&r>i;){var o=t[r],s=this.sortingPredicate(e,o);if(0===this.sortingPredicate(e,t[n]))return n;if(0===this.sortingPredicate(e,t[i]))return i;if(s>0)i=r;else{if(!(s<0))return r;n=r}r=~~((n-i)/2)+i}return r},n.prototype.defaultNativeSort=function(e,t){return null===t||void 0===t?e.sort():e.sort(t)},n.getIntersectType=function(t,i,r,o){return t===r&&i===o?e.framework.ui.PresentableCollection.RANGE_RELATION_SAME:r<t&&o<=t?n.RANGE_RELATION_BEFORE:r<=t&&o<i?n.RANGE_RELATION_HEAD:r<t&&o>i?n.RANGE_RELATION_CONTAINS:r>t&&o<i?n.RANGE_RELATION_CONTAINED:r<=i&&o>i?n.RANGE_RELATION_TAIL:r>i?n.RANGE_RELATION_AFTER:n.RANGE_RELATION_SAME},n.RANGE_RELATION_SAME=0,n.RANGE_RELATION_BEFORE=1,n.RANGE_RELATION_HEAD=2,n.RANGE_RELATION_TAIL=3,n.RANGE_RELATION_AFTER=4,n.RANGE_RELATION_CONTAINS=5,n.RANGE_RELATION_CONTAINED=6,n}(e.framework.FrameworkObject);t.PresentableCollection=n}(t.ui||(t.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(e){!function(e){!function(t){var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.attach=function(t){e.prototype.attach.call(this,t),this._wireUpEventSubscriptions()},t.prototype.resolveWidget=function(t,i,n){if(e.prototype.resolveWidget.call(this,t,i,n),"RegionViewSwitcherWidget"===t){if(!i)return null;var r=this.app.viewManager.createView({markupResource:this.viewModel.regionViewSwitcherWidgetMarkup,typeName:this.viewModel.regionViewSwitcherWidgetType,libraryId:this.viewModel.regionViewSwitcherLibraryId});return r&&r.attach(i),r}return null},t.prototype._wireUpEventSubscriptions=function(){this.app.event("RegionActivatedEvent").subscribe(this,this._handleRegionActivatedEvent),this.app.event("RegionDeactivatedEvent").subscribe(this,this._handleRegionDeactivatedEvent)},t.prototype._handleRegionActivatedEvent=function(e){var t=this.viewModel.getRegionDescriptorByRegionName(e.name.toString());t&&(t.regionActive.set(!0),this.regionName&&!this.isActive&&this.app.viewManager.activateView(this))},t.prototype._handleRegionDeactivatedEvent=function(e){var t=this.viewModel.getRegionDescriptorByRegionName(e.name.toString());t&&(t.regionActive.set(!1),dojo.some(this.viewModel.regionDescriptors.get(),function(e){return!0===e.regionActive.get()})||this.regionName&&this.isActive&&this.app.viewManager.deactivateView(this))},t}(e.ViewBase);t.MultiRegionView=i}(e.MultiRegion||(e.MultiRegion={}))}(e.ui||(e.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(e){!function(e){!function(e){var t=function(){return function(e,t,i){if(this.regionActive=new Observable(!1),this.displayRegionViewSwitcher=new Observable(!1),this.viewSwitcherViewModel=new Observable(null),this.DEFAULT_REGION_TYPE="geocortex.framework.ui.MultiDivRegionAdapter",this.DEFAULT_CSS_CLASS="region-container",!e)throw new Error("RegionDescriptor Error: Cannot create region descriptor. Region name not defined.");this.regionName=e,this.regionType=t||this.DEFAULT_REGION_TYPE,this.regionCss=this.DEFAULT_CSS_CLASS+(i?" "+i.trim():"")}}();e.RegionDescriptor=t}(e.MultiRegion||(e.MultiRegion={}))}(e.ui||(e.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(e){!function(e){!function(e){var t=function(){return function(e,t){this.view=e,this.viewSwitcherViewModel=t,this.title=e.title,this.isActive=new Observable(e.isActive)}}();e.ViewSwitcherViewDescriptor=t}(e.ViewSwitcher||(e.ViewSwitcher={}))}(e.ui||(e.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(e){!function(e){!function(t){var i=function(e){function i(t,i,n){e.call(this,t,i),this.viewDescriptors=new ObservableCollection([]),this.viewSwitcherActive=new Observable(!1),this.targetRegion=n||""}return __extends(i,e),i.prototype.initialize=function(e){e&&!this.targetRegion&&(this.targetRegion=e.targetRegion),this.targetRegion?this._subscribeEvents():this.app.trace.error("ViewSwitcherViewModel: Target region not configured.")},i.prototype.getDescriptorForView=function(e){if(e)for(var t=0;t<this.viewDescriptors.getLength();++t){var i=this.viewDescriptors.getAt(t);if(i.view.id===e.id)return i}return null},i.prototype.updateViewSwitcherState=function(){this.viewSwitcherActive.set(this.checkIfSwitcherActive())},i.prototype.createDescriptorForView=function(e){return new t.ViewSwitcherViewDescriptor(e,this)},i.prototype.handleViewHostedEvent=function(e){if(e.region.name===this.targetRegion&&e.view){var t=this.createDescriptorForView(e.view);this.viewDescriptors.addItem(t),this.updateViewSwitcherState()}},i.prototype.handleViewUnHostedEvent=function(e){if(e.region.name===this.targetRegion&&e.view){var t=this.getDescriptorForView(e.view);t&&(this.viewDescriptors.removeItem(t),this.updateViewSwitcherState())}},i.prototype.handleViewActivatedEvent=function(e){var t=this.getDescriptorForView(e);t&&(this._deactivateActiveTabsInTargetRegion(),t.isActive.set(!0))},i.prototype.handleViewDeactivatedEvent=function(e){var t=this.getDescriptorForView(e);t&&t.isActive.set(!1)},i.prototype.checkIfSwitcherActive=function(){return this.viewDescriptors.length()>1},i.prototype._deactivateActiveTabsInTargetRegion=function(){this.viewDescriptors.get().forEach(function(e){return e.isActive.get()&&e.isActive.set(!1)})},i.prototype._subscribeEvents=function(){this.app.event("ViewHostedEvent").subscribe(this,this.handleViewHostedEvent),this.app.event("ViewUnhostedEvent").subscribe(this,this.handleViewUnHostedEvent),this.app.event("ViewActivatedEvent").subscribe(this,this.handleViewActivatedEvent),this.app.event("ViewDeactivatedEvent").subscribe(this,this.handleViewDeactivatedEvent)},i}(e.ViewModelBase);t.ViewSwitcherViewModel=i}(e.ViewSwitcher||(e.ViewSwitcher={}))}(e.ui||(e.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(t){!function(t){!function(t){var i=function(i){function n(){i.apply(this,arguments),this.regionDescriptors=new ObservableCollection([]),this.autoInsertViewSwitcher=!1,this.regionViewSwitcherWidgetMarkup="Framework.UI/geocortex/framework/ui/ViewSwitcher/ViewSwitcherView.html",this.regionViewSwitcherWidgetType="geocortex.framework.ui.ViewSwitcher.ViewSwitcherView",this.regionViewSwitcherLibraryId="Framework.UI",this.supportedViewSwitcherRegionAdapters=["geocortex.framework.ui.MultiDivRegionAdapter","geocortex.framework.ui.MultiViewRegionAdapter"]}return __extends(n,i),n.prototype.initialize=function(e){var t=this;e&&e.regions&&dojo.isArray(e.regions)?(this.autoInsertViewSwitcher=!!e.autoInsertViewSwitcher,e.regions.forEach(function(e){return e.regionName&&t.regionDescriptors.addItem(t.createDescriptorForRegion(e.regionName,e.regionType,e.regionCss))}),this._processRegionDescriptors()):this.app.trace.error("MultiRegionViewModel: Region configuration not found or invalid region configuration syntax.")},n.prototype.getRegionDescriptorByRegionName=function(e){for(var t=0;t<this.regionDescriptors.length();t++){var i=this.regionDescriptors.getAt(t);if(i.regionName===e)return i}return null},n.prototype.supportsViewSwitcher=function(e){return this.autoInsertViewSwitcher&&this.supportedViewSwitcherRegionAdapters.indexOf(e.regionType)>-1},n.prototype.createDescriptorForRegion=function(e,i,n){return new t.RegionDescriptor(e,i,n)},n.prototype.createViewSwitcherViewModel=function(t){return new e.framework.ui.ViewSwitcher.ViewSwitcherViewModel(this.app,this.libraryId,t)},n.prototype.processRegion=function(e){e&&this.supportsViewSwitcher(e)&&(e.viewSwitcherViewModel.set(this.createViewSwitcherViewModel(e.regionName)),e.displayRegionViewSwitcher.sync(e.viewSwitcherViewModel.get().viewSwitcherActive))},n.prototype._processRegionDescriptors=function(){var e=this;this.regionDescriptors.get().forEach(function(t){return e.processRegion(t)})},n}(e.framework.ui.ViewModelBase);t.MultiRegionViewModel=i}(t.MultiRegion||(t.MultiRegion={}))}(t.ui||(t.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(e){!function(e){!function(t){var i=function(e){function t(t,i){var n=this;e.call(this,t,i),this._siteInitializedToken=null,this._siteInitializedFailedToken=null,this.app.command("HideSplashScreen").register(this,function(){this.removeSplash()}),this.app.site&&this.app.site.isInitialized?this.removeSplash():(this._siteInitializedToken=this.app.event("SiteInitializedEvent").once(this,function(){setTimeout(function(){n.removeSplash()},0)}),this._siteInitializedFailedToken=this.app.event("SiteInitializationFailedEvent").subscribe(this,function(){setTimeout(function(){n.removeSplash()},0)}),this._siteInitializedFailedToken=this.app.event("UserSignInCancelledEvent").subscribe(this,function(){setTimeout(function(){n.removeSplash()},0)}))}return __extends(t,e),t.prototype.removeSplash=function(){var e=this;this.app.viewManager.deactivateView(this),this.app.command("HideSplashScreen").clear(),this._siteInitializedToken&&this.app.event("SiteInitializedEvent").unsubscribe(this._siteInitializedToken),this._siteInitializedFailedToken&&this.app.event("SiteInitializationFailedEvent").unsubscribe(this._siteInitializedFailedToken),setTimeout(function(){e.app.viewManager.destroyView(e)},250)},t}(e.ViewBase);t.SplashScreenView=i}(e.SplashScreen||(e.SplashScreen={}))}(e.ui||(e.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(t){!function(t){var i=function(t){function i(e){t.call(this),this._collectionsBindingToken=null,this._collectionsMembersBindingTokens=[],e&&this.setCollectionsSource(e)}return __extends(i,t),i.prototype.setCollectionsSource=function(t){if(t!==this._collections){if(null!=this._collections){if(this._collections.unbind(this._collectionsBindingToken),this._collectionsBindingToken=null,this._collections.length()>0){var i=new e.framework.events.CollectionChangedArgs;i.type="clear",i.rangeStart=0,i.rangeEnd=this.length()-1,this.collectionsChanged(i)}this._collections=null}if(null!=t){this._collections=t,this._collectionsBindingToken=this._collections.bind(this,this.collectionsChanged);var n=new e.framework.events.CollectionChangedArgs;n.rangeStart=0,n.rangeEnd=this._collections.length()-1,n.type="append",this.collectionsChanged(n)}}},i.prototype.getCollectionSource=function(){return this._collections},i.prototype.collectionsChanged=function(e){this.fixBindings(e),this.propagateEvents(e)},i.prototype.fixBindings=function(e){if("append"==e.type||"insert"==e.type)for(t=e.rangeStart;t<=e.rangeEnd;t++)this._collectionsMembersBindingTokens.splice(t,0,this._collections.getAt(t).bindingEvent.subscribe(this,this.underlyingCollectionChanged));else{if("remove"!=e.type&&"clear"!=e.type)throw"replace"==e.type?new Error("The original value is lost and we need to unbind from it"):new Error("Unknown argument type");for(var t=e.rangeStart;t<=e.rangeEnd;t++)this._collections.getAt(t).bindingEvent.unsubscribe(this._collectionsMembersBindingTokens[t]),this._collectionsMembersBindingTokens[t]=null;this._collectionsMembersBindingTokens.splice(e.rangeStart,e.rangeEnd-e.rangeStart+1)}},i.prototype.propagateEvents=function(t){var i=this._collections.length(),n=new e.framework.events.CollectionChangedArgs;n.type=t.type,n.rangeStart=0,n.rangeEnd=0;for(var r=0;r<i&&r<t.rangeStart;r++)n.rangeStart+=this._collections.getAt(r).length();for(n.rangeEnd=n.rangeStart-1;r<i&&r<=t.rangeEnd;r++)n.rangeEnd+=this._collections.getAt(r).length();n.rangeEnd>=n.rangeStart&&(n.sender=this,this.bindingEvent.publish(n))},i.prototype.underlyingCollectionChanged=function(t){var i=new e.framework.events.CollectionChangedArgs;i.sender=this,i.type=t.type;for(var n=0,r=this._collections.length(),o=0;o<r;o++){var s=this._collections.getAt(o);if(s===t.sender){"append"==t.type&&o!=r-1?i.type="insert":"clear"==t.type&&1!=r&&(i.type="remove"),i.rangeStart=n+t.rangeStart,i.rangeEnd=n+t.rangeEnd;break}n+=s.length()}this.bindingEvent.publish(i)},i.prototype.isEmpty=function(){if(null==this._collections)return!0;for(var e=this._collections.length(),t=0;t<e;t++)if(!this._collections.getAt(t).isEmpty())return!1;return!0},i.prototype.length=function(){if(null==this._collections)return 0;for(var e=0,t=this._collections.length(),i=0;i<t;i++)e+=this._collections.getAt(i).length();return e},i.prototype.contains=function(e){if(null==this._collections)return!1;for(var t=this._collections.length(),i=0;i<t;i++)if(this._collections.getAt(i).contains(e))return!0;return!1},i.prototype.getAt=function(e){if(null==this._collections)return null;for(var t=this._collections.length(),i=0;i<t;i++){var n=this._collections.getAt(i),r=n.length();if(!(e>=r))return n.getAt(e);e-=r}throw new Error("Index out of bounds")},i.prototype.getRange=function(e,t){if(null==this._collections)return[];void 0===t&&(t=Number.POSITIVE_INFINITY);for(var i=null,n=0,r=this._collections.length(),o=0;o<r&&t>=0;o++,e-=n,t-=n){var s=this._collections.getAt(o);if((n=s.length())>e){var a=s.getRange(e>0?e:0,t);i=null==i?a:i.concat(a)}}return i},i.prototype.indexOf=function(e){if(null==this._collections)return-1;for(var t=0,i=this._collections.length(),n=0;n<i;n++){var r=this._collections.getAt(n),o=r.indexOf(e);if(-1!=o)return t+o;t+=r.length()}return-1},i.prototype.get=function(){throw new Error("Raw array manipulation not supported")},i.prototype.getItems=function(){throw new Error("Raw array manipulation not supported")},i.prototype.getLength=function(){return this.length()},i.prototype.addItems=function(e){throw new Error("Operation not supported")},i.prototype.addItem=function(e){throw new Error("Operation not supported")},i.prototype.insertItems=function(e,t){throw new Error("Operation not supported")},i.prototype.insertItem=function(e,t){throw new Error("Operation not supported")},i.prototype.removeItem=function(e){throw new Error("Operation not supported")},i.prototype.removeAt=function(e){throw new Error("Operation not supported")},i.prototype.removeRange=function(e,t){throw new Error("Operation not supported")},i.prototype.clear=function(){throw new Error("Operation not supported")},i.prototype.set=function(e){throw new Error("Operation not supported")},i.prototype.sync=function(e){throw new Error("Operation not supported")},i.prototype.equals=function(e){throw new Error("Operation not supported")},i}(ObservableCollection);t.ObservableCollectionAggregator=i}(t.ui||(t.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(e){!function(e){var t=function(e){function t(t,i,n){e.call(this,t),this.delegateGetter=i||null,n&&(this.cacheDelegateResults=n)}return __extends(t,e),t.prototype.get=function(){var t=e.prototype.get.call(this);if(null!=t||this._delegateNullCached)return t;if(this.delegateGetter){var i=this.delegateGetter();return this.cacheDelegateResults&&i!==t&&e.prototype.set.call(this,i),this.cacheDelegateNull&&(this._delegateNullCached=!0),i}return null},t.prototype.clear=function(){e.prototype.set.call(this,null),delete this._delegateNullCached},t}(Observable);e.LazyObservable=t,t.prototype.cacheDelegateResults=!1,t.prototype.cacheDelegateNull=!1,t.prototype._delegateNullCached=!1}(e.ui||(e.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(t){!function(t){var i=function(t){function i(e,i){t.call(this),this._source=null,this._sourceBindingToken=null,this._filter=this._defaultFilter,this._indexMap=[],e&&this.setSource(e),i&&this.setFilter(i)}return __extends(i,t),i.prototype.setSource=function(t){if(t!==this._source){if(this._source&&this._sourceBindingToken){if(this._source.unbind(this._sourceBindingToken),this._sourceBindingToken=null,this.length()>0){var i=new e.framework.events.CollectionChangedArgs;i.type="clear",i.rangeStart=0,i.rangeEnd=this.length()-1,this.bindingEvent.publish(i)}this._source=null}null!=t&&(this._source=t,this._sourceBindingToken=this._source.bind(this,this._sourceChanged),this._redo())}},i.prototype.getSource=function(){return this._source},i.prototype.setFilter=function(e){e||(e=this._defaultFilter),e!==this._filter&&(this._filter=e,this._source&&this._redo())},i.prototype.getFilter=function(){return this._filter===this._defaultFilter?null:this._filter},i.prototype.refresh=function(){this._redo()},i.prototype._redo=function(t){void 0===t&&(t=new e.framework.events.CollectionChangedArgs),t.sender=this,0!=this._indexMap.length&&(t.type="clear",t.rangeStart=0,t.rangeEnd=this._indexMap.length-1,this.bindingEvent.publish(t)),this._indexMap.length=0;for(var i=0,n=this._source?this._source.length():0;i<n;i++)this._filter(this._source.getAt(i))&&this._indexMap.push(i);0!=this._indexMap.length&&(t.type="append",t.rangeStart=0,t.rangeEnd=this._indexMap.length-1,this.bindingEvent.publish(t))},i.prototype._sourceChanged=function(t){var i,n,r=new e.framework.events.CollectionChangedArgs;switch(r.sender=this,t.type){case"set":return void this._redo(r);case"append":for(r.type="append",r.rangeStart=this._indexMap.length,i=t.rangeStart;i<=t.rangeEnd;i++)this._filter(this._source.getAt(i))&&this._indexMap.push(i);r.rangeEnd=this._indexMap.length-1;break;case"insert":for(n=t.rangeStart>0?this._findIndexMapIx(t.rangeStart):0;n<this._indexMap.length&&this._indexMap[n]<t.rangeStart;)n++;for(r.type=n<this._indexMap.length?"insert":"append",r.rangeStart=n,i=t.rangeStart;i<=t.rangeEnd;i++)this._filter(this._source.getAt(i))&&this._indexMap.splice(n++,0,i);r.rangeEnd=n-1;for(var o=t.rangeEnd-t.rangeStart+1;n<this._indexMap.length;n++)this._indexMap[n]+=o;break;case"remove":for(n=t.rangeStart>0?this._findIndexMapIx(t.rangeStart):0;n<this._indexMap.length&&this._indexMap[n]<t.rangeStart;)n++;for(r.rangeStart=n;n<this._indexMap.length&&this._indexMap[n]<=t.rangeEnd;)n++;r.rangeEnd=n-1,r.type=0==r.rangeStart&&r.rangeEnd==this._indexMap.length-1?"clear":"remove";break;case"clear":if(0==this.length())return;r.type="clear",r.rangeStart=0,r.rangeEnd=this._indexMap.length;break;default:throw new Error("Unhandled case: "+t.type)}switch(r.rangeStart<=r.rangeEnd&&this.bindingEvent.publish(r),r.type){case"remove":this._indexMap.splice(r.rangeStart,r.rangeEnd-r.rangeStart+1);var s=t.rangeEnd-t.rangeStart+1;for(n=t.rangeStart;n<this._indexMap.length;n++)this._indexMap[n]-=s;break;case"clear":this._indexMap.length=0}},i.prototype._findIndexMapIx=function(e){for(var t=0,i=this._indexMap.length-1,n=0;t<=i;)if(n=Math.floor((t+i)/2),this._indexMap[n]>e)i=n-1;else{if(!(this._indexMap[n]<e))return n;t=n+1}return n},i.prototype._defaultFilter=function(e){return!0},i.prototype.isEmpty=function(){return 0==this._indexMap.length},i.prototype.length=function(){return this._indexMap.length},i.prototype.contains=function(e){return this._source&&this._filter(e)&&this._source.contains(e)},i.prototype.getAt=function(e){return this._source?this._source.getAt(this._indexMap[e]):null},i.prototype.getRange=function(e,t){(null===t||void 0===t||t>=this._indexMap.length)&&(t=this._indexMap.length-1);for(var i=new Array(t-e+1),n=e;n<=t;n++)i[n-e]=this.getAt(n);return i},i.prototype.indexOf=function(e){if(!this._source||!this._filter(e))return-1;var t=this._source.indexOf(e);return-1==t?-1:this._findIndexMapIx(t)},i.prototype.get=function(){throw new Error("Raw array manipulation not supported")},i.prototype.getItems=function(){throw new Error("Raw array manipulation not supported")},i.prototype.getLength=function(){return this._indexMap.length},i.prototype.addItems=function(e){throw new Error("Operation not supported")},i.prototype.addItem=function(e){throw new Error("Operation not supported")},i.prototype.insertItems=function(e,t){throw new Error("Operation not supported")},i.prototype.insertItem=function(e,t){throw new Error("Operation not supported")},i.prototype.removeItem=function(e){throw new Error("Operation not supported")},i.prototype.removeAt=function(e){throw new Error("Operation not supported")},i.prototype.removeRange=function(e,t){throw new Error("Operation not supported")},i.prototype.clear=function(){throw new Error("Operation not supported")},i.prototype.set=function(e){throw new Error("Operation not supported")},i.prototype.sync=function(e){throw new Error("Operation not supported")},i.prototype.equals=function(e){throw new Error("Operation not supported")},i}(ObservableCollection);t.FilterableCollection=i}(t.ui||(t.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(t){!function(t){!function(t){var i=function(){function t(t,i,n){this.id=new Observable,this.id.set(e.framework.utils.alphaNumericToken()),this.displayName=new Observable(null===t||void 0===t?"":t),this.isSelected=new Observable(!!n),this.item=i||null}return t.prototype.getId=function(){return this.id.get()},t}();t.SelectorItemViewModel=i}(t.Selector||(t.Selector={}))}(t.ui||(t.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(t){!function(t){!function(t){var i=function(e){function t(){e.apply(this,arguments),this._itemViews=[]}return __extends(t,e),t.prototype.attach=function(t){var i=this;e.prototype.attach.call(this,t),this.viewModel.singleSelect||dojo.attr(this.selectElement,"multiple","multiple"),t.openState.bind(this,function(e){if(e){var t={view:i,onOtherInteracted:function(e){return i.viewModel.openState.set(!1)}};i.app.command("TapToDismiss").execute(t),i.viewModel.openState.get()&&!i.viewModel.showNativeSelect.get()&&i.positionCustomSelect()}}),t.items.bind(this,function(e){if(["remove"].indexOf(e.type)>-1)for(var t=e.rangeStart;t<=e.rangeEnd;++t)for(var n=i._itemViews.length;n--;){var r=i._itemViews[n];r&&r.viewModel==e.sender.getAt(t)&&(i.app.viewManager.destroyView(r),i._itemViews.splice(n,1))}})},t.prototype.handleSelectionChange=function(e,t,i){for(var n=this,r=t,o=[],s=0;s<r.options.length;++s)o.push(r.options[s]);return o.filter(function(e){return e.selected&&null==e.attributes["data-is-dummy"]}).length<1?(this.viewModel.unselectAll(),!0):(setTimeout(function(){var e=n.viewModel.items.get(),t=n.viewModel.getSelectedItems();e.map(function(e){t.indexOf(e)>-1?n.viewModel.selectItem(e.item,e):n.viewModel.unselectItem(e.item,e)}),n.viewModel.singleSelect&&n.viewModel.toggleOpenState()}),!0)},t.prototype.handleClickItem=function(e,t,i){return i===this.viewModel.dummyItem?(this.viewModel.unselectAll(),void this.viewModel.toggleOpenState()):(this.viewModel.handleSelectionChange(null,i),this.viewModel.singleSelect&&this.viewModel.toggleOpenState(),!0)},t.prototype.handleClickSelector=function(e,t,i){return this.viewModel.toggleOpenState(),!0},t.prototype.positionCustomSelect=function(){var e=this.customSelect;e.style.top="auto",e.style.left="auto",e.style.opacity="0",this.app.viewManager.activateView(this);var t=document.body.clientWidth,i=document.body.clientHeight,n=e.getBoundingClientRect();n.left+n.width>t&&(e.style.left=-1*n.width+"px"),n.top+n.height>i&&(e.style.top=-1*n.height+"px"),e.style.opacity="1"},t.prototype.resolveWidget=function(e,t,i){if("SelectorItemWidget"===e){var n=this.viewModel.templatePath;n||(n="Framework.UI/geocortex/framework/ui/Selector/DefaultItemTemplate.html");var r=this.app.viewManager.createView({typeName:"geocortex.framework.ui.ViewBase",markupResource:n,isVisible:!0,libraryId:this.libraryId});return r.parentView=this,r.attach(t),this._itemViews.push(r),r}},t}(e.framework.ui.ViewBase);t.SelectorView=i}(t.Selector||(t.Selector={}))}(t.ui||(t.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(e){!function(e){!function(t){var i=function(e){function i(i,n,r,o){void 0===r&&(r=!0),void 0===o&&(o=!0),e.call(this,i,n),this.displayNameField="displayName",this.dummyItemText=null,this.templatePath=null,this.mobileMode=!0,this.singleSelect=r,this._selectedItems=new ObservableCollection,this.showSelectorHeader=new Observable(!1),this.showNativeSelect=new Observable(o),this.selectorText=new Observable(""),this.noItemsText=new Observable(""),this.openState=new Observable(this.showNativeSelect.get()&&r),this.items=new ObservableCollection,this.selectedItems=new ObservableCollection,this.dummyItem=new t.SelectorItemViewModel}return __extends(i,e),i.prototype.toggleOpenState=function(){this.showNativeSelect.get()&&this.singleSelect||this.openState.set(!this.openState.get())},i.prototype.setCollection=function(e,t,i){this.syncToken&&(this._underlyingCollection.unbind(this.syncToken),this.syncToken=null),this.displayNameField=t,this.templatePath=i,this.showSelectorHeader.set(!this.showNativeSelect.get()||!this.singleSelect),this._underlyingCollection=e,this.syncToken=this._underlyingCollection.bind(this,this.handleUnderlyingCollectionChange),this.clear(),this.items.addItems(this._adapt(this._underlyingCollection.get()))},i.prototype.clear=function(){this.items.clear(),this.dummyItemText&&(this.dummyItem.displayName.set(this.dummyItemText),this.items.addItem(this.dummyItem))},i.prototype._adapt=function(e){var i=this,n=[];return e.forEach(function(e){var r=new t.SelectorItemViewModel;e[i.displayNameField].isObservable?r.displayName.set(e[i.displayNameField].get()):r.displayName.set(e[i.displayNameField]),r.item=e,n.push(r)}),n},i.prototype.handleUnderlyingCollectionChange=function(e){var t;switch(e.type){case"append":t=this._adapt(this._underlyingCollection.getRange(e.rangeStart,e.rangeEnd)),this.items.addItems(t);break;case"insert":t=this._adapt(this._underlyingCollection.getRange(e.rangeStart,e.rangeEnd)),this.items.insertItems(e.rangeStart,t);break;case"remove":this.items.removeRange(e.rangeStart,e.rangeEnd);break;case"clear":this.clear();break;case"set":t=this._adapt(this._underlyingCollection.getRange(e.rangeStart,e.rangeEnd)),this.clear(),this.items.addItems(t)}},i.prototype.getViewModelForItem=function(e){for(var t=0;t<this.items.getLength();++t)if(this.items.getAt(t).item===e)return this.items.getAt(t);return null},i.prototype.getViewModelForSelectedItem=function(e){for(var t=0;t<this._selectedItems.getLength();++t)if(this._selectedItems.getAt(t).item===e)return this._selectedItems.getAt(t);return null},i.prototype.getSelectedItems=function(){return this._selectedItems.get().slice()},i.prototype.hasItemViewModelFor=function(e){return!!this.getViewModelForItem(e)},i.prototype.selectItem=function(e,t){this._setItemSelectedState(e,t,!0)},i.prototype.unselectItem=function(e,t){this._setItemSelectedState(e,t,!1)},i.prototype.onSelectItem=function(e){},i.prototype.onUnselectItem=function(e){},i.prototype.handleSelectionChange=function(e,t){!0===e?this.selectItem(null,t):!t.isSelected.get()?this.selectItem(null,t):this.unselectItem(null,t)},i.prototype.unselectAll=function(e){var t=this;this._selectedItems.get().forEach(function(i){"string"!=typeof i&&!0===i.isSelected.get()&&(e&&e===i||t.unselectItem(null,i))}),this.openState.get()&&!this.singleSelect&&this.openState.set(!1)},i.prototype._setItemSelectedState=function(e,t,i){if(!(t=t||this.getViewModelForItem(e)))throw new Error("Tried to select an item in a Framework UI selector but item was not part of bound collection.");this.singleSelect&&i&&this.unselectAll(t),t.isSelected.get()!==i&&(t.isSelected.set(i),i?this._selectedItems.addItem(t):this._selectedItems.removeItem(t),i&&this.onSelectItem?this.onSelectItem(t):!i&&this.onUnselectItem&&this.onUnselectItem(t))},i}(e.ViewModelBase);t.SelectorViewModel=i}(e.Selector||(e.Selector={}))}(e.ui||(e.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(t){!function(t){var i=function(t){function i(e,i){t.call(this,e),this._sorter=null,i&&this.setSortFunction(i)}return __extends(i,t),i.prototype.setSortFunction=function(i){if(this._sorter!==i){var n=this.length();if(i){var r=new e.framework.events.CollectionChangedArgs;r.type="clear",r.rangeStart=0,r.rangeEnd=n-1,r.sender=this,this.bindingEvent.publish(r)}this._sorter=i,i&&(t.prototype.get.call(this).sort(this._sorter),(r=new e.framework.events.CollectionChangedArgs).type="append",r.rangeStart=0,r.rangeEnd=n-1,r.sender=this,this.bindingEvent.publish(r))}},i.prototype.getSortFunction=function(){return this._sorter},i.prototype.addItems=function(e){if(this._sorter)if(0===this.length())t.prototype.addItems.call(this,e.concat().sort(this._sorter));else for(var i=0;i<e.length;i++)this.addItem(e[i]);else t.prototype.addItems.call(this,e)},i.prototype.addItem=function(e){if(this._sorter){for(var i=0,n=t.prototype.length.call(this);i<n&&this._sorter(t.prototype.getAt.call(this,i),e)<0;i++);i>=n?t.prototype.addItem.call(this,e):t.prototype.insertItem.call(this,i,e)}else t.prototype.addItem.call(this,e)},i.prototype.set=function(e){this._sorter?t.prototype.set.call(this,e.concat().sort(this._sorter)):t.prototype.set.call(this,e)},i.prototype.sync=function(e){this._unsortedSyncToken&&this._unsortedSyncSource&&(this._unsortedSyncSource.bindingEvent.unsubscribe(this._unsortedSyncToken),this._unsortedSyncSource=null,this._unsortedSyncToken=null),e&&e.bindingEvent&&(this.clear(),this.addItems(e.getRange(0,e.length()-1)),this._unsortedSyncSource=e,this._unsortedSyncToken=e.bindingEvent.subscribe(this,this._onSyncedCollectionChanged))},i.prototype._onSyncedCollectionChanged=function(e){switch(e.type){case"set":this.set(e.sender.getRange(e.rangeStart,e.rangeEnd));break;case"append":case"insert":this.addItems(e.sender.getRange(e.rangeStart,e.rangeEnd));break;case"remove":for(var t=e.rangeStart;t<=e.rangeEnd;t++)this.removeItem(e.sender.getAt(t));break;case"clear":this.clear();break;default:throw new Error("Unhandled case: "+e.type)}},i.prototype.insertItems=function(e,t){throw new Error("Direct insertion is not supported")},i.prototype.insertItem=function(e,t){throw new Error("Direct insertion is not supported")},i}(ObservableCollection);t.OrderedCollection=i}(t.ui||(t.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(e){!function(e){!function(t){var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.attach=function(t){var i=this;e.prototype.attach.call(this,t),this.app.event("DataFrameOpenedEvent").subscribe(this,function(){return i._yield(function(){return i._updateLabels()})}),this.app.event("PanelResizeEndEvent").subscribe(this,function(){return i._yield(function(){return i._updateLabels()})}),this.viewModel.activeViewDescriptors.bind(this,function(e){var t=i.viewModel.activeViewDescriptors.getLength();"remove"===e.type?t-=e.rangeEnd-e.rangeStart+1:"clear"===e.type&&(t=0),i._updateLabels(t)})},t.prototype.handleClickTab=function(e,t,i){var n=i.view;n&&this.app.viewManager.activateView(n)},t.prototype._updateLabels=function(e){e=e||this.viewModel.activeViewDescriptors.getLength();var t=$(this.buttonTabStripElement);t.width()/e>75?t.removeClass("no-label"):t.addClass("no-label")},t.prototype._yield=function(e){return setTimeout(e,0)},t}(e.ViewBase);t.ButtonTabStripView=i}(e.ViewContainer||(e.ViewContainer={}))}(e.ui||(e.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(e){!function(e){!function(e){function t(e,i,n){if(i)if(e.allLibrariesLoaded)for(var r=0;r<n.length;r++){var o=n[r].get();o&&o.length>9&&"@language"==o.substring(0,9)&&n[r].set(e.getResource(i,o.substring(1)))}else e.event("ViewerLibrariesDownloadedEvent").once(this,function(){t(e,i,n)})}function i(e,t,n,r){if(t&&n&&r)if(e.allLibrariesLoaded)r(n&&n.length>9&&"@language"==n.substring(0,9)?e.getResource(t,n.substring(1)):n);else var o=e.event("ViewerLibrariesDownloadedEvent").subscribe(this,function(){e.event("ViewerLibrariesDownloadedEvent").unsubscribe(o),i(e,t,n,r)})}e.localizeObservables=t,e.localizeString=i}(e.stringLocalizer||(e.stringLocalizer={}))}(e.ui||(e.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(e){!function(e){!function(e){function t(e,t,i,n){var r=!1,o="tapToDismiss"+t.id;t.root===e.target?r=!0:$(e.target).parents().each(function(e){this===t.root&&(r=!0)}),r?i?n&&n(e):t.app.viewManager.deactivateView(t):($(document.body).off("mousedown."+o+" touchstart."+o),i&&i(e))}var i=null;e.detectBrowserPrefix=function(e){if(!e&&null!==i)return i;var t=e?e.toLowerCase():navigator.userAgent.toLowerCase(),n=/opera/.exec(t)||/(msie|trident)/.exec(t)||/firefox/.exec(t)||/(chrome|safari|webkit)/.exec(t),r={opera:"O",chrome:"webkit",safari:"webkit",webkit:"webkit",firefox:"Moz",msie:"ms",trident:"ms"},o=n?r[n[0]]||"":"";return e||(i=o),o},e.tapToDismissThis=function(e,i,n){if(e){var r="tapToDismiss"+e.id;$(document.body).off("mousedown."+r+" touchstart."+r),$(document.body).on("mousedown."+r+" touchstart."+r,function(r){return t(r,e,i,n)})}}}(e.utils||(e.utils={}))}(e.ui||(e.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(e){!function(e){!function(e){var t=function(){return function(e,t,i,n){this.containerViewId=e,this.viewId=t,this.xButtonClicked=i,this.backButtonClicked=n}}();e.ViewContainerViewClosedEventArgs=t}(e.ViewContainer||(e.ViewContainer={}))}(e.ui||(e.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(t){!function(t){!function(i){var n=function(t){function i(e,i){t.call(this,e,i),this._hasDiscoveredRegions=!1,this._active=!1,this._keyDownEventToken=null,this._activatingForViewInContainer=!1,this.headerInsertDomElement=new Observable(null),this.footerInsertDomElement=new Observable(null),this.scrollContainerTop=new Observable(0),this.scrollContainerBottom=new Observable(0);this.app.eventRegistry.event("ViewActivatedInContainerEvent").subscribe(this,this._handleViewActivatedInContainerEvent);this.app.event("RegionActivatedEvent").subscribe(this,this.handleRegionActivatedEvent),this.app.event("RegionDeactivatedEvent").subscribe(this,this.handleRegionDeactivatedEvent),this.app.event("ViewDimensionsChangedEvent").subscribe(this,this.resize),this.app.event("SiteInitializedEvent").once(this,this.delayedResize)}return __extends(i,t),i.prototype.attach=function(e){var i=this;t.prototype.attach.call(this,e),this.title.sync(this.viewModel.viewTitle),this.headerInsertDomElement.sync(this.viewModel.headerInsertDomElement),this.footerInsertDomElement.sync(this.viewModel.footerInsertDomElement),this.viewModel.headerIsVisible.bind(this,function(e){return i.delayedResize()}),this.delayedResize()},i.prototype.resize=function(){if(this.headerElement&&this.scrollRegionElement&&this.containerElement){var e=$(this.scrollRegionElement),t=$(this.headerElement),i=$(this.footerElement),n=t.length&&"none"!==t.css("display")?t.outerHeight():0,r=i.length&&"none"!==i.css("display")?i.outerHeight():0;"relative"!==e.css("position")&&e.css("top",n+"px"),e.css("bottom",r+"px")}},i.prototype.delayedResize=function(){var e=this;setTimeout(function(){e.resize()},1)},i.prototype.getZerothView=function(){for(var e=0;e<this.viewModel.viewDescriptors.getLength();++e){var t=this.viewModel.viewDescriptors.getAt(e);if(0===this.viewModel.getViewPriority(t.view.id))return t.view}return null},i.prototype.activated=function(){if(t.prototype.activated.call(this),!this._active&&this.viewModel&&!this._activatingForViewInContainer){this._activatingForViewInContainer=!1,this._active=!0;var e=this.getZerothView();if(e&&!e.isActive)this.app.viewManager.activateView(e),this._active=!0;else var i=this.viewModel.viewDescriptors.bind(this,function(e){var t=e.sender.getAt(0);t&&0===this.viewModel.getViewPriority(t.view.id)&&(t.view.isActive||this.app.viewManager.activateView(t.view),this.viewModel.viewDescriptors.unbind(i))})}this.viewModel&&this.viewModel.showOrHideCloseButtons(),this.viewModel&&this.viewModel.closeOnEscape&&(this._keyDownEventToken=dojo.connect(document,"keydown",this,this._documentKeyDown)),this.app.event("ViewContainerActivatedEvent").publish(this),this.delayedResize()},i.prototype.deactivated=function(){t.prototype.deactivated.call(this),this._activatingForViewInContainer=!1,this._keyDownEventToken&&(dojo.disconnect(this._keyDownEventToken),this._keyDownEventToken=null),this.app.event("ViewContainerDeactivatedEvent").publish(this)},i.prototype.activateContainer=function(){this._active=!0,this.regionName&&this.app.viewManager.activateView(this)},i.prototype.deactivateContainer=function(){this._active=!1,this.app.viewManager.deactivateView(this)},i.prototype.handleScrollChange=function(e,t,i){i.getDescriptorForActiveView(i.currentView).scrollTop=t.scrollTop},i.prototype.handleRegionActivatedEvent=function(e){this.viewModel&&e.name===this.viewModel.regionName.get()&&this.activateContainer()},i.prototype.handleRegionDeactivatedEvent=function(e){this.viewModel&&e.name===this.viewModel.regionName.get()&&this.deactivateContainer()},i.prototype.handleClickBack=function(e,t,i){if(i.currentView){var n=i.currentView;this._closeCurrentView(i),this._broadcastClosedEvent(n,!1,!0)}},i.prototype.handleClickClose=function(e,t,i){if(i.currentView){var n=i.currentView;this._closeCurrentView(i),this._broadcastClosedEvent(n,!0,!1)}},i.prototype.handleClickTab=function(e,t,i){var n=i.view;n&&this.app.command("ActivateView").execute(n.id)},i.prototype.handleClickCloseTab=function(e,t,i){var n=i.view;n&&this.app.viewManager.destroyView(n)},i.prototype._documentKeyDown=function(e){if(27===e.keyCode&&this.viewModel){var t=this.viewModel.currentView;this._closeCurrentView(this.viewModel),this._broadcastClosedEvent(t,!0,!1)}},i.prototype._handleViewActivatedInContainerEvent=function(e){var t=this;this._activatingForViewInContainer=!1;var i=null;if(this.viewModel&&(i=this.viewModel.getDescriptorForActiveView(e))){this._activatingForViewInContainer=!0,this.regionName&&this.app.viewManager.activateView(this);var n=void 0===i.scrollTop?0:i.scrollTop;"FeatureDetailsView"!=i.view.id&&"EditorView"!=i.view.id&&setTimeout(function(){dojo.style(t.scrollRegionElement,"scrollTop",n),t.scrollRegionElement.scrollTop=n},0),this.delayedResize()}},i.prototype._closeCurrentView=function(e){e.closeCurrentView()},i.prototype._broadcastClosedEvent=function(t,i,n){var r=new e.framework.ui.ViewContainer.ViewContainerViewClosedEventArgs(this.id,t.id,i,n);this.app.event("ViewContainerViewClosedEvent").publish(r)},i}(t.ViewBase);i.ViewContainerView=n}(t.ViewContainer||(t.ViewContainer={}))}(t.ui||(t.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(t){!function(t){!function(i){var n=function(t){function n(e,i){t.call(this,e,i),this.regionName=new Observable(""),this.regionType=new Observable(null),this.headerIsVisible=new Observable(!0),this.titleBarIsVisible=new Observable(!0),this.hasCustomHeaderComponent=new Observable(!1),this.hasCustomFooterComponent=new Observable(!1),this.showingBackButton=new Observable(!0),this.showBusyIndicator=new Observable(!1),this.showHostedViews=new Observable(!1),this.showingXButton=new Observable(!0),this.containerTitle=new Observable(""),this.containerManagedTitle=new Observable(""),this.viewTitle=new Observable(""),this.closeTitle=new Observable(""),this.backTitle=new Observable(""),this.fullTitle=new Observable(""),this.viewDescriptors=new ObservableCollection,this.activeViewDescriptors=new ObservableCollection,this.headerInsertDomElement=new Observable(null),this.footerInsertDomElement=new Observable(null),this.managedViewsOnly=!1,this.defaultViewIconUri=null,this._viewDescriptorConstructor=null,this._activeViews={},this._insertedViews=[],this._ordering={},this._backButtonOnRootView=!0,this._showBackButton=!0,this._showBackButtonAsX=!0,this._originalHeaderIsVisibleSetting=!1,this._showHeaderForStandaloneViews=!1,this._fullTitleFormatString="{0} - {1}";var n=this.app.viewManager.getExistingRegionByName(this.regionName.get());if(n)for(var r=0;r<n.views.length;++r)this._addOrderedView(this.createDescriptorForView(n.views[r]));this.app.event("ViewHostedEvent").subscribe(this,this.handleViewHosted),this.app.event("ViewUnhostedEvent").subscribe(this,this.handleViewUnhosted),this.app.event("ViewActivatedEvent").subscribe(this,this.handleViewActivatedEvent),this.app.event("ViewDeactivatedEvent").subscribe(this,this.handleViewDeactivatedEvent)}return __extends(n,t),n.prototype.initialize=function(e){var t=this;this.regionName.set(e.containerRegionName),this.regionType.set(e.containerRegionType||"geocortex.framework.ui.MultiDivRegionAdapter"),this.containerTitle.set(e.containerTitle||null),this.containerManagedTitle.set(e.containerManagedTitle||null),this.defaultViewIconUri=e.defaultViewIcon||null,this.containerTitle.get()&&this.viewTitle.sync(this.containerTitle),null!==e.headerIsVisible&&void 0!==e.headerIsVisible?this._originalHeaderIsVisibleSetting=!!e.headerIsVisible:this._originalHeaderIsVisibleSetting=!0,this._showHeaderForStandaloneViews=!!e.showHeaderForStandaloneViews,this.headerIsVisible.set(this._originalHeaderIsVisibleSetting),this.showHostedViews.set(!!e.showHostedViews),this._ordering=e.ordering||{},this._backButtonOnRootView=e.backButtonOnRootView,this._showBackButtonAsX=e.showBackButtonAsX,this.closeOnEscape=!!e.closeOnEscape,this._viewDescriptorConstructor=e.viewDescriptor||null;var i=function(n,r){if(e["{0}InsertMarkup".format(n)])try{var o={markupResource:e["{0}InsertMarkup".format(n)],typeName:e["{0}InsertType".format(n)]};if(e["{0}InsertLibraryId".format(n)]){if(!t.app.allLibrariesLoaded){var s=t.app.event("ViewerLibrariesDownloadedEvent").subscribe(t,function(){t.app.event("ViewerLibrariesDownloadedEvent").unsubscribe(s),i(n,r)});return}o.libraryId=e["{0}InsertLibraryId".format(n)]}var a=t.app.viewManager.createView(o);a.attach(t),t._insertedViews.push(a),r.set(a.root)}catch(e){t.app.trace.error("Could not create view {0} container insert: {1}".format(n,e.toString()))}};i("header",this.headerInsertDomElement),i("footer",this.footerInsertDomElement)},n.prototype.createDescriptorForView=function(e){if(this._viewDescriptorConstructor){var t=dojo.getObject(this._viewDescriptorConstructor);if(t)return new t(e,this);this.app.trace.error("Couldn't find viewDescriptor type: "+this._viewDescriptorConstructor),this._viewDescriptorConstructor=null}return new i.ViewDescriptor(e,this)},n.prototype.getDescriptorForView=function(e){for(var t=0;t<this.viewDescriptors.getLength();++t){var i=this.viewDescriptors.getAt(t);if(i.view===e)return i}return null},n.prototype.getDescriptorForActiveView=function(e){for(var t=0;t<this.activeViewDescriptors.getLength();++t){var i=this.activeViewDescriptors.getAt(t);if(i.view===e)return i}return null},n.prototype.handleViewHosted=function(e){if((!this.managedViewsOnly||e.view.isManaged)&&e.region.name===this.regionName.get()){var t=this.getDescriptorForView(e.view);t||(t=this.createDescriptorForView(e.view),this._addOrderedView(t),this.showHostedViews.get()&&(this.getDescriptorForActiveView(e.view)||this.insertActiveViewDescriptor(t)))}},n.prototype.handleViewUnhosted=function(e){if(e.region.name===this.regionName.get()){var t=this.getDescriptorForView(e.view);t&&(this.viewDescriptors.removeItem(t),this.showHostedViews.get()||this.activeViewDescriptors.removeItem(t))}},n.prototype.handleViewActivatedEvent=function(e){if(!this.managedViewsOnly||e.isManaged){var t=this.app.viewManager.getRegionForViewId(e.id);if(t&&t.name===this.regionName.get()){var i=this.getDescriptorForView(e);i||(i=this.createDescriptorForView(e),this._addOrderedView(i)),this._activeViews[e.id]=!0,this.app.trace.debug("--- Activated view {0}".format(e.id)),this.activateViewInContainer(e)}}},n.prototype.handleViewDeactivatedEvent=function(e){var t=this.app.viewManager.getRegionForViewId(e.id);if(t&&t.name===this.regionName.get()){this._activeViews[e.id]=!1;var i=this.getDescriptorForView(e);i&&!this.showHostedViews.get()&&this.activeViewDescriptors.removeItem(i),this.app.trace.debug("--- Deactivated view {0}".format(e.id)),this.deactivateViewInContainer(e)}},n.prototype.activateViewInContainer=function(t){this.deactivateViews(),this.currentView=t;var i=this.getDescriptorForView(t);i?(i.isActive.set(!0),i.cssClass.set("tab-active")):t.isManaged&&((i=this.createDescriptorForView(t)).isActive.set(!0),i.cssClass.set("tab-active"),this._addOrderedView(i)),this.getDescriptorForActiveView(t)||this.insertActiveViewDescriptor(i),this.app.event("ViewActivatedInContainerEvent").publish(t),!this._showHeaderForStandaloneViews||t instanceof e.framework.ui.ViewContainer.ViewContainerView?this.headerIsVisible.set(this._originalHeaderIsVisibleSetting):this.headerIsVisible.set(!0),this.showOrHideCloseButtons(),this.containerTitle.get()||this.viewTitle.sync(t.title),this.backTitle.set(this.app.getResource(this.libraryId,"language-framework-ui-view-container-view-back").format(this.viewTitle.get())),this.closeTitle.set(this.app.getResource(this.libraryId,"language-framework-ui-view-container-view-close").format(this.viewTitle.get())),this.showBusyIndicator.sync(t.isBusy)},n.prototype.showOrHideCloseButtons=function(){var e=this.viewDescriptors.getAt(0);e&&(this.currentView===e.view?this._backButtonOnRootView?(this.showingXButton.set(this._showBackButtonAsX),this.showingBackButton.set(!this._showBackButtonAsX)):(this.showingBackButton.set(!1),this.showingXButton.set(!1)):this.currentView&&this.currentView.hasOwnProperty("configuration")&&this.currentView.configuration.hasOwnProperty("showXButton")?(this.showingXButton.set(this.currentView.configuration.showXButton),this.showingBackButton.set(!1)):(this.showingXButton.set(this._showBackButtonAsX),this.showingBackButton.set(!this._showBackButtonAsX)))},n.prototype.deactivateViewInContainer=function(e){var t=this.getDescriptorForView(e);t&&(t.isActive.set(!1),t.cssClass.set("tab-inactive"),this.showHostedViews.get()||this.activeViewDescriptors.removeItem(t)),this.showOrHideCloseButtons()},n.prototype.closeCurrentView=function(){var e=this.getDescriptorForView(this.currentView);e&&!this.showHostedViews.get()&&this.activeViewDescriptors.removeItem(e),this.deactivateCurrentView()},n.prototype.deactivateCurrentView=function(){this.currentView&&this.app.viewManager.deactivateView(this.currentView)},n.prototype.deactivateViews=function(){for(var e=0;e<this.viewDescriptors.getLength();++e){var t=this.viewDescriptors.getAt(e);t.isActive.set(!1),t.cssClass.set("tab-inactive")}},n.prototype.getViewPriority=function(e){return this._ordering.hasOwnProperty(e)?parseInt(this._ordering[e]):null},n.prototype._addOrderedView=function(e){var t=e.view,i=this.getDescriptorForActiveView(t);if(!this._ordering)return this.viewDescriptors.addItem(e),void(t.isActive&&!i&&this.insertActiveViewDescriptor(e));var n=t.id;if(!n)return this.viewDescriptors.addItem(e),void(t.isActive&&!i&&this.insertActiveViewDescriptor(e));var r=this.getViewPriority(n);if(e.priority=r,null===r||void 0===r)return e.priority=this.activeViewDescriptors.getLength()+1,this.viewDescriptors.addItem(e),void(t.isActive&&!i&&this.insertActiveViewDescriptor(e));for(var o=!1,s=0;s<this.viewDescriptors.getLength();++s){var a=this.viewDescriptors.getAt(s).view,c=this.getViewPriority(a.id);if(null===c||r<=c){o=!0,this.viewDescriptors.insertItem(s,e);break}}o||this.viewDescriptors.addItem(e),t.isActive&&this.insertActiveViewDescriptor(e)},n.prototype.insertActiveViewDescriptor=function(e){for(var t=0;t<this.activeViewDescriptors.getLength();++t){var i=this.activeViewDescriptors.getAt(t);if(e.priority<i.priority)return void this.activeViewDescriptors.insertItem(t,e)}this.activeViewDescriptors.addItem(e)},n.prototype.dispose=function(){for(var e=0;e<this._insertedViews.length;e++){var t=this._insertedViews[e];this.app.viewManager.destroyView(t)}this._insertedViews.length=0},n}(t.ViewModelBase);i.ViewContainerViewModel=n}(t.ViewContainer||(t.ViewContainer={}))}(t.ui||(t.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(e){!function(e){!function(t){var i=function(){return function(t,i){if(this.containerTitle=new Observable(null),this.isBusy=new Observable(null),this.isActive=new Observable(!1),this.cssClass=new Observable("tab-inactive"),this.view=t,this.iconUri=t.iconUri.get()?t.iconUri:new Observable(i.defaultViewIconUri),this.title=t.title,this.isBusy=t.isBusy,this.priority=1,t instanceof e.ViewContainer.ViewContainerView==1){var n=t;this.containerTitle.set(n.viewModel.containerTitle.get()),n.viewModel.containerManagedTitle.get()&&(this.title=n.viewModel.containerManagedTitle)}}}();t.ViewDescriptor=i}(e.ViewContainer||(e.ViewContainer={}))}(e.ui||(e.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={}));var geocortex;!function(e){!function(e){!function(e){!function(t){var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.handleClickTab=function(e,t,i){var n=i.view;n&&this.app.viewManager.activateView(n)},t}(e.ViewBase);t.ViewSwitcherView=i}(e.ViewSwitcher||(e.ViewSwitcher={}))}(e.ui||(e.ui={}))}(e.framework||(e.framework={}))}(geocortex||(geocortex={})),geocortex||(geocortex={}),geocortex.essentialsHtmlViewer||(geocortex.essentialsHtmlViewer={}),geocortex.essentialsHtmlViewer.version="2.8.0.0003",geocortex.resourceManager.register("Framework.UI","inv","Framework.UI/geocortex/framework/ui/MultiRegion/MultiRegionView.html","html","PGRpdiBjbGFzcz0ibXVsdGktcmVnaW9uLXZpZXciIGRhdGEtYmluZGluZz0ie0B2YXI6IG11bHRpUmVnaW9uVmlld0VsZW1lbnR9e0Bzb3VyY2U6IHJlZ2lvbkRlc2NyaXB0b3JzfSI+DQogICAgPGRpdiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiByZWdpb25EZXNjcmlwdG9yc317Y2xhc3M6IHJlZ2lvbkNzc30iPg0KICAgICAgICA8ZGl2IGNsYXNzPSJyZWdpb24tdmlldy1zd2l0Y2hlciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGRpc3BsYXlSZWdpb25WaWV3U3dpdGNoZXJ9e0B3aWRnZXQ6IFJlZ2lvblZpZXdTd2l0Y2hlcldpZGdldH17QHdpZGdldC1jb250ZXh0OiB2aWV3U3dpdGNoZXJWaWV3TW9kZWx9e0B3aWRnZXQtcmVxdWlyZWQ6IGZhbHNlfSI+PC9kaXY+DQogICAgICAgIDxkaXYgY2xhc3M9InJlZ2lvbiIgZGF0YS1iaW5kaW5nPSJ7ZGF0YS1yZWdpb24tbmFtZTogcmVnaW9uTmFtZX17ZGF0YS1yZWdpb24tYWRhcHRlcjogcmVnaW9uVHlwZX0iPjwvZGl2Pg0KICAgIDwvZGl2Pg0KPC9kaXY+DQo="),geocortex.resourceManager.register("Framework.UI","inv","Framework.UI/geocortex/framework/ui/Selector/DefaultItemTemplate.html","html","PGxpIGNsYXNzPSJzZWxlY3Rvci1pdGVtIHNpbmdsZS1zZWxlY3QiPg0KICAgIDxkaXYgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrSXRlbX17QGV2ZW50LXRvdWNoc3RhcnQ6IGhhbmRsZUNsaWNrSXRlbX0iPg0KICAgICAgICA8aW5wdXQgY2xhc3M9InNlbGVjdG9yLWNoZWNrYm94IiBkYXRhLWJpbmRpbmc9IntpZDogaWR9e2NoZWNrZWQ6IGlzU2VsZWN0ZWR9IiB0eXBlPSJjaGVja2JveCIgLz4NCiAgICAgICAgPGxhYmVsIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkaXNwbGF5TmFtZX17Zm9yOiBpZH0iPjwvbGFiZWw+DQogICAgPC9kaXY+DQo8L2xpPg0K"),geocortex.resourceManager.register("Framework.UI","inv","Framework.UI/geocortex/framework/ui/Selector/SelectorView.html","html","PGRpdiBjbGFzcz0iZnVpLXNlbGVjdG9yIiBkYXRhLWJpbmRpbmc9IntAY2xhc3MtZXhwYW5kZWQ6IG9wZW5TdGF0ZX0iPg0KDQogICAgPGRpdiBjbGFzcz0iZnVpLXNlbGVjdG9yLWhlYWRlciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHNob3dTZWxlY3RvckhlYWRlcn17QG5vY2xhc3Mtbm8tc2VsZWN0b3ItaXRlbXM6IGl0ZW1zfSI+DQogICAgICAgIDxidXR0b24gZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrU2VsZWN0b3J9e0B2aXNpYmxlOiBpdGVtc30iPjxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBzZWxlY3RvclRleHR9Ij48L3NwYW4+PC9idXR0b24+DQogICAgICAgIDxzcGFuIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGl0ZW1zfXtAdGV4dDogbm9JdGVtc1RleHR9Ij48L3NwYW4+DQogICAgPC9kaXY+DQogICAgPGRpdiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogb3BlblN0YXRlfSI+DQogICAgICAgIDx1bCBjbGFzcz0iZnVpLXNlbGVjdG9yLWJvZHkiIGRhdGEtYmluZGluZz0ie0BoaWRkZW46c2hvd05hdGl2ZVNlbGVjdH17QHNvdXJjZTogaXRlbXN9e0BjbGFzcy1leHBhbmRlZDogb3BlblN0YXRlfXtAdmFyOiBjdXN0b21TZWxlY3R9Ij4NCiAgICAgICAgICAgIDxsaSBjbGFzcz0iZnVpLXNlbGVjdG9yLWl0ZW0iIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGl0ZW1zfXtAd2lkZ2V0OiBTZWxlY3Rvckl0ZW1XaWRnZXR9e0B3aWRnZXQtY29udGV4dDogQGNvbnRleHR9e0B3aWRnZXQtcmVwbGFjZTogdHJ1ZX0iIC8+DQogICAgICAgIDwvdWw+ICAgICAgDQogICAgICAgIDxzZWxlY3QgY2xhc3M9ImZ1aS1zZWxlY3Rvci1ib2R5IiBkYXRhLWJpbmRpbmc9IntAY2xhc3MtZXhwYW5kZWQ6IG9wZW5TdGF0ZX17QHZpc2libGU6IHNob3dOYXRpdmVTZWxlY3R9e0B2YXI6IHNlbGVjdEVsZW1lbnR9e0Bzb3VyY2U6IGl0ZW1zfXtAdmFsdWU6IF9zZWxlY3RlZEl0ZW1zfQ0KICAgICAgICAgICAge0BldmVudC1vbmNoYW5nZTogaGFuZGxlU2VsZWN0aW9uQ2hhbmdlfSI+DQogICAgICAgICAgICA8b3B0aW9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGl0ZW1zfXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tJdGVtfXtAdGV4dDogZGlzcGxheU5hbWV9e0BhdHRhY2g6QGNvbnRleHR9Ij48L29wdGlvbj4NCiAgICAgICAgPC9zZWxlY3Q+ICANCiAgICA8L2Rpdj4NCjwvZGl2Pg0K"),geocortex.resourceManager.register("Framework.UI","inv","Framework.UI/geocortex/framework/ui/SplashScreen/SplashScreenView.html","html","PGRpdiBjbGFzcz0ic3BsYXNoLXNjcmVlbiI+PC9kaXY+DQo="),geocortex.resourceManager.register("Framework.UI","inv","Framework.UI/geocortex/framework/ui/ViewContainer/ButtonTabStripView.html","html","DQo8ZGl2IGNsYXNzPSJidXR0b24tdGFiLXN0cmlwIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBidXR0b25UYWJTdHJpcEVsZW1lbnR9Ij4NCiAgICA8ZGl2IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGFjdGl2ZVZpZXdEZXNjcmlwdG9yc30iPg0KICAgICAgICA8YnV0dG9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGFjdGl2ZVZpZXdEZXNjcmlwdG9yc317QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrVGFifXtjbGFzc05hbWU6IGNzc0NsYXNzfXt0aXRsZTogdGl0bGV9Ij4NCiAgICAgICAgICAgIDxpbWcgY2xhc3M9InRhYi1zdHJpcC1pY29uIiBkYXRhLWJpbmRpbmc9IntzcmM6IGljb25Vcml9e0B2aXNpYmxlOiBpY29uVXJpfSIgYWx0PSIgIiAvPg0KICAgICAgICAgICAgPHAgY2xhc3M9InRhYi1zdHJpcC1sYWJlbCIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHRpdGxlfXtAdGV4dDogdGl0bGV9Ij48L3A+DQogICAgICAgIDwvYnV0dG9uPg0KICAgIDwvZGl2Pg0KPC9kaXY+DQo="),geocortex.resourceManager.register("Framework.UI","inv","Framework.UI/geocortex/framework/ui/ViewContainer/ViewContainerView.html","html","PGRpdiBjbGFzcz0idmlldy1jb250YWluZXItdmlldyIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogY29udGFpbmVyRWxlbWVudH0iPg0KICAgIDxkaXYgY2xhc3M9InBhbmVsLWhlYWRlciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGhlYWRlcklzVmlzaWJsZX17QHZhcjogaGVhZGVyRWxlbWVudH0iPg0KDQogICAgICAgIDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHRpdGxlQmFySXNWaXNpYmxlfSI+DQogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJwYW5lbC1oZWFkZXItYnV0dG9uIHJpZ2h0IGNsb3NlLTE2IiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc2hvd2luZ1hCdXR0b259e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0Nsb3NlfXt0aXRsZTogY2xvc2VUaXRsZX0iPjwvYnV0dG9uPg0KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0icGFuZWwtaGVhZGVyLWJ1dHRvbiBsZWZ0IGJhY2stMTYiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBzaG93aW5nQmFja0J1dHRvbn17QGV2ZW50LWNsaWNrOiBoYW5kbGVDbGlja0JhY2t9e3RpdGxlOiBiYWNrVGl0bGV9Ij48L2J1dHRvbj4NCg0KICAgICAgICAgICAgPGgyIGNsYXNzPSJwYW5lbC10aXRsZSI+DQogICAgICAgICAgICAgICAgPGltZyBzcmM9IlJlc291cmNlcy9JbWFnZXMvbG9hZGVyLXNtYWxsLmdpZiIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHNob3dCdXN5SW5kaWNhdG9yfSIgYWx0PSIgIiAvPg0KICAgICAgICAgICAgICAgIDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBjb250YWluZXJUaXRsZX17QHZpc2libGU6IGNvbnRhaW5lclRpdGxlfSI+PC9zcGFuPg0KICAgICAgICAgICAgICAgIDxzcGFuIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBjb250YWluZXJUaXRsZX0iPiZuYnNwOy0mbmJzcDs8L3NwYW4+DQogICAgICAgICAgICAgICAgPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHZpZXdUaXRsZX17QHZpc2libGU6IHZpZXdUaXRsZX0iPjwvc3Bhbj4NCiAgICAgICAgICAgIDwvaDI+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgZGF0YS1iaW5kaW5nPSJ7QGRvbTogaGVhZGVySW5zZXJ0RG9tRWxlbWVudH0iPjwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPGRpdiBjbGFzcz0icGFuZWwtc2Nyb2xsLWNvbnRhaW5lciIgZGF0YS1iaW5kaW5nPSJ7ZGF0YS1yZWdpb24tbmFtZTogcmVnaW9uTmFtZX17ZGF0YS1yZWdpb24tYWRhcHRlcjogcmVnaW9uVHlwZX17QHZhcjogc2Nyb2xsUmVnaW9uRWxlbWVudH17QGV2ZW50LW9uc2Nyb2xsOiBoYW5kbGVTY3JvbGxDaGFuZ2V9Ij48L2Rpdj4NCg0KICAgIDxkaXYgY2xhc3M9InBhbmVsLWZvb3RlciIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogZm9vdGVyRWxlbWVudH17QHZpc2libGU6IGZvb3Rlckluc2VydERvbUVsZW1lbnR9IiBzdHlsZT0icG9zaXRpb246IGFic29sdXRlIj4NCiAgICAgICAgPGRpdiBjbGFzcz0icGFuZWwtZm9vdGVyLWlubmVyIiBkYXRhLWJpbmRpbmc9IntAZG9tOiBmb290ZXJJbnNlcnREb21FbGVtZW50fSI+PC9kaXY+DQogICAgPC9kaXY+DQo8L2Rpdj4NCg=="),geocortex.resourceManager.register("Framework.UI","inv","Framework.UI/geocortex/framework/ui/ViewSwitcher/ViewSwitcherView.html","html","PGRpdiBjbGFzcz0idGFiLWNvbnRhaW5lciI+DQogICAgPHVsIGNsYXNzPSJ0YWItY29udHJvbCIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogdmlld0Rlc2NyaXB0b3JzfSI+DQogICAgICAgIDxsaSBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiB2aWV3RGVzY3JpcHRvcnN9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja1RhYn0iPg0KICAgICAgICAgICAgPGEgZGF0YS1iaW5kaW5nPSJ7QG5vY2xhc3MtdGFiOiBpc0FjdGl2ZX17QGNsYXNzLXRhYi1hY3RpdmU6IGlzQWN0aXZlfSI+DQogICAgICAgICAgICAgICAgPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHRpdGxlfXt0aXRsZTogdGl0bGV9Ij48L3NwYW4+DQogICAgICAgICAgICA8L2E+DQogICAgICAgIDwvbGk+DQogICAgPC91bD4NCjwvZGl2Pg0K"),geocortex.resourceManager.register("Framework.UI","inv","Framework.UI/geocortex/framework/ui/Selector/CSS/common.css","css","LyouZnVpLXNlbGVjdG9yLWJvZHkgew0KICAgIGRpc3BsYXk6IG5vbmU7DQp9DQoNCiAgICAuZnVpLXNlbGVjdG9yLWJvZHkuZXhwYW5kZWQgew0KICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICB9Ki8NCg=="),geocortex.resourceManager.register("Framework.UI","inv","invariant","json","eyJsYW5ndWFnZS1mcmFtZXdvcmstdWktdmlldy1jb250YWluZXItdmlldy1jbG9zZSI6IkNsb3NlIHswfSIsImxhbmd1YWdlLWZyYW1ld29yay11aS12aWV3LWNvbnRhaW5lci12aWV3LWJhY2siOiJHbyBCYWNrIHswfSJ9"),geocortex.framework.notifyLibraryDownload("Framework.UI");