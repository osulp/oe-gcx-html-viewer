<!doctype html>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <title>Oregon Explorer Viewer</title>

        <link rel="shortcut icon" href="favicon.ico"/>
        <link rel="apple-touch-icon" href="Resources/Images/Icons/iOS/apple-touch-icon.png"/>
        <link rel="apple-touch-icon" sizes="72x72" href="Resources/Images/Icons/iOS/apple-touch-icon-72x72.png"/>
        <link rel="apple-touch-icon" sizes="76x76" href="Resources/Images/Icons/iOS/apple-touch-icon-ipad.png"/>
        <link rel="apple-touch-icon" sizes="114x114" href="Resources/Images/Icons/iOS/apple-touch-icon-114x114.png"/>
        <link rel="apple-touch-icon" sizes="120x120" href="Resources/Images/Icons/iOS/apple-touch-icon-iphone-retina.png"/>
        <link rel="apple-touch-icon" sizes="144x144" href="Resources/Images/Icons/iOS/apple-touch-icon-144x144.png"/>
        <link rel="apple-touch-icon" sizes="152x152" href="Resources/Images/Icons/iOS/apple-touch-icon-ipad-retina.png"/>

        <link rel="stylesheet" href="Resources/Styles/splash.css" />
    </head>
    <body>       
        <!-- Splash Screen Markup -->
        <div class="splash-overlay">
            <div class="splash-plate">
                <img class="splash-image" src="Resources/Images/Custom/splash-logo.png" alt="" />
                <p class="splash-paragraph">This application uses licensed Geocortex Essentials technology for the Esri<sup>&reg;</sup> ArcGIS platform. All rights reserved.</p>
                <img src="Resources/Images/loader-small.gif" alt="Loader" />
            </div>
        </div>

        <!-- Standard GVH Embed with custom Defaults.json.js configuration -->
        <script src="Resources/Compiled/loader.js"></script>
        <script>

           /*var viewerConfig = {
                "viewerConfigUri": "Libraries/Custom/Config/Defaults.json.js"
            };*/
            
            var geocortexUseLocalEsriApi = true;

            //Clear any hard coded viewer config.  If this is not clearned
            //short short url and global unique ID's will not work.
            var viewerConfig = {
               //"configurations": {"default": "Resources/Config/Default/" + shellName + ".json.js"},
                "viewerConfigUri": null                
                //"configurations": { "default": "Resources/Config/Default/Tablet.json.js" }
            };

            geocortex._configDomains = {
                "http://tools.oregonexplorer.info": true,
                "http://lib-arcgis2.library.oregonstate.edu": true
            };
                        
            // To load external css or javascript files in your project add the URL for each resource to this array
            var resources = ["./Resources/Styles/Custom/Desktop.css"];
            
           // geocortex.framework.application.loading
            var viewerInitOptions = { "onSiteInitialized": SiteLoaded };

            var loader = new geocortex.essentialsHtmlViewer.ViewerLoader();
            loader.resourceSet.find("dependencies").prepend(resources);
            //loader.resourceSet.find("css").prepend(resources);
            loader.loadAndInitialize(viewerInitOptions);
                                    
            function SiteLoaded() {

                if (geocortex ==  null)
                    return;
                
                var app = geocortex.framework.applications[0];

                app.eventRegistry.event("MapExtentChangedEvent").once(null, DoInitialExtent);                
            }
                        
            function DoInitialExtent() {
                var app = geocortex.framework.applications[0];

                if (app == null)
                    return;

                app.command("ZoomToInitialExtent").execute();
            }


        </script>

        <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-13183466-3']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

        </script>

    </body>
</html>